// 2026/1/1 05:22:36 https://raw.githubusercontent.com/ElementRef/AboutConfig/main/script/peng.ym.sub.store.js
(()=>{var r$=Object.create,EA=Object.defineProperty,n$=Object.getOwnPropertyDescriptor,i$=Object.getOwnPropertyNames,s$=Object.getPrototypeOf,a$=Object.prototype.hasOwnProperty,ko=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,n)=>(typeof require<"u"?require:e)[n]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')}),ce=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),u$=(t,e,n,u)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of i$(e))!a$.call(t,s)&&s!==n&&EA(t,s,{get:()=>e[s],enumerable:!(u=n$(e,s))||u.enumerable});return t},Yr=(t,e,n)=>(n=t!=null?r$(s$(t)):{},u$(e||!t||!t.__esModule?EA(n,"default",{value:t,enumerable:!0}):n,t)),bA=ce(t=>{"use strict";(function(e){function n(){}function u(){}var s=String.fromCharCode,p={}.toString,y=p.call(e.SharedArrayBuffer),g=p(),E=e.Uint8Array,m=E||Array,D=E?ArrayBuffer:m,a=D.isView||function(U){return U&&"length"in U},H=p.call(D.prototype);D=u.prototype;var W=e.TextEncoder,w=new(E?Uint16Array:m)(32);n.prototype.decode=function(U){if(!a(U)){var tt=p.call(U);if(tt!==H&&tt!==y&&tt!==g)throw TypeError("Failed to execute 'decode' on 'TextDecoder': The provided value is not of type '(ArrayBuffer or ArrayBufferView)'");U=E?new m(U):U||[]}for(var J=tt="",N=0,Q=U.length|0,it=Q-32|0,q,L,V=0,lt=0,mt,Rt=0,Et=-1;N<Q;){for(q=N<=it?32:Q-N|0;Rt<q;N=N+1|0,Rt=Rt+1|0){switch(L=U[N]&255,L>>4){case 15:if(mt=U[N=N+1|0]&255,mt>>6!==2||247<L){N=N-1|0;break}V=(L&7)<<6|mt&63,lt=5,L=256;case 14:mt=U[N=N+1|0]&255,V<<=6,V|=(L&15)<<6|mt&63,lt=mt>>6===2?lt+4|0:24,L=L+256&768;case 13:case 12:mt=U[N=N+1|0]&255,V<<=6,V|=(L&31)<<6|mt&63,lt=lt+7|0,N<Q&&mt>>6===2&&V>>lt&&1114112>V?(L=V,V=V-65536|0,0<=V&&(Et=(V>>10)+55296|0,L=(V&1023)+56320|0,31>Rt?(w[Rt]=Et,Rt=Rt+1|0,Et=-1):(mt=Et,Et=L,L=mt))):(L>>=8,N=N-L-1|0,L=65533),V=lt=0,q=N<=it?32:Q-N|0;default:w[Rt]=L;continue;case 11:case 10:case 9:case 8:}w[Rt]=65533}if(J+=s(w[0],w[1],w[2],w[3],w[4],w[5],w[6],w[7],w[8],w[9],w[10],w[11],w[12],w[13],w[14],w[15],w[16],w[17],w[18],w[19],w[20],w[21],w[22],w[23],w[24],w[25],w[26],w[27],w[28],w[29],w[30],w[31]),32>Rt&&(J=J.slice(0,Rt-32|0)),N<Q){if(w[0]=Et,Rt=~Et>>>31,Et=-1,J.length<tt.length)continue}else Et!==-1&&(J+=s(Et));tt+=J,J=""}return tt},D.encode=function(U){U=U===void 0?"":""+U;var tt=U.length|0,J=new m((tt<<1)+8|0),N,Q=0,it=!E;for(N=0;N<tt;N=N+1|0,Q=Q+1|0){var q=U.charCodeAt(N)|0;if(127>=q)J[Q]=q;else{if(2047>=q)J[Q]=192|q>>6;else{t:{if(55296<=q)if(56319>=q){var L=U.charCodeAt(N=N+1|0)|0;if(56320<=L&&57343>=L){if(q=(q<<10)+L-56613888|0,65535<q){J[Q]=240|q>>18,J[Q=Q+1|0]=128|q>>12&63,J[Q=Q+1|0]=128|q>>6&63,J[Q=Q+1|0]=128|q&63;continue}break t}q=65533}else 57343>=q&&(q=65533);!it&&N<<1<Q&&N<<1<(Q-7|0)&&(it=!0,L=new m(3*tt),L.set(J),J=L)}J[Q]=224|q>>12,J[Q=Q+1|0]=128|q>>6&63}J[Q=Q+1|0]=128|q&63}}return E?J.subarray(0,Q):J.slice(0,Q)},W||(e.TextDecoder=n,e.TextEncoder=u)})(typeof global>"u"?typeof self>"u"?t:self:global)}),Ff=ce((t,e)=>{(function(){var n,u="4.17.21",s=200,p="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",y="Expected a function",g="Invalid `variable` option passed into `_.template`",E="__lodash_hash_undefined__",m=500,D="__lodash_placeholder__",a=1,H=2,W=4,w=1,U=2,tt=1,J=2,N=4,Q=8,it=16,q=32,L=64,V=128,lt=256,mt=512,Rt=30,Et="...",vt=800,wt=16,Xt=1,ee=2,ne=3,oe=1/0,Le=9007199254740991,de=17976931348623157e292,He=NaN,ze=4294967295,Te=ze-1,Je=ze>>>1,Xe=[["ary",V],["bind",tt],["bindKey",J],["curry",Q],["curryRight",it],["flip",mt],["partial",q],["partialRight",L],["rearg",lt]],Ae="[object Arguments]",_e="[object Array]",Qe="[object AsyncFunction]",qe="[object Boolean]",Ze="[object Date]",Ar="[object DOMException]",Or="[object Error]",Cr="[object Function]",et="[object GeneratorFunction]",k="[object Map]",Z="[object Number]",se="[object Null]",me="[object Object]",rr="[object Promise]",dr="[object Proxy]",mr="[object RegExp]",ur="[object Set]",er="[object String]",Gr="[object Symbol]",Lr="[object Undefined]",Sr="[object WeakMap]",j="[object WeakSet]",f="[object ArrayBuffer]",S="[object DataView]",Y="[object Float32Array]",It="[object Float64Array]",Ot="[object Int8Array]",nt="[object Int16Array]",zt="[object Int32Array]",jt="[object Uint8Array]",Se="[object Uint8ClampedArray]",_t="[object Uint16Array]",gt="[object Uint32Array]",rt=/\b__p \+= '';/g,F=/\b(__p \+=) '' \+/g,st=/(__e\(.*?\)|\b__t\)) \+\n'';/g,At=/&(?:amp|lt|gt|quot|#39);/g,Dt=/[&<>"']/g,Nt=RegExp(At.source),Yt=RegExp(Dt.source),De=/<%-([\s\S]+?)%>/g,Qt=/<%([\s\S]+?)%>/g,Ee=/<%=([\s\S]+?)%>/g,Be=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,sr=/^\w*$/,P=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,le=/[\\^$.*+?()[\]{}|]/g,Vt=RegExp(le.source),pe=/^\s+/,kt=/\s/,re=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,$e=/\{\n\/\* \[wrapped with (.+)\] \*/,Ce=/,? & /,Pe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ne=/[()=,{}\[\]\/\s]/,tr=/\\(\\)?/g,lr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ar=/\w*$/,wr=/^[-+]0x[0-9a-f]+$/i,jr=/^0b[01]+$/i,ln=/^\[object .+?Constructor\]$/,cn=/^0o[0-7]+$/i,qr=/^(?:0|[1-9]\d*)$/,Er=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Tr=/($^)/,gn=/['\n\r\u2028\u2029\\]/g,Kn="\\ud800-\\udfff",tn="\\u0300-\\u036f",Wn="\\ufe20-\\ufe2f",Br="\\u20d0-\\u20ff",bn=tn+Wn+Br,as="\\u2700-\\u27bf",_n="a-z\\xdf-\\xf6\\xf8-\\xff",ks="\\xac\\xb1\\xd7\\xf7",Zr="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ss="\\u2000-\\u206f",Ps=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Xs="A-Z\\xc0-\\xd6\\xd8-\\xde",qs="\\ufe0e\\ufe0f",os=ks+Zr+Ss+Ps,In="['\u2019]",Si="["+Kn+"]",Xn="["+os+"]",ls="["+bn+"]",Vi="\\d+",Ki="["+as+"]",Bi="["+_n+"]",cu="[^"+Kn+os+Vi+as+_n+Xs+"]",Ei="\\ud83c[\\udffb-\\udfff]",zi="(?:"+ls+"|"+Ei+")",Ii="[^"+Kn+"]",oi="(?:\\ud83c[\\udde6-\\uddff]){2}",ns="[\\ud800-\\udbff][\\udc00-\\udfff]",Dn="["+Xs+"]",bt="\\u200d",$t="(?:"+Bi+"|"+cu+")",Ht="(?:"+Dn+"|"+cu+")",fe="(?:"+In+"(?:d|ll|m|re|s|t|ve))?",Me="(?:"+In+"(?:D|LL|M|RE|S|T|VE))?",We=zi+"?",ir="["+qs+"]?",cr="(?:"+bt+"(?:"+[Ii,oi,ns].join("|")+")"+ir+We+")*",nn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",en="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",vr=ir+We+cr,hs="(?:"+[Ki,oi,ns].join("|")+")"+vr,Ts="(?:"+[Ii+ls+"?",ls,oi,ns,Si].join("|")+")",Ri=RegExp(In,"g"),ws=RegExp(ls,"g"),ds=RegExp(Ei+"(?="+Ei+")|"+Ts+vr,"g"),$i=RegExp([Dn+"?"+Bi+"+"+fe+"(?="+[Xn,Dn,"$"].join("|")+")",Ht+"+"+Me+"(?="+[Xn,Dn+$t,"$"].join("|")+")",Dn+"?"+$t+"+"+fe,Dn+"+"+Me,en,nn,Vi,hs].join("|"),"g"),En=RegExp("["+bt+Kn+bn+qs+"]"),Gi=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Aa=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],wa=-1,Rn={};Rn[Y]=Rn[It]=Rn[Ot]=Rn[nt]=Rn[zt]=Rn[jt]=Rn[Se]=Rn[_t]=Rn[gt]=!0,Rn[Ae]=Rn[_e]=Rn[f]=Rn[qe]=Rn[S]=Rn[Ze]=Rn[Or]=Rn[Cr]=Rn[k]=Rn[Z]=Rn[me]=Rn[mr]=Rn[ur]=Rn[er]=Rn[Sr]=!1;var Sn={};Sn[Ae]=Sn[_e]=Sn[f]=Sn[S]=Sn[qe]=Sn[Ze]=Sn[Y]=Sn[It]=Sn[Ot]=Sn[nt]=Sn[zt]=Sn[k]=Sn[Z]=Sn[me]=Sn[mr]=Sn[ur]=Sn[er]=Sn[Gr]=Sn[jt]=Sn[Se]=Sn[_t]=Sn[gt]=!0,Sn[Or]=Sn[Cr]=Sn[Sr]=!1;var Fa={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},ba={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Da={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},an={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ca=parseFloat,_a=parseInt,Wu=typeof global=="object"&&global&&global.Object===Object&&global,Sa=typeof self=="object"&&self&&self.Object===Object&&self,Qn=Wu||Sa||Function("return this")(),Cu=typeof t=="object"&&t&&!t.nodeType&&t,vi=Cu&&typeof e=="object"&&e&&!e.nodeType&&e,Xu=vi&&vi.exports===Cu,xu=Xu&&Wu.process,Yn=(function(){try{var ye=vi&&vi.require&&vi.require("util").types;return ye||xu&&xu.binding&&xu.binding("util")}catch{}})(),Zu=Yn&&Yn.isArrayBuffer,Qu=Yn&&Yn.isDate,ta=Yn&&Yn.isMap,ea=Yn&&Yn.isRegExp,ra=Yn&&Yn.isSet,sa=Yn&&Yn.isTypedArray;function Fs(ye,Ue,Re){switch(Re.length){case 0:return ye.call(Ue);case 1:return ye.call(Ue,Re[0]);case 2:return ye.call(Ue,Re[0],Re[1]);case 3:return ye.call(Ue,Re[0],Re[1],Re[2])}return ye.apply(Ue,Re)}function ia(ye,Ue,Re,hr){for(var Pr=-1,on=ye==null?0:ye.length;++Pr<on;){var Gn=ye[Pr];Ue(hr,Gn,Re(Gn),ye)}return hr}function Ge(ye,Ue){for(var Re=-1,hr=ye==null?0:ye.length;++Re<hr&&Ue(ye[Re],Re,ye)!==!1;);return ye}function v(ye,Ue){for(var Re=ye==null?0:ye.length;Re--&&Ue(ye[Re],Re,ye)!==!1;);return ye}function _u(ye,Ue){for(var Re=-1,hr=ye==null?0:ye.length;++Re<hr;)if(!Ue(ye[Re],Re,ye))return!1;return!0}function Zs(ye,Ue){for(var Re=-1,hr=ye==null?0:ye.length,Pr=0,on=[];++Re<hr;){var Gn=ye[Re];Ue(Gn,Re,ye)&&(on[Pr++]=Gn)}return on}function Ai(ye,Ue){var Re=ye==null?0:ye.length;return!!Re&&Ji(ye,Ue,0)>-1}function cs(ye,Ue,Re){for(var hr=-1,Pr=ye==null?0:ye.length;++hr<Pr;)if(Re(Ue,ye[hr]))return!0;return!1}function On(ye,Ue){for(var Re=-1,hr=ye==null?0:ye.length,Pr=Array(hr);++Re<hr;)Pr[Re]=Ue(ye[Re],Re,ye);return Pr}function li(ye,Ue){for(var Re=-1,hr=Ue.length,Pr=ye.length;++Re<hr;)ye[Pr+Re]=Ue[Re];return ye}function pt(ye,Ue,Re,hr){var Pr=-1,on=ye==null?0:ye.length;for(hr&&on&&(Re=ye[++Pr]);++Pr<on;)Re=Ue(Re,ye[Pr],Pr,ye);return Re}function Rr(ye,Ue,Re,hr){var Pr=ye==null?0:ye.length;for(hr&&Pr&&(Re=ye[--Pr]);Pr--;)Re=Ue(Re,ye[Pr],Pr,ye);return Re}function Vs(ye,Ue){for(var Re=-1,hr=ye==null?0:ye.length;++Re<hr;)if(Ue(ye[Re],Re,ye))return!0;return!1}var An=Yi("length");function Cn(ye){return ye.split("")}function Fe(ye){return ye.match(Pe)||[]}function gs(ye,Ue,Re){var hr;return Re(ye,function(Pr,on,Gn){if(Ue(Pr,on,Gn))return hr=on,!1}),hr}function pu(ye,Ue,Re,hr){for(var Pr=ye.length,on=Re+(hr?1:-1);hr?on--:++on<Pr;)if(Ue(ye[on],on,ye))return on;return-1}function Ji(ye,Ue,Re){return Ue===Ue?la(ye,Ue,Re):pu(ye,_r,Re)}function Su(ye,Ue,Re,hr){for(var Pr=Re-1,on=ye.length;++Pr<on;)if(hr(ye[Pr],Ue))return Pr;return-1}function _r(ye){return ye!==ye}function Ba(ye,Ue){var Re=ye==null?0:ye.length;return Re?Iu(ye,Ue)/Re:He}function Yi(ye){return function(Ue){return Ue==null?n:Ue[ye]}}function gr(ye){return function(Ue){return ye==null?n:ye[Ue]}}function kn(ye,Ue,Re,hr,Pr){return Pr(ye,function(on,Gn,wn){Re=hr?(hr=!1,on):Ue(Re,on,Gn,wn)}),Re}function Bu(ye,Ue){var Re=ye.length;for(ye.sort(Ue);Re--;)ye[Re]=ye[Re].value;return ye}function Iu(ye,Ue){for(var Re,hr=-1,Pr=ye.length;++hr<Pr;){var on=Ue(ye[hr]);on!==n&&(Re=Re===n?on:Re+on)}return Re}function ms(ye,Ue){for(var Re=-1,hr=Array(ye);++Re<ye;)hr[Re]=Ue(Re);return hr}function Ru(ye,Ue){return On(Ue,function(Re){return[Re,ye[Re]]})}function Pi(ye){return ye&&ye.slice(0,Qi(ye)+1).replace(pe,"")}function ke(ye){return function(Ue){return ye(Ue)}}function Pn(ye,Ue){return On(Ue,function(Re){return ye[Re]})}function Oi(ye,Ue){return ye.has(Ue)}function $u(ye,Ue){for(var Re=-1,hr=ye.length;++Re<hr&&Ji(Ue,ye[Re],0)>-1;);return Re}function aa(ye,Ue){for(var Re=ye.length;Re--&&Ji(Ue,ye[Re],0)>-1;);return Re}function ku(ye,Ue){for(var Re=ye.length,hr=0;Re--;)ye[Re]===Ue&&++hr;return hr}var oa=gr(Fa),Pu=gr(ba);function Ou(ye){return"\\"+an[ye]}function Ia(ye,Ue){return ye==null?n:ye[Ue]}function Qs(ye){return En.test(ye)}function hu(ye){return Gi.test(ye)}function Xi(ye){for(var Ue,Re=[];!(Ue=ye.next()).done;)Re.push(Ue.value);return Re}function wi(ye){var Ue=-1,Re=Array(ye.size);return ye.forEach(function(hr,Pr){Re[++Ue]=[Pr,hr]}),Re}function fu(ye,Ue){return function(Re){return ye(Ue(Re))}}function Bs(ye,Ue){for(var Re=-1,hr=ye.length,Pr=0,on=[];++Re<hr;){var Gn=ye[Re];(Gn===Ue||Gn===D)&&(ye[Re]=D,on[Pr++]=Re)}return on}function Zi(ye){var Ue=-1,Re=Array(ye.size);return ye.forEach(function(hr){Re[++Ue]=hr}),Re}function du(ye){var Ue=-1,Re=Array(ye.size);return ye.forEach(function(hr){Re[++Ue]=[hr,hr]}),Re}function la(ye,Ue,Re){for(var hr=Re-1,Pr=ye.length;++hr<Pr;)if(ye[hr]===Ue)return hr;return-1}function Tu(ye,Ue,Re){for(var hr=Re+1;hr--;)if(ye[hr]===Ue)return hr;return hr}function ti(ye){return Qs(ye)?Ti(ye):An(ye)}function Tn(ye){return Qs(ye)?gu(ye):Cn(ye)}function Qi(ye){for(var Ue=ye.length;Ue--&&kt.test(ye.charAt(Ue)););return Ue}var ei=gr(Da);function Ti(ye){for(var Ue=ds.lastIndex=0;ds.test(ye);)++Ue;return Ue}function gu(ye){return ye.match(ds)||[]}function Ra(ye){return ye.match($i)||[]}var ha=function ye(Ue){Ue=Ue==null?Qn:zs.defaults(Qn.Object(),Ue,zs.pick(Qn,Aa));var Re=Ue.Array,hr=Ue.Date,Pr=Ue.Error,on=Ue.Function,Gn=Ue.Math,wn=Ue.Object,Fi=Ue.RegExp,Fn=Ue.String,Oe=Ue.TypeError,Nr=Re.prototype,fa=on.prototype,ri=wn.prototype,eu=Ue["__core-js_shared__"],Ni=fa.toString,nr=ri.hasOwnProperty,$a=0,r=(function(){var i=/[^.]+$/.exec(eu&&eu.keys&&eu.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""})(),l=ri.toString,o=Ni.call(wn),h=Qn._,b=Fi("^"+Ni.call(nr).replace(le,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),C=Xu?Ue.Buffer:n,x=Ue.Symbol,_=Ue.Uint8Array,M=C?C.allocUnsafe:n,K=fu(wn.getPrototypeOf,wn),dt=wn.create,yt=ri.propertyIsEnumerable,O=Nr.splice,I=x?x.isConcatSpreadable:n,at=x?x.iterator:n,T=x?x.toStringTag:n,ot=(function(){try{var i=Lu(wn,"defineProperty");return i({},"",{}),i}catch{}})(),X=Ue.clearTimeout!==Qn.clearTimeout&&Ue.clearTimeout,Ft=hr&&hr.now!==Qn.Date.now&&hr.now,Tt=Ue.setTimeout!==Qn.setTimeout&&Ue.setTimeout,Wt=Gn.ceil,Gt=Gn.floor,ve=wn.getOwnPropertySymbols,be=C?C.isBuffer:n,d=Ue.isFinite,B=Nr.join,ut=fu(wn.keys,wn),z=Gn.max,St=Gn.min,Mt=hr.now,te=Ue.parseInt,ie=Gn.random,ge=Nr.reverse,Ie=Lu(Ue,"DataView"),br=Lu(Ue,"Map"),xr=Lu(Ue,"Promise"),Fr=Lu(Ue,"Set"),Vr=Lu(Ue,"WeakMap"),Ur=Lu(wn,"create"),xn=Vr&&new Vr,pn={},bi=Hu(Ie),Ns=Hu(br),Es=Hu(xr),bs=Hu(Fr),Is=Hu(Vr),fn=x?x.prototype:n,Jn=fn?fn.valueOf:n,Nn=fn?fn.toString:n;function Pt(i){if(rs(i)&&!Hr(i)&&!(i instanceof Kr)){if(i instanceof Un)return i;if(nr.call(i,"__wrapped__"))return Rc(i)}return new Un(i)}var ps=(function(){function i(){}return function(c){if(!Zn(c))return{};if(dt)return dt(c);i.prototype=c;var A=new i;return i.prototype=n,A}})();function yn(){}function Un(i,c){this.__wrapped__=i,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=n}Pt.templateSettings={escape:De,evaluate:Qt,interpolate:Ee,variable:"",imports:{_:Pt}},Pt.prototype=yn.prototype,Pt.prototype.constructor=Pt,Un.prototype=ps(yn.prototype),Un.prototype.constructor=Un;function Kr(i){this.__wrapped__=i,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ze,this.__views__=[]}function ji(){var i=new Kr(this.__wrapped__);return i.__actions__=Gs(this.__actions__),i.__dir__=this.__dir__,i.__filtered__=this.__filtered__,i.__iteratees__=Gs(this.__iteratees__),i.__takeCount__=this.__takeCount__,i.__views__=Gs(this.__views__),i}function mo(){if(this.__filtered__){var i=new Kr(this);i.__dir__=-1,i.__filtered__=!0}else i=this.clone(),i.__dir__*=-1;return i}function ci(){var i=this.__wrapped__.value(),c=this.__dir__,A=Hr(i),G=c<0,Ct=A?i.length:0,qt=Jh(0,Ct,this.__views__),ae=qt.start,he=qt.end,we=he-ae,Ve=G?he:ae-1,Ke=this.__iteratees__,Ye=Ke.length,or=0,Dr=St(we,this.__takeCount__);if(!A||!G&&Ct==we&&Dr==we)return Jl(i,this.__actions__);var $r=[];t:for(;we--&&or<Dr;){Ve+=c;for(var Jr=-1,kr=i[Ve];++Jr<Ye;){var rn=Ke[Jr],dn=rn.iteratee,ii=rn.type,Ms=dn(kr);if(ii==ee)kr=Ms;else if(!Ms){if(ii==Xt)continue t;break t}}$r[or++]=kr}return $r}Kr.prototype=ps(yn.prototype),Kr.prototype.constructor=Kr;function js(i){var c=-1,A=i==null?0:i.length;for(this.clear();++c<A;){var G=i[c];this.set(G[0],G[1])}}function Eo(){this.__data__=Ur?Ur(null):{},this.size=0}function qa(i){var c=this.has(i)&&delete this.__data__[i];return this.size-=c?1:0,c}function Ln(i){var c=this.__data__;if(Ur){var A=c[i];return A===E?n:A}return nr.call(c,i)?c[i]:n}function hi(i){var c=this.__data__;return Ur?c[i]!==n:nr.call(c,i)}function mn(i,c){var A=this.__data__;return this.size+=this.has(i)?0:1,A[i]=Ur&&c===n?E:c,this}js.prototype.clear=Eo,js.prototype.delete=qa,js.prototype.get=Ln,js.prototype.has=hi,js.prototype.set=mn;function vs(i){var c=-1,A=i==null?0:i.length;for(this.clear();++c<A;){var G=i[c];this.set(G[0],G[1])}}function bp(){this.__data__=[],this.size=0}function Dp(i){var c=this.__data__,A=Va(c,i);if(A<0)return!1;var G=c.length-1;return A==G?c.pop():O.call(c,A,1),--this.size,!0}function Cp(i){var c=this.__data__,A=Va(c,i);return A<0?n:c[A][1]}function _p(i){return Va(this.__data__,i)>-1}function Sp(i,c){var A=this.__data__,G=Va(A,i);return G<0?(++this.size,A.push([i,c])):A[G][1]=c,this}vs.prototype.clear=bp,vs.prototype.delete=Dp,vs.prototype.get=Cp,vs.prototype.has=_p,vs.prototype.set=Sp;function ru(i){var c=-1,A=i==null?0:i.length;for(this.clear();++c<A;){var G=i[c];this.set(G[0],G[1])}}function Bp(){this.size=0,this.__data__={hash:new js,map:new(br||vs),string:new js}}function Ip(i){var c=io(this,i).delete(i);return this.size-=c?1:0,c}function kp(i){return io(this,i).get(i)}function Tp(i){return io(this,i).has(i)}function Np(i,c){var A=io(this,i),G=A.size;return A.set(i,c),this.size+=A.size==G?0:1,this}ru.prototype.clear=Bp,ru.prototype.delete=Ip,ru.prototype.get=kp,ru.prototype.has=Tp,ru.prototype.set=Np;function Nu(i){var c=-1,A=i==null?0:i.length;for(this.__data__=new ru;++c<A;)this.add(i[c])}function jp(i){return this.__data__.set(i,E),this}function Up(i){return this.__data__.has(i)}Nu.prototype.add=Nu.prototype.push=jp,Nu.prototype.has=Up;function Di(i){var c=this.__data__=new vs(i);this.size=c.size}function Hp(){this.__data__=new vs,this.size=0}function Gp(i){var c=this.__data__,A=c.delete(i);return this.size=c.size,A}function Jp(i){return this.__data__.get(i)}function Yp(i){return this.__data__.has(i)}function Xp(i,c){var A=this.__data__;if(A instanceof vs){var G=A.__data__;if(!br||G.length<s-1)return G.push([i,c]),this.size=++A.size,this;A=this.__data__=new ru(G)}return A.set(i,c),this.size=A.size,this}Di.prototype.clear=Hp,Di.prototype.delete=Gp,Di.prototype.get=Jp,Di.prototype.has=Yp,Di.prototype.set=Xp;function Cl(i,c){var A=Hr(i),G=!A&&Ju(i),Ct=!A&&!G&&bu(i),qt=!A&&!G&&!Ct&&Ea(i),ae=A||G||Ct||qt,he=ae?ms(i.length,Fn):[],we=he.length;for(var Ve in i)(c||nr.call(i,Ve))&&!(ae&&(Ve=="length"||Ct&&(Ve=="offset"||Ve=="parent")||qt&&(Ve=="buffer"||Ve=="byteLength"||Ve=="byteOffset")||uu(Ve,we)))&&he.push(Ve);return he}function xl(i){var c=i.length;return c?i[Bo(0,c-1)]:n}function Zp(i,c){return uo(Gs(i),ju(c,0,i.length))}function Qp(i){return uo(Gs(i))}function vo(i,c,A){(A!==n&&!Ci(i[c],A)||A===n&&!(c in i))&&nu(i,c,A)}function ka(i,c,A){var G=i[c];(!(nr.call(i,c)&&Ci(G,A))||A===n&&!(c in i))&&nu(i,c,A)}function Va(i,c){for(var A=i.length;A--;)if(Ci(i[A][0],c))return A;return-1}function eh(i,c,A,G){return yu(i,function(Ct,qt,ae){c(G,Ct,A(Ct),ae)}),G}function _l(i,c){return i&&Hi(c,As(c),i)}function rh(i,c){return i&&Hi(c,Ws(c),i)}function nu(i,c,A){c=="__proto__"&&ot?ot(i,c,{configurable:!0,enumerable:!0,value:A,writable:!0}):i[c]=A}function Ao(i,c){for(var A=-1,G=c.length,Ct=Re(G),qt=i==null;++A<G;)Ct[A]=qt?n:cl(i,c[A]);return Ct}function ju(i,c,A){return i===i&&(A!==n&&(i=i<=A?i:A),c!==n&&(i=i>=c?i:c)),i}function fi(i,c,A,G,Ct,qt){var ae,he=c&a,we=c&H,Ve=c&W;if(A&&(ae=Ct?A(i,G,Ct,qt):A(i)),ae!==n)return ae;if(!Zn(i))return i;var Ke=Hr(i);if(Ke){if(ae=Yh(i),!he)return Gs(i,ae)}else{var Ye=$s(i),or=Ye==Cr||Ye==et;if(bu(i))return tc(i,he);if(Ye==me||Ye==Ae||or&&!Ct){if(ae=we||or?{}:Fc(i),!he)return we?Oh(i,rh(ae,i)):Ph(i,_l(ae,i))}else{if(!Sn[Ye])return Ct?i:{};ae=Xh(i,Ye,he)}}qt||(qt=new Di);var Dr=qt.get(i);if(Dr)return Dr;qt.set(i,ae),np(i)?i.forEach(function(kr){ae.add(fi(kr,c,A,kr,i,qt))}):ep(i)&&i.forEach(function(kr,rn){ae.set(rn,fi(kr,c,A,rn,i,qt))});var $r=Ve?we?Go:zo:we?Ws:As,Jr=Ke?n:$r(i);return Ge(Jr||i,function(kr,rn){Jr&&(rn=kr,kr=i[rn]),ka(ae,rn,fi(kr,c,A,rn,i,qt))}),ae}function nh(i){var c=As(i);return function(A){return Sl(A,i,c)}}function Sl(i,c,A){var G=A.length;if(i==null)return!G;for(i=wn(i);G--;){var Ct=A[G],qt=c[Ct],ae=i[Ct];if(ae===n&&!(Ct in i)||!qt(ae))return!1}return!0}function Bl(i,c,A){if(typeof i!="function")throw new Oe(y);return Ha(function(){i.apply(n,A)},c)}function Pa(i,c,A,G){var Ct=-1,qt=Ai,ae=!0,he=i.length,we=[],Ve=c.length;if(!he)return we;A&&(c=On(c,ke(A))),G?(qt=cs,ae=!1):c.length>=s&&(qt=Oi,ae=!1,c=new Nu(c));t:for(;++Ct<he;){var Ke=i[Ct],Ye=A==null?Ke:A(Ke);if(Ke=G||Ke!==0?Ke:0,ae&&Ye===Ye){for(var or=Ve;or--;)if(c[or]===Ye)continue t;we.push(Ke)}else qt(c,Ye,G)||we.push(Ke)}return we}var yu=ac(Ui),Il=ac(Fo,!0);function sh(i,c){var A=!0;return yu(i,function(G,Ct,qt){return A=!!c(G,Ct,qt),A}),A}function Ka(i,c,A){for(var G=-1,Ct=i.length;++G<Ct;){var qt=i[G],ae=c(qt);if(ae!=null&&(he===n?ae===ae&&!si(ae):A(ae,he)))var he=ae,we=qt}return we}function ih(i,c,A,G){var Ct=i.length;for(A=zr(A),A<0&&(A=-A>Ct?0:Ct+A),G=G===n||G>Ct?Ct:zr(G),G<0&&(G+=Ct),G=A>G?0:up(G);A<G;)i[A++]=c;return i}function Rl(i,c){var A=[];return yu(i,function(G,Ct,qt){c(G,Ct,qt)&&A.push(G)}),A}function Ds(i,c,A,G,Ct){var qt=-1,ae=i.length;for(A||(A=Qh),Ct||(Ct=[]);++qt<ae;){var he=i[qt];c>0&&A(he)?c>1?Ds(he,c-1,A,G,Ct):li(Ct,he):G||(Ct[Ct.length]=he)}return Ct}var wo=oc(),$l=oc(!0);function Ui(i,c){return i&&wo(i,c,As)}function Fo(i,c){return i&&$l(i,c,As)}function za(i,c){return Zs(c,function(A){return au(i[A])})}function Uu(i,c){c=Eu(c,i);for(var A=0,G=c.length;i!=null&&A<G;)i=i[Mi(c[A++])];return A&&A==G?i:n}function kl(i,c,A){var G=c(i);return Hr(i)?G:li(G,A(i))}function Ls(i){return i==null?i===n?Lr:se:T&&T in wn(i)?Gh(i):p0(i)}function bo(i,c){return i>c}function uh(i,c){return i!=null&&nr.call(i,c)}function ah(i,c){return i!=null&&c in wn(i)}function oh(i,c,A){return i>=St(c,A)&&i<z(c,A)}function Do(i,c,A){for(var G=A?cs:Ai,Ct=i[0].length,qt=i.length,ae=qt,he=Re(qt),we=1/0,Ve=[];ae--;){var Ke=i[ae];ae&&c&&(Ke=On(Ke,ke(c))),we=St(Ke.length,we),he[ae]=!A&&(c||Ct>=120&&Ke.length>=120)?new Nu(ae&&Ke):n}Ke=i[0];var Ye=-1,or=he[0];t:for(;++Ye<Ct&&Ve.length<we;){var Dr=Ke[Ye],$r=c?c(Dr):Dr;if(Dr=A||Dr!==0?Dr:0,!(or?Oi(or,$r):G(Ve,$r,A))){for(ae=qt;--ae;){var Jr=he[ae];if(!(Jr?Oi(Jr,$r):G(i[ae],$r,A)))continue t}or&&or.push($r),Ve.push(Dr)}}return Ve}function lh(i,c,A,G){return Ui(i,function(Ct,qt,ae){c(G,A(Ct),qt,ae)}),G}function Ta(i,c,A){c=Eu(c,i),i=xc(i,c);var G=i==null?i:i[Mi(yi(c))];return G==null?n:Fs(G,i,A)}function Pl(i){return rs(i)&&Ls(i)==Ae}function ch(i){return rs(i)&&Ls(i)==f}function ph(i){return rs(i)&&Ls(i)==Ze}function Na(i,c,A,G,Ct){return i===c?!0:i==null||c==null||!rs(i)&&!rs(c)?i!==i&&c!==c:hh(i,c,A,G,Na,Ct)}function hh(i,c,A,G,Ct,qt){var ae=Hr(i),he=Hr(c),we=ae?_e:$s(i),Ve=he?_e:$s(c);we=we==Ae?me:we,Ve=Ve==Ae?me:Ve;var Ke=we==me,Ye=Ve==me,or=we==Ve;if(or&&bu(i)){if(!bu(c))return!1;ae=!0,Ke=!1}if(or&&!Ke)return qt||(qt=new Di),ae||Ea(i)?vc(i,c,A,G,Ct,qt):qh(i,c,we,A,G,Ct,qt);if(!(A&w)){var Dr=Ke&&nr.call(i,"__wrapped__"),$r=Ye&&nr.call(c,"__wrapped__");if(Dr||$r){var Jr=Dr?i.value():i,kr=$r?c.value():c;return qt||(qt=new Di),Ct(Jr,kr,A,G,qt)}}return or?(qt||(qt=new Di),zh(i,c,A,G,Ct,qt)):!1}function fh(i){return rs(i)&&$s(i)==k}function Co(i,c,A,G){var Ct=A.length,qt=Ct,ae=!G;if(i==null)return!qt;for(i=wn(i);Ct--;){var he=A[Ct];if(ae&&he[2]?he[1]!==i[he[0]]:!(he[0]in i))return!1}for(;++Ct<qt;){he=A[Ct];var we=he[0],Ve=i[we],Ke=he[1];if(ae&&he[2]){if(Ve===n&&!(we in i))return!1}else{var Ye=new Di;if(G)var or=G(Ve,Ke,we,i,c,Ye);if(!(or===n?Na(Ke,Ve,w|U,G,Ye):or))return!1}}return!0}function Ol(i){if(!Zn(i)||e0(i))return!1;var c=au(i)?b:ln;return c.test(Hu(i))}function dh(i){return rs(i)&&Ls(i)==mr}function gh(i){return rs(i)&&$s(i)==ur}function yh(i){return rs(i)&&fo(i.length)&&!!Rn[Ls(i)]}function Tl(i){return typeof i=="function"?i:i==null?Ys:typeof i=="object"?Hr(i)?Ul(i[0],i[1]):jl(i):mp(i)}function xo(i){if(!La(i))return ut(i);var c=[];for(var A in wn(i))nr.call(i,A)&&A!="constructor"&&c.push(A);return c}function mh(i){if(!Zn(i))return c0(i);var c=La(i),A=[];for(var G in i)G=="constructor"&&(c||!nr.call(i,G))||A.push(G);return A}function _o(i,c){return i<c}function Nl(i,c){var A=-1,G=Js(i)?Re(i.length):[];return yu(i,function(Ct,qt,ae){G[++A]=c(Ct,qt,ae)}),G}function jl(i){var c=Yo(i);return c.length==1&&c[0][2]?Dc(c[0][0],c[0][1]):function(A){return A===i||Co(A,i,c)}}function Ul(i,c){return Qo(i)&&bc(c)?Dc(Mi(i),c):function(A){var G=cl(A,i);return G===n&&G===c?fl(A,i):Na(c,G,w|U)}}function Ga(i,c,A,G,Ct){i!==c&&wo(c,function(qt,ae){if(Ct||(Ct=new Di),Zn(qt))Eh(i,c,ae,A,Ga,G,Ct);else{var he=G?G(rl(i,ae),qt,ae+"",i,c,Ct):n;he===n&&(he=qt),vo(i,ae,he)}},Ws)}function Eh(i,c,A,G,Ct,qt,ae){var he=rl(i,A),we=rl(c,A),Ve=ae.get(we);if(Ve){vo(i,A,Ve);return}var Ke=qt?qt(he,we,A+"",i,c,ae):n,Ye=Ke===n;if(Ye){var or=Hr(we),Dr=!or&&bu(we),$r=!or&&!Dr&&Ea(we);Ke=we,or||Dr||$r?Hr(he)?Ke=he:ss(he)?Ke=Gs(he):Dr?(Ye=!1,Ke=tc(we,!0)):$r?(Ye=!1,Ke=ec(we,!0)):Ke=[]:Ma(we)||Ju(we)?(Ke=he,Ju(he)?Ke=ap(he):(!Zn(he)||au(he))&&(Ke=Fc(we))):Ye=!1}Ye&&(ae.set(we,Ke),Ct(Ke,we,G,qt,ae),ae.delete(we)),vo(i,A,Ke)}function Ll(i,c){var A=i.length;if(A)return c+=c<0?A:0,uu(c,A)?i[c]:n}function Hl(i,c,A){c.length?c=On(c,function(qt){return Hr(qt)?function(ae){return Uu(ae,qt.length===1?qt[0]:qt)}:qt}):c=[Ys];var G=-1;c=On(c,ke(Ir()));var Ct=Nl(i,function(qt,ae,he){var we=On(c,function(Ve){return Ve(qt)});return{criteria:we,index:++G,value:qt}});return Bu(Ct,function(qt,ae){return $h(qt,ae,A)})}function vh(i,c){return Ml(i,c,function(A,G){return fl(i,G)})}function Ml(i,c,A){for(var G=-1,Ct=c.length,qt={};++G<Ct;){var ae=c[G],he=Uu(i,ae);A(he,ae)&&ja(qt,Eu(ae,i),he)}return qt}function Ah(i){return function(c){return Uu(c,i)}}function So(i,c,A,G){var Ct=G?Su:Ji,qt=-1,ae=c.length,he=i;for(i===c&&(c=Gs(c)),A&&(he=On(i,ke(A)));++qt<ae;)for(var we=0,Ve=c[qt],Ke=A?A(Ve):Ve;(we=Ct(he,Ke,we,G))>-1;)he!==i&&O.call(he,we,1),O.call(i,we,1);return i}function ql(i,c){for(var A=i?c.length:0,G=A-1;A--;){var Ct=c[A];if(A==G||Ct!==qt){var qt=Ct;uu(Ct)?O.call(i,Ct,1):$o(i,Ct)}}return i}function Bo(i,c){return i+Gt(ie()*(c-i+1))}function wh(i,c,A,G){for(var Ct=-1,qt=z(Wt((c-i)/(A||1)),0),ae=Re(qt);qt--;)ae[G?qt:++Ct]=i,i+=A;return ae}function Io(i,c){var A="";if(!i||c<1||c>Le)return A;do c%2&&(A+=i),c=Gt(c/2),c&&(i+=i);while(c);return A}function Qr(i,c){return nl(Cc(i,c,Ys),i+"")}function Fh(i){return xl(va(i))}function bh(i,c){var A=va(i);return uo(A,ju(c,0,A.length))}function ja(i,c,A,G){if(!Zn(i))return i;c=Eu(c,i);for(var Ct=-1,qt=c.length,ae=qt-1,he=i;he!=null&&++Ct<qt;){var we=Mi(c[Ct]),Ve=A;if(we==="__proto__"||we==="constructor"||we==="prototype")return i;if(Ct!=ae){var Ke=he[we];Ve=G?G(Ke,we,he):n,Ve===n&&(Ve=Zn(Ke)?Ke:uu(c[Ct+1])?[]:{})}ka(he,we,Ve),he=he[we]}return i}var Vl=xn?function(i,c){return xn.set(i,c),i}:Ys,Dh=ot?function(i,c){return ot(i,"toString",{configurable:!0,enumerable:!1,value:gl(c),writable:!0})}:Ys;function Ch(i){return uo(va(i))}function di(i,c,A){var G=-1,Ct=i.length;c<0&&(c=-c>Ct?0:Ct+c),A=A>Ct?Ct:A,A<0&&(A+=Ct),Ct=c>A?0:A-c>>>0,c>>>=0;for(var qt=Re(Ct);++G<Ct;)qt[G]=i[G+c];return qt}function xh(i,c){var A;return yu(i,function(G,Ct,qt){return A=c(G,Ct,qt),!A}),!!A}function Ja(i,c,A){var G=0,Ct=i==null?G:i.length;if(typeof c=="number"&&c===c&&Ct<=Je){for(;G<Ct;){var qt=G+Ct>>>1,ae=i[qt];ae!==null&&!si(ae)&&(A?ae<=c:ae<c)?G=qt+1:Ct=qt}return Ct}return Ro(i,c,Ys,A)}function Ro(i,c,A,G){var Ct=0,qt=i==null?0:i.length;if(qt===0)return 0;c=A(c);for(var ae=c!==c,he=c===null,we=si(c),Ve=c===n;Ct<qt;){var Ke=Gt((Ct+qt)/2),Ye=A(i[Ke]),or=Ye!==n,Dr=Ye===null,$r=Ye===Ye,Jr=si(Ye);if(ae)var kr=G||$r;else Ve?kr=$r&&(G||or):he?kr=$r&&or&&(G||!Dr):we?kr=$r&&or&&!Dr&&(G||!Jr):Dr||Jr?kr=!1:kr=G?Ye<=c:Ye<c;kr?Ct=Ke+1:qt=Ke}return St(qt,Te)}function Kl(i,c){for(var A=-1,G=i.length,Ct=0,qt=[];++A<G;){var ae=i[A],he=c?c(ae):ae;if(!A||!Ci(he,we)){var we=he;qt[Ct++]=ae===0?0:ae}}return qt}function zl(i){return typeof i=="number"?i:si(i)?He:+i}function ni(i){if(typeof i=="string")return i;if(Hr(i))return On(i,ni)+"";if(si(i))return Nn?Nn.call(i):"";var c=i+"";return c=="0"&&1/i==-oe?"-0":c}function mu(i,c,A){var G=-1,Ct=Ai,qt=i.length,ae=!0,he=[],we=he;if(A)ae=!1,Ct=cs;else if(qt>=s){var Ve=c?null:Hh(i);if(Ve)return Zi(Ve);ae=!1,Ct=Oi,we=new Nu}else we=c?[]:he;t:for(;++G<qt;){var Ke=i[G],Ye=c?c(Ke):Ke;if(Ke=A||Ke!==0?Ke:0,ae&&Ye===Ye){for(var or=we.length;or--;)if(we[or]===Ye)continue t;c&&we.push(Ye),he.push(Ke)}else Ct(we,Ye,A)||(we!==he&&we.push(Ye),he.push(Ke))}return he}function $o(i,c){return c=Eu(c,i),i=xc(i,c),i==null||delete i[Mi(yi(c))]}function Gl(i,c,A,G){return ja(i,c,A(Uu(i,c)),G)}function Wa(i,c,A,G){for(var Ct=i.length,qt=G?Ct:-1;(G?qt--:++qt<Ct)&&c(i[qt],qt,i););return A?di(i,G?0:qt,G?qt+1:Ct):di(i,G?qt+1:0,G?Ct:qt)}function Jl(i,c){var A=i;return A instanceof Kr&&(A=A.value()),pt(c,function(G,Ct){return Ct.func.apply(Ct.thisArg,li([G],Ct.args))},A)}function Po(i,c,A){var G=i.length;if(G<2)return G?mu(i[0]):[];for(var Ct=-1,qt=Re(G);++Ct<G;)for(var ae=i[Ct],he=-1;++he<G;)he!=Ct&&(qt[Ct]=Pa(qt[Ct]||ae,i[he],c,A));return mu(Ds(qt,1),c,A)}function Wl(i,c,A){for(var G=-1,Ct=i.length,qt=c.length,ae={};++G<Ct;){var he=G<qt?c[G]:n;A(ae,i[G],he)}return ae}function Oo(i){return ss(i)?i:[]}function To(i){return typeof i=="function"?i:Ys}function Eu(i,c){return Hr(i)?i:Qo(i,c)?[i]:Ic(Bn(i))}var _h=Qr;function Au(i,c,A){var G=i.length;return A=A===n?G:A,!c&&A>=G?i:di(i,c,A)}var Xl=X||function(i){return Qn.clearTimeout(i)};function tc(i,c){if(c)return i.slice();var A=i.length,G=M?M(A):new i.constructor(A);return i.copy(G),G}function No(i){var c=new i.constructor(i.byteLength);return new _(c).set(new _(i)),c}function Sh(i,c){var A=c?No(i.buffer):i.buffer;return new i.constructor(A,i.byteOffset,i.byteLength)}function Ih(i){var c=new i.constructor(i.source,ar.exec(i));return c.lastIndex=i.lastIndex,c}function Rh(i){return Jn?wn(Jn.call(i)):{}}function ec(i,c){var A=c?No(i.buffer):i.buffer;return new i.constructor(A,i.byteOffset,i.length)}function rc(i,c){if(i!==c){var A=i!==n,G=i===null,Ct=i===i,qt=si(i),ae=c!==n,he=c===null,we=c===c,Ve=si(c);if(!he&&!Ve&&!qt&&i>c||qt&&ae&&we&&!he&&!Ve||G&&ae&&we||!A&&we||!Ct)return 1;if(!G&&!qt&&!Ve&&i<c||Ve&&A&&Ct&&!G&&!qt||he&&A&&Ct||!ae&&Ct||!we)return-1}return 0}function $h(i,c,A){for(var G=-1,Ct=i.criteria,qt=c.criteria,ae=Ct.length,he=A.length;++G<ae;){var we=rc(Ct[G],qt[G]);if(we){if(G>=he)return we;var Ve=A[G];return we*(Ve=="desc"?-1:1)}}return i.index-c.index}function nc(i,c,A,G){for(var Ct=-1,qt=i.length,ae=A.length,he=-1,we=c.length,Ve=z(qt-ae,0),Ke=Re(we+Ve),Ye=!G;++he<we;)Ke[he]=c[he];for(;++Ct<ae;)(Ye||Ct<qt)&&(Ke[A[Ct]]=i[Ct]);for(;Ve--;)Ke[he++]=i[Ct++];return Ke}function uc(i,c,A,G){for(var Ct=-1,qt=i.length,ae=-1,he=A.length,we=-1,Ve=c.length,Ke=z(qt-he,0),Ye=Re(Ke+Ve),or=!G;++Ct<Ke;)Ye[Ct]=i[Ct];for(var Dr=Ct;++we<Ve;)Ye[Dr+we]=c[we];for(;++ae<he;)(or||Ct<qt)&&(Ye[Dr+A[ae]]=i[Ct++]);return Ye}function Gs(i,c){var A=-1,G=i.length;for(c||(c=Re(G));++A<G;)c[A]=i[A];return c}function Hi(i,c,A,G){var Ct=!A;A||(A={});for(var qt=-1,ae=c.length;++qt<ae;){var he=c[qt],we=G?G(A[he],i[he],he,A,i):n;we===n&&(we=i[he]),Ct?nu(A,he,we):ka(A,he,we)}return A}function Ph(i,c){return Hi(i,Xo(i),c)}function Oh(i,c){return Hi(i,Ac(i),c)}function Ya(i,c){return function(A,G){var Ct=Hr(A)?ia:eh,qt=c?c():{};return Ct(A,i,Ir(G,2),qt)}}function da(i){return Qr(function(c,A){var G=-1,Ct=A.length,qt=Ct>1?A[Ct-1]:n,ae=Ct>2?A[2]:n;for(qt=i.length>3&&typeof qt=="function"?(Ct--,qt):n,ae&&Hs(A[0],A[1],ae)&&(qt=Ct<3?n:qt,Ct=1),c=wn(c);++G<Ct;){var he=A[G];he&&i(c,he,G,qt)}return c})}function ac(i,c){return function(A,G){if(A==null)return A;if(!Js(A))return i(A,G);for(var Ct=A.length,qt=c?Ct:-1,ae=wn(A);(c?qt--:++qt<Ct)&&G(ae[qt],qt,ae)!==!1;);return A}}function oc(i){return function(c,A,G){for(var Ct=-1,qt=wn(c),ae=G(c),he=ae.length;he--;){var we=ae[i?he:++Ct];if(A(qt[we],we,qt)===!1)break}return c}}function jh(i,c,A){var G=c&tt,Ct=Ua(i);function qt(){var ae=this&&this!==Qn&&this instanceof qt?Ct:i;return ae.apply(G?A:this,arguments)}return qt}function lc(i){return function(c){c=Bn(c);var A=Qs(c)?Tn(c):n,G=A?A[0]:c.charAt(0),Ct=A?Au(A,1).join(""):c.slice(1);return G[i]()+Ct}}function ga(i){return function(c){return pt(gp(dp(c).replace(Ri,"")),i,"")}}function Ua(i){return function(){var c=arguments;switch(c.length){case 0:return new i;case 1:return new i(c[0]);case 2:return new i(c[0],c[1]);case 3:return new i(c[0],c[1],c[2]);case 4:return new i(c[0],c[1],c[2],c[3]);case 5:return new i(c[0],c[1],c[2],c[3],c[4]);case 6:return new i(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new i(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var A=ps(i.prototype),G=i.apply(A,c);return Zn(G)?G:A}}function Uh(i,c,A){var G=Ua(i);function Ct(){for(var qt=arguments.length,ae=Re(qt),he=qt,we=ma(Ct);he--;)ae[he]=arguments[he];var Ve=qt<3&&ae[0]!==we&&ae[qt-1]!==we?[]:Bs(ae,we);if(qt-=Ve.length,qt<A)return dc(i,c,Xa,Ct.placeholder,n,ae,Ve,n,n,A-qt);var Ke=this&&this!==Qn&&this instanceof Ct?G:i;return Fs(Ke,this,ae)}return Ct}function cc(i){return function(c,A,G){var Ct=wn(c);if(!Js(c)){var qt=Ir(A,3);c=As(c),A=function(he){return qt(Ct[he],he,Ct)}}var ae=i(c,A,G);return ae>-1?Ct[qt?c[ae]:ae]:n}}function pc(i){return iu(function(c){var A=c.length,G=A,Ct=Un.prototype.thru;for(i&&c.reverse();G--;){var qt=c[G];if(typeof qt!="function")throw new Oe(y);if(Ct&&!ae&&so(qt)=="wrapper")var ae=new Un([],!0)}for(G=ae?G:A;++G<A;){qt=c[G];var he=so(qt),we=he=="wrapper"?Wo(qt):n;we&&tl(we[0])&&we[1]==(V|Q|q|lt)&&!we[4].length&&we[9]==1?ae=ae[so(we[0])].apply(ae,we[3]):ae=qt.length==1&&tl(qt)?ae[he]():ae.thru(qt)}return function(){var Ve=arguments,Ke=Ve[0];if(ae&&Ve.length==1&&Hr(Ke))return ae.plant(Ke).value();for(var Ye=0,or=A?c[Ye].apply(this,Ve):Ke;++Ye<A;)or=c[Ye].call(this,or);return or}})}function Xa(i,c,A,G,Ct,qt,ae,he,we,Ve){var Ke=c&V,Ye=c&tt,or=c&J,Dr=c&(Q|it),$r=c&mt,Jr=or?n:Ua(i);function kr(){for(var rn=arguments.length,dn=Re(rn),ii=rn;ii--;)dn[ii]=arguments[ii];if(Dr)var Ms=ma(kr),ai=ku(dn,Ms);if(G&&(dn=nc(dn,G,Ct,Dr)),qt&&(dn=uc(dn,qt,ae,Dr)),rn-=ai,Dr&&rn<Ve){var us=Bs(dn,Ms);return dc(i,c,Xa,kr.placeholder,A,dn,us,he,we,Ve-rn)}var xi=Ye?A:this,lu=or?xi[i]:i;return rn=dn.length,he?dn=h0(dn,he):$r&&rn>1&&dn.reverse(),Ke&&we<rn&&(dn.length=we),this&&this!==Qn&&this instanceof kr&&(lu=Jr||Ua(lu)),lu.apply(xi,dn)}return kr}function hc(i,c){return function(A,G){return lh(A,i,c(G),{})}}function Za(i,c){return function(A,G){var Ct;if(A===n&&G===n)return c;if(A!==n&&(Ct=A),G!==n){if(Ct===n)return G;typeof A=="string"||typeof G=="string"?(A=ni(A),G=ni(G)):(A=zl(A),G=zl(G)),Ct=i(A,G)}return Ct}}function Mo(i){return iu(function(c){return c=On(c,ke(Ir())),Qr(function(A){var G=this;return i(c,function(Ct){return Fs(Ct,G,A)})})})}function eo(i,c){c=c===n?" ":ni(c);var A=c.length;if(A<2)return A?Io(c,i):c;var G=Io(c,Wt(i/ti(c)));return Qs(c)?Au(Tn(G),0,i).join(""):G.slice(0,i)}function Lh(i,c,A,G){var Ct=c&tt,qt=Ua(i);function ae(){for(var he=-1,we=arguments.length,Ve=-1,Ke=G.length,Ye=Re(Ke+we),or=this&&this!==Qn&&this instanceof ae?qt:i;++Ve<Ke;)Ye[Ve]=G[Ve];for(;we--;)Ye[Ve++]=arguments[++he];return Fs(or,Ct?A:this,Ye)}return ae}function fc(i){return function(c,A,G){return G&&typeof G!="number"&&Hs(c,A,G)&&(A=G=n),c=ou(c),A===n?(A=c,c=0):A=ou(A),G=G===n?c<A?1:-1:ou(G),wh(c,A,G,i)}}function ro(i){return function(c,A){return typeof c=="string"&&typeof A=="string"||(c=mi(c),A=mi(A)),i(c,A)}}function dc(i,c,A,G,Ct,qt,ae,he,we,Ve){var Ke=c&Q,Ye=Ke?ae:n,or=Ke?n:ae,Dr=Ke?qt:n,$r=Ke?n:qt;c|=Ke?q:L,c&=~(Ke?L:q),c&N||(c&=~(tt|J));var Jr=[i,c,Ct,Dr,Ye,$r,or,he,we,Ve],kr=A.apply(n,Jr);return tl(i)&&_c(kr,Jr),kr.placeholder=G,Sc(kr,i,c)}function qo(i){var c=Gn[i];return function(A,G){if(A=mi(A),G=G==null?0:St(zr(G),292),G&&d(A)){var Ct=(Bn(A)+"e").split("e"),qt=c(Ct[0]+"e"+(+Ct[1]+G));return Ct=(Bn(qt)+"e").split("e"),+(Ct[0]+"e"+(+Ct[1]-G))}return c(A)}}var Hh=Fr&&1/Zi(new Fr([,-0]))[1]==oe?function(i){return new Fr(i)}:Al;function gc(i){return function(c){var A=$s(c);return A==k?wi(c):A==ur?du(c):Ru(c,i(c))}}function su(i,c,A,G,Ct,qt,ae,he){var we=c&J;if(!we&&typeof i!="function")throw new Oe(y);var Ve=G?G.length:0;if(Ve||(c&=~(q|L),G=Ct=n),ae=ae===n?ae:z(zr(ae),0),he=he===n?he:zr(he),Ve-=Ct?Ct.length:0,c&L){var Ke=G,Ye=Ct;G=Ct=n}var or=we?n:Wo(i),Dr=[i,c,A,G,Ct,Ke,Ye,qt,ae,he];if(or&&o0(Dr,or),i=Dr[0],c=Dr[1],A=Dr[2],G=Dr[3],Ct=Dr[4],he=Dr[9]=Dr[9]===n?we?0:i.length:z(Dr[9]-Ve,0),!he&&c&(Q|it)&&(c&=~(Q|it)),!c||c==tt)var $r=jh(i,c,A);else c==Q||c==it?$r=Uh(i,c,he):(c==q||c==(tt|q))&&!Ct.length?$r=Lh(i,c,A,G):$r=Xa.apply(n,Dr);var Jr=or?Vl:_c;return Sc(Jr($r,Dr),i,c)}function yc(i,c,A,G){return i===n||Ci(i,ri[A])&&!nr.call(G,A)?c:i}function mc(i,c,A,G,Ct,qt){return Zn(i)&&Zn(c)&&(qt.set(c,i),Ga(i,c,n,mc,qt),qt.delete(c)),i}function Mh(i){return Ma(i)?n:i}function vc(i,c,A,G,Ct,qt){var ae=A&w,he=i.length,we=c.length;if(he!=we&&!(ae&&we>he))return!1;var Ve=qt.get(i),Ke=qt.get(c);if(Ve&&Ke)return Ve==c&&Ke==i;var Ye=-1,or=!0,Dr=A&U?new Nu:n;for(qt.set(i,c),qt.set(c,i);++Ye<he;){var $r=i[Ye],Jr=c[Ye];if(G)var kr=ae?G(Jr,$r,Ye,c,i,qt):G($r,Jr,Ye,i,c,qt);if(kr!==n){if(kr)continue;or=!1;break}if(Dr){if(!Vs(c,function(rn,dn){if(!Oi(Dr,dn)&&($r===rn||Ct($r,rn,A,G,qt)))return Dr.push(dn)})){or=!1;break}}else if(!($r===Jr||Ct($r,Jr,A,G,qt))){or=!1;break}}return qt.delete(i),qt.delete(c),or}function qh(i,c,A,G,Ct,qt,ae){switch(A){case S:if(i.byteLength!=c.byteLength||i.byteOffset!=c.byteOffset)return!1;i=i.buffer,c=c.buffer;case f:return!(i.byteLength!=c.byteLength||!qt(new _(i),new _(c)));case qe:case Ze:case Z:return Ci(+i,+c);case Or:return i.name==c.name&&i.message==c.message;case mr:case er:return i==c+"";case k:var he=wi;case ur:var we=G&w;if(he||(he=Zi),i.size!=c.size&&!we)return!1;var Ve=ae.get(i);if(Ve)return Ve==c;G|=U,ae.set(i,c);var Ke=vc(he(i),he(c),G,Ct,qt,ae);return ae.delete(i),Ke;case Gr:if(Jn)return Jn.call(i)==Jn.call(c)}return!1}function zh(i,c,A,G,Ct,qt){var ae=A&w,he=zo(i),we=he.length,Ve=zo(c),Ke=Ve.length;if(we!=Ke&&!ae)return!1;for(var Ye=we;Ye--;){var or=he[Ye];if(!(ae?or in c:nr.call(c,or)))return!1}var Dr=qt.get(i),$r=qt.get(c);if(Dr&&$r)return Dr==c&&$r==i;var Jr=!0;qt.set(i,c),qt.set(c,i);for(var kr=ae;++Ye<we;){or=he[Ye];var rn=i[or],dn=c[or];if(G)var ii=ae?G(dn,rn,or,c,i,qt):G(rn,dn,or,i,c,qt);if(!(ii===n?rn===dn||Ct(rn,dn,A,G,qt):ii)){Jr=!1;break}kr||(kr=or=="constructor")}if(Jr&&!kr){var Ms=i.constructor,ai=c.constructor;Ms!=ai&&"constructor"in i&&"constructor"in c&&!(typeof Ms=="function"&&Ms instanceof Ms&&typeof ai=="function"&&ai instanceof ai)&&(Jr=!1)}return qt.delete(i),qt.delete(c),Jr}function iu(i){return nl(Cc(i,n,Pc),i+"")}function zo(i){return kl(i,As,Xo)}function Go(i){return kl(i,Ws,Ac)}var Wo=xn?function(i){return xn.get(i)}:Al;function so(i){for(var c=i.name+"",A=pn[c],G=nr.call(pn,c)?A.length:0;G--;){var Ct=A[G],qt=Ct.func;if(qt==null||qt==i)return Ct.name}return c}function ma(i){var c=nr.call(Pt,"placeholder")?Pt:i;return c.placeholder}function Ir(){var i=Pt.iteratee||ml;return i=i===ml?Tl:i,arguments.length?i(arguments[0],arguments[1]):i}function io(i,c){var A=i.__data__;return t0(c)?A[typeof c=="string"?"string":"hash"]:A.map}function Yo(i){for(var c=As(i),A=c.length;A--;){var G=c[A],Ct=i[G];c[A]=[G,Ct,bc(Ct)]}return c}function Lu(i,c){var A=Ia(i,c);return Ol(A)?A:n}function Gh(i){var c=nr.call(i,T),A=i[T];try{i[T]=n;var G=!0}catch{}var Ct=l.call(i);return G&&(c?i[T]=A:delete i[T]),Ct}var Xo=ve?function(i){return i==null?[]:(i=wn(i),Zs(ve(i),function(c){return yt.call(i,c)}))}:wl,Ac=ve?function(i){for(var c=[];i;)li(c,Xo(i)),i=K(i);return c}:wl,$s=Ls;(Ie&&$s(new Ie(new ArrayBuffer(1)))!=S||br&&$s(new br)!=k||xr&&$s(xr.resolve())!=rr||Fr&&$s(new Fr)!=ur||Vr&&$s(new Vr)!=Sr)&&($s=function(i){var c=Ls(i),A=c==me?i.constructor:n,G=A?Hu(A):"";if(G)switch(G){case bi:return S;case Ns:return k;case Es:return rr;case bs:return ur;case Is:return Sr}return c});function Jh(i,c,A){for(var G=-1,Ct=A.length;++G<Ct;){var qt=A[G],ae=qt.size;switch(qt.type){case"drop":i+=ae;break;case"dropRight":c-=ae;break;case"take":c=St(c,i+ae);break;case"takeRight":i=z(i,c-ae);break}}return{start:i,end:c}}function Wh(i){var c=i.match($e);return c?c[1].split(Ce):[]}function wc(i,c,A){c=Eu(c,i);for(var G=-1,Ct=c.length,qt=!1;++G<Ct;){var ae=Mi(c[G]);if(!(qt=i!=null&&A(i,ae)))break;i=i[ae]}return qt||++G!=Ct?qt:(Ct=i==null?0:i.length,!!Ct&&fo(Ct)&&uu(ae,Ct)&&(Hr(i)||Ju(i)))}function Yh(i){var c=i.length,A=new i.constructor(c);return c&&typeof i[0]=="string"&&nr.call(i,"index")&&(A.index=i.index,A.input=i.input),A}function Fc(i){return typeof i.constructor=="function"&&!La(i)?ps(K(i)):{}}function Xh(i,c,A){var G=i.constructor;switch(c){case f:return No(i);case qe:case Ze:return new G(+i);case S:return Sh(i,A);case Y:case It:case Ot:case nt:case zt:case jt:case Se:case _t:case gt:return ec(i,A);case k:return new G;case Z:case er:return new G(i);case mr:return Ih(i);case ur:return new G;case Gr:return Rh(i)}}function Zh(i,c){var A=c.length;if(!A)return i;var G=A-1;return c[G]=(A>1?"& ":"")+c[G],c=c.join(A>2?", ":" "),i.replace(re,`{
/* [wrapped with `+c+`] */
`)}function Qh(i){return Hr(i)||Ju(i)||!!(I&&i&&i[I])}function uu(i,c){var A=typeof i;return c=c??Le,!!c&&(A=="number"||A!="symbol"&&qr.test(i))&&i>-1&&i%1==0&&i<c}function Hs(i,c,A){if(!Zn(A))return!1;var G=typeof c;return(G=="number"?Js(A)&&uu(c,A.length):G=="string"&&c in A)?Ci(A[c],i):!1}function Qo(i,c){if(Hr(i))return!1;var A=typeof i;return A=="number"||A=="symbol"||A=="boolean"||i==null||si(i)?!0:sr.test(i)||!Be.test(i)||c!=null&&i in wn(c)}function t0(i){var c=typeof i;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?i!=="__proto__":i===null}function tl(i){var c=so(i),A=Pt[c];if(typeof A!="function"||!(c in Kr.prototype))return!1;if(i===A)return!0;var G=Wo(A);return!!G&&i===G[0]}function e0(i){return!!r&&r in i}var r0=eu?au:Fl;function La(i){var c=i&&i.constructor,A=typeof c=="function"&&c.prototype||ri;return i===A}function bc(i){return i===i&&!Zn(i)}function Dc(i,c){return function(A){return A==null?!1:A[i]===c&&(c!==n||i in wn(A))}}function u0(i){var c=co(i,function(G){return A.size===m&&A.clear(),G}),A=c.cache;return c}function o0(i,c){var A=i[1],G=c[1],Ct=A|G,qt=Ct<(tt|J|V),ae=G==V&&A==Q||G==V&&A==lt&&i[7].length<=c[8]||G==(V|lt)&&c[7].length<=c[8]&&A==Q;if(!(qt||ae))return i;G&tt&&(i[2]=c[2],Ct|=A&tt?0:N);var he=c[3];if(he){var we=i[3];i[3]=we?nc(we,he,c[4]):he,i[4]=we?Bs(i[3],D):c[4]}return he=c[5],he&&(we=i[5],i[5]=we?uc(we,he,c[6]):he,i[6]=we?Bs(i[5],D):c[6]),he=c[7],he&&(i[7]=he),G&V&&(i[8]=i[8]==null?c[8]:St(i[8],c[8])),i[9]==null&&(i[9]=c[9]),i[0]=c[0],i[1]=Ct,i}function c0(i){var c=[];if(i!=null)for(var A in wn(i))c.push(A);return c}function p0(i){return l.call(i)}function Cc(i,c,A){return c=z(c===n?i.length-1:c,0),function(){for(var G=arguments,Ct=-1,qt=z(G.length-c,0),ae=Re(qt);++Ct<qt;)ae[Ct]=G[c+Ct];Ct=-1;for(var he=Re(c+1);++Ct<c;)he[Ct]=G[Ct];return he[c]=A(ae),Fs(i,this,he)}}function xc(i,c){return c.length<2?i:Uu(i,di(c,0,-1))}function h0(i,c){for(var A=i.length,G=St(c.length,A),Ct=Gs(i);G--;){var qt=c[G];i[G]=uu(qt,A)?Ct[qt]:n}return i}function rl(i,c){if(!(c==="constructor"&&typeof i[c]=="function")&&c!="__proto__")return i[c]}var _c=Bc(Vl),Ha=Tt||function(i,c){return Qn.setTimeout(i,c)},nl=Bc(Dh);function Sc(i,c,A){var G=c+"";return nl(i,Zh(G,f0(Wh(G),A)))}function Bc(i){var c=0,A=0;return function(){var G=Mt(),Ct=wt-(G-A);if(A=G,Ct>0){if(++c>=vt)return arguments[0]}else c=0;return i.apply(n,arguments)}}function uo(i,c){var A=-1,G=i.length,Ct=G-1;for(c=c===n?G:c;++A<c;){var qt=Bo(A,Ct),ae=i[qt];i[qt]=i[A],i[A]=ae}return i.length=c,i}var Ic=u0(function(i){var c=[];return i.charCodeAt(0)===46&&c.push(""),i.replace(P,function(A,G,Ct,qt){c.push(Ct?qt.replace(tr,"$1"):G||A)}),c});function Mi(i){if(typeof i=="string"||si(i))return i;var c=i+"";return c=="0"&&1/i==-oe?"-0":c}function Hu(i){if(i!=null){try{return Ni.call(i)}catch{}try{return i+""}catch{}}return""}function f0(i,c){return Ge(Xe,function(A){var G="_."+A[0];c&A[1]&&!Ai(i,G)&&i.push(G)}),i.sort()}function Rc(i){if(i instanceof Kr)return i.clone();var c=new Un(i.__wrapped__,i.__chain__);return c.__actions__=Gs(i.__actions__),c.__index__=i.__index__,c.__values__=i.__values__,c}function d0(i,c,A){(A?Hs(i,c,A):c===n)?c=1:c=z(zr(c),0);var G=i==null?0:i.length;if(!G||c<1)return[];for(var Ct=0,qt=0,ae=Re(Wt(G/c));Ct<G;)ae[qt++]=di(i,Ct,Ct+=c);return ae}function g0(i){for(var c=-1,A=i==null?0:i.length,G=0,Ct=[];++c<A;){var qt=i[c];qt&&(Ct[G++]=qt)}return Ct}function y0(){var i=arguments.length;if(!i)return[];for(var c=Re(i-1),A=arguments[0],G=i;G--;)c[G-1]=arguments[G];return li(Hr(A)?Gs(A):[A],Ds(c,1))}var m0=Qr(function(i,c){return ss(i)?Pa(i,Ds(c,1,ss,!0)):[]}),E0=Qr(function(i,c){var A=yi(c);return ss(A)&&(A=n),ss(i)?Pa(i,Ds(c,1,ss,!0),Ir(A,2)):[]}),v0=Qr(function(i,c){var A=yi(c);return ss(A)&&(A=n),ss(i)?Pa(i,Ds(c,1,ss,!0),n,A):[]});function A0(i,c,A){var G=i==null?0:i.length;return G?(c=A||c===n?1:zr(c),di(i,c<0?0:c,G)):[]}function w0(i,c,A){var G=i==null?0:i.length;return G?(c=A||c===n?1:zr(c),c=G-c,di(i,0,c<0?0:c)):[]}function F0(i,c){return i&&i.length?Wa(i,Ir(c,3),!0,!0):[]}function b0(i,c){return i&&i.length?Wa(i,Ir(c,3),!0):[]}function C0(i,c,A,G){var Ct=i==null?0:i.length;return Ct?(A&&typeof A!="number"&&Hs(i,c,A)&&(A=0,G=Ct),ih(i,c,A,G)):[]}function $c(i,c,A){var G=i==null?0:i.length;if(!G)return-1;var Ct=A==null?0:zr(A);return Ct<0&&(Ct=z(G+Ct,0)),pu(i,Ir(c,3),Ct)}function kc(i,c,A){var G=i==null?0:i.length;if(!G)return-1;var Ct=G-1;return A!==n&&(Ct=zr(A),Ct=A<0?z(G+Ct,0):St(Ct,G-1)),pu(i,Ir(c,3),Ct,!0)}function Pc(i){var c=i==null?0:i.length;return c?Ds(i,1):[]}function x0(i){var c=i==null?0:i.length;return c?Ds(i,oe):[]}function _0(i,c){var A=i==null?0:i.length;return A?(c=c===n?1:zr(c),Ds(i,c)):[]}function S0(i){for(var c=-1,A=i==null?0:i.length,G={};++c<A;){var Ct=i[c];G[Ct[0]]=Ct[1]}return G}function Oc(i){return i&&i.length?i[0]:n}function B0(i,c,A){var G=i==null?0:i.length;if(!G)return-1;var Ct=A==null?0:zr(A);return Ct<0&&(Ct=z(G+Ct,0)),Ji(i,c,Ct)}function I0(i){var c=i==null?0:i.length;return c?di(i,0,-1):[]}var R0=Qr(function(i){var c=On(i,Oo);return c.length&&c[0]===i[0]?Do(c):[]}),$0=Qr(function(i){var c=yi(i),A=On(i,Oo);return c===yi(A)?c=n:A.pop(),A.length&&A[0]===i[0]?Do(A,Ir(c,2)):[]}),P0=Qr(function(i){var c=yi(i),A=On(i,Oo);return c=typeof c=="function"?c:n,c&&A.pop(),A.length&&A[0]===i[0]?Do(A,n,c):[]});function O0(i,c){return i==null?"":B.call(i,c)}function yi(i){var c=i==null?0:i.length;return c?i[c-1]:n}function U0(i,c,A){var G=i==null?0:i.length;if(!G)return-1;var Ct=G;return A!==n&&(Ct=zr(A),Ct=Ct<0?z(G+Ct,0):St(Ct,G-1)),c===c?Tu(i,c,Ct):pu(i,_r,Ct,!0)}function L0(i,c){return i&&i.length?Ll(i,zr(c)):n}var G0=Qr(Tc);function Tc(i,c){return i&&i.length&&c&&c.length?So(i,c):i}function J0(i,c,A){return i&&i.length&&c&&c.length?So(i,c,Ir(A,2)):i}function Y0(i,c,A){return i&&i.length&&c&&c.length?So(i,c,n,A):i}var X0=iu(function(i,c){var A=i==null?0:i.length,G=Ao(i,c);return ql(i,On(c,function(Ct){return uu(Ct,A)?+Ct:Ct}).sort(rc)),G});function Z0(i,c){var A=[];if(!(i&&i.length))return A;var G=-1,Ct=[],qt=i.length;for(c=Ir(c,3);++G<qt;){var ae=i[G];c(ae,G,i)&&(A.push(ae),Ct.push(G))}return ql(i,Ct),A}function sl(i){return i==null?i:ge.call(i)}function Q0(i,c,A){var G=i==null?0:i.length;return G?(A&&typeof A!="number"&&Hs(i,c,A)?(c=0,A=G):(c=c==null?0:zr(c),A=A===n?G:zr(A)),di(i,c,A)):[]}function tf(i,c){return Ja(i,c)}function ef(i,c,A){return Ro(i,c,Ir(A,2))}function rf(i,c){var A=i==null?0:i.length;if(A){var G=Ja(i,c);if(G<A&&Ci(i[G],c))return G}return-1}function nf(i,c){return Ja(i,c,!0)}function sf(i,c,A){return Ro(i,c,Ir(A,2),!0)}function uf(i,c){var A=i==null?0:i.length;if(A){var G=Ja(i,c,!0)-1;if(Ci(i[G],c))return G}return-1}function af(i){return i&&i.length?Kl(i):[]}function of(i,c){return i&&i.length?Kl(i,Ir(c,2)):[]}function lf(i){var c=i==null?0:i.length;return c?di(i,1,c):[]}function cf(i,c,A){return i&&i.length?(c=A||c===n?1:zr(c),di(i,0,c<0?0:c)):[]}function pf(i,c,A){var G=i==null?0:i.length;return G?(c=A||c===n?1:zr(c),c=G-c,di(i,c<0?0:c,G)):[]}function hf(i,c){return i&&i.length?Wa(i,Ir(c,3),!1,!0):[]}function ff(i,c){return i&&i.length?Wa(i,Ir(c,3)):[]}var df=Qr(function(i){return mu(Ds(i,1,ss,!0))}),gf=Qr(function(i){var c=yi(i);return ss(c)&&(c=n),mu(Ds(i,1,ss,!0),Ir(c,2))}),yf=Qr(function(i){var c=yi(i);return c=typeof c=="function"?c:n,mu(Ds(i,1,ss,!0),n,c)});function mf(i){return i&&i.length?mu(i):[]}function Ef(i,c){return i&&i.length?mu(i,Ir(c,2)):[]}function vf(i,c){return c=typeof c=="function"?c:n,i&&i.length?mu(i,n,c):[]}function il(i){if(!(i&&i.length))return[];var c=0;return i=Zs(i,function(A){if(ss(A))return c=z(A.length,c),!0}),ms(c,function(A){return On(i,Yi(A))})}function Nc(i,c){if(!(i&&i.length))return[];var A=il(i);return c==null?A:On(A,function(G){return Fs(c,n,G)})}var Af=Qr(function(i,c){return ss(i)?Pa(i,c):[]}),wf=Qr(function(i){return Po(Zs(i,ss))}),bf=Qr(function(i){var c=yi(i);return ss(c)&&(c=n),Po(Zs(i,ss),Ir(c,2))}),xf=Qr(function(i){var c=yi(i);return c=typeof c=="function"?c:n,Po(Zs(i,ss),n,c)}),_f=Qr(il);function Sf(i,c){return Wl(i||[],c||[],ka)}function Bf(i,c){return Wl(i||[],c||[],ja)}var kf=Qr(function(i){var c=i.length,A=c>1?i[c-1]:n;return A=typeof A=="function"?(i.pop(),A):n,Nc(i,A)});function jc(i){var c=Pt(i);return c.__chain__=!0,c}function Pf(i,c){return c(i),i}function ao(i,c){return c(i)}var Of=iu(function(i){var c=i.length,A=c?i[0]:0,G=this.__wrapped__,Ct=function(qt){return Ao(qt,i)};return c>1||this.__actions__.length||!(G instanceof Kr)||!uu(A)?this.thru(Ct):(G=G.slice(A,+A+(c?1:0)),G.__actions__.push({func:ao,args:[Ct],thisArg:n}),new Un(G,this.__chain__).thru(function(qt){return c&&!qt.length&&qt.push(n),qt}))});function Tf(){return jc(this)}function Nf(){return new Un(this.value(),this.__chain__)}function jf(){this.__values__===n&&(this.__values__=sp(this.value()));var i=this.__index__>=this.__values__.length,c=i?n:this.__values__[this.__index__++];return{done:i,value:c}}function Lf(){return this}function Hf(i){for(var c,A=this;A instanceof yn;){var G=Rc(A);G.__index__=0,G.__values__=n,c?Ct.__wrapped__=G:c=G;var Ct=G;A=A.__wrapped__}return Ct.__wrapped__=i,c}function Mf(){var i=this.__wrapped__;if(i instanceof Kr){var c=i;return this.__actions__.length&&(c=new Kr(this)),c=c.reverse(),c.__actions__.push({func:ao,args:[sl],thisArg:n}),new Un(c,this.__chain__)}return this.thru(sl)}function qf(){return Jl(this.__wrapped__,this.__actions__)}var Jf=Ya(function(i,c,A){nr.call(i,A)?++i[A]:nu(i,A,1)});function Yf(i,c,A){var G=Hr(i)?_u:sh;return A&&Hs(i,c,A)&&(c=n),G(i,Ir(c,3))}function Xf(i,c){var A=Hr(i)?Zs:Rl;return A(i,Ir(c,3))}var Zf=cc($c),t1=cc(kc);function e1(i,c){return Ds(oo(i,c),1)}function r1(i,c){return Ds(oo(i,c),oe)}function n1(i,c,A){return A=A===n?1:zr(A),Ds(oo(i,c),A)}function Uc(i,c){var A=Hr(i)?Ge:yu;return A(i,Ir(c,3))}function Lc(i,c){var A=Hr(i)?v:Il;return A(i,Ir(c,3))}var s1=Ya(function(i,c,A){nr.call(i,A)?i[A].push(c):nu(i,A,[c])});function i1(i,c,A,G){i=Js(i)?i:va(i),A=A&&!G?zr(A):0;var Ct=i.length;return A<0&&(A=z(Ct+A,0)),go(i)?A<=Ct&&i.indexOf(c,A)>-1:!!Ct&&Ji(i,c,A)>-1}var u1=Qr(function(i,c,A){var G=-1,Ct=typeof c=="function",qt=Js(i)?Re(i.length):[];return yu(i,function(ae){qt[++G]=Ct?Fs(c,ae,A):Ta(ae,c,A)}),qt}),a1=Ya(function(i,c,A){nu(i,A,c)});function oo(i,c){var A=Hr(i)?On:Nl;return A(i,Ir(c,3))}function o1(i,c,A,G){return i==null?[]:(Hr(c)||(c=c==null?[]:[c]),A=G?n:A,Hr(A)||(A=A==null?[]:[A]),Hl(i,c,A))}var l1=Ya(function(i,c,A){i[A?0:1].push(c)},function(){return[[],[]]});function c1(i,c,A){var G=Hr(i)?pt:kn,Ct=arguments.length<3;return G(i,Ir(c,4),A,Ct,yu)}function p1(i,c,A){var G=Hr(i)?Rr:kn,Ct=arguments.length<3;return G(i,Ir(c,4),A,Ct,Il)}function h1(i,c){var A=Hr(i)?Zs:Rl;return A(i,po(Ir(c,3)))}function f1(i){var c=Hr(i)?xl:Fh;return c(i)}function d1(i,c,A){(A?Hs(i,c,A):c===n)?c=1:c=zr(c);var G=Hr(i)?Zp:bh;return G(i,c)}function g1(i){var c=Hr(i)?Qp:Ch;return c(i)}function y1(i){if(i==null)return 0;if(Js(i))return go(i)?ti(i):i.length;var c=$s(i);return c==k||c==ur?i.size:xo(i).length}function m1(i,c,A){var G=Hr(i)?Vs:xh;return A&&Hs(i,c,A)&&(c=n),G(i,Ir(c,3))}var E1=Qr(function(i,c){if(i==null)return[];var A=c.length;return A>1&&Hs(i,c[0],c[1])?c=[]:A>2&&Hs(c[0],c[1],c[2])&&(c=[c[0]]),Hl(i,Ds(c,1),[])}),lo=Ft||function(){return Qn.Date.now()};function v1(i,c){if(typeof c!="function")throw new Oe(y);return i=zr(i),function(){if(--i<1)return c.apply(this,arguments)}}function Hc(i,c,A){return c=A?n:c,c=i&&c==null?i.length:c,su(i,V,n,n,n,n,c)}function Mc(i,c){var A;if(typeof c!="function")throw new Oe(y);return i=zr(i),function(){return--i>0&&(A=c.apply(this,arguments)),i<=1&&(c=n),A}}var ul=Qr(function(i,c,A){var G=tt;if(A.length){var Ct=Bs(A,ma(ul));G|=q}return su(i,G,c,A,Ct)}),qc=Qr(function(i,c,A){var G=tt|J;if(A.length){var Ct=Bs(A,ma(qc));G|=q}return su(c,G,i,A,Ct)});function zc(i,c,A){c=A?n:c;var G=su(i,Q,n,n,n,n,n,c);return G.placeholder=zc.placeholder,G}function Gc(i,c,A){c=A?n:c;var G=su(i,it,n,n,n,n,n,c);return G.placeholder=Gc.placeholder,G}function Wc(i,c,A){var G,Ct,qt,ae,he,we,Ve=0,Ke=!1,Ye=!1,or=!0;if(typeof i!="function")throw new Oe(y);c=mi(c)||0,Zn(A)&&(Ke=!!A.leading,Ye="maxWait"in A,qt=Ye?z(mi(A.maxWait)||0,c):qt,or="trailing"in A?!!A.trailing:or);function Dr(us){var xi=G,lu=Ct;return G=Ct=n,Ve=us,ae=i.apply(lu,xi),ae}function $r(us){return Ve=us,he=Ha(rn,c),Ke?Dr(us):ae}function Jr(us){var xi=us-we,lu=us-Ve,Ep=c-xi;return Ye?St(Ep,qt-lu):Ep}function kr(us){var xi=us-we,lu=us-Ve;return we===n||xi>=c||xi<0||Ye&&lu>=qt}function rn(){var us=lo();if(kr(us))return dn(us);he=Ha(rn,Jr(us))}function dn(us){return he=n,or&&G?Dr(us):(G=Ct=n,ae)}function ii(){he!==n&&Xl(he),Ve=0,G=we=Ct=he=n}function Ms(){return he===n?ae:dn(lo())}function ai(){var us=lo(),xi=kr(us);if(G=arguments,Ct=this,we=us,xi){if(he===n)return $r(we);if(Ye)return Xl(he),he=Ha(rn,c),Dr(we)}return he===n&&(he=Ha(rn,c)),ae}return ai.cancel=ii,ai.flush=Ms,ai}var A1=Qr(function(i,c){return Bl(i,1,c)}),w1=Qr(function(i,c,A){return Bl(i,mi(c)||0,A)});function F1(i){return su(i,mt)}function co(i,c){if(typeof i!="function"||c!=null&&typeof c!="function")throw new Oe(y);var A=function(){var G=arguments,Ct=c?c.apply(this,G):G[0],qt=A.cache;if(qt.has(Ct))return qt.get(Ct);var ae=i.apply(this,G);return A.cache=qt.set(Ct,ae)||qt,ae};return A.cache=new(co.Cache||ru),A}co.Cache=ru;function po(i){if(typeof i!="function")throw new Oe(y);return function(){var c=arguments;switch(c.length){case 0:return!i.call(this);case 1:return!i.call(this,c[0]);case 2:return!i.call(this,c[0],c[1]);case 3:return!i.call(this,c[0],c[1],c[2])}return!i.apply(this,c)}}function b1(i){return Mc(2,i)}var D1=_h(function(i,c){c=c.length==1&&Hr(c[0])?On(c[0],ke(Ir())):On(Ds(c,1),ke(Ir()));var A=c.length;return Qr(function(G){for(var Ct=-1,qt=St(G.length,A);++Ct<qt;)G[Ct]=c[Ct].call(this,G[Ct]);return Fs(i,this,G)})}),al=Qr(function(i,c){var A=Bs(c,ma(al));return su(i,q,n,c,A)}),Yc=Qr(function(i,c){var A=Bs(c,ma(Yc));return su(i,L,n,c,A)}),C1=iu(function(i,c){return su(i,lt,n,n,n,c)});function x1(i,c){if(typeof i!="function")throw new Oe(y);return c=c===n?c:zr(c),Qr(i,c)}function _1(i,c){if(typeof i!="function")throw new Oe(y);return c=c==null?0:z(zr(c),0),Qr(function(A){var G=A[c],Ct=Au(A,0,c);return G&&li(Ct,G),Fs(i,this,Ct)})}function S1(i,c,A){var G=!0,Ct=!0;if(typeof i!="function")throw new Oe(y);return Zn(A)&&(G="leading"in A?!!A.leading:G,Ct="trailing"in A?!!A.trailing:Ct),Wc(i,c,{leading:G,maxWait:c,trailing:Ct})}function B1(i){return Hc(i,1)}function I1(i,c){return al(To(c),i)}function R1(){if(!arguments.length)return[];var i=arguments[0];return Hr(i)?i:[i]}function $1(i){return fi(i,W)}function k1(i,c){return c=typeof c=="function"?c:n,fi(i,W,c)}function P1(i){return fi(i,a|W)}function O1(i,c){return c=typeof c=="function"?c:n,fi(i,a|W,c)}function T1(i,c){return c==null||Sl(i,c,As(c))}function Ci(i,c){return i===c||i!==i&&c!==c}var N1=ro(bo),j1=ro(function(i,c){return i>=c}),Ju=Pl((function(){return arguments})())?Pl:function(i){return rs(i)&&nr.call(i,"callee")&&!yt.call(i,"callee")},Hr=Re.isArray,U1=Zu?ke(Zu):ch;function Js(i){return i!=null&&fo(i.length)&&!au(i)}function ss(i){return rs(i)&&Js(i)}function L1(i){return i===!0||i===!1||rs(i)&&Ls(i)==qe}var bu=be||Fl,H1=Qu?ke(Qu):ph;function M1(i){return rs(i)&&i.nodeType===1&&!Ma(i)}function q1(i){if(i==null)return!0;if(Js(i)&&(Hr(i)||typeof i=="string"||typeof i.splice=="function"||bu(i)||Ea(i)||Ju(i)))return!i.length;var c=$s(i);if(c==k||c==ur)return!i.size;if(La(i))return!xo(i).length;for(var A in i)if(nr.call(i,A))return!1;return!0}function V1(i,c){return Na(i,c)}function K1(i,c,A){A=typeof A=="function"?A:n;var G=A?A(i,c):n;return G===n?Na(i,c,n,A):!!G}function ol(i){if(!rs(i))return!1;var c=Ls(i);return c==Or||c==Ar||typeof i.message=="string"&&typeof i.name=="string"&&!Ma(i)}function z1(i){return typeof i=="number"&&d(i)}function au(i){if(!Zn(i))return!1;var c=Ls(i);return c==Cr||c==et||c==Qe||c==dr}function tp(i){return typeof i=="number"&&i==zr(i)}function fo(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=Le}function Zn(i){var c=typeof i;return i!=null&&(c=="object"||c=="function")}function rs(i){return i!=null&&typeof i=="object"}var ep=ta?ke(ta):fh;function G1(i,c){return i===c||Co(i,c,Yo(c))}function J1(i,c,A){return A=typeof A=="function"?A:n,Co(i,c,Yo(c),A)}function W1(i){return rp(i)&&i!=+i}function Y1(i){if(r0(i))throw new Pr(p);return Ol(i)}function X1(i){return i===null}function Z1(i){return i==null}function rp(i){return typeof i=="number"||rs(i)&&Ls(i)==Z}function Ma(i){if(!rs(i)||Ls(i)!=me)return!1;var c=K(i);if(c===null)return!0;var A=nr.call(c,"constructor")&&c.constructor;return typeof A=="function"&&A instanceof A&&Ni.call(A)==o}var ll=ea?ke(ea):dh;function Q1(i){return tp(i)&&i>=-Le&&i<=Le}var np=ra?ke(ra):gh;function go(i){return typeof i=="string"||!Hr(i)&&rs(i)&&Ls(i)==er}function si(i){return typeof i=="symbol"||rs(i)&&Ls(i)==Gr}var Ea=sa?ke(sa):yh;function td(i){return i===n}function ed(i){return rs(i)&&$s(i)==Sr}function rd(i){return rs(i)&&Ls(i)==j}var nd=ro(_o),sd=ro(function(i,c){return i<=c});function sp(i){if(!i)return[];if(Js(i))return go(i)?Tn(i):Gs(i);if(at&&i[at])return Xi(i[at]());var c=$s(i),A=c==k?wi:c==ur?Zi:va;return A(i)}function ou(i){if(!i)return i===0?i:0;if(i=mi(i),i===oe||i===-oe){var c=i<0?-1:1;return c*de}return i===i?i:0}function zr(i){var c=ou(i),A=c%1;return c===c?A?c-A:c:0}function up(i){return i?ju(zr(i),0,ze):0}function mi(i){if(typeof i=="number")return i;if(si(i))return He;if(Zn(i)){var c=typeof i.valueOf=="function"?i.valueOf():i;i=Zn(c)?c+"":c}if(typeof i!="string")return i===0?i:+i;i=Pi(i);var A=jr.test(i);return A||cn.test(i)?_a(i.slice(2),A?2:8):wr.test(i)?He:+i}function ap(i){return Hi(i,Ws(i))}function ud(i){return i?ju(zr(i),-Le,Le):i===0?i:0}function Bn(i){return i==null?"":ni(i)}var ad=da(function(i,c){if(La(c)||Js(c)){Hi(c,As(c),i);return}for(var A in c)nr.call(c,A)&&ka(i,A,c[A])}),op=da(function(i,c){Hi(c,Ws(c),i)}),yo=da(function(i,c,A,G){Hi(c,Ws(c),i,G)}),od=da(function(i,c,A,G){Hi(c,As(c),i,G)}),ld=iu(Ao);function cd(i,c){var A=ps(i);return c==null?A:_l(A,c)}var pd=Qr(function(i,c){i=wn(i);var A=-1,G=c.length,Ct=G>2?c[2]:n;for(Ct&&Hs(c[0],c[1],Ct)&&(G=1);++A<G;)for(var qt=c[A],ae=Ws(qt),he=-1,we=ae.length;++he<we;){var Ve=ae[he],Ke=i[Ve];(Ke===n||Ci(Ke,ri[Ve])&&!nr.call(i,Ve))&&(i[Ve]=qt[Ve])}return i}),hd=Qr(function(i){return i.push(n,mc),Fs(lp,n,i)});function fd(i,c){return gs(i,Ir(c,3),Ui)}function dd(i,c){return gs(i,Ir(c,3),Fo)}function gd(i,c){return i==null?i:wo(i,Ir(c,3),Ws)}function yd(i,c){return i==null?i:$l(i,Ir(c,3),Ws)}function md(i,c){return i&&Ui(i,Ir(c,3))}function Ed(i,c){return i&&Fo(i,Ir(c,3))}function vd(i){return i==null?[]:za(i,As(i))}function Ad(i){return i==null?[]:za(i,Ws(i))}function cl(i,c,A){var G=i==null?n:Uu(i,c);return G===n?A:G}function wd(i,c){return i!=null&&wc(i,c,uh)}function fl(i,c){return i!=null&&wc(i,c,ah)}var Fd=hc(function(i,c,A){c!=null&&typeof c.toString!="function"&&(c=l.call(c)),i[c]=A},gl(Ys)),bd=hc(function(i,c,A){c!=null&&typeof c.toString!="function"&&(c=l.call(c)),nr.call(i,c)?i[c].push(A):i[c]=[A]},Ir),Dd=Qr(Ta);function As(i){return Js(i)?Cl(i):xo(i)}function Ws(i){return Js(i)?Cl(i,!0):mh(i)}function Cd(i,c){var A={};return c=Ir(c,3),Ui(i,function(G,Ct,qt){nu(A,c(G,Ct,qt),G)}),A}function xd(i,c){var A={};return c=Ir(c,3),Ui(i,function(G,Ct,qt){nu(A,Ct,c(G,Ct,qt))}),A}var _d=da(function(i,c,A){Ga(i,c,A)}),lp=da(function(i,c,A,G){Ga(i,c,A,G)}),Sd=iu(function(i,c){var A={};if(i==null)return A;var G=!1;c=On(c,function(qt){return qt=Eu(qt,i),G||(G=qt.length>1),qt}),Hi(i,Go(i),A),G&&(A=fi(A,a|H|W,Mh));for(var Ct=c.length;Ct--;)$o(A,c[Ct]);return A});function Bd(i,c){return cp(i,po(Ir(c)))}var Id=iu(function(i,c){return i==null?{}:vh(i,c)});function cp(i,c){if(i==null)return{};var A=On(Go(i),function(G){return[G]});return c=Ir(c),Ml(i,A,function(G,Ct){return c(G,Ct[0])})}function Rd(i,c,A){c=Eu(c,i);var G=-1,Ct=c.length;for(Ct||(Ct=1,i=n);++G<Ct;){var qt=i==null?n:i[Mi(c[G])];qt===n&&(G=Ct,qt=A),i=au(qt)?qt.call(i):qt}return i}function $d(i,c,A){return i==null?i:ja(i,c,A)}function kd(i,c,A,G){return G=typeof G=="function"?G:n,i==null?i:ja(i,c,A,G)}var pp=gc(As),hp=gc(Ws);function Pd(i,c,A){var G=Hr(i),Ct=G||bu(i)||Ea(i);if(c=Ir(c,4),A==null){var qt=i&&i.constructor;Ct?A=G?new qt:[]:Zn(i)?A=au(qt)?ps(K(i)):{}:A={}}return(Ct?Ge:Ui)(i,function(ae,he,we){return c(A,ae,he,we)}),A}function Od(i,c){return i==null?!0:$o(i,c)}function Td(i,c,A){return i==null?i:Gl(i,c,To(A))}function Nd(i,c,A,G){return G=typeof G=="function"?G:n,i==null?i:Gl(i,c,To(A),G)}function va(i){return i==null?[]:Pn(i,As(i))}function Ud(i){return i==null?[]:Pn(i,Ws(i))}function Ld(i,c,A){return A===n&&(A=c,c=n),A!==n&&(A=mi(A),A=A===A?A:0),c!==n&&(c=mi(c),c=c===c?c:0),ju(mi(i),c,A)}function Jd(i,c,A){return c=ou(c),A===n?(A=c,c=0):A=ou(A),i=mi(i),oh(i,c,A)}function Wd(i,c,A){if(A&&typeof A!="boolean"&&Hs(i,c,A)&&(c=A=n),A===n&&(typeof c=="boolean"?(A=c,c=n):typeof i=="boolean"&&(A=i,i=n)),i===n&&c===n?(i=0,c=1):(i=ou(i),c===n?(c=i,i=0):c=ou(c)),i>c){var G=i;i=c,c=G}if(A||i%1||c%1){var Ct=ie();return St(i+Ct*(c-i+Ca("1e-"+((Ct+"").length-1))),c)}return Bo(i,c)}var Zd=ga(function(i,c,A){return c=c.toLowerCase(),i+(A?fp(c):c)});function fp(i){return dl(Bn(i).toLowerCase())}function dp(i){return i=Bn(i),i&&i.replace(Er,oa).replace(ws,"")}function Qd(i,c,A){i=Bn(i),c=ni(c);var G=i.length;A=A===n?G:ju(zr(A),0,G);var Ct=A;return A-=c.length,A>=0&&i.slice(A,Ct)==c}function tg(i){return i=Bn(i),i&&Yt.test(i)?i.replace(Dt,Pu):i}function eg(i){return i=Bn(i),i&&Vt.test(i)?i.replace(le,"\\$&"):i}var rg=ga(function(i,c,A){return i+(A?"-":"")+c.toLowerCase()}),ng=ga(function(i,c,A){return i+(A?" ":"")+c.toLowerCase()}),sg=lc("toLowerCase");function ig(i,c,A){i=Bn(i),c=zr(c);var G=c?ti(i):0;if(!c||G>=c)return i;var Ct=(c-G)/2;return eo(Gt(Ct),A)+i+eo(Wt(Ct),A)}function ug(i,c,A){i=Bn(i),c=zr(c);var G=c?ti(i):0;return c&&G<c?i+eo(c-G,A):i}function ag(i,c,A){i=Bn(i),c=zr(c);var G=c?ti(i):0;return c&&G<c?eo(c-G,A)+i:i}function og(i,c,A){return A||c==null?c=0:c&&(c=+c),te(Bn(i).replace(pe,""),c||0)}function lg(i,c,A){return(A?Hs(i,c,A):c===n)?c=1:c=zr(c),Io(Bn(i),c)}function cg(){var i=arguments,c=Bn(i[0]);return i.length<3?c:c.replace(i[1],i[2])}var pg=ga(function(i,c,A){return i+(A?"_":"")+c.toLowerCase()});function hg(i,c,A){return A&&typeof A!="number"&&Hs(i,c,A)&&(c=A=n),A=A===n?ze:A>>>0,A?(i=Bn(i),i&&(typeof c=="string"||c!=null&&!ll(c))&&(c=ni(c),!c&&Qs(i))?Au(Tn(i),0,A):i.split(c,A)):[]}var fg=ga(function(i,c,A){return i+(A?" ":"")+dl(c)});function dg(i,c,A){return i=Bn(i),A=A==null?0:ju(zr(A),0,i.length),c=ni(c),i.slice(A,A+c.length)==c}function Cg(i,c,A){var G=Pt.templateSettings;A&&Hs(i,c,A)&&(c=n),i=Bn(i),c=yo({},c,G,yc);var Ct=yo({},c.imports,G.imports,yc),qt=As(Ct),ae=Pn(Ct,qt),he,we,Ve=0,Ke=c.interpolate||Tr,Ye="__p += '",or=Fi((c.escape||Tr).source+"|"+Ke.source+"|"+(Ke===Ee?lr:Tr).source+"|"+(c.evaluate||Tr).source+"|$","g"),Dr="//# sourceURL="+(nr.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++wa+"]")+`
`;i.replace(or,function(kr,rn,dn,ii,Ms,ai){return dn||(dn=ii),Ye+=i.slice(Ve,ai).replace(gn,Ou),rn&&(he=!0,Ye+=`' +
__e(`+rn+`) +
'`),Ms&&(we=!0,Ye+=`';
`+Ms+`;
__p += '`),dn&&(Ye+=`' +
((__t = (`+dn+`)) == null ? '' : __t) +
'`),Ve=ai+kr.length,kr}),Ye+=`';
`;var $r=nr.call(c,"variable")&&c.variable;if(!$r)Ye=`with (obj) {
`+Ye+`
}
`;else if(Ne.test($r))throw new Pr(g);Ye=(we?Ye.replace(rt,""):Ye).replace(F,"$1").replace(st,"$1;"),Ye="function("+($r||"obj")+`) {
`+($r?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(he?", __e = _.escape":"")+(we?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ye+`return __p
}`;var Jr=yp(function(){return on(qt,Dr+"return "+Ye).apply(n,ae)});if(Jr.source=Ye,ol(Jr))throw Jr;return Jr}function Sg(i){return Bn(i).toLowerCase()}function Rg(i){return Bn(i).toUpperCase()}function $g(i,c,A){if(i=Bn(i),i&&(A||c===n))return Pi(i);if(!i||!(c=ni(c)))return i;var G=Tn(i),Ct=Tn(c),qt=$u(G,Ct),ae=aa(G,Ct)+1;return Au(G,qt,ae).join("")}function kg(i,c,A){if(i=Bn(i),i&&(A||c===n))return i.slice(0,Qi(i)+1);if(!i||!(c=ni(c)))return i;var G=Tn(i),Ct=aa(G,Tn(c))+1;return Au(G,0,Ct).join("")}function Pg(i,c,A){if(i=Bn(i),i&&(A||c===n))return i.replace(pe,"");if(!i||!(c=ni(c)))return i;var G=Tn(i),Ct=$u(G,Tn(c));return Au(G,Ct).join("")}function Tg(i,c){var A=Rt,G=Et;if(Zn(c)){var Ct="separator"in c?c.separator:Ct;A="length"in c?zr(c.length):A,G="omission"in c?ni(c.omission):G}i=Bn(i);var qt=i.length;if(Qs(i)){var ae=Tn(i);qt=ae.length}if(A>=qt)return i;var he=A-ti(G);if(he<1)return G;var we=ae?Au(ae,0,he).join(""):i.slice(0,he);if(Ct===n)return we+G;if(ae&&(he+=we.length-he),ll(Ct)){if(i.slice(he).search(Ct)){var Ve,Ke=we;for(Ct.global||(Ct=Fi(Ct.source,Bn(ar.exec(Ct))+"g")),Ct.lastIndex=0;Ve=Ct.exec(Ke);)var Ye=Ve.index;we=we.slice(0,Ye===n?he:Ye)}}else if(i.indexOf(ni(Ct),he)!=he){var or=we.lastIndexOf(Ct);or>-1&&(we=we.slice(0,or))}return we+G}function Ng(i){return i=Bn(i),i&&Nt.test(i)?i.replace(At,ei):i}var jg=ga(function(i,c,A){return i+(A?" ":"")+c.toUpperCase()}),dl=lc("toUpperCase");function gp(i,c,A){return i=Bn(i),c=A?n:c,c===n?hu(i)?Ra(i):Fe(i):i.match(c)||[]}var yp=Qr(function(i,c){try{return Fs(i,n,c)}catch(A){return ol(A)?A:new Pr(A)}}),Ug=iu(function(i,c){return Ge(c,function(A){A=Mi(A),nu(i,A,ul(i[A],i))}),i});function Lg(i){var c=i==null?0:i.length,A=Ir();return i=c?On(i,function(G){if(typeof G[1]!="function")throw new Oe(y);return[A(G[0]),G[1]]}):[],Qr(function(G){for(var Ct=-1;++Ct<c;){var qt=i[Ct];if(Fs(qt[0],this,G))return Fs(qt[1],this,G)}})}function Hg(i){return nh(fi(i,a))}function gl(i){return function(){return i}}function Mg(i,c){return i==null||i!==i?c:i}var qg=pc(),Vg=pc(!0);function Ys(i){return i}function ml(i){return Tl(typeof i=="function"?i:fi(i,a))}function Kg(i){return jl(fi(i,a))}function zg(i,c){return Ul(i,fi(c,a))}var Gg=Qr(function(i,c){return function(A){return Ta(A,i,c)}}),Jg=Qr(function(i,c){return function(A){return Ta(i,A,c)}});function vl(i,c,A){var G=As(c),Ct=za(c,G);A==null&&!(Zn(c)&&(Ct.length||!G.length))&&(A=c,c=i,i=this,Ct=za(c,As(c)));var qt=!(Zn(A)&&"chain"in A)||!!A.chain,ae=au(i);return Ge(Ct,function(he){var we=c[he];i[he]=we,ae&&(i.prototype[he]=function(){var Ve=this.__chain__;if(qt||Ve){var Ke=i(this.__wrapped__),Ye=Ke.__actions__=Gs(this.__actions__);return Ye.push({func:we,args:arguments,thisArg:i}),Ke.__chain__=Ve,Ke}return we.apply(i,li([this.value()],arguments))})}),i}function Wg(){return Qn._===this&&(Qn._=h),this}function Al(){}function Yg(i){return i=zr(i),Qr(function(c){return Ll(c,i)})}var Xg=Mo(On),Zg=Mo(_u),Qg=Mo(Vs);function mp(i){return Qo(i)?Yi(Mi(i)):Ah(i)}function t2(i){return function(c){return i==null?n:Uu(i,c)}}var e2=fc(),r2=fc(!0);function wl(){return[]}function Fl(){return!1}function n2(){return{}}function s2(){return""}function u2(){return!0}function a2(i,c){if(i=zr(i),i<1||i>Le)return[];var A=ze,G=St(i,ze);c=Ir(c),i-=ze;for(var Ct=ms(G,c);++A<i;)c(A);return Ct}function o2(i){return Hr(i)?On(i,Mi):si(i)?[i]:Gs(Ic(Bn(i)))}function l2(i){var c=++$a;return Bn(i)+c}var c2=Za(function(i,c){return i+c},0),p2=qo("ceil"),h2=Za(function(i,c){return i/c},1),f2=qo("floor");function d2(i){return i&&i.length?Ka(i,Ys,bo):n}function g2(i,c){return i&&i.length?Ka(i,Ir(c,2),bo):n}function y2(i){return Ba(i,Ys)}function m2(i,c){return Ba(i,Ir(c,2))}function E2(i){return i&&i.length?Ka(i,Ys,_o):n}function v2(i,c){return i&&i.length?Ka(i,Ir(c,2),_o):n}var A2=Za(function(i,c){return i*c},1),w2=qo("round"),F2=Za(function(i,c){return i-c},0);function b2(i){return i&&i.length?Iu(i,Ys):0}function D2(i,c){return i&&i.length?Iu(i,Ir(c,2)):0}return Pt.after=v1,Pt.ary=Hc,Pt.assign=ad,Pt.assignIn=op,Pt.assignInWith=yo,Pt.assignWith=od,Pt.at=ld,Pt.before=Mc,Pt.bind=ul,Pt.bindAll=Ug,Pt.bindKey=qc,Pt.castArray=R1,Pt.chain=jc,Pt.chunk=d0,Pt.compact=g0,Pt.concat=y0,Pt.cond=Lg,Pt.conforms=Hg,Pt.constant=gl,Pt.countBy=Jf,Pt.create=cd,Pt.curry=zc,Pt.curryRight=Gc,Pt.debounce=Wc,Pt.defaults=pd,Pt.defaultsDeep=hd,Pt.defer=A1,Pt.delay=w1,Pt.difference=m0,Pt.differenceBy=E0,Pt.differenceWith=v0,Pt.drop=A0,Pt.dropRight=w0,Pt.dropRightWhile=F0,Pt.dropWhile=b0,Pt.fill=C0,Pt.filter=Xf,Pt.flatMap=e1,Pt.flatMapDeep=r1,Pt.flatMapDepth=n1,Pt.flatten=Pc,Pt.flattenDeep=x0,Pt.flattenDepth=_0,Pt.flip=F1,Pt.flow=qg,Pt.flowRight=Vg,Pt.fromPairs=S0,Pt.functions=vd,Pt.functionsIn=Ad,Pt.groupBy=s1,Pt.initial=I0,Pt.intersection=R0,Pt.intersectionBy=$0,Pt.intersectionWith=P0,Pt.invert=Fd,Pt.invertBy=bd,Pt.invokeMap=u1,Pt.iteratee=ml,Pt.keyBy=a1,Pt.keys=As,Pt.keysIn=Ws,Pt.map=oo,Pt.mapKeys=Cd,Pt.mapValues=xd,Pt.matches=Kg,Pt.matchesProperty=zg,Pt.memoize=co,Pt.merge=_d,Pt.mergeWith=lp,Pt.method=Gg,Pt.methodOf=Jg,Pt.mixin=vl,Pt.negate=po,Pt.nthArg=Yg,Pt.omit=Sd,Pt.omitBy=Bd,Pt.once=b1,Pt.orderBy=o1,Pt.over=Xg,Pt.overArgs=D1,Pt.overEvery=Zg,Pt.overSome=Qg,Pt.partial=al,Pt.partialRight=Yc,Pt.partition=l1,Pt.pick=Id,Pt.pickBy=cp,Pt.property=mp,Pt.propertyOf=t2,Pt.pull=G0,Pt.pullAll=Tc,Pt.pullAllBy=J0,Pt.pullAllWith=Y0,Pt.pullAt=X0,Pt.range=e2,Pt.rangeRight=r2,Pt.rearg=C1,Pt.reject=h1,Pt.remove=Z0,Pt.rest=x1,Pt.reverse=sl,Pt.sampleSize=d1,Pt.set=$d,Pt.setWith=kd,Pt.shuffle=g1,Pt.slice=Q0,Pt.sortBy=E1,Pt.sortedUniq=af,Pt.sortedUniqBy=of,Pt.split=hg,Pt.spread=_1,Pt.tail=lf,Pt.take=cf,Pt.takeRight=pf,Pt.takeRightWhile=hf,Pt.takeWhile=ff,Pt.tap=Pf,Pt.throttle=S1,Pt.thru=ao,Pt.toArray=sp,Pt.toPairs=pp,Pt.toPairsIn=hp,Pt.toPath=o2,Pt.toPlainObject=ap,Pt.transform=Pd,Pt.unary=B1,Pt.union=df,Pt.unionBy=gf,Pt.unionWith=yf,Pt.uniq=mf,Pt.uniqBy=Ef,Pt.uniqWith=vf,Pt.unset=Od,Pt.unzip=il,Pt.unzipWith=Nc,Pt.update=Td,Pt.updateWith=Nd,Pt.values=va,Pt.valuesIn=Ud,Pt.without=Af,Pt.words=gp,Pt.wrap=I1,Pt.xor=wf,Pt.xorBy=bf,Pt.xorWith=xf,Pt.zip=_f,Pt.zipObject=Sf,Pt.zipObjectDeep=Bf,Pt.zipWith=kf,Pt.entries=pp,Pt.entriesIn=hp,Pt.extend=op,Pt.extendWith=yo,vl(Pt,Pt),Pt.add=c2,Pt.attempt=yp,Pt.camelCase=Zd,Pt.capitalize=fp,Pt.ceil=p2,Pt.clamp=Ld,Pt.clone=$1,Pt.cloneDeep=P1,Pt.cloneDeepWith=O1,Pt.cloneWith=k1,Pt.conformsTo=T1,Pt.deburr=dp,Pt.defaultTo=Mg,Pt.divide=h2,Pt.endsWith=Qd,Pt.eq=Ci,Pt.escape=tg,Pt.escapeRegExp=eg,Pt.every=Yf,Pt.find=Zf,Pt.findIndex=$c,Pt.findKey=fd,Pt.findLast=t1,Pt.findLastIndex=kc,Pt.findLastKey=dd,Pt.floor=f2,Pt.forEach=Uc,Pt.forEachRight=Lc,Pt.forIn=gd,Pt.forInRight=yd,Pt.forOwn=md,Pt.forOwnRight=Ed,Pt.get=cl,Pt.gt=N1,Pt.gte=j1,Pt.has=wd,Pt.hasIn=fl,Pt.head=Oc,Pt.identity=Ys,Pt.includes=i1,Pt.indexOf=B0,Pt.inRange=Jd,Pt.invoke=Dd,Pt.isArguments=Ju,Pt.isArray=Hr,Pt.isArrayBuffer=U1,Pt.isArrayLike=Js,Pt.isArrayLikeObject=ss,Pt.isBoolean=L1,Pt.isBuffer=bu,Pt.isDate=H1,Pt.isElement=M1,Pt.isEmpty=q1,Pt.isEqual=V1,Pt.isEqualWith=K1,Pt.isError=ol,Pt.isFinite=z1,Pt.isFunction=au,Pt.isInteger=tp,Pt.isLength=fo,Pt.isMap=ep,Pt.isMatch=G1,Pt.isMatchWith=J1,Pt.isNaN=W1,Pt.isNative=Y1,Pt.isNil=Z1,Pt.isNull=X1,Pt.isNumber=rp,Pt.isObject=Zn,Pt.isObjectLike=rs,Pt.isPlainObject=Ma,Pt.isRegExp=ll,Pt.isSafeInteger=Q1,Pt.isSet=np,Pt.isString=go,Pt.isSymbol=si,Pt.isTypedArray=Ea,Pt.isUndefined=td,Pt.isWeakMap=ed,Pt.isWeakSet=rd,Pt.join=O0,Pt.kebabCase=rg,Pt.last=yi,Pt.lastIndexOf=U0,Pt.lowerCase=ng,Pt.lowerFirst=sg,Pt.lt=nd,Pt.lte=sd,Pt.max=d2,Pt.maxBy=g2,Pt.mean=y2,Pt.meanBy=m2,Pt.min=E2,Pt.minBy=v2,Pt.stubArray=wl,Pt.stubFalse=Fl,Pt.stubObject=n2,Pt.stubString=s2,Pt.stubTrue=u2,Pt.multiply=A2,Pt.nth=L0,Pt.noConflict=Wg,Pt.noop=Al,Pt.now=lo,Pt.pad=ig,Pt.padEnd=ug,Pt.padStart=ag,Pt.parseInt=og,Pt.random=Wd,Pt.reduce=c1,Pt.reduceRight=p1,Pt.repeat=lg,Pt.replace=cg,Pt.result=Rd,Pt.round=w2,Pt.runInContext=ye,Pt.sample=f1,Pt.size=y1,Pt.snakeCase=pg,Pt.some=m1,Pt.sortedIndex=tf,Pt.sortedIndexBy=ef,Pt.sortedIndexOf=rf,Pt.sortedLastIndex=nf,Pt.sortedLastIndexBy=sf,Pt.sortedLastIndexOf=uf,Pt.startCase=fg,Pt.startsWith=dg,Pt.subtract=F2,Pt.sum=b2,Pt.sumBy=D2,Pt.template=Cg,Pt.times=a2,Pt.toFinite=ou,Pt.toInteger=zr,Pt.toLength=up,Pt.toLower=Sg,Pt.toNumber=mi,Pt.toSafeInteger=ud,Pt.toString=Bn,Pt.toUpper=Rg,Pt.trim=$g,Pt.trimEnd=kg,Pt.trimStart=Pg,Pt.truncate=Tg,Pt.unescape=Ng,Pt.uniqueId=l2,Pt.upperCase=jg,Pt.upperFirst=dl,Pt.each=Uc,Pt.eachRight=Lc,Pt.first=Oc,vl(Pt,(function(){var i={};return Ui(Pt,function(c,A){nr.call(Pt.prototype,A)||(i[A]=c)}),i})(),{chain:!1}),Pt.VERSION=u,Ge(["bind","bindKey","curry","curryRight","partial","partialRight"],function(i){Pt[i].placeholder=Pt}),Ge(["drop","take"],function(i,c){Kr.prototype[i]=function(A){A=A===n?1:z(zr(A),0);var G=this.__filtered__&&!c?new Kr(this):this.clone();return G.__filtered__?G.__takeCount__=St(A,G.__takeCount__):G.__views__.push({size:St(A,ze),type:i+(G.__dir__<0?"Right":"")}),G},Kr.prototype[i+"Right"]=function(A){return this.reverse()[i](A).reverse()}}),Ge(["filter","map","takeWhile"],function(i,c){var A=c+1,G=A==Xt||A==ne;Kr.prototype[i]=function(Ct){var qt=this.clone();return qt.__iteratees__.push({iteratee:Ir(Ct,3),type:A}),qt.__filtered__=qt.__filtered__||G,qt}}),Ge(["head","last"],function(i,c){var A="take"+(c?"Right":"");Kr.prototype[i]=function(){return this[A](1).value()[0]}}),Ge(["initial","tail"],function(i,c){var A="drop"+(c?"":"Right");Kr.prototype[i]=function(){return this.__filtered__?new Kr(this):this[A](1)}}),Kr.prototype.compact=function(){return this.filter(Ys)},Kr.prototype.find=function(i){return this.filter(i).head()},Kr.prototype.findLast=function(i){return this.reverse().find(i)},Kr.prototype.invokeMap=Qr(function(i,c){return typeof i=="function"?new Kr(this):this.map(function(A){return Ta(A,i,c)})}),Kr.prototype.reject=function(i){return this.filter(po(Ir(i)))},Kr.prototype.slice=function(i,c){i=zr(i);var A=this;return A.__filtered__&&(i>0||c<0)?new Kr(A):(i<0?A=A.takeRight(-i):i&&(A=A.drop(i)),c!==n&&(c=zr(c),A=c<0?A.dropRight(-c):A.take(c-i)),A)},Kr.prototype.takeRightWhile=function(i){return this.reverse().takeWhile(i).reverse()},Kr.prototype.toArray=function(){return this.take(ze)},Ui(Kr.prototype,function(i,c){var A=/^(?:filter|find|map|reject)|While$/.test(c),G=/^(?:head|last)$/.test(c),Ct=Pt[G?"take"+(c=="last"?"Right":""):c],qt=G||/^find/.test(c);Ct&&(Pt.prototype[c]=function(){var ae=this.__wrapped__,he=G?[1]:arguments,we=ae instanceof Kr,Ve=he[0],Ke=we||Hr(ae),Ye=function(rn){var dn=Ct.apply(Pt,li([rn],he));return G&&or?dn[0]:dn};Ke&&A&&typeof Ve=="function"&&Ve.length!=1&&(we=Ke=!1);var or=this.__chain__,Dr=!!this.__actions__.length,$r=qt&&!or,Jr=we&&!Dr;if(!qt&&Ke){ae=Jr?ae:new Kr(this);var kr=i.apply(ae,he);return kr.__actions__.push({func:ao,args:[Ye],thisArg:n}),new Un(kr,or)}return $r&&Jr?i.apply(this,he):(kr=this.thru(Ye),$r?G?kr.value()[0]:kr.value():kr)})}),Ge(["pop","push","shift","sort","splice","unshift"],function(i){var c=Nr[i],A=/^(?:push|sort|unshift)$/.test(i)?"tap":"thru",G=/^(?:pop|shift)$/.test(i);Pt.prototype[i]=function(){var Ct=arguments;if(G&&!this.__chain__){var qt=this.value();return c.apply(Hr(qt)?qt:[],Ct)}return this[A](function(ae){return c.apply(Hr(ae)?ae:[],Ct)})}}),Ui(Kr.prototype,function(i,c){var A=Pt[c];if(A){var G=A.name+"";nr.call(pn,G)||(pn[G]=[]),pn[G].push({name:c,func:A})}}),pn[Xa(n,J).name]=[{name:"wrapper",func:n}],Kr.prototype.clone=ji,Kr.prototype.reverse=mo,Kr.prototype.value=ci,Pt.prototype.at=Of,Pt.prototype.chain=Tf,Pt.prototype.commit=Nf,Pt.prototype.next=jf,Pt.prototype.plant=Hf,Pt.prototype.reverse=Mf,Pt.prototype.toJSON=Pt.prototype.valueOf=Pt.prototype.value=qf,Pt.prototype.first=Pt.prototype.head,at&&(Pt.prototype[at]=Lf),Pt},zs=ha();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Qn._=zs,define(function(){return zs})):vi?((vi.exports=zs)._=zs,Cu._=zs):Qn._=zs}).call(t)}),yg=ce(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCorrect=t.isInSubnet=void 0;function e(u){return this.subnetMask<u.subnetMask?!1:this.mask(u.subnetMask)===u.mask()}t.isInSubnet=e;function n(u){return function(){return this.addressMinusSuffix!==this.correctForm()?!1:this.subnetMask===u&&!this.parsedSubnet?!0:this.parsedSubnet===String(this.subnetMask)}}t.isCorrect=n}),_g=ce(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RE_SUBNET_STRING=t.RE_ADDRESS=t.GROUPS=t.BITS=void 0,t.BITS=32,t.GROUPS=4,t.RE_ADDRESS=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g,t.RE_SUBNET_STRING=/\/\d{1,2}$/}),Xd=ce(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddressError=void 0;var e=class extends Error{constructor(n,u){super(n),this.name="AddressError",u!==null&&(this.parseMessage=u)}};t.AddressError=e}),Dg=ce((t,e)=>{(function(){var n,u=0xdeadbeefcafe,s=(u&16777215)==15715070;function p(bt,$t,Ht){bt!=null&&(typeof bt=="number"?this.fromNumber(bt,$t,Ht):$t==null&&typeof bt!="string"?this.fromString(bt,256):this.fromString(bt,$t))}function y(){return new p(null)}function g(bt,$t,Ht,fe,Me,We){for(;--We>=0;){var ir=$t*this[bt++]+Ht[fe]+Me;Me=Math.floor(ir/67108864),Ht[fe++]=ir&67108863}return Me}function E(bt,$t,Ht,fe,Me,We){for(var ir=$t&32767,cr=$t>>15;--We>=0;){var nn=this[bt]&32767,en=this[bt++]>>15,vr=cr*nn+en*ir;nn=ir*nn+((vr&32767)<<15)+Ht[fe]+(Me&1073741823),Me=(nn>>>30)+(vr>>>15)+cr*en+(Me>>>30),Ht[fe++]=nn&1073741823}return Me}function m(bt,$t,Ht,fe,Me,We){for(var ir=$t&16383,cr=$t>>14;--We>=0;){var nn=this[bt]&16383,en=this[bt++]>>14,vr=cr*nn+en*ir;nn=ir*nn+((vr&16383)<<14)+Ht[fe]+Me,Me=(nn>>28)+(vr>>14)+cr*en,Ht[fe++]=nn&268435455}return Me}var D=typeof navigator<"u";D&&s&&navigator.appName=="Microsoft Internet Explorer"?(p.prototype.am=E,n=30):D&&s&&navigator.appName!="Netscape"?(p.prototype.am=g,n=26):(p.prototype.am=m,n=28),p.prototype.DB=n,p.prototype.DM=(1<<n)-1,p.prototype.DV=1<<n;var a=52;p.prototype.FV=Math.pow(2,a),p.prototype.F1=a-n,p.prototype.F2=2*n-a;var H="0123456789abcdefghijklmnopqrstuvwxyz",W=new Array,w,U;for(w=48,U=0;U<=9;++U)W[w++]=U;for(w=97,U=10;U<36;++U)W[w++]=U;for(w=65,U=10;U<36;++U)W[w++]=U;function tt(bt){return H.charAt(bt)}function J(bt,$t){var Ht=W[bt.charCodeAt($t)];return Ht??-1}function N(bt){for(var $t=this.t-1;$t>=0;--$t)bt[$t]=this[$t];bt.t=this.t,bt.s=this.s}function Q(bt){this.t=1,this.s=bt<0?-1:0,bt>0?this[0]=bt:bt<-1?this[0]=bt+this.DV:this.t=0}function it(bt){var $t=y();return $t.fromInt(bt),$t}function q(bt,$t){var Ht;if($t==16)Ht=4;else if($t==8)Ht=3;else if($t==256)Ht=8;else if($t==2)Ht=1;else if($t==32)Ht=5;else if($t==4)Ht=2;else{this.fromRadix(bt,$t);return}this.t=0,this.s=0;for(var fe=bt.length,Me=!1,We=0;--fe>=0;){var ir=Ht==8?bt[fe]&255:J(bt,fe);if(ir<0){bt.charAt(fe)=="-"&&(Me=!0);continue}Me=!1,We==0?this[this.t++]=ir:We+Ht>this.DB?(this[this.t-1]|=(ir&(1<<this.DB-We)-1)<<We,this[this.t++]=ir>>this.DB-We):this[this.t-1]|=ir<<We,We+=Ht,We>=this.DB&&(We-=this.DB)}Ht==8&&bt[0]&128&&(this.s=-1,We>0&&(this[this.t-1]|=(1<<this.DB-We)-1<<We)),this.clamp(),Me&&p.ZERO.subTo(this,this)}function L(){for(var bt=this.s&this.DM;this.t>0&&this[this.t-1]==bt;)--this.t}function V(bt){if(this.s<0)return"-"+this.negate().toString(bt);var $t;if(bt==16)$t=4;else if(bt==8)$t=3;else if(bt==2)$t=1;else if(bt==32)$t=5;else if(bt==4)$t=2;else return this.toRadix(bt);var Ht=(1<<$t)-1,fe,Me=!1,We="",ir=this.t,cr=this.DB-ir*this.DB%$t;if(ir-- >0)for(cr<this.DB&&(fe=this[ir]>>cr)>0&&(Me=!0,We=tt(fe));ir>=0;)cr<$t?(fe=(this[ir]&(1<<cr)-1)<<$t-cr,fe|=this[--ir]>>(cr+=this.DB-$t)):(fe=this[ir]>>(cr-=$t)&Ht,cr<=0&&(cr+=this.DB,--ir)),fe>0&&(Me=!0),Me&&(We+=tt(fe));return Me?We:"0"}function lt(){var bt=y();return p.ZERO.subTo(this,bt),bt}function mt(){return this.s<0?this.negate():this}function Rt(bt){var $t=this.s-bt.s;if($t!=0)return $t;var Ht=this.t;if($t=Ht-bt.t,$t!=0)return this.s<0?-$t:$t;for(;--Ht>=0;)if(($t=this[Ht]-bt[Ht])!=0)return $t;return 0}function Et(bt){var $t=1,Ht;return(Ht=bt>>>16)!=0&&(bt=Ht,$t+=16),(Ht=bt>>8)!=0&&(bt=Ht,$t+=8),(Ht=bt>>4)!=0&&(bt=Ht,$t+=4),(Ht=bt>>2)!=0&&(bt=Ht,$t+=2),(Ht=bt>>1)!=0&&(bt=Ht,$t+=1),$t}function vt(){return this.t<=0?0:this.DB*(this.t-1)+Et(this[this.t-1]^this.s&this.DM)}function wt(bt,$t){var Ht;for(Ht=this.t-1;Ht>=0;--Ht)$t[Ht+bt]=this[Ht];for(Ht=bt-1;Ht>=0;--Ht)$t[Ht]=0;$t.t=this.t+bt,$t.s=this.s}function Xt(bt,$t){for(var Ht=bt;Ht<this.t;++Ht)$t[Ht-bt]=this[Ht];$t.t=Math.max(this.t-bt,0),$t.s=this.s}function ee(bt,$t){var Ht=bt%this.DB,fe=this.DB-Ht,Me=(1<<fe)-1,We=Math.floor(bt/this.DB),ir=this.s<<Ht&this.DM,cr;for(cr=this.t-1;cr>=0;--cr)$t[cr+We+1]=this[cr]>>fe|ir,ir=(this[cr]&Me)<<Ht;for(cr=We-1;cr>=0;--cr)$t[cr]=0;$t[We]=ir,$t.t=this.t+We+1,$t.s=this.s,$t.clamp()}function ne(bt,$t){$t.s=this.s;var Ht=Math.floor(bt/this.DB);if(Ht>=this.t){$t.t=0;return}var fe=bt%this.DB,Me=this.DB-fe,We=(1<<fe)-1;$t[0]=this[Ht]>>fe;for(var ir=Ht+1;ir<this.t;++ir)$t[ir-Ht-1]|=(this[ir]&We)<<Me,$t[ir-Ht]=this[ir]>>fe;fe>0&&($t[this.t-Ht-1]|=(this.s&We)<<Me),$t.t=this.t-Ht,$t.clamp()}function oe(bt,$t){for(var Ht=0,fe=0,Me=Math.min(bt.t,this.t);Ht<Me;)fe+=this[Ht]-bt[Ht],$t[Ht++]=fe&this.DM,fe>>=this.DB;if(bt.t<this.t){for(fe-=bt.s;Ht<this.t;)fe+=this[Ht],$t[Ht++]=fe&this.DM,fe>>=this.DB;fe+=this.s}else{for(fe+=this.s;Ht<bt.t;)fe-=bt[Ht],$t[Ht++]=fe&this.DM,fe>>=this.DB;fe-=bt.s}$t.s=fe<0?-1:0,fe<-1?$t[Ht++]=this.DV+fe:fe>0&&($t[Ht++]=fe),$t.t=Ht,$t.clamp()}function Le(bt,$t){var Ht=this.abs(),fe=bt.abs(),Me=Ht.t;for($t.t=Me+fe.t;--Me>=0;)$t[Me]=0;for(Me=0;Me<fe.t;++Me)$t[Me+Ht.t]=Ht.am(0,fe[Me],$t,Me,0,Ht.t);$t.s=0,$t.clamp(),this.s!=bt.s&&p.ZERO.subTo($t,$t)}function de(bt){for(var $t=this.abs(),Ht=bt.t=2*$t.t;--Ht>=0;)bt[Ht]=0;for(Ht=0;Ht<$t.t-1;++Ht){var fe=$t.am(Ht,$t[Ht],bt,2*Ht,0,1);(bt[Ht+$t.t]+=$t.am(Ht+1,2*$t[Ht],bt,2*Ht+1,fe,$t.t-Ht-1))>=$t.DV&&(bt[Ht+$t.t]-=$t.DV,bt[Ht+$t.t+1]=1)}bt.t>0&&(bt[bt.t-1]+=$t.am(Ht,$t[Ht],bt,2*Ht,0,1)),bt.s=0,bt.clamp()}function He(bt,$t,Ht){var fe=bt.abs();if(!(fe.t<=0)){var Me=this.abs();if(Me.t<fe.t){$t?.fromInt(0),Ht!=null&&this.copyTo(Ht);return}Ht==null&&(Ht=y());var We=y(),ir=this.s,cr=bt.s,nn=this.DB-Et(fe[fe.t-1]);nn>0?(fe.lShiftTo(nn,We),Me.lShiftTo(nn,Ht)):(fe.copyTo(We),Me.copyTo(Ht));var en=We.t,vr=We[en-1];if(vr!=0){var hs=vr*(1<<this.F1)+(en>1?We[en-2]>>this.F2:0),Ts=this.FV/hs,Ri=(1<<this.F1)/hs,ws=1<<this.F2,ds=Ht.t,$i=ds-en,En=$t??y();for(We.dlShiftTo($i,En),Ht.compareTo(En)>=0&&(Ht[Ht.t++]=1,Ht.subTo(En,Ht)),p.ONE.dlShiftTo(en,En),En.subTo(We,We);We.t<en;)We[We.t++]=0;for(;--$i>=0;){var Gi=Ht[--ds]==vr?this.DM:Math.floor(Ht[ds]*Ts+(Ht[ds-1]+ws)*Ri);if((Ht[ds]+=We.am(0,Gi,Ht,$i,0,en))<Gi)for(We.dlShiftTo($i,En),Ht.subTo(En,Ht);Ht[ds]<--Gi;)Ht.subTo(En,Ht)}$t!=null&&(Ht.drShiftTo(en,$t),ir!=cr&&p.ZERO.subTo($t,$t)),Ht.t=en,Ht.clamp(),nn>0&&Ht.rShiftTo(nn,Ht),ir<0&&p.ZERO.subTo(Ht,Ht)}}}function ze(bt){var $t=y();return this.abs().divRemTo(bt,null,$t),this.s<0&&$t.compareTo(p.ZERO)>0&&bt.subTo($t,$t),$t}function Te(bt){this.m=bt}function Je(bt){return bt.s<0||bt.compareTo(this.m)>=0?bt.mod(this.m):bt}function Xe(bt){return bt}function Ae(bt){bt.divRemTo(this.m,null,bt)}function _e(bt,$t,Ht){bt.multiplyTo($t,Ht),this.reduce(Ht)}function Qe(bt,$t){bt.squareTo($t),this.reduce($t)}Te.prototype.convert=Je,Te.prototype.revert=Xe,Te.prototype.reduce=Ae,Te.prototype.mulTo=_e,Te.prototype.sqrTo=Qe;function qe(){if(this.t<1)return 0;var bt=this[0];if(!(bt&1))return 0;var $t=bt&3;return $t=$t*(2-(bt&15)*$t)&15,$t=$t*(2-(bt&255)*$t)&255,$t=$t*(2-((bt&65535)*$t&65535))&65535,$t=$t*(2-bt*$t%this.DV)%this.DV,$t>0?this.DV-$t:-$t}function Ze(bt){this.m=bt,this.mp=bt.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<bt.DB-15)-1,this.mt2=2*bt.t}function Ar(bt){var $t=y();return bt.abs().dlShiftTo(this.m.t,$t),$t.divRemTo(this.m,null,$t),bt.s<0&&$t.compareTo(p.ZERO)>0&&this.m.subTo($t,$t),$t}function Or(bt){var $t=y();return bt.copyTo($t),this.reduce($t),$t}function Cr(bt){for(;bt.t<=this.mt2;)bt[bt.t++]=0;for(var $t=0;$t<this.m.t;++$t){var Ht=bt[$t]&32767,fe=Ht*this.mpl+((Ht*this.mph+(bt[$t]>>15)*this.mpl&this.um)<<15)&bt.DM;for(Ht=$t+this.m.t,bt[Ht]+=this.m.am(0,fe,bt,$t,0,this.m.t);bt[Ht]>=bt.DV;)bt[Ht]-=bt.DV,bt[++Ht]++}bt.clamp(),bt.drShiftTo(this.m.t,bt),bt.compareTo(this.m)>=0&&bt.subTo(this.m,bt)}function et(bt,$t){bt.squareTo($t),this.reduce($t)}function k(bt,$t,Ht){bt.multiplyTo($t,Ht),this.reduce(Ht)}Ze.prototype.convert=Ar,Ze.prototype.revert=Or,Ze.prototype.reduce=Cr,Ze.prototype.mulTo=k,Ze.prototype.sqrTo=et;function Z(){return(this.t>0?this[0]&1:this.s)==0}function se(bt,$t){if(bt>4294967295||bt<1)return p.ONE;var Ht=y(),fe=y(),Me=$t.convert(this),We=Et(bt)-1;for(Me.copyTo(Ht);--We>=0;)if($t.sqrTo(Ht,fe),(bt&1<<We)>0)$t.mulTo(fe,Me,Ht);else{var ir=Ht;Ht=fe,fe=ir}return $t.revert(Ht)}function me(bt,$t){var Ht;return bt<256||$t.isEven()?Ht=new Te($t):Ht=new Ze($t),this.exp(bt,Ht)}p.prototype.copyTo=N,p.prototype.fromInt=Q,p.prototype.fromString=q,p.prototype.clamp=L,p.prototype.dlShiftTo=wt,p.prototype.drShiftTo=Xt,p.prototype.lShiftTo=ee,p.prototype.rShiftTo=ne,p.prototype.subTo=oe,p.prototype.multiplyTo=Le,p.prototype.squareTo=de,p.prototype.divRemTo=He,p.prototype.invDigit=qe,p.prototype.isEven=Z,p.prototype.exp=se,p.prototype.toString=V,p.prototype.negate=lt,p.prototype.abs=mt,p.prototype.compareTo=Rt,p.prototype.bitLength=vt,p.prototype.mod=ze,p.prototype.modPowInt=me,p.ZERO=it(0),p.ONE=it(1);function rr(){var bt=y();return this.copyTo(bt),bt}function dr(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function mr(){return this.t==0?this.s:this[0]<<24>>24}function ur(){return this.t==0?this.s:this[0]<<16>>16}function er(bt){return Math.floor(Math.LN2*this.DB/Math.log(bt))}function Gr(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function Lr(bt){if(bt==null&&(bt=10),this.signum()==0||bt<2||bt>36)return"0";var $t=this.chunkSize(bt),Ht=Math.pow(bt,$t),fe=it(Ht),Me=y(),We=y(),ir="";for(this.divRemTo(fe,Me,We);Me.signum()>0;)ir=(Ht+We.intValue()).toString(bt).substr(1)+ir,Me.divRemTo(fe,Me,We);return We.intValue().toString(bt)+ir}function Sr(bt,$t){this.fromInt(0),$t==null&&($t=10);for(var Ht=this.chunkSize($t),fe=Math.pow($t,Ht),Me=!1,We=0,ir=0,cr=0;cr<bt.length;++cr){var nn=J(bt,cr);if(nn<0){bt.charAt(cr)=="-"&&this.signum()==0&&(Me=!0);continue}ir=$t*ir+nn,++We>=Ht&&(this.dMultiply(fe),this.dAddOffset(ir,0),We=0,ir=0)}We>0&&(this.dMultiply(Math.pow($t,We)),this.dAddOffset(ir,0)),Me&&p.ZERO.subTo(this,this)}function j(bt,$t,Ht){if(typeof $t=="number")if(bt<2)this.fromInt(1);else for(this.fromNumber(bt,Ht),this.testBit(bt-1)||this.bitwiseTo(p.ONE.shiftLeft(bt-1),jt,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime($t);)this.dAddOffset(2,0),this.bitLength()>bt&&this.subTo(p.ONE.shiftLeft(bt-1),this);else{var fe=new Array,Me=bt&7;fe.length=(bt>>3)+1,$t.nextBytes(fe),Me>0?fe[0]&=(1<<Me)-1:fe[0]=0,this.fromString(fe,256)}}function f(){var bt=this.t,$t=new Array;$t[0]=this.s;var Ht=this.DB-bt*this.DB%8,fe,Me=0;if(bt-- >0)for(Ht<this.DB&&(fe=this[bt]>>Ht)!=(this.s&this.DM)>>Ht&&($t[Me++]=fe|this.s<<this.DB-Ht);bt>=0;)Ht<8?(fe=(this[bt]&(1<<Ht)-1)<<8-Ht,fe|=this[--bt]>>(Ht+=this.DB-8)):(fe=this[bt]>>(Ht-=8)&255,Ht<=0&&(Ht+=this.DB,--bt)),fe&128&&(fe|=-256),Me==0&&(this.s&128)!=(fe&128)&&++Me,(Me>0||fe!=this.s)&&($t[Me++]=fe);return $t}function S(bt){return this.compareTo(bt)==0}function Y(bt){return this.compareTo(bt)<0?this:bt}function It(bt){return this.compareTo(bt)>0?this:bt}function Ot(bt,$t,Ht){var fe,Me,We=Math.min(bt.t,this.t);for(fe=0;fe<We;++fe)Ht[fe]=$t(this[fe],bt[fe]);if(bt.t<this.t){for(Me=bt.s&this.DM,fe=We;fe<this.t;++fe)Ht[fe]=$t(this[fe],Me);Ht.t=this.t}else{for(Me=this.s&this.DM,fe=We;fe<bt.t;++fe)Ht[fe]=$t(Me,bt[fe]);Ht.t=bt.t}Ht.s=$t(this.s,bt.s),Ht.clamp()}function nt(bt,$t){return bt&$t}function zt(bt){var $t=y();return this.bitwiseTo(bt,nt,$t),$t}function jt(bt,$t){return bt|$t}function Se(bt){var $t=y();return this.bitwiseTo(bt,jt,$t),$t}function _t(bt,$t){return bt^$t}function gt(bt){var $t=y();return this.bitwiseTo(bt,_t,$t),$t}function rt(bt,$t){return bt&~$t}function F(bt){var $t=y();return this.bitwiseTo(bt,rt,$t),$t}function st(){for(var bt=y(),$t=0;$t<this.t;++$t)bt[$t]=this.DM&~this[$t];return bt.t=this.t,bt.s=~this.s,bt}function At(bt){var $t=y();return bt<0?this.rShiftTo(-bt,$t):this.lShiftTo(bt,$t),$t}function Dt(bt){var $t=y();return bt<0?this.lShiftTo(-bt,$t):this.rShiftTo(bt,$t),$t}function Nt(bt){if(bt==0)return-1;var $t=0;return bt&65535||(bt>>=16,$t+=16),bt&255||(bt>>=8,$t+=8),bt&15||(bt>>=4,$t+=4),bt&3||(bt>>=2,$t+=2),bt&1||++$t,$t}function Yt(){for(var bt=0;bt<this.t;++bt)if(this[bt]!=0)return bt*this.DB+Nt(this[bt]);return this.s<0?this.t*this.DB:-1}function De(bt){for(var $t=0;bt!=0;)bt&=bt-1,++$t;return $t}function Qt(){for(var bt=0,$t=this.s&this.DM,Ht=0;Ht<this.t;++Ht)bt+=De(this[Ht]^$t);return bt}function Ee(bt){var $t=Math.floor(bt/this.DB);return $t>=this.t?this.s!=0:(this[$t]&1<<bt%this.DB)!=0}function Be(bt,$t){var Ht=p.ONE.shiftLeft(bt);return this.bitwiseTo(Ht,$t,Ht),Ht}function sr(bt){return this.changeBit(bt,jt)}function P(bt){return this.changeBit(bt,rt)}function le(bt){return this.changeBit(bt,_t)}function Vt(bt,$t){for(var Ht=0,fe=0,Me=Math.min(bt.t,this.t);Ht<Me;)fe+=this[Ht]+bt[Ht],$t[Ht++]=fe&this.DM,fe>>=this.DB;if(bt.t<this.t){for(fe+=bt.s;Ht<this.t;)fe+=this[Ht],$t[Ht++]=fe&this.DM,fe>>=this.DB;fe+=this.s}else{for(fe+=this.s;Ht<bt.t;)fe+=bt[Ht],$t[Ht++]=fe&this.DM,fe>>=this.DB;fe+=bt.s}$t.s=fe<0?-1:0,fe>0?$t[Ht++]=fe:fe<-1&&($t[Ht++]=this.DV+fe),$t.t=Ht,$t.clamp()}function pe(bt){var $t=y();return this.addTo(bt,$t),$t}function kt(bt){var $t=y();return this.subTo(bt,$t),$t}function re(bt){var $t=y();return this.multiplyTo(bt,$t),$t}function $e(){var bt=y();return this.squareTo(bt),bt}function Ce(bt){var $t=y();return this.divRemTo(bt,$t,null),$t}function Pe(bt){var $t=y();return this.divRemTo(bt,null,$t),$t}function Ne(bt){var $t=y(),Ht=y();return this.divRemTo(bt,$t,Ht),new Array($t,Ht)}function tr(bt){this[this.t]=this.am(0,bt-1,this,0,0,this.t),++this.t,this.clamp()}function lr(bt,$t){if(bt!=0){for(;this.t<=$t;)this[this.t++]=0;for(this[$t]+=bt;this[$t]>=this.DV;)this[$t]-=this.DV,++$t>=this.t&&(this[this.t++]=0),++this[$t]}}function ar(){}function wr(bt){return bt}function jr(bt,$t,Ht){bt.multiplyTo($t,Ht)}function ln(bt,$t){bt.squareTo($t)}ar.prototype.convert=wr,ar.prototype.revert=wr,ar.prototype.mulTo=jr,ar.prototype.sqrTo=ln;function cn(bt){return this.exp(bt,new ar)}function qr(bt,$t,Ht){var fe=Math.min(this.t+bt.t,$t);for(Ht.s=0,Ht.t=fe;fe>0;)Ht[--fe]=0;var Me;for(Me=Ht.t-this.t;fe<Me;++fe)Ht[fe+this.t]=this.am(0,bt[fe],Ht,fe,0,this.t);for(Me=Math.min(bt.t,$t);fe<Me;++fe)this.am(0,bt[fe],Ht,fe,0,$t-fe);Ht.clamp()}function Er(bt,$t,Ht){--$t;var fe=Ht.t=this.t+bt.t-$t;for(Ht.s=0;--fe>=0;)Ht[fe]=0;for(fe=Math.max($t-this.t,0);fe<bt.t;++fe)Ht[this.t+fe-$t]=this.am($t-fe,bt[fe],Ht,0,0,this.t+fe-$t);Ht.clamp(),Ht.drShiftTo(1,Ht)}function Tr(bt){this.r2=y(),this.q3=y(),p.ONE.dlShiftTo(2*bt.t,this.r2),this.mu=this.r2.divide(bt),this.m=bt}function gn(bt){if(bt.s<0||bt.t>2*this.m.t)return bt.mod(this.m);if(bt.compareTo(this.m)<0)return bt;var $t=y();return bt.copyTo($t),this.reduce($t),$t}function Kn(bt){return bt}function tn(bt){for(bt.drShiftTo(this.m.t-1,this.r2),bt.t>this.m.t+1&&(bt.t=this.m.t+1,bt.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);bt.compareTo(this.r2)<0;)bt.dAddOffset(1,this.m.t+1);for(bt.subTo(this.r2,bt);bt.compareTo(this.m)>=0;)bt.subTo(this.m,bt)}function Wn(bt,$t){bt.squareTo($t),this.reduce($t)}function Br(bt,$t,Ht){bt.multiplyTo($t,Ht),this.reduce(Ht)}Tr.prototype.convert=gn,Tr.prototype.revert=Kn,Tr.prototype.reduce=tn,Tr.prototype.mulTo=Br,Tr.prototype.sqrTo=Wn;function bn(bt,$t){var Ht=bt.bitLength(),fe,Me=it(1),We;if(Ht<=0)return Me;Ht<18?fe=1:Ht<48?fe=3:Ht<144?fe=4:Ht<768?fe=5:fe=6,Ht<8?We=new Te($t):$t.isEven()?We=new Tr($t):We=new Ze($t);var ir=new Array,cr=3,nn=fe-1,en=(1<<fe)-1;if(ir[1]=We.convert(this),fe>1){var vr=y();for(We.sqrTo(ir[1],vr);cr<=en;)ir[cr]=y(),We.mulTo(vr,ir[cr-2],ir[cr]),cr+=2}var hs=bt.t-1,Ts,Ri=!0,ws=y(),ds;for(Ht=Et(bt[hs])-1;hs>=0;){for(Ht>=nn?Ts=bt[hs]>>Ht-nn&en:(Ts=(bt[hs]&(1<<Ht+1)-1)<<nn-Ht,hs>0&&(Ts|=bt[hs-1]>>this.DB+Ht-nn)),cr=fe;!(Ts&1);)Ts>>=1,--cr;if((Ht-=cr)<0&&(Ht+=this.DB,--hs),Ri)ir[Ts].copyTo(Me),Ri=!1;else{for(;cr>1;)We.sqrTo(Me,ws),We.sqrTo(ws,Me),cr-=2;cr>0?We.sqrTo(Me,ws):(ds=Me,Me=ws,ws=ds),We.mulTo(ws,ir[Ts],Me)}for(;hs>=0&&!(bt[hs]&1<<Ht);)We.sqrTo(Me,ws),ds=Me,Me=ws,ws=ds,--Ht<0&&(Ht=this.DB-1,--hs)}return We.revert(Me)}function as(bt){var $t=this.s<0?this.negate():this.clone(),Ht=bt.s<0?bt.negate():bt.clone();if($t.compareTo(Ht)<0){var fe=$t;$t=Ht,Ht=fe}var Me=$t.getLowestSetBit(),We=Ht.getLowestSetBit();if(We<0)return $t;for(Me<We&&(We=Me),We>0&&($t.rShiftTo(We,$t),Ht.rShiftTo(We,Ht));$t.signum()>0;)(Me=$t.getLowestSetBit())>0&&$t.rShiftTo(Me,$t),(Me=Ht.getLowestSetBit())>0&&Ht.rShiftTo(Me,Ht),$t.compareTo(Ht)>=0?($t.subTo(Ht,$t),$t.rShiftTo(1,$t)):(Ht.subTo($t,Ht),Ht.rShiftTo(1,Ht));return We>0&&Ht.lShiftTo(We,Ht),Ht}function _n(bt){if(bt<=0)return 0;var $t=this.DV%bt,Ht=this.s<0?bt-1:0;if(this.t>0)if($t==0)Ht=this[0]%bt;else for(var fe=this.t-1;fe>=0;--fe)Ht=($t*Ht+this[fe])%bt;return Ht}function ks(bt){var $t=bt.isEven();if(this.isEven()&&$t||bt.signum()==0)return p.ZERO;for(var Ht=bt.clone(),fe=this.clone(),Me=it(1),We=it(0),ir=it(0),cr=it(1);Ht.signum()!=0;){for(;Ht.isEven();)Ht.rShiftTo(1,Ht),$t?((!Me.isEven()||!We.isEven())&&(Me.addTo(this,Me),We.subTo(bt,We)),Me.rShiftTo(1,Me)):We.isEven()||We.subTo(bt,We),We.rShiftTo(1,We);for(;fe.isEven();)fe.rShiftTo(1,fe),$t?((!ir.isEven()||!cr.isEven())&&(ir.addTo(this,ir),cr.subTo(bt,cr)),ir.rShiftTo(1,ir)):cr.isEven()||cr.subTo(bt,cr),cr.rShiftTo(1,cr);Ht.compareTo(fe)>=0?(Ht.subTo(fe,Ht),$t&&Me.subTo(ir,Me),We.subTo(cr,We)):(fe.subTo(Ht,fe),$t&&ir.subTo(Me,ir),cr.subTo(We,cr))}if(fe.compareTo(p.ONE)!=0)return p.ZERO;if(cr.compareTo(bt)>=0)return cr.subtract(bt);if(cr.signum()<0)cr.addTo(bt,cr);else return cr;return cr.signum()<0?cr.add(bt):cr}var Zr=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],Ss=(1<<26)/Zr[Zr.length-1];function Ps(bt){var $t,Ht=this.abs();if(Ht.t==1&&Ht[0]<=Zr[Zr.length-1]){for($t=0;$t<Zr.length;++$t)if(Ht[0]==Zr[$t])return!0;return!1}if(Ht.isEven())return!1;for($t=1;$t<Zr.length;){for(var fe=Zr[$t],Me=$t+1;Me<Zr.length&&fe<Ss;)fe*=Zr[Me++];for(fe=Ht.modInt(fe);$t<Me;)if(fe%Zr[$t++]==0)return!1}return Ht.millerRabin(bt)}function Xs(bt){var $t=this.subtract(p.ONE),Ht=$t.getLowestSetBit();if(Ht<=0)return!1;var fe=$t.shiftRight(Ht);bt=bt+1>>1,bt>Zr.length&&(bt=Zr.length);for(var Me=y(),We=0;We<bt;++We){Me.fromInt(Zr[Math.floor(Math.random()*Zr.length)]);var ir=Me.modPow(fe,this);if(ir.compareTo(p.ONE)!=0&&ir.compareTo($t)!=0){for(var cr=1;cr++<Ht&&ir.compareTo($t)!=0;)if(ir=ir.modPowInt(2,this),ir.compareTo(p.ONE)==0)return!1;if(ir.compareTo($t)!=0)return!1}}return!0}p.prototype.chunkSize=er,p.prototype.toRadix=Lr,p.prototype.fromRadix=Sr,p.prototype.fromNumber=j,p.prototype.bitwiseTo=Ot,p.prototype.changeBit=Be,p.prototype.addTo=Vt,p.prototype.dMultiply=tr,p.prototype.dAddOffset=lr,p.prototype.multiplyLowerTo=qr,p.prototype.multiplyUpperTo=Er,p.prototype.modInt=_n,p.prototype.millerRabin=Xs,p.prototype.clone=rr,p.prototype.intValue=dr,p.prototype.byteValue=mr,p.prototype.shortValue=ur,p.prototype.signum=Gr,p.prototype.toByteArray=f,p.prototype.equals=S,p.prototype.min=Y,p.prototype.max=It,p.prototype.and=zt,p.prototype.or=Se,p.prototype.xor=gt,p.prototype.andNot=F,p.prototype.not=st,p.prototype.shiftLeft=At,p.prototype.shiftRight=Dt,p.prototype.getLowestSetBit=Yt,p.prototype.bitCount=Qt,p.prototype.testBit=Ee,p.prototype.setBit=sr,p.prototype.clearBit=P,p.prototype.flipBit=le,p.prototype.add=pe,p.prototype.subtract=kt,p.prototype.multiply=re,p.prototype.divide=Ce,p.prototype.remainder=Pe,p.prototype.divideAndRemainder=Ne,p.prototype.modPow=bn,p.prototype.modInverse=ks,p.prototype.pow=cn,p.prototype.gcd=as,p.prototype.isProbablePrime=Ps,p.prototype.square=$e,p.prototype.Barrett=Tr;var qs,os,In;function Si(bt){os[In++]^=bt&255,os[In++]^=bt>>8&255,os[In++]^=bt>>16&255,os[In++]^=bt>>24&255,In>=Dn&&(In-=Dn)}function Xn(){Si(new Date().getTime())}if(os==null){os=new Array,In=0;var ls;if(typeof window<"u"&&window.crypto){if(window.crypto.getRandomValues){var Vi=new Uint8Array(32);for(window.crypto.getRandomValues(Vi),ls=0;ls<32;++ls)os[In++]=Vi[ls]}else if(navigator.appName=="Netscape"&&navigator.appVersion<"5"){var Ki=window.crypto.random(32);for(ls=0;ls<Ki.length;++ls)os[In++]=Ki.charCodeAt(ls)&255}}for(;In<Dn;)ls=Math.floor(65536*Math.random()),os[In++]=ls>>>8,os[In++]=ls&255;In=0,Xn()}function Bi(){if(qs==null){for(Xn(),qs=ns(),qs.init(os),In=0;In<os.length;++In)os[In]=0;In=0}return qs.next()}function cu(bt){var $t;for($t=0;$t<bt.length;++$t)bt[$t]=Bi()}function Ei(){}Ei.prototype.nextBytes=cu;function zi(){this.i=0,this.j=0,this.S=new Array}function Ii(bt){var $t,Ht,fe;for($t=0;$t<256;++$t)this.S[$t]=$t;for(Ht=0,$t=0;$t<256;++$t)Ht=Ht+this.S[$t]+bt[$t%bt.length]&255,fe=this.S[$t],this.S[$t]=this.S[Ht],this.S[Ht]=fe;this.i=0,this.j=0}function oi(){var bt;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,bt=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=bt,this.S[bt+this.S[this.i]&255]}zi.prototype.init=Ii,zi.prototype.next=oi;function ns(){return new zi}var Dn=256;typeof t<"u"?t=e.exports={default:p,BigInteger:p,SecureRandom:Ei}:this.jsbn={BigInteger:p,SecureRandom:Ei}}).call(t)}),If=ce(t=>{(function(){"use strict";var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function n(g){return s(y(g),arguments)}function u(g,E){return n.apply(null,[g].concat(E||[]))}function s(g,E){var m=1,D=g.length,a,H="",W,w,U,tt,J,N,Q,it;for(W=0;W<D;W++)if(typeof g[W]=="string")H+=g[W];else if(typeof g[W]=="object"){if(U=g[W],U.keys)for(a=E[m],w=0;w<U.keys.length;w++){if(a==null)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',U.keys[w],U.keys[w-1]));a=a[U.keys[w]]}else U.param_no?a=E[U.param_no]:a=E[m++];if(e.not_type.test(U.type)&&e.not_primitive.test(U.type)&&a instanceof Function&&(a=a()),e.numeric_arg.test(U.type)&&typeof a!="number"&&isNaN(a))throw new TypeError(n("[sprintf] expecting number but found %T",a));switch(e.number.test(U.type)&&(Q=a>=0),U.type){case"b":a=parseInt(a,10).toString(2);break;case"c":a=String.fromCharCode(parseInt(a,10));break;case"d":case"i":a=parseInt(a,10);break;case"j":a=JSON.stringify(a,null,U.width?parseInt(U.width):0);break;case"e":a=U.precision?parseFloat(a).toExponential(U.precision):parseFloat(a).toExponential();break;case"f":a=U.precision?parseFloat(a).toFixed(U.precision):parseFloat(a);break;case"g":a=U.precision?String(Number(a.toPrecision(U.precision))):parseFloat(a);break;case"o":a=(parseInt(a,10)>>>0).toString(8);break;case"s":a=String(a),a=U.precision?a.substring(0,U.precision):a;break;case"t":a=String(!!a),a=U.precision?a.substring(0,U.precision):a;break;case"T":a=Object.prototype.toString.call(a).slice(8,-1).toLowerCase(),a=U.precision?a.substring(0,U.precision):a;break;case"u":a=parseInt(a,10)>>>0;break;case"v":a=a.valueOf(),a=U.precision?a.substring(0,U.precision):a;break;case"x":a=(parseInt(a,10)>>>0).toString(16);break;case"X":a=(parseInt(a,10)>>>0).toString(16).toUpperCase();break}e.json.test(U.type)?H+=a:(e.number.test(U.type)&&(!Q||U.sign)?(it=Q?"+":"-",a=a.toString().replace(e.sign,"")):it="",J=U.pad_char?U.pad_char==="0"?"0":U.pad_char.charAt(1):" ",N=U.width-(it+a).length,tt=U.width&&N>0?J.repeat(N):"",H+=U.align?it+a+tt:J==="0"?it+tt+a:tt+it+a)}return H}var p=Object.create(null);function y(g){if(p[g])return p[g];for(var E=g,m,D=[],a=0;E;){if((m=e.text.exec(E))!==null)D.push(m[0]);else if((m=e.modulo.exec(E))!==null)D.push("%");else if((m=e.placeholder.exec(E))!==null){if(m[2]){a|=1;var H=[],W=m[2],w=[];if((w=e.key.exec(W))!==null)for(H.push(w[1]);(W=W.substring(w[0].length))!=="";)if((w=e.key_access.exec(W))!==null)H.push(w[1]);else if((w=e.index_access.exec(W))!==null)H.push(w[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");m[2]=H}else a|=2;if(a===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");D.push({placeholder:m[0],param_no:m[1],keys:m[2],sign:m[3],pad_char:m[4],align:m[5],width:m[6],precision:m[7],type:m[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");E=E.substring(m[0].length)}return p[g]=D}typeof t<"u"&&(t.sprintf=n,t.vsprintf=u),typeof window<"u"&&(window.sprintf=n,window.vsprintf=u,typeof define=="function"&&define.amd&&define(function(){return{sprintf:n,vsprintf:u}}))})()}),Fg=ce(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(D,a,H,W){W===void 0&&(W=H);var w=Object.getOwnPropertyDescriptor(a,H);(!w||("get"in w?!a.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return a[H]}}),Object.defineProperty(D,W,w)}:function(D,a,H,W){W===void 0&&(W=H),D[W]=a[H]}),n=t&&t.__setModuleDefault||(Object.create?function(D,a){Object.defineProperty(D,"default",{enumerable:!0,value:a})}:function(D,a){D.default=a}),u=t&&t.__importStar||function(D){if(D&&D.__esModule)return D;var a={};if(D!=null)for(var H in D)H!=="default"&&Object.prototype.hasOwnProperty.call(D,H)&&e(a,D,H);return n(a,D),a};Object.defineProperty(t,"__esModule",{value:!0}),t.Address4=void 0;var s=u(yg()),p=u(_g()),y=Xd(),g=Dg(),E=If(),m=class _i{constructor(a){this.groups=p.GROUPS,this.parsedAddress=[],this.parsedSubnet="",this.subnet="/32",this.subnetMask=32,this.v4=!0,this.isCorrect=s.isCorrect(p.BITS),this.isInSubnet=s.isInSubnet,this.address=a;let H=p.RE_SUBNET_STRING.exec(a);if(H){if(this.parsedSubnet=H[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,this.subnetMask<0||this.subnetMask>p.BITS)throw new y.AddressError("Invalid subnet mask.");a=a.replace(p.RE_SUBNET_STRING,"")}this.addressMinusSuffix=a,this.parsedAddress=this.parse(a)}static isValid(a){try{return new _i(a),!0}catch{return!1}}parse(a){let H=a.split(".");if(!a.match(p.RE_ADDRESS))throw new y.AddressError("Invalid IPv4 address.");return H}correctForm(){return this.parsedAddress.map(a=>parseInt(a,10)).join(".")}static fromHex(a){let H=a.replace(/:/g,"").padStart(8,"0"),W=[],w;for(w=0;w<8;w+=2){let U=H.slice(w,w+2);W.push(parseInt(U,16))}return new _i(W.join("."))}static fromInteger(a){return _i.fromHex(a.toString(16))}static fromArpa(a){let H=a.replace(/(\.in-addr\.arpa)?\.$/,"").split(".").reverse().join(".");return new _i(H)}toHex(){return this.parsedAddress.map(a=>(0,E.sprintf)("%02x",parseInt(a,10))).join(":")}toArray(){return this.parsedAddress.map(a=>parseInt(a,10))}toGroup6(){let a=[],H;for(H=0;H<p.GROUPS;H+=2){let W=(0,E.sprintf)("%02x%02x",parseInt(this.parsedAddress[H],10),parseInt(this.parsedAddress[H+1],10));a.push((0,E.sprintf)("%x",parseInt(W,16)))}return a.join(":")}bigInteger(){return new g.BigInteger(this.parsedAddress.map(a=>(0,E.sprintf)("%02x",parseInt(a,10))).join(""),16)}_startAddress(){return new g.BigInteger(this.mask()+"0".repeat(p.BITS-this.subnetMask),2)}startAddress(){return _i.fromBigInteger(this._startAddress())}startAddressExclusive(){let a=new g.BigInteger("1");return _i.fromBigInteger(this._startAddress().add(a))}_endAddress(){return new g.BigInteger(this.mask()+"1".repeat(p.BITS-this.subnetMask),2)}endAddress(){return _i.fromBigInteger(this._endAddress())}endAddressExclusive(){let a=new g.BigInteger("1");return _i.fromBigInteger(this._endAddress().subtract(a))}static fromBigInteger(a){return _i.fromInteger(parseInt(a.toString(),10))}mask(a){return a===void 0&&(a=this.subnetMask),this.getBitsBase2(0,a)}getBitsBase2(a,H){return this.binaryZeroPad().slice(a,H)}reverseForm(a){a||(a={});let H=this.correctForm().split(".").reverse().join(".");return a.omitSuffix?H:(0,E.sprintf)("%s.in-addr.arpa.",H)}isMulticast(){return this.isInSubnet(new _i("224.0.0.0/4"))}binaryZeroPad(){return this.bigInteger().toString(2).padStart(p.BITS,"0")}groupForV6(){let a=this.parsedAddress;return this.address.replace(p.RE_ADDRESS,(0,E.sprintf)('<span class="hover-group group-v4 group-6">%s</span>.<span class="hover-group group-v4 group-7">%s</span>',a.slice(0,2).join("."),a.slice(2,4).join(".")))}};t.Address4=m}),Ig=ce(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RE_URL_WITH_PORT=t.RE_URL=t.RE_ZONE_STRING=t.RE_SUBNET_STRING=t.RE_BAD_ADDRESS=t.RE_BAD_CHARACTERS=t.TYPES=t.SCOPES=t.GROUPS=t.BITS=void 0,t.BITS=128,t.GROUPS=8,t.SCOPES={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"},t.TYPES={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"},t.RE_BAD_CHARACTERS=/([^0-9a-f:/%])/gi,t.RE_BAD_ADDRESS=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi,t.RE_SUBNET_STRING=/\/\d{1,3}(?=%|$)/,t.RE_ZONE_STRING=/%.*$/,t.RE_URL=new RegExp(/^\[{0,1}([0-9a-f:]+)\]{0,1}/),t.RE_URL_WITH_PORT=new RegExp(/\[([0-9a-f:]+)\]:([0-9]{1,5})/)}),Bg=ce(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.simpleGroup=t.spanLeadingZeroes=t.spanAll=t.spanAllZeroes=void 0;var e=If();function n(g){return g.replace(/(0+)/g,'<span class="zero">$1</span>')}t.spanAllZeroes=n;function u(g,E=0){return g.split("").map((m,D)=>(0,e.sprintf)('<span class="digit value-%s position-%d">%s</span>',m,D+E,n(m))).join("")}t.spanAll=u;function s(g){return g.replace(/^(0+)/,'<span class="zero">$1</span>')}function p(g){return g.split(":").map(E=>s(E)).join(":")}t.spanLeadingZeroes=p;function y(g,E=0){return g.split(":").map((m,D)=>/group-v4/.test(m)?m:(0,e.sprintf)('<span class="hover-group group-%d">%s</span>',D+E,s(m)))}t.simpleGroup=y}),JA=ce(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(D,a,H,W){W===void 0&&(W=H);var w=Object.getOwnPropertyDescriptor(a,H);(!w||("get"in w?!a.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return a[H]}}),Object.defineProperty(D,W,w)}:function(D,a,H,W){W===void 0&&(W=H),D[W]=a[H]}),n=t&&t.__setModuleDefault||(Object.create?function(D,a){Object.defineProperty(D,"default",{enumerable:!0,value:a})}:function(D,a){D.default=a}),u=t&&t.__importStar||function(D){if(D&&D.__esModule)return D;var a={};if(D!=null)for(var H in D)H!=="default"&&Object.prototype.hasOwnProperty.call(D,H)&&e(a,D,H);return n(a,D),a};Object.defineProperty(t,"__esModule",{value:!0}),t.possibleElisions=t.simpleRegularExpression=t.ADDRESS_BOUNDARY=t.padGroup=t.groupPossibilities=void 0;var s=u(Ig()),p=If();function y(D){return(0,p.sprintf)("(%s)",D.join("|"))}t.groupPossibilities=y;function g(D){return D.length<4?(0,p.sprintf)("0{0,%d}%s",4-D.length,D):D}t.padGroup=g,t.ADDRESS_BOUNDARY="[^A-Fa-f0-9:]";function E(D){let a=[];D.forEach((W,w)=>{parseInt(W,16)===0&&a.push(w)});let H=a.map(W=>D.map((w,U)=>{if(U===W){let tt=U===0||U===s.GROUPS-1?":":"";return y([g(w),tt])}return g(w)}).join(":"));return H.push(D.map(g).join(":")),y(H)}t.simpleRegularExpression=E;function m(D,a,H){let W=a?"":":",w=H?"":":",U=[];!a&&!H&&U.push("::"),a&&H&&U.push(""),(H&&!a||!H&&a)&&U.push(":"),U.push((0,p.sprintf)("%s(:0{1,4}){1,%d}",W,D-1)),U.push((0,p.sprintf)("(0{1,4}:){1,%d}%s",D-1,w)),U.push((0,p.sprintf)("(0{1,4}:){%d}0{1,4}",D-1));for(let tt=1;tt<D-1;tt++)for(let J=1;J<D-tt;J++)U.push((0,p.sprintf)("(0{1,4}:){%d}:(0{1,4}:){%d}0{1,4}",J,D-J-tt-1));return y(U)}t.possibleElisions=m}),tb=ce(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(it,q,L,V){V===void 0&&(V=L);var lt=Object.getOwnPropertyDescriptor(q,L);(!lt||("get"in lt?!q.__esModule:lt.writable||lt.configurable))&&(lt={enumerable:!0,get:function(){return q[L]}}),Object.defineProperty(it,V,lt)}:function(it,q,L,V){V===void 0&&(V=L),it[V]=q[L]}),n=t&&t.__setModuleDefault||(Object.create?function(it,q){Object.defineProperty(it,"default",{enumerable:!0,value:q})}:function(it,q){it.default=q}),u=t&&t.__importStar||function(it){if(it&&it.__esModule)return it;var q={};if(it!=null)for(var L in it)L!=="default"&&Object.prototype.hasOwnProperty.call(it,L)&&e(q,it,L);return n(q,it),q};Object.defineProperty(t,"__esModule",{value:!0}),t.Address6=void 0;var s=u(yg()),p=u(_g()),y=u(Ig()),g=u(Bg()),E=Fg(),m=JA(),D=Xd(),a=Dg(),H=If();function W(it){if(!it)throw new Error("Assertion failed.")}function w(it){let q=/(\d+)(\d{3})/;for(;q.test(it);)it=it.replace(q,"$1,$2");return it}function U(it){return it=it.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2'),it=it.replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2'),it}function tt(it,q){let L=[],V=[],lt;for(lt=0;lt<it.length;lt++)lt<q[0]?L.push(it[lt]):lt>q[1]&&V.push(it[lt]);return L.concat(["compact"]).concat(V)}function J(it){return(0,H.sprintf)("%04x",parseInt(it,16))}function N(it){return it&255}var Q=class _s{constructor(q,L){this.addressMinusSuffix="",this.parsedSubnet="",this.subnet="/128",this.subnetMask=128,this.v4=!1,this.zone="",this.isInSubnet=s.isInSubnet,this.isCorrect=s.isCorrect(y.BITS),L===void 0?this.groups=y.GROUPS:this.groups=L,this.address=q;let V=y.RE_SUBNET_STRING.exec(q);if(V){if(this.parsedSubnet=V[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,Number.isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>y.BITS)throw new D.AddressError("Invalid subnet mask.");q=q.replace(y.RE_SUBNET_STRING,"")}else if(/\//.test(q))throw new D.AddressError("Invalid subnet mask.");let lt=y.RE_ZONE_STRING.exec(q);lt&&(this.zone=lt[0],q=q.replace(y.RE_ZONE_STRING,"")),this.addressMinusSuffix=q,this.parsedAddress=this.parse(this.addressMinusSuffix)}static isValid(q){try{return new _s(q),!0}catch{return!1}}static fromBigInteger(q){let L=q.toString(16).padStart(32,"0"),V=[],lt;for(lt=0;lt<y.GROUPS;lt++)V.push(L.slice(lt*4,(lt+1)*4));return new _s(V.join(":"))}static fromURL(q){let L,V=null,lt;if(q.indexOf("[")!==-1&&q.indexOf("]:")!==-1){if(lt=y.RE_URL_WITH_PORT.exec(q),lt===null)return{error:"failed to parse address with port",address:null,port:null};L=lt[1],V=lt[2]}else if(q.indexOf("/")!==-1){if(q=q.replace(/^[a-z0-9]+:\/\//,""),lt=y.RE_URL.exec(q),lt===null)return{error:"failed to parse address from URL",address:null,port:null};L=lt[1]}else L=q;return V?(V=parseInt(V,10),(V<0||V>65536)&&(V=null)):V=null,{address:new _s(L),port:V}}static fromAddress4(q){let L=new E.Address4(q),V=y.BITS-(p.BITS-L.subnetMask);return new _s(`::ffff:${L.correctForm()}/${V}`)}static fromArpa(q){let L=q.replace(/(\.ip6\.arpa)?\.$/,""),V=7;if(L.length!==63)throw new D.AddressError("Invalid 'ip6.arpa' form.");let lt=L.split(".").reverse();for(let mt=V;mt>0;mt--){let Rt=mt*4;lt.splice(Rt,0,":")}return L=lt.join(""),new _s(L)}microsoftTranscription(){return(0,H.sprintf)("%s.ipv6-literal.net",this.correctForm().replace(/:/g,"-"))}mask(q=this.subnetMask){return this.getBitsBase2(0,q)}possibleSubnets(q=128){let L=y.BITS-this.subnetMask,V=Math.abs(q-y.BITS),lt=L-V;return lt<0?"0":w(new a.BigInteger("2",10).pow(lt).toString(10))}_startAddress(){return new a.BigInteger(this.mask()+"0".repeat(y.BITS-this.subnetMask),2)}startAddress(){return _s.fromBigInteger(this._startAddress())}startAddressExclusive(){let q=new a.BigInteger("1");return _s.fromBigInteger(this._startAddress().add(q))}_endAddress(){return new a.BigInteger(this.mask()+"1".repeat(y.BITS-this.subnetMask),2)}endAddress(){return _s.fromBigInteger(this._endAddress())}endAddressExclusive(){let q=new a.BigInteger("1");return _s.fromBigInteger(this._endAddress().subtract(q))}getScope(){let q=y.SCOPES[this.getBits(12,16).intValue()];return this.getType()==="Global unicast"&&q!=="Link local"&&(q="Global"),q||"Unknown"}getType(){for(let q of Object.keys(y.TYPES))if(this.isInSubnet(new _s(q)))return y.TYPES[q];return"Global unicast"}getBits(q,L){return new a.BigInteger(this.getBitsBase2(q,L),2)}getBitsBase2(q,L){return this.binaryZeroPad().slice(q,L)}getBitsBase16(q,L){let V=L-q;if(V%4!==0)throw new Error("Length of bits to retrieve must be divisible by four");return this.getBits(q,L).toString(16).padStart(V/4,"0")}getBitsPastSubnet(){return this.getBitsBase2(this.subnetMask,y.BITS)}reverseForm(q){q||(q={});let L=Math.floor(this.subnetMask/4),V=this.canonicalForm().replace(/:/g,"").split("").slice(0,L).reverse().join(".");return L>0?q.omitSuffix?V:(0,H.sprintf)("%s.ip6.arpa.",V):q.omitSuffix?"":"ip6.arpa."}correctForm(){let q,L=[],V=0,lt=[];for(q=0;q<this.parsedAddress.length;q++){let Et=parseInt(this.parsedAddress[q],16);Et===0&&V++,Et!==0&&V>0&&(V>1&&lt.push([q-V,q-1]),V=0)}V>1&&lt.push([this.parsedAddress.length-V,this.parsedAddress.length-1]);let mt=lt.map(Et=>Et[1]-Et[0]+1);if(lt.length>0){let Et=mt.indexOf(Math.max(...mt));L=tt(this.parsedAddress,lt[Et])}else L=this.parsedAddress;for(q=0;q<L.length;q++)L[q]!=="compact"&&(L[q]=parseInt(L[q],16).toString(16));let Rt=L.join(":");return Rt=Rt.replace(/^compact$/,"::"),Rt=Rt.replace(/^compact|compact$/,":"),Rt=Rt.replace(/compact/,""),Rt}binaryZeroPad(){return this.bigInteger().toString(2).padStart(y.BITS,"0")}parse4in6(q){let L=q.split(":"),V=L.slice(-1)[0].match(p.RE_ADDRESS);if(V){this.parsedAddress4=V[0],this.address4=new E.Address4(this.parsedAddress4);for(let lt=0;lt<this.address4.groups;lt++)if(/^0[0-9]+/.test(this.address4.parsedAddress[lt]))throw new D.AddressError("IPv4 addresses can't have leading zeroes.",q.replace(p.RE_ADDRESS,this.address4.parsedAddress.map(U).join(".")));this.v4=!0,L[L.length-1]=this.address4.toGroup6(),q=L.join(":")}return q}parse(q){q=this.parse4in6(q);let L=q.match(y.RE_BAD_CHARACTERS);if(L)throw new D.AddressError((0,H.sprintf)("Bad character%s detected in address: %s",L.length>1?"s":"",L.join("")),q.replace(y.RE_BAD_CHARACTERS,'<span class="parse-error">$1</span>'));let V=q.match(y.RE_BAD_ADDRESS);if(V)throw new D.AddressError((0,H.sprintf)("Address failed regex: %s",V.join("")),q.replace(y.RE_BAD_ADDRESS,'<span class="parse-error">$1</span>'));let lt=[],mt=q.split("::");if(mt.length===2){let Rt=mt[0].split(":"),Et=mt[1].split(":");Rt.length===1&&Rt[0]===""&&(Rt=[]),Et.length===1&&Et[0]===""&&(Et=[]);let vt=this.groups-(Rt.length+Et.length);if(!vt)throw new D.AddressError("Error parsing groups");this.elidedGroups=vt,this.elisionBegin=Rt.length,this.elisionEnd=Rt.length+this.elidedGroups,lt=lt.concat(Rt);for(let wt=0;wt<vt;wt++)lt.push("0");lt=lt.concat(Et)}else if(mt.length===1)lt=q.split(":"),this.elidedGroups=0;else throw new D.AddressError("Too many :: groups found");if(lt=lt.map(Rt=>(0,H.sprintf)("%x",parseInt(Rt,16))),lt.length!==this.groups)throw new D.AddressError("Incorrect number of groups found");return lt}canonicalForm(){return this.parsedAddress.map(J).join(":")}decimal(){return this.parsedAddress.map(q=>(0,H.sprintf)("%05d",parseInt(q,16))).join(":")}bigInteger(){return new a.BigInteger(this.parsedAddress.map(J).join(""),16)}to4(){let q=this.binaryZeroPad().split("");return E.Address4.fromHex(new a.BigInteger(q.slice(96,128).join(""),2).toString(16))}to4in6(){let q=this.to4(),L=new _s(this.parsedAddress.slice(0,6).join(":"),6).correctForm(),V="";return/:$/.test(L)||(V=":"),L+V+q.address}inspectTeredo(){let q=this.getBitsBase16(0,32),L=this.getBits(80,96).xor(new a.BigInteger("ffff",16)).toString(),V=E.Address4.fromHex(this.getBitsBase16(32,64)),lt=E.Address4.fromHex(this.getBits(96,128).xor(new a.BigInteger("ffffffff",16)).toString(16)),mt=this.getBits(64,80),Rt=this.getBitsBase2(64,80),Et=mt.testBit(15),vt=mt.testBit(14),wt=mt.testBit(8),Xt=mt.testBit(9),ee=new a.BigInteger(Rt.slice(2,6)+Rt.slice(8,16),2).toString(10);return{prefix:(0,H.sprintf)("%s:%s",q.slice(0,4),q.slice(4,8)),server4:V.address,client4:lt.address,flags:Rt,coneNat:Et,microsoft:{reserved:vt,universalLocal:Xt,groupIndividual:wt,nonce:ee},udpPort:L}}inspect6to4(){let q=this.getBitsBase16(0,16),L=E.Address4.fromHex(this.getBitsBase16(16,48));return{prefix:(0,H.sprintf)("%s",q.slice(0,4)),gateway:L.address}}to6to4(){if(!this.is4())return null;let q=["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":");return new _s(q)}toByteArray(){let q=this.bigInteger().toByteArray();return q.length===17&&q[0]===0?q.slice(1):q}toUnsignedByteArray(){return this.toByteArray().map(N)}static fromByteArray(q){return this.fromUnsignedByteArray(q.map(N))}static fromUnsignedByteArray(q){let L=new a.BigInteger("256",10),V=new a.BigInteger("0",10),lt=new a.BigInteger("1",10);for(let mt=q.length-1;mt>=0;mt--)V=V.add(lt.multiply(new a.BigInteger(q[mt].toString(10),10))),lt=lt.multiply(L);return _s.fromBigInteger(V)}isCanonical(){return this.addressMinusSuffix===this.canonicalForm()}isLinkLocal(){return this.getBitsBase2(0,64)==="1111111010000000000000000000000000000000000000000000000000000000"}isMulticast(){return this.getType()==="Multicast"}is4(){return this.v4}isTeredo(){return this.isInSubnet(new _s("2001::/32"))}is6to4(){return this.isInSubnet(new _s("2002::/16"))}isLoopback(){return this.getType()==="Loopback"}href(q){return q===void 0?q="":q=(0,H.sprintf)(":%s",q),(0,H.sprintf)("http://[%s]%s/",this.correctForm(),q)}link(q){q||(q={}),q.className===void 0&&(q.className=""),q.prefix===void 0&&(q.prefix="/#address="),q.v4===void 0&&(q.v4=!1);let L=this.correctForm;return q.v4&&(L=this.to4in6),q.className?(0,H.sprintf)('<a href="%1$s%2$s" class="%3$s">%2$s</a>',q.prefix,L.call(this),q.className):(0,H.sprintf)('<a href="%1$s%2$s">%2$s</a>',q.prefix,L.call(this))}group(){if(this.elidedGroups===0)return g.simpleGroup(this.address).join(":");W(typeof this.elidedGroups=="number"),W(typeof this.elisionBegin=="number");let q=[],[L,V]=this.address.split("::");L.length?q.push(...g.simpleGroup(L)):q.push("");let lt=["hover-group"];for(let mt=this.elisionBegin;mt<this.elisionBegin+this.elidedGroups;mt++)lt.push((0,H.sprintf)("group-%d",mt));return q.push((0,H.sprintf)('<span class="%s"></span>',lt.join(" "))),V.length?q.push(...g.simpleGroup(V,this.elisionEnd)):q.push(""),this.is4()&&(W(this.address4 instanceof E.Address4),q.pop(),q.push(this.address4.groupForV6())),q.join(":")}regularExpressionString(q=!1){let L=[],V=new _s(this.correctForm());if(V.elidedGroups===0)L.push((0,m.simpleRegularExpression)(V.parsedAddress));else if(V.elidedGroups===y.GROUPS)L.push((0,m.possibleElisions)(y.GROUPS));else{let lt=V.address.split("::");lt[0].length&&L.push((0,m.simpleRegularExpression)(lt[0].split(":"))),W(typeof V.elidedGroups=="number"),L.push((0,m.possibleElisions)(V.elidedGroups,lt[0].length!==0,lt[1].length!==0)),lt[1].length&&L.push((0,m.simpleRegularExpression)(lt[1].split(":"))),L=[L.join(":")]}return q||(L=["(?=^|",m.ADDRESS_BOUNDARY,"|[^\\w\\:])(",...L,")(?=[^\\w\\:]|",m.ADDRESS_BOUNDARY,"|$)"]),L.join("")}regularExpression(q=!1){return new RegExp(this.regularExpressionString(q),"i")}};t.Address6=Q}),rb=ce(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(E,m,D,a){a===void 0&&(a=D);var H=Object.getOwnPropertyDescriptor(m,D);(!H||("get"in H?!m.__esModule:H.writable||H.configurable))&&(H={enumerable:!0,get:function(){return m[D]}}),Object.defineProperty(E,a,H)}:function(E,m,D,a){a===void 0&&(a=D),E[a]=m[D]}),n=t&&t.__setModuleDefault||(Object.create?function(E,m){Object.defineProperty(E,"default",{enumerable:!0,value:m})}:function(E,m){E.default=m}),u=t&&t.__importStar||function(E){if(E&&E.__esModule)return E;var m={};if(E!=null)for(var D in E)D!=="default"&&Object.prototype.hasOwnProperty.call(E,D)&&e(m,E,D);return n(m,E),m};Object.defineProperty(t,"__esModule",{value:!0}),t.v6=t.AddressError=t.Address6=t.Address4=void 0;var s=Fg();Object.defineProperty(t,"Address4",{enumerable:!0,get:function(){return s.Address4}});var p=tb();Object.defineProperty(t,"Address6",{enumerable:!0,get:function(){return p.Address6}});var y=Xd();Object.defineProperty(t,"AddressError",{enumerable:!0,get:function(){return y.AddressError}});var g=u(Bg());t.v6={helpers:g}}),ob=ce(t=>{"use strict";t.byteLength=E,t.toByteArray=D,t.fromByteArray=W;var e=[],n=[],u=typeof Uint8Array<"u"?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(p=0,y=s.length;p<y;++p)e[p]=s[p],n[s.charCodeAt(p)]=p;var p,y;n[45]=62,n[95]=63;function g(w){var U=w.length;if(U%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var tt=w.indexOf("=");tt===-1&&(tt=U);var J=tt===U?0:4-tt%4;return[tt,J]}function E(w){var U=g(w),tt=U[0],J=U[1];return(tt+J)*3/4-J}function m(w,U,tt){return(U+tt)*3/4-tt}function D(w){var U,tt=g(w),J=tt[0],N=tt[1],Q=new u(m(w,J,N)),it=0,q=N>0?J-4:J,L;for(L=0;L<q;L+=4)U=n[w.charCodeAt(L)]<<18|n[w.charCodeAt(L+1)]<<12|n[w.charCodeAt(L+2)]<<6|n[w.charCodeAt(L+3)],Q[it++]=U>>16&255,Q[it++]=U>>8&255,Q[it++]=U&255;return N===2&&(U=n[w.charCodeAt(L)]<<2|n[w.charCodeAt(L+1)]>>4,Q[it++]=U&255),N===1&&(U=n[w.charCodeAt(L)]<<10|n[w.charCodeAt(L+1)]<<4|n[w.charCodeAt(L+2)]>>2,Q[it++]=U>>8&255,Q[it++]=U&255),Q}function a(w){return e[w>>18&63]+e[w>>12&63]+e[w>>6&63]+e[w&63]}function H(w,U,tt){for(var J,N=[],Q=U;Q<tt;Q+=3)J=(w[Q]<<16&16711680)+(w[Q+1]<<8&65280)+(w[Q+2]&255),N.push(a(J));return N.join("")}function W(w){for(var U,tt=w.length,J=tt%3,N=[],Q=16383,it=0,q=tt-J;it<q;it+=Q)N.push(H(w,it,it+Q>q?q:it+Q));return J===1?(U=w[tt-1],N.push(e[U>>2]+e[U<<4&63]+"==")):J===2&&(U=(w[tt-2]<<8)+w[tt-1],N.push(e[U>>10]+e[U>>4&63]+e[U<<2&63]+"=")),N.join("")}}),cb=ce(t=>{t.read=function(e,n,u,s,p){var y,g,E=p*8-s-1,m=(1<<E)-1,D=m>>1,a=-7,H=u?p-1:0,W=u?-1:1,w=e[n+H];for(H+=W,y=w&(1<<-a)-1,w>>=-a,a+=E;a>0;y=y*256+e[n+H],H+=W,a-=8);for(g=y&(1<<-a)-1,y>>=-a,a+=s;a>0;g=g*256+e[n+H],H+=W,a-=8);if(y===0)y=1-D;else{if(y===m)return g?NaN:(w?-1:1)*(1/0);g=g+Math.pow(2,s),y=y-D}return(w?-1:1)*g*Math.pow(2,y-s)},t.write=function(e,n,u,s,p,y){var g,E,m,D=y*8-p-1,a=(1<<D)-1,H=a>>1,W=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=s?0:y-1,U=s?1:-1,tt=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(E=isNaN(n)?1:0,g=a):(g=Math.floor(Math.log(n)/Math.LN2),n*(m=Math.pow(2,-g))<1&&(g--,m*=2),g+H>=1?n+=W/m:n+=W*Math.pow(2,1-H),n*m>=2&&(g++,m/=2),g+H>=a?(E=0,g=a):g+H>=1?(E=(n*m-1)*Math.pow(2,p),g=g+H):(E=n*Math.pow(2,H-1)*Math.pow(2,p),g=0));p>=8;e[u+w]=E&255,w+=U,E/=256,p-=8);for(g=g<<p|E,D+=p;D>0;e[u+w]=g&255,w+=U,g/=256,D-=8);e[u+w-U]|=tt*128}}),l0=ce(t=>{"use strict";var e=ob(),n=cb(),u=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=g,t.SlowBuffer=N,t.INSPECT_MAX_BYTES=50;var s=2147483647;t.kMaxLength=s,g.TYPED_ARRAY_SUPPORT=p(),!g.TYPED_ARRAY_SUPPORT&&typeof console<"u";function p(){try{let f=new Uint8Array(1),S={foo:function(){return 42}};return Object.setPrototypeOf(S,Uint8Array.prototype),Object.setPrototypeOf(f,S),f.foo()===42}catch{return!1}}Object.defineProperty(g.prototype,"parent",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.buffer}}),Object.defineProperty(g.prototype,"offset",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.byteOffset}});function y(f){if(f>s)throw new RangeError('The value "'+f+'" is invalid for option "size"');let S=new Uint8Array(f);return Object.setPrototypeOf(S,g.prototype),S}function g(f,S,Y){if(typeof f=="number"){if(typeof S=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return a(f)}return E(f,S,Y)}g.poolSize=8192;function E(f,S,Y){if(typeof f=="string")return H(f,S);if(ArrayBuffer.isView(f))return w(f);if(f==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(er(f,ArrayBuffer)||f&&er(f.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(er(f,SharedArrayBuffer)||f&&er(f.buffer,SharedArrayBuffer)))return U(f,S,Y);if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let It=f.valueOf&&f.valueOf();if(It!=null&&It!==f)return g.from(It,S,Y);let Ot=tt(f);if(Ot)return Ot;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof f[Symbol.toPrimitive]=="function")return g.from(f[Symbol.toPrimitive]("string"),S,Y);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f)}g.from=function(f,S,Y){return E(f,S,Y)},Object.setPrototypeOf(g.prototype,Uint8Array.prototype),Object.setPrototypeOf(g,Uint8Array);function m(f){if(typeof f!="number")throw new TypeError('"size" argument must be of type number');if(f<0)throw new RangeError('The value "'+f+'" is invalid for option "size"')}function D(f,S,Y){return m(f),f<=0?y(f):S!==void 0?typeof Y=="string"?y(f).fill(S,Y):y(f).fill(S):y(f)}g.alloc=function(f,S,Y){return D(f,S,Y)};function a(f){return m(f),y(f<0?0:J(f)|0)}g.allocUnsafe=function(f){return a(f)},g.allocUnsafeSlow=function(f){return a(f)};function H(f,S){if((typeof S!="string"||S==="")&&(S="utf8"),!g.isEncoding(S))throw new TypeError("Unknown encoding: "+S);let Y=Q(f,S)|0,It=y(Y),Ot=It.write(f,S);return Ot!==Y&&(It=It.slice(0,Ot)),It}function W(f){let S=f.length<0?0:J(f.length)|0,Y=y(S);for(let It=0;It<S;It+=1)Y[It]=f[It]&255;return Y}function w(f){if(er(f,Uint8Array)){let S=new Uint8Array(f);return U(S.buffer,S.byteOffset,S.byteLength)}return W(f)}function U(f,S,Y){if(S<0||f.byteLength<S)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<S+(Y||0))throw new RangeError('"length" is outside of buffer bounds');let It;return S===void 0&&Y===void 0?It=new Uint8Array(f):Y===void 0?It=new Uint8Array(f,S):It=new Uint8Array(f,S,Y),Object.setPrototypeOf(It,g.prototype),It}function tt(f){if(g.isBuffer(f)){let S=J(f.length)|0,Y=y(S);return Y.length===0||f.copy(Y,0,0,S),Y}if(f.length!==void 0)return typeof f.length!="number"||Gr(f.length)?y(0):W(f);if(f.type==="Buffer"&&Array.isArray(f.data))return W(f.data)}function J(f){if(f>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return f|0}function N(f){return+f!=f&&(f=0),g.alloc(+f)}g.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==g.prototype},g.compare=function(f,S){if(er(f,Uint8Array)&&(f=g.from(f,f.offset,f.byteLength)),er(S,Uint8Array)&&(S=g.from(S,S.offset,S.byteLength)),!g.isBuffer(f)||!g.isBuffer(S))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===S)return 0;let Y=f.length,It=S.length;for(let Ot=0,nt=Math.min(Y,It);Ot<nt;++Ot)if(f[Ot]!==S[Ot]){Y=f[Ot],It=S[Ot];break}return Y<It?-1:It<Y?1:0},g.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},g.concat=function(f,S){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return g.alloc(0);let Y;if(S===void 0)for(S=0,Y=0;Y<f.length;++Y)S+=f[Y].length;let It=g.allocUnsafe(S),Ot=0;for(Y=0;Y<f.length;++Y){let nt=f[Y];if(er(nt,Uint8Array))Ot+nt.length>It.length?(g.isBuffer(nt)||(nt=g.from(nt)),nt.copy(It,Ot)):Uint8Array.prototype.set.call(It,nt,Ot);else if(g.isBuffer(nt))nt.copy(It,Ot);else throw new TypeError('"list" argument must be an Array of Buffers');Ot+=nt.length}return It};function Q(f,S){if(g.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||er(f,ArrayBuffer))return f.byteLength;if(typeof f!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);let Y=f.length,It=arguments.length>2&&arguments[2]===!0;if(!It&&Y===0)return 0;let Ot=!1;for(;;)switch(S){case"ascii":case"latin1":case"binary":return Y;case"utf8":case"utf-8":return me(f).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Y*2;case"hex":return Y>>>1;case"base64":return mr(f).length;default:if(Ot)return It?-1:me(f).length;S=(""+S).toLowerCase(),Ot=!0}}g.byteLength=Q;function it(f,S,Y){let It=!1;if((S===void 0||S<0)&&(S=0),S>this.length||((Y===void 0||Y>this.length)&&(Y=this.length),Y<=0)||(Y>>>=0,S>>>=0,Y<=S))return"";for(f||(f="utf8");;)switch(f){case"hex":return de(this,S,Y);case"utf8":case"utf-8":return Xt(this,S,Y);case"ascii":return oe(this,S,Y);case"latin1":case"binary":return Le(this,S,Y);case"base64":return wt(this,S,Y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return He(this,S,Y);default:if(It)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase(),It=!0}}g.prototype._isBuffer=!0;function q(f,S,Y){let It=f[S];f[S]=f[Y],f[Y]=It}g.prototype.swap16=function(){let f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let S=0;S<f;S+=2)q(this,S,S+1);return this},g.prototype.swap32=function(){let f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let S=0;S<f;S+=4)q(this,S,S+3),q(this,S+1,S+2);return this},g.prototype.swap64=function(){let f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let S=0;S<f;S+=8)q(this,S,S+7),q(this,S+1,S+6),q(this,S+2,S+5),q(this,S+3,S+4);return this},g.prototype.toString=function(){let f=this.length;return f===0?"":arguments.length===0?Xt(this,0,f):it.apply(this,arguments)},g.prototype.toLocaleString=g.prototype.toString,g.prototype.equals=function(f){if(!g.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:g.compare(this,f)===0},g.prototype.inspect=function(){let f="",S=t.INSPECT_MAX_BYTES;return f=this.toString("hex",0,S).replace(/(.{2})/g,"$1 ").trim(),this.length>S&&(f+=" ... "),"<Buffer "+f+">"},u&&(g.prototype[u]=g.prototype.inspect),g.prototype.compare=function(f,S,Y,It,Ot){if(er(f,Uint8Array)&&(f=g.from(f,f.offset,f.byteLength)),!g.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(S===void 0&&(S=0),Y===void 0&&(Y=f?f.length:0),It===void 0&&(It=0),Ot===void 0&&(Ot=this.length),S<0||Y>f.length||It<0||Ot>this.length)throw new RangeError("out of range index");if(It>=Ot&&S>=Y)return 0;if(It>=Ot)return-1;if(S>=Y)return 1;if(S>>>=0,Y>>>=0,It>>>=0,Ot>>>=0,this===f)return 0;let nt=Ot-It,zt=Y-S,jt=Math.min(nt,zt),Se=this.slice(It,Ot),_t=f.slice(S,Y);for(let gt=0;gt<jt;++gt)if(Se[gt]!==_t[gt]){nt=Se[gt],zt=_t[gt];break}return nt<zt?-1:zt<nt?1:0};function L(f,S,Y,It,Ot){if(f.length===0)return-1;if(typeof Y=="string"?(It=Y,Y=0):Y>2147483647?Y=2147483647:Y<-2147483648&&(Y=-2147483648),Y=+Y,Gr(Y)&&(Y=Ot?0:f.length-1),Y<0&&(Y=f.length+Y),Y>=f.length){if(Ot)return-1;Y=f.length-1}else if(Y<0)if(Ot)Y=0;else return-1;if(typeof S=="string"&&(S=g.from(S,It)),g.isBuffer(S))return S.length===0?-1:V(f,S,Y,It,Ot);if(typeof S=="number")return S=S&255,typeof Uint8Array.prototype.indexOf=="function"?Ot?Uint8Array.prototype.indexOf.call(f,S,Y):Uint8Array.prototype.lastIndexOf.call(f,S,Y):V(f,[S],Y,It,Ot);throw new TypeError("val must be string, number or Buffer")}function V(f,S,Y,It,Ot){let nt=1,zt=f.length,jt=S.length;if(It!==void 0&&(It=String(It).toLowerCase(),It==="ucs2"||It==="ucs-2"||It==="utf16le"||It==="utf-16le")){if(f.length<2||S.length<2)return-1;nt=2,zt/=2,jt/=2,Y/=2}function Se(gt,rt){return nt===1?gt[rt]:gt.readUInt16BE(rt*nt)}let _t;if(Ot){let gt=-1;for(_t=Y;_t<zt;_t++)if(Se(f,_t)===Se(S,gt===-1?0:_t-gt)){if(gt===-1&&(gt=_t),_t-gt+1===jt)return gt*nt}else gt!==-1&&(_t-=_t-gt),gt=-1}else for(Y+jt>zt&&(Y=zt-jt),_t=Y;_t>=0;_t--){let gt=!0;for(let rt=0;rt<jt;rt++)if(Se(f,_t+rt)!==Se(S,rt)){gt=!1;break}if(gt)return _t}return-1}g.prototype.includes=function(f,S,Y){return this.indexOf(f,S,Y)!==-1},g.prototype.indexOf=function(f,S,Y){return L(this,f,S,Y,!0)},g.prototype.lastIndexOf=function(f,S,Y){return L(this,f,S,Y,!1)};function lt(f,S,Y,It){Y=Number(Y)||0;let Ot=f.length-Y;It?(It=Number(It),It>Ot&&(It=Ot)):It=Ot;let nt=S.length;It>nt/2&&(It=nt/2);let zt;for(zt=0;zt<It;++zt){let jt=parseInt(S.substr(zt*2,2),16);if(Gr(jt))return zt;f[Y+zt]=jt}return zt}function mt(f,S,Y,It){return ur(me(S,f.length-Y),f,Y,It)}function Rt(f,S,Y,It){return ur(rr(S),f,Y,It)}function Et(f,S,Y,It){return ur(mr(S),f,Y,It)}function vt(f,S,Y,It){return ur(dr(S,f.length-Y),f,Y,It)}g.prototype.write=function(f,S,Y,It){if(S===void 0)It="utf8",Y=this.length,S=0;else if(Y===void 0&&typeof S=="string")It=S,Y=this.length,S=0;else if(isFinite(S))S=S>>>0,isFinite(Y)?(Y=Y>>>0,It===void 0&&(It="utf8")):(It=Y,Y=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let Ot=this.length-S;if((Y===void 0||Y>Ot)&&(Y=Ot),f.length>0&&(Y<0||S<0)||S>this.length)throw new RangeError("Attempt to write outside buffer bounds");It||(It="utf8");let nt=!1;for(;;)switch(It){case"hex":return lt(this,f,S,Y);case"utf8":case"utf-8":return mt(this,f,S,Y);case"ascii":case"latin1":case"binary":return Rt(this,f,S,Y);case"base64":return Et(this,f,S,Y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return vt(this,f,S,Y);default:if(nt)throw new TypeError("Unknown encoding: "+It);It=(""+It).toLowerCase(),nt=!0}},g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function wt(f,S,Y){return S===0&&Y===f.length?e.fromByteArray(f):e.fromByteArray(f.slice(S,Y))}function Xt(f,S,Y){Y=Math.min(f.length,Y);let It=[],Ot=S;for(;Ot<Y;){let nt=f[Ot],zt=null,jt=nt>239?4:nt>223?3:nt>191?2:1;if(Ot+jt<=Y){let Se,_t,gt,rt;switch(jt){case 1:nt<128&&(zt=nt);break;case 2:Se=f[Ot+1],(Se&192)===128&&(rt=(nt&31)<<6|Se&63,rt>127&&(zt=rt));break;case 3:Se=f[Ot+1],_t=f[Ot+2],(Se&192)===128&&(_t&192)===128&&(rt=(nt&15)<<12|(Se&63)<<6|_t&63,rt>2047&&(rt<55296||rt>57343)&&(zt=rt));break;case 4:Se=f[Ot+1],_t=f[Ot+2],gt=f[Ot+3],(Se&192)===128&&(_t&192)===128&&(gt&192)===128&&(rt=(nt&15)<<18|(Se&63)<<12|(_t&63)<<6|gt&63,rt>65535&&rt<1114112&&(zt=rt))}}zt===null?(zt=65533,jt=1):zt>65535&&(zt-=65536,It.push(zt>>>10&1023|55296),zt=56320|zt&1023),It.push(zt),Ot+=jt}return ne(It)}var ee=4096;function ne(f){let S=f.length;if(S<=ee)return String.fromCharCode.apply(String,f);let Y="",It=0;for(;It<S;)Y+=String.fromCharCode.apply(String,f.slice(It,It+=ee));return Y}function oe(f,S,Y){let It="";Y=Math.min(f.length,Y);for(let Ot=S;Ot<Y;++Ot)It+=String.fromCharCode(f[Ot]&127);return It}function Le(f,S,Y){let It="";Y=Math.min(f.length,Y);for(let Ot=S;Ot<Y;++Ot)It+=String.fromCharCode(f[Ot]);return It}function de(f,S,Y){let It=f.length;(!S||S<0)&&(S=0),(!Y||Y<0||Y>It)&&(Y=It);let Ot="";for(let nt=S;nt<Y;++nt)Ot+=Lr[f[nt]];return Ot}function He(f,S,Y){let It=f.slice(S,Y),Ot="";for(let nt=0;nt<It.length-1;nt+=2)Ot+=String.fromCharCode(It[nt]+It[nt+1]*256);return Ot}g.prototype.slice=function(f,S){let Y=this.length;f=~~f,S=S===void 0?Y:~~S,f<0?(f+=Y,f<0&&(f=0)):f>Y&&(f=Y),S<0?(S+=Y,S<0&&(S=0)):S>Y&&(S=Y),S<f&&(S=f);let It=this.subarray(f,S);return Object.setPrototypeOf(It,g.prototype),It};function ze(f,S,Y){if(f%1!==0||f<0)throw new RangeError("offset is not uint");if(f+S>Y)throw new RangeError("Trying to access beyond buffer length")}g.prototype.readUintLE=g.prototype.readUIntLE=function(f,S,Y){f=f>>>0,S=S>>>0,Y||ze(f,S,this.length);let It=this[f],Ot=1,nt=0;for(;++nt<S&&(Ot*=256);)It+=this[f+nt]*Ot;return It},g.prototype.readUintBE=g.prototype.readUIntBE=function(f,S,Y){f=f>>>0,S=S>>>0,Y||ze(f,S,this.length);let It=this[f+--S],Ot=1;for(;S>0&&(Ot*=256);)It+=this[f+--S]*Ot;return It},g.prototype.readUint8=g.prototype.readUInt8=function(f,S){return f=f>>>0,S||ze(f,1,this.length),this[f]},g.prototype.readUint16LE=g.prototype.readUInt16LE=function(f,S){return f=f>>>0,S||ze(f,2,this.length),this[f]|this[f+1]<<8},g.prototype.readUint16BE=g.prototype.readUInt16BE=function(f,S){return f=f>>>0,S||ze(f,2,this.length),this[f]<<8|this[f+1]},g.prototype.readUint32LE=g.prototype.readUInt32LE=function(f,S){return f=f>>>0,S||ze(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},g.prototype.readUint32BE=g.prototype.readUInt32BE=function(f,S){return f=f>>>0,S||ze(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},g.prototype.readBigUInt64LE=Sr(function(f){f=f>>>0,et(f,"offset");let S=this[f],Y=this[f+7];(S===void 0||Y===void 0)&&k(f,this.length-8);let It=S+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24,Ot=this[++f]+this[++f]*2**8+this[++f]*2**16+Y*2**24;return BigInt(It)+(BigInt(Ot)<<BigInt(32))}),g.prototype.readBigUInt64BE=Sr(function(f){f=f>>>0,et(f,"offset");let S=this[f],Y=this[f+7];(S===void 0||Y===void 0)&&k(f,this.length-8);let It=S*2**24+this[++f]*2**16+this[++f]*2**8+this[++f],Ot=this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+Y;return(BigInt(It)<<BigInt(32))+BigInt(Ot)}),g.prototype.readIntLE=function(f,S,Y){f=f>>>0,S=S>>>0,Y||ze(f,S,this.length);let It=this[f],Ot=1,nt=0;for(;++nt<S&&(Ot*=256);)It+=this[f+nt]*Ot;return Ot*=128,It>=Ot&&(It-=Math.pow(2,8*S)),It},g.prototype.readIntBE=function(f,S,Y){f=f>>>0,S=S>>>0,Y||ze(f,S,this.length);let It=S,Ot=1,nt=this[f+--It];for(;It>0&&(Ot*=256);)nt+=this[f+--It]*Ot;return Ot*=128,nt>=Ot&&(nt-=Math.pow(2,8*S)),nt},g.prototype.readInt8=function(f,S){return f=f>>>0,S||ze(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},g.prototype.readInt16LE=function(f,S){f=f>>>0,S||ze(f,2,this.length);let Y=this[f]|this[f+1]<<8;return Y&32768?Y|4294901760:Y},g.prototype.readInt16BE=function(f,S){f=f>>>0,S||ze(f,2,this.length);let Y=this[f+1]|this[f]<<8;return Y&32768?Y|4294901760:Y},g.prototype.readInt32LE=function(f,S){return f=f>>>0,S||ze(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},g.prototype.readInt32BE=function(f,S){return f=f>>>0,S||ze(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},g.prototype.readBigInt64LE=Sr(function(f){f=f>>>0,et(f,"offset");let S=this[f],Y=this[f+7];(S===void 0||Y===void 0)&&k(f,this.length-8);let It=this[f+4]+this[f+5]*2**8+this[f+6]*2**16+(Y<<24);return(BigInt(It)<<BigInt(32))+BigInt(S+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24)}),g.prototype.readBigInt64BE=Sr(function(f){f=f>>>0,et(f,"offset");let S=this[f],Y=this[f+7];(S===void 0||Y===void 0)&&k(f,this.length-8);let It=(S<<24)+this[++f]*2**16+this[++f]*2**8+this[++f];return(BigInt(It)<<BigInt(32))+BigInt(this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+Y)}),g.prototype.readFloatLE=function(f,S){return f=f>>>0,S||ze(f,4,this.length),n.read(this,f,!0,23,4)},g.prototype.readFloatBE=function(f,S){return f=f>>>0,S||ze(f,4,this.length),n.read(this,f,!1,23,4)},g.prototype.readDoubleLE=function(f,S){return f=f>>>0,S||ze(f,8,this.length),n.read(this,f,!0,52,8)},g.prototype.readDoubleBE=function(f,S){return f=f>>>0,S||ze(f,8,this.length),n.read(this,f,!1,52,8)};function Te(f,S,Y,It,Ot,nt){if(!g.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(S>Ot||S<nt)throw new RangeError('"value" argument is out of bounds');if(Y+It>f.length)throw new RangeError("Index out of range")}g.prototype.writeUintLE=g.prototype.writeUIntLE=function(f,S,Y,It){if(f=+f,S=S>>>0,Y=Y>>>0,!It){let zt=Math.pow(2,8*Y)-1;Te(this,f,S,Y,zt,0)}let Ot=1,nt=0;for(this[S]=f&255;++nt<Y&&(Ot*=256);)this[S+nt]=f/Ot&255;return S+Y},g.prototype.writeUintBE=g.prototype.writeUIntBE=function(f,S,Y,It){if(f=+f,S=S>>>0,Y=Y>>>0,!It){let zt=Math.pow(2,8*Y)-1;Te(this,f,S,Y,zt,0)}let Ot=Y-1,nt=1;for(this[S+Ot]=f&255;--Ot>=0&&(nt*=256);)this[S+Ot]=f/nt&255;return S+Y},g.prototype.writeUint8=g.prototype.writeUInt8=function(f,S,Y){return f=+f,S=S>>>0,Y||Te(this,f,S,1,255,0),this[S]=f&255,S+1},g.prototype.writeUint16LE=g.prototype.writeUInt16LE=function(f,S,Y){return f=+f,S=S>>>0,Y||Te(this,f,S,2,65535,0),this[S]=f&255,this[S+1]=f>>>8,S+2},g.prototype.writeUint16BE=g.prototype.writeUInt16BE=function(f,S,Y){return f=+f,S=S>>>0,Y||Te(this,f,S,2,65535,0),this[S]=f>>>8,this[S+1]=f&255,S+2},g.prototype.writeUint32LE=g.prototype.writeUInt32LE=function(f,S,Y){return f=+f,S=S>>>0,Y||Te(this,f,S,4,4294967295,0),this[S+3]=f>>>24,this[S+2]=f>>>16,this[S+1]=f>>>8,this[S]=f&255,S+4},g.prototype.writeUint32BE=g.prototype.writeUInt32BE=function(f,S,Y){return f=+f,S=S>>>0,Y||Te(this,f,S,4,4294967295,0),this[S]=f>>>24,this[S+1]=f>>>16,this[S+2]=f>>>8,this[S+3]=f&255,S+4};function Je(f,S,Y,It,Ot){Cr(S,It,Ot,f,Y,7);let nt=Number(S&BigInt(4294967295));f[Y++]=nt,nt=nt>>8,f[Y++]=nt,nt=nt>>8,f[Y++]=nt,nt=nt>>8,f[Y++]=nt;let zt=Number(S>>BigInt(32)&BigInt(4294967295));return f[Y++]=zt,zt=zt>>8,f[Y++]=zt,zt=zt>>8,f[Y++]=zt,zt=zt>>8,f[Y++]=zt,Y}function Xe(f,S,Y,It,Ot){Cr(S,It,Ot,f,Y,7);let nt=Number(S&BigInt(4294967295));f[Y+7]=nt,nt=nt>>8,f[Y+6]=nt,nt=nt>>8,f[Y+5]=nt,nt=nt>>8,f[Y+4]=nt;let zt=Number(S>>BigInt(32)&BigInt(4294967295));return f[Y+3]=zt,zt=zt>>8,f[Y+2]=zt,zt=zt>>8,f[Y+1]=zt,zt=zt>>8,f[Y]=zt,Y+8}g.prototype.writeBigUInt64LE=Sr(function(f,S=0){return Je(this,f,S,BigInt(0),BigInt("0xffffffffffffffff"))}),g.prototype.writeBigUInt64BE=Sr(function(f,S=0){return Xe(this,f,S,BigInt(0),BigInt("0xffffffffffffffff"))}),g.prototype.writeIntLE=function(f,S,Y,It){if(f=+f,S=S>>>0,!It){let jt=Math.pow(2,8*Y-1);Te(this,f,S,Y,jt-1,-jt)}let Ot=0,nt=1,zt=0;for(this[S]=f&255;++Ot<Y&&(nt*=256);)f<0&&zt===0&&this[S+Ot-1]!==0&&(zt=1),this[S+Ot]=(f/nt>>0)-zt&255;return S+Y},g.prototype.writeIntBE=function(f,S,Y,It){if(f=+f,S=S>>>0,!It){let jt=Math.pow(2,8*Y-1);Te(this,f,S,Y,jt-1,-jt)}let Ot=Y-1,nt=1,zt=0;for(this[S+Ot]=f&255;--Ot>=0&&(nt*=256);)f<0&&zt===0&&this[S+Ot+1]!==0&&(zt=1),this[S+Ot]=(f/nt>>0)-zt&255;return S+Y},g.prototype.writeInt8=function(f,S,Y){return f=+f,S=S>>>0,Y||Te(this,f,S,1,127,-128),f<0&&(f=255+f+1),this[S]=f&255,S+1},g.prototype.writeInt16LE=function(f,S,Y){return f=+f,S=S>>>0,Y||Te(this,f,S,2,32767,-32768),this[S]=f&255,this[S+1]=f>>>8,S+2},g.prototype.writeInt16BE=function(f,S,Y){return f=+f,S=S>>>0,Y||Te(this,f,S,2,32767,-32768),this[S]=f>>>8,this[S+1]=f&255,S+2},g.prototype.writeInt32LE=function(f,S,Y){return f=+f,S=S>>>0,Y||Te(this,f,S,4,2147483647,-2147483648),this[S]=f&255,this[S+1]=f>>>8,this[S+2]=f>>>16,this[S+3]=f>>>24,S+4},g.prototype.writeInt32BE=function(f,S,Y){return f=+f,S=S>>>0,Y||Te(this,f,S,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[S]=f>>>24,this[S+1]=f>>>16,this[S+2]=f>>>8,this[S+3]=f&255,S+4},g.prototype.writeBigInt64LE=Sr(function(f,S=0){return Je(this,f,S,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),g.prototype.writeBigInt64BE=Sr(function(f,S=0){return Xe(this,f,S,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ae(f,S,Y,It,Ot,nt){if(Y+It>f.length)throw new RangeError("Index out of range");if(Y<0)throw new RangeError("Index out of range")}function _e(f,S,Y,It,Ot){return S=+S,Y=Y>>>0,Ot||Ae(f,S,Y,4,34028234663852886e22,-34028234663852886e22),n.write(f,S,Y,It,23,4),Y+4}g.prototype.writeFloatLE=function(f,S,Y){return _e(this,f,S,!0,Y)},g.prototype.writeFloatBE=function(f,S,Y){return _e(this,f,S,!1,Y)};function Qe(f,S,Y,It,Ot){return S=+S,Y=Y>>>0,Ot||Ae(f,S,Y,8,17976931348623157e292,-17976931348623157e292),n.write(f,S,Y,It,52,8),Y+8}g.prototype.writeDoubleLE=function(f,S,Y){return Qe(this,f,S,!0,Y)},g.prototype.writeDoubleBE=function(f,S,Y){return Qe(this,f,S,!1,Y)},g.prototype.copy=function(f,S,Y,It){if(!g.isBuffer(f))throw new TypeError("argument should be a Buffer");if(Y||(Y=0),!It&&It!==0&&(It=this.length),S>=f.length&&(S=f.length),S||(S=0),It>0&&It<Y&&(It=Y),It===Y||f.length===0||this.length===0)return 0;if(S<0)throw new RangeError("targetStart out of bounds");if(Y<0||Y>=this.length)throw new RangeError("Index out of range");if(It<0)throw new RangeError("sourceEnd out of bounds");It>this.length&&(It=this.length),f.length-S<It-Y&&(It=f.length-S+Y);let Ot=It-Y;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(S,Y,It):Uint8Array.prototype.set.call(f,this.subarray(Y,It),S),Ot},g.prototype.fill=function(f,S,Y,It){if(typeof f=="string"){if(typeof S=="string"?(It=S,S=0,Y=this.length):typeof Y=="string"&&(It=Y,Y=this.length),It!==void 0&&typeof It!="string")throw new TypeError("encoding must be a string");if(typeof It=="string"&&!g.isEncoding(It))throw new TypeError("Unknown encoding: "+It);if(f.length===1){let nt=f.charCodeAt(0);(It==="utf8"&&nt<128||It==="latin1")&&(f=nt)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(S<0||this.length<S||this.length<Y)throw new RangeError("Out of range index");if(Y<=S)return this;S=S>>>0,Y=Y===void 0?this.length:Y>>>0,f||(f=0);let Ot;if(typeof f=="number")for(Ot=S;Ot<Y;++Ot)this[Ot]=f;else{let nt=g.isBuffer(f)?f:g.from(f,It),zt=nt.length;if(zt===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(Ot=0;Ot<Y-S;++Ot)this[Ot+S]=nt[Ot%zt]}return this};var qe={};function Ze(f,S,Y){qe[f]=class extends Y{constructor(){super(),Object.defineProperty(this,"message",{value:S.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${f}]`,this.stack,delete this.name}get code(){return f}set code(It){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:It,writable:!0})}toString(){return`${this.name} [${f}]: ${this.message}`}}}Ze("ERR_BUFFER_OUT_OF_BOUNDS",function(f){return f?`${f} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ze("ERR_INVALID_ARG_TYPE",function(f,S){return`The "${f}" argument must be of type number. Received type ${typeof S}`},TypeError),Ze("ERR_OUT_OF_RANGE",function(f,S,Y){let It=`The value of "${f}" is out of range.`,Ot=Y;return Number.isInteger(Y)&&Math.abs(Y)>2**32?Ot=Ar(String(Y)):typeof Y=="bigint"&&(Ot=String(Y),(Y>BigInt(2)**BigInt(32)||Y<-(BigInt(2)**BigInt(32)))&&(Ot=Ar(Ot)),Ot+="n"),It+=` It must be ${S}. Received ${Ot}`,It},RangeError);function Ar(f){let S="",Y=f.length,It=f[0]==="-"?1:0;for(;Y>=It+4;Y-=3)S=`_${f.slice(Y-3,Y)}${S}`;return`${f.slice(0,Y)}${S}`}function Or(f,S,Y){et(S,"offset"),(f[S]===void 0||f[S+Y]===void 0)&&k(S,f.length-(Y+1))}function Cr(f,S,Y,It,Ot,nt){if(f>Y||f<S){let zt=typeof S=="bigint"?"n":"",jt;throw nt>3?S===0||S===BigInt(0)?jt=`>= 0${zt} and < 2${zt} ** ${(nt+1)*8}${zt}`:jt=`>= -(2${zt} ** ${(nt+1)*8-1}${zt}) and < 2 ** ${(nt+1)*8-1}${zt}`:jt=`>= ${S}${zt} and <= ${Y}${zt}`,new qe.ERR_OUT_OF_RANGE("value",jt,f)}Or(It,Ot,nt)}function et(f,S){if(typeof f!="number")throw new qe.ERR_INVALID_ARG_TYPE(S,"number",f)}function k(f,S,Y){throw Math.floor(f)!==f?(et(f,Y),new qe.ERR_OUT_OF_RANGE(Y||"offset","an integer",f)):S<0?new qe.ERR_BUFFER_OUT_OF_BOUNDS:new qe.ERR_OUT_OF_RANGE(Y||"offset",`>= ${Y?1:0} and <= ${S}`,f)}var Z=/[^+/0-9A-Za-z-_]/g;function se(f){if(f=f.split("=")[0],f=f.trim().replace(Z,""),f.length<2)return"";for(;f.length%4!==0;)f=f+"=";return f}function me(f,S){S=S||1/0;let Y,It=f.length,Ot=null,nt=[];for(let zt=0;zt<It;++zt){if(Y=f.charCodeAt(zt),Y>55295&&Y<57344){if(!Ot){if(Y>56319){(S-=3)>-1&&nt.push(239,191,189);continue}else if(zt+1===It){(S-=3)>-1&&nt.push(239,191,189);continue}Ot=Y;continue}if(Y<56320){(S-=3)>-1&&nt.push(239,191,189),Ot=Y;continue}Y=(Ot-55296<<10|Y-56320)+65536}else Ot&&(S-=3)>-1&&nt.push(239,191,189);if(Ot=null,Y<128){if((S-=1)<0)break;nt.push(Y)}else if(Y<2048){if((S-=2)<0)break;nt.push(Y>>6|192,Y&63|128)}else if(Y<65536){if((S-=3)<0)break;nt.push(Y>>12|224,Y>>6&63|128,Y&63|128)}else if(Y<1114112){if((S-=4)<0)break;nt.push(Y>>18|240,Y>>12&63|128,Y>>6&63|128,Y&63|128)}else throw new Error("Invalid code point")}return nt}function rr(f){let S=[];for(let Y=0;Y<f.length;++Y)S.push(f.charCodeAt(Y)&255);return S}function dr(f,S){let Y,It,Ot,nt=[];for(let zt=0;zt<f.length&&!((S-=2)<0);++zt)Y=f.charCodeAt(zt),It=Y>>8,Ot=Y%256,nt.push(Ot),nt.push(It);return nt}function mr(f){return e.toByteArray(se(f))}function ur(f,S,Y,It){let Ot;for(Ot=0;Ot<It&&!(Ot+Y>=S.length||Ot>=f.length);++Ot)S[Ot+Y]=f[Ot];return Ot}function er(f,S){return f instanceof S||f!=null&&f.constructor!=null&&f.constructor.name!=null&&f.constructor.name===S.name}function Gr(f){return f!==f}var Lr=(function(){let f="0123456789abcdef",S=new Array(256);for(let Y=0;Y<16;++Y){let It=Y*16;for(let Ot=0;Ot<16;++Ot)S[It+Ot]=f[Y]+f[Ot]}return S})();function Sr(f){return typeof BigInt>"u"?j:f}function j(){throw new Error("BigInt not supported")}}),Wb=ce(t=>{var e={};e.userAgent=!1;var n={},u="11.1.0",s="jsrsasign(all) 11.1.0 (2024-02-01) (c) 2010-2023 Kenji Urushima | kjur.github.io/jsrsasign/license",p=p||(function(r,l){var o={},h=o.lib={},b=h.Base=(function(){function I(){}return{extend:function(at){I.prototype=this;var T=new I;return at&&T.mixIn(at),T.hasOwnProperty("init")||(T.init=function(){T.$super.init.apply(this,arguments)}),T.init.prototype=T,T.$super=this,T},create:function(){var at=this.extend();return at.init.apply(at,arguments),at},init:function(){},mixIn:function(at){for(var T in at)at.hasOwnProperty(T)&&(this[T]=at[T]);at.hasOwnProperty("toString")&&(this.toString=at.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),C=h.WordArray=b.extend({init:function(I,at){I=this.words=I||[],at!=l?this.sigBytes=at:this.sigBytes=I.length*4},toString:function(I){return(I||_).stringify(this)},concat:function(I){var at=this.words,T=I.words,ot=this.sigBytes,X=I.sigBytes;if(this.clamp(),ot%4)for(var Ft=0;Ft<X;Ft++){var Tt=T[Ft>>>2]>>>24-Ft%4*8&255;at[ot+Ft>>>2]|=Tt<<24-(ot+Ft)%4*8}else for(var Ft=0;Ft<X;Ft+=4)at[ot+Ft>>>2]=T[Ft>>>2];return this.sigBytes+=X,this},clamp:function(){var I=this.words,at=this.sigBytes;I[at>>>2]&=4294967295<<32-at%4*8,I.length=r.ceil(at/4)},clone:function(){var I=b.clone.call(this);return I.words=this.words.slice(0),I},random:function(I){for(var at=[],T=0;T<I;T+=4)at.push(r.random()*4294967296|0);return new C.init(at,I)}}),x=o.enc={},_=x.Hex={stringify:function(I){for(var at=I.words,T=I.sigBytes,ot=[],X=0;X<T;X++){var Ft=at[X>>>2]>>>24-X%4*8&255;ot.push((Ft>>>4).toString(16)),ot.push((Ft&15).toString(16))}return ot.join("")},parse:function(I){for(var at=I.length,T=[],ot=0;ot<at;ot+=2)T[ot>>>3]|=parseInt(I.substr(ot,2),16)<<24-ot%8*4;return new C.init(T,at/2)}},M=x.Latin1={stringify:function(I){for(var at=I.words,T=I.sigBytes,ot=[],X=0;X<T;X++){var Ft=at[X>>>2]>>>24-X%4*8&255;ot.push(String.fromCharCode(Ft))}return ot.join("")},parse:function(I){for(var at=I.length,T=[],ot=0;ot<at;ot++)T[ot>>>2]|=(I.charCodeAt(ot)&255)<<24-ot%4*8;return new C.init(T,at)}},K=x.Utf8={stringify:function(I){try{return decodeURIComponent(escape(M.stringify(I)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(I){return M.parse(unescape(encodeURIComponent(I)))}},dt=h.BufferedBlockAlgorithm=b.extend({reset:function(){this._data=new C.init,this._nDataBytes=0},_append:function(I){typeof I=="string"&&(I=K.parse(I)),this._data.concat(I),this._nDataBytes+=I.sigBytes},_process:function(I){var at=this._data,T=at.words,ot=at.sigBytes,X=this.blockSize,Ft=X*4,Tt=ot/Ft;I?Tt=r.ceil(Tt):Tt=r.max((Tt|0)-this._minBufferSize,0);var Wt=Tt*X,Gt=r.min(Wt*4,ot);if(Wt){for(var ve=0;ve<Wt;ve+=X)this._doProcessBlock(T,ve);var be=T.splice(0,Wt);at.sigBytes-=Gt}return new C.init(be,Gt)},clone:function(){var I=b.clone.call(this);return I._data=this._data.clone(),I},_minBufferSize:0}),yt=h.Hasher=dt.extend({cfg:b.extend(),init:function(I){this.cfg=this.cfg.extend(I),this.reset()},reset:function(){dt.reset.call(this),this._doReset()},update:function(I){return this._append(I),this._process(),this},finalize:function(I){I&&this._append(I);var at=this._doFinalize();return at},blockSize:512/32,_createHelper:function(I){return function(at,T){return new I.init(T).finalize(at)}},_createHmacHelper:function(I){return function(at,T){return new O.HMAC.init(I,T).finalize(at)}}}),O=o.algo={};return o})(Math);(function(r){var b=p,l=b.lib,o=l.Base,h=l.WordArray,b=b.x64={};b.Word=o.extend({init:function(C,x){this.high=C,this.low=x}}),b.WordArray=o.extend({init:function(C,x){C=this.words=C||[],this.sigBytes=x!=r?x:8*C.length},toX32:function(){for(var C=this.words,x=C.length,_=[],M=0;M<x;M++){var K=C[M];_.push(K.high),_.push(K.low)}return h.create(_,this.sigBytes)},clone:function(){for(var C=o.clone.call(this),x=C.words=this.words.slice(0),_=x.length,M=0;M<_;M++)x[M]=x[M].clone();return C}})})(),p.lib.Cipher||(function(r){var I=p,l=I.lib,o=l.Base,h=l.WordArray,b=l.BufferedBlockAlgorithm,C=I.enc.Base64,x=I.algo.EvpKDF,_=l.Cipher=b.extend({cfg:o.extend(),createEncryptor:function(T,ot){return this.create(this._ENC_XFORM_MODE,T,ot)},createDecryptor:function(T,ot){return this.create(this._DEC_XFORM_MODE,T,ot)},init:function(T,ot,X){this.cfg=this.cfg.extend(X),this._xformMode=T,this._key=ot,this.reset()},reset:function(){b.reset.call(this),this._doReset()},process:function(T){return this._append(T),this._process()},finalize:function(T){return T&&this._append(T),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(T){return{encrypt:function(ot,X,Ft){return(typeof X=="string"?at:O).encrypt(T,ot,X,Ft)},decrypt:function(ot,X,Ft){return(typeof X=="string"?at:O).decrypt(T,ot,X,Ft)}}}});l.StreamCipher=_.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var yt=I.mode={},M=function(T,ot,X){var Ft=this._iv;Ft?this._iv=r:Ft=this._prevBlock;for(var Tt=0;Tt<X;Tt++)T[ot+Tt]^=Ft[Tt]},K=(l.BlockCipherMode=o.extend({createEncryptor:function(T,ot){return this.Encryptor.create(T,ot)},createDecryptor:function(T,ot){return this.Decryptor.create(T,ot)},init:function(T,ot){this._cipher=T,this._iv=ot}})).extend();K.Encryptor=K.extend({processBlock:function(T,ot){var X=this._cipher,Ft=X.blockSize;M.call(this,T,ot,Ft),X.encryptBlock(T,ot),this._prevBlock=T.slice(ot,ot+Ft)}}),K.Decryptor=K.extend({processBlock:function(T,ot){var X=this._cipher,Ft=X.blockSize,Tt=T.slice(ot,ot+Ft);X.decryptBlock(T,ot),M.call(this,T,ot,Ft),this._prevBlock=Tt}}),yt=yt.CBC=K,K=(I.pad={}).Pkcs7={pad:function(T,ot){for(var X=4*ot,X=X-T.sigBytes%X,Ft=X<<24|X<<16|X<<8|X,Tt=[],Wt=0;Wt<X;Wt+=4)Tt.push(Ft);X=h.create(Tt,X),T.concat(X)},unpad:function(T){T.sigBytes-=T.words[T.sigBytes-1>>>2]&255}},l.BlockCipher=_.extend({cfg:_.cfg.extend({mode:yt,padding:K}),reset:function(){_.reset.call(this);var ot=this.cfg,T=ot.iv,ot=ot.mode;if(this._xformMode==this._ENC_XFORM_MODE)var X=ot.createEncryptor;else X=ot.createDecryptor,this._minBufferSize=1;this._mode=X.call(ot,this,T&&T.words)},_doProcessBlock:function(T,ot){this._mode.processBlock(T,ot)},_doFinalize:function(){var T=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){T.pad(this._data,this.blockSize);var ot=this._process(!0)}else ot=this._process(!0),T.unpad(ot);return ot},blockSize:4});var dt=l.CipherParams=o.extend({init:function(T){this.mixIn(T)},toString:function(T){return(T||this.formatter).stringify(this)}}),yt=(I.format={}).OpenSSL={stringify:function(T){var ot=T.ciphertext;return T=T.salt,(T?h.create([1398893684,1701076831]).concat(T).concat(ot):ot).toString(C)},parse:function(T){T=C.parse(T);var ot=T.words;if(ot[0]==1398893684&&ot[1]==1701076831){var X=h.create(ot.slice(2,4));ot.splice(0,4),T.sigBytes-=16}return dt.create({ciphertext:T,salt:X})}},O=l.SerializableCipher=o.extend({cfg:o.extend({format:yt}),encrypt:function(T,ot,X,Ft){Ft=this.cfg.extend(Ft);var Tt=T.createEncryptor(X,Ft);return ot=Tt.finalize(ot),Tt=Tt.cfg,dt.create({ciphertext:ot,key:X,iv:Tt.iv,algorithm:T,mode:Tt.mode,padding:Tt.padding,blockSize:T.blockSize,formatter:Ft.format})},decrypt:function(T,ot,X,Ft){return Ft=this.cfg.extend(Ft),ot=this._parse(ot,Ft.format),T.createDecryptor(X,Ft).finalize(ot.ciphertext)},_parse:function(T,ot){return typeof T=="string"?ot.parse(T,this):T}}),I=(I.kdf={}).OpenSSL={execute:function(T,ot,X,Ft){return Ft||(Ft=h.random(8)),T=x.create({keySize:ot+X}).compute(T,Ft),X=h.create(T.words.slice(ot),4*X),T.sigBytes=4*ot,dt.create({key:T,iv:X,salt:Ft})}},at=l.PasswordBasedCipher=O.extend({cfg:O.cfg.extend({kdf:I}),encrypt:function(T,ot,X,Ft){return Ft=this.cfg.extend(Ft),X=Ft.kdf.execute(X,T.keySize,T.ivSize),Ft.iv=X.iv,T=O.encrypt.call(this,T,ot,X.key,Ft),T.mixIn(X),T},decrypt:function(T,ot,X,Ft){return Ft=this.cfg.extend(Ft),ot=this._parse(ot,Ft.format),X=Ft.kdf.execute(X,T.keySize,T.ivSize,ot.salt),Ft.iv=X.iv,O.decrypt.call(this,T,ot,X.key,Ft)}})})(),(function(){for(var r=p,l=r.lib.BlockCipher,ve=r.algo,o=[],h=[],b=[],C=[],x=[],_=[],M=[],K=[],dt=[],yt=[],O=[],I=0;256>I;I++)O[I]=128>I?I<<1:I<<1^283;for(var at=0,T=0,I=0;256>I;I++){var ot=T^T<<1^T<<2^T<<3^T<<4,ot=ot>>>8^ot&255^99;o[at]=ot,h[ot]=at;var X=O[at],Ft=O[X],Tt=O[Ft],Wt=257*O[ot]^16843008*ot;b[at]=Wt<<24|Wt>>>8,C[at]=Wt<<16|Wt>>>16,x[at]=Wt<<8|Wt>>>24,_[at]=Wt,Wt=16843009*Tt^65537*Ft^257*X^16843008*at,M[ot]=Wt<<24|Wt>>>8,K[ot]=Wt<<16|Wt>>>16,dt[ot]=Wt<<8|Wt>>>24,yt[ot]=Wt,at?(at=X^O[O[O[Tt^X]]],T^=O[O[T]]):at=T=1}var Gt=[0,1,2,4,8,16,32,64,128,27,54],ve=ve.AES=l.extend({_doReset:function(){for(var B=this._key,be=B.words,d=B.sigBytes/4,B=4*((this._nRounds=d+6)+1),ut=this._keySchedule=[],z=0;z<B;z++)if(z<d)ut[z]=be[z];else{var St=ut[z-1];z%d?6<d&&z%d==4&&(St=o[St>>>24]<<24|o[St>>>16&255]<<16|o[St>>>8&255]<<8|o[St&255]):(St=St<<8|St>>>24,St=o[St>>>24]<<24|o[St>>>16&255]<<16|o[St>>>8&255]<<8|o[St&255],St^=Gt[z/d|0]<<24),ut[z]=ut[z-d]^St}for(be=this._invKeySchedule=[],d=0;d<B;d++)z=B-d,St=d%4?ut[z]:ut[z-4],be[d]=4>d||4>=z?St:M[o[St>>>24]]^K[o[St>>>16&255]]^dt[o[St>>>8&255]]^yt[o[St&255]]},encryptBlock:function(be,d){this._doCryptBlock(be,d,this._keySchedule,b,C,x,_,o)},decryptBlock:function(be,d){var B=be[d+1];be[d+1]=be[d+3],be[d+3]=B,this._doCryptBlock(be,d,this._invKeySchedule,M,K,dt,yt,h),B=be[d+1],be[d+1]=be[d+3],be[d+3]=B},_doCryptBlock:function(be,d,B,ut,z,St,Mt,te){for(var ie=this._nRounds,Ur=be[d]^B[0],xn=be[d+1]^B[1],pn=be[d+2]^B[2],Vr=be[d+3]^B[3],ge=4,Ie=1;Ie<ie;Ie++)var br=ut[Ur>>>24]^z[xn>>>16&255]^St[pn>>>8&255]^Mt[Vr&255]^B[ge++],xr=ut[xn>>>24]^z[pn>>>16&255]^St[Vr>>>8&255]^Mt[Ur&255]^B[ge++],Fr=ut[pn>>>24]^z[Vr>>>16&255]^St[Ur>>>8&255]^Mt[xn&255]^B[ge++],Vr=ut[Vr>>>24]^z[Ur>>>16&255]^St[xn>>>8&255]^Mt[pn&255]^B[ge++],Ur=br,xn=xr,pn=Fr;br=(te[Ur>>>24]<<24|te[xn>>>16&255]<<16|te[pn>>>8&255]<<8|te[Vr&255])^B[ge++],xr=(te[xn>>>24]<<24|te[pn>>>16&255]<<16|te[Vr>>>8&255]<<8|te[Ur&255])^B[ge++],Fr=(te[pn>>>24]<<24|te[Vr>>>16&255]<<16|te[Ur>>>8&255]<<8|te[xn&255])^B[ge++],Vr=(te[Vr>>>24]<<24|te[Ur>>>16&255]<<16|te[xn>>>8&255]<<8|te[pn&255])^B[ge++],be[d]=br,be[d+1]=xr,be[d+2]=Fr,be[d+3]=Vr},keySize:8});r.AES=l._createHelper(ve)})(),(function(){function r(O,I){var at=(this._lBlock>>>O^this._rBlock)&I;this._rBlock^=at,this._lBlock^=at<<O}function l(O,I){var at=(this._rBlock>>>O^this._lBlock)&I;this._lBlock^=at,this._rBlock^=at<<O}var o=p,b=o.lib,h=b.WordArray,b=b.BlockCipher,C=o.algo,x=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],_=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],M=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],K=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],dt=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],yt=C.DES=b.extend({_doReset:function(){for(var O=this._key.words,I=[],at=0;56>at;at++){var T=x[at]-1;I[at]=O[T>>>5]>>>31-T%32&1}for(O=this._subKeys=[],T=0;16>T;T++){for(var ot=O[T]=[],X=M[T],at=0;24>at;at++)ot[at/6|0]|=I[(_[at]-1+X)%28]<<31-at%6,ot[4+(at/6|0)]|=I[28+(_[at+24]-1+X)%28]<<31-at%6;for(ot[0]=ot[0]<<1|ot[0]>>>31,at=1;7>at;at++)ot[at]>>>=4*(at-1)+3;ot[7]=ot[7]<<5|ot[7]>>>27}for(I=this._invSubKeys=[],at=0;16>at;at++)I[at]=O[15-at]},encryptBlock:function(O,I){this._doCryptBlock(O,I,this._subKeys)},decryptBlock:function(O,I){this._doCryptBlock(O,I,this._invSubKeys)},_doCryptBlock:function(O,I,at){this._lBlock=O[I],this._rBlock=O[I+1],r.call(this,4,252645135),r.call(this,16,65535),l.call(this,2,858993459),l.call(this,8,16711935),r.call(this,1,1431655765);for(var T=0;16>T;T++){for(var ot=at[T],X=this._lBlock,Ft=this._rBlock,Tt=0,Wt=0;8>Wt;Wt++)Tt|=K[Wt][((Ft^ot[Wt])&dt[Wt])>>>0];this._lBlock=Ft,this._rBlock=X^Tt}at=this._lBlock,this._lBlock=this._rBlock,this._rBlock=at,r.call(this,1,1431655765),l.call(this,8,16711935),l.call(this,2,858993459),r.call(this,16,65535),r.call(this,4,252645135),O[I]=this._lBlock,O[I+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});o.DES=b._createHelper(yt),C=C.TripleDES=b.extend({_doReset:function(){var O=this._key.words;this._des1=yt.createEncryptor(h.create(O.slice(0,2))),this._des2=yt.createEncryptor(h.create(O.slice(2,4))),this._des3=yt.createEncryptor(h.create(O.slice(4,6)))},encryptBlock:function(O,I){this._des1.encryptBlock(O,I),this._des2.decryptBlock(O,I),this._des3.encryptBlock(O,I)},decryptBlock:function(O,I){this._des3.decryptBlock(O,I),this._des2.encryptBlock(O,I),this._des1.decryptBlock(O,I)},keySize:6,ivSize:2,blockSize:2}),o.TripleDES=b._createHelper(C)})(),(function(){var r=p,l=r.lib.WordArray;r.enc.Base64={stringify:function(o){var h=o.words,b=o.sigBytes,C=this._map;o.clamp(),o=[];for(var x=0;x<b;x+=3)for(var _=(h[x>>>2]>>>24-8*(x%4)&255)<<16|(h[x+1>>>2]>>>24-8*((x+1)%4)&255)<<8|h[x+2>>>2]>>>24-8*((x+2)%4)&255,M=0;4>M&&x+.75*M<b;M++)o.push(C.charAt(_>>>6*(3-M)&63));if(h=C.charAt(64))for(;o.length%4;)o.push(h);return o.join("")},parse:function(o){var h=o.length,b=this._map,C=b.charAt(64);C&&(C=o.indexOf(C),C!=-1&&(h=C));for(var C=[],x=0,_=0;_<h;_++)if(_%4){var M=b.indexOf(o.charAt(_-1))<<2*(_%4),K=b.indexOf(o.charAt(_))>>>6-2*(_%4);C[x>>>2]|=(M|K)<<24-8*(x%4),x++}return l.create(C,x)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})(),(function(r){function l(yt,O,I,at,T,ot,X){return yt=yt+(O&I|~O&at)+T+X,(yt<<ot|yt>>>32-ot)+O}function o(yt,O,I,at,T,ot,X){return yt=yt+(O&at|I&~at)+T+X,(yt<<ot|yt>>>32-ot)+O}function h(yt,O,I,at,T,ot,X){return yt=yt+(O^I^at)+T+X,(yt<<ot|yt>>>32-ot)+O}function b(yt,O,I,at,T,ot,X){return yt=yt+(I^(O|~at))+T+X,(yt<<ot|yt>>>32-ot)+O}for(var C=p,M=C.lib,x=M.WordArray,_=M.Hasher,M=C.algo,K=[],dt=0;64>dt;dt++)K[dt]=4294967296*r.abs(r.sin(dt+1))|0;M=M.MD5=_.extend({_doReset:function(){this._hash=new x.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(yt,O){for(var I=0;16>I;I++){var at=O+I,T=yt[at];yt[at]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360}var I=this._hash.words,at=yt[O+0],T=yt[O+1],ot=yt[O+2],X=yt[O+3],Ft=yt[O+4],Tt=yt[O+5],Wt=yt[O+6],Gt=yt[O+7],ve=yt[O+8],be=yt[O+9],d=yt[O+10],B=yt[O+11],ut=yt[O+12],z=yt[O+13],St=yt[O+14],Mt=yt[O+15],te=I[0],Ie=I[1],ge=I[2],ie=I[3],te=l(te,Ie,ge,ie,at,7,K[0]),ie=l(ie,te,Ie,ge,T,12,K[1]),ge=l(ge,ie,te,Ie,ot,17,K[2]),Ie=l(Ie,ge,ie,te,X,22,K[3]),te=l(te,Ie,ge,ie,Ft,7,K[4]),ie=l(ie,te,Ie,ge,Tt,12,K[5]),ge=l(ge,ie,te,Ie,Wt,17,K[6]),Ie=l(Ie,ge,ie,te,Gt,22,K[7]),te=l(te,Ie,ge,ie,ve,7,K[8]),ie=l(ie,te,Ie,ge,be,12,K[9]),ge=l(ge,ie,te,Ie,d,17,K[10]),Ie=l(Ie,ge,ie,te,B,22,K[11]),te=l(te,Ie,ge,ie,ut,7,K[12]),ie=l(ie,te,Ie,ge,z,12,K[13]),ge=l(ge,ie,te,Ie,St,17,K[14]),Ie=l(Ie,ge,ie,te,Mt,22,K[15]),te=o(te,Ie,ge,ie,T,5,K[16]),ie=o(ie,te,Ie,ge,Wt,9,K[17]),ge=o(ge,ie,te,Ie,B,14,K[18]),Ie=o(Ie,ge,ie,te,at,20,K[19]),te=o(te,Ie,ge,ie,Tt,5,K[20]),ie=o(ie,te,Ie,ge,d,9,K[21]),ge=o(ge,ie,te,Ie,Mt,14,K[22]),Ie=o(Ie,ge,ie,te,Ft,20,K[23]),te=o(te,Ie,ge,ie,be,5,K[24]),ie=o(ie,te,Ie,ge,St,9,K[25]),ge=o(ge,ie,te,Ie,X,14,K[26]),Ie=o(Ie,ge,ie,te,ve,20,K[27]),te=o(te,Ie,ge,ie,z,5,K[28]),ie=o(ie,te,Ie,ge,ot,9,K[29]),ge=o(ge,ie,te,Ie,Gt,14,K[30]),Ie=o(Ie,ge,ie,te,ut,20,K[31]),te=h(te,Ie,ge,ie,Tt,4,K[32]),ie=h(ie,te,Ie,ge,ve,11,K[33]),ge=h(ge,ie,te,Ie,B,16,K[34]),Ie=h(Ie,ge,ie,te,St,23,K[35]),te=h(te,Ie,ge,ie,T,4,K[36]),ie=h(ie,te,Ie,ge,Ft,11,K[37]),ge=h(ge,ie,te,Ie,Gt,16,K[38]),Ie=h(Ie,ge,ie,te,d,23,K[39]),te=h(te,Ie,ge,ie,z,4,K[40]),ie=h(ie,te,Ie,ge,at,11,K[41]),ge=h(ge,ie,te,Ie,X,16,K[42]),Ie=h(Ie,ge,ie,te,Wt,23,K[43]),te=h(te,Ie,ge,ie,be,4,K[44]),ie=h(ie,te,Ie,ge,ut,11,K[45]),ge=h(ge,ie,te,Ie,Mt,16,K[46]),Ie=h(Ie,ge,ie,te,ot,23,K[47]),te=b(te,Ie,ge,ie,at,6,K[48]),ie=b(ie,te,Ie,ge,Gt,10,K[49]),ge=b(ge,ie,te,Ie,St,15,K[50]),Ie=b(Ie,ge,ie,te,Tt,21,K[51]),te=b(te,Ie,ge,ie,ut,6,K[52]),ie=b(ie,te,Ie,ge,X,10,K[53]),ge=b(ge,ie,te,Ie,d,15,K[54]),Ie=b(Ie,ge,ie,te,T,21,K[55]),te=b(te,Ie,ge,ie,ve,6,K[56]),ie=b(ie,te,Ie,ge,Mt,10,K[57]),ge=b(ge,ie,te,Ie,Wt,15,K[58]),Ie=b(Ie,ge,ie,te,z,21,K[59]),te=b(te,Ie,ge,ie,Ft,6,K[60]),ie=b(ie,te,Ie,ge,B,10,K[61]),ge=b(ge,ie,te,Ie,ot,15,K[62]),Ie=b(Ie,ge,ie,te,be,21,K[63]);I[0]=I[0]+te|0,I[1]=I[1]+Ie|0,I[2]=I[2]+ge|0,I[3]=I[3]+ie|0},_doFinalize:function(){var yt=this._data,O=yt.words,I=8*this._nDataBytes,at=8*yt.sigBytes;O[at>>>5]|=128<<24-at%32;var T=r.floor(I/4294967296);for(O[(at+64>>>9<<4)+15]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,O[(at+64>>>9<<4)+14]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,yt.sigBytes=4*(O.length+1),this._process(),yt=this._hash,O=yt.words,I=0;4>I;I++)at=O[I],O[I]=(at<<8|at>>>24)&16711935|(at<<24|at>>>8)&4278255360;return yt},clone:function(){var yt=_.clone.call(this);return yt._hash=this._hash.clone(),yt}}),C.MD5=_._createHelper(M),C.HmacMD5=_._createHmacHelper(M)})(Math),(function(){var r=p,b=r.lib,l=b.WordArray,o=b.Hasher,h=[],b=r.algo.SHA1=o.extend({_doReset:function(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(C,x){for(var _=this._hash.words,M=_[0],K=_[1],dt=_[2],yt=_[3],O=_[4],I=0;80>I;I++){if(16>I)h[I]=C[x+I]|0;else{var at=h[I-3]^h[I-8]^h[I-14]^h[I-16];h[I]=at<<1|at>>>31}at=(M<<5|M>>>27)+O+h[I],at=20>I?at+((K&dt|~K&yt)+1518500249):40>I?at+((K^dt^yt)+1859775393):60>I?at+((K&dt|K&yt|dt&yt)-1894007588):at+((K^dt^yt)-899497514),O=yt,yt=dt,dt=K<<30|K>>>2,K=M,M=at}_[0]=_[0]+M|0,_[1]=_[1]+K|0,_[2]=_[2]+dt|0,_[3]=_[3]+yt|0,_[4]=_[4]+O|0},_doFinalize:function(){var C=this._data,x=C.words,_=8*this._nDataBytes,M=8*C.sigBytes;return x[M>>>5]|=128<<24-M%32,x[(M+64>>>9<<4)+14]=Math.floor(_/4294967296),x[(M+64>>>9<<4)+15]=_,C.sigBytes=4*x.length,this._process(),this._hash},clone:function(){var C=o.clone.call(this);return C._hash=this._hash.clone(),C}});r.SHA1=o._createHelper(b),r.HmacSHA1=o._createHmacHelper(b)})(),(function(r){for(var l=p,I=l.lib,o=I.WordArray,h=I.Hasher,I=l.algo,b=[],C=[],x=function(T){return 4294967296*(T-(T|0))|0},_=2,M=0;64>M;){var K;t:{K=_;for(var dt=r.sqrt(K),yt=2;yt<=dt;yt++)if(!(K%yt)){K=!1;break t}K=!0}K&&(8>M&&(b[M]=x(r.pow(_,.5))),C[M]=x(r.pow(_,1/3)),M++),_++}var O=[],I=I.SHA256=h.extend({_doReset:function(){this._hash=new o.init(b.slice(0))},_doProcessBlock:function(at,T){for(var ot=this._hash.words,X=ot[0],Ft=ot[1],Tt=ot[2],Wt=ot[3],Gt=ot[4],ve=ot[5],be=ot[6],d=ot[7],B=0;64>B;B++){if(16>B)O[B]=at[T+B]|0;else{var ut=O[B-15],z=O[B-2];O[B]=((ut<<25|ut>>>7)^(ut<<14|ut>>>18)^ut>>>3)+O[B-7]+((z<<15|z>>>17)^(z<<13|z>>>19)^z>>>10)+O[B-16]}ut=d+((Gt<<26|Gt>>>6)^(Gt<<21|Gt>>>11)^(Gt<<7|Gt>>>25))+(Gt&ve^~Gt&be)+C[B]+O[B],z=((X<<30|X>>>2)^(X<<19|X>>>13)^(X<<10|X>>>22))+(X&Ft^X&Tt^Ft&Tt),d=be,be=ve,ve=Gt,Gt=Wt+ut|0,Wt=Tt,Tt=Ft,Ft=X,X=ut+z|0}ot[0]=ot[0]+X|0,ot[1]=ot[1]+Ft|0,ot[2]=ot[2]+Tt|0,ot[3]=ot[3]+Wt|0,ot[4]=ot[4]+Gt|0,ot[5]=ot[5]+ve|0,ot[6]=ot[6]+be|0,ot[7]=ot[7]+d|0},_doFinalize:function(){var at=this._data,T=at.words,ot=8*this._nDataBytes,X=8*at.sigBytes;return T[X>>>5]|=128<<24-X%32,T[(X+64>>>9<<4)+14]=r.floor(ot/4294967296),T[(X+64>>>9<<4)+15]=ot,at.sigBytes=4*T.length,this._process(),this._hash},clone:function(){var at=h.clone.call(this);return at._hash=this._hash.clone(),at}});l.SHA256=h._createHelper(I),l.HmacSHA256=h._createHmacHelper(I)})(Math),(function(){var r=p,l=r.lib.WordArray,h=r.algo,o=h.SHA256,h=h.SHA224=o.extend({_doReset:function(){this._hash=new l.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var b=o._doFinalize.call(this);return b.sigBytes-=4,b}});r.SHA224=o._createHelper(h),r.HmacSHA224=o._createHmacHelper(h)})(),(function(){function r(){return h.create.apply(h,arguments)}for(var l=p,o=l.lib.Hasher,C=l.x64,h=C.Word,b=C.WordArray,C=l.algo,x=[r(1116352408,3609767458),r(1899447441,602891725),r(3049323471,3964484399),r(3921009573,2173295548),r(961987163,4081628472),r(1508970993,3053834265),r(2453635748,2937671579),r(2870763221,3664609560),r(3624381080,2734883394),r(310598401,1164996542),r(607225278,1323610764),r(1426881987,3590304994),r(1925078388,4068182383),r(2162078206,991336113),r(2614888103,633803317),r(3248222580,3479774868),r(3835390401,2666613458),r(4022224774,944711139),r(264347078,2341262773),r(604807628,2007800933),r(770255983,1495990901),r(1249150122,1856431235),r(1555081692,3175218132),r(1996064986,2198950837),r(2554220882,3999719339),r(2821834349,766784016),r(2952996808,2566594879),r(3210313671,3203337956),r(3336571891,1034457026),r(3584528711,2466948901),r(113926993,3758326383),r(338241895,168717936),r(666307205,1188179964),r(773529912,1546045734),r(1294757372,1522805485),r(1396182291,2643833823),r(1695183700,2343527390),r(1986661051,1014477480),r(2177026350,1206759142),r(2456956037,344077627),r(2730485921,1290863460),r(2820302411,3158454273),r(3259730800,3505952657),r(3345764771,106217008),r(3516065817,3606008344),r(3600352804,1432725776),r(4094571909,1467031594),r(275423344,851169720),r(430227734,3100823752),r(506948616,1363258195),r(659060556,3750685593),r(883997877,3785050280),r(958139571,3318307427),r(1322822218,3812723403),r(1537002063,2003034995),r(1747873779,3602036899),r(1955562222,1575990012),r(2024104815,1125592928),r(2227730452,2716904306),r(2361852424,442776044),r(2428436474,593698344),r(2756734187,3733110249),r(3204031479,2999351573),r(3329325298,3815920427),r(3391569614,3928383900),r(3515267271,566280711),r(3940187606,3454069534),r(4118630271,4000239992),r(116418474,1914138554),r(174292421,2731055270),r(289380356,3203993006),r(460393269,320620315),r(685471733,587496836),r(852142971,1086792851),r(1017036298,365543100),r(1126000580,2618297676),r(1288033470,3409855158),r(1501505948,4234509866),r(1607167915,987167468),r(1816402316,1246189591)],_=[],M=0;80>M;M++)_[M]=r();C=C.SHA512=o.extend({_doReset:function(){this._hash=new b.init([new h.init(1779033703,4089235720),new h.init(3144134277,2227873595),new h.init(1013904242,4271175723),new h.init(2773480762,1595750129),new h.init(1359893119,2917565137),new h.init(2600822924,725511199),new h.init(528734635,4215389547),new h.init(1541459225,327033209)])},_doProcessBlock:function(K,dt){for(var Ft=this._hash.words,yt=Ft[0],O=Ft[1],I=Ft[2],at=Ft[3],T=Ft[4],ot=Ft[5],X=Ft[6],Ft=Ft[7],Tt=yt.high,Wt=yt.low,Gt=O.high,ve=O.low,be=I.high,d=I.low,B=at.high,ut=at.low,z=T.high,St=T.low,Mt=ot.high,te=ot.low,ie=X.high,ge=X.low,Ie=Ft.high,br=Ft.low,xr=Tt,Fr=Wt,Vr=Gt,Ur=ve,xn=be,pn=d,bi=B,Ns=ut,Es=z,bs=St,Is=Mt,fn=te,Jn=ie,Nn=ge,Pt=Ie,ps=br,yn=0;80>yn;yn++){var vs=_[yn];if(16>yn)var Un=vs.high=K[dt+2*yn]|0,mn=vs.low=K[dt+2*yn+1]|0;else{var Un=_[yn-15],mn=Un.high,ci=Un.low,Un=(mn>>>1|ci<<31)^(mn>>>8|ci<<24)^mn>>>7,ci=(ci>>>1|mn<<31)^(ci>>>8|mn<<24)^(ci>>>7|mn<<25),js=_[yn-2],mn=js.high,Ln=js.low,js=(mn>>>19|Ln<<13)^(mn<<3|Ln>>>29)^mn>>>6,Ln=(Ln>>>19|mn<<13)^(Ln<<3|mn>>>29)^(Ln>>>6|mn<<26),mn=_[yn-7],Kr=mn.high,ji=_[yn-16],hi=ji.high,ji=ji.low,mn=ci+mn.low,Un=Un+Kr+(mn>>>0<ci>>>0?1:0),mn=mn+Ln,Un=Un+js+(mn>>>0<Ln>>>0?1:0),mn=mn+ji,Un=Un+hi+(mn>>>0<ji>>>0?1:0);vs.high=Un,vs.low=mn}var Kr=Es&Is^~Es&Jn,ji=bs&fn^~bs&Nn,vs=xr&Vr^xr&xn^Vr&xn,mo=Fr&Ur^Fr&pn^Ur&pn,ci=(xr>>>28|Fr<<4)^(xr<<30|Fr>>>2)^(xr<<25|Fr>>>7),js=(Fr>>>28|xr<<4)^(Fr<<30|xr>>>2)^(Fr<<25|xr>>>7),Ln=x[yn],Eo=Ln.high,qa=Ln.low,Ln=ps+((bs>>>14|Es<<18)^(bs>>>18|Es<<14)^(bs<<23|Es>>>9)),hi=Pt+((Es>>>14|bs<<18)^(Es>>>18|bs<<14)^(Es<<23|bs>>>9))+(Ln>>>0<ps>>>0?1:0),Ln=Ln+ji,hi=hi+Kr+(Ln>>>0<ji>>>0?1:0),Ln=Ln+qa,hi=hi+Eo+(Ln>>>0<qa>>>0?1:0),Ln=Ln+mn,hi=hi+Un+(Ln>>>0<mn>>>0?1:0),mn=js+mo,vs=ci+vs+(mn>>>0<js>>>0?1:0),Pt=Jn,ps=Nn,Jn=Is,Nn=fn,Is=Es,fn=bs,bs=Ns+Ln|0,Es=bi+hi+(bs>>>0<Ns>>>0?1:0)|0,bi=xn,Ns=pn,xn=Vr,pn=Ur,Vr=xr,Ur=Fr,Fr=Ln+mn|0,xr=hi+vs+(Fr>>>0<Ln>>>0?1:0)|0}Wt=yt.low=Wt+Fr,yt.high=Tt+xr+(Wt>>>0<Fr>>>0?1:0),ve=O.low=ve+Ur,O.high=Gt+Vr+(ve>>>0<Ur>>>0?1:0),d=I.low=d+pn,I.high=be+xn+(d>>>0<pn>>>0?1:0),ut=at.low=ut+Ns,at.high=B+bi+(ut>>>0<Ns>>>0?1:0),St=T.low=St+bs,T.high=z+Es+(St>>>0<bs>>>0?1:0),te=ot.low=te+fn,ot.high=Mt+Is+(te>>>0<fn>>>0?1:0),ge=X.low=ge+Nn,X.high=ie+Jn+(ge>>>0<Nn>>>0?1:0),br=Ft.low=br+ps,Ft.high=Ie+Pt+(br>>>0<ps>>>0?1:0)},_doFinalize:function(){var K=this._data,dt=K.words,yt=8*this._nDataBytes,O=8*K.sigBytes;return dt[O>>>5]|=128<<24-O%32,dt[(O+128>>>10<<5)+30]=Math.floor(yt/4294967296),dt[(O+128>>>10<<5)+31]=yt,K.sigBytes=4*dt.length,this._process(),this._hash.toX32()},clone:function(){var K=o.clone.call(this);return K._hash=this._hash.clone(),K},blockSize:32}),l.SHA512=o._createHelper(C),l.HmacSHA512=o._createHmacHelper(C)})(),(function(){var r=p,b=r.x64,l=b.Word,o=b.WordArray,b=r.algo,h=b.SHA512,b=b.SHA384=h.extend({_doReset:function(){this._hash=new o.init([new l.init(3418070365,3238371032),new l.init(1654270250,914150663),new l.init(2438529370,812702999),new l.init(355462360,4144912697),new l.init(1731405415,4290775857),new l.init(2394180231,1750603025),new l.init(3675008525,1694076839),new l.init(1203062813,3204075428)])},_doFinalize:function(){var C=h._doFinalize.call(this);return C.sigBytes-=16,C}});r.SHA384=h._createHelper(b),r.HmacSHA384=h._createHmacHelper(b)})(),(function(){var r=p,K=r.lib,l=K.WordArray,o=K.Hasher,K=r.algo,h=l.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),b=l.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),C=l.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),x=l.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),_=l.create([0,1518500249,1859775393,2400959708,2840853838]),M=l.create([1352829926,1548603684,1836072691,2053994217,0]),K=K.RIPEMD160=o.extend({_doReset:function(){this._hash=l.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(dt,yt){for(var O=0;16>O;O++){var I=yt+O,at=dt[I];dt[I]=(at<<8|at>>>24)&16711935|(at<<24|at>>>8)&4278255360}var I=this._hash.words,at=_.words,T=M.words,ot=h.words,X=b.words,Ft=C.words,Tt=x.words,Wt,Gt,ve,be,d,B,ut,z,St,Mt;B=Wt=I[0],ut=Gt=I[1],z=ve=I[2],St=be=I[3],Mt=d=I[4];for(var te,O=0;80>O;O+=1)te=Wt+dt[yt+ot[O]]|0,te=16>O?te+((Gt^ve^be)+at[0]):32>O?te+((Gt&ve|~Gt&be)+at[1]):48>O?te+(((Gt|~ve)^be)+at[2]):64>O?te+((Gt&be|ve&~be)+at[3]):te+((Gt^(ve|~be))+at[4]),te|=0,te=te<<Ft[O]|te>>>32-Ft[O],te=te+d|0,Wt=d,d=be,be=ve<<10|ve>>>22,ve=Gt,Gt=te,te=B+dt[yt+X[O]]|0,te=16>O?te+((ut^(z|~St))+T[0]):32>O?te+((ut&St|z&~St)+T[1]):48>O?te+(((ut|~z)^St)+T[2]):64>O?te+((ut&z|~ut&St)+T[3]):te+((ut^z^St)+T[4]),te|=0,te=te<<Tt[O]|te>>>32-Tt[O],te=te+Mt|0,B=Mt,Mt=St,St=z<<10|z>>>22,z=ut,ut=te;te=I[1]+ve+St|0,I[1]=I[2]+be+Mt|0,I[2]=I[3]+d+B|0,I[3]=I[4]+Wt+ut|0,I[4]=I[0]+Gt+z|0,I[0]=te},_doFinalize:function(){var dt=this._data,yt=dt.words,O=8*this._nDataBytes,I=8*dt.sigBytes;for(yt[I>>>5]|=128<<24-I%32,yt[(I+64>>>9<<4)+14]=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360,dt.sigBytes=4*(yt.length+1),this._process(),dt=this._hash,yt=dt.words,O=0;5>O;O++)I=yt[O],yt[O]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360;return dt},clone:function(){var dt=o.clone.call(this);return dt._hash=this._hash.clone(),dt}});r.RIPEMD160=o._createHelper(K),r.HmacRIPEMD160=o._createHmacHelper(K)})(Math),(function(){var r=p,l=r.enc.Utf8;r.algo.HMAC=r.lib.Base.extend({init:function(o,h){o=this._hasher=new o.init,typeof h=="string"&&(h=l.parse(h));var b=o.blockSize,C=4*b;h.sigBytes>C&&(h=o.finalize(h)),h.clamp();for(var x=this._oKey=h.clone(),_=this._iKey=h.clone(),M=x.words,K=_.words,dt=0;dt<b;dt++)M[dt]^=1549556828,K[dt]^=909522486;x.sigBytes=_.sigBytes=C,this.reset()},reset:function(){var o=this._hasher;o.reset(),o.update(this._iKey)},update:function(o){return this._hasher.update(o),this},finalize:function(o){var h=this._hasher;return o=h.finalize(o),h.reset(),h.finalize(this._oKey.clone().concat(o))}})})(),(function(){var r=p,h=r.lib,l=h.Base,o=h.WordArray,h=r.algo,b=h.HMAC,C=h.PBKDF2=l.extend({cfg:l.extend({keySize:4,hasher:h.SHA1,iterations:1}),init:function(x){this.cfg=this.cfg.extend(x)},compute:function(x,_){for(var at=this.cfg,M=b.create(at.hasher,x),K=o.create(),dt=o.create([1]),yt=K.words,O=dt.words,I=at.keySize,at=at.iterations;yt.length<I;){var T=M.update(_).finalize(dt);M.reset();for(var ot=T.words,X=ot.length,Ft=T,Tt=1;Tt<at;Tt++){Ft=M.finalize(Ft),M.reset();for(var Wt=Ft.words,Gt=0;Gt<X;Gt++)ot[Gt]^=Wt[Gt]}K.concat(T),O[0]++}return K.sigBytes=4*I,K}});r.PBKDF2=function(x,_,M){return C.create(M).compute(x,_)}})();var y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g="=";function E(r){var l,o,h="";for(l=0;l+3<=r.length;l+=3)o=parseInt(r.substring(l,l+3),16),h+=y.charAt(o>>6)+y.charAt(o&63);if(l+1==r.length?(o=parseInt(r.substring(l,l+1),16),h+=y.charAt(o<<2)):l+2==r.length&&(o=parseInt(r.substring(l,l+2),16),h+=y.charAt(o>>2)+y.charAt((o&3)<<4)),g)for(;(h.length&3)>0;)h+=g;return h}function m(r){var l="",o,h=0,b,C;for(o=0;o<r.length&&r.charAt(o)!=g;++o)C=y.indexOf(r.charAt(o)),!(C<0)&&(h==0?(l+=lt(C>>2),b=C&3,h=1):h==1?(l+=lt(b<<2|C>>4),b=C&15,h=2):h==2?(l+=lt(b),l+=lt(C>>2),b=C&3,h=3):(l+=lt(b<<2|C>>4),l+=lt(C&15),h=0));return h==1&&(l+=lt(b<<2)),l}function D(r){var l=m(r),o,h=new Array;for(o=0;2*o<l.length;++o)h[o]=parseInt(l.substring(2*o,2*o+2),16);return h}var a,H=0xdeadbeefcafe,W=(H&16777215)==15715070;function w(r,l,o){r!=null&&(typeof r=="number"?this.fromNumber(r,l,o):l==null&&typeof r!="string"?this.fromString(r,256):this.fromString(r,l))}function U(){return new w(null)}function tt(r,l,o,h,b,C){for(;--C>=0;){var x=l*this[r++]+o[h]+b;b=Math.floor(x/67108864),o[h++]=x&67108863}return b}function J(r,l,o,h,b,C){for(var x=l&32767,_=l>>15;--C>=0;){var M=this[r]&32767,K=this[r++]>>15,dt=_*M+K*x;M=x*M+((dt&32767)<<15)+o[h]+(b&1073741823),b=(M>>>30)+(dt>>>15)+_*K+(b>>>30),o[h++]=M&1073741823}return b}function N(r,l,o,h,b,C){for(var x=l&16383,_=l>>14;--C>=0;){var M=this[r]&16383,K=this[r++]>>14,dt=_*M+K*x;M=x*M+((dt&16383)<<14)+o[h]+b,b=(M>>28)+(dt>>14)+_*K,o[h++]=M&268435455}return b}W&&e.appName=="Microsoft Internet Explorer"?(w.prototype.am=J,a=30):W&&e.appName!="Netscape"?(w.prototype.am=tt,a=26):(w.prototype.am=N,a=28),w.prototype.DB=a,w.prototype.DM=(1<<a)-1,w.prototype.DV=1<<a;var Q=52;w.prototype.FV=Math.pow(2,Q),w.prototype.F1=Q-a,w.prototype.F2=2*a-Q;var it="0123456789abcdefghijklmnopqrstuvwxyz",q=new Array,L,V;for(L=48,V=0;V<=9;++V)q[L++]=V;for(L=97,V=10;V<36;++V)q[L++]=V;for(L=65,V=10;V<36;++V)q[L++]=V;function lt(r){return it.charAt(r)}function mt(r,l){var o=q[r.charCodeAt(l)];return o??-1}function Rt(r){for(var l=this.t-1;l>=0;--l)r[l]=this[l];r.t=this.t,r.s=this.s}function Et(r){this.t=1,this.s=r<0?-1:0,r>0?this[0]=r:r<-1?this[0]=r+this.DV:this.t=0}function vt(r){var l=U();return l.fromInt(r),l}function wt(r,l){var o;if(l==16)o=4;else if(l==8)o=3;else if(l==256)o=8;else if(l==2)o=1;else if(l==32)o=5;else if(l==4)o=2;else{this.fromRadix(r,l);return}this.t=0,this.s=0;for(var h=r.length,b=!1,C=0;--h>=0;){var x=o==8?r[h]&255:mt(r,h);if(x<0){r.charAt(h)=="-"&&(b=!0);continue}b=!1,C==0?this[this.t++]=x:C+o>this.DB?(this[this.t-1]|=(x&(1<<this.DB-C)-1)<<C,this[this.t++]=x>>this.DB-C):this[this.t-1]|=x<<C,C+=o,C>=this.DB&&(C-=this.DB)}o==8&&r[0]&128&&(this.s=-1,C>0&&(this[this.t-1]|=(1<<this.DB-C)-1<<C)),this.clamp(),b&&w.ZERO.subTo(this,this)}function Xt(){for(var r=this.s&this.DM;this.t>0&&this[this.t-1]==r;)--this.t}function ee(r){if(this.s<0)return"-"+this.negate().toString(r);var l;if(r==16)l=4;else if(r==8)l=3;else if(r==2)l=1;else if(r==32)l=5;else if(r==4)l=2;else return this.toRadix(r);var o=(1<<l)-1,h,b=!1,C="",x=this.t,_=this.DB-x*this.DB%l;if(x-- >0)for(_<this.DB&&(h=this[x]>>_)>0&&(b=!0,C=lt(h));x>=0;)_<l?(h=(this[x]&(1<<_)-1)<<l-_,h|=this[--x]>>(_+=this.DB-l)):(h=this[x]>>(_-=l)&o,_<=0&&(_+=this.DB,--x)),h>0&&(b=!0),b&&(C+=lt(h));return b?C:"0"}function ne(){var r=U();return w.ZERO.subTo(this,r),r}function oe(){return this.s<0?this.negate():this}function Le(r){var l=this.s-r.s;if(l!=0)return l;var o=this.t;if(l=o-r.t,l!=0)return this.s<0?-l:l;for(;--o>=0;)if((l=this[o]-r[o])!=0)return l;return 0}function de(r){var l=1,o;return(o=r>>>16)!=0&&(r=o,l+=16),(o=r>>8)!=0&&(r=o,l+=8),(o=r>>4)!=0&&(r=o,l+=4),(o=r>>2)!=0&&(r=o,l+=2),(o=r>>1)!=0&&(r=o,l+=1),l}function He(){return this.t<=0?0:this.DB*(this.t-1)+de(this[this.t-1]^this.s&this.DM)}function ze(r,l){var o;for(o=this.t-1;o>=0;--o)l[o+r]=this[o];for(o=r-1;o>=0;--o)l[o]=0;l.t=this.t+r,l.s=this.s}function Te(r,l){for(var o=r;o<this.t;++o)l[o-r]=this[o];l.t=Math.max(this.t-r,0),l.s=this.s}function Je(r,l){var o=r%this.DB,h=this.DB-o,b=(1<<h)-1,C=Math.floor(r/this.DB),x=this.s<<o&this.DM,_;for(_=this.t-1;_>=0;--_)l[_+C+1]=this[_]>>h|x,x=(this[_]&b)<<o;for(_=C-1;_>=0;--_)l[_]=0;l[C]=x,l.t=this.t+C+1,l.s=this.s,l.clamp()}function Xe(r,l){l.s=this.s;var o=Math.floor(r/this.DB);if(o>=this.t){l.t=0;return}var h=r%this.DB,b=this.DB-h,C=(1<<h)-1;l[0]=this[o]>>h;for(var x=o+1;x<this.t;++x)l[x-o-1]|=(this[x]&C)<<b,l[x-o]=this[x]>>h;h>0&&(l[this.t-o-1]|=(this.s&C)<<b),l.t=this.t-o,l.clamp()}function Ae(r,l){for(var o=0,h=0,b=Math.min(r.t,this.t);o<b;)h+=this[o]-r[o],l[o++]=h&this.DM,h>>=this.DB;if(r.t<this.t){for(h-=r.s;o<this.t;)h+=this[o],l[o++]=h&this.DM,h>>=this.DB;h+=this.s}else{for(h+=this.s;o<r.t;)h-=r[o],l[o++]=h&this.DM,h>>=this.DB;h-=r.s}l.s=h<0?-1:0,h<-1?l[o++]=this.DV+h:h>0&&(l[o++]=h),l.t=o,l.clamp()}function _e(r,l){var o=this.abs(),h=r.abs(),b=o.t;for(l.t=b+h.t;--b>=0;)l[b]=0;for(b=0;b<h.t;++b)l[b+o.t]=o.am(0,h[b],l,b,0,o.t);l.s=0,l.clamp(),this.s!=r.s&&w.ZERO.subTo(l,l)}function Qe(r){for(var l=this.abs(),o=r.t=2*l.t;--o>=0;)r[o]=0;for(o=0;o<l.t-1;++o){var h=l.am(o,l[o],r,2*o,0,1);(r[o+l.t]+=l.am(o+1,2*l[o],r,2*o+1,h,l.t-o-1))>=l.DV&&(r[o+l.t]-=l.DV,r[o+l.t+1]=1)}r.t>0&&(r[r.t-1]+=l.am(o,l[o],r,2*o,0,1)),r.s=0,r.clamp()}function qe(r,l,o){var h=r.abs();if(!(h.t<=0)){var b=this.abs();if(b.t<h.t){l?.fromInt(0),o!=null&&this.copyTo(o);return}o==null&&(o=U());var C=U(),x=this.s,_=r.s,M=this.DB-de(h[h.t-1]);M>0?(h.lShiftTo(M,C),b.lShiftTo(M,o)):(h.copyTo(C),b.copyTo(o));var K=C.t,dt=C[K-1];if(dt!=0){var yt=dt*(1<<this.F1)+(K>1?C[K-2]>>this.F2:0),O=this.FV/yt,I=(1<<this.F1)/yt,at=1<<this.F2,T=o.t,ot=T-K,X=l??U();for(C.dlShiftTo(ot,X),o.compareTo(X)>=0&&(o[o.t++]=1,o.subTo(X,o)),w.ONE.dlShiftTo(K,X),X.subTo(C,C);C.t<K;)C[C.t++]=0;for(;--ot>=0;){var Ft=o[--T]==dt?this.DM:Math.floor(o[T]*O+(o[T-1]+at)*I);if((o[T]+=C.am(0,Ft,o,ot,0,K))<Ft)for(C.dlShiftTo(ot,X),o.subTo(X,o);o[T]<--Ft;)o.subTo(X,o)}l!=null&&(o.drShiftTo(K,l),x!=_&&w.ZERO.subTo(l,l)),o.t=K,o.clamp(),M>0&&o.rShiftTo(M,o),x<0&&w.ZERO.subTo(o,o)}}}function Ze(r){var l=U();return this.abs().divRemTo(r,null,l),this.s<0&&l.compareTo(w.ZERO)>0&&r.subTo(l,l),l}function Ar(r){this.m=r}function Or(r){return r.s<0||r.compareTo(this.m)>=0?r.mod(this.m):r}function Cr(r){return r}function et(r){r.divRemTo(this.m,null,r)}function k(r,l,o){r.multiplyTo(l,o),this.reduce(o)}function Z(r,l){r.squareTo(l),this.reduce(l)}Ar.prototype.convert=Or,Ar.prototype.revert=Cr,Ar.prototype.reduce=et,Ar.prototype.mulTo=k,Ar.prototype.sqrTo=Z;function se(){if(this.t<1)return 0;var r=this[0];if(!(r&1))return 0;var l=r&3;return l=l*(2-(r&15)*l)&15,l=l*(2-(r&255)*l)&255,l=l*(2-((r&65535)*l&65535))&65535,l=l*(2-r*l%this.DV)%this.DV,l>0?this.DV-l:-l}function me(r){this.m=r,this.mp=r.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<r.DB-15)-1,this.mt2=2*r.t}function rr(r){var l=U();return r.abs().dlShiftTo(this.m.t,l),l.divRemTo(this.m,null,l),r.s<0&&l.compareTo(w.ZERO)>0&&this.m.subTo(l,l),l}function dr(r){var l=U();return r.copyTo(l),this.reduce(l),l}function mr(r){for(;r.t<=this.mt2;)r[r.t++]=0;for(var l=0;l<this.m.t;++l){var o=r[l]&32767,h=o*this.mpl+((o*this.mph+(r[l]>>15)*this.mpl&this.um)<<15)&r.DM;for(o=l+this.m.t,r[o]+=this.m.am(0,h,r,l,0,this.m.t);r[o]>=r.DV;)r[o]-=r.DV,r[++o]++}r.clamp(),r.drShiftTo(this.m.t,r),r.compareTo(this.m)>=0&&r.subTo(this.m,r)}function ur(r,l){r.squareTo(l),this.reduce(l)}function er(r,l,o){r.multiplyTo(l,o),this.reduce(o)}me.prototype.convert=rr,me.prototype.revert=dr,me.prototype.reduce=mr,me.prototype.mulTo=er,me.prototype.sqrTo=ur;function Gr(){return(this.t>0?this[0]&1:this.s)==0}function Lr(r,l){if(r>4294967295||r<1)return w.ONE;var o=U(),h=U(),b=l.convert(this),C=de(r)-1;for(b.copyTo(o);--C>=0;)if(l.sqrTo(o,h),(r&1<<C)>0)l.mulTo(h,b,o);else{var x=o;o=h,h=x}return l.revert(o)}function Sr(r,l){var o;return r<256||l.isEven()?o=new Ar(l):o=new me(l),this.exp(r,o)}w.prototype.copyTo=Rt,w.prototype.fromInt=Et,w.prototype.fromString=wt,w.prototype.clamp=Xt,w.prototype.dlShiftTo=ze,w.prototype.drShiftTo=Te,w.prototype.lShiftTo=Je,w.prototype.rShiftTo=Xe,w.prototype.subTo=Ae,w.prototype.multiplyTo=_e,w.prototype.squareTo=Qe,w.prototype.divRemTo=qe,w.prototype.invDigit=se,w.prototype.isEven=Gr,w.prototype.exp=Lr,w.prototype.toString=ee,w.prototype.negate=ne,w.prototype.abs=oe,w.prototype.compareTo=Le,w.prototype.bitLength=He,w.prototype.mod=Ze,w.prototype.modPowInt=Sr,w.ZERO=vt(0),w.ONE=vt(1);function j(){var r=U();return this.copyTo(r),r}function f(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function S(){return this.t==0?this.s:this[0]<<24>>24}function Y(){return this.t==0?this.s:this[0]<<16>>16}function It(r){return Math.floor(Math.LN2*this.DB/Math.log(r))}function Ot(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function nt(r){if(r==null&&(r=10),this.signum()==0||r<2||r>36)return"0";var l=this.chunkSize(r),o=Math.pow(r,l),h=vt(o),b=U(),C=U(),x="";for(this.divRemTo(h,b,C);b.signum()>0;)x=(o+C.intValue()).toString(r).substr(1)+x,b.divRemTo(h,b,C);return C.intValue().toString(r)+x}function zt(r,l){this.fromInt(0),l==null&&(l=10);for(var o=this.chunkSize(l),h=Math.pow(l,o),b=!1,C=0,x=0,_=0;_<r.length;++_){var M=mt(r,_);if(M<0){r.charAt(_)=="-"&&this.signum()==0&&(b=!0);continue}x=l*x+M,++C>=o&&(this.dMultiply(h),this.dAddOffset(x,0),C=0,x=0)}C>0&&(this.dMultiply(Math.pow(l,C)),this.dAddOffset(x,0)),b&&w.ZERO.subTo(this,this)}function jt(r,l,o){if(typeof l=="number")if(r<2)this.fromInt(1);else for(this.fromNumber(r,o),this.testBit(r-1)||this.bitwiseTo(w.ONE.shiftLeft(r-1),Dt,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(l);)this.dAddOffset(2,0),this.bitLength()>r&&this.subTo(w.ONE.shiftLeft(r-1),this);else{var h=new Array,b=r&7;h.length=(r>>3)+1,l.nextBytes(h),b>0?h[0]&=(1<<b)-1:h[0]=0,this.fromString(h,256)}}function Se(){var r=this.t,l=new Array;l[0]=this.s;var o=this.DB-r*this.DB%8,h,b=0;if(r-- >0)for(o<this.DB&&(h=this[r]>>o)!=(this.s&this.DM)>>o&&(l[b++]=h|this.s<<this.DB-o);r>=0;)o<8?(h=(this[r]&(1<<o)-1)<<8-o,h|=this[--r]>>(o+=this.DB-8)):(h=this[r]>>(o-=8)&255,o<=0&&(o+=this.DB,--r)),h&128&&(h|=-256),b==0&&(this.s&128)!=(h&128)&&++b,(b>0||h!=this.s)&&(l[b++]=h);return l}function _t(r){return this.compareTo(r)==0}function gt(r){return this.compareTo(r)<0?this:r}function rt(r){return this.compareTo(r)>0?this:r}function F(r,l,o){var h,b,C=Math.min(r.t,this.t);for(h=0;h<C;++h)o[h]=l(this[h],r[h]);if(r.t<this.t){for(b=r.s&this.DM,h=C;h<this.t;++h)o[h]=l(this[h],b);o.t=this.t}else{for(b=this.s&this.DM,h=C;h<r.t;++h)o[h]=l(b,r[h]);o.t=r.t}o.s=l(this.s,r.s),o.clamp()}function st(r,l){return r&l}function At(r){var l=U();return this.bitwiseTo(r,st,l),l}function Dt(r,l){return r|l}function Nt(r){var l=U();return this.bitwiseTo(r,Dt,l),l}function Yt(r,l){return r^l}function De(r){var l=U();return this.bitwiseTo(r,Yt,l),l}function Qt(r,l){return r&~l}function Ee(r){var l=U();return this.bitwiseTo(r,Qt,l),l}function Be(){for(var r=U(),l=0;l<this.t;++l)r[l]=this.DM&~this[l];return r.t=this.t,r.s=~this.s,r}function sr(r){var l=U();return r<0?this.rShiftTo(-r,l):this.lShiftTo(r,l),l}function P(r){var l=U();return r<0?this.lShiftTo(-r,l):this.rShiftTo(r,l),l}function le(r){if(r==0)return-1;var l=0;return r&65535||(r>>=16,l+=16),r&255||(r>>=8,l+=8),r&15||(r>>=4,l+=4),r&3||(r>>=2,l+=2),r&1||++l,l}function Vt(){for(var r=0;r<this.t;++r)if(this[r]!=0)return r*this.DB+le(this[r]);return this.s<0?this.t*this.DB:-1}function pe(r){for(var l=0;r!=0;)r&=r-1,++l;return l}function kt(){for(var r=0,l=this.s&this.DM,o=0;o<this.t;++o)r+=pe(this[o]^l);return r}function re(r){var l=Math.floor(r/this.DB);return l>=this.t?this.s!=0:(this[l]&1<<r%this.DB)!=0}function $e(r,l){var o=w.ONE.shiftLeft(r);return this.bitwiseTo(o,l,o),o}function Ce(r){return this.changeBit(r,Dt)}function Pe(r){return this.changeBit(r,Qt)}function Ne(r){return this.changeBit(r,Yt)}function tr(r,l){for(var o=0,h=0,b=Math.min(r.t,this.t);o<b;)h+=this[o]+r[o],l[o++]=h&this.DM,h>>=this.DB;if(r.t<this.t){for(h+=r.s;o<this.t;)h+=this[o],l[o++]=h&this.DM,h>>=this.DB;h+=this.s}else{for(h+=this.s;o<r.t;)h+=r[o],l[o++]=h&this.DM,h>>=this.DB;h+=r.s}l.s=h<0?-1:0,h>0?l[o++]=h:h<-1&&(l[o++]=this.DV+h),l.t=o,l.clamp()}function lr(r){var l=U();return this.addTo(r,l),l}function ar(r){var l=U();return this.subTo(r,l),l}function wr(r){var l=U();return this.multiplyTo(r,l),l}function jr(){var r=U();return this.squareTo(r),r}function ln(r){var l=U();return this.divRemTo(r,l,null),l}function cn(r){var l=U();return this.divRemTo(r,null,l),l}function qr(r){var l=U(),o=U();return this.divRemTo(r,l,o),new Array(l,o)}function Er(r){this[this.t]=this.am(0,r-1,this,0,0,this.t),++this.t,this.clamp()}function Tr(r,l){if(r!=0){for(;this.t<=l;)this[this.t++]=0;for(this[l]+=r;this[l]>=this.DV;)this[l]-=this.DV,++l>=this.t&&(this[this.t++]=0),++this[l]}}function gn(){}function Kn(r){return r}function tn(r,l,o){r.multiplyTo(l,o)}function Wn(r,l){r.squareTo(l)}gn.prototype.convert=Kn,gn.prototype.revert=Kn,gn.prototype.mulTo=tn,gn.prototype.sqrTo=Wn;function Br(r){return this.exp(r,new gn)}function bn(r,l,o){var h=Math.min(this.t+r.t,l);for(o.s=0,o.t=h;h>0;)o[--h]=0;var b;for(b=o.t-this.t;h<b;++h)o[h+this.t]=this.am(0,r[h],o,h,0,this.t);for(b=Math.min(r.t,l);h<b;++h)this.am(0,r[h],o,h,0,l-h);o.clamp()}function as(r,l,o){--l;var h=o.t=this.t+r.t-l;for(o.s=0;--h>=0;)o[h]=0;for(h=Math.max(l-this.t,0);h<r.t;++h)o[this.t+h-l]=this.am(l-h,r[h],o,0,0,this.t+h-l);o.clamp(),o.drShiftTo(1,o)}function _n(r){this.r2=U(),this.q3=U(),w.ONE.dlShiftTo(2*r.t,this.r2),this.mu=this.r2.divide(r),this.m=r}function ks(r){if(r.s<0||r.t>2*this.m.t)return r.mod(this.m);if(r.compareTo(this.m)<0)return r;var l=U();return r.copyTo(l),this.reduce(l),l}function Zr(r){return r}function Ss(r){for(r.drShiftTo(this.m.t-1,this.r2),r.t>this.m.t+1&&(r.t=this.m.t+1,r.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);r.compareTo(this.r2)<0;)r.dAddOffset(1,this.m.t+1);for(r.subTo(this.r2,r);r.compareTo(this.m)>=0;)r.subTo(this.m,r)}function Ps(r,l){r.squareTo(l),this.reduce(l)}function Xs(r,l,o){r.multiplyTo(l,o),this.reduce(o)}_n.prototype.convert=ks,_n.prototype.revert=Zr,_n.prototype.reduce=Ss,_n.prototype.mulTo=Xs,_n.prototype.sqrTo=Ps;function qs(r,l){var o=r.bitLength(),h,b=vt(1),C;if(o<=0)return b;o<18?h=1:o<48?h=3:o<144?h=4:o<768?h=5:h=6,o<8?C=new Ar(l):l.isEven()?C=new _n(l):C=new me(l);var x=new Array,_=3,M=h-1,K=(1<<h)-1;if(x[1]=C.convert(this),h>1){var dt=U();for(C.sqrTo(x[1],dt);_<=K;)x[_]=U(),C.mulTo(dt,x[_-2],x[_]),_+=2}var yt=r.t-1,O,I=!0,at=U(),T;for(o=de(r[yt])-1;yt>=0;){for(o>=M?O=r[yt]>>o-M&K:(O=(r[yt]&(1<<o+1)-1)<<M-o,yt>0&&(O|=r[yt-1]>>this.DB+o-M)),_=h;!(O&1);)O>>=1,--_;if((o-=_)<0&&(o+=this.DB,--yt),I)x[O].copyTo(b),I=!1;else{for(;_>1;)C.sqrTo(b,at),C.sqrTo(at,b),_-=2;_>0?C.sqrTo(b,at):(T=b,b=at,at=T),C.mulTo(at,x[O],b)}for(;yt>=0&&!(r[yt]&1<<o);)C.sqrTo(b,at),T=b,b=at,at=T,--o<0&&(o=this.DB-1,--yt)}return C.revert(b)}function os(r){var l=this.s<0?this.negate():this.clone(),o=r.s<0?r.negate():r.clone();if(l.compareTo(o)<0){var h=l;l=o,o=h}var b=l.getLowestSetBit(),C=o.getLowestSetBit();if(C<0)return l;for(b<C&&(C=b),C>0&&(l.rShiftTo(C,l),o.rShiftTo(C,o));l.signum()>0;)(b=l.getLowestSetBit())>0&&l.rShiftTo(b,l),(b=o.getLowestSetBit())>0&&o.rShiftTo(b,o),l.compareTo(o)>=0?(l.subTo(o,l),l.rShiftTo(1,l)):(o.subTo(l,o),o.rShiftTo(1,o));return C>0&&o.lShiftTo(C,o),o}function In(r){if(r<=0)return 0;var l=this.DV%r,o=this.s<0?r-1:0;if(this.t>0)if(l==0)o=this[0]%r;else for(var h=this.t-1;h>=0;--h)o=(l*o+this[h])%r;return o}function Si(r){var l=r.isEven();if(this.isEven()&&l||r.signum()==0)return w.ZERO;for(var o=r.clone(),h=this.clone(),b=vt(1),C=vt(0),x=vt(0),_=vt(1);o.signum()!=0;){for(;o.isEven();)o.rShiftTo(1,o),l?((!b.isEven()||!C.isEven())&&(b.addTo(this,b),C.subTo(r,C)),b.rShiftTo(1,b)):C.isEven()||C.subTo(r,C),C.rShiftTo(1,C);for(;h.isEven();)h.rShiftTo(1,h),l?((!x.isEven()||!_.isEven())&&(x.addTo(this,x),_.subTo(r,_)),x.rShiftTo(1,x)):_.isEven()||_.subTo(r,_),_.rShiftTo(1,_);o.compareTo(h)>=0?(o.subTo(h,o),l&&b.subTo(x,b),C.subTo(_,C)):(h.subTo(o,h),l&&x.subTo(b,x),_.subTo(C,_))}if(h.compareTo(w.ONE)!=0)return w.ZERO;if(_.compareTo(r)>=0)return _.subtract(r);if(_.signum()<0)_.addTo(r,_);else return _;return _.signum()<0?_.add(r):_}var Xn=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],ls=(1<<26)/Xn[Xn.length-1];function Vi(r){var l,o=this.abs();if(o.t==1&&o[0]<=Xn[Xn.length-1]){for(l=0;l<Xn.length;++l)if(o[0]==Xn[l])return!0;return!1}if(o.isEven())return!1;for(l=1;l<Xn.length;){for(var h=Xn[l],b=l+1;b<Xn.length&&h<ls;)h*=Xn[b++];for(h=o.modInt(h);l<b;)if(h%Xn[l++]==0)return!1}return o.millerRabin(r)}function Ki(r){var l=this.subtract(w.ONE),o=l.getLowestSetBit();if(o<=0)return!1;var h=l.shiftRight(o);r=r+1>>1,r>Xn.length&&(r=Xn.length);for(var b=U(),C=0;C<r;++C){b.fromInt(Xn[Math.floor(Math.random()*Xn.length)]);var x=b.modPow(h,this);if(x.compareTo(w.ONE)!=0&&x.compareTo(l)!=0){for(var _=1;_++<o&&x.compareTo(l)!=0;)if(x=x.modPowInt(2,this),x.compareTo(w.ONE)==0)return!1;if(x.compareTo(l)!=0)return!1}}return!0}w.prototype.chunkSize=It,w.prototype.toRadix=nt,w.prototype.fromRadix=zt,w.prototype.fromNumber=jt,w.prototype.bitwiseTo=F,w.prototype.changeBit=$e,w.prototype.addTo=tr,w.prototype.dMultiply=Er,w.prototype.dAddOffset=Tr,w.prototype.multiplyLowerTo=bn,w.prototype.multiplyUpperTo=as,w.prototype.modInt=In,w.prototype.millerRabin=Ki,w.prototype.clone=j,w.prototype.intValue=f,w.prototype.byteValue=S,w.prototype.shortValue=Y,w.prototype.signum=Ot,w.prototype.toByteArray=Se,w.prototype.equals=_t,w.prototype.min=gt,w.prototype.max=rt,w.prototype.and=At,w.prototype.or=Nt,w.prototype.xor=De,w.prototype.andNot=Ee,w.prototype.not=Be,w.prototype.shiftLeft=sr,w.prototype.shiftRight=P,w.prototype.getLowestSetBit=Vt,w.prototype.bitCount=kt,w.prototype.testBit=re,w.prototype.setBit=Ce,w.prototype.clearBit=Pe,w.prototype.flipBit=Ne,w.prototype.add=lr,w.prototype.subtract=ar,w.prototype.multiply=wr,w.prototype.divide=ln,w.prototype.remainder=cn,w.prototype.divideAndRemainder=qr,w.prototype.modPow=qs,w.prototype.modInverse=Si,w.prototype.pow=Br,w.prototype.gcd=os,w.prototype.isProbablePrime=Vi,w.prototype.square=jr;function Bi(){this.i=0,this.j=0,this.S=new Array}function cu(r){var l,o,h;for(l=0;l<256;++l)this.S[l]=l;for(o=0,l=0;l<256;++l)o=o+this.S[l]+r[l%r.length]&255,h=this.S[l],this.S[l]=this.S[o],this.S[o]=h;this.i=0,this.j=0}function Ei(){var r;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,r=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=r,this.S[r+this.S[this.i]&255]}Bi.prototype.init=cu,Bi.prototype.next=Ei;function zi(){return new Bi}var Ii=256,oi,ns,Dn;function bt(r){ns[Dn++]^=r&255,ns[Dn++]^=r>>8&255,ns[Dn++]^=r>>16&255,ns[Dn++]^=r>>24&255,Dn>=Ii&&(Dn-=Ii)}function $t(){bt(new Date().getTime())}if(ns==null){if(ns=new Array,Dn=0,n!==void 0&&(n.crypto!==void 0||n.msCrypto!==void 0)){if(fe=n.crypto||n.msCrypto,fe.getRandomValues)for(Me=new Uint8Array(32),fe.getRandomValues(Me),Ht=0;Ht<32;++Ht)ns[Dn++]=Me[Ht];else if(e.appName=="Netscape"&&e.appVersion<"5")for(We=n.crypto.random(32),Ht=0;Ht<We.length;++Ht)ns[Dn++]=We.charCodeAt(Ht)&255}for(;Dn<Ii;)Ht=Math.floor(65536*Math.random()),ns[Dn++]=Ht>>>8,ns[Dn++]=Ht&255;Dn=0,$t()}var Ht,fe,Me,We;function ir(){if(oi==null){for($t(),oi=zi(),oi.init(ns),Dn=0;Dn<ns.length;++Dn)ns[Dn]=0;Dn=0}return oi.next()}function cr(r){var l;for(l=0;l<r.length;++l)r[l]=ir()}function nn(){}nn.prototype.nextBytes=cr;function en(r,l){return new w(r,l)}function vr(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function hs(r,l){if(this.isPublic=!0,this.isPrivate=!1,typeof r!="string")this.n=r,this.e=l;else if(r!=null&&l!=null&&r.length>0&&l.length>0)this.n=en(r,16),this.e=parseInt(l,16);else throw"Invalid RSA public key"}function Ts(r){return r.modPowInt(this.e,this.n)}vr.prototype.doPublic=Ts,vr.prototype.setPublic=hs,vr.prototype.type="RSA";function Ri(r,l,o){if(this.isPrivate=!0,typeof r!="string")this.n=r,this.e=l,this.d=o;else if(r!=null&&l!=null&&r.length>0&&l.length>0)this.n=en(r,16),this.e=parseInt(l,16),this.d=en(o,16);else throw"Invalid RSA private key"}function ws(r,l,o,h,b,C,x,_){if(this.isPrivate=!0,this.isPublic=!1,r==null)throw"RSASetPrivateEx N == null";if(l==null)throw"RSASetPrivateEx E == null";if(r.length==0)throw"RSASetPrivateEx N.length == 0";if(l.length==0)throw"RSASetPrivateEx E.length == 0";if(r!=null&&l!=null&&r.length>0&&l.length>0)this.n=en(r,16),this.e=parseInt(l,16),this.d=en(o,16),this.p=en(h,16),this.q=en(b,16),this.dmp1=en(C,16),this.dmq1=en(x,16),this.coeff=en(_,16);else throw"Invalid RSA private key in RSASetPrivateEx"}function ds(r,l){var o=new nn,h=r>>1;this.e=parseInt(l,16);for(var b=new w(l,16),C=r/2-100,x=w.ONE.shiftLeft(C);;){for(;this.p=new w(r-h,1,o),!(this.p.subtract(w.ONE).gcd(b).compareTo(w.ONE)==0&&this.p.isProbablePrime(10)););for(;this.q=new w(h,1,o),!(this.q.subtract(w.ONE).gcd(b).compareTo(w.ONE)==0&&this.q.isProbablePrime(10)););if(this.p.compareTo(this.q)<=0){var _=this.p;this.p=this.q,this.q=_}var M=this.q.subtract(this.p).abs();if(!(M.bitLength()<C||M.compareTo(x)<=0)){var K=this.p.subtract(w.ONE),dt=this.q.subtract(w.ONE),yt=K.multiply(dt);if(yt.gcd(b).compareTo(w.ONE)==0&&(this.n=this.p.multiply(this.q),this.n.bitLength()==r)){this.d=b.modInverse(yt),this.dmp1=this.d.mod(K),this.dmq1=this.d.mod(dt),this.coeff=this.q.modInverse(this.p);break}}}this.isPrivate=!0}function $i(r){if(this.p==null||this.q==null)return r.modPow(this.d,this.n);for(var l=r.mod(this.p).modPow(this.dmp1,this.p),o=r.mod(this.q).modPow(this.dmq1,this.q);l.compareTo(o)<0;)l=l.add(this.p);return l.subtract(o).multiply(this.coeff).mod(this.p).multiply(this.q).add(o)}vr.prototype.doPrivate=$i,vr.prototype.setPrivate=Ri,vr.prototype.setPrivateEx=ws,vr.prototype.generate=ds;function En(r,l){this.x=l,this.q=r}function Gi(r){return r==this?!0:this.q.equals(r.q)&&this.x.equals(r.x)}function Aa(){return this.x}function wa(){return new En(this.q,this.x.negate().mod(this.q))}function Rn(r){return new En(this.q,this.x.add(r.toBigInteger()).mod(this.q))}function Sn(r){return new En(this.q,this.x.subtract(r.toBigInteger()).mod(this.q))}function Fa(r){return new En(this.q,this.x.multiply(r.toBigInteger()).mod(this.q))}function ba(){return new En(this.q,this.x.square().mod(this.q))}function Da(r){return new En(this.q,this.x.multiply(r.toBigInteger().modInverse(this.q)).mod(this.q))}En.prototype.equals=Gi,En.prototype.toBigInteger=Aa,En.prototype.negate=wa,En.prototype.add=Rn,En.prototype.subtract=Sn,En.prototype.multiply=Fa,En.prototype.square=ba,En.prototype.divide=Da,En.prototype.sqrt=function(){return new En(this.q,this.x.sqrt().mod(this.q))};function an(r,l,o,h){this.curve=r,this.x=l,this.y=o,h==null?this.z=w.ONE:this.z=h,this.zinv=null}function Ca(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function _a(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function Wu(r){if(r==this)return!0;if(this.isInfinity())return r.isInfinity();if(r.isInfinity())return this.isInfinity();var l,o;return l=r.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(r.z)).mod(this.curve.q),l.equals(w.ZERO)?(o=r.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(r.z)).mod(this.curve.q),o.equals(w.ZERO)):!1}function Sa(){return this.x==null&&this.y==null?!0:this.z.equals(w.ZERO)&&!this.y.toBigInteger().equals(w.ZERO)}function Qn(){return new an(this.curve,this.x,this.y.negate(),this.z)}function Cu(r){if(this.isInfinity())return r;if(r.isInfinity())return this;var l=r.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(r.z)).mod(this.curve.q),o=r.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(r.z)).mod(this.curve.q);if(w.ZERO.equals(o))return w.ZERO.equals(l)?this.twice():this.curve.getInfinity();var h=new w("3"),b=this.x.toBigInteger(),C=this.y.toBigInteger(),x=r.x.toBigInteger(),_=r.y.toBigInteger(),M=o.square(),K=M.multiply(o),dt=b.multiply(M),yt=l.square().multiply(this.z),O=yt.subtract(dt.shiftLeft(1)).multiply(r.z).subtract(K).multiply(o).mod(this.curve.q),I=dt.multiply(h).multiply(l).subtract(C.multiply(K)).subtract(yt.multiply(l)).multiply(r.z).add(l.multiply(K)).mod(this.curve.q),at=K.multiply(this.z).multiply(r.z).mod(this.curve.q);return new an(this.curve,this.curve.fromBigInteger(O),this.curve.fromBigInteger(I),at)}function vi(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var r=new w("3"),l=this.x.toBigInteger(),o=this.y.toBigInteger(),h=o.multiply(this.z),b=h.multiply(o).mod(this.curve.q),C=this.curve.a.toBigInteger(),x=l.square().multiply(r);w.ZERO.equals(C)||(x=x.add(this.z.square().multiply(C))),x=x.mod(this.curve.q);var _=x.square().subtract(l.shiftLeft(3).multiply(b)).shiftLeft(1).multiply(h).mod(this.curve.q),M=x.multiply(r).multiply(l).subtract(b.shiftLeft(1)).shiftLeft(2).multiply(b).subtract(x.square().multiply(x)).mod(this.curve.q),K=h.square().multiply(h).shiftLeft(3).mod(this.curve.q);return new an(this.curve,this.curve.fromBigInteger(_),this.curve.fromBigInteger(M),K)}function Xu(r){if(this.isInfinity())return this;if(r.signum()==0)return this.curve.getInfinity();var l=r,o=l.multiply(new w("3")),h=this.negate(),b=this,C=this.curve.q.subtract(r),x=C.multiply(new w("3")),_=new an(this.curve,this.x,this.y),M=_.negate(),K;for(K=o.bitLength()-2;K>0;--K){b=b.twice();var dt=o.testBit(K),yt=l.testBit(K);dt!=yt&&(b=b.add(dt?this:h))}for(K=x.bitLength()-2;K>0;--K){_=_.twice();var O=x.testBit(K),I=C.testBit(K);O!=I&&(_=_.add(O?_:M))}return b}function xu(r,l,o){var h;r.bitLength()>o.bitLength()?h=r.bitLength()-1:h=o.bitLength()-1;for(var b=this.curve.getInfinity(),C=this.add(l);h>=0;)b=b.twice(),r.testBit(h)?o.testBit(h)?b=b.add(C):b=b.add(this):o.testBit(h)&&(b=b.add(l)),--h;return b}an.prototype.getX=Ca,an.prototype.getY=_a,an.prototype.equals=Wu,an.prototype.isInfinity=Sa,an.prototype.negate=Qn,an.prototype.add=Cu,an.prototype.twice=vi,an.prototype.multiply=Xu,an.prototype.multiplyTwo=xu;function Yn(r,l,o){this.q=r,this.a=this.fromBigInteger(l),this.b=this.fromBigInteger(o),this.infinity=new an(this,null,null)}function Zu(){return this.q}function Qu(){return this.a}function ta(){return this.b}function ea(r){return r==this?!0:this.q.equals(r.q)&&this.a.equals(r.a)&&this.b.equals(r.b)}function ra(){return this.infinity}function sa(r){return new En(this.q,r)}function Fs(r){switch(parseInt(r.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:var l=r.substr(0,2),o=r.substr(2),h=this.fromBigInteger(new w(K,16)),b=this.getA(),C=this.getB(),x=h.square().add(b).multiply(h).add(C),_=x.sqrt();return l=="03"&&(_=_.negate()),new an(this,h,_);case 4:case 6:case 7:var M=(r.length-2)/2,K=r.substr(2,M),dt=r.substr(M+2,M);return new an(this,this.fromBigInteger(new w(K,16)),this.fromBigInteger(new w(dt,16)));default:return null}}Yn.prototype.getQ=Zu,Yn.prototype.getA=Qu,Yn.prototype.getB=ta,Yn.prototype.equals=ea,Yn.prototype.getInfinity=ra,Yn.prototype.fromBigInteger=sa,Yn.prototype.decodePointHex=Fs,En.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},an.prototype.getEncoded=function(r){var l=function(C,x){var _=C.toByteArrayUnsigned();if(x<_.length)_=_.slice(_.length-x);else for(;x>_.length;)_.unshift(0);return _},o=this.getX().toBigInteger(),h=this.getY().toBigInteger(),b=l(o,32);return r?h.isEven()?b.unshift(2):b.unshift(3):(b.unshift(4),b=b.concat(l(h,32))),b},an.decodeFrom=function(r,l){var o=l[0],h=l.length-1,b=l.slice(1,1+h/2),C=l.slice(1+h/2,1+h);b.unshift(0),C.unshift(0);var x=new w(b),_=new w(C);return new an(r,r.fromBigInteger(x),r.fromBigInteger(_))},an.decodeFromHex=function(r,l){var o=l.substr(0,2),h=l.length-2,b=l.substr(2,h/2),C=l.substr(2+h/2,h/2),x=new w(b,16),_=new w(C,16);return new an(r,r.fromBigInteger(x),r.fromBigInteger(_))},an.prototype.add2D=function(r){if(this.isInfinity())return r;if(r.isInfinity())return this;if(this.x.equals(r.x))return this.y.equals(r.y)?this.twice():this.curve.getInfinity();var l=r.x.subtract(this.x),o=r.y.subtract(this.y),h=o.divide(l),b=h.square().subtract(this.x).subtract(r.x),C=h.multiply(this.x.subtract(b)).subtract(this.y);return new an(this.curve,b,C)},an.prototype.twice2D=function(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var r=this.curve.fromBigInteger(w.valueOf(2)),l=this.curve.fromBigInteger(w.valueOf(3)),o=this.x.square().multiply(l).add(this.curve.a).divide(this.y.multiply(r)),h=o.square().subtract(this.x.multiply(r)),b=o.multiply(this.x.subtract(h)).subtract(this.y);return new an(this.curve,h,b)},an.prototype.multiply2D=function(r){if(this.isInfinity())return this;if(r.signum()==0)return this.curve.getInfinity();var l=r,o=l.multiply(new w("3")),h=this.negate(),b=this,C;for(C=o.bitLength()-2;C>0;--C){b=b.twice();var x=o.testBit(C),_=l.testBit(C);x!=_&&(b=b.add2D(x?this:h))}return b},an.prototype.isOnCurve=function(){var r=this.getX().toBigInteger(),l=this.getY().toBigInteger(),o=this.curve.getA().toBigInteger(),h=this.curve.getB().toBigInteger(),b=this.curve.getQ(),C=l.multiply(l).mod(b),x=r.multiply(r).multiply(r).add(o.multiply(r)).add(h).mod(b);return C.equals(x)},an.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},an.prototype.validate=function(){var r=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var l=this.getX().toBigInteger(),o=this.getY().toBigInteger();if(l.compareTo(w.ONE)<0||l.compareTo(r.subtract(w.ONE))>0)throw new Error("x coordinate out of bounds");if(o.compareTo(w.ONE)<0||o.compareTo(r.subtract(w.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(r).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var ia=(function(){var r="(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)",l='(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))',o='(?:"'+l+'*")',h=new RegExp("(?:false|true|null|[\\{\\}\\[\\]]|"+r+"|"+o+")","g"),b=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),C={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function x(yt,O,I){return O?C[O]:String.fromCharCode(parseInt(I,16))}var _=new String(""),M="\\",K={"{":Object,"[":Array},dt=Object.hasOwnProperty;return function(yt,O){var I=yt.match(h),at,T=I[0],ot=!1;T==="{"?at={}:T==="["?at=[]:(at=[],ot=!0);for(var X,Ft=[at],Tt=1-ot,Wt=I.length;Tt<Wt;++Tt){T=I[Tt];var Gt;switch(T.charCodeAt(0)){default:Gt=Ft[0],Gt[X||Gt.length]=+T,X=void 0;break;case 34:if(T=T.substring(1,T.length-1),T.indexOf(M)!==-1&&(T=T.replace(b,x)),Gt=Ft[0],!X)if(Gt instanceof Array)X=Gt.length;else{X=T||_;break}Gt[X]=T,X=void 0;break;case 91:Gt=Ft[0],Ft.unshift(Gt[X||Gt.length]=[]),X=void 0;break;case 93:Ft.shift();break;case 102:Gt=Ft[0],Gt[X||Gt.length]=!1,X=void 0;break;case 110:Gt=Ft[0],Gt[X||Gt.length]=null,X=void 0;break;case 116:Gt=Ft[0],Gt[X||Gt.length]=!0,X=void 0;break;case 123:Gt=Ft[0],Ft.unshift(Gt[X||Gt.length]={}),X=void 0;break;case 125:Ft.shift();break}}if(ot){if(Ft.length!==1)throw new Error;at=at[0]}else if(Ft.length)throw new Error;if(O){var ve=function(be,d){var B=be[d];if(B&&typeof B=="object"){var ut=null;for(var z in B)if(dt.call(B,z)&&B!==be){var St=ve(B,z);St!==void 0?B[z]=St:(ut||(ut=[]),ut.push(z))}if(ut)for(var Mt=ut.length;--Mt>=0;)delete B[ut[Mt]]}return O.call(be,d,B)};at=ve({"":at},"")}return at}})();(typeof v>"u"||!v)&&(v={}),(typeof v.asn1>"u"||!v.asn1)&&(v.asn1={}),v.asn1.ASN1Util=new function(){this.integerToByteHex=function(r){var l=r.toString(16);return l.length%2==1&&(l="0"+l),l},this.bigIntToMinTwosComplementsHex=function(r){return Re(r)},this.getPEMStringFromHex=function(r,l){return ke(r,l)},this.newObject=function(r){var l=v,o=l.asn1,h=o.ASN1Object,b=o.DERBoolean,C=o.DERInteger,x=o.DERBitString,_=o.DEROctetString,M=o.DERNull,K=o.DERObjectIdentifier,dt=o.DEREnumerated,yt=o.DERUTF8String,O=o.DERNumericString,I=o.DERPrintableString,at=o.DERTeletexString,T=o.DERIA5String,ot=o.DERUTCTime,X=o.DERGeneralizedTime,Ft=o.DERVisibleString,Tt=o.DERBMPString,Wt=o.DERSequence,Gt=o.DERSet,ve=o.DERTaggedObject,be=o.ASN1Util.newObject;if(r instanceof o.ASN1Object)return r;var d=Object.keys(r);if(d.length!=1)throw new Error("key of param shall be only one.");var B=d[0];if(":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+B+":")==-1)throw new Error("undefined key: "+B);if(B=="bool")return new b(r[B]);if(B=="int")return new C(r[B]);if(B=="bitstr")return new x(r[B]);if(B=="octstr")return new _(r[B]);if(B=="null")return new M(r[B]);if(B=="oid")return new K(r[B]);if(B=="enum")return new dt(r[B]);if(B=="utf8str")return new yt(r[B]);if(B=="numstr")return new O(r[B]);if(B=="prnstr")return new I(r[B]);if(B=="telstr")return new at(r[B]);if(B=="ia5str")return new T(r[B]);if(B=="utctime")return new ot(r[B]);if(B=="gentime")return new X(r[B]);if(B=="visstr")return new Ft(r[B]);if(B=="bmpstr")return new Tt(r[B]);if(B=="asn1")return new h(r[B]);if(B=="seq"){for(var ut=r[B],z=[],St=0;St<ut.length;St++){var Mt=be(ut[St]);z.push(Mt)}return new Wt({array:z})}if(B=="set"){for(var ut=r[B],z=[],St=0;St<ut.length;St++){var Mt=be(ut[St]);z.push(Mt)}return new Gt({array:z})}if(B=="tag"){var te=r[B];if(Object.prototype.toString.call(te)==="[object Array]"&&te.length==3){var ie=be(te[2]);return new ve({tag:te[0],explicit:te[1],obj:ie})}else return new ve(te)}},this.jsonToASN1HEX=function(r){var l=this.newObject(r);return l.tohex()}},v.asn1.ASN1Util.oidHexToInt=function(r){for(var b="",l=parseInt(r.substr(0,2),16),o=Math.floor(l/40),h=l%40,b=o+"."+h,C="",x=2;x<r.length;x+=2){var _=parseInt(r.substr(x,2),16),M=("00000000"+_.toString(2)).slice(-8);if(C=C+M.substr(1,7),M.substr(0,1)=="0"){var K=new w(C,2);b=b+"."+K.toString(10),C=""}}return b},v.asn1.ASN1Util.oidIntToHex=function(r){var l=function(_){var M=_.toString(16);return M.length==1&&(M="0"+M),M},o=function(_){var M="",K=new w(_,10),dt=K.toString(2),yt=7-dt.length%7;yt==7&&(yt=0);for(var O="",I=0;I<yt;I++)O+="0";dt=O+dt;for(var I=0;I<dt.length-1;I+=7){var at=dt.substr(I,7);I!=dt.length-7&&(at="1"+at),M+=l(parseInt(at,2))}return M};if(!r.match(/^[0-9.]+$/))throw"malformed oid string: "+r;var h="",b=r.split("."),C=parseInt(b[0])*40+parseInt(b[1]);h+=l(C),b.splice(0,2);for(var x=0;x<b.length;x++)h+=o(b[x]);return h},v.asn1.ASN1Object=function(r){var l=!0,o=null,h="00",b="00",C="";this.params=null,this.getLengthHexFromValue=function(){if(typeof this.hV>"u"||this.hV==null)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+C.length+",v="+this.hV);var x=this.hV.length/2,_=x.toString(16);if(_.length%2==1&&(_="0"+_),x<128)return _;var M=_.length/2;if(M>15)throw new Error("ASN.1 length too long to represent by 8x: n = "+x.toString(16));var K=128+M;return K.toString(16)+_},this.tohex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.getValueHex=function(){return this.tohex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(x){this.params=x},r!=null&&r.tlv!=null&&(this.hTLV=r.tlv,this.isModified=!1)},v.asn1.DERAbstractString=function(r){v.asn1.DERAbstractString.superclass.constructor.call(this);var l=null,o=null;this.getString=function(){return this.s},this.setString=function(h){this.hTLV=null,this.isModified=!0,this.s=h,this.hV=Su(this.s).toLowerCase()},this.setStringHex=function(h){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=h},this.getFreshValueHex=function(){return this.hV},typeof r<"u"&&(typeof r=="string"?this.setString(r):typeof r.str<"u"?this.setString(r.str):typeof r.hex<"u"&&this.setStringHex(r.hex))},Oe(v.asn1.DERAbstractString,v.asn1.ASN1Object),v.asn1.DERAbstractTime=function(r){v.asn1.DERAbstractTime.superclass.constructor.call(this);var l=null,o=null;this.localDateToUTC=function(h){var b=h.getTime()+h.getTimezoneOffset()*6e4,C=new Date(b);return C},this.formatDate=function(h,b,C){var x=this.zeroPadding,_=this.localDateToUTC(h),M=String(_.getFullYear());b=="utc"&&(M=M.substr(2,2));var K=x(String(_.getMonth()+1),2),dt=x(String(_.getDate()),2),yt=x(String(_.getHours()),2),O=x(String(_.getMinutes()),2),I=x(String(_.getSeconds()),2),at=M+K+dt+yt+O+I;if(C===!0){var T=_.getMilliseconds();if(T!=0){var ot=x(String(T),3);ot=ot.replace(/[0]+$/,""),at=at+"."+ot}}return at+"Z"},this.zeroPadding=function(h,b){return h.length>=b?h:new Array(b-h.length+1).join("0")+h},this.setByParam=function(h){this.hV=null,this.hTLV=null,this.params=h},this.getString=function(){},this.setString=function(h){this.hTLV=null,this.isModified=!0,this.params==null&&(this.params={}),this.params.str=h},this.setByDate=function(h){this.hTLV=null,this.isModified=!0,this.params==null&&(this.params={}),this.params.date=h},this.setByDateValue=function(h,b,C,x,_,M){var K=new Date(Date.UTC(h,b-1,C,x,_,M,0));this.setByDate(K)},this.getFreshValueHex=function(){return this.hV}},Oe(v.asn1.DERAbstractTime,v.asn1.ASN1Object),v.asn1.DERAbstractStructured=function(r){v.asn1.DERAbstractString.superclass.constructor.call(this);var l=null;this.setByASN1ObjectArray=function(o){this.hTLV=null,this.isModified=!0,this.asn1Array=o},this.appendASN1Object=function(o){this.hTLV=null,this.isModified=!0,this.asn1Array.push(o)},this.asn1Array=new Array,typeof r<"u"&&typeof r.array<"u"&&(this.asn1Array=r.array)},Oe(v.asn1.DERAbstractStructured,v.asn1.ASN1Object),v.asn1.DERBoolean=function(r){v.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",r==!1?this.hTLV="010100":this.hTLV="0101ff"},Oe(v.asn1.DERBoolean,v.asn1.ASN1Object),v.asn1.DERInteger=function(r){v.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.params=null;var l=Re;this.setByBigInteger=function(o){this.isModified=!0,this.params={bigint:o}},this.setByInteger=function(o){this.isModified=!0,this.params=o},this.setValueHex=function(o){this.isModified=!0,this.params={hex:o}},this.getFreshValueHex=function(){var o=this.params,h=null;if(o==null)throw new Error("value not set");if(typeof o=="object"&&o.hex!=null)return this.hV=o.hex,this.hV;if(typeof o=="number")h=new w(String(o),10);else if(o.int!=null)h=new w(String(o.int),10);else if(o.bigint!=null)h=o.bigint;else throw new Error("wrong parameter");return this.hV=l(h),this.hV},r!=null&&(this.params=r)},Oe(v.asn1.DERInteger,v.asn1.ASN1Object),v.asn1.DERBitString=function(r){if(r!==void 0&&typeof r.obj<"u"){var l=v.asn1.ASN1Util.newObject(r.obj);r.hex="00"+l.tohex()}v.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(o){this.hTLV=null,this.isModified=!0,this.hV=o},this.setUnusedBitsAndHexValue=function(o,h){if(o<0||7<o)throw"unused bits shall be from 0 to 7: u = "+o;var b="0"+o;this.hTLV=null,this.isModified=!0,this.hV=b+h},this.setByBinaryString=function(o){o=o.replace(/0+$/,"");var h=8-o.length%8;h==8&&(h=0),o+="0000000".substr(0,h);for(var b="",C=0;C<o.length-1;C+=8){var x=o.substr(C,8),_=parseInt(x,2).toString(16);_.length==1&&(_="0"+_),b+=_}this.hTLV=null,this.isModified=!0,this.hV="0"+h+b},this.setByBooleanArray=function(o){for(var h="",b=0;b<o.length;b++)o[b]==!0?h+="1":h+="0";this.setByBinaryString(h)},this.newFalseArray=function(o){for(var h=new Array(o),b=0;b<o;b++)h[b]=!1;return h},this.getFreshValueHex=function(){return this.hV},typeof r<"u"&&(typeof r=="string"&&r.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(r):typeof r.hex<"u"?this.setHexValueIncludingUnusedBits(r.hex):typeof r.bin<"u"?this.setByBinaryString(r.bin):typeof r.array<"u"&&this.setByBooleanArray(r.array))},Oe(v.asn1.DERBitString,v.asn1.ASN1Object),v.asn1.DEROctetString=function(r){if(r!==void 0&&typeof r.obj<"u"){var l=v.asn1.ASN1Util.newObject(r.obj);r.hex=l.tohex()}v.asn1.DEROctetString.superclass.constructor.call(this,r),this.hT="04"},Oe(v.asn1.DEROctetString,v.asn1.DERAbstractString),v.asn1.DERNull=function(){v.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},Oe(v.asn1.DERNull,v.asn1.ASN1Object),v.asn1.DERObjectIdentifier=function(r){v.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(l){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=l},this.setValueOidString=function(l){var o=zs(l);if(o==null)throw new Error("malformed oid string: "+l);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=o},this.setValueName=function(l){var o=v.asn1.x509.OID.name2oid(l);if(o!=="")this.setValueOidString(o);else throw new Error("DERObjectIdentifier oidName undefined: "+l)},this.setValueNameOrOid=function(l){l.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(l):this.setValueName(l)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(l){typeof l=="string"?this.setValueNameOrOid(l):l.oid!==void 0?this.setValueNameOrOid(l.oid):l.name!==void 0?this.setValueNameOrOid(l.name):l.hex!==void 0&&this.setValueHex(l.hex)},r!==void 0&&this.setByParam(r)},Oe(v.asn1.DERObjectIdentifier,v.asn1.ASN1Object),v.asn1.DEREnumerated=function(r){v.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(l){this.hTLV=null,this.isModified=!0,this.hV=Re(l)},this.setByInteger=function(l){var o=new w(String(l),10);this.setByBigInteger(o)},this.setValueHex=function(l){this.hV=l},this.getFreshValueHex=function(){return this.hV},typeof r<"u"&&(typeof r.int<"u"?this.setByInteger(r.int):typeof r=="number"?this.setByInteger(r):typeof r.hex<"u"&&this.setValueHex(r.hex))},Oe(v.asn1.DEREnumerated,v.asn1.ASN1Object),v.asn1.DERUTF8String=function(r){v.asn1.DERUTF8String.superclass.constructor.call(this,r),this.hT="0c"},Oe(v.asn1.DERUTF8String,v.asn1.DERAbstractString),v.asn1.DERNumericString=function(r){v.asn1.DERNumericString.superclass.constructor.call(this,r),this.hT="12"},Oe(v.asn1.DERNumericString,v.asn1.DERAbstractString),v.asn1.DERPrintableString=function(r){v.asn1.DERPrintableString.superclass.constructor.call(this,r),this.hT="13"},Oe(v.asn1.DERPrintableString,v.asn1.DERAbstractString),v.asn1.DERTeletexString=function(r){v.asn1.DERTeletexString.superclass.constructor.call(this,r),this.hT="14"},Oe(v.asn1.DERTeletexString,v.asn1.DERAbstractString),v.asn1.DERIA5String=function(r){v.asn1.DERIA5String.superclass.constructor.call(this,r),this.hT="16"},Oe(v.asn1.DERIA5String,v.asn1.DERAbstractString),v.asn1.DERVisibleString=function(r){v.asn1.DERIA5String.superclass.constructor.call(this,r),this.hT="1a"},Oe(v.asn1.DERVisibleString,v.asn1.DERAbstractString),v.asn1.DERBMPString=function(r){v.asn1.DERBMPString.superclass.constructor.call(this,r),this.hT="1e"},Oe(v.asn1.DERBMPString,v.asn1.DERAbstractString),v.asn1.DERUTCTime=function(r){v.asn1.DERUTCTime.superclass.constructor.call(this,r),this.hT="17",this.params=void 0,this.getFreshValueHex=function(){var l=this.params;if(this.params==null&&(l={date:new Date}),typeof l=="string")if(l.match(/^[0-9]{12}Z$/)||l.match(/^[0-9]{12}\.[0-9]+Z$/))this.hV=cs(l);else throw new Error("malformed string for UTCTime: "+l);else if(l.str!=null)this.hV=cs(l.str);else if(l.date==null&&l.millis==!0){var o=new Date;this.hV=cs(this.formatDate(o,"utc",!0))}else if(l.date!=null&&l.date instanceof Date){var h=l.millis===!0;this.hV=cs(this.formatDate(l.date,"utc",h))}else l instanceof Date&&(this.hV=cs(this.formatDate(l,"utc")));if(this.hV==null)throw new Error("parameter not specified properly for UTCTime");return this.hV},r!=null&&this.setByParam(r)},Oe(v.asn1.DERUTCTime,v.asn1.DERAbstractTime),v.asn1.DERGeneralizedTime=function(r){v.asn1.DERGeneralizedTime.superclass.constructor.call(this,r),this.hT="18",this.params=r,this.getFreshValueHex=function(){var l=this.params;if(this.params==null&&(l={date:new Date}),typeof l=="string")if(l.match(/^[0-9]{14}Z$/)||l.match(/^[0-9]{14}\.[0-9]+Z$/))this.hV=cs(l);else throw new Error("malformed string for GeneralizedTime: "+l);else if(l.str!=null)this.hV=cs(l.str);else if(l.date==null&&l.millis==!0){var o=new Date;this.hV=cs(this.formatDate(o,"gen",!0))}else if(l.date!=null&&l.date instanceof Date){var h=l.millis===!0;this.hV=cs(this.formatDate(l.date,"gen",h))}else l instanceof Date&&(this.hV=cs(this.formatDate(l,"gen")));if(this.hV==null)throw new Error("parameter not specified properly for GeneralizedTime");return this.hV},r!=null&&this.setByParam(r)},Oe(v.asn1.DERGeneralizedTime,v.asn1.DERAbstractTime),v.asn1.DERSequence=function(r){v.asn1.DERSequence.superclass.constructor.call(this,r),this.hT="30",this.getFreshValueHex=function(){for(var l="",o=0;o<this.asn1Array.length;o++){var h=this.asn1Array[o];l+=h.tohex()}return this.hV=l,this.hV}},Oe(v.asn1.DERSequence,v.asn1.DERAbstractStructured),v.asn1.DERSet=function(r){v.asn1.DERSet.superclass.constructor.call(this,r),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var l=new Array,o=0;o<this.asn1Array.length;o++){var h=this.asn1Array[o];l.push(h.tohex())}return this.sortFlag==!0&&l.sort(),this.hV=l.join(""),this.hV},typeof r<"u"&&typeof r.sortflag<"u"&&r.sortflag==!1&&(this.sortFlag=!1)},Oe(v.asn1.DERSet,v.asn1.DERAbstractStructured),v.asn1.DERTaggedObject=function(r){v.asn1.DERTaggedObject.superclass.constructor.call(this);var l=v.asn1,o=Ge,h=o.getV,b=o.isASN1HEX,C=l.ASN1Util.newObject;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.params={tag:"a0",explicit:!0},this.setASN1Object=function(x,_,M){this.params={tag:_,explicit:x,obj:M}},this.getFreshValueHex=function(){var x=this.params;if(x.explicit==null&&(x.explicit=!0),x.tage!=null&&(x.tag=x.tage,x.explicit=!0),x.tagi!=null&&(x.tag=x.tagi,x.explicit=!1),x.str!=null)this.hV=Su(x.str);else if(x.hex!=null)this.hV=x.hex;else if(x.obj!=null){var _;x.obj instanceof l.ASN1Object?_=x.obj.tohex():typeof x.obj=="object"&&(_=C(x.obj).tohex()),x.explicit?this.hV=_:this.hV=h(_,0)}else throw new Error("str, hex nor obj not specified");return x.tag==null&&(x.tag="a0"),this.hT=x.tag,this.hTLV=null,this.isModified=!0,this.hV},this.setByParam=function(x){this.params=x},r!==void 0&&this.setByParam(r)},Oe(v.asn1.DERTaggedObject,v.asn1.ASN1Object);var Ge=new function(){};Ge.getLblen=function(r,l){if(r.substr(l+2,1)!="8")return 1;var o=parseInt(r.substr(l+3,1));return o==0?-1:0<o&&o<10?o+1:-2},Ge.getL=function(r,l){var o=Ge.getLblen(r,l);return o<1?"":r.substr(l+2,o*2)},Ge.getVblen=function(r,l){var o,h;return o=Ge.getL(r,l),o==""?-1:(o.substr(0,1)==="8"?h=new w(o.substr(2),16):h=new w(o,16),h.intValue())},Ge.getVidx=function(r,l){var o=Ge.getLblen(r,l);return o<0?o:l+(o+1)*2},Ge.getV=function(r,l){var o=Ge.getVidx(r,l),h=Ge.getVblen(r,l);return r.substr(o,h*2)},Ge.getTLV=function(r,l){return r.substr(l,2)+Ge.getL(r,l)+Ge.getV(r,l)},Ge.getTLVblen=function(r,l){return 2+Ge.getLblen(r,l)*2+Ge.getVblen(r,l)*2},Ge.getNextSiblingIdx=function(r,l){var o=Ge.getVidx(r,l),h=Ge.getVblen(r,l);return o+h*2},Ge.getChildIdx=function(r,l){var o=Ge,h=[],b,C,x;b=o.getVidx(r,l),C=o.getVblen(r,l)*2,r.substr(l,2)=="03"&&(b+=2,C-=2),x=0;for(var _=b;x<=C;){var M=o.getTLVblen(r,_);if(x+=M,x<=C&&h.push(_),_+=M,x>=C)break}return h},Ge.getNthChildIdx=function(r,l,o){var h=Ge.getChildIdx(r,l);return h[o]},Ge.getIdxbyList=function(r,l,o,h){var b=Ge,C,x;return o.length==0?h!==void 0&&r.substr(l,2)!==h?-1:l:(C=o.shift(),x=b.getChildIdx(r,l),C>=x.length?-1:b.getIdxbyList(r,x[C],o,h))},Ge.getIdxbyListEx=function(r,l,o,h){var b=Ge,C,x;if(o.length==0)return h!==void 0&&r.substr(l,2)!==h?-1:l;C=o.shift(),x=b.getChildIdx(r,l);for(var _=0,M=0;M<x.length;M++){var K=r.substr(x[M],2);if(typeof C=="number"&&!b.isContextTag(K)&&_==C||typeof C=="string"&&b.isContextTag(K,C))return b.getIdxbyListEx(r,x[M],o,h);b.isContextTag(K)||_++}return-1},Ge.getTLVbyList=function(r,l,o,h){var b=Ge,C=b.getIdxbyList(r,l,o,h);return C==-1||C>=r.length?null:b.getTLV(r,C)},Ge.getTLVbyListEx=function(r,l,o,h){var b=Ge,C=b.getIdxbyListEx(r,l,o,h);return C==-1?null:b.getTLV(r,C)},Ge.getVbyList=function(r,l,o,h,b){var C=Ge,x,_;return x=C.getIdxbyList(r,l,o,h),x==-1||x>=r.length?null:(_=C.getV(r,x),b===!0&&(_=_.substr(2)),_)},Ge.getVbyListEx=function(r,l,o,h,b){var C=Ge,x,_,M;return x=C.getIdxbyListEx(r,l,o,h),x==-1?null:(M=C.getV(r,x),r.substr(x,2)=="03"&&b!==!1&&(M=M.substr(2)),M)},Ge.getInt=function(r,l,o){o==null&&(o=-1);try{var h=r.substr(l,2);if(h!="02"&&h!="03")return o;var b=Ge.getV(r,l);return h=="02"?parseInt(b,16):Pr(b)}catch{return o}},Ge.getOID=function(r,l,o){o==null&&(o=null);try{if(r.substr(l,2)!="06")return o;var h=Ge.getV(r,l);return ye(h)}catch{return o}},Ge.getOIDName=function(r,l,o){o==null&&(o=null);try{var h=Ge.getOID(r,l,o);if(h==o)return o;var b=v.asn1.x509.OID.oid2name(h);return b==""?h:b}catch{return o}},Ge.getString=function(r,l,o){o==null&&(o=null);try{var h=Ge.getV(r,l);return gr(h)}catch{return o}},Ge.hextooidstr=function(r){var l=function(yt,O){return yt.length>=O?yt:new Array(O-yt.length+1).join("0")+yt},o=[],h=r.substr(0,2),b=parseInt(h,16);o[0]=new String(Math.floor(b/40)),o[1]=new String(b%40);for(var C=r.substr(2),x=[],_=0;_<C.length/2;_++)x.push(parseInt(C.substr(_*2,2),16));for(var M=[],K="",_=0;_<x.length;_++)x[_]&128?K=K+l((x[_]&127).toString(2),7):(K=K+l((x[_]&127).toString(2),7),M.push(new String(parseInt(K,2))),K="");var dt=o.join(".");return M.length>0&&(dt=dt+"."+M.join(".")),dt},Ge.dump=function(r,l,o,h){var b=Ge,C=b.getV,x=b.dump,_=b.getChildIdx,M=r;r instanceof v.asn1.ASN1Object&&(M=r.tohex());var K=function(be,d){if(be.length<=d*2)return be;var B=be.substr(0,d)+"..(total "+be.length/2+"bytes).."+be.substr(be.length-d,d);return B};l===void 0&&(l={ommit_long_octet:32}),o===void 0&&(o=0),h===void 0&&(h="");var dt=l.ommit_long_octet,Gt=M.substr(o,2);if(Gt=="01"){var yt=C(M,o);return yt=="00"?h+`BOOLEAN FALSE
`:h+`BOOLEAN TRUE
`}if(Gt=="02"){var yt=C(M,o);return h+"INTEGER "+K(yt,dt)+`
`}if(Gt=="03"){var yt=C(M,o);if(b.isASN1HEX(yt.substr(2))){var O=h+`BITSTRING, encapsulates
`;return O=O+x(yt.substr(2),l,0,h+"  "),O}else return h+"BITSTRING "+K(yt,dt)+`
`}if(Gt=="04"){var yt=C(M,o);if(b.isASN1HEX(yt)){var O=h+`OCTETSTRING, encapsulates
`;return O=O+x(yt,l,0,h+"  "),O}else return h+"OCTETSTRING "+K(yt,dt)+`
`}if(Gt=="05")return h+`NULL
`;if(Gt=="06"){var I=C(M,o),at=v.asn1.ASN1Util.oidHexToInt(I),T=v.asn1.x509.OID.oid2name(at),ot=at.replace(/\./g," ");return T!=""?h+"ObjectIdentifier "+T+" ("+ot+`)
`:h+"ObjectIdentifier ("+ot+`)
`}if(Gt=="0a")return h+"ENUMERATED "+parseInt(C(M,o))+`
`;if(Gt=="0c")return h+"UTF8String '"+_r(C(M,o))+`'
`;if(Gt=="13")return h+"PrintableString '"+_r(C(M,o))+`'
`;if(Gt=="14")return h+"TeletexString '"+_r(C(M,o))+`'
`;if(Gt=="16")return h+"IA5String '"+_r(C(M,o))+`'
`;if(Gt=="17")return h+"UTCTime "+_r(C(M,o))+`
`;if(Gt=="18")return h+"GeneralizedTime "+_r(C(M,o))+`
`;if(Gt=="1a")return h+"VisualString '"+_r(C(M,o))+`'
`;if(Gt=="1e")return h+"BMPString '"+Tu(C(M,o))+`'
`;if(Gt=="30"){if(M.substr(o,4)=="3000")return h+`SEQUENCE {}
`;var O=h+`SEQUENCE
`,X=_(M,o),Ft=l;if((X.length==2||X.length==3)&&M.substr(X[0],2)=="06"&&M.substr(X[X.length-1],2)=="04"){var T=b.oidname(C(M,X[0])),Tt=JSON.parse(JSON.stringify(l));Tt.x509ExtName=T,Ft=Tt}for(var Wt=0;Wt<X.length;Wt++)O=O+x(M,Ft,X[Wt],h+"  ");return O}if(Gt=="31"){for(var O=h+`SET
`,X=_(M,o),Wt=0;Wt<X.length;Wt++)O=O+x(M,l,X[Wt],h+"  ");return O}var Gt=parseInt(Gt,16);if(Gt&128){var ve=Gt&31;if(Gt&32){for(var O=h+"["+ve+`]
`,X=_(M,o),Wt=0;Wt<X.length;Wt++)O=O+x(M,l,X[Wt],h+"  ");return O}else{var yt=C(M,o);if(Ge.isASN1HEX(yt)){var O=h+"["+ve+`]
`;return O=O+x(yt,l,0,h+"  "),O}else(yt.substr(0,8)=="68747470"||l.x509ExtName==="subjectAltName"&&ve==2)&&(yt=_r(yt));var O=h+"["+ve+"] "+yt+`
`;return O}}return h+"UNKNOWN("+Gt+") "+C(M,o)+`
`},Ge.parse=function(r){var l=Ge,o=l.parse,h=l.isASN1HEX,b=l.getV,C=l.getTLV,x=l.getChildIdx,_=v.asn1,M=_.ASN1Util.oidHexToInt,K=_.x509.OID.oid2name,dt=_r,yt=Tu,O=Ba,I={"0c":"utf8str",12:"numstr",13:"prnstr",14:"telstr",16:"ia5str",17:"utctime",18:"gentime","1a":"visstr","1e":"bmpstr",30:"seq",31:"set"},at=function(B){for(var ut=[],z=x(B,0),St=0;St<z.length;St++){var Mt=z[St],te=C(B,Mt),ie=o(te);ut.push(ie)}return ut},T=r.substr(0,2),ot={},X=b(r,0);if(T=="01")return r=="0101ff"?{bool:!0}:{bool:!1};if(T=="02")return{int:{hex:X}};if(T=="03")try{if(X.substr(0,2)!="00")throw"not encap";var Ft=X.substr(2);if(!h(Ft))throw"not encap";return{bitstr:{obj:o(Ft)}}}catch{var Tt=null;return X.length<=10&&(Tt=Gn(X)),Tt==null?{bitstr:{hex:X}}:{bitstr:{bin:Tt}}}else if(T=="04")try{if(!h(X))throw"not encap";return{octstr:{obj:o(X)}}}catch{return{octstr:{hex:X}}}else{if(T=="05")return{null:""};if(T=="06"){var Wt=M(X),Gt=K(Wt);return Gt==""?{oid:Wt}:{oid:Gt}}else{if(T=="0a")return X.length>4?{enum:{hex:X}}:{enum:parseInt(X,16)};if(T=="30"||T=="31")return ot[I[T]]=at(r),ot;if(T=="14"){var ve=O(X);return ot[I[T]]={str:ve},ot}else if(T=="1e"){var ve=yt(X);return ot[I[T]]={str:ve},ot}else if(":0c:12:13:16:17:18:1a:".indexOf(T)!=-1){var ve=dt(X);return ot[I[T]]={str:ve},ot}else if(T.match(/^8[0-9]$/)){var ve=dt(X);return ve==null|ve==""?{tag:{tag:T,explicit:!1,hex:X}}:ve.match(/[\x00-\x1F\x7F-\x9F]/)!=null||ve.match(/[\u0000-\u001F\u0080\u009F]/)!=null?{tag:{tag:T,explicit:!1,hex:X}}:{tag:{tag:T,explicit:!1,str:ve}}}else if(T.match(/^a[0-9]$/))try{if(!h(X))throw new Error("not encap");return{tag:{tag:T,explicit:!0,obj:o(X)}}}catch{return{tag:{tag:T,explicit:!0,hex:X}}}else{var be=new v.asn1.ASN1Object;be.hV=X;var d=be.getLengthHexFromValue();return{asn1:{tlv:T+d+X}}}}}},Ge.isContextTag=function(r,l){r=r.toLowerCase();var o,h;try{o=parseInt(r,16)}catch{return-1}if(l===void 0)return(o&192)==128;try{var b=l.match(/^\[[0-9]+\]$/);return b==null||(h=parseInt(l.substr(1,l.length-1),10),h>31)?!1:(o&192)==128&&(o&31)==h}catch{return!1}},Ge.isASN1HEX=function(r){var l=Ge;if(r.length%2==1)return!1;var o=l.getVblen(r,0),h=r.substr(0,2),b=l.getL(r,0),C=r.length-h.length-b.length;return C==o*2},Ge.checkStrictDER=function(r,l,o,h,b){var C=Ge;if(o===void 0){if(typeof r!="string")throw new Error("not hex string");if(r=r.toLowerCase(),!v.lang.String.isHex(r))throw new Error("not hex string");o=r.length,h=r.length/2,h<128?b=1:b=Math.ceil(h.toString(16))+1}var x=C.getL(r,l);if(x.length>b*2)throw new Error("L of TLV too long: idx="+l);var _=C.getVblen(r,l);if(_>h)throw new Error("value of L too long than hex: idx="+l);var M=C.getTLV(r,l),K=M.length-2-C.getL(r,l).length;if(K!==_*2)throw new Error("V string length and L's value not the same:"+K+"/"+_*2);if(l===0&&r.length!=M.length)throw new Error("total length and TLV length unmatch:"+r.length+"!="+M.length);var dt=r.substr(l,2);if(dt==="02"){var yt=C.getVidx(r,l);if(r.substr(yt,2)=="00"&&r.charCodeAt(yt+2)<56)throw new Error("not least zeros for DER INTEGER")}if(parseInt(dt,16)&32){for(var O=C.getVblen(r,l),I=0,at=C.getChildIdx(r,l),T=0;T<at.length;T++){var ot=C.getTLV(r,at[T]);I+=ot.length,C.checkStrictDER(r,at[T],o,h,b)}if(O*2!=I)throw new Error("sum of children's TLV length and L unmatch: "+O*2+"!="+I)}},Ge.oidname=function(r){var l=v.asn1;v.lang.String.isHex(r)&&(r=l.ASN1Util.oidHexToInt(r));var o=l.x509.OID.oid2name(r);return o===""&&(o=r),o},(typeof v>"u"||!v)&&(v={}),(typeof v.asn1>"u"||!v.asn1)&&(v.asn1={}),(typeof v.asn1.x509>"u"||!v.asn1.x509)&&(v.asn1.x509={}),v.asn1.x509.Certificate=function(r){v.asn1.x509.Certificate.superclass.constructor.call(this);var l=v,o=l.asn1,h=o.DERBitString,b=o.DERSequence,C=o.x509,x=C.TBSCertificate,_=C.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(M){this.params=M},this.sign=function(){var M=this.params,K=M.sigalg;M.sigalg.name!=null&&(K=M.sigalg.name);var dt=M.tbsobj.tohex(),yt=new v.crypto.Signature({alg:K});yt.init(M.cakey),yt.updateHex(dt),M.sighex=yt.sign()},this.getPEM=function(){return ke(this.tohex(),"CERTIFICATE")},this.tohex=function(){var M=this.params;if((M.tbsobj==null||M.tbsobj==null)&&(M.tbsobj=new x(M)),M.sighex==null&&M.cakey!=null&&this.sign(),M.sighex==null)throw new Error("sighex or cakey parameter not defined");var K=[];K.push(M.tbsobj),K.push(new _({name:M.sigalg})),K.push(new h({hex:"00"+M.sighex}));var dt=new b({array:K});return dt.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&(this.params=r)},Oe(v.asn1.x509.Certificate,v.asn1.ASN1Object),v.asn1.x509.TBSCertificate=function(r){v.asn1.x509.TBSCertificate.superclass.constructor.call(this);var l=v,o=l.asn1,h=o.x509,b=o.DERTaggedObject,C=o.DERInteger,x=o.DERSequence,_=h.AlgorithmIdentifier,M=h.Time,K=h.X500Name,dt=h.Extensions,yt=h.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(O){this.params=O},this.tohex=function(){var O=[],I=this.params;if(I.version!=null||I.version!=1){var at=2;I.version!=null&&(at=I.version-1);var T=new b({obj:new C({int:at})});O.push(T)}O.push(new C(I.serial)),O.push(new _({name:I.sigalg})),O.push(new K(I.issuer)),O.push(new x({array:[new M(I.notbefore),new M(I.notafter)]})),O.push(new K(I.subject)),O.push(new yt(Nr.getKey(I.sbjpubkey))),I.ext!==void 0&&I.ext.length>0&&O.push(new b({tag:"a3",obj:new dt(I.ext)}));var ot=new v.asn1.DERSequence({array:O});return ot.tohex()},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&this.setByParam(r)},Oe(v.asn1.x509.TBSCertificate,v.asn1.ASN1Object),v.asn1.x509.Extensions=function(r){v.asn1.x509.Extensions.superclass.constructor.call(this);var l=v,o=l.asn1,h=o.DERSequence,b=o.x509;this.aParam=[],this.setByParam=function(C){this.aParam=C},this.tohex=function(){for(var C=[],x=0;x<this.aParam.length;x++){var _=this.aParam[x],M=_.extname,K=null;if(_.extn!=null)K=new b.PrivateExtension(_);else if(M=="subjectKeyIdentifier")K=new b.SubjectKeyIdentifier(_);else if(M=="keyUsage")K=new b.KeyUsage(_);else if(M=="subjectAltName")K=new b.SubjectAltName(_);else if(M=="issuerAltName")K=new b.IssuerAltName(_);else if(M=="basicConstraints")K=new b.BasicConstraints(_);else if(M=="nameConstraints")K=new b.NameConstraints(_);else if(M=="cRLDistributionPoints")K=new b.CRLDistributionPoints(_);else if(M=="certificatePolicies")K=new b.CertificatePolicies(_);else if(M=="policyMappings")K=new b.PolicyMappings(_);else if(M=="policyConstraints")K=new b.PolicyConstraints(_);else if(M=="inhibitAnyPolicy")K=new b.InhibitAnyPolicy(_);else if(M=="authorityKeyIdentifier")K=new b.AuthorityKeyIdentifier(_);else if(M=="extKeyUsage")K=new b.ExtKeyUsage(_);else if(M=="authorityInfoAccess")K=new b.AuthorityInfoAccess(_);else if(M=="cRLNumber")K=new b.CRLNumber(_);else if(M=="cRLReason")K=new b.CRLReason(_);else if(M=="ocspNonce")K=new b.OCSPNonce(_);else if(M=="ocspNoCheck")K=new b.OCSPNoCheck(_);else if(M=="adobeTimeStamp")K=new b.AdobeTimeStamp(_);else if(M=="subjectDirectoryAttributes")K=new b.SubjectDirectoryAttributes(_);else throw new Error("extension not supported:"+JSON.stringify(_));K!=null&&C.push(K)}var dt=new h({array:C});return dt.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},Oe(v.asn1.x509.Extensions,v.asn1.ASN1Object),v.asn1.x509.Extension=function(r){v.asn1.x509.Extension.superclass.constructor.call(this);var l=null,o=v,h=o.asn1,b=h.DERObjectIdentifier,C=h.DEROctetString,x=h.DERBitString,_=h.DERBoolean,M=h.DERSequence;this.tohex=function(){var K=new b({oid:this.oid}),dt=new C({hex:this.getExtnValueHex()}),yt=new Array;yt.push(K),this.critical&&yt.push(new _),yt.push(dt);var O=new M({array:yt});return O.tohex()},this.getEncodedHex=function(){return this.tohex()},this.critical=!1,r!==void 0&&r.critical!==void 0&&(this.critical=r.critical)},Oe(v.asn1.x509.Extension,v.asn1.ASN1Object),v.asn1.x509.KeyUsage=function(r){v.asn1.x509.KeyUsage.superclass.constructor.call(this,r);var l=Error,o={digitalSignature:0,nonRepudiation:1,keyEncipherment:2,dataEncipherment:3,keyAgreement:4,keyCertSign:5,cRLSign:6,encipherOnly:7,decipherOnly:8};this.getExtnValueHex=function(){var h=this.getBinValue();return this.asn1ExtnValue=new v.asn1.DERBitString({bin:h}),this.asn1ExtnValue.tohex()},this.getBinValue=function(){var h=this.params;if(typeof h!="object"||typeof h.names!="object"&&typeof h.bin!="string")throw new l("parameter not yet set");if(h.names!=null)return Fi(h.names,o);if(h.bin!=null)return h.bin;throw new l("parameter not set properly")},this.oid="2.5.29.15",r!==void 0&&(this.params=r)},Oe(v.asn1.x509.KeyUsage,v.asn1.x509.Extension),v.asn1.x509.BasicConstraints=function(r){v.asn1.x509.BasicConstraints.superclass.constructor.call(this,r);var l=v.asn1,o=l.DERBoolean,h=l.DERInteger,b=l.DERSequence,C=!1,x=-1;this.getExtnValueHex=function(){var _=new Array;this.cA&&_.push(new o),this.pathLen>-1&&_.push(new h({int:this.pathLen}));var M=new b({array:_});return this.asn1ExtnValue=M,this.asn1ExtnValue.tohex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,r!==void 0&&(r.cA!==void 0&&(this.cA=r.cA),r.pathLen!==void 0&&(this.pathLen=r.pathLen))},Oe(v.asn1.x509.BasicConstraints,v.asn1.x509.Extension),v.asn1.x509.CRLDistributionPoints=function(r){v.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,r);var l=v,o=l.asn1,h=o.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.setByDPArray=function(b){for(var C=[],x=0;x<b.length;x++)if(b[x]instanceof v.asn1.ASN1Object)C.push(b[x]);else{var _=new h.DistributionPoint(b[x]);C.push(_)}this.asn1ExtnValue=new o.DERSequence({array:C})},this.setByOneURI=function(b){var C=new h.DistributionPoint({fulluri:b});this.setByDPArray([C])},this.oid="2.5.29.31",r!==void 0&&(r.array!==void 0?this.setByDPArray(r.array):r.uri!==void 0&&this.setByOneURI(r.uri))},Oe(v.asn1.x509.CRLDistributionPoints,v.asn1.x509.Extension),v.asn1.x509.DistributionPoint=function(r){v.asn1.x509.DistributionPoint.superclass.constructor.call(this);var l=null,o=v,h=o.asn1,b=h.x509.DistributionPointName;this.tohex=function(){var C=new h.DERSequence;if(this.asn1DP!=null){var x=new h.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});C.appendASN1Object(x)}return this.hTLV=C.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&(r.dpobj!==void 0?this.asn1DP=r.dpobj:r.dpname!==void 0?this.asn1DP=new b(r.dpname):r.fulluri!==void 0&&(this.asn1DP=new b({full:[{uri:r.fulluri}]})))},Oe(v.asn1.x509.DistributionPoint,v.asn1.ASN1Object),v.asn1.x509.DistributionPointName=function(r){v.asn1.x509.DistributionPointName.superclass.constructor.call(this);var l=null,o=null,h=null,b=null,C=v,x=C.asn1,_=x.DERTaggedObject;if(this.tohex=function(){if(this.type!="full")throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new _({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},r!==void 0)if(x.x509.GeneralNames.prototype.isPrototypeOf(r))this.type="full",this.tag="a0",this.asn1V=r;else if(r.full!==void 0)this.type="full",this.tag="a0",this.asn1V=new x.x509.GeneralNames(r.full);else throw new Error("This class supports GeneralNames only as argument")},Oe(v.asn1.x509.DistributionPointName,v.asn1.ASN1Object),v.asn1.x509.CertificatePolicies=function(r){v.asn1.x509.CertificatePolicies.superclass.constructor.call(this,r);var l=v,o=l.asn1,h=o.x509,b=o.DERSequence,C=h.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var x=[],_=0;_<this.params.array.length;_++)x.push(new C(this.params.array[_]));var M=new b({array:x});return this.asn1ExtnValue=M,this.asn1ExtnValue.tohex()},this.oid="2.5.29.32",r!==void 0&&(this.params=r)},Oe(v.asn1.x509.CertificatePolicies,v.asn1.x509.Extension),v.asn1.x509.PolicyInformation=function(r){v.asn1.x509.PolicyInformation.superclass.constructor.call(this,r);var l=v.asn1,o=l.DERSequence,h=l.DERObjectIdentifier,b=l.x509.PolicyQualifierInfo;this.params=null,this.tohex=function(){if(this.params.policyoid===void 0&&this.params.array===void 0)throw new Error("parameter oid and array missing");var C=[new h(this.params.policyoid)];if(this.params.array!==void 0){for(var x=[],_=0;_<this.params.array.length;_++)x.push(new b(this.params.array[_]));x.length>0&&C.push(new o({array:x}))}var M=new o({array:C});return M.tohex()},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&(this.params=r)},Oe(v.asn1.x509.PolicyInformation,v.asn1.ASN1Object),v.asn1.x509.PolicyQualifierInfo=function(r){v.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,r);var l=v.asn1,o=l.DERSequence,h=l.DERIA5String,b=l.DERObjectIdentifier,C=l.x509.UserNotice;this.params=null,this.tohex=function(){if(this.params.cps!==void 0){var x=new o({array:[new b({oid:"1.3.6.1.5.5.7.2.1"}),new h({str:this.params.cps})]});return x.tohex()}if(this.params.unotice!=null){var x=new o({array:[new b({oid:"1.3.6.1.5.5.7.2.2"}),new C(this.params.unotice)]});return x.tohex()}},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&(this.params=r)},Oe(v.asn1.x509.PolicyQualifierInfo,v.asn1.ASN1Object),v.asn1.x509.UserNotice=function(r){v.asn1.x509.UserNotice.superclass.constructor.call(this,r);var l=v.asn1.DERSequence,o=v.asn1.DERInteger,h=v.asn1.x509.DisplayText,b=v.asn1.x509.NoticeReference;this.params=null,this.tohex=function(){var C=[];this.params.noticeref!==void 0&&C.push(new b(this.params.noticeref)),this.params.exptext!==void 0&&C.push(new h(this.params.exptext));var x=new l({array:C});return x.tohex()},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&(this.params=r)},Oe(v.asn1.x509.UserNotice,v.asn1.ASN1Object),v.asn1.x509.NoticeReference=function(r){v.asn1.x509.NoticeReference.superclass.constructor.call(this,r);var l=v.asn1.DERSequence,o=v.asn1.DERInteger,h=v.asn1.x509.DisplayText;this.params=null,this.tohex=function(){var b=[];if(this.params.org!==void 0&&b.push(new h(this.params.org)),this.params.noticenum!==void 0){for(var C=[],x=this.params.noticenum,_=0;_<x.length;_++)C.push(new o(x[_]));b.push(new l({array:C}))}if(b.length==0)throw new Error("parameter is empty");var M=new l({array:b});return M.tohex()},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&(this.params=r)},Oe(v.asn1.x509.NoticeReference,v.asn1.ASN1Object),v.asn1.x509.DisplayText=function(r){v.asn1.x509.DisplayText.superclass.constructor.call(this,r),this.hT="0c",r!==void 0&&(r.type==="ia5"?this.hT="16":r.type==="vis"?this.hT="1a":r.type==="bmp"&&(this.hT="1e"))},Oe(v.asn1.x509.DisplayText,v.asn1.DERAbstractString),v.asn1.x509.PolicyMappings=function(r){v.asn1.x509.PolicyMappings.superclass.constructor.call(this,r);var l=v,o=l.asn1,h=o.x509,b=o.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){for(var C=this.params,x=[],_=0;_<C.array.length;_++){var M=C.array[_];x.push({seq:[{oid:M[0]},{oid:M[1]}]})}return this.asn1ExtnValue=b({seq:x}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.33",r!==void 0&&(this.params=r)},Oe(v.asn1.x509.PolicyMappings,v.asn1.x509.Extension),v.asn1.x509.PolicyConstraints=function(r){v.asn1.x509.PolicyConstraints.superclass.constructor.call(this,r);var l=v,o=l.asn1,h=o.x509,b=o.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){var C=this.params,x=[];return C.reqexp!=null&&x.push({tag:{tagi:"80",obj:{int:C.reqexp}}}),C.inhibit!=null&&x.push({tag:{tagi:"81",obj:{int:C.inhibit}}}),this.asn1ExtnValue=b({seq:x}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.36",r!==void 0&&(this.params=r)},Oe(v.asn1.x509.PolicyConstraints,v.asn1.x509.Extension),v.asn1.x509.InhibitAnyPolicy=function(r){v.asn1.x509.InhibitAnyPolicy.superclass.constructor.call(this,r);var l=v,o=l.asn1,h=o.x509,b=o.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=b({int:this.params.skip}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.54",r!==void 0&&(this.params=r)},Oe(v.asn1.x509.InhibitAnyPolicy,v.asn1.x509.Extension),v.asn1.x509.NameConstraints=function(r){v.asn1.x509.NameConstraints.superclass.constructor.call(this,r);var l=v,o=l.asn1,h=o.x509,b=o.ASN1Util.newObject,C=h.GeneralSubtree;this.params=null,this.getExtnValueHex=function(){var x=this.params,_=[];if(x.permit!=null&&x.permit.length!=null){for(var M=[],K=0;K<x.permit.length;K++)M.push(new C(x.permit[K]));_.push({tag:{tagi:"a0",obj:{seq:M}}})}if(x.exclude!=null&&x.exclude.length!=null){for(var dt=[],K=0;K<x.exclude.length;K++)dt.push(new C(x.exclude[K]));_.push({tag:{tagi:"a1",obj:{seq:dt}}})}return this.asn1ExtnValue=b({seq:_}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.30",r!==void 0&&(this.params=r)},Oe(v.asn1.x509.NameConstraints,v.asn1.x509.Extension),v.asn1.x509.GeneralSubtree=function(r){v.asn1.x509.GeneralSubtree.superclass.constructor.call(this);var l=v.asn1,o=l.x509,h=o.GeneralName,b=l.ASN1Util.newObject;this.params=null,this.setByParam=function(C){this.params=C},this.tohex=function(){var C=this.params,x=[new h(C)];C.min!=null&&x.push({tag:{tagi:"80",obj:{int:C.min}}}),C.max!=null&&x.push({tag:{tagi:"81",obj:{int:C.max}}});var _=b({seq:x});return _.tohex()},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&this.setByParam(r)},Oe(v.asn1.x509.GeneralSubtree,v.asn1.ASN1Object),v.asn1.x509.ExtKeyUsage=function(r){v.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,r);var l=v,o=l.asn1;this.setPurposeArray=function(h){this.asn1ExtnValue=new o.DERSequence;for(var b=0;b<h.length;b++){var C=new o.DERObjectIdentifier(h[b]);this.asn1ExtnValue.appendASN1Object(C)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.37",r!==void 0&&r.array!==void 0&&this.setPurposeArray(r.array)},Oe(v.asn1.x509.ExtKeyUsage,v.asn1.x509.Extension),v.asn1.x509.AuthorityKeyIdentifier=function(r){v.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,r);var l=v,o=l.asn1,h=o.DERTaggedObject,b=o.x509.GeneralNames,C=l.crypto.Util.isKey;this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var x=new Array;this.asn1KID&&x.push(new h({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&x.push(new h({explicit:!1,tag:"a1",obj:new b([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&x.push(new h({explicit:!1,tag:"82",obj:this.asn1CertSN}));var _=new o.DERSequence({array:x});return this.asn1ExtnValue=_,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(x){if(x.str!==void 0||x.hex!==void 0)this.asn1KID=new v.asn1.DEROctetString(x);else if(typeof x=="object"&&v.crypto.Util.isKey(x)||typeof x=="string"&&x.indexOf("BEGIN ")!=-1){var _=x;typeof x=="string"&&(_=Nr.getKey(x));var M=Nr.getKeyID(_);this.asn1KID=new v.asn1.DEROctetString({hex:M})}},this.setCertIssuerByParam=function(x){x.str!==void 0||x.ldapstr!==void 0||x.hex!==void 0||x.certsubject!==void 0||x.certissuer!==void 0?this.asn1CertIssuer=new v.asn1.x509.X500Name(x):typeof x=="string"&&x.indexOf("BEGIN ")!=-1&&x.indexOf("CERTIFICATE")!=-1&&(this.asn1CertIssuer=new v.asn1.x509.X500Name({certissuer:x}))},this.setCertSNByParam=function(x){if(x.str!==void 0||x.bigint!==void 0||x.hex!==void 0)this.asn1CertSN=new v.asn1.DERInteger(x);else if(typeof x=="string"&&x.indexOf("BEGIN ")!=-1&&x.indexOf("CERTIFICATE")){var _=new nr;_.readCertPEM(x);var M=_.getSerialNumberHex();this.asn1CertSN=new v.asn1.DERInteger({hex:M})}},this.oid="2.5.29.35",r!==void 0&&(r.kid!==void 0&&this.setKIDByParam(r.kid),r.issuer!==void 0&&this.setCertIssuerByParam(r.issuer),r.sn!==void 0&&this.setCertSNByParam(r.sn),r.issuersn!==void 0&&typeof r.issuersn=="string"&&r.issuersn.indexOf("BEGIN ")!=-1&&r.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(r.issuersn),this.setCertIssuerByParam(r.issuersn)))},Oe(v.asn1.x509.AuthorityKeyIdentifier,v.asn1.x509.Extension),v.asn1.x509.SubjectKeyIdentifier=function(r){v.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,r);var l=v,o=l.asn1,h=o.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(b){if(b.str!==void 0||b.hex!==void 0)this.asn1KID=new h(b);else if(typeof b=="object"&&v.crypto.Util.isKey(b)||typeof b=="string"&&b.indexOf("BEGIN")!=-1){var C=b;typeof b=="string"&&(C=Nr.getKey(b));var x=Nr.getKeyID(C);this.asn1KID=new v.asn1.DEROctetString({hex:x})}},this.oid="2.5.29.14",r!==void 0&&r.kid!==void 0&&this.setKIDByParam(r.kid)},Oe(v.asn1.x509.SubjectKeyIdentifier,v.asn1.x509.Extension),v.asn1.x509.AuthorityInfoAccess=function(r){v.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,r),this.setAccessDescriptionArray=function(l){for(var o=new Array,h=v,b=h.asn1,C=b.DERSequence,x=b.DERObjectIdentifier,_=b.x509.GeneralName,M=0;M<l.length;M++){var K,dt=l[M];if(dt.ocsp!==void 0)K=new C({array:[new x({oid:"1.3.6.1.5.5.7.48.1"}),new _({uri:dt.ocsp})]});else if(dt.caissuer!==void 0)K=new C({array:[new x({oid:"1.3.6.1.5.5.7.48.2"}),new _({uri:dt.caissuer})]});else throw new Error("unknown AccessMethod parameter: "+JSON.stringify(dt));o.push(K)}this.asn1ExtnValue=new C({array:o})},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.1.1",r!==void 0&&r.array!==void 0&&this.setAccessDescriptionArray(r.array)},Oe(v.asn1.x509.AuthorityInfoAccess,v.asn1.x509.Extension),v.asn1.x509.SubjectAltName=function(r){v.asn1.x509.SubjectAltName.superclass.constructor.call(this,r),this.setNameArray=function(l){this.asn1ExtnValue=new v.asn1.x509.GeneralNames(l)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.17",r!==void 0&&r.array!==void 0&&this.setNameArray(r.array)},Oe(v.asn1.x509.SubjectAltName,v.asn1.x509.Extension),v.asn1.x509.IssuerAltName=function(r){v.asn1.x509.IssuerAltName.superclass.constructor.call(this,r),this.setNameArray=function(l){this.asn1ExtnValue=new v.asn1.x509.GeneralNames(l)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.18",r!==void 0&&r.array!==void 0&&this.setNameArray(r.array)},Oe(v.asn1.x509.IssuerAltName,v.asn1.x509.Extension),v.asn1.x509.SubjectDirectoryAttributes=function(r){v.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,r);var l=v.asn1,o=l.DERSequence,h=l.ASN1Util.newObject,b=l.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var C=[],x=0;x<this.params.array.length;x++){var _=this.params.array[x];if(_.attr!=null&&_.array!=null){var M={seq:[{oid:_.attr},{set:_.array}]};C.push(h(M));continue}var K={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if(_.attr=="dateOfBirth")K.seq[0].oid=b(_.attr),K.seq[1].set[0]={gentime:_.str};else if(_.attr=="placeOfBirth")K.seq[0].oid=b(_.attr),K.seq[1].set[0]={utf8str:_.str};else if(_.attr=="gender")K.seq[0].oid=b(_.attr),K.seq[1].set[0]={prnstr:_.str};else if(_.attr=="countryOfCitizenship")K.seq[0].oid=b(_.attr),K.seq[1].set[0]={prnstr:_.str};else if(_.attr=="countryOfResidence")K.seq[0].oid=b(_.attr),K.seq[1].set[0]={prnstr:_.str};else throw new Error("unsupported attribute: "+_.attr);C.push(new h(K))}var dt=new o({array:C});return this.asn1ExtnValue=dt,this.asn1ExtnValue.tohex()},this.oid="2.5.29.9",r!==void 0&&(this.params=r)},Oe(v.asn1.x509.SubjectDirectoryAttributes,v.asn1.x509.Extension),v.asn1.x509.PrivateExtension=function(r){v.asn1.x509.PrivateExtension.superclass.constructor.call(this,r);var l=v,o=l.lang.String.isHex,h=l.asn1,b=h.x509.OID.name2oid,C=h.ASN1Util.newObject;this.params=null,this.setByParam=function(x){this.oid=b(x.extname),this.params=x},this.getExtnValueHex=function(){if(this.params.extname==null||this.params.extn==null)throw new Error("extname or extnhex not specified");var x=this.params.extn;if(typeof x=="string"&&o(x))return x;if(typeof x=="object")try{return C(x).tohex()}catch{}throw new Error("unsupported extn value")},r!=null&&this.setByParam(r)},Oe(v.asn1.x509.PrivateExtension,v.asn1.x509.Extension),v.asn1.x509.CRL=function(r){v.asn1.x509.CRL.superclass.constructor.call(this);var l=v,o=l.asn1,h=o.DERSequence,b=o.DERBitString,C=o.x509,x=C.AlgorithmIdentifier,_=C.TBSCertList;this.params=void 0,this.setByParam=function(M){this.params=M},this.sign=function(){var M=new _(this.params).tohex(),K=new v.crypto.Signature({alg:this.params.sigalg});K.init(this.params.cakey),K.updateHex(M);var dt=K.sign();this.params.sighex=dt},this.getPEM=function(){return ke(this.tohex(),"X509 CRL")},this.tohex=function(){var M=this.params;if(M.tbsobj==null&&(M.tbsobj=new _(M)),M.sighex==null&&M.cakey!=null&&this.sign(),M.sighex==null)throw new Error("sighex or cakey parameter not defined");var K=[];K.push(M.tbsobj),K.push(new x({name:M.sigalg})),K.push(new b({hex:"00"+M.sighex}));var dt=new h({array:K});return dt.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&(this.params=r)},Oe(v.asn1.x509.CRL,v.asn1.ASN1Object),v.asn1.x509.TBSCertList=function(r){v.asn1.x509.TBSCertList.superclass.constructor.call(this);var l=v,o=l.asn1,h=o.DERInteger,b=o.DERSequence,C=o.DERTaggedObject,x=o.DERObjectIdentifier,_=o.x509,M=_.AlgorithmIdentifier,K=_.Time,dt=_.Extensions,yt=_.X500Name;this.params=null,this.setByParam=function(O){this.params=O},this.getRevCertSequence=function(){for(var O=[],I=this.params.revcert,at=0;at<I.length;at++){var T=[new h(I[at].sn),new K(I[at].date)];I[at].ext!=null&&T.push(new dt(I[at].ext)),O.push(new b({array:T}))}return new b({array:O})},this.tohex=function(){var O=[],I=this.params;if(I.version!=null){var at=I.version-1,T=new h({int:at});O.push(T)}if(O.push(new M({name:I.sigalg})),O.push(new yt(I.issuer)),O.push(new K(I.thisupdate)),I.nextupdate!=null&&O.push(new K(I.nextupdate)),I.revcert!=null&&O.push(this.getRevCertSequence()),I.ext!=null){var ot=new dt(I.ext);O.push(new C({tag:"a0",explicit:!0,obj:ot}))}var X=new b({array:O});return X.tohex()},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&this.setByParam(r)},Oe(v.asn1.x509.TBSCertList,v.asn1.ASN1Object),v.asn1.x509.CRLEntry=function(r){v.asn1.x509.CRLEntry.superclass.constructor.call(this);var l=null,o=null,h=v,b=h.asn1;this.setCertSerial=function(C){this.sn=new b.DERInteger(C)},this.setRevocationDate=function(C){this.time=new b.x509.Time(C)},this.tohex=function(){var C=new b.DERSequence({array:[this.sn,this.time]});return this.TLV=C.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&(r.time!==void 0&&this.setRevocationDate(r.time),r.sn!==void 0&&this.setCertSerial(r.sn))},Oe(v.asn1.x509.CRLEntry,v.asn1.ASN1Object),v.asn1.x509.CRLNumber=function(r){v.asn1.x509.CRLNumber.superclass.constructor.call(this,r),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new v.asn1.DERInteger(this.params.num),this.asn1ExtnValue.tohex()},this.oid="2.5.29.20",r!=null&&(this.params=r)},Oe(v.asn1.x509.CRLNumber,v.asn1.x509.Extension),v.asn1.x509.CRLReason=function(r){v.asn1.x509.CRLReason.superclass.constructor.call(this,r),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new v.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.tohex()},this.oid="2.5.29.21",r!=null&&(this.params=r)},Oe(v.asn1.x509.CRLReason,v.asn1.x509.Extension),v.asn1.x509.OCSPNonce=function(r){v.asn1.x509.OCSPNonce.superclass.constructor.call(this,r),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new v.asn1.DEROctetString(this.params),this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.2",r!=null&&(this.params=r)},Oe(v.asn1.x509.OCSPNonce,v.asn1.x509.Extension),v.asn1.x509.OCSPNoCheck=function(r){v.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,r),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new v.asn1.DERNull,this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.5",r!=null&&(this.params=r)},Oe(v.asn1.x509.OCSPNoCheck,v.asn1.x509.Extension),v.asn1.x509.AdobeTimeStamp=function(r){v.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,r);var l=v,o=l.asn1,h=o.DERInteger,b=o.DERBoolean,C=o.DERSequence,x=o.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var _=this.params,M=[new h(1)];return M.push(new x({uri:_.uri})),_.reqauth!=null&&M.push(new b(_.reqauth)),this.asn1ExtnValue=new C({array:M}),this.asn1ExtnValue.tohex()},this.oid="1.2.840.113583.1.1.9.1",r!==void 0&&this.setByParam(r)},Oe(v.asn1.x509.AdobeTimeStamp,v.asn1.x509.Extension),v.asn1.x509.X500Name=function(r){v.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var l=v,o=l.asn1,h=o.x509,b=h.RDN,C=Pn;this.setByString=function(x,_){_!==void 0&&(this.sRule=_);var M=x.split("/");M.shift();for(var K=[],dt=0;dt<M.length;dt++)if(M[dt].match(/^[^=]+=.+$/))K.push(M[dt]);else{var yt=K.length-1;K[yt]=K[yt]+"/"+M[dt]}for(var dt=0;dt<K.length;dt++)this.asn1Array.push(new b({str:K[dt],rule:this.sRule}))},this.setByLdapString=function(x,_){_!==void 0&&(this.sRule=_);var M=h.X500Name.ldapToCompat(x);this.setByString(M,_)},this.setByObject=function(x,_){_!==void 0&&(this.sRule=_);for(var M in x)if(x.hasOwnProperty(M)){var K=new b({str:M+"="+x[M],rule:this.sRule});this.asn1Array?this.asn1Array.push(K):this.asn1Array=[K]}},this.setByParam=function(x){if(x.rule!==void 0&&(this.sRule=x.rule),x.array!==void 0)this.paramArray=x.array;else if(x.str!==void 0)this.setByString(x.str);else if(x.ldapstr!==void 0)this.setByLdapString(x.ldapstr);else if(x.hex!==void 0)this.hTLV=x.hex;else if(x.certissuer!==void 0){var _=new nr;_.readCertPEM(x.certissuer),this.hTLV=_.getIssuerHex()}else if(x.certsubject!==void 0){var _=new nr;_.readCertPEM(x.certsubject),this.hTLV=_.getSubjectHex()}else typeof x=="object"&&x.certsubject===void 0&&x.certissuer===void 0&&this.setByObject(x)},this.tohex=function(){if(typeof this.hTLV=="string")return this.hTLV;if(this.asn1Array.length==0&&this.paramArray.length>0)for(var x=0;x<this.paramArray.length;x++){var _={array:this.paramArray[x]};this.sRule!="utf8"&&(_.rule=this.sRule);var M=new b(_);this.asn1Array.push(M)}var K=new o.DERSequence({array:this.asn1Array});return this.hTLV=K.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&this.setByParam(r)},Oe(v.asn1.x509.X500Name,v.asn1.ASN1Object),v.asn1.x509.X500Name.compatToLDAP=function(r){if(r.substr(0,1)!=="/")throw"malformed input";var l="";r=r.substr(1);var o=r.split("/");return o.reverse(),o=o.map(function(h){return h.replace(/,/,"\\,")}),o.join(",")},v.asn1.x509.X500Name.onelineToLDAP=function(r){return v.asn1.x509.X500Name.compatToLDAP(r)},v.asn1.x509.X500Name.ldapToCompat=function(r){for(var l=r.split(","),o=!1,h=[],b=0;l.length>0;b++){var C=l.shift();if(o===!0){var x=h.pop(),_=(x+","+C).replace(/\\,/g,",");h.push(_),o=!1}else h.push(C);C.substr(-1,1)==="\\"&&(o=!0)}return h=h.map(function(M){return M.replace("/","\\/")}),h.reverse(),"/"+h.join("/")},v.asn1.x509.X500Name.ldapToOneline=function(r){return v.asn1.x509.X500Name.ldapToCompat(r)},v.asn1.x509.RDN=function(r){v.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var l=v.asn1.x509.AttributeTypeAndValue;this.setByParam=function(o){o.rule!==void 0&&(this.sRule=o.rule),o.str!==void 0&&this.addByMultiValuedString(o.str),o.array!==void 0&&(this.paramArray=o.array)},this.addByString=function(o){this.asn1Array.push(new v.asn1.x509.AttributeTypeAndValue({str:o,rule:this.sRule}))},this.addByMultiValuedString=function(o){for(var h=v.asn1.x509.RDN.parseString(o),b=0;b<h.length;b++)this.addByString(h[b])},this.tohex=function(){if(this.asn1Array.length==0&&this.paramArray.length>0)for(var o=0;o<this.paramArray.length;o++){var h=this.paramArray[o];h.rule!==void 0&&this.sRule!="utf8"&&(h.rule=this.sRule);var b=new l(h);this.asn1Array.push(b)}var C=new v.asn1.DERSet({array:this.asn1Array});return this.TLV=C.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&this.setByParam(r)},Oe(v.asn1.x509.RDN,v.asn1.ASN1Object),v.asn1.x509.RDN.parseString=function(r){for(var l=r.split(/\+/),o=!1,h=[],b=0;l.length>0;b++){var C=l.shift();if(o===!0){var x=h.pop(),_=(x+"+"+C).replace(/\\\+/g,"+");h.push(_),o=!1}else h.push(C);C.substr(-1,1)==="\\"&&(o=!0)}for(var M=!1,K=[],b=0;h.length>0;b++){var C=h.shift();if(M===!0){var dt=K.pop();if(C.match(/"$/)){var _=(dt+"+"+C).replace(/^([^=]+)="(.*)"$/,"$1=$2");K.push(_),M=!1}else K.push(dt+"+"+C)}else K.push(C);C.match(/^[^=]+="/)&&(M=!0)}return K},v.asn1.x509.AttributeTypeAndValue=function(r){v.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var l=v,o=l.asn1,h=o.DERSequence,b=o.DERUTF8String,C=o.DERPrintableString,x=o.DERTeletexString,_=o.DERIA5String,M=o.DERVisibleString,K=o.DERBMPString,dt=l.lang.String.isMail,yt=l.lang.String.isPrintable;this.setByParam=function(O){if(O.rule!==void 0&&(this.sRule=O.rule),O.ds!==void 0&&(this.dsType=O.ds),O.value===void 0&&O.str!==void 0){var I=O.str,at=I.match(/^([^=]+)=(.+)$/);if(at)this.sType=at[1],this.sValue=at[2];else throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr)}else this.sType=O.type,this.sValue=O.value},this.setByString=function(O,I){I!==void 0&&(this.sRule=I);var at=O.match(/^([^=]+)=(.+)$/);if(at)this.setByAttrTypeAndValueStr(at[1],at[2]);else throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr)},this._getDsType=function(){var O=this.sType,I=this.sValue,at=this.sRule;return at==="prn"?O=="CN"&&dt(I)?"ia5":yt(I)?"prn":"utf8":at==="utf8"?O=="CN"&&dt(I)?"ia5":O=="C"?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(O,I,at){at!==void 0&&(this.sRule=at),this.sType=O,this.sValue=I},this.getValueObj=function(O,I){if(O=="utf8")return new b({str:I});if(O=="prn")return new C({str:I});if(O=="tel")return new x({str:I});if(O=="ia5")return new _({str:I});if(O=="vis")return new M({str:I});if(O=="bmp")return new K({str:I});throw new Error("unsupported directory string type: type="+O+" value="+I)},this.tohex=function(){this.dsType==null&&(this.dsType=this._getDsType());var O=v.asn1.x509.OID.atype2obj(this.sType),I=this.getValueObj(this.dsType,this.sValue),at=new h({array:[O,I]});return this.TLV=at.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&this.setByParam(r)},Oe(v.asn1.x509.AttributeTypeAndValue,v.asn1.ASN1Object),v.asn1.x509.SubjectPublicKeyInfo=function(r){v.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var l=null,o=null,h=v,b=h.asn1,C=b.DERInteger,x=b.DERBitString,_=b.DERObjectIdentifier,M=b.DERSequence,K=b.ASN1Util.newObject,dt=b.x509,yt=dt.AlgorithmIdentifier,O=h.crypto,I=O.ECDSA,at=O.DSA;this.getASN1Object=function(){if(this.asn1AlgId==null||this.asn1SubjPKey==null)throw"algId and/or subjPubKey not set";var T=new M({array:[this.asn1AlgId,this.asn1SubjPKey]});return T},this.tohex=function(){var T=this.getASN1Object();return this.hTLV=T.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.setPubKey=function(T){try{if(T instanceof vr){var ot=K({seq:[{int:{bigint:T.n}},{int:{int:T.e}}]}),X=ot.tohex();this.asn1AlgId=new yt({name:"rsaEncryption"}),this.asn1SubjPKey=new x({hex:"00"+X})}}catch{}try{if(T instanceof v.crypto.ECDSA){var Ft=new _({name:T.curveName});this.asn1AlgId=new yt({name:"ecPublicKey",asn1params:Ft}),this.asn1SubjPKey=new x({hex:"00"+T.pubKeyHex})}}catch{}try{if(T instanceof v.crypto.DSA){var Ft=new K({seq:[{int:{bigint:T.p}},{int:{bigint:T.q}},{int:{bigint:T.g}}]});this.asn1AlgId=new yt({name:"dsa",asn1params:Ft});var Tt=new C({bigint:T.y});this.asn1SubjPKey=new x({hex:"00"+Tt.tohex()})}}catch{}},r!==void 0&&this.setPubKey(r)},Oe(v.asn1.x509.SubjectPublicKeyInfo,v.asn1.ASN1Object),v.asn1.x509.Time=function(r){v.asn1.x509.Time.superclass.constructor.call(this);var l=null,o=null,h=v,b=h.asn1,C=b.DERUTCTime,x=b.DERGeneralizedTime;this.params=null,this.type=null,this.setTimeParams=function(_){this.timeParams=_},this.setByParam=function(_){this.params=_},this.getType=function(_){return _.match(/^[0-9]{12}Z$/)?"utc":_.match(/^[0-9]{14}Z$/)?"gen":_.match(/^[0-9]{12}\.[0-9]+Z$/)?"utc":_.match(/^[0-9]{14}\.[0-9]+Z$/)?"gen":null},this.tohex=function(){var _=this.params,M=null;if(typeof _=="string"&&(_={str:_}),_!=null&&_.str&&(_.type==null||_.type==null)&&(_.type=this.getType(_.str)),_!=null&&_.str?(_.type=="utc"&&(M=new C(_.str)),_.type=="gen"&&(M=new x(_.str))):this.type=="gen"?M=new x:M=new C,M==null)throw new Error("wrong setting for Time");return this.TLV=M.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},v.asn1.x509.Time_bak=function(r){v.asn1.x509.Time_bak.superclass.constructor.call(this);var l=null,o=null,h=v,b=h.asn1,C=b.DERUTCTime,x=b.DERGeneralizedTime;this.setTimeParams=function(_){this.timeParams=_},this.tohex=function(){var _=null;return this.timeParams!=null?this.type=="utc"?_=new C(this.timeParams):_=new x(this.timeParams):this.type=="utc"?_=new C:_=new x,this.TLV=_.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},this.type="utc",r!==void 0&&(r.type!==void 0?this.type=r.type:r.str!==void 0&&(r.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),r.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=r)},Oe(v.asn1.x509.Time,v.asn1.ASN1Object),v.asn1.x509.AlgorithmIdentifier=function(r){v.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var l=v,o=l.asn1,h=o.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.tohex=function(){if(this.nameAlg===null&&this.asn1Alg===null)throw new Error("algorithm not specified");if(this.nameAlg!==null){var C=null;for(var x in h)x===this.nameAlg&&(C=h[x]);if(C!==null)return this.hTLV=C,this.hTLV}this.nameAlg!==null&&this.asn1Alg===null&&(this.asn1Alg=o.x509.OID.name2obj(this.nameAlg));var _=[this.asn1Alg];this.asn1Params!==null&&_.push(this.asn1Params);var M=new o.DERSequence({array:_});return this.hTLV=M.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&(r.name!==void 0&&(this.nameAlg=r.name),r.asn1params!==void 0&&(this.asn1Params=r.asn1params),r.paramempty!==void 0&&(this.paramEmpty=r.paramempty)),this.asn1Params===null&&this.paramEmpty===!1&&this.nameAlg!==null){this.nameAlg.name!==void 0&&(this.nameAlg=this.nameAlg.name);var b=this.nameAlg.toLowerCase();b.substr(-7,7)!=="withdsa"&&b.substr(-9,9)!=="withecdsa"&&(this.asn1Params=new o.DERNull)}},Oe(v.asn1.x509.AlgorithmIdentifier,v.asn1.ASN1Object),v.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"},v.asn1.x509.GeneralName=function(r){v.asn1.x509.GeneralName.superclass.constructor.call(this);var l={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87",otherName:"a0"},o=v,h=o.asn1,b=h.x509,C=b.X500Name,x=b.OtherName,_=h.DERIA5String,M=h.DERPrintableString,K=h.DEROctetString,dt=h.DERTaggedObject,yt=h.ASN1Object,O=Error;this.params=null,this.setByParam=function(I){this.params=I},this.tohex=function(){var I=this.params,at,ot,T,ot=!1;if(I.other!==void 0)at="a0",T=new x(I.other);else if(I.rfc822!==void 0)at="81",T=new _({str:I.rfc822});else if(I.dns!==void 0)at="82",T=new _({str:I.dns});else if(I.dn!==void 0)at="a4",ot=!0,typeof I.dn=="string"?T=new C({str:I.dn}):I.dn instanceof v.asn1.x509.X500Name?T=I.dn:T=new C(I.dn);else if(I.ldapdn!==void 0)at="a4",ot=!0,T=new C({ldapstr:I.ldapdn});else if(I.certissuer!==void 0||I.certsubj!==void 0){at="a4",ot=!0;var X,Ft,Tt=null;if(I.certsubj!==void 0?(X=!1,Ft=I.certsubj):(X=!0,Ft=I.certissuer),Ft.match(/^[0-9A-Fa-f]+$/)&&Tt==Ft,Ft.indexOf("-----BEGIN ")!=-1&&(Tt=Pn(Ft)),Tt==null)throw new Error("certsubj/certissuer not cert");var Wt=new nr;Wt.hex=Tt;var Gt;X?Gt=Wt.getIssuerHex():Gt=Wt.getSubjectHex(),T=new yt,T.hTLV=Gt}else if(I.uri!==void 0)at="86",T=new _({str:I.uri});else if(I.ip!==void 0){at="87";var ve,be=I.ip;try{if(be.match(/^[0-9a-f]+$/)){var d=be.length;if(d==8||d==16||d==32||d==64)ve=be;else throw"err"}else ve=du(be)}catch(ut){throw new O("malformed IP address: "+I.ip+":"+ut.message)}T=new K({hex:ve})}else throw new O("improper params");var B=new dt({tag:at,explicit:ot,obj:T});return B.tohex()},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&this.setByParam(r)},Oe(v.asn1.x509.GeneralName,v.asn1.ASN1Object),v.asn1.x509.GeneralNames=function(r){v.asn1.x509.GeneralNames.superclass.constructor.call(this);var l=null,o=v,h=o.asn1;this.setByParamArray=function(b){for(var C=0;C<b.length;C++){var x=new h.x509.GeneralName(b[C]);this.asn1Array.push(x)}},this.tohex=function(){var b=new h.DERSequence({array:this.asn1Array});return b.tohex()},this.getEncodedHex=function(){return this.tohex()},this.asn1Array=new Array,typeof r<"u"&&this.setByParamArray(r)},Oe(v.asn1.x509.GeneralNames,v.asn1.ASN1Object),v.asn1.x509.OtherName=function(r){v.asn1.x509.OtherName.superclass.constructor.call(this);var l=null,o=null,h=v,b=h.asn1,C=b.DERObjectIdentifier,x=b.DERSequence,_=b.ASN1Util.newObject;this.params=null,this.setByParam=function(M){this.params=M},this.tohex=function(){var M=this.params;if(M.oid==null||M.value==null)throw new Error("oid or value not specified");var K=new C({oid:M.oid}),dt=_({tag:{tag:"a0",explicit:!0,obj:M.value}}),yt=new x({array:[K,dt]});return yt.tohex()},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&this.setByParam(r)},Oe(v.asn1.x509.OtherName,v.asn1.ASN1Object),v.asn1.x509.OID=new function(){var r=v.asn1.DERObjectIdentifier;this.name2oidList={"aes128-CBC":"2.16.840.1.101.3.4.1.2","aes256-CBC":"2.16.840.1.101.3.4.1.42",sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",hmacWithSHA1:"1.2.840.113549.2.7",hmacWithSHA224:"1.2.840.113549.2.8",hmacWithSHA256:"1.2.840.113549.2.9",hmacWithSHA384:"1.2.840.113549.2.10",hmacWithSHA512:"1.2.840.113549.2.11",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",policyMappings:"2.5.29.33",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",inhibitAnyPolicy:"2.5.29.54",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",smtpUTF8Mailbox:"1.3.6.1.5.5.7.8.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",secp521r1:"1.3.132.0.35",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1",smimeMailboxLegacy:"2.23.140.1.5.1.1",smimeMailboxMulti:"2.23.140.1.5.1.2",smimeMailboxStrict:"2.23.140.1.5.1.3",smimeOrganizationLegacy:"2.23.140.1.5.2.1",smimeOrganizationMulti:"2.23.140.1.5.2.2",smimeOrganizationStrict:"2.23.140.1.5.2.3",smimeSponsorLegacy:"2.23.140.1.5.3.1",smimeSponsorMulti:"2.23.140.1.5.3.2",smimeSponsorStrict:"2.23.140.1.5.3.3",smimeIndividualLegacy:"2.23.140.1.5.4.1",smimeIndividualMulti:"2.23.140.1.5.4.2",smimeIndividualStrict:"2.23.140.1.5.4.3"},this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",GN:"2.5.4.42",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.objCache={},this.name2obj=function(l){if(typeof this.objCache[l]<"u")return this.objCache[l];if(typeof this.name2oidList[l]>"u")throw"Name of ObjectIdentifier not defined: "+l;var o=this.name2oidList[l],h=new r({oid:o});return this.objCache[l]=h,h},this.atype2obj=function(l){if(this.objCache[l]!==void 0)return this.objCache[l];var o;if(l.match(/^\d+\.\d+\.[0-9.]+$/))o=l;else if(this.atype2oidList[l]!==void 0)o=this.atype2oidList[l];else if(this.name2oidList[l]!==void 0)o=this.name2oidList[l];else throw new Error("AttributeType name undefined: "+l);var h=new r({oid:o});return this.objCache[l]=h,h},this.registerOIDs=function(l){if(this.checkOIDs(l))for(var o in l)this.name2oidList[o]=l[o]},this.checkOIDs=function(l){try{var o=Object.keys(l);return o.length==0?!1:(o.map(function(h,b,C){var x=this[h];if(!x.match(/^[0-2]\.[0-9.]+$/))throw new Error("value is not OID")},l),!0)}catch{return!1}}},v.asn1.x509.OID.oid2name=function(r){var l=v.asn1.x509.OID.name2oidList;for(var o in l)if(l[o]==r)return o;return""},v.asn1.x509.OID.oid2atype=function(r){var l=v.asn1.x509.OID.atype2oidList;for(var o in l)if(l[o]==r)return o;return r},v.asn1.x509.OID.name2oid=function(r){if(r.match(/^[0-9.]+$/))return r;var l=v.asn1.x509.OID.name2oidList;return l[r]===void 0?"":l[r]},v.asn1.x509.X509Util={},v.asn1.x509.X509Util.newCertPEM=function(r){var l=v.asn1.x509,o=l.TBSCertificate,h=l.Certificate,b=new h(r);return b.getPEM()},(typeof v>"u"||!v)&&(v={}),(typeof v.asn1>"u"||!v.asn1)&&(v.asn1={}),(typeof v.asn1.cms>"u"||!v.asn1.cms)&&(v.asn1.cms={}),v.asn1.cms.Attribute=function(r){var l=Error,o=v,h=o.asn1,b=h.DERSequence,C=h.DERSet,x=h.DERObjectIdentifier;this.params=null,this.typeOid=null,this.setByParam=function(_){this.params=_},this.getValueArray=function(){throw new l("not yet implemented abstract")},this.tohex=function(){var _=new x({oid:this.typeOid}),M=new C({array:this.getValueArray()}),K=new b({array:[_,M]});return K.tohex()},this.getEncodedHex=function(){return this.tohex()}},Oe(v.asn1.cms.Attribute,v.asn1.ASN1Object),v.asn1.cms.ContentType=function(r){var l=v,o=l.asn1;o.cms.ContentType.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.3",this.getValueArray=function(){var h=new o.DERObjectIdentifier(this.params.type);return[h]},r!=null&&this.setByParam(r)},Oe(v.asn1.cms.ContentType,v.asn1.cms.Attribute),v.asn1.cms.MessageDigest=function(r){var l=v,o=l.asn1,h=o.DEROctetString,b=o.cms;b.MessageDigest.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.4",this.getValueArray=function(){var C=new h(this.params);return[C]},r!=null&&this.setByParam(r)},Oe(v.asn1.cms.MessageDigest,v.asn1.cms.Attribute),v.asn1.cms.SigningTime=function(r){var l=v,o=l.asn1;o.cms.SigningTime.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.5",this.getValueArray=function(){var h=new o.x509.Time(this.params);return[h]},r!=null&&this.setByParam(r)},Oe(v.asn1.cms.SigningTime,v.asn1.cms.Attribute),v.asn1.cms.SigningCertificate=function(r){var l=Error,o=v,h=o.asn1,b=h.DERSequence,C=h.cms,x=C.ESSCertID,_=o.crypto;C.SigningCertificate.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.12",this.getValueArray=function(){if(this.params==null||this.params==null||this.params.array==null)throw new l("parameter 'array' not specified");for(var M=this.params.array,K=[],dt=0;dt<M.length;dt++){var yt=M[dt];r.hasis==!1&&typeof yt=="string"&&(yt.indexOf("-----BEGIN")!=-1||Ge.isASN1HEX(yt))&&(yt={cert:yt}),yt.hasis!=!1&&r.hasis==!1&&(yt.hasis=!1),K.push(new x(yt))}var O=new b({array:K}),I=new b({array:[O]});return[I]},r!=null&&this.setByParam(r)},Oe(v.asn1.cms.SigningCertificate,v.asn1.cms.Attribute),v.asn1.cms.ESSCertID=function(r){v.asn1.cms.ESSCertID.superclass.constructor.call(this);var l=Error,o=v,h=o.asn1,b=h.DEROctetString,C=h.DERSequence,x=h.cms.IssuerSerial;this.params=null,this.getCertHash=function(_,M){if(_.hash!=null)return _.hash;if(typeof _=="string"&&_.indexOf("-----BEGIN")==-1&&!Ge.isASN1HEX(_))return _;var K;if(typeof _=="string")K=_;else if(_.cert!=null)K=_.cert;else throw new l("hash nor cert unspecified");var dt;K.indexOf("-----BEGIN")!=-1?dt=Pn(K):dt=K,typeof _=="string"&&(_.indexOf("-----BEGIN")!=-1?dt=Pn(_):Ge.isASN1HEX(_)&&(dt=_));var yt;if(_.alg!=null)yt=_.alg;else if(M!=null)yt=M;else throw new l("hash alg unspecified");return o.crypto.Util.hashHex(dt,yt)},this.tohex=function(){var _=this.params,M=this.getCertHash(_,"sha1"),K=[];K.push(new b({hex:M})),(typeof _=="string"&&_.indexOf("-----BEGIN")!=-1||_.cert!=null&&_.hasis!=!1||_.issuer!=null&&_.serial!=null)&&K.push(new x(_));var dt=new C({array:K});return dt.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},Oe(v.asn1.cms.ESSCertID,v.asn1.ASN1Object),v.asn1.cms.SigningCertificateV2=function(r){var l=Error,o=v,h=o.asn1,b=h.DERSequence,C=h.x509,x=h.cms,_=x.ESSCertIDv2,M=o.crypto;x.SigningCertificateV2.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.47",this.getValueArray=function(){if(this.params==null||this.params==null||this.params.array==null)throw new l("parameter 'array' not specified");for(var K=this.params.array,dt=[],yt=0;yt<K.length;yt++){var O=K[yt];(r.alg!=null||r.hasis==!1)&&typeof O=="string"&&(O.indexOf("-----BEGIN")!=-1||Ge.isASN1HEX(O))&&(O={cert:O}),O.alg==null&&r.alg!=null&&(O.alg=r.alg),O.hasis!=!1&&r.hasis==!1&&(O.hasis=!1),dt.push(new _(O))}var I=new b({array:dt}),at=new b({array:[I]});return[at]},r!=null&&this.setByParam(r)},Oe(v.asn1.cms.SigningCertificateV2,v.asn1.cms.Attribute),v.asn1.cms.ESSCertIDv2=function(r){v.asn1.cms.ESSCertIDv2.superclass.constructor.call(this);var l=Error,o=v,h=o.asn1,b=h.DEROctetString,C=h.DERSequence,x=h.cms.IssuerSerial,_=h.x509.AlgorithmIdentifier;this.params=null,this.tohex=function(){var M=this.params,K=this.getCertHash(M,"sha256"),dt=[];M.alg!=null&&M.alg!="sha256"&&dt.push(new _({name:M.alg})),dt.push(new b({hex:K})),(typeof M=="string"&&M.indexOf("-----BEGIN")!=-1||M.cert!=null&&M.hasis!=!1||M.issuer!=null&&M.serial!=null)&&dt.push(new x(M));var yt=new C({array:dt});return yt.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},Oe(v.asn1.cms.ESSCertIDv2,v.asn1.cms.ESSCertID),v.asn1.cms.IssuerSerial=function(r){var l=Error,o=v,h=o.asn1,b=h.DERInteger,C=h.DERSequence,x=h.cms,_=h.x509,M=_.GeneralNames,K=nr;x.IssuerSerial.superclass.constructor.call(this),this.setByParam=function(dt){this.params=dt},this.tohex=function(){var dt=this.params,yt,O;if(typeof dt=="string"&&dt.indexOf("-----BEGIN")!=-1||dt.cert!=null){var I;dt.cert!=null?I=dt.cert:I=dt;var at=new K;at.readCertPEM(I),yt=at.getIssuer(),O={hex:at.getSerialNumberHex()}}else if(dt.issuer!=null&&dt.serial)yt=dt.issuer,O=dt.serial;else throw new l("cert or issuer and serial parameter not specified");var T=new M([{dn:yt}]),ot=new b(O),X=new C({array:[T,ot]});return X.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},Oe(v.asn1.cms.IssuerSerial,v.asn1.ASN1Object),v.asn1.cms.SignerIdentifier=function(r){var l=v,o=l.asn1,h=o.DERInteger,b=o.DERSequence,C=o.cms,x=C.IssuerAndSerialNumber,_=C.SubjectKeyIdentifier,M=o.x509,K=M.X500Name,dt=nr,yt=Error;C.SignerIdentifier.superclass.constructor.call(this),this.params=null,this.tohex=function(){var O=this.params;if(O.type=="isssn"){var I=new x(O);return I.tohex()}else if(O.type=="skid"){var at=new _(O);return at.tohex()}else throw new Error("wrong property for isssn or skid")},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},Oe(v.asn1.cms.SignerIdentifier,v.asn1.ASN1Object),v.asn1.cms.IssuerAndSerialNumber=function(r){var l=v,o=l.asn1,h=o.DERInteger,b=o.DERSequence,C=o.cms,x=o.x509,_=x.X500Name,M=nr,K=Error;C.IssuerAndSerialNumber.superclass.constructor.call(this),this.params=null,this.tohex=function(){var dt=this.params,yt,O;if(typeof dt=="string"&&dt.indexOf("-----BEGIN")!=-1||dt.cert!=null){var I;dt.cert!=null?I=dt.cert:I=dt;var at=new M;at.readCertPEM(I),yt=at.getIssuer(),O={hex:at.getSerialNumberHex()}}else if(dt.issuer!=null&&dt.serial)yt=dt.issuer,O=dt.serial;else throw new K("cert or issuer and serial parameter not specified");var T=new _(yt),ot=new h(O),X=new b({array:[T,ot]});return X.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(dt){this.params=dt},r!=null&&this.setByParam(r)},Oe(v.asn1.cms.IssuerAndSerialNumber,v.asn1.ASN1Object),v.asn1.cms.SubjectKeyIdentifier=function(r){var l=v,o=l.asn1,h=o.DERInteger,b=o.DERSequence,C=o.ASN1Util.newObject,x=o.cms,_=x.IssuerAndSerialName,M=x.SubjectKeyIdentifier,K=o.x509,dt=K.X500Name,yt=nr,O=Error;x.SubjectKeyIdentifier.superclass.constructor.call(this),this.tohex=function(){var I=this.params;if(I.cert==null&&I.skid==null)throw new O("property cert nor skid undefined");var at;if(I.cert!=null){var T=new yt(I.cert),ot=T.getExtSubjectKeyIdentifier();at=ot.kid.hex}else I.skid!=null&&(at=I.skid);var X=C({tag:{tage:"a0",obj:{octstr:{hex:at}}}});return X.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},Oe(v.asn1.cms.SubjectKeyIdentifier,v.asn1.ASN1Object),v.asn1.cms.AttributeList=function(r){var l=Error,o=v,h=o.asn1,b=h.DERSet,C=h.cms;C.AttributeList.superclass.constructor.call(this),this.params=null,this.hTLV=null,this.setByParam=function(x){this.params=x},this.tohex=function(){var x=this.params;if(this.hTLV!=null)return this.hTLV;var _=!0;x.sortflag!=null&&(_=x.sortflag);for(var M=x.array,K=[],dt=0;dt<M.length;dt++){var yt=M[dt],O=yt.attr;if(O=="contentType")K.push(new C.ContentType(yt));else if(O=="messageDigest")K.push(new C.MessageDigest(yt));else if(O=="signingTime")K.push(new C.SigningTime(yt));else if(O=="signingCertificate")K.push(new C.SigningCertificate(yt));else if(O=="signingCertificateV2")K.push(new C.SigningCertificateV2(yt));else if(O=="signaturePolicyIdentifier")K.push(new v.asn1.cades.SignaturePolicyIdentifier(yt));else if(O=="signatureTimeStamp"||O=="timeStampToken")K.push(new v.asn1.cades.SignatureTimeStamp(yt));else throw new l("unknown attr: "+O)}var I=new b({array:K,sortflag:_});return this.hTLV=I.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},Oe(v.asn1.cms.AttributeList,v.asn1.ASN1Object),v.asn1.cms.SignerInfo=function(r){var l=Error,o=v,h=o.asn1,b=h.DERInteger,C=h.DEROctetString,x=h.DERSequence,_=h.DERTaggedObject,M=h.cms,K=M.SignerIdentifier,dt=M.AttributeList,yt=M.ContentType,O=M.EncapsulatedContentInfo,I=M.MessageDigest,at=M.SignedData,T=h.x509,ot=T.AlgorithmIdentifier,X=o.crypto,Ft=Nr;M.SignerInfo.superclass.constructor.call(this),this.params=null,this.sign=function(){var Tt=this.params,Wt=Tt.sigalg,Gt=new dt(Tt.sattrs).tohex(),ve=Ft.getKey(Tt.signkey),be=new X.Signature({alg:Wt});be.init(ve),be.updateHex(Gt);var d=be.sign();Tt.sighex=d},this.tohex=function(){var Tt=this.params,Wt=[];if(Wt.push(new b({int:Tt.version})),Wt.push(new K(Tt.id)),Wt.push(new ot({name:Tt.hashalg})),Tt.sattrs!=null){var Gt=new dt(Tt.sattrs);try{Wt.push(new _({tag:"a0",explicit:!1,obj:Gt}))}catch(be){throw new l("si sattr error: "+be)}}if(Tt.sigalgfield!=null?Wt.push(new ot({name:Tt.sigalgfield})):Wt.push(new ot({name:Tt.sigalg})),Tt.sighex==null&&Tt.signkey!=null&&this.sign(),Wt.push(new C({hex:Tt.sighex})),Tt.uattrs!=null){var Gt=new dt(Tt.uattrs);try{Wt.push(new _({tag:"a1",explicit:!1,obj:Gt}))}catch(d){throw new l("si uattr error: "+d)}}var ve=new x({array:Wt});return ve.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},Oe(v.asn1.cms.SignerInfo,v.asn1.ASN1Object),v.asn1.cms.EncapsulatedContentInfo=function(r){var l=v,o=l.asn1,h=o.DERTaggedObject,b=o.DERSequence,C=o.DERObjectIdentifier,x=o.DEROctetString,_=o.cms;_.EncapsulatedContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var M=this.params,K=[];if(K.push(new C(M.type)),M.content!=null&&(M.content.hex!=null||M.content.str!=null)&&M.isDetached!=!0){var dt=new x(M.content),yt=new h({tag:"a0",explicit:!0,obj:dt});K.push(yt)}var O=new b({array:K});return O.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(M){this.params=M},r!=null&&this.setByParam(r)},Oe(v.asn1.cms.EncapsulatedContentInfo,v.asn1.ASN1Object),v.asn1.cms.ContentInfo=function(r){var l=v,o=l.asn1,h=o.DERTaggedObject,b=o.DERSequence,C=o.DERObjectIdentifier,x=o.x509,_=x.OID.name2obj;v.asn1.cms.ContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var M=this.params,K=[];K.push(new C(M.type));var dt=new h({tag:"a0",explicit:!0,obj:M.obj});K.push(dt);var yt=new b({array:K});return yt.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(M){this.params=M},r!=null&&this.setByParam(r)},Oe(v.asn1.cms.ContentInfo,v.asn1.ASN1Object),v.asn1.cms.SignedData=function(r){var l=Error,o=v,h=o.asn1,b=h.ASN1Object,C=h.DERInteger,x=h.DERSet,_=h.DERSequence,M=h.DERTaggedObject,K=h.cms,dt=K.EncapsulatedContentInfo,yt=K.SignerInfo,O=K.ContentInfo,I=K.CertificateSet,at=K.RevocationInfoChoices,T=h.x509,ot=T.AlgorithmIdentifier;v.asn1.cms.SignedData.superclass.constructor.call(this),this.params=null,this.checkAndFixParam=function(){var X=this.params;this._setDigestAlgs(X),this._setContentTypeByEContent(X),this._setMessageDigestByEContent(X),this._setSignerInfoVersion(X),this._setSignedDataVersion(X)},this._setDigestAlgs=function(X){for(var Ft={},Tt=X.sinfos,Wt=0;Wt<Tt.length;Wt++){var Gt=Tt[Wt];Ft[Gt.hashalg]=1}X.hashalgs=Object.keys(Ft).sort()},this._setContentTypeByEContent=function(X){for(var Ft=X.econtent.type,Tt=X.sinfos,Wt=0;Wt<Tt.length;Wt++){var Gt=Tt[Wt],ve=this._getAttrParamByName(Gt,"contentType");ve.type=Ft}},this._setMessageDigestByEContent=function(X){var Ft=X.econtent,Tt=X.econtent.type,Wt=Ft.content.hex;Wt==null&&Ft.type=="data"&&Ft.content.str!=null&&(Wt=kn(Ft.content.str));for(var Gt=X.sinfos,ve=0;ve<Gt.length;ve++){var be=Gt[ve],d=be.hashalg,B=this._getAttrParamByName(be,"messageDigest"),ut=v.crypto.Util.hashHex(Wt,d);B.hex=ut}},this._getAttrParamByName=function(X,Ft){for(var Tt=X.sattrs.array,Wt=0;Wt<Tt.length;Wt++)if(Tt[Wt].attr==Ft)return Tt[Wt]},this._setSignerInfoVersion=function(X){for(var Ft=X.sinfos,Tt=0;Tt<Ft.length;Tt++){var Wt=Ft[Tt],Gt=1;Wt.id.type=="skid"&&(Gt=3),Wt.version=Gt}},this._setSignedDataVersion=function(X){var Ft=this._getSignedDataVersion(X);X.version=Ft},this._getSignedDataVersion=function(X){if(X.revinfos!=null)for(var Ft=X.revinfos,Tt=0;Tt<Ft.length;Tt++){var Wt=Ft[Tt];if(Wt.ocsp!=null)return 5}for(var Gt=X.sinfos,Tt=0;Tt<Gt.length;Tt++){var ve=X.sinfos[Tt];if(ve.version==3)return 3}return X.econtent.type!="data"?3:1},this.tohex=function(){var X=this.params;this.getEncodedHexPrepare!=null&&this.getEncodedHexPrepare(),X.fixed!=!0&&this.checkAndFixParam();var Ft=[];Ft.push(new C({int:X.version}));for(var Tt=[],Wt=0;Wt<X.hashalgs.length;Wt++){var Gt=X.hashalgs[Wt];Tt.push(new ot({name:Gt}))}Ft.push(new x({array:Tt})),Ft.push(new dt(X.econtent)),X.certs!=null&&Ft.push(new I(X.certs)),X.revinfos!=null&&Ft.push(new at(X.revinfos));for(var ve=[],Wt=0;Wt<X.sinfos.length;Wt++){var be=X.sinfos[Wt];ve.push(new yt(be))}Ft.push(new x({array:ve}));var d=new _({array:Ft});return d.tohex()},this.getEncodedHex=function(){return this.tohex()},this.getContentInfo=function(){var X=new O({type:"signed-data",obj:this});return X},this.getContentInfoEncodedHex=function(){return this.getContentInfo().tohex()},r!=null&&this.setByParam(r)},Oe(v.asn1.cms.SignedData,v.asn1.ASN1Object),v.asn1.cms.CertificateSet=function(r){v.asn1.cms.CertificateSet.superclass.constructor.call(this);var l=Error,o=v.asn1,h=o.DERTaggedObject,b=o.DERSet,C=o.ASN1Object;this.params=null,this.tohex=function(){var x=this.params,_=[],M;if(x instanceof Array)M=x;else if(x.array!=null)M=x.array;else throw new l("cert array not specified");for(var K=0;K<M.length;K++){var dt=M[K],yt=Pn(dt),O=new C;O.hTLV=yt,_.push(O)}var I={array:_};x.sortflag==!1&&(I.sortflag=!1);var at=new b(I),T=new h({tag:"a0",explicit:!1,obj:at});return T.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},Oe(v.asn1.cms.CertificateSet,v.asn1.ASN1Object),v.asn1.cms.RevocationInfoChoices=function(r){v.asn1.cms.RevocationInfoChoices.superclass.constructor.call(this),this.params=null,this.tohex=function(){var l=this.params;if(!l instanceof Array)throw new Error("params is not array");for(var o=[],h=0;h<l.length;h++)o.push(new v.asn1.cms.RevocationInfoChoice(l[h]));var b=v.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:{set:o}}});return b.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},Oe(v.asn1.cms.RevocationInfoChoices,v.asn1.ASN1Object),v.asn1.cms.RevocationInfoChoice=function(r){v.asn1.cms.RevocationInfoChoice.superclass.constructor.call(this),this.params=null,this.tohex=function(){var l=this.params;if(l.crl!=null&&typeof l.crl=="string"){var o=l.crl;return l.crl.indexOf("-----BEGIN")!=-1&&(o=Pn(l.crl)),o}else if(l.ocsp!=null){var h=v.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:new v.asn1.cms.OtherRevocationFormat(l)}});return h.tohex()}else throw new Error("property crl or ocsp undefined")},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},Oe(v.asn1.cms.RevocationInfoChoice,v.asn1.ASN1Object),v.asn1.cms.OtherRevocationFormat=function(r){v.asn1.cms.OtherRevocationFormat.superclass.constructor.call(this);var l=Error,o=v,h=o.asn1,b=h.ASN1Util.newObject,C=o.lang.String.isHex;this.params=null,this.tohex=function(){var x=this.params;if(x.ocsp==null)throw new l("property ocsp not specified");if(!C(x.ocsp)||!Ge.isASN1HEX(x.ocsp))throw new l("ocsp value not ASN.1 hex string");var _=b({seq:[{oid:"1.3.6.1.5.5.7.16.2"},{asn1:{tlv:x.ocsp}}]});return _.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},Oe(v.asn1.cms.OtherRevocationFormat,v.asn1.ASN1Object),v.asn1.cms.CMSUtil=new function(){},v.asn1.cms.CMSUtil.newSignedData=function(r){return new v.asn1.cms.SignedData(r)},v.asn1.cms.CMSUtil.verifySignedData=function(r){var l=v,o=l.asn1,h=o.cms,b=h.SignerInfo,C=h.SignedData,x=h.SigningTime,_=h.SigningCertificate,M=h.SigningCertificateV2,K=o.cades,dt=K.SignaturePolicyIdentifier,yt=l.lang.String.isHex,O=Ge,I=O.getVbyList,at=O.getTLVbyList,T=O.getIdxbyList,ot=O.getChildIdx,X=O.getTLV,Ft=O.oidname,Tt=l.crypto.Util.hashHex;r.cms===void 0&&yt(r.cms);var Wt=r.cms,Gt=function(ie,ge){for(var Ie,br=3;br<6;br++)if(Ie=T(ie,0,[1,0,br]),Ie!==void 0){var xr=ie.substr(Ie,2);xr==="a0"&&(ge.certsIdx=Ie),xr==="a1"&&(ge.revinfosIdx=Ie),xr==="31"&&(ge.signerinfosIdx=Ie)}},ve=function(ie,ge){var Ie=ge.signerinfosIdx;if(Ie!==void 0){var br=ot(ie,Ie);ge.signerInfoIdxList=br;for(var xr=0;xr<br.length;xr++){var Fr=br[xr],Vr={idx:Fr};be(ie,Vr),ge.signerInfos.push(Vr)}}},be=function(ie,ge){var Ie=ge.idx;ge.signerid_issuer1=at(ie,Ie,[1,0],"30"),ge.signerid_serial1=I(ie,Ie,[1,1],"02"),ge.hashalg=Ft(I(ie,Ie,[2,0],"06"));var br=T(ie,Ie,[3],"a0");ge.idxSignedAttrs=br,d(ie,ge,br);var xr=ot(ie,Ie),Fr=xr.length;if(Fr<6)throw"malformed SignerInfo";ge.sigalg=Ft(I(ie,Ie,[Fr-2,0],"06")),ge.sigval=I(ie,Ie,[Fr-1],"04")},d=function(ie,ge,Ie){var br=ot(ie,Ie);ge.signedAttrIdxList=br;for(var xr=0;xr<br.length;xr++){var Fr=br[xr],Vr=I(ie,Fr,[0],"06"),Ur;Vr==="2a864886f70d010905"?(Ur=_r(I(ie,Fr,[1,0])),ge.saSigningTime=Ur):Vr==="2a864886f70d010904"&&(Ur=I(ie,Fr,[1,0],"04"),ge.saMessageDigest=Ur)}},B=function(ie,ge){if(I(ie,0,[0],"06")!=="2a864886f70d010702")return ge;ge.cmsType="signedData",ge.econtent=I(ie,0,[1,0,2,1,0]),Gt(ie,ge),ge.signerInfos=[],ve(ie,ge)},ut=function(ie,ge){for(var Ie=ge.parse.signerInfos,br=Ie.length,xr=!0,Fr=0;Fr<br;Fr++){var Vr=Ie[Fr];St(ie,ge,Vr,Fr),Vr.isValid||(xr=!1)}ge.isValid=xr},z=function(ie,ge,Ie,br){var xr=ge.parse.certsIdx,Fr;if(ge.certs===void 0){Fr=[],ge.certkeys=[];for(var Vr=ot(ie,xr),Ur=0;Ur<Vr.length;Ur++){var xn=X(ie,Vr[Ur]),pn=new nr;pn.readCertHex(xn),Fr[Ur]=pn,ge.certkeys[Ur]=pn.getPublicKey()}ge.certs=Fr}else Fr=ge.certs;ge.cccc=Fr.length,ge.cccci=Vr.length;for(var Ur=0;Ur<Fr.length;Ur++){var bi=pn.getIssuerHex(),Ns=pn.getSerialNumberHex();Ie.signerid_issuer1===bi&&Ie.signerid_serial1===Ns&&(Ie.certkey_idx=Ur)}},St=function(ie,ge,Ie,br){Ie.verifyDetail={};var xr=Ie.verifyDetail,Fr=ge.parse.econtent,Vr=Ie.hashalg,Ur=Ie.saMessageDigest;xr.validMessageDigest=!1,Tt(Fr,Vr)===Ur&&(xr.validMessageDigest=!0),z(ie,ge,Ie,br),xr.validSignatureValue=!1;var xn=Ie.sigalg,pn="31"+X(ie,Ie.idxSignedAttrs).substr(2);Ie.signedattrshex=pn;var bi=ge.certs[Ie.certkey_idx].getPublicKey(),Ns=new v.crypto.Signature({alg:xn});Ns.init(bi),Ns.updateHex(pn);var Es=Ns.verify(Ie.sigval);xr.validSignatureValue_isValid=Es,Es===!0&&(xr.validSignatureValue=!0),Ie.isValid=!1,xr.validMessageDigest&&xr.validSignatureValue&&(Ie.isValid=!0)},Mt=function(){},te={isValid:!1,parse:{}};return B(Wt,te.parse),ut(Wt,te),te},v.asn1.cms.CMSParser=function(){var r=Error,l=nr,o=new l,h=Ge,b=h.getV,C=h.getTLV,x=h.getIdxbyList,_=h.getTLVbyList,M=h.getTLVbyListEx,K=h.getVbyList,dt=h.getVbyListEx,yt=h.getChildIdx;this.getCMSSignedData=function(O){var I=_(O,0,[1,0]),at=this.getSignedData(I);return at},this.getSignedData=function(O){var I=yt(O,0),at={},T=b(O,I[0]),ot=parseInt(T,16);at.version=ot;var X=C(O,I[1]);at.hashalgs=this.getHashAlgArray(X);var Ft=C(O,I[2]);at.econtent=this.getEContent(Ft);var Tt=M(O,0,["[0]"]);Tt!=null&&(at.certs=this.getCertificateSet(Tt));var Wt=M(O,0,["[1]"]);Wt!=null;var Gt=M(O,0,[3]);return at.sinfos=this.getSignerInfos(Gt),at},this.getHashAlgArray=function(O){for(var I=yt(O,0),at=new l,T=[],ot=0;ot<I.length;ot++){var X=C(O,I[ot]),Ft=at.getAlgorithmIdentifierName(X);T.push(Ft)}return T},this.getEContent=function(O){var I={},at=K(O,0,[0]),T=K(O,0,[1,0]);return I.type=v.asn1.x509.OID.oid2name(Ge.hextooidstr(at)),I.content={hex:T},I},this.getSignerInfos=function(O){for(var I=[],at=yt(O,0),T=0;T<at.length;T++){var ot=C(O,at[T]),X=this.getSignerInfo(ot);I.push(X)}return I},this.getSignerInfo=function(O){var I={},at=yt(O,0),T=h.getInt(O,at[0],-1);T!=-1&&(I.version=T);var ot=C(O,at[1]),X=this.getIssuerAndSerialNumber(ot);I.id=X;var Ft=C(O,at[2]),Tt=o.getAlgorithmIdentifierName(Ft);I.hashalg=Tt;var Wt=M(O,0,["[0]"]);if(Wt!=null){var Gt=this.getAttributeList(Wt);I.sattrs=Gt}var ve=M(O,0,[3]),be=o.getAlgorithmIdentifierName(ve);I.sigalg=be;var d=dt(O,0,[4]);I.sighex=d;var B=M(O,0,["[1]"]);if(B!=null){var ut=this.getAttributeList(B);I.uattrs=ut}return I},this.getSignerIdentifier=function(O){if(O.substr(0,2)=="30")return this.getIssuerAndSerialNumber(O);throw new Error("SKID of signerIdentifier not supported")},this.getIssuerAndSerialNumber=function(O){var I={type:"isssn"},at=yt(O,0),T=C(O,at[0]);I.issuer=o.getX500Name(T);var ot=b(O,at[1]);return I.serial={hex:ot},I},this.getAttributeList=function(O){for(var I=[],at=yt(O,0),T=0;T<at.length;T++){var ot=C(O,at[T]),X=this.getAttribute(ot);I.push(X)}return{array:I}},this.getAttribute=function(O){var I={},at=yt(O,0),T=h.getOID(O,at[0]),ot=v.asn1.x509.OID.oid2name(T);I.attr=ot;var X=C(O,at[1]),Ft=yt(X,0);if(Ft.length==1)I.valhex=C(X,Ft[0]);else{for(var Tt=[],Wt=0;Wt<Ft.length;Wt++)Tt.push(C(X,Ft[Wt]));I.valhex=Tt}return ot=="contentType"?this.setContentType(I):ot=="messageDigest"?this.setMessageDigest(I):ot=="signingTime"?this.setSigningTime(I):ot=="signingCertificate"?this.setSigningCertificate(I):ot=="signingCertificateV2"?this.setSigningCertificateV2(I):ot=="signaturePolicyIdentifier"&&this.setSignaturePolicyIdentifier(I),I},this.setContentType=function(O){var I=h.getOIDName(O.valhex,0,null);I!=null&&(O.type=I,delete O.valhex)},this.setSigningTime=function(O){var I=b(O.valhex,0),at=_r(I);O.str=at,delete O.valhex},this.setMessageDigest=function(O){var I=b(O.valhex,0);O.hex=I,delete O.valhex},this.setSigningCertificate=function(O){var I=yt(O.valhex,0);if(I.length>0){for(var at=C(O.valhex,I[0]),T=yt(at,0),ot=[],X=0;X<T.length;X++){var Ft=C(at,T[X]),Tt=this.getESSCertID(Ft);ot.push(Tt)}O.array=ot}if(I.length>1){var Wt=C(O.valhex,I[1]);O.polhex=Wt}delete O.valhex},this.setSignaturePolicyIdentifier=function(O){var I=yt(O.valhex,0);if(I.length>0){var at=h.getOID(O.valhex,I[0]);O.oid=at}if(I.length>1){var T=new l,ot=yt(O.valhex,I[1]),X=C(O.valhex,ot[0]),Ft=T.getAlgorithmIdentifierName(X);O.alg=Ft;var Tt=b(O.valhex,ot[1]);O.hash=Tt}delete O.valhex},this.setSigningCertificateV2=function(O){var I=yt(O.valhex,0);if(I.length>0){for(var at=C(O.valhex,I[0]),T=yt(at,0),ot=[],X=0;X<T.length;X++){var Ft=C(at,T[X]),Tt=this.getESSCertIDv2(Ft);ot.push(Tt)}O.array=ot}if(I.length>1){var Wt=C(O.valhex,I[1]);O.polhex=Wt}delete O.valhex},this.getESSCertID=function(O){var I={},at=yt(O,0);if(at.length>0){var T=b(O,at[0]);I.hash=T}if(at.length>1){var ot=C(O,at[1]),X=this.getIssuerSerial(ot);X.serial!=null&&(I.serial=X.serial),X.issuer!=null&&(I.issuer=X.issuer)}return I},this.getESSCertIDv2=function(O){var I={},at=yt(O,0);if(at.length<1||3<at.length)throw new r("wrong number of elements");var T=0;if(O.substr(at[0],2)=="30"){var ot=C(O,at[0]);I.alg=o.getAlgorithmIdentifierName(ot),T++}else I.alg="sha256";var X=b(O,at[T]);if(I.hash=X,at.length>T+1){var Ft=C(O,at[T+1]),Tt=this.getIssuerSerial(Ft);I.issuer=Tt.issuer,I.serial=Tt.serial}return I},this.getIssuerSerial=function(O){var I={},at=yt(O,0),T=C(O,at[0]),ot=o.getGeneralNames(T),X=ot[0].dn;I.issuer=X;var Ft=b(O,at[1]);return I.serial={hex:Ft},I},this.getCertificateSet=function(O){for(var I=yt(O,0),at=[],T=0;T<I.length;T++){var ot=C(O,I[T]);if(ot.substr(0,2)=="30"){var X=ke(ot,"CERTIFICATE");at.push(X)}}return{array:at,sortflag:!1}}},(typeof v>"u"||!v)&&(v={}),(typeof v.asn1>"u"||!v.asn1)&&(v.asn1={}),(typeof v.asn1.tsp>"u"||!v.asn1.tsp)&&(v.asn1.tsp={}),v.asn1.tsp.TimeStampToken=function(r){var l=v,o=l.asn1,h=o.tsp;h.TimeStampToken.superclass.constructor.call(this),this.params=null,this.getEncodedHexPrepare=function(){var b=new h.TSTInfo(this.params.econtent.content);this.params.econtent.content.hex=b.tohex()},r!=null&&this.setByParam(r)},Oe(v.asn1.tsp.TimeStampToken,v.asn1.cms.SignedData),v.asn1.tsp.TSTInfo=function(r){var l=Error,o=v,h=o.asn1,b=h.DERSequence,C=h.DERInteger,x=h.DERBoolean,_=h.DERGeneralizedTime,M=h.DERObjectIdentifier,K=h.DERTaggedObject,dt=h.tsp,yt=dt.MessageImprint,O=dt.Accuracy,I=h.x509.X500Name,at=h.x509.GeneralName;if(dt.TSTInfo.superclass.constructor.call(this),this.dVersion=new C({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerial=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.tohex=function(){var T=[this.dVersion];if(this.dPolicy==null)throw new Error("policy shall be specified.");if(T.push(this.dPolicy),this.dMessageImprint==null)throw new Error("messageImprint shall be specified.");if(T.push(this.dMessageImprint),this.dSerial==null)throw new Error("serialNumber shall be specified.");if(T.push(this.dSerial),this.dGenTime==null)throw new Error("genTime shall be specified.");T.push(this.dGenTime),this.dAccuracy!=null&&T.push(this.dAccuracy),this.dOrdering!=null&&T.push(this.dOrdering),this.dNonce!=null&&T.push(this.dNonce),this.dTsa!=null&&T.push(this.dTsa);var ot=new b({array:T});return this.hTLV=ot.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},r!==void 0){if(typeof r.policy=="string"){if(!r.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new M({oid:r.policy})}r.messageImprint!==void 0&&(this.dMessageImprint=new yt(r.messageImprint)),r.serial!==void 0&&(this.dSerial=new C(r.serial)),r.genTime!==void 0&&(this.dGenTime=new _(r.genTime)),r.accuracy!==void 0&&(this.dAccuracy=new O(r.accuracy)),r.ordering!==void 0&&r.ordering==!0&&(this.dOrdering=new x),r.nonce!==void 0&&(this.dNonce=new C(r.nonce)),r.tsa!==void 0&&(this.dTsa=new K({tag:"a0",explicit:!0,obj:new at({dn:r.tsa})}))}},Oe(v.asn1.tsp.TSTInfo,v.asn1.ASN1Object),v.asn1.tsp.Accuracy=function(r){var l=v,o=l.asn1,h=o.ASN1Util.newObject;o.tsp.Accuracy.superclass.constructor.call(this),this.params=null,this.tohex=function(){var b=this.params,C=[];return b.seconds!=null&&typeof b.seconds=="number"&&C.push({int:b.seconds}),b.millis!=null&&typeof b.millis=="number"&&C.push({tag:{tagi:"80",obj:{int:b.millis}}}),b.micros!=null&&typeof b.micros=="number"&&C.push({tag:{tagi:"81",obj:{int:b.micros}}}),h({seq:C}).tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},Oe(v.asn1.tsp.Accuracy,v.asn1.ASN1Object),v.asn1.tsp.MessageImprint=function(r){var l=v,o=l.asn1,h=o.DERSequence,b=o.DEROctetString,C=o.x509,x=C.AlgorithmIdentifier;o.tsp.MessageImprint.superclass.constructor.call(this),this.params=null,this.tohex=function(){var _=this.params,M=new x({name:_.alg}),K=new b({hex:_.hash}),dt=new h({array:[M,K]});return dt.tohex()},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&this.setByParam(r)},Oe(v.asn1.tsp.MessageImprint,v.asn1.ASN1Object),v.asn1.tsp.TimeStampReq=function(r){var l=v,o=l.asn1,h=o.DERSequence,b=o.DERInteger,C=o.DERBoolean,x=o.ASN1Object,_=o.DERObjectIdentifier,M=o.tsp,K=M.MessageImprint;M.TimeStampReq.superclass.constructor.call(this),this.params=null,this.tohex=function(){var dt=this.params,yt=[];yt.push(new b({int:1})),dt.messageImprint instanceof v.asn1.ASN1Object?yt.push(dt.messageImprint):yt.push(new K(dt.messageImprint)),dt.policy!=null&&yt.push(new _(dt.policy)),dt.nonce!=null&&yt.push(new b(dt.nonce)),dt.certreq==!0&&yt.push(new C);var O=new h({array:yt});return O.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},Oe(v.asn1.tsp.TimeStampReq,v.asn1.ASN1Object),v.asn1.tsp.TimeStampResp=function(r){var l=v,o=l.asn1,h=o.DERSequence,b=o.ASN1Object,C=o.tsp,x=C.PKIStatusInfo;C.TimeStampResp.superclass.constructor.call(this),this.params=null,this.tohex=function(){var _=this.params,M=[];if(_.econtent!=null||_.tst!=null)if(_.statusinfo!=null?M.push(new x(_.statusinfo)):M.push(new x("granted")),_.econtent!=null)M.push(new C.TimeStampToken(_).getContentInfo());else if(_.tst instanceof o.ASN1Object)M.push(_.tst);else throw new Error("improper member tst value");else if(_.statusinfo!=null)M.push(new x(_.statusinfo));else throw new Error("parameter for token nor statusinfo not specified");var K=new h({array:M});return K.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},Oe(v.asn1.tsp.TimeStampResp,v.asn1.ASN1Object),v.asn1.tsp.PKIStatusInfo=function(r){var l=Error,o=v,h=o.asn1,b=h.DERSequence,C=h.tsp,x=C.PKIStatus,_=C.PKIFreeText,M=C.PKIFailureInfo;C.PKIStatusInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var K=this.params,dt=[];if(typeof K=="string")dt.push(new x(K));else{if(K.status==null)throw new l("property 'status' unspecified");dt.push(new x(K.status)),K.statusstr!=null&&dt.push(new _(K.statusstr)),K.failinfo!=null&&dt.push(new M(K.failinfo))}var yt=new b({array:dt});return yt.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},Oe(v.asn1.tsp.PKIStatusInfo,v.asn1.ASN1Object),v.asn1.tsp.PKIStatus=function(r){var l=Error,o=v,h=o.asn1,b=h.DERInteger,C=h.tsp;C.PKIStatus.superclass.constructor.call(this);var x={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5};this.params=null,this.tohex=function(){var _=this.params,M,K;if(typeof _=="string")try{K=x[_]}catch{throw new l("undefined name: "+_)}else if(typeof _=="number")K=_;else throw new l("unsupported params");return new b({int:K}).tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},Oe(v.asn1.tsp.PKIStatus,v.asn1.ASN1Object),v.asn1.tsp.PKIFreeText=function(r){var l=Error,o=v,h=o.asn1,b=h.DERSequence,C=h.DERUTF8String,x=h.tsp;x.PKIFreeText.superclass.constructor.call(this),this.params=null,this.tohex=function(){var _=this.params;if(!_ instanceof Array)throw new l("wrong params: not array");for(var M=[],K=0;K<_.length;K++)M.push(new C({str:_[K]}));var dt=new b({array:M});return dt.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},Oe(v.asn1.tsp.PKIFreeText,v.asn1.ASN1Object),v.asn1.tsp.PKIFailureInfo=function(r){var l=Error,o=v,h=o.asn1,b=h.DERBitString,C=h.tsp,x=C.PKIFailureInfo,_={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25};x.superclass.constructor.call(this),this.params=null,this.getBinValue=function(){var M=this.params,K=0;if(typeof M=="number"&&0<=M&&M<=25){K|=1<<M;for(var dt=K.toString(2),yt="",O=dt.length-1;O>=0;O--)yt+=dt[O];return yt}else{if(typeof M=="string"&&_[M]!=null)return Fi([M],_);if(typeof M=="object"&&M.length!=null)return Fi(M,_);throw new l("wrong params")}},this.tohex=function(){var M=this.params,K=this.getBinValue();return new b({bin:K}).tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},Oe(v.asn1.tsp.PKIFailureInfo,v.asn1.ASN1Object),v.asn1.tsp.AbstractTSAAdapter=function(r){this.getTSTHex=function(l,o){throw"not implemented yet"}},v.asn1.tsp.SimpleTSAAdapter=function(r){var l=v,o=l.asn1,h=o.tsp,b=l.crypto.Util.hashHex;h.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(C,x){var _=b(C,x);this.params.econtent.content.messageImprint={alg:x,hash:_},this.params.econtent.content.serial={int:this.serial++};var M=Math.floor(Math.random()*1e9);this.params.econtent.content.nonce={int:M};var K=new h.TimeStampToken(this.params);return K.getContentInfoEncodedHex()},r!==void 0&&(this.params=r)},Oe(v.asn1.tsp.SimpleTSAAdapter,v.asn1.tsp.AbstractTSAAdapter),v.asn1.tsp.FixedTSAAdapter=function(r){var l=v,o=l.asn1,h=o.tsp,b=l.crypto.Util.hashHex;h.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(C,x){var _=b(C,x);this.params.econtent.content.messageImprint={alg:x,hash:_};var M=new h.TimeStampToken(this.params);return M.getContentInfoEncodedHex()},r!==void 0&&(this.params=r)},Oe(v.asn1.tsp.FixedTSAAdapter,v.asn1.tsp.AbstractTSAAdapter),v.asn1.tsp.TSPUtil=new function(){},v.asn1.tsp.TSPUtil.newTimeStampToken=function(r){return new v.asn1.tsp.TimeStampToken(r)},v.asn1.tsp.TSPUtil.parseTimeStampReq=function(r){var l=new v.asn1.tsp.TSPParser;return l.getTimeStampReq(r)},v.asn1.tsp.TSPUtil.parseMessageImprint=function(r){var l=new v.asn1.tsp.TSPParser;return l.getMessageImprint(r)},v.asn1.tsp.TSPParser=function(){var r=Error,l=nr,o=new l,h=Ge,b=h.getV,C=h.getTLV,x=h.getIdxbyList,_=h.getTLVbyListEx,M=h.getChildIdx,K=["granted","grantedWithMods","rejection","waiting","revocationWarning","revocationNotification"],dt={0:"badAlg",2:"badRequest",5:"badDataFormat",14:"timeNotAvailable",15:"unacceptedPolicy",16:"unacceptedExtension",17:"addInfoNotAvailable",25:"systemFailure"};this.getResponse=function(yt){var O=M(yt,0);if(O.length==1)return this.getPKIStatusInfo(C(yt,O[0]));if(O.length>1){var I=this.getPKIStatusInfo(C(yt,O[0])),at=C(yt,O[1]),T=this.getToken(at);return T.statusinfo=I,T}},this.getToken=function(yt){var O=new v.asn1.cms.CMSParser,I=O.getCMSSignedData(yt);return this.setTSTInfo(I),I},this.setTSTInfo=function(yt){var O=yt.econtent;if(O.type=="tstinfo"){var I=O.content.hex,at=this.getTSTInfo(I);O.content=at}},this.getTSTInfo=function(yt){var O={},I=M(yt,0),at=b(yt,I[1]);O.policy=ye(at);var T=C(yt,I[2]);O.messageImprint=this.getMessageImprint(T);var ot=b(yt,I[3]);O.serial={hex:ot};var X=b(yt,I[4]);O.genTime={str:_r(X)};var Ft=0;if(I.length>5&&yt.substr(I[5],2)=="30"){var Tt=C(yt,I[5]);O.accuracy=this.getAccuracy(Tt),Ft++}if(I.length>5+Ft&&yt.substr(I[5+Ft],2)=="01"){var Wt=b(yt,I[5+Ft]);Wt=="ff"&&(O.ordering=!0),Ft++}if(I.length>5+Ft&&yt.substr(I[5+Ft],2)=="02"){var Gt=b(yt,I[5+Ft]);O.nonce={hex:Gt},Ft++}if(I.length>5+Ft&&yt.substr(I[5+Ft],2)=="a0"){var ve=C(yt,I[5+Ft]);ve="30"+ve.substr(2),pGeneralNames=o.getGeneralNames(ve);var be=pGeneralNames[0].dn;O.tsa=be,Ft++}if(I.length>5+Ft&&yt.substr(I[5+Ft],2)=="a1"){var d=C(yt,I[5+Ft]);d="30"+d.substr(2);var B=o.getExtParamArray(d);O.ext=B,Ft++}return O},this.getAccuracy=function(yt){for(var O={},I=M(yt,0),at=0;at<I.length;at++){var T=yt.substr(I[at],2),ot=b(yt,I[at]),X=parseInt(ot,16);T=="02"?O.seconds=X:T=="80"?O.millis=X:T=="81"&&(O.micros=X)}return O},this.getMessageImprint=function(yt){if(yt.substr(0,2)!="30")throw new Error("head of messageImprint hex shall be x30");var O={},I=M(yt,0),at=x(yt,0,[0,0]),T=b(yt,at),ot=h.hextooidstr(T),X=v.asn1.x509.OID.oid2name(ot);if(X=="")throw new Error("hashAlg name undefined: "+ot);var Ft=X,Tt=x(yt,0,[1]);return O.alg=Ft,O.hash=b(yt,Tt),O},this.getPKIStatusInfo=function(yt){var O={},I=M(yt,0),at=0;try{var T=b(yt,I[0]),ot=parseInt(T,16);O.status=K[ot]}catch{}if(I.length>1&&yt.substr(I[1],2)=="30"){var X=C(yt,I[1]);O.statusstr=this.getPKIFreeText(X),at++}if(I.length>at&&yt.substr(I[1+at],2)=="03"){var Ft=C(yt,I[1+at]);O.failinfo=this.getPKIFailureInfo(Ft)}return O},this.getPKIFreeText=function(yt){for(var O=[],I=M(yt,0),at=0;at<I.length;at++)O.push(h.getString(yt,I[at]));return O},this.getPKIFailureInfo=function(yt){var O=h.getInt(yt,0);return dt[O]!=null?dt[O]:O},this.getTimeStampReq=function(yt){var O={};O.certreq=!1;var I=M(yt,0);if(I.length<2)throw new Error("TimeStampReq must have at least 2 items");var at=C(yt,I[1]);O.messageImprint=v.asn1.tsp.TSPUtil.parseMessageImprint(at);for(var T=2;T<I.length;T++){var ot=I[T],X=yt.substr(ot,2);if(X=="06"){var Ft=b(yt,ot);O.policy=h.hextooidstr(Ft)}X=="02"&&(O.nonce=b(yt,ot)),X=="01"&&(O.certreq=!0)}return O}},(typeof v>"u"||!v)&&(v={}),(typeof v.asn1>"u"||!v.asn1)&&(v.asn1={}),(typeof v.asn1.cades>"u"||!v.asn1.cades)&&(v.asn1.cades={}),v.asn1.cades.SignaturePolicyIdentifier=function(r){var l=v,o=l.asn1,h=o.cades,b=h.SignaturePolicyId;h.SignaturePolicyIdentifier.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.15",this.params=null,this.getValueArray=function(){return[new b(this.params)]},this.setByParam=function(C){this.params=C},r!=null&&this.setByParam(r)},Oe(v.asn1.cades.SignaturePolicyIdentifier,v.asn1.cms.Attribute),v.asn1.cades.SignaturePolicyId=function(r){var l=v,o=l.asn1,h=o.DERSequence,b=o.DERObjectIdentifier,C=o.x509,x=C.AlgorithmIdentifier,_=o.cades,M=_.SignaturePolicyId,K=_.OtherHashAlgAndValue;M.superclass.constructor.call(this),this.params=null,this.tohex=function(){var dt=this.params,yt=[];yt.push(new b(dt.oid)),yt.push(new K(dt));var O=new h({array:yt});return O.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(dt){this.params=dt},r!=null&&this.setByParam(r)},Oe(v.asn1.cades.SignaturePolicyId,v.asn1.ASN1Object),v.asn1.cades.OtherHashAlgAndValue=function(r){var l=Error,o=v,h=o.asn1,b=h.DERSequence,C=h.DEROctetString,x=h.x509,_=x.AlgorithmIdentifier,M=h.cades,K=M.OtherHashAlgAndValue;K.superclass.constructor.call(this),this.params=null,this.tohex=function(){var dt=this.params;if(dt.alg==null)throw new l("property 'alg' not specified");if(dt.hash==null&&dt.cert==null)throw new l("property 'hash' nor 'cert' not specified");var yt=null;if(dt.hash!=null)yt=dt.hash;else if(dt.cert!=null){if(typeof dt.cert!="string")throw new l("cert not string");var O=dt.cert;dt.cert.indexOf("-----BEGIN")!=-1&&(O=Pn(dt.cert)),yt=v.crypto.Util.hashHex(O,dt.alg)}var I=[];I.push(new _({name:dt.alg})),I.push(new C({hex:yt}));var at=new b({array:I});return at.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},Oe(v.asn1.cades.OtherHashAlgAndValue,v.asn1.ASN1Object),v.asn1.cades.OtherHashValue=function(r){v.asn1.cades.OtherHashValue.superclass.constructor.call(this);var l=Error,o=v,h=o.lang.String.isHex,b=o.asn1,C=b.DEROctetString,x=o.crypto.Util.hashHex;this.params=null,this.tohex=function(){var _=this.params;if(_.hash==null&&_.cert==null)throw new l("hash or cert not specified");var M=null;if(_.hash!=null)M=_.hash;else if(_.cert!=null){if(typeof _.cert!="string")throw new l("cert not string");var K=_.cert;_.cert.indexOf("-----BEGIN")!=-1&&(K=Pn(_.cert)),M=v.crypto.Util.hashHex(K,"sha1")}return new C({hex:M}).tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},Oe(v.asn1.cades.OtherHashValue,v.asn1.ASN1Object),v.asn1.cades.SignatureTimeStamp=function(r){var l=Error,o=v,h=o.lang.String.isHex,b=o.asn1,C=b.ASN1Object,x=b.x509,_=b.cades;_.SignatureTimeStamp.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.14",this.params=null,this.getValueArray=function(){var M=this.params;if(M.tst!=null)if(h(M.tst)){var K=new C;return K.hTLV=M.tst,[K]}else{if(M.tst instanceof C)return[M.tst];throw new l("params.tst has wrong value")}else if(M.res!=null){var dt=M.res;if(dt instanceof C&&(dt=dt.tohex()),typeof dt!="string"||!h(dt))throw new l("params.res has wrong value");var yt=Ge.getTLVbyList(dt,0,[1]),K=new C;return K.hTLV=M.tst,[K]}},r!=null&&this.setByParam(r)},Oe(v.asn1.cades.SignatureTimeStamp,v.asn1.cms.Attribute),v.asn1.cades.CompleteCertificateRefs=function(r){var l=Error,o=v,h=o.asn1,b=h.DERSequence,C=h.cades,x=C.OtherCertID,_=o.lang.String.isHex;C.CompleteCertificateRefs.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.21",this.params=null,this.getValueArray=function(){for(var M=this.params,K=[],dt=0;dt<M.array.length;dt++){var yt=M.array[dt];if(typeof yt=="string")if(yt.indexOf("-----BEGIN")!=-1)yt={cert:yt};else if(_(yt))yt={hash:yt};else throw new l("unsupported value: "+yt);M.alg!=null&&yt.alg==null&&(yt.alg=M.alg),M.hasis!=null&&yt.hasis==null&&(yt.hasis=M.hasis);var O=new x(yt);K.push(O)}var I=new b({array:K});return[I]},r!=null&&this.setByParam(r)},Oe(v.asn1.cades.CompleteCertificateRefs,v.asn1.cms.Attribute),v.asn1.cades.OtherCertID=function(r){var l=v,o=l.asn1,h=o.DERSequence,b=o.cms,C=b.IssuerSerial,x=o.cades,_=x.OtherHashValue,M=x.OtherHashAlgAndValue;x.OtherCertID.superclass.constructor.call(this),this.params=r,this.tohex=function(){var K=this.params;typeof K=="string"&&(K.indexOf("-----BEGIN")!=-1?K={cert:K}:_isHex(K)&&(K={hash:K}));var dt=[],yt=null;if(K.alg!=null?yt=new M(K):yt=new _(K),dt.push(yt),K.cert!=null&&K.hasis==!0||K.issuer!=null&&K.serial!=null){var O=new C(K);dt.push(O)}var I=new h({array:dt});return I.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},Oe(v.asn1.cades.OtherCertID,v.asn1.ASN1Object),v.asn1.cades.OtherHash=function(r){var l=Error,o=v,h=o.asn1,b=h.cms,C=h.cades,x=C.OtherHashAlgAndValue,_=C.OtherHashValue,M=o.crypto.Util.hashHex,K=o.lang.String.isHex;C.OtherHash.superclass.constructor.call(this),this.params=null,this.tohex=function(){var dt=this.params;typeof dt=="string"&&(dt.indexOf("-----BEGIN")!=-1?dt={cert:dt}:K(dt)&&(dt={hash:dt}));var yt=null;return dt.alg!=null?yt=new x(dt):yt=new _(dt),yt.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},Oe(v.asn1.cades.OtherHash,v.asn1.ASN1Object),v.asn1.cades.CAdESUtil=new function(){},v.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(r){var l=new v.asn1.cms.CMSParser,o=l.getCMSSignedData(r);return o},v.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(r,l,o){var h=Ge,b=h.getChildIdx,C=h.getTLV,x=h.getV,_=v,M=_.asn1,K=M.ASN1Object,dt=M.cms,yt=dt.AttributeList,O=dt.SignerInfo,I={},at=b(r,l);if(at.length!=6)throw"not supported items for SignerInfo (!=6)";var T=at.shift();I.version=C(r,T);var ot=at.shift();I.si=C(r,ot);var X=at.shift();I.digalg=C(r,X);var Ft=at.shift();I.sattrs=C(r,Ft);var Tt=at.shift();I.sigalg=C(r,Tt);var Wt=at.shift();I.sig=C(r,Wt),I.sigval=x(r,Wt);var Gt=null;return I.obj=new O,Gt=new K,Gt.hTLV=I.version,I.obj.dCMSVersion=Gt,Gt=new K,Gt.hTLV=I.si,I.obj.dSignerIdentifier=Gt,Gt=new K,Gt.hTLV=I.digalg,I.obj.dDigestAlgorithm=Gt,Gt=new K,Gt.hTLV=I.sattrs,I.obj.dSignedAttrs=Gt,Gt=new K,Gt.hTLV=I.sigalg,I.obj.dSigAlg=Gt,Gt=new K,Gt.hTLV=I.sig,I.obj.dSig=Gt,I.obj.dUnsignedAttrs=new yt,I},(typeof v.asn1.csr>"u"||!v.asn1.csr)&&(v.asn1.csr={}),v.asn1.csr.CertificationRequest=function(r){var l=v,o=l.asn1,h=o.DERBitString,b=o.DERSequence,C=o.csr,x=o.x509,_=C.CertificationRequestInfo;C.CertificationRequest.superclass.constructor.call(this),this.setByParam=function(M){this.params=M},this.sign=function(){var M=new _(this.params).tohex(),K=new v.crypto.Signature({alg:this.params.sigalg});K.init(this.params.sbjprvkey),K.updateHex(M);var dt=K.sign();this.params.sighex=dt},this.getPEM=function(){return ke(this.tohex(),"CERTIFICATE REQUEST")},this.tohex=function(){var M=this.params,K=new v.asn1.csr.CertificationRequestInfo(this.params),dt=new v.asn1.x509.AlgorithmIdentifier({name:M.sigalg});if(M.sighex==null&&M.sbjprvkey!=null&&this.sign(),M.sighex==null)throw new Error("sighex or sbjprvkey parameter not defined");var yt=new h({hex:"00"+M.sighex}),O=new b({array:[K,dt,yt]});return O.tohex()},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&this.setByParam(r)},Oe(v.asn1.csr.CertificationRequest,v.asn1.ASN1Object),v.asn1.csr.CertificationRequestInfo=function(r){var l=v,o=l.asn1,h=o.DERBitString,b=o.DERSequence,C=o.DERInteger,x=o.DERUTF8String,_=o.DERTaggedObject,M=o.ASN1Util.newObject,K=o.csr,dt=o.x509,yt=dt.X500Name,O=dt.Extensions,I=dt.SubjectPublicKeyInfo,at=K.AttributeList;K.CertificationRequestInfo.superclass.constructor.call(this),this.params=null,this.setByParam=function(ot){ot!=null&&(this.params=ot)},this.tohex=function(){var ot=this.params,X=[];if(X.push(new C({int:0})),X.push(new yt(ot.subject)),X.push(new I(Nr.getKey(ot.sbjpubkey))),ot.attrs!=null){var Ft=T(ot.attrs),Tt=M({tag:{tage:"a0",obj:Ft}});X.push(Tt)}else if(ot.extreq!=null){var Wt=new O(ot.extreq),Tt=M({tag:{tage:"a0",obj:{seq:[{oid:"1.2.840.113549.1.9.14"},{set:[Wt]}]}}});X.push(Tt)}else X.push(new _({tag:"a0",explicit:!1,obj:new x({str:""})}));var Gt=new b({array:X});return Gt.tohex()},this.getEncodedHex=function(){return this.tohex()};function T(ot){for(var X=Error,Ft=v.asn1.x509.Extensions,Tt=[],Wt=0;Wt<ot.length;Wt++){var Gt=ot[Wt],ve=Gt.attr;if(ve=="extensionRequest"){var be=new Ft(Gt.ext),d={seq:[{oid:"1.2.840.113549.1.9.14"},{set:[be]}]};Tt.push(d)}else if(ve=="unstructuredName"){var d={seq:[{oid:"1.2.840.113549.1.9.2"},{set:Gt.names}]};Tt.push(d)}else if(ve=="challengePassword"){var d={seq:[{oid:"1.2.840.113549.1.9.7"},{set:[{utf8str:Gt.password}]}]};Tt.push(d)}else throw new X("unknown CSR attribute")}return{set:Tt}}r!=null&&this.setByParam(r)},Oe(v.asn1.csr.CertificationRequestInfo,v.asn1.ASN1Object),v.asn1.csr.AttributeList=function(r){function l(o){}},Oe(v.asn1.csr.AttributeList,v.asn1.ASN1Object),v.asn1.csr.CSRUtil=new function(){},v.asn1.csr.CSRUtil.newCSRPEM=function(r){var l=Nr,o=v.asn1.csr,h=new o.CertificationRequest(r),b=h.getPEM();return b},v.asn1.csr.CSRUtil.getParam=function(r,l){var o=Ge,h=o.getV,b=o.getIdxbyList,C=o.getTLVbyList,x=o.getTLVbyListEx,_=o.getVbyListEx,M=function(Ft){var Tt=b(Ft,0,[0,3,0,0],"06");return h(Ft,Tt)!="2a864886f70d01090e"?null:C(Ft,0,[0,3,0,1,0],"30")},K={};if(r.indexOf("-----BEGIN CERTIFICATE REQUEST")==-1)throw new Error("argument is not PEM file");var dt=Pn(r,"CERTIFICATE REQUEST");l&&(K.tbs=C(dt,0,[0]));try{var yt=x(dt,0,[0,1]);if(yt=="3000")K.subject={};else{var T=new nr;K.subject=T.getX500Name(yt)}}catch{}var O=x(dt,0,[0,2]),I=Nr.getKey(O,null,"pkcs8pub");K.sbjpubkey=Nr.getPEM(I,"PKCS8PUB");var at=M(dt),T=new nr;at!=null&&(K.extreq=T.getExtParamArray(at));try{var ot=x(dt,0,[1],"30"),T=new nr;K.sigalg=T.getAlgorithmIdentifierName(ot)}catch{}try{var X=_(dt,0,[2]);K.sighex=X}catch{}return K},v.asn1.csr.CSRUtil.verifySignature=function(r){try{var l=null;if(typeof r=="string"&&r.indexOf("-----BEGIN CERTIFICATE REQUEST")!=-1?l=v.asn1.csr.CSRUtil.getParam(r,!0):typeof r=="object"&&r.sbjpubkey!=null&&r.sigalg!=null&&r.sighex!=null&&r.tbs!=null&&(l=r),l==null)return!1;var o=new v.crypto.Signature({alg:l.sigalg});return o.init(l.sbjpubkey),o.updateHex(l.tbs),o.verify(l.sighex)}catch(h){return alert(h),!1}},(typeof v>"u"||!v)&&(v={}),(typeof v.asn1>"u"||!v.asn1)&&(v.asn1={}),(typeof v.asn1.ocsp>"u"||!v.asn1.ocsp)&&(v.asn1.ocsp={}),v.asn1.ocsp.DEFAULT_HASH="sha1",v.asn1.ocsp.OCSPResponse=function(r){v.asn1.ocsp.OCSPResponse.superclass.constructor.call(this);var l=v.asn1.DEREnumerated,o=v.asn1.ASN1Util.newObject,h=v.asn1.ocsp.ResponseBytes,b=["successful","malformedRequest","internalError","tryLater","_not_used_","sigRequired","unauthorized"];this.params=null,this._getStatusCode=function(){var C=this.params.resstatus;return typeof C=="number"?C:typeof C!="string"?-1:b.indexOf(C)},this.setByParam=function(C){this.params=C},this.tohex=function(){var C=this.params,x=this._getStatusCode();if(x==-1)throw new Error("responseStatus not supported: "+C.resstatus);if(x!=0)return o({seq:[{enum:{int:x}}]}).tohex();var _=new h(C);return o({seq:[{enum:{int:0}},{tag:{tag:"a0",explicit:!0,obj:_}}]}).tohex()},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&this.setByParam(r)},Oe(v.asn1.ocsp.OCSPResponse,v.asn1.ASN1Object),v.asn1.ocsp.ResponseBytes=function(r){v.asn1.ocsp.ResponseBytes.superclass.constructor.call(this);var l=v.asn1,o=l.DERSequence,h=l.DERObjectIdentifier,b=l.DEROctetString,C=l.ocsp.BasicOCSPResponse;this.params=null,this.setByParam=function(x){this.params=x},this.tohex=function(){var x=this.params;if(x.restype!="ocspBasic")throw new Error("not supported responseType: "+x.restype);var _=new C(x),M=[];M.push(new h({name:"ocspBasic"})),M.push(new b({hex:_.tohex()}));var K=new o({array:M});return K.tohex()},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&this.setByParam(r)},Oe(v.asn1.ocsp.ResponseBytes,v.asn1.ASN1Object),v.asn1.ocsp.BasicOCSPResponse=function(r){v.asn1.ocsp.BasicOCSPResponse.superclass.constructor.call(this);var l=Error,o=v.asn1,h=o.ASN1Object,b=o.DERSequence,C=o.DERGeneralizedTime,x=o.DERTaggedObject,_=o.DERBitString,M=o.x509.Extensions,K=o.x509.AlgorithmIdentifier,dt=o.ocsp,yt=dt.ResponderID;_SingleResponseList=dt.SingleResponseList,_ResponseData=dt.ResponseData,this.params=null,this.setByParam=function(O){this.params=O},this.sign=function(){var O=this.params,I=O.tbsresp.tohex(),at=new v.crypto.Signature({alg:O.sigalg});at.init(O.reskey),at.updateHex(I),O.sighex=at.sign()},this.tohex=function(){var O=this.params;O.tbsresp==null&&(O.tbsresp=new _ResponseData(O)),O.sighex==null&&O.reskey!=null&&this.sign();var I=[];if(I.push(O.tbsresp),I.push(new K({name:O.sigalg})),I.push(new _({hex:"00"+O.sighex})),O.certs!=null&&O.certs.length!=null){for(var at=[],T=0;T<O.certs.length;T++){var ot=O.certs[T],X=null;if(Ge.isASN1HEX(ot))X=ot;else if(ot.match(/-----BEGIN/))X=Pn(ot);else throw new l("certs["+T+"] not hex or PEM");at.push(new h({tlv:X}))}var Ft=new b({array:at});I.push(new x({tag:"a0",explicit:!0,obj:Ft}))}var Tt=new b({array:I});return Tt.tohex()},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&this.setByParam(r)},Oe(v.asn1.ocsp.BasicOCSPResponse,v.asn1.ASN1Object),v.asn1.ocsp.ResponseData=function(r){v.asn1.ocsp.ResponseData.superclass.constructor.call(this);var l=Error,o=v.asn1,h=o.DERSequence,b=o.DERGeneralizedTime,C=o.DERTaggedObject,x=o.x509.Extensions,_=o.ocsp,M=_.ResponderID;_SingleResponseList=_.SingleResponseList,this.params=null,this.tohex=function(){var K=this.params;K.respid!=null&&new l("respid not specified"),K.prodat!=null&&new l("prodat not specified"),K.array!=null&&new l("array not specified");var dt=[];if(dt.push(new M(K.respid)),dt.push(new b(K.prodat)),dt.push(new _SingleResponseList(K.array)),K.ext!=null){var yt=new x(K.ext);dt.push(new C({tag:"a1",explicit:!0,obj:yt}))}var O=new h({array:dt});return O.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(K){this.params=K},r!==void 0&&this.setByParam(r)},Oe(v.asn1.ocsp.ResponseData,v.asn1.ASN1Object),v.asn1.ocsp.ResponderID=function(r){v.asn1.ocsp.ResponderID.superclass.constructor.call(this);var l=v,o=l.asn1,h=o.ASN1Util.newObject,b=o.x509.X500Name,C=l.lang.String.isHex,x=Error;this.params=null,this.tohex=function(){var _=this.params;if(_.key!=null){var M=null;if(typeof _.key=="string"){if(C(_.key)&&(M=_.key),_.key.match(/-----BEGIN CERTIFICATE/)){var K=new nr(_.key),dt=K.getExtSubjectKeyIdentifier();dt!=null&&(M=dt.kid.hex)}}else if(_.key instanceof nr){var dt=_.key.getExtSubjectKeyIdentifier();dt!=null&&(M=dt.kid.hex)}if(M==null)throw new x("wrong key member value");var yt=h({tag:{tag:"a2",explicit:!0,obj:{octstr:{hex:M}}}});return yt.tohex()}else if(_.name!=null){var O=null;if(typeof _.name=="string"&&_.name.match(/-----BEGIN CERTIFICATE/)){var K=new nr(_.name);O=K.getSubject()}else _.name instanceof nr?O=_.name.getSubject():typeof _.name=="object"&&(_.name.array!=null||_.name.str!=null)&&(O=_.name);if(O==null)throw new x("wrong name member value");var yt=h({tag:{tag:"a1",explicit:!0,obj:new b(O)}});return yt.tohex()}throw new x("key or name not specified")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(_){this.params=_},r!==void 0&&this.setByParam(r)},Oe(v.asn1.ocsp.ResponderID,v.asn1.ASN1Object),v.asn1.ocsp.SingleResponseList=function(r){v.asn1.ocsp.SingleResponseList.superclass.constructor.call(this);var l=v.asn1,o=l.DERSequence,h=l.ocsp.SingleResponse;this.params=null,this.tohex=function(){var b=this.params;if(typeof b!="object"||b.length==null)throw new Error("params not specified properly");for(var C=[],x=0;x<b.length;x++)C.push(new h(b[x]));var _=new o({array:C});return _.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(b){this.params=b},r!==void 0&&this.setByParam(r)},Oe(v.asn1.ocsp.SingleResponseList,v.asn1.ASN1Object),v.asn1.ocsp.SingleResponse=function(r){var l=Error,o=v,h=o.asn1,b=h.DERSequence,C=h.DERGeneralizedTime,x=h.DERTaggedObject,_=h.ocsp,M=_.CertID,K=_.CertStatus,dt=h.x509,yt=dt.Extensions;_.SingleResponse.superclass.constructor.call(this),this.params=null,this.tohex=function(){var O=this.params,I=[];if(O.certid==null)throw new l("certid unspecified");if(O.status==null)throw new l("status unspecified");if(O.thisupdate==null)throw new l("thisupdate unspecified");if(I.push(new M(O.certid)),I.push(new K(O.status)),I.push(new C(O.thisupdate)),O.nextupdate!=null){var at=new C(O.nextupdate);I.push(new x({tag:"a0",explicit:!0,obj:at}))}if(O.ext!=null){var T=new yt(O.ext);I.push(new x({tag:"a1",explicit:!0,obj:T}))}var ot=new b({array:I});return ot.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(O){this.params=O},r!==void 0&&this.setByParam(r)},Oe(v.asn1.ocsp.SingleResponse,v.asn1.ASN1Object),v.asn1.ocsp.CertID=function(r){var l=v,o=l.asn1,h=o.DEROctetString,b=o.DERInteger,C=o.DERSequence,x=o.x509,_=x.AlgorithmIdentifier,M=o.ocsp,K=M.DEFAULT_HASH,dt=l.crypto,yt=dt.Util.hashHex,O=nr,I=Ge,at=I.getVbyList;M.CertID.superclass.constructor.call(this),this.DEFAULT_HASH="sha1",this.params=null,this.setByValue=function(T,ot,X,Ft){Ft==null&&(Ft=this.DEFAULT_HASH),this.params={alg:Ft,issname:T,isskey:ot,sbjsn:X}},this.setByCert=function(T,ot,X){X==null&&(X=this.DEFAULT_HASH),this.params={alg:X,issuerCert:T,subjectCert:ot}},this.getParamByCerts=function(T,ot,X){X==null&&(X=this.DEFAULT_HASH);var Ft=new O(T),Tt=new O(ot),Wt=yt(Ft.getSubjectHex(),X),Gt=Ft.getPublicKeyHex(),ve=yt(at(Gt,0,[1],"03",!0),X),be=Tt.getSerialNumberHex(),d={alg:X,issname:Wt,isskey:ve,sbjsn:be};return d},this.tohex=function(){if(typeof this.params!="object")throw new Error("params not set");var T=this.params,ot,X,Ft,Tt;if(T.alg==null?Tt=this.DEFAULT_HASH:Tt=T.alg,T.issuerCert!=null&&T.subjectCert!=null){var Wt=this.getParamByCerts(T.issuerCert,T.subjectCert,Tt);ot=Wt.issname,X=Wt.isskey,Ft=Wt.sbjsn}else if(T.issname!=null&&T.isskey!=null&&T.sbjsn!=null)ot=T.issname,X=T.isskey,Ft=T.sbjsn;else throw new Error("required param members not defined");var Gt=new _({name:Tt}),ve=new h({hex:ot}),be=new h({hex:X}),d=new b({hex:Ft}),B=new C({array:[Gt,ve,be,d]});return this.hTLV=B.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&this.setByParam(r)},Oe(v.asn1.ocsp.CertID,v.asn1.ASN1Object),v.asn1.ocsp.CertStatus=function(r){v.asn1.ocsp.CertStatus.superclass.constructor.call(this),this.params=null,this.tohex=function(){var l=this.params;if(l.status=="good")return"8000";if(l.status=="unknown")return"8200";if(l.status=="revoked"){var o=[{gentime:{str:l.time}}];l.reason!=null&&o.push({tag:{tag:"a0",explicit:!0,obj:{enum:{int:l.reason}}}});var h={tag:"a1",explicit:!1,obj:{seq:o}};return v.asn1.ASN1Util.newObject({tag:h}).tohex()}throw new Error("bad status")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(l){this.params=l},r!==void 0&&this.setByParam(r)},Oe(v.asn1.ocsp.CertStatus,v.asn1.ASN1Object),v.asn1.ocsp.Request=function(r){var l=v,o=l.asn1,h=o.DERSequence,b=o.ocsp;if(b.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.tohex=function(){var x=[];if(this.dReqCert===null)throw"reqCert not set";x.push(this.dReqCert);var _=new h({array:x});return this.hTLV=_.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},typeof r<"u"){var C=new b.CertID(r);this.dReqCert=C}},Oe(v.asn1.ocsp.Request,v.asn1.ASN1Object),v.asn1.ocsp.TBSRequest=function(r){var l=v,o=l.asn1,h=o.DERSequence,b=o.ocsp;b.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(C){for(var x=[],_=0;_<C.length;_++){var M=new b.Request(C[0]);x.push(M)}this.dRequestList=x},this.tohex=function(){var C=[];if(this.version!==0)throw"not supported version: "+this.version;if(this.dRequestorName!==null)throw"requestorName not supported";var x=new h({array:this.dRequestList});if(C.push(x),this.dRequestExt!==null)throw"requestExtensions not supported";var _=new h({array:C});return this.hTLV=_.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&r.reqList!==void 0&&this.setRequestListByParam(r.reqList)},Oe(v.asn1.ocsp.TBSRequest,v.asn1.ASN1Object),v.asn1.ocsp.OCSPRequest=function(r){var l=v,o=l.asn1,h=o.DERSequence,b=o.ocsp;if(b.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.tohex=function(){var x=[];if(this.dTbsRequest!==null)x.push(this.dTbsRequest);else throw"tbsRequest not set";if(this.dOptionalSignature!==null)throw"optionalSignature not supported";var _=new h({array:x});return this.hTLV=_.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&r.reqList!==void 0){var C=new b.TBSRequest(r);this.dTbsRequest=C}},Oe(v.asn1.ocsp.OCSPRequest,v.asn1.ASN1Object),v.asn1.ocsp.OCSPUtil={},v.asn1.ocsp.OCSPUtil.getRequestHex=function(r,l,o){var h=v,b=h.asn1,C=b.ocsp;o===void 0&&(o=C.DEFAULT_HASH);var x={alg:o,issuerCert:r,subjectCert:l},_=new C.OCSPRequest({reqList:[x]});return _.tohex()},v.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(r){var l=Ge,o=l.getVbyList,h=l.getVbyListEx,b=l.getIdxbyList,C=l.getIdxbyListEx,x=l.getV,_={};try{var M=h(r,0,[0],"0a");_.responseStatus=parseInt(M,16)}catch{}if(_.responseStatus!==0)return _;try{var K=b(r,0,[1,0,1,0,0,2,0,1]);r.substr(K,2)==="80"?_.certStatus="good":r.substr(K,2)==="a1"?(_.certStatus="revoked",_.revocationTime=_r(o(r,K,[0]))):r.substr(K,2)==="82"&&(_.certStatus="unknown")}catch{}try{var dt=b(r,0,[1,0,1,0,0,2,0,2]);_.thisUpdate=_r(x(r,dt))}catch{}try{var yt=b(r,0,[1,0,1,0,0,2,0,3]);r.substr(yt,2)==="a0"&&(_.nextUpdate=_r(o(r,yt,[0])))}catch{}return _},v.asn1.ocsp.OCSPParser=function(){var r=Error,l=nr,o=new l,h=Ge,b=h.getV,C=h.getTLV,x=h.getIdxbyList,_=h.getVbyList,M=h.getTLVbyList,K=h.getVbyListEx,dt=h.getTLVbyListEx,yt=h.getChildIdx;this.getOCSPRequest=function(O){var I=yt(O,0);if(I.length!=1&&I.length!=2)throw new r("wrong number elements: "+I.length);var at=this.getTBSRequest(C(O,I[0]));return at},this.getTBSRequest=function(O){var I={},at=dt(O,0,[0],"30");I.array=this.getRequestList(at);var T=dt(O,0,["[2]",0],"30");return T!=null&&(I.ext=o.getExtParamArray(T)),I},this.getRequestList=function(O){for(var I=[],at=yt(O,0),T=0;T<at.length;T++){var O=C(O,at[T]);I.push(this.getRequest(O))}return I},this.getRequest=function(O){var I=yt(O,0);if(I.length!=1&&I.length!=2)throw new r("wrong number elements: "+I.length);var at=this.getCertID(C(O,I[0]));if(I.length==2){var T=x(O,0,[1,0]);at.ext=o.getExtParamArray(C(O,T))}return at},this.getCertID=function(O){var I=yt(O,0);if(I.length!=4)throw new r("wrong number elements: "+I.length);var at=new l,T={};return T.alg=at.getAlgorithmIdentifierName(C(O,I[0])),T.issname=b(O,I[1]),T.isskey=b(O,I[2]),T.sbjsn=b(O,I[3]),T},this.getOCSPResponse=function(O){var I=yt(O,0),at,T=b(O,I[0]),ot=parseInt(T);if(I.length==1)return{resstatus:ot};var X=M(O,0,[1,0]);return at=this.getResponseBytes(X),at.resstatus=ot,at},this.getResponseBytes=function(O){var I=yt(O,0),at,T=M(O,0,[1,0]);at=this.getBasicOCSPResponse(T);var ot=b(O,I[0]);return at.restype=v.asn1.x509.OID.oid2name(ye(ot)),at},this.getBasicOCSPResponse=function(O){var I=yt(O,0),at;at=this.getResponseData(C(O,I[0]));var T=new nr;at.alg=T.getAlgorithmIdentifierName(C(O,I[1]));var ot=b(O,I[2]);at.sighex=ot.substr(2);var X=K(O,0,["[0]"]);if(X!=null){for(var Ft=yt(X,0),Tt=[],Wt=0;Wt<Ft.length;Wt++){var Gt=C(X,Ft[Wt]);Tt.push(Gt)}at.certs=Tt}return at},this.getResponseData=function(O){var I=yt(O,0),at=I.length,T={},ot=0;O.substr(I[0],2)=="a0"&&ot++,T.respid=this.getResponderID(C(O,I[ot++]));var X=b(O,I[ot++]);if(T.prodat=_r(X),T.array=this.getSingleResponseList(C(O,I[ot++])),O.substr(I[at-1],2)=="a1"){var Ft=M(O,I[at-1],[0]),Tt=new nr;T.ext=Tt.getExtParamArray(Ft)}return T},this.getResponderID=function(O){var I={};if(O.substr(0,2)=="a2"){var at=_(O,0,[0]);I.key=at}if(O.substr(0,2)=="a1"){var T=M(O,0,[0]),ot=new nr;I.name=ot.getX500Name(T)}return I},this.getSingleResponseList=function(O){for(var I=yt(O,0),at=[],T=0;T<I.length;T++){var ot=this.getSingleResponse(C(O,I[T]));at.push(ot)}return at},this.getSingleResponse=function(O){var I=yt(O,0),at={},T=this.getCertID(C(O,I[0]));at.certid=T;var ot=this.getCertStatus(C(O,I[1]));if(at.status=ot,O.substr(I[2],2)=="18"){var X=b(O,I[2]);at.thisupdate=_r(X)}for(var Ft=3;Ft<I.length;Ft++){if(O.substr(I[Ft],2)=="a0"){var Tt=_(O,I[Ft],[0],"18");at.nextupdate=_r(Tt)}if(O.substr(I[Ft],2)=="a1"){var Wt=new nr,Gt=M(O,0,[Ft,0]);at.ext=Wt.getExtParamArray(Gt)}}return at},this.getCertStatus=function(O){var I={};if(O=="8000")return{status:"good"};if(O=="8200")return{status:"unknown"};if(O.substr(0,2)=="a1"){I.status="revoked";var at=_(O,0,[0]),T=_r(at);I.time=T}return I}};var v;(typeof v>"u"||!v)&&(v={}),(typeof v.lang>"u"||!v.lang)&&(v.lang={}),v.lang.String=function(){};function _u(r){for(var l=new Array,o=0;o<r.length;o++)l[o]=r.charCodeAt(o);return l}function Zs(r){for(var l="",o=0;o<r.length;o++)l=l+String.fromCharCode(r[o]);return l}function Ai(r){for(var l="",o=0;o<r.length;o++){var h=r[o].toString(16);h.length==1&&(h="0"+h),l=l+h}return l}function cs(r){return Ai(_u(r))}function On(r){return E(cs(r))}function li(r){return Rr(E(cs(r)))}function pt(r){return Zs(D(Vs(r)))}function Rr(r){return r=r.replace(/\=/g,""),r=r.replace(/\+/g,"-"),r=r.replace(/\//g,"_"),r}function Vs(r){return r.length%4==2?r=r+"==":r.length%4==3&&(r=r+"="),r=r.replace(/-/g,"+"),r=r.replace(/_/g,"/"),r}function An(r){return r.length%2==1&&(r="0"+r),Rr(E(r))}function Cn(r){return m(Vs(r))}var Fe,gs;typeof Buffer=="function"?(Fe=function(r){return Rr(Buffer.from(r,"utf8").toString("base64"))},gs=function(r){return Buffer.from(Vs(r),"base64").toString("utf8")}):(Fe=function(r){return An(hu(ti(r)))},gs=function(r){return decodeURIComponent(Xi(Cn(r)))});function pu(r){return E(hu(ti(r)))}function Ji(r){return decodeURIComponent(Xi(m(r)))}function Su(r){return hu(ti(r)).toLowerCase()}function _r(r){try{return decodeURIComponent(Xi(r))}catch{return null}}function Ba(r){return _r(Yi(r))}function Yi(r){for(var l=r.match(/.{1,2}/g),o=[],h=0;h<l.length;h++){var b=parseInt(l[h],16);161<=b&&b<=191?(o.push("c2"),o.push(l[h])):192<=b&&b<=255?(o.push("c3"),o.push((b-64).toString(16))):o.push(l[h])}return o.join("")}function gr(r){for(var l="",o=0;o<r.length-1;o+=2)l+=String.fromCharCode(parseInt(r.substr(o,2),16));return l}function kn(r){for(var l="",o=0;o<r.length;o++)l+=("0"+r.charCodeAt(o).toString(16)).slice(-2);return l}function Bu(r){return E(r)}function Iu(r){return ms(Bu(r),64)}function ms(r,l){return r=r.replace(new RegExp("(.{"+l+"})","g"),`$1\r
`),r=r.replace(/\s+$/,""),r}function Ru(r){var l=r.replace(/[^0-9A-Za-z\/+=]*/g,""),o=m(l);return o}function Pi(r,l){return"-----BEGIN "+l+`-----\r
`+ms(r,64)+`\r
-----END `+l+`-----\r
`}function ke(r,l){return"-----BEGIN "+l+`-----\r
`+ms(Bu(r),64)+`\r
-----END `+l+`-----\r
`}function Pn(r,l){if(r.indexOf("-----BEGIN ")==-1)throw new Error("can't find PEM header");return l!==void 0?(r=r.replace(new RegExp("^[^]*-----BEGIN "+l+"-----"),""),r=r.replace(new RegExp("-----END "+l+"-----[^]*$"),"")):(r=r.replace(/^[^]*-----BEGIN [^-]+-----/,""),r=r.replace(/-----END [^-]+-----[^]*$/,"")),Ru(r)}function Oi(r){return r.indexOf("-----BEGIN ")==-1||r.indexOf("-----END ")==-1?null:(r=r.replace(/^[\s\S]*?-----BEGIN [^-]+-----/m,""),r=r.replace(/-----END [\s\S]+$/m,""),r=r.replace(/\s+/g,""),r.match(/^[0-9a-zA-Z+/=]+$/)?r:null)}function $u(r){if(r.length%2!=0)throw"input is not even length";if(r.match(/^[0-9A-Fa-f]+$/)==null)throw"input is not hexadecimal";for(var l=new ArrayBuffer(r.length/2),o=new DataView(l),h=0;h<r.length/2;h++)o.setUint8(h,parseInt(r.substr(h*2,2),16));return l}function aa(r){for(var l="",o=new DataView(r),h=0;h<r.byteLength;h++)l+=("00"+o.getUint8(h).toString(16)).slice(-2);return l}function ku(r){var l,o,h,b,C,x,_,M,K,dt,yt,O;if(r=Qs(r),O=r.match(/^(\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/),O)return l=parseInt(O[1]),o=parseInt(O[2])-1,h=parseInt(O[3]),b=parseInt(O[4]),C=parseInt(O[5]),x=parseInt(O[6]),_=0,dt=O[7],dt!==""&&(yt=(dt.substr(1)+"00").substr(0,3),_=parseInt(yt)),Date.UTC(l,o,h,b,C,x,_);throw new Error("unsupported zulu format: "+r)}function oa(r){var l=new Date(r),o=("0000"+l.getUTCFullYear()).slice(-4),h=("00"+(l.getUTCMonth()+1)).slice(-2),b=("00"+l.getUTCDate()).slice(-2),C=("00"+l.getUTCHours()).slice(-2),x=("00"+l.getUTCMinutes()).slice(-2),_=("00"+l.getUTCSeconds()).slice(-2),M=("000"+l.getUTCMilliseconds()).slice(-3);return M=M.replace(/0+$/,""),M=M!=""?"."+M:M,o+h+b+C+x+_+M+"Z"}function Pu(r){return Math.round(ku(r)/1e3)}function Ou(r){return new Date(ku(r))}function Ia(r,l,o){var h,b=r.getUTCFullYear();if(l){if(b<1950||2049<b)throw"not proper year for UTCTime: "+b;h=(""+b).slice(-2)}else h=("000"+b).slice(-4);if(h+=("0"+(r.getUTCMonth()+1)).slice(-2),h+=("0"+r.getUTCDate()).slice(-2),h+=("0"+r.getUTCHours()).slice(-2),h+=("0"+r.getUTCMinutes()).slice(-2),h+=("0"+r.getUTCSeconds()).slice(-2),o){var C=r.getUTCMilliseconds();C!==0&&(C=("00"+C).slice(-3),C=C.replace(/0+$/g,""),h+="."+C)}return h+="Z",h}function Qs(r){return r.match(/^[0-9]{12}Z$/)||r.match(/^[0-9]{12}[.][0-9]*Z$/)?r.match(/^[0-4]/)?"20"+r:"19"+r:r}function hu(r){return r.replace(/%/g,"")}function Xi(r){return r.replace(/(..)/g,"%$1")}function wi(r){var l="malformed IPv6 address";if(!r.match(/^[0-9A-Fa-f:]+$/))throw l;r=r.toLowerCase();var o=r.split(":").length-1;if(o<2)throw l;var h=":".repeat(7-o+2);r=r.replace("::",h);var b=r.split(":");if(b.length!=8)throw l;for(var C=0;C<8;C++)b[C]=("0000"+b[C]).slice(-4);return b.join("")}function fu(r){if(!r.match(/^[0-9A-Fa-f]{32}$/))throw new Error("malformed IPv6 address: "+r);r=r.toLowerCase();var l=r.match(/.{1,4}/g);l=l.map(function(b){return b.replace(/^0+/,"")}),l=l.map(function(b){return b==""?"0":b}),r=":"+l.join(":")+":";var o=r.match(/:(0:){2,}/g);if(o==null)return r.slice(1,-1);var h=o.sort().slice(-1)[0];return r=r.replace(h.substr(0,h.length-1),":"),r.substr(0,2)!="::"&&(r=r.substr(1)),r.substr(-2,2)!="::"&&(r=r.substr(0,r.length-1)),r}function Bs(r){var l=new Error("malformed hex value");if(!r.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw l;if(r.length==8){var o;try{return o=parseInt(r.substr(0,2),16)+"."+parseInt(r.substr(2,2),16)+"."+parseInt(r.substr(4,2),16)+"."+parseInt(r.substr(6,2),16),o}catch{throw l}}else if(r.length==16)try{return Bs(r.substr(0,8))+"/"+Zi(r.substr(8))}catch{throw l}else{if(r.length==32)return fu(r);if(r.length==64){try{return fu(r.substr(0,32))+"/"+Zi(r.substr(32))}catch{throw l}return}else return r}}function Zi(r){var l=new Error("malformed mask"),o;try{o=new w(r,16).toString(2)}catch{throw l}if(!o.match(/^1*0*$/))throw l;return o.replace(/0+$/,"").length}function du(r){var l=new Error("malformed IP address");if(r=r.toLowerCase(r),!r.match(/^[0-9a-f.:/]+$/))throw l;if(r.match(/^[0-9.]+$/)){var o=r.split(".");if(o.length!==4)throw l;var h="";try{for(var b=0;b<4;b++){var C=parseInt(o[b]);h+=("0"+C.toString(16)).slice(-2)}return h}catch{throw l}}else if(r.match(/^[0-9.]+\/[0-9]+$/)){var x=r.split("/");return du(x[0])+la(parseInt(x[1]),32)}else{if(r.match(/^[0-9a-f:]+$/)&&r.indexOf(":")!==-1)return wi(r);if(r.match(/^[0-9a-f:]+\/[0-9]+$/)&&r.indexOf(":")!==-1){var x=r.split("/");return wi(x[0])+la(parseInt(x[1]),128)}else throw l}}function la(r,l){if(l==32&&r==0)return"00000000";if(l==128&&r==0)return"00000000000000000000000000000000";var o=Array(r+1).join("1")+Array(l-r+1).join("0");return new w(o,2).toString(16)}function Tu(r){function l(b){var C=parseInt(b.substr(0,2),16),x=parseInt(b.substr(2),16);if(C==0&x<128)return String.fromCharCode(x);if(C<8){var _=192|(C&7)<<3|(x&192)>>6,M=128|x&63;return _r(_.toString(16)+M.toString(16))}var _=224|(C&240)>>4,M=128|(C&15)<<2|(x&192)>>6,K=128|x&63;return _r(_.toString(16)+M.toString(16)+K.toString(16))}var o=r.match(/.{4}/g),h=o.map(l);return h.join("")}function ti(r){for(var l=encodeURIComponent(r),o="",h=0;h<l.length;h++)l[h]=="%"?(o=o+l.substr(h,3),h=h+2):o=o+"%"+cs(l[h]);return o}function Tn(r){return r=r.replace(/\r\n/mg,`
`),r}function Qi(r){return r=r.replace(/\r\n/mg,`
`),r=r.replace(/\n/mg,`\r
`),r}v.lang.String.isInteger=function(r){return r.match(/^[0-9]+$/)?!0:!!r.match(/^-[0-9]+$/)},v.lang.String.isHex=function(r){return ei(r)};function ei(r){return!!(r.length%2==0&&(r.match(/^[0-9a-f]+$/)||r.match(/^[0-9A-F]+$/)))}v.lang.String.isBase64=function(r){return r=r.replace(/\s+/g,""),!!(r.match(/^[0-9A-Za-z+\/]+={0,3}$/)&&r.length%4==0)},v.lang.String.isBase64URL=function(r){return r.match(/[+/=]/)?!1:(r=Vs(r),v.lang.String.isBase64(r))};function Ti(r){return!!r.match(/^[0-9A-Za-z-_.]+$/)}v.lang.String.isIntegerArray=function(r){return r=r.replace(/\s+/g,""),!!r.match(/^\[[0-9,]+\]$/)},v.lang.String.isPrintable=function(r){return r.match(/^[0-9A-Za-z '()+,-./:=?]*$/)!==null},v.lang.String.isIA5=function(r){return r.match(/^[\x20-\x21\x23-\x7f]*$/)!==null},v.lang.String.isMail=function(r){return r.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};function gu(r){return r.length%2==1?"0"+r:r.substr(0,1)>"7"?"00"+r:r}function Ra(r){r=r.replace(/^\s*\[\s*/,""),r=r.replace(/\s*\]\s*$/,""),r=r.replace(/\s*/g,"");try{var l=r.split(/,/).map(function(o,h,b){var C=parseInt(o);if(C<0||255<C)throw"integer not in range 0-255";var x=("00"+C.toString(16)).slice(-2);return x}).join("");return l}catch(o){throw"malformed integer array string: "+o}}var ha=function(r,l){var o=r.length;r.length>l.length&&(o=l.length);for(var h=0;h<o;h++)if(r.charCodeAt(h)!=l.charCodeAt(h))return h;return r.length!=l.length?o:-1};function zs(r){var l=function(_){var M=_.toString(16);return M.length==1&&(M="0"+M),M},o=function(_){var M="",K=parseInt(_,10),dt=K.toString(2),yt=7-dt.length%7;yt==7&&(yt=0);for(var O="",I=0;I<yt;I++)O+="0";dt=O+dt;for(var I=0;I<dt.length-1;I+=7){var at=dt.substr(I,7);I!=dt.length-7&&(at="1"+at),M+=l(parseInt(at,2))}return M};try{if(!r.match(/^[0-9.]+$/))return null;var h="",b=r.split("."),C=parseInt(b[0],10)*40+parseInt(b[1],10);h+=l(C),b.splice(0,2);for(var x=0;x<b.length;x++)h+=o(b[x]);return h}catch{return null}}function ye(r){if(!ei(r))return null;try{var l=[],o=r.substr(0,2),h=parseInt(o,16);l[0]=new String(Math.floor(h/40)),l[1]=new String(h%40);for(var b=r.substr(2),C=[],x=0;x<b.length/2;x++)C.push(parseInt(b.substr(x*2,2),16));for(var _=[],M="",x=0;x<C.length;x++)C[x]&128?M=M+hr((C[x]&127).toString(2),7):(M=M+hr((C[x]&127).toString(2),7),_.push(new String(parseInt(M,2))),M="");var K=l.join(".");return _.length>0&&(K=K+"."+_.join(".")),K}catch{return null}}function Ue(r){var l=new w(String(r),10);return Re(l)}function Re(r){var l=r.toString(16);if(l.substr(0,1)!="-")return l.length%2==1?l="0"+l:l.match(/^[0-7]/)||(l="00"+l),l;var o=l.substr(1),h=o.length;h%2==1?h+=1:l.match(/^[0-7]/)||(h+=2);for(var b="",C=0;C<h;C++)b+="f";var x=new w(b,16),_=x.xor(r).add(w.ONE);return l=_.toString(16).replace(/^-/,""),l}var hr=function(r,l,o){return o==null&&(o="0"),r.length>=l?r:new Array(l-r.length+1).join(o)+r};function Pr(r){if(r.length%2!=0||(r=r.toLowerCase(),r.match(/^[0-9a-f]+$/)==null))return-1;try{var l=r.substr(0,2);if(l=="00")return parseInt(r.substr(2),16);var o=parseInt(l,16);if(o>7)return-1;var h=r.substr(2),b=parseInt(h,16).toString(2);b=="0"&&(b="00000000"),b=b.slice(0,0-o);var C=parseInt(b,2);return C==NaN?-1:C}catch{return-1}}function on(r){if(typeof r!="number"||r<0)return null;var l=Number(r).toString(2),o=8-l.length%8;o==8&&(o=0),l=l+hr("",o,"0");var h=parseInt(l,2).toString(16);h.length%2==1&&(h="0"+h);var b="0"+o;return b+h}function Gn(r){if(typeof r!="string"||r.length%2!=0||!r.match(/^[0-9a-f]+$/))return null;try{var l=parseInt(r.substr(0,2),16);if(l<0||7<l)return null;for(var o=r.substr(2),h="",b=0;b<o.length;b+=2){var C=o.substr(b,2),x=parseInt(C,16).toString(2);x=("0000000"+x).slice(-8),h+=x}return h.substr(0,h.length-l)}catch{return null}}function wn(r){if(typeof r!="string"||r.match(/^[01]+$/)==null)return null;try{var l=parseInt(r,2);return on(l)}catch{return null}}function Fi(r,l){for(var o=0,h=0;h<r.length;h++)o|=1<<l[r[h]];for(var b=o.toString(2),C="",h=b.length-1;h>=0;h--)C+=b[h];return C}function Fn(r,l,o){if(typeof r=="object"){for(var l=String(l).split("."),h=0;h<l.length&&r;h++){var b=l[h];b.match(/^[0-9]+$/)&&(b=parseInt(b)),r=r[b]}return r||r===!1?r:o}}function Oe(r,l){var o=function(){};o.prototype=l.prototype,r.prototype=new o,r.prototype.constructor=r,r.superclass=l.prototype,l.prototype.constructor==Object.prototype.constructor&&(l.prototype.constructor=l)}(typeof v>"u"||!v)&&(v={}),(typeof v.crypto>"u"||!v.crypto)&&(v.crypto={}),v.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:p.algo.MD5,sha1:p.algo.SHA1,sha224:p.algo.SHA224,sha256:p.algo.SHA256,sha384:p.algo.SHA384,sha512:p.algo.SHA512,ripemd160:p.algo.RIPEMD160},this.getDigestInfoHex=function(r,l){if(typeof this.DIGESTINFOHEAD[l]>"u")throw"alg not supported in Util.DIGESTINFOHEAD: "+l;return this.DIGESTINFOHEAD[l]+r},this.getPaddedDigestInfoHex=function(r,l,o){var h=this.getDigestInfoHex(r,l),b=o/4;if(h.length+22>b)throw"key is too short for SigAlg: keylen="+o+","+l;for(var C="0001",x="00"+h,_="",M=b-C.length-x.length,K=0;K<M;K+=2)_+="ff";var dt=C+_+x;return dt},this.hashString=function(r,l){var o=new v.crypto.MessageDigest({alg:l});return o.digestString(r)},this.hashHex=function(r,l){var o=new v.crypto.MessageDigest({alg:l});return o.digestHex(r)},this.sha1=function(r){return this.hashString(r,"sha1")},this.sha256=function(r){return this.hashString(r,"sha256")},this.sha256Hex=function(r){return this.hashHex(r,"sha256")},this.sha512=function(r){return this.hashString(r,"sha512")},this.sha512Hex=function(r){return this.hashHex(r,"sha512")},this.isKey=function(r){return r instanceof vr||r instanceof v.crypto.DSA||r instanceof v.crypto.ECDSA}},v.crypto.Util.md5=function(r){var l=new v.crypto.MessageDigest({alg:"md5",prov:"cryptojs"});return l.digestString(r)},v.crypto.Util.ripemd160=function(r){var l=new v.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"});return l.digestString(r)},v.crypto.Util.SECURERANDOMGEN=new nn,v.crypto.Util.getRandomHexOfNbytes=function(r){var l=new Array(r);return v.crypto.Util.SECURERANDOMGEN.nextBytes(l),Ai(l)},v.crypto.Util.getRandomBigIntegerOfNbytes=function(r){return new w(v.crypto.Util.getRandomHexOfNbytes(r),16)},v.crypto.Util.getRandomHexOfNbits=function(r){var l=r%8,o=(r-l)/8,h=new Array(o+1);return v.crypto.Util.SECURERANDOMGEN.nextBytes(h),h[0]=(255<<l&255^255)&h[0],Ai(h)},v.crypto.Util.getRandomBigIntegerOfNbits=function(r){return new w(v.crypto.Util.getRandomHexOfNbits(r),16)},v.crypto.Util.getRandomBigIntegerZeroToMax=function(r){for(var l=r.bitLength();;){var o=v.crypto.Util.getRandomBigIntegerOfNbits(l);if(r.compareTo(o)!=-1)return o}},v.crypto.Util.getRandomBigIntegerMinToMax=function(r,l){var o=r.compareTo(l);if(o==1)throw"biMin is greater than biMax";if(o==0)return r;var h=l.subtract(r),b=v.crypto.Util.getRandomBigIntegerZeroToMax(h);return b.add(r)},v.crypto.MessageDigest=function(r){var l=null,o=null,h=null;this.setAlgAndProvider=function(b,C){if(b=v.crypto.MessageDigest.getCanonicalAlgName(b),b!==null&&C===void 0&&(C=v.crypto.Util.DEFAULTPROVIDER[b]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(b)!=-1&&C=="cryptojs"){try{this.md=v.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[b].create()}catch(x){throw"setAlgAndProvider hash alg set fail alg="+b+"/"+x}this.updateString=function(x){this.md.update(x)},this.updateHex=function(x){var _=p.enc.Hex.parse(x);this.md.update(_)},this.digest=function(){var x=this.md.finalize();return x.toString(p.enc.Hex)},this.digestString=function(x){return this.updateString(x),this.digest()},this.digestHex=function(x){return this.updateHex(x),this.digest()}}if(":sha256:".indexOf(b)!=-1&&C=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(x){throw"setAlgAndProvider hash alg set fail alg="+b+"/"+x}this.updateString=function(x){this.md.update(x)},this.updateHex=function(x){var _=sjcl.codec.hex.toBits(x);this.md.update(_)},this.digest=function(){var x=this.md.finalize();return sjcl.codec.hex.fromBits(x)},this.digestString=function(x){return this.updateString(x),this.digest()},this.digestHex=function(x){return this.updateHex(x),this.digest()}}},this.updateString=function(b){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(b){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(b){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(b){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},r!==void 0&&r.alg!==void 0&&(this.algName=r.alg,r.prov===void 0&&(this.provName=v.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},v.crypto.MessageDigest.getCanonicalAlgName=function(r){return typeof r=="string"&&(r=r.toLowerCase(),r=r.replace(/-/,"")),r},v.crypto.MessageDigest.getHashLength=function(r){var l=v.crypto.MessageDigest,o=l.getCanonicalAlgName(r);if(l.HASHLENGTH[o]===void 0)throw"not supported algorithm: "+r;return l.HASHLENGTH[o]},v.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},v.crypto.Mac=function(r){var l=null,o=null,h=null,b=null,C=null;this.setAlgAndProvider=function(x,_){if(x=x.toLowerCase(),x==null&&(x="hmacsha1"),x=x.toLowerCase(),x.substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+x;_===void 0&&(_=v.crypto.Util.DEFAULTPROVIDER[x]),this.algProv=x+"/"+_;var M=x.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(M)!=-1&&_=="cryptojs"){try{var K=v.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[M];this.mac=p.algo.HMAC.create(K,this.pass)}catch(dt){throw"setAlgAndProvider hash alg set fail hashAlg="+M+"/"+dt}this.updateString=function(dt){this.mac.update(dt)},this.updateHex=function(dt){var yt=p.enc.Hex.parse(dt);this.mac.update(yt)},this.doFinal=function(){var dt=this.mac.finalize();return dt.toString(p.enc.Hex)},this.doFinalString=function(dt){return this.updateString(dt),this.doFinal()},this.doFinalHex=function(dt){return this.updateHex(dt),this.doFinal()}}},this.updateString=function(x){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(x){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(x){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(x){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(x){if(typeof x=="string"){var _=x;(x.length%2==1||!x.match(/^[0-9A-Fa-f]+$/))&&(_=kn(x)),this.pass=p.enc.Hex.parse(_);return}if(typeof x!="object")throw"KJUR.crypto.Mac unsupported password type: "+x;var _=null;if(x.hex!==void 0){if(x.hex.length%2!=0||!x.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+x.hex;_=x.hex}if(x.utf8!==void 0&&(_=Su(x.utf8)),x.rstr!==void 0&&(_=kn(x.rstr)),x.b64!==void 0&&(_=m(x.b64)),x.b64u!==void 0&&(_=Cn(x.b64u)),_==null)throw"KJUR.crypto.Mac unsupported password type: "+x;this.pass=p.enc.Hex.parse(_)},r!==void 0&&(r.pass!==void 0&&this.setPassword(r.pass),r.alg!==void 0&&(this.algName=r.alg,r.prov===void 0&&(this.provName=v.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},v.crypto.Signature=function(r){var l=null,o=null,h=null,b=null,C=null,x=null,_=null,M=null,K=null,dt=null,yt=-1,O=null,I=null,at=null,T=null,ot=null;if(this._setAlgNames=function(){var X=this.algName.match(/^(.+)with(.+)$/);X&&(this.mdAlgName=X[1].toLowerCase(),this.pubkeyAlgName=X[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(X,Ft){for(var Tt="",Wt=Ft/4-X.length,Gt=0;Gt<Wt;Gt++)Tt=Tt+"0";return Tt+X},this.setAlgAndProvider=function(X,Ft){if(this._setAlgNames(),Ft!="cryptojs/jsrsa")throw new Error("provider not supported: "+Ft);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new v.crypto.MessageDigest({alg:this.mdAlgName})}catch(Tt){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+Tt)}this.init=function(Tt,Wt){var Gt=null;try{Wt===void 0?Gt=Nr.getKey(Tt):Gt=Nr.getKey(Tt,Wt)}catch(ve){throw"init failed:"+ve}if(Gt.isPrivate===!0)this.prvKey=Gt,this.state="SIGN";else if(Gt.isPublic===!0)this.pubKey=Gt,this.state="VERIFY";else throw"init failed.:"+Gt},this.updateString=function(Tt){this.md.updateString(Tt)},this.updateHex=function(Tt){this.md.updateHex(Tt)},this.sign=function(){if(this.sHashHex=this.md.digest(),this.prvKey===void 0&&this.ecprvhex!==void 0&&this.eccurvename!==void 0&&v.crypto.ECDSA!==void 0&&(this.prvKey=new v.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof vr&&this.pubkeyAlgName==="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof vr&&this.pubkeyAlgName==="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof v.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else if(this.prvKey instanceof v.crypto.DSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;return this.hSign},this.signString=function(Tt){return this.updateString(Tt),this.sign()},this.signHex=function(Tt){return this.updateHex(Tt),this.sign()},this.verify=function(Tt){if(this.sHashHex=this.md.digest(),this.pubKey===void 0&&this.ecpubhex!==void 0&&this.eccurvename!==void 0&&v.crypto.ECDSA!==void 0&&(this.pubKey=new v.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof vr&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,Tt,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof vr&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,Tt);if(v.crypto.ECDSA!==void 0&&this.pubKey instanceof v.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,Tt);if(v.crypto.DSA!==void 0&&this.pubKey instanceof v.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,Tt);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(X,Ft){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(X){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(X){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(X){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(X){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(X){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=r,r!==void 0&&(r.alg!==void 0&&(this.algName=r.alg,r.prov===void 0?this.provName=v.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=r.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),r.psssaltlen!==void 0&&(this.pssSaltLen=r.psssaltlen),r.prvkeypem!==void 0)){if(r.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{var l=Nr.getKey(r.prvkeypem);this.init(l)}catch(X){throw"fatal error to load pem private key: "+X}}},v.crypto.Cipher=function(r){},v.crypto.Cipher.encrypt=function(r,l,o,h){if(Fn(h,"enclag")!=null&&(o=h.encalg),typeof o=="string"&&o.substr(-4)=="-CBC"){var b=l,C=r;Fn(h,"key")!=null&&(b=h.key),Fn(h,"enc")!=null&&(hEnc=h.enc);var x=p.enc.Hex.parse(b),_=p.enc.Hex.parse(C),M=p.enc.Hex.parse(h.iv),K;if(o=="des-EDE3-CBC")K=p.TripleDES.encrypt(_,x,{iv:M});else if(o=="aes128-CBC"||o=="aes256-CBC")K=p.AES.encrypt(_,x,{iv:M});else throw new Error("unsupported algorithm: "+o);return K+""}else throw new Error("Cipher.encrypt: unsupported key or algorithm")},v.crypto.Cipher.decrypt=function(r,l,o,h){if(Fn(h,"enclag")!=null&&(o=h.encalg),typeof o=="string"&&o.substr(-4)=="-CBC"){var b=l,C=r;Fn(h,"key")!=null&&(b=h.key),Fn(h,"enc")!=null&&(C=h.enc);var x=p.enc.Hex.parse(b),_=p.enc.Hex.parse(C),M=p.enc.Hex.parse(h.iv),K;if(o=="des-EDE3-CBC")K=p.TripleDES.decrypt({ciphertext:_},x,{iv:M});else if(o=="aes128-CBC"||o=="aes256-CBC")K=p.AES.decrypt({ciphertext:_},x,{iv:M});else throw new Error("unsupported algorithm: "+o);return p.enc.Hex.stringify(K)}else throw new Error("Cipher.decrypt: unsupported key or algorithm")},v.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040022":"secp384r1","2b81040023":"secp521r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},(typeof v>"u"||!v)&&(v={}),(typeof v.crypto>"u"||!v.crypto)&&(v.crypto={}),v.crypto.ECDSA=function(r){var l="secp256r1",o=null,h=null,b=null,C=Error,x=w,_=an,M=v.crypto.ECDSA,K=v.crypto.ECParameterDB,dt=M.getName,yt=Ge,O=yt.getVbyListEx,I=yt.isASN1HEX,at=new nn,T=null;this.type="EC",this.isPrivate=!1,this.isPublic=!1;function ot(X,Ft,Tt,Wt){for(var Gt=Math.max(Ft.bitLength(),Wt.bitLength()),ve=X.add2D(Tt),be=X.curve.getInfinity(),d=Gt-1;d>=0;--d)be=be.twice2D(),be.z=x.ONE,Ft.testBit(d)?Wt.testBit(d)?be=be.add2D(ve):be=be.add2D(X):Wt.testBit(d)&&(be=be.add2D(Tt));return be}this.getBigRandom=function(X){return new x(X.bitLength(),at).mod(X.subtract(x.ONE)).add(x.ONE)},this.setNamedCurve=function(X){this.ecparams=K.getByName(X),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=X},this.setPrivateKeyHex=function(X){this.isPrivate=!0,this.prvKeyHex=X},this.setPublicKeyHex=function(X){this.isPublic=!0,this.pubKeyHex=X},this.getPublicKeyXYHex=function(){var X=this.pubKeyHex;if(X.substr(0,2)!=="04")throw"this method supports uncompressed format(04) only";var Ft=this.ecparams.keycharlen;if(X.length!==2+Ft*2)throw"malformed public key hex length";var Tt={};return Tt.x=X.substr(2,Ft),Tt.y=X.substr(2+Ft),Tt},this.getShortNISTPCurveName=function(){var X=this.curveName;return X==="secp256r1"||X==="NIST P-256"||X==="P-256"||X==="prime256v1"?"P-256":X==="secp384r1"||X==="NIST P-384"||X==="P-384"?"P-384":X==="secp521r1"||X==="NIST P-521"||X==="P-521"?"P-521":null},this.generateKeyPairHex=function(){var X=this.ecparams.n,Ft=this.getBigRandom(X),Tt=this.ecparams.keycharlen,Wt=("0000000000"+Ft.toString(16)).slice(-Tt);this.setPrivateKeyHex(Wt);var Gt=this.generatePublicKeyHex();return{ecprvhex:Wt,ecpubhex:Gt}},this.generatePublicKeyHex=function(){var X=new x(this.prvKeyHex,16),Ft=this.ecparams.G.multiply(X),Tt=Ft.getX().toBigInteger(),Wt=Ft.getY().toBigInteger(),Gt=this.ecparams.keycharlen,ve=("0000000000"+Tt.toString(16)).slice(-Gt),be=("0000000000"+Wt.toString(16)).slice(-Gt),d="04"+ve+be;return this.setPublicKeyHex(d),d},this.signWithMessageHash=function(X){return this.signHex(X,this.prvKeyHex)},this.signHex=function(X,Ft){var Tt=new x(Ft,16),Wt=this.ecparams.n,Gt=new x(X.substring(0,this.ecparams.keycharlen),16);do var ve=this.getBigRandom(Wt),be=this.ecparams.G,d=be.multiply(ve),B=d.getX().toBigInteger().mod(Wt);while(B.compareTo(x.ZERO)<=0);var ut=ve.modInverse(Wt).multiply(Gt.add(Tt.multiply(B))).mod(Wt);return M.biRSSigToASN1Sig(B,ut)},this.sign=function(X,Ft){var Tt=Ft,Wt=this.ecparams.n,Gt=x.fromByteArrayUnsigned(X);do var ve=this.getBigRandom(Wt),be=this.ecparams.G,d=be.multiply(ve),B=d.getX().toBigInteger().mod(Wt);while(B.compareTo(w.ZERO)<=0);var ut=ve.modInverse(Wt).multiply(Gt.add(Tt.multiply(B))).mod(Wt);return this.serializeSig(B,ut)},this.verifyWithMessageHash=function(X,Ft){return this.verifyHex(X,Ft,this.pubKeyHex)},this.verifyHex=function(X,Ft,Tt){try{var Wt,Gt,ve=M.parseSigHex(Ft);Wt=ve.r,Gt=ve.s;var be=_.decodeFromHex(this.ecparams.curve,Tt),d=new x(X.substring(0,this.ecparams.keycharlen),16);return this.verifyRaw(d,Wt,Gt,be)}catch{return!1}},this.verify=function(X,Ft,Tt){var Wt,Gt;if(Bitcoin.Util.isArray(Ft)){var ve=this.parseSig(Ft);Wt=ve.r,Gt=ve.s}else if(typeof Ft=="object"&&Ft.r&&Ft.s)Wt=Ft.r,Gt=Ft.s;else throw"Invalid value for signature";var be;if(Tt instanceof an)be=Tt;else if(Bitcoin.Util.isArray(Tt))be=_.decodeFrom(this.ecparams.curve,Tt);else throw"Invalid format for pubkey value, must be byte array or ECPointFp";var d=x.fromByteArrayUnsigned(X);return this.verifyRaw(d,Wt,Gt,be)},this.verifyRaw=function(X,Ft,Tt,Wt){var Gt=this.ecparams.n,ve=this.ecparams.G;if(Ft.compareTo(x.ONE)<0||Ft.compareTo(Gt)>=0||Tt.compareTo(x.ONE)<0||Tt.compareTo(Gt)>=0)return!1;var be=Tt.modInverse(Gt),d=X.multiply(be).mod(Gt),B=Ft.multiply(be).mod(Gt),ut=ve.multiply(d).add(Wt.multiply(B)),z=ut.getX().toBigInteger().mod(Gt);return z.equals(Ft)},this.serializeSig=function(X,Ft){var Tt=X.toByteArraySigned(),Wt=Ft.toByteArraySigned(),Gt=[];return Gt.push(2),Gt.push(Tt.length),Gt=Gt.concat(Tt),Gt.push(2),Gt.push(Wt.length),Gt=Gt.concat(Wt),Gt.unshift(Gt.length),Gt.unshift(48),Gt},this.parseSig=function(X){var Ft;if(X[0]!=48)throw new Error("Signature not a valid DERSequence");if(Ft=2,X[Ft]!=2)throw new Error("First element in signature must be a DERInteger");var Tt=X.slice(Ft+2,Ft+2+X[Ft+1]);if(Ft+=2+X[Ft+1],X[Ft]!=2)throw new Error("Second element in signature must be a DERInteger");var Wt=X.slice(Ft+2,Ft+2+X[Ft+1]);Ft+=2+X[Ft+1];var Gt=x.fromByteArrayUnsigned(Tt),ve=x.fromByteArrayUnsigned(Wt);return{r:Gt,s:ve}},this.parseSigCompact=function(X){if(X.length!==65)throw"Signature has the wrong length";var Ft=X[0]-27;if(Ft<0||Ft>7)throw"Invalid signature type";var Tt=this.ecparams.n,Wt=x.fromByteArrayUnsigned(X.slice(1,33)).mod(Tt),Gt=x.fromByteArrayUnsigned(X.slice(33,65)).mod(Tt);return{r:Wt,s:Gt,i:Ft}},this.readPKCS5PrvKeyHex=function(X){if(I(X)===!1)throw new Error("not ASN.1 hex string");var Ft,Tt,Wt;try{Ft=O(X,0,["[0]",0],"06"),Tt=O(X,0,[1],"04");try{Wt=O(X,0,["[1]",0],"03")}catch{}}catch{throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=dt(Ft),this.curveName===void 0)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(Wt),this.setPrivateKeyHex(Tt),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(X){if(I(X)===!1)throw new C("not ASN.1 hex string");var Ft,Tt,Wt,Gt;try{Ft=O(X,0,[1,0],"06"),Tt=O(X,0,[1,1],"06"),Wt=O(X,0,[2,0,1],"04");try{Gt=O(X,0,[2,0,"[1]",0],"03")}catch{}}catch{throw new C("malformed PKCS#8 plain ECC private key")}if(this.curveName=dt(Tt),this.curveName===void 0)throw new C("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(Gt),this.setPrivateKeyHex(Wt),this.isPublic=!1},this.readPKCS8PubKeyHex=function(X){if(I(X)===!1)throw new C("not ASN.1 hex string");var Ft,Tt,Wt;try{Ft=O(X,0,[0,0],"06"),Tt=O(X,0,[0,1],"06"),Wt=O(X,0,[1],"03")}catch{throw new C("malformed PKCS#8 ECC public key")}if(this.curveName=dt(Tt),this.curveName===null)throw new C("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(Wt)},this.readCertPubKeyHex=function(X,Ft){if(I(X)===!1)throw new C("not ASN.1 hex string");var Tt,Wt;try{Tt=O(X,0,[0,5,0,1],"06"),Wt=O(X,0,[0,5,1],"03")}catch{throw new C("malformed X.509 certificate ECC public key")}if(this.curveName=dt(Tt),this.curveName===null)throw new C("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(Wt)},r!==void 0&&r.curve!==void 0&&(this.curveName=r.curve),this.curveName===void 0&&(this.curveName=l),this.setNamedCurve(this.curveName),r!==void 0&&(r.prv!==void 0&&this.setPrivateKeyHex(r.prv),r.pub!==void 0&&this.setPublicKeyHex(r.pub))},v.crypto.ECDSA.parseSigHex=function(r){var l=v.crypto.ECDSA.parseSigHexInHexRS(r),o=new w(l.r,16),h=new w(l.s,16);return{r:o,s:h}},v.crypto.ECDSA.parseSigHexInHexRS=function(r){var l=Ge,o=l.getChildIdx,h=l.getV;if(l.checkStrictDER(r,0),r.substr(0,2)!="30")throw new Error("signature is not a ASN.1 sequence");var b=o(r,0);if(b.length!=2)throw new Error("signature shall have two elements");var C=b[0],x=b[1];if(r.substr(C,2)!="02")throw new Error("1st item not ASN.1 integer");if(r.substr(x,2)!="02")throw new Error("2nd item not ASN.1 integer");var _=h(r,C),M=h(r,x);return{r:_,s:M}},v.crypto.ECDSA.asn1SigToConcatSig=function(r){var l=v.crypto.ECDSA.parseSigHexInHexRS(r),o=l.r,h=l.s;if(o.length>=130&&o.length<=134){if(o.length%2!=0)throw Error("unknown ECDSA sig r length error");if(h.length%2!=0)throw Error("unknown ECDSA sig s length error");o.substr(0,2)=="00"&&(o=o.substr(2)),h.substr(0,2)=="00"&&(h=h.substr(2));var b=Math.max(o.length,h.length);return o=("000000"+o).slice(-b),h=("000000"+h).slice(-b),o+h}if(o.substr(0,2)=="00"&&o.length%32==2&&(o=o.substr(2)),h.substr(0,2)=="00"&&h.length%32==2&&(h=h.substr(2)),o.length%32==30&&(o="00"+o),h.length%32==30&&(h="00"+h),o.length%32!=0)throw Error("unknown ECDSA sig r length error");if(h.length%32!=0)throw Error("unknown ECDSA sig s length error");return o+h},v.crypto.ECDSA.concatSigToASN1Sig=function(r){if(r.length%4!=0)throw Error("unknown ECDSA concatinated r-s sig length error");var l=r.substr(0,r.length/2),o=r.substr(r.length/2);return v.crypto.ECDSA.hexRSSigToASN1Sig(l,o)},v.crypto.ECDSA.hexRSSigToASN1Sig=function(r,l){var o=new w(r,16),h=new w(l,16);return v.crypto.ECDSA.biRSSigToASN1Sig(o,h)},v.crypto.ECDSA.biRSSigToASN1Sig=function(r,l){var o=v.asn1,h=new o.DERInteger({bigint:r}),b=new o.DERInteger({bigint:l}),C=new o.DERSequence({array:[h,b]});return C.tohex()},v.crypto.ECDSA.getName=function(r){return r==="2b8104001f"?"secp192k1":r==="2a8648ce3d030107"?"secp256r1":r==="2b8104000a"?"secp256k1":r==="2b81040021"?"secp224r1":r==="2b81040022"?"secp384r1":r==="2b81040023"?"secp521r1":"|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(r)!==-1?"secp256r1":"|secp256k1|".indexOf(r)!==-1?"secp256k1":"|secp224r1|NIST P-224|P-224|".indexOf(r)!==-1?"secp224r1":"|secp384r1|NIST P-384|P-384|".indexOf(r)!==-1?"secp384r1":"|secp521r1|NIST P-521|P-521|".indexOf(r)!==-1?"secp521r1":null},(typeof v>"u"||!v)&&(v={}),(typeof v.crypto>"u"||!v.crypto)&&(v.crypto={}),v.crypto.ECParameterDB=new function(){var r={},l={};function o(h){return new w(h,16)}this.getByName=function(h){var b=h;if(typeof l[b]<"u"&&(b=l[h]),typeof r[b]<"u")return r[b];throw"unregistered EC curve name: "+b},this.regist=function(h,b,C,x,_,M,K,dt,yt,O,I,at){r[h]={};var T=o(C),ot=o(x),X=o(_),Ft=o(M),Tt=o(K),Wt=new Yn(T,ot,X),Gt=Wt.decodePointHex("04"+dt+yt);r[h].name=h,r[h].keylen=b,r[h].keycharlen=Math.ceil(b/8)*2,r[h].curve=Wt,r[h].G=Gt,r[h].n=Ft,r[h].h=Tt,r[h].oid=I,r[h].info=at;for(var ve=0;ve<O.length;ve++)l[O[ve]]=h}},v.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),v.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),v.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),v.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),v.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),v.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),v.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),v.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),v.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),v.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","00C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]),(typeof v>"u"||!v)&&(v={}),(typeof v.crypto>"u"||!v.crypto)&&(v.crypto={}),v.crypto.DSA=function(){var r=Ge,l=r.getVbyList,o=r.getVbyListEx,h=r.isASN1HEX,b=w;this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(C,x,_,M,K){this.isPrivate=!0,this.p=C,this.q=x,this.g=_,this.y=M,this.x=K},this.setPrivateHex=function(C,x,_,M,K){var dt,yt,O,I,at;dt=new w(C,16),yt=new w(x,16),O=new w(_,16),typeof M=="string"&&M.length>1?I=new w(M,16):I=null,at=new w(K,16),this.setPrivate(dt,yt,O,I,at)},this.setPublic=function(C,x,_,M){this.isPublic=!0,this.p=C,this.q=x,this.g=_,this.y=M,this.x=null},this.setPublicHex=function(C,x,_,M){var K,dt,yt,O;K=new w(C,16),dt=new w(x,16),yt=new w(_,16),O=new w(M,16),this.setPublic(K,dt,yt,O)},this.signWithMessageHash=function(C){var x=this.p,_=this.q,M=this.g,K=this.y,dt=this.x,yt=v.crypto.Util.getRandomBigIntegerMinToMax(w.ONE.add(w.ONE),_.subtract(w.ONE)),O=C.substr(0,_.bitLength()/4),I=new w(O,16),at=M.modPow(yt,x).mod(_),T=yt.modInverse(_).multiply(I.add(dt.multiply(at))).mod(_),ot=v.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:at}},{int:{bigint:T}}]});return ot},this.verifyWithMessageHash=function(C,x){var _=this.p,M=this.q,K=this.g,dt=this.y,yt=this.parseASN1Signature(x),O=yt[0],I=yt[1],at=C.substr(0,M.bitLength()/4),T=new w(at,16);if(w.ZERO.compareTo(O)>0||O.compareTo(M)>0||w.ZERO.compareTo(I)>=0||I.compareTo(M)>0)throw"invalid DSA signature";var ot=I.modInverse(M),X=T.multiply(ot).mod(M),Ft=O.multiply(ot).mod(M),Tt=K.modPow(X,_).multiply(dt.modPow(Ft,_)).mod(_).mod(M);return Tt.compareTo(O)==0},this.parseASN1Signature=function(C){try{var x=new b(o(C,0,[0],"02"),16),_=new b(o(C,0,[1],"02"),16);return[x,_]}catch{throw new Error("malformed ASN.1 DSA signature")}},this.readPKCS5PrvKeyHex=function(C){var x,_,M,K,dt;if(h(C)===!1)throw new Error("not ASN.1 hex string");try{x=o(C,0,[1],"02"),_=o(C,0,[2],"02"),M=o(C,0,[3],"02"),K=o(C,0,[4],"02"),dt=o(C,0,[5],"02")}catch{throw new Error("malformed PKCS#1/5 plain DSA private key")}this.setPrivateHex(x,_,M,K,dt)},this.readPKCS8PrvKeyHex=function(C){var x,_,M,K;if(h(C)===!1)throw new Error("not ASN.1 hex string");try{x=o(C,0,[1,1,0],"02"),_=o(C,0,[1,1,1],"02"),M=o(C,0,[1,1,2],"02"),K=o(C,0,[2,0],"02")}catch{throw new Error("malformed PKCS#8 plain DSA private key")}this.setPrivateHex(x,_,M,null,K)},this.readPKCS8PubKeyHex=function(C){var x,_,M,K;if(h(C)===!1)throw new Error("not ASN.1 hex string");try{x=o(C,0,[0,1,0],"02"),_=o(C,0,[0,1,1],"02"),M=o(C,0,[0,1,2],"02"),K=o(C,0,[1,0],"02")}catch{throw new Error("malformed PKCS#8 DSA public key")}this.setPublicHex(x,_,M,K)},this.readCertPubKeyHex=function(C,x){var _,M,K,dt;if(h(C)===!1)throw new Error("not ASN.1 hex string");try{_=o(C,0,[0,5,0,1,0],"02"),M=o(C,0,[0,5,0,1,1],"02"),K=o(C,0,[0,5,0,1,2],"02"),dt=o(C,0,[0,5,1,0],"02")}catch{throw new Error("malformed X.509 certificate DSA public key")}this.setPublicHex(_,M,K,dt)}};var Nr=(function(){var r=function(T,ot,X){return h(p.AES,T,ot,X)},l=function(T,ot,X){return h(p.TripleDES,T,ot,X)},o=function(T,ot,X){return h(p.DES,T,ot,X)},h=function(T,ot,X,Ft){var Tt=p.enc.Hex.parse(ot),Wt=p.enc.Hex.parse(X),Gt=p.enc.Hex.parse(Ft),ve={};ve.key=Wt,ve.iv=Gt,ve.ciphertext=Tt;var be=T.decrypt(ve,Wt,{iv:Gt});return p.enc.Hex.stringify(be)},b=function(T,ot,X){return _(p.AES,T,ot,X)},C=function(T,ot,X){return _(p.TripleDES,T,ot,X)},x=function(T,ot,X){return _(p.DES,T,ot,X)},_=function(T,ot,X,Ft){var Tt=p.enc.Hex.parse(ot),Wt=p.enc.Hex.parse(X),Gt=p.enc.Hex.parse(Ft),ve=T.encrypt(Tt,Wt,{iv:Gt}),be=p.enc.Hex.parse(ve.toString()),d=p.enc.Base64.stringify(be);return d},M={"AES-256-CBC":{proc:r,eproc:b,keylen:32,ivlen:16},"AES-192-CBC":{proc:r,eproc:b,keylen:24,ivlen:16},"AES-128-CBC":{proc:r,eproc:b,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:l,eproc:C,keylen:24,ivlen:8},"DES-CBC":{proc:o,eproc:x,keylen:8,ivlen:8}},K=function(T){return M[T].proc},dt=function(T){var ot=p.lib.WordArray.random(T),X=p.enc.Hex.stringify(ot);return X},yt=function(T){var ot={},X=T.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));X&&(ot.cipher=X[1],ot.ivsalt=X[2]);var Ft=T.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));Ft&&(ot.type=Ft[1]);var Tt=-1,Wt=0;T.indexOf(`\r
\r
`)!=-1&&(Tt=T.indexOf(`\r
\r
`),Wt=2),T.indexOf(`

`)!=-1&&(Tt=T.indexOf(`

`),Wt=1);var Gt=T.indexOf("-----END");if(Tt!=-1&&Gt!=-1){var ve=T.substring(Tt+Wt*2,Gt-Wt);ve=ve.replace(/\s+/g,""),ot.data=ve}return ot},O=function(T,ot,X){for(var Ft=X.substring(0,16),Tt=p.enc.Hex.parse(Ft),Wt=p.enc.Utf8.parse(ot),Gt=M[T].keylen+M[T].ivlen,ve="",be=null;;){var d=p.algo.MD5.create();if(be!=null&&d.update(be),d.update(Wt),d.update(Tt),be=d.finalize(),ve=ve+p.enc.Hex.stringify(be),ve.length>=Gt*2)break}var B={};return B.keyhex=ve.substr(0,M[T].keylen*2),B.ivhex=ve.substr(M[T].keylen*2,M[T].ivlen*2),B},I=function(T,ot,X,Ft){var Tt=p.enc.Base64.parse(T),Wt=p.enc.Hex.stringify(Tt),Gt=M[ot].proc,ve=Gt(Wt,X,Ft);return ve},at=function(T,ot,X,Ft){var Tt=M[ot].eproc,Wt=Tt(T,X,Ft);return Wt};return{version:"1.0.0",parsePKCS5PEM:function(T){return yt(T)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(T,ot,X){return O(T,ot,X)},decryptKeyB64:function(T,ot,X,Ft){return I(T,ot,X,Ft)},getDecryptedKeyHex:function(T,ot){var X=yt(T),Ft=X.type,Tt=X.cipher,Wt=X.ivsalt,Gt=X.data,ve=O(Tt,ot,Wt),be=ve.keyhex,d=I(Gt,Tt,be,Wt);return d},getEncryptedPKCS5PEMFromPrvKeyHex:function(T,ot,X,Ft,Tt){var ut="";if((typeof Ft>"u"||Ft==null)&&(Ft="AES-256-CBC"),typeof M[Ft]>"u")throw new Error("KEYUTIL unsupported algorithm: "+Ft);if(typeof Tt>"u"||Tt==null){var Wt=M[Ft].ivlen,Gt=dt(Wt);Tt=Gt.toUpperCase()}var ve=O(Ft,X,Tt),be=ve.keyhex,d=at(ot,Ft,be,Tt),B=d.replace(/(.{64})/g,`$1\r
`),ut="-----BEGIN "+T+` PRIVATE KEY-----\r
`;return ut+=`Proc-Type: 4,ENCRYPTED\r
`,ut+="DEK-Info: "+Ft+","+Tt+`\r
`,ut+=`\r
`,ut+=B,ut+=`\r
-----END `+T+` PRIVATE KEY-----\r
`,ut},getEncryptedPKCS8PEM:function(T,ot,X){var Ft=this.getEncryptedPKCS8Hex(T,ot,X);return ke(Ft,"ENCRYPTED PRIVATE KEY")},getEncryptedPKCS8Hex:function(T,ot,X){var Ft;X==null||X==null?Ft={}:Ft=JSON.parse(JSON.stringify(X)),Ft.plain=T,this.initPBES2Param(Ft),this.encryptPBES2Param(Ft,ot);var Tt=this.generatePBES2ASN1Param(Ft);return v.asn1.ASN1Util.newObject(Tt).tohex()},initPBES2Param:function(T){if(Fn(T,"encalg")==null&&(T.encalg="aes256-CBC"),Fn(T,"iter")==null&&(T.iter=2048),Fn(T,"prf")==null&&(T.prf="hmacWithSHA256"),Fn(T,"salt")==null&&(T.salt=p.enc.Hex.stringify(p.lib.WordArray.random(8))),Fn(T,"enciv")==null){var ot;T.encalg=="des-EDE3-CBC"&&(ot=8),T.encalg=="aes128-CBC"&&(ot=16),T.encalg=="aes256-CBC"&&(ot=16),T.enciv=p.enc.Hex.stringify(p.lib.WordArray.random(ot))}},encryptPBES2Param:function(T,ot){var X=Nr.getDKFromPBES2Param(T,ot);try{var Ft=v.crypto.Cipher.encrypt(T.plain,X,T.encalg,{iv:T.enciv})}catch{throw new Error("encrypt error: "+T.plain+" "+X+" "+T.encalg+" "+T.enciv)}T.enc=Ft},generatePBES2ASN1Param:function(T){var ot={seq:[{seq:[{oid:"pkcs5PBES2"},{seq:[{seq:[{oid:"pkcs5PBKDF2"},{seq:[{octstr:{hex:T.salt}},{int:{hex:Ue(T.iter)}}]}]},{seq:[{oid:T.encalg},{octstr:{hex:T.enciv}}]}]}]},{octstr:{hex:T.enc}}]};return T.prf!="hmacWithSHA1"&&ot.seq[0].seq[1].seq[0].seq[1].seq.push({seq:[{oid:T.prf},{null:""}]}),ot},parseHexOfEncryptedPKCS8:function(T){var ot=Ge,X=ot.getChildIdx,Ft=ot.getV,Tt={},Wt=X(T,0);if(Wt.length!=2)throw new Error("malformed format: SEQUENCE(0).items != 2: "+Wt.length);Tt.ciphertext=Ft(T,Wt[1]);var Gt=X(T,Wt[0]);if(Gt.length!=2)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+Gt.length);if(Ft(T,Gt[0])!="2a864886f70d01050d")throw new Error("this only supports pkcs5PBES2");var ve=X(T,Gt[1]);if(Gt.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+ve.length);var be=X(T,ve[1]);if(be.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+be.length);if(Ft(T,be[0])!="2a864886f70d0307")throw"this only supports TripleDES";Tt.encryptionSchemeAlg="TripleDES",Tt.encryptionSchemeIV=Ft(T,be[1]);var d=X(T,ve[0]);if(d.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+d.length);if(Ft(T,d[0])!="2a864886f70d01050c")throw new Error("this only supports pkcs5PBKDF2");var B=X(T,d[1]);if(B.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+B.length);Tt.pbkdf2Salt=Ft(T,B[0]);var ut=Ft(T,B[1]);try{Tt.pbkdf2Iter=parseInt(ut,16)}catch{throw new Error("malformed format pbkdf2Iter: "+ut)}return Tt},getPBKDF2KeyHexFromParam:function(T,ot){var X=p.enc.Hex.parse(T.pbkdf2Salt),Ft=T.pbkdf2Iter,Tt=p.PBKDF2(ot,X,{keySize:192/32,iterations:Ft}),Wt=p.enc.Hex.stringify(Tt);return Wt},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(T,ot){var X=Pn(T,"ENCRYPTED PRIVATE KEY"),Ft=this.parseHexOfEncryptedPKCS8(X),Tt=Nr.getPBKDF2KeyHexFromParam(Ft,ot),Wt={};Wt.ciphertext=p.enc.Hex.parse(Ft.ciphertext);var Gt=p.enc.Hex.parse(Tt),ve=p.enc.Hex.parse(Ft.encryptionSchemeIV),be=p.TripleDES.decrypt(Wt,Gt,{iv:ve}),d=p.enc.Hex.stringify(be);return d},parsePBES2:function(T){var ot=Ge.parse(T);if(Fn(ot,"seq.0.seq.0.oid")!="pkcs5PBES2"||Fn(ot,"seq.0.seq.1.seq.0.seq.0.oid")!="pkcs5PBKDF2")throw new Error("not pkcs5PBES2 and pkcs5PBKDF2 used");var X=Fn(ot,"seq.0.seq.1.seq.0.seq.1.seq");if(X==null)throw new Error("PBKDF2 parameter not found");var Ft=Fn(X,"0.octstr.hex"),Tt=Fn(X,"1.int.hex"),Wt=Fn(X,"2.seq.0.oid","hmacWithSHA1"),Gt=-1;try{Gt=parseInt(Tt,16)}catch{throw new Error("iter not proper value")}var ve=Fn(ot,"seq.0.seq.1.seq.1.seq.0.oid"),be=Fn(ot,"seq.0.seq.1.seq.1.seq.1.octstr.hex"),d=Fn(ot,"seq.1.octstr.hex");if(ve==null||be==null||d==null)throw new Error("encalg, enciv or enc is undefined");var B={salt:Ft,iter:Gt,prf:Wt,encalg:ve,enciv:be,enc:d};return B},getDKFromPBES2Param:function(T,ot){var X={hmacWithSHA1:p.algo.SHA1,hmacWithSHA224:p.algo.SHA224,hmacWithSHA256:p.algo.SHA256,hmacWithSHA384:p.algo.SHA384,hmacWithSHA512:p.algo.SHA512},Ft={"des-EDE3-CBC":192/32,"aes128-CBC":128/32,"aes256-CBC":256/32},Tt=X[T.prf];if(Tt==null)throw new Error("unsupported prf");var Wt=Ft[T.encalg];if(Wt==null)throw new Error("unsupported encalg");var Gt=p.enc.Hex.parse(T.salt),ve=T.iter;try{var be=p.PBKDF2(ot,Gt,{keySize:Wt,iterations:ve,hasher:Tt});return p.enc.Hex.stringify(be)}catch(d){throw new Error("PBKDF2 error: "+d+" "+JSON.stringify(T)+" "+ot)}},getPlainHexFromEncryptedPKCS8PEM:function(T,ot){if(T.indexOf("BEGIN ENCRYPTED PRIVATE KEY")==-1)throw new Error("not Encrypted PKCS#8 PEM string");var X=Pn(T),Ft;try{Ft=Nr.parsePBES2(X)}catch(Wt){throw new Error("malformed PBES2 format: "+Wt.message)}var Tt=Nr.getDKFromPBES2Param(Ft,ot);return v.crypto.Cipher.decrypt(Ft.enc,Tt,Ft.encalg,{iv:Ft.enciv})},getKeyFromEncryptedPKCS8PEM:function(T,ot){var X=this.getPlainHexFromEncryptedPKCS8PEM(T,ot),Ft=this.getKeyFromPlainPrivatePKCS8Hex(X);return Ft},parsePlainPrivatePKCS8Hex:function(T){var ot=Ge,X=ot.getChildIdx,Ft=ot.getV,Tt={};if(Tt.algparam=null,T.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var Wt=X(T,0);if(Wt.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(T.substr(Wt[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var Gt=X(T,Wt[1]);if(Gt.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(T.substr(Gt[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if(Tt.algoid=Ft(T,Gt[0]),T.substr(Gt[1],2)=="06"&&(Tt.algparam=Ft(T,Gt[1])),T.substr(Wt[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return Tt.keyidx=ot.getVidx(T,Wt[2]),Tt},getKeyFromPlainPrivatePKCS8PEM:function(T){var ot=Pn(T,"PRIVATE KEY"),X=this.getKeyFromPlainPrivatePKCS8Hex(ot);return X},getKeyFromPlainPrivatePKCS8Hex:function(T){var ot=this.parsePlainPrivatePKCS8Hex(T),X;if(ot.algoid=="2a864886f70d010101")X=new vr;else if(ot.algoid=="2a8648ce380401")X=new v.crypto.DSA;else if(ot.algoid=="2a8648ce3d0201")X=new v.crypto.ECDSA;else throw new Error("unsupported private key algorithm");return X.readPKCS8PrvKeyHex(T),X},_getKeyFromPublicPKCS8Hex:function(T){var ot,X=Ge.getVbyList(T,0,[0,0],"06");if(X==="2a864886f70d010101")ot=new vr;else if(X==="2a8648ce380401")ot=new v.crypto.DSA;else if(X==="2a8648ce3d0201")ot=new v.crypto.ECDSA;else throw new Error("unsupported PKCS#8 public key hex");return ot.readPKCS8PubKeyHex(T),ot},parsePublicRawRSAKeyHex:function(T){var ot=Ge,X=ot.getChildIdx,Ft=ot.getV,Tt={};if(T.substr(0,2)!="30")throw new Error("malformed RSA key(code:001)");var Wt=X(T,0);if(Wt.length!=2)throw new Error("malformed RSA key(code:002)");if(T.substr(Wt[0],2)!="02")throw new Error("malformed RSA key(code:003)");if(Tt.n=Ft(T,Wt[0]),T.substr(Wt[1],2)!="02")throw new Error("malformed RSA key(code:004)");return Tt.e=Ft(T,Wt[1]),Tt},parsePublicPKCS8Hex:function(T){var ot=Ge,X=ot.getChildIdx,Ft=ot.getV,Tt={};Tt.algparam=null;var Wt=X(T,0);if(Wt.length!=2)throw new Error("outer DERSequence shall have 2 elements: "+Wt.length);var Gt=Wt[0];if(T.substr(Gt,2)!="30")throw new Error("malformed PKCS8 public key(code:001)");var ve=X(T,Gt);if(ve.length!=2)throw new Error("malformed PKCS8 public key(code:002)");if(T.substr(ve[0],2)!="06")throw new Error("malformed PKCS8 public key(code:003)");if(Tt.algoid=Ft(T,ve[0]),T.substr(ve[1],2)=="06"?Tt.algparam=Ft(T,ve[1]):T.substr(ve[1],2)=="30"&&(Tt.algparam={},Tt.algparam.p=ot.getVbyList(T,ve[1],[0],"02"),Tt.algparam.q=ot.getVbyList(T,ve[1],[1],"02"),Tt.algparam.g=ot.getVbyList(T,ve[1],[2],"02")),T.substr(Wt[1],2)!="03")throw new Error("malformed PKCS8 public key(code:004)");return Tt.key=Ft(T,Wt[1]).substr(2),Tt}}})();Nr.getKey=function(r,l,o){var h=Ge,b=h.getChildIdx,C=h.getV,x=h.getVbyList,_=v.crypto,M=_.ECDSA,K=_.DSA,dt=vr,yt=Pn,O=Nr;if(typeof dt<"u"&&r instanceof dt||typeof M<"u"&&r instanceof M||typeof K<"u"&&r instanceof K)return r;if(r.curve!==void 0&&r.xy!==void 0&&r.d===void 0)return new M({pub:r.xy,curve:r.curve});if(r.curve!==void 0&&r.d!==void 0)return new M({prv:r.d,curve:r.curve});if(r.kty===void 0&&r.n!==void 0&&r.e!==void 0&&r.d===void 0){var I=new dt;return I.setPublic(r.n,r.e),I}if(r.kty===void 0&&r.n!==void 0&&r.e!==void 0&&r.d!==void 0&&r.p!==void 0&&r.q!==void 0&&r.dp!==void 0&&r.dq!==void 0&&r.co!==void 0&&r.qi===void 0){var I=new dt;return I.setPrivateEx(r.n,r.e,r.d,r.p,r.q,r.dp,r.dq,r.co),I}if(r.kty===void 0&&r.n!==void 0&&r.e!==void 0&&r.d!==void 0&&r.p===void 0){var I=new dt;return I.setPrivate(r.n,r.e,r.d),I}if(r.p!==void 0&&r.q!==void 0&&r.g!==void 0&&r.y!==void 0&&r.x===void 0){var I=new K;return I.setPublic(r.p,r.q,r.g,r.y),I}if(r.p!==void 0&&r.q!==void 0&&r.g!==void 0&&r.y!==void 0&&r.x!==void 0){var I=new K;return I.setPrivate(r.p,r.q,r.g,r.y,r.x),I}if(r.kty==="RSA"&&r.n!==void 0&&r.e!==void 0&&r.d===void 0){var I=new dt;return I.setPublic(Cn(r.n),Cn(r.e)),I}if(r.kty==="RSA"&&r.n!==void 0&&r.e!==void 0&&r.d!==void 0&&r.p!==void 0&&r.q!==void 0&&r.dp!==void 0&&r.dq!==void 0&&r.qi!==void 0){var I=new dt;return I.setPrivateEx(Cn(r.n),Cn(r.e),Cn(r.d),Cn(r.p),Cn(r.q),Cn(r.dp),Cn(r.dq),Cn(r.qi)),I}if(r.kty==="RSA"&&r.n!==void 0&&r.e!==void 0&&r.d!==void 0){var I=new dt;return I.setPrivate(Cn(r.n),Cn(r.e),Cn(r.d)),I}if(r.kty==="EC"&&r.crv!==void 0&&r.x!==void 0&&r.y!==void 0&&r.d===void 0){var at=new M({curve:r.crv}),T=at.ecparams.keycharlen,ot=("0000000000"+Cn(r.x)).slice(-T),X=("0000000000"+Cn(r.y)).slice(-T),Ft="04"+ot+X;return at.setPublicKeyHex(Ft),at}if(r.kty==="EC"&&r.crv!==void 0&&r.x!==void 0&&r.y!==void 0&&r.d!==void 0){var at=new M({curve:r.crv}),T=at.ecparams.keycharlen,ot=("0000000000"+Cn(r.x)).slice(-T),X=("0000000000"+Cn(r.y)).slice(-T),Ft="04"+ot+X,Tt=("0000000000"+Cn(r.d)).slice(-T);return at.setPublicKeyHex(Ft),at.setPrivateKeyHex(Tt),at}if(o==="pkcs5prv"){var Wt=r,h=Ge,Gt,I;if(Gt=b(Wt,0),Gt.length===9)I=new dt,I.readPKCS5PrvKeyHex(Wt);else if(Gt.length===6)I=new K,I.readPKCS5PrvKeyHex(Wt);else if(Gt.length>2&&Wt.substr(Gt[1],2)==="04")I=new M,I.readPKCS5PrvKeyHex(Wt);else throw new Error("unsupported PKCS#1/5 hexadecimal key");return I}if(o==="pkcs8prv"){var I=O.getKeyFromPlainPrivatePKCS8Hex(r);return I}if(o==="pkcs8pub")return O._getKeyFromPublicPKCS8Hex(r);if(o==="x509pub")return nr.getPublicKeyFromCertHex(r);if(r.indexOf("-END CERTIFICATE-",0)!=-1||r.indexOf("-END X509 CERTIFICATE-",0)!=-1||r.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return nr.getPublicKeyFromCertPEM(r);if(r.indexOf("-END PUBLIC KEY-")!=-1){var ve=Pn(r,"PUBLIC KEY");return O._getKeyFromPublicPKCS8Hex(ve)}if(r.indexOf("-END RSA PRIVATE KEY-")!=-1&&r.indexOf("4,ENCRYPTED")==-1){var be=yt(r,"RSA PRIVATE KEY");return O.getKey(be,null,"pkcs5prv")}if(r.indexOf("-END DSA PRIVATE KEY-")!=-1&&r.indexOf("4,ENCRYPTED")==-1){var d=yt(r,"DSA PRIVATE KEY"),B=x(d,0,[1],"02"),ut=x(d,0,[2],"02"),z=x(d,0,[3],"02"),St=x(d,0,[4],"02"),Mt=x(d,0,[5],"02"),I=new K;return I.setPrivate(new w(B,16),new w(ut,16),new w(z,16),new w(St,16),new w(Mt,16)),I}if(r.indexOf("-END EC PRIVATE KEY-")!=-1&&r.indexOf("4,ENCRYPTED")==-1){var be=yt(r,"EC PRIVATE KEY");return O.getKey(be,null,"pkcs5prv")}if(r.indexOf("-END PRIVATE KEY-")!=-1)return O.getKeyFromPlainPrivatePKCS8PEM(r);if(r.indexOf("-END RSA PRIVATE KEY-")!=-1&&r.indexOf("4,ENCRYPTED")!=-1){var te=O.getDecryptedKeyHex(r,l),ie=new vr;return ie.readPKCS5PrvKeyHex(te),ie}if(r.indexOf("-END EC PRIVATE KEY-")!=-1&&r.indexOf("4,ENCRYPTED")!=-1){var d=O.getDecryptedKeyHex(r,l),I=x(d,0,[1],"04"),ge=x(d,0,[2,0],"06"),Ie=x(d,0,[3,0],"03").substr(2),br="";if(v.crypto.OID.oidhex2name[ge]!==void 0)br=v.crypto.OID.oidhex2name[ge];else throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+ge);var at=new M({curve:br});return at.setPublicKeyHex(Ie),at.setPrivateKeyHex(I),at.isPublic=!1,at}if(r.indexOf("-END DSA PRIVATE KEY-")!=-1&&r.indexOf("4,ENCRYPTED")!=-1){var d=O.getDecryptedKeyHex(r,l),B=x(d,0,[1],"02"),ut=x(d,0,[2],"02"),z=x(d,0,[3],"02"),St=x(d,0,[4],"02"),Mt=x(d,0,[5],"02"),I=new K;return I.setPrivate(new w(B,16),new w(ut,16),new w(z,16),new w(St,16),new w(Mt,16)),I}if(r.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return O.getKeyFromEncryptedPKCS8PEM(r,l);throw new Error("not supported argument")},Nr.generateKeypair=function(r,l){if(r=="RSA"){var o=l,h=new vr;h.generate(o,"10001"),h.isPrivate=!0,h.isPublic=!0;var b=new vr,C=h.n.toString(16),x=h.e.toString(16);b.setPublic(C,x),b.isPrivate=!1,b.isPublic=!0;var _={};return _.prvKeyObj=h,_.pubKeyObj=b,_}else if(r=="EC"){var M=l,K=new v.crypto.ECDSA({curve:M}),dt=K.generateKeyPairHex(),h=new v.crypto.ECDSA({curve:M});h.setPublicKeyHex(dt.ecpubhex),h.setPrivateKeyHex(dt.ecprvhex),h.isPrivate=!0,h.isPublic=!1;var b=new v.crypto.ECDSA({curve:M});b.setPublicKeyHex(dt.ecpubhex),b.isPrivate=!1,b.isPublic=!0;var _={};return _.prvKeyObj=h,_.pubKeyObj=b,_}else throw new Error("unknown algorithm: "+r)},Nr.getPEM=function(r,l,o,h,b,C){var x=v,_=x.asn1,M=_.DERObjectIdentifier,K=_.DERInteger,dt=_.ASN1Util.newObject,yt=_.x509,O=yt.SubjectPublicKeyInfo,I=x.crypto,at=I.DSA,T=I.ECDSA,ot=vr;function X(ie){var ge=dt({seq:[{int:0},{int:{bigint:ie.n}},{int:ie.e},{int:{bigint:ie.d}},{int:{bigint:ie.p}},{int:{bigint:ie.q}},{int:{bigint:ie.dmp1}},{int:{bigint:ie.dmq1}},{int:{bigint:ie.coeff}}]});return ge}function Ft(ie){var ge=dt({seq:[{int:1},{octstr:{hex:ie.prvKeyHex}},{tag:["a0",!0,{oid:{name:ie.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+ie.pubKeyHex}}]}]});return ge}function Tt(ie){var ge=dt({seq:[{int:0},{int:{bigint:ie.p}},{int:{bigint:ie.q}},{int:{bigint:ie.g}},{int:{bigint:ie.y}},{int:{bigint:ie.x}}]});return ge}if((ot!==void 0&&r instanceof ot||at!==void 0&&r instanceof at||T!==void 0&&r instanceof T)&&r.isPublic==!0&&(l===void 0||l=="PKCS8PUB")){var Wt=new O(r),Gt=Wt.tohex();return ke(Gt,"PUBLIC KEY")}if(l=="PKCS1PRV"&&ot!==void 0&&r instanceof ot&&(o===void 0||o==null)&&r.isPrivate==!0){var Wt=X(r),Gt=Wt.tohex();return ke(Gt,"RSA PRIVATE KEY")}if(l=="PKCS1PRV"&&T!==void 0&&r instanceof T&&(o===void 0||o==null)&&r.isPrivate==!0){var ve=new M({name:r.curveName}),be=ve.tohex(),d=Ft(r),B=d.tohex(),ut="";return ut+=ke(be,"EC PARAMETERS"),ut+=ke(B,"EC PRIVATE KEY"),ut}if(l=="PKCS1PRV"&&at!==void 0&&r instanceof at&&(o===void 0||o==null)&&r.isPrivate==!0){var Wt=Tt(r),Gt=Wt.tohex();return ke(Gt,"DSA PRIVATE KEY")}if(l=="PKCS5PRV"&&ot!==void 0&&r instanceof ot&&o!==void 0&&o!=null&&r.isPrivate==!0){var Wt=X(r),Gt=Wt.tohex();return h===void 0&&(h="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",Gt,o,h,C)}if(l=="PKCS5PRV"&&T!==void 0&&r instanceof T&&o!==void 0&&o!=null&&r.isPrivate==!0){var Wt=Ft(r),Gt=Wt.tohex();return h===void 0&&(h="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",Gt,o,h,C)}if(l=="PKCS5PRV"&&at!==void 0&&r instanceof at&&o!==void 0&&o!=null&&r.isPrivate==!0){var Wt=Tt(r),Gt=Wt.tohex();return h===void 0&&(h="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",Gt,o,h,C)}var z=function(ie,ge){if(typeof ge=="string")return Nr.getEncryptedPKCS8PEM(ie,ge);if(typeof ge=="object"&&Fn(ge,"passcode")!=null){var Ie=JSON.parse(JSON.stringify(ge)),br=Ie.passcode;return delete Ie.passcode,Nr.getEncryptedPKCS8PEM(ie,br,Ie)}};if(l=="PKCS8PRV"&&ot!=null&&r instanceof ot&&r.isPrivate==!0){var St=X(r),Mt=St.tohex(),Wt=dt({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:Mt}}]}),Gt=Wt.tohex();return o===void 0||o==null?ke(Gt,"PRIVATE KEY"):z(Gt,o)}if(l=="PKCS8PRV"&&T!==void 0&&r instanceof T&&r.isPrivate==!0){var te={seq:[{int:1},{octstr:{hex:r.prvKeyHex}}]};typeof r.pubKeyHex=="string"&&te.seq.push({tag:["a1",!0,{bitstr:{hex:"00"+r.pubKeyHex}}]});var St=new dt(te),Mt=St.tohex(),Wt=dt({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:r.curveName}}]},{octstr:{hex:Mt}}]}),Gt=Wt.tohex();return o===void 0||o==null?ke(Gt,"PRIVATE KEY"):z(Gt,o)}if(l=="PKCS8PRV"&&at!==void 0&&r instanceof at&&r.isPrivate==!0){var St=new K({bigint:r.x}),Mt=St.tohex(),Wt=dt({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:r.p}},{int:{bigint:r.q}},{int:{bigint:r.g}}]}]},{octstr:{hex:Mt}}]}),Gt=Wt.tohex();return o===void 0||o==null?ke(Gt,"PRIVATE KEY"):z(Gt,o)}throw new Error("unsupported object nor format")},Nr.getKeyFromCSRPEM=function(r){var l=Pn(r,"CERTIFICATE REQUEST"),o=Nr.getKeyFromCSRHex(l);return o},Nr.getKeyFromCSRHex=function(r){var l=Nr.parseCSRHex(r),o=Nr.getKey(l.p8pubkeyhex,null,"pkcs8pub");return o},Nr.parseCSRHex=function(r){var l=Ge,o=l.getChildIdx,h=l.getTLV,b={},C=r;if(C.substr(0,2)!="30")throw new Error("malformed CSR(code:001)");var x=o(C,0);if(x.length<1)throw new Error("malformed CSR(code:002)");if(C.substr(x[0],2)!="30")throw new Error("malformed CSR(code:003)");var _=o(C,x[0]);if(_.length<3)throw new Error("malformed CSR(code:004)");return b.p8pubkeyhex=h(C,_[2]),b},Nr.getKeyID=function(r){var l=Nr,o=Ge;typeof r=="string"&&r.indexOf("BEGIN ")!=-1&&(r=l.getKey(r));var h=Pn(l.getPEM(r)),b=o.getIdxbyList(h,0,[1]),C=o.getV(h,b).substring(2);return v.crypto.Util.hashHex(C,"sha1")},Nr.getJWK=function(r,l,o,h,b){var C,x={},_,M=v.crypto.Util.hashHex;if(typeof r=="string")C=Nr.getKey(r),r.indexOf("CERTIFICATE")!=-1&&(_=Pn(r));else if(typeof r=="object")r instanceof nr?(C=r.getPublicKey(),_=r.hex):C=r;else throw new Error("unsupported keyinfo type");if(C instanceof vr&&C.isPrivate)x.kty="RSA",x.n=An(C.n.toString(16)),x.e=An(C.e.toString(16)),x.d=An(C.d.toString(16)),x.p=An(C.p.toString(16)),x.q=An(C.q.toString(16)),x.dp=An(C.dmp1.toString(16)),x.dq=An(C.dmq1.toString(16)),x.qi=An(C.coeff.toString(16));else if(C instanceof vr&&C.isPublic)x.kty="RSA",x.n=An(C.n.toString(16)),x.e=An(C.e.toString(16));else if(C instanceof v.crypto.ECDSA&&C.isPrivate){var K=C.getShortNISTPCurveName();if(K!=="P-256"&&K!=="P-384"&&K!=="P-521")throw new Error("unsupported curve name for JWT: "+K);var dt=C.getPublicKeyXYHex();x.kty="EC",x.crv=K,x.x=An(dt.x),x.y=An(dt.y),x.d=An(C.prvKeyHex)}else if(C instanceof v.crypto.ECDSA&&C.isPublic){var K=C.getShortNISTPCurveName();if(K!=="P-256"&&K!=="P-384"&&K!=="P-521")throw new Error("unsupported curve name for JWT: "+K);var dt=C.getPublicKeyXYHex();x.kty="EC",x.crv=K,x.x=An(dt.x),x.y=An(dt.y)}if(x.kty==null)throw new Error("unsupported keyinfo");return!C.isPrivate&&l!=!0&&(x.kid=v.jws.JWS.getJWKthumbprint(x)),_!=null&&o!=!0&&(x.x5c=[E(_)]),_!=null&&h!=!0&&(x.x5t=Rr(E(M(_,"sha1")))),_!=null&&b!=!0&&(x["x5t#S256"]=Rr(E(M(_,"sha256")))),x},Nr.getJWKFromKey=function(r){return Nr.getJWK(r,!0,!0,!0,!0)},vr.getPosArrayOfChildrenFromHex=function(r){return Ge.getChildIdx(r,0)},vr.getHexValueArrayOfChildrenFromHex=function(r){var l=Ge,o=l.getV,O=vr.getPosArrayOfChildrenFromHex(r),h=o(r,O[0]),b=o(r,O[1]),C=o(r,O[2]),x=o(r,O[3]),_=o(r,O[4]),M=o(r,O[5]),K=o(r,O[6]),dt=o(r,O[7]),yt=o(r,O[8]),O=new Array;return O.push(h,b,C,x,_,M,K,dt,yt),O},vr.prototype.readPrivateKeyFromPEMString=function(r){var l=Pn(r),o=vr.getHexValueArrayOfChildrenFromHex(l);this.setPrivateEx(o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8])},vr.prototype.readPKCS5PrvKeyHex=function(r){var l=vr.getHexValueArrayOfChildrenFromHex(r);this.setPrivateEx(l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8])},vr.prototype.readPKCS8PrvKeyHex=function(r){var l,o,h,b,C,x,_,M,K=Ge,dt=K.getVbyListEx;if(K.isASN1HEX(r)===!1)throw new Error("not ASN.1 hex string");try{l=dt(r,0,[2,0,1],"02"),o=dt(r,0,[2,0,2],"02"),h=dt(r,0,[2,0,3],"02"),b=dt(r,0,[2,0,4],"02"),C=dt(r,0,[2,0,5],"02"),x=dt(r,0,[2,0,6],"02"),_=dt(r,0,[2,0,7],"02"),M=dt(r,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(l,o,h,b,C,x,_,M)},vr.prototype.readPKCS5PubKeyHex=function(r){var l=Ge,o=l.getV;if(l.isASN1HEX(r)===!1)throw new Error("keyHex is not ASN.1 hex string");var h=l.getChildIdx(r,0);if(h.length!==2||r.substr(h[0],2)!=="02"||r.substr(h[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var b=o(r,h[0]),C=o(r,h[1]);this.setPublic(b,C)},vr.prototype.readPKCS8PubKeyHex=function(r){var l=Ge;if(l.isASN1HEX(r)===!1)throw new Error("not ASN.1 hex string");if(l.getTLVbyListEx(r,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var o=l.getTLVbyListEx(r,0,[1,0]);this.readPKCS5PubKeyHex(o)},vr.prototype.readCertPubKeyHex=function(r,l){var o,h;o=new nr,o.readCertHex(r),h=o.getPublicKeyHex(),this.readPKCS8PubKeyHex(h)};var fa=new RegExp("[^0-9a-f]","gi");function ri(r,l){for(var o="",h=l/4-r.length,b=0;b<h;b++)o=o+"0";return o+r}vr.prototype.sign=function(r,l){var o=function(b){return v.crypto.Util.hashString(b,l)},h=o(r);return this.signWithMessageHash(h,l)},vr.prototype.signWithMessageHash=function(r,l){var o=v.crypto.Util.getPaddedDigestInfoHex(r,l,this.n.bitLength()),h=en(o,16),b=this.doPrivate(h),C=b.toString(16);return ri(C,this.n.bitLength())};function eu(r,l,o){for(var h="",b=0;h.length<l;)h+=gr(o(kn(r+String.fromCharCode.apply(String,[(b&4278190080)>>24,(b&16711680)>>16,(b&65280)>>8,b&255])))),b+=1;return h}vr.prototype.signPSS=function(r,l,o){var h=function(C){return v.crypto.Util.hashHex(C,l)},b=h(kn(r));return o===void 0&&(o=-1),this.signWithMessageHashPSS(b,l,o)},vr.prototype.signWithMessageHashPSS=function(r,l,o){var h=gr(r),b=h.length,C=this.n.bitLength()-1,x=Math.ceil(C/8),_,M=function(ot){return v.crypto.Util.hashHex(ot,l)};if(o===-1||o===void 0)o=b;else if(o===-2)o=x-b-2;else if(o<-2)throw new Error("invalid salt length");if(x<b+o+2)throw new Error("data too long");var K="";o>0&&(K=new Array(o),new nn().nextBytes(K),K=String.fromCharCode.apply(String,K));var dt=gr(M(kn("\0\0\0\0\0\0\0\0"+h+K))),yt=[];for(_=0;_<x-o-b-2;_+=1)yt[_]=0;var O=String.fromCharCode.apply(String,yt)+""+K,I=eu(dt,O.length,M),at=[];for(_=0;_<O.length;_+=1)at[_]=O.charCodeAt(_)^I.charCodeAt(_);var T=65280>>8*x-C&255;for(at[0]&=~T,_=0;_<b;_++)at.push(dt.charCodeAt(_));return at.push(188),ri(this.doPrivate(new w(at)).toString(16),this.n.bitLength())};function Ni(r){for(var l in v.crypto.Util.DIGESTINFOHEAD){var o=v.crypto.Util.DIGESTINFOHEAD[l],h=o.length;if(r.substring(0,h)==o){var b=[l,r.substring(h)];return b}}return[]}vr.prototype.verify=function(r,l){if(l=l.toLowerCase(),l.match(/^[0-9a-f]+$/)==null)return!1;var o=en(l,16),h=this.n.bitLength();if(o.bitLength()>h)return!1;var b=this.doPublic(o),C=b.toString(16);if(C.length+3!=h/4)return!1;var x=C.replace(/^1f+00/,""),_=Ni(x);if(_.length==0)return!1;var M=_[0],K=_[1],dt=function(O){return v.crypto.Util.hashString(O,M)},yt=dt(r);return K==yt},vr.prototype.verifyWithMessageHash=function(r,l){if(l.length!=Math.ceil(this.n.bitLength()/4))return!1;var o=en(l,16);if(o.bitLength()>this.n.bitLength())return 0;var h=this.doPublic(o),b=h.toString(16).replace(/^1f+00/,""),C=Ni(b);if(C.length==0)return!1;var x=C[0],_=C[1];return _==r},vr.prototype.verifyPSS=function(r,l,o,h){var b=function(x){return v.crypto.Util.hashHex(x,o)},C=b(kn(r));return h===void 0&&(h=-1),this.verifyWithMessageHashPSS(C,l,o,h)},vr.prototype.verifyWithMessageHashPSS=function(r,l,o,h){if(l.length!=Math.ceil(this.n.bitLength()/4))return!1;var b=new w(l,16),C=function(Ft){return v.crypto.Util.hashHex(Ft,o)},x=gr(r),_=x.length,M=this.n.bitLength()-1,K=Math.ceil(M/8),dt;if(h===-1||h===void 0)h=_;else if(h===-2)h=K-_-2;else if(h<-2)throw new Error("invalid salt length");if(K<_+h+2)throw new Error("data too long");var yt=this.doPublic(b).toByteArray();for(dt=0;dt<yt.length;dt+=1)yt[dt]&=255;for(;yt.length<K;)yt.unshift(0);if(yt[K-1]!==188)throw new Error("encoded message does not end in 0xbc");yt=String.fromCharCode.apply(String,yt);var O=yt.substr(0,K-_-1),I=yt.substr(O.length,_),at=65280>>8*K-M&255;if(O.charCodeAt(0)&at)throw new Error("bits beyond keysize not zero");var T=eu(I,O.length,C),ot=[];for(dt=0;dt<O.length;dt+=1)ot[dt]=O.charCodeAt(dt)^T.charCodeAt(dt);ot[0]&=~at;var X=K-_-h-2;for(dt=0;dt<X;dt+=1)if(ot[dt]!==0)throw new Error("leftmost octets not zero");if(ot[X]!==1)throw new Error("0x01 marker not found");return I===gr(C(kn("\0\0\0\0\0\0\0\0"+x+String.fromCharCode.apply(String,ot.slice(-h)))))},vr.SALT_LEN_HLEN=-1,vr.SALT_LEN_MAX=-2,vr.SALT_LEN_RECOVER=-2;function nr(r){var l=Ge,o=l.getChildIdx,h=l.getV,b=l.dump,C=l.parse,x=l.getTLV,_=l.getVbyList,M=l.getVbyListEx,K=l.getTLVbyList,dt=l.getTLVbyListEx,yt=l.getIdxbyList,O=l.getIdxbyListEx,I=l.getVidx,at=l.getInt,T=l.oidname,ot=l.hextooidstr,X=nr,Ft=Pn,Tt,Wt=Error;try{Tt=v.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var d=K(this.hex,0,[0,0]);if(d.substr(0,2)=="a0"){var B=K(d,0,[0]),ut=at(B,0);if(ut<0||2<ut)throw new Error("malformed version field");return this.version=ut+1,this.version}else return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return M(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var d=dt(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(d)},this.getAlgorithmIdentifierName=function(d){for(var B in Tt)if(d===Tt[B])return B;return T(M(d,0,[0],"06"))},this.getIssuer=function(d,B){return this.getX500Name(this.getIssuerHex(),d,B)},this.getIssuerHex=function(){return K(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){var d=this.getIssuer();return d.str},this.getSubject=function(d,B){return this.getX500Name(this.getSubjectHex(),d,B)},this.getSubjectHex=function(){return K(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){var d=this.getSubject();return d.str},this.getNotBefore=function(){var d=_(this.hex,0,[0,4+this.foffset,0]);return d=d.replace(/(..)/g,"%$1"),d=decodeURIComponent(d),d},this.getNotAfter=function(){var d=_(this.hex,0,[0,4+this.foffset,1]);return d=d.replace(/(..)/g,"%$1"),d=decodeURIComponent(d),d},this.getPublicKeyHex=function(){return this.getSPKI()},this.getSPKI=function(){return K(this.hex,0,[0,6+this.foffset],"30")},this.getSPKIValue=function(){var d=this.getSPKI();return d==null?null:_(d,0,[1],"03",!0)},this.getPublicKeyIdx=function(){return yt(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var d=this.getPublicKeyIdx();return yt(this.hex,d,[1,0],"30")},this.getPublicKey=function(){return Nr.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var d=K(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(d)},this.getSignatureValueHex=function(){return _(this.hex,0,[2],"03",!0)},this.verifySignature=function(d){var B=this.getSignatureAlgorithmField(),ut=this.getSignatureValueHex(),z=K(this.hex,0,[0],"30"),St=new v.crypto.Signature({alg:B});return St.init(d),St.updateHex(z),St.verify(ut)},this.parseExt=function(d){var B,ut,z;if(d===void 0){if(z=this.hex,this.version!==3)return-1;B=yt(z,0,[0,7,0],"30"),ut=o(z,B)}else{z=Pn(d);var St=yt(z,0,[0,3,0,0],"06");if(h(z,St)!="2a864886f70d01090e"){this.aExtInfo=new Array;return}B=yt(z,0,[0,3,0,1,0],"30"),ut=o(z,B),this.hex=z}this.aExtInfo=new Array;for(var Mt=0;Mt<ut.length;Mt++){var te={};te.critical=!1;var ie=o(z,ut[Mt]),ge=0;ie.length===3&&(te.critical=!0,ge=1),te.oid=l.hextooidstr(_(z,ut[Mt],[0],"06"));var Ie=yt(z,ut[Mt],[1+ge]);te.vidx=I(z,Ie),this.aExtInfo.push(te)}},this.getExtInfo=function(d){var B=this.aExtInfo,ut=d;if(d.match(/^[0-9.]+$/)||(ut=v.asn1.x509.OID.name2oid(d)),ut!==""){for(var z=0;z<B.length;z++)if(B[z].oid===ut)return B[z]}},this.getCriticalExtV=function(d,B,ut){if(B!=null)return[B,ut];var z=this.getExtInfo(d);return z==null?[null,null]:[x(this.hex,z.vidx),z.critical]},this.getExtBasicConstraints=function(d,B){if(d===void 0&&B===void 0){var ut=this.getExtInfo("basicConstraints");if(ut===void 0)return;d=x(this.hex,ut.vidx),B=ut.critical}var z={extname:"basicConstraints"};if(B&&(z.critical=!0),d==="3000")return z;if(d==="30030101ff")return z.cA=!0,z;if(d.substr(0,12)==="30060101ff02"){var St=h(d,10),Mt=parseInt(St,16);return z.cA=!0,z.pathLen=Mt,z}throw new Error("hExtV parse error: "+d)},this.getExtNameConstraints=function(d,B){var ut=this.getCriticalExtV("nameConstraints",d,B);if(d=ut[0],B=ut[1],d!=null){var z={extname:"nameConstraints"};B&&(z.critical=!0);for(var St=o(d,0),Mt=0;Mt<St.length;Mt++){for(var te=[],ie=o(d,St[Mt]),ge=0;ge<ie.length;ge++){var Ie=x(d,ie[ge]),br=this.getGeneralSubtree(Ie);te.push(br)}var xr=d.substr(St[Mt],2);xr=="a0"?z.permit=te:xr=="a1"&&(z.exclude=te)}return z}},this.getGeneralSubtree=function(d){var B=o(d,0),ut=B.length;if(ut<1||2<ut)throw new Error("wrong num elements");for(var z=this.getGeneralName(x(d,B[0])),St=1;St<ut;St++){var Mt=d.substr(B[St],2),te=h(d,B[St]),ie=parseInt(te,16);Mt=="80"&&(z.min=ie),Mt=="81"&&(z.max=ie)}return z},this.getExtKeyUsage=function(d,B){var ut=this.getCriticalExtV("keyUsage",d,B);if(d=ut[0],B=ut[1],d!=null){var z={extname:"keyUsage"};return B&&(z.critical=!0),z.names=this.getExtKeyUsageString(d).split(","),z}},this.getExtKeyUsageBin=function(d){if(d===void 0){var B=this.getExtInfo("keyUsage");if(B===void 0)return"";d=x(this.hex,B.vidx)}if(d.length!=8&&d.length!=10)throw new Error("malformed key usage value: "+d);var ut="000000000000000"+parseInt(d.substr(6),16).toString(2);return d.length==8&&(ut=ut.slice(-8)),d.length==10&&(ut=ut.slice(-16)),ut=ut.replace(/0+$/,""),ut==""&&(ut="0"),ut},this.getExtKeyUsageString=function(d){for(var B=this.getExtKeyUsageBin(d),ut=new Array,z=0;z<B.length;z++)B.substr(z,1)=="1"&&ut.push(nr.KEYUSAGE_NAME[z]);return ut.join(",")},this.getExtSubjectKeyIdentifier=function(d,B){if(d===void 0&&B===void 0){var ut=this.getExtInfo("subjectKeyIdentifier");if(ut===void 0)return;d=x(this.hex,ut.vidx),B=ut.critical}var z={extname:"subjectKeyIdentifier"};B&&(z.critical=!0);var St=h(d,0);return z.kid={hex:St},z},this.getExtAuthorityKeyIdentifier=function(d,B){if(d===void 0&&B===void 0){var ut=this.getExtInfo("authorityKeyIdentifier");if(ut===void 0)return;d=x(this.hex,ut.vidx),B=ut.critical}var z={extname:"authorityKeyIdentifier"};B&&(z.critical=!0);for(var St=o(d,0),Mt=0;Mt<St.length;Mt++){var te=d.substr(St[Mt],2);if(te==="80"&&(z.kid={hex:h(d,St[Mt])}),te==="a1"){var ie=x(d,St[Mt]),ge=this.getGeneralNames(ie);z.issuer=ge[0].dn}te==="82"&&(z.sn={hex:h(d,St[Mt])})}return z},this.getExtExtKeyUsage=function(d,B){if(d===void 0&&B===void 0){var ut=this.getExtInfo("extKeyUsage");if(ut===void 0)return;d=x(this.hex,ut.vidx),B=ut.critical}var z={extname:"extKeyUsage",array:[]};B&&(z.critical=!0);for(var St=o(d,0),Mt=0;Mt<St.length;Mt++)z.array.push(T(h(d,St[Mt])));return z},this.getExtExtKeyUsageName=function(){var d=this.getExtInfo("extKeyUsage");if(d===void 0)return d;var B=new Array,ut=x(this.hex,d.vidx);if(ut==="")return B;for(var z=o(ut,0),St=0;St<z.length;St++)B.push(T(h(ut,z[St])));return B},this.getExtSubjectAltName=function(d,B){if(d===void 0&&B===void 0){var ut=this.getExtInfo("subjectAltName");if(ut===void 0)return;d=x(this.hex,ut.vidx),B=ut.critical}var z={extname:"subjectAltName",array:[]};return B&&(z.critical=!0),z.array=this.getGeneralNames(d),z},this.getExtIssuerAltName=function(d,B){if(d===void 0&&B===void 0){var ut=this.getExtInfo("issuerAltName");if(ut===void 0)return;d=x(this.hex,ut.vidx),B=ut.critical}var z={extname:"issuerAltName",array:[]};return B&&(z.critical=!0),z.array=this.getGeneralNames(d),z},this.getGeneralNames=function(d){for(var B=o(d,0),ut=[],z=0;z<B.length;z++){var St=this.getGeneralName(x(d,B[z]));St!==void 0&&ut.push(St)}return ut},this.getGeneralName=function(d){var B=d.substr(0,2),ut=h(d,0),z=gr(ut);if(B=="81")return{rfc822:z};if(B=="82")return{dns:z};if(B=="86")return{uri:z};if(B=="87")return{ip:Bs(ut)};if(B=="a4")return{dn:this.getX500Name(ut)};if(B=="a0")return{other:this.getOtherName(d)}},this.getExtSubjectAltName2=function(){var d,B,ut,z=this.getExtInfo("subjectAltName");if(z===void 0)return z;for(var St=new Array,Mt=x(this.hex,z.vidx),te=o(Mt,0),ie=0;ie<te.length;ie++)ut=Mt.substr(te[ie],2),d=h(Mt,te[ie]),ut==="81"&&(B=_r(d),St.push(["MAIL",B])),ut==="82"&&(B=_r(d),St.push(["DNS",B])),ut==="84"&&(B=nr.hex2dn(d,0),St.push(["DN",B])),ut==="86"&&(B=_r(d),St.push(["URI",B])),ut==="87"&&(B=Bs(d),St.push(["IP",B]));return St},this.getExtCRLDistributionPoints=function(d,B){if(d===void 0&&B===void 0){var ut=this.getExtInfo("cRLDistributionPoints");if(ut===void 0)return;d=x(this.hex,ut.vidx),B=ut.critical}var z={extname:"cRLDistributionPoints",array:[]};B&&(z.critical=!0);for(var St=o(d,0),Mt=0;Mt<St.length;Mt++){var te=x(d,St[Mt]);z.array.push(this.getDistributionPoint(te))}return z},this.getDistributionPoint=function(d){for(var B={},ut=o(d,0),z=0;z<ut.length;z++){var St=d.substr(ut[z],2),Mt=x(d,ut[z]);St=="a0"&&(B.dpname=this.getDistributionPointName(Mt))}return B},this.getDistributionPointName=function(d){for(var B={},ut=o(d,0),z=0;z<ut.length;z++){var St=d.substr(ut[z],2),Mt=x(d,ut[z]);St=="a0"&&(B.full=this.getGeneralNames(Mt))}return B},this.getExtCRLDistributionPointsURI=function(){var d=this.getExtCRLDistributionPoints();if(d==null)return d;for(var B=d.array,ut=[],z=0;z<B.length;z++)try{B[z].dpname.full[0].uri!=null&&ut.push(B[z].dpname.full[0].uri)}catch{}return ut},this.getExtAIAInfo=function(){var d=this.getExtInfo("authorityInfoAccess");if(d===void 0)return d;for(var B={ocsp:[],caissuer:[]},ut=o(this.hex,d.vidx),z=0;z<ut.length;z++){var St=_(this.hex,ut[z],[0],"06"),Mt=_(this.hex,ut[z],[1],"86");St==="2b06010505073001"&&B.ocsp.push(_r(Mt)),St==="2b06010505073002"&&B.caissuer.push(_r(Mt))}return B},this.getExtAuthorityInfoAccess=function(d,B){if(d===void 0&&B===void 0){var ut=this.getExtInfo("authorityInfoAccess");if(ut===void 0)return;d=x(this.hex,ut.vidx),B=ut.critical}var z={extname:"authorityInfoAccess",array:[]};B&&(z.critical=!0);for(var St=o(d,0),Mt=0;Mt<St.length;Mt++){var te=M(d,St[Mt],[0],"06"),ie=_(d,St[Mt],[1],"86"),ge=_r(ie);if(te=="2b06010505073001")z.array.push({ocsp:ge});else if(te=="2b06010505073002")z.array.push({caissuer:ge});else throw new Error("unknown method: "+te)}return z},this.getExtCertificatePolicies=function(d,B){if(d===void 0&&B===void 0){var ut=this.getExtInfo("certificatePolicies");if(ut===void 0)return;d=x(this.hex,ut.vidx),B=ut.critical}var z={extname:"certificatePolicies",array:[]};B&&(z.critical=!0);for(var St=o(d,0),Mt=0;Mt<St.length;Mt++){var te=x(d,St[Mt]),ie=this.getPolicyInformation(te);z.array.push(ie)}return z},this.getPolicyInformation=function(d){var B={},ut=_(d,0,[0],"06");B.policyoid=T(ut);var z=O(d,0,[1],"30");if(z!=-1){B.array=[];for(var St=o(d,z),Mt=0;Mt<St.length;Mt++){var te=x(d,St[Mt]),ie=this.getPolicyQualifierInfo(te);B.array.push(ie)}}return B},this.getOtherName=function(d){var B={},ut=o(d,0),z=_(d,ut[0],[],"06"),St=_(d,ut[1],[]);return B.oid=T(z),B.value=C(St),B},this.getPolicyQualifierInfo=function(d){var B={},ut=_(d,0,[0],"06");if(ut==="2b06010505070201"){var z=M(d,0,[1],"16");B.cps=gr(z)}else if(ut==="2b06010505070202"){var St=K(d,0,[1],"30");B.unotice=this.getUserNotice(St)}return B},this.getUserNotice=function(d){var B=null,ut={};try{B=l.parse(d);var z=this._asn1ToUnotice(B);return z}catch{return}},this._asn1ToUnotice=function(d){try{for(var B={},ut=Fn(d,"seq"),z=0;z<ut.length;z++){var St=this._asn1ToNoticeRef(ut[z]);St!=null&&(B.noticeref=St);var Mt=this.asn1ToDisplayText(ut[z]);Mt!=null&&(B.exptext=Mt)}return Object.keys(B).length>0?B:void 0}catch{return}},this._asn1ToNoticeRef=function(d){try{for(var B={},ut=Fn(d,"seq"),z=0;z<ut.length;z++){var St=this._asn1ToNoticeNum(ut[z]);St!=null&&(B.noticenum=St);var Mt=this.asn1ToDisplayText(ut[z]);Mt!=null&&(B.org=Mt)}return Object.keys(B).length>0?B:void 0}catch{return}},this._asn1ToNoticeNum=function(d){try{for(var B=Fn(d,"seq"),ut=[],z=0;z<B.length;z++){var St=B[z];ut.push(parseInt(Fn(St,"int.hex"),16))}return ut}catch{return}},this.getDisplayText=function(d){var B={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"},ut={};return ut.type=B[d.substr(0,2)],ut.str=gr(h(d,0)),ut},this.asn1ToDisplayText=function(d){if(d.utf8str!=null)return{type:"utf8",str:d.utf8str.str};if(d.ia5str!=null)return{type:"ia5",str:d.ia5str.str};if(d.visstr!=null)return{type:"vis",str:d.visstr.str};if(d.bmpstr!=null)return{type:"bmp",str:d.bmpstr.str};if(d.prnstr!=null)return{type:"prn",str:d.prnstr.str}},this.getExtPolicyMappings=function(d,B){var ut=this.getCriticalExtV("policyMappings",d,B);if(d=ut[0],B=ut[1],d!=null){var z={extname:"policyMappings"};B&&(z.critical=!0);try{for(var St=C(d),Mt=St.seq,te=[],ie=0;ie<Mt.length;ie++){var ge=Mt[ie].seq;te.push([ge[0].oid,ge[1].oid])}z.array=te}catch{throw new Wt("malformed policyMappings")}return z}},this.getExtPolicyConstraints=function(d,B){var ut=this.getCriticalExtV("policyConstraints",d,B);if(d=ut[0],B=ut[1],d!=null){var z={extname:"policyConstraints"};B&&(z.critical=!0);var St=C(d);try{for(var Mt=St.seq,te=0;te<Mt.length;te++){var ie=Mt[te].tag;ie.explicit==!1&&(ie.tag=="80"&&(z.reqexp=parseInt(ie.hex,16)),ie.tag=="81"&&(z.inhibit=parseInt(ie.hex,16)))}}catch{return new Wt("malformed policyConstraints value")}return z}},this.getExtInhibitAnyPolicy=function(d,B){var ut=this.getCriticalExtV("inhibitAnyPolicy",d,B);if(d=ut[0],B=ut[1],d!=null){var z={extname:"inhibitAnyPolicy"};B&&(z.critical=!0);var St=at(d,0);return St==-1?new Wt("wrong value"):(z.skip=St,z)}},this.getExtCRLNumber=function(d,B){var ut={extname:"cRLNumber"};if(B&&(ut.critical=!0),d.substr(0,2)=="02")return ut.num={hex:h(d,0)},ut;throw new Wt("hExtV parse error: "+d)},this.getExtCRLReason=function(d,B){var ut={extname:"cRLReason"};if(B&&(ut.critical=!0),d.substr(0,2)=="0a")return ut.code=parseInt(h(d,0),16),ut;throw new Error("hExtV parse error: "+d)},this.getExtOcspNonce=function(d,B){var ut={extname:"ocspNonce"};B&&(ut.critical=!0);var z=h(d,0);return ut.hex=z,ut},this.getExtOcspNoCheck=function(d,B){var ut={extname:"ocspNoCheck"};return B&&(ut.critical=!0),ut},this.getExtAdobeTimeStamp=function(d,B){if(d===void 0&&B===void 0){var ut=this.getExtInfo("adobeTimeStamp");if(ut===void 0)return;d=x(this.hex,ut.vidx),B=ut.critical}var z={extname:"adobeTimeStamp"};B&&(z.critical=!0);var St=o(d,0);if(St.length>1){var Mt=x(d,St[1]),te=this.getGeneralName(Mt);te.uri!=null&&(z.uri=te.uri)}if(St.length>2){var ie=x(d,St[2]);ie=="0101ff"&&(z.reqauth=!0),ie=="010100"&&(z.reqauth=!1)}return z},this.getExtSubjectDirectoryAttributes=function(d,B){if(d===void 0&&B===void 0){var ut=this.getExtInfo("subjectDirectoryAttributes");if(ut===void 0)return;d=x(this.hex,ut.vidx),B=ut.critical}var z={extname:"subjectDirectoryAttributes"};B&&(z.critical=!0);try{for(var St=C(d),Mt=[],te=0;te<St.seq.length;te++){var ie=St.seq[te],ge=Fn(ie,"seq.0.oid"),Ie=Fn(ie,"seq.1.set");if(ge==null||Ie==null)throw"error";Mt.push({attr:ge,array:Ie})}return z.array=Mt,z}catch{throw new Error("malformed subjectDirectoryAttributes extension value")}};var Gt=function(d){var B={};try{var ut=d.seq[0].oid,z=v.asn1.x509.OID.name2oid(ut);B.type=v.asn1.x509.OID.oid2atype(z);var St=d.seq[1];if(St.utf8str!=null)B.ds="utf8",B.value=St.utf8str.str;else if(St.numstr!=null)B.ds="num",B.value=St.numstr.str;else if(St.telstr!=null)B.ds="tel",B.value=St.telstr.str;else if(St.prnstr!=null)B.ds="prn",B.value=St.prnstr.str;else if(St.ia5str!=null)B.ds="ia5",B.value=St.ia5str.str;else if(St.visstr!=null)B.ds="vis",B.value=St.visstr.str;else if(St.bmpstr!=null)B.ds="bmp",B.value=St.bmpstr.str;else throw"error";return B}catch{throw new Erorr("improper ASN.1 parsed AttrTypeAndValue")}},ve=function(d){try{return d.set.map(function(B){return Gt(B)})}catch(B){throw new Error("improper ASN.1 parsed RDN: "+B)}},be=function(d){try{return d.seq.map(function(B){return ve(B)})}catch(B){throw new Error("improper ASN.1 parsed X500Name: "+B)}};this.getX500NameRule=function(d){for(var B=!0,ut=!0,z=!1,St="",Mt="",te=null,ie=[],ge=0;ge<d.length;ge++)for(var Ie=d[ge],br=0;br<Ie.length;br++)ie.push(Ie[br]);for(var ge=0;ge<ie.length;ge++){var xr=ie[ge],Fr=xr.ds,Vr=xr.value,Ur=xr.type;if(St+=":"+Fr,Fr!="prn"&&Fr!="utf8"&&Fr!="ia5")return"mixed";if(Fr=="ia5"){if(Ur!="CN")return"mixed";if(v.lang.String.isMail(Vr))continue;return"mixed"}if(Ur=="C"){if(Fr=="prn")continue;return"mixed"}if(Mt+=":"+Fr,te==null)te=Fr;else if(te!==Fr)return"mixed"}return te??"prn"},this.getAttrTypeAndValue=function(d){var B=C(d);return Gt(B)},this.getRDN=function(d){var B=C(d);return ve(B)},this.getX500NameArray=function(d){var B=C(d);return be(B)},this.getX500Name=function(d,B,ut){var z=this.getX500NameArray(d),St=this.dnarraytostr(z),Mt={str:St};return Mt.array=z,ut==!0&&(Mt.hex=d),B==!0&&(Mt.canon=this.c14nRDNArray(z)),Mt},this.readCertPEM=function(d){this.readCertHex(Ft(d))},this.readCertHex=function(d){this.hex=d,this.getVersion();try{yt(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(d){var B={};return d==null&&(d={}),B.version=this.getVersion(),B.serial={hex:this.getSerialNumberHex()},B.sigalg=this.getSignatureAlgorithmField(),B.issuer=this.getIssuer(d.dncanon,d.dnhex),B.notbefore=this.getNotBefore(),B.notafter=this.getNotAfter(),B.subject=this.getSubject(d.dncanon,d.dnhex),B.sbjpubkey=ke(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo!=null&&this.aExtInfo.length>0&&(B.ext=this.getExtParamArray()),B.sighex=this.getSignatureValueHex(),d.tbshex==!0&&(B.tbshex=K(this.hex,0,[0])),d.nodnarray==!0&&(delete B.issuer.array,delete B.subject.array),B},this.getExtParamArray=function(d){if(d==null){var B=O(this.hex,0,[0,"[3]"]);B!=-1&&(d=dt(this.hex,0,[0,"[3]",0],"30"))}for(var ut=[],z=o(d,0),St=0;St<z.length;St++){var Mt=x(d,z[St]),te=this.getExtParam(Mt);te!=null&&ut.push(te)}return ut},this.getExtParam=function(d){var B={},ut=o(d,0),z=ut.length;if(z!=2&&z!=3)throw new Error("wrong number elements in Extension: "+z+" "+d);var St=ot(_(d,0,[0],"06")),Mt=!1;z==3&&K(d,0,[1])=="0101ff"&&(Mt=!0);var te=K(d,0,[z-1,0]),ie=void 0;if(St=="2.5.29.14"?ie=this.getExtSubjectKeyIdentifier(te,Mt):St=="2.5.29.15"?ie=this.getExtKeyUsage(te,Mt):St=="2.5.29.17"?ie=this.getExtSubjectAltName(te,Mt):St=="2.5.29.18"?ie=this.getExtIssuerAltName(te,Mt):St=="2.5.29.19"?ie=this.getExtBasicConstraints(te,Mt):St=="2.5.29.30"?ie=this.getExtNameConstraints(te,Mt):St=="2.5.29.31"?ie=this.getExtCRLDistributionPoints(te,Mt):St=="2.5.29.32"?ie=this.getExtCertificatePolicies(te,Mt):St=="2.5.29.33"?ie=this.getExtPolicyMappings(te,Mt):St=="2.5.29.35"?ie=this.getExtAuthorityKeyIdentifier(te,Mt):St=="2.5.29.36"?ie=this.getExtPolicyConstraints(te,Mt):St=="2.5.29.37"?ie=this.getExtExtKeyUsage(te,Mt):St=="2.5.29.54"?ie=this.getExtInhibitAnyPolicy(te,Mt):St=="1.3.6.1.5.5.7.1.1"?ie=this.getExtAuthorityInfoAccess(te,Mt):St=="2.5.29.20"?ie=this.getExtCRLNumber(te,Mt):St=="2.5.29.21"?ie=this.getExtCRLReason(te,Mt):St=="2.5.29.9"?ie=this.getExtSubjectDirectoryAttributes(te,Mt):St=="1.3.6.1.5.5.7.48.1.2"?ie=this.getExtOcspNonce(te,Mt):St=="1.3.6.1.5.5.7.48.1.5"?ie=this.getExtOcspNoCheck(te,Mt):St=="1.2.840.113583.1.1.9.1"?ie=this.getExtAdobeTimeStamp(te,Mt):nr.EXT_PARSER[St]!=null&&(ie=nr.EXT_PARSER[St](St,Mt,te)),ie!=null)return ie;var ge={extname:St,extn:te};try{ge.extn=C(te)}catch{}return Mt&&(ge.critical=!0),ge},this.findExt=function(d,B){for(var ut=0;ut<d.length;ut++)if(d[ut].extname==B)return d[ut];return null},this.updateExtCDPFullURI=function(d,B){var ut=this.findExt(d,"cRLDistributionPoints");if(ut!=null&&ut.array!=null){for(var z=ut.array,St=0;St<z.length;St++)if(z[St].dpname!=null&&z[St].dpname.full!=null)for(var Mt=z[St].dpname.full,te=0;te<Mt.length;te++){var ie=Mt[St];ie.uri!=null&&(ie.uri=B)}}},this.updateExtAIAOCSP=function(d,B){var ut=this.findExt(d,"authorityInfoAccess");if(ut!=null&&ut.array!=null)for(var z=ut.array,St=0;St<z.length;St++)z[St].ocsp!=null&&(z[St].ocsp=B)},this.updateExtAIACAIssuer=function(d,B){var ut=this.findExt(d,"authorityInfoAccess");if(ut!=null&&ut.array!=null)for(var z=ut.array,St=0;St<z.length;St++)z[St].caissuer!=null&&(z[St].caissuer=B)},this.dnarraytostr=function(d){function B(z){return z.map(function(St){return ut(St).replace(/\+/,"\\+")}).join("+")}function ut(z){return z.type+"="+z.value}return"/"+d.map(function(z){return B(z).replace(/\//,"\\/")}).join("/")},this.setCanonicalizedDN=function(d){var B;if(d.str!=null&&d.array==null){var ut=new v.asn1.x509.X500Name({str:d.str}),z=ut.tohex();B=this.getX500NameArray(z)}else B=d.array;d.canon==null&&(d.canon=this.c14nRDNArray(B))},this.c14nRDNArray=function(d){for(var B=[],ut=0;ut<d.length;ut++){for(var z=d[ut],St=[],Mt=0;Mt<z.length;Mt++){var te=z[Mt],ie=te.value;ie=ie.replace(/^\s*/,""),ie=ie.replace(/\s*$/,""),ie=ie.replace(/\s+/g," "),ie=ie.toLowerCase(),St.push(te.type.toLowerCase()+"="+ie)}B.push(St.join("+"))}return"/"+B.join("/")},this.getInfo=function(){var d=function(Is){for(var fn="",Jn="    ",Nn=`
`,Pt=Is.array,ps=0;ps<Pt.length;ps++){var yn=Pt[ps];if(yn.dn!=null&&(fn+=Jn+"dn: "+yn.dn.str+Nn),yn.ip!=null&&(fn+=Jn+"ip: "+yn.ip+Nn),yn.rfc822!=null&&(fn+=Jn+"rfc822: "+yn.rfc822+Nn),yn.dns!=null&&(fn+=Jn+"dns: "+yn.dns+Nn),yn.uri!=null&&(fn+=Jn+"uri: "+yn.uri+Nn),yn.other!=null){var Un=yn.other.oid,Kr=JSON.stringify(yn.other.value).replace(/\"/g,"");fn+=Jn+"other: "+Un+"="+Kr+Nn}}return fn=fn.replace(/\n$/,""),fn},B=function(Is){for(var fn="",Jn=Is.array,Nn=0;Nn<Jn.length;Nn++){var Pt=Jn[Nn];if(fn+="    policy oid: "+Pt.policyoid+`
`,Pt.array!==void 0)for(var ps=0;ps<Pt.array.length;ps++){var yn=Pt.array[ps];yn.cps!==void 0&&(fn+="    cps: "+yn.cps+`
`)}}return fn},ut=function(Is){for(var fn="",Jn=Is.array,Nn=0;Nn<Jn.length;Nn++){var Pt=Jn[Nn];try{Pt.dpname.full[0].uri!==void 0&&(fn+="    "+Pt.dpname.full[0].uri+`
`)}catch{}try{Pt.dname.full[0].dn.hex!==void 0&&(fn+="    "+nr.hex2dn(Pt.dpname.full[0].dn.hex)+`
`)}catch{}}return fn},z=function(Is){for(var fn="",Jn=Is.array,Nn=0;Nn<Jn.length;Nn++){var Pt=Jn[Nn];Pt.caissuer!==void 0&&(fn+="    caissuer: "+Pt.caissuer+`
`),Pt.ocsp!==void 0&&(fn+="    ocsp: "+Pt.ocsp+`
`)}return fn},St=nr,Mt,te,ie;if(Mt=`Basic Fields
`,Mt+="  serial number: "+this.getSerialNumberHex()+`
`,Mt+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,Mt+="  issuer: "+this.getIssuerString()+`
`,Mt+="  notBefore: "+this.getNotBefore()+`
`,Mt+="  notAfter: "+this.getNotAfter()+`
`,Mt+="  subject: "+this.getSubjectString()+`
`,Mt+=`  subject public key info: 
`,te=this.getPublicKey(),Mt+="    key algorithm: "+te.type+`
`,te.type==="RSA"&&(Mt+="    n="+gu(te.n.toString(16)).substr(0,16)+`...
`,Mt+="    e="+gu(te.e.toString(16))+`
`),ie=this.aExtInfo,ie!=null){Mt+=`X509v3 Extensions:
`;for(var ge=0;ge<ie.length;ge++){var Ie=ie[ge],br=v.asn1.x509.OID.oid2name(Ie.oid);br===""&&(br=Ie.oid);var xr="";if(Ie.critical===!0&&(xr="CRITICAL"),Mt+="  "+br+" "+xr+`:
`,br==="basicConstraints"){var Fr=this.getExtBasicConstraints();Fr.cA===void 0?Mt+=`    {}
`:(Mt+="    cA=true",Fr.pathLen!==void 0&&(Mt+=", pathLen="+Fr.pathLen),Mt+=`
`)}else if(br=="policyMappings"){var Vr=this.getExtPolicyMappings().array,Ur=Vr.map(function(Is){var fn=Is;return fn[0]+":"+fn[1]}).join(", ");Mt+="    "+Ur+`
`}else if(br=="policyConstraints"){var xn=this.getExtPolicyConstraints();Mt+="    ",xn.reqexp!=null&&(Mt+=" reqexp="+xn.reqexp),xn.inhibit!=null&&(Mt+=" inhibit="+xn.inhibit),Mt+=`
`}else if(br=="inhibitAnyPolicy"){var xn=this.getExtInhibitAnyPolicy();Mt+="    skip="+xn.skip+`
`}else if(br=="keyUsage")Mt+="    "+this.getExtKeyUsageString()+`
`;else if(br=="subjectKeyIdentifier")Mt+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(br=="authorityKeyIdentifier"){var pn=this.getExtAuthorityKeyIdentifier();pn.kid!==void 0&&(Mt+="    kid="+pn.kid.hex+`
`)}else if(br=="extKeyUsage"){var bi=this.getExtExtKeyUsage().array;Mt+="    "+bi.join(", ")+`
`}else if(br=="subjectAltName"){var Ns=d(this.getExtSubjectAltName());Mt+=Ns+`
`}else if(br=="cRLDistributionPoints"){var Es=this.getExtCRLDistributionPoints();Mt+=ut(Es)}else if(br=="authorityInfoAccess"){var bs=this.getExtAuthorityInfoAccess();Mt+=z(bs)}else br=="certificatePolicies"&&(Mt+=B(this.getExtCertificatePolicies()))}}return Mt+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,Mt+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`,Mt},typeof r=="string"&&(r.indexOf("-----BEGIN")!=-1?this.readCertPEM(r):v.lang.String.isHex(r)&&this.readCertHex(r))}nr.EXT_PARSER={},nr.registExtParser=function(r,l){nr.EXT_PARSER[r]=l},nr.hex2dn=function(r,l){l===void 0&&(l=0);var o=new nr,h=Ge.getTLV(r,l),b=o.getX500Name(r);return b.str},nr.hex2rdn=function(r,l){if(l===void 0&&(l=0),r.substr(l,2)!=="31")throw new Error("malformed RDN");for(var o=new Array,h=Ge.getChildIdx(r,l),b=0;b<h.length;b++)o.push(nr.hex2attrTypeValue(r,h[b]));return o=o.map(function(C){return C.replace("+","\\+")}),o.join("+")},nr.hex2attrTypeValue=function(r,l){var o=Ge,h=o.getV;if(l===void 0&&(l=0),r.substr(l,2)!=="30")throw new Error("malformed attribute type and value");var b=o.getChildIdx(r,l);b.length!==2||r.substr(b[0],2);var C=h(r,b[0]),x=v.asn1.ASN1Util.oidHexToInt(C),_=v.asn1.x509.OID.oid2atype(x),M=h(r,b[1]),K=gr(M);return _+"="+K},nr.getPublicKeyFromCertHex=function(r){var l=new nr;return l.readCertHex(r),l.getPublicKey()},nr.getPublicKeyFromCertPEM=function(r){var l=new nr;return l.readCertPEM(r),l.getPublicKey()},nr.getPublicKeyInfoPropOfCertPEM=function(r){var l=Ge,o=l.getVbyList,h={},b,C,x;return h.algparam=null,b=new nr,b.readCertPEM(r),C=b.getPublicKeyHex(),h.keyhex=o(C,0,[1],"03").substr(2),h.algoid=o(C,0,[0,0],"06"),h.algoid==="2a8648ce3d0201"&&(h.algparam=o(C,0,[0,1],"06")),h},nr.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"];var $a=function(r){var l=v,o=l.lang.String.isHex,h=Ge,b=h.getV,C=h.getTLV,x=h.getVbyList,_=h.getTLVbyList,M=h.getTLVbyListEx,K=h.getIdxbyList,dt=h.getIdxbyListEx,yt=h.getChildIdx,O=new nr;this.hex=null,this.posSigAlg=null,this.posRevCert=null,this.parsed=null,this._setPos=function(){var I=K(this.hex,0,[0,0]),at=this.hex.substr(I,2);if(at=="02")this.posSigAlg=1;else if(at=="30")this.posSigAlg=0;else throw new Error("malformed 1st item of TBSCertList: "+at);var T=K(this.hex,0,[0,this.posSigAlg+3]),ot=this.hex.substr(T,2);if(ot=="17"||ot=="18"){var X,Ft;X=K(this.hex,0,[0,this.posSigAlg+4]),this.posRevCert=null,X!=-1&&(Ft=this.hex.substr(X,2),Ft=="30"&&(this.posRevCert=this.posSigAlg+4))}else if(ot=="30")this.posRevCert=this.posSigAlg+3;else if(ot=="a0")this.posRevCert=null;else throw new Error("malformed nextUpdate or revCert tag: "+ot)},this.getVersion=function(){return this.posSigAlg==0?null:parseInt(x(this.hex,0,[0,0],"02"),16)+1},this.getSignatureAlgorithmField=function(){var I=_(this.hex,0,[0,this.posSigAlg],"30");return O.getAlgorithmIdentifierName(I)},this.getIssuer=function(){return O.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return _(this.hex,0,[0,this.posSigAlg+1],"30")},this.getThisUpdate=function(){var I=x(this.hex,0,[0,this.posSigAlg+2]);return result=gr(I)},this.getNextUpdate=function(){var I=K(this.hex,0,[0,this.posSigAlg+3]),at=this.hex.substr(I,2);return at!="17"&&at!="18"?null:gr(b(this.hex,I))},this.getRevCertArray=function(){if(this.posRevCert==null)return null;for(var I=[],at=K(this.hex,0,[0,this.posRevCert]),T=yt(this.hex,at),ot=0;ot<T.length;ot++){var X=C(this.hex,T[ot]);I.push(this.getRevCert(X))}return I},this.getRevCert=function(I){var at={},T=yt(I,0);return at.sn={hex:x(I,0,[0],"02")},at.date=gr(x(I,0,[1])),T.length==3&&(at.ext=O.getExtParamArray(_(I,0,[2]))),at},this.findRevCert=function(I){var at=new nr(I),T=at.getSerialNumberHex();return this.findRevCertBySN(T)},this.findRevCertBySN=function(I){if(this.parsed==null&&this.getParam(),this.parsed.revcert==null)return null;for(var at=this.parsed.revcert,T=0;T<at.length;T++)if(I==at[T].sn.hex)return at[T];return null},this.getSignatureValueHex=function(){return x(this.hex,0,[2],"03",!0)},this.verifySignature=function(I){var at=this.getSignatureAlgorithmField(),T=this.getSignatureValueHex(),ot=_(this.hex,0,[0],"30"),X=new v.crypto.Signature({alg:at});return X.init(I),X.updateHex(ot),X.verify(T)},this.getParam=function(I){var at={},T=this.getVersion();T!=null&&(at.version=T),at.sigalg=this.getSignatureAlgorithmField(),at.issuer=this.getIssuer(),at.thisupdate=this.getThisUpdate();var ot=this.getNextUpdate();ot!=null&&(at.nextupdate=ot);var X=this.getRevCertArray();X!=null&&(at.revcert=X);var Ft=dt(this.hex,0,[0,"[0]"]);if(Ft!=-1){var Tt=M(this.hex,0,[0,"[0]",0]);at.ext=O.getExtParamArray(Tt)}return at.sighex=this.getSignatureValueHex(),this.parsed=at,typeof I=="object"&&(I.tbshex==!0&&(at.tbshex=_(this.hex,0,[0])),I.nodnarray==!0&&delete at.issuer.array),at},typeof r=="string"&&(o(r)?this.hex=r:r.match(/-----BEGIN X509 CRL/)&&(this.hex=Pn(r)),this._setPos())};(typeof v>"u"||!v)&&(v={}),(typeof v.jws>"u"||!v.jws)&&(v.jws={}),v.jws.JWS=function(){var r=v,l=r.jws.JWS,o=l.isSafeJSONString;this.parseJWS=function(h,b){if(!(this.parsedJWS!==void 0&&(b||this.parsedJWS.sigvalH!==void 0))){var C=h.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(C==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var x=C[1],_=C[2],M=C[3],K=x+"."+_;if(this.parsedJWS={},this.parsedJWS.headB64U=x,this.parsedJWS.payloadB64U=_,this.parsedJWS.sigvalB64U=M,this.parsedJWS.si=K,!b){var dt=Cn(M),yt=en(dt,16);this.parsedJWS.sigvalH=dt,this.parsedJWS.sigvalBI=yt}var O=gs(x),I=gs(_);if(this.parsedJWS.headS=O,this.parsedJWS.payloadS=I,!o(O,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+O}}},v.jws.JWS.sign=function(r,l,o,h,b){var C=v,x=C.jws,_=x.JWS,M=_.readSafeJSONString,K=_.isSafeJSONString,dt=C.crypto,yt=dt.ECDSA,O=dt.Mac,I=dt.Signature,at=JSON,T,ot,X;if(typeof l!="string"&&typeof l!="object")throw"spHeader must be JSON string or object: "+l;if(typeof l=="object"&&(ot=l,T=at.stringify(ot)),typeof l=="string"){if(T=l,!K(T))throw"JWS Head is not safe JSON string: "+T;ot=M(T)}if(X=o,typeof o=="object"&&(X=at.stringify(o)),(r==""||r==null)&&ot.alg!==void 0&&(r=ot.alg),r!=""&&r!=null&&ot.alg===void 0&&(ot.alg=r,T=at.stringify(ot)),r!==ot.alg)throw"alg and sHeader.alg doesn't match: "+r+"!="+ot.alg;var Ft=null;if(_.jwsalg2sigalg[r]===void 0)throw"unsupported alg name: "+r;Ft=_.jwsalg2sigalg[r];var Tt=Fe(T),Wt=Fe(X),Gt=Tt+"."+Wt,ve="";if(Ft.substr(0,4)=="Hmac"){if(h===void 0)throw"mac key shall be specified for HS* alg";var be=new O({alg:Ft,prov:"cryptojs",pass:h});be.updateString(Gt),ve=be.doFinal()}else if(Ft.indexOf("withECDSA")!=-1){var d=new I({alg:Ft});d.init(h,b),d.updateString(Gt);var B=d.sign();ve=v.crypto.ECDSA.asn1SigToConcatSig(B)}else if(Ft!="none"){var d=new I({alg:Ft});d.init(h,b),d.updateString(Gt),ve=d.sign()}var ut=An(ve);return Gt+"."+ut},v.jws.JWS.verify=function(r,l,o){var h=v,b=h.jws,C=b.JWS,x=C.readSafeJSONString,_=h.crypto,M=_.ECDSA,K=_.Mac,dt=_.Signature,yt;if(typeof vr!==void 0&&(yt=vr),!Ti(r))return!1;var O=r.split(".");if(O.length!==3)return!1;var I=O[0],at=O[1],T=I+"."+at,ot=Cn(O[2]),X=x(gs(O[0])),Ft=null,Tt=null;if(X.alg===void 0)throw"algorithm not specified in header";if(Ft=X.alg,Tt=Ft.substr(0,2),o!=null&&Object.prototype.toString.call(o)==="[object Array]"&&o.length>0){var Wt=":"+o.join(":")+":";if(Wt.indexOf(":"+Ft+":")==-1)throw"algorithm '"+Ft+"' not accepted in the list"}if(Ft!="none"&&l===null)throw"key shall be specified to verify.";if(typeof l=="string"&&l.indexOf("-----BEGIN ")!=-1&&(l=Nr.getKey(l)),(Tt=="RS"||Tt=="PS")&&!(l instanceof yt))throw"key shall be a RSAKey obj for RS* and PS* algs";if(Tt=="ES"&&!(l instanceof M))throw"key shall be a ECDSA obj for ES* algs";Ft=="none";var Gt=null;if(C.jwsalg2sigalg[X.alg]===void 0)throw"unsupported alg name: "+Ft;if(Gt=C.jwsalg2sigalg[Ft],Gt=="none")throw"not supported";if(Gt.substr(0,4)=="Hmac"){var ve=null;if(l===void 0)throw"hexadecimal key shall be specified for HMAC";var be=new K({alg:Gt,pass:l});return be.updateString(T),ve=be.doFinal(),ot==ve}else if(Gt.indexOf("withECDSA")!=-1){var d=null;try{d=M.concatSigToASN1Sig(ot)}catch{return!1}var B=new dt({alg:Gt});return B.init(l),B.updateString(T),B.verify(d)}else{var B=new dt({alg:Gt});return B.init(l),B.updateString(T),B.verify(ot)}},v.jws.JWS.parse=function(r){var l=r.split("."),o={},h,b,C;if(l.length!=2&&l.length!=3)throw"malformed sJWS: wrong number of '.' splitted elements";return h=l[0],b=l[1],l.length==3&&(C=l[2]),o.headerObj=v.jws.JWS.readSafeJSONString(gs(h)),o.payloadObj=v.jws.JWS.readSafeJSONString(gs(b)),o.headerPP=JSON.stringify(o.headerObj,null,"  "),o.payloadObj==null?o.payloadPP=gs(b):o.payloadPP=JSON.stringify(o.payloadObj,null,"  "),C!==void 0&&(o.sigHex=Cn(C)),o},v.jws.JWS.verifyJWT=function(r,l,o){var h=v,b=h.jws,C=b.JWS,x=C.readSafeJSONString,_=C.inArray,M=C.includedArray;if(!Ti(r))return!1;var K=r.split(".");if(K.length!=3)return!1;var dt=K[0],yt=K[1],O=dt+"."+yt,I=Cn(K[2]),at=x(gs(dt)),T=x(gs(yt));if(at.alg===void 0)return!1;if(o.alg===void 0)throw"acceptField.alg shall be specified";if(!_(at.alg,o.alg)||T.iss!==void 0&&typeof o.iss=="object"&&!_(T.iss,o.iss)||T.sub!==void 0&&typeof o.sub=="object"&&!_(T.sub,o.sub))return!1;if(T.aud!==void 0&&typeof o.aud=="object"){if(typeof T.aud=="string"){if(!_(T.aud,o.aud))return!1}else if(typeof T.aud=="object"&&!M(T.aud,o.aud))return!1}var ot=b.IntDate.getNow();return o.verifyAt!==void 0&&typeof o.verifyAt=="number"&&(ot=o.verifyAt),(o.gracePeriod===void 0||typeof o.gracePeriod!="number")&&(o.gracePeriod=0),!(T.exp!==void 0&&typeof T.exp=="number"&&T.exp+o.gracePeriod<ot||T.nbf!==void 0&&typeof T.nbf=="number"&&ot<T.nbf-o.gracePeriod||T.iat!==void 0&&typeof T.iat=="number"&&ot<T.iat-o.gracePeriod||T.jti!==void 0&&o.jti!==void 0&&T.jti!==o.jti||!C.verify(r,l,o.alg))},v.jws.JWS.includedArray=function(r,l){var o=v.jws.JWS.inArray;if(r===null||typeof r!="object"||typeof r.length!="number")return!1;for(var h=0;h<r.length;h++)if(!o(r[h],l))return!1;return!0},v.jws.JWS.inArray=function(r,l){if(l===null||typeof l!="object"||typeof l.length!="number")return!1;for(var o=0;o<l.length;o++)if(l[o]==r)return!0;return!1},v.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",ES512:"SHA512withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},v.jws.JWS.isSafeJSONString=function(r,l,o){var h=null;try{return h=ia(r),typeof h!="object"||h.constructor===Array?0:(l&&(l[o]=h),1)}catch{return 0}},v.jws.JWS.readSafeJSONString=function(r){var l=null;try{return l=ia(r),typeof l!="object"||l.constructor===Array?null:l}catch{return null}},v.jws.JWS.getEncodedSignatureValueFromJWS=function(r){var l=r.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(l==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return l[1]},v.jws.JWS.getJWKthumbprint=function(r){if(r.kty!=="RSA"&&r.kty!=="EC"&&r.kty!=="oct")throw"unsupported algorithm for JWK Thumprint";var l="{";if(r.kty==="RSA"){if(typeof r.n!="string"||typeof r.e!="string")throw"wrong n and e value for RSA key";l+='"e":"'+r.e+'",',l+='"kty":"'+r.kty+'",',l+='"n":"'+r.n+'"}'}else if(r.kty==="EC"){if(typeof r.crv!="string"||typeof r.x!="string"||typeof r.y!="string")throw"wrong crv, x and y value for EC key";l+='"crv":"'+r.crv+'",',l+='"kty":"'+r.kty+'",',l+='"x":"'+r.x+'",',l+='"y":"'+r.y+'"}'}else if(r.kty==="oct"){if(typeof r.k!="string")throw"wrong k value for oct(symmetric) key";l+='"kty":"'+r.kty+'",',l+='"k":"'+r.k+'"}'}var o=kn(l),h=v.crypto.Util.hashHex(o,"sha256"),b=An(h);return b},v.jws.IntDate={},v.jws.IntDate.get=function(r){var l=v.jws.IntDate,o=l.getNow,h=l.getZulu;if(r=="now")return o();if(r=="now + 1hour")return o()+3600;if(r=="now + 1day")return o()+3600*24;if(r=="now + 1month")return o()+3600*24*30;if(r=="now + 1year")return o()+3600*24*365;if(r.match(/Z$/))return h(r);if(r.match(/^[0-9]+$/))return parseInt(r);throw"unsupported format: "+r},v.jws.IntDate.getZulu=function(r){return Pu(r)},v.jws.IntDate.getNow=function(){var r=~~(new Date/1e3);return r},v.jws.IntDate.intDate2UTCString=function(r){var l=new Date(r*1e3);return l.toUTCString()},v.jws.IntDate.intDate2Zulu=function(r){var l=new Date(r*1e3),o=("0000"+l.getUTCFullYear()).slice(-4),h=("00"+(l.getUTCMonth()+1)).slice(-2),b=("00"+l.getUTCDate()).slice(-2),C=("00"+l.getUTCHours()).slice(-2),x=("00"+l.getUTCMinutes()).slice(-2),_=("00"+l.getUTCSeconds()).slice(-2);return o+h+b+C+x+_+"Z"},(typeof v>"u"||!v)&&(v={}),(typeof v.jws>"u"||!v.jws)&&(v.jws={}),v.jws.JWSJS=function(){var r=v,l=r.jws,o=l.JWS,h=o.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(b){this.init();var C=b.split(".");if(C.length!=3)throw"malformed input JWS";this.aHeader.push(C[0]),this.sPayload=C[1],this.aSignature.push(C[2])},this.addSignature=function(b,C,x,_){if(this.sPayload===void 0||this.sPayload===null)throw"there's no JSON-JS signature to add.";var M=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var K=v.jws.JWS.sign(b,C,this.sPayload,x,_),dt=K.split("."),yt=dt[0],O=dt[2];this.aHeader.push(dt[0]),this.aSignature.push(dt[2])}catch(I){throw this.aHeader.length>M&&this.aHeader.pop(),this.aSignature.length>M&&this.aSignature.pop(),"addSignature failed: "+I}},this.verifyAll=function(b){if(this.aHeader.length!==b.length||this.aSignature.length!==b.length)return!1;for(var C=0;C<b.length;C++){var x=b[C];if(x.length!==2)return!1;var _=this.verifyNth(C,x[0],x[1]);if(_===!1)return!1}return!0},this.verifyNth=function(b,C,x){if(this.aHeader.length<=b||this.aSignature.length<=b)return!1;var _=this.aHeader[b],M=this.aSignature[b],K=_+"."+this.sPayload+"."+M,dt=!1;try{dt=o.verify(K,C,x)}catch{return!1}return dt},this.readJWSJS=function(b){if(typeof b=="string"){var C=h(b);if(C==null)throw"argument is not safe JSON object string";this.aHeader=C.headers,this.sPayload=C.payload,this.aSignature=C.signatures}else try{if(b.headers.length>0)this.aHeader=b.headers;else throw"malformed header";if(typeof b.payload=="string")this.sPayload=b.payload;else throw"malformed signatures";if(b.signatures.length>0)this.aSignature=b.signatures;else throw"malformed signatures"}catch(x){throw"malformed JWS-JS JSON object: "+x}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return this.aHeader.length==0?1:0}},t.SecureRandom=nn,t.rng_seed_time=$t,t.BigInteger=w,t.RSAKey=vr,t.ECDSA=v.crypto.ECDSA,t.DSA=v.crypto.DSA,t.Signature=v.crypto.Signature,t.MessageDigest=v.crypto.MessageDigest,t.Mac=v.crypto.Mac,t.KEYUTIL=Nr,t.ASN1HEX=Ge,t.X509=nr,t.X509CRL=$a,t.CryptoJS=p,t.b64tohex=m,t.b64toBA=D,t.ECFieldElementFp=En,t.ECPointFp=an,t.ECCurveFp=Yn,t.stoBA=_u,t.BAtos=Zs,t.BAtohex=Ai,t.stohex=cs,t.stob64=On,t.stob64u=li,t.b64utos=pt,t.b64tob64u=Rr,t.b64utob64=Vs,t.hex2b64=E,t.hextob64u=An,t.b64utohex=Cn,t.utf8tob64u=Fe,t.b64utoutf8=gs,t.utf8tob64=pu,t.b64toutf8=Ji,t.utf8tohex=Su,t.hextoutf8=_r,t.hextorstr=gr,t.rstrtohex=kn,t.hextob64=Bu,t.hextob64nl=Iu,t.b64nltohex=Ru,t.hextopem=ke,t.pemtohex=Pn,t.hextoArrayBuffer=$u,t.ArrayBuffertohex=aa,t.zulutomsec=ku,t.msectozulu=oa,t.zulutosec=Pu,t.zulutodate=Ou,t.datetozulu=Ia,t.uricmptohex=hu,t.hextouricmp=Xi,t.ipv6tohex=wi,t.hextoipv6=fu,t.hextoip=Bs,t.iptohex=du,t.ucs2hextoutf8=Tu,t.encodeURIComponentAll=ti,t.newline_toUnix=Tn,t.newline_toDos=Qi,t.hextoposhex=gu,t.intarystrtohex=Ra,t.strdiffidx=ha,t.oidtohex=zs,t.hextooid=ye,t.strpad=hr,t.bitstrtoint=Pr,t.inttobitstr=on,t.bitstrtobinstr=Gn,t.binstrtobitstr=wn,t.isBase64URLDot=Ti,t.namearraytobinstr=Fi,t.extendClass=Oe,t.foldnl=ms,t.b64topem=Pi,t.pemtob64=Oi,t.timeogen=Qs,t.aryval=Fn,t.inttohex=Ue,t.twoscompl=Re,t.KJUR=v,t.crypto=v.crypto,t.asn1=v.asn1,t.jws=v.jws,t.lang=v.lang,t.VERSION=u,t.VERSION_FULL=s}),Jo=ce((t,e)=>{"use strict";function n(E){return typeof E>"u"||E===null}function u(E){return typeof E=="object"&&E!==null}function s(E){return Array.isArray(E)?E:n(E)?[]:[E]}function p(E,m){var D,a,H,W;if(m)for(W=Object.keys(m),D=0,a=W.length;D<a;D+=1)H=W[D],E[H]=m[H];return E}function y(E,m){var D="",a;for(a=0;a<m;a+=1)D+=E;return D}function g(E){return E===0&&Number.NEGATIVE_INFINITY===1/E}e.exports.isNothing=n,e.exports.isObject=u,e.exports.toArray=s,e.exports.repeat=y,e.exports.isNegativeZero=g,e.exports.extend=p}),hl=ce((t,e)=>{"use strict";function n(u,s){Error.call(this),this.name="YAMLException",this.reason=u,this.mark=s,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n.prototype.toString=function(u){var s=this.name+": ";return s+=this.reason||"(unknown reason)",!u&&this.mark&&(s+=" "+this.mark.toString()),s},e.exports=n}),ty=ce((t,e)=>{"use strict";var n=Jo();function u(s,p,y,g,E){this.name=s,this.buffer=p,this.position=y,this.line=g,this.column=E}u.prototype.getSnippet=function(s,p){var y,g,E,m,D;if(!this.buffer)return null;for(s=s||4,p=p||75,y="",g=this.position;g>0&&`\0\r
\x85\u2028\u2029`.indexOf(this.buffer.charAt(g-1))===-1;)if(g-=1,this.position-g>p/2-1){y=" ... ",g+=5;break}for(E="",m=this.position;m<this.buffer.length&&`\0\r
\x85\u2028\u2029`.indexOf(this.buffer.charAt(m))===-1;)if(m+=1,m-this.position>p/2-1){E=" ... ",m-=5;break}return D=this.buffer.slice(g,m),n.repeat(" ",s)+y+D+E+`
`+n.repeat(" ",s+this.position-g+y.length)+"^"},u.prototype.toString=function(s){var p,y="";return this.name&&(y+='in "'+this.name+'" '),y+="at line "+(this.line+1)+", column "+(this.column+1),s||(p=this.getSnippet(),p&&(y+=`:
`+p)),y},e.exports=u}),sn=ce((t,e)=>{"use strict";var n=hl(),u=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],s=["scalar","sequence","mapping"];function p(g){var E={};return g!==null&&Object.keys(g).forEach(function(m){g[m].forEach(function(D){E[String(D)]=m})}),E}function y(g,E){if(E=E||{},Object.keys(E).forEach(function(m){if(u.indexOf(m)===-1)throw new n('Unknown option "'+m+'" is met in definition of "'+g+'" YAML type.')}),this.tag=g,this.kind=E.kind||null,this.resolve=E.resolve||function(){return!0},this.construct=E.construct||function(m){return m},this.instanceOf=E.instanceOf||null,this.predicate=E.predicate||null,this.represent=E.represent||null,this.defaultStyle=E.defaultStyle||null,this.styleAliases=p(E.styleAliases||null),s.indexOf(this.kind)===-1)throw new n('Unknown kind "'+this.kind+'" is specified for "'+g+'" YAML type.')}e.exports=y}),Zo=ce((t,e)=>{"use strict";var n=Jo(),u=hl(),s=sn();function p(E,m,D){var a=[];return E.include.forEach(function(H){D=p(H,m,D)}),E[m].forEach(function(H){D.forEach(function(W,w){W.tag===H.tag&&W.kind===H.kind&&a.push(w)}),D.push(H)}),D.filter(function(H,W){return a.indexOf(W)===-1})}function y(){var E={scalar:{},sequence:{},mapping:{},fallback:{}},m,D;function a(H){E[H.kind][H.tag]=E.fallback[H.tag]=H}for(m=0,D=arguments.length;m<D;m+=1)arguments[m].forEach(a);return E}function g(E){this.include=E.include||[],this.implicit=E.implicit||[],this.explicit=E.explicit||[],this.implicit.forEach(function(m){if(m.loadKind&&m.loadKind!=="scalar")throw new u("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=p(this,"implicit",[]),this.compiledExplicit=p(this,"explicit",[]),this.compiledTypeMap=y(this.compiledImplicit,this.compiledExplicit)}g.DEFAULT=null,g.create=function(){var E,m;switch(arguments.length){case 1:E=g.DEFAULT,m=arguments[0];break;case 2:E=arguments[0],m=arguments[1];break;default:throw new u("Wrong number of arguments for Schema.create function")}if(E=n.toArray(E),m=n.toArray(m),!E.every(function(D){return D instanceof g}))throw new u("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!m.every(function(D){return D instanceof s}))throw new u("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new g({include:E,explicit:m})},e.exports=g}),uy=ce((t,e)=>{"use strict";var n=sn();e.exports=new n("tag:yaml.org,2002:str",{kind:"scalar",construct:function(u){return u!==null?u:""}})}),cy=ce((t,e)=>{"use strict";var n=sn();e.exports=new n("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(u){return u!==null?u:[]}})}),fy=ce((t,e)=>{"use strict";var n=sn();e.exports=new n("tag:yaml.org,2002:map",{kind:"mapping",construct:function(u){return u!==null?u:{}}})}),D0=ce((t,e)=>{"use strict";var n=Zo();e.exports=new n({explicit:[uy(),cy(),fy()]})}),py=ce((t,e)=>{"use strict";var n=sn();function u(y){if(y===null)return!0;var g=y.length;return g===1&&y==="~"||g===4&&(y==="null"||y==="Null"||y==="NULL")}function s(){return null}function p(y){return y===null}e.exports=new n("tag:yaml.org,2002:null",{kind:"scalar",resolve:u,construct:s,predicate:p,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})}),my=ce((t,e)=>{"use strict";var n=sn();function u(y){if(y===null)return!1;var g=y.length;return g===4&&(y==="true"||y==="True"||y==="TRUE")||g===5&&(y==="false"||y==="False"||y==="FALSE")}function s(y){return y==="true"||y==="True"||y==="TRUE"}function p(y){return Object.prototype.toString.call(y)==="[object Boolean]"}e.exports=new n("tag:yaml.org,2002:bool",{kind:"scalar",resolve:u,construct:s,predicate:p,represent:{lowercase:function(y){return y?"true":"false"},uppercase:function(y){return y?"TRUE":"FALSE"},camelcase:function(y){return y?"True":"False"}},defaultStyle:"lowercase"})}),wy=ce((t,e)=>{"use strict";var n=Jo(),u=sn();function s(D){return 48<=D&&D<=57||65<=D&&D<=70||97<=D&&D<=102}function p(D){return 48<=D&&D<=55}function y(D){return 48<=D&&D<=57}function g(D){if(D===null)return!1;var a=D.length,H=0,W=!1,w;if(!a)return!1;if(w=D[H],(w==="-"||w==="+")&&(w=D[++H]),w==="0"){if(H+1===a)return!0;if(w=D[++H],w==="b"){for(H++;H<a;H++)if(w=D[H],w!=="_"){if(w!=="0"&&w!=="1")return!1;W=!0}return W&&w!=="_"}if(w==="x"){for(H++;H<a;H++)if(w=D[H],w!=="_"){if(!s(D.charCodeAt(H)))return!1;W=!0}return W&&w!=="_"}for(;H<a;H++)if(w=D[H],w!=="_"){if(!p(D.charCodeAt(H)))return!1;W=!0}return W&&w!=="_"}if(w==="_")return!1;for(;H<a;H++)if(w=D[H],w!=="_"){if(w===":")break;if(!y(D.charCodeAt(H)))return!1;W=!0}return!W||w==="_"?!1:w!==":"?!0:/^(:[0-5]?[0-9])+$/.test(D.slice(H))}function E(D){var a=D,H=1,W,w,U=[];return a.indexOf("_")!==-1&&(a=a.replace(/_/g,"")),W=a[0],(W==="-"||W==="+")&&(W==="-"&&(H=-1),a=a.slice(1),W=a[0]),a==="0"?0:W==="0"?a[1]==="b"?H*parseInt(a.slice(2),2):a[1]==="x"?H*parseInt(a,16):H*parseInt(a,8):a.indexOf(":")!==-1?(a.split(":").forEach(function(tt){U.unshift(parseInt(tt,10))}),a=0,w=1,U.forEach(function(tt){a+=tt*w,w*=60}),H*a):H*parseInt(a,10)}function m(D){return Object.prototype.toString.call(D)==="[object Number]"&&D%1===0&&!n.isNegativeZero(D)}e.exports=new u("tag:yaml.org,2002:int",{kind:"scalar",resolve:g,construct:E,predicate:m,represent:{binary:function(D){return D>=0?"0b"+D.toString(2):"-0b"+D.toString(2).slice(1)},octal:function(D){return D>=0?"0"+D.toString(8):"-0"+D.toString(8).slice(1)},decimal:function(D){return D.toString(10)},hexadecimal:function(D){return D>=0?"0x"+D.toString(16).toUpperCase():"-0x"+D.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})}),by=ce((t,e)=>{"use strict";var n=Jo(),u=sn(),s=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function p(D){return!(D===null||!s.test(D)||D[D.length-1]==="_")}function y(D){var a,H,W,w;return a=D.replace(/_/g,"").toLowerCase(),H=a[0]==="-"?-1:1,w=[],"+-".indexOf(a[0])>=0&&(a=a.slice(1)),a===".inf"?H===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:a===".nan"?NaN:a.indexOf(":")>=0?(a.split(":").forEach(function(U){w.unshift(parseFloat(U,10))}),a=0,W=1,w.forEach(function(U){a+=U*W,W*=60}),H*a):H*parseFloat(a,10)}var g=/^[-+]?[0-9]+e/;function E(D,a){var H;if(isNaN(D))switch(a){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===D)switch(a){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===D)switch(a){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(n.isNegativeZero(D))return"-0.0";return H=D.toString(10),g.test(H)?H.replace("e",".e"):H}function m(D){return Object.prototype.toString.call(D)==="[object Number]"&&(D%1!==0||n.isNegativeZero(D))}e.exports=new u("tag:yaml.org,2002:float",{kind:"scalar",resolve:p,construct:y,predicate:m,represent:E,defaultStyle:"lowercase"})}),fm=ce((t,e)=>{"use strict";var n=Zo();e.exports=new n({include:[D0()],implicit:[py(),my(),wy(),by()]})}),hm=ce((t,e)=>{"use strict";var n=Zo();e.exports=new n({include:[fm()]})}),Fy=ce((t,e)=>{"use strict";var n=sn(),u=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),s=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function p(E){return E===null?!1:u.exec(E)!==null||s.exec(E)!==null}function y(E){var m,D,a,H,W,w,U,tt=0,J=null,N,Q,it;if(m=u.exec(E),m===null&&(m=s.exec(E)),m===null)throw new Error("Date resolve error");if(D=+m[1],a=+m[2]-1,H=+m[3],!m[4])return new Date(Date.UTC(D,a,H));if(W=+m[4],w=+m[5],U=+m[6],m[7]){for(tt=m[7].slice(0,3);tt.length<3;)tt+="0";tt=+tt}return m[9]&&(N=+m[10],Q=+(m[11]||0),J=(N*60+Q)*6e4,m[9]==="-"&&(J=-J)),it=new Date(Date.UTC(D,a,H,W,w,U,tt)),J&&it.setTime(it.getTime()-J),it}function g(E){return E.toISOString()}e.exports=new n("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:p,construct:y,instanceOf:Date,represent:g})}),By=ce((t,e)=>{"use strict";var n=sn();function u(s){return s==="<<"||s===null}e.exports=new n("tag:yaml.org,2002:merge",{kind:"scalar",resolve:u})}),Py=ce((t,e)=>{"use strict";var n;try{u=ko,n=u("buffer").Buffer}catch{}var u,s=sn(),p=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function y(D){if(D===null)return!1;var a,H,W=0,w=D.length,U=p;for(H=0;H<w;H++)if(a=U.indexOf(D.charAt(H)),!(a>64)){if(a<0)return!1;W+=6}return W%8===0}function g(D){var a,H,W=D.replace(/[\r\n=]/g,""),w=W.length,U=p,tt=0,J=[];for(a=0;a<w;a++)a%4===0&&a&&(J.push(tt>>16&255),J.push(tt>>8&255),J.push(tt&255)),tt=tt<<6|U.indexOf(W.charAt(a));return H=w%4*6,H===0?(J.push(tt>>16&255),J.push(tt>>8&255),J.push(tt&255)):H===18?(J.push(tt>>10&255),J.push(tt>>2&255)):H===12&&J.push(tt>>4&255),n?n.from?n.from(J):new n(J):J}function E(D){var a="",H=0,W,w,U=D.length,tt=p;for(W=0;W<U;W++)W%3===0&&W&&(a+=tt[H>>18&63],a+=tt[H>>12&63],a+=tt[H>>6&63],a+=tt[H&63]),H=(H<<8)+D[W];return w=U%3,w===0?(a+=tt[H>>18&63],a+=tt[H>>12&63],a+=tt[H>>6&63],a+=tt[H&63]):w===2?(a+=tt[H>>10&63],a+=tt[H>>4&63],a+=tt[H<<2&63],a+=tt[64]):w===1&&(a+=tt[H>>2&63],a+=tt[H<<4&63],a+=tt[64],a+=tt[64]),a}function m(D){return n&&n.isBuffer(D)}e.exports=new s("tag:yaml.org,2002:binary",{kind:"scalar",resolve:y,construct:g,predicate:m,represent:E})}),xy=ce((t,e)=>{"use strict";var n=sn(),u=Object.prototype.hasOwnProperty,s=Object.prototype.toString;function p(g){if(g===null)return!0;var E=[],m,D,a,H,W,w=g;for(m=0,D=w.length;m<D;m+=1){if(a=w[m],W=!1,s.call(a)!=="[object Object]")return!1;for(H in a)if(u.call(a,H))if(!W)W=!0;else return!1;if(!W)return!1;if(E.indexOf(H)===-1)E.push(H);else return!1}return!0}function y(g){return g!==null?g:[]}e.exports=new n("tag:yaml.org,2002:omap",{kind:"sequence",resolve:p,construct:y})}),Ny=ce((t,e)=>{"use strict";var n=sn(),u=Object.prototype.toString;function s(y){if(y===null)return!0;var g,E,m,D,a,H=y;for(a=new Array(H.length),g=0,E=H.length;g<E;g+=1){if(m=H[g],u.call(m)!=="[object Object]"||(D=Object.keys(m),D.length!==1))return!1;a[g]=[D[0],m[D[0]]]}return!0}function p(y){if(y===null)return[];var g,E,m,D,a,H=y;for(a=new Array(H.length),g=0,E=H.length;g<E;g+=1)m=H[g],D=Object.keys(m),a[g]=[D[0],m[D[0]]];return a}e.exports=new n("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:s,construct:p})}),Ly=ce((t,e)=>{"use strict";var n=sn(),u=Object.prototype.hasOwnProperty;function s(y){if(y===null)return!0;var g,E=y;for(g in E)if(u.call(E,g)&&E[g]!==null)return!1;return!0}function p(y){return y!==null?y:{}}e.exports=new n("tag:yaml.org,2002:set",{kind:"mapping",resolve:s,construct:p})}),pl=ce((t,e)=>{"use strict";var n=Zo();e.exports=new n({include:[hm()],implicit:[Fy(),By()],explicit:[Py(),xy(),Ny(),Ly()]})}),Hy=ce((t,e)=>{"use strict";var n=sn();function u(){return!0}function s(){}function p(){return""}function y(g){return typeof g>"u"}e.exports=new n("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:u,construct:s,predicate:y,represent:p})}),qy=ce((t,e)=>{"use strict";var n=sn();function u(g){if(g===null||g.length===0)return!1;var E=g,m=/\/([gim]*)$/.exec(g),D="";return!(E[0]==="/"&&(m&&(D=m[1]),D.length>3||E[E.length-D.length-1]!=="/"))}function s(g){var E=g,m=/\/([gim]*)$/.exec(g),D="";return E[0]==="/"&&(m&&(D=m[1]),E=E.slice(1,E.length-D.length-1)),new RegExp(E,D)}function p(g){var E="/"+g.source+"/";return g.global&&(E+="g"),g.multiline&&(E+="m"),g.ignoreCase&&(E+="i"),E}function y(g){return Object.prototype.toString.call(g)==="[object RegExp]"}e.exports=new n("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:u,construct:s,predicate:y,represent:p})}),zy=ce((t,e)=>{"use strict";var n;try{u=ko,n=u("esprima")}catch{typeof window<"u"&&(n=window.esprima)}var u,s=sn();function p(m){if(m===null)return!1;try{var D="("+m+")",a=n.parse(D,{range:!0});return!(a.type!=="Program"||a.body.length!==1||a.body[0].type!=="ExpressionStatement"||a.body[0].expression.type!=="ArrowFunctionExpression"&&a.body[0].expression.type!=="FunctionExpression")}catch{return!1}}function y(m){var D="("+m+")",a=n.parse(D,{range:!0}),H=[],W;if(a.type!=="Program"||a.body.length!==1||a.body[0].type!=="ExpressionStatement"||a.body[0].expression.type!=="ArrowFunctionExpression"&&a.body[0].expression.type!=="FunctionExpression")throw new Error("Failed to resolve function");return a.body[0].expression.params.forEach(function(w){H.push(w.name)}),W=a.body[0].expression.body.range,a.body[0].expression.body.type==="BlockStatement"?new Function(H,D.slice(W[0]+1,W[1]-1)):new Function(H,"return "+D.slice(W[0],W[1]))}function g(m){return m.toString()}function E(m){return Object.prototype.toString.call(m)==="[object Function]"}e.exports=new s("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:p,construct:y,predicate:E,represent:g})}),Uf=ce((t,e)=>{"use strict";var n=Zo();e.exports=n.DEFAULT=new n({include:[pl()],explicit:[Hy(),qy(),zy()]})}),d_=ce((t,e)=>{"use strict";var n=Jo(),u=hl(),s=ty(),p=pl(),y=Uf(),g=Object.prototype.hasOwnProperty,E=1,m=2,D=3,a=4,H=1,W=2,w=3,U=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,tt=/[\x85\u2028\u2029]/,J=/[,\[\]\{\}]/,N=/^(?:!|!!|![a-z\-]+!)$/i,Q=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function it(j){return Object.prototype.toString.call(j)}function q(j){return j===10||j===13}function L(j){return j===9||j===32}function V(j){return j===9||j===32||j===10||j===13}function lt(j){return j===44||j===91||j===93||j===123||j===125}function mt(j){var f;return 48<=j&&j<=57?j-48:(f=j|32,97<=f&&f<=102?f-97+10:-1)}function Rt(j){return j===120?2:j===117?4:j===85?8:0}function Et(j){return 48<=j&&j<=57?j-48:-1}function vt(j){return j===48?"\0":j===97?"\x07":j===98?"\b":j===116||j===9?"	":j===110?`
`:j===118?"\v":j===102?"\f":j===114?"\r":j===101?"\x1B":j===32?" ":j===34?'"':j===47?"/":j===92?"\\":j===78?"\x85":j===95?"\xA0":j===76?"\u2028":j===80?"\u2029":""}function wt(j){return j<=65535?String.fromCharCode(j):String.fromCharCode((j-65536>>10)+55296,(j-65536&1023)+56320)}var Xt=new Array(256),ee=new Array(256);for(ne=0;ne<256;ne++)Xt[ne]=vt(ne)?1:0,ee[ne]=vt(ne);var ne;function oe(j,f){this.input=j,this.filename=f.filename||null,this.schema=f.schema||y,this.onWarning=f.onWarning||null,this.legacy=f.legacy||!1,this.json=f.json||!1,this.listener=f.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=j.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function Le(j,f){return new u(f,new s(j.filename,j.input,j.position,j.line,j.position-j.lineStart))}function de(j,f){throw Le(j,f)}function He(j,f){j.onWarning&&j.onWarning.call(null,Le(j,f))}var ze={YAML:function(j,f,S){var Y,It,Ot;j.version!==null&&de(j,"duplication of %YAML directive"),S.length!==1&&de(j,"YAML directive accepts exactly one argument"),Y=/^([0-9]+)\.([0-9]+)$/.exec(S[0]),Y===null&&de(j,"ill-formed argument of the YAML directive"),It=parseInt(Y[1],10),Ot=parseInt(Y[2],10),It!==1&&de(j,"unacceptable YAML version of the document"),j.version=S[0],j.checkLineBreaks=Ot<2,Ot!==1&&Ot!==2&&He(j,"unsupported YAML version of the document")},TAG:function(j,f,S){var Y,It;S.length!==2&&de(j,"TAG directive accepts exactly two arguments"),Y=S[0],It=S[1],N.test(Y)||de(j,"ill-formed tag handle (first argument) of the TAG directive"),g.call(j.tagMap,Y)&&de(j,'there is a previously declared suffix for "'+Y+'" tag handle'),Q.test(It)||de(j,"ill-formed tag prefix (second argument) of the TAG directive"),j.tagMap[Y]=It}};function Te(j,f,S,Y){var It,Ot,nt,zt;if(f<S){if(zt=j.input.slice(f,S),Y)for(It=0,Ot=zt.length;It<Ot;It+=1)nt=zt.charCodeAt(It),nt===9||32<=nt&&nt<=1114111||de(j,"expected valid JSON character");else U.test(zt)&&de(j,"the stream contains non-printable characters");j.result+=zt}}function Je(j,f,S,Y){var It,Ot,nt,zt;for(n.isObject(S)||de(j,"cannot merge mappings; the provided source object is unacceptable"),It=Object.keys(S),nt=0,zt=It.length;nt<zt;nt+=1)Ot=It[nt],g.call(f,Ot)||(f[Ot]=S[Ot],Y[Ot]=!0)}function Xe(j,f,S,Y,It,Ot,nt,zt){var jt,Se;if(Array.isArray(It))for(It=Array.prototype.slice.call(It),jt=0,Se=It.length;jt<Se;jt+=1)Array.isArray(It[jt])&&de(j,"nested arrays are not supported inside keys"),typeof It=="object"&&it(It[jt])==="[object Object]"&&(It[jt]="[object Object]");if(typeof It=="object"&&it(It)==="[object Object]"&&(It="[object Object]"),It=String(It),f===null&&(f={}),Y==="tag:yaml.org,2002:merge")if(Array.isArray(Ot))for(jt=0,Se=Ot.length;jt<Se;jt+=1)Je(j,f,Ot[jt],S);else Je(j,f,Ot,S);else!j.json&&!g.call(S,It)&&g.call(f,It)&&(j.line=nt||j.line,j.position=zt||j.position,de(j,"duplicated mapping key")),f[It]=Ot,delete S[It];return f}function Ae(j){var f;f=j.input.charCodeAt(j.position),f===10?j.position++:f===13?(j.position++,j.input.charCodeAt(j.position)===10&&j.position++):de(j,"a line break is expected"),j.line+=1,j.lineStart=j.position}function _e(j,f,S){for(var Y=0,It=j.input.charCodeAt(j.position);It!==0;){for(;L(It);)It=j.input.charCodeAt(++j.position);if(f&&It===35)do It=j.input.charCodeAt(++j.position);while(It!==10&&It!==13&&It!==0);if(q(It))for(Ae(j),It=j.input.charCodeAt(j.position),Y++,j.lineIndent=0;It===32;)j.lineIndent++,It=j.input.charCodeAt(++j.position);else break}return S!==-1&&Y!==0&&j.lineIndent<S&&He(j,"deficient indentation"),Y}function Qe(j){var f=j.position,S;return S=j.input.charCodeAt(f),!!((S===45||S===46)&&S===j.input.charCodeAt(f+1)&&S===j.input.charCodeAt(f+2)&&(f+=3,S=j.input.charCodeAt(f),S===0||V(S)))}function qe(j,f){f===1?j.result+=" ":f>1&&(j.result+=n.repeat(`
`,f-1))}function Ze(j,f,S){var Y,It,Ot,nt,zt,jt,Se,_t,gt=j.kind,rt=j.result,F;if(F=j.input.charCodeAt(j.position),V(F)||lt(F)||F===35||F===38||F===42||F===33||F===124||F===62||F===39||F===34||F===37||F===64||F===96||(F===63||F===45)&&(It=j.input.charCodeAt(j.position+1),V(It)||S&&lt(It)))return!1;for(j.kind="scalar",j.result="",Ot=nt=j.position,zt=!1;F!==0;){if(F===58){if(It=j.input.charCodeAt(j.position+1),V(It)||S&&lt(It))break}else if(F===35){if(Y=j.input.charCodeAt(j.position-1),V(Y))break}else{if(j.position===j.lineStart&&Qe(j)||S&&lt(F))break;if(q(F))if(jt=j.line,Se=j.lineStart,_t=j.lineIndent,_e(j,!1,-1),j.lineIndent>=f){zt=!0,F=j.input.charCodeAt(j.position);continue}else{j.position=nt,j.line=jt,j.lineStart=Se,j.lineIndent=_t;break}}zt&&(Te(j,Ot,nt,!1),qe(j,j.line-jt),Ot=nt=j.position,zt=!1),L(F)||(nt=j.position+1),F=j.input.charCodeAt(++j.position)}return Te(j,Ot,nt,!1),j.result?!0:(j.kind=gt,j.result=rt,!1)}function Ar(j,f){var S,Y,It;if(S=j.input.charCodeAt(j.position),S!==39)return!1;for(j.kind="scalar",j.result="",j.position++,Y=It=j.position;(S=j.input.charCodeAt(j.position))!==0;)if(S===39)if(Te(j,Y,j.position,!0),S=j.input.charCodeAt(++j.position),S===39)Y=j.position,j.position++,It=j.position;else return!0;else q(S)?(Te(j,Y,It,!0),qe(j,_e(j,!1,f)),Y=It=j.position):j.position===j.lineStart&&Qe(j)?de(j,"unexpected end of the document within a single quoted scalar"):(j.position++,It=j.position);de(j,"unexpected end of the stream within a single quoted scalar")}function Or(j,f){var S,Y,It,Ot,nt,zt;if(zt=j.input.charCodeAt(j.position),zt!==34)return!1;for(j.kind="scalar",j.result="",j.position++,S=Y=j.position;(zt=j.input.charCodeAt(j.position))!==0;){if(zt===34)return Te(j,S,j.position,!0),j.position++,!0;if(zt===92){if(Te(j,S,j.position,!0),zt=j.input.charCodeAt(++j.position),q(zt))_e(j,!1,f);else if(zt<256&&Xt[zt])j.result+=ee[zt],j.position++;else if((nt=Rt(zt))>0){for(It=nt,Ot=0;It>0;It--)zt=j.input.charCodeAt(++j.position),(nt=mt(zt))>=0?Ot=(Ot<<4)+nt:de(j,"expected hexadecimal character");j.result+=wt(Ot),j.position++}else de(j,"unknown escape sequence");S=Y=j.position}else q(zt)?(Te(j,S,Y,!0),qe(j,_e(j,!1,f)),S=Y=j.position):j.position===j.lineStart&&Qe(j)?de(j,"unexpected end of the document within a double quoted scalar"):(j.position++,Y=j.position)}de(j,"unexpected end of the stream within a double quoted scalar")}function Cr(j,f){var S=!0,Y,It=j.tag,Ot,nt=j.anchor,zt,jt,Se,_t,gt,rt={},F,st,At,Dt;if(Dt=j.input.charCodeAt(j.position),Dt===91)jt=93,gt=!1,Ot=[];else if(Dt===123)jt=125,gt=!0,Ot={};else return!1;for(j.anchor!==null&&(j.anchorMap[j.anchor]=Ot),Dt=j.input.charCodeAt(++j.position);Dt!==0;){if(_e(j,!0,f),Dt=j.input.charCodeAt(j.position),Dt===jt)return j.position++,j.tag=It,j.anchor=nt,j.kind=gt?"mapping":"sequence",j.result=Ot,!0;S||de(j,"missed comma between flow collection entries"),st=F=At=null,Se=_t=!1,Dt===63&&(zt=j.input.charCodeAt(j.position+1),V(zt)&&(Se=_t=!0,j.position++,_e(j,!0,f))),Y=j.line,dr(j,f,E,!1,!0),st=j.tag,F=j.result,_e(j,!0,f),Dt=j.input.charCodeAt(j.position),(_t||j.line===Y)&&Dt===58&&(Se=!0,Dt=j.input.charCodeAt(++j.position),_e(j,!0,f),dr(j,f,E,!1,!0),At=j.result),gt?Xe(j,Ot,rt,st,F,At):Se?Ot.push(Xe(j,null,rt,st,F,At)):Ot.push(F),_e(j,!0,f),Dt=j.input.charCodeAt(j.position),Dt===44?(S=!0,Dt=j.input.charCodeAt(++j.position)):S=!1}de(j,"unexpected end of the stream within a flow collection")}function et(j,f){var S,Y,It=H,Ot=!1,nt=!1,zt=f,jt=0,Se=!1,_t,gt;if(gt=j.input.charCodeAt(j.position),gt===124)Y=!1;else if(gt===62)Y=!0;else return!1;for(j.kind="scalar",j.result="";gt!==0;)if(gt=j.input.charCodeAt(++j.position),gt===43||gt===45)H===It?It=gt===43?w:W:de(j,"repeat of a chomping mode identifier");else if((_t=Et(gt))>=0)_t===0?de(j,"bad explicit indentation width of a block scalar; it cannot be less than one"):nt?de(j,"repeat of an indentation width identifier"):(zt=f+_t-1,nt=!0);else break;if(L(gt)){do gt=j.input.charCodeAt(++j.position);while(L(gt));if(gt===35)do gt=j.input.charCodeAt(++j.position);while(!q(gt)&&gt!==0)}for(;gt!==0;){for(Ae(j),j.lineIndent=0,gt=j.input.charCodeAt(j.position);(!nt||j.lineIndent<zt)&&gt===32;)j.lineIndent++,gt=j.input.charCodeAt(++j.position);if(!nt&&j.lineIndent>zt&&(zt=j.lineIndent),q(gt)){jt++;continue}if(j.lineIndent<zt){It===w?j.result+=n.repeat(`
`,Ot?1+jt:jt):It===H&&Ot&&(j.result+=`
`);break}for(Y?L(gt)?(Se=!0,j.result+=n.repeat(`
`,Ot?1+jt:jt)):Se?(Se=!1,j.result+=n.repeat(`
`,jt+1)):jt===0?Ot&&(j.result+=" "):j.result+=n.repeat(`
`,jt):j.result+=n.repeat(`
`,Ot?1+jt:jt),Ot=!0,nt=!0,jt=0,S=j.position;!q(gt)&&gt!==0;)gt=j.input.charCodeAt(++j.position);Te(j,S,j.position,!1)}return!0}function k(j,f){var S,Y=j.tag,It=j.anchor,Ot=[],nt,zt=!1,jt;for(j.anchor!==null&&(j.anchorMap[j.anchor]=Ot),jt=j.input.charCodeAt(j.position);jt!==0&&!(jt!==45||(nt=j.input.charCodeAt(j.position+1),!V(nt)));){if(zt=!0,j.position++,_e(j,!0,-1)&&j.lineIndent<=f){Ot.push(null),jt=j.input.charCodeAt(j.position);continue}if(S=j.line,dr(j,f,D,!1,!0),Ot.push(j.result),_e(j,!0,-1),jt=j.input.charCodeAt(j.position),(j.line===S||j.lineIndent>f)&&jt!==0)de(j,"bad indentation of a sequence entry");else if(j.lineIndent<f)break}return zt?(j.tag=Y,j.anchor=It,j.kind="sequence",j.result=Ot,!0):!1}function Z(j,f,S){var Y,It,Ot,nt,zt=j.tag,jt=j.anchor,Se={},_t={},gt=null,rt=null,F=null,st=!1,At=!1,Dt;for(j.anchor!==null&&(j.anchorMap[j.anchor]=Se),Dt=j.input.charCodeAt(j.position);Dt!==0;){if(Y=j.input.charCodeAt(j.position+1),Ot=j.line,nt=j.position,(Dt===63||Dt===58)&&V(Y))Dt===63?(st&&(Xe(j,Se,_t,gt,rt,null),gt=rt=F=null),At=!0,st=!0,It=!0):st?(st=!1,It=!0):de(j,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),j.position+=1,Dt=Y;else if(dr(j,S,m,!1,!0))if(j.line===Ot){for(Dt=j.input.charCodeAt(j.position);L(Dt);)Dt=j.input.charCodeAt(++j.position);if(Dt===58)Dt=j.input.charCodeAt(++j.position),V(Dt)||de(j,"a whitespace character is expected after the key-value separator within a block mapping"),st&&(Xe(j,Se,_t,gt,rt,null),gt=rt=F=null),At=!0,st=!1,It=!1,gt=j.tag,rt=j.result;else if(At)de(j,"can not read an implicit mapping pair; a colon is missed");else return j.tag=zt,j.anchor=jt,!0}else if(At)de(j,"can not read a block mapping entry; a multiline key may not be an implicit key");else return j.tag=zt,j.anchor=jt,!0;else break;if((j.line===Ot||j.lineIndent>f)&&(dr(j,f,a,!0,It)&&(st?rt=j.result:F=j.result),st||(Xe(j,Se,_t,gt,rt,F,Ot,nt),gt=rt=F=null),_e(j,!0,-1),Dt=j.input.charCodeAt(j.position)),j.lineIndent>f&&Dt!==0)de(j,"bad indentation of a mapping entry");else if(j.lineIndent<f)break}return st&&Xe(j,Se,_t,gt,rt,null),At&&(j.tag=zt,j.anchor=jt,j.kind="mapping",j.result=Se),At}function se(j){var f,S=!1,Y=!1,It,Ot,nt;if(nt=j.input.charCodeAt(j.position),nt!==33)return!1;if(j.tag!==null&&de(j,"duplication of a tag property"),nt=j.input.charCodeAt(++j.position),nt===60?(S=!0,nt=j.input.charCodeAt(++j.position)):nt===33?(Y=!0,It="!!",nt=j.input.charCodeAt(++j.position)):It="!",f=j.position,S){do nt=j.input.charCodeAt(++j.position);while(nt!==0&&nt!==62);j.position<j.length?(Ot=j.input.slice(f,j.position),nt=j.input.charCodeAt(++j.position)):de(j,"unexpected end of the stream within a verbatim tag")}else{for(;nt!==0&&!V(nt);)nt===33&&(Y?de(j,"tag suffix cannot contain exclamation marks"):(It=j.input.slice(f-1,j.position+1),N.test(It)||de(j,"named tag handle cannot contain such characters"),Y=!0,f=j.position+1)),nt=j.input.charCodeAt(++j.position);Ot=j.input.slice(f,j.position),J.test(Ot)&&de(j,"tag suffix cannot contain flow indicator characters")}return Ot&&!Q.test(Ot)&&de(j,"tag name cannot contain such characters: "+Ot),S?j.tag=Ot:g.call(j.tagMap,It)?j.tag=j.tagMap[It]+Ot:It==="!"?j.tag="!"+Ot:It==="!!"?j.tag="tag:yaml.org,2002:"+Ot:de(j,'undeclared tag handle "'+It+'"'),!0}function me(j){var f,S;if(S=j.input.charCodeAt(j.position),S!==38)return!1;for(j.anchor!==null&&de(j,"duplication of an anchor property"),S=j.input.charCodeAt(++j.position),f=j.position;S!==0&&!V(S)&&!lt(S);)S=j.input.charCodeAt(++j.position);return j.position===f&&de(j,"name of an anchor node must contain at least one character"),j.anchor=j.input.slice(f,j.position),!0}function rr(j){var f,S,Y;if(Y=j.input.charCodeAt(j.position),Y!==42)return!1;for(Y=j.input.charCodeAt(++j.position),f=j.position;Y!==0&&!V(Y)&&!lt(Y);)Y=j.input.charCodeAt(++j.position);return j.position===f&&de(j,"name of an alias node must contain at least one character"),S=j.input.slice(f,j.position),g.call(j.anchorMap,S)||de(j,'unidentified alias "'+S+'"'),j.result=j.anchorMap[S],_e(j,!0,-1),!0}function dr(j,f,S,Y,It){var Ot,nt,zt,jt=1,Se=!1,_t=!1,gt,rt,F,st,At;if(j.listener!==null&&j.listener("open",j),j.tag=null,j.anchor=null,j.kind=null,j.result=null,Ot=nt=zt=a===S||D===S,Y&&_e(j,!0,-1)&&(Se=!0,j.lineIndent>f?jt=1:j.lineIndent===f?jt=0:j.lineIndent<f&&(jt=-1)),jt===1)for(;se(j)||me(j);)_e(j,!0,-1)?(Se=!0,zt=Ot,j.lineIndent>f?jt=1:j.lineIndent===f?jt=0:j.lineIndent<f&&(jt=-1)):zt=!1;if(zt&&(zt=Se||It),(jt===1||a===S)&&(E===S||m===S?st=f:st=f+1,At=j.position-j.lineStart,jt===1?zt&&(k(j,At)||Z(j,At,st))||Cr(j,st)?_t=!0:(nt&&et(j,st)||Ar(j,st)||Or(j,st)?_t=!0:rr(j)?(_t=!0,(j.tag!==null||j.anchor!==null)&&de(j,"alias node should not have any properties")):Ze(j,st,E===S)&&(_t=!0,j.tag===null&&(j.tag="?")),j.anchor!==null&&(j.anchorMap[j.anchor]=j.result)):jt===0&&(_t=zt&&k(j,At))),j.tag!==null&&j.tag!=="!")if(j.tag==="?"){for(j.result!==null&&j.kind!=="scalar"&&de(j,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+j.kind+'"'),gt=0,rt=j.implicitTypes.length;gt<rt;gt+=1)if(F=j.implicitTypes[gt],F.resolve(j.result)){j.result=F.construct(j.result),j.tag=F.tag,j.anchor!==null&&(j.anchorMap[j.anchor]=j.result);break}}else g.call(j.typeMap[j.kind||"fallback"],j.tag)?(F=j.typeMap[j.kind||"fallback"][j.tag],j.result!==null&&F.kind!==j.kind&&de(j,"unacceptable node kind for !<"+j.tag+'> tag; it should be "'+F.kind+'", not "'+j.kind+'"'),F.resolve(j.result)?(j.result=F.construct(j.result),j.anchor!==null&&(j.anchorMap[j.anchor]=j.result)):de(j,"cannot resolve a node with !<"+j.tag+"> explicit tag")):de(j,"unknown tag !<"+j.tag+">");return j.listener!==null&&j.listener("close",j),j.tag!==null||j.anchor!==null||_t}function mr(j){var f=j.position,S,Y,It,Ot=!1,nt;for(j.version=null,j.checkLineBreaks=j.legacy,j.tagMap={},j.anchorMap={};(nt=j.input.charCodeAt(j.position))!==0&&(_e(j,!0,-1),nt=j.input.charCodeAt(j.position),!(j.lineIndent>0||nt!==37));){for(Ot=!0,nt=j.input.charCodeAt(++j.position),S=j.position;nt!==0&&!V(nt);)nt=j.input.charCodeAt(++j.position);for(Y=j.input.slice(S,j.position),It=[],Y.length<1&&de(j,"directive name must not be less than one character in length");nt!==0;){for(;L(nt);)nt=j.input.charCodeAt(++j.position);if(nt===35){do nt=j.input.charCodeAt(++j.position);while(nt!==0&&!q(nt));break}if(q(nt))break;for(S=j.position;nt!==0&&!V(nt);)nt=j.input.charCodeAt(++j.position);It.push(j.input.slice(S,j.position))}nt!==0&&Ae(j),g.call(ze,Y)?ze[Y](j,Y,It):He(j,'unknown document directive "'+Y+'"')}if(_e(j,!0,-1),j.lineIndent===0&&j.input.charCodeAt(j.position)===45&&j.input.charCodeAt(j.position+1)===45&&j.input.charCodeAt(j.position+2)===45?(j.position+=3,_e(j,!0,-1)):Ot&&de(j,"directives end mark is expected"),dr(j,j.lineIndent-1,a,!1,!0),_e(j,!0,-1),j.checkLineBreaks&&tt.test(j.input.slice(f,j.position))&&He(j,"non-ASCII line breaks are interpreted as content"),j.documents.push(j.result),j.position===j.lineStart&&Qe(j)){j.input.charCodeAt(j.position)===46&&(j.position+=3,_e(j,!0,-1));return}if(j.position<j.length-1)de(j,"end of the stream or a document separator is expected");else return}function ur(j,f){j=String(j),f=f||{},j.length!==0&&(j.charCodeAt(j.length-1)!==10&&j.charCodeAt(j.length-1)!==13&&(j+=`
`),j.charCodeAt(0)===65279&&(j=j.slice(1)));var S=new oe(j,f),Y=j.indexOf("\0");for(Y!==-1&&(S.position=Y,de(S,"null byte is not allowed in input")),S.input+="\0";S.input.charCodeAt(S.position)===32;)S.lineIndent+=1,S.position+=1;for(;S.position<S.length-1;)mr(S);return S.documents}function er(j,f,S){f!==null&&typeof f=="object"&&typeof S>"u"&&(S=f,f=null);var Y=ur(j,S);if(typeof f!="function")return Y;for(var It=0,Ot=Y.length;It<Ot;It+=1)f(Y[It])}function Gr(j,f){var S=ur(j,f);if(S.length!==0){if(S.length===1)return S[0];throw new u("expected a single document in the stream, but found more")}}function Lr(j,f,S){return typeof f=="object"&&f!==null&&typeof S>"u"&&(S=f,f=null),er(j,f,n.extend({schema:p},S))}function Sr(j,f){return Gr(j,n.extend({schema:p},f))}e.exports.loadAll=er,e.exports.load=Gr,e.exports.safeLoadAll=Lr,e.exports.safeLoad=Sr}),N_=ce((t,e)=>{"use strict";var n=Jo(),u=hl(),s=Uf(),p=pl(),y=Object.prototype.toString,g=Object.prototype.hasOwnProperty,E=9,m=10,D=13,a=32,H=33,W=34,w=35,U=37,tt=38,J=39,N=42,Q=44,it=45,q=58,L=61,V=62,lt=63,mt=64,Rt=91,Et=93,vt=96,wt=123,Xt=124,ee=125,ne={};ne[0]="\\0",ne[7]="\\a",ne[8]="\\b",ne[9]="\\t",ne[10]="\\n",ne[11]="\\v",ne[12]="\\f",ne[13]="\\r",ne[27]="\\e",ne[34]='\\"',ne[92]="\\\\",ne[133]="\\N",ne[160]="\\_",ne[8232]="\\L",ne[8233]="\\P";var oe=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function Le(nt,zt){var jt,Se,_t,gt,rt,F,st;if(zt===null)return{};for(jt={},Se=Object.keys(zt),_t=0,gt=Se.length;_t<gt;_t+=1)rt=Se[_t],F=String(zt[rt]),rt.slice(0,2)==="!!"&&(rt="tag:yaml.org,2002:"+rt.slice(2)),st=nt.compiledTypeMap.fallback[rt],st&&g.call(st.styleAliases,F)&&(F=st.styleAliases[F]),jt[rt]=F;return jt}function de(nt){var zt,jt,Se;if(zt=nt.toString(16).toUpperCase(),nt<=255)jt="x",Se=2;else if(nt<=65535)jt="u",Se=4;else if(nt<=4294967295)jt="U",Se=8;else throw new u("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+jt+n.repeat("0",Se-zt.length)+zt}function He(nt){this.schema=nt.schema||s,this.indent=Math.max(1,nt.indent||2),this.noArrayIndent=nt.noArrayIndent||!1,this.skipInvalid=nt.skipInvalid||!1,this.flowLevel=n.isNothing(nt.flowLevel)?-1:nt.flowLevel,this.styleMap=Le(this.schema,nt.styles||null),this.sortKeys=nt.sortKeys||!1,this.lineWidth=nt.lineWidth||80,this.noRefs=nt.noRefs||!1,this.noCompatMode=nt.noCompatMode||!1,this.condenseFlow=nt.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function ze(nt,zt){for(var jt=n.repeat(" ",zt),Se=0,_t=-1,gt="",rt,F=nt.length;Se<F;)_t=nt.indexOf(`
`,Se),_t===-1?(rt=nt.slice(Se),Se=F):(rt=nt.slice(Se,_t+1),Se=_t+1),rt.length&&rt!==`
`&&(gt+=jt),gt+=rt;return gt}function Te(nt,zt){return`
`+n.repeat(" ",nt.indent*zt)}function Je(nt,zt){var jt,Se,_t;for(jt=0,Se=nt.implicitTypes.length;jt<Se;jt+=1)if(_t=nt.implicitTypes[jt],_t.resolve(zt))return!0;return!1}function Xe(nt){return nt===a||nt===E}function Ae(nt){return 32<=nt&&nt<=126||161<=nt&&nt<=55295&&nt!==8232&&nt!==8233||57344<=nt&&nt<=65533&&nt!==65279||65536<=nt&&nt<=1114111}function _e(nt){return Ae(nt)&&!Xe(nt)&&nt!==65279&&nt!==D&&nt!==m}function Qe(nt,zt){return Ae(nt)&&nt!==65279&&nt!==Q&&nt!==Rt&&nt!==Et&&nt!==wt&&nt!==ee&&nt!==q&&(nt!==w||zt&&_e(zt))}function qe(nt){return Ae(nt)&&nt!==65279&&!Xe(nt)&&nt!==it&&nt!==lt&&nt!==q&&nt!==Q&&nt!==Rt&&nt!==Et&&nt!==wt&&nt!==ee&&nt!==w&&nt!==tt&&nt!==N&&nt!==H&&nt!==Xt&&nt!==L&&nt!==V&&nt!==J&&nt!==W&&nt!==U&&nt!==mt&&nt!==vt}function Ze(nt){var zt=/^\n* /;return zt.test(nt)}var Ar=1,Or=2,Cr=3,et=4,k=5;function Z(nt,zt,jt,Se,_t){var gt,rt,F,st=!1,At=!1,Dt=Se!==-1,Nt=-1,Yt=qe(nt.charCodeAt(0))&&!Xe(nt.charCodeAt(nt.length-1));if(zt)for(gt=0;gt<nt.length;gt++){if(rt=nt.charCodeAt(gt),!Ae(rt))return k;F=gt>0?nt.charCodeAt(gt-1):null,Yt=Yt&&Qe(rt,F)}else{for(gt=0;gt<nt.length;gt++){if(rt=nt.charCodeAt(gt),rt===m)st=!0,Dt&&(At=At||gt-Nt-1>Se&&nt[Nt+1]!==" ",Nt=gt);else if(!Ae(rt))return k;F=gt>0?nt.charCodeAt(gt-1):null,Yt=Yt&&Qe(rt,F)}At=At||Dt&&gt-Nt-1>Se&&nt[Nt+1]!==" "}return!st&&!At?Yt&&!_t(nt)?Ar:Or:jt>9&&Ze(nt)?k:At?et:Cr}function se(nt,zt,jt,Se){nt.dump=(function(){if(zt.length===0)return"''";if(!nt.noCompatMode&&oe.indexOf(zt)!==-1)return"'"+zt+"'";var _t=nt.indent*Math.max(1,jt),gt=nt.lineWidth===-1?-1:Math.max(Math.min(nt.lineWidth,40),nt.lineWidth-_t),rt=Se||nt.flowLevel>-1&&jt>=nt.flowLevel;function F(st){return Je(nt,st)}switch(Z(zt,rt,nt.indent,gt,F)){case Ar:return zt;case Or:return"'"+zt.replace(/'/g,"''")+"'";case Cr:return"|"+me(zt,nt.indent)+rr(ze(zt,_t));case et:return">"+me(zt,nt.indent)+rr(ze(dr(zt,gt),_t));case k:return'"'+ur(zt,gt)+'"';default:throw new u("impossible error: invalid scalar style")}})()}function me(nt,zt){var jt=Ze(nt)?String(zt):"",Se=nt[nt.length-1]===`
`,_t=Se&&(nt[nt.length-2]===`
`||nt===`
`),gt=_t?"+":Se?"":"-";return jt+gt+`
`}function rr(nt){return nt[nt.length-1]===`
`?nt.slice(0,-1):nt}function dr(nt,zt){for(var jt=/(\n+)([^\n]*)/g,Se=(function(){var At=nt.indexOf(`
`);return At=At!==-1?At:nt.length,jt.lastIndex=At,mr(nt.slice(0,At),zt)})(),_t=nt[0]===`
`||nt[0]===" ",gt,rt;rt=jt.exec(nt);){var F=rt[1],st=rt[2];gt=st[0]===" ",Se+=F+(!_t&&!gt&&st!==""?`
`:"")+mr(st,zt),_t=gt}return Se}function mr(nt,zt){if(nt===""||nt[0]===" ")return nt;for(var jt=/ [^ ]/g,Se,_t=0,gt,rt=0,F=0,st="";Se=jt.exec(nt);)F=Se.index,F-_t>zt&&(gt=rt>_t?rt:F,st+=`
`+nt.slice(_t,gt),_t=gt+1),rt=F;return st+=`
`,nt.length-_t>zt&&rt>_t?st+=nt.slice(_t,rt)+`
`+nt.slice(rt+1):st+=nt.slice(_t),st.slice(1)}function ur(nt){for(var zt="",jt,Se,_t,gt=0;gt<nt.length;gt++){if(jt=nt.charCodeAt(gt),jt>=55296&&jt<=56319&&(Se=nt.charCodeAt(gt+1),Se>=56320&&Se<=57343)){zt+=de((jt-55296)*1024+Se-56320+65536),gt++;continue}_t=ne[jt],zt+=!_t&&Ae(jt)?nt[gt]:_t||de(jt)}return zt}function er(nt,zt,jt){var Se="",_t=nt.tag,gt,rt;for(gt=0,rt=jt.length;gt<rt;gt+=1)f(nt,zt,jt[gt],!1,!1)&&(gt!==0&&(Se+=","+(nt.condenseFlow?"":" ")),Se+=nt.dump);nt.tag=_t,nt.dump="["+Se+"]"}function Gr(nt,zt,jt,Se){var _t="",gt=nt.tag,rt,F;for(rt=0,F=jt.length;rt<F;rt+=1)f(nt,zt+1,jt[rt],!0,!0)&&((!Se||rt!==0)&&(_t+=Te(nt,zt)),nt.dump&&m===nt.dump.charCodeAt(0)?_t+="-":_t+="- ",_t+=nt.dump);nt.tag=gt,nt.dump=_t||"[]"}function Lr(nt,zt,jt){var Se="",_t=nt.tag,gt=Object.keys(jt),rt,F,st,At,Dt;for(rt=0,F=gt.length;rt<F;rt+=1)Dt="",rt!==0&&(Dt+=", "),nt.condenseFlow&&(Dt+='"'),st=gt[rt],At=jt[st],f(nt,zt,st,!1,!1)&&(nt.dump.length>1024&&(Dt+="? "),Dt+=nt.dump+(nt.condenseFlow?'"':"")+":"+(nt.condenseFlow?"":" "),f(nt,zt,At,!1,!1)&&(Dt+=nt.dump,Se+=Dt));nt.tag=_t,nt.dump="{"+Se+"}"}function Sr(nt,zt,jt,Se){var _t="",gt=nt.tag,rt=Object.keys(jt),F,st,At,Dt,Nt,Yt;if(nt.sortKeys===!0)rt.sort();else if(typeof nt.sortKeys=="function")rt.sort(nt.sortKeys);else if(nt.sortKeys)throw new u("sortKeys must be a boolean or a function");for(F=0,st=rt.length;F<st;F+=1)Yt="",(!Se||F!==0)&&(Yt+=Te(nt,zt)),At=rt[F],Dt=jt[At],f(nt,zt+1,At,!0,!0,!0)&&(Nt=nt.tag!==null&&nt.tag!=="?"||nt.dump&&nt.dump.length>1024,Nt&&(nt.dump&&m===nt.dump.charCodeAt(0)?Yt+="?":Yt+="? "),Yt+=nt.dump,Nt&&(Yt+=Te(nt,zt)),f(nt,zt+1,Dt,!0,Nt)&&(nt.dump&&m===nt.dump.charCodeAt(0)?Yt+=":":Yt+=": ",Yt+=nt.dump,_t+=Yt));nt.tag=gt,nt.dump=_t||"{}"}function j(nt,zt,jt){var Se,_t,gt,rt,F,st;for(_t=jt?nt.explicitTypes:nt.implicitTypes,gt=0,rt=_t.length;gt<rt;gt+=1)if(F=_t[gt],(F.instanceOf||F.predicate)&&(!F.instanceOf||typeof zt=="object"&&zt instanceof F.instanceOf)&&(!F.predicate||F.predicate(zt))){if(nt.tag=jt?F.tag:"?",F.represent){if(st=nt.styleMap[F.tag]||F.defaultStyle,y.call(F.represent)==="[object Function]")Se=F.represent(zt,st);else if(g.call(F.represent,st))Se=F.represent[st](zt,st);else throw new u("!<"+F.tag+'> tag resolver accepts not "'+st+'" style');nt.dump=Se}return!0}return!1}function f(nt,zt,jt,Se,_t,gt){nt.tag=null,nt.dump=jt,j(nt,jt,!1)||j(nt,jt,!0);var rt=y.call(nt.dump);Se&&(Se=nt.flowLevel<0||nt.flowLevel>zt);var F=rt==="[object Object]"||rt==="[object Array]",st,At;if(F&&(st=nt.duplicates.indexOf(jt),At=st!==-1),(nt.tag!==null&&nt.tag!=="?"||At||nt.indent!==2&&zt>0)&&(_t=!1),At&&nt.usedDuplicates[st])nt.dump="*ref_"+st;else{if(F&&At&&!nt.usedDuplicates[st]&&(nt.usedDuplicates[st]=!0),rt==="[object Object]")Se&&Object.keys(nt.dump).length!==0?(Sr(nt,zt,nt.dump,_t),At&&(nt.dump="&ref_"+st+nt.dump)):(Lr(nt,zt,nt.dump),At&&(nt.dump="&ref_"+st+" "+nt.dump));else if(rt==="[object Array]"){var Dt=nt.noArrayIndent&&zt>0?zt-1:zt;Se&&nt.dump.length!==0?(Gr(nt,Dt,nt.dump,_t),At&&(nt.dump="&ref_"+st+nt.dump)):(er(nt,Dt,nt.dump),At&&(nt.dump="&ref_"+st+" "+nt.dump))}else if(rt==="[object String]")nt.tag!=="?"&&se(nt,nt.dump,zt,gt);else{if(nt.skipInvalid)return!1;throw new u("unacceptable kind of an object to dump "+rt)}nt.tag!==null&&nt.tag!=="?"&&(nt.dump="!<"+nt.tag+"> "+nt.dump)}return!0}function S(nt,zt){var jt=[],Se=[],_t,gt;for(Y(nt,jt,Se),_t=0,gt=Se.length;_t<gt;_t+=1)zt.duplicates.push(jt[Se[_t]]);zt.usedDuplicates=new Array(gt)}function Y(nt,zt,jt){var Se,_t,gt;if(nt!==null&&typeof nt=="object")if(_t=zt.indexOf(nt),_t!==-1)jt.indexOf(_t)===-1&&jt.push(_t);else if(zt.push(nt),Array.isArray(nt))for(_t=0,gt=nt.length;_t<gt;_t+=1)Y(nt[_t],zt,jt);else for(Se=Object.keys(nt),_t=0,gt=Se.length;_t<gt;_t+=1)Y(nt[Se[_t]],zt,jt)}function It(nt,zt){zt=zt||{};var jt=new He(zt);return jt.noRefs||S(nt,jt),f(jt,0,nt,!0,!0)?jt.dump+`
`:""}function Ot(nt,zt){return It(nt,n.extend({schema:p},zt))}e.exports.dump=It,e.exports.safeDump=Ot}),L_=ce((t,e)=>{"use strict";var n=d_(),u=N_();function s(p){return function(){throw new Error("Function "+p+" is deprecated and cannot be used.")}}e.exports.Type=sn(),e.exports.Schema=Zo(),e.exports.FAILSAFE_SCHEMA=D0(),e.exports.JSON_SCHEMA=fm(),e.exports.CORE_SCHEMA=hm(),e.exports.DEFAULT_SAFE_SCHEMA=pl(),e.exports.DEFAULT_FULL_SCHEMA=Uf(),e.exports.load=n.load,e.exports.loadAll=n.loadAll,e.exports.safeLoad=n.safeLoad,e.exports.safeLoadAll=n.safeLoadAll,e.exports.dump=u.dump,e.exports.safeDump=u.safeDump,e.exports.YAMLException=hl(),e.exports.MINIMAL_SCHEMA=D0(),e.exports.SAFE_SCHEMA=pl(),e.exports.DEFAULT_SCHEMA=Uf(),e.exports.scan=s("scan"),e.exports.parse=s("parse"),e.exports.compose=s("compose"),e.exports.addConstructor=s("addConstructor")}),j_=ce((t,e)=>{"use strict";var n=L_();e.exports=n}),M_=ce((t,e)=>{"use strict";var n=j_();e.exports={safeLoad:n.safeLoad,load:n.load,safeDump:n.safeDump,dump:n.dump}}),z_=ce(t=>{"use strict";t.toString=function(e){switch(e){case 1:return"A";case 10:return"NULL";case 28:return"AAAA";case 18:return"AFSDB";case 42:return"APL";case 257:return"CAA";case 60:return"CDNSKEY";case 59:return"CDS";case 37:return"CERT";case 5:return"CNAME";case 49:return"DHCID";case 32769:return"DLV";case 39:return"DNAME";case 48:return"DNSKEY";case 43:return"DS";case 55:return"HIP";case 13:return"HINFO";case 45:return"IPSECKEY";case 25:return"KEY";case 36:return"KX";case 29:return"LOC";case 15:return"MX";case 35:return"NAPTR";case 2:return"NS";case 47:return"NSEC";case 50:return"NSEC3";case 51:return"NSEC3PARAM";case 12:return"PTR";case 46:return"RRSIG";case 17:return"RP";case 24:return"SIG";case 6:return"SOA";case 99:return"SPF";case 33:return"SRV";case 44:return"SSHFP";case 32768:return"TA";case 249:return"TKEY";case 52:return"TLSA";case 250:return"TSIG";case 16:return"TXT";case 252:return"AXFR";case 251:return"IXFR";case 41:return"OPT";case 255:return"ANY"}return"UNKNOWN_"+e},t.toType=function(e){switch(e.toUpperCase()){case"A":return 1;case"NULL":return 10;case"AAAA":return 28;case"AFSDB":return 18;case"APL":return 42;case"CAA":return 257;case"CDNSKEY":return 60;case"CDS":return 59;case"CERT":return 37;case"CNAME":return 5;case"DHCID":return 49;case"DLV":return 32769;case"DNAME":return 39;case"DNSKEY":return 48;case"DS":return 43;case"HIP":return 55;case"HINFO":return 13;case"IPSECKEY":return 45;case"KEY":return 25;case"KX":return 36;case"LOC":return 29;case"MX":return 15;case"NAPTR":return 35;case"NS":return 2;case"NSEC":return 47;case"NSEC3":return 50;case"NSEC3PARAM":return 51;case"PTR":return 12;case"RRSIG":return 46;case"RP":return 17;case"SIG":return 24;case"SOA":return 6;case"SPF":return 99;case"SRV":return 33;case"SSHFP":return 44;case"TA":return 32768;case"TKEY":return 249;case"TLSA":return 52;case"TSIG":return 250;case"TXT":return 16;case"AXFR":return 252;case"IXFR":return 251;case"OPT":return 41;case"ANY":return 255;case"*":return 255}return e.toUpperCase().startsWith("UNKNOWN_")?parseInt(e.slice(8)):0}}),G_=ce(t=>{"use strict";t.toString=function(e){switch(e){case 0:return"NOERROR";case 1:return"FORMERR";case 2:return"SERVFAIL";case 3:return"NXDOMAIN";case 4:return"NOTIMP";case 5:return"REFUSED";case 6:return"YXDOMAIN";case 7:return"YXRRSET";case 8:return"NXRRSET";case 9:return"NOTAUTH";case 10:return"NOTZONE";case 11:return"RCODE_11";case 12:return"RCODE_12";case 13:return"RCODE_13";case 14:return"RCODE_14";case 15:return"RCODE_15"}return"RCODE_"+e},t.toRcode=function(e){switch(e.toUpperCase()){case"NOERROR":return 0;case"FORMERR":return 1;case"SERVFAIL":return 2;case"NXDOMAIN":return 3;case"NOTIMP":return 4;case"REFUSED":return 5;case"YXDOMAIN":return 6;case"YXRRSET":return 7;case"NXRRSET":return 8;case"NOTAUTH":return 9;case"NOTZONE":return 10;case"RCODE_11":return 11;case"RCODE_12":return 12;case"RCODE_13":return 13;case"RCODE_14":return 14;case"RCODE_15":return 15}return 0}}),Y_=ce(t=>{"use strict";t.toString=function(e){switch(e){case 0:return"QUERY";case 1:return"IQUERY";case 2:return"STATUS";case 3:return"OPCODE_3";case 4:return"NOTIFY";case 5:return"UPDATE";case 6:return"OPCODE_6";case 7:return"OPCODE_7";case 8:return"OPCODE_8";case 9:return"OPCODE_9";case 10:return"OPCODE_10";case 11:return"OPCODE_11";case 12:return"OPCODE_12";case 13:return"OPCODE_13";case 14:return"OPCODE_14";case 15:return"OPCODE_15"}return"OPCODE_"+e},t.toOpcode=function(e){switch(e.toUpperCase()){case"QUERY":return 0;case"IQUERY":return 1;case"STATUS":return 2;case"OPCODE_3":return 3;case"NOTIFY":return 4;case"UPDATE":return 5;case"OPCODE_6":return 6;case"OPCODE_7":return 7;case"OPCODE_8":return 8;case"OPCODE_9":return 9;case"OPCODE_10":return 10;case"OPCODE_11":return 11;case"OPCODE_12":return 12;case"OPCODE_13":return 13;case"OPCODE_14":return 14;case"OPCODE_15":return 15}return 0}}),W_=ce(t=>{"use strict";t.toString=function(e){switch(e){case 1:return"IN";case 2:return"CS";case 3:return"CH";case 4:return"HS";case 255:return"ANY"}return"UNKNOWN_"+e},t.toClass=function(e){switch(e.toUpperCase()){case"IN":return 1;case"CS":return 2;case"CH":return 3;case"HS":return 4;case"ANY":return 255}return 0}}),X_=ce(t=>{"use strict";t.toString=function(e){switch(e){case 1:return"LLQ";case 2:return"UL";case 3:return"NSID";case 5:return"DAU";case 6:return"DHU";case 7:return"N3U";case 8:return"CLIENT_SUBNET";case 9:return"EXPIRE";case 10:return"COOKIE";case 11:return"TCP_KEEPALIVE";case 12:return"PADDING";case 13:return"CHAIN";case 14:return"KEY_TAG";case 26946:return"DEVICEID"}return e<0?null:`OPTION_${e}`},t.toCode=function(e){if(typeof e=="number")return e;if(!e)return-1;switch(e.toUpperCase()){case"OPTION_0":return 0;case"LLQ":return 1;case"UL":return 2;case"NSID":return 3;case"OPTION_4":return 4;case"DAU":return 5;case"DHU":return 6;case"N3U":return 7;case"CLIENT_SUBNET":return 8;case"EXPIRE":return 9;case"COOKIE":return 10;case"TCP_KEEPALIVE":return 11;case"PADDING":return 12;case"CHAIN":return 13;case"KEY_TAG":return 14;case"DEVICEID":return 26946;case"OPTION_65535":return 65535}let n=e.match(/_(\d+)$/);return n?parseInt(n[1],10):-1}}),Q_=ce((t,e)=>{var n=(function(u){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.decode=w,u.encode=W,u.familyOf=H,u.name=void 0,u.sizeOf=a,u.v6=u.v4=void 0;let s=/^(\d{1,3}\.){3,3}\d{1,3}$/,p=4,y=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i,g=16,E={name:"v4",size:p,isFormat:U=>s.test(U),encode(U,tt,J){J=~~J,tt=tt||new Uint8Array(J+p);let N=U.length,Q=0;for(let it=0;it<N;){let q=U.charCodeAt(it++);q===46?(tt[J++]=Q,Q=0):Q=Q*10+(q-48)}return tt[J]=Q,tt},decode(U,tt){return tt=~~tt,`${U[tt++]}.${U[tt++]}.${U[tt++]}.${U[tt]}`}};u.v4=E;let m={name:"v6",size:g,isFormat:U=>U.length>0&&y.test(U),encode(U,tt,J){J=~~J;let N=J+g,Q=-1,it=0,q=0,L=!0,V=!1;tt=tt||new Uint8Array(J+g);for(let lt=0;lt<U.length;lt++){let mt=U.charCodeAt(lt);mt===58?(L?Q!==-1?(J<N&&(tt[J]=0),J<N-1&&(tt[J+1]=0),J+=2):J<N&&(Q=J):(V===!0?(J<N&&(tt[J]=q),J++):(J<N&&(tt[J]=it>>8),J<N-1&&(tt[J+1]=it&255),J+=2),it=0,q=0),L=!0,V=!1):mt===46?(J<N&&(tt[J]=q),J++,q=0,it=0,L=!1,V=!0):(L=!1,mt>=97?mt-=87:mt>=65?mt-=55:(mt-=48,q=q*10+mt),it=(it<<4)+mt)}if(L===!1)V===!0?(J<N&&(tt[J]=q),J++):(J<N&&(tt[J]=it>>8),J<N-1&&(tt[J+1]=it&255),J+=2);else if(Q===0)J<N&&(tt[J]=0),J<N-1&&(tt[J+1]=0),J+=2;else if(Q!==-1){J+=2;for(let lt=Math.min(J-1,N-1);lt>=Q+2;lt--)tt[lt]=tt[lt-2];tt[Q]=0,tt[Q+1]=0,Q=J}if(Q!==J&&Q!==-1)for(J>N-2&&(J=N-2);N>Q;)tt[--N]=J<N&&J>Q?tt[--J]:0;else for(;J<N;)tt[J++]=0;return tt},decode(U,tt){tt=~~tt;let J="";for(let N=0;N<g;N+=2)N!==0&&(J+=":"),J+=(U[tt+N]<<8|U[tt+N+1]).toString(16);return J.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}};u.v6=m;let D="ip";u.name=D;function a(U){if(E.isFormat(U))return E.size;if(m.isFormat(U))return m.size;throw Error(`Invalid ip address: ${U}`)}function H(U){return a(U)===E.size?1:2}function W(U,tt,J){J=~~J;let N=a(U);return typeof tt=="function"&&(tt=tt(J+N)),N===E.size?E.encode(U,tt,J):m.encode(U,tt,J)}function w(U,tt,J){if(tt=~~tt,J=J||U.length-tt,J===E.size)return E.decode(U,tt,J);if(J===m.size)return m.decode(U,tt,J);throw Error(`Invalid buffer size needs to be ${E.size} for v4 or ${m.size} for v6.`)}return"default"in u?u.default:u})({});typeof define=="function"&&define.amd?define([],function(){return n}):typeof e=="object"&&typeof t=="object"&&(e.exports=n)}),rC=ce(t=>{"use strict";var e=l0().Buffer,n=z_(),u=G_(),s=Y_(),p=W_(),y=X_(),g=Q_(),E=0,m=32768,D=32768,a=~D,H=32768,W=~H,w=t.name={};w.encode=function(et,k,Z,{mail:se=!1}={}){k||(k=e.alloc(w.encodingLength(et))),Z||(Z=0);let me=Z,rr=et.replace(/^\.|\.$/gm,"");if(rr.length){let dr=[];if(se){let mr="";rr.split(".").forEach(ur=>{ur.endsWith("\\")?mr+=(mr.length?".":"")+ur.slice(0,-1):dr.length===0&&mr.length?dr.push(mr+"."+ur):dr.push(ur)})}else dr=rr.split(".");for(let mr=0;mr<dr.length;mr++){let ur=k.write(dr[mr],Z+1);k[Z]=ur,Z+=ur+1}}return k[Z++]=0,w.encode.bytes=Z-me,k},w.encode.bytes=0,w.decode=function(et,k,{mail:Z=!1}={}){k||(k=0);let se=[],me=k,rr=0,dr=0,mr=!1;for(;;){if(k>=et.length)throw new Error("Cannot decode name (buffer overflow)");let ur=et[k++];if(dr+=mr?0:1,ur===0)break;if(ur&192)if((ur&192)===192){if(k+1>et.length)throw new Error("Cannot decode name (buffer overflow)");let er=et.readUInt16BE(k-1)-49152;if(er>=me)throw new Error("Cannot decode name (bad pointer)");k=er,me=er,dr+=mr?0:1,mr=!0}else throw new Error("Cannot decode name (bad label)");else{if(k+ur>et.length)throw new Error("Cannot decode name (buffer overflow)");if(rr+=ur+1,rr>254)throw new Error("Cannot decode name (name too long)");let er=et.toString("utf-8",k,k+ur);Z&&(er=er.replace(/\./g,"\\.")),se.push(er),k+=ur,dr+=mr?0:ur}}return w.decode.bytes=dr,se.length===0?".":se.join(".")},w.decode.bytes=0,w.encodingLength=function(et){return et==="."||et===".."?1:e.byteLength(et.replace(/^\.|\.$/gm,""))+2};var U={};U.encode=function(et,k,Z){k||(k=e.alloc(U.encodingLength(et))),Z||(Z=0);let se=k.write(et,Z+1);return k[Z]=se,U.encode.bytes=se+1,k},U.encode.bytes=0,U.decode=function(et,k){k||(k=0);let Z=et[k],se=et.toString("utf-8",k+1,k+1+Z);return U.decode.bytes=Z+1,se},U.decode.bytes=0,U.encodingLength=function(et){return e.byteLength(et)+1};var tt={};tt.encode=function(et,k,Z){k||(k=tt.encodingLength(et)),Z||(Z=0);let se=(et.flags||0)&32767,me=et.type==="response"?m:E;return k.writeUInt16BE(et.id||0,Z),k.writeUInt16BE(se|me,Z+2),k.writeUInt16BE(et.questions.length,Z+4),k.writeUInt16BE(et.answers.length,Z+6),k.writeUInt16BE(et.authorities.length,Z+8),k.writeUInt16BE(et.additionals.length,Z+10),k},tt.encode.bytes=12,tt.decode=function(et,k){if(k||(k=0),et.length<12)throw new Error("Header must be 12 bytes");let Z=et.readUInt16BE(k+2);return{id:et.readUInt16BE(k),type:Z&m?"response":"query",flags:Z&32767,flag_qr:(Z>>15&1)===1,opcode:s.toString(Z>>11&15),flag_aa:(Z>>10&1)===1,flag_tc:(Z>>9&1)===1,flag_rd:(Z>>8&1)===1,flag_ra:(Z>>7&1)===1,flag_z:(Z>>6&1)===1,flag_ad:(Z>>5&1)===1,flag_cd:(Z>>4&1)===1,rcode:u.toString(Z&15),questions:new Array(et.readUInt16BE(k+4)),answers:new Array(et.readUInt16BE(k+6)),authorities:new Array(et.readUInt16BE(k+8)),additionals:new Array(et.readUInt16BE(k+10))}},tt.decode.bytes=12,tt.encodingLength=function(){return 12};var J=t.unknown={};J.encode=function(et,k,Z){return k||(k=e.alloc(J.encodingLength(et))),Z||(Z=0),k.writeUInt16BE(et.length,Z),et.copy(k,Z+2),J.encode.bytes=et.length+2,k},J.encode.bytes=0,J.decode=function(et,k){k||(k=0);let Z=et.readUInt16BE(k),se=et.slice(k+2,k+2+Z);return J.decode.bytes=Z+2,se},J.decode.bytes=0,J.encodingLength=function(et){return et.length+2};var N=t.ns={};N.encode=function(et,k,Z){return k||(k=e.alloc(N.encodingLength(et))),Z||(Z=0),w.encode(et,k,Z+2),k.writeUInt16BE(w.encode.bytes,Z),N.encode.bytes=w.encode.bytes+2,k},N.encode.bytes=0,N.decode=function(et,k){k||(k=0);let Z=et.readUInt16BE(k),se=w.decode(et,k+2);return N.decode.bytes=Z+2,se},N.decode.bytes=0,N.encodingLength=function(et){return w.encodingLength(et)+2};var Q=t.soa={};Q.encode=function(et,k,Z){k||(k=e.alloc(Q.encodingLength(et))),Z||(Z=0);let se=Z;return Z+=2,w.encode(et.mname,k,Z),Z+=w.encode.bytes,w.encode(et.rname,k,Z,{mail:!0}),Z+=w.encode.bytes,k.writeUInt32BE(et.serial||0,Z),Z+=4,k.writeUInt32BE(et.refresh||0,Z),Z+=4,k.writeUInt32BE(et.retry||0,Z),Z+=4,k.writeUInt32BE(et.expire||0,Z),Z+=4,k.writeUInt32BE(et.minimum||0,Z),Z+=4,k.writeUInt16BE(Z-se-2,se),Q.encode.bytes=Z-se,k},Q.encode.bytes=0,Q.decode=function(et,k){k||(k=0);let Z=k,se={};return k+=2,se.mname=w.decode(et,k),k+=w.decode.bytes,se.rname=w.decode(et,k,{mail:!0}),k+=w.decode.bytes,se.serial=et.readUInt32BE(k),k+=4,se.refresh=et.readUInt32BE(k),k+=4,se.retry=et.readUInt32BE(k),k+=4,se.expire=et.readUInt32BE(k),k+=4,se.minimum=et.readUInt32BE(k),k+=4,Q.decode.bytes=k-Z,se},Q.decode.bytes=0,Q.encodingLength=function(et){return 22+w.encodingLength(et.mname)+w.encodingLength(et.rname)};var it=t.txt={};it.encode=function(et,k,Z){Array.isArray(et)||(et=[et]);for(let me=0;me<et.length;me++)if(typeof et[me]=="string"&&(et[me]=e.from(et[me])),!e.isBuffer(et[me]))throw new Error("Must be a Buffer");k||(k=e.alloc(it.encodingLength(et))),Z||(Z=0);let se=Z;return Z+=2,et.forEach(function(me){k[Z++]=me.length,me.copy(k,Z,0,me.length),Z+=me.length}),k.writeUInt16BE(Z-se-2,se),it.encode.bytes=Z-se,k},it.encode.bytes=0,it.decode=function(et,k){k||(k=0);let Z=k,se=et.readUInt16BE(k);k+=2;let me=[];for(;se>0;){let rr=et[k++];if(--se,se<rr)throw new Error("Buffer overflow");me.push(et.slice(k,k+rr)),k+=rr,se-=rr}return it.decode.bytes=k-Z,me},it.decode.bytes=0,it.encodingLength=function(et){Array.isArray(et)||(et=[et]);let k=2;return et.forEach(function(Z){typeof Z=="string"?k+=e.byteLength(Z)+1:k+=Z.length+1}),k};var q=t.null={};q.encode=function(et,k,Z){k||(k=e.alloc(q.encodingLength(et))),Z||(Z=0),typeof et=="string"&&(et=e.from(et)),et||(et=e.alloc(0));let se=Z;Z+=2;let me=et.length;return et.copy(k,Z,0,me),Z+=me,k.writeUInt16BE(Z-se-2,se),q.encode.bytes=Z-se,k},q.encode.bytes=0,q.decode=function(et,k){k||(k=0);let Z=k,se=et.readUInt16BE(k);k+=2;let me=et.slice(k,k+se);return k+=se,q.decode.bytes=k-Z,me},q.decode.bytes=0,q.encodingLength=function(et){return et?(e.isBuffer(et)?et.length:e.byteLength(et))+2:2};var L=t.hinfo={};L.encode=function(et,k,Z){k||(k=e.alloc(L.encodingLength(et))),Z||(Z=0);let se=Z;return Z+=2,U.encode(et.cpu,k,Z),Z+=U.encode.bytes,U.encode(et.os,k,Z),Z+=U.encode.bytes,k.writeUInt16BE(Z-se-2,se),L.encode.bytes=Z-se,k},L.encode.bytes=0,L.decode=function(et,k){k||(k=0);let Z=k,se={};return k+=2,se.cpu=U.decode(et,k),k+=U.decode.bytes,se.os=U.decode(et,k),k+=U.decode.bytes,L.decode.bytes=k-Z,se},L.decode.bytes=0,L.encodingLength=function(et){return U.encodingLength(et.cpu)+U.encodingLength(et.os)+2};var V=t.ptr={},lt=t.cname=V,mt=t.dname=V;V.encode=function(et,k,Z){return k||(k=e.alloc(V.encodingLength(et))),Z||(Z=0),w.encode(et,k,Z+2),k.writeUInt16BE(w.encode.bytes,Z),V.encode.bytes=w.encode.bytes+2,k},V.encode.bytes=0,V.decode=function(et,k){k||(k=0);let Z=w.decode(et,k+2);return V.decode.bytes=w.decode.bytes+2,Z},V.decode.bytes=0,V.encodingLength=function(et){return w.encodingLength(et)+2};var Rt=t.srv={};Rt.encode=function(et,k,Z){k||(k=e.alloc(Rt.encodingLength(et))),Z||(Z=0),k.writeUInt16BE(et.priority||0,Z+2),k.writeUInt16BE(et.weight||0,Z+4),k.writeUInt16BE(et.port||0,Z+6),w.encode(et.target,k,Z+8);let se=w.encode.bytes+6;return k.writeUInt16BE(se,Z),Rt.encode.bytes=se+2,k},Rt.encode.bytes=0,Rt.decode=function(et,k){k||(k=0);let Z=et.readUInt16BE(k),se={};return se.priority=et.readUInt16BE(k+2),se.weight=et.readUInt16BE(k+4),se.port=et.readUInt16BE(k+6),se.target=w.decode(et,k+8),Rt.decode.bytes=Z+2,se},Rt.decode.bytes=0,Rt.encodingLength=function(et){return 8+w.encodingLength(et.target)};var Et=t.caa={};Et.ISSUER_CRITICAL=128,Et.encode=function(et,k,Z){let se=Et.encodingLength(et);return k||(k=e.alloc(Et.encodingLength(et))),Z||(Z=0),et.issuerCritical&&(et.flags=Et.ISSUER_CRITICAL),k.writeUInt16BE(se-2,Z),Z+=2,k.writeUInt8(et.flags||0,Z),Z+=1,U.encode(et.tag,k,Z),Z+=U.encode.bytes,k.write(et.value,Z),Z+=e.byteLength(et.value),Et.encode.bytes=se,k},Et.encode.bytes=0,Et.decode=function(et,k){k||(k=0);let Z=et.readUInt16BE(k);k+=2;let se=k,me={};return me.flags=et.readUInt8(k),k+=1,me.tag=U.decode(et,k),k+=U.decode.bytes,me.value=et.toString("utf-8",k,se+Z),me.issuerCritical=!!(me.flags&Et.ISSUER_CRITICAL),Et.decode.bytes=Z+2,me},Et.decode.bytes=0,Et.encodingLength=function(et){return U.encodingLength(et.tag)+U.encodingLength(et.value)+2};var vt=t.mx={};vt.encode=function(et,k,Z){k||(k=e.alloc(vt.encodingLength(et))),Z||(Z=0);let se=Z;return Z+=2,k.writeUInt16BE(et.preference||0,Z),Z+=2,w.encode(et.exchange,k,Z),Z+=w.encode.bytes,k.writeUInt16BE(Z-se-2,se),vt.encode.bytes=Z-se,k},vt.encode.bytes=0,vt.decode=function(et,k){k||(k=0);let Z=k,se={};return k+=2,se.preference=et.readUInt16BE(k),k+=2,se.exchange=w.decode(et,k),k+=w.decode.bytes,vt.decode.bytes=k-Z,se},vt.encodingLength=function(et){return 4+w.encodingLength(et.exchange)};var wt=t.a={};wt.encode=function(et,k,Z){return k||(k=e.alloc(wt.encodingLength(et))),Z||(Z=0),k.writeUInt16BE(4,Z),Z+=2,g.v4.encode(et,k,Z),wt.encode.bytes=6,k},wt.encode.bytes=0,wt.decode=function(et,k){k||(k=0),k+=2;let Z=g.v4.decode(et,k);return wt.decode.bytes=6,Z},wt.decode.bytes=0,wt.encodingLength=function(){return 6};var Xt=t.aaaa={};Xt.encode=function(et,k,Z){return k||(k=e.alloc(Xt.encodingLength(et))),Z||(Z=0),k.writeUInt16BE(16,Z),Z+=2,g.v6.encode(et,k,Z),Xt.encode.bytes=18,k},Xt.encode.bytes=0,Xt.decode=function(et,k){k||(k=0),k+=2;let Z=g.v6.decode(et,k);return Xt.decode.bytes=18,Z},Xt.decode.bytes=0,Xt.encodingLength=function(){return 18};var ee=t.option={};ee.encode=function(et,k,Z){k||(k=e.alloc(ee.encodingLength(et))),Z||(Z=0);let se=Z,me=y.toCode(et.code);if(k.writeUInt16BE(me,Z),Z+=2,et.data)k.writeUInt16BE(et.data.length,Z),Z+=2,et.data.copy(k,Z),Z+=et.data.length;else switch(me){case 8:let rr=et.sourcePrefixLength||0,dr=et.family||g.familyOf(et.ip),mr=g.encode(et.ip,e.alloc),ur=Math.ceil(rr/8);k.writeUInt16BE(ur+4,Z),Z+=2,k.writeUInt16BE(dr,Z),Z+=2,k.writeUInt8(rr,Z++),k.writeUInt8(et.scopePrefixLength||0,Z++),mr.copy(k,Z,0,ur),Z+=ur;break;case 11:et.timeout?(k.writeUInt16BE(2,Z),Z+=2,k.writeUInt16BE(et.timeout,Z),Z+=2):(k.writeUInt16BE(0,Z),Z+=2);break;case 12:let er=et.length||0;k.writeUInt16BE(er,Z),Z+=2,k.fill(0,Z,Z+er),Z+=er;break;case 14:let Gr=et.tags.length*2;k.writeUInt16BE(Gr,Z),Z+=2;for(let Lr of et.tags)k.writeUInt16BE(Lr,Z),Z+=2;break;default:throw new Error(`Unknown roption code: ${et.code}`)}return ee.encode.bytes=Z-se,k},ee.encode.bytes=0,ee.decode=function(et,k){k||(k=0);let Z={};Z.code=et.readUInt16BE(k),Z.type=y.toString(Z.code),k+=2;let se=et.readUInt16BE(k);switch(k+=2,Z.data=et.slice(k,k+se),Z.code){case 8:Z.family=et.readUInt16BE(k),k+=2,Z.sourcePrefixLength=et.readUInt8(k++),Z.scopePrefixLength=et.readUInt8(k++);let me=e.alloc(Z.family===1?4:16);et.copy(me,0,k,k+se-4),Z.ip=g.decode(me);break;case 11:se>0&&(Z.timeout=et.readUInt16BE(k),k+=2);break;case 14:Z.tags=[];for(let rr=0;rr<se;rr+=2)Z.tags.push(et.readUInt16BE(k)),k+=2}return ee.decode.bytes=se+4,Z},ee.decode.bytes=0,ee.encodingLength=function(et){if(et.data)return et.data.length+4;switch(y.toCode(et.code)){case 8:let k=et.sourcePrefixLength||0;return Math.ceil(k/8)+8;case 11:return typeof et.timeout=="number"?6:4;case 12:return et.length+4;case 14:return 4+et.tags.length*2}throw new Error(`Unknown roption code: ${et.code}`)};var ne=t.opt={};ne.encode=function(et,k,Z){k||(k=e.alloc(ne.encodingLength(et))),Z||(Z=0);let se=Z,me=Ar(et,ee);return k.writeUInt16BE(me,Z),Z=Or(et,ee,k,Z+2),ne.encode.bytes=Z-se,k},ne.encode.bytes=0,ne.decode=function(et,k){k||(k=0);let Z=k,se=[],me=et.readUInt16BE(k);k+=2;let rr=0;for(;me>0;)se[rr++]=ee.decode(et,k),k+=ee.decode.bytes,me-=ee.decode.bytes;return ne.decode.bytes=k-Z,se},ne.decode.bytes=0,ne.encodingLength=function(et){return 2+Ar(et||[],ee)};var oe=t.dnskey={};oe.PROTOCOL_DNSSEC=3,oe.ZONE_KEY=128,oe.SECURE_ENTRYPOINT=32768,oe.encode=function(et,k,Z){k||(k=e.alloc(oe.encodingLength(et))),Z||(Z=0);let se=Z,me=et.key;if(!e.isBuffer(me))throw new Error("Key must be a Buffer");return Z+=2,k.writeUInt16BE(et.flags,Z),Z+=2,k.writeUInt8(oe.PROTOCOL_DNSSEC,Z),Z+=1,k.writeUInt8(et.algorithm,Z),Z+=1,me.copy(k,Z,0,me.length),Z+=me.length,oe.encode.bytes=Z-se,k.writeUInt16BE(oe.encode.bytes-2,se),k},oe.encode.bytes=0,oe.decode=function(et,k){k||(k=0);let Z=k;var se={},me=et.readUInt16BE(k);if(k+=2,se.flags=et.readUInt16BE(k),k+=2,et.readUInt8(k)!==oe.PROTOCOL_DNSSEC)throw new Error("Protocol must be 3");return k+=1,se.algorithm=et.readUInt8(k),k+=1,se.key=et.slice(k,Z+me+2),k+=se.key.length,oe.decode.bytes=k-Z,se},oe.decode.bytes=0,oe.encodingLength=function(et){return 6+e.byteLength(et.key)};var Le=t.rrsig={};Le.encode=function(et,k,Z){k||(k=e.alloc(Le.encodingLength(et))),Z||(Z=0);let se=Z,me=et.signature;if(!e.isBuffer(me))throw new Error("Signature must be a Buffer");return Z+=2,k.writeUInt16BE(n.toType(et.typeCovered),Z),Z+=2,k.writeUInt8(et.algorithm,Z),Z+=1,k.writeUInt8(et.labels,Z),Z+=1,k.writeUInt32BE(et.originalTTL,Z),Z+=4,k.writeUInt32BE(et.expiration,Z),Z+=4,k.writeUInt32BE(et.inception,Z),Z+=4,k.writeUInt16BE(et.keyTag,Z),Z+=2,w.encode(et.signersName,k,Z),Z+=w.encode.bytes,me.copy(k,Z,0,me.length),Z+=me.length,Le.encode.bytes=Z-se,k.writeUInt16BE(Le.encode.bytes-2,se),k},Le.encode.bytes=0,Le.decode=function(et,k){k||(k=0);let Z=k;var se={},me=et.readUInt16BE(k);return k+=2,se.typeCovered=n.toString(et.readUInt16BE(k)),k+=2,se.algorithm=et.readUInt8(k),k+=1,se.labels=et.readUInt8(k),k+=1,se.originalTTL=et.readUInt32BE(k),k+=4,se.expiration=et.readUInt32BE(k),k+=4,se.inception=et.readUInt32BE(k),k+=4,se.keyTag=et.readUInt16BE(k),k+=2,se.signersName=w.decode(et,k),k+=w.decode.bytes,se.signature=et.slice(k,Z+me+2),k+=se.signature.length,Le.decode.bytes=k-Z,se},Le.decode.bytes=0,Le.encodingLength=function(et){return 20+w.encodingLength(et.signersName)+e.byteLength(et.signature)};var de=t.rp={};de.encode=function(et,k,Z){k||(k=e.alloc(de.encodingLength(et))),Z||(Z=0);let se=Z;return Z+=2,w.encode(et.mbox||".",k,Z,{mail:!0}),Z+=w.encode.bytes,w.encode(et.txt||".",k,Z),Z+=w.encode.bytes,de.encode.bytes=Z-se,k.writeUInt16BE(de.encode.bytes-2,se),k},de.encode.bytes=0,de.decode=function(et,k){k||(k=0);let Z=k,se={};return k+=2,se.mbox=w.decode(et,k,{mail:!0})||".",k+=w.decode.bytes,se.txt=w.decode(et,k)||".",k+=w.decode.bytes,de.decode.bytes=k-Z,se},de.decode.bytes=0,de.encodingLength=function(et){return 2+w.encodingLength(et.mbox||".")+w.encodingLength(et.txt||".")};var He={};He.encode=function(et,k,Z){k||(k=e.alloc(He.encodingLength(et))),Z||(Z=0);let se=Z;for(var me=[],rr=0;rr<et.length;rr++){var dr=n.toType(et[rr]);me[dr>>8]===void 0&&(me[dr>>8]=[]),me[dr>>8][dr>>3&31]|=1<<7-(dr&7)}for(rr=0;rr<me.length;rr++)if(me[rr]!==void 0){var mr=e.from(me[rr]);k.writeUInt8(rr,Z),Z+=1,k.writeUInt8(mr.length,Z),Z+=1,mr.copy(k,Z),Z+=mr.length}return He.encode.bytes=Z-se,k},He.encode.bytes=0,He.decode=function(et,k,Z){k||(k=0);let se=k;for(var me=[];k-se<Z;){var rr=et.readUInt8(k);k+=1;var dr=et.readUInt8(k);k+=1;for(var mr=0;mr<dr;mr++)for(var ur=et.readUInt8(k+mr),er=0;er<8;er++)if(ur&1<<7-er){var Gr=n.toString(rr<<8|mr<<3|er);me.push(Gr)}k+=dr}return He.decode.bytes=k-se,me},He.decode.bytes=0,He.encodingLength=function(et){for(var k=[],Z=0;Z<et.length;Z++){var se=n.toType(et[Z]);k[se>>8]=Math.max(k[se>>8]||0,se&255)}var me=0;for(Z=0;Z<k.length;Z++)k[Z]!==void 0&&(me+=2+Math.ceil((k[Z]+1)/8));return me};var ze=t.nsec={};ze.encode=function(et,k,Z){k||(k=e.alloc(ze.encodingLength(et))),Z||(Z=0);let se=Z;return Z+=2,w.encode(et.nextDomain,k,Z),Z+=w.encode.bytes,He.encode(et.rrtypes,k,Z),Z+=He.encode.bytes,ze.encode.bytes=Z-se,k.writeUInt16BE(ze.encode.bytes-2,se),k},ze.encode.bytes=0,ze.decode=function(et,k){k||(k=0);let Z=k;var se={},me=et.readUInt16BE(k);return k+=2,se.nextDomain=w.decode(et,k),k+=w.decode.bytes,se.rrtypes=He.decode(et,k,me-(k-Z)),k+=He.decode.bytes,ze.decode.bytes=k-Z,se},ze.decode.bytes=0,ze.encodingLength=function(et){return 2+w.encodingLength(et.nextDomain)+He.encodingLength(et.rrtypes)};var Te=t.nsec3={};Te.encode=function(et,k,Z){k||(k=e.alloc(Te.encodingLength(et))),Z||(Z=0);let se=Z,me=et.salt;if(!e.isBuffer(me))throw new Error("salt must be a Buffer");let rr=et.nextDomain;if(!e.isBuffer(rr))throw new Error("nextDomain must be a Buffer");return Z+=2,k.writeUInt8(et.algorithm,Z),Z+=1,k.writeUInt8(et.flags,Z),Z+=1,k.writeUInt16BE(et.iterations,Z),Z+=2,k.writeUInt8(me.length,Z),Z+=1,me.copy(k,Z,0,me.length),Z+=me.length,k.writeUInt8(rr.length,Z),Z+=1,rr.copy(k,Z,0,rr.length),Z+=rr.length,He.encode(et.rrtypes,k,Z),Z+=He.encode.bytes,Te.encode.bytes=Z-se,k.writeUInt16BE(Te.encode.bytes-2,se),k},Te.encode.bytes=0,Te.decode=function(et,k){k||(k=0);let Z=k;var se={},me=et.readUInt16BE(k);k+=2,se.algorithm=et.readUInt8(k),k+=1,se.flags=et.readUInt8(k),k+=1,se.iterations=et.readUInt16BE(k),k+=2;let rr=et.readUInt8(k);k+=1,se.salt=et.slice(k,k+rr),k+=rr;let dr=et.readUInt8(k);return k+=1,se.nextDomain=et.slice(k,k+dr),k+=dr,se.rrtypes=He.decode(et,k,me-(k-Z)),k+=He.decode.bytes,Te.decode.bytes=k-Z,se},Te.decode.bytes=0,Te.encodingLength=function(et){return 8+et.salt.length+et.nextDomain.length+He.encodingLength(et.rrtypes)};var Je=t.ds={};Je.encode=function(et,k,Z){k||(k=e.alloc(Je.encodingLength(et))),Z||(Z=0);let se=Z,me=et.digest;if(!e.isBuffer(me))throw new Error("Digest must be a Buffer");return Z+=2,k.writeUInt16BE(et.keyTag,Z),Z+=2,k.writeUInt8(et.algorithm,Z),Z+=1,k.writeUInt8(et.digestType,Z),Z+=1,me.copy(k,Z,0,me.length),Z+=me.length,Je.encode.bytes=Z-se,k.writeUInt16BE(Je.encode.bytes-2,se),k},Je.encode.bytes=0,Je.decode=function(et,k){k||(k=0);let Z=k;var se={},me=et.readUInt16BE(k);return k+=2,se.keyTag=et.readUInt16BE(k),k+=2,se.algorithm=et.readUInt8(k),k+=1,se.digestType=et.readUInt8(k),k+=1,se.digest=et.slice(k,Z+me+2),k+=se.digest.length,Je.decode.bytes=k-Z,se},Je.decode.bytes=0,Je.encodingLength=function(et){return 6+e.byteLength(et.digest)};var Xe=t.sshfp={};Xe.getFingerprintLengthForHashType=function(et){switch(et){case 1:return 20;case 2:return 32}},Xe.encode=function(et,k,Z){k||(k=e.alloc(Xe.encodingLength(et))),Z||(Z=0);let se=Z;Z+=2,k[Z]=et.algorithm,Z+=1,k[Z]=et.hash,Z+=1;let me=e.from(et.fingerprint.toUpperCase(),"hex");if(me.length!==Xe.getFingerprintLengthForHashType(et.hash))throw new Error("Invalid fingerprint length");return me.copy(k,Z),Z+=me.byteLength,Xe.encode.bytes=Z-se,k.writeUInt16BE(Xe.encode.bytes-2,se),k},Xe.encode.bytes=0,Xe.decode=function(et,k){k||(k=0);let Z=k,se={};k+=2,se.algorithm=et[k],k+=1,se.hash=et[k],k+=1;let me=Xe.getFingerprintLengthForHashType(se.hash);return se.fingerprint=et.slice(k,k+me).toString("hex").toUpperCase(),k+=me,Xe.decode.bytes=k-Z,se},Xe.decode.bytes=0,Xe.encodingLength=function(et){return 4+e.from(et.fingerprint,"hex").byteLength};var Ae=t.naptr={};Ae.encode=function(et,k,Z){k||(k=e.alloc(Ae.encodingLength(et))),Z||(Z=0);let se=Z;return Z+=2,k.writeUInt16BE(et.order||0,Z),Z+=2,k.writeUInt16BE(et.preference||0,Z),Z+=2,U.encode(et.flags,k,Z),Z+=U.encode.bytes,U.encode(et.services,k,Z),Z+=U.encode.bytes,U.encode(et.regexp,k,Z),Z+=U.encode.bytes,w.encode(et.replacement,k,Z),Z+=w.encode.bytes,Ae.encode.bytes=Z-se,k.writeUInt16BE(Ae.encode.bytes-2,se),k},Ae.encode.bytes=0,Ae.decode=function(et,k){k||(k=0);let Z=k,se={};return k+=2,se.order=et.readUInt16BE(k),k+=2,se.preference=et.readUInt16BE(k),k+=2,se.flags=U.decode(et,k),k+=U.decode.bytes,se.services=U.decode(et,k),k+=U.decode.bytes,se.regexp=U.decode(et,k),k+=U.decode.bytes,se.replacement=w.decode(et,k),k+=w.decode.bytes,Ae.decode.bytes=k-Z,se},Ae.decode.bytes=0,Ae.encodingLength=function(et){return U.encodingLength(et.flags)+U.encodingLength(et.services)+U.encodingLength(et.regexp)+w.encodingLength(et.replacement)+6};var _e=t.tlsa={};_e.encode=function(et,k,Z){k||(k=e.alloc(_e.encodingLength(et))),Z||(Z=0);let se=Z,me=et.certificate;if(!e.isBuffer(me))throw new Error("Certificate must be a Buffer");return Z+=2,k.writeUInt8(et.usage,Z),Z+=1,k.writeUInt8(et.selector,Z),Z+=1,k.writeUInt8(et.matchingType,Z),Z+=1,me.copy(k,Z,0,me.length),Z+=me.length,_e.encode.bytes=Z-se,k.writeUInt16BE(_e.encode.bytes-2,se),k},_e.encode.bytes=0,_e.decode=function(et,k){k||(k=0);let Z=k,se={},me=et.readUInt16BE(k);return k+=2,se.usage=et.readUInt8(k),k+=1,se.selector=et.readUInt8(k),k+=1,se.matchingType=et.readUInt8(k),k+=1,se.certificate=et.slice(k,Z+me+2),k+=se.certificate.length,_e.decode.bytes=k-Z,se},_e.decode.bytes=0,_e.encodingLength=function(et){return 5+e.byteLength(et.certificate)};var Qe=t.record=function(et){switch(et.toUpperCase()){case"A":return wt;case"PTR":return V;case"CNAME":return lt;case"DNAME":return mt;case"TXT":return it;case"NULL":return q;case"AAAA":return Xt;case"SRV":return Rt;case"HINFO":return L;case"CAA":return Et;case"NS":return N;case"SOA":return Q;case"MX":return vt;case"OPT":return ne;case"DNSKEY":return oe;case"RRSIG":return Le;case"RP":return de;case"NSEC":return ze;case"NSEC3":return Te;case"SSHFP":return Xe;case"DS":return Je;case"NAPTR":return Ae;case"TLSA":return _e}return J},qe=t.answer={};qe.encode=function(et,k,Z){k||(k=e.alloc(qe.encodingLength(et))),Z||(Z=0);let se=Z;if(w.encode(et.name,k,Z),Z+=w.encode.bytes,k.writeUInt16BE(n.toType(et.type),Z),et.type.toUpperCase()==="OPT"){if(et.name!==".")throw new Error("OPT name must be root.");k.writeUInt16BE(et.udpPayloadSize||4096,Z+2),k.writeUInt8(et.extendedRcode||0,Z+4),k.writeUInt8(et.ednsVersion||0,Z+5),k.writeUInt16BE(et.flags||0,Z+6),Z+=8,ne.encode(et.options||[],k,Z),Z+=ne.encode.bytes}else{let me=p.toClass(et.class===void 0?"IN":et.class);et.flush&&(me|=D),k.writeUInt16BE(me,Z+2),k.writeUInt32BE(et.ttl||0,Z+4),Z+=8;let rr=Qe(et.type);rr.encode(et.data,k,Z),Z+=rr.encode.bytes}return qe.encode.bytes=Z-se,k},qe.encode.bytes=0,qe.decode=function(et,k){k||(k=0);let Z={},se=k;if(Z.name=w.decode(et,k),k+=w.decode.bytes,Z.type=n.toString(et.readUInt16BE(k)),Z.type==="OPT")Z.udpPayloadSize=et.readUInt16BE(k+2),Z.extendedRcode=et.readUInt8(k+4),Z.ednsVersion=et.readUInt8(k+5),Z.flags=et.readUInt16BE(k+6),Z.flag_do=(Z.flags>>15&1)===1,Z.options=ne.decode(et,k+8),k+=8+ne.decode.bytes;else{let me=et.readUInt16BE(k+2);Z.ttl=et.readUInt32BE(k+4),Z.class=p.toString(me&a),Z.flush=!!(me&D);let rr=Qe(Z.type);Z.data=rr.decode(et,k+8),k+=8+rr.decode.bytes}return qe.decode.bytes=k-se,Z},qe.decode.bytes=0,qe.encodingLength=function(et){let k=et.data!==null&&et.data!==void 0?et.data:et.options;return w.encodingLength(et.name)+8+Qe(et.type).encodingLength(k)};var Ze=t.question={};Ze.encode=function(et,k,Z){k||(k=e.alloc(Ze.encodingLength(et))),Z||(Z=0);let se=Z;return w.encode(et.name,k,Z),Z+=w.encode.bytes,k.writeUInt16BE(n.toType(et.type),Z),Z+=2,k.writeUInt16BE(p.toClass(et.class===void 0?"IN":et.class),Z),Z+=2,Ze.encode.bytes=Z-se,et},Ze.encode.bytes=0,Ze.decode=function(et,k){k||(k=0);let Z=k,se={};return se.name=w.decode(et,k),k+=w.decode.bytes,se.type=n.toString(et.readUInt16BE(k)),k+=2,se.class=p.toString(et.readUInt16BE(k)),k+=2,se.class&H&&(se.class&=W),Ze.decode.bytes=k-Z,se},Ze.decode.bytes=0,Ze.encodingLength=function(et){return w.encodingLength(et.name)+4},t.AUTHORITATIVE_ANSWER=1024,t.TRUNCATED_RESPONSE=512,t.RECURSION_DESIRED=256,t.RECURSION_AVAILABLE=128,t.AUTHENTIC_DATA=32,t.CHECKING_DISABLED=16,t.DNSSEC_OK=32768,t.encode=function(et,k,Z){let se=!k;se&&(k=e.alloc(t.encodingLength(et))),Z||(Z=0);let me=Z;return et.questions||(et.questions=[]),et.answers||(et.answers=[]),et.authorities||(et.authorities=[]),et.additionals||(et.additionals=[]),tt.encode(et,k,Z),Z+=tt.encode.bytes,Z=Or(et.questions,Ze,k,Z),Z=Or(et.answers,qe,k,Z),Z=Or(et.authorities,qe,k,Z),Z=Or(et.additionals,qe,k,Z),t.encode.bytes=Z-me,se&&t.encode.bytes!==k.length?k.slice(0,t.encode.bytes):k},t.encode.bytes=0,t.decode=function(et,k){k||(k=0);let Z=k,se=tt.decode(et,k);return k+=tt.decode.bytes,k=Cr(se.questions,Ze,et,k),k=Cr(se.answers,qe,et,k),k=Cr(se.authorities,qe,et,k),k=Cr(se.additionals,qe,et,k),t.decode.bytes=k-Z,se},t.decode.bytes=0,t.encodingLength=function(et){return tt.encodingLength(et)+Ar(et.questions||[],Ze)+Ar(et.answers||[],qe)+Ar(et.authorities||[],qe)+Ar(et.additionals||[],qe)},t.streamEncode=function(et){let k=t.encode(et),Z=e.alloc(2);Z.writeUInt16BE(k.byteLength);let se=e.concat([Z,k]);return t.streamEncode.bytes=se.byteLength,se},t.streamEncode.bytes=0,t.streamDecode=function(et){let k=et.readUInt16BE(0);if(et.byteLength<k+2)return null;let Z=t.decode(et.slice(2));return t.streamDecode.bytes=t.decode.bytes,Z},t.streamDecode.bytes=0;function Ar(et,k){let Z=0;for(let se=0;se<et.length;se++)Z+=k.encodingLength(et[se]);return Z}function Or(et,k,Z,se){for(let me=0;me<et.length;me++)k.encode(et[me],Z,se),se+=k.encode.bytes;return se}function Cr(et,k,Z,se){for(let me=0;me<et.length;me++)et[me]=k.decode(Z,se),se+=k.decode.bytes;return se}}),Mm=ce((t,e)=>{var n=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);n?(u=new Uint8Array(16),e.exports=function(){return n(u),u}):(s=new Array(16),e.exports=function(){for(var p=0,y;p<16;p++)p&3||(y=Math.random()*4294967296),s[p]=y>>>((p&3)<<3)&255;return s});var u,s}),qm=ce((t,e)=>{var n=[];for(u=0;u<256;++u)n[u]=(u+256).toString(16).substr(1);var u;function s(p,y){var g=y||0,E=n;return[E[p[g++]],E[p[g++]],E[p[g++]],E[p[g++]],"-",E[p[g++]],E[p[g++]],"-",E[p[g++]],E[p[g++]],"-",E[p[g++]],E[p[g++]],"-",E[p[g++]],E[p[g++]],E[p[g++]],E[p[g++]],E[p[g++]],E[p[g++]]].join("")}e.exports=s}),bC=ce((t,e)=>{var n=Mm(),u=qm(),s,p,y=0,g=0;function E(m,D,a){var H=D&&a||0,W=D||[];m=m||{};var w=m.node||s,U=m.clockseq!==void 0?m.clockseq:p;if(w==null||U==null){var tt=n();w==null&&(w=s=[tt[0]|1,tt[1],tt[2],tt[3],tt[4],tt[5]]),U==null&&(U=p=(tt[6]<<8|tt[7])&16383)}var J=m.msecs!==void 0?m.msecs:new Date().getTime(),N=m.nsecs!==void 0?m.nsecs:g+1,Q=J-y+(N-g)/1e4;if(Q<0&&m.clockseq===void 0&&(U=U+1&16383),(Q<0||J>y)&&m.nsecs===void 0&&(N=0),N>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");y=J,g=N,p=U,J+=122192928e5;var it=((J&268435455)*1e4+N)%4294967296;W[H++]=it>>>24&255,W[H++]=it>>>16&255,W[H++]=it>>>8&255,W[H++]=it&255;var q=J/4294967296*1e4&268435455;W[H++]=q>>>8&255,W[H++]=q&255,W[H++]=q>>>24&15|16,W[H++]=q>>>16&255,W[H++]=U>>>8|128,W[H++]=U&255;for(var L=0;L<6;++L)W[H+L]=w[L];return D||u(W)}e.exports=E}),_C=ce((t,e)=>{var n=Mm(),u=qm();function s(p,y,g){var E=y&&g||0;typeof p=="string"&&(y=p==="binary"?new Array(16):null,p=null),p=p||{};var m=p.random||(p.rng||n)();if(m[6]=m[6]&15|64,m[8]=m[8]&63|128,y)for(var D=0;D<16;++D)y[E+D]=m[D];return y||u(m)}e.exports=s}),SC=ce((t,e)=>{var n=bC(),u=_C(),s=u;s.v1=n,s.v4=u,e.exports=s}),z0=ce((t,e)=>{var{v4:n}=SC();function u(){return n().replace(/-/g,"")}var s=u;function p(){return s()}p.setFactory=y=>{s=y},p.reset=()=>{s=u},e.exports=p}),wu=ce((t,e)=>{var n=Symbol("_options"),u=Symbol("_cache"),s=Symbol("_state"),p=Symbol("_objectId"),y=Symbol("_conflicts"),g=Symbol("_change"),E=Symbol("_elemIds");e.exports={OPTIONS:n,CACHE:u,STATE:s,OBJECT_ID:p,CONFLICTS:y,CHANGE:g,ELEM_IDS:E}}),Us=ce((t,e)=>{function n(g){return typeof g=="object"&&g!==null}function u(g){if(!n(g))return{};let E={};for(let m of Object.keys(g))E[m]=g[m];return E}function s(g){let E=/^(\d+)@(.*)$/.exec(g||"");if(!E)throw new RangeError(`Not a valid opId: ${g}`);return{counter:parseInt(E[1],10),actorId:E[2]}}function p(g,E){if(!(g instanceof Uint8Array)||!(E instanceof Uint8Array))throw new TypeError("equalBytes can only compare Uint8Arrays");if(g.byteLength!==E.byteLength)return!1;for(let m=0;m<g.byteLength;m++)if(g[m]!==E[m])return!1;return!0}function y(g){let E=new Array(g);for(let m=0;m<g;m++)E[m]=null;return E}e.exports={isObject:n,copyObject:u,parseOpId:s,equalBytes:p,createArrayOfNulls:y}}),Qf=ce((t,e)=>{var{OBJECT_ID:n}=wu(),{isObject:u}=Us(),s=class{constructor(y){if(typeof y=="string"){let g=[...y].map(E=>({value:E}));return p(void 0,g)}else if(Array.isArray(y)){let g=y.map(E=>({value:E}));return p(void 0,g)}else{if(y===void 0)return p(void 0,[]);throw new TypeError(`Unsupported initial value for Text: ${y}`)}}get length(){return this.elems.length}get(y){let g=this.elems[y].value;if(this.context&&u(g)){let E=g[n],m=this.path.concat([{key:y,objectId:E}]);return this.context.instantiateObject(m,E)}else return g}getElemId(y){return this.elems[y].elemId}[Symbol.iterator](){let y=this.elems,g=-1;return{next(){return g+=1,g<y.length?{done:!1,value:y[g].value}:{done:!0}}}}toString(){let y="";for(let g of this.elems)typeof g.value=="string"&&(y+=g.value);return y}toSpans(){let y=[],g="";for(let E of this.elems)typeof E.value=="string"?g+=E.value:(g.length>0&&(y.push(g),g=""),y.push(E.value));return g.length>0&&y.push(g),y}toJSON(){return this.toString()}getWriteable(y,g){if(!this[n])throw new RangeError("getWriteable() requires the objectId to be set");let E=p(this[n],this.elems);return E.context=y,E.path=g,E}set(y,g){if(this.context)this.context.setListIndex(this.path,y,g);else if(!this[n])this.elems[y].value=g;else throw new TypeError("Automerge.Text object cannot be modified outside of a change block");return this}insertAt(y,...g){if(this.context)this.context.splice(this.path,y,0,g);else if(!this[n])this.elems.splice(y,0,...g.map(E=>({value:E})));else throw new TypeError("Automerge.Text object cannot be modified outside of a change block");return this}deleteAt(y,g=1){if(this.context)this.context.splice(this.path,y,g,[]);else if(!this[n])this.elems.splice(y,g);else throw new TypeError("Automerge.Text object cannot be modified outside of a change block");return this}};for(let y of["concat","every","filter","find","findIndex","forEach","includes","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toLocaleString"])s.prototype[y]=function(...g){return[...this][y](...g)};function p(y,g){let E=Object.create(s.prototype);return E[n]=y,E.elems=g,E}e.exports={Text:s,instantiateText:p}}),th=ce((t,e)=>{var{OBJECT_ID:n,CONFLICTS:u}=wu(),{isObject:s,copyObject:p}=Us();function y(D,a,H){for(let W of D)if(a[W]!==H[W]){if(typeof a[W]=="number"&&typeof H[W]=="number")return a[W]-H[W];{let w=""+a[W],U=""+H[W];if(w===U)continue;return w<U?-1:1}}return 0}var g=class{constructor(){this.entries=Object.freeze({}),this.opIds=Object.freeze({}),Object.freeze(this)}byId(D){return this.entries[D]}get ids(){return Object.keys(this.entries).filter(D=>{let a=this.entries[D];return s(a)&&a.id===D})}get count(){return this.ids.length}get rows(){return this.ids.map(D=>this.byId(D))}filter(D,a){return this.rows.filter(D,a)}find(D,a){return this.rows.find(D,a)}map(D,a){return this.rows.map(D,a)}sort(D){if(typeof D=="function")return this.rows.sort(D);if(typeof D=="string")return this.rows.sort((a,H)=>y([D],a,H));if(Array.isArray(D))return this.rows.sort((a,H)=>y(D,a,H));if(D===void 0)return this.rows.sort((a,H)=>y(["id"],a,H));throw new TypeError(`Unsupported sorting argument: ${D}`)}[Symbol.iterator](){let D=this.rows,a=-1;return{next(){return a+=1,a<D.length?{done:!1,value:D[a]}:{done:!0}}}}_clone(){if(!this[n])throw new RangeError("clone() requires the objectId to be set");return m(this[n],p(this.entries),p(this.opIds))}_set(D,a,H){if(Object.isFrozen(this.entries))throw new Error("A table can only be modified in a change function");s(a)&&!Array.isArray(a)&&Object.defineProperty(a,"id",{value:D,enumerable:!0}),this.entries[D]=a,this.opIds[D]=H}remove(D){if(Object.isFrozen(this.entries))throw new Error("A table can only be modified in a change function");delete this.entries[D],delete this.opIds[D]}_freeze(){Object.freeze(this.entries),Object.freeze(this.opIds),Object.freeze(this)}getWriteable(D,a){if(!this[n])throw new RangeError("getWriteable() requires the objectId to be set");let H=Object.create(E.prototype);return H[n]=this[n],H.context=D,H.entries=this.entries,H.opIds=this.opIds,H.path=a,H}toJSON(){let D={};for(let a of this.ids)D[a]=this.byId(a);return D}},E=class extends g{byId(D){if(s(this.entries[D])&&this.entries[D].id===D){let a=this.entries[D][n],H=this.path.concat([{key:D,objectId:a}]);return this.context.instantiateObject(H,a,["id"])}}add(D){return this.context.addTableRow(this.path,D)}remove(D){if(s(this.entries[D])&&this.entries[D].id===D)this.context.deleteTableRow(this.path,D,this.opIds[D]);else throw new RangeError(`There is no row with ID ${D} in this table`)}};function m(D,a,H){let W=Object.create(g.prototype);if(!D)throw new RangeError("instantiateTable requires an objectId to be given");return W[n]=D,W[u]=Object.freeze({}),W.entries=a||{},W.opIds=H||{},W}e.exports={Table:g,instantiateTable:m}}),W0=ce((t,e)=>{var n=class{constructor(p){this.value=p||0,Object.freeze(this)}valueOf(){return this.value}toString(){return this.valueOf().toString()}toJSON(){return this.value}},u=class extends n{increment(p){return p=typeof p=="number"?p:1,this.context.increment(this.path,this.key,p),this.value+=p,this.value}decrement(p){return this.increment(typeof p=="number"?-p:-1)}};function s(p,y,g,E,m){let D=Object.create(u.prototype);return D.value=p,D.context=y,D.path=g,D.objectId=E,D.key=m,D}e.exports={Counter:n,getWriteableCounter:s}}),Qm=ce((t,e)=>{var{isObject:n,copyObject:u,parseOpId:s}=Us(),{OBJECT_ID:p,CONFLICTS:y,ELEM_IDS:g}=wu(),{instantiateText:E}=Qf(),{instantiateTable:m}=th(),{Counter:D}=W0();function a(L,V,lt){return L.objectId?(V&&V[p]!==L.objectId&&(V=void 0),it(L,V,lt)):L.datatype==="timestamp"?new Date(L.value):L.datatype==="counter"?new D(L.value):L.value}function H(L,V){let lt=/^(\d+)@(.*)$/,mt=lt.test(L)?s(L):{counter:0,actorId:L},Rt=lt.test(V)?s(V):{counter:0,actorId:V};return mt.counter<Rt.counter?-1:mt.counter>Rt.counter?1:mt.actorId<Rt.actorId?-1:mt.actorId>Rt.actorId?1:0}function W(L,V,lt,mt){if(L)for(let Rt of Object.keys(L)){let Et={},vt=Object.keys(L[Rt]).sort(H).reverse();for(let wt of vt){let Xt=L[Rt][wt];lt[Rt]&&lt[Rt][wt]?Et[wt]=a(Xt,lt[Rt][wt],mt):Et[wt]=a(Xt,void 0,mt)}vt.length===0?(delete V[Rt],delete lt[Rt]):(V[Rt]=Et[vt[0]],lt[Rt]=Et)}}function w(L,V){let lt=u(L),mt=u(L?L[y]:void 0);return Object.defineProperty(lt,p,{value:V}),Object.defineProperty(lt,y,{value:mt}),lt}function U(L,V,lt){let mt=L.objectId;lt[mt]||(lt[mt]=w(V,mt));let Rt=lt[mt];return W(L.props,Rt,Rt[y],lt),Rt}function tt(L,V,lt){let mt=L.objectId;lt[mt]||(lt[mt]=V?V._clone():m(mt));let Rt=lt[mt];for(let Et of Object.keys(L.props||{})){let vt=Object.keys(L.props[Et]);if(vt.length===0)Rt.remove(Et);else if(vt.length===1){let wt=L.props[Et][vt[0]];Rt._set(Et,a(wt,Rt.byId(Et),lt),vt[0])}else throw new RangeError("Conflicts are not supported on properties of a table")}return Rt}function J(L,V){let lt=L?L.slice():[],mt=L&&L[y]?L[y].slice():[],Rt=L&&L[g]?L[g].slice():[];return Object.defineProperty(lt,p,{value:V}),Object.defineProperty(lt,y,{value:mt}),Object.defineProperty(lt,g,{value:Rt}),lt}function N(L,V,lt){let mt=L.objectId;lt[mt]||(lt[mt]=J(V,mt));let Rt=lt[mt],Et=Rt[y],vt=Rt[g];for(let wt=0;wt<L.edits.length;wt++){let Xt=L.edits[wt];if(Xt.action==="insert"||Xt.action==="update"){let ee=Et[Xt.index]&&Et[Xt.index][Xt.opId],ne=a(Xt.value,ee,lt),oe={[Xt.opId]:ne};for(;wt<L.edits.length-1&&L.edits[wt+1].index===Xt.index&&L.edits[wt+1].action==="update";){wt++;let Le=L.edits[wt],de=Et[Le.index]&&Et[Le.index][Le.opId];ne=a(Le.value,de,lt),oe[Le.opId]=ne}Xt.action==="insert"?(Rt.splice(Xt.index,0,ne),Et.splice(Xt.index,0,oe),vt.splice(Xt.index,0,Xt.elemId)):(Rt[Xt.index]=ne,Et[Xt.index]=oe)}else if(Xt.action==="multi-insert"){let ee=s(Xt.elemId),ne=[],oe=[],Le=[],de=Xt.datatype;Xt.values.forEach((He,ze)=>{let Te=`${ee.counter+ze}@${ee.actorId}`;He=a({value:He,datatype:de},void 0,lt),oe.push(He),Le.push({[Te]:{value:He,datatype:de,type:"value"}}),ne.push(Te)}),Rt.splice(Xt.index,0,...oe),Et.splice(Xt.index,0,...Le),vt.splice(Xt.index,0,...ne)}else Xt.action==="remove"&&(Rt.splice(Xt.index,Xt.count),Et.splice(Xt.index,Xt.count),vt.splice(Xt.index,Xt.count))}return Rt}function Q(L,V,lt){let mt=L.objectId,Rt;lt[mt]?Rt=lt[mt].elems:V?Rt=V.elems.slice():Rt=[];for(let Et of L.edits)if(Et.action==="insert"){let vt=a(Et.value,void 0,lt),wt={elemId:Et.elemId,pred:[Et.opId],value:vt};Rt.splice(Et.index,0,wt)}else if(Et.action==="multi-insert"){let vt=s(Et.elemId),wt=Et.datatype,Xt=Et.values.map((ee,ne)=>{ee=a({datatype:wt,value:ee},void 0,lt);let oe=`${vt.counter+ne}@${vt.actorId}`;return{elemId:oe,pred:[oe],value:ee}});Rt.splice(Et.index,0,...Xt)}else if(Et.action==="update"){let vt=Rt[Et.index].elemId,wt=a(Et.value,Rt[Et.index].value,lt);Rt[Et.index]={elemId:vt,pred:[Et.opId],value:wt}}else Et.action==="remove"&&Rt.splice(Et.index,Et.count);return lt[mt]=E(mt,Rt),lt[mt]}function it(L,V,lt){if(n(V)&&(!L.props||Object.keys(L.props).length===0)&&(!L.edits||L.edits.length===0)&&!lt[L.objectId])return V;if(L.type==="map")return U(L,V,lt);if(L.type==="table")return tt(L,V,lt);if(L.type==="list")return N(L,V,lt);if(L.type==="text")return Q(L,V,lt);throw new TypeError(`Unknown object type: ${L.type}`)}function q(L){if(L[p]!=="_root")throw new RangeError(`Not the root object: ${L[p]}`);return w(L,"_root")}e.exports={interpretPatch:it,cloneRootObject:q}}),qC=ce((t,e)=>{var{OBJECT_ID:n,CHANGE:u,STATE:s}=wu(),{createArrayOfNulls:p}=Us(),{Text:y}=Qf(),{Table:g}=th();function E(tt){if(typeof tt=="string"&&/^[0-9]+$/.test(tt)&&(tt=parseInt(tt,10)),typeof tt!="number")throw new TypeError("A list index must be a number, but you passed "+JSON.stringify(tt));if(tt<0||isNaN(tt)||tt===1/0||tt===-1/0)throw new RangeError("A list index must be positive, but you passed "+tt);return tt}function m(tt,J,N){let Q={deleteAt(it,q){return tt.splice(N,E(it),q||1,[]),this},fill(it,q,L){let V=tt.getObject(J);for(let lt=E(q||0);lt<E(L||V.length);lt++)tt.setListIndex(N,lt,it);return this},indexOf(it,q=0){let L=it[n];if(L){let V=tt.getObject(J);for(let lt=q;lt<V.length;lt++)if(V[lt][n]===L)return lt;return-1}else return tt.getObject(J).indexOf(it,q)},insertAt(it,...q){return tt.splice(N,E(it),0,q),this},pop(){let it=tt.getObject(J);if(it.length==0)return;let q=tt.getObjectField(N,J,it.length-1);return tt.splice(N,it.length-1,1,[]),q},push(...it){let q=tt.getObject(J);return tt.splice(N,q.length,0,it),tt.getObject(J).length},shift(){if(tt.getObject(J).length==0)return;let it=tt.getObjectField(N,J,0);return tt.splice(N,0,1,[]),it},splice(it,q,...L){let V=tt.getObject(J);it=E(it),(q===void 0||q>V.length-it)&&(q=V.length-it);let lt=[];for(let mt=0;mt<q;mt++)lt.push(tt.getObjectField(N,J,it+mt));return tt.splice(N,it,q,L),lt},unshift(...it){return tt.splice(N,0,0,it),tt.getObject(J).length}};for(let it of["entries","keys","values"]){let q=tt.getObject(J);Q[it]=()=>q[it]()}for(let it of["concat","every","filter","find","findIndex","forEach","includes","join","lastIndexOf","map","reduce","reduceRight","slice","some","toLocaleString","toString"])Q[it]=(...q)=>tt.getObject(J).map((L,V)=>tt.getObjectField(N,J,V))[it](...q);return Q}var D={get(tt,J){let{context:N,objectId:Q,path:it}=tt;return J===n?Q:J===u?N:J===s?{actorId:N.actorId}:N.getObjectField(it,Q,J)},set(tt,J,N){let{context:Q,path:it,readonly:q}=tt;if(Array.isArray(q)&&q.indexOf(J)>=0)throw new RangeError(`Object property "${J}" cannot be modified`);return Q.setMapKey(it,J,N),!0},deleteProperty(tt,J){let{context:N,path:Q,readonly:it}=tt;if(Array.isArray(it)&&it.indexOf(J)>=0)throw new RangeError(`Object property "${J}" cannot be modified`);return N.deleteMapKey(Q,J),!0},has(tt,J){let{context:N,objectId:Q}=tt;return[n,u].includes(J)||J in N.getObject(Q)},getOwnPropertyDescriptor(tt,J){let{context:N,objectId:Q}=tt,it=N.getObject(Q);if(J in it)return{configurable:!0,enumerable:!0,value:N.getObjectField(Q,J)}},ownKeys(tt){let{context:J,objectId:N}=tt;return Object.keys(J.getObject(N))}},a={get(tt,J){let[N,Q,it]=tt;return J===Symbol.iterator?N.getObject(Q)[Symbol.iterator]:J===n?Q:J===u?N:J==="length"?N.getObject(Q).length:typeof J=="string"&&/^[0-9]+$/.test(J)?N.getObjectField(it,Q,E(J)):m(N,Q,it)[J]},set(tt,J,N){let[Q,it,q]=tt;if(J==="length"){if(typeof N!="number")throw new RangeError("Invalid array length");let L=Q.getObject(it).length;L>N?Q.splice(q,N,L-N,[]):Q.splice(q,L,0,p(N-L))}else Q.setListIndex(q,E(J),N);return!0},deleteProperty(tt,J){let[N,,Q]=tt;return N.splice(Q,E(J),1,[]),!0},has(tt,J){let[N,Q]=tt;return typeof J=="string"&&/^[0-9]+$/.test(J)?E(J)<N.getObject(Q).length:["length",n,u].includes(J)},getOwnPropertyDescriptor(tt,J){let[N,Q]=tt,it=N.getObject(Q);if(J==="length")return{writable:!0,value:it.length};if(J===n)return{configurable:!1,enumerable:!1,value:Q};if(typeof J=="string"&&/^[0-9]+$/.test(J)){let q=E(J);if(q<it.length)return{configurable:!0,enumerable:!0,value:N.getObjectField(Q,q)}}},ownKeys(tt){let[J,N]=tt,Q=J.getObject(N),it=["length"];for(let q of Object.keys(Q))it.push(q);return it}};function H(tt,J,N,Q){return new Proxy({context:tt,objectId:J,path:N,readonly:Q},D)}function W(tt,J,N){return new Proxy([tt,J,N],a)}function w(tt,J,N){let Q=this.getObject(J);return Array.isArray(Q)?W(this,J,tt):Q instanceof y||Q instanceof g?Q.getWriteable(this,tt):H(this,J,tt,N)}function U(tt){return tt.instantiateObject=w,H(tt,"_root",[])}e.exports={rootObjectProxy:U}}),nv=ce((t,e)=>{var n=class{constructor(p){if(!(Number.isInteger(p)&&p<=Number.MAX_SAFE_INTEGER&&p>=Number.MIN_SAFE_INTEGER))throw new RangeError(`Value ${p} cannot be a uint`);this.value=p,Object.freeze(this)}},u=class{constructor(p){if(!(Number.isInteger(p)&&p<=Number.MAX_SAFE_INTEGER&&p>=0))throw new RangeError(`Value ${p} cannot be a uint`);this.value=p,Object.freeze(this)}},s=class{constructor(p){if(typeof p!="number")throw new RangeError(`Value ${p} cannot be a float64`);this.value=p||0,Object.freeze(this)}};e.exports={Int:n,Uint:u,Float64:s}}),YC=ce((t,e)=>{var{CACHE:n,OBJECT_ID:u,CONFLICTS:s,ELEM_IDS:p,STATE:y}=wu(),{interpretPatch:g}=Qm(),{Text:E}=Qf(),{Table:m}=th(),{Counter:D,getWriteableCounter:a}=W0(),{Int:H,Uint:W,Float64:w}=nv(),{isObject:U,parseOpId:tt,createArrayOfNulls:J}=Us(),N=z0(),Q=class{constructor(L,V,lt){this.actorId=V,this.nextOpNum=L[y].maxOp+1,this.cache=L[n],this.updated={},this.ops=[],this.applyPatch=lt||g}addOp(L){this.ops.push(L),L.action==="set"&&L.values?this.nextOpNum+=L.values.length:L.action==="del"&&L.multiOp?this.nextOpNum+=L.multiOp:this.nextOpNum+=1}nextOpId(){return`${this.nextOpNum}@${this.actorId}`}getValueDescription(L){if(!["object","boolean","number","string"].includes(typeof L))throw new TypeError(`Unsupported type of value: ${typeof L}`);if(U(L)){if(L instanceof Date)return{type:"value",value:L.getTime(),datatype:"timestamp"};if(L instanceof H)return{type:"value",value:L.value,datatype:"int"};if(L instanceof W)return{type:"value",value:L.value,datatype:"uint"};if(L instanceof w)return{type:"value",value:L.value,datatype:"float64"};if(L instanceof D)return{type:"value",value:L.value,datatype:"counter"};{let V=L[u],lt=this.getObjectType(V);if(!V)throw new RangeError(`Object ${JSON.stringify(L)} has no objectId`);return lt==="list"||lt==="text"?{objectId:V,type:lt,edits:[]}:{objectId:V,type:lt,props:{}}}}else return typeof L=="number"?Number.isInteger(L)&&L<=Number.MAX_SAFE_INTEGER&&L>=Number.MIN_SAFE_INTEGER?{type:"value",value:L,datatype:"int"}:{type:"value",value:L,datatype:"float64"}:{type:"value",value:L}}getValuesDescriptions(L,V,lt){if(V instanceof m){let mt=V.byId(lt),Rt=V.opIds[lt];return mt?{[Rt]:this.getValueDescription(mt)}:{}}else if(V instanceof E){let mt=V.get(lt),Rt=V.getElemId(lt);return mt?{[Rt]:this.getValueDescription(mt)}:{}}else{let mt=V[s][lt],Rt={};if(!mt)throw new RangeError(`No children at key ${lt} of path ${JSON.stringify(L)}`);for(let Et of Object.keys(mt))Rt[Et]=this.getValueDescription(mt[Et]);return Rt}}getPropertyValue(L,V,lt){return L instanceof m?L.byId(V):L instanceof E?L.get(V):L[s][V][lt]}getSubpatch(L,V){if(V.length==0)return L;let lt=L,mt=this.getObject("_root");for(let Rt of V){let Et=this.getValuesDescriptions(V,mt,Rt.key);if(lt.props)lt.props[Rt.key]||(lt.props[Rt.key]=Et);else if(lt.edits)for(let wt of Object.keys(Et))lt.edits.push({action:"update",index:Rt.key,opId:wt,value:Et[wt]});let vt=null;for(let wt of Object.keys(Et))Et[wt].objectId===Rt.objectId&&(vt=wt);if(!vt)throw new RangeError(`Cannot find path object with objectId ${Rt.objectId}`);lt=Et[vt],mt=this.getPropertyValue(mt,Rt.key,vt)}return lt}getObject(L){let V=this.updated[L]||this.cache[L];if(!V)throw new RangeError(`Target object does not exist: ${L}`);return V}getObjectType(L){if(L==="_root")return"map";let V=this.getObject(L);return V instanceof E?"text":V instanceof m?"table":Array.isArray(V)?"list":"map"}getObjectField(L,V,lt){if(!["string","number"].includes(typeof lt))return;let mt=this.getObject(V);if(mt[lt]instanceof D)return a(mt[lt].value,this,L,V,lt);if(U(mt[lt])){let Rt=mt[lt][u],Et=L.concat([{key:lt,objectId:Rt}]);return this.instantiateObject(Et,Rt)}else return mt[lt]}createNestedObjects(L,V,lt,mt,Rt,Et){if(lt[u])throw new RangeError("Cannot create a reference to an existing document object");let vt=this.nextOpId();if(lt instanceof E){this.addOp(Et?{action:"makeText",obj:L,elemId:Et,insert:mt,pred:Rt}:{action:"makeText",obj:L,key:V,insert:mt,pred:Rt});let wt={objectId:vt,type:"text",edits:[]};return this.insertListItems(wt,0,[...lt],!0),wt}else if(lt instanceof m){if(lt.count>0)throw new RangeError("Assigning a non-empty Table object is not supported");return this.addOp(Et?{action:"makeTable",obj:L,elemId:Et,insert:mt,pred:Rt}:{action:"makeTable",obj:L,key:V,insert:mt,pred:Rt}),{objectId:vt,type:"table",props:{}}}else if(Array.isArray(lt)){this.addOp(Et?{action:"makeList",obj:L,elemId:Et,insert:mt,pred:Rt}:{action:"makeList",obj:L,key:V,insert:mt,pred:Rt});let wt={objectId:vt,type:"list",edits:[]};return this.insertListItems(wt,0,lt,!0),wt}else{this.addOp(Et?{action:"makeMap",obj:L,elemId:Et,insert:mt,pred:Rt}:{action:"makeMap",obj:L,key:V,insert:mt,pred:Rt});let wt={};for(let Xt of Object.keys(lt).sort()){let ee=this.nextOpId(),ne=this.setValue(vt,Xt,lt[Xt],!1,[]);wt[Xt]={[ee]:ne}}return{objectId:vt,type:"map",props:wt}}}setValue(L,V,lt,mt,Rt,Et){if(!L)throw new RangeError("setValue needs an objectId");if(V==="")throw new RangeError("The key of a map entry must not be an empty string");if(U(lt)&&!(lt instanceof Date)&&!(lt instanceof D)&&!(lt instanceof H)&&!(lt instanceof W)&&!(lt instanceof w))return this.createNestedObjects(L,V,lt,mt,Rt,Et);{let vt=this.getValueDescription(lt),wt={action:"set",obj:L,insert:mt,value:vt.value,pred:Rt};return Et?wt.elemId=Et:wt.key=V,vt.datatype&&(wt.datatype=vt.datatype),this.addOp(wt),vt}}applyAtPath(L,V){let lt={objectId:"_root",type:"map",props:{}};V(this.getSubpatch(lt,L)),this.applyPatch(lt,this.cache._root,this.updated)}setMapKey(L,V,lt){if(typeof V!="string")throw new RangeError(`The key of a map entry must be a string, not ${typeof V}`);let mt=L.length===0?"_root":L[L.length-1].objectId,Rt=this.getObject(mt);if(Rt[V]instanceof D)throw new RangeError("Cannot overwrite a Counter object; use .increment() or .decrement() to change its value.");(Rt[V]!==lt||Object.keys(Rt[s][V]||{}).length>1||lt===void 0)&&this.applyAtPath(L,Et=>{let vt=it(Rt,V),wt=this.nextOpId(),Xt=this.setValue(mt,V,lt,!1,vt);Et.props[V]={[wt]:Xt}})}deleteMapKey(L,V){let lt=L.length===0?"_root":L[L.length-1].objectId,mt=this.getObject(lt);if(mt[V]!==void 0){let Rt=it(mt,V);this.addOp({action:"del",obj:lt,key:V,insert:!1,pred:Rt}),this.applyAtPath(L,Et=>{Et.props[V]={}})}}insertListItems(L,V,lt,mt){let Rt=mt?[]:this.getObject(L.objectId);if(V<0||V>Rt.length)throw new RangeError(`List index ${V} is out of bounds for list of length ${Rt.length}`);if(lt.length===0)return;let Et=q(Rt,V,!0),vt=lt.every(ee=>typeof ee=="string"||typeof ee=="number"||typeof ee=="boolean"||ee===null||U(ee)&&(ee instanceof Date||ee instanceof D||ee instanceof H||ee instanceof W||ee instanceof w)),wt=vt?lt.map(ee=>this.getValueDescription(ee)):[],Xt=wt.every(ee=>ee.datatype===wt[0].datatype);if(vt&&Xt&&lt.length>1){let ee=this.nextOpId(),ne=wt[0].datatype,oe=wt.map(He=>He.value),Le={action:"set",obj:L.objectId,elemId:Et,insert:!0,values:oe,pred:[]},de={action:"multi-insert",elemId:ee,index:V,values:oe};ne&&(Le.datatype=ne,de.datatype=ne),this.addOp(Le),L.edits.push(de)}else for(let ee=0;ee<lt.length;ee++){let ne=this.nextOpId(),oe=this.setValue(L.objectId,V+ee,lt[ee],!0,[],Et);Et=ne,L.edits.push({action:"insert",index:V+ee,elemId:Et,opId:Et,value:oe})}}setListIndex(L,V,lt){let mt=L.length===0?"_root":L[L.length-1].objectId,Rt=this.getObject(mt);if(V>=Rt.length){let Et=J(V-Rt.length);return Et.push(lt),this.splice(L,Rt.length,0,Et)}if(Rt[V]instanceof D)throw new RangeError("Cannot overwrite a Counter object; use .increment() or .decrement() to change its value.");(Rt[V]!==lt||Object.keys(Rt[s][V]||{}).length>1||lt===void 0)&&this.applyAtPath(L,Et=>{let vt=it(Rt,V),wt=this.nextOpId(),Xt=this.setValue(mt,V,lt,!1,vt,q(Rt,V));Et.edits.push({action:"update",index:V,opId:wt,value:Xt})})}splice(L,V,lt,mt){let Rt=L.length===0?"_root":L[L.length-1].objectId,Et=this.getObject(Rt);if(V<0||lt<0||V>Et.length-lt)throw new RangeError(`${lt} deletions starting at index ${V} are out of bounds for list of length ${Et.length}`);if(lt===0&&mt.length===0)return;let vt={diffs:{objectId:"_root",type:"map",props:{}}},wt=this.getSubpatch(vt.diffs,L);if(lt>0){let Xt,ee,ne;for(let oe=0;oe<lt;oe++){if(this.getObjectField(L,Rt,V+oe)instanceof D)throw new TypeError("Unsupported operation: deleting a counter from a list");let Le=q(Et,V+oe),de=tt(Le),He=it(Et,V+oe),ze=He.length===1?tt(He[0]):void 0;Xt&&ee&&ne&&ze&&ee.actorId===de.actorId&&ee.counter+1===de.counter&&ne.actorId===ze.actorId&&ne.counter+1===ze.counter?Xt.multiOp=(Xt.multiOp||1)+1:(Xt&&this.addOp(Xt),Xt={action:"del",obj:Rt,elemId:Le,insert:!1,pred:He}),ee=de,ne=ze}this.addOp(Xt),wt.edits.push({action:"remove",index:V,count:lt})}mt.length>0&&this.insertListItems(wt,V,mt,!1),this.applyPatch(vt.diffs,this.cache._root,this.updated)}addTableRow(L,V){if(!U(V)||Array.isArray(V))throw new TypeError("A table row must be an object");if(V[u])throw new TypeError("Cannot reuse an existing object as table row");if(V.id)throw new TypeError('A table row must not have an "id" property; it is generated automatically');let lt=N(),mt=this.setValue(L[L.length-1].objectId,lt,V,!1,[]);return this.applyAtPath(L,Rt=>{Rt.props[lt]={[mt.objectId]:mt}}),lt}deleteTableRow(L,V,lt){let mt=L[L.length-1].objectId;this.getObject(mt).byId(V)&&(this.addOp({action:"del",obj:mt,key:V,insert:!1,pred:[lt]}),this.applyAtPath(L,Rt=>{Rt.props[V]={}}))}increment(L,V,lt){let mt=L.length===0?"_root":L[L.length-1].objectId,Rt=this.getObject(mt);if(!(Rt[V]instanceof D))throw new TypeError("Only counter values can be incremented");let Et=this.getObjectType(mt),vt=Rt[V].value+lt,wt=this.nextOpId(),Xt=it(Rt,V);if(Et==="list"||Et==="text"){let ee=q(Rt,V,!1);this.addOp({action:"inc",obj:mt,elemId:ee,value:lt,insert:!1,pred:Xt})}else this.addOp({action:"inc",obj:mt,key:V,value:lt,insert:!1,pred:Xt});this.applyAtPath(L,ee=>{Et==="list"||Et==="text"?ee.edits.push({action:"update",index:V,opId:wt,value:{value:vt,datatype:"counter"}}):ee.props[V]={[wt]:{value:vt,datatype:"counter"}}})}};function it(L,V){return L instanceof m?[L.opIds[V]]:L instanceof E?L.elems[V].pred:L[s]?L[s][V]?Object.keys(L[s][V]):[]:[]}function q(L,V,lt=!1){if(lt){if(V===0)return"_head";V-=1}if(L[p])return L[p][V];if(L.getElemId)return L.getElemId(V);throw new RangeError(`Cannot find elemId at list index ${V}`)}e.exports={Context:Q}}),XC=ce((t,e)=>{var{OBJECT_ID:n,CONFLICTS:u}=wu(),s=class{constructor(){this.observers={}}patchCallback(p,y,g,E,m){this._objectUpdate(p.diffs,y,g,E,m)}_objectUpdate(p,y,g,E,m){if(p.objectId){if(this.observers[p.objectId])for(let D of this.observers[p.objectId])D(p,y,g,E,m);if(p.type==="map"&&p.props)for(let D of Object.keys(p.props))for(let a of Object.keys(p.props[D]))this._objectUpdate(p.props[D][a],y&&y[u]&&y[u][D]&&y[u][D][a],g&&g[u]&&g[u][D]&&g[u][D][a],E,m);else if(p.type==="table"&&p.props)for(let D of Object.keys(p.props))for(let a of Object.keys(p.props[D]))this._objectUpdate(p.props[D][a],y&&y.byId(D),g&&g.byId(D),E,m);else if(p.type==="list"&&p.edits){let D=0;for(let a of p.edits)a.action==="insert"?(D-=1,this._objectUpdate(a.value,void 0,g&&g[u]&&g[u][a.index]&&g[u][a.index][a.elemId],E,m)):a.action==="multi-insert"?D-=a.values.length:a.action==="update"?this._objectUpdate(a.value,y&&y[u]&&y[u][a.index+D]&&y[u][a.index+D][a.opId],g&&g[u]&&g[u][a.index]&&g[u][a.index][a.opId],E,m):a.action==="remove"&&(D+=a.count)}else if(p.type==="text"&&p.edits){let D=0;for(let a of p.edits)a.action==="insert"?(D-=1,this._objectUpdate(a.value,void 0,g&&g.get(a.index),E,m)):a.action==="multi-insert"?D-=a.values.length:a.action==="update"?this._objectUpdate(a.value,y&&y.get(a.index+D),g&&g.get(a.index),E,m):a.action==="remove"&&(D+=a.count)}}}observe(p,y){let g=p[n];if(!g)throw new TypeError("The observed object must be part of an Automerge document");this.observers[g]||(this.observers[g]=[]),this.observers[g].push(y)}};e.exports={Observable:s}}),sD=ce((t,e)=>{var{OPTIONS:n,CACHE:u,STATE:s,OBJECT_ID:p,CONFLICTS:y,CHANGE:g,ELEM_IDS:E}=wu(),{isObject:m,copyObject:D}=Us(),a=z0(),{interpretPatch:H,cloneRootObject:W}=Qm(),{rootObjectProxy:w}=qC(),{Context:U}=YC(),{Text:tt}=Qf(),{Table:J}=th(),{Counter:N}=W0(),{Float64:Q,Int:it,Uint:q}=nv(),{Observable:L}=XC();function V(Ae){if(typeof Ae!="string")throw new TypeError(`Unsupported type of actorId: ${typeof Ae}`);if(!/^[0-9a-f]+$/.test(Ae))throw new RangeError("actorId must consist only of lowercase hex digits");if(Ae.length%2!==0)throw new RangeError("actorId must consist of an even number of digits")}function lt(Ae,_e,Qe){let qe=_e._root;if(qe||(qe=W(Ae[u]._root),_e._root=qe),Object.defineProperty(qe,n,{value:Ae[n]}),Object.defineProperty(qe,u,{value:_e}),Object.defineProperty(qe,s,{value:Qe}),Ae[n].freeze)for(let Ze of Object.keys(_e))_e[Ze]instanceof J?_e[Ze]._freeze():_e[Ze]instanceof tt?(Object.freeze(_e[Ze].elems),Object.freeze(_e[Ze])):(Object.freeze(_e[Ze]),Object.freeze(_e[Ze][y]));for(let Ze of Object.keys(Ae[u]))_e[Ze]||(_e[Ze]=Ae[u][Ze]);return Ae[n].freeze&&Object.freeze(_e),qe}function mt(Ae,_e,Qe){let qe=He(Ae);if(!qe)throw new Error("Actor ID must be initialized with setActorId() before making a change");let Ze=D(Ae[s]);Ze.seq+=1;let Ar={actor:qe,seq:Ze.seq,startOp:Ze.maxOp+1,deps:Ze.deps,time:Qe&&typeof Qe.time=="number"?Qe.time:Math.round(new Date().getTime()/1e3),message:Qe&&typeof Qe.message=="string"?Qe.message:"",ops:_e.ops};if(Ae[n].backend){let[Or,Cr,et]=Ae[n].backend.applyLocalChange(Ze.backendState,Ar);Ze.backendState=Or,Ze.lastLocalChange=et;let k=vt(Ae,Cr,Ze,!0),Z=Qe&&Qe.patchCallback||Ae[n].patchCallback;return Z&&Z(Cr,Ae,k,!0,[et]),[k,Ar]}else{let Or={actor:qe,seq:Ar.seq,before:Ae};return Ze.requests=Ze.requests.concat([Or]),Ze.maxOp=Ze.maxOp+Rt(Ar.ops),Ze.deps=[],[lt(Ae,_e?_e.updated:{},Ze),Ar]}}function Rt(Ae){let _e=0;for(let Qe of Ae)Qe.action==="set"&&Qe.values?_e+=Qe.values.length:_e+=1;return _e}function Et(Ae){return Ae[s]&&Ae[s].lastLocalChange?Ae[s].lastLocalChange:null}function vt(Ae,_e,Qe,qe){let Ze=He(Ae),Ar={};if(H(_e.diffs,Ae,Ar),qe){if(!_e.clock)throw new RangeError("patch is missing clock field");_e.clock[Ze]&&_e.clock[Ze]>Qe.seq&&(Qe.seq=_e.clock[Ze]),Qe.clock=_e.clock,Qe.deps=_e.deps,Qe.maxOp=Math.max(Qe.maxOp,_e.maxOp)}return lt(Ae,Ar,Qe)}function wt(Ae){if(typeof Ae=="string")Ae={actorId:Ae};else if(typeof Ae>"u")Ae={};else if(!m(Ae))throw new TypeError(`Unsupported value for init() options: ${Ae}`);if(Ae.deferActorId||(Ae.actorId===void 0&&(Ae.actorId=a()),V(Ae.actorId)),Ae.observable){let Ze=Ae.patchCallback,Ar=Ae.observable;Ae.patchCallback=(Or,Cr,et,k,Z)=>{Ze&&Ze(Or,Cr,et,k,Z),Ar.patchCallback(Or,Cr,et,k,Z)}}let _e={},Qe={_root:_e},qe={seq:0,maxOp:0,requests:[],clock:{},deps:[]};return Ae.backend&&(qe.backendState=Ae.backend.init(),qe.lastLocalChange=null),Object.defineProperty(_e,p,{value:"_root"}),Object.defineProperty(_e,n,{value:Object.freeze(Ae)}),Object.defineProperty(_e,y,{value:Object.freeze({})}),Object.defineProperty(_e,u,{value:Object.freeze(Qe)}),Object.defineProperty(_e,s,{value:Object.freeze(qe)}),Object.freeze(_e)}function Xt(Ae,_e){return ee(wt(_e),"Initialization",Qe=>Object.assign(Qe,Ae))}function ee(Ae,_e,Qe){if(Ae[p]!=="_root")throw new TypeError("The first argument to Automerge.change must be the document root");if(Ae[g])throw new TypeError("Calls to Automerge.change cannot be nested");if(typeof _e=="function"&&Qe===void 0&&([_e,Qe]=[Qe,_e]),typeof _e=="string"&&(_e={message:_e}),_e!==void 0&&!m(_e))throw new TypeError("Unsupported type of options");let qe=He(Ae);if(!qe)throw new Error("Actor ID must be initialized with setActorId() before making a change");let Ze=new U(Ae,qe);return Qe(w(Ze)),Object.keys(Ze.updated).length===0?[Ae,null]:mt(Ae,Ze,_e)}function ne(Ae,_e){if(Ae[p]!=="_root")throw new TypeError("The first argument to Automerge.emptyChange must be the document root");if(typeof _e=="string"&&(_e={message:_e}),_e!==void 0&&!m(_e))throw new TypeError("Unsupported type of options");let Qe=He(Ae);if(!Qe)throw new Error("Actor ID must be initialized with setActorId() before making a change");return mt(Ae,new U(Ae,Qe),_e)}function oe(Ae,_e,Qe=void 0){if(Ae[p]!=="_root")throw new TypeError("The first argument to Frontend.applyPatch must be the document root");let qe=D(Ae[s]);if(Ae[n].backend){if(!Qe)throw new RangeError("applyPatch must be called with the updated backend state");return qe.backendState=Qe,vt(Ae,_e,qe,!0)}let Ze;if(qe.requests.length>0)if(Ze=qe.requests[0].before,_e.actor===He(Ae)){if(qe.requests[0].seq!==_e.seq)throw new RangeError(`Mismatched sequence number: patch ${_e.seq} does not match next request ${qe.requests[0].seq}`);qe.requests=qe.requests.slice(1)}else qe.requests=qe.requests.slice();else Ze=Ae,qe.requests=[];let Ar=vt(Ze,_e,qe,!0);return qe.requests.length===0?Ar:(qe.requests[0]=D(qe.requests[0]),qe.requests[0].before=Ar,lt(Ae,{},qe))}function Le(Ae){return Ae[p]}function de(Ae,_e){if(Ae[g])throw new TypeError("Cannot use getObjectById in a change callback");return Ae[u][_e]}function He(Ae){return Ae[s].actorId||Ae[n].actorId}function ze(Ae,_e){V(_e);let Qe=Object.assign({},Ae[s],{actorId:_e});return lt(Ae,{},Qe)}function Te(Ae,_e){if(Ae[y]&&Ae[y][_e]&&Object.keys(Ae[y][_e]).length>1)return Ae[y][_e]}function Je(Ae,_e=null,Qe="first"){if(Ae[p]!=="_root"){let qe=Array.isArray(Ae)?". Note: Automerge.applyChanges now returns an array.":"";throw _e?new TypeError(`The ${Qe} argument to Automerge.${_e} must be the document root${qe}`):new TypeError(`Argument is not an Automerge document root${qe}`)}return Ae[s].backendState}function Xe(Ae){return Ae instanceof tt?Ae.elems.map(_e=>_e.elemId):Ae[E]}e.exports={init:wt,from:Xt,change:ee,emptyChange:ne,applyPatch:oe,getObjectId:Le,getObjectById:de,getActorId:He,setActorId:ze,getConflicts:Te,getLastLocalChange:Et,getBackendState:Je,getElementIds:Xe,Text:tt,Table:J,Counter:N,Observable:L,Float64:Q,Int:it,Uint:q}}),SD=ce((t,e)=>{"use strict";function n(f){let S=f.length;for(;--S>=0;)f[S]=0}var u=0,s=1,p=2,y=3,g=258,E=29,m=256,D=m+1+E,a=30,H=19,W=2*D+1,w=15,U=16,tt=7,J=256,N=16,Q=17,it=18,q=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),L=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),V=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),lt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),mt=512,Rt=new Array((D+2)*2);n(Rt);var Et=new Array(a*2);n(Et);var vt=new Array(mt);n(vt);var wt=new Array(g-y+1);n(wt);var Xt=new Array(E);n(Xt);var ee=new Array(a);n(ee);function ne(f,S,Y,It,Ot){this.static_tree=f,this.extra_bits=S,this.extra_base=Y,this.elems=It,this.max_length=Ot,this.has_stree=f&&f.length}var oe,Le,de;function He(f,S){this.dyn_tree=f,this.max_code=0,this.stat_desc=S}var ze=f=>f<256?vt[f]:vt[256+(f>>>7)],Te=(f,S)=>{f.pending_buf[f.pending++]=S&255,f.pending_buf[f.pending++]=S>>>8&255},Je=(f,S,Y)=>{f.bi_valid>U-Y?(f.bi_buf|=S<<f.bi_valid&65535,Te(f,f.bi_buf),f.bi_buf=S>>U-f.bi_valid,f.bi_valid+=Y-U):(f.bi_buf|=S<<f.bi_valid&65535,f.bi_valid+=Y)},Xe=(f,S,Y)=>{Je(f,Y[S*2],Y[S*2+1])},Ae=(f,S)=>{let Y=0;do Y|=f&1,f>>>=1,Y<<=1;while(--S>0);return Y>>>1},_e=f=>{f.bi_valid===16?(Te(f,f.bi_buf),f.bi_buf=0,f.bi_valid=0):f.bi_valid>=8&&(f.pending_buf[f.pending++]=f.bi_buf&255,f.bi_buf>>=8,f.bi_valid-=8)},Qe=(f,S)=>{let Y=S.dyn_tree,It=S.max_code,Ot=S.stat_desc.static_tree,nt=S.stat_desc.has_stree,zt=S.stat_desc.extra_bits,jt=S.stat_desc.extra_base,Se=S.stat_desc.max_length,_t,gt,rt,F,st,At,Dt=0;for(F=0;F<=w;F++)f.bl_count[F]=0;for(Y[f.heap[f.heap_max]*2+1]=0,_t=f.heap_max+1;_t<W;_t++)gt=f.heap[_t],F=Y[Y[gt*2+1]*2+1]+1,F>Se&&(F=Se,Dt++),Y[gt*2+1]=F,!(gt>It)&&(f.bl_count[F]++,st=0,gt>=jt&&(st=zt[gt-jt]),At=Y[gt*2],f.opt_len+=At*(F+st),nt&&(f.static_len+=At*(Ot[gt*2+1]+st)));if(Dt!==0){do{for(F=Se-1;f.bl_count[F]===0;)F--;f.bl_count[F]--,f.bl_count[F+1]+=2,f.bl_count[Se]--,Dt-=2}while(Dt>0);for(F=Se;F!==0;F--)for(gt=f.bl_count[F];gt!==0;)rt=f.heap[--_t],!(rt>It)&&(Y[rt*2+1]!==F&&(f.opt_len+=(F-Y[rt*2+1])*Y[rt*2],Y[rt*2+1]=F),gt--)}},qe=(f,S,Y)=>{let It=new Array(w+1),Ot=0,nt,zt;for(nt=1;nt<=w;nt++)Ot=Ot+Y[nt-1]<<1,It[nt]=Ot;for(zt=0;zt<=S;zt++){let jt=f[zt*2+1];jt!==0&&(f[zt*2]=Ae(It[jt]++,jt))}},Ze=()=>{let f,S,Y,It,Ot,nt=new Array(w+1);for(Y=0,It=0;It<E-1;It++)for(Xt[It]=Y,f=0;f<1<<q[It];f++)wt[Y++]=It;for(wt[Y-1]=It,Ot=0,It=0;It<16;It++)for(ee[It]=Ot,f=0;f<1<<L[It];f++)vt[Ot++]=It;for(Ot>>=7;It<a;It++)for(ee[It]=Ot<<7,f=0;f<1<<L[It]-7;f++)vt[256+Ot++]=It;for(S=0;S<=w;S++)nt[S]=0;for(f=0;f<=143;)Rt[f*2+1]=8,f++,nt[8]++;for(;f<=255;)Rt[f*2+1]=9,f++,nt[9]++;for(;f<=279;)Rt[f*2+1]=7,f++,nt[7]++;for(;f<=287;)Rt[f*2+1]=8,f++,nt[8]++;for(qe(Rt,D+1,nt),f=0;f<a;f++)Et[f*2+1]=5,Et[f*2]=Ae(f,5);oe=new ne(Rt,q,m+1,D,w),Le=new ne(Et,L,0,a,w),de=new ne(new Array(0),V,0,H,tt)},Ar=f=>{let S;for(S=0;S<D;S++)f.dyn_ltree[S*2]=0;for(S=0;S<a;S++)f.dyn_dtree[S*2]=0;for(S=0;S<H;S++)f.bl_tree[S*2]=0;f.dyn_ltree[J*2]=1,f.opt_len=f.static_len=0,f.sym_next=f.matches=0},Or=f=>{f.bi_valid>8?Te(f,f.bi_buf):f.bi_valid>0&&(f.pending_buf[f.pending++]=f.bi_buf),f.bi_buf=0,f.bi_valid=0},Cr=(f,S,Y,It)=>{let Ot=S*2,nt=Y*2;return f[Ot]<f[nt]||f[Ot]===f[nt]&&It[S]<=It[Y]},et=(f,S,Y)=>{let It=f.heap[Y],Ot=Y<<1;for(;Ot<=f.heap_len&&(Ot<f.heap_len&&Cr(S,f.heap[Ot+1],f.heap[Ot],f.depth)&&Ot++,!Cr(S,It,f.heap[Ot],f.depth));)f.heap[Y]=f.heap[Ot],Y=Ot,Ot<<=1;f.heap[Y]=It},k=(f,S,Y)=>{let It,Ot,nt=0,zt,jt;if(f.sym_next!==0)do It=f.pending_buf[f.sym_buf+nt++]&255,It+=(f.pending_buf[f.sym_buf+nt++]&255)<<8,Ot=f.pending_buf[f.sym_buf+nt++],It===0?Xe(f,Ot,S):(zt=wt[Ot],Xe(f,zt+m+1,S),jt=q[zt],jt!==0&&(Ot-=Xt[zt],Je(f,Ot,jt)),It--,zt=ze(It),Xe(f,zt,Y),jt=L[zt],jt!==0&&(It-=ee[zt],Je(f,It,jt)));while(nt<f.sym_next);Xe(f,J,S)},Z=(f,S)=>{let Y=S.dyn_tree,It=S.stat_desc.static_tree,Ot=S.stat_desc.has_stree,nt=S.stat_desc.elems,zt,jt,Se=-1,_t;for(f.heap_len=0,f.heap_max=W,zt=0;zt<nt;zt++)Y[zt*2]!==0?(f.heap[++f.heap_len]=Se=zt,f.depth[zt]=0):Y[zt*2+1]=0;for(;f.heap_len<2;)_t=f.heap[++f.heap_len]=Se<2?++Se:0,Y[_t*2]=1,f.depth[_t]=0,f.opt_len--,Ot&&(f.static_len-=It[_t*2+1]);for(S.max_code=Se,zt=f.heap_len>>1;zt>=1;zt--)et(f,Y,zt);_t=nt;do zt=f.heap[1],f.heap[1]=f.heap[f.heap_len--],et(f,Y,1),jt=f.heap[1],f.heap[--f.heap_max]=zt,f.heap[--f.heap_max]=jt,Y[_t*2]=Y[zt*2]+Y[jt*2],f.depth[_t]=(f.depth[zt]>=f.depth[jt]?f.depth[zt]:f.depth[jt])+1,Y[zt*2+1]=Y[jt*2+1]=_t,f.heap[1]=_t++,et(f,Y,1);while(f.heap_len>=2);f.heap[--f.heap_max]=f.heap[1],Qe(f,S),qe(Y,Se,f.bl_count)},se=(f,S,Y)=>{let It,Ot=-1,nt,zt=S[1],jt=0,Se=7,_t=4;for(zt===0&&(Se=138,_t=3),S[(Y+1)*2+1]=65535,It=0;It<=Y;It++)nt=zt,zt=S[(It+1)*2+1],!(++jt<Se&&nt===zt)&&(jt<_t?f.bl_tree[nt*2]+=jt:nt!==0?(nt!==Ot&&f.bl_tree[nt*2]++,f.bl_tree[N*2]++):jt<=10?f.bl_tree[Q*2]++:f.bl_tree[it*2]++,jt=0,Ot=nt,zt===0?(Se=138,_t=3):nt===zt?(Se=6,_t=3):(Se=7,_t=4))},me=(f,S,Y)=>{let It,Ot=-1,nt,zt=S[1],jt=0,Se=7,_t=4;for(zt===0&&(Se=138,_t=3),It=0;It<=Y;It++)if(nt=zt,zt=S[(It+1)*2+1],!(++jt<Se&&nt===zt)){if(jt<_t)do Xe(f,nt,f.bl_tree);while(--jt!==0);else nt!==0?(nt!==Ot&&(Xe(f,nt,f.bl_tree),jt--),Xe(f,N,f.bl_tree),Je(f,jt-3,2)):jt<=10?(Xe(f,Q,f.bl_tree),Je(f,jt-3,3)):(Xe(f,it,f.bl_tree),Je(f,jt-11,7));jt=0,Ot=nt,zt===0?(Se=138,_t=3):nt===zt?(Se=6,_t=3):(Se=7,_t=4)}},rr=f=>{let S;for(se(f,f.dyn_ltree,f.l_desc.max_code),se(f,f.dyn_dtree,f.d_desc.max_code),Z(f,f.bl_desc),S=H-1;S>=3&&f.bl_tree[lt[S]*2+1]===0;S--);return f.opt_len+=3*(S+1)+5+5+4,S},dr=(f,S,Y,It)=>{let Ot;for(Je(f,S-257,5),Je(f,Y-1,5),Je(f,It-4,4),Ot=0;Ot<It;Ot++)Je(f,f.bl_tree[lt[Ot]*2+1],3);me(f,f.dyn_ltree,S-1),me(f,f.dyn_dtree,Y-1)},mr=f=>{let S=4093624447,Y;for(Y=0;Y<=31;Y++,S>>>=1)if(S&1&&f.dyn_ltree[Y*2]!==0)return 0;if(f.dyn_ltree[18]!==0||f.dyn_ltree[20]!==0||f.dyn_ltree[26]!==0)return 1;for(Y=32;Y<m;Y++)if(f.dyn_ltree[Y*2]!==0)return 1;return 0},ur=!1,er=f=>{ur||(Ze(),ur=!0),f.l_desc=new He(f.dyn_ltree,oe),f.d_desc=new He(f.dyn_dtree,Le),f.bl_desc=new He(f.bl_tree,de),f.bi_buf=0,f.bi_valid=0,Ar(f)},Gr=(f,S,Y,It)=>{Je(f,(u<<1)+(It?1:0),3),Or(f),Te(f,Y),Te(f,~Y),Y&&f.pending_buf.set(f.window.subarray(S,S+Y),f.pending),f.pending+=Y},Lr=f=>{Je(f,s<<1,3),Xe(f,J,Rt),_e(f)},Sr=(f,S,Y,It)=>{let Ot,nt,zt=0;f.level>0?(f.strm.data_type===2&&(f.strm.data_type=mr(f)),Z(f,f.l_desc),Z(f,f.d_desc),zt=rr(f),Ot=f.opt_len+3+7>>>3,nt=f.static_len+3+7>>>3,nt<=Ot&&(Ot=nt)):Ot=nt=Y+5,Y+4<=Ot&&S!==-1?Gr(f,S,Y,It):f.strategy===4||nt===Ot?(Je(f,(s<<1)+(It?1:0),3),k(f,Rt,Et)):(Je(f,(p<<1)+(It?1:0),3),dr(f,f.l_desc.max_code+1,f.d_desc.max_code+1,zt+1),k(f,f.dyn_ltree,f.dyn_dtree)),Ar(f),It&&Or(f)},j=(f,S,Y)=>(f.pending_buf[f.sym_buf+f.sym_next++]=S,f.pending_buf[f.sym_buf+f.sym_next++]=S>>8,f.pending_buf[f.sym_buf+f.sym_next++]=Y,S===0?f.dyn_ltree[Y*2]++:(f.matches++,S--,f.dyn_ltree[(wt[Y]+m+1)*2]++,f.dyn_dtree[ze(S)*2]++),f.sym_next===f.sym_end);e.exports._tr_init=er,e.exports._tr_stored_block=Gr,e.exports._tr_flush_block=Sr,e.exports._tr_tally=j,e.exports._tr_align=Lr}),_v=ce((t,e)=>{"use strict";var n=(u,s,p,y)=>{let g=u&65535|0,E=u>>>16&65535|0,m=0;for(;p!==0;){m=p>2e3?2e3:p,p-=m;do g=g+s[y++]|0,E=E+g|0;while(--m);g%=65521,E%=65521}return g|E<<16|0};e.exports=n}),Cv=ce((t,e)=>{"use strict";var n=()=>{let p,y=[];for(var g=0;g<256;g++){p=g;for(var E=0;E<8;E++)p=p&1?3988292384^p>>>1:p>>>1;y[g]=p}return y},u=new Uint32Array(n()),s=(p,y,g,E)=>{let m=u,D=E+g;p^=-1;for(let a=E;a<D;a++)p=p>>>8^m[(p^y[a])&255];return p^-1};e.exports=s}),ip=ce((t,e)=>{"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}}),no=ce((t,e)=>{"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}}),jD=ce((t,e)=>{"use strict";var{_tr_init:n,_tr_stored_block:u,_tr_flush_block:s,_tr_tally:p,_tr_align:y}=SD(),g=_v(),E=Cv(),m=ip(),{Z_NO_FLUSH:D,Z_PARTIAL_FLUSH:a,Z_FULL_FLUSH:H,Z_FINISH:W,Z_BLOCK:w,Z_OK:U,Z_STREAM_END:tt,Z_STREAM_ERROR:J,Z_DATA_ERROR:N,Z_BUF_ERROR:Q,Z_DEFAULT_COMPRESSION:it,Z_FILTERED:q,Z_HUFFMAN_ONLY:L,Z_RLE:V,Z_FIXED:lt,Z_DEFAULT_STRATEGY:mt,Z_UNKNOWN:Rt,Z_DEFLATED:Et}=no(),vt=9,wt=15,Xt=8,ee=29,ne=256,oe=ne+1+ee,Le=30,de=19,He=2*oe+1,ze=15,Te=3,Je=258,Xe=Je+Te+1,Ae=32,_e=42,Qe=57,qe=69,Ze=73,Ar=91,Or=103,Cr=113,et=666,k=1,Z=2,se=3,me=4,rr=3,dr=(P,le)=>(P.msg=m[le],le),mr=P=>P*2-(P>4?9:0),ur=P=>{let le=P.length;for(;--le>=0;)P[le]=0},er=P=>{let le,Vt,pe,kt=P.w_size;le=P.hash_size,pe=le;do Vt=P.head[--pe],P.head[pe]=Vt>=kt?Vt-kt:0;while(--le);le=kt,pe=le;do Vt=P.prev[--pe],P.prev[pe]=Vt>=kt?Vt-kt:0;while(--le)},Gr=(P,le,Vt)=>(le<<P.hash_shift^Vt)&P.hash_mask,Lr=Gr,Sr=P=>{let le=P.state,Vt=le.pending;Vt>P.avail_out&&(Vt=P.avail_out),Vt!==0&&(P.output.set(le.pending_buf.subarray(le.pending_out,le.pending_out+Vt),P.next_out),P.next_out+=Vt,le.pending_out+=Vt,P.total_out+=Vt,P.avail_out-=Vt,le.pending-=Vt,le.pending===0&&(le.pending_out=0))},j=(P,le)=>{s(P,P.block_start>=0?P.block_start:-1,P.strstart-P.block_start,le),P.block_start=P.strstart,Sr(P.strm)},f=(P,le)=>{P.pending_buf[P.pending++]=le},S=(P,le)=>{P.pending_buf[P.pending++]=le>>>8&255,P.pending_buf[P.pending++]=le&255},Y=(P,le,Vt,pe)=>{let kt=P.avail_in;return kt>pe&&(kt=pe),kt===0?0:(P.avail_in-=kt,le.set(P.input.subarray(P.next_in,P.next_in+kt),Vt),P.state.wrap===1?P.adler=g(P.adler,le,kt,Vt):P.state.wrap===2&&(P.adler=E(P.adler,le,kt,Vt)),P.next_in+=kt,P.total_in+=kt,kt)},It=(P,le)=>{let Vt=P.max_chain_length,pe=P.strstart,kt,re,$e=P.prev_length,Ce=P.nice_match,Pe=P.strstart>P.w_size-Xe?P.strstart-(P.w_size-Xe):0,Ne=P.window,tr=P.w_mask,lr=P.prev,ar=P.strstart+Je,wr=Ne[pe+$e-1],jr=Ne[pe+$e];P.prev_length>=P.good_match&&(Vt>>=2),Ce>P.lookahead&&(Ce=P.lookahead);do if(kt=le,!(Ne[kt+$e]!==jr||Ne[kt+$e-1]!==wr||Ne[kt]!==Ne[pe]||Ne[++kt]!==Ne[pe+1])){pe+=2,kt++;do;while(Ne[++pe]===Ne[++kt]&&Ne[++pe]===Ne[++kt]&&Ne[++pe]===Ne[++kt]&&Ne[++pe]===Ne[++kt]&&Ne[++pe]===Ne[++kt]&&Ne[++pe]===Ne[++kt]&&Ne[++pe]===Ne[++kt]&&Ne[++pe]===Ne[++kt]&&pe<ar);if(re=Je-(ar-pe),pe=ar-Je,re>$e){if(P.match_start=le,$e=re,re>=Ce)break;wr=Ne[pe+$e-1],jr=Ne[pe+$e]}}while((le=lr[le&tr])>Pe&&--Vt!==0);return $e<=P.lookahead?$e:P.lookahead},Ot=P=>{let le=P.w_size,Vt,pe,kt;do{if(pe=P.window_size-P.lookahead-P.strstart,P.strstart>=le+(le-Xe)&&(P.window.set(P.window.subarray(le,le+le-pe),0),P.match_start-=le,P.strstart-=le,P.block_start-=le,P.insert>P.strstart&&(P.insert=P.strstart),er(P),pe+=le),P.strm.avail_in===0)break;if(Vt=Y(P.strm,P.window,P.strstart+P.lookahead,pe),P.lookahead+=Vt,P.lookahead+P.insert>=Te)for(kt=P.strstart-P.insert,P.ins_h=P.window[kt],P.ins_h=Lr(P,P.ins_h,P.window[kt+1]);P.insert&&(P.ins_h=Lr(P,P.ins_h,P.window[kt+Te-1]),P.prev[kt&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=kt,kt++,P.insert--,!(P.lookahead+P.insert<Te)););}while(P.lookahead<Xe&&P.strm.avail_in!==0)},nt=(P,le)=>{let Vt=P.pending_buf_size-5>P.w_size?P.w_size:P.pending_buf_size-5,pe,kt,re,$e=0,Ce=P.strm.avail_in;do{if(pe=65535,re=P.bi_valid+42>>3,P.strm.avail_out<re||(re=P.strm.avail_out-re,kt=P.strstart-P.block_start,pe>kt+P.strm.avail_in&&(pe=kt+P.strm.avail_in),pe>re&&(pe=re),pe<Vt&&(pe===0&&le!==W||le===D||pe!==kt+P.strm.avail_in)))break;$e=le===W&&pe===kt+P.strm.avail_in?1:0,u(P,0,0,$e),P.pending_buf[P.pending-4]=pe,P.pending_buf[P.pending-3]=pe>>8,P.pending_buf[P.pending-2]=~pe,P.pending_buf[P.pending-1]=~pe>>8,Sr(P.strm),kt&&(kt>pe&&(kt=pe),P.strm.output.set(P.window.subarray(P.block_start,P.block_start+kt),P.strm.next_out),P.strm.next_out+=kt,P.strm.avail_out-=kt,P.strm.total_out+=kt,P.block_start+=kt,pe-=kt),pe&&(Y(P.strm,P.strm.output,P.strm.next_out,pe),P.strm.next_out+=pe,P.strm.avail_out-=pe,P.strm.total_out+=pe)}while($e===0);return Ce-=P.strm.avail_in,Ce&&(Ce>=P.w_size?(P.matches=2,P.window.set(P.strm.input.subarray(P.strm.next_in-P.w_size,P.strm.next_in),0),P.strstart=P.w_size,P.insert=P.strstart):(P.window_size-P.strstart<=Ce&&(P.strstart-=P.w_size,P.window.set(P.window.subarray(P.w_size,P.w_size+P.strstart),0),P.matches<2&&P.matches++,P.insert>P.strstart&&(P.insert=P.strstart)),P.window.set(P.strm.input.subarray(P.strm.next_in-Ce,P.strm.next_in),P.strstart),P.strstart+=Ce,P.insert+=Ce>P.w_size-P.insert?P.w_size-P.insert:Ce),P.block_start=P.strstart),P.high_water<P.strstart&&(P.high_water=P.strstart),$e?me:le!==D&&le!==W&&P.strm.avail_in===0&&P.strstart===P.block_start?Z:(re=P.window_size-P.strstart,P.strm.avail_in>re&&P.block_start>=P.w_size&&(P.block_start-=P.w_size,P.strstart-=P.w_size,P.window.set(P.window.subarray(P.w_size,P.w_size+P.strstart),0),P.matches<2&&P.matches++,re+=P.w_size,P.insert>P.strstart&&(P.insert=P.strstart)),re>P.strm.avail_in&&(re=P.strm.avail_in),re&&(Y(P.strm,P.window,P.strstart,re),P.strstart+=re,P.insert+=re>P.w_size-P.insert?P.w_size-P.insert:re),P.high_water<P.strstart&&(P.high_water=P.strstart),re=P.bi_valid+42>>3,re=P.pending_buf_size-re>65535?65535:P.pending_buf_size-re,Vt=re>P.w_size?P.w_size:re,kt=P.strstart-P.block_start,(kt>=Vt||(kt||le===W)&&le!==D&&P.strm.avail_in===0&&kt<=re)&&(pe=kt>re?re:kt,$e=le===W&&P.strm.avail_in===0&&pe===kt?1:0,u(P,P.block_start,pe,$e),P.block_start+=pe,Sr(P.strm)),$e?se:k)},zt=(P,le)=>{let Vt,pe;for(;;){if(P.lookahead<Xe){if(Ot(P),P.lookahead<Xe&&le===D)return k;if(P.lookahead===0)break}if(Vt=0,P.lookahead>=Te&&(P.ins_h=Lr(P,P.ins_h,P.window[P.strstart+Te-1]),Vt=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),Vt!==0&&P.strstart-Vt<=P.w_size-Xe&&(P.match_length=It(P,Vt)),P.match_length>=Te)if(pe=p(P,P.strstart-P.match_start,P.match_length-Te),P.lookahead-=P.match_length,P.match_length<=P.max_lazy_match&&P.lookahead>=Te){P.match_length--;do P.strstart++,P.ins_h=Lr(P,P.ins_h,P.window[P.strstart+Te-1]),Vt=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart;while(--P.match_length!==0);P.strstart++}else P.strstart+=P.match_length,P.match_length=0,P.ins_h=P.window[P.strstart],P.ins_h=Lr(P,P.ins_h,P.window[P.strstart+1]);else pe=p(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++;if(pe&&(j(P,!1),P.strm.avail_out===0))return k}return P.insert=P.strstart<Te-1?P.strstart:Te-1,le===W?(j(P,!0),P.strm.avail_out===0?se:me):P.sym_next&&(j(P,!1),P.strm.avail_out===0)?k:Z},jt=(P,le)=>{let Vt,pe,kt;for(;;){if(P.lookahead<Xe){if(Ot(P),P.lookahead<Xe&&le===D)return k;if(P.lookahead===0)break}if(Vt=0,P.lookahead>=Te&&(P.ins_h=Lr(P,P.ins_h,P.window[P.strstart+Te-1]),Vt=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),P.prev_length=P.match_length,P.prev_match=P.match_start,P.match_length=Te-1,Vt!==0&&P.prev_length<P.max_lazy_match&&P.strstart-Vt<=P.w_size-Xe&&(P.match_length=It(P,Vt),P.match_length<=5&&(P.strategy===q||P.match_length===Te&&P.strstart-P.match_start>4096)&&(P.match_length=Te-1)),P.prev_length>=Te&&P.match_length<=P.prev_length){kt=P.strstart+P.lookahead-Te,pe=p(P,P.strstart-1-P.prev_match,P.prev_length-Te),P.lookahead-=P.prev_length-1,P.prev_length-=2;do++P.strstart<=kt&&(P.ins_h=Lr(P,P.ins_h,P.window[P.strstart+Te-1]),Vt=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart);while(--P.prev_length!==0);if(P.match_available=0,P.match_length=Te-1,P.strstart++,pe&&(j(P,!1),P.strm.avail_out===0))return k}else if(P.match_available){if(pe=p(P,0,P.window[P.strstart-1]),pe&&j(P,!1),P.strstart++,P.lookahead--,P.strm.avail_out===0)return k}else P.match_available=1,P.strstart++,P.lookahead--}return P.match_available&&(pe=p(P,0,P.window[P.strstart-1]),P.match_available=0),P.insert=P.strstart<Te-1?P.strstart:Te-1,le===W?(j(P,!0),P.strm.avail_out===0?se:me):P.sym_next&&(j(P,!1),P.strm.avail_out===0)?k:Z},Se=(P,le)=>{let Vt,pe,kt,re,$e=P.window;for(;;){if(P.lookahead<=Je){if(Ot(P),P.lookahead<=Je&&le===D)return k;if(P.lookahead===0)break}if(P.match_length=0,P.lookahead>=Te&&P.strstart>0&&(kt=P.strstart-1,pe=$e[kt],pe===$e[++kt]&&pe===$e[++kt]&&pe===$e[++kt])){re=P.strstart+Je;do;while(pe===$e[++kt]&&pe===$e[++kt]&&pe===$e[++kt]&&pe===$e[++kt]&&pe===$e[++kt]&&pe===$e[++kt]&&pe===$e[++kt]&&pe===$e[++kt]&&kt<re);P.match_length=Je-(re-kt),P.match_length>P.lookahead&&(P.match_length=P.lookahead)}if(P.match_length>=Te?(Vt=p(P,1,P.match_length-Te),P.lookahead-=P.match_length,P.strstart+=P.match_length,P.match_length=0):(Vt=p(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++),Vt&&(j(P,!1),P.strm.avail_out===0))return k}return P.insert=0,le===W?(j(P,!0),P.strm.avail_out===0?se:me):P.sym_next&&(j(P,!1),P.strm.avail_out===0)?k:Z},_t=(P,le)=>{let Vt;for(;;){if(P.lookahead===0&&(Ot(P),P.lookahead===0)){if(le===D)return k;break}if(P.match_length=0,Vt=p(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++,Vt&&(j(P,!1),P.strm.avail_out===0))return k}return P.insert=0,le===W?(j(P,!0),P.strm.avail_out===0?se:me):P.sym_next&&(j(P,!1),P.strm.avail_out===0)?k:Z};function gt(P,le,Vt,pe,kt){this.good_length=P,this.max_lazy=le,this.nice_length=Vt,this.max_chain=pe,this.func=kt}var rt=[new gt(0,0,0,0,nt),new gt(4,4,8,4,zt),new gt(4,5,16,8,zt),new gt(4,6,32,32,zt),new gt(4,4,16,16,jt),new gt(8,16,32,32,jt),new gt(8,16,128,128,jt),new gt(8,32,128,256,jt),new gt(32,128,258,1024,jt),new gt(32,258,258,4096,jt)],F=P=>{P.window_size=2*P.w_size,ur(P.head),P.max_lazy_match=rt[P.level].max_lazy,P.good_match=rt[P.level].good_length,P.nice_match=rt[P.level].nice_length,P.max_chain_length=rt[P.level].max_chain,P.strstart=0,P.block_start=0,P.lookahead=0,P.insert=0,P.match_length=P.prev_length=Te-1,P.match_available=0,P.ins_h=0};function st(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Et,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(He*2),this.dyn_dtree=new Uint16Array((2*Le+1)*2),this.bl_tree=new Uint16Array((2*de+1)*2),ur(this.dyn_ltree),ur(this.dyn_dtree),ur(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(ze+1),this.heap=new Uint16Array(2*oe+1),ur(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*oe+1),ur(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var At=P=>{if(!P)return 1;let le=P.state;return!le||le.strm!==P||le.status!==_e&&le.status!==Qe&&le.status!==qe&&le.status!==Ze&&le.status!==Ar&&le.status!==Or&&le.status!==Cr&&le.status!==et?1:0},Dt=P=>{if(At(P))return dr(P,J);P.total_in=P.total_out=0,P.data_type=Rt;let le=P.state;return le.pending=0,le.pending_out=0,le.wrap<0&&(le.wrap=-le.wrap),le.status=le.wrap===2?Qe:le.wrap?_e:Cr,P.adler=le.wrap===2?0:1,le.last_flush=-2,n(le),U},Nt=P=>{let le=Dt(P);return le===U&&F(P.state),le},Yt=(P,le)=>At(P)||P.state.wrap!==2?J:(P.state.gzhead=le,U),De=(P,le,Vt,pe,kt,re)=>{if(!P)return J;let $e=1;if(le===it&&(le=6),pe<0?($e=0,pe=-pe):pe>15&&($e=2,pe-=16),kt<1||kt>vt||Vt!==Et||pe<8||pe>15||le<0||le>9||re<0||re>lt||pe===8&&$e!==1)return dr(P,J);pe===8&&(pe=9);let Ce=new st;return P.state=Ce,Ce.strm=P,Ce.status=_e,Ce.wrap=$e,Ce.gzhead=null,Ce.w_bits=pe,Ce.w_size=1<<Ce.w_bits,Ce.w_mask=Ce.w_size-1,Ce.hash_bits=kt+7,Ce.hash_size=1<<Ce.hash_bits,Ce.hash_mask=Ce.hash_size-1,Ce.hash_shift=~~((Ce.hash_bits+Te-1)/Te),Ce.window=new Uint8Array(Ce.w_size*2),Ce.head=new Uint16Array(Ce.hash_size),Ce.prev=new Uint16Array(Ce.w_size),Ce.lit_bufsize=1<<kt+6,Ce.pending_buf_size=Ce.lit_bufsize*4,Ce.pending_buf=new Uint8Array(Ce.pending_buf_size),Ce.sym_buf=Ce.lit_bufsize,Ce.sym_end=(Ce.lit_bufsize-1)*3,Ce.level=le,Ce.strategy=re,Ce.method=Vt,Nt(P)},Qt=(P,le)=>De(P,le,Et,wt,Xt,mt),Ee=(P,le)=>{if(At(P)||le>w||le<0)return P?dr(P,J):J;let Vt=P.state;if(!P.output||P.avail_in!==0&&!P.input||Vt.status===et&&le!==W)return dr(P,P.avail_out===0?Q:J);let pe=Vt.last_flush;if(Vt.last_flush=le,Vt.pending!==0){if(Sr(P),P.avail_out===0)return Vt.last_flush=-1,U}else if(P.avail_in===0&&mr(le)<=mr(pe)&&le!==W)return dr(P,Q);if(Vt.status===et&&P.avail_in!==0)return dr(P,Q);if(Vt.status===_e&&Vt.wrap===0&&(Vt.status=Cr),Vt.status===_e){let kt=Et+(Vt.w_bits-8<<4)<<8,re=-1;if(Vt.strategy>=L||Vt.level<2?re=0:Vt.level<6?re=1:Vt.level===6?re=2:re=3,kt|=re<<6,Vt.strstart!==0&&(kt|=Ae),kt+=31-kt%31,S(Vt,kt),Vt.strstart!==0&&(S(Vt,P.adler>>>16),S(Vt,P.adler&65535)),P.adler=1,Vt.status=Cr,Sr(P),Vt.pending!==0)return Vt.last_flush=-1,U}if(Vt.status===Qe){if(P.adler=0,f(Vt,31),f(Vt,139),f(Vt,8),Vt.gzhead)f(Vt,(Vt.gzhead.text?1:0)+(Vt.gzhead.hcrc?2:0)+(Vt.gzhead.extra?4:0)+(Vt.gzhead.name?8:0)+(Vt.gzhead.comment?16:0)),f(Vt,Vt.gzhead.time&255),f(Vt,Vt.gzhead.time>>8&255),f(Vt,Vt.gzhead.time>>16&255),f(Vt,Vt.gzhead.time>>24&255),f(Vt,Vt.level===9?2:Vt.strategy>=L||Vt.level<2?4:0),f(Vt,Vt.gzhead.os&255),Vt.gzhead.extra&&Vt.gzhead.extra.length&&(f(Vt,Vt.gzhead.extra.length&255),f(Vt,Vt.gzhead.extra.length>>8&255)),Vt.gzhead.hcrc&&(P.adler=E(P.adler,Vt.pending_buf,Vt.pending,0)),Vt.gzindex=0,Vt.status=qe;else if(f(Vt,0),f(Vt,0),f(Vt,0),f(Vt,0),f(Vt,0),f(Vt,Vt.level===9?2:Vt.strategy>=L||Vt.level<2?4:0),f(Vt,rr),Vt.status=Cr,Sr(P),Vt.pending!==0)return Vt.last_flush=-1,U}if(Vt.status===qe){if(Vt.gzhead.extra){let kt=Vt.pending,re=(Vt.gzhead.extra.length&65535)-Vt.gzindex;for(;Vt.pending+re>Vt.pending_buf_size;){let Ce=Vt.pending_buf_size-Vt.pending;if(Vt.pending_buf.set(Vt.gzhead.extra.subarray(Vt.gzindex,Vt.gzindex+Ce),Vt.pending),Vt.pending=Vt.pending_buf_size,Vt.gzhead.hcrc&&Vt.pending>kt&&(P.adler=E(P.adler,Vt.pending_buf,Vt.pending-kt,kt)),Vt.gzindex+=Ce,Sr(P),Vt.pending!==0)return Vt.last_flush=-1,U;kt=0,re-=Ce}let $e=new Uint8Array(Vt.gzhead.extra);Vt.pending_buf.set($e.subarray(Vt.gzindex,Vt.gzindex+re),Vt.pending),Vt.pending+=re,Vt.gzhead.hcrc&&Vt.pending>kt&&(P.adler=E(P.adler,Vt.pending_buf,Vt.pending-kt,kt)),Vt.gzindex=0}Vt.status=Ze}if(Vt.status===Ze){if(Vt.gzhead.name){let kt=Vt.pending,re;do{if(Vt.pending===Vt.pending_buf_size){if(Vt.gzhead.hcrc&&Vt.pending>kt&&(P.adler=E(P.adler,Vt.pending_buf,Vt.pending-kt,kt)),Sr(P),Vt.pending!==0)return Vt.last_flush=-1,U;kt=0}Vt.gzindex<Vt.gzhead.name.length?re=Vt.gzhead.name.charCodeAt(Vt.gzindex++)&255:re=0,f(Vt,re)}while(re!==0);Vt.gzhead.hcrc&&Vt.pending>kt&&(P.adler=E(P.adler,Vt.pending_buf,Vt.pending-kt,kt)),Vt.gzindex=0}Vt.status=Ar}if(Vt.status===Ar){if(Vt.gzhead.comment){let kt=Vt.pending,re;do{if(Vt.pending===Vt.pending_buf_size){if(Vt.gzhead.hcrc&&Vt.pending>kt&&(P.adler=E(P.adler,Vt.pending_buf,Vt.pending-kt,kt)),Sr(P),Vt.pending!==0)return Vt.last_flush=-1,U;kt=0}Vt.gzindex<Vt.gzhead.comment.length?re=Vt.gzhead.comment.charCodeAt(Vt.gzindex++)&255:re=0,f(Vt,re)}while(re!==0);Vt.gzhead.hcrc&&Vt.pending>kt&&(P.adler=E(P.adler,Vt.pending_buf,Vt.pending-kt,kt))}Vt.status=Or}if(Vt.status===Or){if(Vt.gzhead.hcrc){if(Vt.pending+2>Vt.pending_buf_size&&(Sr(P),Vt.pending!==0))return Vt.last_flush=-1,U;f(Vt,P.adler&255),f(Vt,P.adler>>8&255),P.adler=0}if(Vt.status=Cr,Sr(P),Vt.pending!==0)return Vt.last_flush=-1,U}if(P.avail_in!==0||Vt.lookahead!==0||le!==D&&Vt.status!==et){let kt=Vt.level===0?nt(Vt,le):Vt.strategy===L?_t(Vt,le):Vt.strategy===V?Se(Vt,le):rt[Vt.level].func(Vt,le);if((kt===se||kt===me)&&(Vt.status=et),kt===k||kt===se)return P.avail_out===0&&(Vt.last_flush=-1),U;if(kt===Z&&(le===a?y(Vt):le!==w&&(u(Vt,0,0,!1),le===H&&(ur(Vt.head),Vt.lookahead===0&&(Vt.strstart=0,Vt.block_start=0,Vt.insert=0))),Sr(P),P.avail_out===0))return Vt.last_flush=-1,U}return le!==W?U:Vt.wrap<=0?tt:(Vt.wrap===2?(f(Vt,P.adler&255),f(Vt,P.adler>>8&255),f(Vt,P.adler>>16&255),f(Vt,P.adler>>24&255),f(Vt,P.total_in&255),f(Vt,P.total_in>>8&255),f(Vt,P.total_in>>16&255),f(Vt,P.total_in>>24&255)):(S(Vt,P.adler>>>16),S(Vt,P.adler&65535)),Sr(P),Vt.wrap>0&&(Vt.wrap=-Vt.wrap),Vt.pending!==0?U:tt)},Be=P=>{if(At(P))return J;let le=P.state.status;return P.state=null,le===Cr?dr(P,N):U},sr=(P,le)=>{let Vt=le.length;if(At(P))return J;let pe=P.state,kt=pe.wrap;if(kt===2||kt===1&&pe.status!==_e||pe.lookahead)return J;if(kt===1&&(P.adler=g(P.adler,le,Vt,0)),pe.wrap=0,Vt>=pe.w_size){kt===0&&(ur(pe.head),pe.strstart=0,pe.block_start=0,pe.insert=0);let Pe=new Uint8Array(pe.w_size);Pe.set(le.subarray(Vt-pe.w_size,Vt),0),le=Pe,Vt=pe.w_size}let re=P.avail_in,$e=P.next_in,Ce=P.input;for(P.avail_in=Vt,P.next_in=0,P.input=le,Ot(pe);pe.lookahead>=Te;){let Pe=pe.strstart,Ne=pe.lookahead-(Te-1);do pe.ins_h=Lr(pe,pe.ins_h,pe.window[Pe+Te-1]),pe.prev[Pe&pe.w_mask]=pe.head[pe.ins_h],pe.head[pe.ins_h]=Pe,Pe++;while(--Ne);pe.strstart=Pe,pe.lookahead=Te-1,Ot(pe)}return pe.strstart+=pe.lookahead,pe.block_start=pe.strstart,pe.insert=pe.lookahead,pe.lookahead=0,pe.match_length=pe.prev_length=Te-1,pe.match_available=0,P.next_in=$e,P.input=Ce,P.avail_in=re,pe.wrap=kt,U};e.exports.deflateInit=Qt,e.exports.deflateInit2=De,e.exports.deflateReset=Nt,e.exports.deflateResetKeep=Dt,e.exports.deflateSetHeader=Yt,e.exports.deflate=Ee,e.exports.deflateEnd=Be,e.exports.deflateSetDictionary=sr,e.exports.deflateInfo="pako deflate (from Nodeca project)"}),Nv=ce((t,e)=>{"use strict";var n=(u,s)=>Object.prototype.hasOwnProperty.call(u,s);e.exports.assign=function(u){let s=Array.prototype.slice.call(arguments,1);for(;s.length;){let p=s.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(let y in p)n(p,y)&&(u[y]=p[y])}}return u},e.exports.flattenChunks=u=>{let s=0;for(let y=0,g=u.length;y<g;y++)s+=u[y].length;let p=new Uint8Array(s);for(let y=0,g=0,E=u.length;y<E;y++){let m=u[y];p.set(m,g),g+=m.length}return p}}),kv=ce((t,e)=>{"use strict";var n=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}var u=new Uint8Array(256);for(let p=0;p<256;p++)u[p]=p>=252?6:p>=248?5:p>=240?4:p>=224?3:p>=192?2:1;u[254]=u[254]=1,e.exports.string2buf=p=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(p);let y,g,E,m,D,a=p.length,H=0;for(m=0;m<a;m++)g=p.charCodeAt(m),(g&64512)===55296&&m+1<a&&(E=p.charCodeAt(m+1),(E&64512)===56320&&(g=65536+(g-55296<<10)+(E-56320),m++)),H+=g<128?1:g<2048?2:g<65536?3:4;for(y=new Uint8Array(H),D=0,m=0;D<H;m++)g=p.charCodeAt(m),(g&64512)===55296&&m+1<a&&(E=p.charCodeAt(m+1),(E&64512)===56320&&(g=65536+(g-55296<<10)+(E-56320),m++)),g<128?y[D++]=g:g<2048?(y[D++]=192|g>>>6,y[D++]=128|g&63):g<65536?(y[D++]=224|g>>>12,y[D++]=128|g>>>6&63,y[D++]=128|g&63):(y[D++]=240|g>>>18,y[D++]=128|g>>>12&63,y[D++]=128|g>>>6&63,y[D++]=128|g&63);return y};var s=(p,y)=>{if(y<65534&&p.subarray&&n)return String.fromCharCode.apply(null,p.length===y?p:p.subarray(0,y));let g="";for(let E=0;E<y;E++)g+=String.fromCharCode(p[E]);return g};e.exports.buf2string=(p,y)=>{let g=y||p.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(p.subarray(0,y));let E,m,D=new Array(g*2);for(m=0,E=0;E<g;){let a=p[E++];if(a<128){D[m++]=a;continue}let H=u[a];if(H>4){D[m++]=65533,E+=H-1;continue}for(a&=H===2?31:H===3?15:7;H>1&&E<g;)a=a<<6|p[E++]&63,H--;if(H>1){D[m++]=65533;continue}a<65536?D[m++]=a:(a-=65536,D[m++]=55296|a>>10&1023,D[m++]=56320|a&1023)}return s(D,m)},e.exports.utf8border=(p,y)=>{y=y||p.length,y>p.length&&(y=p.length);let g=y-1;for(;g>=0&&(p[g]&192)===128;)g--;return g<0||g===0?y:g+u[p[g]]>y?g:y}}),Lv=ce((t,e)=>{"use strict";function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=n}),zD=ce((t,e)=>{"use strict";var n=jD(),u=Nv(),s=kv(),p=ip(),y=Lv(),g=Object.prototype.toString,{Z_NO_FLUSH:E,Z_SYNC_FLUSH:m,Z_FULL_FLUSH:D,Z_FINISH:a,Z_OK:H,Z_STREAM_END:W,Z_DEFAULT_COMPRESSION:w,Z_DEFAULT_STRATEGY:U,Z_DEFLATED:tt}=no();function J(q){this.options=u.assign({level:w,method:tt,chunkSize:16384,windowBits:15,memLevel:8,strategy:U},q||{});let L=this.options;L.raw&&L.windowBits>0?L.windowBits=-L.windowBits:L.gzip&&L.windowBits>0&&L.windowBits<16&&(L.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;let V=n.deflateInit2(this.strm,L.level,L.method,L.windowBits,L.memLevel,L.strategy);if(V!==H)throw new Error(p[V]);if(L.header&&n.deflateSetHeader(this.strm,L.header),L.dictionary){let lt;if(typeof L.dictionary=="string"?lt=s.string2buf(L.dictionary):g.call(L.dictionary)==="[object ArrayBuffer]"?lt=new Uint8Array(L.dictionary):lt=L.dictionary,V=n.deflateSetDictionary(this.strm,lt),V!==H)throw new Error(p[V]);this._dict_set=!0}}J.prototype.push=function(q,L){let V=this.strm,lt=this.options.chunkSize,mt,Rt;if(this.ended)return!1;for(L===~~L?Rt=L:Rt=L===!0?a:E,typeof q=="string"?V.input=s.string2buf(q):g.call(q)==="[object ArrayBuffer]"?V.input=new Uint8Array(q):V.input=q,V.next_in=0,V.avail_in=V.input.length;;){if(V.avail_out===0&&(V.output=new Uint8Array(lt),V.next_out=0,V.avail_out=lt),(Rt===m||Rt===D)&&V.avail_out<=6){this.onData(V.output.subarray(0,V.next_out)),V.avail_out=0;continue}if(mt=n.deflate(V,Rt),mt===W)return V.next_out>0&&this.onData(V.output.subarray(0,V.next_out)),mt=n.deflateEnd(this.strm),this.onEnd(mt),this.ended=!0,mt===H;if(V.avail_out===0){this.onData(V.output);continue}if(Rt>0&&V.next_out>0){this.onData(V.output.subarray(0,V.next_out)),V.avail_out=0;continue}if(V.avail_in===0)break}return!0},J.prototype.onData=function(q){this.chunks.push(q)},J.prototype.onEnd=function(q){q===H&&(this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=q,this.msg=this.strm.msg};function N(q,L){let V=new J(L);if(V.push(q,!0),V.err)throw V.msg||p[V.err];return V.result}function Q(q,L){return L=L||{},L.raw=!0,N(q,L)}function it(q,L){return L=L||{},L.gzip=!0,N(q,L)}e.exports.Deflate=J,e.exports.deflate=N,e.exports.deflateRaw=Q,e.exports.gzip=it,e.exports.constants=no()}),YD=ce((t,e)=>{"use strict";e.exports=function(n,u){let s,p,y,g,E,m,D,a,H,W,w,U,tt,J,N,Q,it,q,L,V,lt,mt,Rt,Et,vt=n.state;s=n.next_in,Rt=n.input,p=s+(n.avail_in-5),y=n.next_out,Et=n.output,g=y-(u-n.avail_out),E=y+(n.avail_out-257),m=vt.dmax,D=vt.wsize,a=vt.whave,H=vt.wnext,W=vt.window,w=vt.hold,U=vt.bits,tt=vt.lencode,J=vt.distcode,N=(1<<vt.lenbits)-1,Q=(1<<vt.distbits)-1;t:do{U<15&&(w+=Rt[s++]<<U,U+=8,w+=Rt[s++]<<U,U+=8),it=tt[w&N];e:for(;;){if(q=it>>>24,w>>>=q,U-=q,q=it>>>16&255,q===0)Et[y++]=it&65535;else if(q&16){L=it&65535,q&=15,q&&(U<q&&(w+=Rt[s++]<<U,U+=8),L+=w&(1<<q)-1,w>>>=q,U-=q),U<15&&(w+=Rt[s++]<<U,U+=8,w+=Rt[s++]<<U,U+=8),it=J[w&Q];r:for(;;){if(q=it>>>24,w>>>=q,U-=q,q=it>>>16&255,q&16){if(V=it&65535,q&=15,U<q&&(w+=Rt[s++]<<U,U+=8,U<q&&(w+=Rt[s++]<<U,U+=8)),V+=w&(1<<q)-1,V>m){n.msg="invalid distance too far back",vt.mode=16209;break t}if(w>>>=q,U-=q,q=y-g,V>q){if(q=V-q,q>a&&vt.sane){n.msg="invalid distance too far back",vt.mode=16209;break t}if(lt=0,mt=W,H===0){if(lt+=D-q,q<L){L-=q;do Et[y++]=W[lt++];while(--q);lt=y-V,mt=Et}}else if(H<q){if(lt+=D+H-q,q-=H,q<L){L-=q;do Et[y++]=W[lt++];while(--q);if(lt=0,H<L){q=H,L-=q;do Et[y++]=W[lt++];while(--q);lt=y-V,mt=Et}}}else if(lt+=H-q,q<L){L-=q;do Et[y++]=W[lt++];while(--q);lt=y-V,mt=Et}for(;L>2;)Et[y++]=mt[lt++],Et[y++]=mt[lt++],Et[y++]=mt[lt++],L-=3;L&&(Et[y++]=mt[lt++],L>1&&(Et[y++]=mt[lt++]))}else{lt=y-V;do Et[y++]=Et[lt++],Et[y++]=Et[lt++],Et[y++]=Et[lt++],L-=3;while(L>2);L&&(Et[y++]=Et[lt++],L>1&&(Et[y++]=Et[lt++]))}}else if(q&64){n.msg="invalid distance code",vt.mode=16209;break t}else{it=J[(it&65535)+(w&(1<<q)-1)];continue r}break}}else if(q&64)if(q&32){vt.mode=16191;break t}else{n.msg="invalid literal/length code",vt.mode=16209;break t}else{it=tt[(it&65535)+(w&(1<<q)-1)];continue e}break}}while(s<p&&y<E);L=U>>3,s-=L,U-=L<<3,w&=(1<<U)-1,n.next_in=s,n.next_out=y,n.avail_in=s<p?5+(p-s):5-(s-p),n.avail_out=y<E?257+(E-y):257-(y-E),vt.hold=w,vt.bits=U}}),XD=ce((t,e)=>{"use strict";var n=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),u=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),s=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),p=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),y=(g,E,m,D,a,H,W,w)=>{let U=w.bits,tt=0,J=0,N=0,Q=0,it=0,q=0,L=0,V=0,lt=0,mt=0,Rt,Et,vt,wt,Xt,ee=null,ne,oe=new Uint16Array(16),Le=new Uint16Array(16),de=null,He,ze,Te;for(tt=0;tt<=15;tt++)oe[tt]=0;for(J=0;J<D;J++)oe[E[m+J]]++;for(it=U,Q=15;Q>=1&&oe[Q]===0;Q--);if(it>Q&&(it=Q),Q===0)return a[H++]=1<<24|64<<16|0,a[H++]=1<<24|64<<16|0,w.bits=1,0;for(N=1;N<Q&&oe[N]===0;N++);for(it<N&&(it=N),V=1,tt=1;tt<=15;tt++)if(V<<=1,V-=oe[tt],V<0)return-1;if(V>0&&(g===0||Q!==1))return-1;for(Le[1]=0,tt=1;tt<15;tt++)Le[tt+1]=Le[tt]+oe[tt];for(J=0;J<D;J++)E[m+J]!==0&&(W[Le[E[m+J]]++]=J);if(g===0?(ee=de=W,ne=20):g===1?(ee=n,de=u,ne=257):(ee=s,de=p,ne=0),mt=0,J=0,tt=N,Xt=H,q=it,L=0,vt=-1,lt=1<<it,wt=lt-1,g===1&&lt>852||g===2&&lt>592)return 1;for(;;){He=tt-L,W[J]+1<ne?(ze=0,Te=W[J]):W[J]>=ne?(ze=de[W[J]-ne],Te=ee[W[J]-ne]):(ze=96,Te=0),Rt=1<<tt-L,Et=1<<q,N=Et;do Et-=Rt,a[Xt+(mt>>L)+Et]=He<<24|ze<<16|Te|0;while(Et!==0);for(Rt=1<<tt-1;mt&Rt;)Rt>>=1;if(Rt!==0?(mt&=Rt-1,mt+=Rt):mt=0,J++,--oe[tt]===0){if(tt===Q)break;tt=E[m+W[J]]}if(tt>it&&(mt&wt)!==vt){for(L===0&&(L=it),Xt+=N,q=tt-L,V=1<<q;q+L<Q&&(V-=oe[q+L],!(V<=0));)q++,V<<=1;if(lt+=1<<q,g===1&&lt>852||g===2&&lt>592)return 1;vt=mt&wt,a[vt]=it<<24|q<<16|Xt-H|0}}return mt!==0&&(a[Xt+mt]=tt-L<<24|64<<16|0),w.bits=it,0};e.exports=y}),R4=ce((t,e)=>{"use strict";var n=_v(),u=Cv(),s=YD(),p=XD(),y=0,g=1,E=2,{Z_FINISH:m,Z_BLOCK:D,Z_TREES:a,Z_OK:H,Z_STREAM_END:W,Z_NEED_DICT:w,Z_STREAM_ERROR:U,Z_DATA_ERROR:tt,Z_MEM_ERROR:J,Z_BUF_ERROR:N,Z_DEFLATED:Q}=no(),it=16180,q=16181,L=16182,V=16183,lt=16184,mt=16185,Rt=16186,Et=16187,vt=16188,wt=16189,Xt=16190,ee=16191,ne=16192,oe=16193,Le=16194,de=16195,He=16196,ze=16197,Te=16198,Je=16199,Xe=16200,Ae=16201,_e=16202,Qe=16203,qe=16204,Ze=16205,Ar=16206,Or=16207,Cr=16208,et=16209,k=16210,Z=16211,se=852,me=592,rr=15,dr=rr,mr=gt=>(gt>>>24&255)+(gt>>>8&65280)+((gt&65280)<<8)+((gt&255)<<24);function ur(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var er=gt=>{if(!gt)return 1;let rt=gt.state;return!rt||rt.strm!==gt||rt.mode<it||rt.mode>Z?1:0},Gr=gt=>{if(er(gt))return U;let rt=gt.state;return gt.total_in=gt.total_out=rt.total=0,gt.msg="",rt.wrap&&(gt.adler=rt.wrap&1),rt.mode=it,rt.last=0,rt.havedict=0,rt.flags=-1,rt.dmax=32768,rt.head=null,rt.hold=0,rt.bits=0,rt.lencode=rt.lendyn=new Int32Array(se),rt.distcode=rt.distdyn=new Int32Array(me),rt.sane=1,rt.back=-1,H},Lr=gt=>{if(er(gt))return U;let rt=gt.state;return rt.wsize=0,rt.whave=0,rt.wnext=0,Gr(gt)},Sr=(gt,rt)=>{let F;if(er(gt))return U;let st=gt.state;return rt<0?(F=0,rt=-rt):(F=(rt>>4)+5,rt<48&&(rt&=15)),rt&&(rt<8||rt>15)?U:(st.window!==null&&st.wbits!==rt&&(st.window=null),st.wrap=F,st.wbits=rt,Lr(gt))},j=(gt,rt)=>{if(!gt)return U;let F=new ur;gt.state=F,F.strm=gt,F.window=null,F.mode=it;let st=Sr(gt,rt);return st!==H&&(gt.state=null),st},f=gt=>j(gt,dr),S=!0,Y,It,Ot=gt=>{if(S){Y=new Int32Array(512),It=new Int32Array(32);let rt=0;for(;rt<144;)gt.lens[rt++]=8;for(;rt<256;)gt.lens[rt++]=9;for(;rt<280;)gt.lens[rt++]=7;for(;rt<288;)gt.lens[rt++]=8;for(p(g,gt.lens,0,288,Y,0,gt.work,{bits:9}),rt=0;rt<32;)gt.lens[rt++]=5;p(E,gt.lens,0,32,It,0,gt.work,{bits:5}),S=!1}gt.lencode=Y,gt.lenbits=9,gt.distcode=It,gt.distbits=5},nt=(gt,rt,F,st)=>{let At,Dt=gt.state;return Dt.window===null&&(Dt.wsize=1<<Dt.wbits,Dt.wnext=0,Dt.whave=0,Dt.window=new Uint8Array(Dt.wsize)),st>=Dt.wsize?(Dt.window.set(rt.subarray(F-Dt.wsize,F),0),Dt.wnext=0,Dt.whave=Dt.wsize):(At=Dt.wsize-Dt.wnext,At>st&&(At=st),Dt.window.set(rt.subarray(F-st,F-st+At),Dt.wnext),st-=At,st?(Dt.window.set(rt.subarray(F-st,F),0),Dt.wnext=st,Dt.whave=Dt.wsize):(Dt.wnext+=At,Dt.wnext===Dt.wsize&&(Dt.wnext=0),Dt.whave<Dt.wsize&&(Dt.whave+=At))),0},zt=(gt,rt)=>{let F,st,At,Dt,Nt,Yt,De,Qt,Ee,Be,sr,P,le,Vt,pe=0,kt,re,$e,Ce,Pe,Ne,tr,lr,ar=new Uint8Array(4),wr,jr,ln=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(er(gt)||!gt.output||!gt.input&&gt.avail_in!==0)return U;F=gt.state,F.mode===ee&&(F.mode=ne),Nt=gt.next_out,At=gt.output,De=gt.avail_out,Dt=gt.next_in,st=gt.input,Yt=gt.avail_in,Qt=F.hold,Ee=F.bits,Be=Yt,sr=De,lr=H;t:for(;;)switch(F.mode){case it:if(F.wrap===0){F.mode=ne;break}for(;Ee<16;){if(Yt===0)break t;Yt--,Qt+=st[Dt++]<<Ee,Ee+=8}if(F.wrap&2&&Qt===35615){F.wbits===0&&(F.wbits=15),F.check=0,ar[0]=Qt&255,ar[1]=Qt>>>8&255,F.check=u(F.check,ar,2,0),Qt=0,Ee=0,F.mode=q;break}if(F.head&&(F.head.done=!1),!(F.wrap&1)||(((Qt&255)<<8)+(Qt>>8))%31){gt.msg="incorrect header check",F.mode=et;break}if((Qt&15)!==Q){gt.msg="unknown compression method",F.mode=et;break}if(Qt>>>=4,Ee-=4,tr=(Qt&15)+8,F.wbits===0&&(F.wbits=tr),tr>15||tr>F.wbits){gt.msg="invalid window size",F.mode=et;break}F.dmax=1<<F.wbits,F.flags=0,gt.adler=F.check=1,F.mode=Qt&512?wt:ee,Qt=0,Ee=0;break;case q:for(;Ee<16;){if(Yt===0)break t;Yt--,Qt+=st[Dt++]<<Ee,Ee+=8}if(F.flags=Qt,(F.flags&255)!==Q){gt.msg="unknown compression method",F.mode=et;break}if(F.flags&57344){gt.msg="unknown header flags set",F.mode=et;break}F.head&&(F.head.text=Qt>>8&1),F.flags&512&&F.wrap&4&&(ar[0]=Qt&255,ar[1]=Qt>>>8&255,F.check=u(F.check,ar,2,0)),Qt=0,Ee=0,F.mode=L;case L:for(;Ee<32;){if(Yt===0)break t;Yt--,Qt+=st[Dt++]<<Ee,Ee+=8}F.head&&(F.head.time=Qt),F.flags&512&&F.wrap&4&&(ar[0]=Qt&255,ar[1]=Qt>>>8&255,ar[2]=Qt>>>16&255,ar[3]=Qt>>>24&255,F.check=u(F.check,ar,4,0)),Qt=0,Ee=0,F.mode=V;case V:for(;Ee<16;){if(Yt===0)break t;Yt--,Qt+=st[Dt++]<<Ee,Ee+=8}F.head&&(F.head.xflags=Qt&255,F.head.os=Qt>>8),F.flags&512&&F.wrap&4&&(ar[0]=Qt&255,ar[1]=Qt>>>8&255,F.check=u(F.check,ar,2,0)),Qt=0,Ee=0,F.mode=lt;case lt:if(F.flags&1024){for(;Ee<16;){if(Yt===0)break t;Yt--,Qt+=st[Dt++]<<Ee,Ee+=8}F.length=Qt,F.head&&(F.head.extra_len=Qt),F.flags&512&&F.wrap&4&&(ar[0]=Qt&255,ar[1]=Qt>>>8&255,F.check=u(F.check,ar,2,0)),Qt=0,Ee=0}else F.head&&(F.head.extra=null);F.mode=mt;case mt:if(F.flags&1024&&(P=F.length,P>Yt&&(P=Yt),P&&(F.head&&(tr=F.head.extra_len-F.length,F.head.extra||(F.head.extra=new Uint8Array(F.head.extra_len)),F.head.extra.set(st.subarray(Dt,Dt+P),tr)),F.flags&512&&F.wrap&4&&(F.check=u(F.check,st,P,Dt)),Yt-=P,Dt+=P,F.length-=P),F.length))break t;F.length=0,F.mode=Rt;case Rt:if(F.flags&2048){if(Yt===0)break t;P=0;do tr=st[Dt+P++],F.head&&tr&&F.length<65536&&(F.head.name+=String.fromCharCode(tr));while(tr&&P<Yt);if(F.flags&512&&F.wrap&4&&(F.check=u(F.check,st,P,Dt)),Yt-=P,Dt+=P,tr)break t}else F.head&&(F.head.name=null);F.length=0,F.mode=Et;case Et:if(F.flags&4096){if(Yt===0)break t;P=0;do tr=st[Dt+P++],F.head&&tr&&F.length<65536&&(F.head.comment+=String.fromCharCode(tr));while(tr&&P<Yt);if(F.flags&512&&F.wrap&4&&(F.check=u(F.check,st,P,Dt)),Yt-=P,Dt+=P,tr)break t}else F.head&&(F.head.comment=null);F.mode=vt;case vt:if(F.flags&512){for(;Ee<16;){if(Yt===0)break t;Yt--,Qt+=st[Dt++]<<Ee,Ee+=8}if(F.wrap&4&&Qt!==(F.check&65535)){gt.msg="header crc mismatch",F.mode=et;break}Qt=0,Ee=0}F.head&&(F.head.hcrc=F.flags>>9&1,F.head.done=!0),gt.adler=F.check=0,F.mode=ee;break;case wt:for(;Ee<32;){if(Yt===0)break t;Yt--,Qt+=st[Dt++]<<Ee,Ee+=8}gt.adler=F.check=mr(Qt),Qt=0,Ee=0,F.mode=Xt;case Xt:if(F.havedict===0)return gt.next_out=Nt,gt.avail_out=De,gt.next_in=Dt,gt.avail_in=Yt,F.hold=Qt,F.bits=Ee,w;gt.adler=F.check=1,F.mode=ee;case ee:if(rt===D||rt===a)break t;case ne:if(F.last){Qt>>>=Ee&7,Ee-=Ee&7,F.mode=Ar;break}for(;Ee<3;){if(Yt===0)break t;Yt--,Qt+=st[Dt++]<<Ee,Ee+=8}switch(F.last=Qt&1,Qt>>>=1,Ee-=1,Qt&3){case 0:F.mode=oe;break;case 1:if(Ot(F),F.mode=Je,rt===a){Qt>>>=2,Ee-=2;break t}break;case 2:F.mode=He;break;case 3:gt.msg="invalid block type",F.mode=et}Qt>>>=2,Ee-=2;break;case oe:for(Qt>>>=Ee&7,Ee-=Ee&7;Ee<32;){if(Yt===0)break t;Yt--,Qt+=st[Dt++]<<Ee,Ee+=8}if((Qt&65535)!==(Qt>>>16^65535)){gt.msg="invalid stored block lengths",F.mode=et;break}if(F.length=Qt&65535,Qt=0,Ee=0,F.mode=Le,rt===a)break t;case Le:F.mode=de;case de:if(P=F.length,P){if(P>Yt&&(P=Yt),P>De&&(P=De),P===0)break t;At.set(st.subarray(Dt,Dt+P),Nt),Yt-=P,Dt+=P,De-=P,Nt+=P,F.length-=P;break}F.mode=ee;break;case He:for(;Ee<14;){if(Yt===0)break t;Yt--,Qt+=st[Dt++]<<Ee,Ee+=8}if(F.nlen=(Qt&31)+257,Qt>>>=5,Ee-=5,F.ndist=(Qt&31)+1,Qt>>>=5,Ee-=5,F.ncode=(Qt&15)+4,Qt>>>=4,Ee-=4,F.nlen>286||F.ndist>30){gt.msg="too many length or distance symbols",F.mode=et;break}F.have=0,F.mode=ze;case ze:for(;F.have<F.ncode;){for(;Ee<3;){if(Yt===0)break t;Yt--,Qt+=st[Dt++]<<Ee,Ee+=8}F.lens[ln[F.have++]]=Qt&7,Qt>>>=3,Ee-=3}for(;F.have<19;)F.lens[ln[F.have++]]=0;if(F.lencode=F.lendyn,F.lenbits=7,wr={bits:F.lenbits},lr=p(y,F.lens,0,19,F.lencode,0,F.work,wr),F.lenbits=wr.bits,lr){gt.msg="invalid code lengths set",F.mode=et;break}F.have=0,F.mode=Te;case Te:for(;F.have<F.nlen+F.ndist;){for(;pe=F.lencode[Qt&(1<<F.lenbits)-1],kt=pe>>>24,re=pe>>>16&255,$e=pe&65535,!(kt<=Ee);){if(Yt===0)break t;Yt--,Qt+=st[Dt++]<<Ee,Ee+=8}if($e<16)Qt>>>=kt,Ee-=kt,F.lens[F.have++]=$e;else{if($e===16){for(jr=kt+2;Ee<jr;){if(Yt===0)break t;Yt--,Qt+=st[Dt++]<<Ee,Ee+=8}if(Qt>>>=kt,Ee-=kt,F.have===0){gt.msg="invalid bit length repeat",F.mode=et;break}tr=F.lens[F.have-1],P=3+(Qt&3),Qt>>>=2,Ee-=2}else if($e===17){for(jr=kt+3;Ee<jr;){if(Yt===0)break t;Yt--,Qt+=st[Dt++]<<Ee,Ee+=8}Qt>>>=kt,Ee-=kt,tr=0,P=3+(Qt&7),Qt>>>=3,Ee-=3}else{for(jr=kt+7;Ee<jr;){if(Yt===0)break t;Yt--,Qt+=st[Dt++]<<Ee,Ee+=8}Qt>>>=kt,Ee-=kt,tr=0,P=11+(Qt&127),Qt>>>=7,Ee-=7}if(F.have+P>F.nlen+F.ndist){gt.msg="invalid bit length repeat",F.mode=et;break}for(;P--;)F.lens[F.have++]=tr}}if(F.mode===et)break;if(F.lens[256]===0){gt.msg="invalid code -- missing end-of-block",F.mode=et;break}if(F.lenbits=9,wr={bits:F.lenbits},lr=p(g,F.lens,0,F.nlen,F.lencode,0,F.work,wr),F.lenbits=wr.bits,lr){gt.msg="invalid literal/lengths set",F.mode=et;break}if(F.distbits=6,F.distcode=F.distdyn,wr={bits:F.distbits},lr=p(E,F.lens,F.nlen,F.ndist,F.distcode,0,F.work,wr),F.distbits=wr.bits,lr){gt.msg="invalid distances set",F.mode=et;break}if(F.mode=Je,rt===a)break t;case Je:F.mode=Xe;case Xe:if(Yt>=6&&De>=258){gt.next_out=Nt,gt.avail_out=De,gt.next_in=Dt,gt.avail_in=Yt,F.hold=Qt,F.bits=Ee,s(gt,sr),Nt=gt.next_out,At=gt.output,De=gt.avail_out,Dt=gt.next_in,st=gt.input,Yt=gt.avail_in,Qt=F.hold,Ee=F.bits,F.mode===ee&&(F.back=-1);break}for(F.back=0;pe=F.lencode[Qt&(1<<F.lenbits)-1],kt=pe>>>24,re=pe>>>16&255,$e=pe&65535,!(kt<=Ee);){if(Yt===0)break t;Yt--,Qt+=st[Dt++]<<Ee,Ee+=8}if(re&&!(re&240)){for(Ce=kt,Pe=re,Ne=$e;pe=F.lencode[Ne+((Qt&(1<<Ce+Pe)-1)>>Ce)],kt=pe>>>24,re=pe>>>16&255,$e=pe&65535,!(Ce+kt<=Ee);){if(Yt===0)break t;Yt--,Qt+=st[Dt++]<<Ee,Ee+=8}Qt>>>=Ce,Ee-=Ce,F.back+=Ce}if(Qt>>>=kt,Ee-=kt,F.back+=kt,F.length=$e,re===0){F.mode=Ze;break}if(re&32){F.back=-1,F.mode=ee;break}if(re&64){gt.msg="invalid literal/length code",F.mode=et;break}F.extra=re&15,F.mode=Ae;case Ae:if(F.extra){for(jr=F.extra;Ee<jr;){if(Yt===0)break t;Yt--,Qt+=st[Dt++]<<Ee,Ee+=8}F.length+=Qt&(1<<F.extra)-1,Qt>>>=F.extra,Ee-=F.extra,F.back+=F.extra}F.was=F.length,F.mode=_e;case _e:for(;pe=F.distcode[Qt&(1<<F.distbits)-1],kt=pe>>>24,re=pe>>>16&255,$e=pe&65535,!(kt<=Ee);){if(Yt===0)break t;Yt--,Qt+=st[Dt++]<<Ee,Ee+=8}if(!(re&240)){for(Ce=kt,Pe=re,Ne=$e;pe=F.distcode[Ne+((Qt&(1<<Ce+Pe)-1)>>Ce)],kt=pe>>>24,re=pe>>>16&255,$e=pe&65535,!(Ce+kt<=Ee);){if(Yt===0)break t;Yt--,Qt+=st[Dt++]<<Ee,Ee+=8}Qt>>>=Ce,Ee-=Ce,F.back+=Ce}if(Qt>>>=kt,Ee-=kt,F.back+=kt,re&64){gt.msg="invalid distance code",F.mode=et;break}F.offset=$e,F.extra=re&15,F.mode=Qe;case Qe:if(F.extra){for(jr=F.extra;Ee<jr;){if(Yt===0)break t;Yt--,Qt+=st[Dt++]<<Ee,Ee+=8}F.offset+=Qt&(1<<F.extra)-1,Qt>>>=F.extra,Ee-=F.extra,F.back+=F.extra}if(F.offset>F.dmax){gt.msg="invalid distance too far back",F.mode=et;break}F.mode=qe;case qe:if(De===0)break t;if(P=sr-De,F.offset>P){if(P=F.offset-P,P>F.whave&&F.sane){gt.msg="invalid distance too far back",F.mode=et;break}P>F.wnext?(P-=F.wnext,le=F.wsize-P):le=F.wnext-P,P>F.length&&(P=F.length),Vt=F.window}else Vt=At,le=Nt-F.offset,P=F.length;P>De&&(P=De),De-=P,F.length-=P;do At[Nt++]=Vt[le++];while(--P);F.length===0&&(F.mode=Xe);break;case Ze:if(De===0)break t;At[Nt++]=F.length,De--,F.mode=Xe;break;case Ar:if(F.wrap){for(;Ee<32;){if(Yt===0)break t;Yt--,Qt|=st[Dt++]<<Ee,Ee+=8}if(sr-=De,gt.total_out+=sr,F.total+=sr,F.wrap&4&&sr&&(gt.adler=F.check=F.flags?u(F.check,At,sr,Nt-sr):n(F.check,At,sr,Nt-sr)),sr=De,F.wrap&4&&(F.flags?Qt:mr(Qt))!==F.check){gt.msg="incorrect data check",F.mode=et;break}Qt=0,Ee=0}F.mode=Or;case Or:if(F.wrap&&F.flags){for(;Ee<32;){if(Yt===0)break t;Yt--,Qt+=st[Dt++]<<Ee,Ee+=8}if(F.wrap&4&&Qt!==(F.total&4294967295)){gt.msg="incorrect length check",F.mode=et;break}Qt=0,Ee=0}F.mode=Cr;case Cr:lr=W;break t;case et:lr=tt;break t;case k:return J;case Z:default:return U}return gt.next_out=Nt,gt.avail_out=De,gt.next_in=Dt,gt.avail_in=Yt,F.hold=Qt,F.bits=Ee,(F.wsize||sr!==gt.avail_out&&F.mode<et&&(F.mode<Ar||rt!==m))&&nt(gt,gt.output,gt.next_out,sr-gt.avail_out)?(F.mode=k,J):(Be-=gt.avail_in,sr-=gt.avail_out,gt.total_in+=Be,gt.total_out+=sr,F.total+=sr,F.wrap&4&&sr&&(gt.adler=F.check=F.flags?u(F.check,At,sr,gt.next_out-sr):n(F.check,At,sr,gt.next_out-sr)),gt.data_type=F.bits+(F.last?64:0)+(F.mode===ee?128:0)+(F.mode===Je||F.mode===Le?256:0),(Be===0&&sr===0||rt===m)&&lr===H&&(lr=N),lr)},jt=gt=>{if(er(gt))return U;let rt=gt.state;return rt.window&&(rt.window=null),gt.state=null,H},Se=(gt,rt)=>{if(er(gt))return U;let F=gt.state;return F.wrap&2?(F.head=rt,rt.done=!1,H):U},_t=(gt,rt)=>{let F=rt.length,st,At,Dt;return er(gt)||(st=gt.state,st.wrap!==0&&st.mode!==Xt)?U:st.mode===Xt&&(At=1,At=n(At,rt,F,0),At!==st.check)?tt:(Dt=nt(gt,rt,F,F),Dt?(st.mode=k,J):(st.havedict=1,H))};e.exports.inflateReset=Lr,e.exports.inflateReset2=Sr,e.exports.inflateResetKeep=Gr,e.exports.inflateInit=f,e.exports.inflateInit2=j,e.exports.inflate=zt,e.exports.inflateEnd=jt,e.exports.inflateGetHeader=Se,e.exports.inflateSetDictionary=_t,e.exports.inflateInfo="pako inflate (from Nodeca project)"}),O4=ce((t,e)=>{"use strict";function n(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=n}),k4=ce((t,e)=>{"use strict";var n=R4(),u=Nv(),s=kv(),p=ip(),y=Lv(),g=O4(),E=Object.prototype.toString,{Z_NO_FLUSH:m,Z_FINISH:D,Z_OK:a,Z_STREAM_END:H,Z_NEED_DICT:W,Z_STREAM_ERROR:w,Z_DATA_ERROR:U,Z_MEM_ERROR:tt}=no();function J(it){this.options=u.assign({chunkSize:1024*64,windowBits:15,to:""},it||{});let q=this.options;q.raw&&q.windowBits>=0&&q.windowBits<16&&(q.windowBits=-q.windowBits,q.windowBits===0&&(q.windowBits=-15)),q.windowBits>=0&&q.windowBits<16&&!(it&&it.windowBits)&&(q.windowBits+=32),q.windowBits>15&&q.windowBits<48&&(q.windowBits&15||(q.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;let L=n.inflateInit2(this.strm,q.windowBits);if(L!==a)throw new Error(p[L]);if(this.header=new g,n.inflateGetHeader(this.strm,this.header),q.dictionary&&(typeof q.dictionary=="string"?q.dictionary=s.string2buf(q.dictionary):E.call(q.dictionary)==="[object ArrayBuffer]"&&(q.dictionary=new Uint8Array(q.dictionary)),q.raw&&(L=n.inflateSetDictionary(this.strm,q.dictionary),L!==a)))throw new Error(p[L])}J.prototype.push=function(it,q){let L=this.strm,V=this.options.chunkSize,lt=this.options.dictionary,mt,Rt,Et;if(this.ended)return!1;for(q===~~q?Rt=q:Rt=q===!0?D:m,E.call(it)==="[object ArrayBuffer]"?L.input=new Uint8Array(it):L.input=it,L.next_in=0,L.avail_in=L.input.length;;){for(L.avail_out===0&&(L.output=new Uint8Array(V),L.next_out=0,L.avail_out=V),mt=n.inflate(L,Rt),mt===W&&lt&&(mt=n.inflateSetDictionary(L,lt),mt===a?mt=n.inflate(L,Rt):mt===U&&(mt=W));L.avail_in>0&&mt===H&&L.state.wrap>0&&it[L.next_in]!==0;)n.inflateReset(L),mt=n.inflate(L,Rt);switch(mt){case w:case U:case W:case tt:return this.onEnd(mt),this.ended=!0,!1}if(Et=L.avail_out,L.next_out&&(L.avail_out===0||mt===H))if(this.options.to==="string"){let vt=s.utf8border(L.output,L.next_out),wt=L.next_out-vt,Xt=s.buf2string(L.output,vt);L.next_out=wt,L.avail_out=V-wt,wt&&L.output.set(L.output.subarray(vt,vt+wt),0),this.onData(Xt)}else this.onData(L.output.length===L.next_out?L.output:L.output.subarray(0,L.next_out));if(!(mt===a&&Et===0)){if(mt===H)return mt=n.inflateEnd(this.strm),this.onEnd(mt),this.ended=!0,!0;if(L.avail_in===0)break}}return!0},J.prototype.onData=function(it){this.chunks.push(it)},J.prototype.onEnd=function(it){it===a&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=it,this.msg=this.strm.msg};function N(it,q){let L=new J(q);if(L.push(it),L.err)throw L.msg||p[L.err];return L.result}function Q(it,q){return q=q||{},q.raw=!0,N(it,q)}e.exports.Inflate=J,e.exports.inflate=N,e.exports.inflateRaw=Q,e.exports.ungzip=N,e.exports.constants=no()}),L4=ce((t,e)=>{"use strict";var{Deflate:n,deflate:u,deflateRaw:s,gzip:p}=zD(),{Inflate:y,inflate:g,inflateRaw:E,ungzip:m}=k4(),D=no();e.exports.Deflate=n,e.exports.deflate=u,e.exports.deflateRaw=s,e.exports.gzip=p,e.exports.Inflate=y,e.exports.inflate=g,e.exports.inflateRaw=E,e.exports.ungzip=m,e.exports.constants=D}),i2=ce((t,e)=>{var n=new TextEncoder,u=new TextDecoder("utf-8");function s(N){return n.encode(N)}function p(N){return u.decode(N)}function y(N){if(typeof N!="string")throw new TypeError("value is not a string");if(!/^([0-9a-f][0-9a-f])*$/.test(N))throw new RangeError("value is not hexadecimal");return N===""?new Uint8Array(0):new Uint8Array(N.match(/../g).map(Q=>parseInt(Q,16)))}var g=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],E=new Array(256);for(let N=0;N<256;N++)E[N]=`${g[N>>>4&15]}${g[N&15]}`;function m(N){let Q="",it=N.byteLength;for(let q=0;q<it;q++)Q+=E[N[q]];return Q}var D=class{constructor(){this.buf=new Uint8Array(16),this.offset=0}get buffer(){return this.finish(),this.buf.subarray(0,this.offset)}grow(N=0){let Q=this.buf.byteLength*4;for(;Q<N;)Q*=2;let it=new Uint8Array(Q);return it.set(this.buf,0),this.buf=it,this}appendByte(N){this.offset>=this.buf.byteLength&&this.grow(),this.buf[this.offset]=N,this.offset+=1}appendUint32(N){if(!Number.isInteger(N))throw new RangeError("value is not an integer");if(N<0||N>4294967295)throw new RangeError("number out of range");let Q=Math.max(1,Math.ceil((32-Math.clz32(N))/7));this.offset+Q>this.buf.byteLength&&this.grow();for(let it=0;it<Q;it++)this.buf[this.offset+it]=N&127|(it===Q-1?0:128),N>>>=7;return this.offset+=Q,Q}appendInt32(N){if(!Number.isInteger(N))throw new RangeError("value is not an integer");if(N<-2147483648||N>2147483647)throw new RangeError("number out of range");let Q=Math.ceil((33-Math.clz32(N>=0?N:-N-1))/7);this.offset+Q>this.buf.byteLength&&this.grow();for(let it=0;it<Q;it++)this.buf[this.offset+it]=N&127|(it===Q-1?0:128),N>>=7;return this.offset+=Q,Q}appendUint53(N){if(!Number.isInteger(N))throw new RangeError("value is not an integer");if(N<0||N>Number.MAX_SAFE_INTEGER)throw new RangeError("number out of range");let Q=Math.floor(N/4294967296),it=(N&4294967295)>>>0;return this.appendUint64(Q,it)}appendInt53(N){if(!Number.isInteger(N))throw new RangeError("value is not an integer");if(N<Number.MIN_SAFE_INTEGER||N>Number.MAX_SAFE_INTEGER)throw new RangeError("number out of range");let Q=Math.floor(N/4294967296),it=(N&4294967295)>>>0;return this.appendInt64(Q,it)}appendUint64(N,Q){if(!Number.isInteger(N)||!Number.isInteger(Q))throw new RangeError("value is not an integer");if(N<0||N>4294967295||Q<0||Q>4294967295)throw new RangeError("number out of range");if(N===0)return this.appendUint32(Q);let it=Math.ceil((64-Math.clz32(N))/7);this.offset+it>this.buf.byteLength&&this.grow();for(let q=0;q<4;q++)this.buf[this.offset+q]=Q&127|128,Q>>>=7;this.buf[this.offset+4]=Q&15|(N&7)<<4|(it===5?0:128),N>>>=3;for(let q=5;q<it;q++)this.buf[this.offset+q]=N&127|(q===it-1?0:128),N>>>=7;return this.offset+=it,it}appendInt64(N,Q){if(!Number.isInteger(N)||!Number.isInteger(Q))throw new RangeError("value is not an integer");if(N<-2147483648||N>2147483647||Q<-2147483648||Q>4294967295)throw new RangeError("number out of range");if(Q>>>=0,N===0&&Q<=2147483647)return this.appendInt32(Q);if(N===-1&&Q>=2147483648)return this.appendInt32(Q-4294967296);let it=Math.ceil((65-Math.clz32(N>=0?N:-N-1))/7);this.offset+it>this.buf.byteLength&&this.grow();for(let q=0;q<4;q++)this.buf[this.offset+q]=Q&127|128,Q>>>=7;this.buf[this.offset+4]=Q&15|(N&7)<<4|(it===5?0:128),N>>=3;for(let q=5;q<it;q++)this.buf[this.offset+q]=N&127|(q===it-1?0:128),N>>=7;return this.offset+=it,it}appendRawBytes(N){return this.offset+N.byteLength>this.buf.byteLength&&this.grow(this.offset+N.byteLength),this.buf.set(N,this.offset),this.offset+=N.byteLength,N.byteLength}appendRawString(N){if(typeof N!="string")throw new TypeError("value is not a string");return this.appendRawBytes(s(N))}appendPrefixedBytes(N){return this.appendUint53(N.byteLength),this.appendRawBytes(N),this}appendPrefixedString(N){if(typeof N!="string")throw new TypeError("value is not a string");return this.appendPrefixedBytes(s(N)),this}appendHexString(N){return this.appendPrefixedBytes(y(N)),this}finish(){}},a=class{constructor(N){if(!(N instanceof Uint8Array))throw new TypeError(`Not a byte array: ${N}`);this.buf=N,this.offset=0}get done(){return this.offset===this.buf.byteLength}reset(){this.offset=0}skip(N){if(this.offset+N>this.buf.byteLength)throw new RangeError("cannot skip beyond end of buffer");this.offset+=N}readByte(){return this.offset+=1,this.buf[this.offset-1]}readUint32(){let N=0,Q=0;for(;this.offset<this.buf.byteLength;){let it=this.buf[this.offset];if(Q===28&&it&240)throw new RangeError("number out of range");if(N=(N|(it&127)<<Q)>>>0,Q+=7,this.offset++,!(it&128))return N}throw new RangeError("buffer ended with incomplete number")}readInt32(){let N=0,Q=0;for(;this.offset<this.buf.byteLength;){let it=this.buf[this.offset];if(Q===28&&it&128||Q===28&&!(it&64)&&it&56||Q===28&&it&64&&(it&56)!==56)throw new RangeError("number out of range");if(N|=(it&127)<<Q,Q+=7,this.offset++,!(it&128))return!(it&64)||Q>28?N:N|-1<<Q}throw new RangeError("buffer ended with incomplete number")}readUint53(){let{low32:N,high32:Q}=this.readUint64();if(Q<0||Q>2097151)throw new RangeError("number out of range");return Q*4294967296+N}readInt53(){let{low32:N,high32:Q}=this.readInt64();if(Q<-2097152||Q===-2097152&&N===0||Q>2097151)throw new RangeError("number out of range");return Q*4294967296+N}readUint64(){let N=0,Q=0,it=0;for(;this.offset<this.buf.byteLength&&it<=28;){let q=this.buf[this.offset];if(N=(N|(q&127)<<it)>>>0,it===28&&(Q=(q&112)>>>4),it+=7,this.offset++,!(q&128))return{high32:Q,low32:N}}for(it=3;this.offset<this.buf.byteLength;){let q=this.buf[this.offset];if(it===31&&q&254)throw new RangeError("number out of range");if(Q=(Q|(q&127)<<it)>>>0,it+=7,this.offset++,!(q&128))return{high32:Q,low32:N}}throw new RangeError("buffer ended with incomplete number")}readInt64(){let N=0,Q=0,it=0;for(;this.offset<this.buf.byteLength&&it<=28;){let q=this.buf[this.offset];if(N=(N|(q&127)<<it)>>>0,it===28&&(Q=(q&112)>>>4),it+=7,this.offset++,!(q&128))return q&64&&(it<32&&(N=(N|-1<<it)>>>0),Q|=-1<<Math.max(it-32,0)),{high32:Q,low32:N}}for(it=3;this.offset<this.buf.byteLength;){let q=this.buf[this.offset];if(it===31&&q!==0&&q!==127)throw new RangeError("number out of range");if(Q|=(q&127)<<it,it+=7,this.offset++,!(q&128))return q&64&&it<32&&(Q|=-1<<it),{high32:Q,low32:N}}throw new RangeError("buffer ended with incomplete number")}readRawBytes(N){let Q=this.offset;if(Q+N>this.buf.byteLength)throw new RangeError("subarray exceeds buffer size");return this.offset+=N,this.buf.subarray(Q,this.offset)}readRawString(N){return p(this.readRawBytes(N))}readPrefixedBytes(){return this.readRawBytes(this.readUint53())}readPrefixedString(){return p(this.readPrefixedBytes())}readHexString(){return m(this.readPrefixedBytes())}},H=class extends D{constructor(N){super(),this.type=N,this.state="empty",this.lastValue=void 0,this.count=0,this.literal=[]}appendValue(N,Q=1){this._appendValue(N,Q)}_appendValue(N,Q=1){Q<=0||(this.state==="empty"?(this.state=N===null?"nulls":Q===1?"loneValue":"repetition",this.lastValue=N,this.count=Q):this.state==="loneValue"?N===null?(this.flush(),this.state="nulls",this.count=Q):N===this.lastValue?(this.state="repetition",this.count=1+Q):Q>1?(this.flush(),this.state="repetition",this.count=Q,this.lastValue=N):(this.state="literal",this.literal=[this.lastValue],this.lastValue=N):this.state==="repetition"?N===null?(this.flush(),this.state="nulls",this.count=Q):N===this.lastValue?this.count+=Q:Q>1?(this.flush(),this.state="repetition",this.count=Q,this.lastValue=N):(this.flush(),this.state="loneValue",this.lastValue=N):this.state==="literal"?N===null?(this.literal.push(this.lastValue),this.flush(),this.state="nulls",this.count=Q):N===this.lastValue?(this.flush(),this.state="repetition",this.count=1+Q):Q>1?(this.literal.push(this.lastValue),this.flush(),this.state="repetition",this.count=Q,this.lastValue=N):(this.literal.push(this.lastValue),this.lastValue=N):this.state==="nulls"&&(N===null?this.count+=Q:Q>1?(this.flush(),this.state="repetition",this.count=Q,this.lastValue=N):(this.flush(),this.state="loneValue",this.lastValue=N)))}copyFrom(N,Q={}){let{count:it,sumValues:q,sumShift:L}=Q;if(!(N instanceof W)||N.type!==this.type)throw new TypeError("incompatible type of decoder");let V=typeof it=="number"?it:Number.MAX_SAFE_INTEGER,lt=0,mt=0;if(it&&V>0&&N.done)throw new RangeError(`cannot copy ${it} values`);if(V===0||N.done)return q?{nonNullValues:lt,sum:mt}:{nonNullValues:lt};let Rt=N.readValue();if(Rt===null){let vt=Math.min(N.count+1,V);if(V-=vt,N.count-=vt-1,this.appendValue(null,vt),it&&V>0&&N.done)throw new RangeError(`cannot copy ${it} values`);if(V===0||N.done)return q?{nonNullValues:lt,sum:mt}:{nonNullValues:lt};if(Rt=N.readValue(),Rt===null)throw new RangeError("null run must be followed by non-null value")}if(this.appendValue(Rt),V--,lt++,q&&(mt+=L?Rt>>>L:Rt),it&&V>0&&N.done)throw new RangeError(`cannot copy ${it} values`);if(V===0||N.done)return q?{nonNullValues:lt,sum:mt}:{nonNullValues:lt};let Et=N.count>0;for(;V>0&&!N.done;){Et||N.readRecord();let vt=Math.min(N.count,V);if(N.count-=vt,N.state==="literal"){lt+=vt;for(let wt=0;wt<vt;wt++){if(N.done)throw new RangeError("incomplete literal");let Xt=N.readRawValue();if(Xt===N.lastValue)throw new RangeError("Repetition of values is not allowed in literal");N.lastValue=Xt,this._appendValue(Xt),q&&(mt+=L?Xt>>>L:Xt)}}else if(N.state==="repetition"){lt+=vt,q&&(mt+=vt*(L?N.lastValue>>>L:N.lastValue));let wt=N.lastValue;if(this._appendValue(wt),vt>1){if(this._appendValue(wt),this.state!=="repetition")throw new RangeError(`Unexpected state ${this.state}`);this.count+=vt-2}}else if(N.state==="nulls"){if(this._appendValue(null),this.state!=="nulls")throw new RangeError(`Unexpected state ${this.state}`);this.count+=vt-1}Et=!1,V-=vt}if(it&&V>0&&N.done)throw new RangeError(`cannot copy ${it} values`);return q?{nonNullValues:lt,sum:mt}:{nonNullValues:lt}}flush(){if(this.state==="loneValue")this.appendInt32(-1),this.appendRawValue(this.lastValue);else if(this.state==="repetition")this.appendInt53(this.count),this.appendRawValue(this.lastValue);else if(this.state==="literal"){this.appendInt53(-this.literal.length);for(let N of this.literal)this.appendRawValue(N)}else this.state==="nulls"&&(this.appendInt32(0),this.appendUint53(this.count));this.state="empty"}appendRawValue(N){if(this.type==="int")this.appendInt53(N);else if(this.type==="uint")this.appendUint53(N);else if(this.type==="utf8")this.appendPrefixedString(N);else throw new RangeError(`Unknown RLEEncoder datatype: ${this.type}`)}finish(){this.state==="literal"&&this.literal.push(this.lastValue),(this.state!=="nulls"||this.offset>0)&&this.flush()}},W=class extends a{constructor(N,Q){super(Q),this.type=N,this.lastValue=void 0,this.count=0,this.state=void 0}get done(){return this.count===0&&this.offset===this.buf.byteLength}reset(){this.offset=0,this.lastValue=void 0,this.count=0,this.state=void 0}readValue(){if(this.done)return null;if(this.count===0&&this.readRecord(),this.count-=1,this.state==="literal"){let N=this.readRawValue();if(N===this.lastValue)throw new RangeError("Repetition of values is not allowed in literal");return this.lastValue=N,N}else return this.lastValue}skipValues(N){for(;N>0&&!this.done;){this.count===0&&(this.count=this.readInt53(),this.count>0?(this.lastValue=this.count<=N?this.skipRawValues(1):this.readRawValue(),this.state="repetition"):this.count<0?(this.count=-this.count,this.state="literal"):(this.count=this.readUint53(),this.lastValue=null,this.state="nulls"));let Q=Math.min(N,this.count);this.state==="literal"&&this.skipRawValues(Q),N-=Q,this.count-=Q}}readRecord(){if(this.count=this.readInt53(),this.count>1){let N=this.readRawValue();if((this.state==="repetition"||this.state==="literal")&&this.lastValue===N)throw new RangeError("Successive repetitions with the same value are not allowed");this.state="repetition",this.lastValue=N}else{if(this.count===1)throw new RangeError("Repetition count of 1 is not allowed, use a literal instead");if(this.count<0){if(this.count=-this.count,this.state==="literal")throw new RangeError("Successive literals are not allowed");this.state="literal"}else{if(this.state==="nulls")throw new RangeError("Successive null runs are not allowed");if(this.count=this.readUint53(),this.count===0)throw new RangeError("Zero-length null runs are not allowed");this.lastValue=null,this.state="nulls"}}}readRawValue(){if(this.type==="int")return this.readInt53();if(this.type==="uint")return this.readUint53();if(this.type==="utf8")return this.readPrefixedString();throw new RangeError(`Unknown RLEDecoder datatype: ${this.type}`)}skipRawValues(N){if(this.type==="utf8")for(let Q=0;Q<N;Q++)this.skip(this.readUint53());else{for(;N>0&&this.offset<this.buf.byteLength;)this.buf[this.offset]&128||N--,this.offset++;if(N>0)throw new RangeError("cannot skip beyond end of buffer")}}},w=class extends H{constructor(){super("int"),this.absoluteValue=0}appendValue(N,Q=1){Q<=0||(typeof N=="number"?(super.appendValue(N-this.absoluteValue,1),this.absoluteValue=N,Q>1&&super.appendValue(0,Q-1)):super.appendValue(N,Q))}copyFrom(N,Q={}){if(Q.sumValues)throw new RangeError("unsupported options for DeltaEncoder.copyFrom()");if(!(N instanceof U))throw new TypeError("incompatible type of decoder");let it=Q.count;if(it>0&&N.done)throw new RangeError(`cannot copy ${it} values`);if(it===0||N.done)return;let q=N.readValue(),L=0;if(this.appendValue(q),q===null){if(L=N.count+1,it!==void 0&&it<L&&(L=it),N.count-=L-1,this.count+=L-1,it>L&&N.done)throw new RangeError(`cannot copy ${it} values`);if(it===L||N.done)return;N.count===0&&this.appendValue(N.readValue())}it!==void 0&&(it-=L+1);let{nonNullValues:V,sum:lt}=super.copyFrom(N,{count:it,sumValues:!0});V>0&&(this.absoluteValue=lt,N.absoluteValue=lt)}},U=class extends W{constructor(N){super("int",N),this.absoluteValue=0}reset(){this.offset=0,this.lastValue=void 0,this.count=0,this.state=void 0,this.absoluteValue=0}readValue(){let N=super.readValue();return N===null?null:(this.absoluteValue+=N,this.absoluteValue)}skipValues(N){for(;N>0&&!this.done;){this.count===0&&this.readRecord();let Q=Math.min(N,this.count);if(this.state==="literal")for(let it=0;it<Q;it++)this.lastValue=this.readRawValue(),this.absoluteValue+=this.lastValue;else this.state==="repetition"&&(this.absoluteValue+=Q*this.lastValue);N-=Q,this.count-=Q}}},tt=class extends D{constructor(){super(),this.lastValue=!1,this.count=0}appendValue(N,Q=1){if(N!==!1&&N!==!0)throw new RangeError(`Unsupported value for BooleanEncoder: ${N}`);Q<=0||(this.lastValue===N?this.count+=Q:(this.appendUint53(this.count),this.lastValue=N,this.count=Q))}copyFrom(N,Q={}){if(!(N instanceof J))throw new TypeError("incompatible type of decoder");let{count:it}=Q,q=typeof it=="number"?it:Number.MAX_SAFE_INTEGER;if(it&&q>0&&N.done)throw new RangeError(`cannot copy ${it} values`);if(q===0||N.done)return;this.appendValue(N.readValue()),q--;let L=Math.min(N.count,q);for(this.count+=L,N.count-=L,q-=L;q>0&&!N.done;){if(N.count=N.readUint53(),N.count===0)throw new RangeError("Zero-length runs are not allowed");N.lastValue=!N.lastValue,this.appendUint53(this.count);let V=Math.min(N.count,q);this.count=V,this.lastValue=N.lastValue,N.count-=V,q-=V}if(it&&q>0&&N.done)throw new RangeError(`cannot copy ${it} values`)}finish(){this.count>0&&(this.appendUint53(this.count),this.count=0)}},J=class extends a{constructor(N){super(N),this.lastValue=!0,this.firstRun=!0,this.count=0}get done(){return this.count===0&&this.offset===this.buf.byteLength}reset(){this.offset=0,this.lastValue=!0,this.firstRun=!0,this.count=0}readValue(){if(this.done)return!1;for(;this.count===0;){if(this.count=this.readUint53(),this.lastValue=!this.lastValue,this.count===0&&!this.firstRun)throw new RangeError("Zero-length runs are not allowed");this.firstRun=!1}return this.count-=1,this.lastValue}skipValues(N){for(;N>0&&!this.done;){if(this.count===0){if(this.count=this.readUint53(),this.lastValue=!this.lastValue,this.count===0&&!this.firstRun)throw new RangeError("Zero-length runs are not allowed");this.firstRun=!1}this.count<N?(N-=this.count,this.count=0):(this.count-=N,N=0)}}};e.exports={stringToUtf8:s,utf8ToString:p,hexStringToBytes:y,bytesToHexString:m,Encoder:D,Decoder:a,RLEEncoder:H,RLEDecoder:W,DeltaEncoder:w,DeltaDecoder:U,BooleanEncoder:tt,BooleanDecoder:J}}),K4=ce((t,e)=>{(function(n,u){var s={};u(s);var p=s.default;for(var y in s)p[y]=s[y];typeof e=="object"&&typeof e.exports=="object"?e.exports=p:typeof define=="function"&&define.amd?define(function(){return p}):n.sha256=p})(t,function(n){"use strict";n.__esModule=!0,n.digestLength=32,n.blockSize=64;var u=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(W,w,U,tt,J){for(var N,Q,it,q,L,V,lt,mt,Rt,Et,vt,wt,Xt;J>=64;){for(N=w[0],Q=w[1],it=w[2],q=w[3],L=w[4],V=w[5],lt=w[6],mt=w[7],Et=0;Et<16;Et++)vt=tt+Et*4,W[Et]=(U[vt]&255)<<24|(U[vt+1]&255)<<16|(U[vt+2]&255)<<8|U[vt+3]&255;for(Et=16;Et<64;Et++)Rt=W[Et-2],wt=(Rt>>>17|Rt<<15)^(Rt>>>19|Rt<<13)^Rt>>>10,Rt=W[Et-15],Xt=(Rt>>>7|Rt<<25)^(Rt>>>18|Rt<<14)^Rt>>>3,W[Et]=(wt+W[Et-7]|0)+(Xt+W[Et-16]|0);for(Et=0;Et<64;Et++)wt=(((L>>>6|L<<26)^(L>>>11|L<<21)^(L>>>25|L<<7))+(L&V^~L&lt)|0)+(mt+(u[Et]+W[Et]|0)|0)|0,Xt=((N>>>2|N<<30)^(N>>>13|N<<19)^(N>>>22|N<<10))+(N&Q^N&it^Q&it)|0,mt=lt,lt=V,V=L,L=q+wt|0,q=it,it=Q,Q=N,N=wt+Xt|0;w[0]+=N,w[1]+=Q,w[2]+=it,w[3]+=q,w[4]+=L,w[5]+=V,w[6]+=lt,w[7]+=mt,tt+=64,J-=64}return tt}var p=(function(){function W(){this.digestLength=n.digestLength,this.blockSize=n.blockSize,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return W.prototype.reset=function(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},W.prototype.clean=function(){for(var w=0;w<this.buffer.length;w++)this.buffer[w]=0;for(var w=0;w<this.temp.length;w++)this.temp[w]=0;this.reset()},W.prototype.update=function(w,U){if(U===void 0&&(U=w.length),this.finished)throw new Error("SHA256: can't update because hash was finished.");var tt=0;if(this.bytesHashed+=U,this.bufferLength>0){for(;this.bufferLength<64&&U>0;)this.buffer[this.bufferLength++]=w[tt++],U--;this.bufferLength===64&&(s(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(U>=64&&(tt=s(this.temp,this.state,w,tt,U),U%=64);U>0;)this.buffer[this.bufferLength++]=w[tt++],U--;return this},W.prototype.finish=function(w){if(!this.finished){var U=this.bytesHashed,tt=this.bufferLength,J=U/536870912|0,N=U<<3,Q=U%64<56?64:128;this.buffer[tt]=128;for(var it=tt+1;it<Q-8;it++)this.buffer[it]=0;this.buffer[Q-8]=J>>>24&255,this.buffer[Q-7]=J>>>16&255,this.buffer[Q-6]=J>>>8&255,this.buffer[Q-5]=J>>>0&255,this.buffer[Q-4]=N>>>24&255,this.buffer[Q-3]=N>>>16&255,this.buffer[Q-2]=N>>>8&255,this.buffer[Q-1]=N>>>0&255,s(this.temp,this.state,this.buffer,0,Q),this.finished=!0}for(var it=0;it<8;it++)w[it*4+0]=this.state[it]>>>24&255,w[it*4+1]=this.state[it]>>>16&255,w[it*4+2]=this.state[it]>>>8&255,w[it*4+3]=this.state[it]>>>0&255;return this},W.prototype.digest=function(){var w=new Uint8Array(this.digestLength);return this.finish(w),w},W.prototype._saveState=function(w){for(var U=0;U<this.state.length;U++)w[U]=this.state[U]},W.prototype._restoreState=function(w,U){for(var tt=0;tt<this.state.length;tt++)this.state[tt]=w[tt];this.bytesHashed=U,this.finished=!1,this.bufferLength=0},W})();n.Hash=p;var y=(function(){function W(w){this.inner=new p,this.outer=new p,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;var U=new Uint8Array(this.blockSize);if(w.length>this.blockSize)new p().update(w).finish(U).clean();else for(var tt=0;tt<w.length;tt++)U[tt]=w[tt];for(var tt=0;tt<U.length;tt++)U[tt]^=54;this.inner.update(U);for(var tt=0;tt<U.length;tt++)U[tt]^=106;this.outer.update(U),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate);for(var tt=0;tt<U.length;tt++)U[tt]=0}return W.prototype.reset=function(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this},W.prototype.clean=function(){for(var w=0;w<this.istate.length;w++)this.ostate[w]=this.istate[w]=0;this.inner.clean(),this.outer.clean()},W.prototype.update=function(w){return this.inner.update(w),this},W.prototype.finish=function(w){return this.outer.finished?this.outer.finish(w):(this.inner.finish(w),this.outer.update(w,this.digestLength).finish(w)),this},W.prototype.digest=function(){var w=new Uint8Array(this.digestLength);return this.finish(w),w},W})();n.HMAC=y;function g(W){var w=new p().update(W),U=w.digest();return w.clean(),U}n.hash=g,n.default=g;function E(W,w){var U=new y(W).update(w),tt=U.digest();return U.clean(),tt}n.hmac=E;function m(W,w,U,tt){var J=tt[0];if(J===0)throw new Error("hkdf: cannot expand more");w.reset(),J>1&&w.update(W),U&&w.update(U),w.update(tt),w.finish(W),tt[0]++}var D=new Uint8Array(n.digestLength);function a(W,w,U,tt){w===void 0&&(w=D),tt===void 0&&(tt=32);for(var J=new Uint8Array([1]),N=E(w,W),Q=new y(N),it=new Uint8Array(Q.digestLength),q=it.length,L=new Uint8Array(tt),V=0;V<tt;V++)q===it.length&&(m(it,Q,U,J),q=0),L[V]=it[q++];return Q.clean(),it.fill(0),J.fill(0),L}n.hkdf=a;function H(W,w,U,tt){for(var J=new y(W),N=J.digestLength,Q=new Uint8Array(4),it=new Uint8Array(N),q=new Uint8Array(N),L=new Uint8Array(tt),V=0;V*N<tt;V++){var lt=V+1;Q[0]=lt>>>24&255,Q[1]=lt>>>16&255,Q[2]=lt>>>8&255,Q[3]=lt>>>0&255,J.reset(),J.update(w),J.update(Q),J.finish(q);for(var mt=0;mt<N;mt++)it[mt]=q[mt];for(var mt=2;mt<=U;mt++){J.reset(),J.update(q).finish(q);for(var Rt=0;Rt<N;Rt++)it[Rt]^=q[Rt]}for(var mt=0;mt<N&&V*N+mt<tt;mt++)L[V*N+mt]=it[mt]}for(var V=0;V<N;V++)it[V]=q[V]=0;for(var V=0;V<4;V++)Q[V]=0;return J.clean(),L}n.pbkdf2=H})}),Bh=ce((t,e)=>{var n=L4(),{copyObject:u,parseOpId:s,equalBytes:p}=Us(),{utf8ToString:y,hexStringToBytes:g,bytesToHexString:E,Encoder:m,Decoder:D,RLEEncoder:a,RLEDecoder:H,DeltaEncoder:W,DeltaDecoder:w,BooleanEncoder:U,BooleanDecoder:tt}=i2(),{Hash:J}=K4(),N=new Uint8Array([133,111,74,131]),Q=0,it=1,q=2,L=256,V={GROUP_CARD:0,ACTOR_ID:1,INT_RLE:2,INT_DELTA:3,BOOLEAN:4,STRING_RLE:5,VALUE_LEN:6,VALUE_RAW:7},lt=8,mt={NULL:0,FALSE:1,TRUE:2,LEB128_UINT:3,LEB128_INT:4,IEEE754:5,UTF8:6,BYTES:7,COUNTER:8,TIMESTAMP:9,MIN_UNKNOWN:10,MAX_UNKNOWN:15},Rt=["makeMap","set","makeList","del","makeText","inc","makeTable","link"],Et={makeMap:"map",makeList:"list",makeText:"text",makeTable:"table"},vt=[{columnName:"objActor",columnId:0|V.ACTOR_ID},{columnName:"objCtr",columnId:0|V.INT_RLE},{columnName:"keyActor",columnId:16|V.ACTOR_ID},{columnName:"keyCtr",columnId:16|V.INT_DELTA},{columnName:"keyStr",columnId:16|V.STRING_RLE},{columnName:"idActor",columnId:32|V.ACTOR_ID},{columnName:"idCtr",columnId:32|V.INT_DELTA},{columnName:"insert",columnId:48|V.BOOLEAN},{columnName:"action",columnId:64|V.INT_RLE},{columnName:"valLen",columnId:80|V.VALUE_LEN},{columnName:"valRaw",columnId:80|V.VALUE_RAW},{columnName:"chldActor",columnId:96|V.ACTOR_ID},{columnName:"chldCtr",columnId:96|V.INT_DELTA}],wt=vt.concat([{columnName:"predNum",columnId:112|V.GROUP_CARD},{columnName:"predActor",columnId:112|V.ACTOR_ID},{columnName:"predCtr",columnId:112|V.INT_DELTA}]),Xt=vt.concat([{columnName:"succNum",columnId:128|V.GROUP_CARD},{columnName:"succActor",columnId:128|V.ACTOR_ID},{columnName:"succCtr",columnId:128|V.INT_DELTA}]),ee=[{columnName:"actor",columnId:0|V.ACTOR_ID},{columnName:"seq",columnId:0|V.INT_DELTA},{columnName:"maxOp",columnId:16|V.INT_DELTA},{columnName:"time",columnId:32|V.INT_DELTA},{columnName:"message",columnId:48|V.STRING_RLE},{columnName:"depsNum",columnId:64|V.GROUP_CARD},{columnName:"depsIndex",columnId:64|V.INT_DELTA},{columnName:"extraLen",columnId:80|V.VALUE_LEN},{columnName:"extraRaw",columnId:80|V.VALUE_RAW}];function ne(_t,gt){if(!_t||!_t.actorId)return _t;let rt=_t.counter,F=gt.indexOf(_t.actorId);if(F<0)throw new RangeError("missing actorId");return{counter:rt,actorNum:F,actorId:_t.actorId}}function oe(_t,gt){return _t.counter<gt.counter?-1:_t.counter>gt.counter?1:_t.actorId<gt.actorId?-1:_t.actorId>gt.actorId?1:0}function Le(_t,gt){let rt={},F=[];for(let At of _t)At=u(At),rt[At.actor]=!0,At.ops=qe(At.ops,At.startOp,At.actor),At.ops=At.ops.map(Dt=>{Dt=u(Dt),Dt.obj!=="_root"&&(Dt.obj=s(Dt.obj)),Dt.elemId&&Dt.elemId!=="_head"&&(Dt.elemId=s(Dt.elemId)),Dt.child&&(Dt.child=s(Dt.child)),Dt.pred&&(Dt.pred=Dt.pred.map(s)),Dt.obj.actorId&&(rt[Dt.obj.actorId]=!0),Dt.elemId&&Dt.elemId.actorId&&(rt[Dt.elemId.actorId]=!0),Dt.child&&Dt.child.actorId&&(rt[Dt.child.actorId]=!0);for(let Nt of Dt.pred)rt[Nt.actorId]=!0;return Dt}),F.push(At);let st=Object.keys(rt).sort();gt&&(st=[_t[0].actor].concat(st.filter(At=>At!==_t[0].actor)));for(let At of F){At.actorNum=st.indexOf(At.actor);for(let Dt=0;Dt<At.ops.length;Dt++){let Nt=At.ops[Dt];Nt.id={counter:At.startOp+Dt,actorNum:At.actorNum,actorId:At.actor},Nt.obj=ne(Nt.obj,st),Nt.elemId=ne(Nt.elemId,st),Nt.child=ne(Nt.child,st),Nt.pred=Nt.pred.map(Yt=>ne(Yt,st))}}return{changes:F,actorIds:st}}function de(_t,gt){if(_t.obj==="_root")gt.objActor.appendValue(null),gt.objCtr.appendValue(null);else if(_t.obj.actorNum>=0&&_t.obj.counter>0)gt.objActor.appendValue(_t.obj.actorNum),gt.objCtr.appendValue(_t.obj.counter);else throw new RangeError(`Unexpected objectId reference: ${JSON.stringify(_t.obj)}`)}function He(_t,gt){if(_t.key)gt.keyActor.appendValue(null),gt.keyCtr.appendValue(null),gt.keyStr.appendValue(_t.key);else if(_t.elemId==="_head"&&_t.insert)gt.keyActor.appendValue(null),gt.keyCtr.appendValue(0),gt.keyStr.appendValue(null);else if(_t.elemId&&_t.elemId.actorNum>=0&&_t.elemId.counter>0)gt.keyActor.appendValue(_t.elemId.actorNum),gt.keyCtr.appendValue(_t.elemId.counter),gt.keyStr.appendValue(null);else throw new RangeError(`Unexpected operation key: ${JSON.stringify(_t)}`)}function ze(_t,gt){let rt=Rt.indexOf(_t.action);if(rt>=0)gt.action.appendValue(rt);else if(typeof _t.action=="number")gt.action.appendValue(_t.action);else throw new RangeError(`Unexpected operation action: ${_t.action}`)}function Te(_t){switch(_t.datatype){case"counter":return[mt.COUNTER,_t.value];case"timestamp":return[mt.TIMESTAMP,_t.value];case"uint":return[mt.LEB128_UINT,_t.value];case"int":return[mt.LEB128_INT,_t.value];case"float64":{let gt=new ArrayBuffer(8);return new DataView(gt).setFloat64(0,_t.value,!0),[mt.IEEE754,new Uint8Array(gt)]}default:if(Number.isInteger(_t.value)&&_t.value<=Number.MAX_SAFE_INTEGER&&_t.value>=Number.MIN_SAFE_INTEGER)return[mt.LEB128_INT,_t.value];{let gt=new ArrayBuffer(8);return new DataView(gt).setFloat64(0,_t.value,!0),[mt.IEEE754,new Uint8Array(gt)]}}}function Je(_t,gt){if(_t.action!=="set"&&_t.action!=="inc"||_t.value===null)gt.valLen.appendValue(mt.NULL);else if(_t.value===!1)gt.valLen.appendValue(mt.FALSE);else if(_t.value===!0)gt.valLen.appendValue(mt.TRUE);else if(typeof _t.value=="string"){let rt=gt.valRaw.appendRawString(_t.value);gt.valLen.appendValue(rt<<4|mt.UTF8)}else if(ArrayBuffer.isView(_t.value)){let rt=gt.valRaw.appendRawBytes(new Uint8Array(_t.value.buffer));gt.valLen.appendValue(rt<<4|mt.BYTES)}else if(typeof _t.value=="number"){let[rt,F]=Te(_t),st;rt===mt.LEB128_UINT?st=gt.valRaw.appendUint53(F):rt===mt.IEEE754?st=gt.valRaw.appendRawBytes(F):st=gt.valRaw.appendInt53(F),gt.valLen.appendValue(st<<4|rt)}else if(typeof _t.datatype=="number"&&_t.datatype>=mt.MIN_UNKNOWN&&_t.datatype<=mt.MAX_UNKNOWN&&_t.value instanceof Uint8Array){let rt=gt.valRaw.appendRawBytes(_t.value);gt.valLen.appendValue(rt<<4|_t.datatype)}else throw _t.datatype?new RangeError(`Unknown datatype ${_t.datatype} for value ${_t.value}`):new RangeError(`Unsupported value in operation: ${_t.value}`)}function Xe(_t,gt){if(_t===mt.NULL)return{value:null};if(_t===mt.FALSE)return{value:!1};if(_t===mt.TRUE)return{value:!0};if(_t%16===mt.UTF8)return{value:y(gt)};if(_t%16===mt.LEB128_UINT)return{value:new D(gt).readUint53(),datatype:"uint"};if(_t%16===mt.LEB128_INT)return{value:new D(gt).readInt53(),datatype:"int"};if(_t%16===mt.IEEE754){let rt=new DataView(gt.buffer,gt.byteOffset,gt.byteLength);if(gt.byteLength===8)return{value:rt.getFloat64(0,!0),datatype:"float64"};throw new RangeError(`Invalid length for floating point number: ${gt.byteLength}`)}else return _t%16===mt.COUNTER?{value:new D(gt).readInt53(),datatype:"counter"}:_t%16===mt.TIMESTAMP?{value:new D(gt).readInt53(),datatype:"timestamp"}:{value:gt,datatype:_t%16}}function Ae(_t,gt,rt,F){let{columnId:st,columnName:At,decoder:Dt}=_t[gt];if(st%8===V.VALUE_LEN&&gt+1<_t.length&&_t[gt+1].columnId===st+1){let Nt=Dt.readValue(),Yt=_t[gt+1].decoder.readRawBytes(Nt>>4),{value:De,datatype:Qt}=Xe(Nt,Yt);return F[At]=De,Qt&&(F[At+"_datatype"]=Qt),2}else if(st%8===V.ACTOR_ID){let Nt=Dt.readValue();if(Nt===null)F[At]=null;else{if(!rt[Nt])throw new RangeError(`No actor index ${Nt}`);F[At]=rt[Nt]}}else F[At]=Dt.readValue();return 1}function _e(_t,gt){let rt={objActor:new a("uint"),objCtr:new a("uint"),keyActor:new a("uint"),keyCtr:new W,keyStr:new a("utf8"),insert:new U,action:new a("uint"),valLen:new a("uint"),valRaw:new m,chldActor:new a("uint"),chldCtr:new W};gt?(rt.idActor=new a("uint"),rt.idCtr=new W,rt.succNum=new a("uint"),rt.succActor=new a("uint"),rt.succCtr=new W):(rt.predNum=new a("uint"),rt.predCtr=new W,rt.predActor=new a("uint"));for(let st of _t)if(de(st,rt),He(st,rt),rt.insert.appendValue(!!st.insert),ze(st,rt),Je(st,rt),st.child&&st.child.counter?(rt.chldActor.appendValue(st.child.actorNum),rt.chldCtr.appendValue(st.child.counter)):(rt.chldActor.appendValue(null),rt.chldCtr.appendValue(null)),gt){rt.idActor.appendValue(st.id.actorNum),rt.idCtr.appendValue(st.id.counter),rt.succNum.appendValue(st.succ.length),st.succ.sort(oe);for(let At=0;At<st.succ.length;At++)rt.succActor.appendValue(st.succ[At].actorNum),rt.succCtr.appendValue(st.succ[At].counter)}else{rt.predNum.appendValue(st.pred.length),st.pred.sort(oe);for(let At=0;At<st.pred.length;At++)rt.predActor.appendValue(st.pred[At].actorNum),rt.predCtr.appendValue(st.pred[At].counter)}let F=[];for(let{columnName:st,columnId:At}of gt?Xt:wt)rt[st]&&F.push({columnId:At,columnName:st,encoder:rt[st]});return F.sort((st,At)=>st.columnId-At.columnId)}function Qe(_t,gt){return gt===void 0?typeof _t=="string"||typeof _t=="boolean"||_t===null:typeof _t=="number"}function qe(_t,gt,rt){let F=gt,st=[];for(let At of _t)if(At.action==="set"&&At.values&&At.insert){if(At.pred.length!==0)throw new RangeError("multi-insert pred must be empty");let Dt=At.elemId,Nt=At.datatype;for(let Yt of At.values){if(!Qe(Yt,Nt))throw new RangeError(`Decode failed: bad value/datatype association (${Yt},${Nt})`);st.push({action:"set",obj:At.obj,elemId:Dt,datatype:Nt,value:Yt,pred:[],insert:!0}),Dt=`${F}@${rt}`,F+=1}}else if(At.action==="del"&&At.multiOp>1){if(At.pred.length!==1)throw new RangeError("multiOp deletion must have exactly one pred");let Dt=s(At.elemId),Nt=s(At.pred[0]);for(let Yt=0;Yt<At.multiOp;Yt++){let De=`${Dt.counter+Yt}@${Dt.actorId}`,Qt=[`${Nt.counter+Yt}@${Nt.actorId}`];st.push({action:"del",obj:At.obj,elemId:De,pred:Qt}),F+=1}}else st.push(At),F+=1;return st}function Ze(_t,gt){let rt=[];for(let F of _t){let st=F.objCtr===null?"_root":`${F.objCtr}@${F.objActor}`,At=F.keyStr?void 0:F.keyCtr===0?"_head":`${F.keyCtr}@${F.keyActor}`,Dt=Rt[F.action]||F.action,Nt=At?{obj:st,elemId:At,action:Dt}:{obj:st,key:F.keyStr,action:Dt};if(Nt.insert=!!F.insert,(Rt[F.action]==="set"||Rt[F.action]==="inc")&&(Nt.value=F.valLen,F.valLen_datatype&&(Nt.datatype=F.valLen_datatype)),!!F.chldCtr!=!!F.chldActor)throw new RangeError(`Mismatched child columns: ${F.chldCtr} and ${F.chldActor}`);F.chldCtr!==null&&(Nt.child=`${F.chldCtr}@${F.chldActor}`),gt?(Nt.id=`${F.idCtr}@${F.idActor}`,Nt.succ=F.succNum.map(Yt=>`${Yt.succCtr}@${Yt.succActor}`),Ar(F.succNum.map(Yt=>({counter:Yt.succCtr,actorId:Yt.succActor})))):(Nt.pred=F.predNum.map(Yt=>`${Yt.predCtr}@${Yt.predActor}`),Ar(F.predNum.map(Yt=>({counter:Yt.predCtr,actorId:Yt.predActor})))),rt.push(Nt)}return rt}function Ar(_t){let gt=null;for(let rt of _t){if(gt&&oe(gt,rt)!==-1)throw new RangeError("operation IDs are not in ascending order");gt=rt}}function Or(_t){return(_t&7)===V.INT_DELTA?new W:(_t&7)===V.BOOLEAN?new U:(_t&7)===V.STRING_RLE?new a("utf8"):(_t&7)===V.VALUE_RAW?new m:new a("uint")}function Cr(_t,gt){return(_t&7)===V.INT_DELTA?new w(gt):(_t&7)===V.BOOLEAN?new tt(gt):(_t&7)===V.STRING_RLE?new H("utf8",gt):(_t&7)===V.VALUE_RAW?new D(gt):new H("uint",gt)}function et(_t,gt){let rt=new Uint8Array(0),F=[],st=0,At=0;for(;st<_t.length||At<gt.length;)if(st===_t.length||At<gt.length&&gt[At].columnId<_t[st].columnId){let{columnId:Dt,columnName:Nt}=gt[At];F.push({columnId:Dt,columnName:Nt,decoder:Cr(Dt,rt)}),At++}else if(At===gt.length||_t[st].columnId<gt[At].columnId){let{columnId:Dt,buffer:Nt}=_t[st];F.push({columnId:Dt,decoder:Cr(Dt,Nt)}),st++}else{let{columnId:Dt,buffer:Nt}=_t[st],{columnName:Yt}=gt[At];F.push({columnId:Dt,columnName:Yt,decoder:Cr(Dt,Nt)}),st++,At++}return F}function k(_t,gt,rt){_t=et(_t,rt);let F=[];for(;_t.some(st=>!st.decoder.done);){let st={},At=0;for(;At<_t.length;){let Dt=_t[At].columnId,Nt=Dt>>4,Yt=1;for(;At+Yt<_t.length&&_t[At+Yt].columnId>>4===Nt;)Yt++;if(Dt%8===V.GROUP_CARD){let De=[],Qt=_t[At].decoder.readValue();for(let Ee=0;Ee<Qt;Ee++){let Be={};for(let sr=1;sr<Yt;sr++)Ae(_t,At+sr,gt,Be);De.push(Be)}st[_t[At].columnName]=De,At+=Yt}else At+=Ae(_t,At,gt,st)}F.push(st)}return F}function Z(_t){let gt=(-1^lt)>>>0,rt=-1,F=[],st=_t.readUint53();for(let At=0;At<st;At++){let Dt=_t.readUint53(),Nt=_t.readUint53();if((Dt&gt)<=(rt&gt))throw new RangeError("Columns must be in ascending order");rt=Dt,F.push({columnId:Dt,bufferLen:Nt})}return F}function se(_t,gt){let rt=gt.filter(F=>F.encoder.buffer.byteLength>0);_t.appendUint53(rt.length);for(let F of rt)_t.appendUint53(F.columnId),_t.appendUint53(F.encoder.buffer.byteLength)}function me(_t){let gt=_t.readUint53(),rt=[];for(let Dt=0;Dt<gt;Dt++)rt.push(E(_t.readRawBytes(32)));let F={actor:_t.readHexString(),seq:_t.readUint53(),startOp:_t.readUint53(),time:_t.readInt53(),message:_t.readPrefixedString(),deps:rt},st=[F.actor],At=_t.readUint53();for(let Dt=0;Dt<At;Dt++)st.push(_t.readHexString());return F.actorIds=st,F}function rr(_t,gt){let rt=N.byteLength+4+1+5,F=new m;F.appendRawBytes(new Uint8Array(rt)),gt(F);let st=F.buffer,At=new m;At.appendByte(_t),At.appendUint53(st.byteLength-rt);let Dt=At.buffer,Nt=new J;Nt.update(Dt),Nt.update(st.subarray(rt));let Yt=Nt.digest(),De=Yt.subarray(0,4);return st.set(N,rt-Dt.byteLength-4-N.byteLength),st.set(De,rt-Dt.byteLength-4),st.set(Dt,rt-Dt.byteLength),{hash:Yt,bytes:st.subarray(rt-Dt.byteLength-4-N.byteLength)}}function dr(_t,gt){if(!p(_t.readRawBytes(N.byteLength),N))throw new RangeError("Data does not begin with magic bytes 85 6f 4a 83");let rt=_t.readRawBytes(4),F=_t.offset,st=_t.readByte(),At=_t.readUint53(),Dt={chunkType:st,chunkLength:At,chunkData:_t.readRawBytes(At)};if(gt){let Nt=new J;Nt.update(_t.buf.subarray(F,_t.offset));let Yt=Nt.digest();if(!p(Yt.subarray(0,4),rt))throw new RangeError("checksum does not match data");Dt.hash=E(Yt)}return Dt}function mr(_t){let{changes:gt,actorIds:rt}=Le([_t],!0),F=gt[0],{hash:st,bytes:At}=rr(it,Nt=>{if(!Array.isArray(F.deps))throw new TypeError("deps is not an array");Nt.appendUint53(F.deps.length);for(let De of F.deps.slice().sort())Nt.appendRawBytes(g(De));Nt.appendHexString(F.actor),Nt.appendUint53(F.seq),Nt.appendUint53(F.startOp),Nt.appendInt53(F.time),Nt.appendPrefixedString(F.message||""),Nt.appendUint53(rt.length-1);for(let De of rt.slice(1))Nt.appendHexString(De);let Yt=_e(F.ops,!1);se(Nt,Yt);for(let De of Yt)Nt.appendRawBytes(De.encoder.buffer);F.extraBytes&&Nt.appendRawBytes(F.extraBytes)}),Dt=E(st);if(_t.hash&&_t.hash!==Dt)throw new RangeError(`Change hash does not match encoding: ${_t.hash} != ${Dt}`);return At.byteLength>=L?Lr(At):At}function ur(_t){_t[8]===q&&(_t=Sr(_t));let gt=new D(_t),rt=dr(gt,!0),F=new D(rt.chunkData);if(!gt.done)throw new RangeError("Encoded change has trailing data");if(rt.chunkType!==it)throw new RangeError(`Unexpected chunk type: ${rt.chunkType}`);let st=me(F),At=Z(F);for(let Dt=0;Dt<At.length;Dt++){if(At[Dt].columnId&lt)throw new RangeError("change must not contain deflated columns");At[Dt].buffer=F.readRawBytes(At[Dt].bufferLen)}if(!F.done){let Dt=F.buf.byteLength-F.offset;st.extraBytes=F.readRawBytes(Dt)}return st.columns=At,st.hash=rt.hash,st}function er(_t){let gt=ur(_t);return gt.ops=Ze(k(gt.columns,gt.actorIds,wt),!1),delete gt.actorIds,delete gt.columns,gt}function Gr(_t,gt){_t[8]===q&&(_t=Sr(_t));let rt=dr(new D(_t),gt);if(rt.chunkType!==it)throw new RangeError("Buffer chunk type is not a change");let F=me(new D(rt.chunkData));return F.change=_t,gt&&(F.hash=rt.hash),F}function Lr(_t){let gt=dr(new D(_t),!1);if(gt.chunkType!==it)throw new RangeError(`Unexpected chunk type: ${gt.chunkType}`);let rt=n.deflateRaw(gt.chunkData),F=new m;return F.appendRawBytes(_t.subarray(0,8)),F.appendByte(q),F.appendUint53(rt.byteLength),F.appendRawBytes(rt),F.buffer}function Sr(_t){let gt=dr(new D(_t),!1);if(gt.chunkType!==q)throw new RangeError(`Unexpected chunk type: ${gt.chunkType}`);let rt=n.inflateRaw(gt.chunkData),F=new m;return F.appendRawBytes(_t.subarray(0,8)),F.appendByte(it),F.appendUint53(rt.byteLength),F.appendRawBytes(rt),F.buffer}function j(_t){let gt=new D(_t),rt=[],F=0;for(;!gt.done;)dr(gt,!1),rt.push(_t.subarray(F,gt.offset)),F=gt.offset;return rt}function f(_t){let gt=[];for(let rt of _t)for(let F of j(rt))F[8]===Q?gt=gt.concat(zt(F)):(F[8]===it||F[8]===q)&&gt.push(er(F));return gt}function S(_t,gt){if(_t===gt)return 0;if(_t==="_root")return-1;if(gt==="_root")return 1;let rt=s(_t),F=s(gt);return rt.counter<F.counter?-1:rt.counter>F.counter?1:rt.actorId<F.actorId?-1:rt.actorId>F.actorId?1:0}function Y(_t,gt){let rt={};for(let st of _t){if(st.ops=[],rt[st.actor]||(rt[st.actor]=[]),st.seq!==rt[st.actor].length+1)throw new RangeError(`Expected seq = ${rt[st.actor].length+1}, got ${st.seq}`);if(st.seq>1&&rt[st.actor][st.seq-2].maxOp>st.maxOp)throw new RangeError("maxOp must increase monotonically per actor");rt[st.actor].push(st)}let F={};for(let st of gt){if(st.action==="del")throw new RangeError("document should not contain del operations");st.pred=F[st.id]?F[st.id].pred:[],F[st.id]=st;for(let At of st.succ){if(!F[At])if(st.elemId){let Dt=st.insert?st.id:st.elemId;F[At]={id:At,action:"del",obj:st.obj,elemId:Dt,pred:[]}}else F[At]={id:At,action:"del",obj:st.obj,key:st.key,pred:[]};F[At].pred.push(st.id)}delete st.succ}for(let st of Object.values(F))st.action==="del"&&gt.push(st);for(let st of gt){let{counter:At,actorId:Dt}=s(st.id),Nt=rt[Dt],Yt=0,De=Nt.length;for(;Yt<De;){let Qt=Math.floor((Yt+De)/2);Nt[Qt].maxOp<At?Yt=Qt+1:De=Qt}if(Yt>=Nt.length)throw new RangeError(`Operation ID ${st.id} outside of allowed range`);Nt[Yt].ops.push(st)}for(let st of _t){st.ops.sort((At,Dt)=>S(At.id,Dt.id)),st.startOp=st.maxOp-st.ops.length+1,delete st.maxOp;for(let At=0;At<st.ops.length;At++){let Dt=st.ops[At],Nt=`${st.startOp+At}@${st.actor}`;if(Dt.id!==Nt)throw new RangeError(`Expected opId ${Nt}, got ${Dt.id}`);delete Dt.id}}}function It(_t,gt){let rt={};for(let Dt=0;Dt<_t.length;Dt++){let Nt=_t[Dt];Nt.deps=[];for(let Yt of Nt.depsNum.map(De=>De.depsIndex)){if(!_t[Yt]||!_t[Yt].hash)throw new RangeError(`No hash for index ${Yt} while processing index ${Dt}`);let De=_t[Yt].hash;Nt.deps.push(De),rt[De]&&delete rt[De]}if(Nt.deps.sort(),delete Nt.depsNum,Nt.extraLen_datatype!==mt.BYTES)throw new RangeError(`Bad datatype for extra bytes: ${mt.BYTES}`);Nt.extraBytes=Nt.extraLen,delete Nt.extraLen_datatype,_t[Dt]=er(mr(Nt)),rt[_t[Dt].hash]=!0}let F=Object.keys(rt).sort(),st=F.length===gt.length,At=0;for(;st&&At<F.length;)st=F[At]===gt[At],At++;if(!st)throw new RangeError(`Mismatched heads hashes: expected ${gt.join(", ")}, got ${F.join(", ")}`)}function Ot(_t){let{changesColumns:gt,opsColumns:rt,actorIds:F,heads:st,headsIndexes:At,extraBytes:Dt}=_t;for(let Nt of gt)jt(Nt);for(let Nt of rt)jt(Nt);return rr(Q,Nt=>{Nt.appendUint53(F.length);for(let Yt of F)Nt.appendHexString(Yt);Nt.appendUint53(st.length);for(let Yt of st.sort())Nt.appendRawBytes(g(Yt));se(Nt,gt),se(Nt,rt);for(let Yt of gt)Nt.appendRawBytes(Yt.encoder.buffer);for(let Yt of rt)Nt.appendRawBytes(Yt.encoder.buffer);for(let Yt of At)Nt.appendUint53(Yt);Dt&&Nt.appendRawBytes(Dt)}).bytes}function nt(_t){let gt=new D(_t),rt=dr(gt,!0),F=new D(rt.chunkData);if(!gt.done)throw new RangeError("Encoded document has trailing data");if(rt.chunkType!==Q)throw new RangeError(`Unexpected chunk type: ${rt.chunkType}`);let st=[],At=F.readUint53();for(let Be=0;Be<At;Be++)st.push(F.readHexString());let Dt=[],Nt=[],Yt=F.readUint53();for(let Be=0;Be<Yt;Be++)Dt.push(E(F.readRawBytes(32)));let De=Z(F),Qt=Z(F);for(let Be=0;Be<De.length;Be++)De[Be].buffer=F.readRawBytes(De[Be].bufferLen),Se(De[Be]);for(let Be=0;Be<Qt.length;Be++)Qt[Be].buffer=F.readRawBytes(Qt[Be].bufferLen),Se(Qt[Be]);if(!F.done)for(let Be=0;Be<Yt;Be++)Nt.push(F.readUint53());let Ee=F.readRawBytes(F.buf.byteLength-F.offset);return{changesColumns:De,opsColumns:Qt,actorIds:st,heads:Dt,headsIndexes:Nt,extraBytes:Ee}}function zt(_t){let{changesColumns:gt,opsColumns:rt,actorIds:F,heads:st}=nt(_t),At=k(gt,F,ee),Dt=Ze(k(rt,F,Xt),!0);return Y(At,Dt),It(At,st),At}function jt(_t){_t.encoder.buffer.byteLength>=L&&(_t.encoder={buffer:n.deflateRaw(_t.encoder.buffer)},_t.columnId|=lt)}function Se(_t){_t.columnId&lt&&(_t.buffer=n.inflateRaw(_t.buffer),_t.columnId^=lt)}e.exports={COLUMN_TYPE:V,VALUE_TYPE:mt,ACTIONS:Rt,OBJECT_TYPE:Et,DOC_OPS_COLUMNS:Xt,CHANGE_COLUMNS:wt,DOCUMENT_COLUMNS:ee,encoderByColumnId:Or,decoderByColumnId:Cr,makeDecoders:et,decodeValue:Xe,splitContainers:j,encodeChange:mr,decodeChangeColumns:ur,decodeChange:er,decodeChangeMeta:Gr,decodeChanges:f,encodeDocumentHeader:Ot,decodeDocumentHeader:nt,decodeDocument:zt}}),O6=ce((t,e)=>{var{parseOpId:n,copyObject:u}=Us(),{COLUMN_TYPE:s,VALUE_TYPE:p,ACTIONS:y,OBJECT_TYPE:g,DOC_OPS_COLUMNS:E,CHANGE_COLUMNS:m,DOCUMENT_COLUMNS:D,encoderByColumnId:a,decoderByColumnId:H,makeDecoders:W,decodeValue:w,encodeChange:U,decodeChangeColumns:tt,decodeChangeMeta:J,decodeChanges:N,decodeDocumentHeader:Q,encodeDocumentHeader:it}=Bh(),q=600,L=10,V=7,lt=Math.floor(L*q/8),mt=0,Rt=1,Et=2,vt=3,wt=4,Xt=5,ee=6,ne=7,oe=8,Le=9,de=10,He=13,ze=14,Te=15,Je=13,Xe=14,Ae=15,_e=m.filter(rt=>["predNum","predActor","predCtr"].includes(rt.columnName)).map(rt=>rt.columnId);function Qe(rt,F,st){if(F.length===1)rt[F[0]]=st;else{let At=Object.assign({},rt[F[0]]);Qe(At,F.slice(1),st),rt[F[0]]=At}}function qe(rt,F,st,At){for(let Er of F)Er.decoder.reset();let{objActor:Dt,objCtr:Nt,keyActor:Yt,keyCtr:De,keyStr:Qt,idActor:Ee,idCtr:Be,insert:sr}=rt,[P,le,,,Vt,pe,kt,re,$e,,,,,Ce]=F.map(Er=>Er.decoder),Pe=0,Ne=0,tr=!1,lr=null,ar=null,wr=null,jr=null,ln=null,cn=null,qr=0;if(Nt!==null&&!At)for(;(!le.done||!P.done||!$e.done)&&(ar=le.readValue(),lr=st[P.readValue()],$e.skipValues(1),ar===null||!lr||ar<Nt||ar===Nt&&lr<Dt);)Pe+=1;if((ar!==Nt||lr!==Dt)&&!At)return{found:!0,skipCount:Pe,visibleCount:Ne};if(Qt!==null){for(Vt.skipValues(Pe);!Vt.done;){let Er=P.readValue();if(lr=Er===null?null:st[Er],ar=le.readValue(),ln=Vt.readValue(),ln!==null&&ln<Qt&&ar===Nt&&lr===Dt)Pe+=1;else break}return{found:!0,skipCount:Pe,visibleCount:Ne}}if(kt.skipValues(Pe),pe.skipValues(Pe),re.skipValues(Pe),Ce.skipValues(Pe),jr=kt.readValue(),wr=st[pe.readValue()],cn=re.readValue(),qr=Ce.readValue(),sr){if(!At&&De!==null&&De>0&&Yt!==null){for(Pe+=1;!kt.done&&!pe.done&&(jr!==De||wr!==Yt)&&(cn&&(tr=!1),qr===0&&!tr&&(Ne+=1,tr=!0),jr=kt.readValue(),wr=st[pe.readValue()],ar=le.readValue(),lr=st[P.readValue()],cn=re.readValue(),qr=Ce.readValue(),ar===Nt&&lr===Dt);)Pe+=1;if(ar!==Nt||lr!==Dt||jr!==De||wr!==Yt||!cn)return{found:!1,skipCount:Pe,visibleCount:Ne};if(cn&&(tr=!1),qr===0&&!tr&&(Ne+=1,tr=!0),kt.done||pe.done)return{found:!0,skipCount:Pe,visibleCount:Ne};jr=kt.readValue(),wr=st[pe.readValue()],ar=le.readValue(),lr=st[P.readValue()],cn=re.readValue(),qr=Ce.readValue()}for(;(!cn||jr>Be||jr===Be&&wr>Ee)&&ar===Nt&&lr===Dt&&(Pe+=1,cn&&(tr=!1),qr===0&&!tr&&(Ne+=1,tr=!0),!kt.done&&!pe.done);)jr=kt.readValue(),wr=st[pe.readValue()],ar=le.readValue(),lr=st[P.readValue()],cn=re.readValue(),qr=Ce.readValue()}else if(De!==null&&De>0&&Yt!==null){for(;(!cn||jr!==De||wr!==Yt)&&ar===Nt&&lr===Dt&&(Pe+=1,cn&&(tr=!1),qr===0&&!tr&&(Ne+=1,tr=!0),!kt.done&&!pe.done);)jr=kt.readValue(),wr=st[pe.readValue()],ar=le.readValue(),lr=st[P.readValue()],cn=re.readValue(),qr=Ce.readValue();if(ar!==Nt||lr!==Dt||jr!==De||wr!==Yt||!cn)return{found:!1,skipCount:Pe,visibleCount:Ne}}return{found:!0,skipCount:Pe,visibleCount:Ne}}function Ze(rt,F,st,At){let Dt=rt.blocks[F],Nt=rt.blocks[F+1];return Dt.lastObjectActor!==st||Dt.lastObjectCtr!==At||Dt.numVisible===void 0?0:Dt.lastVisibleActor===Nt.firstVisibleActor&&Dt.lastVisibleActor!==void 0&&Dt.lastVisibleCtr===Nt.firstVisibleCtr&&Dt.lastVisibleCtr!==void 0?Dt.numVisible-1:Dt.numVisible}function Ar(rt,F){let{objActor:st,objActorNum:At,objCtr:Dt,keyActor:Nt,keyCtr:Yt,keyStr:De}=F,Qt=0,Ee=0;if(Dt!==null)for(;Qt<rt.blocks.length-1;){let Be=rt.blocks[Qt].lastObjectActor===void 0?void 0:rt.actorIds[rt.blocks[Qt].lastObjectActor],sr=rt.blocks[Qt].lastObjectCtr;if(sr===null||sr<Dt||sr===Dt&&Be<st)Qt++;else break}if(De!==null){for(;Qt<rt.blocks.length-1;){let{lastObjectActor:sr,lastObjectCtr:P,lastKey:le}=rt.blocks[Qt];if(Dt===P&&At===sr&&le!==void 0&&le<De)Qt++;else break}let{skipCount:Be}=qe(F,rt.blocks[Qt].columns,rt.actorIds,!1);return{blockIndex:Qt,skipCount:Be,visibleCount:0}}else{let Be=Yt===null||Yt===0||Nt===null,sr=Nt===null?null:rt.actorIds.indexOf(Nt),P=!1;for(;;){if(!Be&&!P)for(;Qt<rt.blocks.length-1&&rt.blocks[Qt].lastObjectActor===At&&rt.blocks[Qt].lastObjectCtr===Dt&&!Cr(rt.blocks[Qt].bloom,sr,Yt);){if(rt.blocks[Qt].lastObjectCtr>Dt)throw new RangeError(`Reference element not found: ${Yt}@${Nt}`);Ee+=Ze(rt,Qt,At,Dt),Qt++}let{found:le,skipCount:Vt,visibleCount:pe}=qe(F,rt.blocks[Qt].columns,rt.actorIds,P);if(Qt===rt.blocks.length-1||rt.blocks[Qt].lastObjectActor!==At||rt.blocks[Qt].lastObjectCtr!==Dt){if(le)return{blockIndex:Qt,skipCount:Vt,visibleCount:Ee+pe};throw new RangeError(`Reference element not found: ${Yt}@${Nt}`)}else if(le&&Vt<rt.blocks[Qt].numOps)return{blockIndex:Qt,skipCount:Vt,visibleCount:Ee+pe};P=le&&F.insert,Ee+=Ze(rt,Qt,At,Dt),Qt++}}}function Or(rt,F,st){let At=8*rt.byteLength,Dt=st%At,Nt=F%At,Yt=((st^F)*16777619>>>0)%At;for(let De=0;De<V;De++)rt[Dt>>>3]|=1<<(Dt&7),Dt=(Dt+Nt)%At,Nt=(Nt+Yt)%At}function Cr(rt,F,st){let At=8*rt.byteLength,Dt=st%At,Nt=F%At,Yt=((st^F)*16777619>>>0)%At;for(let De=0;De<V;De++){if(!(rt[Dt>>>3]&1<<(Dt&7)))return!1;Dt=(Dt+Nt)%At,Nt=(Nt+Yt)%At}return!0}function et(rt){rt.bloom=new Uint8Array(lt),rt.numOps=0,rt.lastKey=void 0,rt.numVisible=void 0,rt.lastObjectActor=void 0,rt.lastObjectCtr=void 0,rt.firstVisibleActor=void 0,rt.firstVisibleCtr=void 0,rt.lastVisibleActor=void 0,rt.lastVisibleCtr=void 0;for(let Be of rt.columns)Be.decoder.reset();let[F,st,At,Dt,Nt,Yt,De,Qt,,,,,,Ee]=rt.columns.map(Be=>Be.decoder);for(;!De.done;){rt.numOps+=1;let Be=F.readValue(),sr=st.readValue(),P=At.readValue(),le=Dt.readValue(),Vt=Nt.readValue(),pe=Yt.readValue(),kt=De.readValue(),re=Qt.readValue(),$e=Ee.readValue();if((rt.lastObjectActor!==Be||rt.lastObjectCtr!==sr)&&(rt.numVisible=0,rt.lastObjectActor=Be,rt.lastObjectCtr=sr),Vt!==null)rt.lastKey=Vt;else if(re||le!==null){rt.lastKey=void 0;let Ce=re?pe:P,Pe=re?kt:le;Or(rt.bloom,Ce,Pe),$e===0&&(rt.firstVisibleActor===void 0&&(rt.firstVisibleActor=Ce),rt.firstVisibleCtr===void 0&&(rt.firstVisibleCtr=Pe),(rt.lastVisibleActor!==Ce||rt.lastVisibleCtr!==Pe)&&(rt.numVisible+=1,rt.lastVisibleActor=Ce,rt.lastVisibleCtr=Pe))}}}function k(rt,F,st,At){if(F[wt]!==null)rt.lastObjectCtr===F[Rt]&&rt.lastObjectActor===F[mt]&&(rt.lastKey===void 0||rt.lastKey<F[wt])&&(rt.lastKey=F[wt]);else{let Dt=F[ne]?F[Xt]:F[Et],Nt=F[ne]?F[ee]:F[vt];Or(rt.bloom,Dt,Nt),(F[Je]===0||At)&&(rt.firstVisibleActor===void 0&&(rt.firstVisibleActor=Dt),rt.firstVisibleCtr===void 0&&(rt.firstVisibleCtr=Nt),rt.lastVisibleActor=Dt,rt.lastVisibleCtr=Nt)}(rt.lastObjectCtr===void 0||F[mt]!==null&&F[Rt]!==null&&(rt.lastObjectCtr===null||rt.lastObjectCtr<F[Rt]||rt.lastObjectCtr===F[Rt]&&st[rt.lastObjectActor]<st[F[mt]]))&&(rt.lastObjectActor=F[mt],rt.lastObjectCtr=F[Rt],rt.lastKey=F[wt]!==null?F[wt]:void 0,rt.numVisible=0)}function Z(rt){for(let Dt of rt.columns)Dt.decoder.reset();let F=Math.ceil(rt.numOps/(.8*q)),st=[],At=0;for(let Dt=1;Dt<=F;Dt++){let Nt=Math.ceil(Dt*rt.numOps/F)-At,Yt=rt.columns.map(Qt=>({columnId:Qt.columnId,encoder:a(Qt.columnId)}));me(Yt,rt.columns,Nt);let De={columns:Yt.map(Qt=>{let Ee=H(Qt.columnId,Qt.encoder.buffer);return{columnId:Qt.columnId,decoder:Ee}})};et(De),st.push(De),At+=Nt}return st}function se(rt){let F=rt[0].columns.map(st=>({columnId:st.columnId,encoder:a(st.columnId)}));for(let st of rt){for(let At of st.columns)At.decoder.reset();me(F,st.columns,st.numOps)}return F}function me(rt,F,st){if(st===0)return;let At=0,Dt=-1,Nt=0,Yt=-1,De=0;for(let Qt of rt){for(;At<F.length&&F[At].columnId<Qt.columnId;)At++;let Ee=null;At<F.length&&F[At].columnId===Qt.columnId&&F[At].decoder.buf.byteLength>0&&(Ee=F[At].decoder);let Be=Qt.columnId>>4===Dt?Nt:st;if(Qt.columnId%8===s.GROUP_CARD)Dt=Qt.columnId>>4,Ee?Nt=Qt.encoder.copyFrom(Ee,{count:st,sumValues:!0}).sum:(Qt.encoder.appendValue(0,st),Nt=0);else if(Qt.columnId%8===s.VALUE_LEN)if(Ee){if(At+1===F.length||F[At+1].columnId!==Qt.columnId+1)throw new RangeError("VALUE_LEN column without accompanying VALUE_RAW column");Yt=Qt.columnId+1,De=Qt.encoder.copyFrom(Ee,{count:Be,sumValues:!0,sumShift:4}).sum}else Qt.encoder.appendValue(null,Be),Yt=Qt.columnId+1,De=0;else if(Qt.columnId%8===s.VALUE_RAW){if(Qt.columnId!==Yt)throw new RangeError("VALUE_RAW column without accompanying VALUE_LEN column");De>0&&Qt.encoder.appendRawBytes(Ee.readRawBytes(De))}else if(Ee)Qt.encoder.copyFrom(Ee,{count:Be});else{let sr=Qt.columnId%8===s.BOOLEAN?!1:null;Qt.encoder.appendValue(sr,Be)}}}function rr(rt,F){let st=[],At,Dt=-1,Nt=0,Yt=-1,De=0;for(let Qt of rt){if(Qt.columnId%8===s.VALUE_RAW){if(Qt.columnId!==Yt)throw new RangeError("unexpected VALUE_RAW column");At=Qt.decoder.readRawBytes(De)}else if(Qt.columnId%8===s.GROUP_CARD)Dt=Qt.columnId>>4,Nt=Qt.decoder.readValue()||0,At=Nt;else if(Qt.columnId>>4===Dt){At=[],Qt.columnId%8===s.VALUE_LEN&&(Yt=Qt.columnId+1,De=0);for(let Ee=0;Ee<Nt;Ee++){let Be=Qt.decoder.readValue();Qt.columnId%8===s.ACTOR_ID&&F&&typeof Be=="number"&&(Be=F[Be]),Qt.columnId%8===s.VALUE_LEN&&(De+=At>>>4),At.push(Be)}}else At=Qt.decoder.readValue(),Qt.columnId%8===s.ACTOR_ID&&F&&typeof At=="number"&&(At=F[At]),Qt.columnId%8===s.VALUE_LEN&&(Yt=Qt.columnId+1,De=At>>>4);st.push(At)}return st}function dr(rt,F,st){let At=0,Dt=-1,Nt=0;for(let Yt of rt){for(;At<F.length&&F[At].columnId<Yt.columnId;)At++;if(At<F.length&&F[At].columnId===Yt.columnId){let De=st[At];if(Yt.columnId%8===s.GROUP_CARD)Dt=Yt.columnId>>4,Nt=De,Yt.encoder.appendValue(De);else if(Yt.columnId>>4===Dt){if(!Array.isArray(De)||De.length!==Nt)throw new RangeError("bad group value");for(let Qt of De)Yt.encoder.appendValue(Qt)}else Yt.columnId%8===s.VALUE_RAW?De&&Yt.encoder.appendRawBytes(De):Yt.encoder.appendValue(De)}else if(Yt.columnId%8===s.GROUP_CARD)Dt=Yt.columnId>>4,Nt=0,Yt.encoder.appendValue(0);else if(Yt.columnId%8!==s.VALUE_RAW){let De=Yt.columnId>>4===Dt?Nt:1,Qt=null;Yt.columnId%8===s.BOOLEAN&&(Qt=!1),Yt.columnId%8===s.VALUE_LEN&&(Qt=0),Yt.encoder.appendValue(Qt,De)}}}function mr(rt,F){let st=rt.blocks[F];if(st.columns[oe].decoder.done){if(F===rt.blocks.length-1)return{docOp:null,blockIndex:F};F+=1,st=rt.blocks[F];for(let At of st.columns)At.decoder.reset();return{docOp:rr(st.columns),blockIndex:F}}else return{docOp:rr(st.columns),blockIndex:F}}function ur(rt,F){for(;F.changeIndex<F.changes.length-1&&(!F.columns||F.columns[oe].decoder.done);){F.changeIndex+=1;let At=F.changes[F.changeIndex];F.columns=W(At.columns,m),F.opCtr=At.startOp,F.columns[oe].decoder.done&&(At.maxOp=At.startOp-1),It(rt,F.columns);let{actorIds:Dt,actorTable:Nt}=Ot(rt.actorIds,At);rt.actorIds=Dt,F.actorTable=Nt,F.actorIndex=rt.actorIds.indexOf(At.actorIds[0])}if(F.columns[oe].decoder.done){F.done=!0,F.nextOp=null;return}F.nextOp=rr(F.columns,F.actorTable),F.nextOp[Xt]=F.actorIndex,F.nextOp[ee]=F.opCtr,F.changes[F.changeIndex].maxOp=F.opCtr,F.opCtr>rt.maxOp&&(rt.maxOp=F.opCtr),F.opCtr+=1;let st=F.nextOp;if(st[Rt]===null&&st[mt]!==null||st[Rt]!==null&&st[mt]===null)throw new RangeError(`Mismatched object reference: (${st[Rt]}, ${st[mt]})`);if(st[vt]===null&&st[Et]!==null||st[vt]===0&&st[Et]!==null||st[vt]>0&&st[Et]===null)throw new RangeError(`Mismatched operation key: (${st[vt]}, ${st[Et]})`)}function er(rt,F){return F==="list"||F==="text"?{objectId:rt,type:F,edits:[]}:{objectId:rt,type:F,props:{}}}function Gr(rt,F,st=1){let At=n(rt),Dt=n(F);return At.actorId===Dt.actorId&&At.counter+st===Dt.counter}function Lr(rt,F){if(rt.length===0){rt.push(F);return}let st=rt[rt.length-1];st.action==="insert"&&F.action==="insert"&&st.index===F.index-1&&st.value.type==="value"&&F.value.type==="value"&&st.elemId===st.opId&&F.elemId===F.opId&&Gr(st.elemId,F.elemId,1)&&st.value.datatype===F.value.datatype&&typeof st.value.value==typeof F.value.value?(st.action="multi-insert",F.value.datatype&&(st.datatype=F.value.datatype),st.values=[st.value.value,F.value.value],delete st.value,delete st.opId):st.action==="multi-insert"&&F.action==="insert"&&st.index+st.values.length===F.index&&F.value.type==="value"&&F.elemId===F.opId&&Gr(st.elemId,F.elemId,st.values.length)&&st.datatype===F.value.datatype&&typeof st.values[0]==typeof F.value.value?st.values.push(F.value.value):st.action==="remove"&&F.action==="remove"&&st.index===F.index?st.count+=F.count:rt.push(F)}function Sr(rt,F,st,At,Dt,Nt){let Yt=!1;if(Nt)for(;!Yt&&rt.length>0;){let De=rt[rt.length-1];if((De.action==="insert"||De.action==="update")&&De.index===F)rt.pop(),Yt=De.action==="insert";else if(De.action==="multi-insert"&&De.index+De.values.length-1===F)De.values.pop(),Yt=!0;else break}Yt?Lr(rt,{action:"insert",index:F,elemId:st,opId:At,value:Dt}):Lr(rt,{action:"update",index:F,opId:At,value:Dt})}function j(rt,F,st){let At=[];for(;rt.length>0;){let Nt=rt[rt.length-1];if(Nt.action==="insert"){if(Nt.index!==F)throw new RangeError("last edit has unexpected index");At.unshift(rt.pop());break}else if(Nt.action==="update"){if(Nt.index!==F)throw new RangeError("last edit has unexpected index");At.unshift(rt.pop())}else throw new RangeError("last edit has unexpected action")}let Dt=!0;for(let Nt of At)Sr(rt,F,st,Nt.opId,Nt.value,Dt),Dt=!1}function f(rt,F,st,At,Dt,Nt,Yt,De){let Qt=!F,Ee=At[oe]<y.length?g[y[At[oe]]]:null,Be=`${At[ee]}@${Dt.actorIds[At[Xt]]}`,sr=At[ne]?At[Xt]:At[Et],P=At[ne]?At[ee]:At[vt],le=At[wt]?At[wt]:`${P}@${Dt.actorIds[sr]}`;At[oe]%2===0&&!Dt.objectMeta[Be]&&(Dt.objectMeta[Be]={parentObj:st,parentKey:le,opId:Be,type:Ee,children:{}},Qe(Dt.objectMeta,[st,"children",le,Be],{objectId:Be,type:Ee,props:{}}));let Vt=!Nt[le];Nt[le]||(Nt[le]={visibleOps:[],hasChild:!1});let pe=De!==void 0&&At[Je]>0;pe||(Nt[le].visibleOps.push(At),Nt[le].hasChild=Nt[le].hasChild||At[oe]%2===0);let kt=Dt.objectMeta[st].children[le];if(Nt[le].hasChild||kt&&Object.keys(kt).length>0){let Pe={};for(let Ne of Nt[le].visibleOps){let tr=`${Ne[ee]}@${Dt.actorIds[Ne[Xt]]}`;if(y[Ne[oe]]==="set")Pe[tr]=Object.assign({type:"value"},w(Ne[Le],Ne[de]));else if(Ne[oe]%2===0){let lr=Ne[oe]<y.length?g[y[Ne[oe]]]:null;Pe[tr]=er(tr,lr)}}Qe(Dt.objectMeta,[st,"children",le],Pe)}let re,$e;if(pe&&y[At[oe]]==="set"&&(At[Le]&15)===p.COUNTER){Nt[le]||(Nt[le]={visibleOps:[],hasChild:!1}),Nt[le].counterStates||(Nt[le].counterStates={});let Pe=Nt[le].counterStates,Ne={opId:Be,value:w(At[Le],At[de]).value,succs:{}};for(let tr=0;tr<At[Je];tr++){let lr=`${At[Ae][tr]}@${Dt.actorIds[At[Xe][tr]]}`;Pe[lr]=Ne,Ne.succs[lr]=!0}}else if(y[At[oe]]==="inc"){if(!Nt[le]||!Nt[le].counterStates||!Nt[le].counterStates[Be])throw new RangeError(`increment operation ${Be} for unknown counter`);let Pe=Nt[le].counterStates[Be];Pe.value+=w(At[Le],At[de]).value,delete Pe.succs[Be],Object.keys(Pe.succs).length===0&&(re=Pe.opId,$e={type:"value",datatype:"counter",value:Pe.value})}else pe||(y[At[oe]]==="set"?(re=Be,$e=Object.assign({type:"value"},w(At[Le],At[de]))):At[oe]%2===0&&(rt[Be]||(rt[Be]=er(Be,Ee)),re=Be,$e=rt[Be]));rt[st]||(rt[st]=er(st,Dt.objectMeta[st].type));let Ce=rt[st];if(At[wt]===null)if(De===0&&!Qt&&Nt[le].action==="insert"&&(Nt[le].action="update",j(Ce.edits,Yt,le),F&&F.lastObjectActor===At[mt]&&F.lastObjectCtr===At[Rt]&&(F.numVisible-=1)),$e)if(!Nt[le].action&&(De===void 0||Qt))Nt[le].action="insert",Lr(Ce.edits,{action:"insert",index:Yt,elemId:le,opId:re,value:$e}),F&&F.lastObjectActor===At[mt]&&F.lastObjectCtr===At[Rt]&&(F.numVisible+=1);else if(Nt[le].action==="remove"){let Pe=Ce.edits[Ce.edits.length-1];if(Pe.action!=="remove")throw new RangeError("last edit has unexpected type");Pe.count>1?Pe.count-=1:Ce.edits.pop(),Nt[le].action="update",Sr(Ce.edits,Yt,le,re,$e,!0),F&&F.lastObjectActor===At[mt]&&F.lastObjectCtr===At[Rt]&&(F.numVisible+=1)}else Sr(Ce.edits,Yt,le,re,$e,!Nt[le].action),Nt[le].action||(Nt[le].action="update");else De===0&&!Nt[le].action&&(Nt[le].action="remove",Lr(Ce.edits,{action:"remove",index:Yt,count:1}),F&&F.lastObjectActor===At[mt]&&F.lastObjectCtr===At[Rt]&&(F.numVisible-=1));else($e||!Qt)&&((Vt||!Ce.props[At[wt]])&&(Ce.props[At[wt]]={}),$e&&(Ce.props[At[wt]][re]=$e))}function S(rt,F,st,At,Dt,Nt,Yt){let De=At.nextOp,Qt=De[ne],Ee=De[mt],Be=De[Rt],sr=Ee===null?"_root":`${Be}@${Dt.actorIds[Ee]}`,P=At.actorIndex,le=Dt.actorIds[P],Vt=!1,pe=!1,kt={},re;({docOp:re,blockIndex:Yt}=mr(Dt,Yt));let $e=re===null?0:1,Ce=re===null?0:re[Je],Pe=null,Ne=[],tr=[],lr=[],ar=null;for(At.objectIds.add(sr);;){if(Ne.length===0){Vt=!1;let Er=At.nextOp;for(;!At.done&&Er[Xt]===P&&Er[ne]===Qt&&Er[mt]===De[mt]&&Er[Rt]===De[Rt];){let Tr=Ne.length>0?Ne[Ne.length-1]:null,gn=!1;for(let Kn=0;Kn<Er[He];Kn++)for(let tn of Ne)Er[ze][Kn]===tn[Xt]&&Er[Te][Kn]===tn[ee]&&(gn=!0);if(Er!==De&&!(Qt&&Tr!==null&&Er[wt]===null&&Er[Et]===Tr[Xt]&&Er[vt]===Tr[ee])&&!(!Qt&&Tr!==null&&Er[wt]!==null&&Er[wt]===Tr[wt]&&!gn)&&!(!Qt&&Tr!==null&&Er[wt]===null&&Tr[wt]===null&&Er[Et]===Tr[Et]&&Er[vt]===Tr[vt]&&!gn)&&!(!Qt&&Tr===null&&Er[wt]===null&&re&&re[ne]&&re[wt]===null&&re[Xt]===Er[Et]&&re[ee]===Er[vt])&&!(!Qt&&Tr===null&&Er[wt]!==null&&ar!==null&&ar<Er[wt]))break;ar=Er!==null?Er[wt]:null,Ne.push(At.nextOp),tr.push(At.columns),lr.push(new Array(At.nextOp[He])),ur(Dt,At),Er=At.nextOp}}Ne.length>0&&(Pe=Ne[0]);let wr=re&&re[mt]===Pe[mt]&&re[Rt]===Pe[Rt],jr=re&&re[wt]!==null&&re[wt]===Pe[wt],ln=re&&re[wt]===null&&Pe[wt]===null&&(!re[ne]&&re[Et]===Pe[Et]&&re[vt]===Pe[vt]||re[ne]&&re[Xt]===Pe[Et]&&re[ee]===Pe[vt]);if(Ne.length===0&&!(wr&&(jr||ln)))break;let cn=!1,qr=0;if(Qt||!wr||re[wt]===null&&Pe[wt]!==null||re[wt]!==null&&Pe[wt]!==null&&Pe[wt]<re[wt]){if(qr=Ne.length,!wr&&!Vt&&Pe[wt]===null&&!Pe[ne])throw new RangeError(`could not find list element with ID: ${Pe[vt]}@${Dt.actorIds[Pe[Et]]}`)}else if(jr||ln||Vt){for(let Er=0;Er<Ne.length;Er++){let Tr=Ne[Er];for(let gn=0;gn<Tr[He];gn++)if(Tr[ze][gn]===re[Xt]&&Tr[Te][gn]===re[ee]){let Kn=0;for(;Kn<re[Je]&&(re[Ae][Kn]<Tr[ee]||re[Ae][Kn]===Tr[ee]&&Dt.actorIds[re[Xe][Kn]]<le);)Kn++;re[Ae].splice(Kn,0,Tr[ee]),re[Xe].splice(Kn,0,P),re[Je]++,lr[Er][gn]=!0;break}}if(ln&&(Vt=!0),Vt&&!ln)qr=Ne.length;else if(Ne.length===0||re[ee]<Pe[ee]||re[ee]===Pe[ee]&&Dt.actorIds[re[Xt]]<le){cn=!0,f(rt,F,sr,re,Dt,kt,Nt,Ce);for(let Er=Ne.length-1;Er>=0;Er--){let Tr=!0;for(let gn=0;gn<Ne[Er][He];gn++)lr[Er][gn]||(Tr=!1);y[Ne[Er][oe]]==="del"&&Tr&&(Ne.splice(Er,1),tr.splice(Er,1),lr.splice(Er,1))}}else{if(re[ee]===Pe[ee]&&Dt.actorIds[re[Xt]]===le)throw new RangeError(`duplicate operation ID: ${Pe[ee]}@${le}`);qr=1}}else cn=!0;if(cn&&(dr(st,Dt.blocks[Yt].columns,re),k(F,re,Dt.actorIds,!1),re[ne]&&pe&&(pe=!1,Nt++),re[Je]===0&&(pe=!0),F.numOps++,{docOp:re,blockIndex:Yt}=mr(Dt,Yt),re!==null&&($e++,Ce=re[Je])),qr>0){for(let Er=0;Er<qr;Er++){let Tr=Ne[Er];for(let gn=0;gn<Tr[He];gn++)if(!lr[Er][gn])throw new RangeError(`no matching operation for pred: ${Tr[Te][gn]}@${Dt.actorIds[Tr[ze][gn]]}`);dr(st,tr[Er],Tr),k(F,Tr,Dt.actorIds,!0),f(rt,F,sr,Tr,Dt,kt,Nt),Tr[ne]?(pe=!1,Nt++):pe=!0}qr===Ne.length?(Ne.length=0,tr.length=0,lr.length=0):(Ne.splice(0,qr),tr.splice(0,qr),lr.splice(0,qr)),F.numOps+=qr}}return re&&(dr(st,Dt.blocks[Yt].columns,re),F.numOps++,k(F,re,Dt.actorIds,!1)),{docOpsConsumed:$e,blockIndex:Yt}}function Y(rt,F,st){let[At,Dt,Nt,Yt,De,Qt,Ee,Be]=F.nextOp,sr=At===null?null:st.actorIds[At],P=Nt===null?null:st.actorIds[Nt],le={objActor:sr,objActorNum:At,objCtr:Dt,keyActor:P,keyActorNum:Nt,keyCtr:Yt,keyStr:De,idActor:st.actorIds[Qt],idCtr:Ee,insert:Be,objId:sr===null?"_root":`${Dt}@${sr}`},{blockIndex:Vt,skipCount:pe,visibleCount:kt}=Ar(st,le),re=st.blocks[Vt];for(let wr of re.columns)wr.decoder.reset();let $e=pe===0||re.firstVisibleActor===void 0||!Be&&re.firstVisibleActor===Nt&&re.firstVisibleCtr===Yt,Ce={columns:void 0,bloom:new Uint8Array(re.bloom),numOps:pe,lastKey:re.lastKey,numVisible:re.numVisible,lastObjectActor:re.lastObjectActor,lastObjectCtr:re.lastObjectCtr,firstVisibleActor:$e?void 0:re.firstVisibleActor,firstVisibleCtr:$e?void 0:re.firstVisibleCtr,lastVisibleActor:void 0,lastVisibleCtr:void 0},Pe=re.columns.map(wr=>({columnId:wr.columnId,encoder:a(wr.columnId)}));me(Pe,re.columns,pe);let{blockIndex:Ne,docOpsConsumed:tr}=S(rt,Ce,Pe,F,st,kt,Vt),lr=st.blocks[Ne],ar=-pe-tr;for(let wr=Vt;wr<=Ne;wr++)ar+=st.blocks[wr].numOps;me(Pe,lr.columns,ar),Ce.numOps+=ar;for(let wr of lr.columns)if(!wr.decoder.done)throw new RangeError(`excess ops in column ${wr.columnId}`);if(Ce.columns=Pe.map(wr=>{let jr=H(wr.columnId,wr.encoder.buffer);return{columnId:wr.columnId,decoder:jr}}),Vt===Ne&&Ce.numOps<=q)ar>0&&re.lastVisibleActor!==void 0&&re.lastVisibleCtr!==void 0&&(Ce.lastVisibleActor=re.lastVisibleActor,Ce.lastVisibleCtr=re.lastVisibleCtr),st.blocks[Vt]=Ce;else{let wr=Z(Ce);st.blocks.splice(Vt,Ne-Vt+1,...wr)}}function It(rt,F){if(F[mt].columnId!==m[mt].columnId||m[mt].columnName!=="objActor"||F[Rt].columnId!==m[Rt].columnId||m[Rt].columnName!=="objCtr"||F[Et].columnId!==m[Et].columnId||m[Et].columnName!=="keyActor"||F[vt].columnId!==m[vt].columnId||m[vt].columnName!=="keyCtr"||F[wt].columnId!==m[wt].columnId||m[wt].columnName!=="keyStr"||F[Xt].columnId!==m[Xt].columnId||m[Xt].columnName!=="idActor"||F[ee].columnId!==m[ee].columnId||m[ee].columnName!=="idCtr"||F[ne].columnId!==m[ne].columnId||m[ne].columnName!=="insert"||F[oe].columnId!==m[oe].columnId||m[oe].columnName!=="action"||F[Le].columnId!==m[Le].columnId||m[Le].columnName!=="valLen"||F[de].columnId!==m[de].columnId||m[de].columnName!=="valRaw"||F[He].columnId!==m[He].columnId||m[He].columnName!=="predNum"||F[ze].columnId!==m[ze].columnId||m[ze].columnName!=="predActor"||F[Te].columnId!==m[Te].columnId||m[Te].columnName!=="predCtr")throw new RangeError("unexpected columnId");let st=rt.blocks[0].columns;if(!F.every(At=>_e.includes(At.columnId)||st.find(Dt=>Dt.columnId===At.columnId))){let At=st.map(Dt=>({columnId:Dt.columnId}));for(let Dt of F){let{columnId:Nt}=Dt;!_e.includes(Nt)&&!st.find(Yt=>Yt.columnId===Nt)&&At.push({columnId:Nt})}At.sort((Dt,Nt)=>Dt.columnId-Nt.columnId);for(let Dt=0;Dt<rt.blocks.length;Dt++){let Nt=u(rt.blocks[Dt]);Nt.columns=W(Nt.columns.map(Yt=>({columnId:Yt.columnId,buffer:Yt.decoder.buf})),At),rt.blocks[Dt]=Nt}}}function Ot(rt,F){if(rt.indexOf(F.actorIds[0])<0){if(F.seq!==1)throw new RangeError(`Seq ${F.seq} is the first change for actor ${F.actorIds[0]}`);rt=rt.concat([F.actorIds[0]])}let st=[];for(let At of F.actorIds){let Dt=rt.indexOf(At);if(Dt<0)throw new RangeError(`actorId ${At} is not known to document`);st.push(Dt)}return{actorIds:rt,actorTable:st}}function nt(rt,F,st){for(let At of F){let Dt=st.objectMeta[At],Nt=null,Yt=!1;for(;;){let De=Nt&&Object.keys(Dt.children[Nt.parentKey]).length>0;if(rt[At]||(rt[At]=er(At,Dt.type)),Nt&&De)if(Dt.type==="list"||Dt.type==="text"){for(let Qt of rt[At].edits)Qt.opId&&Dt.children[Nt.parentKey][Qt.opId]&&(Yt=!0);if(!Yt){let Qt=n(At),Ee=n(Nt.parentKey),Be={objActor:Qt.actorId,objCtr:Qt.counter,keyActor:Ee.actorId,keyCtr:Ee.counter,objActorNum:st.actorIds.indexOf(Qt.actorId),keyActorNum:st.actorIds.indexOf(Ee.actorId),keyStr:null,insert:!1,objId:At},{visibleCount:sr}=Ar(st,Be);for(let[P,le]of Object.entries(Dt.children[Nt.parentKey])){let Vt=le;le.objectId&&(rt[le.objectId]||(rt[le.objectId]=er(le.objectId,le.type)),Vt=rt[le.objectId]);let pe={action:"update",index:sr,opId:P,value:Vt};Lr(rt[At].edits,pe)}}}else{rt[At].props[Nt.parentKey]||(rt[At].props[Nt.parentKey]={});let Qt=rt[At].props[Nt.parentKey];for(let[Ee,Be]of Object.entries(Dt.children[Nt.parentKey]))Qt[Ee]?Yt=!0:Be.objectId?(rt[Be.objectId]||(rt[Be.objectId]=er(Be.objectId,Be.type)),Qt[Ee]=rt[Be.objectId]):Qt[Ee]=Be}if(Yt||!Dt.parentObj||Nt&&!De)break;Nt=Dt,At=Dt.parentObj,Dt=st.objectMeta[At]}}return rt}function zt(rt,F,st,At,Dt){let Nt=new Set(st.heads),Yt=new Set,De=u(st.clock),Qt=[],Ee=[];for(let Be of F){if(st.changeIndexByHash[Be.hash]!==void 0||Yt.has(Be.hash))continue;let sr=(De[Be.actor]||0)+1,P=!0;for(let le of Be.deps){let Vt=st.changeIndexByHash[le];(Vt===void 0||Vt===-1)&&!Yt.has(le)&&(P=!1)}if(!P)Ee.push(Be);else if(Be.seq<sr){if(Dt)throw new RangeError(`Reuse of sequence number ${Be.seq} for actor ${Be.actor}`);return[[],F]}else{if(Be.seq>sr)throw new RangeError(`Skipped sequence number ${sr} for actor ${Be.actor}`);De[Be.actor]=Be.seq,Yt.add(Be.hash);for(let le of Be.deps)Nt.delete(le);Nt.add(Be.hash),Qt.push(Be)}}if(Qt.length>0){let Be={changes:Qt,changeIndex:-1,objectIds:At};for(ur(st,Be);!Be.done;)Y(rt,Be,st);st.heads=[...Nt].sort(),st.clock=De}return[Qt,Ee]}function jt(rt){for(let Be of rt.blocks[0].columns)Be.decoder.reset();let F={},st=null,At=0,Dt={_root:{objectId:"_root",type:"map",props:{}}},Nt=null,Yt=null,De="_root",Qt=!1,Ee=0;for(;{docOp:st,blockIndex:At}=mr(rt,At),st!==null;){(st[mt]!==Nt||st[Rt]!==Yt)&&(De=`${st[Rt]}@${rt.actorIds[st[mt]]}`,Nt=st[mt],Yt=st[Rt],F={},Ee=0,Qt=!1),st[ne]&&Qt&&(Qt=!1,Ee++),st[Je]===0&&(Qt=!0),st[ee]>rt.maxOp&&(rt.maxOp=st[ee]);for(let Be=0;Be<st[Je];Be++)st[Ae][Be]>rt.maxOp&&(rt.maxOp=st[Ae][Be]);f(Dt,null,De,st,rt,F,Ee,st[Je])}return Dt._root}function Se(rt){let F=W(rt.changesColumns,D),st=F[0].decoder,At=F[1].decoder,Dt=F[5].decoder,Nt=F[6].decoder;if(F[0].columnId!==D[0].columnId||D[0].columnName!=="actor"||F[1].columnId!==D[1].columnId||D[1].columnName!=="seq"||F[5].columnId!==D[5].columnId||D[5].columnName!=="depsNum"||F[6].columnId!==D[6].columnId||D[6].columnName!=="depsIndex")throw new RangeError("unexpected columnId");let Yt=0,De={},Qt=[],Ee=new Set;for(;!st.done;){let P=st.readValue(),le=At.readValue(),Vt=Dt.readValue(),pe=rt.actorIds[P];if(le!==1&&le!==De[pe]+1)throw new RangeError(`Expected seq ${De[pe]+1}, got ${le} for actor ${pe}`);Qt.push(P),De[pe]=le,Ee.add(Yt);for(let kt=0;kt<Vt;kt++)Ee.delete(Nt.readValue());Yt++}let Be=[...Ee].map(P=>rt.actorIds[Qt[P]]).sort();for(let P of F)P.decoder.reset();let sr=F.map(P=>({columnId:P.columnId,encoder:a(P.columnId)}));return me(sr,F,Yt),{clock:De,headActors:Be,encoders:sr,numChanges:Yt}}function _t(rt,F,st,At){dr(rt,D,[st.indexOf(F.actor),F.seq,F.maxOp,F.time,F.message,F.deps.length,F.deps.map(Dt=>At[Dt]),F.extraBytes?F.extraBytes.byteLength<<4|p.BYTES:p.BYTES,F.extraBytes])}var gt=class vp{constructor(F){if(this.maxOp=0,this.haveHashGraph=!1,this.changes=[],this.changeIndexByHash={},this.dependenciesByHash={},this.dependentsByHash={},this.hashesByActor={},this.actorIds=[],this.heads=[],this.clock={},this.queue=[],this.objectMeta={_root:{parentObj:null,parentKey:null,opId:null,type:"map",children:{}}},F){let st=Q(F),{clock:At,headActors:Dt,encoders:Nt,numChanges:Yt}=Se(st);if(this.binaryDoc=F,this.changes=new Array(Yt),this.actorIds=st.actorIds,this.heads=st.heads,this.clock=At,this.changesEncoders=Nt,this.extraBytes=st.extraBytes,st.heads.length===1&&Dt.length===1&&(this.hashesByActor[Dt[0]]=[],this.hashesByActor[Dt[0]][At[Dt[0]]-1]=st.heads[0]),st.heads.length===st.headsIndexes.length)for(let Qt=0;Qt<st.heads.length;Qt++)this.changeIndexByHash[st.heads[Qt]]=st.headsIndexes[Qt];else if(st.heads.length===1)this.changeIndexByHash[st.heads[0]]=Yt-1;else for(let Qt of st.heads)this.changeIndexByHash[Qt]=-1;this.blocks=[{columns:W(st.opsColumns,E)}],et(this.blocks[0]),this.blocks[0].numOps>q&&(this.blocks=Z(this.blocks[0]));let De={blocks:this.blocks,actorIds:this.actorIds,objectMeta:this.objectMeta,maxOp:0};this.initPatch=jt(De),this.maxOp=De.maxOp}else this.haveHashGraph=!0,this.changesEncoders=D.map(st=>({columnId:st.columnId,encoder:a(st.columnId)})),this.blocks=[{columns:W([],E),bloom:new Uint8Array(lt),numOps:0,lastKey:void 0,numVisible:void 0,lastObjectActor:void 0,lastObjectCtr:void 0,firstVisibleActor:void 0,firstVisibleCtr:void 0,lastVisibleActor:void 0,lastVisibleCtr:void 0}]}clone(){let F=new vp;return F.maxOp=this.maxOp,F.haveHashGraph=this.haveHashGraph,F.changes=this.changes.slice(),F.changeIndexByHash=u(this.changeIndexByHash),F.dependenciesByHash=u(this.dependenciesByHash),F.dependentsByHash=Object.entries(this.dependentsByHash).reduce((st,[At,Dt])=>(st[At]=Dt.slice(),st),{}),F.hashesByActor=Object.entries(this.hashesByActor).reduce((st,[At,Dt])=>(st[At]=Dt.slice(),st),{}),F.actorIds=this.actorIds,F.heads=this.heads,F.clock=this.clock,F.blocks=this.blocks,F.objectMeta=this.objectMeta,F.queue=this.queue,F}applyChanges(F,st=!1){let At=F.map(Be=>{let sr=tt(Be);return sr.buffer=Be,sr}),Dt={_root:{objectId:"_root",type:"map",props:{}}},Nt={maxOp:this.maxOp,changeIndexByHash:this.changeIndexByHash,actorIds:this.actorIds,heads:this.heads,clock:this.clock,blocks:this.blocks.slice(),objectMeta:Object.assign({},this.objectMeta)},Yt=this.queue.length===0?At:At.concat(this.queue),De=[],Qt=new Set;for(;;){let[Be,sr]=zt(Dt,Yt,Nt,Qt,this.haveHashGraph);Yt=sr;for(let P=0;P<Be.length;P++)Nt.changeIndexByHash[Be[P].hash]=this.changes.length+De.length+P;if(Be.length>0&&(De=De.concat(Be)),Yt.length===0)break;if(Be.length===0){if(this.haveHashGraph)break;this.computeHashGraph(),Nt.changeIndexByHash=this.changeIndexByHash}}nt(Dt,Qt,Nt);for(let Be of De){this.changes.push(Be.buffer),this.hashesByActor[Be.actor]||(this.hashesByActor[Be.actor]=[]),this.hashesByActor[Be.actor][Be.seq-1]=Be.hash,this.changeIndexByHash[Be.hash]=this.changes.length-1,this.dependenciesByHash[Be.hash]=Be.deps,this.dependentsByHash[Be.hash]=[];for(let sr of Be.deps)this.dependentsByHash[sr]||(this.dependentsByHash[sr]=[]),this.dependentsByHash[sr].push(Be.hash);_t(this.changesEncoders,Be,Nt.actorIds,this.changeIndexByHash)}this.maxOp=Nt.maxOp,this.actorIds=Nt.actorIds,this.heads=Nt.heads,this.clock=Nt.clock,this.blocks=Nt.blocks,this.objectMeta=Nt.objectMeta,this.queue=Yt,this.binaryDoc=null,this.initPatch=null;let Ee={maxOp:this.maxOp,clock:this.clock,deps:this.heads,pendingChanges:this.queue.length,diffs:Dt._root};return st&&At.length===1&&(Ee.actor=At[0].actor,Ee.seq=At[0].seq),Ee}computeHashGraph(){let F=this.save();this.haveHashGraph=!0,this.changes=[],this.changeIndexByHash={},this.dependenciesByHash={},this.dependentsByHash={},this.hashesByActor={},this.clock={};for(let st of N([F])){let At=U(st);this.changes.push(At),this.changeIndexByHash[st.hash]=this.changes.length-1,this.dependenciesByHash[st.hash]=st.deps,this.dependentsByHash[st.hash]=[];for(let Nt of st.deps)this.dependentsByHash[Nt].push(st.hash);st.seq===1&&(this.hashesByActor[st.actor]=[]),this.hashesByActor[st.actor].push(st.hash);let Dt=(this.clock[st.actor]||0)+1;if(st.seq!==Dt)throw new RangeError(`Expected seq ${Dt}, got seq ${st.seq} from actor ${st.actor}`);this.clock[st.actor]=st.seq}}getChanges(F){if(this.haveHashGraph||this.computeHashGraph(),F.length===0)return this.changes.slice();let st=[],At={},Dt=[];for(let Nt of F){At[Nt]=!0;let Yt=this.dependentsByHash[Nt];if(!Yt)throw new RangeError(`hash not found: ${Nt}`);st.push(...Yt)}for(;st.length>0;){let Nt=st.pop();if(At[Nt]=!0,Dt.push(Nt),!this.dependenciesByHash[Nt].every(Yt=>At[Yt]))break;st.push(...this.dependentsByHash[Nt])}if(st.length===0&&this.heads.every(Nt=>At[Nt]))return Dt.map(Nt=>this.changes[this.changeIndexByHash[Nt]]);for(st=F.slice(),At={};st.length>0;){let Nt=st.pop();if(!At[Nt]){let Yt=this.dependenciesByHash[Nt];if(!Yt)throw new RangeError(`hash not found: ${Nt}`);st.push(...Yt),At[Nt]=!0}}return this.changes.filter(Nt=>!At[J(Nt,!0).hash])}getChangesAdded(F){this.haveHashGraph||this.computeHashGraph();let st=this.heads.slice(),At={},Dt=[];for(;st.length>0;){let Nt=st.pop();!At[Nt]&&F.changeIndexByHash[Nt]===void 0&&(At[Nt]=!0,Dt.push(Nt),st.push(...this.dependenciesByHash[Nt]))}return Dt.reverse().map(Nt=>this.changes[this.changeIndexByHash[Nt]])}getChangeByHash(F){return this.haveHashGraph||this.computeHashGraph(),this.changes[this.changeIndexByHash[F]]}getMissingDeps(F=[]){this.haveHashGraph||this.computeHashGraph();let st=new Set(F),At=new Set;for(let Nt of this.queue){At.add(Nt.hash);for(let Yt of Nt.deps)st.add(Yt)}let Dt=[];for(let Nt of st)this.changeIndexByHash[Nt]===void 0&&!At.has(Nt)&&Dt.push(Nt);return Dt.sort()}save(){if(this.binaryDoc)return this.binaryDoc;let F=this.changesEncoders.map(At=>({columnId:At.columnId,encoder:a(At.columnId)})),st=this.changesEncoders.map(At=>{let Dt=H(At.columnId,At.encoder.buffer);return{columnId:At.columnId,decoder:Dt}});return me(F,st,this.changes.length),this.binaryDoc=it({changesColumns:this.changesEncoders,opsColumns:se(this.blocks),actorIds:this.actorIds,heads:this.heads,headsIndexes:this.heads.map(At=>this.changeIndexByHash[At]),extraBytes:this.extraBytes}),this.changesEncoders=F,this.binaryDoc}getPatch(){let F={_root:{parentObj:null,parentKey:null,opId:null,type:"map",children:{}}},st={blocks:this.blocks,actorIds:this.actorIds,objectMeta:F,maxOp:0},At=this.initPatch?this.initPatch:jt(st);return{maxOp:this.maxOp,clock:this.clock,deps:this.heads,pendingChanges:this.queue.length,diffs:At}}};e.exports={MAX_BLOCK_SIZE:q,BackendDoc:gt,bloomFilterContains:Cr}}),T6=ce((t,e)=>{function n(u){if(u.frozen)throw new Error("Attempting to use an outdated Automerge document that has already been updated. Please use the latest document state, or call Automerge.clone() if you really need to use this old document state.");return u.state}e.exports={backendState:n}}),_2=ce((t,e)=>{var{encodeChange:n}=Bh(),{BackendDoc:u}=O6(),{backendState:s}=T6();function p(){return{state:new u,heads:[]}}function y(q){return{state:s(q).clone(),heads:q.heads}}function g(q){q.state=null,q.frozen=!0}function E(q,L){let V=s(q),lt=V.applyChanges(L);return q.frozen=!0,[{state:V,heads:V.heads},lt]}function m(q,L,V){if(q.hashesByActor[L]&&q.hashesByActor[L][V]||!q.haveHashGraph&&(q.computeHashGraph(),q.hashesByActor[L]&&q.hashesByActor[L][V]))return q.hashesByActor[L][V];throw new RangeError(`Unknown change: actorId = ${L}, seq = ${V+1}`)}function D(q,L){let V=s(q);if(L.seq<=V.clock[L.actor])throw new RangeError("Change request has already been applied");if(L.seq>1){let Et=m(V,L.actor,L.seq-2);if(!Et)throw new RangeError(`Cannot find hash of localChange before seq=${L.seq}`);let vt={[Et]:!0};for(let wt of L.deps)vt[wt]=!0;L.deps=Object.keys(vt).sort()}let lt=n(L),mt=V.applyChanges([lt],!0);q.frozen=!0;let Rt=m(V,L.actor,L.seq-1);return mt.deps=mt.deps.filter(Et=>Et!==Rt),[{state:V,heads:V.heads},mt,lt]}function a(q){return s(q).save()}function H(q){let L=new u(q);return{state:L,heads:L.heads}}function W(q,L){let V=s(q);return V.applyChanges(L),q.frozen=!0,{state:V,heads:V.heads}}function w(q){return s(q).getPatch()}function U(q){return q.heads}function tt(q){return J(q,[])}function J(q,L){if(!Array.isArray(L))throw new TypeError("Pass an array of hashes to Backend.getChanges()");return s(q).getChanges(L)}function N(q,L){return s(L).getChangesAdded(s(q))}function Q(q,L){return s(q).getChangeByHash(L)}function it(q,L=[]){return s(q).getMissingDeps(L)}e.exports={init:p,clone:y,free:g,applyChanges:E,applyLocalChange:D,save:a,load:H,loadChanges:W,getPatch:w,getHeads:U,getAllChanges:tt,getChanges:J,getChangesAdded:N,getChangeByHash:Q,getMissingDeps:it}}),G6=ce((t,e)=>{var n=_2(),{hexStringToBytes:u,bytesToHexString:s,Encoder:p,Decoder:y}=i2(),{decodeChangeMeta:g}=Bh(),{copyObject:E}=Us(),m=32,D=66,a=67,H=10,W=7,w=class{constructor(vt){if(Array.isArray(vt)){this.numEntries=vt.length,this.numBitsPerEntry=H,this.numProbes=W,this.bits=new Uint8Array(Math.ceil(this.numEntries*this.numBitsPerEntry/8));for(let wt of vt)this.addHash(wt)}else if(vt instanceof Uint8Array)if(vt.byteLength===0)this.numEntries=0,this.numBitsPerEntry=0,this.numProbes=0,this.bits=vt;else{let wt=new y(vt);this.numEntries=wt.readUint32(),this.numBitsPerEntry=wt.readUint32(),this.numProbes=wt.readUint32(),this.bits=wt.readRawBytes(Math.ceil(this.numEntries*this.numBitsPerEntry/8))}else throw new TypeError("invalid argument")}get bytes(){if(this.numEntries===0)return new Uint8Array(0);let vt=new p;return vt.appendUint32(this.numEntries),vt.appendUint32(this.numBitsPerEntry),vt.appendUint32(this.numProbes),vt.appendRawBytes(this.bits),vt.buffer}getProbes(vt){let wt=u(vt),Xt=8*this.bits.byteLength;if(wt.byteLength!==32)throw new RangeError(`Not a 256-bit hash: ${vt}`);let ee=((wt[0]|wt[1]<<8|wt[2]<<16|wt[3]<<24)>>>0)%Xt,ne=((wt[4]|wt[5]<<8|wt[6]<<16|wt[7]<<24)>>>0)%Xt,oe=((wt[8]|wt[9]<<8|wt[10]<<16|wt[11]<<24)>>>0)%Xt,Le=[ee];for(let de=1;de<this.numProbes;de++)ee=(ee+ne)%Xt,ne=(ne+oe)%Xt,Le.push(ee);return Le}addHash(vt){for(let wt of this.getProbes(vt))this.bits[wt>>>3]|=1<<(wt&7)}containsHash(vt){if(this.numEntries===0)return!1;for(let wt of this.getProbes(vt))if(!(this.bits[wt>>>3]&1<<(wt&7)))return!1;return!0}};function U(vt,wt){if(!Array.isArray(wt))throw new TypeError("hashes must be an array");vt.appendUint32(wt.length);for(let Xt=0;Xt<wt.length;Xt++){if(Xt>0&&wt[Xt-1]>=wt[Xt])throw new RangeError("hashes must be sorted");let ee=u(wt[Xt]);if(ee.byteLength!==m)throw new TypeError("heads hashes must be 256 bits");vt.appendRawBytes(ee)}}function tt(vt){let wt=vt.readUint32(),Xt=[];for(let ee=0;ee<wt;ee++)Xt.push(s(vt.readRawBytes(m)));return Xt}function J(vt){let wt=new p;wt.appendByte(D),U(wt,vt.heads),U(wt,vt.need),wt.appendUint32(vt.have.length);for(let Xt of vt.have)U(wt,Xt.lastSync),wt.appendPrefixedBytes(Xt.bloom);wt.appendUint32(vt.changes.length);for(let Xt of vt.changes)wt.appendPrefixedBytes(Xt);return wt.buffer}function N(vt){let wt=new y(vt),Xt=wt.readByte();if(Xt!==D)throw new RangeError(`Unexpected message type: ${Xt}`);let ee=tt(wt),ne=tt(wt),oe=wt.readUint32(),Le={heads:ee,need:ne,have:[],changes:[]};for(let He=0;He<oe;He++){let ze=tt(wt),Te=wt.readPrefixedBytes(wt);Le.have.push({lastSync:ze,bloom:Te})}let de=wt.readUint32();for(let He=0;He<de;He++){let ze=wt.readPrefixedBytes();Le.changes.push(ze)}return Le}function Q(vt){let wt=new p;return wt.appendByte(a),U(wt,vt.sharedHeads),wt.buffer}function it(vt){let wt=new y(vt),Xt=wt.readByte();if(Xt!==a)throw new RangeError(`Unexpected record type: ${Xt}`);let ee=tt(wt);return Object.assign(V(),{sharedHeads:ee})}function q(vt,wt){let Xt=n.getChanges(vt,wt).map(ee=>g(ee,!0).hash);return{lastSync:wt,bloom:new w(Xt).bytes}}function L(vt,wt,Xt){if(wt.length===0)return Xt.map(Je=>n.getChangeByHash(vt,Je)).filter(Je=>Je!==void 0);let ee={},ne=[];for(let Je of wt){for(let Xe of Je.lastSync)ee[Xe]=!0;ne.push(new w(Je.bloom))}let oe=n.getChanges(vt,Object.keys(ee)).map(Je=>g(Je,!0)),Le={},de={},He={};for(let Je of oe){Le[Je.hash]=!0;for(let Xe of Je.deps)de[Xe]||(de[Xe]=[]),de[Xe].push(Je.hash);ne.every(Xe=>!Xe.containsHash(Je.hash))&&(He[Je.hash]=!0)}let ze=Object.keys(He);for(;ze.length>0;){let Je=ze.pop();if(de[Je])for(let Xe of de[Je])He[Xe]||(He[Xe]=!0,ze.push(Xe))}let Te=[];for(let Je of Xt)if(He[Je]=!0,!Le[Je]){let Xe=n.getChangeByHash(vt,Je);Xe&&Te.push(Xe)}for(let Je of oe)He[Je.hash]&&Te.push(Je.change);return Te}function V(){return{sharedHeads:[],lastSentHeads:[],theirHeads:null,theirNeed:null,theirHave:null,sentHashes:{}}}function lt(vt,wt){return vt.length===wt.length&&vt.every((Xt,ee)=>Xt===wt[ee])}function mt(vt,wt){if(!vt)throw new Error("generateSyncMessage called with no Automerge document");if(!wt)throw new Error("generateSyncMessage requires a syncState, which can be created with initSyncState()");let{sharedHeads:Xt,lastSentHeads:ee,theirHeads:ne,theirNeed:oe,theirHave:Le,sentHashes:de}=wt,He=n.getHeads(vt),ze=n.getMissingDeps(vt,ne||[]),Te=[];if((!ne||ze.every(Qe=>ne.includes(Qe)))&&(Te=[q(vt,Xt)]),Le&&Le.length>0&&!Le[0].lastSync.every(Qe=>n.getChangeByHash(vt,Qe))){let Qe={heads:He,need:[],have:[{lastSync:[],bloom:new Uint8Array(0)}],changes:[]};return[wt,J(Qe)]}let Je=Array.isArray(Le)&&Array.isArray(oe)?L(vt,Le,oe):[],Xe=Array.isArray(ee)&&lt(He,ee),Ae=Array.isArray(ne)&&lt(He,ne);if(Xe&&Ae&&Je.length===0)return[wt,null];Je=Je.filter(Qe=>!de[g(Qe,!0).hash]);let _e={heads:He,have:Te,need:ze,changes:Je};if(Je.length>0){de=E(de);for(let Qe of Je)de[g(Qe,!0).hash]=!0}return wt=Object.assign({},wt,{lastSentHeads:He,sentHashes:de}),[wt,J(_e)]}function Rt(vt,wt,Xt){let ee=wt.filter(oe=>!vt.includes(oe)),ne=Xt.filter(oe=>wt.includes(oe));return[...new Set([...ee,...ne])].sort()}function Et(vt,wt,Xt){if(!vt)throw new Error("generateSyncMessage called with no Automerge document");if(!wt)throw new Error("generateSyncMessage requires a syncState, which can be created with initSyncState()");let{sharedHeads:ee,lastSentHeads:ne,sentHashes:oe}=wt,Le=null,de=N(Xt),He=n.getHeads(vt);de.changes.length>0&&([vt,Le]=n.applyChanges(vt,de.changes),ee=Rt(He,n.getHeads(vt),ee)),de.changes.length===0&&lt(de.heads,He)&&(ne=de.heads);let ze=de.heads.filter(Je=>n.getChangeByHash(vt,Je));ze.length===de.heads.length?(ee=de.heads,de.heads.length===0&&(ne=[],oe=[])):ee=[...new Set(ze.concat(ee))].sort();let Te={sharedHeads:ee,lastSentHeads:ne,theirHave:de.have,theirHeads:de.heads,theirNeed:de.need,sentHashes:oe};return[vt,Te,Le]}e.exports={receiveSyncMessage:Et,generateSyncMessage:mt,encodeSyncMessage:J,decodeSyncMessage:N,initSyncState:V,encodeSyncState:Q,decodeSyncState:it,BloomFilter:w}}),W6=ce((t,e)=>{var{init:n,clone:u,free:s,applyChanges:p,applyLocalChange:y,save:g,load:E,loadChanges:m,getPatch:D,getHeads:a,getAllChanges:H,getChanges:W,getChangesAdded:w,getChangeByHash:U,getMissingDeps:tt}=_2(),{receiveSyncMessage:J,generateSyncMessage:N,encodeSyncMessage:Q,decodeSyncMessage:it,encodeSyncState:q,decodeSyncState:L,initSyncState:V}=G6();e.exports={init:n,clone:u,free:s,applyChanges:p,applyLocalChange:y,save:g,load:E,loadChanges:m,getPatch:D,getHeads:a,getAllChanges:H,getChanges:W,getChangesAdded:w,getChangeByHash:U,getMissingDeps:tt,receiveSyncMessage:J,generateSyncMessage:N,encodeSyncMessage:Q,decodeSyncMessage:it,encodeSyncState:q,decodeSyncState:L,initSyncState:V}}),rS=ce((t,e)=>{var n=z0(),u=sD(),{OPTIONS:s}=wu(),{encodeChange:p,decodeChange:y}=Bh(),{isObject:g}=Us(),E=W6();function m(vt){if(typeof vt=="string")vt={actorId:vt};else if(typeof vt>"u")vt={};else if(!g(vt))throw new TypeError(`Unsupported options for init(): ${vt}`);return u.init(Object.assign({backend:E},vt))}function D(vt,wt){let Xt={message:"Initialization"};return a(m(wt),Xt,ee=>Object.assign(ee,vt))}function a(vt,wt,Xt){let[ee]=u.change(vt,wt,Xt);return ee}function H(vt,wt){let[Xt]=u.emptyChange(vt,wt);return Xt}function W(vt,wt={}){let Xt=E.clone(u.getBackendState(vt,"clone"));return it(m(wt),E.getPatch(Xt),Xt,[],wt)}function w(vt){E.free(u.getBackendState(vt,"free"))}function U(vt,wt={}){let Xt=E.load(vt);return it(m(wt),E.getPatch(Xt),Xt,[vt],wt)}function tt(vt){return E.save(u.getBackendState(vt,"save"))}function J(vt,wt){let Xt=u.getBackendState(vt,"merge"),ee=u.getBackendState(wt,"merge","second"),ne=E.getChangesAdded(Xt,ee),[oe]=q(vt,ne);return oe}function N(vt,wt){let Xt=u.getBackendState(vt,"getChanges"),ee=u.getBackendState(wt,"getChanges","second");return E.getChanges(ee,E.getHeads(Xt))}function Q(vt){return E.getAllChanges(u.getBackendState(vt,"getAllChanges"))}function it(vt,wt,Xt,ee,ne){let oe=u.applyPatch(vt,wt,Xt),Le=ne.patchCallback||vt[s].patchCallback;return Le&&Le(wt,vt,oe,!1,ee),oe}function q(vt,wt,Xt={}){let ee=u.getBackendState(vt,"applyChanges"),[ne,oe]=E.applyChanges(ee,wt);return[it(vt,oe,ne,wt,Xt),oe]}function L(vt,wt){if(!g(vt)||!g(wt))return vt===wt;let Xt=Object.keys(vt).sort(),ee=Object.keys(wt).sort();if(Xt.length!==ee.length)return!1;for(let ne=0;ne<Xt.length;ne++)if(Xt[ne]!==ee[ne]||!L(vt[Xt[ne]],wt[ee[ne]]))return!1;return!0}function V(vt){let wt=u.getActorId(vt),Xt=Q(vt);return Xt.map((ee,ne)=>({get change(){return y(ee)},get snapshot(){let oe=E.loadChanges(E.init(),Xt.slice(0,ne+1));return u.applyPatch(m(wt),E.getPatch(oe),oe)}}))}function lt(vt,wt){let Xt=u.getBackendState(vt,"generateSyncMessage");return E.generateSyncMessage(Xt,wt)}function mt(vt,wt,Xt){let ee=u.getBackendState(vt,"receiveSyncMessage"),[ne,oe,Le]=E.receiveSyncMessage(ee,wt,Xt);if(!Le)return[vt,oe,Le];let de=null;return vt[s].patchCallback&&(de=E.decodeSyncMessage(Xt).changes),[it(vt,Le,ne,de,{}),oe,Le]}function Rt(){return E.initSyncState()}function Et(vt){E=vt}e.exports={init:m,from:D,change:a,emptyChange:H,clone:W,free:w,load:U,save:tt,merge:J,getChanges:N,getAllChanges:Q,applyChanges:q,encodeChange:p,decodeChange:y,equals:L,getHistory:V,uuid:n,Frontend:u,setDefaultBackend:Et,generateSyncMessage:lt,receiveSyncMessage:mt,initSyncState:Rt,get Backend(){return E}};for(let vt of["getObjectId","getObjectById","getActorId","setActorId","getConflicts","getLastLocalChange","Text","Table","Counter","Observable","Int","Uint","Float64"])e.exports[vt]=u[vt]}),xp=ce((t,e)=>{"use strict";var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,p){s.__proto__=p}||function(s,p){for(let y in p)Object.prototype.hasOwnProperty.call(p,y)&&(s[y]=p[y])},u=class Ap extends Error{constructor(p,y,g){super(p),n(this,Ap.prototype),this.name="GrammarError",this.location=y,g===void 0&&(g=[]),this.diagnostics=g,this.stage=null,this.problems=[["error",p,y,g]]}toString(){let p=super.toString();this.location&&(p+=`
 at `,this.location.source!==void 0&&this.location.source!==null&&(p+=`${this.location.source}:`),p+=`${this.location.start.line}:${this.location.start.column}`);for(let y of this.diagnostics)p+=`
 from `,y.location.source!==void 0&&y.location.source!==null&&(p+=`${y.location.source}:`),p+=`${y.location.start.line}:${y.location.start.column}: ${y.message}`;return p}format(p){let y=p.map(({source:m,text:D})=>({source:m,text:D.split(/\r\n|\n|\r/g)}));function g(m,D,a=""){let H="",W=y.find(({source:U})=>U===m.source),w=m.start;if(W){let U=m.end,tt=W.text[w.line-1],J=(w.line===U.line?U.column:tt.length+1)-w.column||1;a&&(H+=`
note: ${a}`),H+=`
 --> ${m.source}:${w.line}:${w.column}
${"".padEnd(D)} |
${w.line.toString().padStart(D)} | ${tt}
${"".padEnd(D)} | ${"".padEnd(w.column-1)}${"".padEnd(J,"^")}`}else H+=`
 at ${m.source}:${w.line}:${w.column}`,a&&(H+=`: ${a}`);return H}function E(m,D,a,H=[]){let W;a?W=H.reduce((U,{location:tt})=>Math.max(U,tt.start.line),a.start.line):W=Math.max.apply(null,H.map(U=>U.location.start.line)),W=W.toString().length;let w=`${m}: ${D}`;a&&(w+=g(a,W));for(let U of H)w+=g(U.location,W,U.message);return w}return this.problems.filter(m=>m[0]!=="info").map(m=>E(...m)).join(`

`)}};e.exports=u}),ys=ce((t,e)=>{"use strict";var n={build(u){function s(m,...D){return u[m.type](m,...D)}function p(){}function y(m,...D){return s(m.expression,...D)}function g(m){return function(D,...a){D[m].forEach(H=>s(H,...a))}}let E={grammar(m,...D){m.topLevelInitializer&&s(m.topLevelInitializer,...D),m.initializer&&s(m.initializer,...D),m.rules.forEach(a=>s(a,...D))},top_level_initializer:p,initializer:p,rule:y,named:y,choice:g("alternatives"),action:y,sequence:g("elements"),labeled:y,text:y,simple_and:y,simple_not:y,optional:y,zero_or_more:y,one_or_more:y,group:y,semantic_and:p,semantic_not:p,rule_ref:p,literal:p,class:p,any:p};return Object.keys(E).forEach(m=>{Object.prototype.hasOwnProperty.call(u,m)||(u[m]=E[m])}),s}};e.exports=n}),ho=ce((t,e)=>{"use strict";var n=ys(),u={findRule(s,p){for(let y=0;y<s.rules.length;y++)if(s.rules[y].name===p)return s.rules[y]},indexOfRule(s,p){for(let y=0;y<s.rules.length;y++)if(s.rules[y].name===p)return y;return-1},alwaysConsumesOnSuccess(s,p){function y(){return!0}function g(){return!1}let E=n.build({choice(m){return m.alternatives.every(E)},sequence(m){return m.elements.some(E)},simple_and:g,simple_not:g,optional:g,zero_or_more:g,semantic_and:g,semantic_not:g,rule_ref(m){let D=u.findRule(s,m.name);return D?E(D):void 0},literal(m){return m.value!==""},class:y,any:y});return E(p)}};e.exports=u}),x2=ce((t,e)=>{"use strict";var n={PUSH:0,PUSH_EMPTY_STRING:35,PUSH_UNDEFINED:1,PUSH_NULL:2,PUSH_FAILED:3,PUSH_EMPTY_ARRAY:4,PUSH_CURR_POS:5,POP:6,POP_CURR_POS:7,POP_N:8,NIP:9,APPEND:10,WRAP:11,TEXT:12,PLUCK:36,IF:13,IF_ERROR:14,IF_NOT_ERROR:15,WHILE_NOT_ERROR:16,MATCH_ANY:17,MATCH_STRING:18,MATCH_STRING_IC:19,MATCH_CHAR_CLASS:20,MATCH_REGEXP:20,ACCEPT_N:21,ACCEPT_STRING:22,FAIL:23,LOAD_SAVED_POS:24,UPDATE_SAVED_POS:25,CALL:26,RULE:27,SILENT_FAILS_ON:28,SILENT_FAILS_OFF:29};e.exports=n}),T2=ce((t,e)=>{"use strict";var n=ys(),u=ho(),s=xp(),p=1,y=0,g=-1;function E(m){function D(U){return U.match=y}function a(U){return w(U.expression),U.match=p}function H(U){return U.match=w(U.expression)}function W(U,tt){let J=U.length,N=0,Q=0;for(let it=0;it<J;++it){let q=w(U[it]);q===p&&++N,q===g&&++Q}return N===J?p:tt?Q===J?g:y:Q>0?g:y}let w=n.build({rule(U){let tt,J=0;if(typeof U.match>"u"){U.match=y;do if(tt=U.match,U.match=w(U.expression),++J>6)throw new s("Infinity cycle detected when trying to evaluate node match result",U.location);while(tt!==U.match)}return U.match},named:H,choice(U){return U.match=W(U.alternatives,!0)},action:H,sequence(U){return U.match=W(U.elements,!1)},labeled:H,text:H,simple_and:H,simple_not(U){return U.match=-w(U.expression)},optional:a,zero_or_more:a,one_or_more:H,group:H,semantic_and:D,semantic_not:D,rule_ref(U){let tt=u.findRule(m,U.name);return U.match=w(tt)},literal(U){let tt=U.value.length===0?p:y;return U.match=tt},class(U){let tt=U.parts.length===0?g:y;return U.match=tt},any:D});w(m)}E.ALWAYS_MATCH=p,E.SOMETIMES_MATCH=y,E.NEVER_MATCH=g,e.exports=E}),gS=ce((t,e)=>{"use strict";var n=ho(),u=x2(),s=ys(),{ALWAYS_MATCH:p,SOMETIMES_MATCH:y,NEVER_MATCH:g}=T2();function E(m){let D=[],a=[],H=[],W=[];function w(Et){let vt=D.indexOf(Et);return vt===-1?D.push(Et)-1:vt}function U(Et){let vt={value:Et.parts,inverted:Et.inverted,ignoreCase:Et.ignoreCase},wt=JSON.stringify(vt),Xt=a.findIndex(ee=>JSON.stringify(ee)===wt);return Xt===-1?a.push(vt)-1:Xt}function tt(Et){let vt=JSON.stringify(Et),wt=H.findIndex(Xt=>JSON.stringify(Xt)===vt);return wt===-1?H.push(Et)-1:wt}function J(Et,vt,wt){let Xt={predicate:Et,params:vt,body:wt.code,location:wt.codeLocation},ee=JSON.stringify(Xt),ne=W.findIndex(oe=>JSON.stringify(oe)===ee);return ne===-1?W.push(Xt)-1:ne}function N(Et){let vt={};return Object.keys(Et).forEach(wt=>{vt[wt]=Et[wt]}),vt}function Q(Et,...vt){return Et.concat(...vt)}function it(Et,vt,wt,Xt){return Et===p?wt:Et===g?Xt:vt.concat([wt.length,Xt.length],wt,Xt)}function q(Et,vt){return Et.concat([vt.length],vt)}function L(Et,vt,wt,Xt){let ee=Object.keys(wt).map(ne=>Xt-wt[ne]);return[u.CALL,Et,vt,ee.length].concat(ee)}function V(Et,vt,wt){let Xt=Et.match|0;return Q([u.PUSH_CURR_POS],[u.SILENT_FAILS_ON],Rt(Et,{sp:wt.sp+1,env:N(wt.env),action:null}),[u.SILENT_FAILS_OFF],it(vt?-Xt:Xt,[vt?u.IF_ERROR:u.IF_NOT_ERROR],Q([u.POP],[vt?u.POP:u.POP_CURR_POS],[u.PUSH_UNDEFINED]),Q([u.POP],[vt?u.POP_CURR_POS:u.POP],[u.PUSH_FAILED])))}function lt(Et,vt,wt){let Xt=J(!0,Object.keys(wt.env),Et);return Q([u.UPDATE_SAVED_POS],L(Xt,0,wt.env,wt.sp),it(Et.match|0,[u.IF],Q([u.POP],vt?[u.PUSH_FAILED]:[u.PUSH_UNDEFINED]),Q([u.POP],vt?[u.PUSH_UNDEFINED]:[u.PUSH_FAILED])))}function mt(Et){return q([u.WHILE_NOT_ERROR],Q([u.APPEND],Et))}let Rt=s.build({grammar(Et){Et.rules.forEach(Rt),Et.literals=D,Et.classes=a,Et.expectations=H,Et.functions=W},rule(Et){Et.bytecode=Rt(Et.expression,{sp:-1,env:{},pluck:[],action:null})},named(Et,vt){let wt=Et.match|0,Xt=wt===g?null:tt({type:"rule",value:Et.name});return Q([u.SILENT_FAILS_ON],Rt(Et.expression,vt),[u.SILENT_FAILS_OFF],it(wt,[u.IF_ERROR],[u.FAIL,Xt],[]))},choice(Et,vt){function wt(Xt,ee){let ne=Xt[0].match|0,oe=Rt(Xt[0],{sp:ee.sp,env:N(ee.env),action:null});return ne===p?oe:Q(oe,Xt.length>1?it(y,[u.IF_ERROR],Q([u.POP],wt(Xt.slice(1),ee)),[]):[])}return wt(Et.alternatives,vt)},action(Et,vt){let wt=N(vt.env),Xt=Et.expression.type!=="sequence"||Et.expression.elements.length===0,ee=Rt(Et.expression,{sp:vt.sp+(Xt?1:0),env:wt,action:Et}),ne=Et.expression.match|0,oe=Xt&&ne!==g?J(!1,Object.keys(wt),Et):null;return Xt?Q([u.PUSH_CURR_POS],ee,it(ne,[u.IF_NOT_ERROR],Q([u.LOAD_SAVED_POS,1],L(oe,1,wt,vt.sp+2)),[]),[u.NIP]):ee},sequence(Et,vt){function wt(Xt,ee){if(Xt.length>0){let ne=Et.elements.length-Xt.length+1;return Q(Rt(Xt[0],{sp:ee.sp,env:ee.env,pluck:ee.pluck,action:null}),it(Xt[0].match|0,[u.IF_NOT_ERROR],wt(Xt.slice(1),{sp:ee.sp+1,env:ee.env,pluck:ee.pluck,action:ee.action}),Q(ne>1?[u.POP_N,ne]:[u.POP],[u.POP_CURR_POS],[u.PUSH_FAILED])))}else{if(ee.pluck.length>0)return Q([u.PLUCK,Et.elements.length+1,ee.pluck.length],ee.pluck.map(ne=>ee.sp-ne));if(ee.action){let ne=J(!1,Object.keys(ee.env),ee.action);return Q([u.LOAD_SAVED_POS,Et.elements.length],L(ne,Et.elements.length+1,ee.env,ee.sp))}else return Q([u.WRAP,Et.elements.length],[u.NIP])}}return Q([u.PUSH_CURR_POS],wt(Et.elements,{sp:vt.sp+1,env:vt.env,pluck:[],action:vt.action}))},labeled(Et,vt){let wt=vt.env,Xt=Et.label,ee=vt.sp+1;return Xt&&(wt=N(vt.env),vt.env[Et.label]=ee),Et.pick&&vt.pluck.push(ee),Rt(Et.expression,{sp:vt.sp,env:wt,action:null})},text(Et,vt){return Q([u.PUSH_CURR_POS],Rt(Et.expression,{sp:vt.sp+1,env:N(vt.env),action:null}),it(Et.match|0,[u.IF_NOT_ERROR],Q([u.POP],[u.TEXT]),[u.NIP]))},simple_and(Et,vt){return V(Et.expression,!1,vt)},simple_not(Et,vt){return V(Et.expression,!0,vt)},optional(Et,vt){return Q(Rt(Et.expression,{sp:vt.sp,env:N(vt.env),action:null}),it(-(Et.expression.match|0),[u.IF_ERROR],Q([u.POP],[u.PUSH_NULL]),[]))},zero_or_more(Et,vt){let wt=Rt(Et.expression,{sp:vt.sp+1,env:N(vt.env),action:null});return Q([u.PUSH_EMPTY_ARRAY],wt,mt(wt),[u.POP])},one_or_more(Et,vt){let wt=Rt(Et.expression,{sp:vt.sp+1,env:N(vt.env),action:null});return Q([u.PUSH_EMPTY_ARRAY],wt,it(Et.expression.match|0,[u.IF_NOT_ERROR],Q(mt(wt),[u.POP]),Q([u.POP],[u.POP],[u.PUSH_FAILED])))},group(Et,vt){return Rt(Et.expression,{sp:vt.sp,env:N(vt.env),action:null})},semantic_and(Et,vt){return lt(Et,!1,vt)},semantic_not(Et,vt){return lt(Et,!0,vt)},rule_ref(Et){return[u.RULE,n.indexOfRule(m,Et.name)]},literal(Et){if(Et.value.length>0){let vt=Et.match|0,wt=vt===y||vt===p&&!Et.ignoreCase?w(Et.ignoreCase?Et.value.toLowerCase():Et.value):null,Xt=vt!==p?tt({type:"literal",value:Et.value,ignoreCase:Et.ignoreCase}):null;return it(vt,Et.ignoreCase?[u.MATCH_STRING_IC,wt]:[u.MATCH_STRING,wt],Et.ignoreCase?[u.ACCEPT_N,Et.value.length]:[u.ACCEPT_STRING,wt],[u.FAIL,Xt])}return[u.PUSH_EMPTY_STRING]},class(Et){let vt=Et.match|0,wt=vt===y?U(Et):null,Xt=vt!==p?tt({type:"class",value:Et.parts,inverted:Et.inverted,ignoreCase:Et.ignoreCase}):null;return it(vt,[u.MATCH_CHAR_CLASS,wt],[u.ACCEPT_N,1],[u.FAIL,Xt])},any(Et){let vt=Et.match|0,wt=vt!==p?tt({type:"any"}):null;return it(vt,[u.MATCH_ANY],[u.ACCEPT_N,1],[u.FAIL,wt])}});Rt(m)}e.exports=E}),vS=ce((t,e)=>{"use strict";var n=class{constructor(u,s,p){this.sp=-1,this.maxSp=-1,this.varName=s,this.ruleName=u,this.type=p}name(u){if(u<0)throw new RangeError(`Rule '${this.ruleName}': The variable stack underflow: attempt to use a variable '${this.varName}<x>' at an index ${u}`);return this.varName+u}push(u){let s=this.name(++this.sp)+" = "+u+";";return this.sp>this.maxSp&&(this.maxSp=this.sp),s}pop(u){return u!==void 0?(this.sp-=u,Array.from({length:u},(s,p)=>this.name(this.sp+1+p))):this.name(this.sp--)}top(){return this.name(this.sp)}index(u){if(u<0)throw new RangeError(`Rule '${this.ruleName}': The variable stack overflow: attempt to get a variable at a negative index ${u}`);return this.name(this.sp-u)}result(){if(this.maxSp<0)throw new RangeError(`Rule '${this.ruleName}': The variable stack is empty, can't get the result'`);return this.name(0)}defines(){return this.maxSp<0?"":this.type+" "+Array.from({length:this.maxSp+1},(u,s)=>this.name(s)).join(", ")+";"}checkedIf(u,s,p){let y=this.sp;if(s(),p){let g=this.sp;if(this.sp=y,p(),g!==this.sp)throw new Error("Rule '"+this.ruleName+"', position "+u+": Branches of a condition can't move the stack pointer differently (before: "+y+", after then: "+g+", after else: "+this.sp+").")}}checkedLoop(u,s){let p=this.sp;if(s(),p!==this.sp)throw new Error("Rule '"+this.ruleName+"', position "+u+": Body of a loop can't move the stack pointer (before: "+p+", after: "+this.sp+").")}};e.exports=n}),U2=ce((t,e)=>{"use strict";e.exports="2.0.1"}),ES=ce(t=>{"use strict";function e(s){return s.charCodeAt(0).toString(16).toUpperCase()}t.hex=e;function n(s){return s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\v").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,p=>"\\x0"+e(p)).replace(/[\x10-\x1F\x7F-\xFF]/g,p=>"\\x"+e(p)).replace(/[\u0100-\u0FFF]/g,p=>"\\u0"+e(p)).replace(/[\u1000-\uFFFF]/g,p=>"\\u"+e(p))}t.stringEscape=n;function u(s){return s.replace(/\\/g,"\\\\").replace(/\//g,"\\/").replace(/]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\v").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,p=>"\\x0"+e(p)).replace(/[\x10-\x1F\x7F-\xFF]/g,p=>"\\x"+e(p)).replace(/[\u0100-\u0FFF]/g,p=>"\\u0"+e(p)).replace(/[\u1000-\uFFFF]/g,p=>"\\u"+e(p))}t.regexpClassEscape=u}),yS=ce(t=>{var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");t.encode=function(n){if(0<=n&&n<e.length)return e[n];throw new TypeError("Must be between 0 and 63: "+n)}}),SS=ce(t=>{var e=yS(),n=5,u=1<<n,s=u-1,p=u;function y(g){return g<0?(-g<<1)+1:(g<<1)+0}t.encode=function(g){let E="",m,D=y(g);do m=D&s,D>>>=n,D>0&&(m|=p),E+=e.encode(m);while(D>0);return E}}),Lp=ce(t=>{function e(V,lt,mt){if(lt in V)return V[lt];if(arguments.length===3)return mt;throw new Error('"'+lt+'" is a required argument.')}t.getArg=e;var n=(function(){return!("__proto__"in Object.create(null))})();function u(V){return V}function s(V){return y(V)?"$"+V:V}t.toSetString=n?u:s;function p(V){return y(V)?V.slice(1):V}t.fromSetString=n?u:p;function y(V){if(!V)return!1;let lt=V.length;if(lt<9||V.charCodeAt(lt-1)!==95||V.charCodeAt(lt-2)!==95||V.charCodeAt(lt-3)!==111||V.charCodeAt(lt-4)!==116||V.charCodeAt(lt-5)!==111||V.charCodeAt(lt-6)!==114||V.charCodeAt(lt-7)!==112||V.charCodeAt(lt-8)!==95||V.charCodeAt(lt-9)!==95)return!1;for(let mt=lt-10;mt>=0;mt--)if(V.charCodeAt(mt)!==36)return!1;return!0}function g(V,lt){return V===lt?0:V===null?1:lt===null?-1:V>lt?1:-1}function E(V,lt){let mt=V.generatedLine-lt.generatedLine;return mt!==0||(mt=V.generatedColumn-lt.generatedColumn,mt!==0)||(mt=g(V.source,lt.source),mt!==0)||(mt=V.originalLine-lt.originalLine,mt!==0)||(mt=V.originalColumn-lt.originalColumn,mt!==0)?mt:g(V.name,lt.name)}t.compareByGeneratedPositionsInflated=E;var m="http:",D=`${m}//host`;function a(V){return lt=>{let mt=tt(lt),Rt=w(lt),Et=new URL(lt,Rt);V(Et);let vt=Et.toString();return mt==="absolute"?vt:mt==="scheme-relative"?vt.slice(m.length):mt==="path-absolute"?vt.slice(D.length):J(Rt,vt)}}function H(V,lt){return new URL(V,lt).toString()}function W(V,lt){let mt=0;do{let Rt=V+mt++;if(lt.indexOf(Rt)===-1)return Rt}while(!0)}function w(V){let lt=V.split("..").length-1,mt=W("p",V),Rt=`${D}/`;for(let Et=0;Et<lt;Et++)Rt+=`${mt}/`;return Rt}var U=/^[A-Za-z0-9\+\-\.]+:/;function tt(V){return V[0]==="/"?V[1]==="/"?"scheme-relative":"path-absolute":U.test(V)?"absolute":"path-relative"}function J(V,lt){typeof V=="string"&&(V=new URL(V)),typeof lt=="string"&&(lt=new URL(lt));let mt=lt.pathname.split("/"),Rt=V.pathname.split("/");for(Rt.length>0&&!Rt[Rt.length-1]&&Rt.pop();mt.length>0&&Rt.length>0&&mt[0]===Rt[0];)mt.shift(),Rt.shift();return Rt.map(()=>"..").concat(mt).join("/")+lt.search+lt.hash}var N=a(V=>{V.pathname=V.pathname.replace(/\/?$/,"/")}),Q=a(V=>{});t.normalize=Q;function it(V,lt){let mt=tt(lt),Rt=tt(V);if(V=N(V),mt==="absolute")return H(lt,void 0);if(Rt==="absolute")return H(lt,V);if(mt==="scheme-relative")return Q(lt);if(Rt==="scheme-relative")return H(lt,H(V,D)).slice(m.length);if(mt==="path-absolute")return Q(lt);if(Rt==="path-absolute")return H(lt,H(V,D)).slice(D.length);let Et=w(lt+V),vt=H(lt,H(V,Et));return J(Et,vt)}t.join=it;function q(V,lt){let mt=L(V,lt);return typeof mt=="string"?mt:Q(lt)}t.relative=q;function L(V,lt){if(tt(V)!==tt(lt))return null;let mt=w(V+lt),Rt=new URL(V,mt),Et=new URL(lt,mt);try{new URL("",Et.toString())}catch{return null}return Et.protocol!==Rt.protocol||Et.user!==Rt.user||Et.password!==Rt.password||Et.hostname!==Rt.hostname||Et.port!==Rt.port?null:J(Rt,Et)}}),OS=ce(t=>{var e=class wp{constructor(){this._array=[],this._set=new Map}static fromArray(u,s){let p=new wp;for(let y=0,g=u.length;y<g;y++)p.add(u[y],s);return p}size(){return this._set.size}add(u,s){let p=this.has(u),y=this._array.length;(!p||s)&&this._array.push(u),p||this._set.set(u,y)}has(u){return this._set.has(u)}indexOf(u){let s=this._set.get(u);if(s>=0)return s;throw new Error('"'+u+'" is not in the set.')}at(u){if(u>=0&&u<this._array.length)return this._array[u];throw new Error("No element indexed by "+u)}toArray(){return this._array.slice()}};t.ArraySet=e}),NS=ce(t=>{var e=Lp();function n(s,p){let y=s.generatedLine,g=p.generatedLine,E=s.generatedColumn,m=p.generatedColumn;return g>y||g==y&&m>=E||e.compareByGeneratedPositionsInflated(s,p)<=0}var u=class{constructor(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}unsortedForEach(s,p){this._array.forEach(s,p)}add(s){n(this._last,s)?(this._last=s,this._array.push(s)):(this._sorted=!1,this._array.push(s))}toArray(){return this._sorted||(this._array.sort(e.compareByGeneratedPositionsInflated),this._sorted=!0),this._array}};t.MappingList=u}),K2=ce(t=>{var e=SS(),n=Lp(),u=OS().ArraySet,s=NS().MappingList,p=class Fp{constructor(g){g||(g={}),this._file=n.getArg(g,"file",null),this._sourceRoot=n.getArg(g,"sourceRoot",null),this._skipValidation=n.getArg(g,"skipValidation",!1),this._sources=new u,this._names=new u,this._mappings=new s,this._sourcesContents=null}static fromSourceMap(g){let E=g.sourceRoot,m=new Fp({file:g.file,sourceRoot:E});return g.eachMapping(function(D){let a={generated:{line:D.generatedLine,column:D.generatedColumn}};D.source!=null&&(a.source=D.source,E!=null&&(a.source=n.relative(E,a.source)),a.original={line:D.originalLine,column:D.originalColumn},D.name!=null&&(a.name=D.name)),m.addMapping(a)}),g.sources.forEach(function(D){let a=D;E!=null&&(a=n.relative(E,D)),m._sources.has(a)||m._sources.add(a);let H=g.sourceContentFor(D);H!=null&&m.setSourceContent(D,H)}),m}addMapping(g){let E=n.getArg(g,"generated"),m=n.getArg(g,"original",null),D=n.getArg(g,"source",null),a=n.getArg(g,"name",null);this._skipValidation||this._validateMapping(E,m,D,a),D!=null&&(D=String(D),this._sources.has(D)||this._sources.add(D)),a!=null&&(a=String(a),this._names.has(a)||this._names.add(a)),this._mappings.add({generatedLine:E.line,generatedColumn:E.column,originalLine:m&&m.line,originalColumn:m&&m.column,source:D,name:a})}setSourceContent(g,E){let m=g;this._sourceRoot!=null&&(m=n.relative(this._sourceRoot,m)),E!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[n.toSetString(m)]=E):this._sourcesContents&&(delete this._sourcesContents[n.toSetString(m)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))}applySourceMap(g,E,m){let D=E;if(E==null){if(g.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);D=g.file}let a=this._sourceRoot;a!=null&&(D=n.relative(a,D));let H=this._mappings.toArray().length>0?new u:this._sources,W=new u;this._mappings.unsortedForEach(function(w){if(w.source===D&&w.originalLine!=null){let J=g.originalPositionFor({line:w.originalLine,column:w.originalColumn});J.source!=null&&(w.source=J.source,m!=null&&(w.source=n.join(m,w.source)),a!=null&&(w.source=n.relative(a,w.source)),w.originalLine=J.line,w.originalColumn=J.column,J.name!=null&&(w.name=J.name))}let U=w.source;U!=null&&!H.has(U)&&H.add(U);let tt=w.name;tt!=null&&!W.has(tt)&&W.add(tt)},this),this._sources=H,this._names=W,g.sources.forEach(function(w){let U=g.sourceContentFor(w);U!=null&&(m!=null&&(w=n.join(m,w)),a!=null&&(w=n.relative(a,w)),this.setSourceContent(w,U))},this)}_validateMapping(g,E,m,D){if(E&&typeof E.line!="number"&&typeof E.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(g&&"line"in g&&"column"in g&&g.line>0&&g.column>=0&&!E&&!m&&!D)&&!(g&&"line"in g&&"column"in g&&E&&"line"in E&&"column"in E&&g.line>0&&g.column>=0&&E.line>0&&E.column>=0&&m))throw new Error("Invalid mapping: "+JSON.stringify({generated:g,source:m,original:E,name:D}))}_serializeMappings(){let g=0,E=1,m=0,D=0,a=0,H=0,W="",w,U,tt,J,N=this._mappings.toArray();for(let Q=0,it=N.length;Q<it;Q++){if(U=N[Q],w="",U.generatedLine!==E)for(g=0;U.generatedLine!==E;)w+=";",E++;else if(Q>0){if(!n.compareByGeneratedPositionsInflated(U,N[Q-1]))continue;w+=","}w+=e.encode(U.generatedColumn-g),g=U.generatedColumn,U.source!=null&&(J=this._sources.indexOf(U.source),w+=e.encode(J-H),H=J,w+=e.encode(U.originalLine-1-D),D=U.originalLine-1,w+=e.encode(U.originalColumn-m),m=U.originalColumn,U.name!=null&&(tt=this._names.indexOf(U.name),w+=e.encode(tt-a),a=tt)),W+=w}return W}_generateSourcesContent(g,E){return g.map(function(m){if(!this._sourcesContents)return null;E!=null&&(m=n.relative(E,m));let D=n.toSetString(m);return Object.prototype.hasOwnProperty.call(this._sourcesContents,D)?this._sourcesContents[D]:null},this)}toJSON(){let g={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(g.file=this._file),this._sourceRoot!=null&&(g.sourceRoot=this._sourceRoot),this._sourcesContents&&(g.sourcesContent=this._generateSourcesContent(g.sources,g.sourceRoot)),g}toString(){return JSON.stringify(this.toJSON())}};p.prototype._version=3,t.SourceMapGenerator=p}),US=ce(t=>{var e=K2().SourceMapGenerator,n=Lp(),u=/(\r?\n)/,s=10,p="$$$isSourceNode$$$",y=class Dl{constructor(E,m,D,a,H){this.children=[],this.sourceContents={},this.line=E??null,this.column=m??null,this.source=D??null,this.name=H??null,this[p]=!0,a!=null&&this.add(a)}static fromStringWithSourceMap(E,m,D){let a=new Dl,H=E.split(u),W=0,w=function(){let it=L(),q=L()||"";return it+q;function L(){return W<H.length?H[W++]:void 0}},U=1,tt=0,J=null,N;return m.eachMapping(function(it){if(J!==null)if(U<it.generatedLine)Q(J,w()),U++,tt=0;else{N=H[W]||"";let q=N.substr(0,it.generatedColumn-tt);H[W]=N.substr(it.generatedColumn-tt),tt=it.generatedColumn,Q(J,q),J=it;return}for(;U<it.generatedLine;)a.add(w()),U++;tt<it.generatedColumn&&(N=H[W]||"",a.add(N.substr(0,it.generatedColumn)),H[W]=N.substr(it.generatedColumn),tt=it.generatedColumn),J=it},this),W<H.length&&(J&&Q(J,w()),a.add(H.splice(W).join(""))),m.sources.forEach(function(it){let q=m.sourceContentFor(it);q!=null&&(D!=null&&(it=n.join(D,it)),a.setSourceContent(it,q))}),a;function Q(it,q){if(it===null||it.source===void 0)a.add(q);else{let L=D?n.join(D,it.source):it.source;a.add(new Dl(it.originalLine,it.originalColumn,L,q,it.name))}}}add(E){if(Array.isArray(E))E.forEach(function(m){this.add(m)},this);else if(E[p]||typeof E=="string")E&&this.children.push(E);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+E);return this}prepend(E){if(Array.isArray(E))for(let m=E.length-1;m>=0;m--)this.prepend(E[m]);else if(E[p]||typeof E=="string")this.children.unshift(E);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+E);return this}walk(E){let m;for(let D=0,a=this.children.length;D<a;D++)m=this.children[D],m[p]?m.walk(E):m!==""&&E(m,{source:this.source,line:this.line,column:this.column,name:this.name})}join(E){let m,D,a=this.children.length;if(a>0){for(m=[],D=0;D<a-1;D++)m.push(this.children[D]),m.push(E);m.push(this.children[D]),this.children=m}return this}replaceRight(E,m){let D=this.children[this.children.length-1];return D[p]?D.replaceRight(E,m):typeof D=="string"?this.children[this.children.length-1]=D.replace(E,m):this.children.push("".replace(E,m)),this}setSourceContent(E,m){this.sourceContents[n.toSetString(E)]=m}walkSourceContents(E){for(let D=0,a=this.children.length;D<a;D++)this.children[D][p]&&this.children[D].walkSourceContents(E);let m=Object.keys(this.sourceContents);for(let D=0,a=m.length;D<a;D++)E(n.fromSetString(m[D]),this.sourceContents[m[D]])}toString(){let E="";return this.walk(function(m){E+=m}),E}toStringWithSourceMap(E){let m={code:"",line:1,column:0},D=new e(E),a=!1,H=null,W=null,w=null,U=null;return this.walk(function(tt,J){m.code+=tt,J.source!==null&&J.line!==null&&J.column!==null?((H!==J.source||W!==J.line||w!==J.column||U!==J.name)&&D.addMapping({source:J.source,original:{line:J.line,column:J.column},generated:{line:m.line,column:m.column},name:J.name}),H=J.source,W=J.line,w=J.column,U=J.name,a=!0):a&&(D.addMapping({generated:{line:m.line,column:m.column}}),H=null,a=!1);for(let N=0,Q=tt.length;N<Q;N++)tt.charCodeAt(N)===s?(m.line++,m.column=0,N+1===Q?(H=null,a=!1):a&&D.addMapping({source:J.source,original:{line:J.line,column:J.column},generated:{line:m.line,column:m.column},name:J.name})):m.column++}),this.walkSourceContents(function(tt,J){D.setSourceContent(tt,J)}),{code:m.code,map:D}}};t.SourceNode=y}),jS=ce(t=>{t.SourceMapGenerator=K2().SourceMapGenerator,t.SourceNode=US().SourceNode}),VS=ce((t,e)=>{"use strict";var n=ho(),u=x2(),s=vS(),p=U2(),{stringEscape:y,regexpClassEscape:g}=ES(),{SourceNode:E}=jS();function m(H,W,w){let U=W.start.line,tt=W.start.column-1,J=H.split(`
`);return J.length===1?new E(U,tt,W.source,H,w):new E(null,null,W.source,J.map((N,Q)=>new E(U+Q,Q===0?tt:0,W.source,Q===J.length-1?N:[N,`
`],w)))}function D(H,W,w,U,tt){return w?new E(null,null,w.source,[H,m(W,w,tt),new E(w.end.line,w.end.column-1,w.source,U)]):new E(null,null,null,[H,W,U])}function a(H,W){function w(Et){return Et instanceof E?Et:Et.replace(/^(.+)$/gm,"  $1")}function U(Et){return"peg$c"+Et}function tt(Et){return"peg$r"+Et}function J(Et){return"peg$e"+Et}function N(Et){return"peg$f"+Et}function Q(Et){return"peg$parse"+Et}function it(){function Et(ee){return'"'+y(ee)+'"'}function vt(ee){return"/^["+(ee.inverted?"^":"")+ee.value.map(ne=>Array.isArray(ne)?g(ne[0])+"-"+g(ne[1]):g(ne)).join("")+"]/"+(ee.ignoreCase?"i":"")}function wt(ee){switch(ee.type){case"rule":return'peg$otherExpectation("'+y(ee.value)+'")';case"literal":return'peg$literalExpectation("'+y(ee.value)+'", '+ee.ignoreCase+")";case"class":return"peg$classExpectation(["+ee.value.map(ne=>Array.isArray(ne)?'["'+y(ne[0])+'", "'+y(ne[1])+'"]':'"'+y(ne)+'"').join(", ")+"], "+ee.inverted+", "+ee.ignoreCase+")";case"any":return"peg$anyExpectation()";default:throw new Error("Unknown expectation type ("+JSON.stringify(ee)+")")}}function Xt(ee,ne){return D(`
  var ${N(ne)} = function(${ee.params.join(", ")}) {`,ee.body,ee.location,"};")}return new E(null,null,W.grammarSource,[H.literals.map((ee,ne)=>"  var "+U(ne)+" = "+Et(ee)+";").concat("",H.classes.map((ee,ne)=>"  var "+tt(ne)+" = "+vt(ee)+";")).concat("",H.expectations.map((ee,ne)=>"  var "+J(ne)+" = "+wt(ee)+";")).concat("").join(`
`),H.functions.map(Xt)])}function q(Et,vt){let wt=[];return wt.push(""),W.trace&&wt.push("peg$tracer.trace({",'  type: "rule.enter",',"  rule: "+Et+",","  location: peg$computeLocation(startPos, startPos)","});",""),W.cache&&(wt.push("var key = peg$currPos * "+H.rules.length+" + "+vt+";","var cached = peg$resultsCache[key];","","if (cached) {","  peg$currPos = cached.nextPos;",""),W.trace&&wt.push("if (cached.result !== peg$FAILED) {","  peg$tracer.trace({",'    type: "rule.match",',"    rule: "+Et+",","    result: cached.result,","    location: peg$computeLocation(startPos, peg$currPos)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+Et+",","    location: peg$computeLocation(startPos, startPos)","  });","}",""),wt.push("  return cached.result;","}","")),wt}function L(Et,vt){let wt=[];return W.cache&&wt.push("","peg$resultsCache[key] = { nextPos: peg$currPos, result: "+vt+" };"),W.trace&&wt.push("","if ("+vt+" !== peg$FAILED) {","  peg$tracer.trace({",'    type: "rule.match",',"    rule: "+Et+",","    result: "+vt+",","    location: peg$computeLocation(startPos, peg$currPos)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+Et+",","    location: peg$computeLocation(startPos, startPos)","  });","}"),wt.push("","return "+vt+";"),wt}function V(Et){let vt=[],wt=new s(Et.name,"s","var");function Xt(ne){let oe=0,Le=ne.length,de=[],He;function ze(Xe,Ae){let _e=Ae+3,Qe=ne[oe+_e-2],qe=ne[oe+_e-1],Ze,Ar;wt.checkedIf(oe,()=>{oe+=_e,Ze=Xt(ne.slice(oe,oe+Qe)),oe+=Qe},qe>0?()=>{Ar=Xt(ne.slice(oe,oe+qe)),oe+=qe}:null),de.push("if ("+Xe+") {"),de.push(...Ze.map(w)),qe>0&&(de.push("} else {"),de.push(...Ar.map(w))),de.push("}")}function Te(Xe){let Ae=ne[oe+2-1],_e;wt.checkedLoop(oe,()=>{oe+=2,_e=Xt(ne.slice(oe,oe+Ae)),oe+=Ae}),de.push("while ("+Xe+") {"),de.push(..._e.map(w)),de.push("}")}function Je(){let Xe=ne[oe+4-1],Ae=N(ne[oe+1])+"("+ne.slice(oe+4,oe+4+Xe).map(_e=>wt.index(_e)).join(", ")+")";wt.pop(ne[oe+2]),de.push(wt.push(Ae)),oe+=4+Xe}for(;oe<Le;)switch(ne[oe]){case u.PUSH_EMPTY_STRING:de.push(wt.push("''")),oe++;break;case u.PUSH_CURR_POS:de.push(wt.push("peg$currPos")),oe++;break;case u.PUSH_UNDEFINED:de.push(wt.push("undefined")),oe++;break;case u.PUSH_NULL:de.push(wt.push("null")),oe++;break;case u.PUSH_FAILED:de.push(wt.push("peg$FAILED")),oe++;break;case u.PUSH_EMPTY_ARRAY:de.push(wt.push("[]")),oe++;break;case u.POP:wt.pop(),oe++;break;case u.POP_CURR_POS:de.push("peg$currPos = "+wt.pop()+";"),oe++;break;case u.POP_N:wt.pop(ne[oe+1]),oe+=2;break;case u.NIP:He=wt.pop(),wt.pop(),de.push(wt.push(He)),oe++;break;case u.APPEND:He=wt.pop(),de.push(wt.top()+".push("+He+");"),oe++;break;case u.WRAP:de.push(wt.push("["+wt.pop(ne[oe+1]).join(", ")+"]")),oe+=2;break;case u.TEXT:de.push(wt.push("input.substring("+wt.pop()+", peg$currPos)")),oe++;break;case u.PLUCK:{let Xe=ne[oe+3-1],Ae=3+Xe;He=ne.slice(oe+3,oe+Ae),He=Xe===1?wt.index(He[0]):`[ ${He.map(_e=>wt.index(_e)).join(", ")} ]`,wt.pop(ne[oe+1]),de.push(wt.push(He)),oe+=Ae;break}case u.IF:ze(wt.top(),0);break;case u.IF_ERROR:ze(wt.top()+" === peg$FAILED",0);break;case u.IF_NOT_ERROR:ze(wt.top()+" !== peg$FAILED",0);break;case u.WHILE_NOT_ERROR:Te(wt.top()+" !== peg$FAILED");break;case u.MATCH_ANY:ze("input.length > peg$currPos",0);break;case u.MATCH_STRING:ze(H.literals[ne[oe+1]].length>1?"input.substr(peg$currPos, "+H.literals[ne[oe+1]].length+") === "+U(ne[oe+1]):"input.charCodeAt(peg$currPos) === "+H.literals[ne[oe+1]].charCodeAt(0),1);break;case u.MATCH_STRING_IC:ze("input.substr(peg$currPos, "+H.literals[ne[oe+1]].length+").toLowerCase() === "+U(ne[oe+1]),1);break;case u.MATCH_CHAR_CLASS:ze(tt(ne[oe+1])+".test(input.charAt(peg$currPos))",1);break;case u.ACCEPT_N:de.push(wt.push(ne[oe+1]>1?"input.substr(peg$currPos, "+ne[oe+1]+")":"input.charAt(peg$currPos)")),de.push(ne[oe+1]>1?"peg$currPos += "+ne[oe+1]+";":"peg$currPos++;"),oe+=2;break;case u.ACCEPT_STRING:de.push(wt.push(U(ne[oe+1]))),de.push(H.literals[ne[oe+1]].length>1?"peg$currPos += "+H.literals[ne[oe+1]].length+";":"peg$currPos++;"),oe+=2;break;case u.FAIL:de.push(wt.push("peg$FAILED")),de.push("if (peg$silentFails === 0) { peg$fail("+J(ne[oe+1])+"); }"),oe+=2;break;case u.LOAD_SAVED_POS:de.push("peg$savedPos = "+wt.index(ne[oe+1])+";"),oe+=2;break;case u.UPDATE_SAVED_POS:de.push("peg$savedPos = peg$currPos;"),oe++;break;case u.CALL:Je();break;case u.RULE:de.push(wt.push(Q(H.rules[ne[oe+1]].name)+"()")),oe+=2;break;case u.SILENT_FAILS_ON:de.push("peg$silentFails++;"),oe++;break;case u.SILENT_FAILS_OFF:de.push("peg$silentFails--;"),oe++;break;default:throw new Error("Invalid opcode: "+ne[oe]+".")}return de}let ee=Xt(Et.bytecode);return vt.push(D("  function ",Q(Et.name),Et.nameLocation,`() {
`,Et.name)),W.trace&&vt.push("  var startPos = peg$currPos;"),vt.push(w(wt.defines())),vt.push(...q('"'+y(Et.name)+'"',n.indexOfRule(H,Et.name)).map(w)),vt.push(...ee.map(w)),vt.push(...L('"'+y(Et.name)+'"',wt.result()).map(w)),vt.push("}"),vt}function lt(Et){return Et.codeLocation?m(Et.code,Et.codeLocation,"$"+Et.type):Et.code}function mt(){let Et=[];H.topLevelInitializer&&(Et.push(lt(H.topLevelInitializer)),Et.push("")),Et.push("function peg$subclass(child, parent) {","  function C() { this.constructor = child; }","  C.prototype = parent.prototype;","  child.prototype = new C();","}","","function peg$SyntaxError(message, expected, found, location) {","  var self = Error.call(this, message);","  // istanbul ignore next Check is a necessary evil to support older environments","  if (Object.setPrototypeOf) {","    Object.setPrototypeOf(self, peg$SyntaxError.prototype);","  }","  self.expected = expected;","  self.found = found;","  self.location = location;",'  self.name = "SyntaxError";',"  return self;","}","","peg$subclass(peg$SyntaxError, Error);","","function peg$padEnd(str, targetLength, padString) {",'  padString = padString || " ";',"  if (str.length > targetLength) { return str; }","  targetLength -= str.length;","  padString += padString.repeat(targetLength);","  return str + padString.slice(0, targetLength);","}","","peg$SyntaxError.prototype.format = function(sources) {",'  var str = "Error: " + this.message;',"  if (this.location) {","    var src = null;","    var k;","    for (k = 0; k < sources.length; k++) {","      if (sources[k].source === this.location.source) {","        src = sources[k].text.split(/\\r\\n|\\n|\\r/g);","        break;","      }","    }","    var s = this.location.start;",'    var loc = this.location.source + ":" + s.line + ":" + s.column;',"    if (src) {","      var e = this.location.end;",`      var filler = peg$padEnd("", s.line.toString().length, ' ');`,"      var line = src[s.line - 1];","      var last = s.line === e.line ? e.column : line.length + 1;","      var hatLen = (last - s.column) || 1;",'      str += "\\n --> " + loc + "\\n"','          + filler + " |\\n"','          + s.line + " | " + line + "\\n"',`          + filler + " | " + peg$padEnd("", s.column - 1, ' ')`,'          + peg$padEnd("", hatLen, "^");',"    } else {",'      str += "\\n at " + loc;',"    }","  }","  return str;","};","","peg$SyntaxError.buildMessage = function(expected, found) {","  var DESCRIBE_EXPECTATION_FNS = {","    literal: function(expectation) {",'      return "\\"" + literalEscape(expectation.text) + "\\"";',"    },","","    class: function(expectation) {","      var escapedParts = expectation.parts.map(function(part) {","        return Array.isArray(part)",'          ? classEscape(part[0]) + "-" + classEscape(part[1])',"          : classEscape(part);","      });","",'      return "[" + (expectation.inverted ? "^" : "") + escapedParts.join("") + "]";',"    },","","    any: function() {",'      return "any character";',"    },","","    end: function() {",'      return "end of input";',"    },","","    other: function(expectation) {","      return expectation.description;","    }","  };","","  function hex(ch) {","    return ch.charCodeAt(0).toString(16).toUpperCase();","  }","","  function literalEscape(s) {","    return s",'      .replace(/\\\\/g, "\\\\\\\\")','      .replace(/"/g,  "\\\\\\"")','      .replace(/\\0/g, "\\\\0")','      .replace(/\\t/g, "\\\\t")','      .replace(/\\n/g, "\\\\n")','      .replace(/\\r/g, "\\\\r")','      .replace(/[\\x00-\\x0F]/g,          function(ch) { return "\\\\x0" + hex(ch); })','      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return "\\\\x"  + hex(ch); });',"  }","","  function classEscape(s) {","    return s",'      .replace(/\\\\/g, "\\\\\\\\")','      .replace(/\\]/g, "\\\\]")','      .replace(/\\^/g, "\\\\^")','      .replace(/-/g,  "\\\\-")','      .replace(/\\0/g, "\\\\0")','      .replace(/\\t/g, "\\\\t")','      .replace(/\\n/g, "\\\\n")','      .replace(/\\r/g, "\\\\r")','      .replace(/[\\x00-\\x0F]/g,          function(ch) { return "\\\\x0" + hex(ch); })','      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return "\\\\x"  + hex(ch); });',"  }","","  function describeExpectation(expectation) {","    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);","  }","","  function describeExpected(expected) {","    var descriptions = expected.map(describeExpectation);","    var i, j;","","    descriptions.sort();","","    if (descriptions.length > 0) {","      for (i = 1, j = 1; i < descriptions.length; i++) {","        if (descriptions[i - 1] !== descriptions[i]) {","          descriptions[j] = descriptions[i];","          j++;","        }","      }","      descriptions.length = j;","    }","","    switch (descriptions.length) {","      case 1:","        return descriptions[0];","","      case 2:",'        return descriptions[0] + " or " + descriptions[1];',"","      default:",'        return descriptions.slice(0, -1).join(", ")','          + ", or "',"          + descriptions[descriptions.length - 1];","    }","  }","","  function describeFound(found) {",'    return found ? "\\"" + literalEscape(found) + "\\"" : "end of input";',"  }","",'  return "Expected " + describeExpected(expected) + " but " + describeFound(found) + " found.";',"};",""),W.trace&&Et.push("function peg$DefaultTracer() {","  this.indentLevel = 0;","}","","peg$DefaultTracer.prototype.trace = function(event) {","  var that = this;","","  function log(event) {","    function repeat(string, n) {",'       var result = "", i;',"","       for (i = 0; i < n; i++) {","         result += string;","       }","","       return result;","    }","","    function pad(string, length) {",'      return string + repeat(" ", length - string.length);',"    }","",'    if (typeof console === "object") {',"      console.log(",'        event.location.start.line + ":" + event.location.start.column + "-"','          + event.location.end.line + ":" + event.location.end.column + " "','          + pad(event.type, 10) + " "','          + repeat("  ", that.indentLevel) + event.rule',"      );","    }","  }","","  switch (event.type) {",'    case "rule.enter":',"      log(event);","      this.indentLevel++;","      break;","",'    case "rule.match":',"      this.indentLevel--;","      log(event);","      break;","",'    case "rule.fail":',"      this.indentLevel--;","      log(event);","      break;","","    default:",'      throw new Error("Invalid event type: " + event.type + ".");',"  }","};","");let vt="{ "+W.allowedStartRules.map(Xt=>Xt+": "+Q(Xt)).join(", ")+" }",wt=Q(W.allowedStartRules[0]);return Et.push("function peg$parse(input, options) {","  options = options !== undefined ? options : {};","","  var peg$FAILED = {};","  var peg$source = options.grammarSource;","","  var peg$startRuleFunctions = "+vt+";","  var peg$startRuleFunction = "+wt+";","",it(),"","  var peg$currPos = 0;","  var peg$savedPos = 0;","  var peg$posDetailsCache = [{ line: 1, column: 1 }];","  var peg$maxFailPos = 0;","  var peg$maxFailExpected = [];","  var peg$silentFails = 0;",""),W.cache&&Et.push("  var peg$resultsCache = {};",""),W.trace&&Et.push('  var peg$tracer = "tracer" in options ? options.tracer : new peg$DefaultTracer();',""),Et.push("  var peg$result;","",'  if ("startRule" in options) {',"    if (!(options.startRule in peg$startRuleFunctions)) {",`      throw new Error("Can't start parsing from rule \\"" + options.startRule + "\\".");`,"    }","","    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];","  }","","  function text() {","    return input.substring(peg$savedPos, peg$currPos);","  }","","  function offset() {","    return peg$savedPos;","  }","","  function range() {","    return {","      source: peg$source,","      start: peg$savedPos,","      end: peg$currPos","    };","  }","","  function location() {","    return peg$computeLocation(peg$savedPos, peg$currPos);","  }","","  function expected(description, location) {","    location = location !== undefined","      ? location","      : peg$computeLocation(peg$savedPos, peg$currPos);","","    throw peg$buildStructuredError(","      [peg$otherExpectation(description)],","      input.substring(peg$savedPos, peg$currPos),","      location","    );","  }","","  function error(message, location) {","    location = location !== undefined","      ? location","      : peg$computeLocation(peg$savedPos, peg$currPos);","","    throw peg$buildSimpleError(message, location);","  }","","  function peg$literalExpectation(text, ignoreCase) {",'    return { type: "literal", text: text, ignoreCase: ignoreCase };',"  }","","  function peg$classExpectation(parts, inverted, ignoreCase) {",'    return { type: "class", parts: parts, inverted: inverted, ignoreCase: ignoreCase };',"  }","","  function peg$anyExpectation() {",'    return { type: "any" };',"  }","","  function peg$endExpectation() {",'    return { type: "end" };',"  }","","  function peg$otherExpectation(description) {",'    return { type: "other", description: description };',"  }","","  function peg$computePosDetails(pos) {","    var details = peg$posDetailsCache[pos];","    var p;","","    if (details) {","      return details;","    } else {","      p = pos - 1;","      while (!peg$posDetailsCache[p]) {","        p--;","      }","","      details = peg$posDetailsCache[p];","      details = {","        line: details.line,","        column: details.column","      };","","      while (p < pos) {","        if (input.charCodeAt(p) === 10) {","          details.line++;","          details.column = 1;","        } else {","          details.column++;","        }","","        p++;","      }","","      peg$posDetailsCache[pos] = details;","","      return details;","    }","  }","","  function peg$computeLocation(startPos, endPos) {","    var startPosDetails = peg$computePosDetails(startPos);","    var endPosDetails = peg$computePosDetails(endPos);","","    return {","      source: peg$source,","      start: {","        offset: startPos,","        line: startPosDetails.line,","        column: startPosDetails.column","      },","      end: {","        offset: endPos,","        line: endPosDetails.line,","        column: endPosDetails.column","      }","    };","  }","","  function peg$fail(expected) {","    if (peg$currPos < peg$maxFailPos) { return; }","","    if (peg$currPos > peg$maxFailPos) {","      peg$maxFailPos = peg$currPos;","      peg$maxFailExpected = [];","    }","","    peg$maxFailExpected.push(expected);","  }","","  function peg$buildSimpleError(message, location) {","    return new peg$SyntaxError(message, null, null, location);","  }","","  function peg$buildStructuredError(expected, found, location) {","    return new peg$SyntaxError(","      peg$SyntaxError.buildMessage(expected, found),","      expected,","      found,","      location","    );","  }",""),H.rules.forEach(Xt=>{Et.push(...V(Xt).map(w)),Et.push("")}),H.initializer&&(Et.push(lt(H.initializer)),Et.push("")),Et.push("  peg$result = peg$startRuleFunction();","","  if (peg$result !== peg$FAILED && peg$currPos === input.length) {","    return peg$result;","  } else {","    if (peg$result !== peg$FAILED && peg$currPos < input.length) {","      peg$fail(peg$endExpectation());","    }","","    throw peg$buildStructuredError(","      peg$maxFailExpected,","      peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,","      peg$maxFailPos < input.length","        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)","        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)","    );","  }","}"),new E(null,null,W.grammarSource,Et.map(Xt=>Xt instanceof E?Xt:Xt+`
`))}function Rt(Et){function vt(){return[`// Generated by Peggy ${p}.`,"//","// https://peggyjs.org/"]}function wt(){return W.trace?["{","  SyntaxError: peg$SyntaxError,","  DefaultTracer: peg$DefaultTracer,","  parse: peg$parse","}"].join(`
`):["{","  SyntaxError: peg$SyntaxError,","  parse: peg$parse","}"].join(`
`)}let Xt={bare(){return[...vt(),"(function() {",'  "use strict";',"",Et,"",w("return "+wt()+";"),"})()"]},commonjs(){let ee=Object.keys(W.dependencies),ne=vt();return ne.push("",'"use strict";',""),ee.length>0&&(ee.forEach(oe=>{ne.push("var "+oe+' = require("'+y(W.dependencies[oe])+'");')}),ne.push("")),ne.push(Et,"","module.exports = "+wt()+";"),ne},es(){let ee=Object.keys(W.dependencies),ne=vt();return ne.push(""),ee.length>0&&(ee.forEach(oe=>{ne.push("import "+oe+' from "'+y(W.dependencies[oe])+'";')}),ne.push("")),ne.push(Et,"","export {","  peg$SyntaxError as SyntaxError,",W.trace?"  peg$DefaultTracer as DefaultTracer,":"","  peg$parse as parse","};"),ne},amd(){let ee=Object.keys(W.dependencies),ne="["+ee.map(Le=>W.dependencies[Le]).map(Le=>'"'+y(Le)+'"').join(", ")+"]",oe=ee.join(", ");return[...vt(),"define("+ne+", function("+oe+") {",'  "use strict";',"",Et,"",w("return "+wt()+";"),"});"]},globals(){return[...vt(),"(function(root) {",'  "use strict";',"",Et,"",w("root."+W.exportVar+" = "+wt()+";"),"})(this);"]},umd(){let ee=Object.keys(W.dependencies),ne=ee.map(ze=>W.dependencies[ze]),oe="["+ne.map(ze=>'"'+y(ze)+'"').join(", ")+"]",Le=ne.map(ze=>'require("'+y(ze)+'")').join(", "),de=ee.join(", "),He=vt();return He.push("(function(root, factory) {",'  if (typeof define === "function" && define.amd) {',"    define("+oe+", factory);",'  } else if (typeof module === "object" && module.exports) {',"    module.exports = factory("+Le+");"),W.exportVar!==null&&He.push("  } else {","    root."+W.exportVar+" = factory();"),He.push("  }","})(this, function("+de+") {",'  "use strict";',"",Et,"",w("return "+wt()+";"),"});"),He}}[W.format]();return new E(null,null,W.grammarSource,Xt.map(ee=>ee instanceof E?ee:ee+`
`))}H.code=Rt(mt())}e.exports=a}),zS=ce((t,e)=>{"use strict";var n=ho(),u=ys();function s(p,y,g){function E(a){return a.type==="rule"&&a.expression.type==="rule_ref"}function m(a,H,W){u.build({rule_ref(w){w.name===H&&(w.name=W,g.info(`Proxy rule "${H}" replaced by the rule "${W}"`,w.location,[{message:"This rule will be used",location:n.findRule(a,W).nameLocation}]))}})(a)}let D=[];p.rules.forEach((a,H)=>{E(a)&&(m(p,a.name,a.expression.name),y.allowedStartRules.indexOf(a.name)===-1&&D.push(H))}),D.reverse(),D.forEach(a=>{p.rules.splice(a,1)})}e.exports=s}),YS=ce((t,e)=>{"use strict";var n=ys();function u(s,p,y){function g(D){let a={};return Object.keys(D).forEach(H=>{a[H]=D[H]}),a}function E(D,a){m(D.expression,g(a))}let m=n.build({rule(D){m(D.expression,{})},choice(D,a){D.alternatives.forEach(H=>{m(H,g(a))})},action:E,labeled(D,a){let H=D.label;H&&Object.prototype.hasOwnProperty.call(a,H)&&y.error(`Label "${D.label}" is already defined`,D.labelLocation,[{message:"Original label location",location:a[H]}]),m(D.expression,a),a[D.label]=D.labelLocation},text:E,simple_and:E,simple_not:E,optional:E,zero_or_more:E,one_or_more:E,group:E});m(s)}e.exports=u}),XS=ce((t,e)=>{"use strict";var n=ys();function u(s,p,y){let g={};n.build({rule(E){if(Object.prototype.hasOwnProperty.call(g,E.name)){y.error(`Rule "${E.name}" is already defined`,E.nameLocation,[{message:"Original rule location",location:g[E.name]}]);return}g[E.name]=E.nameLocation}})(s)}e.exports=u}),QS=ce((t,e)=>{"use strict";var n=ho(),u=ys();function s(p,y,g){let E=[],m=[],D=u.build({rule(a){E.push(a.name),D(a.expression),E.pop()},sequence(a){a.elements.every(H=>(D(H),!n.alwaysConsumesOnSuccess(p,H)))},rule_ref(a){m.push(a);let H=n.findRule(p,a.name);if(E.indexOf(a.name)!==-1){E.push(a.name),g.error("Possible infinite loop when parsing (left recursion: "+E.join(" -> ")+")",H.nameLocation,m.map((W,w,U)=>({message:w+1!==U.length?`Step ${w+1}: call of the rule "${W.name}" without input consumption`:`Step ${w+1}: call itself without input consumption - left recursion`,location:W.location})));return}H&&D(H),m.pop()}});D(p)}e.exports=s}),rF=ce((t,e)=>{"use strict";var n=ho(),u=ys();function s(p,y,g){u.build({zero_or_more(E){n.alwaysConsumesOnSuccess(p,E.expression)||g.error("Possible infinite loop when parsing (repetition used with an expression that may not consume any input)",E.location)},one_or_more(E){n.alwaysConsumesOnSuccess(p,E.expression)||g.error("Possible infinite loop when parsing (repetition used with an expression that may not consume any input)",E.location)}})(p)}e.exports=s}),iF=ce((t,e)=>{"use strict";var n=ho(),u=ys();function s(p,y,g){u.build({rule_ref(E){n.findRule(p,E.name)||g.error(`Rule "${E.name}" is not defined`,E.location)}})(p)}e.exports=s}),aF=ce((t,e)=>{"use strict";var n=ys();function u(s,p,y){let g=n.build({action(E){g(E.expression,E)},labeled(E,m){E.pick&&m&&y.error('"@" cannot be used with an action block',E.labelLocation,[{message:"Action block location",location:m.codeLocation}]),g(E.expression)}});g(s)}e.exports=u}),oF=ce((t,e)=>{"use strict";var n=xp(),u=class{constructor(p){p=typeof p<"u"?p:{},typeof p.error=="function"&&(this.error=p.error),typeof p.warning=="function"&&(this.warning=p.warning),typeof p.info=="function"&&(this.info=p.info)}error(){}warning(){}info(){}},s=class{constructor(p){this._callbacks=new u(p),this._firstError=null,this.errors=0,this.problems=[],this.stage=null}error(...p){++this.errors,this._firstError===null&&(this._firstError=new n(...p),this._firstError.stage=this.stage,this._firstError.problems=this.problems),this.problems.push(["error",...p]),this._callbacks.error(this.stage,...p)}warning(...p){this.problems.push(["warning",...p]),this._callbacks.warning(this.stage,...p)}info(...p){this.problems.push(["info",...p]),this._callbacks.info(this.stage,...p)}checkErrors(){if(this.errors!==0)throw this._firstError}};e.exports=s}),cF=ce((exports,module)=>{"use strict";var generateBytecode=gS(),generateJS=VS(),inferenceMatchResult=T2(),removeProxyRules=zS(),reportDuplicateLabels=YS(),reportDuplicateRules=XS(),reportInfiniteRecursion=QS(),reportInfiniteRepetition=rF(),reportUndefinedRules=iF(),reportIncorrectPlucking=aF(),Session=oF(),visitor=ys();function processOptions(t,e){let n={};return Object.keys(t).forEach(u=>{n[u]=t[u]}),Object.keys(e).forEach(u=>{Object.prototype.hasOwnProperty.call(n,u)||(n[u]=e[u])}),n}var compiler={visitor,passes:{check:[reportUndefinedRules,reportDuplicateRules,reportDuplicateLabels,reportInfiniteRecursion,reportInfiniteRepetition,reportIncorrectPlucking],transform:[removeProxyRules,inferenceMatchResult],generate:[generateBytecode,generateJS]},compile(ast,passes,options){if(options=options!==void 0?options:{},options=processOptions(options,{allowedStartRules:[ast.rules[0].name],cache:!1,dependencies:{},exportVar:null,format:"bare",output:"parser",trace:!1}),!Array.isArray(options.allowedStartRules))throw new Error("allowedStartRules must be an array");if(options.allowedStartRules.length===0)throw new Error("Must have at least one start rule");let allRules=ast.rules.map(t=>t.name);for(let t of options.allowedStartRules)if(allRules.indexOf(t)===-1)throw new Error(`Unknown start rule "${t}"`);let session=new Session(options);switch(Object.keys(passes).forEach(t=>{session.stage=t,session.info(`Process stage ${t}`),passes[t].forEach(e=>{session.info(`Process pass ${t}.${e.name}`),e(ast,options,session)}),session.checkErrors()}),options.output){case"parser":return eval(ast.code.toString());case"source":return ast.code.toString();case"source-and-map":return ast.code;default:throw new Error("Invalid output format: "+options.output+".")}}};module.exports=compiler}),fF=ce((t,e)=>{"use strict";var n={$:"text","&":"simple_and","!":"simple_not"},u={"?":"optional","*":"zero_or_more","+":"one_or_more"},s={"&":"semantic_and","!":"semantic_not"};function p(m,D){function a(){this.constructor=m}a.prototype=D.prototype,m.prototype=new a}function y(m,D,a,H){var W=Error.call(this,m);return Object.setPrototypeOf&&Object.setPrototypeOf(W,y.prototype),W.expected=D,W.found=a,W.location=H,W.name="SyntaxError",W}p(y,Error);function g(m,D,a){return a=a||" ",m.length>D?m:(D-=m.length,a+=a.repeat(D),m+a.slice(0,D))}y.prototype.format=function(m){var D="Error: "+this.message;if(this.location){var a=null,H;for(H=0;H<m.length;H++)if(m[H].source===this.location.source){a=m[H].text.split(/\r\n|\n|\r/g);break}var W=this.location.start,w=this.location.source+":"+W.line+":"+W.column;if(a){var U=this.location.end,tt=g("",W.line.toString().length," "),J=a[W.line-1],N=W.line===U.line?U.column:J.length+1,Q=N-W.column||1;D+=`
 --> `+w+`
`+tt+` |
`+W.line+" | "+J+`
`+tt+" | "+g("",W.column-1," ")+g("",Q,"^")}else D+=`
 at `+w}return D},y.buildMessage=function(m,D){var a={literal:function(N){return'"'+W(N.text)+'"'},class:function(N){var Q=N.parts.map(function(it){return Array.isArray(it)?w(it[0])+"-"+w(it[1]):w(it)});return"["+(N.inverted?"^":"")+Q.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(N){return N.description}};function H(N){return N.charCodeAt(0).toString(16).toUpperCase()}function W(N){return N.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(Q){return"\\x0"+H(Q)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(Q){return"\\x"+H(Q)})}function w(N){return N.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(Q){return"\\x0"+H(Q)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(Q){return"\\x"+H(Q)})}function U(N){return a[N.type](N)}function tt(N){var Q=N.map(U),it,q;if(Q.sort(),Q.length>0){for(it=1,q=1;it<Q.length;it++)Q[it-1]!==Q[it]&&(Q[q]=Q[it],q++);Q.length=q}switch(Q.length){case 1:return Q[0];case 2:return Q[0]+" or "+Q[1];default:return Q.slice(0,-1).join(", ")+", or "+Q[Q.length-1]}}function J(N){return N?'"'+W(N)+'"':"end of input"}return"Expected "+tt(m)+" but "+J(D)+" found."};function E(m,D){D=D!==void 0?D:{};var a={},H=D.grammarSource,W={Grammar:$u},w=$u,U="{",tt="}",J="=",N="/",Q="@",it=":",q="$",L="&",V="!",lt="?",mt="*",Rt="+",Et="(",vt=")",wt="	",Xt="\v",ee="\f",ne=" ",oe="\xA0",Le="\uFEFF",de=`
`,He=`\r
`,ze="\r",Te="\u2028",Je="\u2029",Xe="/*",Ae="*/",_e="//",Qe="_",qe="\\",Ze="\u200C",Ar="\u200D",Or="i",Cr='"',et="'",k="[",Z="^",se="]",me="-",rr="0",dr="b",mr="f",ur="n",er="r",Gr="t",Lr="v",Sr="x",j="u",f=".",S=";",Y=/^[\n\r\u2028\u2029]/,It=/^[0-9]/,Ot=/^[0-9a-f]/i,nt=/^[{}]/,zt=/^[a-z\xB5\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137-\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148-\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C-\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA-\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9-\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC-\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF-\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F-\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02AF\u0371\u0373\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D0-\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB-\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE-\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0561-\u0587\u13F8-\u13FD\u1D00-\u1D2B\u1D6B-\u1D77\u1D79-\u1D9A\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6-\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FC7\u1FD0-\u1FD3\u1FD6-\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6-\u1FF7\u210A\u210E-\u210F\u2113\u212F\u2134\u2139\u213C-\u213D\u2146-\u2149\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65-\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73-\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3-\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7B5\uA7B7\uA7FA\uAB30-\uAB5A\uAB60-\uAB65\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A]/,jt=/^[\u02B0-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0374\u037A\u0559\u0640\u06E5-\u06E6\u07F4-\u07F5\u07FA\u081A\u0824\u0828\u0971\u0E46\u0EC6\u10FC\u17D7\u1843\u1AA7\u1C78-\u1C7D\u1D2C-\u1D6A\u1D78\u1D9B-\u1DBF\u2071\u207F\u2090-\u209C\u2C7C-\u2C7D\u2D6F\u2E2F\u3005\u3031-\u3035\u303B\u309D-\u309E\u30FC-\u30FE\uA015\uA4F8-\uA4FD\uA60C\uA67F\uA69C-\uA69D\uA717-\uA71F\uA770\uA788\uA7F8-\uA7F9\uA9CF\uA9E6\uAA70\uAADD\uAAF3-\uAAF4\uAB5C-\uAB5F\uFF70\uFF9E-\uFF9F]/,Se=/^[\xAA\xBA\u01BB\u01C0-\u01C3\u0294\u05D0-\u05EA\u05F0-\u05F2\u0620-\u063F\u0641-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u0800-\u0815\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0972-\u0980\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60-\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E45\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065-\u1066\u106E-\u1070\u1075-\u1081\u108E\u10D0-\u10FA\u10FD-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17DC\u1820-\u1842\u1844-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE-\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C77\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5-\u1CF6\u2135-\u2138\u2D30-\u2D67\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3006\u303C\u3041-\u3096\u309F\u30A1-\u30FA\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA014\uA016-\uA48C\uA4D0-\uA4F7\uA500-\uA60B\uA610-\uA61F\uA62A-\uA62B\uA66E\uA6A0-\uA6E5\uA78F\uA7F7\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9E0-\uA9E4\uA9E7-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA6F\uAA71-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADC\uAAE0-\uAAEA\uAAF2\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF66-\uFF6F\uFF71-\uFF9D\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,_t=/^[\u01C5\u01C8\u01CB\u01F2\u1F88-\u1F8F\u1F98-\u1F9F\u1FA8-\u1FAF\u1FBC\u1FCC\u1FFC]/,gt=/^[A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178-\u0179\u017B\u017D\u0181-\u0182\u0184\u0186-\u0187\u0189-\u018B\u018E-\u0191\u0193-\u0194\u0196-\u0198\u019C-\u019D\u019F-\u01A0\u01A2\u01A4\u01A6-\u01A7\u01A9\u01AC\u01AE-\u01AF\u01B1-\u01B3\u01B5\u01B7-\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A-\u023B\u023D-\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E-\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9-\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0-\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E-\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D-\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AD\uA7B0-\uA7B4\uA7B6\uFF21-\uFF3A]/,rt=/^[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E-\u094F\u0982-\u0983\u09BE-\u09C0\u09C7-\u09C8\u09CB-\u09CC\u09D7\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB-\u0ACC\u0B02-\u0B03\u0B3E\u0B40\u0B47-\u0B48\u0B4B-\u0B4C\u0B57\u0BBE-\u0BBF\u0BC1-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD7\u0C01-\u0C03\u0C41-\u0C44\u0C82-\u0C83\u0CBE\u0CC0-\u0CC4\u0CC7-\u0CC8\u0CCA-\u0CCB\u0CD5-\u0CD6\u0D02-\u0D03\u0D3E-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D57\u0D82-\u0D83\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DF2-\u0DF3\u0F3E-\u0F3F\u0F7F\u102B-\u102C\u1031\u1038\u103B-\u103C\u1056-\u1057\u1062-\u1064\u1067-\u106D\u1083-\u1084\u1087-\u108C\u108F\u109A-\u109C\u17B6\u17BE-\u17C5\u17C7-\u17C8\u1923-\u1926\u1929-\u192B\u1930-\u1931\u1933-\u1938\u1A19-\u1A1A\u1A55\u1A57\u1A61\u1A63-\u1A64\u1A6D-\u1A72\u1B04\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B44\u1B82\u1BA1\u1BA6-\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2-\u1BF3\u1C24-\u1C2B\u1C34-\u1C35\u1CE1\u1CF2-\u1CF3\u302E-\u302F\uA823-\uA824\uA827\uA880-\uA881\uA8B4-\uA8C3\uA952-\uA953\uA983\uA9B4-\uA9B5\uA9BA-\uA9BB\uA9BD-\uA9C0\uAA2F-\uAA30\uAA33-\uAA34\uAA4D\uAA7B\uAA7D\uAAEB\uAAEE-\uAAEF\uAAF5\uABE3-\uABE4\uABE6-\uABE7\uABE9-\uABEA\uABEC]/,F=/^[\u0300-\u036F\u0483-\u0487\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B62-\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC-\u0CCD\u0CE2-\u0CE3\u0D01\u0D41-\u0D44\u0D4D\u0D62-\u0D63\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099-\u309A\uA66F\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/,st=/^[0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]/,At=/^[\u16EE-\u16F0\u2160-\u2182\u2185-\u2188\u3007\u3021-\u3029\u3038-\u303A\uA6E6-\uA6EF]/,Dt=/^[_\u203F-\u2040\u2054\uFE33-\uFE34\uFE4D-\uFE4F\uFF3F]/,Nt=/^[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,Yt=gr("{",!1),De=gr("}",!1),Qt=gr("=",!1),Ee=gr("/",!1),Be=gr("@",!1),sr=gr(":",!1),P=gr("$",!1),le=gr("&",!1),Vt=gr("!",!1),pe=gr("?",!1),kt=gr("*",!1),re=gr("+",!1),$e=gr("(",!1),Ce=gr(")",!1),Pe=Bu(),Ne=ms("whitespace"),tr=gr("	",!1),lr=gr("\v",!1),ar=gr("\f",!1),wr=gr(" ",!1),jr=gr("\xA0",!1),ln=gr("\uFEFF",!1),cn=kn([`
`,"\r","\u2028","\u2029"],!1,!1),qr=ms("end of line"),Er=gr(`
`,!1),Tr=gr(`\r
`,!1),gn=gr("\r",!1),Kn=gr("\u2028",!1),tn=gr("\u2029",!1),Wn=ms("comment"),Br=gr("/*",!1),bn=gr("*/",!1),as=gr("//",!1),_n=ms("identifier"),ks=gr("_",!1),Zr=gr("\\",!1),Ss=gr("\u200C",!1),Ps=gr("\u200D",!1),Xs=ms("literal"),qs=gr("i",!1),os=ms("string"),In=gr('"',!1),Si=gr("'",!1),Xn=ms("character class"),ls=gr("[",!1),Vi=gr("^",!1),Ki=gr("]",!1),Bi=gr("-",!1),cu=gr("0",!1),Ei=gr("b",!1),zi=gr("f",!1),Ii=gr("n",!1),oi=gr("r",!1),ns=gr("t",!1),Dn=gr("v",!1),bt=gr("x",!1),$t=gr("u",!1),Ht=kn([["0","9"]],!1,!1),fe=kn([["0","9"],["a","f"]],!1,!0),Me=gr(".",!1),We=ms("code block"),ir=kn(["{","}"],!1,!1),cr=kn([["a","z"],"\xB5",["\xDF","\xF6"],["\xF8","\xFF"],"\u0101","\u0103","\u0105","\u0107","\u0109","\u010B","\u010D","\u010F","\u0111","\u0113","\u0115","\u0117","\u0119","\u011B","\u011D","\u011F","\u0121","\u0123","\u0125","\u0127","\u0129","\u012B","\u012D","\u012F","\u0131","\u0133","\u0135",["\u0137","\u0138"],"\u013A","\u013C","\u013E","\u0140","\u0142","\u0144","\u0146",["\u0148","\u0149"],"\u014B","\u014D","\u014F","\u0151","\u0153","\u0155","\u0157","\u0159","\u015B","\u015D","\u015F","\u0161","\u0163","\u0165","\u0167","\u0169","\u016B","\u016D","\u016F","\u0171","\u0173","\u0175","\u0177","\u017A","\u017C",["\u017E","\u0180"],"\u0183","\u0185","\u0188",["\u018C","\u018D"],"\u0192","\u0195",["\u0199","\u019B"],"\u019E","\u01A1","\u01A3","\u01A5","\u01A8",["\u01AA","\u01AB"],"\u01AD","\u01B0","\u01B4","\u01B6",["\u01B9","\u01BA"],["\u01BD","\u01BF"],"\u01C6","\u01C9","\u01CC","\u01CE","\u01D0","\u01D2","\u01D4","\u01D6","\u01D8","\u01DA",["\u01DC","\u01DD"],"\u01DF","\u01E1","\u01E3","\u01E5","\u01E7","\u01E9","\u01EB","\u01ED",["\u01EF","\u01F0"],"\u01F3","\u01F5","\u01F9","\u01FB","\u01FD","\u01FF","\u0201","\u0203","\u0205","\u0207","\u0209","\u020B","\u020D","\u020F","\u0211","\u0213","\u0215","\u0217","\u0219","\u021B","\u021D","\u021F","\u0221","\u0223","\u0225","\u0227","\u0229","\u022B","\u022D","\u022F","\u0231",["\u0233","\u0239"],"\u023C",["\u023F","\u0240"],"\u0242","\u0247","\u0249","\u024B","\u024D",["\u024F","\u0293"],["\u0295","\u02AF"],"\u0371","\u0373","\u0377",["\u037B","\u037D"],"\u0390",["\u03AC","\u03CE"],["\u03D0","\u03D1"],["\u03D5","\u03D7"],"\u03D9","\u03DB","\u03DD","\u03DF","\u03E1","\u03E3","\u03E5","\u03E7","\u03E9","\u03EB","\u03ED",["\u03EF","\u03F3"],"\u03F5","\u03F8",["\u03FB","\u03FC"],["\u0430","\u045F"],"\u0461","\u0463","\u0465","\u0467","\u0469","\u046B","\u046D","\u046F","\u0471","\u0473","\u0475","\u0477","\u0479","\u047B","\u047D","\u047F","\u0481","\u048B","\u048D","\u048F","\u0491","\u0493","\u0495","\u0497","\u0499","\u049B","\u049D","\u049F","\u04A1","\u04A3","\u04A5","\u04A7","\u04A9","\u04AB","\u04AD","\u04AF","\u04B1","\u04B3","\u04B5","\u04B7","\u04B9","\u04BB","\u04BD","\u04BF","\u04C2","\u04C4","\u04C6","\u04C8","\u04CA","\u04CC",["\u04CE","\u04CF"],"\u04D1","\u04D3","\u04D5","\u04D7","\u04D9","\u04DB","\u04DD","\u04DF","\u04E1","\u04E3","\u04E5","\u04E7","\u04E9","\u04EB","\u04ED","\u04EF","\u04F1","\u04F3","\u04F5","\u04F7","\u04F9","\u04FB","\u04FD","\u04FF","\u0501","\u0503","\u0505","\u0507","\u0509","\u050B","\u050D","\u050F","\u0511","\u0513","\u0515","\u0517","\u0519","\u051B","\u051D","\u051F","\u0521","\u0523","\u0525","\u0527","\u0529","\u052B","\u052D","\u052F",["\u0561","\u0587"],["\u13F8","\u13FD"],["\u1D00","\u1D2B"],["\u1D6B","\u1D77"],["\u1D79","\u1D9A"],"\u1E01","\u1E03","\u1E05","\u1E07","\u1E09","\u1E0B","\u1E0D","\u1E0F","\u1E11","\u1E13","\u1E15","\u1E17","\u1E19","\u1E1B","\u1E1D","\u1E1F","\u1E21","\u1E23","\u1E25","\u1E27","\u1E29","\u1E2B","\u1E2D","\u1E2F","\u1E31","\u1E33","\u1E35","\u1E37","\u1E39","\u1E3B","\u1E3D","\u1E3F","\u1E41","\u1E43","\u1E45","\u1E47","\u1E49","\u1E4B","\u1E4D","\u1E4F","\u1E51","\u1E53","\u1E55","\u1E57","\u1E59","\u1E5B","\u1E5D","\u1E5F","\u1E61","\u1E63","\u1E65","\u1E67","\u1E69","\u1E6B","\u1E6D","\u1E6F","\u1E71","\u1E73","\u1E75","\u1E77","\u1E79","\u1E7B","\u1E7D","\u1E7F","\u1E81","\u1E83","\u1E85","\u1E87","\u1E89","\u1E8B","\u1E8D","\u1E8F","\u1E91","\u1E93",["\u1E95","\u1E9D"],"\u1E9F","\u1EA1","\u1EA3","\u1EA5","\u1EA7","\u1EA9","\u1EAB","\u1EAD","\u1EAF","\u1EB1","\u1EB3","\u1EB5","\u1EB7","\u1EB9","\u1EBB","\u1EBD","\u1EBF","\u1EC1","\u1EC3","\u1EC5","\u1EC7","\u1EC9","\u1ECB","\u1ECD","\u1ECF","\u1ED1","\u1ED3","\u1ED5","\u1ED7","\u1ED9","\u1EDB","\u1EDD","\u1EDF","\u1EE1","\u1EE3","\u1EE5","\u1EE7","\u1EE9","\u1EEB","\u1EED","\u1EEF","\u1EF1","\u1EF3","\u1EF5","\u1EF7","\u1EF9","\u1EFB","\u1EFD",["\u1EFF","\u1F07"],["\u1F10","\u1F15"],["\u1F20","\u1F27"],["\u1F30","\u1F37"],["\u1F40","\u1F45"],["\u1F50","\u1F57"],["\u1F60","\u1F67"],["\u1F70","\u1F7D"],["\u1F80","\u1F87"],["\u1F90","\u1F97"],["\u1FA0","\u1FA7"],["\u1FB0","\u1FB4"],["\u1FB6","\u1FB7"],"\u1FBE",["\u1FC2","\u1FC4"],["\u1FC6","\u1FC7"],["\u1FD0","\u1FD3"],["\u1FD6","\u1FD7"],["\u1FE0","\u1FE7"],["\u1FF2","\u1FF4"],["\u1FF6","\u1FF7"],"\u210A",["\u210E","\u210F"],"\u2113","\u212F","\u2134","\u2139",["\u213C","\u213D"],["\u2146","\u2149"],"\u214E","\u2184",["\u2C30","\u2C5E"],"\u2C61",["\u2C65","\u2C66"],"\u2C68","\u2C6A","\u2C6C","\u2C71",["\u2C73","\u2C74"],["\u2C76","\u2C7B"],"\u2C81","\u2C83","\u2C85","\u2C87","\u2C89","\u2C8B","\u2C8D","\u2C8F","\u2C91","\u2C93","\u2C95","\u2C97","\u2C99","\u2C9B","\u2C9D","\u2C9F","\u2CA1","\u2CA3","\u2CA5","\u2CA7","\u2CA9","\u2CAB","\u2CAD","\u2CAF","\u2CB1","\u2CB3","\u2CB5","\u2CB7","\u2CB9","\u2CBB","\u2CBD","\u2CBF","\u2CC1","\u2CC3","\u2CC5","\u2CC7","\u2CC9","\u2CCB","\u2CCD","\u2CCF","\u2CD1","\u2CD3","\u2CD5","\u2CD7","\u2CD9","\u2CDB","\u2CDD","\u2CDF","\u2CE1",["\u2CE3","\u2CE4"],"\u2CEC","\u2CEE","\u2CF3",["\u2D00","\u2D25"],"\u2D27","\u2D2D","\uA641","\uA643","\uA645","\uA647","\uA649","\uA64B","\uA64D","\uA64F","\uA651","\uA653","\uA655","\uA657","\uA659","\uA65B","\uA65D","\uA65F","\uA661","\uA663","\uA665","\uA667","\uA669","\uA66B","\uA66D","\uA681","\uA683","\uA685","\uA687","\uA689","\uA68B","\uA68D","\uA68F","\uA691","\uA693","\uA695","\uA697","\uA699","\uA69B","\uA723","\uA725","\uA727","\uA729","\uA72B","\uA72D",["\uA72F","\uA731"],"\uA733","\uA735","\uA737","\uA739","\uA73B","\uA73D","\uA73F","\uA741","\uA743","\uA745","\uA747","\uA749","\uA74B","\uA74D","\uA74F","\uA751","\uA753","\uA755","\uA757","\uA759","\uA75B","\uA75D","\uA75F","\uA761","\uA763","\uA765","\uA767","\uA769","\uA76B","\uA76D","\uA76F",["\uA771","\uA778"],"\uA77A","\uA77C","\uA77F","\uA781","\uA783","\uA785","\uA787","\uA78C","\uA78E","\uA791",["\uA793","\uA795"],"\uA797","\uA799","\uA79B","\uA79D","\uA79F","\uA7A1","\uA7A3","\uA7A5","\uA7A7","\uA7A9","\uA7B5","\uA7B7","\uA7FA",["\uAB30","\uAB5A"],["\uAB60","\uAB65"],["\uAB70","\uABBF"],["\uFB00","\uFB06"],["\uFB13","\uFB17"],["\uFF41","\uFF5A"]],!1,!1),nn=kn([["\u02B0","\u02C1"],["\u02C6","\u02D1"],["\u02E0","\u02E4"],"\u02EC","\u02EE","\u0374","\u037A","\u0559","\u0640",["\u06E5","\u06E6"],["\u07F4","\u07F5"],"\u07FA","\u081A","\u0824","\u0828","\u0971","\u0E46","\u0EC6","\u10FC","\u17D7","\u1843","\u1AA7",["\u1C78","\u1C7D"],["\u1D2C","\u1D6A"],"\u1D78",["\u1D9B","\u1DBF"],"\u2071","\u207F",["\u2090","\u209C"],["\u2C7C","\u2C7D"],"\u2D6F","\u2E2F","\u3005",["\u3031","\u3035"],"\u303B",["\u309D","\u309E"],["\u30FC","\u30FE"],"\uA015",["\uA4F8","\uA4FD"],"\uA60C","\uA67F",["\uA69C","\uA69D"],["\uA717","\uA71F"],"\uA770","\uA788",["\uA7F8","\uA7F9"],"\uA9CF","\uA9E6","\uAA70","\uAADD",["\uAAF3","\uAAF4"],["\uAB5C","\uAB5F"],"\uFF70",["\uFF9E","\uFF9F"]],!1,!1),en=kn(["\xAA","\xBA","\u01BB",["\u01C0","\u01C3"],"\u0294",["\u05D0","\u05EA"],["\u05F0","\u05F2"],["\u0620","\u063F"],["\u0641","\u064A"],["\u066E","\u066F"],["\u0671","\u06D3"],"\u06D5",["\u06EE","\u06EF"],["\u06FA","\u06FC"],"\u06FF","\u0710",["\u0712","\u072F"],["\u074D","\u07A5"],"\u07B1",["\u07CA","\u07EA"],["\u0800","\u0815"],["\u0840","\u0858"],["\u08A0","\u08B4"],["\u0904","\u0939"],"\u093D","\u0950",["\u0958","\u0961"],["\u0972","\u0980"],["\u0985","\u098C"],["\u098F","\u0990"],["\u0993","\u09A8"],["\u09AA","\u09B0"],"\u09B2",["\u09B6","\u09B9"],"\u09BD","\u09CE",["\u09DC","\u09DD"],["\u09DF","\u09E1"],["\u09F0","\u09F1"],["\u0A05","\u0A0A"],["\u0A0F","\u0A10"],["\u0A13","\u0A28"],["\u0A2A","\u0A30"],["\u0A32","\u0A33"],["\u0A35","\u0A36"],["\u0A38","\u0A39"],["\u0A59","\u0A5C"],"\u0A5E",["\u0A72","\u0A74"],["\u0A85","\u0A8D"],["\u0A8F","\u0A91"],["\u0A93","\u0AA8"],["\u0AAA","\u0AB0"],["\u0AB2","\u0AB3"],["\u0AB5","\u0AB9"],"\u0ABD","\u0AD0",["\u0AE0","\u0AE1"],"\u0AF9",["\u0B05","\u0B0C"],["\u0B0F","\u0B10"],["\u0B13","\u0B28"],["\u0B2A","\u0B30"],["\u0B32","\u0B33"],["\u0B35","\u0B39"],"\u0B3D",["\u0B5C","\u0B5D"],["\u0B5F","\u0B61"],"\u0B71","\u0B83",["\u0B85","\u0B8A"],["\u0B8E","\u0B90"],["\u0B92","\u0B95"],["\u0B99","\u0B9A"],"\u0B9C",["\u0B9E","\u0B9F"],["\u0BA3","\u0BA4"],["\u0BA8","\u0BAA"],["\u0BAE","\u0BB9"],"\u0BD0",["\u0C05","\u0C0C"],["\u0C0E","\u0C10"],["\u0C12","\u0C28"],["\u0C2A","\u0C39"],"\u0C3D",["\u0C58","\u0C5A"],["\u0C60","\u0C61"],["\u0C85","\u0C8C"],["\u0C8E","\u0C90"],["\u0C92","\u0CA8"],["\u0CAA","\u0CB3"],["\u0CB5","\u0CB9"],"\u0CBD","\u0CDE",["\u0CE0","\u0CE1"],["\u0CF1","\u0CF2"],["\u0D05","\u0D0C"],["\u0D0E","\u0D10"],["\u0D12","\u0D3A"],"\u0D3D","\u0D4E",["\u0D5F","\u0D61"],["\u0D7A","\u0D7F"],["\u0D85","\u0D96"],["\u0D9A","\u0DB1"],["\u0DB3","\u0DBB"],"\u0DBD",["\u0DC0","\u0DC6"],["\u0E01","\u0E30"],["\u0E32","\u0E33"],["\u0E40","\u0E45"],["\u0E81","\u0E82"],"\u0E84",["\u0E87","\u0E88"],"\u0E8A","\u0E8D",["\u0E94","\u0E97"],["\u0E99","\u0E9F"],["\u0EA1","\u0EA3"],"\u0EA5","\u0EA7",["\u0EAA","\u0EAB"],["\u0EAD","\u0EB0"],["\u0EB2","\u0EB3"],"\u0EBD",["\u0EC0","\u0EC4"],["\u0EDC","\u0EDF"],"\u0F00",["\u0F40","\u0F47"],["\u0F49","\u0F6C"],["\u0F88","\u0F8C"],["\u1000","\u102A"],"\u103F",["\u1050","\u1055"],["\u105A","\u105D"],"\u1061",["\u1065","\u1066"],["\u106E","\u1070"],["\u1075","\u1081"],"\u108E",["\u10D0","\u10FA"],["\u10FD","\u1248"],["\u124A","\u124D"],["\u1250","\u1256"],"\u1258",["\u125A","\u125D"],["\u1260","\u1288"],["\u128A","\u128D"],["\u1290","\u12B0"],["\u12B2","\u12B5"],["\u12B8","\u12BE"],"\u12C0",["\u12C2","\u12C5"],["\u12C8","\u12D6"],["\u12D8","\u1310"],["\u1312","\u1315"],["\u1318","\u135A"],["\u1380","\u138F"],["\u1401","\u166C"],["\u166F","\u167F"],["\u1681","\u169A"],["\u16A0","\u16EA"],["\u16F1","\u16F8"],["\u1700","\u170C"],["\u170E","\u1711"],["\u1720","\u1731"],["\u1740","\u1751"],["\u1760","\u176C"],["\u176E","\u1770"],["\u1780","\u17B3"],"\u17DC",["\u1820","\u1842"],["\u1844","\u1877"],["\u1880","\u18A8"],"\u18AA",["\u18B0","\u18F5"],["\u1900","\u191E"],["\u1950","\u196D"],["\u1970","\u1974"],["\u1980","\u19AB"],["\u19B0","\u19C9"],["\u1A00","\u1A16"],["\u1A20","\u1A54"],["\u1B05","\u1B33"],["\u1B45","\u1B4B"],["\u1B83","\u1BA0"],["\u1BAE","\u1BAF"],["\u1BBA","\u1BE5"],["\u1C00","\u1C23"],["\u1C4D","\u1C4F"],["\u1C5A","\u1C77"],["\u1CE9","\u1CEC"],["\u1CEE","\u1CF1"],["\u1CF5","\u1CF6"],["\u2135","\u2138"],["\u2D30","\u2D67"],["\u2D80","\u2D96"],["\u2DA0","\u2DA6"],["\u2DA8","\u2DAE"],["\u2DB0","\u2DB6"],["\u2DB8","\u2DBE"],["\u2DC0","\u2DC6"],["\u2DC8","\u2DCE"],["\u2DD0","\u2DD6"],["\u2DD8","\u2DDE"],"\u3006","\u303C",["\u3041","\u3096"],"\u309F",["\u30A1","\u30FA"],"\u30FF",["\u3105","\u312D"],["\u3131","\u318E"],["\u31A0","\u31BA"],["\u31F0","\u31FF"],["\u3400","\u4DB5"],["\u4E00","\u9FD5"],["\uA000","\uA014"],["\uA016","\uA48C"],["\uA4D0","\uA4F7"],["\uA500","\uA60B"],["\uA610","\uA61F"],["\uA62A","\uA62B"],"\uA66E",["\uA6A0","\uA6E5"],"\uA78F","\uA7F7",["\uA7FB","\uA801"],["\uA803","\uA805"],["\uA807","\uA80A"],["\uA80C","\uA822"],["\uA840","\uA873"],["\uA882","\uA8B3"],["\uA8F2","\uA8F7"],"\uA8FB","\uA8FD",["\uA90A","\uA925"],["\uA930","\uA946"],["\uA960","\uA97C"],["\uA984","\uA9B2"],["\uA9E0","\uA9E4"],["\uA9E7","\uA9EF"],["\uA9FA","\uA9FE"],["\uAA00","\uAA28"],["\uAA40","\uAA42"],["\uAA44","\uAA4B"],["\uAA60","\uAA6F"],["\uAA71","\uAA76"],"\uAA7A",["\uAA7E","\uAAAF"],"\uAAB1",["\uAAB5","\uAAB6"],["\uAAB9","\uAABD"],"\uAAC0","\uAAC2",["\uAADB","\uAADC"],["\uAAE0","\uAAEA"],"\uAAF2",["\uAB01","\uAB06"],["\uAB09","\uAB0E"],["\uAB11","\uAB16"],["\uAB20","\uAB26"],["\uAB28","\uAB2E"],["\uABC0","\uABE2"],["\uAC00","\uD7A3"],["\uD7B0","\uD7C6"],["\uD7CB","\uD7FB"],["\uF900","\uFA6D"],["\uFA70","\uFAD9"],"\uFB1D",["\uFB1F","\uFB28"],["\uFB2A","\uFB36"],["\uFB38","\uFB3C"],"\uFB3E",["\uFB40","\uFB41"],["\uFB43","\uFB44"],["\uFB46","\uFBB1"],["\uFBD3","\uFD3D"],["\uFD50","\uFD8F"],["\uFD92","\uFDC7"],["\uFDF0","\uFDFB"],["\uFE70","\uFE74"],["\uFE76","\uFEFC"],["\uFF66","\uFF6F"],["\uFF71","\uFF9D"],["\uFFA0","\uFFBE"],["\uFFC2","\uFFC7"],["\uFFCA","\uFFCF"],["\uFFD2","\uFFD7"],["\uFFDA","\uFFDC"]],!1,!1),vr=kn(["\u01C5","\u01C8","\u01CB","\u01F2",["\u1F88","\u1F8F"],["\u1F98","\u1F9F"],["\u1FA8","\u1FAF"],"\u1FBC","\u1FCC","\u1FFC"],!1,!1),hs=kn([["A","Z"],["\xC0","\xD6"],["\xD8","\xDE"],"\u0100","\u0102","\u0104","\u0106","\u0108","\u010A","\u010C","\u010E","\u0110","\u0112","\u0114","\u0116","\u0118","\u011A","\u011C","\u011E","\u0120","\u0122","\u0124","\u0126","\u0128","\u012A","\u012C","\u012E","\u0130","\u0132","\u0134","\u0136","\u0139","\u013B","\u013D","\u013F","\u0141","\u0143","\u0145","\u0147","\u014A","\u014C","\u014E","\u0150","\u0152","\u0154","\u0156","\u0158","\u015A","\u015C","\u015E","\u0160","\u0162","\u0164","\u0166","\u0168","\u016A","\u016C","\u016E","\u0170","\u0172","\u0174","\u0176",["\u0178","\u0179"],"\u017B","\u017D",["\u0181","\u0182"],"\u0184",["\u0186","\u0187"],["\u0189","\u018B"],["\u018E","\u0191"],["\u0193","\u0194"],["\u0196","\u0198"],["\u019C","\u019D"],["\u019F","\u01A0"],"\u01A2","\u01A4",["\u01A6","\u01A7"],"\u01A9","\u01AC",["\u01AE","\u01AF"],["\u01B1","\u01B3"],"\u01B5",["\u01B7","\u01B8"],"\u01BC","\u01C4","\u01C7","\u01CA","\u01CD","\u01CF","\u01D1","\u01D3","\u01D5","\u01D7","\u01D9","\u01DB","\u01DE","\u01E0","\u01E2","\u01E4","\u01E6","\u01E8","\u01EA","\u01EC","\u01EE","\u01F1","\u01F4",["\u01F6","\u01F8"],"\u01FA","\u01FC","\u01FE","\u0200","\u0202","\u0204","\u0206","\u0208","\u020A","\u020C","\u020E","\u0210","\u0212","\u0214","\u0216","\u0218","\u021A","\u021C","\u021E","\u0220","\u0222","\u0224","\u0226","\u0228","\u022A","\u022C","\u022E","\u0230","\u0232",["\u023A","\u023B"],["\u023D","\u023E"],"\u0241",["\u0243","\u0246"],"\u0248","\u024A","\u024C","\u024E","\u0370","\u0372","\u0376","\u037F","\u0386",["\u0388","\u038A"],"\u038C",["\u038E","\u038F"],["\u0391","\u03A1"],["\u03A3","\u03AB"],"\u03CF",["\u03D2","\u03D4"],"\u03D8","\u03DA","\u03DC","\u03DE","\u03E0","\u03E2","\u03E4","\u03E6","\u03E8","\u03EA","\u03EC","\u03EE","\u03F4","\u03F7",["\u03F9","\u03FA"],["\u03FD","\u042F"],"\u0460","\u0462","\u0464","\u0466","\u0468","\u046A","\u046C","\u046E","\u0470","\u0472","\u0474","\u0476","\u0478","\u047A","\u047C","\u047E","\u0480","\u048A","\u048C","\u048E","\u0490","\u0492","\u0494","\u0496","\u0498","\u049A","\u049C","\u049E","\u04A0","\u04A2","\u04A4","\u04A6","\u04A8","\u04AA","\u04AC","\u04AE","\u04B0","\u04B2","\u04B4","\u04B6","\u04B8","\u04BA","\u04BC","\u04BE",["\u04C0","\u04C1"],"\u04C3","\u04C5","\u04C7","\u04C9","\u04CB","\u04CD","\u04D0","\u04D2","\u04D4","\u04D6","\u04D8","\u04DA","\u04DC","\u04DE","\u04E0","\u04E2","\u04E4","\u04E6","\u04E8","\u04EA","\u04EC","\u04EE","\u04F0","\u04F2","\u04F4","\u04F6","\u04F8","\u04FA","\u04FC","\u04FE","\u0500","\u0502","\u0504","\u0506","\u0508","\u050A","\u050C","\u050E","\u0510","\u0512","\u0514","\u0516","\u0518","\u051A","\u051C","\u051E","\u0520","\u0522","\u0524","\u0526","\u0528","\u052A","\u052C","\u052E",["\u0531","\u0556"],["\u10A0","\u10C5"],"\u10C7","\u10CD",["\u13A0","\u13F5"],"\u1E00","\u1E02","\u1E04","\u1E06","\u1E08","\u1E0A","\u1E0C","\u1E0E","\u1E10","\u1E12","\u1E14","\u1E16","\u1E18","\u1E1A","\u1E1C","\u1E1E","\u1E20","\u1E22","\u1E24","\u1E26","\u1E28","\u1E2A","\u1E2C","\u1E2E","\u1E30","\u1E32","\u1E34","\u1E36","\u1E38","\u1E3A","\u1E3C","\u1E3E","\u1E40","\u1E42","\u1E44","\u1E46","\u1E48","\u1E4A","\u1E4C","\u1E4E","\u1E50","\u1E52","\u1E54","\u1E56","\u1E58","\u1E5A","\u1E5C","\u1E5E","\u1E60","\u1E62","\u1E64","\u1E66","\u1E68","\u1E6A","\u1E6C","\u1E6E","\u1E70","\u1E72","\u1E74","\u1E76","\u1E78","\u1E7A","\u1E7C","\u1E7E","\u1E80","\u1E82","\u1E84","\u1E86","\u1E88","\u1E8A","\u1E8C","\u1E8E","\u1E90","\u1E92","\u1E94","\u1E9E","\u1EA0","\u1EA2","\u1EA4","\u1EA6","\u1EA8","\u1EAA","\u1EAC","\u1EAE","\u1EB0","\u1EB2","\u1EB4","\u1EB6","\u1EB8","\u1EBA","\u1EBC","\u1EBE","\u1EC0","\u1EC2","\u1EC4","\u1EC6","\u1EC8","\u1ECA","\u1ECC","\u1ECE","\u1ED0","\u1ED2","\u1ED4","\u1ED6","\u1ED8","\u1EDA","\u1EDC","\u1EDE","\u1EE0","\u1EE2","\u1EE4","\u1EE6","\u1EE8","\u1EEA","\u1EEC","\u1EEE","\u1EF0","\u1EF2","\u1EF4","\u1EF6","\u1EF8","\u1EFA","\u1EFC","\u1EFE",["\u1F08","\u1F0F"],["\u1F18","\u1F1D"],["\u1F28","\u1F2F"],["\u1F38","\u1F3F"],["\u1F48","\u1F4D"],"\u1F59","\u1F5B","\u1F5D","\u1F5F",["\u1F68","\u1F6F"],["\u1FB8","\u1FBB"],["\u1FC8","\u1FCB"],["\u1FD8","\u1FDB"],["\u1FE8","\u1FEC"],["\u1FF8","\u1FFB"],"\u2102","\u2107",["\u210B","\u210D"],["\u2110","\u2112"],"\u2115",["\u2119","\u211D"],"\u2124","\u2126","\u2128",["\u212A","\u212D"],["\u2130","\u2133"],["\u213E","\u213F"],"\u2145","\u2183",["\u2C00","\u2C2E"],"\u2C60",["\u2C62","\u2C64"],"\u2C67","\u2C69","\u2C6B",["\u2C6D","\u2C70"],"\u2C72","\u2C75",["\u2C7E","\u2C80"],"\u2C82","\u2C84","\u2C86","\u2C88","\u2C8A","\u2C8C","\u2C8E","\u2C90","\u2C92","\u2C94","\u2C96","\u2C98","\u2C9A","\u2C9C","\u2C9E","\u2CA0","\u2CA2","\u2CA4","\u2CA6","\u2CA8","\u2CAA","\u2CAC","\u2CAE","\u2CB0","\u2CB2","\u2CB4","\u2CB6","\u2CB8","\u2CBA","\u2CBC","\u2CBE","\u2CC0","\u2CC2","\u2CC4","\u2CC6","\u2CC8","\u2CCA","\u2CCC","\u2CCE","\u2CD0","\u2CD2","\u2CD4","\u2CD6","\u2CD8","\u2CDA","\u2CDC","\u2CDE","\u2CE0","\u2CE2","\u2CEB","\u2CED","\u2CF2","\uA640","\uA642","\uA644","\uA646","\uA648","\uA64A","\uA64C","\uA64E","\uA650","\uA652","\uA654","\uA656","\uA658","\uA65A","\uA65C","\uA65E","\uA660","\uA662","\uA664","\uA666","\uA668","\uA66A","\uA66C","\uA680","\uA682","\uA684","\uA686","\uA688","\uA68A","\uA68C","\uA68E","\uA690","\uA692","\uA694","\uA696","\uA698","\uA69A","\uA722","\uA724","\uA726","\uA728","\uA72A","\uA72C","\uA72E","\uA732","\uA734","\uA736","\uA738","\uA73A","\uA73C","\uA73E","\uA740","\uA742","\uA744","\uA746","\uA748","\uA74A","\uA74C","\uA74E","\uA750","\uA752","\uA754","\uA756","\uA758","\uA75A","\uA75C","\uA75E","\uA760","\uA762","\uA764","\uA766","\uA768","\uA76A","\uA76C","\uA76E","\uA779","\uA77B",["\uA77D","\uA77E"],"\uA780","\uA782","\uA784","\uA786","\uA78B","\uA78D","\uA790","\uA792","\uA796","\uA798","\uA79A","\uA79C","\uA79E","\uA7A0","\uA7A2","\uA7A4","\uA7A6","\uA7A8",["\uA7AA","\uA7AD"],["\uA7B0","\uA7B4"],"\uA7B6",["\uFF21","\uFF3A"]],!1,!1),Ts=kn(["\u0903","\u093B",["\u093E","\u0940"],["\u0949","\u094C"],["\u094E","\u094F"],["\u0982","\u0983"],["\u09BE","\u09C0"],["\u09C7","\u09C8"],["\u09CB","\u09CC"],"\u09D7","\u0A03",["\u0A3E","\u0A40"],"\u0A83",["\u0ABE","\u0AC0"],"\u0AC9",["\u0ACB","\u0ACC"],["\u0B02","\u0B03"],"\u0B3E","\u0B40",["\u0B47","\u0B48"],["\u0B4B","\u0B4C"],"\u0B57",["\u0BBE","\u0BBF"],["\u0BC1","\u0BC2"],["\u0BC6","\u0BC8"],["\u0BCA","\u0BCC"],"\u0BD7",["\u0C01","\u0C03"],["\u0C41","\u0C44"],["\u0C82","\u0C83"],"\u0CBE",["\u0CC0","\u0CC4"],["\u0CC7","\u0CC8"],["\u0CCA","\u0CCB"],["\u0CD5","\u0CD6"],["\u0D02","\u0D03"],["\u0D3E","\u0D40"],["\u0D46","\u0D48"],["\u0D4A","\u0D4C"],"\u0D57",["\u0D82","\u0D83"],["\u0DCF","\u0DD1"],["\u0DD8","\u0DDF"],["\u0DF2","\u0DF3"],["\u0F3E","\u0F3F"],"\u0F7F",["\u102B","\u102C"],"\u1031","\u1038",["\u103B","\u103C"],["\u1056","\u1057"],["\u1062","\u1064"],["\u1067","\u106D"],["\u1083","\u1084"],["\u1087","\u108C"],"\u108F",["\u109A","\u109C"],"\u17B6",["\u17BE","\u17C5"],["\u17C7","\u17C8"],["\u1923","\u1926"],["\u1929","\u192B"],["\u1930","\u1931"],["\u1933","\u1938"],["\u1A19","\u1A1A"],"\u1A55","\u1A57","\u1A61",["\u1A63","\u1A64"],["\u1A6D","\u1A72"],"\u1B04","\u1B35","\u1B3B",["\u1B3D","\u1B41"],["\u1B43","\u1B44"],"\u1B82","\u1BA1",["\u1BA6","\u1BA7"],"\u1BAA","\u1BE7",["\u1BEA","\u1BEC"],"\u1BEE",["\u1BF2","\u1BF3"],["\u1C24","\u1C2B"],["\u1C34","\u1C35"],"\u1CE1",["\u1CF2","\u1CF3"],["\u302E","\u302F"],["\uA823","\uA824"],"\uA827",["\uA880","\uA881"],["\uA8B4","\uA8C3"],["\uA952","\uA953"],"\uA983",["\uA9B4","\uA9B5"],["\uA9BA","\uA9BB"],["\uA9BD","\uA9C0"],["\uAA2F","\uAA30"],["\uAA33","\uAA34"],"\uAA4D","\uAA7B","\uAA7D","\uAAEB",["\uAAEE","\uAAEF"],"\uAAF5",["\uABE3","\uABE4"],["\uABE6","\uABE7"],["\uABE9","\uABEA"],"\uABEC"],!1,!1),Ri=kn([["\u0300","\u036F"],["\u0483","\u0487"],["\u0591","\u05BD"],"\u05BF",["\u05C1","\u05C2"],["\u05C4","\u05C5"],"\u05C7",["\u0610","\u061A"],["\u064B","\u065F"],"\u0670",["\u06D6","\u06DC"],["\u06DF","\u06E4"],["\u06E7","\u06E8"],["\u06EA","\u06ED"],"\u0711",["\u0730","\u074A"],["\u07A6","\u07B0"],["\u07EB","\u07F3"],["\u0816","\u0819"],["\u081B","\u0823"],["\u0825","\u0827"],["\u0829","\u082D"],["\u0859","\u085B"],["\u08E3","\u0902"],"\u093A","\u093C",["\u0941","\u0948"],"\u094D",["\u0951","\u0957"],["\u0962","\u0963"],"\u0981","\u09BC",["\u09C1","\u09C4"],"\u09CD",["\u09E2","\u09E3"],["\u0A01","\u0A02"],"\u0A3C",["\u0A41","\u0A42"],["\u0A47","\u0A48"],["\u0A4B","\u0A4D"],"\u0A51",["\u0A70","\u0A71"],"\u0A75",["\u0A81","\u0A82"],"\u0ABC",["\u0AC1","\u0AC5"],["\u0AC7","\u0AC8"],"\u0ACD",["\u0AE2","\u0AE3"],"\u0B01","\u0B3C","\u0B3F",["\u0B41","\u0B44"],"\u0B4D","\u0B56",["\u0B62","\u0B63"],"\u0B82","\u0BC0","\u0BCD","\u0C00",["\u0C3E","\u0C40"],["\u0C46","\u0C48"],["\u0C4A","\u0C4D"],["\u0C55","\u0C56"],["\u0C62","\u0C63"],"\u0C81","\u0CBC","\u0CBF","\u0CC6",["\u0CCC","\u0CCD"],["\u0CE2","\u0CE3"],"\u0D01",["\u0D41","\u0D44"],"\u0D4D",["\u0D62","\u0D63"],"\u0DCA",["\u0DD2","\u0DD4"],"\u0DD6","\u0E31",["\u0E34","\u0E3A"],["\u0E47","\u0E4E"],"\u0EB1",["\u0EB4","\u0EB9"],["\u0EBB","\u0EBC"],["\u0EC8","\u0ECD"],["\u0F18","\u0F19"],"\u0F35","\u0F37","\u0F39",["\u0F71","\u0F7E"],["\u0F80","\u0F84"],["\u0F86","\u0F87"],["\u0F8D","\u0F97"],["\u0F99","\u0FBC"],"\u0FC6",["\u102D","\u1030"],["\u1032","\u1037"],["\u1039","\u103A"],["\u103D","\u103E"],["\u1058","\u1059"],["\u105E","\u1060"],["\u1071","\u1074"],"\u1082",["\u1085","\u1086"],"\u108D","\u109D",["\u135D","\u135F"],["\u1712","\u1714"],["\u1732","\u1734"],["\u1752","\u1753"],["\u1772","\u1773"],["\u17B4","\u17B5"],["\u17B7","\u17BD"],"\u17C6",["\u17C9","\u17D3"],"\u17DD",["\u180B","\u180D"],"\u18A9",["\u1920","\u1922"],["\u1927","\u1928"],"\u1932",["\u1939","\u193B"],["\u1A17","\u1A18"],"\u1A1B","\u1A56",["\u1A58","\u1A5E"],"\u1A60","\u1A62",["\u1A65","\u1A6C"],["\u1A73","\u1A7C"],"\u1A7F",["\u1AB0","\u1ABD"],["\u1B00","\u1B03"],"\u1B34",["\u1B36","\u1B3A"],"\u1B3C","\u1B42",["\u1B6B","\u1B73"],["\u1B80","\u1B81"],["\u1BA2","\u1BA5"],["\u1BA8","\u1BA9"],["\u1BAB","\u1BAD"],"\u1BE6",["\u1BE8","\u1BE9"],"\u1BED",["\u1BEF","\u1BF1"],["\u1C2C","\u1C33"],["\u1C36","\u1C37"],["\u1CD0","\u1CD2"],["\u1CD4","\u1CE0"],["\u1CE2","\u1CE8"],"\u1CED","\u1CF4",["\u1CF8","\u1CF9"],["\u1DC0","\u1DF5"],["\u1DFC","\u1DFF"],["\u20D0","\u20DC"],"\u20E1",["\u20E5","\u20F0"],["\u2CEF","\u2CF1"],"\u2D7F",["\u2DE0","\u2DFF"],["\u302A","\u302D"],["\u3099","\u309A"],"\uA66F",["\uA674","\uA67D"],["\uA69E","\uA69F"],["\uA6F0","\uA6F1"],"\uA802","\uA806","\uA80B",["\uA825","\uA826"],"\uA8C4",["\uA8E0","\uA8F1"],["\uA926","\uA92D"],["\uA947","\uA951"],["\uA980","\uA982"],"\uA9B3",["\uA9B6","\uA9B9"],"\uA9BC","\uA9E5",["\uAA29","\uAA2E"],["\uAA31","\uAA32"],["\uAA35","\uAA36"],"\uAA43","\uAA4C","\uAA7C","\uAAB0",["\uAAB2","\uAAB4"],["\uAAB7","\uAAB8"],["\uAABE","\uAABF"],"\uAAC1",["\uAAEC","\uAAED"],"\uAAF6","\uABE5","\uABE8","\uABED","\uFB1E",["\uFE00","\uFE0F"],["\uFE20","\uFE2F"]],!1,!1),ws=kn([["0","9"],["\u0660","\u0669"],["\u06F0","\u06F9"],["\u07C0","\u07C9"],["\u0966","\u096F"],["\u09E6","\u09EF"],["\u0A66","\u0A6F"],["\u0AE6","\u0AEF"],["\u0B66","\u0B6F"],["\u0BE6","\u0BEF"],["\u0C66","\u0C6F"],["\u0CE6","\u0CEF"],["\u0D66","\u0D6F"],["\u0DE6","\u0DEF"],["\u0E50","\u0E59"],["\u0ED0","\u0ED9"],["\u0F20","\u0F29"],["\u1040","\u1049"],["\u1090","\u1099"],["\u17E0","\u17E9"],["\u1810","\u1819"],["\u1946","\u194F"],["\u19D0","\u19D9"],["\u1A80","\u1A89"],["\u1A90","\u1A99"],["\u1B50","\u1B59"],["\u1BB0","\u1BB9"],["\u1C40","\u1C49"],["\u1C50","\u1C59"],["\uA620","\uA629"],["\uA8D0","\uA8D9"],["\uA900","\uA909"],["\uA9D0","\uA9D9"],["\uA9F0","\uA9F9"],["\uAA50","\uAA59"],["\uABF0","\uABF9"],["\uFF10","\uFF19"]],!1,!1),ds=kn([["\u16EE","\u16F0"],["\u2160","\u2182"],["\u2185","\u2188"],"\u3007",["\u3021","\u3029"],["\u3038","\u303A"],["\uA6E6","\uA6EF"]],!1,!1),$i=kn(["_",["\u203F","\u2040"],"\u2054",["\uFE33","\uFE34"],["\uFE4D","\uFE4F"],"\uFF3F"],!1,!1),En=kn([" ","\xA0","\u1680",["\u2000","\u200A"],"\u202F","\u205F","\u3000"],!1,!1),Gi=gr(";",!1),Aa=function(d,B,ut){return{type:"grammar",topLevelInitializer:d,initializer:B,rules:ut,location:_r()}},wa=function(d){return{type:"top_level_initializer",code:d[0],codeLocation:d[1],location:_r()}},Rn=function(d){return{type:"initializer",code:d[0],codeLocation:d[1],location:_r()}},Sn=function(d,B,ut){return{type:"rule",name:d[0],nameLocation:d[1],expression:B!==null?{type:"named",name:B,expression:ut,location:_r()}:ut,location:_r()}},Fa=function(d,B){return B.length>0?{type:"choice",alternatives:[d].concat(B),location:_r()}:d},ba=function(d,B){return B!==null?{type:"action",expression:d,code:B[0],codeLocation:B[1],location:_r()}:d},Da=function(d,B){return B.length>0||d.type==="labeled"&&d.pick?{type:"sequence",elements:[d].concat(B),location:_r()}:d},an=function(d,B,ut){return ut.type.startsWith("semantic_")&&Yi('"@" cannot be used on a semantic predicate',d),{type:"labeled",label:B!==null?B[0]:null,labelLocation:B!==null?B[1]:d,pick:!0,expression:ut,location:_r()}},Ca=function(d,B){return{type:"labeled",label:d[0],labelLocation:d[1],expression:B,location:_r()}},_a=function(){return _r()},Wu=function(d){return be.indexOf(d[0])>=0&&Yi(`Label can't be a reserved word "${d[0]}"`,d[1]),d},Sa=function(d,B){return{type:n[d],expression:B,location:_r()}},Qn=function(d,B){return{type:u[B],expression:d,location:_r()}},Cu=function(d){return d.type==="labeled"||d.type==="sequence"?{type:"group",expression:d,location:_r()}:d},vi=function(d){return{type:"rule_ref",name:d[0],location:_r()}},Xu=function(d,B){return{type:s[d],code:B[0],codeLocation:B[1],location:_r()}},xu=function(d,B){return[d+B.join(""),_r()]},Yn=function(d,B){return{type:"literal",value:d,ignoreCase:B!==null,location:_r()}},Zu=function(d){return d.join("")},Qu=function(d){return d.join("")},ta=function(d,B,ut){return{type:"class",parts:B.filter(z=>z!==""),inverted:d!==null,ignoreCase:ut!==null,location:_r()}},ea=function(d,B){return d.charCodeAt(0)>B.charCodeAt(0)&&Yi("Invalid character range: "+pu()+"."),[d,B]},ra=function(){return""},sa=function(){return"\0"},Fs=function(){return"\b"},ia=function(){return"\f"},Ge=function(){return`
`},v=function(){return"\r"},_u=function(){return"	"},Zs=function(){return"\v"},Ai=function(d){return String.fromCharCode(parseInt(d,16))},cs=function(d){return String.fromCharCode(parseInt(d,16))},On=function(){return{type:"any",location:_r()}},li=function(d){return[d,_r()]},pt=0,Rr=0,Vs=[{line:1,column:1}],An=0,Cn=[],Fe=0,gs;if("startRule"in D){if(!(D.startRule in W))throw new Error(`Can't start parsing from rule "`+D.startRule+'".');w=W[D.startRule]}function pu(){return m.substring(Rr,pt)}function Ji(){return Rr}function Su(){return{source:H,start:Rr,end:pt}}function _r(){return Pi(Rr,pt)}function Ba(d,B){throw B=B!==void 0?B:Pi(Rr,pt),Oi([ms(d)],m.substring(Rr,pt),B)}function Yi(d,B){throw B=B!==void 0?B:Pi(Rr,pt),Pn(d,B)}function gr(d,B){return{type:"literal",text:d,ignoreCase:B}}function kn(d,B,ut){return{type:"class",parts:d,inverted:B,ignoreCase:ut}}function Bu(){return{type:"any"}}function Iu(){return{type:"end"}}function ms(d){return{type:"other",description:d}}function Ru(d){var B=Vs[d],ut;if(B)return B;for(ut=d-1;!Vs[ut];)ut--;for(B=Vs[ut],B={line:B.line,column:B.column};ut<d;)m.charCodeAt(ut)===10?(B.line++,B.column=1):B.column++,ut++;return Vs[d]=B,B}function Pi(d,B){var ut=Ru(d),z=Ru(B);return{source:H,start:{offset:d,line:ut.line,column:ut.column},end:{offset:B,line:z.line,column:z.column}}}function ke(d){pt<An||(pt>An&&(An=pt,Cn=[]),Cn.push(d))}function Pn(d,B){return new y(d,null,null,B)}function Oi(d,B,ut){return new y(y.buildMessage(d,B),d,B,ut)}function $u(){var d,B,ut,z,St,Mt,te,ie;if(d=pt,B=Tt(),ut=pt,z=aa(),z!==a?(St=Tt(),ut=z):(pt=ut,ut=a),ut===a&&(ut=null),z=pt,St=ku(),St!==a?(Mt=Tt(),z=St):(pt=z,z=a),z===a&&(z=null),St=[],Mt=pt,te=oa(),te!==a?(ie=Tt(),Mt=te):(pt=Mt,Mt=a),Mt!==a)for(;Mt!==a;)St.push(Mt),Mt=pt,te=oa(),te!==a?(ie=Tt(),Mt=te):(pt=Mt,Mt=a);else St=a;return St!==a?(Rr=d,d=Aa(ut,z,St)):(pt=d,d=a),d}function aa(){var d,B,ut,z,St;return d=pt,m.charCodeAt(pt)===123?(B=U,pt++):(B=a,Fe===0&&ke(Yt)),B!==a?(ut=C(),ut!==a?(m.charCodeAt(pt)===125?(z=tt,pt++):(z=a,Fe===0&&ke(De)),z!==a?(St=Gt(),St!==a?(Rr=d,d=wa(ut)):(pt=d,d=a)):(pt=d,d=a)):(pt=d,d=a)):(pt=d,d=a),d}function ku(){var d,B,ut;return d=pt,B=C(),B!==a?(ut=Gt(),ut!==a?(Rr=d,d=Rn(B)):(pt=d,d=a)):(pt=d,d=a),d}function oa(){var d,B,ut,z,St,Mt,te,ie;return d=pt,B=ye(),B!==a?(ut=Tt(),z=pt,St=Gn(),St!==a?(Mt=Tt(),z=St):(pt=z,z=a),z===a&&(z=null),m.charCodeAt(pt)===61?(St=J,pt++):(St=a,Fe===0&&ke(Qt)),St!==a?(Mt=Tt(),te=Pu(),te!==a?(ie=Gt(),ie!==a?(Rr=d,d=Sn(B,z,te)):(pt=d,d=a)):(pt=d,d=a)):(pt=d,d=a)):(pt=d,d=a),d}function Pu(){var d,B,ut,z,St,Mt,te,ie;if(d=pt,B=Ou(),B!==a){for(ut=[],z=pt,St=Tt(),m.charCodeAt(pt)===47?(Mt=N,pt++):(Mt=a,Fe===0&&ke(Ee)),Mt!==a?(te=Tt(),ie=Ou(),ie!==a?z=ie:(pt=z,z=a)):(pt=z,z=a);z!==a;)ut.push(z),z=pt,St=Tt(),m.charCodeAt(pt)===47?(Mt=N,pt++):(Mt=a,Fe===0&&ke(Ee)),Mt!==a?(te=Tt(),ie=Ou(),ie!==a?z=ie:(pt=z,z=a)):(pt=z,z=a);Rr=d,d=Fa(B,ut)}else pt=d,d=a;return d}function Ou(){var d,B,ut,z,St;return d=pt,B=Ia(),B!==a?(ut=pt,z=Tt(),St=C(),St!==a?ut=St:(pt=ut,ut=a),ut===a&&(ut=null),Rr=d,d=ba(B,ut)):(pt=d,d=a),d}function Ia(){var d,B,ut,z,St,Mt;if(d=pt,B=Qs(),B!==a){for(ut=[],z=pt,St=Tt(),Mt=Qs(),Mt!==a?z=Mt:(pt=z,z=a);z!==a;)ut.push(z),z=pt,St=Tt(),Mt=Qs(),Mt!==a?z=Mt:(pt=z,z=a);Rr=d,d=Da(B,ut)}else pt=d,d=a;return d}function Qs(){var d,B,ut,z;return d=pt,B=hu(),B!==a?(ut=Xi(),ut===a&&(ut=null),z=wi(),z!==a?(Rr=d,d=an(B,ut,z)):(pt=d,d=a)):(pt=d,d=a),d===a&&(d=pt,B=Xi(),B!==a?(ut=Tt(),z=wi(),z!==a?(Rr=d,d=Ca(B,z)):(pt=d,d=a)):(pt=d,d=a),d===a&&(d=wi())),d}function hu(){var d,B;return d=pt,m.charCodeAt(pt)===64?(B=Q,pt++):(B=a,Fe===0&&ke(Be)),B!==a&&(Rr=d,B=_a()),d=B,d}function Xi(){var d,B,ut,z;return d=pt,B=ye(),B!==a?(ut=Tt(),m.charCodeAt(pt)===58?(z=it,pt++):(z=a,Fe===0&&ke(sr)),z!==a?(Rr=d,d=Wu(B)):(pt=d,d=a)):(pt=d,d=a),d}function wi(){var d,B,ut,z;return d=pt,B=fu(),B!==a?(ut=Tt(),z=Bs(),z!==a?(Rr=d,d=Sa(B,z)):(pt=d,d=a)):(pt=d,d=a),d===a&&(d=Bs()),d}function fu(){var d;return m.charCodeAt(pt)===36?(d=q,pt++):(d=a,Fe===0&&ke(P)),d===a&&(m.charCodeAt(pt)===38?(d=L,pt++):(d=a,Fe===0&&ke(le)),d===a&&(m.charCodeAt(pt)===33?(d=V,pt++):(d=a,Fe===0&&ke(Vt)))),d}function Bs(){var d,B,ut,z;return d=pt,B=du(),B!==a?(ut=Tt(),z=Zi(),z!==a?(Rr=d,d=Qn(B,z)):(pt=d,d=a)):(pt=d,d=a),d===a&&(d=du()),d}function Zi(){var d;return m.charCodeAt(pt)===63?(d=lt,pt++):(d=a,Fe===0&&ke(pe)),d===a&&(m.charCodeAt(pt)===42?(d=mt,pt++):(d=a,Fe===0&&ke(kt)),d===a&&(m.charCodeAt(pt)===43?(d=Rt,pt++):(d=a,Fe===0&&ke(re)))),d}function du(){var d,B,ut,z,St,Mt;return d=on(),d===a&&(d=Fn(),d===a&&(d=b(),d===a&&(d=la(),d===a&&(d=Tu(),d===a&&(d=pt,m.charCodeAt(pt)===40?(B=Et,pt++):(B=a,Fe===0&&ke($e)),B!==a?(ut=Tt(),z=Pu(),z!==a?(St=Tt(),m.charCodeAt(pt)===41?(Mt=vt,pt++):(Mt=a,Fe===0&&ke(Ce)),Mt!==a?(Rr=d,d=Cu(z)):(pt=d,d=a)):(pt=d,d=a)):(pt=d,d=a)))))),d}function la(){var d,B,ut,z,St,Mt,te,ie;return d=pt,B=ye(),B!==a?(ut=pt,Fe++,z=pt,St=Tt(),Mt=pt,te=Gn(),te!==a?(ie=Tt(),te=[te,ie],Mt=te):(pt=Mt,Mt=a),Mt===a&&(Mt=null),m.charCodeAt(pt)===61?(te=J,pt++):(te=a,Fe===0&&ke(Qt)),te!==a?(St=[St,Mt,te],z=St):(pt=z,z=a),Fe--,z===a?ut=void 0:(pt=ut,ut=a),ut!==a?(Rr=d,d=vi(B)):(pt=d,d=a)):(pt=d,d=a),d}function Tu(){var d,B,ut,z;return d=pt,B=ti(),B!==a?(ut=Tt(),z=C(),z!==a?(Rr=d,d=Xu(B,z)):(pt=d,d=a)):(pt=d,d=a),d}function ti(){var d;return m.charCodeAt(pt)===38?(d=L,pt++):(d=a,Fe===0&&ke(le)),d===a&&(m.charCodeAt(pt)===33?(d=V,pt++):(d=a,Fe===0&&ke(Vt))),d}function Tn(){var d;return m.length>pt?(d=m.charAt(pt),pt++):(d=a,Fe===0&&ke(Pe)),d}function Qi(){var d,B;return Fe++,m.charCodeAt(pt)===9?(d=wt,pt++):(d=a,Fe===0&&ke(tr)),d===a&&(m.charCodeAt(pt)===11?(d=Xt,pt++):(d=a,Fe===0&&ke(lr)),d===a&&(m.charCodeAt(pt)===12?(d=ee,pt++):(d=a,Fe===0&&ke(ar)),d===a&&(m.charCodeAt(pt)===32?(d=ne,pt++):(d=a,Fe===0&&ke(wr)),d===a&&(m.charCodeAt(pt)===160?(d=oe,pt++):(d=a,Fe===0&&ke(jr)),d===a&&(m.charCodeAt(pt)===65279?(d=Le,pt++):(d=a,Fe===0&&ke(ln)),d===a&&(d=Ft())))))),Fe--,d===a&&(B=a,Fe===0&&ke(Ne)),d}function ei(){var d;return Y.test(m.charAt(pt))?(d=m.charAt(pt),pt++):(d=a,Fe===0&&ke(cn)),d}function Ti(){var d,B;return Fe++,m.charCodeAt(pt)===10?(d=de,pt++):(d=a,Fe===0&&ke(Er)),d===a&&(m.substr(pt,2)===He?(d=He,pt+=2):(d=a,Fe===0&&ke(Tr)),d===a&&(m.charCodeAt(pt)===13?(d=ze,pt++):(d=a,Fe===0&&ke(gn)),d===a&&(m.charCodeAt(pt)===8232?(d=Te,pt++):(d=a,Fe===0&&ke(Kn)),d===a&&(m.charCodeAt(pt)===8233?(d=Je,pt++):(d=a,Fe===0&&ke(tn)))))),Fe--,d===a&&(B=a,Fe===0&&ke(qr)),d}function gu(){var d,B;return Fe++,d=Ra(),d===a&&(d=zs()),Fe--,d===a&&(B=a,Fe===0&&ke(Wn)),d}function Ra(){var d,B,ut,z,St,Mt;if(d=pt,m.substr(pt,2)===Xe?(B=Xe,pt+=2):(B=a,Fe===0&&ke(Br)),B!==a){for(ut=[],z=pt,St=pt,Fe++,m.substr(pt,2)===Ae?(Mt=Ae,pt+=2):(Mt=a,Fe===0&&ke(bn)),Fe--,Mt===a?St=void 0:(pt=St,St=a),St!==a?(Mt=Tn(),Mt!==a?(St=[St,Mt],z=St):(pt=z,z=a)):(pt=z,z=a);z!==a;)ut.push(z),z=pt,St=pt,Fe++,m.substr(pt,2)===Ae?(Mt=Ae,pt+=2):(Mt=a,Fe===0&&ke(bn)),Fe--,Mt===a?St=void 0:(pt=St,St=a),St!==a?(Mt=Tn(),Mt!==a?(St=[St,Mt],z=St):(pt=z,z=a)):(pt=z,z=a);m.substr(pt,2)===Ae?(z=Ae,pt+=2):(z=a,Fe===0&&ke(bn)),z!==a?(B=[B,ut,z],d=B):(pt=d,d=a)}else pt=d,d=a;return d}function ha(){var d,B,ut,z,St,Mt;if(d=pt,m.substr(pt,2)===Xe?(B=Xe,pt+=2):(B=a,Fe===0&&ke(Br)),B!==a){for(ut=[],z=pt,St=pt,Fe++,m.substr(pt,2)===Ae?(Mt=Ae,pt+=2):(Mt=a,Fe===0&&ke(bn)),Mt===a&&(Mt=ei()),Fe--,Mt===a?St=void 0:(pt=St,St=a),St!==a?(Mt=Tn(),Mt!==a?(St=[St,Mt],z=St):(pt=z,z=a)):(pt=z,z=a);z!==a;)ut.push(z),z=pt,St=pt,Fe++,m.substr(pt,2)===Ae?(Mt=Ae,pt+=2):(Mt=a,Fe===0&&ke(bn)),Mt===a&&(Mt=ei()),Fe--,Mt===a?St=void 0:(pt=St,St=a),St!==a?(Mt=Tn(),Mt!==a?(St=[St,Mt],z=St):(pt=z,z=a)):(pt=z,z=a);m.substr(pt,2)===Ae?(z=Ae,pt+=2):(z=a,Fe===0&&ke(bn)),z!==a?(B=[B,ut,z],d=B):(pt=d,d=a)}else pt=d,d=a;return d}function zs(){var d,B,ut,z,St,Mt;if(d=pt,m.substr(pt,2)===_e?(B=_e,pt+=2):(B=a,Fe===0&&ke(as)),B!==a){for(ut=[],z=pt,St=pt,Fe++,Mt=ei(),Fe--,Mt===a?St=void 0:(pt=St,St=a),St!==a?(Mt=Tn(),Mt!==a?(St=[St,Mt],z=St):(pt=z,z=a)):(pt=z,z=a);z!==a;)ut.push(z),z=pt,St=pt,Fe++,Mt=ei(),Fe--,Mt===a?St=void 0:(pt=St,St=a),St!==a?(Mt=Tn(),Mt!==a?(St=[St,Mt],z=St):(pt=z,z=a)):(pt=z,z=a);B=[B,ut],d=B}else pt=d,d=a;return d}function ye(){var d,B,ut,z;if(Fe++,d=pt,B=Ue(),B!==a){for(ut=[],z=Re();z!==a;)ut.push(z),z=Re();Rr=d,d=xu(B,ut)}else pt=d,d=a;return Fe--,d===a&&(B=a,Fe===0&&ke(_n)),d}function Ue(){var d,B,ut;return d=hr(),d===a&&(m.charCodeAt(pt)===36?(d=q,pt++):(d=a,Fe===0&&ke(P)),d===a&&(m.charCodeAt(pt)===95?(d=Qe,pt++):(d=a,Fe===0&&ke(ks)),d===a&&(d=pt,m.charCodeAt(pt)===92?(B=qe,pt++):(B=a,Fe===0&&ke(Zr)),B!==a?(ut=l(),ut!==a?d=ut:(pt=d,d=a)):(pt=d,d=a)))),d}function Re(){var d;return d=Ue(),d===a&&(d=Pr(),d===a&&(d=T(),d===a&&(d=X(),d===a&&(m.charCodeAt(pt)===8204?(d=Ze,pt++):(d=a,Fe===0&&ke(Ss)),d===a&&(m.charCodeAt(pt)===8205?(d=Ar,pt++):(d=a,Fe===0&&ke(Ps))))))),d}function hr(){var d;return d=O(),d===a&&(d=M(),d===a&&(d=yt(),d===a&&(d=K(),d===a&&(d=dt(),d===a&&(d=ot()))))),d}function Pr(){var d;return d=at(),d===a&&(d=I()),d}function on(){var d,B,ut;return Fe++,d=pt,B=Gn(),B!==a?(m.charCodeAt(pt)===105?(ut=Or,pt++):(ut=a,Fe===0&&ke(qs)),ut===a&&(ut=null),Rr=d,d=Yn(B,ut)):(pt=d,d=a),Fe--,d===a&&(B=a,Fe===0&&ke(Xs)),d}function Gn(){var d,B,ut,z;if(Fe++,d=pt,m.charCodeAt(pt)===34?(B=Cr,pt++):(B=a,Fe===0&&ke(In)),B!==a){for(ut=[],z=wn();z!==a;)ut.push(z),z=wn();m.charCodeAt(pt)===34?(z=Cr,pt++):(z=a,Fe===0&&ke(In)),z!==a?(Rr=d,d=Zu(ut)):(pt=d,d=a)}else pt=d,d=a;if(d===a)if(d=pt,m.charCodeAt(pt)===39?(B=et,pt++):(B=a,Fe===0&&ke(Si)),B!==a){for(ut=[],z=Fi();z!==a;)ut.push(z),z=Fi();m.charCodeAt(pt)===39?(z=et,pt++):(z=a,Fe===0&&ke(Si)),z!==a?(Rr=d,d=Qu(ut)):(pt=d,d=a)}else pt=d,d=a;return Fe--,d===a&&(B=a,Fe===0&&ke(os)),d}function wn(){var d,B,ut,z;return d=pt,B=pt,ut=pt,Fe++,m.charCodeAt(pt)===34?(z=Cr,pt++):(z=a,Fe===0&&ke(In)),z===a&&(m.charCodeAt(pt)===92?(z=qe,pt++):(z=a,Fe===0&&ke(Zr)),z===a&&(z=ei())),Fe--,z===a?ut=void 0:(pt=ut,ut=a),ut!==a?(z=Tn(),z!==a?(ut=[ut,z],B=ut):(pt=B,B=a)):(pt=B,B=a),B!==a?d=m.substring(d,pt):d=B,d===a&&(d=pt,m.charCodeAt(pt)===92?(B=qe,pt++):(B=a,Fe===0&&ke(Zr)),B!==a?(ut=ri(),ut!==a?d=ut:(pt=d,d=a)):(pt=d,d=a),d===a&&(d=fa())),d}function Fi(){var d,B,ut,z;return d=pt,B=pt,ut=pt,Fe++,m.charCodeAt(pt)===39?(z=et,pt++):(z=a,Fe===0&&ke(Si)),z===a&&(m.charCodeAt(pt)===92?(z=qe,pt++):(z=a,Fe===0&&ke(Zr)),z===a&&(z=ei())),Fe--,z===a?ut=void 0:(pt=ut,ut=a),ut!==a?(z=Tn(),z!==a?(ut=[ut,z],B=ut):(pt=B,B=a)):(pt=B,B=a),B!==a?d=m.substring(d,pt):d=B,d===a&&(d=pt,m.charCodeAt(pt)===92?(B=qe,pt++):(B=a,Fe===0&&ke(Zr)),B!==a?(ut=ri(),ut!==a?d=ut:(pt=d,d=a)):(pt=d,d=a),d===a&&(d=fa())),d}function Fn(){var d,B,ut,z,St,Mt;if(Fe++,d=pt,m.charCodeAt(pt)===91?(B=k,pt++):(B=a,Fe===0&&ke(ls)),B!==a){for(m.charCodeAt(pt)===94?(ut=Z,pt++):(ut=a,Fe===0&&ke(Vi)),ut===a&&(ut=null),z=[],St=Oe(),St===a&&(St=Nr());St!==a;)z.push(St),St=Oe(),St===a&&(St=Nr());m.charCodeAt(pt)===93?(St=se,pt++):(St=a,Fe===0&&ke(Ki)),St!==a?(m.charCodeAt(pt)===105?(Mt=Or,pt++):(Mt=a,Fe===0&&ke(qs)),Mt===a&&(Mt=null),Rr=d,d=ta(ut,z,Mt)):(pt=d,d=a)}else pt=d,d=a;return Fe--,d===a&&(B=a,Fe===0&&ke(Xn)),d}function Oe(){var d,B,ut,z;return d=pt,B=Nr(),B!==a?(m.charCodeAt(pt)===45?(ut=me,pt++):(ut=a,Fe===0&&ke(Bi)),ut!==a?(z=Nr(),z!==a?(Rr=d,d=ea(B,z)):(pt=d,d=a)):(pt=d,d=a)):(pt=d,d=a),d}function Nr(){var d,B,ut,z;return d=pt,B=pt,ut=pt,Fe++,m.charCodeAt(pt)===93?(z=se,pt++):(z=a,Fe===0&&ke(Ki)),z===a&&(m.charCodeAt(pt)===92?(z=qe,pt++):(z=a,Fe===0&&ke(Zr)),z===a&&(z=ei())),Fe--,z===a?ut=void 0:(pt=ut,ut=a),ut!==a?(z=Tn(),z!==a?(ut=[ut,z],B=ut):(pt=B,B=a)):(pt=B,B=a),B!==a?d=m.substring(d,pt):d=B,d===a&&(d=pt,m.charCodeAt(pt)===92?(B=qe,pt++):(B=a,Fe===0&&ke(Zr)),B!==a?(ut=ri(),ut!==a?d=ut:(pt=d,d=a)):(pt=d,d=a),d===a&&(d=fa())),d}function fa(){var d,B,ut;return d=pt,m.charCodeAt(pt)===92?(B=qe,pt++):(B=a,Fe===0&&ke(Zr)),B!==a?(ut=Ti(),ut!==a?(Rr=d,d=ra()):(pt=d,d=a)):(pt=d,d=a),d}function ri(){var d,B,ut,z;return d=eu(),d===a&&(d=pt,m.charCodeAt(pt)===48?(B=rr,pt++):(B=a,Fe===0&&ke(cu)),B!==a?(ut=pt,Fe++,z=o(),Fe--,z===a?ut=void 0:(pt=ut,ut=a),ut!==a?(Rr=d,d=sa()):(pt=d,d=a)):(pt=d,d=a),d===a&&(d=r(),d===a&&(d=l()))),d}function eu(){var d;return d=Ni(),d===a&&(d=nr()),d}function Ni(){var d,B;return m.charCodeAt(pt)===39?(d=et,pt++):(d=a,Fe===0&&ke(Si)),d===a&&(m.charCodeAt(pt)===34?(d=Cr,pt++):(d=a,Fe===0&&ke(In)),d===a&&(m.charCodeAt(pt)===92?(d=qe,pt++):(d=a,Fe===0&&ke(Zr)),d===a&&(d=pt,m.charCodeAt(pt)===98?(B=dr,pt++):(B=a,Fe===0&&ke(Ei)),B!==a&&(Rr=d,B=Fs()),d=B,d===a&&(d=pt,m.charCodeAt(pt)===102?(B=mr,pt++):(B=a,Fe===0&&ke(zi)),B!==a&&(Rr=d,B=ia()),d=B,d===a&&(d=pt,m.charCodeAt(pt)===110?(B=ur,pt++):(B=a,Fe===0&&ke(Ii)),B!==a&&(Rr=d,B=Ge()),d=B,d===a&&(d=pt,m.charCodeAt(pt)===114?(B=er,pt++):(B=a,Fe===0&&ke(oi)),B!==a&&(Rr=d,B=v()),d=B,d===a&&(d=pt,m.charCodeAt(pt)===116?(B=Gr,pt++):(B=a,Fe===0&&ke(ns)),B!==a&&(Rr=d,B=_u()),d=B,d===a&&(d=pt,m.charCodeAt(pt)===118?(B=Lr,pt++):(B=a,Fe===0&&ke(Dn)),B!==a&&(Rr=d,B=Zs()),d=B)))))))),d}function nr(){var d,B,ut,z;return d=pt,B=pt,ut=pt,Fe++,z=$a(),z===a&&(z=ei()),Fe--,z===a?ut=void 0:(pt=ut,ut=a),ut!==a?(z=Tn(),z!==a?(ut=[ut,z],B=ut):(pt=B,B=a)):(pt=B,B=a),B!==a?d=m.substring(d,pt):d=B,d}function $a(){var d;return d=Ni(),d===a&&(d=o(),d===a&&(m.charCodeAt(pt)===120?(d=Sr,pt++):(d=a,Fe===0&&ke(bt)),d===a&&(m.charCodeAt(pt)===117?(d=j,pt++):(d=a,Fe===0&&ke($t))))),d}function r(){var d,B,ut,z,St,Mt;return d=pt,m.charCodeAt(pt)===120?(B=Sr,pt++):(B=a,Fe===0&&ke(bt)),B!==a?(ut=pt,z=pt,St=h(),St!==a?(Mt=h(),Mt!==a?(St=[St,Mt],z=St):(pt=z,z=a)):(pt=z,z=a),z!==a?ut=m.substring(ut,pt):ut=z,ut!==a?(Rr=d,d=Ai(ut)):(pt=d,d=a)):(pt=d,d=a),d}function l(){var d,B,ut,z,St,Mt,te,ie;return d=pt,m.charCodeAt(pt)===117?(B=j,pt++):(B=a,Fe===0&&ke($t)),B!==a?(ut=pt,z=pt,St=h(),St!==a?(Mt=h(),Mt!==a?(te=h(),te!==a?(ie=h(),ie!==a?(St=[St,Mt,te,ie],z=St):(pt=z,z=a)):(pt=z,z=a)):(pt=z,z=a)):(pt=z,z=a),z!==a?ut=m.substring(ut,pt):ut=z,ut!==a?(Rr=d,d=cs(ut)):(pt=d,d=a)):(pt=d,d=a),d}function o(){var d;return It.test(m.charAt(pt))?(d=m.charAt(pt),pt++):(d=a,Fe===0&&ke(Ht)),d}function h(){var d;return Ot.test(m.charAt(pt))?(d=m.charAt(pt),pt++):(d=a,Fe===0&&ke(fe)),d}function b(){var d,B;return d=pt,m.charCodeAt(pt)===46?(B=f,pt++):(B=a,Fe===0&&ke(Me)),B!==a&&(Rr=d,B=On()),d=B,d}function C(){var d,B,ut,z;return Fe++,d=pt,m.charCodeAt(pt)===123?(B=U,pt++):(B=a,Fe===0&&ke(Yt)),B!==a?(ut=x(),m.charCodeAt(pt)===125?(z=tt,pt++):(z=a,Fe===0&&ke(De)),z!==a?d=ut:(pt=d,d=a)):(pt=d,d=a),Fe--,d===a&&(B=a,Fe===0&&ke(We)),d}function x(){var d,B;return d=pt,B=_(),Rr=d,B=li(B),d=B,d}function _(){var d,B,ut,z,St,Mt;if(d=pt,B=[],ut=[],z=pt,St=pt,Fe++,nt.test(m.charAt(pt))?(Mt=m.charAt(pt),pt++):(Mt=a,Fe===0&&ke(ir)),Fe--,Mt===a?St=void 0:(pt=St,St=a),St!==a?(Mt=Tn(),Mt!==a?(St=[St,Mt],z=St):(pt=z,z=a)):(pt=z,z=a),z!==a)for(;z!==a;)ut.push(z),z=pt,St=pt,Fe++,nt.test(m.charAt(pt))?(Mt=m.charAt(pt),pt++):(Mt=a,Fe===0&&ke(ir)),Fe--,Mt===a?St=void 0:(pt=St,St=a),St!==a?(Mt=Tn(),Mt!==a?(St=[St,Mt],z=St):(pt=z,z=a)):(pt=z,z=a);else ut=a;for(ut===a&&(ut=pt,m.charCodeAt(pt)===123?(z=U,pt++):(z=a,Fe===0&&ke(Yt)),z!==a?(St=_(),m.charCodeAt(pt)===125?(Mt=tt,pt++):(Mt=a,Fe===0&&ke(De)),Mt!==a?(z=[z,St,Mt],ut=z):(pt=ut,ut=a)):(pt=ut,ut=a));ut!==a;){if(B.push(ut),ut=[],z=pt,St=pt,Fe++,nt.test(m.charAt(pt))?(Mt=m.charAt(pt),pt++):(Mt=a,Fe===0&&ke(ir)),Fe--,Mt===a?St=void 0:(pt=St,St=a),St!==a?(Mt=Tn(),Mt!==a?(St=[St,Mt],z=St):(pt=z,z=a)):(pt=z,z=a),z!==a)for(;z!==a;)ut.push(z),z=pt,St=pt,Fe++,nt.test(m.charAt(pt))?(Mt=m.charAt(pt),pt++):(Mt=a,Fe===0&&ke(ir)),Fe--,Mt===a?St=void 0:(pt=St,St=a),St!==a?(Mt=Tn(),Mt!==a?(St=[St,Mt],z=St):(pt=z,z=a)):(pt=z,z=a);else ut=a;ut===a&&(ut=pt,m.charCodeAt(pt)===123?(z=U,pt++):(z=a,Fe===0&&ke(Yt)),z!==a?(St=_(),m.charCodeAt(pt)===125?(Mt=tt,pt++):(Mt=a,Fe===0&&ke(De)),Mt!==a?(z=[z,St,Mt],ut=z):(pt=ut,ut=a)):(pt=ut,ut=a))}return d=m.substring(d,pt),d}function M(){var d;return zt.test(m.charAt(pt))?(d=m.charAt(pt),pt++):(d=a,Fe===0&&ke(cr)),d}function K(){var d;return jt.test(m.charAt(pt))?(d=m.charAt(pt),pt++):(d=a,Fe===0&&ke(nn)),d}function dt(){var d;return Se.test(m.charAt(pt))?(d=m.charAt(pt),pt++):(d=a,Fe===0&&ke(en)),d}function yt(){var d;return _t.test(m.charAt(pt))?(d=m.charAt(pt),pt++):(d=a,Fe===0&&ke(vr)),d}function O(){var d;return gt.test(m.charAt(pt))?(d=m.charAt(pt),pt++):(d=a,Fe===0&&ke(hs)),d}function I(){var d;return rt.test(m.charAt(pt))?(d=m.charAt(pt),pt++):(d=a,Fe===0&&ke(Ts)),d}function at(){var d;return F.test(m.charAt(pt))?(d=m.charAt(pt),pt++):(d=a,Fe===0&&ke(Ri)),d}function T(){var d;return st.test(m.charAt(pt))?(d=m.charAt(pt),pt++):(d=a,Fe===0&&ke(ws)),d}function ot(){var d;return At.test(m.charAt(pt))?(d=m.charAt(pt),pt++):(d=a,Fe===0&&ke(ds)),d}function X(){var d;return Dt.test(m.charAt(pt))?(d=m.charAt(pt),pt++):(d=a,Fe===0&&ke($i)),d}function Ft(){var d;return Nt.test(m.charAt(pt))?(d=m.charAt(pt),pt++):(d=a,Fe===0&&ke(En)),d}function Tt(){var d,B;for(d=[],B=Qi(),B===a&&(B=Ti(),B===a&&(B=gu()));B!==a;)d.push(B),B=Qi(),B===a&&(B=Ti(),B===a&&(B=gu()));return d}function Wt(){var d,B;for(d=[],B=Qi(),B===a&&(B=ha());B!==a;)d.push(B),B=Qi(),B===a&&(B=ha());return d}function Gt(){var d,B,ut,z;return d=pt,B=Tt(),m.charCodeAt(pt)===59?(ut=S,pt++):(ut=a,Fe===0&&ke(Gi)),ut!==a?(B=[B,ut],d=B):(pt=d,d=a),d===a&&(d=pt,B=Wt(),ut=zs(),ut===a&&(ut=null),z=Ti(),z!==a?(B=[B,ut,z],d=B):(pt=d,d=a),d===a&&(d=pt,B=Tt(),ut=ve(),ut!==a?(B=[B,ut],d=B):(pt=d,d=a))),d}function ve(){var d,B;return d=pt,Fe++,m.length>pt?(B=m.charAt(pt),pt++):(B=a,Fe===0&&ke(Pe)),Fe--,B===a?d=void 0:(pt=d,d=a),d}let be=D.reservedWords||[];if(gs=w(),gs!==a&&pt===m.length)return gs;throw gs!==a&&pt<m.length&&ke(Iu()),Oi(Cn,An<m.length?m.charAt(An):null,An<m.length?Pi(An,An+1):Pi(An,An))}e.exports={SyntaxError:y,parse:E}}),Vh=ce((t,e)=>{"use strict";var n=xp(),u=cF(),s=fF(),p=U2(),y=["break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","new","return","super","switch","this","throw","try","typeof","var","void","while","with","null","true","false","enum","implements","interface","let","package","private","protected","public","static","yield","await"],g={VERSION:p,RESERVED_WORDS:y,GrammarError:n,parser:s,compiler:u,generate(E,m){m=m!==void 0?m:{};function D(W){let w={};return Object.keys(W).forEach(U=>{w[U]=W[U].slice()}),w}let a="plugins"in m?m.plugins:[],H={parser:g.parser,passes:D(g.compiler.passes),reservedWords:g.RESERVED_WORDS.slice()};return a.forEach(W=>{W.use(H,m)}),g.compiler.compile(H.parser.parse(E,{grammarSource:m.grammarSource,reservedWords:H.reservedWords}),H.passes,m)}};e.exports=g}),sw=ce((t,e)=>{(function(n,u){typeof t=="object"&&typeof e<"u"?e.exports=u():typeof define=="function"&&define.amd?define(u):n.JSON5=u()})(t,function(){"use strict";function n(kt,re){return re={exports:{}},kt(re,re.exports),re.exports}var u=n(function(kt){var re=kt.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=re)}),s=n(function(kt){var re=kt.exports={version:"2.6.5"};typeof __e=="number"&&(__e=re)}),p=s.version,y=function(kt){return typeof kt=="object"?kt!==null:typeof kt=="function"},g=function(kt){if(!y(kt))throw TypeError(kt+" is not an object!");return kt},E=function(kt){try{return!!kt()}catch{return!0}},m=!E(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}),D=u.document,a=y(D)&&y(D.createElement),H=function(kt){return a?D.createElement(kt):{}},W=!m&&!E(function(){return Object.defineProperty(H("div"),"a",{get:function(){return 7}}).a!=7}),w=function(kt,re){if(!y(kt))return kt;var $e,Ce;if(re&&typeof($e=kt.toString)=="function"&&!y(Ce=$e.call(kt))||typeof($e=kt.valueOf)=="function"&&!y(Ce=$e.call(kt))||!re&&typeof($e=kt.toString)=="function"&&!y(Ce=$e.call(kt)))return Ce;throw TypeError("Can't convert object to primitive value")},U=Object.defineProperty,tt=m?Object.defineProperty:function(kt,re,$e){if(g(kt),re=w(re,!0),g($e),W)try{return U(kt,re,$e)}catch{}if("get"in $e||"set"in $e)throw TypeError("Accessors not supported!");return"value"in $e&&(kt[re]=$e.value),kt},J={f:tt},N=function(kt,re){return{enumerable:!(kt&1),configurable:!(kt&2),writable:!(kt&4),value:re}},Q=m?function(kt,re,$e){return J.f(kt,re,N(1,$e))}:function(kt,re,$e){return kt[re]=$e,kt},it={}.hasOwnProperty,q=function(kt,re){return it.call(kt,re)},L=0,V=Math.random(),lt=function(kt){return"Symbol(".concat(kt===void 0?"":kt,")_",(++L+V).toString(36))},mt=!1,Rt=n(function(kt){var re="__core-js_shared__",$e=u[re]||(u[re]={});(kt.exports=function(Ce,Pe){return $e[Ce]||($e[Ce]=Pe!==void 0?Pe:{})})("versions",[]).push({version:s.version,mode:mt?"pure":"global",copyright:"\xA9 2019 Denis Pushkarev (zloirock.ru)"})}),Et=Rt("native-function-to-string",Function.toString),vt=n(function(kt){var re=lt("src"),$e="toString",Ce=(""+Et).split($e);s.inspectSource=function(Pe){return Et.call(Pe)},(kt.exports=function(Pe,Ne,tr,lr){var ar=typeof tr=="function";ar&&(q(tr,"name")||Q(tr,"name",Ne)),Pe[Ne]!==tr&&(ar&&(q(tr,re)||Q(tr,re,Pe[Ne]?""+Pe[Ne]:Ce.join(String(Ne)))),Pe===u?Pe[Ne]=tr:lr?Pe[Ne]?Pe[Ne]=tr:Q(Pe,Ne,tr):(delete Pe[Ne],Q(Pe,Ne,tr)))})(Function.prototype,$e,function(){return typeof this=="function"&&this[re]||Et.call(this)})}),wt=function(kt){if(typeof kt!="function")throw TypeError(kt+" is not a function!");return kt},Xt=function(kt,re,$e){if(wt(kt),re===void 0)return kt;switch($e){case 1:return function(Ce){return kt.call(re,Ce)};case 2:return function(Ce,Pe){return kt.call(re,Ce,Pe)};case 3:return function(Ce,Pe,Ne){return kt.call(re,Ce,Pe,Ne)}}return function(){return kt.apply(re,arguments)}},ee="prototype",ne=function(kt,re,$e){var Ce=kt&ne.F,Pe=kt&ne.G,Ne=kt&ne.S,tr=kt&ne.P,lr=kt&ne.B,ar=Pe?u:Ne?u[re]||(u[re]={}):(u[re]||{})[ee],wr=Pe?s:s[re]||(s[re]={}),jr=wr[ee]||(wr[ee]={}),ln,cn,qr,Er;Pe&&($e=re);for(ln in $e)cn=!Ce&&ar&&ar[ln]!==void 0,qr=(cn?ar:$e)[ln],Er=lr&&cn?Xt(qr,u):tr&&typeof qr=="function"?Xt(Function.call,qr):qr,ar&&vt(ar,ln,qr,kt&ne.U),wr[ln]!=qr&&Q(wr,ln,Er),tr&&jr[ln]!=qr&&(jr[ln]=qr)};u.core=s,ne.F=1,ne.G=2,ne.S=4,ne.P=8,ne.B=16,ne.W=32,ne.U=64,ne.R=128;var oe=ne,Le=Math.ceil,de=Math.floor,He=function(kt){return isNaN(kt=+kt)?0:(kt>0?de:Le)(kt)},ze=function(kt){if(kt==null)throw TypeError("Can't call method on  "+kt);return kt},Te=function(kt){return function(re,$e){var Ce=String(ze(re)),Pe=He($e),Ne=Ce.length,tr,lr;return Pe<0||Pe>=Ne?kt?"":void 0:(tr=Ce.charCodeAt(Pe),tr<55296||tr>56319||Pe+1===Ne||(lr=Ce.charCodeAt(Pe+1))<56320||lr>57343?kt?Ce.charAt(Pe):tr:kt?Ce.slice(Pe,Pe+2):(tr-55296<<10)+(lr-56320)+65536)}},Je=Te(!1);oe(oe.P,"String",{codePointAt:function(kt){return Je(this,kt)}});var Xe=s.String.codePointAt,Ae=Math.max,_e=Math.min,Qe=function(kt,re){return kt=He(kt),kt<0?Ae(kt+re,0):_e(kt,re)},qe=String.fromCharCode,Ze=String.fromCodePoint;oe(oe.S+oe.F*(!!Ze&&Ze.length!=1),"String",{fromCodePoint:function(kt){for(var re=arguments,$e=[],Ce=arguments.length,Pe=0,Ne;Ce>Pe;){if(Ne=+re[Pe++],Qe(Ne,1114111)!==Ne)throw RangeError(Ne+" is not a valid code point");$e.push(Ne<65536?qe(Ne):qe(((Ne-=65536)>>10)+55296,Ne%1024+56320))}return $e.join("")}});var Ar=s.String.fromCodePoint,Or=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,Cr=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,et=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,k={Space_Separator:Or,ID_Start:Cr,ID_Continue:et},Z={isSpaceSeparator:function(kt){return typeof kt=="string"&&k.Space_Separator.test(kt)},isIdStartChar:function(kt){return typeof kt=="string"&&(kt>="a"&&kt<="z"||kt>="A"&&kt<="Z"||kt==="$"||kt==="_"||k.ID_Start.test(kt))},isIdContinueChar:function(kt){return typeof kt=="string"&&(kt>="a"&&kt<="z"||kt>="A"&&kt<="Z"||kt>="0"&&kt<="9"||kt==="$"||kt==="_"||kt==="\u200C"||kt==="\u200D"||k.ID_Continue.test(kt))},isDigit:function(kt){return typeof kt=="string"&&/[0-9]/.test(kt)},isHexDigit:function(kt){return typeof kt=="string"&&/[0-9A-Fa-f]/.test(kt)}},se,me,rr,dr,mr,ur,er,Gr,Lr,Sr=function(kt,re){se=String(kt),me="start",rr=[],dr=0,mr=1,ur=0,er=void 0,Gr=void 0,Lr=void 0;do er=nt(),At[me]();while(er.type!=="eof");return typeof re=="function"?j({"":Lr},"",re):Lr};function j(kt,re,$e){var Ce=kt[re];if(Ce!=null&&typeof Ce=="object")if(Array.isArray(Ce))for(var Pe=0;Pe<Ce.length;Pe++){var Ne=String(Pe),tr=j(Ce,Ne,$e);tr===void 0?delete Ce[Ne]:Object.defineProperty(Ce,Ne,{value:tr,writable:!0,enumerable:!0,configurable:!0})}else for(var lr in Ce){var ar=j(Ce,lr,$e);ar===void 0?delete Ce[lr]:Object.defineProperty(Ce,lr,{value:ar,writable:!0,enumerable:!0,configurable:!0})}return $e.call(kt,re,Ce)}var f,S,Y,It,Ot;function nt(){for(f="default",S="",Y=!1,It=1;;){Ot=zt();var kt=Se[f]();if(kt)return kt}}function zt(){if(se[dr])return String.fromCodePoint(se.codePointAt(dr))}function jt(){var kt=zt();return kt===`
`?(mr++,ur=0):kt?ur+=kt.length:ur++,kt&&(dr+=kt.length),kt}var Se={default:function(){switch(Ot){case"	":case"\v":case"\f":case" ":case"\xA0":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":jt();return;case"/":jt(),f="comment";return;case void 0:return jt(),_t("eof")}if(Z.isSpaceSeparator(Ot)){jt();return}return Se[me]()},comment:function(){switch(Ot){case"*":jt(),f="multiLineComment";return;case"/":jt(),f="singleLineComment";return}throw Yt(jt())},multiLineComment:function(){switch(Ot){case"*":jt(),f="multiLineCommentAsterisk";return;case void 0:throw Yt(jt())}jt()},multiLineCommentAsterisk:function(){switch(Ot){case"*":jt();return;case"/":jt(),f="default";return;case void 0:throw Yt(jt())}jt(),f="multiLineComment"},singleLineComment:function(){switch(Ot){case`
`:case"\r":case"\u2028":case"\u2029":jt(),f="default";return;case void 0:return jt(),_t("eof")}jt()},value:function(){switch(Ot){case"{":case"[":return _t("punctuator",jt());case"n":return jt(),gt("ull"),_t("null",null);case"t":return jt(),gt("rue"),_t("boolean",!0);case"f":return jt(),gt("alse"),_t("boolean",!1);case"-":case"+":jt()==="-"&&(It=-1),f="sign";return;case".":S=jt(),f="decimalPointLeading";return;case"0":S=jt(),f="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":S=jt(),f="decimalInteger";return;case"I":return jt(),gt("nfinity"),_t("numeric",1/0);case"N":return jt(),gt("aN"),_t("numeric",NaN);case'"':case"'":Y=jt()==='"',S="",f="string";return}throw Yt(jt())},identifierNameStartEscape:function(){if(Ot!=="u")throw Yt(jt());jt();var kt=st();switch(kt){case"$":case"_":break;default:if(!Z.isIdStartChar(kt))throw Qt();break}S+=kt,f="identifierName"},identifierName:function(){switch(Ot){case"$":case"_":case"\u200C":case"\u200D":S+=jt();return;case"\\":jt(),f="identifierNameEscape";return}if(Z.isIdContinueChar(Ot)){S+=jt();return}return _t("identifier",S)},identifierNameEscape:function(){if(Ot!=="u")throw Yt(jt());jt();var kt=st();switch(kt){case"$":case"_":case"\u200C":case"\u200D":break;default:if(!Z.isIdContinueChar(kt))throw Qt();break}S+=kt,f="identifierName"},sign:function(){switch(Ot){case".":S=jt(),f="decimalPointLeading";return;case"0":S=jt(),f="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":S=jt(),f="decimalInteger";return;case"I":return jt(),gt("nfinity"),_t("numeric",It*(1/0));case"N":return jt(),gt("aN"),_t("numeric",NaN)}throw Yt(jt())},zero:function(){switch(Ot){case".":S+=jt(),f="decimalPoint";return;case"e":case"E":S+=jt(),f="decimalExponent";return;case"x":case"X":S+=jt(),f="hexadecimal";return}return _t("numeric",It*0)},decimalInteger:function(){switch(Ot){case".":S+=jt(),f="decimalPoint";return;case"e":case"E":S+=jt(),f="decimalExponent";return}if(Z.isDigit(Ot)){S+=jt();return}return _t("numeric",It*Number(S))},decimalPointLeading:function(){if(Z.isDigit(Ot)){S+=jt(),f="decimalFraction";return}throw Yt(jt())},decimalPoint:function(){switch(Ot){case"e":case"E":S+=jt(),f="decimalExponent";return}if(Z.isDigit(Ot)){S+=jt(),f="decimalFraction";return}return _t("numeric",It*Number(S))},decimalFraction:function(){switch(Ot){case"e":case"E":S+=jt(),f="decimalExponent";return}if(Z.isDigit(Ot)){S+=jt();return}return _t("numeric",It*Number(S))},decimalExponent:function(){switch(Ot){case"+":case"-":S+=jt(),f="decimalExponentSign";return}if(Z.isDigit(Ot)){S+=jt(),f="decimalExponentInteger";return}throw Yt(jt())},decimalExponentSign:function(){if(Z.isDigit(Ot)){S+=jt(),f="decimalExponentInteger";return}throw Yt(jt())},decimalExponentInteger:function(){if(Z.isDigit(Ot)){S+=jt();return}return _t("numeric",It*Number(S))},hexadecimal:function(){if(Z.isHexDigit(Ot)){S+=jt(),f="hexadecimalInteger";return}throw Yt(jt())},hexadecimalInteger:function(){if(Z.isHexDigit(Ot)){S+=jt();return}return _t("numeric",It*Number(S))},string:function(){switch(Ot){case"\\":jt(),S+=rt();return;case'"':if(Y)return jt(),_t("string",S);S+=jt();return;case"'":if(!Y)return jt(),_t("string",S);S+=jt();return;case`
`:case"\r":throw Yt(jt());case"\u2028":case"\u2029":break;case void 0:throw Yt(jt())}S+=jt()},start:function(){switch(Ot){case"{":case"[":return _t("punctuator",jt())}f="value"},beforePropertyName:function(){switch(Ot){case"$":case"_":S=jt(),f="identifierName";return;case"\\":jt(),f="identifierNameStartEscape";return;case"}":return _t("punctuator",jt());case'"':case"'":Y=jt()==='"',f="string";return}if(Z.isIdStartChar(Ot)){S+=jt(),f="identifierName";return}throw Yt(jt())},afterPropertyName:function(){if(Ot===":")return _t("punctuator",jt());throw Yt(jt())},beforePropertyValue:function(){f="value"},afterPropertyValue:function(){switch(Ot){case",":case"}":return _t("punctuator",jt())}throw Yt(jt())},beforeArrayValue:function(){if(Ot==="]")return _t("punctuator",jt());f="value"},afterArrayValue:function(){switch(Ot){case",":case"]":return _t("punctuator",jt())}throw Yt(jt())},end:function(){throw Yt(jt())}};function _t(kt,re){return{type:kt,value:re,line:mr,column:ur}}function gt(kt){for(var re=0,$e=kt;re<$e.length;re+=1){var Ce=$e[re],Pe=zt();if(Pe!==Ce)throw Yt(jt());jt()}}function rt(){var kt=zt();switch(kt){case"b":return jt(),"\b";case"f":return jt(),"\f";case"n":return jt(),`
`;case"r":return jt(),"\r";case"t":return jt(),"	";case"v":return jt(),"\v";case"0":if(jt(),Z.isDigit(zt()))throw Yt(jt());return"\0";case"x":return jt(),F();case"u":return jt(),st();case`
`:case"\u2028":case"\u2029":return jt(),"";case"\r":return jt(),zt()===`
`&&jt(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw Yt(jt());case void 0:throw Yt(jt())}return jt()}function F(){var kt="",re=zt();if(!Z.isHexDigit(re)||(kt+=jt(),re=zt(),!Z.isHexDigit(re)))throw Yt(jt());return kt+=jt(),String.fromCodePoint(parseInt(kt,16))}function st(){for(var kt="",re=4;re-- >0;){var $e=zt();if(!Z.isHexDigit($e))throw Yt(jt());kt+=jt()}return String.fromCodePoint(parseInt(kt,16))}var At={start:function(){if(er.type==="eof")throw De();Dt()},beforePropertyName:function(){switch(er.type){case"identifier":case"string":Gr=er.value,me="afterPropertyName";return;case"punctuator":Nt();return;case"eof":throw De()}},afterPropertyName:function(){if(er.type==="eof")throw De();me="beforePropertyValue"},beforePropertyValue:function(){if(er.type==="eof")throw De();Dt()},beforeArrayValue:function(){if(er.type==="eof")throw De();if(er.type==="punctuator"&&er.value==="]"){Nt();return}Dt()},afterPropertyValue:function(){if(er.type==="eof")throw De();switch(er.value){case",":me="beforePropertyName";return;case"}":Nt()}},afterArrayValue:function(){if(er.type==="eof")throw De();switch(er.value){case",":me="beforeArrayValue";return;case"]":Nt()}},end:function(){}};function Dt(){var kt;switch(er.type){case"punctuator":switch(er.value){case"{":kt={};break;case"[":kt=[];break}break;case"null":case"boolean":case"numeric":case"string":kt=er.value;break}if(Lr===void 0)Lr=kt;else{var re=rr[rr.length-1];Array.isArray(re)?re.push(kt):Object.defineProperty(re,Gr,{value:kt,writable:!0,enumerable:!0,configurable:!0})}if(kt!==null&&typeof kt=="object")rr.push(kt),Array.isArray(kt)?me="beforeArrayValue":me="beforePropertyName";else{var $e=rr[rr.length-1];$e==null?me="end":Array.isArray($e)?me="afterArrayValue":me="afterPropertyValue"}}function Nt(){rr.pop();var kt=rr[rr.length-1];kt==null?me="end":Array.isArray(kt)?me="afterArrayValue":me="afterPropertyValue"}function Yt(kt){return sr(kt===void 0?"JSON5: invalid end of input at "+mr+":"+ur:"JSON5: invalid character '"+Be(kt)+"' at "+mr+":"+ur)}function De(){return sr("JSON5: invalid end of input at "+mr+":"+ur)}function Qt(){return ur-=5,sr("JSON5: invalid identifier character at "+mr+":"+ur)}function Ee(kt){}function Be(kt){var re={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(re[kt])return re[kt];if(kt<" "){var $e=kt.charCodeAt(0).toString(16);return"\\x"+("00"+$e).substring($e.length)}return kt}function sr(kt){var re=new SyntaxError(kt);return re.lineNumber=mr,re.columnNumber=ur,re}var P=function(kt,re,$e){var Ce=[],Pe="",Ne,tr,lr="",ar;if(re!=null&&typeof re=="object"&&!Array.isArray(re)&&($e=re.space,ar=re.quote,re=re.replacer),typeof re=="function")tr=re;else if(Array.isArray(re)){Ne=[];for(var wr=0,jr=re;wr<jr.length;wr+=1){var ln=jr[wr],cn=void 0;typeof ln=="string"?cn=ln:(typeof ln=="number"||ln instanceof String||ln instanceof Number)&&(cn=String(ln)),cn!==void 0&&Ne.indexOf(cn)<0&&Ne.push(cn)}}return $e instanceof Number?$e=Number($e):$e instanceof String&&($e=String($e)),typeof $e=="number"?$e>0&&($e=Math.min(10,Math.floor($e)),lr="          ".substr(0,$e)):typeof $e=="string"&&(lr=$e.substr(0,10)),qr("",{"":kt});function qr(tn,Wn){var Br=Wn[tn];switch(Br!=null&&(typeof Br.toJSON5=="function"?Br=Br.toJSON5(tn):typeof Br.toJSON=="function"&&(Br=Br.toJSON(tn))),tr&&(Br=tr.call(Wn,tn,Br)),Br instanceof Number?Br=Number(Br):Br instanceof String?Br=String(Br):Br instanceof Boolean&&(Br=Br.valueOf()),Br){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof Br=="string")return Er(Br,!1);if(typeof Br=="number")return String(Br);if(typeof Br=="object")return Array.isArray(Br)?Kn(Br):Tr(Br)}function Er(tn){for(var Wn={"'":.1,'"':.2},Br={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},bn="",as=0;as<tn.length;as++){var _n=tn[as];switch(_n){case"'":case'"':Wn[_n]++,bn+=_n;continue;case"\0":if(Z.isDigit(tn[as+1])){bn+="\\x00";continue}}if(Br[_n]){bn+=Br[_n];continue}if(_n<" "){var ks=_n.charCodeAt(0).toString(16);bn+="\\x"+("00"+ks).substring(ks.length);continue}bn+=_n}var Zr=ar||Object.keys(Wn).reduce(function(Ss,Ps){return Wn[Ss]<Wn[Ps]?Ss:Ps});return bn=bn.replace(new RegExp(Zr,"g"),Br[Zr]),Zr+bn+Zr}function Tr(tn){if(Ce.indexOf(tn)>=0)throw TypeError("Converting circular structure to JSON5");Ce.push(tn);var Wn=Pe;Pe=Pe+lr;for(var Br=Ne||Object.keys(tn),bn=[],as=0,_n=Br;as<_n.length;as+=1){var ks=_n[as],Zr=qr(ks,tn);if(Zr!==void 0){var Ss=gn(ks)+":";lr!==""&&(Ss+=" "),Ss+=Zr,bn.push(Ss)}}var Ps;if(bn.length===0)Ps="{}";else{var Xs;if(lr==="")Xs=bn.join(","),Ps="{"+Xs+"}";else{var qs=`,
`+Pe;Xs=bn.join(qs),Ps=`{
`+Pe+Xs+`,
`+Wn+"}"}}return Ce.pop(),Pe=Wn,Ps}function gn(tn){if(tn.length===0)return Er(tn,!0);var Wn=String.fromCodePoint(tn.codePointAt(0));if(!Z.isIdStartChar(Wn))return Er(tn,!0);for(var Br=Wn.length;Br<tn.length;Br++)if(!Z.isIdContinueChar(String.fromCodePoint(tn.codePointAt(Br))))return Er(tn,!0);return tn}function Kn(tn){if(Ce.indexOf(tn)>=0)throw TypeError("Converting circular structure to JSON5");Ce.push(tn);var Wn=Pe;Pe=Pe+lr;for(var Br=[],bn=0;bn<tn.length;bn++){var as=qr(String(bn),tn);Br.push(as!==void 0?as:"null")}var _n;if(Br.length===0)_n="[]";else if(lr===""){var ks=Br.join(",");_n="["+ks+"]"}else{var Zr=`,
`+Pe,Ss=Br.join(Zr);_n=`[
`+Pe+Ss+`,
`+Wn+"]"}return Ce.pop(),Pe=Wn,_n}},le={parse:Sr,stringify:P},Vt=le,pe=Vt;return pe})}),Aw=ce((t,e)=>{var n=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...u)=>{}:()=>{};e.exports=n}),bw=ce((t,e)=>{var n="2.0.0",u=Number.MAX_SAFE_INTEGER||9007199254740991,s=16,p=250,y=["major","premajor","minor","preminor","patch","prepatch","prerelease"];e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:s,MAX_SAFE_BUILD_LENGTH:p,MAX_SAFE_INTEGER:u,RELEASE_TYPES:y,SEMVER_SPEC_VERSION:n,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}}),Cw=ce((t,e)=>{var{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:u,MAX_LENGTH:s}=bw(),p=Aw();t=e.exports={};var y=t.re=[],g=t.safeRe=[],E=t.src=[],m=t.t={},D=0,a="[a-zA-Z0-9-]",H=[["\\s",1],["\\d",s],[a,u]],W=U=>{for(let[tt,J]of H)U=U.split(`${tt}*`).join(`${tt}{0,${J}}`).split(`${tt}+`).join(`${tt}{1,${J}}`);return U},w=(U,tt,J)=>{let N=W(tt),Q=D++;p(U,Q,tt),m[U]=Q,E[Q]=tt,y[Q]=new RegExp(tt,J?"g":void 0),g[Q]=new RegExp(N,J?"g":void 0)};w("NUMERICIDENTIFIER","0|[1-9]\\d*"),w("NUMERICIDENTIFIERLOOSE","\\d+"),w("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${a}*`),w("MAINVERSION",`(${E[m.NUMERICIDENTIFIER]})\\.(${E[m.NUMERICIDENTIFIER]})\\.(${E[m.NUMERICIDENTIFIER]})`),w("MAINVERSIONLOOSE",`(${E[m.NUMERICIDENTIFIERLOOSE]})\\.(${E[m.NUMERICIDENTIFIERLOOSE]})\\.(${E[m.NUMERICIDENTIFIERLOOSE]})`),w("PRERELEASEIDENTIFIER",`(?:${E[m.NUMERICIDENTIFIER]}|${E[m.NONNUMERICIDENTIFIER]})`),w("PRERELEASEIDENTIFIERLOOSE",`(?:${E[m.NUMERICIDENTIFIERLOOSE]}|${E[m.NONNUMERICIDENTIFIER]})`),w("PRERELEASE",`(?:-(${E[m.PRERELEASEIDENTIFIER]}(?:\\.${E[m.PRERELEASEIDENTIFIER]})*))`),w("PRERELEASELOOSE",`(?:-?(${E[m.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${E[m.PRERELEASEIDENTIFIERLOOSE]})*))`),w("BUILDIDENTIFIER",`${a}+`),w("BUILD",`(?:\\+(${E[m.BUILDIDENTIFIER]}(?:\\.${E[m.BUILDIDENTIFIER]})*))`),w("FULLPLAIN",`v?${E[m.MAINVERSION]}${E[m.PRERELEASE]}?${E[m.BUILD]}?`),w("FULL",`^${E[m.FULLPLAIN]}$`),w("LOOSEPLAIN",`[v=\\s]*${E[m.MAINVERSIONLOOSE]}${E[m.PRERELEASELOOSE]}?${E[m.BUILD]}?`),w("LOOSE",`^${E[m.LOOSEPLAIN]}$`),w("GTLT","((?:<|>)?=?)"),w("XRANGEIDENTIFIERLOOSE",`${E[m.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),w("XRANGEIDENTIFIER",`${E[m.NUMERICIDENTIFIER]}|x|X|\\*`),w("XRANGEPLAIN",`[v=\\s]*(${E[m.XRANGEIDENTIFIER]})(?:\\.(${E[m.XRANGEIDENTIFIER]})(?:\\.(${E[m.XRANGEIDENTIFIER]})(?:${E[m.PRERELEASE]})?${E[m.BUILD]}?)?)?`),w("XRANGEPLAINLOOSE",`[v=\\s]*(${E[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${E[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${E[m.XRANGEIDENTIFIERLOOSE]})(?:${E[m.PRERELEASELOOSE]})?${E[m.BUILD]}?)?)?`),w("XRANGE",`^${E[m.GTLT]}\\s*${E[m.XRANGEPLAIN]}$`),w("XRANGELOOSE",`^${E[m.GTLT]}\\s*${E[m.XRANGEPLAINLOOSE]}$`),w("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),w("COERCE",`${E[m.COERCEPLAIN]}(?:$|[^\\d])`),w("COERCEFULL",E[m.COERCEPLAIN]+`(?:${E[m.PRERELEASE]})?(?:${E[m.BUILD]})?(?:$|[^\\d])`),w("COERCERTL",E[m.COERCE],!0),w("COERCERTLFULL",E[m.COERCEFULL],!0),w("LONETILDE","(?:~>?)"),w("TILDETRIM",`(\\s*)${E[m.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",w("TILDE",`^${E[m.LONETILDE]}${E[m.XRANGEPLAIN]}$`),w("TILDELOOSE",`^${E[m.LONETILDE]}${E[m.XRANGEPLAINLOOSE]}$`),w("LONECARET","(?:\\^)"),w("CARETTRIM",`(\\s*)${E[m.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",w("CARET",`^${E[m.LONECARET]}${E[m.XRANGEPLAIN]}$`),w("CARETLOOSE",`^${E[m.LONECARET]}${E[m.XRANGEPLAINLOOSE]}$`),w("COMPARATORLOOSE",`^${E[m.GTLT]}\\s*(${E[m.LOOSEPLAIN]})$|^$`),w("COMPARATOR",`^${E[m.GTLT]}\\s*(${E[m.FULLPLAIN]})$|^$`),w("COMPARATORTRIM",`(\\s*)${E[m.GTLT]}\\s*(${E[m.LOOSEPLAIN]}|${E[m.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",w("HYPHENRANGE",`^\\s*(${E[m.XRANGEPLAIN]})\\s+-\\s+(${E[m.XRANGEPLAIN]})\\s*$`),w("HYPHENRANGELOOSE",`^\\s*(${E[m.XRANGEPLAINLOOSE]})\\s+-\\s+(${E[m.XRANGEPLAINLOOSE]})\\s*$`),w("STAR","(<|>)?=?\\s*\\*"),w("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),w("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}),NF=ce((t,e)=>{var n=Object.freeze({loose:!0}),u=Object.freeze({}),s=p=>p?typeof p!="object"?n:p:u;e.exports=s}),jF=ce((t,e)=>{var n=/^[0-9]+$/,u=(p,y)=>{let g=n.test(p),E=n.test(y);return g&&E&&(p=+p,y=+y),p===y?0:g&&!E?-1:E&&!g?1:p<y?-1:1},s=(p,y)=>u(y,p);e.exports={compareIdentifiers:u,rcompareIdentifiers:s}}),Wp=ce((t,e)=>{var n=Aw(),{MAX_LENGTH:u,MAX_SAFE_INTEGER:s}=bw(),{safeRe:p,t:y}=Cw(),g=NF(),{compareIdentifiers:E}=jF(),m=class qi{constructor(a,H){if(H=g(H),a instanceof qi){if(a.loose===!!H.loose&&a.includePrerelease===!!H.includePrerelease)return a;a=a.version}else if(typeof a!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof a}".`);if(a.length>u)throw new TypeError(`version is longer than ${u} characters`);n("SemVer",a,H),this.options=H,this.loose=!!H.loose,this.includePrerelease=!!H.includePrerelease;let W=a.trim().match(H.loose?p[y.LOOSE]:p[y.FULL]);if(!W)throw new TypeError(`Invalid Version: ${a}`);if(this.raw=a,this.major=+W[1],this.minor=+W[2],this.patch=+W[3],this.major>s||this.major<0)throw new TypeError("Invalid major version");if(this.minor>s||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>s||this.patch<0)throw new TypeError("Invalid patch version");W[4]?this.prerelease=W[4].split(".").map(w=>{if(/^[0-9]+$/.test(w)){let U=+w;if(U>=0&&U<s)return U}return w}):this.prerelease=[],this.build=W[5]?W[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(a){if(n("SemVer.compare",this.version,this.options,a),!(a instanceof qi)){if(typeof a=="string"&&a===this.version)return 0;a=new qi(a,this.options)}return a.version===this.version?0:this.compareMain(a)||this.comparePre(a)}compareMain(a){return a instanceof qi||(a=new qi(a,this.options)),E(this.major,a.major)||E(this.minor,a.minor)||E(this.patch,a.patch)}comparePre(a){if(a instanceof qi||(a=new qi(a,this.options)),this.prerelease.length&&!a.prerelease.length)return-1;if(!this.prerelease.length&&a.prerelease.length)return 1;if(!this.prerelease.length&&!a.prerelease.length)return 0;let H=0;do{let W=this.prerelease[H],w=a.prerelease[H];if(n("prerelease compare",H,W,w),W===void 0&&w===void 0)return 0;if(w===void 0)return 1;if(W===void 0)return-1;if(W!==w)return E(W,w)}while(++H)}compareBuild(a){a instanceof qi||(a=new qi(a,this.options));let H=0;do{let W=this.build[H],w=a.build[H];if(n("build compare",H,W,w),W===void 0&&w===void 0)return 0;if(w===void 0)return 1;if(W===void 0)return-1;if(W!==w)return E(W,w)}while(++H)}inc(a,H,W){switch(a){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",H,W);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",H,W);break;case"prepatch":this.prerelease.length=0,this.inc("patch",H,W),this.inc("pre",H,W);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",H,W),this.inc("pre",H,W);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let w=Number(W)?1:0;if(!H&&W===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[w];else{let U=this.prerelease.length;for(;--U>=0;)typeof this.prerelease[U]=="number"&&(this.prerelease[U]++,U=-2);if(U===-1){if(H===this.prerelease.join(".")&&W===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(w)}}if(H){let U=[H,w];W===!1&&(U=[H]),E(this.prerelease[0],H)===0?isNaN(this.prerelease[1])&&(this.prerelease=U):this.prerelease=U}break}default:throw new Error(`invalid increment argument: ${a}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};e.exports=m}),GF=ce((t,e)=>{var n=Wp(),u=(s,p,y)=>new n(s,y).compare(new n(p,y));e.exports=u}),WF=ce((t,e)=>{var n=GF(),u=(s,p,y)=>n(s,p,y)>=0;e.exports=u}),ZF=ce((t,e)=>{var n=Wp(),u=(s,p,y=!1)=>{if(s instanceof n)return s;try{return new n(s,p)}catch(g){if(!y)return null;throw g}};e.exports=u}),e3=ce((t,e)=>{var n=Wp(),u=ZF(),{safeRe:s,t:p}=Cw(),y=(g,E)=>{if(g instanceof n)return g;if(typeof g=="number"&&(g=String(g)),typeof g!="string")return null;E=E||{};let m=null;if(!E.rtl)m=g.match(E.includePrerelease?s[p.COERCEFULL]:s[p.COERCE]);else{let U=E.includePrerelease?s[p.COERCERTLFULL]:s[p.COERCERTL],tt;for(;(tt=U.exec(g))&&(!m||m.index+m[0].length!==g.length);)(!m||tt.index+tt[0].length!==m.index+m[0].length)&&(m=tt),U.lastIndex=tt.index+tt[1].length+tt[2].length;U.lastIndex=-1}if(m===null)return null;let D=m[2],a=m[3]||"0",H=m[4]||"0",W=E.includePrerelease&&m[5]?`-${m[5]}`:"",w=E.includePrerelease&&m[6]?`+${m[6]}`:"";return u(`${D}.${a}.${H}${W}${w}`,E)};e.exports=y}),jd="2.20.65",lG=Yr(bA()),FA="3.7.7",c$=FA,Kc=typeof Buffer=="function",yA=typeof TextDecoder=="function"?new TextDecoder:void 0,_A=typeof TextEncoder=="function"?new TextEncoder:void 0,l$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Cf=Array.prototype.slice.call(l$),Hd=(t=>{let e={};return t.forEach((n,u)=>e[n]=u),e})(Cf),f$=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,$n=String.fromCharCode.bind(String),CA=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),IA=t=>t.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),BA=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),$A=t=>{let e,n,u,s,p="",y=t.length%3;for(let g=0;g<t.length;){if((n=t.charCodeAt(g++))>255||(u=t.charCodeAt(g++))>255||(s=t.charCodeAt(g++))>255)throw new TypeError("invalid character found");e=n<<16|u<<8|s,p+=Cf[e>>18&63]+Cf[e>>12&63]+Cf[e>>6&63]+Cf[e&63]}return y?p.slice(0,y-3)+"===".substring(y):p},vg=typeof btoa=="function"?t=>btoa(t):Kc?t=>Buffer.from(t,"binary").toString("base64"):$A,gg=Kc?t=>Buffer.from(t).toString("base64"):t=>{let e=[];for(let n=0,u=t.length;n<u;n+=4096)e.push($n.apply(null,t.subarray(n,n+4096)));return vg(e.join(""))},Md=(t,e=!1)=>e?IA(gg(t)):gg(t),h$=t=>{if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?$n(192|e>>>6)+$n(128|e&63):$n(224|e>>>12&15)+$n(128|e>>>6&63)+$n(128|e&63)}else{var e=65536+(t.charCodeAt(0)-55296)*1024+(t.charCodeAt(1)-56320);return $n(240|e>>>18&7)+$n(128|e>>>12&63)+$n(128|e>>>6&63)+$n(128|e&63)}},d$=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,RA=t=>t.replace(d$,h$),DA=Kc?t=>Buffer.from(t,"utf8").toString("base64"):_A?t=>gg(_A.encode(t)):t=>vg(RA(t)),Vc=(t,e=!1)=>e?IA(DA(t)):DA(t),SA=t=>Vc(t,!0),p$=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,g$=t=>{switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),n=e-65536;return $n((n>>>10)+55296)+$n((n&1023)+56320);case 3:return $n((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return $n((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},PA=t=>t.replace(p$,g$),OA=t=>{if(t=t.replace(/\s+/g,""),!f$.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,n="",u,s;for(let p=0;p<t.length;)e=Hd[t.charAt(p++)]<<18|Hd[t.charAt(p++)]<<12|(u=Hd[t.charAt(p++)])<<6|(s=Hd[t.charAt(p++)]),n+=u===64?$n(e>>16&255):s===64?$n(e>>16&255,e>>8&255):$n(e>>16&255,e>>8&255,e&255);return n},wg=typeof atob=="function"?t=>atob(BA(t)):Kc?t=>Buffer.from(t,"base64").toString("binary"):OA,xA=Kc?t=>CA(Buffer.from(t,"base64")):t=>CA(wg(t).split("").map(e=>e.charCodeAt(0))),TA=t=>xA(NA(t)),m$=Kc?t=>Buffer.from(t,"base64").toString("utf8"):yA?t=>yA.decode(xA(t)):t=>PA(wg(t)),NA=t=>BA(t.replace(/[-_]/g,e=>e=="-"?"+":"/")),mg=t=>m$(NA(t)),v$=t=>{if(typeof t!="string")return!1;let e=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},kA=t=>({value:t,enumerable:!1,writable:!0,configurable:!0}),LA=function(){let t=(e,n)=>Object.defineProperty(String.prototype,e,kA(n));t("fromBase64",function(){return mg(this)}),t("toBase64",function(e){return Vc(this,e)}),t("toBase64URI",function(){return Vc(this,!0)}),t("toBase64URL",function(){return Vc(this,!0)}),t("toUint8Array",function(){return TA(this)})},UA=function(){let t=(e,n)=>Object.defineProperty(Uint8Array.prototype,e,kA(n));t("toBase64",function(e){return Md(this,e)}),t("toBase64URI",function(){return Md(this,!0)}),t("toBase64URL",function(){return Md(this,!0)})},w$=()=>{LA(),UA()},ft={version:FA,VERSION:c$,atob:wg,atobPolyfill:OA,btoa:vg,btoaPolyfill:$A,fromBase64:mg,toBase64:Vc,encode:Vc,encodeURI:SA,encodeURL:SA,utob:RA,btou:PA,decode:mg,isValid:v$,fromUint8Array:Md,toUint8Array:TA,extendString:LA,extendUint8Array:UA,extendBuiltins:w$},Mu=typeof $task<"u",Qa=typeof $loon<"u",qu=typeof $httpClient<"u"&&!Qa,na=eval('typeof process !== "undefined"'),jA=typeof $environment<"u"&&$environment["stash-version"],HA=typeof $rocket<"u",E$=typeof egern=="object",A$=typeof $native<"u",Vu=typeof $Plugins<"u";function qd(t){return t!==null&&typeof t=="object"&&[null,Object.prototype].includes(Object.getPrototypeOf(t))}function b$(t){let[e,n,u,s,p,y,g]=t.match(/^socks5:\/\/(?:(.*?):(.*?)@)?(.*?)(?::(\d+?))?(\?.*?)?(?:#(.*?))?$/);if(p)p=parseInt(p,10);else throw $.error(`port is not present in line: ${t}`),new Error(`port is not present in line: ${t}`);return{type:5,host:s,port:p,userId:n!=null?decodeURIComponent(n):void 0,password:u!=null?decodeURIComponent(u):void 0}}var Vd=class{constructor(t="untitled",e=!1){this.name=t,this.debug=e,this.http=Rs(),this.env=hn(),na&&require("dotenv").config(),this.node=na?{fs:require("fs")}:null,this.initCache();let n=(u,s)=>new Promise(function(p){setTimeout(p.bind(null,s),u)});Promise.prototype.delay=async function(u){let s=await this;return await n(u,s)}}initCache(){if(Mu&&(this.cache=JSON.parse($prefs.valueForKey(this.name)||"{}")),(Qa||qu)&&(this.cache=JSON.parse($persistentStore.read(this.name)||"{}")),Vu&&(this.cache=JSON.parse($Plugins.SubStoreCache.get(this.name)||"{}")),na){let basePath=eval("process.env.SUB_STORE_DATA_BASE_PATH")||".",rootPath=`${basePath}/root.json`,backupRootPath=`${basePath}/root_${Date.now()}.json`;if(this.log(`Root path: ${rootPath}`),this.node.fs.existsSync(rootPath))try{this.root=JSON.parse(this.node.fs.readFileSync(`${rootPath}`))}catch(t){this.node.fs.copyFileSync(rootPath,backupRootPath),this.error(`Failed to parse ${rootPath}: ${t.message}. Backup created at ${backupRootPath}`)}qd(this.root)||(this.node.fs.writeFileSync(rootPath,JSON.stringify({}),{flag:"w"}),this.root={});let fpath=`${basePath}/${this.name}.json`,backupPath=`${basePath}/${this.name}_${Date.now()}.json`;if(this.log(`Data path: ${fpath}`),this.node.fs.existsSync(fpath))try{if(this.cache=JSON.parse(this.node.fs.readFileSync(`${fpath}`,"utf-8")),!qd(this.cache))throw new Error("Invalid Data")}catch{try{let t=ft.decode(this.node.fs.readFileSync(`${fpath}`,"utf-8"));if(this.cache=JSON.parse(t),this.node.fs.writeFileSync(fpath,t,{flag:"w"}),!qd(this.cache))throw new Error("Invalid Data")}catch(t){this.node.fs.copyFileSync(fpath,backupPath),this.error(`Failed to parse ${fpath}: ${t.message}. Backup created at ${backupPath}`)}}qd(this.cache)||(this.node.fs.writeFileSync(fpath,JSON.stringify({}),{flag:"w"}),this.cache={})}}persistCache(){let data=JSON.stringify(this.cache,null,2);if(Mu&&$prefs.setValueForKey(data,this.name),(Qa||qu)&&$persistentStore.write(data,this.name),Vu&&$Plugins.SubStoreCache.set(this.name,data),na){let basePath=eval("process.env.SUB_STORE_DATA_BASE_PATH")||".";this.node.fs.writeFileSync(`${basePath}/${this.name}.json`,data,{flag:"w"},t=>{}),this.node.fs.writeFileSync(`${basePath}/root.json`,JSON.stringify(this.root,null,2),{flag:"w"},t=>{})}}write(t,e){if(this.log(`SET ${e}`),e.indexOf("#")!==-1){if(e=e.substr(1),qu||Qa)return $persistentStore.write(t,e);if(Mu)return $prefs.setValueForKey(t,e);if(na&&(this.root[e]=t),Vu)return $Plugins.SubStoreCache.set(e,t)}else this.cache[e]=t;this.persistCache()}read(t){if(this.log(`READ ${t}`),t.indexOf("#")!==-1){if(t=t.substr(1),qu||Qa)return $persistentStore.read(t);if(Mu)return $prefs.valueForKey(t);if(na)return this.root[t];if(Vu)return $Plugins.SubStoreCache.get(t)}else return this.cache[t]}delete(t){if(this.log(`DELETE ${t}`),t.indexOf("#")!==-1){if(t=t.substr(1),qu||Qa)return $persistentStore.write(null,t);if(Mu)return $prefs.removeValueForKey(t);if(na&&delete this.root[t],Vu)return $Plugins.SubStoreCache.remove(t)}else delete this.cache[t];this.persistCache()}notify(title,subtitle="",content="",options={}){let openURL=options["open-url"],mediaURL=options["media-url"];if(Mu&&$notify(title,subtitle,content,options),qu&&$notification.post(title,subtitle,content+`${mediaURL?`
\u591A\u5A92\u4F53:`+mediaURL:""}`,{url:openURL}),Qa){let t={};openURL&&(t.openUrl=openURL),mediaURL&&(t.mediaUrl=mediaURL),JSON.stringify(t)==="{}"?$notification.post(title,subtitle,content):$notification.post(title,subtitle,content,t)}if(na){let content_=content+(openURL?`
\u70B9\u51FB\u8DF3\u8F6C: ${openURL}`:"")+(mediaURL?`
\u591A\u5A92\u4F53: ${mediaURL}`:""),push=eval("process.env.SUB_STORE_PUSH_SERVICE");if(push)if(/^https?:\/\//.test(push)){let t=push.replace("[\u63A8\u9001\u6807\u9898]",encodeURIComponent(title||"Sub-Store")).replace("[\u63A8\u9001\u5185\u5BB9]",encodeURIComponent([subtitle,content_].map(e=>e).join(`
`)));Rs().get({url:t}).then(e=>{}).catch(e=>{})}else{let{execFile:t}=require("child_process");t("shoutrrr",["send","--url",push,"--message",`${title}
${subtitle}
${content_}`],(e,n,u)=>{})}}Vu&&$Plugins.Notify(title,subtitle+`
`+content)}log(t){this.debug}info(t){}error(t){}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){Mu||Qa||qu||Vu?$done(t):na&&typeof $context<"u"&&($context.headers=t.headers,$context.statusCode=t.statusCode,$context.body=t.body)}};function hn(){return{isQX:Mu,isLoon:Qa,isSurge:qu,isNode:na,isStash:jA,isShadowRocket:HA,isEgern:E$,isLanceX:A$,isGUIforCores:Vu}}function Rs(defaultOptions={baseURL:""}){let{isQX,isLoon,isSurge,isNode,isGUIforCores}=hn(),methods=["GET","POST","PUT","DELETE","HEAD","OPTIONS","PATCH"],URL_REGEX=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/;function send(method,options){options=typeof options=="string"?{url:options}:options;let baseURL=defaultOptions.baseURL;baseURL&&!URL_REGEX.test(options.url||"")&&(options.url=baseURL?baseURL+options.url:options.url),options={...defaultOptions,...options};let timeout=options.timeout,events={onRequest:()=>{},onResponse:t=>t,onTimeout:()=>{},...options.events};if(events.onRequest(method,options),options.node&&isSurge){let t=$environment["surge-build"];t&&parseInt(t)>=2407&&(options["policy-descriptor"]=options.node,delete options.node)}let worker;isQX?worker=$task.fetch({method,url:options.url,headers:options.headers,body:options.body,opts:options.opts}):isLoon||isSurge||isNode?worker=new Promise(async(resolve,reject)=>{let body=options.body,opts=JSON.parse(JSON.stringify(options));if(opts.body=body,opts.timeout=opts.timeout||8e3,opts.timeout&&(opts.timeout++,isNaN(opts.timeout)&&(opts.timeout=8e3),!isNode)){let t="ms";(isSurge||jA||HA)&&(opts.timeout=Math.ceil(opts.timeout/1e3),t="s")}if(isNode){let undici=require("undici"),{socksDispatcher}=require("fetch-socks"),{ProxyAgent,EnvHttpProxyAgent,request,interceptors}=undici,agentOpts={connect:{rejectUnauthorized:!(opts.strictSSL===!1||opts.insecure===!0||opts.rejectUnauthorized===!1)},bodyTimeout:opts.timeout,headersTimeout:opts.timeout,maxHeaderSize:eval("process.env.SUB_STORE_MAX_HEADER_SIZE")||32*1024},tlsOptions={rejectUnauthorized:agentOpts.connect.rejectUnauthorized};opts.tls={...opts.tls||{},...tlsOptions};try{let url=new URL(opts.url);(url.username||url.password)&&(opts.headers={...opts.headers||{},Authorization:`Basic ${Buffer.from(`${url.username||""}:${url.password||""}`).toString("base64")}`});let dispatcher;if(!opts.proxy){let allProxy=eval("process.env.all_proxy")||eval("process.env.ALL_PROXY");allProxy&&/^socks5:\/\//.test(allProxy)&&(opts.proxy=allProxy)}opts.proxy?/^socks5:\/\//.test(opts.proxy)?dispatcher=socksDispatcher(b$(opts.proxy),{...agentOpts,requestTls:tlsOptions}):dispatcher=new ProxyAgent({...agentOpts,uri:opts.proxy,requestTls:tlsOptions}):dispatcher=new EnvHttpProxyAgent({...agentOpts,requestTls:tlsOptions});let response=await request(opts.url,{...opts,method:method.toUpperCase(),dispatcher:dispatcher.compose(interceptors.redirect({maxRedirections:3,throwOnMaxRedirects:!0}))});resolve({statusCode:response.statusCode,headers:response.headers,body:opts.encoding===null?await response.body.arrayBuffer():await response.body.text()})}catch(t){reject(t)}}else $httpClient[method.toLowerCase()](opts,(t,e,n)=>{t?reject(t):resolve({statusCode:e.status||e.statusCode,headers:e.headers,body:n})})}):isGUIforCores&&(worker=new Promise(async(t,e)=>{try{let n=await $Plugins.Requests({method,url:options.url,headers:options.headers,body:options.body,autoTransformBody:!1,options:{Proxy:options.proxy,Timeout:options.timeout?options.timeout/1e3:15}});t({statusCode:n.status,headers:n.headers,body:n.body})}catch(n){e(n)}}));let timeoutid,timer=timeout?new Promise((t,e)=>{timeoutid=setTimeout(()=>(events.onTimeout(),e(`${method} URL: ${options.url} exceeds the timeout ${timeout} ms`)),timeout)}):null;return(timer?Promise.race([timer,worker]).then(t=>(typeof clearTimeout<"u"&&clearTimeout(timeoutid),t)):worker).then(t=>events.onResponse(t))}let http={};return methods.forEach(t=>http[t.toLowerCase()]=e=>send(t,e)),http}var y$=new Vd("sub-store"),R=y$,Eg="schemaVersion",Kt="settings",Jt="subs",Zt="collections",Lt="files",jn="modules",Bt="artifacts",Df="rules",ui="tokens",MA="Auto Generated Sub-Store Backup",Kd="Sub-Store",Lo="Sub-Store Artifacts Repository",Uo="#sub-store-cached-resource",jo="#sub-store-cached-headers-resource",zd="#sub-store-chr-expiration-time",Ho="#sub-store-cached-script-resource",Gd="#sub-store-csr-expiration-time";function Ku(){_$()}function _$(){let t=R.read(Eg);t||C$(),t!=="2.0"&&R.write("2.0",Eg)}function C$(){R.info("Start migrating...");let t=R.read(Jt)||{},e=Object.values(t).map(w=>(w.source=w.source||"remote",H(w),W(w),w));R.write(e,Jt);let n=R.read(Zt)||{},u=Object.values(n).map(w=>(delete w.ua,H(w),W(w),w));R.write(u,Zt);let s=R.read(Bt)||{},p=Object.values(s);R.write(p,Bt);let y=R.read(Df)||{},g=Object.values(y);R.write(g,Df);let E=R.read(Lt)||{},m=Object.values(E);R.write(m,Lt);let D=R.read(ui)||{},a=Object.values(D);R.write(a,ui),delete R.cache.builtin,R.info("Migration complete!");function H(w){let U=w["display-name"];U&&(w.displayName=U,delete w["display-name"])}function W(w){let U=w.process;if(!U||U.length===0)return;let tt=[],J={type:"Quick Setting Operator",args:{udp:"DEFAULT",tfo:"DEFAULT",scert:"DEFAULT","vmess aead":"DEFAULT",useless:"DEFAULT"}};for(let N of U)if(N.type){if(N.type==="Useless Filter")J.args.useless="ENABLED";else if(N.type==="Set Property Operator"){let{key:Q,value:it}=N.args;switch(Q){case"udp":J.args.udp=it?"ENABLED":"DISABLED";break;case"tfo":J.args.tfo=it?"ENABLED":"DISABLED";break;case"skip-cert-verify":J.args.scert=it?"ENABLED":"DISABLED";break;case"aead":J.args["vmess aead"]=it?"ENABLED":"DISABLED";break}}else if(N.type.indexOf("Keyword")===-1)if(N.type==="Flag Operator"){let Q=typeof N.args>"u"?!0:N.args;N.args={mode:Q?"add":"remove"},tt.push(N)}else tt.push(N)}tt.unshift(J),w.process=tt}}var nG=Yr(Ff());function Ag({substore:$,port,host}){let{isNode}=hn(),DEFAULT_HEADERS={"Content-Type":"text/plain;charset=UTF-8","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST,GET,OPTIONS,PATCH,PUT,DELETE","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept","X-Powered-By":isNode&&eval("process.env.SUB_STORE_X_POWERED_BY")||"Sub-Store"};if(isNode){let express_=require("express"),bodyParser=require("body-parser"),app=express_(),limit=eval("process.env.SUB_STORE_BODY_JSON_LIMIT")||"1mb";return $.info(`[BACKEND] body JSON limit: ${limit}`),app.use(bodyParser.json({verify:rawBodySaver,limit})),app.use(bodyParser.urlencoded({verify:rawBodySaver,extended:!0})),app.use(bodyParser.raw({verify:rawBodySaver,type:"*/*"})),app.use((t,e,n)=>{e.set(DEFAULT_HEADERS),n()}),app.start=()=>{app.get("*",function(e,n){n.status(404).end()});let t=app.listen(port,host,()=>{let{address:e,port:n}=t.address();$.info(`[BACKEND] listening on ${e}:${n}`)})},app}let handlers=[],METHODS_NAMES=["GET","POST","PUT","DELETE","PATCH","OPTIONS","HEAD'","ALL"],dispatch=(t,e=0)=>{let{method:n,url:u,headers:s,body:p}=t;s=D$(s),/json/i.test(s["content-type"])&&(p=JSON.parse(p)),n=n.toUpperCase();let{path:y,query:g}=F$(u),E=null,m,D=0;for(m=e;m<handlers.length;m++)if(handlers[m].method==="ALL"||n===handlers[m].method){let{pattern:a}=handlers[m];S$(a,y)&&a.split("/").length>D&&(E=handlers[m],D=a.split("/").length)}if(E){let a=()=>{dispatch(n,u,m)},H={method:n,url:u,path:y,query:g,params:qA(E.pattern,y),headers:s,body:p},W=Response(),w=E.callback,U=tt=>{W.status(500).json({status:"failed",message:`Internal Server Error: ${tt}`})};if(w.constructor.name==="AsyncFunction")w(H,W,a).catch(U);else try{w(H,W,a)}catch(tt){U(tt)}}else Response().status(404).json({status:"failed",message:"ERROR: 404 not found"})},app={};return METHODS_NAMES.forEach(t=>{app[t.toLowerCase()]=(e,n)=>{handlers.push({method:t,pattern:e,callback:n})}}),app.route=t=>{let e={};return METHODS_NAMES.forEach(n=>{e[n.toLowerCase()]=u=>(handlers.push({method:n,pattern:t,callback:u}),e)}),e},app.start=()=>{dispatch($request)},app;function rawBodySaver(t,e,n,u){n&&n.length&&(t.rawBody=n.toString(u||"utf8"))}function Response(){let t=200,{isQX:e,isLoon:n,isSurge:u,isGUIforCores:s}=hn(),p=DEFAULT_HEADERS,y={200:"HTTP/1.1 200 OK",201:"HTTP/1.1 201 Created",302:"HTTP/1.1 302 Found",307:"HTTP/1.1 307 Temporary Redirect",308:"HTTP/1.1 308 Permanent Redirect",404:"HTTP/1.1 404 Not Found",500:"HTTP/1.1 500 Internal Server Error"};return new class{status(g){return t=g,this}send(g=""){let E={status:e?y[t]:t,body:g,headers:p};e||s?$done(E):(n||u)&&$done({response:E})}end(){this.send()}html(g){this.set("Content-Type","text/html;charset=UTF-8"),this.send(g)}json(g){this.set("Content-Type","application/json;charset=UTF-8"),this.send(JSON.stringify(g))}set(g,E){return p[g]=E,this}}}}function D$(t){let e={};for(let n of Object.keys(t))e[n.toLowerCase()]=t[n];return e}function S$(t,e){if(t instanceof RegExp&&t.test(e)||t==="/")return!0;if(t.indexOf(":")===-1){let n=e.split("/"),u=t.split("/");for(let s=0;s<u.length;s++)if(n[s]!==u[s])return!1;return!0}else if(qA(t,e))return!0;return!1}function F$(t){let e=(t.match(/https?:\/\/[^/]+(\/[^?]*)/)||[])[1]||"/",n=t.indexOf("?"),u={};if(n!==-1){let s=t.slice(t.indexOf("?")+1).split("&");for(let p=0;p<s.length;p++){let y=s[p].split("=");u[y[0]]=decodeURIComponent(y[1])}}return{path:e,query:u}}function qA(t,e){if(t.indexOf(":")===-1)return null;{let n={};for(let u=0,s=0;u<t.length;u++,s++)if(t[u]===":"){let p=[],y=[];for(;t[++u]!=="/"&&u<t.length;)p.push(t[u]);for(;e[s]!=="/"&&s<e.length;)y.push(e[s++]);n[p.join("")]=decodeURIComponent(y.join(""))}else if(t[u]!==e[s])return null;return n}}var bg=0;function Wi(t){return B$(I$($$(t)))}function I$(t){return P$(O$(R$(t),t.length*8))}function B$(t){for(var e=bg?"0123456789ABCDEF":"0123456789abcdef",n="",u,s=0;s<t.length;s++)u=t.charCodeAt(s),n+=e.charAt(u>>>4&15)+e.charAt(u&15);return n}function $$(t){for(var e="",n=-1,u,s;++n<t.length;)u=t.charCodeAt(n),s=n+1<t.length?t.charCodeAt(n+1):0,55296<=u&&u<=56319&&56320<=s&&s<=57343&&(u=65536+((u&1023)<<10)+(s&1023),n++),u<=127?e+=String.fromCharCode(u):u<=2047?e+=String.fromCharCode(192|u>>>6&31,128|u&63):u<=65535?e+=String.fromCharCode(224|u>>>12&15,128|u>>>6&63,128|u&63):u<=2097151&&(e+=String.fromCharCode(240|u>>>18&7,128|u>>>12&63,128|u>>>6&63,128|u&63));return e}function R$(t){for(var e=Array(t.length>>2),n=0;n<e.length;n++)e[n]=0;for(var n=0;n<t.length*8;n+=8)e[n>>5]|=(t.charCodeAt(n/8)&255)<<n%32;return e}function P$(t){for(var e="",n=0;n<t.length*32;n+=8)e+=String.fromCharCode(t[n>>5]>>>n%32&255);return e}function O$(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var n=1732584193,u=-271733879,s=-1732584194,p=271733878,y=0;y<t.length;y+=16){var g=n,E=u,m=s,D=p;n=Hn(n,u,s,p,t[y+0],7,-680876936),p=Hn(p,n,u,s,t[y+1],12,-389564586),s=Hn(s,p,n,u,t[y+2],17,606105819),u=Hn(u,s,p,n,t[y+3],22,-1044525330),n=Hn(n,u,s,p,t[y+4],7,-176418897),p=Hn(p,n,u,s,t[y+5],12,1200080426),s=Hn(s,p,n,u,t[y+6],17,-1473231341),u=Hn(u,s,p,n,t[y+7],22,-45705983),n=Hn(n,u,s,p,t[y+8],7,1770035416),p=Hn(p,n,u,s,t[y+9],12,-1958414417),s=Hn(s,p,n,u,t[y+10],17,-42063),u=Hn(u,s,p,n,t[y+11],22,-1990404162),n=Hn(n,u,s,p,t[y+12],7,1804603682),p=Hn(p,n,u,s,t[y+13],12,-40341101),s=Hn(s,p,n,u,t[y+14],17,-1502002290),u=Hn(u,s,p,n,t[y+15],22,1236535329),n=Mn(n,u,s,p,t[y+1],5,-165796510),p=Mn(p,n,u,s,t[y+6],9,-1069501632),s=Mn(s,p,n,u,t[y+11],14,643717713),u=Mn(u,s,p,n,t[y+0],20,-373897302),n=Mn(n,u,s,p,t[y+5],5,-701558691),p=Mn(p,n,u,s,t[y+10],9,38016083),s=Mn(s,p,n,u,t[y+15],14,-660478335),u=Mn(u,s,p,n,t[y+4],20,-405537848),n=Mn(n,u,s,p,t[y+9],5,568446438),p=Mn(p,n,u,s,t[y+14],9,-1019803690),s=Mn(s,p,n,u,t[y+3],14,-187363961),u=Mn(u,s,p,n,t[y+8],20,1163531501),n=Mn(n,u,s,p,t[y+13],5,-1444681467),p=Mn(p,n,u,s,t[y+2],9,-51403784),s=Mn(s,p,n,u,t[y+7],14,1735328473),u=Mn(u,s,p,n,t[y+12],20,-1926607734),n=qn(n,u,s,p,t[y+5],4,-378558),p=qn(p,n,u,s,t[y+8],11,-2022574463),s=qn(s,p,n,u,t[y+11],16,1839030562),u=qn(u,s,p,n,t[y+14],23,-35309556),n=qn(n,u,s,p,t[y+1],4,-1530992060),p=qn(p,n,u,s,t[y+4],11,1272893353),s=qn(s,p,n,u,t[y+7],16,-155497632),u=qn(u,s,p,n,t[y+10],23,-1094730640),n=qn(n,u,s,p,t[y+13],4,681279174),p=qn(p,n,u,s,t[y+0],11,-358537222),s=qn(s,p,n,u,t[y+3],16,-722521979),u=qn(u,s,p,n,t[y+6],23,76029189),n=qn(n,u,s,p,t[y+9],4,-640364487),p=qn(p,n,u,s,t[y+12],11,-421815835),s=qn(s,p,n,u,t[y+15],16,530742520),u=qn(u,s,p,n,t[y+2],23,-995338651),n=Vn(n,u,s,p,t[y+0],6,-198630844),p=Vn(p,n,u,s,t[y+7],10,1126891415),s=Vn(s,p,n,u,t[y+14],15,-1416354905),u=Vn(u,s,p,n,t[y+5],21,-57434055),n=Vn(n,u,s,p,t[y+12],6,1700485571),p=Vn(p,n,u,s,t[y+3],10,-1894986606),s=Vn(s,p,n,u,t[y+10],15,-1051523),u=Vn(u,s,p,n,t[y+1],21,-2054922799),n=Vn(n,u,s,p,t[y+8],6,1873313359),p=Vn(p,n,u,s,t[y+15],10,-30611744),s=Vn(s,p,n,u,t[y+6],15,-1560198380),u=Vn(u,s,p,n,t[y+13],21,1309151649),n=Vn(n,u,s,p,t[y+4],6,-145523070),p=Vn(p,n,u,s,t[y+11],10,-1120210379),s=Vn(s,p,n,u,t[y+2],15,718787259),u=Vn(u,s,p,n,t[y+9],21,-343485551),n=zu(n,g),u=zu(u,E),s=zu(s,m),p=zu(p,D)}return Array(n,u,s,p)}function Yd(t,e,n,u,s,p){return zu(x$(zu(zu(e,t),zu(u,p)),s),n)}function Hn(t,e,n,u,s,p,y){return Yd(e&n|~e&u,t,e,s,p,y)}function Mn(t,e,n,u,s,p,y){return Yd(e&u|n&~u,t,e,s,p,y)}function qn(t,e,n,u,s,p,y){return Yd(e^n^u,t,e,s,p,y)}function Vn(t,e,n,u,s,p,y){return Yd(n^(e|~u),t,e,s,p,y)}function zu(t,e){var n=(t&65535)+(e&65535),u=(t>>16)+(e>>16)+(n>>16);return u<<16|n&65535}function x$(t,e){return t<<e|t>>>32-e}var n0=Yr(rb()),a7=/^((25[0-5]|(2[0-4]|1\d|[1-9]|)\d)(\.(?!$)|$)){4}$/,u7=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/;function Wr(t){return a7.test(t)}function Mr(t){return u7.test(t)}function nb(t){return/^((6553[0-5])|(655[0-2][0-9])|(65[0-4][0-9]{2})|(6[0-4][0-9]{3})|([1-5][0-9]{4})|([0-5]{0,5})|([0-9]{1,4}))$/.test(t)}function ca(t){return typeof t=="string"&&t.trim().length>0}function fr(t,e){return ca(t)?t:e}function Xc(t){return typeof t<"u"&&t!==null}function Jc(t,e){return Xc(t)?t:e}function tu(t){return t?/^.+?\s*?=\s*?.+?\s*?,.+?/.test(t)?{"policy-descriptor":t}:{policy:t}:{}}function o7(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}function $f(t){let e=t.split(/,|\//),n=e[Math.floor(Math.random()*e.length)];if(n.includes("-")){let[u,s]=n.split("-").map(Number);return o7(u,s)}else return Number(n)}function ib(t){return Number.isSafeInteger(t)?String(t):BigInt(t).toString()}function i0(t){return typeof t=="string"&&/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(t)}function Gu(t,e="YYYY-MM-DD_HH-mm-ss"){let n=t instanceof Date?t:new Date(t);if(isNaN(n.getTime()))return"";let u=p=>String(p).padStart(2,"0"),s={YYYY:n.getFullYear(),MM:u(n.getMonth()+1),DD:u(n.getDate()),HH:u(n.getHours()),mm:u(n.getMinutes()),ss:u(n.getSeconds())};return e.replace(/YYYY|MM|DD|HH|mm|ss/g,p=>s[p])}var Og=class{constructor(t){this.expires=t,R.read(Uo)||R.write("{}",Uo);try{this.resourceCache=JSON.parse(R.read(Uo))}catch(e){R.error(`\u89E3\u6790\u6301\u4E45\u5316\u7F13\u5B58\u4E2D\u7684 ${Uo} \u5931\u8D25, \u91CD\u7F6E\u4E3A {}, \u9519\u8BEF: ${e?.message??e}`),this.resourceCache={},R.write("{}",Uo)}this._cleanup()}_cleanup(){let t=!1;Object.entries(this.resourceCache).forEach(e=>{let[n,u]=e;u.time||(delete this.resourceCache[n],R.delete(`#${n}`),t=!0),new Date().getTime()-u.time>this.expires&&(delete this.resourceCache[n],t=!0)}),t&&this._persist()}revokeAll(){this.resourceCache={},this._persist()}_persist(){R.write(JSON.stringify(this.resourceCache),Uo)}get(t){let e=this.resourceCache[t]&&this.resourceCache[t].time;return e&&new Date().getTime()-e<=this.expires?this.resourceCache[t].data:null}set(t,e){this.resourceCache[t]={time:new Date().getTime(),data:e},this._persist()}},Xr=new Og(36e5),xg=class{constructor(){this.expires=l7(),R.read(jo)||R.write("{}",jo);try{this.resourceCache=JSON.parse(R.read(jo))}catch(t){R.error(`\u89E3\u6790\u6301\u4E45\u5316\u7F13\u5B58\u4E2D\u7684 ${jo} \u5931\u8D25, \u91CD\u7F6E\u4E3A {}, \u9519\u8BEF: ${t?.message??t}`),this.resourceCache={},R.write("{}",jo)}this._cleanup()}_cleanup(){let t=!1;Object.entries(this.resourceCache).forEach(e=>{let[n,u]=e;u.time||(delete this.resourceCache[n],R.delete(`#${n}`),t=!0),new Date().getTime()-u.time>this.expires&&(delete this.resourceCache[n],t=!0)}),t&&this._persist()}revokeAll(){this.resourceCache={},this._persist()}_persist(){R.write(JSON.stringify(this.resourceCache),jo)}get(t){let e=this.resourceCache[t]&&this.resourceCache[t].time;return e&&new Date().getTime()-e<=this.expires?this.resourceCache[t].data:null}gettime(t){let e=this.resourceCache[t]&&this.resourceCache[t].time;return e&&new Date().getTime()-e<=this.expires?this.resourceCache[t].time:null}set(t,e){this.resourceCache[t]={time:new Date().getTime(),data:e},this._persist()}};function l7(){R.read(zd)||R.write("6e4",zd);let t=6e4;if(R.env.isLoon){let e={"1\u5206\u949F":6e4,"5\u5206\u949F":3e5,"10\u5206\u949F":6e5,"30\u5206\u949F":18e5,"1\u5C0F\u65F6":36e5,"2\u5C0F\u65F6":72e5,"3\u5C0F\u65F6":108e5,"6\u5C0F\u65F6":216e5,"12\u5C0F\u65F6":432e5,"24\u5C0F\u65F6":864e5,"48\u5C0F\u65F6":1728e5,"72\u5C0F\u65F6":2592e5,\u53C2\u6570\u4F20\u5165:"readcachets"},n=R.read("#\u54CD\u5E94\u5934\u7F13\u5B58\u6709\u6548\u671F");return n in e&&(t=e[n],t==="readcachets"&&(t=n)),t}else return t=R.read(zd),t}var Vo=new xg;function Zc(t){let e=Object.keys(t),n="",u="";for(let s of e){let p=s.toLowerCase();p==="subscription-userinfo"?n=t[s]:p==="profile-web-page-url"&&(u=t[s])}return`${n||""}${u?`; app_url=${encodeURIComponent(u)}`:""}`}async function zn(rawUrl,ua,timeout,customProxy,flowUrl){let url=flowUrl||rawUrl||"",$arguments={},rawArgs=url.split("#");if(url=url.split("#")[0],rawArgs.length>1)try{$arguments=JSON.parse(decodeURIComponent(rawArgs[1]))}catch{for(let t of rawArgs[1].split("&")){let e=t.split("=")[0],n=t.split("=")[1];$arguments[e]=n==null||n===""?!0:decodeURIComponent(n)}}if($arguments?.noFlow||!/^https?/.test(url))return;let{isStash,isLoon,isShadowRocket,isQX}=hn(),insecure=$arguments?.insecure?R.env.isNode?{strictSSL:!1}:{insecure:!0}:void 0,{defaultProxy,defaultFlowUserAgent,defaultTimeout}=R.read(Kt),proxy=customProxy||defaultProxy;R.env.isNode&&(proxy=proxy||eval("process.env.SUB_STORE_BACKEND_DEFAULT_PROXY"));let userAgent=ua||defaultFlowUserAgent||"clash.meta/v1.19.16",requestTimeout=timeout||defaultTimeout||8e3,id=Wi(userAgent+url),cached=Vo.get(id),flowInfo;if(!$arguments?.noCache&&cached)R.info(`\u4F7F\u7528\u7F13\u5B58\u7684\u6D41\u91CF\u4FE1\u606F: ${url}, ${userAgent}`),flowInfo=cached;else{let t=Rs();if(flowUrl){R.info(`\u4F7F\u7528 GET \u65B9\u6CD5\u4ECE\u54CD\u5E94\u4F53\u83B7\u53D6\u6D41\u91CF\u4FE1\u606F: ${flowUrl}, User-Agent: ${userAgent||""}, Insecure: ${!!insecure}, Proxy: ${proxy}`);let{body:e,statusCode:n}=await t.get({url:flowUrl,headers:{"User-Agent":userAgent},timeout:requestTimeout,...proxy?{proxy}:{},...isLoon&&proxy?{node:proxy}:{},...isQX&&proxy?{opts:{policy:proxy}}:{},...proxy?tu(proxy):{},...insecure||{}});if(n<200||n>=400)throw new Error(`statusCode: ${n}`);flowInfo=e}else{try{R.info(`\u4F7F\u7528 HEAD \u65B9\u6CD5\u4ECE\u54CD\u5E94\u5934\u83B7\u53D6\u6D41\u91CF\u4FE1\u606F: ${url}, User-Agent: ${userAgent||""}, Insecure: ${!!insecure}, Proxy: ${proxy}`);let{headers:e}=await t.head({url:url.split(/[\r\n]+/).map(n=>n.trim()).filter(n=>n.length)[0],headers:{"User-Agent":userAgent,...isStash&&proxy?{"X-Stash-Selected-Proxy":encodeURIComponent(proxy)}:{},...isShadowRocket&&proxy?{"X-Surge-Policy":proxy}:{}},timeout:requestTimeout,...proxy?{proxy}:{},...isLoon&&proxy?{node:proxy}:{},...isQX&&proxy?{opts:{policy:proxy}}:{},...proxy?tu(proxy):{},...insecure||{}});flowInfo=Zc(e)}catch(e){R.error(`\u4F7F\u7528 HEAD \u65B9\u6CD5\u4ECE\u54CD\u5E94\u5934\u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u5931\u8D25: ${url}, User-Agent: ${userAgent||""}, Insecure: ${!!insecure}, Proxy: ${proxy}: ${e.message??e}`)}if(!flowInfo){R.info(`\u4F7F\u7528 GET \u65B9\u6CD5\u83B7\u53D6\u6D41\u91CF\u4FE1\u606F: ${url}, User-Agent: ${userAgent||""}, Insecure: ${!!insecure}, Proxy: ${proxy}`);let{headers:e}=await t.get({url:url.split(/[\r\n]+/).map(n=>n.trim()).filter(n=>n.length)[0],headers:{"User-Agent":userAgent,...isStash&&proxy?{"X-Stash-Selected-Proxy":encodeURIComponent(proxy)}:{},...isShadowRocket&&proxy?{"X-Surge-Policy":proxy}:{}},timeout:requestTimeout,...proxy?{proxy}:{},...isLoon&&proxy?{node:proxy}:{},...isQX&&proxy?{opts:{policy:proxy}}:{},...proxy?tu(proxy):{},...insecure||{}});flowInfo=Zc(e)}}flowInfo&&(flowInfo=flowInfo.trim()),flowInfo&&Vo.set(id,flowInfo)}return flowInfo}function Ko(t){if(!t)return;let e=t.match(/upload=([-+]?)([0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)/),n=e==null?0:Number(e[1]+e[2]),u=t.match(/download=([-+]?)([0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)/),s=Number(u[1]+u[2]),p=t.match(/total=([-+]?)([0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)/),y=Number(p[1]+p[2]),g=t.match(/expire=([-+]?)([0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)/),E=g?Number(g[1]+g[2]):void 0,m=t.match(/reset_day=([0-9]+)/),D=m?Number(m[1]):void 0,a=t.match(/app_url=(.*?)\s*?(;|$)/),H=a?decodeURIComponent(a[1]):void 0,W=t.match(/plan_name=(.*?)\s*?(;|$)/),w=W?decodeURIComponent(W[1]):void 0;return{expires:E,total:y,usage:{upload:n,download:s},remainingDays:D,appUrl:H,planName:w}}function Rf(t,e="B"){let n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],u=n.indexOf(e);return t<1024||u===n.length-1?{value:(Math.round(t*100)/100).toString(),unit:e}:Rf(t/1024,n[++u])}function s0(t){if(!t)throw new Error("\u6CA1\u6709\u6D41\u91CF\u4FE1\u606F");if(t?.expires&&t.expires*1e3<Date.now()){let e=new Date(t.expires*1e3).toLocaleDateString();throw new Error(`\u8BA2\u9605\u5DF2\u8FC7\u671F: ${e}`)}if(t?.total){let e=t.usage?.upload||0,n=t.usage?.download||0;if(t.total-e-n<0){let u=e+n,s=Rf(Math.abs(u));s.value=u<0?"-"+s.value:s.value;let p=Rf(t.total);throw new Error(`\u6D41\u91CF\u5DF2\u7528\u5B8C: ${s.value} ${s.unit} / ${p.value} ${p.unit}`)}}}function a0(t={}){try{let{resetDay:e,startDate:n,cycleDays:u}=t;if(["string","number"].includes(typeof t)&&(e=t),n&&u){if(u=parseInt(u),isNaN(u)||u<=0)throw new Error("\u91CD\u7F6E\u5468\u671F\u5E94\u4E3A\u6B63\u6574\u6570");if(!n||!Date.parse(n))throw new Error("\u5F00\u59CB\u65E5\u671F\u4E0D\u5408\u6CD5");let s=new Date(n),p=new Date;if(s.setHours(0,0,0,0),p.setHours(0,0,0,0),s.getTime()>p.getTime())throw new Error("\u5F00\u59CB\u65E5\u671F\u5E94\u65E9\u4E8E\u73B0\u5728");let y=new Date(n);for(y.setDate(y.getDate()+u);y<p;)y.setDate(y.getDate()+u);y.setHours(0,0,0,0);let g=y.getTime()-p.getTime();return Math.ceil(g/(1e3*3600*24))}else{if(!e)return;if(e=parseInt(e),isNaN(e)||e<=0||e>31)throw new Error("\u6708\u91CD\u7F6E\u65E5\u5E94\u4E3A 1-31 \u4E4B\u95F4\u7684\u6574\u6570");let s=new Date,p=s.getDate(),y=s.getMonth(),g=s.getFullYear(),E;return e>p?E=0:E=new Date(g,y+1,0).getDate(),E-p+e}}catch(e){R.error(`getRmainingDays failed: ${e.message??e}`)}}function Yu(t){try{let e=new Map;return t.split(";").map(n=>n.trim()).filter(Boolean).forEach(n=>{let u=n.indexOf("=");if(u===-1)return;let s=n.slice(0,u).trim(),p=n.slice(u+1).trim();if(!e.has(s))try{let y=decodeURIComponent(p);if(["upload","download","total","expire"].includes(s))try{y=Number(y).toFixed(0),["expire"].includes(s)&&y<=0&&(y="")}catch(g){R.error(`Failed to convert value for key "${s}=${p}": ${g.message??g}`)}e.set(s,y)}catch{e.set(s,p)}}),Array.from(e.entries()).map(([n,u])=>`${n}=${encodeURIComponent(u)}`).join("; ")}catch(e){return R.error(`normalizeFlowHeader failed: ${e.message??e}`),t}}function ct(t,e,n="name"){return t.find(u=>u[n]===e)}function sb(t,e,n="name"){return t.findIndex(u=>u[n]===e)}function Os(t,e,n="name"){let u=sb(t,e,n);t.splice(u,1)}function xs(t,e,n,u="name"){let s=sb(t,e,u);t[s]=n}function je(t,e,n){t.status(n||200).json({status:"success",data:e})}function xe(t,e,n){t.status(n||500).json({status:"failed",error:{code:e.code,type:e.type,message:e.message,details:t.req?.route?.path?.startsWith("/share/")?"\u8BE6\u60C5\u8BF7\u67E5\u770B\u65E5\u5FD7":e.details}})}var Qc=class{constructor(t,e,n){this.code=t,this.message=e,this.details=n}},pr=class extends Qc{constructor(t,e,n){super(t,e,n),this.type="InternalServerError"}},Ut=class extends Qc{constructor(t,e,n){super(t,e,n),this.type="RequestInvalidError"}},yr=class extends Qc{constructor(t,e,n){super(t,e,n),this.type="ResourceNotFoundError"}},el=class extends Qc{constructor(t,e,n){super(t,e,n),this.type="NetworkError"}},Mp=Yr(l0()),om=Yr(Wb());function TO(t){let e=om.default.pemtohex(t);return om.default.KJUR.crypto.Util.hashHex(e,"sha256").match(/.{2}/g).join(":").toUpperCase()}var Xb={generateFingerprint:TO},Kf=Yr(M_());function V_(t,e,...n){try{return t(e,...n)}catch{return t(K_(t(e.replace(/!<str>\s*/g,"__SubStoreJSYAMLString__"),...n)).replace(/__SubStoreJSYAMLString__/g,""),...n)}}function Vf(t,...e){return V_(Kf.default.safeLoad,JSON.parse(JSON.stringify(t)),...e)}function hN(t,...e){return V_(Kf.default.load,JSON.parse(JSON.stringify(t)),...e)}function q_(t,...e){return Kf.default.safeDump(JSON.parse(JSON.stringify(t)),...e)}function K_(t,...e){return Kf.default.dump(JSON.parse(JSON.stringify(t)),...e)}var pa={safeLoad:Vf,load:hN,safeDump:q_,dump:K_,parse:Vf,stringify:q_},bm=class{constructor(){this.expires=dN(),R.read(Ho)||R.write("{}",Ho);try{this.resourceCache=JSON.parse(R.read(Ho))}catch(t){R.error(`\u89E3\u6790\u6301\u4E45\u5316\u7F13\u5B58\u4E2D\u7684 ${Ho} \u5931\u8D25, \u91CD\u7F6E\u4E3A {}, \u9519\u8BEF: ${t?.message??t}`),this.resourceCache={},R.write("{}",Ho)}this._cleanup()}_cleanup(t,e){let n=!1;Object.entries(this.resourceCache).forEach(u=>{let[s,p]=u;p.time||(delete this.resourceCache[s],R.delete(`#${s}`),n=!0),(new Date().getTime()-p.time>(e??this.expires)||t&&s.startsWith(t))&&(delete this.resourceCache[s],n=!0)}),n&&this._persist()}revokeAll(){this.resourceCache={},this._persist()}_persist(){R.write(JSON.stringify(this.resourceCache),Ho)}get(t,e,n){let u=this.resourceCache[t]&&this.resourceCache[t].time;if(u){if(new Date().getTime()-u<=(e??this.expires))return this.resourceCache[t].data;n&&(delete this.resourceCache[t],this._persist())}return null}gettime(t){let e=this.resourceCache[t]&&this.resourceCache[t].time;return e&&new Date().getTime()-e<=this.expires?this.resourceCache[t].time:null}set(t,e){this.resourceCache[t]={time:new Date().getTime(),data:e},this._persist()}};function dN(){R.read(Gd)||R.write("1728e5",Gd);let t=1728e5;if(R.env.isLoon){let e={"1\u5206\u949F":6e4,"5\u5206\u949F":3e5,"10\u5206\u949F":6e5,"30\u5206\u949F":18e5,"1\u5C0F\u65F6":36e5,"2\u5C0F\u65F6":72e5,"3\u5C0F\u65F6":108e5,"6\u5C0F\u65F6":216e5,"12\u5C0F\u65F6":432e5,"24\u5C0F\u65F6":864e5,"48\u5C0F\u65F6":1728e5,"72\u5C0F\u65F6":2592e5,\u53C2\u6570\u4F20\u5165:"readcachets"},n=R.read("#\u8282\u70B9\u7F13\u5B58\u6709\u6548\u671F");return n in e&&(t=e[n],t==="readcachets"&&(t=n)),t}else return t=R.read(Gd),t}var zf=new bm;function T0(t,e){return[...Array(t).keys()].map(()=>e)}var ym={"\u{1F3F3}\uFE0F\u200D\u{1F308}":["EXP","BAND"],"\u{1F1F8}\u{1F1F1}":["TEST","SOS"],"\u{1F1F2}\u{1F1F5}":["MP","MNP"],"\u{1F1F8}\u{1F1F4}":["SO","SOM"],"\u{1F1E6}\u{1F1F6}":["AQ","ATA"],"\u{1F1E6}\u{1F1EC}":["AG","ATG"],"\u{1F1EC}\u{1F1F1}":["GL","GRL"],"\u{1F1FF}\u{1F1FC}":["ZW","ZWE"],"\u{1F1E6}\u{1F1FC}":["AW","ABW"],"\u{1F1F2}\u{1F1F1}":["ML","MLI"],"\u{1F1E6}\u{1F1E9}":["AD","AND"],"\u{1F1E6}\u{1F1EA}":["AE","ARE"],"\u{1F1E6}\u{1F1EB}":["AF","AFG"],"\u{1F1E6}\u{1F1F1}":["AL","ALB"],"\u{1F1E6}\u{1F1F2}":["AM","ARM"],"\u{1F1E6}\u{1F1F7}":["AR","ARG"],"\u{1F1E6}\u{1F1F9}":["AT","AUT"],"\u{1F1E6}\u{1F1FA}":["AU","AUS"],"\u{1F1E6}\u{1F1FF}":["AZ","AZE"],"\u{1F1E7}\u{1F1E6}":["BA","BIH"],"\u{1F1E7}\u{1F1E9}":["BD","BGD"],"\u{1F1E7}\u{1F1EA}":["BE","BEL"],"\u{1F1E7}\u{1F1EC}":["BG","BGR"],"\u{1F1E7}\u{1F1ED}":["BH","BHR"],"\u{1F1E7}\u{1F1F4}":["BO","BOL"],"\u{1F1E7}\u{1F1F3}":["BN","BRN"],"\u{1F1E7}\u{1F1F7}":["BR","BRA"],"\u{1F1E7}\u{1F1F9}":["BT","BTN"],"\u{1F1E7}\u{1F1FE}":["BY","BLR"],"\u{1F1E8}\u{1F1E6}":["CA","CAN"],"\u{1F1E8}\u{1F1ED}":["CH","CHE"],"\u{1F1E8}\u{1F1F1}":["CL","CHL"],"\u{1F1E8}\u{1F1F4}":["CO","COL"],"\u{1F1E8}\u{1F1F7}":["CR","CRI"],"\u{1F1E8}\u{1F1FE}":["CY","CYP"],"\u{1F1E8}\u{1F1FF}":["CZ","CZE"],"\u{1F1E9}\u{1F1EA}":["DE","DEU"],"\u{1F1E9}\u{1F1F0}":["DK","DNK"],"\u{1F1E9}\u{1F1FF}":["DZ","DZA"],"\u{1F1EA}\u{1F1E8}":["EC","ECU"],"\u{1F1EA}\u{1F1EA}":["EE","EST"],"\u{1F1EA}\u{1F1EC}":["EG","EGY"],"\u{1F1EA}\u{1F1F8}":["ES","ESP"],"\u{1F1EA}\u{1F1FA}":["EU"],"\u{1F1EB}\u{1F1EE}":["FI","FIN"],"\u{1F1EB}\u{1F1F7}":["FR","FRA"],"\u{1F1EC}\u{1F1E7}":["GB","GBR","UK"],"\u{1F1EC}\u{1F1EA}":["GE","GEO"],"\u{1F1EC}\u{1F1F7}":["GR","GRC"],"\u{1F1EC}\u{1F1F9}":["GT","GTM"],"\u{1F1EC}\u{1F1FA}":["GU","GUM"],"\u{1F1ED}\u{1F1F0}":["HK","HKG","HKT","HKBN","HGC","WTT","CMI"],"\u{1F1ED}\u{1F1F7}":["HR","HRV"],"\u{1F1ED}\u{1F1FA}":["HU","HUN"],"\u{1F1EE}\u{1F1F6}":["IQ","IRQ"],"\u{1F1EF}\u{1F1F4}":["JO","JOR"],"\u{1F1EF}\u{1F1F5}":["JP","JPN","TYO"],"\u{1F1F0}\u{1F1EA}":["KE","KEN"],"\u{1F1F0}\u{1F1EC}":["KG","KGZ"],"\u{1F1F0}\u{1F1ED}":["KH","KGZ"],"\u{1F1F0}\u{1F1F5}":["KP","PRK"],"\u{1F1F0}\u{1F1F7}":["KR","KOR","SEL"],"\u{1F1F0}\u{1F1FF}":["KZ","KAZ"],"\u{1F1EE}\u{1F1E9}":["ID","IDN"],"\u{1F1EE}\u{1F1EA}":["IE","IRL"],"\u{1F1EE}\u{1F1F1}":["IL","ISR"],"\u{1F1EE}\u{1F1F2}":["IM","IMN"],"\u{1F1EE}\u{1F1F3}":["IN","IND"],"\u{1F1EE}\u{1F1F7}":["IR","IRN"],"\u{1F1EE}\u{1F1F8}":["IS","ISL"],"\u{1F1EE}\u{1F1F9}":["IT","ITA"],"\u{1F1F1}\u{1F1E6}":["LA","LAO"],"\u{1F1F1}\u{1F1F0}":["LK","LKA"],"\u{1F1F1}\u{1F1F9}":["LT","LTU"],"\u{1F1F1}\u{1F1FA}":["LU","LUX"],"\u{1F1F1}\u{1F1FB}":["LV","LVA"],"\u{1F1F2}\u{1F1E6}":["MA","MAR"],"\u{1F1F2}\u{1F1E9}":["MD","MDA"],"\u{1F1F3}\u{1F1EC}":["NG","NGA"],"\u{1F1F2}\u{1F1F2}":["MM","MMR"],"\u{1F1F2}\u{1F1F0}":["MK","MKD"],"\u{1F1F2}\u{1F1F3}":["MN","MNG"],"\u{1F1F2}\u{1F1F4}":["MO","MAC","CTM"],"\u{1F1F2}\u{1F1F9}":["MT","MLT"],"\u{1F1F2}\u{1F1FD}":["MX","MEX"],"\u{1F1F2}\u{1F1FE}":["MY","MYS"],"\u{1F1F3}\u{1F1F1}":["NL","NLD","AMS"],"\u{1F1F3}\u{1F1F4}":["NO","NOR"],"\u{1F1F3}\u{1F1F5}":["NP","NPL"],"\u{1F1F3}\u{1F1FF}":["NZ","NZL"],"\u{1F1F4}\u{1F1F2}":["OM","OMN"],"\u{1F1F5}\u{1F1E6}":["PA","PAN"],"\u{1F1F5}\u{1F1EA}":["PE","PER"],"\u{1F1F5}\u{1F1ED}":["PH","PHL"],"\u{1F1F5}\u{1F1F0}":["PK","PAK"],"\u{1F1F5}\u{1F1F1}":["PL","POL"],"\u{1F1F5}\u{1F1F7}":["PR","PRI"],"\u{1F1F5}\u{1F1F9}":["PT","PRT"],"\u{1F1F5}\u{1F1FE}":["PY","PRY"],"\u{1F1F5}\u{1F1EC}":["PG","PNG"],"\u{1F1F6}\u{1F1E6}":["QA","QAT"],"\u{1F1F7}\u{1F1F4}":["RO","ROU"],"\u{1F1F7}\u{1F1F8}":["RS","SRB"],"\u{1F1F7}\u{1F1EA}":["RE","REU"],"\u{1F1F7}\u{1F1FA}":["RU","RUS"],"\u{1F1F8}\u{1F1E6}":["SA","SAU"],"\u{1F1FC}\u{1F1F8}":["WS","WSM"],"\u{1F1F8}\u{1F1EA}":["SE","SWE"],"\u{1F1F8}\u{1F1EC}":["SG","SGP"],"\u{1F1F8}\u{1F1EE}":["SI","SVN"],"\u{1F1F8}\u{1F1F0}":["SK","SVK"],"\u{1F1F9}\u{1F1EC}":["TG","TGO"],"\u{1F1F9}\u{1F1ED}":["TH","THA"],"\u{1F1F9}\u{1F1F3}":["TN","TUN"],"\u{1F1F9}\u{1F1F7}":["TR","TUR"],"\u{1F1F9}\u{1F1FC}":["TW","TWN","CHT","HINET","ROC"],"\u{1F1FA}\u{1F1E6}":["UA","UKR"],"\u{1F1FA}\u{1F1F8}":["US","USA","LAX","SFO","SJC"],"\u{1F1FA}\u{1F1FE}":["UY","URY"],"\u{1F1FB}\u{1F1E6}":["VA","VAT"],"\u{1F1FB}\u{1F1EA}":["VE","VEN"],"\u{1F1FB}\u{1F1F3}":["VN","VNM"],"\u{1F1FF}\u{1F1E6}":["ZA","ZAF","JNB"],"\u{1F1E8}\u{1F1F3}":["CN","CHN","BACK"]};function El(t){let e={"\u{1F3F3}\uFE0F\u200D\u{1F308}":["\u6D41\u91CF","\u65F6\u95F4","\u8FC7\u671F","Bandwidth","Expire"],"\u{1F1F8}\u{1F1F1}":["\u5E94\u6025","\u6D4B\u8BD5\u8282\u70B9"],"\u{1F1F2}\u{1F1F5}":["\u5317\u9A6C\u91CC\u4E9A\u7EB3","Northern Mariana Islands","Saipan","\u585E\u73ED"],"\u{1F1F8}\u{1F1F4}":["Somalia","\u7D22\u9A6C\u91CC","\u6469\u52A0\u8FEA\u6C99","Mogadishu"],"\u{1F1E6}\u{1F1F6}":["Antarctica","\u5357\u6781\u6D32","\u5357\u6781"],"\u{1F1E6}\u{1F1EC}":["Antigua and Barbuda","\u5B89\u63D0\u74DC\u548C\u5DF4\u5E03\u8FBE"],"\u{1F1EC}\u{1F1F1}":["Greenland","\u683C\u9675\u5170\u5C9B","\u683C\u9675\u5170"],"\u{1F1FF}\u{1F1FC}":["Zimbabwe","\u6D25\u5DF4\u5E03\u97E6"],"\u{1F1E6}\u{1F1FC}":["Aruba","\u963F\u9C81\u5DF4"],"\u{1F1F2}\u{1F1F1}":["Mali","\u9A6C\u91CC"],"\u{1F1E6}\u{1F1E9}":["Andorra","\u5B89\u9053\u5C14"],"\u{1F1E6}\u{1F1EA}":["United Arab Emirates","\u963F\u8054\u914B","\u8FEA\u62DC","Dubai"],"\u{1F1E6}\u{1F1EB}":["Afghanistan","\u963F\u5BCC\u6C57"],"\u{1F1E6}\u{1F1F1}":["Albania","\u963F\u5C14\u5DF4\u5C3C\u4E9A","\u963F\u723E\u5DF4\u5C3C\u4E9E"],"\u{1F1E6}\u{1F1F2}":["Armenia","\u4E9A\u7F8E\u5C3C\u4E9A"],"\u{1F1E6}\u{1F1F7}":["Argentina","\u963F\u6839\u5EF7"],"\u{1F1E6}\u{1F1F9}":["Austria","\u5965\u5730\u5229","\u5967\u5730\u5229","\u7EF4\u4E5F\u7EB3"],"\u{1F1FC}\u{1F1F8}":["Samoa","\u8428\u6469\u4E9A","\u85A9\u6469\u4E9E"],"\u{1F1E6}\u{1F1FA}":["Australia","\u6FB3\u5927\u5229\u4E9A","\u6FB3\u6D32","\u58A8\u5C14\u672C","\u6089\u5C3C","\u571F\u6FB3","\u4EAC\u6FB3","\u5EE3\u6FB3","\u6EEC\u6FB3","\u6CAA\u6FB3","\u5E7F\u6FB3","Sydney"],"\u{1F1E6}\u{1F1FF}":["Azerbaijan","\u963F\u585E\u62DC\u7586"],"\u{1F1E7}\u{1F1E6}":["Bosnia and Herzegovina","\u6CE2\u9ED1\u5171\u548C\u56FD","\u6CE2\u9ED1"],"\u{1F1E7}\u{1F1E9}":["Bangladesh","\u5B5F\u52A0\u62C9\u56FD","\u5B5F\u52A0\u62C9"],"\u{1F1E7}\u{1F1EA}":["Belgium","\u6BD4\u5229\u65F6","\u6BD4\u5229\u6642"],"\u{1F1E7}\u{1F1EC}":["Bulgaria","\u4FDD\u52A0\u5229\u4E9A","\u4FDD\u52A0\u5229\u4E9E"],"\u{1F1E7}\u{1F1ED}":["Bahrain","\u5DF4\u6797"],"\u{1F1E7}\u{1F1F7}":["Brazil","\u5DF4\u897F","\u5723\u4FDD\u7F57"],"\u{1F1E7}\u{1F1F3}":["Brunei","\u6587\u83B1","\u6C76\u840A"],"\u{1F1E7}\u{1F1FE}":["Belarus","\u767D\u4FC4\u7F57\u65AF","\u767D\u4FC4"],"\u{1F1E7}\u{1F1F4}":["Bolivia","\u73BB\u5229\u7EF4\u4E9A"],"\u{1F1E7}\u{1F1F9}":["Bhutan","\u4E0D\u4E39","\u4E0D\u4E39\u738B\u56FD"],"\u{1F1E8}\u{1F1E6}":["Canada","\u52A0\u62FF\u5927","\u8499\u7279\u5229\u5C14","\u6E29\u54E5\u534E","\u6953\u8449","\u67AB\u53F6","\u6ED1\u94C1\u5362","\u591A\u4F26\u591A","Waterloo","Toronto"],"\u{1F1E8}\u{1F1ED}":["Switzerland","\u745E\u58EB","\u82CF\u9ECE\u4E16","Zurich"],"\u{1F1E8}\u{1F1F1}":["Chile","\u667A\u5229"],"\u{1F1E8}\u{1F1F4}":["Colombia","\u54E5\u4F26\u6BD4\u4E9A"],"\u{1F1E8}\u{1F1F7}":["Costa Rica","\u54E5\u65AF\u8FBE\u9ECE\u52A0"],"\u{1F1E8}\u{1F1FE}":["Cyprus","\u585E\u6D66\u8DEF\u65AF"],"\u{1F1E8}\u{1F1FF}":["Czechia","\u6377\u514B","Czech","Czech Republic"],"\u{1F1E9}\u{1F1EA}":["German","\u5FB7\u56FD","\u5FB7\u570B","\u4EAC\u5FB7","\u6EEC\u5FB7","\u5EE3\u5FB7","\u6CAA\u5FB7","\u5E7F\u5FB7","\u6CD5\u5170\u514B\u798F","Frankfurt","\u5FB7\u610F\u5FD7"],"\u{1F1E9}\u{1F1F0}":["Denmark","\u4E39\u9EA6","\u4E39\u9EA5"],"\u{1F1E9}\u{1F1FF}":["Algeria","\u963F\u5C14\u53CA\u5229\u4E9A","\u963F\u723E\u53CA\u5229\u4E9E"],"\u{1F1EA}\u{1F1E8}":["Ecuador","\u5384\u74DC\u591A\u5C14"],"\u{1F1EA}\u{1F1EA}":["Estonia","\u7231\u6C99\u5C3C\u4E9A"],"\u{1F1EA}\u{1F1EC}":["Egypt","\u57C3\u53CA"],"\u{1F1EA}\u{1F1F8}":["Spain","\u897F\u73ED\u7259"],"\u{1F1EA}\u{1F1FA}":["European Union","\u6B27\u76DF","\u6B27\u7F57\u5DF4"],"\u{1F1EB}\u{1F1EE}":["Finland","\u82AC\u5170","\u82AC\u862D","\u8D6B\u5C14\u8F9B\u57FA"],"\u{1F1EB}\u{1F1F7}":["France","\u6CD5\u56FD","\u6CD5\u570B","\u5DF4\u9ECE"],"\u{1F1EC}\u{1F1E7}":["Great Britain","\u82F1\u56FD","England","United Kingdom","\u4F26\u6566","\u82F1","London"],"\u{1F1EC}\u{1F1EA}":["Georgia","\u683C\u9C81\u5409\u4E9A","\u683C\u9B6F\u5409\u4E9E"],"\u{1F1EC}\u{1F1F7}":["Greece","\u5E0C\u814A","\u5E0C\u81D8"],"\u{1F1EC}\u{1F1FA}":["Guam","\u5173\u5C9B","\u95DC\u5CF6"],"\u{1F1EC}\u{1F1F9}":["Guatemala","\u5371\u5730\u9A6C\u62C9"],"\u{1F1ED}\u{1F1F0}":["Hongkong","\u9999\u6E2F","Hong Kong","HongKong","HONG KONG","\u6DF1\u6E2F","\u6CAA\u6E2F","\u547C\u6E2F","\u7A57\u6E2F","\u4EAC\u6E2F","\u6E2F"],"\u{1F1ED}\u{1F1F7}":["Croatia","\u514B\u7F57\u5730\u4E9A","\u514B\u7F85\u5730\u4E9E"],"\u{1F1ED}\u{1F1FA}":["Hungary","\u5308\u7259\u5229"],"\u{1F1EE}\u{1F1F6}":["Iraq","\u4F0A\u62C9\u514B","\u5DF4\u683C\u8FBE","Baghdad"],"\u{1F1EF}\u{1F1F4}":["Jordan","\u7EA6\u65E6"],"\u{1F1EF}\u{1F1F5}":["Japan","\u65E5\u672C","\u4E1C\u4EAC","\u5927\u962A","\u57FC\u7389","\u6CAA\u65E5","\u7A57\u65E5","\u5DDD\u65E5","\u4E2D\u65E5","\u6CC9\u65E5","\u676D\u65E5","\u6DF1\u65E5","\u8FBD\u65E5","\u5E7F\u65E5","\u5927\u5742","Osaka","Tokyo"],"\u{1F1F0}\u{1F1EA}":["Kenya","\u80AF\u5C3C\u4E9A"],"\u{1F1F0}\u{1F1EC}":["Kyrgyzstan","\u5409\u5C14\u5409\u65AF\u65AF\u5766"],"\u{1F1F0}\u{1F1ED}":["Cambodia","\u67EC\u57D4\u5BE8"],"\u{1F1F0}\u{1F1F5}":["North Korea","\u671D\u9C9C"],"\u{1F1F0}\u{1F1F7}":["Korea","\u97E9\u56FD","\u97D3\u570B","\u97E9","\u97D3","\u9996\u5C14","\u6625\u5DDD","Chuncheon","Seoul"],"\u{1F1F0}\u{1F1FF}":["Kazakhstan","\u54C8\u8428\u514B\u65AF\u5766","\u54C8\u8428\u514B"],"\u{1F1EE}\u{1F1E9}":["Indonesia","\u5370\u5C3C","\u5370\u5EA6\u5C3C\u897F\u4E9A","\u96C5\u52A0\u8FBE"],"\u{1F1EE}\u{1F1EA}":["Ireland","\u7231\u5C14\u5170","\u611B\u723E\u862D","\u90FD\u67CF\u6797"],"\u{1F1EE}\u{1F1F1}":["Israel","\u4EE5\u8272\u5217"],"\u{1F1EE}\u{1F1F2}":["Isle of Man","\u9A6C\u6069\u5C9B","\u99AC\u6069\u5CF6"],"\u{1F1EE}\u{1F1F3}":["India","\u5370\u5EA6","\u5B5F\u4E70","MFumbai","Mumbai"],"\u{1F1EE}\u{1F1F7}":["Iran","\u4F0A\u6717"],"\u{1F1EE}\u{1F1F8}":["Iceland","\u51B0\u5C9B","\u51B0\u5CF6"],"\u{1F1EE}\u{1F1F9}":["Italy","\u610F\u5927\u5229","\u7FA9\u5927\u5229","\u7C73\u5170","Nachash"],"\u{1F1F1}\u{1F1F0}":["Sri Lanka","\u65AF\u91CC\u5170\u5361","\u65AF\u91CC\u862D\u5361"],"\u{1F1F1}\u{1F1E6}":["Laos","\u8001\u631D","\u8001\u64BE"],"\u{1F1F1}\u{1F1F9}":["Lithuania","\u7ACB\u9676\u5B9B"],"\u{1F1F1}\u{1F1FA}":["Luxembourg","\u5362\u68EE\u5821"],"\u{1F1F1}\u{1F1FB}":["Latvia","\u62C9\u8131\u7EF4\u4E9A","Latvija"],"\u{1F1F2}\u{1F1E6}":["Morocco","\u6469\u6D1B\u54E5"],"\u{1F1F2}\u{1F1E9}":["Moldova","\u6469\u5C14\u591A\u74E6","\u6469\u723E\u591A\u74E6"],"\u{1F1F2}\u{1F1F2}":["Myanmar","\u7F05\u7538","\u7DEC\u7538"],"\u{1F1F3}\u{1F1EC}":["Nigeria","\u5C3C\u65E5\u5229\u4E9A","\u5C3C\u65E5\u5229\u4E9E"],"\u{1F1F2}\u{1F1F0}":["Macedonia","\u9A6C\u5176\u987F","\u99AC\u5176\u9813"],"\u{1F1F2}\u{1F1F3}":["Mongolia","\u8499\u53E4"],"\u{1F1F2}\u{1F1F4}":["Macao","\u6FB3\u95E8","\u6FB3\u9580","CTM"],"\u{1F1F2}\u{1F1F9}":["Malta","\u9A6C\u8033\u4ED6"],"\u{1F1F2}\u{1F1FD}":["Mexico","\u58A8\u897F\u54E5"],"\u{1F1F2}\u{1F1FE}":["Malaysia","\u9A6C\u6765","\u99AC\u4F86","\u5409\u9686\u5761","\u5927\u99AC"],"\u{1F1F3}\u{1F1F1}":["Netherlands","\u8377\u5170","\u8377\u862D","\u5C3C\u5FB7\u862D","\u963F\u59C6\u65AF\u7279\u4E39","Amsterdam"],"\u{1F1F3}\u{1F1F4}":["Norway","\u632A\u5A01"],"\u{1F1F3}\u{1F1F5}":["Nepal","\u5C3C\u6CCA\u5C14"],"\u{1F1F3}\u{1F1FF}":["New Zealand","\u65B0\u897F\u5170","\u65B0\u897F\u862D"],"\u{1F1F4}\u{1F1F2}":["Oman","\u963F\u66FC","\u9A6C\u65AF\u5580\u7279"],"\u{1F1F5}\u{1F1E6}":["Panama","\u5DF4\u62FF\u9A6C"],"\u{1F1F5}\u{1F1EA}":["Peru","\u79D8\u9C81","\u7955\u9B6F"],"\u{1F1F5}\u{1F1ED}":["Philippines","\u83F2\u5F8B\u5BBE","\u83F2\u5F8B\u8CD3"],"\u{1F1F5}\u{1F1F0}":["Pakistan","\u5DF4\u57FA\u65AF\u5766"],"\u{1F1F5}\u{1F1F1}":["Poland","\u6CE2\u5170","\u6CE2\u862D","\u534E\u6C99","Warsaw"],"\u{1F1F5}\u{1F1F7}":["Puerto Rico","\u6CE2\u591A\u9ECE\u5404"],"\u{1F1F5}\u{1F1F9}":["Portugal","\u8461\u8404\u7259"],"\u{1F1F5}\u{1F1EC}":["Papua New Guinea","\u5DF4\u5E03\u4E9A\u65B0\u51E0\u5185\u4E9A"],"\u{1F1F5}\u{1F1FE}":["Paraguay","\u5DF4\u62C9\u572D"],"\u{1F1F6}\u{1F1E6}":["Qatar","\u5361\u5854\u5C14","\u5361\u5854\u723E"],"\u{1F1F7}\u{1F1F4}":["Romania","\u7F57\u9A6C\u5C3C\u4E9A"],"\u{1F1F7}\u{1F1F8}":["Serbia","\u585E\u5C14\u7EF4\u4E9A"],"\u{1F1F7}\u{1F1EA}":["R\xE9union","\u7559\u5C3C\u6C6A","\u6CD5\u5C5E\u7559\u5C3C\u6C6A"],"\u{1F1F7}\u{1F1FA}":["Russia","\u4FC4\u7F57\u65AF","\u4FC4\u56FD","\u4FC4\u7F85\u65AF","\u4F2F\u529B","\u83AB\u65AF\u79D1","\u5723\u5F7C\u5F97\u5821","\u897F\u4F2F\u5229\u4E9A","\u4EAC\u4FC4","\u676D\u4FC4","\u5EE3\u4FC4","\u6EEC\u4FC4","\u5E7F\u4FC4","\u6CAA\u4FC4","Moscow"],"\u{1F1F8}\u{1F1E6}":["Saudi","\u6C99\u7279\u963F\u62C9\u4F2F","\u6C99\u7279","Riyadh","\u5229\u96C5\u5F97"],"\u{1F1F8}\u{1F1EA}":["Sweden","\u745E\u5178","\u65AF\u5FB7\u54E5\u5C14\u6469","Stockholm"],"\u{1F1F8}\u{1F1EC}":["Singapore","\u65B0\u52A0\u5761","\u72EE\u57CE","\u6CAA\u65B0","\u4EAC\u65B0","\u4E2D\u65B0","\u6CC9\u65B0","\u7A57\u65B0","\u6DF1\u65B0","\u676D\u65B0","\u5E7F\u65B0","\u5EE3\u65B0","\u6EEC\u65B0"],"\u{1F1F8}\u{1F1EE}":["Slovenia","\u65AF\u6D1B\u6587\u5C3C\u4E9A"],"\u{1F1F8}\u{1F1F0}":["Slovakia","\u65AF\u6D1B\u4F10\u514B"],"\u{1F1F9}\u{1F1EC}":["Togo","\u591A\u54E5","\u6D1B\u7F8E","Lom\xE9","Lome"],"\u{1F1F9}\u{1F1ED}":["Thailand","\u6CF0\u56FD","\u6CF0\u570B","\u66FC\u8C37"],"\u{1F1F9}\u{1F1F3}":["Tunisia","\u7A81\u5C3C\u65AF"],"\u{1F1F9}\u{1F1F7}":["Turkey","\u571F\u8033\u5176","\u4F0A\u65AF\u5766\u5E03\u5C14","Istanbul"],"\u{1F1F9}\u{1F1FC}":["Taiwan","\u53F0\u6E7E","\u81FA\u7063","\u53F0\u7063","\u4E2D\u83EF\u6C11\u570B","\u4E2D\u534E\u6C11\u56FD","\u53F0\u5317","\u53F0\u4E2D","\u65B0\u5317","\u5F70\u5316","\u53F0","\u81FA","Taipei","Tai Wan"],"\u{1F1FA}\u{1F1E6}":["Ukraine","\u4E4C\u514B\u5170","\u70CF\u514B\u862D"],"\u{1F1FA}\u{1F1F8}":["United States","\u7F8E\u56FD","America","\u7F8E","\u4EAC\u7F8E","\u6CE2\u7279\u5170","\u8FBE\u62C9\u65AF","\u4FC4\u52D2\u5188","Oregon","\u51E4\u51F0\u57CE","\u8D39\u5229\u8499","\u7845\u8C37","\u77FD\u8C37","\u62C9\u65AF\u7EF4\u52A0\u65AF","\u6D1B\u6749\u77F6","\u5723\u4F55\u585E","\u5723\u514B\u62C9\u62C9","\u897F\u96C5\u56FE","\u829D\u52A0\u54E5","\u6CAA\u7F8E","\u54E5\u4F26\u5E03","\u7EBD\u7EA6","New York","Los Angeles","San Jose","Sillicon Valley","Michigan","\u4FC4\u4EA5\u4FC4","Ohio","\u9A6C\u7EB3\u8428\u65AF","Manassas","\u5F17\u5409\u5C3C\u4E9A","Virginia"],"\u{1F1FA}\u{1F1FE}":["Uruguay","\u4E4C\u62C9\u572D"],"\u{1F1FB}\u{1F1E6}":["Vatican","Vatican City","Holy See","\u68B5\u8482\u5188","\u68B5\u8482\u5CA1"],"\u{1F1FB}\u{1F1EA}":["Venezuela","\u59D4\u5185\u745E\u62C9"],"\u{1F1FB}\u{1F1F3}":["Vietnam","\u8D8A\u5357","\u80E1\u5FD7\u660E"],"\u{1F1FF}\u{1F1E6}":["South Africa","\u5357\u975E"],"\u{1F1E8}\u{1F1F3}":["China","\u4E2D\u56FD","\u4E2D\u570B","\u56DE\u56FD","\u56DE\u570B","\u56FD\u5185","\u570B\u5167","\u534E\u4E1C","\u534E\u897F","\u534E\u5357","\u534E\u5317","\u534E\u4E2D","\u6C5F\u82CF","\u5317\u4EAC","\u4E0A\u6D77","\u5E7F\u5DDE","\u6DF1\u5733","\u676D\u5DDE","\u5F90\u5DDE","\u9752\u5C9B","\u5B81\u6CE2","\u9547\u6C5F"]},n=t.match(/[\uD83C][\uDDE6-\uDDFF][\uD83C][\uDDE6-\uDDFF]/)?.[0]||"\u{1F3F4}\u200D\u2620\uFE0F";for(let u of Object.keys(e))if(e[u].some(s=>RegExp(`${s}`,"i").test(t)))return//.test(t)&&["\u{1F1F2}\u{1F1F3}"].includes(u)?n="\u{1F1E8}\u{1F1F3}":n=u;for(let u of Object.keys(ym))if(ym[u].some(s=>RegExp(`(^|[^a-zA-Z])${s}([^a-zA-Z]|$)`).test(t))&&!(u=="\u{1F1E8}\u{1F1F3}"&&RegExp("(^|[^a-zA-Z])CN2([^a-zA-Z]|$)").test(t)))return n=u;return n}function k0(t){return ym[El(t)]?.[0]}function Gf(t){return t.replace(/[\uD83C][\uDDE6-\uDDFF][\uD83C][\uDDE6-\uDDFF]||/g,"").trim()}var N0=class{constructor({country,asn}={}){if(R.env.isNode){let Reader=require("@maxmind/geoip2-node").Reader,fs=require("fs"),countryFile=country||eval("process.env.SUB_STORE_MMDB_COUNTRY_PATH"),asnFile=asn||eval("process.env.SUB_STORE_MMDB_ASN_PATH");if(countryFile&&(this.countryReader=Reader.openBuffer(fs.readFileSync(countryFile))),asnFile){if(!fs.existsSync(asnFile))throw new Error("GeoLite2 ASN MMDB does not exist");this.asnReader=Reader.openBuffer(fs.readFileSync(asnFile))}}}geoip(t){return this.countryReader?.country(t)?.country?.isoCode}ipaso(t){return this.asnReader?.asn(t)?.autonomousSystemOrganization}ipasn(t){return this.asnReader?.asn(t)?.autonomousSystemNumber}},j0=Yr(rC()),Pm=Yr(l0());async function bl({url:t,domain:e,type:n="A",timeout:u,edns:s}){let p=j0.default.encode({type:"query",id:0,flags:j0.default.RECURSION_DESIRED,questions:[{type:n,name:e}],additionals:[{type:"OPT",name:".",udpPayloadSize:4096,flags:0,options:[{code:"CLIENT_SUBNET",ip:s,sourcePrefixLength:Wr(s)?24:56,scopePrefixLength:0}]}]}),y=Pm.Buffer.from(p).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),g=await R.http.get({url:`${t}?dns=${encodeURIComponent(y)}`,headers:{Accept:"application/dns-message"},"binary-mode":!0,encoding:null,timeout:u});return j0.default.decode(Pm.Buffer.from(R.env.isQX?g.bodyBytes:g.body))}var xm=Yr(Ff()),{isNode:nC,isQX:bN,isLoon:yN,isSurge:_N,isStash:CN,isShadowRocket:DN,isLanceX:SN,isEgern:FN,isGUIforCores:IN}=hn(),ya="Node";nC&&(ya="Node"),bN&&(ya="QX"),yN&&(ya="Loon"),_N&&(ya="Surge"),CN&&(ya="Stash"),DN&&(ya="Shadowrocket"),FN&&(ya="Egern"),SN&&(ya="LanceX"),IN&&(ya="GUI.for.Cores");var ic={},BN={};try{if(typeof $environment<"u"&&(ic.env=$environment),typeof $loon<"u"&&(ic.loon=$loon),typeof $script<"u"&&(ic.script=$script),typeof $Plugin<"u"&&(ic.plugin=$Plugin),nC){ic.node={version:eval("process.version"),argv:eval("process.argv"),filename:eval("__filename"),dirname:eval("__dirname"),env:{}};let env=eval("process.env");for(let t in env)/^SUB_STORE_/.test(t)&&(ic.node.env[t]=env[t])}}catch(t){}var to={backend:ya,version:jd,feature:BN,meta:ic};function $N(t){return t&&typeof t=="object"&&!Array.isArray(t)}function Wf(t){return t.startsWith("<")&&t.endsWith(">")?t.slice(1,-1):t}function sC(t,e){let n=typeof e=="string"?JSON.parse(e):e;for(let u in n)if($N(n[u]))if(u.endsWith("!")){let s=Wf(u.slice(0,-1));t[s]=n[u]}else{let s=Wf(u);t[s]||Object.assign(t,{[s]:{}}),sC(t[s],n[s])}else if(Array.isArray(n[u]))if(u.startsWith("+")){let s=Wf(u.slice(1));t[s]||Object.assign(t,{[s]:[]}),t[s]=[...n[u],...t[s]]}else if(u.endsWith("+")){let s=Wf(u.slice(0,-1));t[s]||Object.assign(t,{[s]:[]}),t[s]=[...t[s],...n[u]]}else{let s=Wf(u);Object.assign(t,{[s]:n[u]})}else Object.assign(t,{[u]:n[u]});return t}function RN({rule:t}){return{name:"Conditional Filter",func:e=>e.map(n=>H0(t,n))}}function H0(t,e){if(!t.operator)switch(t.proposition){case"IN":return t.value.indexOf(e[t.attr])!==-1;case"CONTAINS":return typeof e[t.attr]!="string"?!1:e[t.attr].indexOf(t.value)!==-1;case"EQUALS":return e[t.attr]===t.value;case"EXISTS":return e[t.attr]!==null||typeof e[t.attr]<"u";default:throw new Error(`Unknown proposition: ${t.proposition}`)}switch(t.operator){case"AND":return t.child.every(n=>H0(n,e));case"OR":return t.child.some(n=>H0(n,e));case"NOT":return!H0(t.child,e);default:throw new Error(`Unknown operator: ${t.operator}`)}}function PN(t){return{name:"Quick Setting Operator",func:n=>{if(e(t.useless)){let u=cC().func(n);n=n.filter((s,p)=>u[p]&&s.port>0&&s.port<=65535)}return n.map(u=>(u.udp=e(t.udp,u.udp),u.tfo=e(t.tfo,u.tfo),u["fast-open"]=e(t.tfo,u["fast-open"]),u["skip-cert-verify"]=e(t.scert,u["skip-cert-verify"]),u.type==="vmess"&&(u.aead=e(t["vmess aead"],u.aead)),u))}};function e(n,u){switch(n){case"ENABLED":return!0;case"DISABLED":return!1;default:return u}}}function ON({mode:t,tw:e}){return{name:"Flag Operator",func:n=>n.map(u=>{if(t==="remove")u.name=Gf(u.name);else{let s=El(u.name);u.name=Gf(u.name),u.name=s+" "+u.name,e=="ws"?u.name=u.name.replace(//g,"\u{1F1FC}\u{1F1F8}"):e=="tw"||(u.name=u.name.replace(//g,"\u{1F1E8}\u{1F1F3}"))}return u})}}function xN(t){let{action:e,template:n,link:u,position:s}={action:"rename",template:"0 1 2 3 4 5 6 7 8 9",link:"-",position:"back",...t};return{name:"Handle Duplicate Operator",func:p=>{if(e==="delete"){let y={};return p.filter(g=>y[g.name]?!1:(y[g.name]=!0,!0))}else if(e==="rename"){let y=n.split(" "),g={},E=0;p.forEach(D=>{typeof g[D.name]>"u"?g[D.name]=1:g[D.name]++,E=Math.max(g[D.name].toString().length,E)});let m={};return p.map(D=>{if(g[D.name]>1){typeof m[D.name]>"u"&&(m[D.name]=1);let a="",H=m[D.name]++,W=0;for(;H>0;)a=y[H%10]+a,H=parseInt(H/10),W++;for(;W++<E;)a=y[0]+a;s==="front"?D.name=a+u+D.name:s==="back"&&(D.name=D.name+u+a)}return D})}}}}function TN(t="asc"){return{name:"Sort Operator",func:e=>{switch(t){case"asc":case"desc":return e.sort((n,u)=>{let s=n.name>u.name?1:-1;return s*=t==="desc"?-1:1,s});case"random":return zN(e);default:throw new Error("Unknown sort option: "+t)}}}}function NN(t){let e=t.order||"asc",n=t.expressions;return Array.isArray(t)&&(n=t),Array.isArray(n)||(n=[]),{name:"Regex Sort Operator",func:u=>(n=n.map(s=>Tm(s)),u.sort((s,p)=>{let y=iC(n,s.name),g=iC(n,p.name);return y&&!g?-1:g&&!y?1:y&&g?y<g?-1:1:e==="original"?0:e==="desc"?s.name<p.name?1:-1:s.name<p.name?-1:1}))}}function iC(t,e){let n=null;for(let u=0;u<t.length;u++)if(t[u].test(e)){n=u+1;break}return n}function aC(t){return{name:"Regex Rename Operator",func:e=>e.map(n=>{for(let{expr:u,now:s}of t)n.name=n.name.replace(Tm(u,"g"),s).trim();return n})}}function kN(t){let e=t.map(n=>({expr:n,now:""}));return{name:"Regex Delete Operator",func:aC(e).func}}function LN(t,e,n,u,s,p){return p.source=u,p.env=to,{name:"Script Operator",func:async y=>{let g=y;if(g?.$file?.type==="mihomoProfile")try{let E=pa.safeLoad(t),m;if(g?.$content)try{m=pa.safeLoad(g?.$content)}catch(D){R.error(D.message??D)}if(typeof E!="object")throw new Error("patch is not an object");return g.$content=xt.yaml.safeDump(sC(m||(g?.$file?.sourceType==="none"?{}:{proxies:await vn({type:g?.$file?.sourceType||"collection",name:g?.$file?.sourceName,platform:"mihomo",produceType:"internal",produceOpts:{"delete-underscore-fields":!0}})}),E)),g}catch{}return await(async function(){g=M0("operator",t,n,s)(y,e,p)})(),g},nodeFunc:async y=>{let g=y;return await(async function(){g=M0("operator",`async function operator(input = [], targetPlatform, context) {
                        if (input && (input.$files || input.$content)) {
                            let { $content, $files, $options, $file } = input
                            if($file.type === 'mihomoProfile') {
                                ${t}
                                if(typeof main === 'function') {
                                    let config;
                                    if ($content) {
                                        try {
                                            config = ProxyUtils.yaml.safeLoad($content);
                                        } catch (e) {
                                            console.log(e.message ?? e);
                                        }
                                    }
                                    $content = ProxyUtils.yaml.safeDump(await main(config || ($file.sourceType === 'none' ? {} : {
                                        proxies: await produceArtifact({
                                            type: $file.sourceType || 'collection',
                                            name: $file.sourceName,
                                            platform: 'mihomo',
                                            produceType: 'internal',
                                            produceOpts: {
                                                'delete-underscore-fields': true
                                            }
                                        }),
                                    })))
                                }
                            } else {
                                ${t}
                            }
                            return { $content, $files, $options, $file }
                        } else {
                            let proxies = input
                            let list = []
                            for await (let $server of proxies) {
                                ${t}
                                list.push($server)
                            }
                            return list
                        }
                      }`,n,s)(y,e,p)})(),g}}}function UN(t){let e,n;try{let u=t.split(":");n=parseInt(u[2],16);let s=parseInt(u[3],16),p=parseInt(u[4],16),y=s>>8,g=s&255,E=p>>8,m=p&255;if(e=`${y}.${g}.${E}.${m}`,n<=0||n>65535)throw new Error(`Invalid port number: ${n}`);if(!Wr(e))throw new Error(`Invalid IP address: ${e}`)}catch(u){R.error(`IP4P \u89E3\u6790\u5931\u8D25: ${u}`)}return{server:e,port:n}}var uC={Custom:async function(t,e,n,u,s,p){let y=Wi(`CUSTOM:${p}:${t}:${e}`),g=Xr.get(y);if(!n&&g)return g;let E=e==="IPv6"?"AAAA":"A",m=await bl({url:p,domain:t,type:E,timeout:u,edns:s}),{answers:D}=m;if(!Array.isArray(D)||D.length===0)throw new Error("No answers");let a=D.filter(H=>H?.type===E).map(H=>H?.data).filter(H=>H);if(a.length===0)throw new Error("No answers");return Xr.set(y,a),a},Google:async function(t,e,n,u,s){let p=Wi(`GOOGLE:${t}:${e}`),y=Xr.get(p);if(!n&&y)return y;let g=e==="IPv6"?"AAAA":"A",E=await bl({url:"https://8.8.4.4/dns-query",domain:t,type:g,timeout:u,edns:s}),{answers:m}=E;if(!Array.isArray(m)||m.length===0)throw new Error("No answers");let D=m.filter(a=>a?.type===g).map(a=>a?.data).filter(a=>a);if(D.length===0)throw new Error("No answers");return Xr.set(p,D),D},"IP-API":async function(t,e,n,u){if(["IPv6"].includes(e))throw new Error(`\u57DF\u540D\u89E3\u6790\u670D\u52A1\u63D0\u4F9B\u65B9 IP-API \u4E0D\u652F\u6301 ${e}`);let s=Wi(`IP-API:${t}`),p=Xr.get(s);if(!n&&p)return p;let y=await R.http.get({url:`http://ip-api.com/json/${encodeURIComponent(t)}?lang=zh-CN`,timeout:u}),g=JSON.parse(y.body);if(g.status!=="success")throw new Error(`Status is ${g.status}`);if(!g.query||g.query===0)throw new Error("No answers");let E=[g.query];if(E.length===0)throw new Error("No answers");return Xr.set(s,E),E},Cloudflare:async function(t,e,n,u,s){let p=Wi(`CLOUDFLARE:${t}:${e}`),y=Xr.get(p);if(!n&&y)return y;let g=e==="IPv6"?"AAAA":"A",E=await bl({url:"https://1.0.0.1/dns-query",domain:t,type:g,timeout:u,edns:s}),{answers:m}=E;if(!Array.isArray(m)||m.length===0)throw new Error("No answers");let D=m.filter(a=>a?.type===g).map(a=>a?.data).filter(a=>a);if(D.length===0)throw new Error("No answers");return Xr.set(p,D),D},Ali:async function(t,e,n,u,s){let p=Wi(`ALI:${t}:${e}`),y=Xr.get(p);if(!n&&y)return y;let g=await R.http.get({url:`http://223.6.6.6/resolve?edns_client_subnet=${s}/${Wr(s)?24:56}&name=${encodeURIComponent(t)}&type=${e==="IPv6"?"AAAA":"A"}&short=1`,headers:{accept:"application/dns-json"},timeout:u}),E=JSON.parse(g.body);if(!Array.isArray(E)||E.length===0)throw new Error("No answers");let m=E;if(m.length===0)throw new Error("No answers");return Xr.set(p,m),m},Tencent:async function(t,e,n,u,s){let p=Wi(`TENCENT:${t}:${e}`),y=Xr.get(p);if(!n&&y)return y;let g=(await R.http.get({url:`http://119.28.28.28/d?ip=${s}&type=${e==="IPv6"?"AAAA":"A"}&dn=${encodeURIComponent(t)}`,headers:{accept:"application/dns-json"},timeout:u})).body.split(";").map(m=>m.split(",")[0]);if(g.length===0||String(g)==="0")throw new Error("No answers");let E=g;if(E.length===0)throw new Error("No answers");return Xr.set(p,E),E}};function oC({provider:t,type:e,filter:n,cache:u,url:s,timeout:p,edns:y}){if(["IPv6","IP4P"].includes(e)&&["IP-API"].includes(t))throw new Error(`\u57DF\u540D\u89E3\u6790\u670D\u52A1\u63D0\u4F9B\u65B9 ${t} \u4E0D\u652F\u6301 ${e}`);let{defaultTimeout:g}=R.read(Kt),E=p||g||8e3,m=["IPv6","IP4P"].includes(e)?"IPv6":"IPv4",D=uC[t];if(!D)throw new Error(`\u627E\u4E0D\u5230\u57DF\u540D\u89E3\u6790\u670D\u52A1\u63D0\u4F9B\u65B9: ${t}`);let a=y||"223.6.6.6";if(!sc(a))throw new Error("\u57DF\u540D\u89E3\u6790 EDNS \u5E94\u4E3A IP");return R.info(`Domain Resolver: [${e}] ${t} ${a||""} ${s||""}`),{name:"Resolve Domain Operator",func:async H=>{H.forEach((J,N)=>{!J["_no-resolve"]&&J["no-resolve"]&&(H[N]["_no-resolve"]=J["no-resolve"])});let W={},w=15,U=[...new Set(H.filter(J=>!sc(J.server)&&!J["_no-resolve"]).map(J=>J.server))],tt=Math.ceil(U.length/w);for(let J=0;J<tt;J++){let N=[];for(let Q of U.splice(0,w))N.push(D(Q,m,u==="disabled",E,a,s).then(it=>{W[Q]=it,R.info(`Successfully resolved domain: ${Q} \u279F ${it}`)}).catch(it=>{R.error(`Failed to resolve domain: ${Q} with resolver [${t}]: ${it}`)}));await Promise.all(N)}return H.forEach(J=>{if(!J["_no-resolve"])if(W[J.server]){J._resolved_ips=W[J.server];let N=Array.isArray(W[J.server])?W[J.server][Math.floor(Math.random()*W[J.server].length)]:W[J.server];if(m==="IPv6"&&Mr(N)){try{N=new n0.Address6(N).correctForm()}catch(Q){R.error(`Failed to parse IPv6 address: ${N}: ${Q}`)}if(/^2001::[^:]+:[^:]+:[^:]+$/.test(N)){J._IP4P=N;let{server:Q,port:it}=UN(N);Q&&it?(J._domain=J.server,J.server=Q,J.port=it,J.resolved=!0,J._IPv4=J.server,sc(J._IP)||(J._IP=J.server)):J.resolved||(J.resolved=!1)}else J._domain=J.server,J.server=N,J.resolved=!0,J[`_${m}`]=J.server,sc(J._IP)||(J._IP=J.server)}else J._domain=J.server,J.server=N,J.resolved=!0,J[`_${m}`]=J.server,sc(J._IP)||(J._IP=J.server)}else J.resolved||(J.resolved=!1)}),H.filter(J=>n==="removeFailed"?sc(J.server)||J["_no-resolve"]||J.resolved:n==="IPOnly"?sc(J.server):n==="IPv4Only"?Wr(J.server):n==="IPv6Only"?Mr(J.server):!0)}}}function sc(t){return Wr(t)||Mr(t)}oC.resolver=uC;function Om(t){var e=/^[\x00-\x7F]+$/;return e.test(t)}function cC(){return{name:"Useless Filter",func:t=>t.map(e=>{if(e.cipher&&!Om(e.cipher)||e.password&&!Om(e.password))return!1;if(e.network){let n=e[`${e.network}-opts`]?.headers?.Host||e[`${e.network}-opts`]?.headers?.host;if(n=Array.isArray(n)?n:[n],n.some(u=>u&&!Om(u)))return!1}return!/|||||Bandwidth|expire/.test(e.name)})}}function jN(t){let e=t?.value||t;Array.isArray(e)||(e=[]);let n=t?.keep??!0,u={HK:"\u{1F1ED}\u{1F1F0}",TW:"\u{1F1F9}\u{1F1FC}",US:"\u{1F1FA}\u{1F1F8}",SG:"\u{1F1F8}\u{1F1EC}",JP:"\u{1F1EF}\u{1F1F5}",UK:"\u{1F1EC}\u{1F1E7}",DE:"\u{1F1E9}\u{1F1EA}",KR:"\u{1F1F0}\u{1F1F7}"};return{name:"Region Filter",func:s=>s.map(p=>{let y=El(p.name),g=e.some(E=>u[E]===y);return n?g:!g})}}function HN({regex:t=[],keep:e=!0}){return{name:"Regex Filter",func:n=>n.map(u=>{let s=t.some(p=>Tm(p).test(u.name));return e?s:!s})}}function Tm(t,...e){return e=e.join(""),t.startsWith("(?i)")?(t=t.substring(4),new RegExp(t,"i"+e)):new RegExp(t,e)}function MN(t){let e=t?.value||t;Array.isArray(e)||(e=[]);let n=t?.keep??!0;return{name:"Type Filter",func:u=>u.map(s=>{let p=e.some(y=>s.type===y);return n?p:!p})}}function qN(t,e,n,u,s,p){return p.source=u,p.env=to,{name:"Script Filter",func:async y=>{let g=T0(y.length,!0);return await(async function(){g=M0("filter",t,n,s)(y,e,p)})(),g},nodeFunc:async y=>{let g=T0(y.length,!0);return await(async function(){g=M0("filter",`async function filter(input = [], targetPlatform, context) {
                        let proxies = input
                        let list = []
                        const fn = async ($server) => {
                            ${t}
                        }
                        for await (let $server of proxies) {
                            list.push(await fn($server))
                        }
                        return list
                      }`,n,s)(y,e,p)})(),g}}}var q0={"Useless Filter":cC,"Region Filter":jN,"Regex Filter":HN,"Type Filter":MN,"Script Filter":qN,"Conditional Filter":RN,"Quick Setting Operator":PN,"Flag Operator":ON,"Sort Operator":TN,"Regex Sort Operator":NN,"Regex Rename Operator":aC,"Regex Delete Operator":kN,"Script Operator":LN,"Handle Duplicate Operator":xN,"Resolve Domain Operator":oC};async function VN(t,e){let n=T0(e.length,!0);try{n=await t.func(e)}catch(u){let s="",p=`${u.message??u}`;p.includes("$server is not defined")?s="":(R.error(`Cannot apply filter ${t.name}(function filter)! Reason: ${u}`),s=`\u6267\u884C function filter \u5931\u8D25 ${p}; `);try{n=await t.nodeFunc(e)}catch(y){R.error(`Cannot apply filter ${t.name}(shortcut script)! Reason: ${y}`);let g="",E=`${y.message??y}`;throw s&&E===p?(g="",s=`\u6267\u884C\u5931\u8D25 ${p}`):g=`\u6267\u884C\u5FEB\u6377\u8FC7\u6EE4\u811A\u672C \u5931\u8D25 ${E}`,new Error(`\u811A\u672C\u8FC7\u6EE4 ${s}${g}`)}}return e.filter((u,s)=>n[s])}async function KN(t,e){let n=GN(e);try{let u=await t.func(n);u&&(n=u)}catch(u){let s="",p=`${u.message??u}`;p.includes("$server is not defined")||p.includes("$content is not defined")||p.includes("$files is not defined")||n?.$files||n?.$content?s="":(R.error(`Cannot apply operator ${t.name}(function operator)! Reason: ${u}`),s=`\u6267\u884C function operator \u5931\u8D25 ${p}; `);try{let y=await t.nodeFunc(n);y&&(n=y)}catch(y){R.error(`Cannot apply operator ${t.name}(shortcut script)! Reason: ${y}`);let g="",E=`${y.message??y}`;throw s&&E===p?(g="",s=`\u6267\u884C\u5931\u8D25 ${p}`):g=`\u6267\u884C\u5FEB\u6377\u811A\u672C \u5931\u8D25 ${E}`,new Error(`\u811A\u672C\u64CD\u4F5C ${s}${g}`)}}return n}async function lC(t,e){if(t.name.indexOf("Filter")!==-1)return VN(t,e);if(t.name.indexOf("Operator")!==-1)return KN(t,e)}function zN(t){let e=t.length,n,u;for(;e!==0;)u=Math.floor(Math.random()*e),e-=1,n=t[e],t[e]=t[u],t[u]=n;return t}function GN(t){return JSON.parse(JSON.stringify(t))}function M0(name,script,$arguments,$options){let flowUtils={getFlowField:Zc,getFlowHeaders:zn,parseFlowHeaders:Ko,flowTransfer:Rf,validCheck:s0,getRmainingDays:a0,normalizeFlowHeader:Yu};return R.env.isLoon?new Function("$arguments","$options","$substore","lodash","$persistentStore","$httpClient","$notification","ProxyUtils","yaml","Buffer","b64d","b64e","scriptResourceCache","flowUtils","produceArtifact","require",`${script}
 return ${name}`)($arguments,$options,R,xm.default,$persistentStore,$httpClient,$notification,xt,xt.yaml,xt.Buffer,xt.Base64.decode,xt.Base64.encode,zf,flowUtils,vn,eval('typeof require !== "undefined"')?ko:void 0):new Function("$arguments","$options","$substore","lodash","ProxyUtils","yaml","Buffer","b64d","b64e","scriptResourceCache","flowUtils","produceArtifact","require",`${script}
 return ${name}`)($arguments,$options,R,xm.default,xt,xt.yaml,xt.Buffer,xt.Base64.decode,xt.Base64.encode,zf,flowUtils,vn,eval('typeof require !== "undefined"')?ko:void 0)}function YN(){return{name:"HTML",test:t=>/^<!DOCTYPE html>/.test(t),parse:()=>""}}function WN(){let t="Base64 Pre-processor",e=["dm1lc3M","c3NyOi8v","c29ja3M6Ly","dHJvamFu","c3M6Ly","c3NkOi8v","c2hhZG93","aHR0c","dmxlc3M=","aHlzdGVyaWEy","aHkyOi8v","d2lyZWd1YXJkOi8v","d2c6Ly8=","dHVpYzovLw=="];return{name:t,test:function(n){return!/^\w+:\/\/\w+/im.test(n)&&e.some(u=>n.indexOf(u)!==-1)},parse:function(n){let u=ft.decode(n);return/^\w+(:\/\/|\s*?=\s*?)\w+/m.test(u)?u:(R.error("Base64 Pre-processor error: decoded line does not start with protocol"),n)}}}function XN(){return{name:"Fallback Base64 Pre-processor",test:function(t){return!0},parse:function(t){let e=ft.decode(t);return/^\w+(:\/\/|\s*?=\s*?)\w+/m.test(e)?e:(R.error("Fallback Base64 Pre-processor error: decoded line does not start with protocol"),t)}}}function JN(){return{name:"Clash Pre-processor",test:function(t){if(!/proxies/.test(t))return!1;let e=Vf(t);return e.proxies&&Array.isArray(e.proxies)},parse:function(t,e){let n=t.replace(/short-id:([ \t]*[^#\n,}]*)/g,(p,y)=>{let g=y.trim();return!g||g===""?'short-id: ""':/^(['"]).*\1$/.test(g)?`short-id: ${g}`:["null"].includes(g)?`short-id: ${g}`:`short-id: "${g}"`}),{proxies:u,"global-client-fingerprint":s}=Vf(n);return(e?`proxies:
`:"")+u.map(p=>(s&&!p["client-fingerprint"]&&(p["client-fingerprint"]=s),`${e?"  - ":""}${JSON.stringify(p)}
`)).join("")}}}function ZN(){return{name:"SSD Pre-processor",test:function(t){return t.indexOf("ssd://")===0},parse:function(t){let e=[],n=JSON.parse(ft.decode(t.split("ssd://")[1])),u=n.port,s=n.encryption,p=n.password,y=n.servers;for(let g=0;g<y.length;g++){let E=y[g];s=E.encryption?E.encryption:s,p=E.password?E.password:p;let m=ft.encode(s+":"+p),D=E.server;u=E.port?E.port:u;let a=E.remarks?E.remarks:g,H=E.plugin_options?"/?plugin="+encodeURIComponent(E.plugin+";"+E.plugin_options):"";e[g]="ss://"+m+"@"+D+":"+u+H+"#"+a}return e.join(`
`)}}}function QN(){return{name:"Full Config Preprocessor",test:function(t){return/^(\[server_local\]|\[Proxy\])/gm.test(t)},parse:function(t){return t.match(/^\[server_local|Proxy\]([\s\S]+?)^\[.+?\](\r?\n|$)/im)?.[1]||t}}}var V0=[YN(),JN(),WN(),ZN(),QN(),XN()],fC=Yr(Ff()),ht=class{constructor(t){this.proxy=t,this.output=[]}append(t){if(typeof t>"u")throw new Error("required field is missing");this.output.push(t)}appendIfPresent(t,e){ue(this.proxy,e)&&this.append(t)}toString(){return this.output.join("")}};function ue(t,e){let n=fC.default.get(t,e);return typeof n<"u"&&n!==null}var hC="Surge",es={dual:"dual",ipv4:"v4-only",ipv6:"v6-only","ipv4-prefer":"prefer-v4","ipv6-prefer":"prefer-v6"};function yl(){return{produce:(t,e,n={})=>{switch(t.name=t.name.replace(/=|,/g,""),t.ports&&(t.ports=String(t.ports)),t.type){case"ss":return ek(t);case"trojan":return tk(t);case"vmess":return nk(t,n["include-unsupported-proxy"]);case"http":return sk(t);case"direct":return ak(t);case"socks5":return uk(t);case"snell":return ok(t);case"tuic":return ck(t);case"wireguard-surge":return fk(t);case"hysteria2":return hk(t,n["include-unsupported-proxy"]);case"ssh":return ik(t)}if(n["include-unsupported-proxy"]&&t.type==="wireguard")return lk(t);if(n["include-unsupported-proxy"]&&t.type==="anytls"){if(t.network&&(!["tcp"].includes(t.network)||["tcp"].includes(t.network)&&t["reality-opts"]))throw new Error(`Platform ${hC} does not support proxy type ${t.type} with network or reality`);return rk(t)}throw new Error(`Platform ${hC} does not support proxy type: ${t.type}`)}}}function ek(t){let e=new ht(t);if(e.append(`${t.name}=${t.type},${t.server},${t.port}`),t.cipher||(t.cipher="none"),!["aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","rc4","rc4-md5","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","cast5-cfb","des-cfb","idea-cfb","rc2-cfb","seed-cfb","salsa20","chacha20","chacha20-ietf","none","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(t.cipher))throw new Error(`cipher ${t.cipher} is not supported`);e.append(`,encrypt-method=${t.cipher}`),e.appendIfPresent(`,password="${t.password}"`,"password");let n=es[t["ip-version"]]||t["ip-version"];if(e.appendIfPresent(`,ip-version=${n}`,"ip-version"),e.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),ue(t,"plugin")){if(t.plugin==="obfs")e.append(`,obfs=${t["plugin-opts"].mode}`),e.appendIfPresent(`,obfs-host=${t["plugin-opts"].host}`,"plugin-opts.host"),e.appendIfPresent(`,obfs-uri=${t["plugin-opts"].path}`,"plugin-opts.path");else if(!["shadow-tls"].includes(t.plugin))throw new Error(`plugin ${t.plugin} is not supported`)}if(e.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),e.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),e.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),e.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),e.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),e.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),e.appendIfPresent(`,tos=${t.tos}`,"tos"),e.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),e.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),e.appendIfPresent(`,interface=${t.interface}`,"interface"),ue(t,"shadow-tls-password"))e.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),e.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),e.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni"),e.appendIfPresent(`,udp-port=${t["udp-port"]}`,"udp-port");else if(["shadow-tls"].includes(t.plugin)&&t["plugin-opts"]){let u=t["plugin-opts"].password,s=t["plugin-opts"].host,p=t["plugin-opts"].version;if(u){if(e.append(`,shadow-tls-password=${u}`),s&&e.append(`,shadow-tls-sni=${s}`),p){if(p<2)throw new Error(`shadow-tls version ${p} is not supported`);e.append(`,shadow-tls-version=${p}`)}e.appendIfPresent(`,udp-port=${t["udp-port"]}`,"udp-port")}}return e.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),e.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),e.toString()}function tk(t){let e=new ht(t);e.append(`${t.name}=${t.type},${t.server},${t.port}`),e.appendIfPresent(`,password="${t.password}"`,"password");let n=es[t["ip-version"]]||t["ip-version"];return e.appendIfPresent(`,ip-version=${n}`,"ip-version"),e.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),dC(e,t),e.appendIfPresent(`,tls=${t.tls}`,"tls"),e.appendIfPresent(`,server-cert-fingerprint-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),e.appendIfPresent(`,sni=${t.sni}`,"sni"),e.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),e.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),e.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),e.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),e.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),e.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),e.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),e.appendIfPresent(`,tos=${t.tos}`,"tos"),e.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),e.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),e.appendIfPresent(`,interface=${t.interface}`,"interface"),ue(t,"shadow-tls-password")&&(e.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),e.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),e.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),e.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),e.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),e.toString()}function rk(t){let e=new ht(t);e.append(`${t.name}=${t.type},${t.server},${t.port}`),e.appendIfPresent(`,password="${t.password}"`,"password");let n=es[t["ip-version"]]||t["ip-version"];return e.appendIfPresent(`,ip-version=${n}`,"ip-version"),e.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),e.appendIfPresent(`,server-cert-fingerprint-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),e.appendIfPresent(`,sni=${t.sni}`,"sni"),e.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),e.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),e.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),e.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),e.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),e.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),e.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),e.appendIfPresent(`,tos=${t.tos}`,"tos"),e.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),e.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),e.appendIfPresent(`,interface=${t.interface}`,"interface"),e.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),e.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),e.appendIfPresent(`,reuse=${t.reuse}`,"reuse"),e.toString()}function nk(t,e){let n=new ht(t);n.append(`${t.name}=${t.type},${t.server},${t.port}`),n.appendIfPresent(`,username=${t.uuid}`,"uuid");let u=es[t["ip-version"]]||t["ip-version"];return n.appendIfPresent(`,ip-version=${u}`,"ip-version"),n.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),dC(n,t,e),ue(t,"aead")?n.append(`,vmess-aead=${t.aead}`):n.append(`,vmess-aead=${t.alterId===0}`),n.appendIfPresent(`,server-cert-fingerprint-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),n.appendIfPresent(`,tls=${t.tls}`,"tls"),n.appendIfPresent(`,sni=${t.sni}`,"sni"),n.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),n.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),n.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),n.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),n.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),n.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),n.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),n.appendIfPresent(`,tos=${t.tos}`,"tos"),n.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),n.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),n.appendIfPresent(`,interface=${t.interface}`,"interface"),ue(t,"shadow-tls-password")&&(n.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),n.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),n.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),n.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),n.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),n.toString()}function ik(t){let e=new ht(t);e.append(`${t.name}=ssh,${t.server},${t.port}`),e.appendIfPresent(`,username="${t.username}"`,"username"),e.appendIfPresent(`,password="${t.password}"`,"password"),e.appendIfPresent(`,private-key=${t["keystore-private-key"]}`,"keystore-private-key"),e.appendIfPresent(`,idle-timeout=${t["idle-timeout"]}`,"idle-timeout"),e.appendIfPresent(`,server-fingerprint="${t["server-fingerprint"]}"`,"server-fingerprint");let n=es[t["ip-version"]]||t["ip-version"];return e.appendIfPresent(`,ip-version=${n}`,"ip-version"),e.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),e.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),e.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),e.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),e.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),e.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),e.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),e.appendIfPresent(`,tos=${t.tos}`,"tos"),e.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),e.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),e.appendIfPresent(`,interface=${t.interface}`,"interface"),e.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),e.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),e.toString()}function sk(t){if(t.headers&&Object.keys(t.headers).length>0)throw new Error("headers is unsupported");let e=new ht(t),n=t.tls?"https":"http";e.append(`${t.name}=${n},${t.server},${t.port}`),e.appendIfPresent(`,username="${t.username}"`,"username"),e.appendIfPresent(`,password="${t.password}"`,"password");let u=es[t["ip-version"]]||t["ip-version"];return e.appendIfPresent(`,ip-version=${u}`,"ip-version"),e.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),e.appendIfPresent(`,server-cert-fingerprint-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),e.appendIfPresent(`,sni=${t.sni}`,"sni"),e.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),e.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),e.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),e.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),e.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),e.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),e.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),e.appendIfPresent(`,tos=${t.tos}`,"tos"),e.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),e.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),e.appendIfPresent(`,interface=${t.interface}`,"interface"),ue(t,"shadow-tls-password")&&(e.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),e.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),e.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),e.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),e.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),e.toString()}function ak(t){let e=new ht(t);e.append(`${t.name}=direct`);let n=es[t["ip-version"]]||t["ip-version"];return e.appendIfPresent(`,ip-version=${n}`,"ip-version"),e.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),e.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),e.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),e.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),e.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),e.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),e.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),e.appendIfPresent(`,tos=${t.tos}`,"tos"),e.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),e.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),e.appendIfPresent(`,interface=${t.interface}`,"interface"),e.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),e.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),e.toString()}function uk(t){let e=new ht(t),n=t.tls?"socks5-tls":"socks5";e.append(`${t.name}=${n},${t.server},${t.port}`),e.appendIfPresent(`,username="${t.username}"`,"username"),e.appendIfPresent(`,password="${t.password}"`,"password");let u=es[t["ip-version"]]||t["ip-version"];return e.appendIfPresent(`,ip-version=${u}`,"ip-version"),e.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),e.appendIfPresent(`,server-cert-fingerprint-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),e.appendIfPresent(`,sni=${t.sni}`,"sni"),e.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),t.tfo&&R.info("Option tfo is not supported by Surge, thus omitted"),e.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),e.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),e.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),e.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),e.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),e.appendIfPresent(`,tos=${t.tos}`,"tos"),e.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),e.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),e.appendIfPresent(`,interface=${t.interface}`,"interface"),ue(t,"shadow-tls-password")&&(e.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),e.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),e.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),e.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),e.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),e.toString()}function ok(t){let e=new ht(t);e.append(`${t.name}=${t.type},${t.server},${t.port}`),e.appendIfPresent(`,version=${t.version}`,"version"),e.appendIfPresent(`,psk=${t.psk}`,"psk");let n=es[t["ip-version"]]||t["ip-version"];return e.appendIfPresent(`,ip-version=${n}`,"ip-version"),e.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),e.appendIfPresent(`,obfs=${t["obfs-opts"]?.mode}`,"obfs-opts.mode"),e.appendIfPresent(`,obfs-host=${t["obfs-opts"]?.host}`,"obfs-opts.host"),e.appendIfPresent(`,obfs-uri=${t["obfs-opts"]?.path}`,"obfs-opts.path"),e.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),e.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),e.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),e.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),e.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),e.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),e.appendIfPresent(`,tos=${t.tos}`,"tos"),e.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),e.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),e.appendIfPresent(`,interface=${t.interface}`,"interface"),ue(t,"shadow-tls-password")&&(e.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),e.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),e.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),e.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),e.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),e.appendIfPresent(`,reuse=${t.reuse}`,"reuse"),e.toString()}function ck(t){let e=new ht(t),n=t.type;(!t.token||t.token.length===0)&&(n="tuic-v5"),e.append(`${t.name}=${n},${t.server},${t.port}`),e.appendIfPresent(`,uuid=${t.uuid}`,"uuid"),e.appendIfPresent(`,password="${t.password}"`,"password"),e.appendIfPresent(`,token=${t.token}`,"token"),e.appendIfPresent(`,alpn=${Array.isArray(t.alpn)?t.alpn[0]:t.alpn}`,"alpn"),ue(t,"ports")&&e.append(`,port-hopping="${t.ports.replace(/,/g,";")}"`),e.appendIfPresent(`,port-hopping-interval=${t["hop-interval"]}`,"hop-interval");let u=es[t["ip-version"]]||t["ip-version"];return e.appendIfPresent(`,ip-version=${u}`,"ip-version"),e.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),e.appendIfPresent(`,sni=${t.sni}`,"sni"),e.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),e.appendIfPresent(`,server-cert-fingerprint-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),ue(t,"tfo")?e.append(`,tfo=${t.tfo}`):ue(t,"fast-open")&&e.append(`,tfo=${t["fast-open"]}`),e.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),e.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),e.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),e.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),e.appendIfPresent(`,tos=${t.tos}`,"tos"),e.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),e.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),e.appendIfPresent(`,interface=${t.interface}`,"interface"),ue(t,"shadow-tls-password")&&(e.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),e.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),e.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),e.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),e.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),e.appendIfPresent(`,ecn=${t.ecn}`,"ecn"),e.toString()}function lk(t){Array.isArray(t.peers)&&t.peers.length>0&&(t.server=t.peers[0].server,t.port=t.peers[0].port,t.ip=t.peers[0].ip,t.ipv6=t.peers[0].ipv6,t["public-key"]=t.peers[0]["public-key"],t["preshared-key"]=t.peers[0]["pre-shared-key"],t["allowed-ips"]=t.peers[0]["allowed-ips"],t.reserved=t.peers[0].reserved);let e=new ht(t);e.append(`# > WireGuard Proxy ${t.name}
# ${t.name}=wireguard`),t["section-name"]=fr(t["section-name"],t.name),e.appendIfPresent(`,section-name=${t["section-name"]}`,"section-name"),e.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert");let n=es[t["ip-version"]]||t["ip-version"];e.appendIfPresent(`,ip-version=${n}`,"ip-version"),e.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),e.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),e.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),e.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),e.appendIfPresent(`,tos=${t.tos}`,"tos"),e.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),e.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),e.appendIfPresent(`,interface=${t.interface}`,"interface"),ue(t,"shadow-tls-password")&&(e.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),e.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),e.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),e.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),e.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),e.append(`
# > WireGuard Section ${t.name}
[WireGuard ${t["section-name"]}]
private-key = ${t["private-key"]}`),e.appendIfPresent(`
self-ip = ${t.ip}`,"ip"),e.appendIfPresent(`
self-ip-v6 = ${t.ipv6}`,"ipv6"),t.dns&&(Array.isArray(t.dns)&&(t.dns=t.dns.join(", ")),e.append(`
dns-server = ${t.dns}`)),e.appendIfPresent(`
mtu = ${t.mtu}`,"mtu"),n==="prefer-v6"&&e.append(`
prefer-ipv6 = true`);let u=Array.isArray(t["allowed-ips"])?t["allowed-ips"].join(","):t["allowed-ips"],s=Array.isArray(t.reserved)?t.reserved.join("/"):t.reserved,p=t["preshared-key"]??t["pre-shared-key"],y={"public-key":t["public-key"],"allowed-ips":u?`"${u}"`:void 0,endpoint:`${t.server}:${t.port}`,keepalive:t["persistent-keepalive"]||t.keepalive,"client-id":s,"preshared-key":p};return e.append(`
peer = (${Object.keys(y).filter(g=>y[g]!=null).map(g=>`${g} = ${y[g]}`).join(", ")})`),e.toString()}function fk(t){let e=new ht(t);e.append(`${t.name}=wireguard`),e.appendIfPresent(`,section-name=${t["section-name"]}`,"section-name"),e.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert");let n=es[t["ip-version"]]||t["ip-version"];return e.appendIfPresent(`,ip-version=${n}`,"ip-version"),e.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),e.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),e.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),e.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),e.appendIfPresent(`,tos=${t.tos}`,"tos"),e.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),e.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),e.appendIfPresent(`,interface=${t.interface}`,"interface"),ue(t,"shadow-tls-password")&&(e.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),e.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),e.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),e.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),e.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),e.toString()}function hk(t,e){if(e){if(t["obfs-password"]&&t.obfs!="salamander")throw new Error("only salamander obfs is supported")}else if(t.obfs||t["obfs-password"])throw new Error("obfs is unsupported");let n=new ht(t);n.append(`${t.name}=hysteria2,${t.server},${t.port}`),n.appendIfPresent(`,password="${t.password}"`,"password"),ue(t,"ports")&&n.append(`,port-hopping="${t.ports.replace(/,/g,";")}"`),n.appendIfPresent(`,port-hopping-interval=${t["hop-interval"]}`,"hop-interval"),t["obfs-password"]&&t.obfs=="salamander"&&n.append(`,salamander-password="${t["obfs-password"]}"`);let u=es[t["ip-version"]]||t["ip-version"];return n.appendIfPresent(`,ip-version=${u}`,"ip-version"),n.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),n.appendIfPresent(`,sni=${t.sni}`,"sni"),n.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),n.appendIfPresent(`,server-cert-fingerprint-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),ue(t,"tfo")?n.append(`,tfo=${t.tfo}`):ue(t,"fast-open")&&n.append(`,tfo=${t["fast-open"]}`),n.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),n.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),n.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),n.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),n.appendIfPresent(`,tos=${t.tos}`,"tos"),n.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),n.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),n.appendIfPresent(`,interface=${t.interface}`,"interface"),ue(t,"shadow-tls-password")&&(n.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),n.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),n.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),n.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),n.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),n.appendIfPresent(`,download-bandwidth=${`${t.down}`.match(/\d+/)?.[0]||0}`,"down"),n.appendIfPresent(`,ecn=${t.ecn}`,"ecn"),n.toString()}function dC(t,e,n){if(ue(e,"network"))if(e.network==="ws"){if(t.append(",ws=true"),ue(e,"ws-opts")&&(t.appendIfPresent(`,ws-path=${e["ws-opts"].path}`,"ws-opts.path"),ue(e,"ws-opts.headers"))){let u=e["ws-opts"].headers,s=Object.keys(u).map(p=>{let y=u[p];return y=`"${y}"`,`${p}:${y}`}).join("|");ca(s)&&t.append(`,ws-headers=${s}`)}}else if(n&&["http"].includes(e.network))R.info(`Include Unsupported Proxy: network ${e.network} -> tcp`);else throw new Error(`network ${e.network} is unsupported`)}var dk={dual:"dual","v4-only":"ipv4","v6-only":"ipv6","prefer-v4":"ipv4-prefer","prefer-v6":"ipv6-prefer"};function ts(){return{type:"ALL",produce:(t,e,n={})=>{let u=t.filter(s=>n["include-unsupported-proxy"]?!0:s.type==="snell"&&s.version>=4||["juicity","naive"].includes(s.type)||["ss"].includes(s.type)&&!["aes-128-ctr","aes-192-ctr","aes-256-ctr","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-gcm","aes-192-gcm","aes-256-gcm","aes-128-ccm","aes-192-ccm","aes-256-ccm","aes-128-gcm-siv","aes-256-gcm-siv","chacha20-ietf","chacha20","xchacha20","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","chacha8-ietf-poly1305","xchacha8-ietf-poly1305","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm","2022-blake3-chacha20-poly1305","lea-128-gcm","lea-192-gcm","lea-256-gcm","rabbit128-poly1305","aegis-128l","aegis-256","aez-384","deoxys-ii-256-128","rc4-md5","none"].includes(s.cipher)||["anytls"].includes(s.type)&&s.network&&(!["tcp"].includes(s.network)||["tcp"].includes(s.network)&&s["reality-opts"])?!1:!["xhttp"].includes(s.network)).map(s=>{if(s.type==="vmess"?(ue(s,"aead")&&(s.aead&&(s.alterId=0),delete s.aead),ue(s,"sni")&&(s.servername=s.sni,delete s.sni),ue(s,"cipher")&&!["auto","none","zero","aes-128-gcm","chacha20-poly1305"].includes(s.cipher)&&(s.cipher="auto")):s.type==="tuic"?(ue(s,"alpn")&&(s.alpn=Array.isArray(s.alpn)?s.alpn:[s.alpn]),ue(s,"tfo")&&!ue(s,"fast-open")&&(s["fast-open"]=s.tfo),(!s.token||s.token.length===0)&&!ue(s,"version")&&(s.version=5)):s.type==="hysteria"?(ue(s,"auth_str")&&!ue(s,"auth-str")&&(s["auth-str"]=s.auth_str),ue(s,"alpn")&&(s.alpn=Array.isArray(s.alpn)?s.alpn:[s.alpn]),ue(s,"tfo")&&!ue(s,"fast-open")&&(s["fast-open"]=s.tfo)):s.type==="wireguard"?(s.keepalive=s.keepalive??s["persistent-keepalive"],s["persistent-keepalive"]=s.keepalive,s["preshared-key"]=s["preshared-key"]??s["pre-shared-key"],s["pre-shared-key"]=s["preshared-key"]):s.type==="snell"&&s.version<3?delete s.udp:s.type==="vless"?ue(s,"sni")&&(s.servername=s.sni,delete s.sni):s.type==="ss"&&ue(s,"shadow-tls-password")&&!ue(s,"plugin")&&(s.plugin="shadow-tls",s["plugin-opts"]={host:s["shadow-tls-sni"],password:s["shadow-tls-password"],version:s["shadow-tls-version"]},delete s["shadow-tls-password"],delete s["shadow-tls-sni"],delete s["shadow-tls-version"]),["vmess","vless"].includes(s.type)&&s.network==="http"){let p=s["http-opts"]?.path;ue(s,"http-opts.path")&&!Array.isArray(p)&&(s["http-opts"].path=[p]);let y=s["http-opts"]?.headers?.Host;ue(s,"http-opts.headers.Host")&&!Array.isArray(y)&&(s["http-opts"].headers.Host=[y])}if(["vmess","vless"].includes(s.type)&&s.network==="h2"){let p=s["h2-opts"]?.path;ue(s,"h2-opts.path")&&Array.isArray(p)&&(s["h2-opts"].path=p[0]);let y=s["h2-opts"]?.headers?.host;ue(s,"h2-opts.headers.Host")&&!Array.isArray(y)&&(s["h2-opts"].headers.host=[y])}if(["ws"].includes(s.network)){let p=s[`${s.network}-opts`]?.path;if(p){let y=/^(.*?)(?:\?ed=(\d+))?$/,[g,E="",m=""]=y.exec(p);s[`${s.network}-opts`].path=E,m!==""&&(s["ws-opts"]["early-data-header-name"]="Sec-WebSocket-Protocol",s["ws-opts"]["max-early-data"]=parseInt(m,10))}else s[`${s.network}-opts`]=s[`${s.network}-opts`]||{},s[`${s.network}-opts`].path="/"}if(s["plugin-opts"]?.tls&&ue(s,"skip-cert-verify")&&(s["plugin-opts"]["skip-cert-verify"]=s["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2","juicity","anytls","naive"].includes(s.type)&&delete s.tls,s["tls-fingerprint"]&&(s.fingerprint=s["tls-fingerprint"]),delete s["tls-fingerprint"],s["underlying-proxy"]&&(s["dialer-proxy"]=s["underlying-proxy"]),delete s["underlying-proxy"],ue(s,"tls")&&typeof s.tls!="boolean"&&delete s.tls,delete s.subName,delete s.collectionName,delete s.id,delete s.resolved,delete s["no-resolve"],e!=="internal"||n["delete-underscore-fields"])for(let p in s)(s[p]==null||/^_/i.test(p))&&delete s[p];return["grpc"].includes(s.network)&&s[`${s.network}-opts`]&&(delete s[`${s.network}-opts`]["_grpc-type"],delete s[`${s.network}-opts`]["_grpc-authority"]),s["ip-version"]&&(s["ip-version"]=dk[s["ip-version"]]||s["ip-version"]),s});return e==="internal"?u:`proxies:
`+u.map(s=>"  - "+JSON.stringify(s)+`
`).join("")}}}var pC="SurgeMac",pk=yl();function Nm(){return{produce:(t,e,n={})=>{switch(t.type){case"external":return gC(t);default:try{return pk.produce(t,e,n)}catch{if(n.useMihomoExternal)return R.log(`${t.name} is not supported on ${pC}, try to use Mihomo(SurgeMac - External Proxy Program) instead`),gk(t,e,n);throw new Error("Surge for macOS \u53EF\u624B\u52A8\u6307\u5B9A\u94FE\u63A5\u53C2\u6570 target=SurgeMac \u6216\u5728 \u540C\u6B65\u914D\u7F6E \u4E2D\u6307\u5B9A SurgeMac \u6765\u542F\u7528 mihomo \u652F\u63F4 Surge \u672C\u8EAB\u4E0D\u652F\u6301\u7684\u534F\u8BAE")}}}}}function gC(t){let e=new ht(t);if(!t.exec||!t["local-port"])throw new Error(`${t.type}: exec and local-port are required`);return e.append(`${t.name}=external,exec="${t.exec}",local-port=${t["local-port"]}`),Array.isArray(t.args)&&t.args.map(n=>{e.append(`,args="${n}"`)}),Array.isArray(t.addresses)&&t.addresses.map(n=>{e.append(`,addresses=${n}`)}),e.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),ue(t,"tfo")?e.append(`,tfo=${t.tfo}`):ue(t,"fast-open")&&e.append(`,tfo=${t["fast-open"]}`),e.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),e.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),e.toString()}function gk(t,e,n){let u=ts().produce([t],"internal")?.[0];if(u){let s=n?.localPort||t._localPort||65535,p=!["ipv4","v4-only"].includes(t["ip-version"]),y={name:t.name,type:"external",exec:t._exec||"/usr/local/bin/mihomo","local-port":s,args:["-config",ft.encode(JSON.stringify({"mixed-port":s,ipv6:p,mode:"global",dns:{enable:!0,ipv6:p,"default-nameserver":n?.defaultNameserver||t._defaultNameserver||["180.76.76.76","52.80.52.52","119.28.28.28","223.6.6.6"],nameserver:n?.nameserver||t._nameserver||["https://doh.pub/dns-query","https://dns.alidns.com/dns-query","https://doh-pure.onedns.net/dns-query"]},proxies:[{...u,name:"proxy"}],"proxy-groups":[{name:"GLOBAL",type:"select",proxies:["proxy"]}]}))],addresses:[]};return mk(t.server)?y.addresses.push(t.server):R.log(`Platform ${pC}, proxy type ${t.type}: addresses should be an IP address, but got ${t.server}`),n.localPort=s-1,gC(y)}}function mk(t){return Wr(t)||Mr(t)}function km(){return{type:"ALL",produce:(t,e,n={})=>{let u=t.filter(s=>n["include-unsupported-proxy"]?!0:!["ss","ssr","vmess","vless","socks5","http","snell","trojan","wireguard"].includes(s.type)||s.type==="ss"&&!["aes-128-gcm","aes-192-gcm","aes-256-gcm","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","rc4-md5","chacha20-ietf","xchacha20","chacha20-ietf-poly1305","xchacha20-ietf-poly1305"].includes(s.cipher)||s.type==="snell"&&s.version>=4||s.type==="vless"&&(typeof s.flow<"u"||s["reality-opts"])?!1:s["underlying-proxy"]||s["dialer-proxy"]?(R.error(`Clash \u4E0D\u652F\u6301\u524D\u7F6E\u4EE3\u7406\u5B57\u6BB5. \u5DF2\u8FC7\u6EE4\u8282\u70B9 ${s.name}`),!1):!0).map(s=>{if(s.type==="vmess"?(ue(s,"aead")&&(s.aead&&(s.alterId=0),delete s.aead),ue(s,"sni")&&(s.servername=s.sni,delete s.sni),ue(s,"cipher")&&!["auto","aes-128-gcm","chacha20-poly1305","none"].includes(s.cipher)&&(s.cipher="auto")):s.type==="wireguard"?(s.keepalive=s.keepalive??s["persistent-keepalive"],s["persistent-keepalive"]=s.keepalive,s["preshared-key"]=s["preshared-key"]??s["pre-shared-key"],s["pre-shared-key"]=s["preshared-key"]):s.type==="snell"&&s.version<3?delete s.udp:s.type==="vless"&&ue(s,"sni")&&(s.servername=s.sni,delete s.sni),["vmess","vless"].includes(s.type)&&s.network==="http"){let p=s["http-opts"]?.path;ue(s,"http-opts.path")&&!Array.isArray(p)&&(s["http-opts"].path=[p]);let y=s["http-opts"]?.headers?.Host;ue(s,"http-opts.headers.Host")&&!Array.isArray(y)&&(s["http-opts"].headers.Host=[y])}if(["vmess","vless"].includes(s.type)&&s.network==="h2"){let p=s["h2-opts"]?.path;ue(s,"h2-opts.path")&&Array.isArray(p)&&(s["h2-opts"].path=p[0]);let y=s["h2-opts"]?.headers?.host;ue(s,"h2-opts.headers.Host")&&!Array.isArray(y)&&(s["h2-opts"].headers.host=[y])}if(["ws"].includes(s.network)){let p=s[`${s.network}-opts`]?.path;if(p){let y=/^(.*?)(?:\?ed=(\d+))?$/,[g,E="",m=""]=y.exec(p);s[`${s.network}-opts`].path=E,m!==""&&(s["ws-opts"]["early-data-header-name"]="Sec-WebSocket-Protocol",s["ws-opts"]["max-early-data"]=parseInt(m,10))}else s[`${s.network}-opts`]=s[`${s.network}-opts`]||{},s[`${s.network}-opts`].path="/"}if(s["plugin-opts"]?.tls&&ue(s,"skip-cert-verify")&&(s["plugin-opts"]["skip-cert-verify"]=s["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2","juicity","anytls","naive"].includes(s.type)&&delete s.tls,s["tls-fingerprint"]&&(s.fingerprint=s["tls-fingerprint"]),delete s["tls-fingerprint"],ue(s,"tls")&&typeof s.tls!="boolean"&&delete s.tls,delete s.subName,delete s.collectionName,delete s.id,delete s.resolved,delete s["no-resolve"],e!=="internal")for(let p in s)(s[p]==null||/^_/i.test(p))&&delete s[p];return["grpc"].includes(s.network)&&s[`${s.network}-opts`]&&(delete s[`${s.network}-opts`]["_grpc-type"],delete s[`${s.network}-opts`]["_grpc-authority"]),s});return e==="internal"?u:`proxies:
`+u.map(s=>"  - "+JSON.stringify(s)+`
`).join("")}}}function K0(){return{type:"ALL",produce:(t,e,n={})=>{let u=t.filter(s=>!["ss","ssr","vmess","socks5","http","snell","trojan","tuic","vless","wireguard","hysteria","hysteria2","ssh","juicity","anytls"].includes(s.type)||s.type==="ss"&&!["aes-128-gcm","aes-192-gcm","aes-256-gcm","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","rc4-md5","chacha20-ietf","xchacha20","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(s.cipher)||s.type==="snell"&&s.version>=4||s.type==="vless"&&s["reality-opts"]&&!["xtls-rprx-vision"].includes(s.flow)?!1:s["underlying-proxy"]||s["dialer-proxy"]?(R.error(`Stash \u6682\u4E0D\u652F\u6301\u524D\u7F6E\u4EE3\u7406\u5B57\u6BB5. \u5DF2\u8FC7\u6EE4\u8282\u70B9 ${s.name}. \u8BF7\u4F7F\u7528 \u4EE3\u7406\u7684\u8F6C\u53D1\u94FE https://stash.wiki/proxy-protocols/proxy-groups#relay`),!1):["anytls"].includes(s.type)&&!n["include-unsupported-proxy"]||["anytls"].includes(s.type)&&s.network&&(!["tcp"].includes(s.network)||["tcp"].includes(s.network)&&s["reality-opts"])||["xhttp"].includes(s.network)?!1:!(s.encryption&&s.encryption!=="none"&&["vless"].includes(s.type))).map(s=>{if(s.type==="vmess"?(ue(s,"aead")&&(s.aead&&(s.alterId=0),delete s.aead),ue(s,"sni")&&(s.servername=s.sni,delete s.sni),ue(s,"cipher")&&!["auto","aes-128-gcm","chacha20-poly1305","none"].includes(s.cipher)&&(s.cipher="auto")):s.type==="tuic"?(ue(s,"alpn")?s.alpn=Array.isArray(s.alpn)?s.alpn:[s.alpn]:s.alpn=["h3"],ue(s,"tfo")&&!ue(s,"fast-open")&&(s["fast-open"]=s.tfo,delete s.tfo),(!s.token||s.token.length===0)&&!ue(s,"version")&&(s.version=5)):s.type==="hysteria"?(ue(s,"auth_str")&&!ue(s,"auth-str")&&(s["auth-str"]=s.auth_str),ue(s,"alpn")&&(s.alpn=Array.isArray(s.alpn)?s.alpn:[s.alpn]),ue(s,"tfo")&&!ue(s,"fast-open")&&(s["fast-open"]=s.tfo,delete s.tfo),ue(s,"down")&&!ue(s,"down-speed")&&(s["down-speed"]=s.down,delete s.down),ue(s,"up")&&!ue(s,"up-speed")&&(s["up-speed"]=s.up,delete s.up),ue(s,"down-speed")&&(s["down-speed"]=`${s["down-speed"]}`.match(/\d+/)?.[0]||0),ue(s,"up-speed")&&(s["up-speed"]=`${s["up-speed"]}`.match(/\d+/)?.[0]||0)):s.type==="hysteria2"?(ue(s,"password")&&!ue(s,"auth")&&(s.auth=s.password,delete s.password),ue(s,"tfo")&&!ue(s,"fast-open")&&(s["fast-open"]=s.tfo,delete s.tfo),ue(s,"down")&&!ue(s,"down-speed")&&(s["down-speed"]=s.down,delete s.down),ue(s,"up")&&!ue(s,"up-speed")&&(s["up-speed"]=s.up,delete s.up),ue(s,"down-speed")&&(s["down-speed"]=`${s["down-speed"]}`.match(/\d+/)?.[0]||0),ue(s,"up-speed")&&(s["up-speed"]=`${s["up-speed"]}`.match(/\d+/)?.[0]||0)):s.type==="wireguard"?(s.keepalive=s.keepalive??s["persistent-keepalive"],s["persistent-keepalive"]=s.keepalive,s["preshared-key"]=s["preshared-key"]??s["pre-shared-key"],s["pre-shared-key"]=s["preshared-key"]):s.type==="snell"&&s.version<3?delete s.udp:s.type==="vless"&&ue(s,"sni")&&(s.servername=s.sni,delete s.sni),["vmess","vless"].includes(s.type)&&s.network==="http"){let p=s["http-opts"]?.path;ue(s,"http-opts.path")&&!Array.isArray(p)&&(s["http-opts"].path=[p]);let y=s["http-opts"]?.headers?.Host;ue(s,"http-opts.headers.Host")&&!Array.isArray(y)&&(s["http-opts"].headers.Host=[y])}if(["vmess","vless"].includes(s.type)&&s.network==="h2"){let p=s["h2-opts"]?.path;ue(s,"h2-opts.path")&&Array.isArray(p)&&(s["h2-opts"].path=p[0]);let y=s["h2-opts"]?.headers?.host;ue(s,"h2-opts.headers.Host")&&!Array.isArray(y)&&(s["h2-opts"].headers.host=[y])}if(["ws"].includes(s.network)){let p=s[`${s.network}-opts`]?.path;if(p){let y=/^(.*?)(?:\?ed=(\d+))?$/,[g,E="",m=""]=y.exec(p);s[`${s.network}-opts`].path=E,m!==""&&(s["ws-opts"]["early-data-header-name"]="Sec-WebSocket-Protocol",s["ws-opts"]["max-early-data"]=parseInt(m,10))}else s[`${s.network}-opts`]=s[`${s.network}-opts`]||{},s[`${s.network}-opts`].path="/"}if(s["plugin-opts"]?.tls&&ue(s,"skip-cert-verify")&&(s["plugin-opts"]["skip-cert-verify"]=s["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2","juicity","anytls","naive"].includes(s.type)&&delete s.tls,s["tls-fingerprint"]&&(s["server-cert-fingerprint"]=s["tls-fingerprint"]),delete s["tls-fingerprint"],ue(s,"tls")&&typeof s.tls!="boolean"&&delete s.tls,s["test-url"]&&(s["benchmark-url"]=s["test-url"],delete s["test-url"]),s["test-timeout"]&&(s["benchmark-timeout"]=s["test-timeout"],delete s["test-timeout"]),delete s.subName,delete s.collectionName,delete s.id,delete s.resolved,delete s["no-resolve"],e!=="internal")for(let p in s)(s[p]==null||/^_/i.test(p))&&delete s[p];return["grpc"].includes(s.network)&&s[`${s.network}-opts`]&&(delete s[`${s.network}-opts`]["_grpc-type"],delete s[`${s.network}-opts`]["_grpc-authority"]),s});return e==="internal"?u:`proxies:
`+u.map(s=>"  - "+JSON.stringify(s)+`
`).join("")}}}var vk="Loon",vu={dual:"dual",ipv4:"v4-only",ipv6:"v6-only","ipv4-prefer":"prefer-v4","ipv6-prefer":"prefer-v6"};function Lm(){return{produce:(t,e,n={})=>{switch(t.type){case"ss":return wk(t);case"ssr":return Ek(t);case"trojan":return Ak(t);case"vmess":return bk(t,n["include-unsupported-proxy"]);case"vless":return yk(t,n["include-unsupported-proxy"]);case"http":return _k(t);case"socks5":return Ck(t);case"wireguard":return Dk(t);case"hysteria2":return Sk(t)}throw new Error(`Platform ${vk} does not support proxy type: ${t.type}`)}}}function wk(t){let e=new ht(t);if(!["rc4","rc4-md5","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","salsa20","chacha20","chacha20-ietf","aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(t.cipher))throw new Error(`cipher ${t.cipher} is not supported`);if(e.append(`${t.name}=shadowsocks,${t.server},${t.port},${t.cipher},"${t.password}"`),ue(t,"plugin")){if(t.plugin==="obfs"){if(t["plugin-opts"]?.mode&&t.cipher.startsWith("2022-"))throw new Error(`${t.cipher} ${t.plugin} is not supported`);e.append(`,obfs-name=${t["plugin-opts"].mode}`),e.appendIfPresent(`,obfs-host=${t["plugin-opts"].host}`,"plugin-opts.host"),e.appendIfPresent(`,obfs-uri=${t["plugin-opts"].path}`,"plugin-opts.path")}else if(!["shadow-tls"].includes(t.plugin))throw new Error(`plugin ${t.plugin} is not supported`)}if(ue(t,"shadow-tls-password"))e.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),e.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),e.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni"),e.appendIfPresent(`,udp-port=${t["udp-port"]}`,"udp-port");else if(["shadow-tls"].includes(t.plugin)&&t["plugin-opts"]){let u=t["plugin-opts"].password,s=t["plugin-opts"].host,p=t["plugin-opts"].version;if(u){if(e.append(`,shadow-tls-password=${u}`),s&&e.append(`,shadow-tls-sni=${s}`),p){if(p<2)throw new Error(`shadow-tls version ${p} is not supported`);e.append(`,shadow-tls-version=${p}`)}e.appendIfPresent(`,udp-port=${t["udp-port"]}`,"udp-port")}}e.appendIfPresent(`,fast-open=${t.tfo}`,"tfo"),t["block-quic"]==="on"?e.append(",block-quic=true"):t["block-quic"]==="off"&&e.append(",block-quic=false"),t.udp&&e.append(",udp=true");let n=vu[t["ip-version"]]||t["ip-version"];return e.appendIfPresent(`,ip-mode=${n}`,"ip-version"),e.toString()}function Ek(t){let e=new ht(t);if(e.append(`${t.name}=shadowsocksr,${t.server},${t.port},${t.cipher},"${t.password}"`),e.append(`,protocol=${t.protocol}`),e.appendIfPresent(`,protocol-param=${t["protocol-param"]}`,"protocol-param"),e.appendIfPresent(`,obfs=${t.obfs}`,"obfs"),e.appendIfPresent(`,obfs-param=${t["obfs-param"]}`,"obfs-param"),ue(t,"shadow-tls-password"))e.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),e.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),e.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni"),e.appendIfPresent(`,udp-port=${t["udp-port"]}`,"udp-port");else if(["shadow-tls"].includes(t.plugin)&&t["plugin-opts"]){let u=t["plugin-opts"].password,s=t["plugin-opts"].host,p=t["plugin-opts"].version;if(u){if(e.append(`,shadow-tls-password=${u}`),s&&e.append(`,shadow-tls-sni=${s}`),p){if(p<2)throw new Error(`shadow-tls version ${p} is not supported`);e.append(`,shadow-tls-version=${p}`)}e.appendIfPresent(`,udp-port=${t["udp-port"]}`,"udp-port")}}e.appendIfPresent(`,fast-open=${t.tfo}`,"tfo"),t["block-quic"]==="on"?e.append(",block-quic=true"):t["block-quic"]==="off"&&e.append(",block-quic=false"),t.udp&&e.append(",udp=true");let n=vu[t["ip-version"]]||t["ip-version"];return e.appendIfPresent(`,ip-mode=${n}`,"ip-version"),e.toString()}function Ak(t){let e=new ht(t);if(e.append(`${t.name}=trojan,${t.server},${t.port},"${t.password}"`),t.network==="tcp"&&delete t.network,ue(t,"network"))if(t.network==="ws")e.append(",transport=ws"),e.appendIfPresent(`,path=${t["ws-opts"]?.path}`,"ws-opts.path"),e.appendIfPresent(`,host=${t["ws-opts"]?.headers?.Host}`,"ws-opts.headers.Host");else throw new Error(`network ${t.network} is unsupported`);e.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),e.appendIfPresent(`,tls-name=${t.sni}`,"sni"),e.appendIfPresent(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),e.appendIfPresent(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),e.appendIfPresent(`,fast-open=${t.tfo}`,"tfo"),t["block-quic"]==="on"?e.append(",block-quic=true"):t["block-quic"]==="off"&&e.append(",block-quic=false"),t.udp&&e.append(",udp=true");let n=vu[t["ip-version"]]||t["ip-version"];return e.appendIfPresent(`,ip-mode=${n}`,"ip-version"),e.toString()}function bk(t){let e=!!t["reality-opts"],n=new ht(t);if(n.append(`${t.name}=vmess,${t.server},${t.port},${t.cipher},"${t.uuid}"`),t.network==="tcp"&&delete t.network,ue(t,"network"))if(t.network==="ws")n.append(",transport=ws"),n.appendIfPresent(`,path=${t["ws-opts"]?.path}`,"ws-opts.path"),n.appendIfPresent(`,host=${t["ws-opts"]?.headers?.Host}`,"ws-opts.headers.Host");else if(t.network==="http"){n.append(",transport=http");let s=t["http-opts"]?.path,p=t["http-opts"]?.headers?.Host;n.appendIfPresent(`,path=${Array.isArray(s)?s[0]:s}`,"http-opts.path"),n.appendIfPresent(`,host=${Array.isArray(p)?p[0]:p}`,"http-opts.headers.Host")}else throw new Error(`network ${t.network} is unsupported`);else n.append(",transport=tcp");n.appendIfPresent(`,over-tls=${t.tls}`,"tls"),n.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),e?(n.appendIfPresent(`,sni=${t.sni}`,"sni"),n.appendIfPresent(`,public-key="${t["reality-opts"]["public-key"]}"`,"reality-opts.public-key"),n.appendIfPresent(`,short-id=${t["reality-opts"]["short-id"]}`,"reality-opts.short-id")):(n.appendIfPresent(`,tls-name=${t.sni}`,"sni"),n.appendIfPresent(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),n.appendIfPresent(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256")),ue(t,"aead")?n.append(`,alterId=${t.aead?0:1}`):n.append(`,alterId=${t.alterId}`),n.appendIfPresent(`,fast-open=${t.tfo}`,"tfo"),t["block-quic"]==="on"?n.append(",block-quic=true"):t["block-quic"]==="off"&&n.append(",block-quic=false"),t.udp&&n.append(",udp=true");let u=vu[t["ip-version"]]||t["ip-version"];return n.appendIfPresent(`,ip-mode=${u}`,"ip-version"),n.toString()}function yk(t){if(t.encryption&&t.encryption!=="none")throw new Error("VLESS encryption is not supported");let e=!1,n=!!t["reality-opts"];if(typeof t.flow<"u")if(["xtls-rprx-vision"].includes(t.flow))e=!0;else throw new Error(`VLESS flow(${t.flow}) is not supported`);let u=new ht(t);if(u.append(`${t.name}=vless,${t.server},${t.port},"${t.uuid}"`),t.network==="tcp"&&delete t.network,ue(t,"network"))if(t.network==="ws")u.append(",transport=ws"),u.appendIfPresent(`,path=${t["ws-opts"]?.path}`,"ws-opts.path"),u.appendIfPresent(`,host=${t["ws-opts"]?.headers?.Host}`,"ws-opts.headers.Host");else if(t.network==="http"){u.append(",transport=http");let p=t["http-opts"]?.path,y=t["http-opts"]?.headers?.Host;u.appendIfPresent(`,path=${Array.isArray(p)?p[0]:p}`,"http-opts.path"),u.appendIfPresent(`,host=${Array.isArray(y)?y[0]:y}`,"http-opts.headers.Host")}else throw new Error(`network ${t.network} is unsupported`);else u.append(",transport=tcp");u.appendIfPresent(`,over-tls=${t.tls}`,"tls"),u.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),e&&u.appendIfPresent(`,flow=${t.flow}`,"flow"),n?(u.appendIfPresent(`,sni=${t.sni}`,"sni"),u.appendIfPresent(`,public-key="${t["reality-opts"]["public-key"]}"`,"reality-opts.public-key"),u.appendIfPresent(`,short-id=${t["reality-opts"]["short-id"]}`,"reality-opts.short-id")):(u.appendIfPresent(`,tls-name=${t.sni}`,"sni"),u.appendIfPresent(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),u.appendIfPresent(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256")),u.appendIfPresent(`,fast-open=${t.tfo}`,"tfo"),t["block-quic"]==="on"?u.append(",block-quic=true"):t["block-quic"]==="off"&&u.append(",block-quic=false"),t.udp&&u.append(",udp=true");let s=vu[t["ip-version"]]||t["ip-version"];return u.appendIfPresent(`,ip-mode=${s}`,"ip-version"),u.toString()}function _k(t){let e=new ht(t),n=t.tls?"https":"http";e.append(`${t.name}=${n},${t.server},${t.port}`),e.appendIfPresent(`,${t.username}`,"username"),e.appendIfPresent(`,"${t.password}"`,"password"),e.appendIfPresent(`,sni=${t.sni}`,"sni"),e.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),e.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),t["block-quic"]==="on"?e.append(",block-quic=true"):t["block-quic"]==="off"&&e.append(",block-quic=false");let u=vu[t["ip-version"]]||t["ip-version"];return e.appendIfPresent(`,ip-mode=${u}`,"ip-version"),e.toString()}function Ck(t){let e=new ht(t);e.append(`${t.name}=socks5,${t.server},${t.port}`),e.appendIfPresent(`,${t.username}`,"username"),e.appendIfPresent(`,"${t.password}"`,"password"),e.appendIfPresent(`,over-tls=${t.tls}`,"tls"),e.appendIfPresent(`,sni=${t.sni}`,"sni"),e.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),e.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),t["block-quic"]==="on"?e.append(",block-quic=true"):t["block-quic"]==="off"&&e.append(",block-quic=false"),t.udp&&e.append(",udp=true");let n=vu[t["ip-version"]]||t["ip-version"];return e.appendIfPresent(`,ip-mode=${n}`,"ip-version"),e.toString()}function Dk(t){Array.isArray(t.peers)&&t.peers.length>0&&(t.server=t.peers[0].server,t.port=t.peers[0].port,t.ip=t.peers[0].ip,t.ipv6=t.peers[0].ipv6,t["public-key"]=t.peers[0]["public-key"],t["preshared-key"]=t.peers[0]["pre-shared-key"],t["allowed-ips"]=t.peers[0]["allowed-ips"],t.reserved=t.peers[0].reserved);let e=new ht(t);if(e.append(`${t.name}=wireguard`),e.appendIfPresent(`,interface-ip=${t.ip}`,"ip"),e.appendIfPresent(`,interface-ipv6=${t.ipv6}`,"ipv6"),e.appendIfPresent(`,private-key="${t["private-key"]}"`,"private-key"),e.appendIfPresent(`,mtu=${t.mtu}`,"mtu"),t.dns&&Array.isArray(t.dns)){t.dnsv6=t.dns.find(g=>Mr(g));let y=t.dns.find(g=>Wr(g));y||(y=t.dns.find(g=>!Wr(g)&&!Mr(g))),t.dns=y}e.appendIfPresent(`,dns=${t.dns}`,"dns"),e.appendIfPresent(`,dnsv6=${t.dnsv6}`,"dnsv6"),e.appendIfPresent(`,keepalive=${t["persistent-keepalive"]}`,"persistent-keepalive"),e.appendIfPresent(`,keepalive=${t.keepalive}`,"keepalive");let n=Array.isArray(t["allowed-ips"])?t["allowed-ips"].join(","):t["allowed-ips"],u=Array.isArray(t.reserved)?t.reserved.join(","):t.reserved;u&&(u=`,reserved=[${u}]`);let s=t["preshared-key"]??t["pre-shared-key"];s&&(s=`,preshared-key="${s}"`),e.append(`,peers=[{public-key="${t["public-key"]}",allowed-ips="${n??"0.0.0.0/0,::/0"}",endpoint=${t.server}:${t.port}${u??""}${s??""}}]`);let p=vu[t["ip-version"]]||t["ip-version"];return e.appendIfPresent(`,ip-mode=${p}`,"ip-version"),t["block-quic"]==="on"?e.append(",block-quic=true"):t["block-quic"]==="off"&&e.append(",block-quic=false"),e.toString()}function Sk(t){if(t["obfs-password"]&&t.obfs!="salamander")throw new Error("only salamander obfs is supported");let e=new ht(t);e.append(`${t.name}=Hysteria2,${t.server},${t.port}`),e.appendIfPresent(`,"${t.password}"`,"password"),e.appendIfPresent(`,tls-name=${t.sni}`,"sni"),e.appendIfPresent(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),e.appendIfPresent(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),e.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),t["obfs-password"]&&t.obfs=="salamander"&&e.append(`,salamander-password=${t["obfs-password"]}`),e.appendIfPresent(`,fast-open=${t.tfo}`,"tfo"),t["block-quic"]==="on"?e.append(",block-quic=true"):t["block-quic"]==="off"&&e.append(",block-quic=false"),t.udp&&e.append(",udp=true"),e.appendIfPresent(`,download-bandwidth=${`${t.down}`.match(/\d+/)?.[0]||0}`,"down"),e.appendIfPresent(`,ecn=${t.ecn}`,"ecn");let n=vu[t["ip-version"]]||t["ip-version"];return e.appendIfPresent(`,ip-mode=${n}`,"ip-version"),e.toString()}var RX=Yr(rS());function nS(t){let e="none",n=t["reality-opts"],u="",s="",p="";if(n){e="reality";let it=t["reality-opts"]?.["public-key"];it&&(s=`&pbk=${encodeURIComponent(it)}`);let q=t["reality-opts"]?.["short-id"];q&&(u=`&sid=${encodeURIComponent(q)}`);let L=t["reality-opts"]?.["_spider-x"];L&&(p=`&spx=${encodeURIComponent(L)}`)}else t.tls&&(e="tls");let y="";t.alpn&&(y=`&alpn=${encodeURIComponent(Array.isArray(t.alpn)?t.alpn:t.alpn.join(","))}`);let g="";t["skip-cert-verify"]&&(g="&allowInsecure=1");let E="";t.sni&&(E=`&sni=${encodeURIComponent(t.sni)}`);let m="";t["client-fingerprint"]&&(m=`&fp=${encodeURIComponent(t["client-fingerprint"])}`);let D="";t.flow&&(D=`&flow=${encodeURIComponent(t.flow)}`);let a="";t._extra&&(a=`&extra=${encodeURIComponent(t._extra)}`);let H="";t._mode&&(H=`&mode=${encodeURIComponent(t._mode)}`);let W="";t._pqv&&(W=`&pqv=${encodeURIComponent(t._pqv)}`);let w="";t.encryption&&(w=`&encryption=${encodeURIComponent(t.encryption)}`);let U=t.network;t.network==="ws"&&t["ws-opts"]?.["v2ray-http-upgrade"]&&(U="httpupgrade");let tt=`&type=${encodeURIComponent(U)}`;if(["grpc"].includes(t.network)){tt+=`&mode=${encodeURIComponent(t[`${t.network}-opts`]?.["_grpc-type"]||"gun")}`;let it=t[`${t.network}-opts`]?.["_grpc-authority"];it&&(tt+=`&authority=${encodeURIComponent(it)}`)}let J=t[`${t.network}-opts`]?.[`${t.network}-service-name`],N=t[`${t.network}-opts`]?.path,Q=t[`${t.network}-opts`]?.headers?.Host;return N&&(tt+=`&path=${encodeURIComponent(Array.isArray(N)?N[0]:N)}`),Q&&(tt+=`&host=${encodeURIComponent(Array.isArray(Q)?Q[0]:Q)}`),J&&(tt+=`&serviceName=${encodeURIComponent(J)}`),t.network==="kcp"&&(t.seed&&(tt+=`&seed=${encodeURIComponent(t.seed)}`),t.headerType&&(tt+=`&headerType=${encodeURIComponent(t.headerType)}`)),`vless://${t.uuid}@${t.server}:${t.port}?security=${encodeURIComponent(e)}${tt}${y}${g}${E}${m}${D}${u}${p}${s}${H}${a}${W}${w}#${encodeURIComponent(t.name)}`}function Yl(){return{type:"SINGLE",produce:t=>{let e="";delete t.subName,delete t.collectionName,delete t.id,delete t.resolved,delete t["no-resolve"];for(let n in t)t[n]==null&&delete t[n];switch(["trojan","tuic","hysteria","hysteria2","juicity","anytls"].includes(t.type)&&delete t.tls,!["vmess"].includes(t.type)&&t.server&&Mr(t.server)&&(t.server=`[${t.server}]`),t.type){case"socks5":e=`socks://${encodeURIComponent(ft.encode(`${t.username??""}:${t.password??""}`))}@${t.server}:${t.port}#${t.name}`;break;case"ss":let n=`${t.cipher}:${t.password}`;if(e=`ss://${t.cipher?.startsWith("2022-blake3-")?`${encodeURIComponent(t.cipher)}:${encodeURIComponent(t.password)}`:ft.encode(n)}@${t.server}:${t.port}${t.plugin?"/":""}`,t.plugin){e+="?plugin=";let mt=t["plugin-opts"];switch(t.plugin){case"obfs":e+=encodeURIComponent(`simple-obfs;obfs=${mt.mode}${mt.host?";obfs-host="+mt.host:""}`);break;case"v2ray-plugin":e+=encodeURIComponent(`v2ray-plugin;obfs=${mt.mode}${mt.host?";obfs-host"+mt.host:""}${mt.tls?";tls":""}`);break;case"shadow-tls":e+=encodeURIComponent(`shadow-tls;host=${mt.host};password=${mt.password};version=${mt.version}`);break;default:throw new Error(`Unsupported plugin option: ${t.plugin}`)}}t["udp-over-tcp"]&&(e=`${e}${t.plugin?"&":"?"}uot=1`),t.tfo&&(e=`${e}${t.plugin||t["udp-over-tcp"]?"&":"?"}tfo=1`),e+=`#${encodeURIComponent(t.name)}`;break;case"ssr":e=`${t.server}:${t.port}:${t.protocol}:${t.cipher}:${t.obfs}:${ft.encode(t.password)}/`,e+=`?remarks=${ft.encode(t.name)}${t["obfs-param"]?"&obfsparam="+ft.encode(t["obfs-param"]):""}${t["protocol-param"]?"&protocolparam="+ft.encode(t["protocol-param"]):""}`,e="ssr://"+ft.encode(e);break;case"vmess":let u="",s=t.network||"tcp";if(t.network==="http"?(s="tcp",u="http"):t.network==="ws"&&t["ws-opts"]?.["v2ray-http-upgrade"]&&(s="httpupgrade"),e={v:"2",ps:t.name,add:t.server,port:`${t.port}`,id:t.uuid,aid:`${t.alterId||0}`,scy:t.cipher,net:s,type:u,tls:t.tls?"tls":"",alpn:Array.isArray(t.alpn)?t.alpn.join(","):t.alpn,fp:t["client-fingerprint"]},t.tls&&t.sni&&(e.sni=t.sni),t.network){let mt=t[`${t.network}-opts`]?.path,Rt=t[`${t.network}-opts`]?.headers?.Host;["grpc"].includes(t.network)?(e.path=t[`${t.network}-opts`]?.["grpc-service-name"],e.type=t[`${t.network}-opts`]?.["_grpc-type"]||"gun",e.host=t[`${t.network}-opts`]?.["_grpc-authority"]):["kcp","quic"].includes(t.network)?(e.type=t[`${t.network}-opts`]?.[`_${t.network}-type`]||"none",e.host=t[`${t.network}-opts`]?.[`_${t.network}-host`],e.path=t[`${t.network}-opts`]?.[`_${t.network}-path`]):(mt&&(e.path=Array.isArray(mt)?mt[0]:mt),Rt&&(e.host=Array.isArray(Rt)?Rt[0]:Rt))}e="vmess://"+ft.encode(JSON.stringify(e));break;case"vless":e=nS(t);break;case"trojan":let p="";if(t.network){let mt=t.network;if(t.network==="ws"&&t["ws-opts"]?.["v2ray-http-upgrade"]&&(mt="httpupgrade"),p=`&type=${encodeURIComponent(mt)}`,["grpc"].includes(t.network)){let vt=t[`${t.network}-opts`]?.[`${t.network}-service-name`],wt=t[`${t.network}-opts`]?.["_grpc-authority"];vt&&(p+=`&serviceName=${encodeURIComponent(vt)}`),wt&&(p+=`&authority=${encodeURIComponent(wt)}`),p+=`&mode=${encodeURIComponent(t[`${t.network}-opts`]?.["_grpc-type"]||"gun")}`}let Rt=t[`${t.network}-opts`]?.path,Et=t[`${t.network}-opts`]?.headers?.Host;Rt&&(p+=`&path=${encodeURIComponent(Array.isArray(Rt)?Rt[0]:Rt)}`),Et&&(p+=`&host=${encodeURIComponent(Array.isArray(Et)?Et[0]:Et)}`)}let y="";t["client-fingerprint"]&&(y=`&fp=${encodeURIComponent(t["client-fingerprint"])}`);let g="";t.alpn&&(g=`&alpn=${encodeURIComponent(Array.isArray(t.alpn)?t.alpn:t.alpn.join(","))}`);let E=t["reality-opts"],m="",D="",a="",H="",W="",w="";if(E){H="&security=reality";let mt=t["reality-opts"]?.["public-key"];mt&&(D=`&pbk=${encodeURIComponent(mt)}`);let Rt=t["reality-opts"]?.["short-id"];Rt&&(m=`&sid=${encodeURIComponent(Rt)}`);let Et=t["reality-opts"]?.["_spider-x"];Et&&(a=`&spx=${encodeURIComponent(Et)}`),t._extra&&(w=`&extra=${encodeURIComponent(t._extra)}`),t._mode&&(W=`&mode=${encodeURIComponent(t._mode)}`)}e=`trojan://${t.password}@${t.server}:${t.port}?sni=${encodeURIComponent(t.sni||t.server)}${t["skip-cert-verify"]?"&allowInsecure=1":""}${p}${g}${y}${H}${m}${D}${a}${W}${w}#${encodeURIComponent(t.name)}`;break;case"hysteria2":let U=[];t["hop-interval"]&&U.push(`hop-interval=${t["hop-interval"]}`),t.keepalive&&U.push(`keepalive=${t.keepalive}`),t["skip-cert-verify"]&&U.push("insecure=1"),t.obfs&&(U.push(`obfs=${encodeURIComponent(t.obfs)}`),t["obfs-password"]&&U.push(`obfs-password=${encodeURIComponent(t["obfs-password"])}`)),t.sni&&U.push(`sni=${encodeURIComponent(t.sni)}`),t.ports&&U.push(`mport=${t.ports}`),t["tls-fingerprint"]&&U.push(`pinSHA256=${encodeURIComponent(t["tls-fingerprint"])}`),t.tfo&&U.push("fastopen=1"),e=`hysteria2://${encodeURIComponent(t.password)}@${t.server}:${t.port}?${U.join("&")}#${encodeURIComponent(t.name)}`;break;case"hysteria":let tt=[];Object.keys(t).forEach(mt=>{if(!["name","type","server","port"].includes(mt)){let Rt=mt.replace(/-/,"_");["alpn"].includes(mt)?t[mt]&&tt.push(`${Rt}=${encodeURIComponent(Array.isArray(t[mt])?t[mt][0]:t[mt])}`):["skip-cert-verify"].includes(mt)?t[mt]&&tt.push("insecure=1"):["tfo","fast-open"].includes(mt)?t[mt]&&!tt.includes("fastopen=1")&&tt.push("fastopen=1"):["ports"].includes(mt)?tt.push(`mport=${t[mt]}`):["auth-str"].includes(mt)?tt.push(`auth=${t[mt]}`):["up"].includes(mt)?tt.push(`upmbps=${t[mt]}`):["down"].includes(mt)?tt.push(`downmbps=${t[mt]}`):["_obfs"].includes(mt)?tt.push(`obfs=${t[mt]}`):["obfs"].includes(mt)?tt.push(`obfsParam=${t[mt]}`):["sni"].includes(mt)?tt.push(`peer=${t[mt]}`):t[mt]&&!/^_/i.test(mt)&&tt.push(`${Rt}=${encodeURIComponent(t[mt])}`)}}),e=`hysteria://${t.server}:${t.port}?${tt.join("&")}#${encodeURIComponent(t.name)}`;break;case"tuic":if(!t.token||t.token.length===0){let mt=[];Object.keys(t).forEach(Rt=>{if(!["name","type","uuid","password","server","port","tls"].includes(Rt)){let Et=Rt.replace(/-/,"_");["alpn"].includes(Rt)?t[Rt]&&mt.push(`${Et}=${encodeURIComponent(Array.isArray(t[Rt])?t[Rt][0]:t[Rt])}`):["skip-cert-verify"].includes(Rt)?t[Rt]&&mt.push("allow_insecure=1"):["tfo","fast-open"].includes(Rt)?t[Rt]&&!mt.includes("fast_open=1")&&mt.push("fast_open=1"):["disable-sni","reduce-rtt"].includes(Rt)&&t[Rt]?mt.push(`${Et.replace(/-/g,"_")}=1`):["congestion-controller"].includes(Rt)?mt.push(`congestion_control=${t[Rt]}`):t[Rt]&&!/^_/i.test(Rt)&&mt.push(`${Et.replace(/-/g,"_")}=${encodeURIComponent(t[Rt])}`)}}),e=`tuic://${encodeURIComponent(t.uuid)}:${encodeURIComponent(t.password)}@${t.server}:${t.port}?${mt.join("&")}#${encodeURIComponent(t.name)}`}break;case"anytls":e=nS({...t,uuid:t.password,network:t.network||"tcp"}).replace("vless","anytls");let J=[];Object.keys(t).forEach(mt=>{if(!["name","type","password","server","port","tls"].includes(mt)){let Rt=mt.replace(/-/,"_");["alpn"].includes(mt)?t[mt]&&J.push(`${Rt}=${encodeURIComponent(Array.isArray(t[mt])?t[mt][0]:t[mt])}`):["skip-cert-verify"].includes(mt)?t[mt]&&J.push("insecure=1"):["udp"].includes(mt)?t[mt]&&J.push("udp=1"):t[mt]&&!/^_|client-fingerprint/i.test(mt)&&["number","string","boolean"].includes(typeof t[mt])&&J.push(`${Rt.replace(/-/g,"_")}=${encodeURIComponent(t[mt])}`)}});let N=e.split("?"),Q=N[0],it={};N.length>1&&N[1].split("#")[0].split("&").forEach(mt=>{let[Rt,Et]=mt.split("=");Rt&&(it[Rt]=Et)}),J.forEach(mt=>{let[Rt,Et]=mt.split("=");Rt&&(it[Rt]=Et)});let q=Object.keys(it).map(mt=>`${mt}=${it[mt]}`).join("&"),L=e.match(/#(.*)$/),V=L?`#${L[1]}`:"";e=`${Q}?${q}${V}`;break;case"wireguard":let lt=[];Object.keys(t).forEach(mt=>{["name","type","server","port","ip","ipv6","private-key"].includes(mt)||(["public-key"].includes(mt)?lt.push(`publickey=${t[mt]}`):["udp"].includes(mt)?t[mt]&&lt.push(`${mt}=1`):t[mt]&&!/^_/i.test(mt)&&lt.push(`${mt}=${encodeURIComponent(t[mt])}`))}),t.ip&&t.ipv6?lt.push(`address=${t.ip}/32,${t.ipv6}/128`):t.ip?lt.push(`address=${t.ip}/32`):t.ipv6&&lt.push(`address=${t.ipv6}/128`),e=`wireguard://${encodeURIComponent(t["private-key"])}@${t.server}:${t.port}/?${lt.join("&")}#${encodeURIComponent(t.name)}`;break}return e}}}var qM=Yl();function Th(){return{type:"ALL",produce:t=>{let e=[];return t.map(n=>{try{e.push(qM.produce(n))}catch(u){R.error(`Cannot produce proxy: ${JSON.stringify(n,null,2)}
Reason: ${u}`)}}),ft.encode(e.join(`
`))}}}var $2="QX";function Nh(){let t=(e,n,u={})=>{switch(e.type){case"ss":return VM(e);case"ssr":return KM(e);case"trojan":return zM(e);case"vmess":return GM(e);case"http":return WM(e);case"socks5":return XM(e);case"vless":return YM(e)}throw new Error(`Platform ${$2} does not support proxy type: ${e.type}`)};return{produce:(e,n,u={})=>{let s=t(e,n,u);if(u["include-unsupported-proxy"]){if(e.flow&&e.flow!=="xtls-rprx-vision")throw new Error(`Platform ${$2} does not support flow ${e.flow}`);e["reality-opts"]&&(e["reality-opts"]["public-key"]&&(s=`${s},reality-base64-pubkey=${e["reality-opts"]["public-key"]}`),e["reality-opts"]["short-id"]&&(s=`${s},reality-hex-shortid=${e["reality-opts"]["short-id"]}`))}else if(typeof e.flow<"u"||e["reality-opts"])throw new Error(`Platform ${$2} does not support XTLS/REALITY`);return s}}}function VM(t){let e=new ht(t),n=e.append.bind(e),u=e.appendIfPresent.bind(e);if(t.cipher||(t.cipher="none"),!["none","rc4-md5","rc4-md5-6","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","cast5-cfb","des-cfb","rc2-cfb","salsa20","chacha20","chacha20-ietf","aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(t.cipher))throw new Error(`cipher ${t.cipher} is not supported`);if(n(`shadowsocks=${t.server}:${t.port}`),n(`,method=${t.cipher}`),n(`,password=${t.password}`),is(t)&&(t.tls=!0),ue(t,"plugin")){if(t.plugin==="obfs"){let s=t["plugin-opts"];n(`,obfs=${s.mode}`)}else if(t.plugin==="v2ray-plugin"&&t["plugin-opts"].mode==="websocket")t["plugin-opts"].tls?n(",obfs=wss"):n(",obfs=ws");else throw new Error("plugin is not supported");u(`,obfs-host=${t["plugin-opts"].host}`,"plugin-opts.host"),u(`,obfs-uri=${t["plugin-opts"].path}`,"plugin-opts.path")}return is(t)&&(u(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),u(`,tls-alpn=${t["tls-alpn"]}`,"tls-alpn"),u(`,tls-no-session-ticket=${t["tls-no-session-ticket"]}`,"tls-no-session-ticket"),u(`,tls-no-session-reuse=${t["tls-no-session-reuse"]}`,"tls-no-session-reuse"),u(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),u(`,tls-verification=${!t["skip-cert-verify"]}`,"skip-cert-verify"),u(`,tls-host=${t.sni}`,"sni")),u(`,fast-open=${t.tfo}`,"tfo"),u(`,udp-relay=${t.udp}`,"udp"),t._ssr_python_uot?n(",udp-over-tcp=true"):t["udp-over-tcp"]&&(!t["udp-over-tcp-version"]||t["udp-over-tcp-version"]===1?n(",udp-over-tcp=sp.v1"):t["udp-over-tcp-version"]===2&&n(",udp-over-tcp=sp.v2")),e.appendIfPresent(`,server_check_url=${t["test-url"]}`,"test-url"),n(`,tag=${t.name}`),e.toString()}function KM(t){let e=new ht(t),n=e.append.bind(e),u=e.appendIfPresent.bind(e);return n(`shadowsocks=${t.server}:${t.port}`),n(`,method=${t.cipher}`),n(`,password=${t.password}`),n(`,ssr-protocol=${t.protocol}`),u(`,ssr-protocol-param=${t["protocol-param"]}`,"protocol-param"),u(`,obfs=${t.obfs}`,"obfs"),u(`,obfs-host=${t["obfs-param"]}`,"obfs-param"),u(`,fast-open=${t.tfo}`,"tfo"),u(`,udp-relay=${t.udp}`,"udp"),e.appendIfPresent(`,server_check_url=${t["test-url"]}`,"test-url"),n(`,tag=${t.name}`),e.toString()}function zM(t){let e=new ht(t),n=e.append.bind(e),u=e.appendIfPresent.bind(e);if(n(`trojan=${t.server}:${t.port}`),n(`,password=${t.password}`),ue(t,"network"))if(t.network==="ws")is(t)?n(",obfs=wss"):n(",obfs=ws"),u(`,obfs-uri=${t["ws-opts"]?.path}`,"ws-opts.path"),u(`,obfs-host=${t["ws-opts"]?.headers?.Host}`,"ws-opts.headers.Host");else throw new Error(`network ${t.network} is unsupported`);return t.network!=="ws"&&is(t)&&n(",over-tls=true"),is(t)&&(u(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),u(`,tls-alpn=${t["tls-alpn"]}`,"tls-alpn"),u(`,tls-no-session-ticket=${t["tls-no-session-ticket"]}`,"tls-no-session-ticket"),u(`,tls-no-session-reuse=${t["tls-no-session-reuse"]}`,"tls-no-session-reuse"),u(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),u(`,tls-verification=${!t["skip-cert-verify"]}`,"skip-cert-verify"),u(`,tls-host=${t.sni}`,"sni")),u(`,fast-open=${t.tfo}`,"tfo"),u(`,udp-relay=${t.udp}`,"udp"),e.appendIfPresent(`,server_check_url=${t["test-url"]}`,"test-url"),n(`,tag=${t.name}`),e.toString()}function GM(t){let e=new ht(t),n=e.append.bind(e),u=e.appendIfPresent.bind(e);n(`vmess=${t.server}:${t.port}`);let s;if(t.cipher==="auto"?s="chacha20-ietf-poly1305":s=t.cipher,n(`,method=${s}`),n(`,password=${t.uuid}`),is(t)&&(t.tls=!0),ue(t,"network")){if(t.network==="ws")t.tls?n(",obfs=wss"):n(",obfs=ws");else if(t.network==="http")n(",obfs=http");else throw new Error(`network ${t.network} is unsupported`);let p=t[`${t.network}-opts`]?.path,y=t[`${t.network}-opts`]?.headers?.Host;u(`,obfs-uri=${Array.isArray(p)?p[0]:p}`,`${t.network}-opts.path`),u(`,obfs-host=${Array.isArray(y)?y[0]:y}`,`${t.network}-opts.headers.Host`)}else t.tls&&n(",obfs=over-tls");return is(t)&&(u(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),u(`,tls-alpn=${t["tls-alpn"]}`,"tls-alpn"),u(`,tls-no-session-ticket=${t["tls-no-session-ticket"]}`,"tls-no-session-ticket"),u(`,tls-no-session-reuse=${t["tls-no-session-reuse"]}`,"tls-no-session-reuse"),u(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),u(`,tls-verification=${!t["skip-cert-verify"]}`,"skip-cert-verify"),u(`,tls-host=${t.sni}`,"sni")),ue(t,"aead")?n(`,aead=${t.aead}`):n(`,aead=${t.alterId===0}`),u(`,fast-open=${t.tfo}`,"tfo"),u(`,udp-relay=${t.udp}`,"udp"),e.appendIfPresent(`,server_check_url=${t["test-url"]}`,"test-url"),n(`,tag=${t.name}`),e.toString()}function YM(t){if(t.encryption&&t.encryption!=="none")throw new Error("VLESS encryption is not supported");let e=new ht(t),n=e.append.bind(e),u=e.appendIfPresent.bind(e);if(n(`vless=${t.server}:${t.port}`),n(",method=none"),n(`,password=${t.uuid}`),is(t)&&(t.tls=!0),ue(t,"network")){if(t.network==="ws")t.tls?n(",obfs=wss"):n(",obfs=ws");else if(t.network==="http")n(",obfs=http");else if(["tcp"].includes(t.network))t.tls&&n(",obfs=over-tls");else if(!["tcp"].includes(t.network))throw new Error(`network ${t.network} is unsupported`);let s=t[`${t.network}-opts`]?.path,p=t[`${t.network}-opts`]?.headers?.Host;u(`,obfs-uri=${Array.isArray(s)?s[0]:s}`,`${t.network}-opts.path`),u(`,obfs-host=${Array.isArray(p)?p[0]:p}`,`${t.network}-opts.headers.Host`)}else t.tls&&n(",obfs=over-tls");return is(t)&&(u(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),u(`,tls-alpn=${t["tls-alpn"]}`,"tls-alpn"),u(`,tls-no-session-ticket=${t["tls-no-session-ticket"]}`,"tls-no-session-ticket"),u(`,tls-no-session-reuse=${t["tls-no-session-reuse"]}`,"tls-no-session-reuse"),u(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),u(`,tls-verification=${!t["skip-cert-verify"]}`,"skip-cert-verify"),u(`,tls-host=${t.sni}`,"sni")),u(`,vless-flow=${t.flow}`,"flow"),u(`,fast-open=${t.tfo}`,"tfo"),u(`,udp-relay=${t.udp}`,"udp"),e.appendIfPresent(`,server_check_url=${t["test-url"]}`,"test-url"),n(`,tag=${t.name}`),e.toString()}function WM(t){let e=new ht(t),n=e.append.bind(e),u=e.appendIfPresent.bind(e);return n(`http=${t.server}:${t.port}`),u(`,username=${t.username}`,"username"),u(`,password=${t.password}`,"password"),is(t)&&(t.tls=!0),u(`,over-tls=${t.tls}`,"tls"),is(t)&&(u(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),u(`,tls-alpn=${t["tls-alpn"]}`,"tls-alpn"),u(`,tls-no-session-ticket=${t["tls-no-session-ticket"]}`,"tls-no-session-ticket"),u(`,tls-no-session-reuse=${t["tls-no-session-reuse"]}`,"tls-no-session-reuse"),u(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),u(`,tls-verification=${!t["skip-cert-verify"]}`,"skip-cert-verify"),u(`,tls-host=${t.sni}`,"sni")),u(`,fast-open=${t.tfo}`,"tfo"),u(`,udp-relay=${t.udp}`,"udp"),e.appendIfPresent(`,server_check_url=${t["test-url"]}`,"test-url"),n(`,tag=${t.name}`),e.toString()}function XM(t){let e=new ht(t),n=e.append.bind(e),u=e.appendIfPresent.bind(e);return n(`socks5=${t.server}:${t.port}`),u(`,username=${t.username}`,"username"),u(`,password=${t.password}`,"password"),is(t)&&(t.tls=!0),u(`,over-tls=${t.tls}`,"tls"),is(t)&&(u(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),u(`,tls-alpn=${t["tls-alpn"]}`,"tls-alpn"),u(`,tls-no-session-ticket=${t["tls-no-session-ticket"]}`,"tls-no-session-ticket"),u(`,tls-no-session-reuse=${t["tls-no-session-reuse"]}`,"tls-no-session-reuse"),u(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),u(`,tls-verification=${!t["skip-cert-verify"]}`,"skip-cert-verify"),u(`,tls-host=${t.sni}`,"sni")),u(`,fast-open=${t.tfo}`,"tfo"),u(`,udp-relay=${t.udp}`,"udp"),e.appendIfPresent(`,server_check_url=${t["test-url"]}`,"test-url"),n(`,tag=${t.name}`),e.toString()}function is(t){return t.tls}function kh(){return{type:"ALL",produce:(t,e,n={})=>{let u=t.filter(s=>n["include-unsupported-proxy"]?!0:s.type==="snell"&&s.version>=4||["mieru","sudoku","naive"].includes(s.type)||s.encryption&&s.encryption!=="none"&&["vless"].includes(s.type)||["anytls"].includes(s.type)&&s.network&&(!["tcp"].includes(s.network)||["tcp"].includes(s.network)&&s["reality-opts"])?!1:!["xhttp"].includes(s.network)).map(s=>{if(s.type==="vmess"?(ue(s,"aead")&&(s.aead&&(s.alterId=0),delete s.aead),ue(s,"sni")&&(s.servername=s.sni,delete s.sni),ue(s,"cipher")&&!["auto","none","zero","aes-128-gcm","chacha20-poly1305"].includes(s.cipher)&&(s.cipher="auto")):s.type==="tuic"?(ue(s,"alpn")&&(s.alpn=Array.isArray(s.alpn)?s.alpn:[s.alpn]),ue(s,"tfo")&&!ue(s,"fast-open")&&(s["fast-open"]=s.tfo),(!s.token||s.token.length===0)&&!ue(s,"version")&&(s.version=5)):s.type==="hysteria"?(ue(s,"auth_str")&&!ue(s,"auth-str")&&(s["auth-str"]=s.auth_str),ue(s,"alpn")&&(s.alpn=Array.isArray(s.alpn)?s.alpn:[s.alpn]),ue(s,"tfo")&&!ue(s,"fast-open")&&(s["fast-open"]=s.tfo)):s.type==="hysteria2"?(ue(s,"alpn")&&(s.alpn=Array.isArray(s.alpn)?s.alpn:[s.alpn]),ue(s,"tfo")&&!ue(s,"fast-open")&&(s["fast-open"]=s.tfo)):s.type==="wireguard"?(s.keepalive=s.keepalive??s["persistent-keepalive"],s["persistent-keepalive"]=s.keepalive,s["preshared-key"]=s["preshared-key"]??s["pre-shared-key"],s["pre-shared-key"]=s["preshared-key"]):s.type==="snell"&&s.version<3?delete s.udp:s.type==="vless"?ue(s,"sni")&&(s.servername=s.sni,delete s.sni):s.type==="ss"&&ue(s,"shadow-tls-password")&&!ue(s,"plugin")&&(s.plugin="shadow-tls",s["plugin-opts"]={host:s["shadow-tls-sni"],password:s["shadow-tls-password"],version:s["shadow-tls-version"]},delete s["shadow-tls-password"],delete s["shadow-tls-sni"],delete s["shadow-tls-version"]),["vmess","vless"].includes(s.type)&&s.network==="http"){let p=s["http-opts"]?.path;ue(s,"http-opts.path")&&!Array.isArray(p)&&(s["http-opts"].path=[p]);let y=s["http-opts"]?.headers?.Host;ue(s,"http-opts.headers.Host")&&!Array.isArray(y)&&(s["http-opts"].headers.Host=[y])}if(["vmess","vless"].includes(s.type)&&s.network==="h2"){let p=s["h2-opts"]?.path;ue(s,"h2-opts.path")&&Array.isArray(p)&&(s["h2-opts"].path=p[0]);let y=s["h2-opts"]?.headers?.host;ue(s,"h2-opts.headers.Host")&&!Array.isArray(y)&&(s["h2-opts"].headers.host=[y])}if(["ws"].includes(s.network)){let p=s[`${s.network}-opts`]?.path;if(p){let y=/^(.*?)(?:\?ed=(\d+))?$/,[g,E="",m=""]=y.exec(p);s[`${s.network}-opts`].path=E,m!==""&&(s["ws-opts"]["early-data-header-name"]="Sec-WebSocket-Protocol",s["ws-opts"]["max-early-data"]=parseInt(m,10))}else s[`${s.network}-opts`]=s[`${s.network}-opts`]||{},s[`${s.network}-opts`].path="/"}if(s["plugin-opts"]?.tls&&ue(s,"skip-cert-verify")&&(s["plugin-opts"]["skip-cert-verify"]=s["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2","juicity","anytls","naive"].includes(s.type)&&delete s.tls,s["tls-fingerprint"]&&(s.fingerprint=s["tls-fingerprint"]),delete s["tls-fingerprint"],s["underlying-proxy"]&&(s["dialer-proxy"]=s["underlying-proxy"]),delete s["underlying-proxy"],ue(s,"tls")&&typeof s.tls!="boolean"&&delete s.tls,delete s.subName,delete s.collectionName,delete s.id,delete s.resolved,delete s["no-resolve"],e!=="internal")for(let p in s)(s[p]==null||/^_/i.test(p))&&delete s[p];return["grpc"].includes(s.network)&&s[`${s.network}-opts`]&&(delete s[`${s.network}-opts`]["_grpc-type"],delete s[`${s.network}-opts`]["_grpc-authority"]),s});return e==="internal"?u:`proxies:
`+u.map(s=>"  - "+JSON.stringify(s)+`
`).join("")}}}var JM="Surfboard";function $p(){return{produce:t=>{switch(t.name=t.name.replace(/=|,/g,""),t.type){case"ss":return ZM(t);case"trojan":return QM(t);case"vmess":return eq(t);case"http":return tq(t);case"socks5":return rq(t);case"wireguard-surge":return nq(t)}throw new Error(`Platform ${JM} does not support proxy type: ${t.type}`)}}}function ZM(t){let e=new ht(t);if(e.append(`${t.name}=${t.type},${t.server},${t.port}`),!["aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","rc4","rc4-md5","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","salsa20","chacha20","chacha20-ietf"].includes(t.cipher))throw new Error(`cipher ${t.cipher} is not supported`);if(e.append(`,encrypt-method=${t.cipher}`),e.appendIfPresent(`,password=${t.password}`,"password"),ue(t,"plugin"))if(t.plugin==="obfs")e.append(`,obfs=${t["plugin-opts"].mode}`),e.appendIfPresent(`,obfs-host=${t["plugin-opts"].host}`,"plugin-opts.host"),e.appendIfPresent(`,obfs-uri=${t["plugin-opts"].path}`,"plugin-opts.path");else throw new Error(`plugin ${t.plugin} is not supported`);return e.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),e.toString()}function QM(t){let e=new ht(t);return e.append(`${t.name}=${t.type},${t.server},${t.port}`),e.appendIfPresent(`,password=${t.password}`,"password"),iS(e,t),e.appendIfPresent(`,tls=${t.tls}`,"tls"),e.appendIfPresent(`,sni=${t.sni}`,"sni"),e.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),e.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),e.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),e.toString()}function eq(t){let e=new ht(t);return e.append(`${t.name}=${t.type},${t.server},${t.port}`),e.appendIfPresent(`,username=${t.uuid}`,"uuid"),iS(e,t),ue(t,"aead")?e.append(`,vmess-aead=${t.aead}`):e.append(`,vmess-aead=${t.alterId===0}`),e.appendIfPresent(`,tls=${t.tls}`,"tls"),e.appendIfPresent(`,sni=${t.sni}`,"sni"),e.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),e.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),e.toString()}function tq(t){let e=new ht(t),n=t.tls?"https":"http";return e.append(`${t.name}=${n},${t.server},${t.port}`),e.appendIfPresent(`,${t.username}`,"username"),e.appendIfPresent(`,${t.password}`,"password"),e.appendIfPresent(`,sni=${t.sni}`,"sni"),e.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),e.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),e.toString()}function rq(t){let e=new ht(t),n=t.tls?"socks5-tls":"socks5";return e.append(`${t.name}=${n},${t.server},${t.port}`),e.appendIfPresent(`,${t.username}`,"username"),e.appendIfPresent(`,${t.password}`,"password"),e.appendIfPresent(`,sni=${t.sni}`,"sni"),e.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),e.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),e.toString()}function nq(t){let e=new ht(t);return e.append(`${t.name}=wireguard`),e.appendIfPresent(`,section-name=${t["section-name"]}`,"section-name"),e.toString()}function iS(t,e){if(ue(e,"network"))if(e.network==="ws"){if(t.append(",ws=true"),ue(e,"ws-opts")&&(t.appendIfPresent(`,ws-path=${e["ws-opts"].path}`,"ws-opts.path"),ue(e,"ws-opts.headers"))){let n=e["ws-opts"].headers,u=Object.keys(n).map(s=>{let p=n[s];return["Host"].includes(s)&&(p=`"${p}"`),`${s}:${p}`}).join("|");ca(u)&&t.append(`,ws-headers=${u}`)}}else throw new Error(`network ${e.network} is unsupported`)}var iq={ipv4:"ipv4_only",ipv6:"ipv6_only","v4-only":"ipv4_only","v6-only":"ipv6_only","ipv4-prefer":"prefer_ipv4","ipv6-prefer":"prefer_ipv6","prefer-v4":"prefer_ipv4","prefer-v6":"prefer_ipv6"},pi=(t,e)=>{let n=iq[t["ip-version"]];t._dns_server&&n&&(e.domain_resolver={server:t._dns_server,strategy:n})},gi=(t,e)=>{e.detour=t["dialer-proxy"]||t.detour},Oa=(t,e)=>{["tcp","udp"].includes(t._network)&&(e.network=t._network)},ki=(t,e)=>{e.tcp_fast_open=!1,t.tfo&&(e.tcp_fast_open=!0),t.tcp_fast_open&&(e.tcp_fast_open=!0),t["tcp-fast-open"]&&(e.tcp_fast_open=!0),e.tcp_fast_open||delete e.tcp_fast_open},Ks=(t,e)=>{!t||!t.enabled||(e.multiplex={enabled:!0},e.multiplex.protocol=t.protocol,t["max-connections"]&&(e.multiplex.max_connections=parseInt(`${t["max-connections"]}`,10)),t["max-streams"]&&(e.multiplex.max_streams=parseInt(`${t["max-streams"]}`,10)),t["min-streams"]&&(e.multiplex.min_streams=parseInt(`${t["min-streams"]}`,10)),t.padding&&(e.multiplex.padding=!0),(t["brutal-opts"]?.up||t["brutal-opts"]?.down)&&(e.multiplex.brutal={enabled:!0},t["brutal-opts"]?.up&&(e.multiplex.brutal.up_mbps=parseInt(`${t["brutal-opts"]?.up}`,10)),t["brutal-opts"]?.down&&(e.multiplex.brutal.down_mbps=parseInt(`${t["brutal-opts"]?.down}`,10))))},R2=(t,e)=>{let n={type:"ws",headers:{}};if(t["ws-opts"]){let{path:u="",headers:s={},"max-early-data":p,"early-data-header-name":y}=t["ws-opts"];if(n.early_data_header_name=y,n.max_early_data=p?parseInt(p,10):void 0,u!==""&&(n.path=`${u}`),Object.keys(s).length>0){let g={};for(let m of Object.keys(s)){let D=s[m];D!==""&&(Array.isArray(D)||(D=[`${D}`]),D.length>0&&(g[m]=D))}let{Host:E}=g;if(E.length===1)for(let m of`Host:${E[0]}`.split(`
`)){let[D,a]=m.split(":");a.trim()!==""&&(g[D.trim()]=a.trim().split(","))}n.headers=g}}if(t["ws-headers"]){let u={};for(let p of Object.keys(t["ws-headers"])){let y=t["ws-headers"][p];y!==""&&(Array.isArray(y)||(y=[`${y}`]),y.length>0&&(u[p]=y))}let{Host:s}=u;if(s.length===1)for(let p of`Host:${s[0]}`.split(`
`)){let[y,g]=p.split(":");g.trim()!==""&&(u[y.trim()]=g.trim().split(","))}for(let p of Object.keys(u))n.headers[p]=u[p]}if(t["ws-path"]&&t["ws-path"]!==""&&(n.path=`${t["ws-path"]}`),n.path){let u=/^(.*?)(?:\?ed=(\d+))?$/,[s,p="",y=""]=u.exec(n.path);n.path=p,y!==""&&(n.early_data_header_name="Sec-WebSocket-Protocol",n.max_early_data=parseInt(y,10))}e.tls.insecure&&(e.tls.server_name=n.headers.Host[0]),t["ws-opts"]&&t["ws-opts"]["v2ray-http-upgrade"]&&(n.type="httpupgrade",n.headers.Host&&(n.host=n.headers.Host[0],delete n.headers.Host),n.max_early_data&&delete n.max_early_data,n.early_data_header_name&&delete n.early_data_header_name);for(let u of Object.keys(n.headers)){let s=n.headers[u];s.length===1&&(n.headers[u]=s[0])}e.transport=n},sS=(t,e)=>{let n={type:"http",headers:{}};if(t["http-opts"]){let{method:u="",path:s="",headers:p={}}=t["http-opts"];u!==""&&(n.method=u),Array.isArray(s)?n.path=`${s[0]}`:s!==""&&(n.path=`${s}`);for(let y of Object.keys(p)){let g=p[y];if(g!==""){if(y.toLowerCase()==="host"){let E=g;Array.isArray(E)||(E=`${E}`.split(",").map(m=>m.trim())),E.length>0&&(n.host=E);continue}Array.isArray(g)||(g=`${g}`.split(",").map(E=>E.trim())),g.length>0&&(n.headers[y]=g)}}}if(t["http-host"]&&t["http-host"]!==""){let u=t["http-host"];Array.isArray(u)||(u=`${u}`.split(",").map(s=>s.trim())),u.length>0&&(n.host=u)}if(t["http-path"]&&t["http-path"]!==""){let u=t["http-path"];Array.isArray(u)?n.path=`${u[0]}`:u!==""&&(n.path=`${u}`)}e.tls.insecure&&(e.tls.server_name=n.host[0]),n.host?.length===1&&(n.host=n.host[0]);for(let u of Object.keys(n.headers)){let s=n.headers[u];s.length===1&&(n.headers[u]=s[0])}e.transport=n},aS=(t,e)=>{let n={type:"http"};if(t["h2-opts"]){let{host:u="",path:s=""}=t["h2-opts"];s!==""&&(n.path=`${s}`),u!==""&&(Array.isArray(u)||(u=`${u}`.split(",").map(p=>p.trim())),u.length>0&&(n.host=u))}if(t["h2-host"]&&t["h2-host"]!==""){let u=t["h2-host"];Array.isArray(u)||(u=`${u}`.split(",").map(s=>s.trim())),u.length>0&&(n.host=u)}t["h2-path"]&&t["h2-path"]!==""&&(n.path=`${t["h2-path"]}`),e.tls.enabled=!0,e.tls.insecure&&(e.tls.server_name=n.host[0]),n.host.length===1&&(n.host=n.host[0]),e.transport=n},P2=(t,e)=>{let n={type:"grpc"};if(t["grpc-opts"]){let u=t["grpc-opts"]["grpc-service-name"];u!=null&&u!==""&&(n.service_name=`${u}`)}e.transport=n},Du=(t,e)=>{t.tls&&(e.tls.enabled=!0),t.servername&&t.servername!==""&&(e.tls.server_name=t.servername),t.peer&&t.peer!==""&&(e.tls.server_name=t.peer),t.sni&&t.sni!==""&&(e.tls.server_name=t.sni),t["skip-cert-verify"]&&(e.tls.insecure=!0),t.insecure&&(e.tls.insecure=!0),t["disable-sni"]&&(e.tls.disable_sni=!0),typeof t.alpn=="string"?e.tls.alpn=[t.alpn]:Array.isArray(t.alpn)&&(e.tls.alpn=t.alpn),t.ca&&(e.tls.certificate_path=`${t.ca}`),t.ca_str&&(e.tls.certificate=[t.ca_str]),t["ca-str"]&&(e.tls.certificate=[t["ca-str"]]),t["reality-opts"]&&(e.tls.reality={enabled:!0},t["reality-opts"]["public-key"]&&(e.tls.reality.public_key=t["reality-opts"]["public-key"]),t["reality-opts"]["short-id"]&&(e.tls.reality.short_id=t["reality-opts"]["short-id"]),e.tls.utls={enabled:!0}),!["hysteria","hysteria2","tuic"].includes(t.type)&&t["client-fingerprint"]&&t["client-fingerprint"]!==""&&(e.tls.utls={enabled:!0,fingerprint:t["client-fingerprint"]}),t._fragment&&(e.tls.fragment=!!t._fragment),t._fragment_fallback_delay&&(e.tls.fragment_fallback_delay=t._fragment_fallback_delay),t._record_fragment&&(e.tls.record_fragment=!!t._record_fragment),t._certificate&&(e.tls.certificate=t._certificate),t._certificate_path&&(e.tls.certificate_path=t._certificate_path),t._certificate_public_key_sha256&&(e.tls.certificate_public_key_sha256=t._certificate_public_key_sha256),t._client_certificate&&(e.tls.client_certificate=t._client_certificate),t._client_certificate_path&&(e.tls.client_certificate_path=t._client_certificate_path),t._client_key&&(e.tls.client_key=t._client_key),t._client_key_path&&(e.tls.client_key_path=t._client_key_path),e.tls.enabled||delete e.tls},sq=(t={})=>{let e={tag:t.name,type:"ssh",server:t.server,server_port:parseInt(`${t.port}`,10)};if(e.server_port<0||e.server_port>65535)throw"invalid port";return t.username&&(e.user=t.username),t.password&&(e.password=t.password),t.privateKey&&(e.private_key_path=t.privateKey),t["private-key"]&&(e.private_key_path=t["private-key"]),t["private-key-passphrase"]&&(e.private_key_passphrase=t["private-key-passphrase"]),t["server-fingerprint"]&&(e.host_key=[t["server-fingerprint"]],e.host_key_algorithms=[t["server-fingerprint"].split(" ")[0]]),t["host-key"]&&(e.host_key=t["host-key"]),t["host-key-algorithms"]&&(e.host_key_algorithms=t["host-key-algorithms"]),t["fast-open"]&&(e.udp_fragment=!0),ki(t,e),gi(t,e),pi(t,e),e},aq=(t={})=>{let e={tag:t.name,type:"http",server:t.server,server_port:parseInt(`${t.port}`,10),tls:{enabled:!1,server_name:t.server,insecure:!1}};if(e.server_port<0||e.server_port>65535)throw"invalid port";if(t.username&&(e.username=t.username),t.password&&(e.password=t.password),t.headers){e.headers={};for(let n of Object.keys(t.headers))e.headers[n]=`${t.headers[n]}`;Object.keys(e.headers).length===0&&delete e.headers}return t["fast-open"]&&(e.udp_fragment=!0),ki(t,e),gi(t,e),Du(t,e),pi(t,e),e},uq=(t={})=>{let e={tag:t.name,type:"socks",server:t.server,server_port:parseInt(`${t.port}`,10),version:"5"};if(e.server_port<0||e.server_port>65535)throw"invalid port";return t.username&&(e.username=t.username),t.password&&(e.password=t.password),t.uot&&(e.udp_over_tcp=!0),t["udp-over-tcp"]&&(e.udp_over_tcp={enabled:!0,version:!t["udp-over-tcp-version"]||t["udp-over-tcp-version"]===1?1:2}),t["fast-open"]&&(e.udp_fragment=!0),Oa(t,e),ki(t,e),gi(t,e),pi(t,e),e},oq=(t={})=>{let e={tag:t.name,type:"shadowsocks",method:t.cipher,password:t.password,detour:`${t.name}_shadowtls`};t.uot&&(e.udp_over_tcp=!0),t["udp-over-tcp"]&&(e.udp_over_tcp={enabled:!0,version:!t["udp-over-tcp-version"]||t["udp-over-tcp-version"]===1?1:2});let n={tag:`${t.name}_shadowtls`,type:"shadowtls",server:t.server,server_port:parseInt(`${t.port}`,10),version:t["plugin-opts"].version,password:t["plugin-opts"].password,tls:{enabled:!0,server_name:t["plugin-opts"].host,utls:{enabled:!0,fingerprint:t["client-fingerprint"]}}};if(n.server_port<0||n.server_port>65535)throw"\u7AEF\u53E3\u503C\u975E\u6CD5";return t["fast-open"]===!0&&(n.udp_fragment=!0),ki(t,n),gi(t,n),Ks(t.smux,e),pi(t,n),{type:"ss-with-st",ssPart:e,stPart:n}},cq=(t={})=>{let e={tag:t.name,type:"shadowsocks",server:t.server,server_port:parseInt(`${t.port}`,10),method:t.cipher,password:t.password};if(e.server_port<0||e.server_port>65535)throw"invalid port";if(t.uot&&(e.udp_over_tcp=!0),t["udp-over-tcp"]&&(e.udp_over_tcp={enabled:!0,version:!t["udp-over-tcp-version"]||t["udp-over-tcp-version"]===1?1:2}),t["fast-open"]&&(e.udp_fragment=!0),Oa(t,e),ki(t,e),gi(t,e),Ks(t.smux,e),pi(t,e),t.plugin){let n=[];t.plugin==="obfs"&&(e.plugin="obfs-local",e.plugin_opts="",t["obfs-host"]&&(t["plugin-opts"].host=t["obfs-host"]),Object.keys(t["plugin-opts"]).forEach(u=>{switch(u){case"mode":n.push(`obfs=${t["plugin-opts"].mode}`);break;case"host":n.push(`obfs-host=${t["plugin-opts"].host}`);break;default:n.push(`${u}=${t["plugin-opts"][u]}`);break}})),t.plugin==="v2ray-plugin"&&(e.plugin="v2ray-plugin",t["ws-host"]&&(t["plugin-opts"].host=t["ws-host"]),t["ws-path"]&&(t["plugin-opts"].path=t["ws-path"]),Object.keys(t["plugin-opts"]).forEach(u=>{switch(u){case"tls":t["plugin-opts"].tls&&n.push("tls");break;case"host":n.push(`host=${t["plugin-opts"].host}`);break;case"path":n.push(`path=${t["plugin-opts"].path}`);break;case"headers":n.push(`headers=${JSON.stringify(t["plugin-opts"].headers)}`);break;case"mux":t["plugin-opts"].mux&&(e.multiplex={enabled:!0});break;default:n.push(`${u}=${t["plugin-opts"][u]}`)}})),e.plugin_opts=n.join(";")}return e},lq=(t={})=>{let e={tag:t.name,type:"shadowsocksr",server:t.server,server_port:parseInt(`${t.port}`,10),method:t.cipher,password:t.password,obfs:t.obfs,protocol:t.protocol};if(e.server_port<0||e.server_port>65535)throw"invalid port";return t["obfs-param"]&&(e.obfs_param=t["obfs-param"]),t["protocol-param"]&&t["protocol-param"]!==""&&(e.protocol_param=t["protocol-param"]),t["fast-open"]&&(e.udp_fragment=!0),ki(t,e),gi(t,e),Ks(t.smux,e),pi(t,e),e},fq=(t={})=>{let e={tag:t.name,type:"vmess",server:t.server,server_port:parseInt(`${t.port}`,10),uuid:t.uuid,security:t.cipher,alter_id:parseInt(`${t.alterId}`,10),tls:{enabled:!1,server_name:t.server,insecure:!1}};if(["auto","none","zero","aes-128-gcm","chacha20-poly1305","aes-128-ctr"].indexOf(e.security)===-1&&(e.security="auto"),e.server_port<0||e.server_port>65535)throw"invalid port";return t.xudp&&(e.packet_encoding="xudp"),t["fast-open"]&&(e.udp_fragment=!0),t.network==="ws"&&R2(t,e),t.network==="h2"&&aS(t,e),t.network==="http"&&sS(t,e),t.network==="grpc"&&P2(t,e),Oa(t,e),ki(t,e),gi(t,e),Du(t,e),Ks(t.smux,e),pi(t,e),e},hq=(t={})=>{let e={tag:t.name,type:"vless",server:t.server,server_port:parseInt(`${t.port}`,10),uuid:t.uuid,tls:{enabled:!1,server_name:t.server,insecure:!1}};if(e.server_port<0||e.server_port>65535)throw"invalid port";return t.xudp&&(e.packet_encoding="xudp"),t["fast-open"]&&(e.udp_fragment=!0),t.flow!=null&&(e.flow=t.flow),t.network==="ws"&&R2(t,e),t.network==="h2"&&aS(t,e),t.network==="http"&&sS(t,e),t.network==="grpc"&&P2(t,e),Oa(t,e),ki(t,e),gi(t,e),Ks(t.smux,e),Du(t,e),pi(t,e),e},dq=(t={})=>{let e={tag:t.name,type:"trojan",server:t.server,server_port:parseInt(`${t.port}`,10),password:t.password,tls:{enabled:!0,server_name:t.server,insecure:!1}};if(e.server_port<0||e.server_port>65535)throw"invalid port";return t["fast-open"]&&(e.udp_fragment=!0),t.network==="grpc"&&P2(t,e),t.network==="ws"&&R2(t,e),Oa(t,e),ki(t,e),gi(t,e),Du(t,e),Ks(t.smux,e),pi(t,e),e},pq=(t={})=>{let e={tag:t.name,type:"naive",server:t.server,server_port:parseInt(`${t.port}`,10),tls:{enabled:!0,server_name:t.server,insecure:!1}};if(e.server_port<0||e.server_port>65535)throw"invalid port";t.username&&(e.username=t.username),t.password&&(e.password=t.password),t.uot&&(e.udp_over_tcp=!0),t["udp-over-tcp"]&&(e.udp_over_tcp={enabled:!0,version:!t["udp-over-tcp-version"]||t["udp-over-tcp-version"]===1?1:2});let n=parseInt(`${t["insecure-concurrency"]}`,10);return Number.isInteger(n)&&n>=0&&(e.insecure_concurrency=n),t["extra-headers"]&&(e.extra_headers=t["extra-headers"]),t.quic&&(e.quic=!!t.quic),t["quic-congestion-control"]&&(e.quic_congestion_control=t["quic-congestion-control"]),t["fast-open"]&&(e.udp_fragment=!0),ki(t,e),gi(t,e),Du(t,e),Ks(t.smux,e),pi(t,e),e.tls?.insecure&&(R.info("Platform sing-box: insecure is not supported on naive outbound"),delete e.tls.insecure),e},gq=(t={})=>{let e={tag:t.name,type:"hysteria",server:t.server,server_port:parseInt(`${t.port}`,10),disable_mtu_discovery:!1,tls:{enabled:!0,server_name:t.server,insecure:!1}};if(e.server_port<0||e.server_port>65535)throw"invalid port";t["hop-interval"]&&(e.hop_interval=/^\d+$/.test(t["hop-interval"])?`${t["hop-interval"]}s`:t["hop-interval"]),t.ports&&(e.server_ports=t.ports.split(/\s*,\s*/).map(u=>{let s=u.replace(/\s*-\s*/g,":");return s.includes(":")?s:`${s}:${s}`})),t.auth_str&&(e.auth_str=`${t.auth_str}`),t["auth-str"]&&(e.auth_str=`${t["auth-str"]}`),t["fast-open"]&&(e.udp_fragment=!0);let n=new RegExp("^[0-9]+[ 	]*[KMGT]*[Bb]ps$");return n.test(`${t.up}`)&&!`${t.up}`.endsWith("Mbps")?e.up=`${t.up}`:e.up_mbps=parseInt(`${t.up}`,10),n.test(`${t.down}`)&&!`${t.down}`.endsWith("Mbps")?e.down=`${t.down}`:e.down_mbps=parseInt(`${t.down}`,10),t.obfs&&(e.obfs=t.obfs),t.recv_window_conn&&(e.recv_window_conn=t.recv_window_conn),t["recv-window-conn"]&&(e.recv_window_conn=t["recv-window-conn"]),t.recv_window&&(e.recv_window=t.recv_window),t["recv-window"]&&(e.recv_window=t["recv-window"]),t.disable_mtu_discovery&&(typeof t.disable_mtu_discovery=="boolean"?e.disable_mtu_discovery=t.disable_mtu_discovery:t.disable_mtu_discovery===1&&(e.disable_mtu_discovery=!0)),Oa(t,e),Du(t,e),gi(t,e),ki(t,e),Ks(t.smux,e),pi(t,e),e},mq=(t={})=>{let e={tag:t.name,type:"hysteria2",server:t.server,server_port:parseInt(`${t.port}`,10),password:t.password,obfs:{},tls:{enabled:!0,server_name:t.server,insecure:!1}};if(e.server_port<0||e.server_port>65535)throw"invalid port";return t["hop-interval"]&&(e.hop_interval=/^\d+$/.test(t["hop-interval"])?`${t["hop-interval"]}s`:t["hop-interval"]),t.ports&&(e.server_ports=t.ports.split(/\s*,\s*/).map(n=>{let u=n.replace(/\s*-\s*/g,":");return u.includes(":")?u:`${u}:${u}`})),t.up&&(e.up_mbps=parseInt(`${t.up}`,10)),t.down&&(e.down_mbps=parseInt(`${t.down}`,10)),t.obfs==="salamander"&&(e.obfs.type="salamander"),t["obfs-password"]&&(e.obfs.password=t["obfs-password"]),e.obfs.type||delete e.obfs,Oa(t,e),Du(t,e),ki(t,e),gi(t,e),Ks(t.smux,e),pi(t,e),e},vq=(t={})=>{let e={tag:t.name,type:"tuic",server:t.server,server_port:parseInt(`${t.port}`,10),uuid:t.uuid,password:t.password,tls:{enabled:!0,server_name:t.server,insecure:!1}};if(e.server_port<0||e.server_port>65535)throw"invalid port";return t["fast-open"]&&(e.udp_fragment=!0),t["congestion-controller"]&&t["congestion-controller"]!=="cubic"&&(e.congestion_control=t["congestion-controller"]),t["udp-relay-mode"]&&t["udp-relay-mode"]!=="native"&&(e.udp_relay_mode=t["udp-relay-mode"]),t["reduce-rtt"]&&(e.zero_rtt_handshake=!0),t["udp-over-stream"]&&(e.udp_over_stream=!0),t["heartbeat-interval"]&&(e.heartbeat=`${t["heartbeat-interval"]}ms`),Oa(t,e),ki(t,e),gi(t,e),Du(t,e),Ks(t.smux,e),pi(t,e),e},wq=(t={})=>{let e={tag:t.name,type:"anytls",server:t.server,server_port:parseInt(`${t.port}`,10),password:t.password,tls:{enabled:!0,server_name:t.server,insecure:!1}};return/^\d+$/.test(t["idle-session-check-interval"])&&(e.idle_session_check_interval=`${t["idle-session-check-interval"]}s`),/^\d+$/.test(t["idle-session-timeout"])&&(e.idle_session_timeout=`${t["idle-session-timeout"]}s`),/^\d+$/.test(t["min-idle-session"])&&(e.min_idle_session=parseInt(`${t["min-idle-session"]}`,10)),Oa(t,e),gi(t,e),Du(t,e),pi(t,e),e},Eq=(t={})=>{let e=["ip","ipv6"].map(u=>t[u]).map(u=>{if(Wr(u))return`${u}/32`;if(Mr(u))return`${u}/128`}).filter(u=>u),n={tag:t.name,type:"wireguard",server:t.server,server_port:parseInt(`${t.port}`,10),local_address:e,private_key:t["private-key"],peer_public_key:t["public-key"],pre_shared_key:t["pre-shared-key"],reserved:[]};if(n.server_port<0||n.server_port>65535)throw"invalid port";if(t["fast-open"]&&(n.udp_fragment=!0),typeof t.reserved=="string")n.reserved=t.reserved;else if(Array.isArray(t.reserved))for(let u of t.reserved)n.reserved.push(u);else delete n.reserved;if(t.peers&&t.peers.length>0){n.peers=[];for(let u of t.peers){let s={server:u.server,server_port:parseInt(`${u.port}`,10),public_key:u["public-key"],allowed_ips:u["allowed-ips"]||u.allowed_ips,reserved:[]};if(typeof u.reserved=="string")s.reserved.push(u.reserved);else if(Array.isArray(u.reserved))for(let p of u.reserved)s.reserved.push(p);else delete s.reserved;u["pre-shared-key"]&&(s.pre_shared_key=u["pre-shared-key"]),n.peers.push(s)}}return Oa(t,n),ki(t,n),gi(t,n),Ks(t.smux,n),pi(t,n),n};function Rp(){return{type:"ALL",produce:(t,e,n={})=>{let u=[];return ts().produce(t,"internal",{"include-unsupported-proxy":!0}).map(s=>{try{switch(s.type){case"ssh":u.push(sq(s));break;case"http":u.push(aq(s));break;case"socks5":if(s.tls)throw new Error(`Platform sing-box does not support proxy type: ${s.type} with tls`);u.push(uq(s));break;case"ss":if(s.plugin==="shadow-tls"){let{ssPart:p,stPart:y}=oq(s);u.push(p),u.push(y)}else u.push(cq(s));break;case"ssr":if(n["include-unsupported-proxy"])u.push(lq(s));else throw new Error(`Platform sing-box does not support proxy type: ${s.type}`);break;case"vmess":if(!s.network||["tcp","ws","grpc","h2","http"].includes(s.network))u.push(fq(s));else throw new Error(`Platform sing-box does not support proxy type: ${s.type} with network ${s.network}`);break;case"vless":if(s.encryption&&s.encryption!=="none")throw new Error("VLESS encryption is not supported");if(!s.flow||["xtls-rprx-vision"].includes(s.flow))u.push(hq(s));else throw new Error(`Platform sing-box does not support proxy type: ${s.type} with flow ${s.flow}`);break;case"trojan":if(!s.flow)u.push(dq(s));else throw new Error(`Platform sing-box does not support proxy type: ${s.type} with flow ${s.flow}`);break;case"naive":u.push(pq(s));break;case"hysteria":u.push(gq(s));break;case"hysteria2":u.push(mq(s,n["include-unsupported-proxy"]));break;case"tuic":if(!s.token||s.token.length===0)u.push(vq(s));else throw new Error("Platform sing-box does not support proxy type: TUIC v4");break;case"wireguard":u.push(Eq(s));break;case"anytls":u.push(wq(s));break;default:throw new Error(`Platform sing-box does not support proxy type: ${s.type}`)}}catch(p){R.error(p.message??p)}}),e==="internal"?u:JSON.stringify({outbounds:u},null,2)}}}function Pp(){return{type:"ALL",produce:(t,e,n={})=>{let u=t.filter(s=>!(!["http","https","socks5","ss","trojan","hysteria2","vless","vmess","tuic"].includes(s.type)||s.type==="ss"&&(s.plugin==="obfs"&&!["http","tls"].includes(s["plugin-opts"]?.mode)||!["chacha20-ietf-poly1305","chacha20-poly1305","aes-256-gcm","aes-128-gcm","none","tbale","rc4","rc4-md5","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","cast5-cfb","des-cfb","idea-cfb","rc2-cfb","seed-cfb","salsa20","chacha20","chacha20-ietf","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(s.cipher))||s.type==="vmess"&&!["http","ws","tcp"].includes(s.network)&&s.network||s.type==="trojan"&&!["http","ws","tcp"].includes(s.network)&&s.network||s.type==="vless"&&!["http","ws","tcp"].includes(s.network)&&s.network||s.type==="tuic"&&s.token&&s.token.length!==0)).map(s=>{let p={...s},y;s.tls&&!s.sni&&(s.sni=s.server);let g=s.prev_hop||s["underlying-proxy"]||s["dialer-proxy"]||s.detour;if(s.type==="http")s={type:s.tls?"https":"http",name:s.name,server:s.server,port:s.port,username:s.username,password:s.password,tfo:s.tfo||s["fast-open"],next_hop:s.next_hop,...s.tls?{sni:s.sni,skip_tls_verify:s["skip-cert-verify"]}:{}};else if(s.type==="socks5")s={type:"socks5",name:s.name,server:s.server,port:s.port,username:s.username,password:s.password,tfo:s.tfo||s["fast-open"],udp_relay:s.udp||s.udp_relay||s.udp_relay,next_hop:s.next_hop};else if(s.type==="ss")s={type:"shadowsocks",name:s.name,method:s.cipher==="chacha20-ietf-poly1305"?"chacha20-poly1305":s.cipher,server:s.server,port:s.port,password:s.password,tfo:s.tfo||s["fast-open"],udp_relay:s.udp||s.udp_relay||s.udp_relay,next_hop:s.next_hop},p.plugin==="obfs"&&(s.obfs=p["plugin-opts"].mode,s.obfs_host=p["plugin-opts"].host,s.obfs_uri=p["plugin-opts"].path);else if(s.type==="hysteria2")s={type:"hysteria2",name:s.name,server:s.server,port:s.port,auth:s.password,tfo:s.tfo||s["fast-open"],udp_relay:s.udp||s.udp_relay||s.udp_relay,next_hop:s.next_hop,sni:s.sni,skip_tls_verify:s["skip-cert-verify"],port_hopping:s.ports,port_hopping_interval:s["hop-interval"]},p["obfs-password"]&&p.obfs=="salamander"&&(s.obfs="salamander",s.obfs_password=p["obfs-password"]);else if(s.type==="tuic")s={type:"tuic",name:s.name,server:s.server,port:s.port,uuid:s.uuid,password:s.password,next_hop:s.next_hop,sni:s.sni,alpn:Array.isArray(s.alpn)?s.alpn:[s.alpn||"h3"],skip_tls_verify:s["skip-cert-verify"],port_hopping:s.ports,port_hopping_interval:s["hop-interval"]};else if(s.type==="trojan")s.network==="ws"&&(s.websocket={path:s["ws-opts"]?.path,host:s["ws-opts"]?.headers?.Host}),s={type:"trojan",name:s.name,server:s.server,port:s.port,password:s.password,tfo:s.tfo||s["fast-open"],udp_relay:s.udp||s.udp_relay||s.udp_relay,next_hop:s.next_hop,sni:s.sni,skip_tls_verify:s["skip-cert-verify"],websocket:s.websocket};else if(s.type==="vmess"){let E=s.cipher;E&&!["auto","none","zero","aes-128-gcm","chacha20-poly1305"].includes(E)&&(E="auto"),s.network==="ws"?s.transport={[s.tls?"wss":"ws"]:{path:s["ws-opts"]?.path,headers:{Host:s["ws-opts"]?.headers?.Host},sni:s.tls?s.sni:void 0,skip_tls_verify:s.tls?s["skip-cert-verify"]:void 0}}:s.network==="http"?s.transport={http1:{method:s["http-opts"]?.method,path:Array.isArray(s["http-opts"]?.path)?s["http-opts"]?.path[0]:s["http-opts"]?.path,headers:{Host:Array.isArray(s["http-opts"]?.headers?.Host)?s["http-opts"]?.headers?.Host[0]:s["http-opts"]?.headers?.Host},skip_tls_verify:s["skip-cert-verify"]}}:s.network==="h2"?s.transport={http2:{method:s["h2-opts"]?.method,path:Array.isArray(s["h2-opts"]?.path)?s["h2-opts"]?.path[0]:s["h2-opts"]?.path,headers:{Host:Array.isArray(s["h2-opts"]?.headers?.Host)?s["h2-opts"]?.headers?.Host[0]:s["h2-opts"]?.headers?.Host},skip_tls_verify:s["skip-cert-verify"]}}:(s.network==="tcp"||!s.network)&&s.tls&&(s.transport={tls:{sni:s.tls?s.sni:void 0,skip_tls_verify:s.tls?s["skip-cert-verify"]:void 0}});let m;(ue(s,"aead")&&!s.aead||s.alterId!==0)&&(m=!0),s={type:"vmess",name:s.name,server:s.server,port:s.port,user_id:s.uuid,security:E,tfo:s.tfo||s["fast-open"],legacy:m,udp_relay:s.udp||s.udp_relay||s.udp_relay,next_hop:s.next_hop,transport:s.transport}}else if(s.type==="vless"){if(s.encryption&&s.encryption!=="none")throw new Error("VLESS encryption is not supported");if(s.network==="ws")s.transport={[s.tls?"wss":"ws"]:{path:s["ws-opts"]?.path,headers:{Host:s["ws-opts"]?.headers?.Host},sni:s.tls?s.sni:void 0,skip_tls_verify:s.tls?s["skip-cert-verify"]:void 0}};else if(s.network==="http")s.transport={http:{method:s["http-opts"]?.method,path:Array.isArray(s["http-opts"]?.path)?s["http-opts"]?.path[0]:s["http-opts"]?.path,headers:{Host:Array.isArray(s["http-opts"]?.headers?.Host)?s["http-opts"]?.headers?.Host[0]:s["http-opts"]?.headers?.Host},skip_tls_verify:s["skip-cert-verify"]}};else if(s.network==="tcp"||!s.network){let E;if((s["reality-opts"]?.["short-id"]||s["reality-opts"]?.["public-key"])&&(E={short_id:s["reality-opts"]["short-id"],public_key:s["reality-opts"]["public-key"]}),s.transport={[s.tls?"tls":"tcp"]:{sni:s.tls?s.sni:void 0,skip_tls_verify:s.tls?s["skip-cert-verify"]:void 0,reality:E}},typeof s.flow<"u"&&!["xtls-rprx-vision"].includes(s.flow))throw new Error(`VLESS flow(${s.flow}) is not supported`);y=s.flow}s={type:"vless",name:s.name,server:s.server,port:s.port,user_id:s.uuid,security:s.cipher,tfo:s.tfo||s["fast-open"],udp_relay:s.udp||s.udp_relay||s.udp_relay,next_hop:s.next_hop,transport:s.transport,flow:y}}if(["http","https","socks5","ss","trojan","vless","vmess"].includes(p.type)){if(ue(p,"shadow-tls-password")){if(p["shadow-tls-version"]!=3)throw new Error(`shadow-tls version ${p["shadow-tls-version"]} is not supported`);s.shadow_tls={password:p["shadow-tls-password"],sni:p["shadow-tls-sni"]}}else if(["shadow-tls"].includes(p.plugin)&&p["plugin-opts"]){if(p["plugin-opts"].version!=3)throw new Error(`shadow-tls version ${p["plugin-opts"].version} is not supported`);s.shadow_tls={password:p["plugin-opts"].password,sni:p["plugin-opts"].host}}}if(["socks5","ss","trojan","vless","vmess"].includes(p.type)&&(["on","true",!0,"1",1].includes(p["block-quic"])?s.block_quic=!0:["off","false",!1,"0",0].includes(p["block-quic"])&&(s.block_quic=!1)),["ss"].includes(p.type)&&s.shadow_tls&&p["udp-port"]>0&&p["udp-port"]<=65535&&(s.udp_port=p["udp-port"]),delete s.subName,delete s.collectionName,delete s.id,delete s.resolved,delete s["no-resolve"],s.transport){for(let E in s.transport)(Object.keys(s.transport[E]).length===0||Object.values(s.transport[E]).every(m=>m==null))&&delete s.transport[E];Object.keys(s.transport).length===0&&delete s.transport}if(e!=="internal")for(let E in s)(s[E]==null||/^_/i.test(E))&&delete s[E];return{[s.type]:{...s,type:void 0,prev_hop:g}}});return e==="internal"?u:`proxies:
`+u.map(s=>"  - "+JSON.stringify(s)+`
`).join("")}}}function uS(){return{type:"ALL",produce:(t,e)=>e==="internal"?t:JSON.stringify(t,null,2)}}var Op={qx:Nh(),QX:Nh(),QuantumultX:Nh(),surge:yl(),Surge:yl(),SurgeMac:Nm(),Loon:Lm(),Clash:km(),meta:ts(),clashmeta:ts(),"clash.meta":ts(),"Clash.Meta":ts(),ClashMeta:ts(),mihomo:ts(),Mihomo:ts(),uri:Yl(),URI:Yl(),v2:Th(),v2ray:Th(),V2Ray:Th(),json:uS(),JSON:uS(),stash:K0(),Stash:K0(),shadowrocket:kh(),Shadowrocket:kh(),ShadowRocket:kh(),surfboard:$p(),Surfboard:$p(),singbox:Rp(),"sing-box":Rp(),egern:Pp(),Egern:Pp()},dF=Yr(Vh()),IV=String.raw`
// global initializer
{{
    function $set(obj, path, value) {
      if (Object(obj) !== obj) return obj;
      if (!Array.isArray(path)) path = path.toString().match(/[^.[\]]+/g) || [];
      path
        .slice(0, -1)
        .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[
        path[path.length - 1]
      ] = value;
      return obj;
    }
}}

// per-parser initializer
{
    const proxy = {};
    const obfs = {};
    const $ = {};

    function handleWebsocket() {
        if (obfs.type === "ws") {
            proxy.network = "ws";
            $set(proxy, "ws-opts.path", obfs.path);
            $set(proxy, "ws-opts.headers", obfs['ws-headers']);
            if (proxy['ws-opts'] && proxy['ws-opts']['headers'] && proxy['ws-opts']['headers'].Host) {
                proxy['ws-opts']['headers'].Host = proxy['ws-opts']['headers'].Host.replace(/^"(.*)"$/, '$1')
            }
        }
    }
    function handleShadowTLS() {
        if (proxy['shadow-tls-password'] && !proxy['shadow-tls-version']) {
            proxy['shadow-tls-version'] = 2;
        }
    }
}

start = (anytls/shadowsocks/vmess/trojan/https/http/snell/socks5/socks5_tls/tuic/tuic_v5/wireguard/hysteria2/ssh/direct) {
    return proxy;
}

shadowsocks = tag equals "ss" address (method/passwordk/obfs/obfs_host/obfs_uri/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/udp_relay/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/udp_port/others)* {
    proxy.type = "ss";
    // handle obfs
    if (obfs.type == "http" || obfs.type === "tls") {
        proxy.plugin = "obfs";
        $set(proxy, "plugin-opts.mode", obfs.type);
        $set(proxy, "plugin-opts.host", obfs.host);
        $set(proxy, "plugin-opts.path", obfs.path);
    }
    handleShadowTLS();
}
vmess = tag equals "vmess" address (vmess_uuid/vmess_aead/ws/ws_path/ws_headers/method/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls/sni/tls_fingerprint/tls_verification/fast_open/tfo/udp_relay/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "vmess";
    proxy.cipher = proxy.cipher || "none";
    // Surfboard  Surge ,  Surfboard https://getsurfboard.com/docs/profile-format/proxy/external-proxy/vmess
    if (proxy.aead) {
        proxy.alterId = 0;
    } else {
        proxy.alterId = 1;
    }
    handleWebsocket();
    handleShadowTLS();
}
trojan = tag equals "trojan" address (passwordk/ws/ws_path/ws_headers/tls/sni/tls_fingerprint/tls_verification/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/udp_relay/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "trojan";
    handleWebsocket();
    handleShadowTLS();
}
https = tag equals "https" address (username password)? (usernamek passwordk)? (sni/tls_fingerprint/tls_verification/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "http";
    proxy.tls = true;
    handleShadowTLS();
}
http = tag equals "http" address (username password)? (usernamek passwordk)? (ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "http";
    handleShadowTLS();
}
ssh = tag equals "ssh" address (username password)? (usernamek passwordk)? (server_fingerprint/idle_timeout/private_key/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "ssh";
    handleShadowTLS();
}
snell = tag equals "snell" address (snell_version/snell_psk/obfs/obfs_host/obfs_uri/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/udp_relay/reuse/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "snell";
    // handle obfs
    if (obfs.type == "http" || obfs.type === "tls") {
        $set(proxy, "obfs-opts.mode", obfs.type);
        $set(proxy, "obfs-opts.host", obfs.host);
        $set(proxy, "obfs-opts.path", obfs.path);
    }
    handleShadowTLS();
}
tuic = tag equals "tuic" address (alpn/token/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls_fingerprint/tls_verification/sni/fast_open/tfo/ecn/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/port_hopping_interval/others)* {
    proxy.type = "tuic";
    handleShadowTLS();
}
tuic_v5 = tag equals "tuic-v5" address (alpn/passwordk/uuidk/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls_fingerprint/tls_verification/sni/fast_open/tfo/ecn/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/port_hopping_interval/others)* {
    proxy.type = "tuic";
    proxy.version = 5;
    handleShadowTLS();
}
wireguard = tag equals "wireguard" (section_name/no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "wireguard-surge";
    handleShadowTLS();
}
hysteria2 = tag equals "hysteria2" address (no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/sni/tls_verification/passwordk/tls_fingerprint/download_bandwidth/ecn/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/port_hopping_interval/salamander_password/others)* {
    proxy.type = "hysteria2";
    handleShadowTLS();
}
socks5 = tag equals "socks5" address (username password)? (usernamek passwordk)? (udp_relay/no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "socks5";
    handleShadowTLS();
}
socks5_tls = tag equals "socks5-tls" address (username password)? (usernamek passwordk)? (udp_relay/no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/sni/tls_fingerprint/tls_verification/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "socks5";
    proxy.tls = true;
    handleShadowTLS();
}
anytls = tag equals "anytls" address (passwordk/reuse/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls_fingerprint/tls_verification/sni/fast_open/tfo/block_quic/others)* {
    proxy.type = "anytls";
    proxy.tls = true;
}
direct = tag equals "direct" (udp_relay/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/block_quic/others)* {
    proxy.type = "direct";
}
address = comma server:server comma port:port {
    proxy.server = server;
    proxy.port = port;
}

server = ip/domain

ip = & {
    const start = peg$currPos;
    let j = start;
    while (j < input.length) {
        if (input[j] === ",") break;
        j++;
    }
    peg$currPos = j;
    $.ip = input.substring(start, j).trim();
    return true;
} { return $.ip; }

domain = match:[0-9a-zA-z-_.]+ { 
    const domain = match.join(""); 
    if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {
        return domain;
    }
}

port = digits:[0-9]+ { 
    const port = parseInt(digits.join(""), 10); 
    if (port >= 0 && port <= 65535) {
    	return port;
    }
}

port_hopping_interval = comma "port-hopping-interval" equals match:$[0-9]+ { proxy["hop-interval"] = parseInt(match.trim()); }

username = & {
    let j = peg$currPos; 
    let start, end;
    let first = true;
    while (j < input.length) {
        if (input[j] === ',') {
            if (first) {
                start = j + 1;
                first = false;
            } else {
                end = j;
                break;
            }
        }
        j++;
    }
    const match = input.substring(start, end);
    if (match.indexOf("=") === -1) {
        $.username = match;
        peg$currPos = end;
        return true;
    }
} { proxy.username = $.username.trim().replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }
password = comma match:[^,]+ { proxy.password = match.join("").replace(/^"(.*)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }

tls = comma "tls" equals flag:bool { proxy.tls = flag; }
sni = comma "sni" equals sni:("off"/domain) { 
    if (sni === "off") {
        proxy["disable-sni"] = true;
    } else {
        proxy.sni = sni;
    }
}
tls_verification = comma "skip-cert-verify" equals flag:bool { proxy["skip-cert-verify"] = flag; }
tls_fingerprint = comma "server-cert-fingerprint-sha256" equals tls_fingerprint:$[^,]+ { proxy["tls-fingerprint"] = tls_fingerprint.trim(); }

snell_psk = comma "psk" equals match:[^,]+ { proxy.psk = match.join(""); }
snell_version = comma "version" equals match:$[0-9]+ { proxy.version = parseInt(match.trim()); }

usernamek = comma "username" equals match:[^,]+ { proxy.username = match.join("").replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }
passwordk = comma "password" equals match:[^,]+ { proxy.password = match.join("").replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }
vmess_uuid = comma "username" equals match:[^,]+ { proxy.uuid = match.join(""); }
vmess_aead = comma "vmess-aead" equals flag:bool { proxy.aead = flag; }

method = comma "encrypt-method" equals cipher:cipher {
    proxy.cipher = cipher;
}
cipher = ("aes-128-cfb"/"aes-128-ctr"/"aes-128-gcm"/"aes-192-cfb"/"aes-192-ctr"/"aes-192-gcm"/"aes-256-cfb"/"aes-256-ctr"/"aes-256-gcm"/"bf-cfb"/"camellia-128-cfb"/"camellia-192-cfb"/"camellia-256-cfb"/"cast5-cfb"/"chacha20-ietf-poly1305"/"chacha20-ietf"/"chacha20-poly1305"/"chacha20"/"des-cfb"/"idea-cfb"/"none"/"rc2-cfb"/"rc4-md5"/"rc4"/"salsa20"/"seed-cfb"/"xchacha20-ietf-poly1305"/"2022-blake3-aes-128-gcm"/"2022-blake3-aes-256-gcm");

ws = comma "ws" equals flag:bool { obfs.type = "ws"; }
ws_headers = comma "ws-headers" equals headers:$[^,]+ {
    const pairs = headers.split("|");
    const result = {};
    pairs.forEach(pair => {
        const [key, value] = pair.trim().split(":");
        result[key.trim()] = value.trim().replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1');
    })
    obfs["ws-headers"] = result;
}
ws_path = comma "ws-path" equals path:uri { obfs.path = path.trim().replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }

obfs = comma "obfs" equals type:("http"/"tls") { obfs.type = type; }
obfs_host = comma "obfs-host" equals host:domain { obfs.host = host; };
obfs_uri = comma "obfs-uri" equals path:uri { obfs.path = path }
uri = $[^,]+

udp_relay = comma "udp-relay" equals flag:bool { proxy.udp = flag; }
fast_open = comma "fast-open" equals flag:bool { proxy.tfo = flag; }
reuse = comma "reuse" equals flag:bool { proxy.reuse = flag; }
ecn = comma "ecn" equals flag:bool { proxy.ecn = flag; }
tfo = comma "tfo" equals flag:bool { proxy.tfo = flag; }
ip_version = comma "ip-version" equals match:[^,]+ { proxy["ip-version"] = match.join(""); }
section_name = comma "section-name" equals match:[^,]+ { proxy["section-name"] = match.join(""); }
no_error_alert = comma "no-error-alert" equals match:[^,]+ { proxy["no-error-alert"] = match.join(""); }
underlying_proxy = comma "underlying-proxy" equals match:[^,]+ { proxy["underlying-proxy"] = match.join(""); }
download_bandwidth = comma "download-bandwidth" equals match:[^,]+ { proxy.down = match.join(""); }
test_url = comma "test-url" equals match:[^,]+ { proxy["test-url"] = match.join(""); }
test_udp = comma "test-udp" equals match:[^,]+ { proxy["test-udp"] = match.join(""); }
test_timeout = comma "test-timeout" equals match:$[0-9]+ { proxy["test-timeout"] = parseInt(match.trim()); }
tos = comma "tos" equals match:$[0-9]+ { proxy.tos = parseInt(match.trim()); }
interface = comma "interface" equals match:[^,]+ { proxy.interface = match.join(""); }
allow_other_interface = comma "allow-other-interface" equals flag:bool { proxy["allow-other-interface"] = flag; }
hybrid = comma "hybrid" equals flag:bool { proxy.hybrid = flag; }
idle_timeout = comma "idle-timeout" equals match:$[0-9]+ { proxy["idle-timeout"] = parseInt(match.trim()); }
private_key = comma "private-key" equals match:[^,]+ { proxy["keystore-private-key"] = match.join("").replace(/^"(.*)"$/, '$1'); }
server_fingerprint = comma "server-fingerprint" equals match:[^,]+ { proxy["server-fingerprint"] = match.join("").replace(/^"(.*)"$/, '$1'); }
block_quic = comma "block-quic" equals match:[^,]+ { proxy["block-quic"] = match.join(""); }
udp_port = comma "udp-port" equals match:$[0-9]+ { proxy["udp-port"] = parseInt(match.trim()); }
shadow_tls_version = comma "shadow-tls-version" equals match:$[0-9]+ { proxy["shadow-tls-version"] = parseInt(match.trim()); }
shadow_tls_sni = comma "shadow-tls-sni" equals match:[^,]+ { proxy["shadow-tls-sni"] = match.join(""); }
shadow_tls_password = comma "shadow-tls-password" equals match:[^,]+ { proxy["shadow-tls-password"] = match.join("").replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }
token = comma "token" equals match:[^,]+ { proxy.token = match.join(""); }
alpn = comma "alpn" equals match:[^,]+ { proxy.alpn = match.join(""); }
uuidk = comma "uuid" equals match:[^,]+ { proxy.uuid = match.join(""); }
salamander_password = comma "salamander-password" equals match:[^,]+ { proxy['obfs-password'] = match.join("").replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); proxy.obfs = 'salamander'; }

tag = match:[^=,]* { proxy.name = match.join("").trim(); }
comma = _ "," _
equals = _ "=" _
_ = [ \r\t]*
bool = b:("true"/"false") { return b === "true" }
others = comma [^=,]+ equals [^=,]+
`,Z2;function Li(){return Z2||(Z2=dF.generate(IV)),Z2}var pF=Yr(Vh()),BV=String.raw`
// global initializer
{{
    function $set(obj, path, value) {
      if (Object(obj) !== obj) return obj;
      if (!Array.isArray(path)) path = path.toString().match(/[^.[\]]+/g) || [];
      path
        .slice(0, -1)
        .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[
        path[path.length - 1]
      ] = value;
      return obj;
    }
}}

// per-parser initializer
{
    const proxy = {};
    const obfs = {};
    const transport = {};
    const $ = {};

    function handleTransport() {
        if (transport.type === "tcp") { /* do nothing */ }
        else if (transport.type === "ws") {
            proxy.network = "ws";
            $set(proxy, "ws-opts.path", transport.path);
            $set(proxy, "ws-opts.headers.Host", transport.host);
        } else if (transport.type === "http") {
            proxy.network = "http";
            $set(proxy, "http-opts.path", transport.path);
            $set(proxy, "http-opts.headers.Host", transport.host);
        }
    }
}

start = (shadowsocksr/shadowsocks/vmess/vless/trojan/https/http/socks5/hysteria2) {
    return proxy;
}

shadowsocksr = tag equals "shadowsocksr"i address method password (ssr_protocol/ssr_protocol_param/obfs_ssr/obfs_ssr_param/obfs_host/obfs_uri/fast_open/udp_relay/udp_port/shadow_tls_version/shadow_tls_sni/shadow_tls_password/ip_mode/block_quic/others)*{
    proxy.type = "ssr";
    // handle ssr obfs
    proxy.obfs = obfs.type;
}
shadowsocks = tag equals "shadowsocks"i address method password (obfs_typev obfs_hostv)? (obfs_ss/obfs_host/obfs_uri/fast_open/udp_relay/udp_port/shadow_tls_version/shadow_tls_sni/shadow_tls_password/ip_mode/block_quic/others)* {
    proxy.type = "ss";
    // handle ss obfs
    if (obfs.type == "http" || obfs.type === "tls") {
        proxy.plugin = "obfs";
        $set(proxy, "plugin-opts.mode", obfs.type);
        $set(proxy, "plugin-opts.host", obfs.host);
        $set(proxy, "plugin-opts.path", obfs.path);
    }
}
vmess = tag equals "vmess"i address method uuid (transport/transport_host/transport_path/over_tls/tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/vmess_alterId/fast_open/udp_relay/ip_mode/public_key/short_id/block_quic/others)* {
    proxy.type = "vmess";
    proxy.cipher = proxy.cipher || "none";
    proxy.alterId = proxy.alterId || 0;
    handleTransport();
}
vless = tag equals "vless"i address uuid (transport/transport_host/transport_path/over_tls/tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/ip_mode/flow/public_key/short_id/block_quic/others)* {
    proxy.type = "vless";
    handleTransport();
}
trojan = tag equals "trojan"i address password (transport/transport_host/transport_path/over_tls/tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/ip_mode/block_quic/others)* {
    proxy.type = "trojan";
    handleTransport();
}
hysteria2 = tag equals "hysteria2"i address password (tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/udp_relay/fast_open/download_bandwidth/salamander_password/ecn/ip_mode/block_quic/others)* {
    proxy.type = "hysteria2";
}
https = tag equals "https"i address (username password)? (tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/ip_mode/block_quic/others)* {
    proxy.type = "http";
    proxy.tls = true;
}
http = tag equals "http"i address (username password)? (fast_open/udp_relay/ip_mode/block_quic/others)* {
    proxy.type = "http";
}
socks5 = tag equals "socks5"i address (username password)? (over_tls/tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/ip_mode/block_quic/others)* {
    proxy.type = "socks5";
}

address = comma server:server comma port:port {
    proxy.server = server;
    proxy.port = port;
}

server = ip/domain

ip = & {
    const start = peg$currPos;
    let j = start;
    while (j < input.length) {
        if (input[j] === ",") break;
        j++;
    }
    peg$currPos = j;
    $.ip = input.substring(start, j).trim();
    return true;
} { return $.ip; }

domain = match:[0-9a-zA-z-_.]+ { 
    const domain = match.join(""); 
    if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {
        return domain;
    }
    throw new Error("Invalid domain: " + domain);
}

port = digits:[0-9]+ { 
    const port = parseInt(digits.join(""), 10); 
    if (port >= 0 && port <= 65535) {
    	return port;
    }
    throw new Error("Invalid port number: " + port);
}

method = comma cipher:cipher { 
    proxy.cipher = cipher;
}
cipher = ("aes-128-cfb"/"aes-128-ctr"/"aes-128-gcm"/"aes-192-cfb"/"aes-192-ctr"/"aes-192-gcm"/"aes-256-cfb"/"aes-256-ctr"/"aes-256-gcm"/"auto"/"bf-cfb"/"camellia-128-cfb"/"camellia-192-cfb"/"camellia-256-cfb"/"chacha20-ietf-poly1305"/"chacha20-ietf"/"chacha20-poly1305"/"chacha20"/"none"/"rc4-md5"/"rc4"/"salsa20"/"xchacha20-ietf-poly1305"/"2022-blake3-aes-128-gcm"/"2022-blake3-aes-256-gcm");

username = & {
    let j = peg$currPos; 
    let start, end;
    let first = true;
    while (j < input.length) {
        if (input[j] === ',') {
            if (first) {
                start = j + 1;
                first = false;
            } else {
                end = j;
                break;
            }
        }
        j++;
    }
    const match = input.substring(start, end);
    if (match.indexOf("=") === -1) {
        $.username = match;
        peg$currPos = end;
        return true;
    }
} { proxy.username = $.username; }
password = comma '"' match:[^"]* '"' { proxy.password = match.join(""); }
uuid = comma '"' match:[^"]+ '"' { proxy.uuid = match.join(""); }

obfs_typev = comma type:("http"/"tls") { obfs.type = type; }
obfs_hostv = comma match:[^,]+ { obfs.host = match.join(""); }

obfs_ss = comma "obfs-name" equals type:("http"/"tls") { obfs.type = type; }

obfs_ssr = comma "obfs" equals type:("plain"/"http_simple"/"http_post"/"random_head"/"tls1.2_ticket_auth"/"tls1.2_ticket_fastauth") { obfs.type = type; }
obfs_ssr_param = comma "obfs-param" equals match:$[^,]+ { proxy["obfs-param"] = match; }

obfs_host = comma "obfs-host" equals host:domain { obfs.host = host; }
obfs_uri = comma "obfs-uri" equals uri:uri { obfs.path = uri; }
uri = $[^,]+

transport = comma "transport" equals type:("tcp"/"ws"/"http") { transport.type = type; }
transport_host = comma "host" equals host:domain { transport.host = host; }
transport_path = comma "path" equals path:uri { transport.path = path; }

ssr_protocol = comma "protocol" equals protocol:("origin"/"auth_sha1_v4"/"auth_aes128_md5"/"auth_aes128_sha1"/"auth_chain_a"/"auth_chain_b") { proxy.protocol = protocol; }
ssr_protocol_param = comma "protocol-param" equals param:$[^=,]+ { proxy["protocol-param"] = param; }

vmess_alterId = comma "alterId" equals alterId:$[0-9]+ { proxy.alterId = parseInt(alterId); } 

udp_port = comma "udp-port" equals match:$[0-9]+ { proxy["udp-port"] = parseInt(match.trim()); }
shadow_tls_version = comma "shadow-tls-version" equals match:$[0-9]+ { proxy["shadow-tls-version"] = parseInt(match.trim()); }
shadow_tls_sni = comma "shadow-tls-sni" equals match:[^,]+ { proxy["shadow-tls-sni"] = match.join(""); }
shadow_tls_password = comma "shadow-tls-password" equals match:[^,]+ { proxy["shadow-tls-password"] = match.join(""); }

over_tls = comma "over-tls" equals flag:bool { proxy.tls = flag; }
tls_name = comma sni:("tls-name") equals host:domain { proxy.sni = host; }
sni = comma sni:("sni") equals host:domain { proxy.sni = host; }
tls_verification = comma "skip-cert-verify" equals flag:bool { proxy["skip-cert-verify"] = flag; }
tls_cert_sha256 = comma "tls-cert-sha256" equals match:[^,]+ { proxy["tls-fingerprint"] = match.join("").replace(/^"(.*)"$/, '$1'); }
tls_pubkey_sha256 = comma "tls-pubkey-sha256" equals match:[^,]+ { proxy["tls-pubkey-sha256"] = match.join("").replace(/^"(.*)"$/, '$1'); }

flow = comma "flow" equals match:[^,]+ { proxy["flow"] = match.join("").replace(/^"(.*)"$/, '$1'); }
public_key = comma "public-key" equals match:[^,]+ { proxy["reality-opts"] = proxy["reality-opts"] || {}; proxy["reality-opts"]["public-key"] = match.join("").replace(/^"(.*)"$/, '$1'); }
short_id = comma "short-id" equals match:[^,]+ { proxy["reality-opts"] = proxy["reality-opts"] || {}; proxy["reality-opts"]["short-id"] = match.join("").replace(/^"(.*)"$/, '$1'); }

fast_open = comma "fast-open" equals flag:bool { proxy.tfo = flag; }
udp_relay = comma "udp" equals flag:bool { proxy.udp = flag; }
ip_mode = comma "ip-mode" equals match:[^,]+ { proxy["ip-version"] = match.join(""); }

ecn = comma "ecn" equals flag:bool { proxy.ecn = flag; }
download_bandwidth = comma "download-bandwidth" equals match:[^,]+ { proxy.down = match.join(""); }
salamander_password = comma "salamander-password" equals match:[^,]+ { proxy['obfs-password'] = match.join(""); proxy.obfs = 'salamander'; }

block_quic = comma "block-quic" equals flag:bool { if(flag) proxy["block-quic"] = "on"; else proxy["block-quic"] = "off"; }

tag = match:[^=,]* { proxy.name = match.join("").trim(); }
comma = _ "," _
equals = _ "=" _
_ = [ \r\t]*
bool = b:("true"/"false") { return b === "true" }
others = comma [^=,]+ equals [^=,]+
`,Q2;function xa(){return Q2||(Q2=pF.generate(BV)),Q2}var gF=Yr(Vh()),$V=String.raw`
// global initializer
{{
    function $set(obj, path, value) {
      if (Object(obj) !== obj) return obj;
      if (!Array.isArray(path)) path = path.toString().match(/[^.[\]]+/g) || [];
      path
        .slice(0, -1)
        .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[
        path[path.length - 1]
      ] = value;
      return obj;
    }
}}

// per-parse initializer
{
	const proxy = {};
    const obfs = {};
    const $ = {};

    function handleObfs() {
        if (obfs.type === "ws" || obfs.type === "wss") {
            proxy.network = "ws";
            if (obfs.type === 'wss') {
                proxy.tls = true;
            }
            $set(proxy, "ws-opts.path", obfs.path);
            $set(proxy, "ws-opts.headers.Host", obfs.host);
        } else if (obfs.type === "over-tls") {
            proxy.tls = true;
        } else if (obfs.type === "http") {
            proxy.network = "http";
            $set(proxy, "http-opts.path", obfs.path);
            $set(proxy, "http-opts.headers.Host", obfs.host);
        }
    }
}

start = (trojan/shadowsocks/vmess/vless/http/socks5) {
    return proxy
}

trojan = "trojan" equals address
    (password/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/obfs/obfs_host/obfs_uri/tag/udp_relay/udp_over_tcp/fast_open/server_check_url/reality_base64_pubkey/reality_hex_shortid/others)* {
    proxy.type = "trojan";
    handleObfs();
}

shadowsocks = "shadowsocks" equals address
    (password/method/obfs_ssr/obfs_ss/obfs_host/obfs_uri/ssr_protocol/ssr_protocol_param/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/udp_relay/udp_over_tcp_new/fast_open/tag/server_check_url/reality_base64_pubkey/reality_hex_shortid/others)* {
    if (proxy.protocol || proxy.type === "ssr") {
        proxy.type = "ssr";
        if (!proxy.protocol) {
            proxy.protocol = "origin";
        }
        // handle ssr obfs
        if (obfs.host) proxy["obfs-param"] = obfs.host;
        if (obfs.type) proxy.obfs = obfs.type;
    } else {
        proxy.type = "ss";
        // handle ss obfs
        if (obfs.type == "http" || obfs.type === "tls") {
            proxy.plugin = "obfs";
            $set(proxy, "plugin-opts", {
                mode: obfs.type
            });
        } else if (obfs.type === "ws" || obfs.type === "wss") {
            proxy.plugin = "v2ray-plugin";
            $set(proxy, "plugin-opts.mode", "websocket");
            if (obfs.type === "wss") {
                $set(proxy, "plugin-opts.tls", true);
            }
        } else if (obfs.type === 'over-tls') {
            throw new Error('ss over-tls is not supported');
        }
        if (obfs.type) {
            $set(proxy, "plugin-opts.host", obfs.host);
            $set(proxy, "plugin-opts.path", obfs.path);
        }
    }
}

vmess = "vmess" equals address
    (uuid/method/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/obfs/obfs_host/obfs_uri/udp_relay/udp_over_tcp/fast_open/aead/server_check_url/reality_base64_pubkey/reality_hex_shortid/others)* {
    proxy.type = "vmess";
    proxy.cipher = proxy.cipher || "none";
    if (proxy.aead === false) {
        proxy.alterId = 1;
    } else {
        proxy.alterId = 0;
    }
    handleObfs();
}

vless = "vless" equals address
    (uuid/method/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/obfs/obfs_host/obfs_uri/udp_relay/udp_over_tcp/fast_open/aead/server_check_url/reality_base64_pubkey/reality_hex_shortid/vless_flow/others)* {
    proxy.type = "vless";
    proxy.cipher = proxy.cipher || "none";
    handleObfs();
}

http = "http" equals address 
    (username/password/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/fast_open/udp_relay/udp_over_tcp/server_check_url/reality_base64_pubkey/reality_hex_shortid/others)*{
    proxy.type = "http";
}

socks5 = "socks5" equals address
    (username/password/password/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/fast_open/udp_relay/udp_over_tcp/server_check_url/reality_base64_pubkey/reality_hex_shortid/others)* {
    proxy.type = "socks5";
}
    
address = server:server ":" port:port {
    proxy.server = server;
    proxy.port = port;
}
server = ip/domain

domain = match:[0-9a-zA-z-_.]+ { 
    const domain = match.join(""); 
    if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {
        return domain;
    }
}

ip = & {
    const start = peg$currPos;
    let end;
    let j = start;
    while (j < input.length) {
        if (input[j] === ",") break;
        if (input[j] === ":") end = j;
        j++;
    }
    peg$currPos = end || j;
    $.ip = input.substring(start, end).trim();
    return true;
} { return $.ip; }

port = digits:[0-9]+ { 
    const port = parseInt(digits.join(""), 10); 
    if (port >= 0 && port <= 65535) {
    	return port;
    }
}

username = comma "username" equals username:[^,]+ { proxy.username = username.join("").trim(); }
password = comma "password" equals password:[^,]+ { proxy.password = password.join("").trim(); }
uuid = comma "password" equals uuid:[^,]+ { proxy.uuid = uuid.join("").trim(); }

method = comma "method" equals cipher:cipher { 
    proxy.cipher = cipher;
};
cipher = ("aes-128-cfb"/"aes-128-ctr"/"aes-128-gcm"/"aes-192-cfb"/"aes-192-ctr"/"aes-192-gcm"/"aes-256-cfb"/"aes-256-ctr"/"aes-256-gcm"/"bf-cfb"/"cast5-cfb"/"chacha20-ietf-poly1305"/"chacha20-ietf"/"chacha20-poly1305"/"chacha20"/"des-cfb"/"none"/"rc2-cfb"/"rc4-md5-6"/"rc4-md5"/"salsa20"/"xchacha20-ietf-poly1305"/"2022-blake3-aes-128-gcm"/"2022-blake3-aes-256-gcm");
aead = comma "aead" equals flag:bool { proxy.aead = flag; }

udp_relay = comma "udp-relay" equals flag:bool { proxy.udp = flag; }
udp_over_tcp = comma "udp-over-tcp" equals flag:bool { throw new Error("UDP over TCP is not supported"); }
udp_over_tcp_new = comma "udp-over-tcp" equals param:$[^=,]+ { if (param === "sp.v1") { proxy["udp-over-tcp"] = true; proxy["udp-over-tcp-version"] = 1; } else if (param === "sp.v2") { proxy["udp-over-tcp"] = true; proxy["udp-over-tcp-version"] = 2; } else if (param === "true") { proxy["_ssr_python_uot"] = true; } else { throw new Error("Invalid value for udp-over-tcp"); } }

fast_open = comma "fast-open" equals flag:bool { proxy.tfo = flag; }

over_tls = comma "over-tls" equals flag:bool { proxy.tls = flag; }
tls_host = comma "tls-host" equals sni:domain { proxy.sni = sni; }
tls_verification = comma "tls-verification" equals flag:bool { 
    proxy["skip-cert-verify"] = !flag;
}
tls_fingerprint = comma "tls-cert-sha256" equals tls_fingerprint:$[^,]+ { proxy["tls-fingerprint"] = tls_fingerprint.trim(); }
tls_pubkey_sha256 = comma "tls-pubkey-sha256" equals param:$[^=,]+ { proxy["tls-pubkey-sha256"] = param; }
tls_alpn = comma "tls-alpn" equals param:$[^=,]+ { proxy["tls-alpn"] = param; }
tls_no_session_ticket = comma "tls-no-session-ticket" equals flag:bool { 
    proxy["tls-no-session-ticket"] = flag;
}
tls_no_session_reuse = comma "tls-no-session-reuse" equals flag:bool { 
    proxy["tls-no-session-reuse"] = flag;
}

obfs_ss = comma "obfs" equals type:("http"/"tls"/"wss"/"ws"/"over-tls") { obfs.type = type; return type; }
obfs_ssr = comma "obfs" equals type:("plain"/"http_simple"/"http_post"/"random_head"/"tls1.2_ticket_auth"/"tls1.2_ticket_fastauth") { proxy.type = "ssr"; obfs.type = type; return type; }
obfs = comma "obfs" equals type:("wss"/"ws"/"over-tls"/"http") { obfs.type = type; return type; };

obfs_host = comma "obfs-host" equals host:domain { obfs.host = host; }
obfs_uri = comma "obfs-uri" equals uri:uri { obfs.path = uri; }

ssr_protocol = comma "ssr-protocol" equals protocol:("origin"/"auth_sha1_v4"/"auth_aes128_md5"/"auth_aes128_sha1"/"auth_chain_a"/"auth_chain_b") { proxy.protocol = protocol; return protocol; }
ssr_protocol_param = comma "ssr-protocol-param" equals param:$[^=,]+ { proxy["protocol-param"] = param; }

reality_base64_pubkey = comma "reality-base64-pubkey" equals param:$[^=,]+ {
    $set(proxy, "reality-opts.public-key", param);
 }
reality_hex_shortid = comma "reality-hex-shortid" equals param:$[^=,]+ {
    $set(proxy, "reality-opts.short-id", param);
}

vless_flow = comma "vless-flow" equals param:$[^=,]+ { proxy["flow"] = param; }
server_check_url = comma "server_check_url" equals param:$[^=,]+ { proxy["test-url"] = param; }

uri = $[^,]+

tag = comma "tag" equals tag:[^=,]+ { proxy.name = tag.join(""); }
others = comma [^=,]+ equals [^=,]+
comma = _ "," _
equals = _ "=" _
_ = [ \r\t]*
bool = b:("true"/"false") { return b === "true" }
`,ew;function Fu(){return ew||(ew=gF.generate($V)),ew}var mF=Yr(Vh()),RV=String.raw`
// global initializer
{{
  function $set(obj, path, value) {
    if (Object(obj) !== obj) return obj;
    if (!Array.isArray(path)) path = path.toString().match(/[^.[\]]+/g) || [];
    path
      .slice(0, -1)
      .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[
      path[path.length - 1]
    ] = value;
    return obj;
  }

  function toBool(str) {
    if (typeof str === 'undefined' || str === null) return undefined;
    return /(TRUE)|1/i.test(str);
  }
}}

{
  const proxy = {};
  const obfs = {};
  const $ = {};
  const params = {};
}

start = (trojan) {
  return proxy
}

trojan = "trojan://" password:password "@" server:server ":" port:port "/"? params? name:name?{
  proxy.type = "trojan";
  proxy.password = password;
  proxy.server = server;
  proxy.port = port;
  proxy.name = name;

  // name may be empty
  if (!proxy.name) {
    proxy.name = server + ":" + port;
  }
};

password = match:$[^@]+ {
  return decodeURIComponent(match);
};

server = ip/domain;

domain = match:[0-9a-zA-z-_.]+ { 
  const domain = match.join(""); 
  if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {
    return domain;
  }
}

ip = & {
  const start = peg$currPos;
  let end;
  let j = start;
  while (j < input.length) {
    if (input[j] === ",") break;
    if (input[j] === ":") end = j;
    j++;
  }
  peg$currPos = end || j;
  $.ip = input.substring(start, end).trim();
  return true;
} { return $.ip; }

port = digits:[0-9]+ { 
  const port = parseInt(digits.join(""), 10); 
  if (port >= 0 && port <= 65535) {
    return port;
  } else {
    throw new Error("Invalid port: " + port);
  }
}

params = "?" head:param tail:("&"@param)* {
  for (const [key, value] of Object.entries(params)) {
    params[key] = decodeURIComponent(value);
  }
  proxy["skip-cert-verify"] = toBool(params["allowInsecure"]);
  proxy.sni = params["sni"] || params["peer"];
  proxy['client-fingerprint'] = params.fp;
  proxy.alpn = params.alpn ? decodeURIComponent(params.alpn).split(',') : undefined;

  if (toBool(params["ws"])) {
    proxy.network = "ws";
    $set(proxy, "ws-opts.path", params["wspath"]);
  }
  
  if (params["type"]) {
    let httpupgrade
    proxy.network = params["type"]
    if(proxy.network === 'httpupgrade') {
      proxy.network = 'ws'
      httpupgrade = true
    }
    if (['grpc'].includes(proxy.network)) {
        proxy[proxy.network + '-opts'] = {
            'grpc-service-name': params["serviceName"],
            '_grpc-type': params["mode"],
            '_grpc-authority': params["authority"],
        };
    } else {
      if (params["path"]) {
        $set(proxy, proxy.network+"-opts.path", decodeURIComponent(params["path"]));  
      }
      if (params["host"]) {
        $set(proxy, proxy.network+"-opts.headers.Host", decodeURIComponent(params["host"])); 
      }
      if (httpupgrade) {
        $set(proxy, proxy.network+"-opts.v2ray-http-upgrade", true); 
        $set(proxy, proxy.network+"-opts.v2ray-http-upgrade-fast-open", true); 
      }
    }
    if (['reality'].includes(params.security)) {
      const opts = {};
      if (params.pbk) {
        opts['public-key'] = params.pbk;
      }
      if (params.sid) {
        opts['short-id'] = params.sid;
      }
      if (params.spx) {
        opts['_spider-x'] = params.spx;
      }
      if (params.mode) {
        proxy._mode = params.mode;
      }
      if (params.extra) {
        proxy._extra = params.extra;
      }
      if (Object.keys(opts).length > 0) {
        $set(proxy, params.security+"-opts", opts); 
      }
    }
  }

  proxy.udp = toBool(params["udp"]);
  proxy.tfo = toBool(params["tfo"]);
}

param = kv/single;

kv = key:$[a-z]i+ "=" value:$[^&#]i* {
  params[key] = value;
}

single = key:$[a-z]i+ {
  params[key] = true;
};

name = "#" + match:$.* {
  return decodeURIComponent(match);
}
`,tw;function rw(){return tw||(tw=mF.generate(RV)),tw}var aw=Yr(sw());function vF(t){let[e,n]=t.match(/,\s*?port-hopping\s*?=\s*?["']?\s*?((\d+(-\d+)?)([,;]\d+(-\d+)?)*)\s*?["']?\s*?/)||[];return{port_hopping:n?n.replace(/;/g,","):void 0,line:e?t.replace(e,""):t}}function PV(){return{name:"URI PROXY Parser",test:t=>/^(socks5\+tls|socks5|http|https):\/\//.test(t),parse:t=>{let[e,n,u,s,p,y,g,E,m]=t.match(/^(socks5|http|http)(\+tls|s)?:\/\/(?:(.*?):(.*?)@)?(.*?)(?::(\d+?))?\/?(\?.*?)?(?:#(.*?))?$/);if(g)g=parseInt(g,10);else{if(u)g=443;else if(n==="http")g=80;else throw R.error(`port is not present in line: ${t}`),new Error(`port is not present in line: ${t}`);R.info(`port is not present in line: ${t}, set to ${g}`)}return{name:m!=null?decodeURIComponent(m):`${n} ${y}:${g}`,type:n,tls:!!u,server:y,port:g,username:s!=null?decodeURIComponent(s):void 0,password:p!=null?decodeURIComponent(p):void 0}}}}function OV(){return{name:"URI SOCKS Parser",test:t=>/^socks:\/\//.test(t),parse:t=>{let[e,n,u,s,p,y,g]=t.match(/^(socks)?:\/\/(?:(.*)@)?(.*?)(?::(\d+?))?(\?.*?)?(?:#(.*?))?$/);if(p)p=parseInt(p,10);else throw R.error(`port is not present in line: ${t}`),new Error(`port is not present in line: ${t}`);let E,m;if(u){let D=ft.decode(decodeURIComponent(u)).split(":");E=D[0],m=D[1]}return{name:g!=null?decodeURIComponent(g):`${n} ${s}:${p}`,type:"socks5",server:s,port:p,username:E,password:m}}}}function xV(){return{name:"URI SS Parser",test:t=>/^ss:\/\//.test(t),parse:t=>{let e=t.split("ss://")[1],n=t.split("#")[1],u={type:"ss"};e=e.split("#")[0];let s=e.match(/@([^/?]*)(\/|\?|$)/),p=decodeURIComponent(e.split("@")[0]),y;p?.startsWith("2022-blake3-")?y=p:y=ft.decode(p);let g="";if(s)e.includes("?")&&(g=e.match(/(\?.*)$/)[1]);else{if(e.includes("?")){let W=e.match(/^(.*)(\?.*)$/);e=W[1],g=W[2]}if(e=ft.decode(e),g){if(/(&|\?)v2ray-plugin=/.test(g)){let W=g.match(/(&|\?)v2ray-plugin=(.*?)(&|$)/)[2];W&&(u.plugin="v2ray-plugin",u["plugin-opts"]=JSON.parse(ft.decode(W)))}e=`${e}${g}`}y=e.match(/(^.*)@/)?.[1],s=e.match(/@([^/@]*)(\/|$)/)}let E=s[1],m=E.lastIndexOf(":");u.server=E.substring(0,m),u.port=`${E.substring(m+1)}`.match(/\d+/)?.[0];let D=y.match(/(^.*?):(.*$)/);u.cipher=D?.[1],u.password=D?.[2];let a=e.match(/[?&]plugin=([^&]+)/),H=e.match(/[?&]shadow-tls=([^&]+)/);if(a){let W=("plugin="+decodeURIComponent(a[1])).split(";"),w={};for(let U of W){let[tt,J]=U.split("=");tt&&(w[tt]=J||!0)}switch(w.plugin){case"obfs-local":case"simple-obfs":u.plugin="obfs",u["plugin-opts"]={mode:w.obfs,host:fr(w["obfs-host"])};break;case"v2ray-plugin":u.plugin="v2ray-plugin",u["plugin-opts"]={mode:"websocket",host:fr(w["obfs-host"]),path:fr(w.path),tls:Jc(w.tls)};break;case"shadow-tls":{u.plugin="shadow-tls";let U=fr(w.version);u["plugin-opts"]={host:fr(w.host),password:fr(w.password),version:U?parseInt(U,10):void 0};break}default:throw new Error(`Unsupported plugin option: ${w.plugin}`)}}if(H){let W=JSON.parse(ft.decode(H[1])),w=fr(W.version),U=fr(W.address),tt=fr(W.port);u.plugin="shadow-tls",u["plugin-opts"]={host:fr(W.host),password:fr(W.password),version:w?parseInt(w,10):void 0},U&&(u.server=U),tt&&(u.port=parseInt(tt,10))}return/(&|\?)uot=(1|true)/i.test(g)&&(u["udp-over-tcp"]=!0),/(&|\?)tfo=(1|true)/i.test(g)&&(u.tfo=!0),n!=null&&(n=decodeURIComponent(n)),u.name=n??`SS ${u.server}:${u.port}`,u}}}function TV(){return{name:"URI SSR Parser",test:t=>/^ssr:\/\//.test(t),parse:t=>{t=ft.decode(t.split("ssr://")[1]);let e=t.indexOf(":origin");e===-1&&(e=t.indexOf(":auth_"));let n=t.substring(0,e),u=n.substring(0,n.lastIndexOf(":")),s=n.substring(n.lastIndexOf(":")+1),p=t.substring(e+1).split("/?")[0].split(":"),y={type:"ssr",server:u,port:s,protocol:p[0],cipher:p[1],obfs:p[2],password:ft.decode(p[3])},g={};if(t=t.split("/?")[1].split("&"),t.length>1)for(let E of t){let[m,D]=E.split("=");D=D.trim(),D.length>0&&D!=="(null)"&&(g[m]=D)}return y={...y,name:g.remarks?ft.decode(g.remarks):y.server,"protocol-param":fr(ft.decode(g.protoparam||"").replace(/\s/g,"")),"obfs-param":fr(ft.decode(g.obfsparam||"").replace(/\s/g,""))},y}}}function NV(){return{name:"URI VMess Parser",test:t=>/^vmess:\/\//.test(t),parse:t=>{t=t.split("vmess://")[1];let e=ft.decode(t.replace(/\?.*?$/,""));if(/=\s*vmess/.test(e)){let n=e.split(",").map(p=>p.trim()),u={};for(let p of n)if(p.indexOf("=")!==-1){let[y,g]=p.split("=");u[y.trim()]=g.trim()}let s={name:n[0].split("=")[0].trim(),type:"vmess",server:n[1],port:n[2],cipher:fr(n[3],"auto"),uuid:n[4].match(/^"(.*)"$/)[1],tls:u.obfs==="wss",udp:Jc(u["udp-relay"]),tfo:Jc(u["fast-open"]),"skip-cert-verify":Xc(u["tls-verification"])?!u["tls-verification"]:void 0};if(Xc(u.obfs))if(u.obfs==="ws"||u.obfs==="wss"){s.network="ws",s["ws-opts"].path=(fr(u["obfs-path"])||'"/"').match(/^"(.*)"$/)[1];let p=u["obfs-header"];p&&p.indexOf("Host")!==-1&&(p=p.match(/Host:\s*([a-zA-Z0-9-.]*)/)[1]),ca(p)&&(s["ws-opts"].headers={Host:p})}else throw new Error(`Unsupported obfs: ${u.obfs}`);return s}else{let n={};try{n=JSON.parse(e)}catch{let[g,E,m]=/(^[^?]+?)\/?\?(.*)$/.exec(t);e=ft.decode(E);for(let U of m.split("&")){let[tt,J]=U.split("="),N=J;N=decodeURIComponent(J),N.indexOf(",")===-1?n[tt]=N:n[tt]=N.split(",")}let[D,a,H,W,w]=/(^[^:]+?):([^:]+?)@(.*):(\d+)$/.exec(e);n.scy=a,n.id=H,n.port=w,n.add=W}let u=n.add,s=parseInt(Jc(n.port),10),p={name:n.ps??n.remarks??n.remark??`VMess ${u}:${s}`,type:"vmess",server:u,port:s,cipher:["auto","aes-128-gcm","chacha20-poly1305","none"].includes(n.scy)?n.scy:"auto",uuid:n.id,alterId:parseInt(Jc(n.aid??n.alterId,0),10),tls:["tls",!0,1,"1"].includes(n.tls),"skip-cert-verify":Xc(n.verify_cert)?!n.verify_cert:void 0};!p["skip-cert-verify"]&&Xc(n.allowInsecure)&&(p["skip-cert-verify"]=/(TRUE)|1/i.test(n.allowInsecure)),p.tls&&(n.sni&&n.sni!==""?p.sni=n.sni:n.peer&&n.peer!==""&&(p.sni=n.peer));let y=!1;if(n.net==="ws"||n.obfs==="websocket"?p.network="ws":["http"].includes(n.net)||["http"].includes(n.obfs)||["http"].includes(n.type)?p.network="http":["grpc","kcp","quic"].includes(n.net)?p.network=n.net:n.net==="httpupgrade"||p.network==="httpupgrade"?(p.network="ws",y=!0):(n.net==="h2"||p.network==="h2")&&(p.network="h2"),p.network){let g=n.host??n.obfsParam;try{let m=JSON.parse(g)?.Host;m&&(g=m)}catch{}let E=n.path;if(["ws"].includes(p.network)&&(E=E||"/"),p.network==="http"&&(g&&(g=g.split(",").map(m=>m.trim()),g=Array.isArray(g)?g[0]:g),E?E=Array.isArray(E)?E[0]:E:E="/"),E||g||["kcp","quic"].includes(p.network))if(["grpc"].includes(p.network))p[`${p.network}-opts`]={"grpc-service-name":fr(E),"_grpc-type":fr(n.type),"_grpc-authority":fr(n.authority)};else if(["kcp","quic"].includes(p.network))p[`${p.network}-opts`]={[`_${p.network}-type`]:fr(n.type),[`_${p.network}-host`]:fr(fr(g)),[`_${p.network}-path`]:fr(E)};else{let m={path:fr(E),headers:{Host:fr(g)}};y&&(m["v2ray-http-upgrade"]=!0,m["v2ray-http-upgrade-fast-open"]=!0),p[`${p.network}-opts`]=m}else delete p.network}return p["client-fingerprint"]=n.fp,p.alpn=n.alpn?n.alpn.split(","):void 0,p}}}}function wF(){return{name:"URI VLESS Parser",test:t=>/^vless:\/\//.test(t),parse:t=>{t=t.split("vless://")[1];let e,n=/^(.*?)@(.*?):(\d+)\/?(\?(.*?))?(?:#(.*?))?$/.exec(t);if(!n){let[W,w,U]=/^(.*?)(\?.*?$)/.exec(t);t=`${ft.decode(w)}${U}`,n=/^(.*?)@(.*?):(\d+)\/?(\?(.*?))?(?:#(.*?))?$/.exec(t),e=!0}let[u,s,p,y,g,E="",m]=n;e&&(s=s.replace(/^.*?:/g,"")),y=parseInt(`${y}`,10),s=decodeURIComponent(s),m!=null&&(m=decodeURIComponent(m));let D={type:"vless",name:m,server:p,port:y,uuid:s},a={};for(let W of E.split("&"))if(W){let[w,U]=W.split("="),tt=U;tt=decodeURIComponent(U),a[w]=tt}if(D.name=m??a.remarks??a.remark??`VLESS ${p}:${y}`,D.tls=a.security&&a.security!=="none",e&&/TRUE|1/i.test(a.tls)&&(D.tls=!0,a.security=a.security??"reality"),D.sni=a.sni||a.peer,D.flow=a.flow,!D.flow&&e&&a.xtls){let W=[void 0,"xtls-rprx-direct","xtls-rprx-vision"][a.xtls];W&&(D.flow=W)}if(D["client-fingerprint"]=a.fp,D.alpn=a.alpn?a.alpn.split(","):void 0,D["skip-cert-verify"]=/(TRUE)|1/i.test(a.allowInsecure),["reality"].includes(a.security)){let W={};a.pbk&&(W["public-key"]=a.pbk),a.sid&&(W["short-id"]=a.sid),a.spx&&(W["_spider-x"]=a.spx),Object.keys(W).length>0&&(D[`${a.security}-opts`]=W)}let H=!1;if(D.network=a.type,D.network==="tcp"&&a.headerType==="http"?D.network="http":D.network==="httpupgrade"&&(D.network="ws",H=!0),!D.network&&e&&a.obfs&&(D.network=a.obfs,["none"].includes(D.network)&&(D.network="tcp")),["websocket"].includes(D.network)&&(D.network="ws"),D.network&&!["tcp","none"].includes(D.network)){let W={},w=a.host??a.obfsParam;if(w)if(a.obfsParam)try{let U=JSON.parse(w);W.headers=U}catch{W.headers={Host:w}}else W.headers={Host:w};a.serviceName?(W[`${D.network}-service-name`]=a.serviceName,["grpc"].includes(D.network)&&a.authority&&(W["_grpc-authority"]=a.authority)):e&&a.path&&(["ws","http","h2"].includes(D.network)||(W[`${D.network}-service-name`]=a.path,delete a.path)),a.path&&(W.path=a.path),["grpc"].includes(D.network)&&(W["_grpc-type"]=a.mode||"gun"),H&&(W["v2ray-http-upgrade"]=!0,W["v2ray-http-upgrade-fast-open"]=!0),Object.keys(W).length>0&&(D[`${D.network}-opts`]=W),D.network==="kcp"&&(a.seed&&(D.seed=a.seed),D.headerType=a.headerType||"none"),a.mode&&(D._mode=a.mode),a.extra&&(D._extra=a.extra)}return a.encryption&&(D.encryption=a.encryption),a.pqv&&(D._pqv=a.pqv),D}}}function kV(){return{name:"URI AnyTLS Parser",test:t=>/^anytls:\/\//.test(t),parse:t=>{let e=wF().parse(t.replace("anytls","vless"));t=t.split(/anytls:\/\//)[1];let[n,u,s,p,y="",g]=/^(.*?)@(.*?)(?::(\d+))?\/?(?:\?(.*?))?(?:#(.*?))?$/.exec(t);u=decodeURIComponent(u),p=parseInt(`${p}`,10),isNaN(p)&&(p=443),u=decodeURIComponent(u),g!=null&&(g=decodeURIComponent(g)),g=g??`AnyTLS ${s}:${p}`;let E={...e,uuid:void 0,type:"anytls",name:g,server:s,port:p,password:u};for(let m of y.split("&"))if(m){let[D,a]=m.split("=");D=D.replace(/_/g,"-"),a=decodeURIComponent(a),["alpn"].includes(D)?E[D]=a?a.split(","):void 0:["insecure"].includes(D)?E["skip-cert-verify"]=/(TRUE)|1/i.test(a):["udp"].includes(D)?E[D]=/(TRUE)|1/i.test(a):Object.keys(E).includes(D)||(E[D]=a)}return["tcp"].includes(E.network)&&!E["reality-opts"]&&(delete E.network,delete E.security),E}}}function LV(){return{name:"URI Hysteria2 Parser",test:t=>/^(hysteria2|hy2):\/\//.test(t),parse:t=>{t=t.split(/(hysteria2|hy2):\/\//)[2];let e,[n,u,s,p,y,g,E,m,D,a,H="",W]=/^(.*?)@(.*?)(:((\d+(-\d+)?)([,;]\d+(-\d+)?)*))?\/?(\?(.*?))?(?:#(.*?))?$/.exec(t);/^\d+$/.test(y)?(y=parseInt(`${y}`,10),isNaN(y)&&(y=443)):y?(e=y,y=$f(e)):y=443,u=decodeURIComponent(u),W!=null&&(W=decodeURIComponent(W)),W=W??`Hysteria2 ${s}:${y}`;let w={type:"hysteria2",name:W,server:s,port:y,ports:e,password:u},U={};for(let N of H.split("&"))if(N){let[Q,it]=N.split("="),q=it;q=decodeURIComponent(it),U[Q]=q}w.sni=U.sni,!w.sni&&U.peer&&(w.sni=U.peer),U.obfs&&U.obfs!=="none"&&(w.obfs=U.obfs),U.mport&&(w.ports=U.mport),w["obfs-password"]=U["obfs-password"],w["skip-cert-verify"]=/(TRUE)|1/i.test(U.insecure),w.tfo=/(TRUE)|1/i.test(U.fastopen),w["tls-fingerprint"]=U.pinSHA256;let tt=U["hop-interval"]||U.hop_interval;/^\d+$/.test(tt)&&(w["hop-interval"]=parseInt(`${tt}`,10));let J=U.keepalive;return/^\d+$/.test(J)&&(w.keepalive=parseInt(`${J}`,10)),w}}}function UV(){return{name:"URI Hysteria Parser",test:t=>/^(hysteria|hy):\/\//.test(t),parse:t=>{t=t.split(/(hysteria|hy):\/\//)[2];let[e,n,u,s,p,y="",g]=/^(.*?)(:(\d+))?\/?(\?(.*?))?(?:#(.*?))?$/.exec(t);s=parseInt(`${s}`,10),isNaN(s)&&(s=443),g!=null&&(g=decodeURIComponent(g)),g=g??`Hysteria ${n}:${s}`;let E={type:"hysteria",name:g,server:n,port:s},m={};for(let D of y.split("&"))if(D){let[a,H]=D.split("=");a=a.replace(/_/,"-"),H=decodeURIComponent(H),["alpn"].includes(a)?E[a]=H?H.split(","):void 0:["insecure"].includes(a)?E["skip-cert-verify"]=/(TRUE)|1/i.test(H):["auth"].includes(a)?E["auth-str"]=H:["mport"].includes(a)?E.ports=H:["obfsParam"].includes(a)?E.obfs=H:["upmbps"].includes(a)?E.up=H:["downmbps"].includes(a)?E.down=H:["obfs"].includes(a)?E._obfs=H||"":["fast-open","peer"].includes(a)?m[a]=H:Object.keys(E).includes(a)||(E[a]=H)}return!E.sni&&m.peer&&(E.sni=m.peer),!E["fast-open"]&&m.fastopen&&(E["fast-open"]=!0),E.protocol||(E.protocol="udp"),E}}}function jV(){return{name:"URI TUIC Parser",test:t=>/^tuic:\/\//.test(t),parse:t=>{t=t.split(/tuic:\/\//)[1];let[e,n,u,s,p="",y]=/^(.*?)@(.*?)(?::(\d+))?\/?(?:\?(.*?))?(?:#(.*?))?$/.exec(t);n=decodeURIComponent(n);let[g,...E]=n.split(":"),m=E.join(":");s=parseInt(`${s}`,10),isNaN(s)&&(s=443),m=decodeURIComponent(m),y!=null&&(y=decodeURIComponent(y)),y=y??`TUIC ${u}:${s}`;let D={type:"tuic",name:y,server:u,port:s,password:m,uuid:g};for(let a of p.split("&"))if(a){let[H,W]=a.split("=");H=H.replace(/_/g,"-"),W=decodeURIComponent(W),["alpn"].includes(H)?D[H]=W?W.split(","):void 0:["allow-insecure","insecure"].includes(H)?D["skip-cert-verify"]=/(TRUE)|1/i.test(W):["fast-open"].includes(H)?D.tfo=!0:["disable-sni","reduce-rtt"].includes(H)?D[H]=/(TRUE)|1/i.test(W):H==="congestion-control"?(D["congestion-controller"]=W,delete D[H]):Object.keys(D).includes(H)||(D[H]=W)}return D}}}function HV(){return{name:"URI WireGuard Parser",test:t=>/^(wireguard|wg):\/\//.test(t),parse:t=>{t=t.split(/(wireguard|wg):\/\//)[2];let[e,n,u,s,p,y,g,E="",m]=/^((.*?)@)?(.*?)(:(\d+))?\/?(\?(.*?))?(?:#(.*?))?$/.exec(t);y=parseInt(`${y}`,10),isNaN(y)&&(y=51820),u=decodeURIComponent(u),m!=null&&(m=decodeURIComponent(m)),m=m??`WireGuard ${s}:${y}`;let D={type:"wireguard",name:m,server:s,port:y,"private-key":u,udp:!0};for(let a of E.split("&"))if(a){let[H,W]=a.split("=");if(H=H.replace(/_/,"-"),W=decodeURIComponent(W),["reserved"].includes(H)){let w=W.split(",").map(U=>parseInt(U.trim(),10)).filter(U=>Number.isInteger(U));w.length===3&&(D[H]=w)}else if(["address","ip"].includes(H))W.split(",").map(w=>{let U=w.trim().replace(/\/\d+$/,"").replace(/^\[/,"").replace(/\]$/,"");Wr(U)?D.ip=U:Mr(U)&&(D.ipv6=U)});else if(["mtu"].includes(H)){let w=parseInt(W.trim(),10);Number.isInteger(w)&&(D[H]=w)}else/publickey/i.test(H)?D["public-key"]=W:/privatekey/i.test(H)?D["private-key"]=W:["udp"].includes(H)?D[H]=/(TRUE)|1/i.test(W):[...Object.keys(D),"flag"].includes(H)||(D[H]=W)}return D}}}function MV(){return{name:"URI Trojan Parser",test:t=>/^trojan:\/\//.test(t),parse:t=>{let e=/^(trojan:\/\/.*?@.*?)(:(\d+))?\/?(\?.*?)?$/.exec(t);e?.[2]||(t=t.replace(e[1],`${e[1]}:443`));let[n,u]=t.split(/#(.+)/,2),s=rw().parse(n);if(ca(u))try{s.name=decodeURIComponent(u)}catch{}return s}}}function qV(){return{name:"Clash Parser",test:t=>{let e;try{e=aw.default.parse(t)}catch{e=pa.parse(t)}return!!e?.type},parse:t=>{let e;try{e=aw.default.parse(t)}catch{e=pa.parse(t)}if(!["naive","anytls","mieru","sudoku","juicity","ss","ssr","vmess","socks5","http","snell","trojan","tuic","vless","hysteria","hysteria2","wireguard","ssh","direct"].includes(e.type))throw new Error(`Clash does not support proxy with type: ${e.type}`);return["vmess","vless"].includes(e.type)&&(e.sni=e.servername,delete e.servername),e["server-cert-fingerprint"]&&(e["tls-fingerprint"]=e["server-cert-fingerprint"]),e.fingerprint&&(e["tls-fingerprint"]=e.fingerprint),e["dialer-proxy"]&&(e["underlying-proxy"]=e["dialer-proxy"]),e["benchmark-url"]&&(e["test-url"]=e["benchmark-url"]),e["benchmark-timeout"]&&(e["test-timeout"]=e["benchmark-timeout"]),e}}}function VV(){return{name:"QX SS Parser",test:t=>/^shadowsocks\s*=/.test(t.split(",")[0].trim())&&t.indexOf("ssr-protocol")===-1,parse:t=>Fu().parse(t)}}function KV(){return{name:"QX SSR Parser",test:t=>/^shadowsocks\s*=/.test(t.split(",")[0].trim())&&t.indexOf("ssr-protocol")!==-1,parse:t=>Fu().parse(t)}}function zV(){return{name:"QX VMess Parser",test:t=>/^vmess\s*=/.test(t.split(",")[0].trim()),parse:t=>Fu().parse(t)}}function GV(){return{name:"QX VLESS Parser",test:t=>/^vless\s*=/.test(t.split(",")[0].trim()),parse:t=>Fu().parse(t)}}function YV(){return{name:"QX Trojan Parser",test:t=>/^trojan\s*=/.test(t.split(",")[0].trim()),parse:t=>Fu().parse(t)}}function WV(){return{name:"QX HTTP Parser",test:t=>/^http\s*=/.test(t.split(",")[0].trim()),parse:t=>Fu().parse(t)}}function XV(){return{name:"QX Socks5 Parser",test:t=>/^socks5\s*=/.test(t.split(",")[0].trim()),parse:t=>Fu().parse(t)}}function JV(){return{name:"Loon SS Parser",test:t=>t.split(",")[0].split("=")[1].trim().toLowerCase()==="shadowsocks",parse:t=>xa().parse(t)}}function ZV(){return{name:"Loon SSR Parser",test:t=>t.split(",")[0].split("=")[1].trim().toLowerCase()==="shadowsocksr",parse:t=>xa().parse(t)}}function QV(){return{name:"Loon VMess Parser",test:t=>/^.*=\s*vmess/i.test(t.split(",")[0])&&t.indexOf("username")===-1,parse:t=>xa().parse(t)}}function eK(){return{name:"Loon Vless Parser",test:t=>/^.*=\s*vless/i.test(t.split(",")[0]),parse:t=>xa().parse(t)}}function tK(){return{name:"Loon Trojan Parser",test:t=>/^.*=\s*trojan/i.test(t.split(",")[0]),parse:t=>xa().parse(t)}}function rK(){return{name:"Loon Hysteria2 Parser",test:t=>/^.*=\s*Hysteria2/i.test(t.split(",")[0]),parse:t=>xa().parse(t)}}function nK(){return{name:"Loon HTTP Parser",test:t=>/^.*=\s*http/i.test(t.split(",")[0]),parse:t=>xa().parse(t)}}function iK(){return{name:"Loon SOCKS5 Parser",test:t=>/^.*=\s*socks5/i.test(t.split(",")[0]),parse:t=>xa().parse(t)}}function sK(){return{name:"Loon WireGuard Parser",test:t=>/^.*=\s*wireguard/i.test(t.split(",")[0]),parse:t=>{let e=t.match(/(^.*?)\s*?=\s*?wireguard\s*?,.+?\s*?=\s*?.+?/i)?.[1];t=t.replace(e,"").replace(/^\s*?=\s*?wireguard\s*/i,"");let n=t.match(/,\s*?peers\s*?=\s*?\[\s*?\{\s*?(.+?)\s*?\}\s*?\]/i)?.[1],u=n.match(/(,|^)\s*?endpoint\s*?=\s*?"?(.+?):(\d+)"?\s*?(,|$)/i),s=u?.[2],p=parseInt(u?.[3],10),y=t.match(/(,|^)\s*?mtu\s*?=\s*?"?(\d+?)"?\s*?(,|$)/i)?.[2];y&&(y=parseInt(y,10));let g=t.match(/(,|^)\s*?keepalive\s*?=\s*?"?(\d+?)"?\s*?(,|$)/i)?.[2];g&&(g=parseInt(g,10));let E=n.match(/(,|^)\s*?reserved\s*?=\s*?"?(\[\s*?.+?\s*?\])"?\s*?(,|$)/i)?.[2];E&&(E=JSON.parse(E));let m,D=t.match(/(,|^)\s*?dns\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],a=t.match(/(,|^)\s*?dnsv6\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2];(D||a)&&(m=[],D&&m.push(D),a&&m.push(a));let H=n.match(/(,|^)\s*?allowed-ips\s*?=\s*?"(.+?)"\s*?(,|$)/i)?.[2]?.split(",").map(N=>N.trim()),W=n.match(/(,|^)\s*?preshared-key\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],w=t.match(/(,|^)\s*?interface-ip\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],U=t.match(/(,|^)\s*?interface-ipv6\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],tt=n.match(/(,|^)\s*?public-key\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],J={type:"wireguard",name:e,server:s,port:p,ip:w,ipv6:U,"private-key":t.match(/(,|^)\s*?private-key\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],"public-key":tt,mtu:y,keepalive:g,reserved:E,"allowed-ips":H,"preshared-key":W,dns:m,udp:!0,peers:[{server:s,port:p,ip:w,ipv6:U,"public-key":tt,"pre-shared-key":W,"allowed-ips":H,reserved:E}]};return Array.isArray(J.dns)&&J.dns.length>0&&(J["remote-dns-resolve"]=!0),J}}}function aK(){return{name:"Surge Direct Parser",test:t=>/^.*=\s*direct/.test(t.split(",")[0]),parse:t=>Li().parse(t)}}function uK(){return{name:"Surge Anytls Parser",test:t=>/^.*=\s*anytls/.test(t.split(",")[0]),parse:t=>Li().parse(t)}}function oK(){return{name:"Surge SSH Parser",test:t=>/^.*=\s*ssh/.test(t.split(",")[0]),parse:t=>Li().parse(t)}}function cK(){return{name:"Surge SS Parser",test:t=>/^.*=\s*ss/.test(t.split(",")[0]),parse:t=>Li().parse(t)}}function lK(){return{name:"Surge VMess Parser",test:t=>/^.*=\s*vmess/.test(t.split(",")[0])&&t.indexOf("username")!==-1,parse:t=>Li().parse(t)}}function fK(){return{name:"Surge Trojan Parser",test:t=>/^.*=\s*trojan/.test(t.split(",")[0]),parse:t=>Li().parse(t)}}function hK(){return{name:"Surge HTTP Parser",test:t=>/^.*=\s*https?/.test(t.split(",")[0]),parse:t=>Li().parse(t)}}function dK(){return{name:"Surge Socks5 Parser",test:t=>/^.*=\s*socks5(-tls)?/.test(t.split(",")[0]),parse:t=>Li().parse(t)}}function pK(){return{name:"Surge External Parser",test:t=>/^.*=\s*external/.test(t.split(",")[0]),parse:t=>{let e=/^\s*(.*?)\s*?=\s*?external\s*?,\s*(.*?)\s*$/.exec(t),[n,u,s]=e;t=s;let p=/(,|^)\s*?exec\s*?=\s*"(.*?)"\s*?(,|$)/.exec(t)?.[2];p||(p=/(,|^)\s*?exec\s*?=\s*(.*?)\s*?(,|$)/.exec(t)?.[2]);let y=/(,|^)\s*?local-port\s*?=\s*"(.*?)"\s*?(,|$)/.exec(t)?.[2];y||(y=/(,|^)\s*?local-port\s*?=\s*(.*?)\s*?(,|$)/.exec(t)?.[2]);let g=/(,|^)\s*?args\s*?=\s*("(.*?)"|(.*?))(?=\s*?(,|$))/g,E,m=[];for(;(E=g.exec(t))!==null;)E[3]!=null?m.push(E[3]):E[4]!=null&&m.push(E[4]);let D=/(,|^)\s*?addresses\s*?=\s*("(.*?)"|(.*?))(?=\s*?(,|$))/g,a,H=[];for(;(a=D.exec(t))!==null;){let W;a[3]!=null?W=a[3]:a[4]!=null&&(W=a[4]),W!=null&&(W=`${W}`.trim().replace(/^\[/,"").replace(/\]$/,"")),EK(W)&&H.push(W)}return{type:"external",name:u,exec:p,"local-port":y,args:m,addresses:H}}}}function gK(){return{name:"Surge Snell Parser",test:t=>/^.*=\s*snell/.test(t.split(",")[0]),parse:t=>Li().parse(t)}}function mK(){return{name:"Surge Tuic Parser",test:t=>/^.*=\s*tuic(-v5)?/.test(t.split(",")[0]),parse:t=>{let{port_hopping:e,line:n}=vF(t),u=Li().parse(n);return u.ports=e,u}}}function vK(){return{name:"Surge WireGuard Parser",test:t=>/^.*=\s*wireguard/.test(t.split(",")[0]),parse:t=>Li().parse(t)}}function wK(){return{name:"Surge Hysteria2 Parser",test:t=>/^.*=\s*hysteria2/.test(t.split(",")[0]),parse:t=>{let{port_hopping:e,line:n}=vF(t),u=Li().parse(n);return u.ports=e,u}}}function EK(t){return Wr(t)||Mr(t)}var EF=[PV(),OV(),xV(),TV(),NV(),wF(),jV(),HV(),UV(),LV(),MV(),kV(),qV(),aK(),uK(),oK(),cK(),lK(),fK(),hK(),gK(),mK(),vK(),wK(),dK(),pK(),JV(),ZV(),QV(),eK(),rK(),tK(),nK(),iK(),sK(),VV(),KV(),zV(),GV(),YV(),WV(),XV()],Cs=class{constructor({token,key,syncPlatform}){let{isStash,isLoon,isShadowRocket,isQX}=hn(),{defaultProxy,defaultTimeout:timeout,githubProxy}=R.read(Kt),proxy=defaultProxy;R.env.isNode&&(proxy=proxy||eval("process.env.SUB_STORE_BACKEND_DEFAULT_PROXY")),syncPlatform==="gitlab"?(this.headers={"PRIVATE-TOKEN":`${token}`,"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.141 Safari/537.36"},this.http=Rs({baseURL:"https://gitlab.com/api/v4",headers:{...this.headers,...isStash&&proxy?{"X-Stash-Selected-Proxy":encodeURIComponent(proxy)}:{},...isShadowRocket&&proxy?{"X-Surge-Policy":proxy}:{}},...proxy?{proxy}:{},...isLoon&&proxy?{node:proxy}:{},...isQX&&proxy?{opts:{policy:proxy}}:{},...proxy?tu(proxy):{},timeout:timeout||8e3,events:{onResponse:t=>{if(/^[45]/.test(String(t.statusCode))){let e=JSON.parse(t.body);return Promise.reject(`ERROR: ${e.message?.error??e.message}`)}else return t}}})):(this.headers={Authorization:`token ${token}`,"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.141 Safari/537.36"},this.http=Rs({baseURL:`${githubProxy?`${githubProxy}/`:""}https://api.github.com`,headers:{...this.headers,...isStash&&proxy?{"X-Stash-Selected-Proxy":encodeURIComponent(proxy)}:{},...isShadowRocket&&proxy?{"X-Surge-Policy":proxy}:{}},...proxy?{proxy}:{},...isLoon&&proxy?{node:proxy}:{},...isQX&&proxy?{opts:{policy:proxy}}:{},...proxy?tu(proxy):{},timeout:timeout||8e3,events:{onResponse:t=>/^[45]/.test(String(t.statusCode))?Promise.reject(`ERROR: ${JSON.parse(t.body).message}`):t}})),this.key=key,this.syncPlatform=syncPlatform}async locate(){return this.syncPlatform==="gitlab"?this.http.get("/snippets").then(t=>{let e=JSON.parse(t.body);for(let n of e)if(n.title===this.key)return n}):this.http.get("/gists?per_page=100&page=1").then(t=>{let e=JSON.parse(t.body);R.info(`\u83B7\u53D6\u5230\u5F53\u524D GitHub \u7528\u6237\u7684 gist: ${e.length} \u4E2A`);for(let n of e)if(n.description===this.key)return n})}async upload(t){if(Object.keys(t).length===0)return Promise.reject("\u672A\u63D0\u4F9B\u9700\u4E0A\u4F20\u7684\u6587\u4EF6");let e=await this.locate(),n=t;if(e?.id){this.syncPlatform==="gitlab"&&(e.files=e.files.reduce((p,y)=>(p[y.path]=y,p),{}));let u=[],s={...e.files};return Object.keys(n).map(p=>{s[p]?n[p].content==null||n[p].content===""?(delete s[p],u.push({action:"delete",file_path:p})):(s[p]=n[p],u.push({action:"update",file_path:p,content:n[p].content})):n[p].content==null||n[p].content===""?(delete s[p],delete n[p]):(s[p]=n[p],u.push({action:"create",file_path:p,content:n[p].content}))}),this.syncPlatform==="gitlab"?Object.keys(s).length===0?Promise.reject("\u672C\u6B21\u64CD\u4F5C\u5C06\u5BFC\u81F4\u6240\u6709\u6587\u4EF6\u7684\u5185\u5BB9\u90FD\u4E3A\u7A7A, \u65E0\u6CD5\u66F4\u65B0 snippet"):Object.keys(s).length>10?Promise.reject("\u672C\u6B21\u64CD\u4F5C\u5C06\u5BFC\u81F4 snippet \u7684\u6587\u4EF6\u6570\u8D85\u8FC7 10, \u65E0\u6CD5\u66F4\u65B0 snippet"):(n=u,this.http.put({headers:{...this.headers,"Content-Type":"application/json"},url:`/snippets/${e.id}`,body:JSON.stringify({files:n})})):Object.keys(s).length===0?Promise.reject("\u672C\u6B21\u64CD\u4F5C\u5C06\u5BFC\u81F4\u6240\u6709\u6587\u4EF6\u7684\u5185\u5BB9\u90FD\u4E3A\u7A7A, \u65E0\u6CD5\u66F4\u65B0 gist"):this.http.patch({url:`/gists/${e.id}`,body:JSON.stringify({files:n})})}else return n=Object.entries(n).reduce((u,[s,p])=>(p.content!==null&&p.content!==""&&(u[s]=p),u),{}),this.syncPlatform==="gitlab"?Object.keys(n).length===0?Promise.reject("\u6240\u6709\u6587\u4EF6\u7684\u5185\u5BB9\u90FD\u4E3A\u7A7A, \u65E0\u6CD5\u521B\u5EFA snippet"):(n=Object.keys(n).map(u=>({file_path:u,content:n[u].content})),this.http.post({headers:{...this.headers,"Content-Type":"application/json"},url:"/snippets",body:JSON.stringify({title:this.key,visibility:"private",files:n})})):Object.keys(n).length===0?Promise.reject("\u6240\u6709\u6587\u4EF6\u7684\u5185\u5BB9\u90FD\u4E3A\u7A7A, \u65E0\u6CD5\u521B\u5EFA gist"):this.http.post({url:"/gists",body:JSON.stringify({description:this.key,public:!1,files:n})})}async download(t){let e=await this.locate();if(e?.id)try{let{files:n}=await this.http.get(`/gists/${e.id}`).then(s=>JSON.parse(s.body)),u=n[t].raw_url;return await this.http.get(u).then(s=>s.body)}catch(n){return Promise.reject(n)}else return Promise.reject(`\u627E\u4E0D\u5230 Sub-Store Gist (${this.key})`)}},_F=Yr(sw());function AK(t){for(let e of V0)try{if(e.test(t))return R.info(`Pre-processor [${e.name}] activated`),e.parse(t)}catch(n){R.error(`Parser [${e.name}] failed
 Reason: ${n}`)}return t}function bK(t){t=AK(t);let e=t.split(`
`),n=[],u;for(let s of e){if(s=s.trim(),s.length===0)continue;let p=!1;if(u){let[y,g]=AF(u,s);g||(n.push(yF(y)),p=!0)}if(!p)for(let y of EF){let[g,E]=AF(y,s);if(!E){n.push(yF(g)),u=y,p=!0,R.info(`${y.name} is activated`);break}}p||R.error(`Failed to parse line: ${s}`)}return n.filter(s=>(["vless","vmess"].includes(s.type)&&(i0(s.uuid)||R.info(`UUID may be invalid: ${s.name} ${s.uuid}`)),!0))}async function yK(t,e=[],n,u,s){let p={};for(let y of e){if(y.disabled){R.log(`Skipping disabled operator: "${y.type}" with arguments:
 >>> ${JSON.stringify(y.args,null,2)||"None"}`);continue}let g,E={};if(y.type.indexOf("Script")!==-1){let{mode:D,content:a}=y.args;if(D==="link"){let H=a||"",W=H.split("#");if(W.length>1)try{E=JSON.parse(decodeURIComponent(W[1]))}catch{for(let U of W[1].split("&")){let tt=U.split("=")[0],J=U.split("=")[1];E[tt]=J==null||J===""?!0:decodeURIComponent(J)}}H=`${H.split("#")[0]}${W[2]?`#${W[2]}`:E?.noCache!=null||E?.insecure!=null?`#${W[1]}`:""}`;let w=H.split("#")[0].match(/^\/api\/(file|module)\/(.+)/);if(w){let U="";try{U=w?.[1];let tt=w?.[2];if(tt==null)throw new Error(`\u672C\u5730 ${U} URL \u65E0\u6548: ${H}`);tt=decodeURIComponent(tt);let J=U==="module"?jn:Lt,N=ct(R.read(J),tt);if(!N)throw new Error(`\u627E\u4E0D\u5230 ${U}: ${tt}`);U==="module"?g=N.content:g=await vn({type:"file",name:tt})}catch(tt){throw R.error(`Error when loading ${U}: ${y.args.content}.
 Reason: ${tt}`),new Error(`\u65E0\u6CD5\u52A0\u8F7D ${U}: ${H}`)}}else if(H?.startsWith("/"))try{g=require("fs").readFileSync(H.split("#")[0],"utf8")}catch(U){throw R.error(`Error when reading local script: ${y.args.content}.
 Reason: ${U}`),new Error(`\u65E0\u6CD5\u4ECE\u8BE5\u8DEF\u5F84\u8BFB\u53D6\u811A\u672C\u6587\u4EF6: ${H}`)}else try{g=await un(H)}catch(U){throw R.error(`Error when downloading remote script: ${y.args.content}.
 Reason: ${U}`),new Error(`\u65E0\u6CD5\u4E0B\u8F7D\u811A\u672C: ${H}`)}}else g=a,E=y.args.arguments||{}}if(!q0[y.type]){R.error(`Unknown operator: "${y.type}"`);continue}R.log(`Applying "${y.type}" with arguments:
 >>> ${JSON.stringify(y.args,null,2)||"None"}`);let m;y.type.indexOf("Script")!==-1?m=q0[y.type](g,n,E,u,s,p):m=q0[y.type](y.args||{}),t=await lC(m,t)}return t}function _K(t,e,n,u={}){let s=Op[e];if(!s)throw new Error(`Target platform: ${e} is not supported!`);let p=/Surge|SurgeMac|Shadowrocket/i.test(e);if(t=t.filter(y=>y.supported&&y.supported[e]===!1?!1:(["vless","vmess"].includes(y.type)&&(i0(y.uuid)||R.info(`UUID may be invalid: ${y.name} ${y.uuid}`)),!0)),t=t.map(y=>(y._resolved=y.resolved,ca(y.name)||(y.name=`${y.type} ${y.server}:${y.port}`),y["disable-sni"]&&(p?y.sni="off":["tuic"].includes(y.type)||(R.error(`Target platform ${e} does not support sni off. Proxy's fields (sni, tls-fingerprint and skip-cert-verify) will be modified.`),y.sni="",y["skip-cert-verify"]=!0,delete y["tls-fingerprint"])),y.ports&&(y.ports=String(y.ports),["ClashMeta"].includes(e)||(y.ports=y.ports.replace(/\//g,",")),y.port||(y.port=$f(y.ports))),y)),R.log(`Producing proxies for target: ${e}`),typeof s.type>"u"||s.type==="SINGLE"){let y=t.map(g=>{try{return s.produce(g,n,u)}catch(E){return R.error(`Cannot produce proxy: ${JSON.stringify(g,null,2)}
Reason: ${E}`),""}}).filter(g=>g.length>0);return y=n==="internal"?y:y.join(`
`),e.startsWith("Surge")&&t.length>0&&t.every(g=>g.type==="wireguard")&&(y=`#!name=${t[0]?._subName}
#!desc=${t[0]?._desc??""}
#!category=${t[0]?._category??""}
${y}`),y}else if(s.type==="ALL")return s.produce(t,n,u)}var xt={parse:bK,process:yK,produce:_K,ipAddress:n0,getRandomPort:$f,isIPv4:Wr,isIPv6:Mr,isIP:uw,yaml:pa,getFlag:El,removeFlag:Gf,getISO:k0,MMDB:N0,Gist:Cs,download:un,downloadFile:Kh,isValidUUID:i0,doh:bl,Buffer:Mp.Buffer,Base64:ft,JSON5:_F.default};function AF(t,e){if(!CK(t,e))return[null,new Error("Parser mismatch")];try{return[t.parse(e),null]}catch(n){return[null,n]}}function CK(t,e){try{return t.test(e)}catch{return!1}}function bF(t){if(typeof t=="string"||typeof t=="number"){if(t=String(t).trim(),t==="")return"/";if(!t.startsWith("/"))return"/"+t}return t}function yF(t){typeof t.cipher=="string"&&(t.cipher=t.cipher.toLowerCase()),typeof t.password=="number"&&(t.password=ib(t.password)),["ss"].includes(t.type)&&t.cipher==="none"&&!t.password&&(t.password=""),t.interface&&(t["interface-name"]=t.interface,delete t.interface),nb(t.port)&&(t.port=parseInt(t.port,10)),t.server&&(t.server=`${t.server}`.trim().replace(/^\[/,"").replace(/\]$/,"")),t.network==="ws"&&(!t["ws-opts"]&&(t["ws-path"]||t["ws-headers"])&&(t["ws-opts"]={},t["ws-path"]&&(t["ws-opts"].path=t["ws-path"]),t["ws-headers"]&&(t["ws-opts"].headers=t["ws-headers"])),delete t["ws-path"],delete t["ws-headers"]);let e=t[`${t.network}-opts`]?.path;if(Array.isArray(e)?t[`${t.network}-opts`].path=e.map(u=>bF(u)):e!=null&&(t[`${t.network}-opts`].path=bF(e)),t.type==="trojan"&&t.network==="tcp"&&delete t.network,["vmess"].includes(t.type)&&(t.cipher=t.cipher||"none",t.alterId=t.alterId||0),["vless"].includes(t.type)&&(t.network||(t.network="tcp")),["trojan","tuic","hysteria","hysteria2","juicity","anytls","naive"].includes(t.type)&&(t.tls=!0),t.network){let u=t[`${t.network}-opts`]?.headers?.Host,s=t[`${t.network}-opts`]?.headers?.host;t.network==="h2"?!s&&u&&(t[`${t.network}-opts`].headers.host=u,delete t[`${t.network}-opts`].headers.Host):s&&!u&&(t[`${t.network}-opts`].headers.Host=s,delete t[`${t.network}-opts`].headers.host)}if(t.network==="h2"){let u=t["h2-opts"]?.headers?.host,s=t["h2-opts"]?.path;u&&!Array.isArray(u)&&(t["h2-opts"].headers.host=[u]),Array.isArray(s)&&(t["h2-opts"].path=s[0])}if(!t.tls&&["ws","http"].includes(t.network)&&!t[`${t.network}-opts`]?.headers?.Host&&!uw(t.server)&&(t[`${t.network}-opts`]=t[`${t.network}-opts`]||{},t[`${t.network}-opts`].headers=t[`${t.network}-opts`].headers||{},t[`${t.network}-opts`].headers.Host=["vmess","vless"].includes(t.type)&&t.network==="http"?[t.server]:t.server),["vmess","vless"].includes(t.type)&&t.network==="http"){let u=t[`${t.network}-opts`]?.path,s=t[`${t.network}-opts`]?.headers?.Host;s&&!Array.isArray(s)&&(t[`${t.network}-opts`].headers.Host=[s]),u&&!Array.isArray(u)&&(t[`${t.network}-opts`].path=[u])}if(t.tls&&!t.sni&&(uw(t.server)||(t.sni=t.server),!t.sni&&t.network)){let u=t[`${t.network}-opts`]?.headers?.Host;u=Array.isArray(u)?u[0]:u,u&&(t.sni=u)}if(t.ports?t.ports=String(t.ports).replace(/\//g,","):delete t.ports,["hysteria2"].includes(t.type)&&t.obfs&&!["salamander"].includes(t.obfs)&&!t["obfs-password"]&&(t["obfs-password"]=t.obfs,t.obfs="salamander"),["hysteria2"].includes(t.type)&&!t["obfs-password"]&&t.obfs_password&&(t["obfs-password"]=t.obfs_password,delete t.obfs_password),["vless"].includes(t.type)&&(t["reality-opts"]&&Object.keys(t["reality-opts"]).length===0&&delete t["reality-opts"],t["grpc-opts"]&&Object.keys(t["grpc-opts"]).length===0&&delete t["grpc-opts"],!t["reality-opts"]&&!t.flow&&delete t.flow,["http"].includes(t.network)&&(t[`${t.network}-opts`]?.path||(t[`${t.network}-opts`]||(t[`${t.network}-opts`]={}),t[`${t.network}-opts`].path=["/"]))),typeof t.name!="string")if(/^\d+$/.test(t.name))t.name=`${t.name}`;else try{t.name?.data?t.name=Mp.Buffer.from(t.name.data).toString("utf8"):t.name=Mp.Buffer.from(t.name).toString("utf8")}catch(u){R.error(`proxy.name decode failed
Reason: ${u}`),t.name=`${t.type} ${t.server}:${t.port}`}["ws","http","h2"].includes(t.network)&&(["ws","h2"].includes(t.network)&&!t[`${t.network}-opts`]?.path?(t[`${t.network}-opts`]=t[`${t.network}-opts`]||{},t[`${t.network}-opts`].path="/"):t.network==="http"&&(!Array.isArray(t[`${t.network}-opts`]?.path)||t[`${t.network}-opts`]?.path.every(u=>!u))&&(t[`${t.network}-opts`]=t[`${t.network}-opts`]||{},t[`${t.network}-opts`].path=["/"])),["","off"].includes(t.sni)&&(t["disable-sni"]=!0);let n=t.ca_str;t["ca-str"]?n=t["ca-str"]:n&&(delete t.ca_str,t["ca-str"]=n);try{R.env.isNode&&!n&&t._ca&&(n=R.node.fs.readFileSync(t._ca,{encoding:"utf8"}))}catch(u){R.error(`Read ca file failed
Reason: ${u}`)}return!t["tls-fingerprint"]&&n&&(t["tls-fingerprint"]=Xb.generateFingerprint(n)),["ss"].includes(t.type)&&ue(t,"shadow-tls-password")&&(t.plugin="shadow-tls",t["plugin-opts"]={host:t["shadow-tls-sni"],password:t["shadow-tls-password"],version:t["shadow-tls-version"]},delete t["shadow-tls-sni"],delete t["shadow-tls-password"],delete t["shadow-tls-version"]),t}function uw(t){return Wr(t)||Mr(t)}function DK(){return{name:"HTML",test:t=>/^<!DOCTYPE html>/.test(t),parse:()=>""}}function SK(){return{name:"Clash Provider",test:t=>/^payload:/gm.exec(t).index>=0,parse:t=>t.replace("payload:","").replace(/^\s*-\s*/gm,"")}}var CF=[DK(),SK()];function FK(){return{type:"SINGLE",func:t=>["URL-REGEX","DEST-PORT","SRC-IP","IN-PORT","PROTOCOL","GEOSITE","GEOIP"].indexOf(t.type)!==-1?null:`${{"DOMAIN-KEYWORD":"HOST-KEYWORD","DOMAIN-SUFFIX":"HOST-SUFFIX",DOMAIN:"HOST","IP-CIDR6":"IP6-CIDR"}[t.type]||t.type},${t.content},SUB-STORE`}}function DF(){return{type:"SINGLE",func:t=>{if(["GEOSITE","GEOIP"].indexOf(t.type)!==-1)return null;let e=`${t.type},${t.content}`;return["IP-CIDR","IP-CIDR6"].includes(t.type)&&(e+=t.options?.length>0?`,${t.options.join(",")}`:""),e}}}function IK(){return{type:"SINGLE",func:t=>["SRC-IP","GEOSITE","GEOIP"].indexOf(t.type)!==-1?null:(["IP-CIDR","IP-CIDR6"].includes(t.type)&&t.options&&(t.options=t.options.filter(e=>["no-resolve"].includes(e))),DF().func(t))}}function BK(){return{type:"ALL",func:t=>{let e={"DEST-PORT":"DST-PORT","SRC-IP":"SRC-IP-CIDR","IN-PORT":"SRC-PORT"},n={payload:t.map(u=>{let s=`${e[u.type]||u.type},${u.content}`;return["IP-CIDR","IP-CIDR6","GEOIP"].includes(u.type)&&(u.options&&(u.options=u.options.filter(p=>["no-resolve"].includes(p))),s+=u.options?.length>0?`,${u.options.join(",")}`:""),s})};return pa.dump(n)}}}var SF={QX:FK(),Surge:DF(),Loon:IK(),Clash:BK()},$K=[[/^(DOMAIN|host|HOST)$/,"DOMAIN"],[/^(DOMAIN-KEYWORD|host-keyword|HOST-KEYWORD)$/,"DOMAIN-KEYWORD"],[/^(DOMAIN-SUFFIX|host-suffix|HOST-SUFFIX)$/,"DOMAIN-SUFFIX"],[/^USER-AGENT$/i,"USER-AGENT"],[/^PROCESS-NAME$/,"PROCESS-NAME"],[/^(DEST-PORT|DST-PORT)$/,"DST-PORT"],[/^SRC-IP(-CIDR)?$/,"SRC-IP"],[/^(IN|SRC)-PORT$/,"IN-PORT"],[/^PROTOCOL$/,"PROTOCOL"],[/^IP-CIDR$/i,"IP-CIDR"],[/^(IP-CIDR6|ip6-cidr|IP6-CIDR)$/,"IP-CIDR6"],[/^GEOIP$/i,"GEOIP"],[/^GEOSITE$/i,"GEOSITE"]];function RK(){return{name:"Universal Rule Parser",test:()=>!0,parse:t=>{let e=t.split(`
`),n=[];for(let u of e)if(u=u.trim(),u.length!==0&&!/\s*#/.test(u))try{let s=u.split(",").map(g=>g.trim()),p=s[0],y=!1;for(let g of $K)if(g[0].test(p)){y=!0;let E={type:g[1],content:s[1]};["IP-CIDR","IP-CIDR6","GEOIP"].includes(E.type)&&(E.options=s.slice(2)),n.push(E)}if(!y)throw new Error("Invalid rule type: "+p)}catch{}return n}}}var FF=[RK()],Ec=(function(){function t(u){for(let s of CF)try{if(s.test(u))return R.info(`Pre-processor [${s.name}] activated`),s.parse(u)}catch(p){R.error(`Parser [${s.name}] failed
 Reason: ${p}`)}return u}function e(u){u=t(u);for(let s of FF){let p;try{p=s.test(u)}catch{p=!1}if(p)return R.info(`Rule parser [${s.name}] is activated!`),s.parse(u)}}function n(u,s){let p=SF[s];if(!p)throw new Error(`Target platform: ${s} is not supported!`);if(typeof p.type>"u"||p.type==="SINGLE")return u.map(y=>{try{return p.func(y)}catch{return""}}).filter(y=>y.length>0).join(`
`);if(p.type==="ALL")return p.func(u)}return{parse:e,produce:n}})();function ow(t){R.read(Bt)||R.write({},Bt),t.get("/api/artifacts/restore",PK),t.route("/api/artifacts").get(OK).post(NK).put(xK),t.route("/api/artifact/:name").get(TK).patch(kK).delete(LK)}async function PK(t,e){R.info("\u5F00\u59CB\u6062\u590D\u8FDC\u7A0B\u914D\u7F6E...");try{let{gistToken:n,syncPlatform:u}=R.read(Kt);if(!n)return Promise.reject("\u672A\u8BBE\u7F6E GitHub Token\uFF01");let s=new Cs({token:n,key:Lo,syncPlatform:u});try{let p=await s.locate();if(!p?.files)throw new Error("\u627E\u4E0D\u5230 Sub-Store Gist \u6587\u4EF6\u5217\u8868");let y=R.read(Bt),g=[];Object.keys(p.files).map(E=>{let m=p.files[E]?.filename;if(m)if(encodeURIComponent(m)!==m)R.error(`\u6587\u4EF6\u540D ${m} \u672A\u7F16\u7801 \u4E0D\u4FDD\u5B58`),g.push(m);else{let D=ct(y,m);D?xs(y,m,{...D,url:p.files[E]?.raw_url.replace(/\/raw\/[^/]*\/(.*)/,"/raw/$1")}):y.push({name:`${m}`,url:p.files[E]?.raw_url.replace(/\/raw\/[^/]*\/(.*)/,"/raw/$1")})}}),R.write(y,Bt)}catch(p){throw R.error(`\u67E5\u627E Sub-Store Gist \u65F6\u53D1\u751F\u9519\u8BEF: ${p.message??p}`),p}je(e)}catch(n){R.error(`\u6062\u590D\u8FDC\u7A0B\u914D\u7F6E\u5931\u8D25\uFF0C\u539F\u56E0\uFF1A${n.message??n}`),xe(e,new pr("FAILED_TO_RESTORE_ARTIFACTS","Failed to restore artifacts",`Reason: ${n.message??n}`))}}function OK(t,e){let n=R.read(Bt);je(e,n)}function xK(t,e){let n=t.body;R.write(n,Bt),je(e)}async function TK(t,e){let{name:n}=t.params,u=R.read(Bt),s=ct(u,n);s?je(e,s):xe(e,new yr("RESOURCE_NOT_FOUND",`Artifact ${n} does not exist!`),404)}function NK(t,e){let n=t.body;if(!IF(n.name)){xe(e,new Ut("INVALID_ARTIFACT_NAME",`Artifact name ${n.name} is invalid.`));return}R.info(`\u6B63\u5728\u521B\u5EFA\u8FDC\u7A0B\u914D\u7F6E\uFF1A${n.name}`);let u=R.read(Bt);ct(u,n.name)?xe(e,new Ut("DUPLICATE_KEY",`Artifact ${n.name} already exists.`)):(u.push(n),R.write(u,Bt),je(e,n,201))}function kK(t,e){let n=R.read(Bt),u=t.params.name,s=ct(n,u);if(s){R.info(`\u6B63\u5728\u66F4\u65B0\u8FDC\u7A0B\u914D\u7F6E\uFF1A${s.name}`);let p={...s,...t.body};if(!IF(p.name)){xe(e,new Ut("INVALID_ARTIFACT_NAME",`Artifact name ${p.name} is invalid.`));return}xs(n,u,p),R.write(n,Bt),je(e,p)}else xe(e,new Ut("DUPLICATE_KEY",`Artifact ${u} already exists.`))}async function LK(t,e){let{name:n}=t.params;R.info(`\u6B63\u5728\u5220\u9664\u8FDC\u7A0B\u914D\u7F6E\uFF1A${n}`);let u=R.read(Bt);try{let s=ct(u,n);if(!s)throw new Error(`\u8FDC\u7A0B\u914D\u7F6E\uFF1A${n}\u4E0D\u5B58\u5728\uFF01`);if(s.updated){let p={};p[encodeURIComponent(s.name)]={content:""},encodeURIComponent(s.name)!==s.name&&(p[s.name]={content:""});try{await qp(p)}catch(y){R.error(`Function syncToGist: ${n} : ${y}`)}}Os(u,n),R.write(u,Bt),je(e)}catch(s){R.error(`\u65E0\u6CD5\u5220\u9664\u8FDC\u7A0B\u914D\u7F6E\uFF1A${n}\uFF0C\u539F\u56E0\uFF1A${s}`),xe(e,new pr("FAILED_TO_DELETE_ARTIFACT",`Failed to delete artifact ${n}`,`Reason: ${s}`))}}function IF(t){return/^[a-zA-Z0-9._-]*$/.test(t)}async function qp(t){let{gistToken:e,syncPlatform:n}=R.read(Kt);if(!e)return Promise.reject("\u672A\u8BBE\u7F6E GitHub Token\uFF01");let u=await new Cs({token:e,key:Lo,syncPlatform:n}).upload(t),s={};try{s=JSON.parse(u.body)}catch{}let p=s?.html_url??s?.web_url,y=R.read(Kt);return p?(R.log(`\u540C\u6B65 Gist \u540E, \u627E\u5230 Sub-Store Gist: ${p}`),y.artifactStore=p,y.artifactStoreStatus="VALID"):(R.error("\u540C\u6B65 Gist \u540E, \u627E\u4E0D\u5230 Sub-Store Gist"),y.artifactStoreStatus="NOT FOUND"),R.write(y,Kt),u}function cw(t){R.read(Bt)||R.write({},Bt),t.get("/api/sync/artifacts",UK),t.get("/api/sync/artifact/:name",jK)}async function vn({type:t,name:e,platform:n,url:u,ua:s,content:p,mergeSources:y,ignoreFailedRemoteSub:g,ignoreFailedRemoteFile:E,produceType:m,produceOpts:D={},subscription:a,awaitCustomCache:H,$options:W,proxy:w,noCache:U,all:tt}){if(n=n||"JSON",["subscription","sub"].includes(t)){let J;if(e){let q=R.read(Jt);if(J=ct(q,e),!J)throw new Error(`\u627E\u4E0D\u5230\u8BA2\u9605 ${e}`)}else if(a)J=a;else throw new Error("\u672A\u63D0\u4F9B\u8BA2\u9605\u540D\u79F0\u6216\u8BA2\u9605\u6570\u636E");let N;if(p&&!["localFirst","remoteFirst"].includes(y))N=p;else if(u){let q={};N=await Promise.all(u.split(/[\r\n]+/).map(V=>V.trim()).filter(V=>V.length).map(async V=>{try{return await un(V,s||J.ua,void 0,w||J.proxy,void 0,H,U||J.noCache,!0)}catch(lt){return q[V]=lt,R.error(`\u8BA2\u9605 ${J.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${V} \u53D1\u751F\u9519\u8BEF: ${lt}`),""}}));let L=J.ignoreFailedRemoteSub;if(g!=null&&g!==""&&(L=g),Object.keys(q).length>0)if(L)L==="enabled"&&R.notify("\u{1F30D} Sub-Store \u5904\u7406\u8BA2\u9605\u5931\u8D25",`\u274C ${J.name}`,`\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(q).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u8BA2\u9605 ${J.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(q).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);y==="localFirst"?N.unshift(p):y==="remoteFirst"&&N.push(p)}else if(J.source==="local"&&!["localFirst","remoteFirst"].includes(J.mergeSources))N=J.content;else{let q={};N=await Promise.all(J.url.split(/[\r\n]+/).map(V=>V.trim()).filter(V=>V.length).map(async V=>{try{return await un(V,s||J.ua,void 0,w||J.proxy,void 0,H,U||J.noCache,!0)}catch(lt){return q[V]=lt,R.error(`\u8BA2\u9605 ${J.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${V} \u53D1\u751F\u9519\u8BEF: ${lt}`),""}}));let L=J.ignoreFailedRemoteSub;if(g!=null&&g!==""&&(L=g),Object.keys(q).length>0)if(L)L==="enabled"&&R.notify("\u{1F30D} Sub-Store \u5904\u7406\u8BA2\u9605\u5931\u8D25",`\u274C ${J.name}`,`\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(q).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u8BA2\u9605 ${J.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(q).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);J.mergeSources==="localFirst"?N.unshift(J.content):J.mergeSources==="remoteFirst"&&N.push(J.content)}if(m==="raw")return JSON.stringify((Array.isArray(N)?N:[N]).flat());let Q=(Array.isArray(N)?N:[N]).map(q=>xt.parse(q)).flat();if(Q.forEach(q=>{q._subName=J.name,q._subDisplayName=J.displayName}),Q=await xt.process(Q,J.process||[],n,{[J.name]:J},W),Q.length===0)throw new Error(`\u8BA2\u9605 ${e} \u4E2D\u4E0D\u542B\u6709\u6548\u8282\u70B9`);let it={};for(let q of Q){if(it[q.name]){R.notify("\u{1F30D} Sub-Store",`\u26A0\uFE0F \u8BA2\u9605 ${e} \u5305\u542B\u91CD\u590D\u8282\u70B9 ${q.name}\uFF01`,"\u8BF7\u4ED4\u7EC6\u68C0\u6D4B\u914D\u7F6E\uFF01",{"media-url":"https://cdn3.iconfinder.com/data/icons/seo-outline-1/512/25_code_program_programming_develop_bug_search_developer-512.png"});break}it[q.name]=!0}return xt.produce(Q,n,m,D)}else if(["collection","col"].includes(t)){let J=R.read(Jt),N=R.read(Zt),Q=ct(N,e);if(!Q)throw new Error(`\u627E\u4E0D\u5230\u7EC4\u5408\u8BA2\u9605 ${e}`);let it=[...Q.subscriptions],q=Q.subscriptionTags;Array.isArray(q)&&q.length>0&&J.forEach(vt=>{Array.isArray(vt.tag)&&vt.tag.length>0&&!it.includes(vt.name)&&vt.tag.some(wt=>q.includes(wt))&&it.push(vt.name)});let L={},V={},lt=0;await Promise.all(it.map(async vt=>{let wt=ct(J,vt),Xt=wt.passThroughUA,ee=wt.ua;Xt&&(R.info(`\u8BA2\u9605\u5F00\u542F\u4E86\u900F\u4F20 User-Agent, \u4F7F\u7528\u8BF7\u6C42\u7684 User-Agent: ${s}`),ee=s);try{R.info(`\u6B63\u5728\u5904\u7406\u5B50\u8BA2\u9605\uFF1A${wt.name}...`);let ne;if(wt.source==="local"&&!["localFirst","remoteFirst"].includes(wt.mergeSources))ne=wt.content;else{let Le={};if(ne=await await Promise.all(wt.url.split(/[\r\n]+/).map(de=>de.trim()).filter(de=>de.length).map(async de=>{try{return await un(de,ee,void 0,w||wt.proxy||Q.proxy,void 0,void 0,U||wt.noCache,!0)}catch(He){return Le[de]=He,R.error(`\u8BA2\u9605 ${wt.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${de} \u53D1\u751F\u9519\u8BEF: ${He}`),""}})),Object.keys(Le).length>0)if(wt.ignoreFailedRemoteSub)wt.ignoreFailedRemoteSub==="enabled"&&R.notify("\u{1F30D} Sub-Store \u5904\u7406\u8BA2\u9605\u5931\u8D25",`\u274C ${wt.name}`,`\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(Le).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u8BA2\u9605 ${wt.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(Le).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);wt.mergeSources==="localFirst"?ne.unshift(wt.content):wt.mergeSources==="remoteFirst"&&ne.push(wt.content)}let oe=(Array.isArray(ne)?ne:[ne]).map(Le=>xt.parse(Le)).flat();oe.forEach(Le=>{Le._subName=wt.name,Le._subDisplayName=wt.displayName,Le._collectionName=Q.name,Le._collectionDisplayName=Q.displayName}),oe=await xt.process(oe,wt.process||[],n,{[wt.name]:wt,_collection:Q,$options:W}),L[vt]=oe,lt++,R.info(`\u2705 \u5B50\u8BA2\u9605\uFF1A${wt.name}\u52A0\u8F7D\u6210\u529F\uFF0C\u8FDB\u5EA6--${100*(lt/it.length).toFixed(1)}% `)}catch(ne){lt++,V[vt]=ne,R.error(`\u274C \u5904\u7406\u7EC4\u5408\u8BA2\u9605\u4E2D\u7684\u5B50\u8BA2\u9605: ${wt.name}\u65F6\u51FA\u73B0\u9519\u8BEF\uFF1A${ne}\uFF01\u8FDB\u5EA6--${100*(lt/it.length).toFixed(1)}%`)}}));let mt=Q.ignoreFailedRemoteSub;if(g!=null&&g!==""&&(mt=g),Object.keys(V).length>0)if(mt)mt==="enabled"&&R.notify("\u{1F30D} Sub-Store \u5904\u7406\u7EC4\u5408\u8BA2\u9605\u5931\u8D25",`\u274C ${Q.name}`,`\u5B50\u8BA2\u9605 ${Object.keys(V).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u7EC4\u5408\u8BA2\u9605 ${Q.name} \u7684\u5B50\u8BA2\u9605 ${Object.keys(V).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);let Rt=Array.prototype.concat.apply([],it.map(vt=>L[vt]||[]));if(Rt.forEach(vt=>{vt._collectionName=Q.name,vt._collectionDisplayName=Q.displayName}),Rt=await xt.process(Rt,Q.process||[],n,{_collection:Q},W),Rt.length===0)throw new Error(`\u7EC4\u5408\u8BA2\u9605 ${e} \u4E2D\u4E0D\u542B\u6709\u6548\u8282\u70B9`);let Et={};for(let vt of Rt){if(Et[vt.name]){R.notify("\u{1F30D} Sub-Store",`\u26A0\uFE0F \u7EC4\u5408\u8BA2\u9605 ${e} \u5305\u542B\u91CD\u590D\u8282\u70B9 ${vt.name}\uFF01`,"\u8BF7\u4ED4\u7EC6\u68C0\u6D4B\u914D\u7F6E\uFF01",{"media-url":"https://cdn3.iconfinder.com/data/icons/seo-outline-1/512/25_code_program_programming_develop_bug_search_developer-512.png"});break}Et[vt.name]=!0}return xt.produce(Rt,n,m,D)}else if(t==="rule"){let J=R.read(Df),N=ct(J,e);if(!N)throw new Error(`\u627E\u4E0D\u5230\u89C4\u5219 ${e}`);let Q=[];for(let it=0;it<N.urls.length;it++){let q=N.urls[it];R.info(`\u6B63\u5728\u5904\u7406URL\uFF1A${q}\uFF0C\u8FDB\u5EA6--${100*((it+1)/N.urls.length).toFixed(1)}% `);try{let{body:L}=await un(q),V=Ec.parse(L);Q=Q.concat(V)}catch(L){R.error(`\u5904\u7406\u5206\u6D41\u8BA2\u9605\u4E2D\u7684URL: ${q}\u65F6\u51FA\u73B0\u9519\u8BEF\uFF1A${L}! \u8BE5\u8BA2\u9605\u5DF2\u88AB\u8DF3\u8FC7\u3002`)}}return Q=await Ec.process(Q,[{type:"Remove Duplicate Filter"}]),Ec.produce(Q,n)}else if(t==="file"){let J=R.read(Lt),N=ct(J,e);if(!N)throw new Error(`\u627E\u4E0D\u5230\u6587\u4EF6 ${e}`);let Q="";if(N.type!=="mihomoProfile")if(p&&!["localFirst","remoteFirst"].includes(y))Q=p;else if(u){let V={};Q=await Promise.all(u.split(/[\r\n]+/).map(mt=>mt.trim()).filter(mt=>mt.length).map(async mt=>{try{return await un(mt,s||N.ua,void 0,N.proxy||w,void 0,void 0,U)}catch(Rt){return V[mt]=Rt,R.error(`\u6587\u4EF6 ${N.name} \u7684\u8FDC\u7A0B\u6587\u4EF6 ${mt} \u53D1\u751F\u9519\u8BEF: ${Rt}`),""}}));let lt=N.ignoreFailedRemoteFile;if(E!=null&&E!==""&&(lt=E),!lt&&Object.keys(V).length>0)throw new Error(`\u6587\u4EF6 ${N.name} \u7684\u8FDC\u7A0B\u6587\u4EF6 ${Object.keys(V).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);y==="localFirst"?Q.unshift(p):y==="remoteFirst"&&Q.push(p)}else if(N.source==="local"&&!["localFirst","remoteFirst"].includes(N.mergeSources))Q=N.content;else{let V={};Q=await Promise.all(N.url.split(/[\r\n]+/).map(mt=>mt.trim()).filter(mt=>mt.length).map(async mt=>{try{return await un(mt,s||N.ua,void 0,N.proxy||w,void 0,void 0,U)}catch(Rt){return V[mt]=Rt,R.error(`\u6587\u4EF6 ${N.name} \u7684\u8FDC\u7A0B\u6587\u4EF6 ${mt} \u53D1\u751F\u9519\u8BEF: ${Rt}`),""}}));let lt=N.ignoreFailedRemoteFile;if(E!=null&&E!==""&&(lt=E),Object.keys(V).length>0)if(lt)lt==="enabled"&&R.notify("\u{1F30D} Sub-Store \u5904\u7406\u6587\u4EF6\u5931\u8D25",`\u274C ${N.name}`,`\u8FDC\u7A0B\u6587\u4EF6 ${Object.keys(V).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u6587\u4EF6 ${N.name} \u7684\u8FDC\u7A0B\u6587\u4EF6 ${Object.keys(V).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);N.mergeSources==="localFirst"?Q.unshift(N.content):N.mergeSources==="remoteFirst"&&Q.push(N.content)}if(m==="raw")return JSON.stringify((Array.isArray(Q)?Q:[Q]).flat());let it=(Array.isArray(Q)?Q:[Q]).flat(),q=it.filter(V=>V!=null&&V!=="").join(`
`),L=Array.isArray(N.process)&&N.process.length>0?await xt.process({$files:it,$content:q,$options:W,$file:N},N.process):{$content:q,$files:it,$options:W};return(tt?L:L?.$content)??""}}async function lw(){R.info("\u5F00\u59CB\u540C\u6B65\u6240\u6709\u8FDC\u7A0B\u914D\u7F6E...");let t=R.read(Bt),e={};try{let n=[],u=[],s=R.read(Jt),p=R.read(Zt),y=[],g=0;if(t.map(D=>{if(D.sync&&D.source){if(g++,D.type==="subscription"){let a=D.source,H=ct(s,a);H&&H.url&&!y.includes(a)&&y.push(a)}else if(D.type==="collection"){let a=ct(p,D.source);a&&Array.isArray(a.subscriptions)&&a.subscriptions.map(H=>{let W=ct(s,H);W&&W.url&&!y.includes(H)&&y.push(H)})}}}),g===0){R.info(`\u9700\u540C\u6B65\u7684\u914D\u7F6E: ${g}, \u603B\u6570: ${t.length}`);return}if(y.length>0&&await Promise.all(y.map(async D=>{try{await vn({type:"subscription",name:D,awaitCustomCache:!0})}catch{}})),await Promise.all(t.map(async D=>{try{if(D.sync&&D.source){R.info(`\u6B63\u5728\u540C\u6B65\u4E91\u914D\u7F6E\uFF1A${D.name}...`);let a=D.platform==="SurgeMac";a&&R.info("\u624B\u52A8\u6307\u5B9A\u4E86 target \u4E3A SurgeMac, \u5C06\u4F7F\u7528 Mihomo External");let H=await vn({type:D.type,name:D.source,platform:D.platform,produceOpts:{"include-unsupported-proxy":D.includeUnsupportedProxy,useMihomoExternal:a}});e[encodeURIComponent(D.name)]={content:H},n.push(D.name)}}catch(a){R.error(`\u751F\u6210\u540C\u6B65\u914D\u7F6E ${D.name} \u53D1\u751F\u9519\u8BEF: ${a.message??a}`),u.push(D.name)}})),R.info(`${n.length} \u4E2A\u540C\u6B65\u914D\u7F6E\u751F\u6210\u6210\u529F: ${n.join(", ")}`),R.info(`${u.length} \u4E2A\u540C\u6B65\u914D\u7F6E\u751F\u6210\u5931\u8D25: ${u.join(", ")}`),n.length===0)throw new Error(`\u540C\u6B65\u914D\u7F6E ${u.join(", ")} \u751F\u6210\u5931\u8D25 \u8BE6\u60C5\u8BF7\u67E5\u770B\u65E5\u5FD7`);let E=await qp(e),m=JSON.parse(E.body);delete m.history,delete m.forks,delete m.owner,Object.values(m.files).forEach(D=>{delete D.content}),R.info("\u4E0A\u4F20\u914D\u7F6E\u54CD\u5E94:"),R.info(JSON.stringify(m,null,2));for(let D of t)if(D.sync&&D.source&&n.includes(D.name)){D.updated=new Date().getTime();let a=m.files,H;Array.isArray(a)&&(H=!0,a=Object.fromEntries(a.map(U=>[U.path,U])));let W=a[encodeURIComponent(D.name)]?.raw_url,w=H?W:W?.replace(/\/raw\/[^/]*\/(.*)/,"/raw/$1");R.info(`\u4E0A\u4F20\u914D\u7F6E\u5B8C\u6210
\u6587\u4EF6\u5217\u8868: ${Object.keys(a).join(", ")}
\u5F53\u524D\u6587\u4EF6: ${encodeURIComponent(D.name)}
\u54CD\u5E94\u8FD4\u56DE\u7684\u539F\u59CB\u94FE\u63A5: ${W}
\u5904\u7406\u5B8C\u7684\u65B0\u94FE\u63A5: ${w}`),D.url=w}if(R.write(t,Bt),R.info("\u4E0A\u4F20\u914D\u7F6E\u6210\u529F"),u.length>0)throw new Error(`\u540C\u6B65\u914D\u7F6E\u6210\u529F ${n.length} \u4E2A, \u5931\u8D25 ${u.length} \u4E2A, \u8BE6\u60C5\u8BF7\u67E5\u770B\u65E5\u5FD7`);R.info(`\u540C\u6B65\u914D\u7F6E\u6210\u529F ${n.length} \u4E2A`)}catch(n){throw R.error(`\u540C\u6B65\u914D\u7F6E\u5931\u8D25\uFF0C\u539F\u56E0\uFF1A${n.message??n}`),n}}async function UK(t,e){R.info("\u5F00\u59CB\u540C\u6B65\u6240\u6709\u8FDC\u7A0B\u914D\u7F6E...");try{await lw(),je(e)}catch(n){R.error(`\u540C\u6B65\u914D\u7F6E\u5931\u8D25\uFF0C\u539F\u56E0\uFF1A${n.message??n}`),xe(e,new pr("FAILED_TO_SYNC_ARTIFACTS","Failed to sync all artifacts",`Reason: ${n.message??n}`))}}async function jK(t,e){let{name:n}=t.params;R.info(`\u5F00\u59CB\u540C\u6B65\u8FDC\u7A0B\u914D\u7F6E ${n}...`);let u=R.read(Bt),s=ct(u,n);if(!s){R.error(`\u627E\u4E0D\u5230\u8FDC\u7A0B\u914D\u7F6E ${n}`),xe(e,new yr("RESOURCE_NOT_FOUND",`\u627E\u4E0D\u5230\u8FDC\u7A0B\u914D\u7F6E ${n}`),404);return}if(!s.source){R.error(`\u8FDC\u7A0B\u914D\u7F6E ${n} \u672A\u8BBE\u7F6E\u6765\u6E90`),xe(e,new yr("RESOURCE_HAS_NO_SOURCE",`\u8FDC\u7A0B\u914D\u7F6E ${n} \u672A\u8BBE\u7F6E\u6765\u6E90`),404);return}try{let p=s.platform==="SurgeMac";p&&R.info("\u624B\u52A8\u6307\u5B9A\u4E86 target \u4E3A SurgeMac, \u5C06\u4F7F\u7528 Mihomo External");let y=await vn({type:s.type,name:s.source,platform:s.platform,produceOpts:{"include-unsupported-proxy":s.includeUnsupportedProxy,useMihomoExternal:p}});R.info(`\u6B63\u5728\u4E0A\u4F20\u914D\u7F6E\uFF1A${s.name}
>>>${JSON.stringify(s,null,2)}`);let g=await qp({[encodeURIComponent(s.name)]:{content:y}});s.updated=new Date().getTime();let E=JSON.parse(g.body);delete E.history,delete E.forks,delete E.owner,Object.values(E.files).forEach(W=>{delete W.content}),R.info("\u4E0A\u4F20\u914D\u7F6E\u54CD\u5E94:"),R.info(JSON.stringify(E,null,2));let m=E.files,D;Array.isArray(m)&&(D=!0,m=Object.fromEntries(m.map(W=>[W.path,W])));let a=m[encodeURIComponent(s.name)]?.raw_url,H=D?a:a?.replace(/\/raw\/[^/]*\/(.*)/,"/raw/$1");R.info(`\u4E0A\u4F20\u914D\u7F6E\u5B8C\u6210
\u6587\u4EF6\u5217\u8868: ${Object.keys(m).join(", ")}
\u5F53\u524D\u6587\u4EF6: ${encodeURIComponent(s.name)}
\u54CD\u5E94\u8FD4\u56DE\u7684\u539F\u59CB\u94FE\u63A5: ${a}
\u5904\u7406\u5B8C\u7684\u65B0\u94FE\u63A5: ${H}`),s.url=H,R.write(u,Bt),je(e,s)}catch(p){R.error(`\u8FDC\u7A0B\u914D\u7F6E ${s.name} \u53D1\u751F\u9519\u8BEF: ${p.message??p}`),xe(e,new pr("FAILED_TO_SYNC_ARTIFACT",`Failed to sync artifact ${n}`,`Reason: ${p}`))}}var BF=V0.find(t=>t.name==="Clash Pre-processor"),fw=new Map;async function un(rawUrl="",ua,timeout,customProxy,skipCustomCache,awaitCustomCache,noCache,preprocess){let $arguments={},url=rawUrl.replace(/#noFlow$/,""),rawArgs=url.split("#");if(url=url.split("#")[0],rawArgs.length>1)try{$arguments=JSON.parse(decodeURIComponent(rawArgs[1]))}catch{for(let t of rawArgs[1].split("&")){let e=t.split("=")[0],n=t.split("=")[1];$arguments[e]=n==null||n===""?!0:decodeURIComponent(n)}}let{isNode,isStash,isLoon,isShadowRocket,isQX}=hn(),{defaultProxy,defaultUserAgent,defaultTimeout,cacheThreshold:defaultCacheThreshold}=R.read(Kt),cacheThreshold=defaultCacheThreshold||1024,proxy=customProxy||defaultProxy;R.env.isNode&&(proxy=proxy||eval("process.env.SUB_STORE_BACKEND_DEFAULT_PROXY"));let userAgent=ua||defaultUserAgent||"clash.meta",requestTimeout=timeout||defaultTimeout||8e3,id=Wi(userAgent+url);$arguments?.cacheKey===!0&&(R.error("\u4F7F\u7528\u81EA\u5B9A\u4E49\u7F13\u5B58\u65F6 cacheKey \u7684\u503C\u4E0D\u80FD\u4E3A\u7A7A"),$arguments.cacheKey=void 0);let customCacheKey=$arguments?.cacheKey?`#sub-store-cached-custom-${$arguments?.cacheKey}`:void 0;if(customCacheKey&&!skipCustomCache){let t=R.read(customCacheKey),e=Xr.get(id);if(!noCache&&!$arguments?.noCache&&e)return R.info(`\u4E50\u89C2\u7F13\u5B58: URL ${url}
\u5B58\u5728\u6709\u6548\u7684\u5E38\u89C4\u7F13\u5B58
\u4F7F\u7528\u5E38\u89C4\u7F13\u5B58\u4EE5\u907F\u514D\u91CD\u590D\u8BF7\u6C42`),e;if(t){if(awaitCustomCache){R.info(`\u4E50\u89C2\u7F13\u5B58: URL ${url}
\u672C\u6B21\u8FDB\u884C\u8BF7\u6C42 \u5C1D\u8BD5\u66F4\u65B0\u7F13\u5B58`);try{await un(rawUrl.replace(/(\?|&)cacheKey=.*?(&|$)/,""),ua,timeout,proxy,!0,void 0,void 0,preprocess)}catch(n){R.error(`\u4E50\u89C2\u7F13\u5B58: URL ${url} \u66F4\u65B0\u7F13\u5B58\u53D1\u751F\u9519\u8BEF ${n.message??n}`),R.info("\u4F7F\u7528\u4E50\u89C2\u7F13\u5B58\u7684\u6570\u636E\u5237\u65B0\u7F13\u5B58, \u9632\u6B62\u540E\u7EED\u8BF7\u6C42"),Xr.set(id,t)}}else R.info(`\u4E50\u89C2\u7F13\u5B58: URL ${url}
\u672C\u6B21\u8FD4\u56DE\u81EA\u5B9A\u4E49\u7F13\u5B58 ${$arguments?.cacheKey}
\u5E76\u8FDB\u884C\u8BF7\u6C42 \u5C1D\u8BD5\u5F02\u6B65\u66F4\u65B0\u7F13\u5B58`),un(rawUrl.replace(/(\?|&)cacheKey=.*?(&|$)/,""),ua,timeout,proxy,!0,void 0,void 0,preprocess).catch(n=>{R.error(`\u4E50\u89C2\u7F13\u5B58: URL ${url} \u5F02\u6B65\u66F4\u65B0\u7F13\u5B58\u53D1\u751F\u9519\u8BEF ${n.message??n}`)});return t}}let downloadUrlMatch=url.split("#")[0].match(/^\/api\/(file|module)\/(.+)/);if(downloadUrlMatch){let t="";try{t=downloadUrlMatch?.[1];let e=downloadUrlMatch?.[2];if(e==null)throw new Error(`\u672C\u5730 ${t} URL \u65E0\u6548: ${url}`);e=decodeURIComponent(e);let n=t==="module"?jn:Lt,u=ct(R.read(n),e);if(!u)throw new Error(`\u627E\u4E0D\u5230 ${t}: ${e}`);return t==="module"?u.content:await vn({type:"file",name:e})}catch(e){throw R.error(`Error when loading ${t}: ${url.split("#")[0]}.
 Reason: ${e}`),new Error(`\u65E0\u6CD5\u52A0\u8F7D ${t}: ${url}`)}}else if(url?.startsWith("/"))try{return require("fs").readFileSync(url.split("#")[0],"utf8")}catch(t){throw R.error(`Error when reading local file: ${url.split("#")[0]}.
 Reason: ${t}`),new Error(`\u65E0\u6CD5\u4ECE\u8BE5\u8DEF\u5F84\u8BFB\u53D6\u6587\u672C\u5185\u5BB9: ${url}`)}if(!isNode&&fw.has(id))return fw.get(id);let http=Rs({headers:{"User-Agent":userAgent,...isStash&&proxy?{"X-Stash-Selected-Proxy":encodeURIComponent(proxy)}:{},...isShadowRocket&&proxy?{"X-Surge-Policy":proxy}:{}},timeout:requestTimeout}),result,cached=Xr.get(id);if(!noCache&&!$arguments?.noCache&&cached)R.info(`\u4F7F\u7528\u7F13\u5B58: ${url}, ${userAgent}`),result=cached,customCacheKey&&(R.info(`URL ${url}
\u5199\u5165\u81EA\u5B9A\u4E49\u7F13\u5B58 ${$arguments?.cacheKey}`),R.write(cached,customCacheKey));else{let t=$arguments?.insecure?isNode?{strictSSL:!1}:{insecure:!0}:void 0;R.info(`Downloading...
User-Agent: ${userAgent}
Timeout: ${requestTimeout}
Proxy: ${proxy}
Insecure: ${!!t}
Preprocess: ${preprocess}
URL: ${url}`);try{let{body:e,headers:n,statusCode:u}=await http.get({url,...proxy?{proxy}:{},...isLoon&&proxy?{node:proxy}:{},...isQX&&proxy?{opts:{policy:proxy}}:{},...proxy?tu(proxy):{},...t||{}});if(R.info(`statusCode: ${u}`),u<200||u>=400)throw new Error(`statusCode: ${u}`);if(n){let p=Zc(n);p&&Vo.set(id,p)}if(e.replace(/\s/g,"").length===0)throw new Error(new Error("\u8FDC\u7A0B\u8D44\u6E90\u5185\u5BB9\u4E3A\u7A7A"));if(preprocess)try{BF.test(e)&&(e=BF.parse(e,!0))}catch(p){R.error(`Clash Pre-processor error: ${p}`)}let s=!0;if(cacheThreshold){let p=e.length/1024;p>cacheThreshold&&(R.info(`\u8D44\u6E90\u5927\u5C0F ${p.toFixed(2)} KB \u8D85\u8FC7\u4E86 ${cacheThreshold} KB, \u4E0D\u7F13\u5B58`),s=!1)}if(preprocess)try{let p=xt.parse(e);(!Array.isArray(p)||p.length===0)&&(R.error(`URL ${url} \u4E0D\u5305\u542B\u6709\u6548\u8282\u70B9, \u4E0D\u7F13\u5B58`),s=!1)}catch(p){R.error(`URL ${url} \u5C1D\u8BD5\u89E3\u6790\u8282\u70B9\u5931\u8D25 ${p.message??p}, \u4E0D\u7F13\u5B58`),s=!1}s&&(Xr.set(id,e),customCacheKey&&(R.info(`URL ${url}
\u5199\u5165\u81EA\u5B9A\u4E49\u7F13\u5B58 ${$arguments?.cacheKey}`),R.write(e,customCacheKey))),result=e}catch(e){if(customCacheKey){let n=R.read(customCacheKey);if(n)return R.info(`\u65E0\u6CD5\u4E0B\u8F7D URL ${url}: ${e.message??e}
\u4F7F\u7528\u81EA\u5B9A\u4E49\u7F13\u5B58 ${$arguments?.cacheKey}`),n}throw new Error(`\u65E0\u6CD5\u4E0B\u8F7D URL ${url}: ${e.message??e}`)}}return $arguments?.validCheck&&await s0(Ko(await zn(url,$arguments.flowUserAgent,void 0,proxy,$arguments.flowUrl))),isNode||fw.set(id,result),result}async function Kh(t,e){let n=require("undici"),u=require("fs"),{pipeline:s}=require("stream/promises"),{Agent:p,interceptors:y,request:g}=n;R.info(`Downloading file...
URL: ${t}
File: ${e}`);let{body:E,statusCode:m}=await g(t,{dispatcher:new p().compose(y.redirect({maxRedirections:3,throwOnRedirect:!0}))});if(m!==200)throw new Error(`Failed to download file from ${t}`);let D=u.createWriteStream(e);return await s(E,D),R.info(`File downloaded from ${t} to ${e}`),e}var dw=Yr(Ff());function hw(t){R.read(Kt)||R.write({},Kt),t.route("/api/settings").get(HK).patch(MK)}async function HK(t,e){try{let n=R.read(Kt);n||(n={},R.write(n,Kt)),n.avatarUrl||await Vp(),n.artifactStore||await Kp(),je(e,n)}catch(n){R.error(`Failed to get settings: ${n.message??n}`),xe(e,new pr("FAILED_TO_GET_SETTINGS","Failed to get settings",`Reason: ${n.message??n}`))}}async function MK(t,e){try{let n={...R.read(Kt),...t.body};R.write(n,Kt),(t.body.githubUser||t.body.gistToken||t.body.githubProxy||t.body.defaultProxy)&&(await Vp(),await Kp()),je(e,n)}catch(n){R.error(`Failed to update settings: ${n.message??n}`),xe(e,new pr("FAILED_TO_UPDATE_SETTINGS","Failed to update settings",`Reason: ${n.message??n}`))}}async function Vp(){let t=R.read(Kt),{githubUser:e,syncPlatform:n,githubProxy:u}=t;if(e)if(n==="gitlab")try{let s=await R.http.get({url:`https://gitlab.com/api/v4/users?username=${encodeURIComponent(e)}`,headers:{"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.141 Safari/537.36"}}).then(p=>JSON.parse(p.body));t.avatarUrl=s[0].avatar_url.replace(/(\?|&)s=\d+(&|$)/,"$1s=160$2"),R.write(t,Kt)}catch(s){R.error(`Failed to fetch GitLab avatar for User: ${e}. Reason: ${s.message??s}`)}else try{let s=await R.http.get({url:`${u?`${u}/`:""}https://api.github.com/users/${encodeURIComponent(e)}`,headers:{"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.141 Safari/537.36"}}).then(p=>JSON.parse(p.body));t.avatarUrl=s.avatar_url,R.write(t,Kt)}catch(s){R.error(`Failed to fetch GitHub avatar for User: ${e}. Reason: ${s.message??s}`)}}async function Kp(){R.log("Updating artifact store");let t=R.read(Kt),{gistToken:e,syncPlatform:n}=t;if(e){let u=new Cs({token:e,key:Lo,syncPlatform:n});try{let s=await u.locate(),p=s?.html_url??s?.web_url;p?(R.log(`\u627E\u5230 Sub-Store Gist: ${p}`),t.artifactStore=p,t.artifactStoreStatus="VALID"):(R.error(`\u627E\u4E0D\u5230 Sub-Store Gist (${Lo})`),t.artifactStoreStatus="NOT FOUND")}catch(s){R.error(`\u67E5\u627E Sub-Store Gist (${Lo}) \u65F6\u53D1\u751F\u9519\u8BEF: ${s.message??s}`),t.artifactStoreStatus="ERROR"}R.write(t,Kt)}}function pw(t){t.get("/api/utils/env",$F),t.get("/api/utils/backup",VK),t.get("/api/utils/refresh",qK),t.route("/api/storage").get((e,n)=>{n.set("content-type","application/json").set("content-disposition",`attachment; filename="${encodeURIComponent(`sub-store_data_${Gu(new Date)}.json`)}"`).send(R.env.isNode?JSON.stringify(R.cache):R.read("#sub-store"))}).post((e,n)=>{let{content:u}=e.body;try{if(u=JSON.parse(ft.decode(u)),Object.keys(u.settings).length===0)throw new Error("\u5907\u4EFD\u6587\u4EF6\u5E94\u8BE5\u81F3\u5C11\u5305\u542B settings \u5B57\u6BB5")}catch{try{if(u=JSON.parse(u),Object.keys(u.settings).length===0)throw new Error("\u5907\u4EFD\u6587\u4EF6\u5E94\u8BE5\u81F3\u5C11\u5305\u542B settings \u5B57\u6BB5")}catch(s){throw R.error(`\u5907\u4EFD\u6587\u4EF6\u6821\u9A8C\u5931\u8D25, \u65E0\u6CD5\u8FD8\u539F
Reason: ${s.message??s}`),new Error("\u5907\u4EFD\u6587\u4EF6\u6821\u9A8C\u5931\u8D25, \u65E0\u6CD5\u8FD8\u539F")}}R.write(JSON.stringify(u,null,"  "),"#sub-store"),R.env.isNode&&(R.cache=u,R.persistCache()),Ku(),je(n)}),hn().isNode?t.get("/",$F):t.get("/",async(e,n)=>{n.set("location","https://sub-store.vercel.app/").status(302).end()}),hn().isQX&&t.options("/",async(e,n)=>{n.status(200).end()}),t.all("/",(e,n)=>{n.send("Hello from sub-store, made with \u2764\uFE0F by Peng-YM")})}function $F(t,e){t.query.share&&(to.feature.share=!0),e.set("Content-Type","application/json;charset=UTF-8").send(JSON.stringify({status:"success",data:{guide:"\u26A0\uFE0F\u26A0\uFE0F\u26A0\uFE0F \u60A8\u5F53\u524D\u770B\u5230\u7684\u662F\u540E\u7AEF\u7684\u54CD\u5E94. \u82E5\u60F3\u914D\u5408\u524D\u7AEF\u4F7F\u7528, \u53EF\u8BBF\u95EE\u5B98\u65B9\u524D\u7AEF https://sub-store.vercel.app \u540E\u81EA\u884C\u914D\u7F6E\u540E\u7AEF\u5730\u5740, \u6216\u4E00\u952E\u914D\u7F6E\u540E\u7AEF https://sub-store.vercel.app?api=https://a.com/xxx (\u5047\u8BBE https://a.com \u662F\u4F60\u540E\u7AEF\u7684\u57DF\u540D, /xxx \u662F\u81EA\u5B9A\u4E49\u8DEF\u5F84). \u9700\u6CE8\u610F HTTPS \u524D\u7AEF\u65E0\u6CD5\u8BF7\u6C42\u975E\u672C\u5730\u7684 HTTP \u540E\u7AEF(\u90E8\u5206\u6D4F\u89C8\u5668\u4E0A\u4E5F\u65E0\u6CD5\u8BBF\u95EE\u672C\u5730 HTTP \u540E\u7AEF). \u8BF7\u914D\u7F6E\u53CD\u4EE3\u6216\u5728\u5C40\u57DF\u7F51\u81EA\u5EFA HTTP \u524D\u7AEF. \u5982\u679C\u8FD8\u6709\u95EE\u9898, \u53EF\u67E5\u770B\u6B64\u6392\u67E5\u8BF4\u660E: https://t.me/zhetengsha/1068",...to}},null,2))}async function qK(t,e){await Vp(),await Kp(),Xr.revokeAll(),zf.revokeAll(),Vo.revokeAll(),je(e)}async function zp(t,e,n){let{gistToken:u,syncPlatform:s}=R.read(Kt);if(!u)throw new Error("GitHub Token is required for backup!");let p=new Cs({token:u,key:MA,syncPlatform:s}),y=R.read("#sub-store");y=y?JSON.parse(y):{},R.env.isNode&&(y=JSON.parse(JSON.stringify(R.cache)));let g,E=R.read(Kt),m=E.syncTime,D=n||E.gistUpload||"base64";switch(R.info(`Gist backup action: ${t}, keep: ${e}, encode: ${n}, settings encode: ${E.gistUpload}, final encoding: ${D}`),t){case"upload":try{if(g=R.read("#sub-store"),g=g?JSON.parse(g):{},R.env.isNode&&(g=JSON.parse(JSON.stringify(R.cache))),D==="plaintext"?(g.settings.gistToken="\u6062\u590D\u540E\u8BF7\u91CD\u65B0\u8BBE\u7F6E GitHub Token",g=JSON.stringify(g,null,"  ")):g=ft.encode(JSON.stringify(g,null,"  ")),R.info("\u4E0B\u8F7D\u5907\u4EFD, \u4E0E\u672C\u5730\u5185\u5BB9\u5BF9\u6BD4..."),await p.download(Kd)===g){R.info("\u5185\u5BB9\u4E00\u81F4, \u65E0\u9700\u4E0A\u4F20\u5907\u4EFD");return}}catch(a){R.error(`${a.message??a}`)}E.syncTime=new Date().getTime(),R.write(E,Kt),g=R.read("#sub-store"),g=g?JSON.parse(g):{},R.env.isNode&&(g=JSON.parse(JSON.stringify(R.cache))),D==="plaintext"?(g.settings.gistToken="\u6062\u590D\u540E\u8BF7\u91CD\u65B0\u8BBE\u7F6E GitHub Token",g=JSON.stringify(g,null,"  ")):g=ft.encode(JSON.stringify(g,null,"  ")),R.info("\u4E0A\u4F20\u5907\u4EFD\u4E2D...");try{await p.upload({[Kd]:{content:g}}),R.info("\u4E0A\u4F20\u5907\u4EFD\u5B8C\u6210")}catch(a){throw E.syncTime=m,R.write(E,Kt),a}break;case"download":R.info("\u8FD8\u539F\u5907\u4EFD\u4E2D..."),g=await p.download(Kd);try{if(g=JSON.parse(ft.decode(g)),Object.keys(g.settings).length===0)throw new Error("\u5907\u4EFD\u6587\u4EF6\u5E94\u8BE5\u81F3\u5C11\u5305\u542B settings \u5B57\u6BB5")}catch{try{if(g=JSON.parse(g),Object.keys(g.settings).length===0)throw new Error("\u5907\u4EFD\u6587\u4EF6\u5E94\u8BE5\u81F3\u5C11\u5305\u542B settings \u5B57\u6BB5")}catch(a){throw R.error(`Gist \u5907\u4EFD\u6587\u4EF6\u6821\u9A8C\u5931\u8D25, \u65E0\u6CD5\u8FD8\u539F
Reason: ${a.message??a}`),new Error("Gist \u5907\u4EFD\u6587\u4EF6\u6821\u9A8C\u5931\u8D25, \u65E0\u6CD5\u8FD8\u539F")}}e&&(R.info(`\u4FDD\u7559\u539F\u6709\u8BBE\u7F6E ${e}`),e.split(",").forEach(a=>{dw.default.set(g,a,dw.default.get(y,a))})),R.write(JSON.stringify(g,null,"  "),"#sub-store"),R.env.isNode&&(R.cache=g,R.persistCache()),R.info("perform migration after restoring from gist..."),Ku(),R.info("migration completed"),R.info("\u8FD8\u539F\u5907\u4EFD\u5B8C\u6210");break}}async function VK(t,e){let{action:n,keep:u,encode:s}=t.query,{gistToken:p}=R.read(Kt);if(!p)xe(e,new Ut("GIST_TOKEN_NOT_FOUND","GitHub Token is required for backup!"));else try{await zp(n,u,s),je(e)}catch(y){R.error(`Failed to ${n} gist data.
Reason: ${y.message??y}`),xe(e,new pr("BACKUP_FAILED",`Failed to ${n} gist data!`,`Reason: ${y.message??y}`))}}R.read(Jt)||R.write({},Jt);function gw(t){t.get("/api/sub/flow/:name",KK),t.route("/api/sub/:name").get(GK).patch(YK).delete(WK),t.route("/api/subs").get(XK).post(zK).put(JK)}async function KK(t,e){let{name:n}=t.params,{url:u}=t.query;u&&R.info(`\u6307\u5B9A\u8FDC\u7A0B\u8BA2\u9605 URL: ${u}`);let s=R.read(Jt),p=ct(s,n);if(!p){xe(e,new yr("RESOURCE_NOT_FOUND",`Subscription ${n} does not exist!`),404);return}if(p.source==="local"&&!["localFirst","remoteFirst"].includes(p.mergeSources)){if(p.subUserinfo){let y;if(/^https?:\/\//.test(p.subUserinfo))try{y=await zn(void 0,void 0,void 0,p.proxy,p.subUserinfo)}catch(g){R.error(`\u8BA2\u9605 ${n} \u4F7F\u7528\u81EA\u5B9A\u4E49\u6D41\u91CF\u94FE\u63A5 ${p.subUserinfo} \u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u65F6\u53D1\u751F\u9519\u8BEF: ${JSON.stringify(g)}`)}else y=p.subUserinfo;try{je(e,{...Ko(y)})}catch(g){R.error(`Failed to parse flow info for local subscription ${n}: ${g.message??g}`),xe(e,new Ut("NO_FLOW_INFO","N/A","Failed to parse flow info"))}}else xe(e,new Ut("NO_FLOW_INFO","N/A",`Local subscription ${n} has no flow information!`));return}try{u=`${u||p.url}`.split(/[\r\n]+/).map(m=>m.trim()).filter(m=>m.length)?.[0]||"";let y={},g=u.split("#");if(u=u.split("#")[0],g.length>1)try{y=JSON.parse(decodeURIComponent(g[1]))}catch{for(let m of g[1].split("&")){let D=m.split("=")[0],a=m.split("=")[1];y[D]=a==null||a===""?!0:decodeURIComponent(a)}}if(y.noFlow||!/^https?/.test(u)){xe(e,new Ut("NO_FLOW_INFO","N/A",`Subscription ${n}: noFlow`));return}let E=await zn(y?.insecure?`${u}#insecure`:u,y.flowUserAgent,void 0,p.proxy,y.flowUrl);if(!E&&!p.subUserinfo){xe(e,new pr("NO_FLOW_INFO","No flow info","Failed to fetch flow headers"));return}try{let m=a0({resetDay:y.resetDay,startDate:y.startDate,cycleDays:y.cycleDays}),D;if(/^https?:\/\//.test(p.subUserinfo))try{D=await zn(void 0,void 0,void 0,p.proxy,p.subUserinfo)}catch(H){R.error(`\u8BA2\u9605 ${n} \u4F7F\u7528\u81EA\u5B9A\u4E49\u6D41\u91CF\u94FE\u63A5 ${p.subUserinfo} \u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u65F6\u53D1\u751F\u9519\u8BEF: ${JSON.stringify(H)}`)}else D=p.subUserinfo;let a={...Ko([D,E].filter(H=>H).join("; "))};m!=null&&(a.remainingDays=m),je(e,a)}catch(m){R.error(`Failed to parse flow info for local subscription ${n}: ${m.message??m}`),xe(e,new Ut("NO_FLOW_INFO","N/A","Failed to parse flow info"))}}catch{xe(e,new el("URL_NOT_ACCESSIBLE",`The URL for subscription ${n} is inaccessible.`))}}function zK(t,e){let n=t.body;if(delete n.subscriptions,R.info(`\u6B63\u5728\u521B\u5EFA\u8BA2\u9605\uFF1A ${n.name}`),/\//.test(n.name)){xe(e,new Ut("INVALID_NAME",`Subscription ${n.name} is invalid`));return}let u=R.read(Jt);if(ct(u,n.name)){xe(e,new Ut("DUPLICATE_KEY",`Subscription ${n.name} already exists.`));return}u.push(n),R.write(u,Jt),je(e,n,201)}function GK(t,e){let{name:n}=t.params,{raw:u}=t.query,s=R.read(Jt),p=ct(s,n);delete p.subscriptions,p?u?e.set("content-type","application/json").set("content-disposition",`attachment; filename="${encodeURIComponent(`sub-store_subscription_${n}_${Gu(new Date)}.json`)}"`).send(JSON.stringify(p)):je(e,p):xe(e,new yr("SUBSCRIPTION_NOT_FOUND",`Subscription ${n} does not exist`,404))}function YK(t,e){let{name:n}=t.params,u=t.body;delete u.subscriptions;let s=R.read(Jt),p=ct(s,n);if(p){let y={...p,...u};if(R.info(`\u6B63\u5728\u66F4\u65B0\u8BA2\u9605\uFF1A ${n}`),n!==u.name){let g=R.read(Zt)||[];for(let D of g){let a=D.subscriptions.indexOf(n);a!==-1&&(D.subscriptions[a]=u.name)}let E=R.read(Bt)||[];for(let D of E)D.type==="subscription"&&D.source==n&&(D.source=u.name);let m=R.read(Lt)||[];for(let D of m)D.sourceType==="subscription"&&D.sourceName==n&&(D.sourceName=u.name);R.write(g,Zt),R.write(E,Bt),R.write(m,Lt)}xs(s,n,y),R.write(s,Jt),je(e,y)}else xe(e,new yr("RESOURCE_NOT_FOUND",`Subscription ${n} does not exist!`),404)}function WK(t,e){let{name:n}=t.params;R.info(`\u5220\u9664\u8BA2\u9605\uFF1A${n}...`);let u=R.read(Jt);Os(u,n),R.write(u,Jt);let s=R.read(Zt);for(let p of s)p.subscriptions=p.subscriptions.filter(y=>y!==n);R.write(s,Zt),je(e)}function XK(t,e){let n=R.read(Jt);je(e,n)}function JK(t,e){let n=t.body;R.write(n,Jt),je(e)}function mw(t){R.read(Zt)||R.write({},Zt),t.route("/api/collection/:name").get(QK).patch(ez).delete(tz),t.route("/api/collections").get(rz).post(ZK).put(nz)}function ZK(t,e){let n=t.body;if(R.info(`\u6B63\u5728\u521B\u5EFA\u7EC4\u5408\u8BA2\u9605\uFF1A${n.name}`),/\//.test(n.name)){xe(e,new Ut("INVALID_NAME",`Collection ${n.name} is invalid`));return}let u=R.read(Zt);if(ct(u,n.name)){xe(e,new Ut("DUPLICATE_KEY",`Collection ${n.name} already exists.`));return}u.push(n),R.write(u,Zt),je(e,n,201)}function QK(t,e){let{name:n}=t.params,{raw:u}=t.query,s=R.read(Zt),p=ct(s,n);p?u?e.set("content-type","application/json").set("content-disposition",`attachment; filename="${encodeURIComponent(`sub-store_collection_${n}_${Gu(new Date)}.json`)}"`).send(JSON.stringify(p)):je(e,p):xe(e,new yr("SUBSCRIPTION_NOT_FOUND",`Collection ${n} does not exist`,404))}function ez(t,e){let{name:n}=t.params,u=t.body,s=R.read(Zt),p=ct(s,n);if(p){let y={...p,...u};if(R.info(`\u6B63\u5728\u66F4\u65B0\u7EC4\u5408\u8BA2\u9605\uFF1A${n}...`),n!==y.name){let g=R.read(Bt)||[];for(let m of g)m.type==="collection"&&m.source===p.name&&(m.source=y.name);let E=R.read(Lt)||[];for(let m of E)m.sourceType==="collection"&&m.sourceName===p.name&&(m.sourceName=y.name);R.write(g,Bt),R.write(E,Lt)}xs(s,n,y),R.write(s,Zt),je(e,y)}else xe(e,new yr("RESOURCE_NOT_FOUND",`Collection ${n} does not exist!`),404)}function tz(t,e){let{name:n}=t.params;R.info(`\u6B63\u5728\u5220\u9664\u7EC4\u5408\u8BA2\u9605\uFF1A${n}`);let u=R.read(Zt);Os(u,n),R.write(u,Zt),je(e)}function rz(t,e){let n=R.read(Zt);je(e,n)}function nz(t,e){let n=t.body;R.write(n,Zt),je(e)}function vw(t){R.read(Lt)||R.write([],Lt),t.get("/share/file/:name",RF),t.route("/api/file/:name").get(RF).patch(az).delete(uz),t.route("/api/wholeFile/:name").get(sz),t.route("/api/files").get(oz).post(iz).put(lz),t.route("/api/wholeFiles").get(cz)}function iz(t,e){let n=t.body;n.name=`${n.name??Date.now()}`,R.info(`\u6B63\u5728\u521B\u5EFA\u6587\u4EF6\uFF1A${n.name}`);let u=R.read(Lt);if(ct(u,n.name))return xe(e,new Ut("DUPLICATE_KEY",t.body.name?`\u5DF2\u5B58\u5728 name \u4E3A ${n.name} \u7684\u6587\u4EF6`:"\u65E0\u6CD5\u540C\u65F6\u521B\u5EFA\u76F8\u540C\u7684\u6587\u4EF6 \u53EF\u7A0D\u540E\u91CD\u8BD5"));u.push(n),R.write(u,Lt),je(e,n,201)}async function RF(t,e){let{name:n}=t.params,u=t.headers["user-agent"]||t.headers["User-Agent"];R.info(`\u6B63\u5728\u4E0B\u8F7D\u6587\u4EF6\uFF1A${n}
\u8BF7\u6C42 User-Agent: ${u}`);let{url:s,subInfoUrl:p,subInfoUserAgent:y,ua:g,content:E,mergeSources:m,ignoreFailedRemoteFile:D,proxy:a,noCache:H,produceType:W}=t.query,w={_req:{method:t.method,url:t.url,path:t.path,query:t.query,params:t.params,headers:t.headers,body:t.body}};if(t.query.$options){try{w=JSON.parse(decodeURIComponent(t.query.$options))}catch{for(let J of t.query.$options.split("&")){let N=J.split("=")[0],Q=J.split("=")[1];w[N]=Q==null||Q===""?!0:decodeURIComponent(Q)}}R.info(`\u4F20\u5165 $options: ${JSON.stringify(w)}`)}s&&R.info(`\u6307\u5B9A\u8FDC\u7A0B\u6587\u4EF6 URL: ${s}`),a&&R.info(`\u6307\u5B9A\u8FDC\u7A0B\u8BA2\u9605\u4F7F\u7528\u4EE3\u7406/\u7B56\u7565 proxy: ${a}`),g&&R.info(`\u6307\u5B9A\u8FDC\u7A0B\u6587\u4EF6 User-Agent: ${g}`),p&&R.info(`\u6307\u5B9A\u83B7\u53D6\u6D41\u91CF\u7684 subInfoUrl: ${p}`),y&&R.info(`\u6307\u5B9A\u83B7\u53D6\u6D41\u91CF\u7684 subInfoUserAgent: ${y}`),E&&R.info(`\u6307\u5B9A\u672C\u5730\u6587\u4EF6: ${E}`),m&&R.info(`\u6307\u5B9A\u5408\u5E76\u6765\u6E90: ${m}`),D!=null&&D!==""&&R.info(`\u6307\u5B9A\u5FFD\u7565\u5931\u8D25\u7684\u8FDC\u7A0B\u6587\u4EF6: ${D}`),H&&R.info(`\u6307\u5B9A\u4E0D\u4F7F\u7528\u7F13\u5B58: ${H}`),W&&R.info(`\u6307\u5B9A\u751F\u4EA7\u7C7B\u578B: ${W}`);let U=R.read(Lt),tt=ct(U,n);if(tt)try{let J=await vn({type:"file",name:n,url:s,ua:g,content:E,mergeSources:m,ignoreFailedRemoteFile:D,$options:w,proxy:a,noCache:H,produceType:W,all:!0});try{if(p=p||tt.subInfoUrl,p){let N=await zn(p,y||tt.subInfoUserAgent,void 0,a||tt.proxy);N&&e.set("subscription-userinfo",Yu(N))}}catch(N){R.error(`\u6587\u4EF6 ${n} \u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u65F6\u53D1\u751F\u9519\u8BEF: ${JSON.stringify(N)}`)}tt.download&&e.set("Content-Disposition",`attachment; filename*=UTF-8''${encodeURIComponent(tt.displayName||tt.name)}`),e.set("Content-Type","text/plain; charset=utf-8"),J?.$options?._res?.headers&&Object.entries(J.$options._res.headers).forEach(([N,Q])=>{e.set(N,Q)}),J?.$options?._res?.status&&e.status(J.$options._res.status),e.send(J?.$content??"")}catch(J){R.notify("\u{1F30D} Sub-Store \u4E0B\u8F7D\u6587\u4EF6\u5931\u8D25",`\u274C \u65E0\u6CD5\u4E0B\u8F7D\u6587\u4EF6\uFF1A${n}\uFF01`,`\u{1F914} \u539F\u56E0\uFF1A${J.message??J}`),R.error(J.message??J),xe(e,new pr("INTERNAL_SERVER_ERROR",`Failed to download file: ${n}`,`Reason: ${J.message??J}`))}else R.error(`\u{1F30D} Sub-Store \u4E0B\u8F7D\u6587\u4EF6\u5931\u8D25
\u274C \u672A\u627E\u5230\u6587\u4EF6\uFF1A${n}\uFF01`),xe(e,new yr("RESOURCE_NOT_FOUND",`File ${n} does not exist!`),404)}function sz(t,e){let{name:n}=t.params,{raw:u}=t.query,s=R.read(Lt),p=ct(s,n);p?u?e.set("content-type","application/json").set("content-disposition",`attachment; filename="${encodeURIComponent(`sub-store_file_${n}_${Gu(new Date)}.json`)}"`).send(JSON.stringify(p)):je(e,p):xe(e,new yr("FILE_NOT_FOUND",`File ${n} does not exist`,404))}function az(t,e){let{name:n}=t.params,u=t.body,s=R.read(Lt),p=ct(s,n);if(p){let y={...p,...u};if(R.info(`\u6B63\u5728\u66F4\u65B0\u6587\u4EF6\uFF1A${n}...`),n!==y.name){let g=R.read(Bt)||[];for(let E of g)E.type==="file"&&E.source===p.name&&(E.source=y.name);R.write(g,Bt)}xs(s,n,y),R.write(s,Lt),je(e,y)}else xe(e,new yr("RESOURCE_NOT_FOUND",`File ${n} does not exist!`),404)}function uz(t,e){let{name:n}=t.params;R.info(`\u6B63\u5728\u5220\u9664\u6587\u4EF6\uFF1A${n}`);let u=R.read(Lt);Os(u,n),R.write(u,Lt),je(e)}function oz(t,e){let n=R.read(Lt);je(e,n.map(({content:u,...s})=>s))}function cz(t,e){let n=R.read(Lt);je(e,n)}function lz(t,e){let n=t.body;R.write(n,Lt),je(e)}function ww(t){R.read(ui)||R.write([],ui),t.post("/api/token",dz),t.route("/api/token/:token").delete(fz),t.route("/api/tokens").get(hz)}function fz(t,e){let{token:n}=t.params,{type:u,name:s}=t.query;if(!u||!s)return xe(e,new Ut("INVALID_PAYLOAD","Payload type and name are required. Please update your front-end(version >= 2.15.76)"));R.info(`\u6B63\u5728\u5220\u9664...
token: ${n}, \u7C7B\u578B\uFF1A${u}, \u540D\u79F0\uFF1A${s}`);let p=R.read(ui);p=p.filter(y=>!(y.token===n&&y.type===u&&y.name===s)),R.write(p,ui),je(e)}function hz(t,e){let{type:n,name:u}=t.query,s=R.read(ui)||[];je(e,n||u?s.filter(p=>(n?p.type===n:!0)&&(u?p.name===u:!0)):s)}async function dz(t,e){if(!hn().isNode)return xe(e,new Ut("INVALID_ENV","This endpoint is only available in Node.js environment"));try{let{payload:n,options:u}=t.body,s=require("ms"),p=n?.type,y=n?.name;if(!p||!y)return xe(e,new Ut("INVALID_PAYLOAD","payload type and name are required"));let g=n?.token;if(g!=null){if(typeof g!="string"||g.length<1)return xe(e,new Ut("INVALID_CUSTOM_TOKEN",`Invalid custom token: ${g}`));if((R.read(ui)||[]).find(a=>a.token===g&&a.type===p&&a.name===y))return xe(e,new Ut("DUPLICATE_TOKEN",`Token ${g} already exists`))}if(p==="col"){if(!(R.read(Zt)||[]).find(a=>a.name===y))return xe(e,new Ut("INVALID_COLLECTION",`collection ${y} not found`))}else if(p==="file"){if(!(R.read(Lt)||[]).find(a=>a.name===y))return xe(e,new Ut("INVALID_FILE",`file ${y} not found`))}else if(p==="sub"){if(!(R.read(Jt)||[]).find(a=>a.name===y))return xe(e,new Ut("INVALID_SUB",`sub ${y} not found`))}else return xe(e,new Ut("INVALID_TYPE",`type ${y} not supported`));let E=u?.expiresIn;if(u?.expiresIn!=null&&(E=s(u.expiresIn),E==null||isNaN(E)||E<=0))return xe(e,new Ut("INVALID_EXPIRES_IN",`Invalid expiresIn option: ${u.expiresIn}`));let m=require("nanoid"),D=R.read(ui)||[];if(!g)do g=m.customAlphabet(m.urlAlphabet)();while(D.find(a=>a.token===g&&a.type===p&&a.name===y));return D.push({...n,token:g,createdAt:Date.now(),expiresIn:E>0?u?.expiresIn:void 0,exp:E>0?Date.now()+E:void 0}),R.write(D,ui),je(e,{token:g})}catch(n){return xe(e,new pr("TOKEN_SIGN_FAILED","Failed to sign token",`Reason: ${n.message??n}`))}}function Ew(t){R.read(jn)||R.write([],jn),t.route("/api/module/:name").get(gz).patch(mz).delete(vz),t.route("/api/modules").get(wz).post(pz).put(Ez)}function pz(t,e){let n=t.body;n.name=`${n.name??Wi(JSON.stringify(n))}`,R.info(`\u6B63\u5728\u521B\u5EFA\u6A21\u5757\uFF1A${n.name}`);let u=R.read(jn);if(ct(u,n.name))return xe(e,new Ut("DUPLICATE_KEY",t.body.name?`\u5DF2\u5B58\u5728 name \u4E3A ${n.name} \u7684\u6A21\u5757`:"\u5DF2\u5B58\u5728\u76F8\u540C\u7684\u6A21\u5757 \u8BF7\u52FF\u91CD\u590D\u6DFB\u52A0"));u.push(n),R.write(u,jn),je(e,n,201)}function gz(t,e){let{name:n}=t.params,u=R.read(jn),s=ct(u,n);s?e.set("Content-Type","text/plain; charset=utf-8").send(s.content):xe(e,new yr("MODULE_NOT_FOUND",`Module ${n} does not exist`,404))}function mz(t,e){let{name:n}=t.params,u=t.body,s=R.read(jn),p=ct(s,n);if(p){let y={...p,...u};R.info(`\u6B63\u5728\u66F4\u65B0\u6A21\u5757\uFF1A${n}...`),xs(s,n,y),R.write(s,jn),je(e,y)}else xe(e,new yr("RESOURCE_NOT_FOUND",`Module ${n} does not exist!`),404)}function vz(t,e){let{name:n}=t.params;R.info(`\u6B63\u5728\u5220\u9664\u6A21\u5757\uFF1A${n}`);let u=R.read(jn);Os(u,n),R.write(u,jn),je(e)}function wz(t,e){let n=R.read(jn);je(e,n.map(({content:u,...s})=>s))}function Ez(t,e){let n=t.body;R.write(n,jn),je(e)}var yee=Yr(WF()),t3=Yr(e3());function zz(t){let e=Object.keys(t),n="",u="",s="";for(let p of e){let y=p.toLowerCase();y==="user-agent"?(n=t[p],u=n.toLowerCase()):y==="accept"&&(s=t[p])}return{UA:n,ua:u,accept:s}}function r3({ua:t,UA:e,accept:n}){return e.indexOf("Quantumult%20X")!==-1?"QX":t.indexOf("egern")!==-1?"Egern":e.indexOf("Surfboard")!==-1?"Surfboard":e.indexOf("Surge Mac")!==-1?"SurgeMac":e.indexOf("Surge")!==-1?"Surge":e.indexOf("Decar")!==-1||e.indexOf("Loon")!==-1?"Loon":e.indexOf("Shadowrocket")!==-1?"Shadowrocket":e.indexOf("Stash")!==-1?"Stash":t==="meta"||t.indexOf("clash")!==-1&&t.indexOf("meta")!==-1||t.indexOf("clash-verge")!==-1||t.indexOf("flclash")!==-1?"ClashMeta":t.indexOf("clash")!==-1?"Clash":t.indexOf("v2ray")!==-1?"V2Ray":t.indexOf("sing-box")!==-1||t.indexOf("singbox")!==-1?"sing-box":n.indexOf("application/json")===0?"JSON":"V2Ray"}function Sw(t){let{UA:e,ua:n,accept:u}=zz(t);return r3({ua:n,UA:e,accept:u})}function Fw(t,e){try{let n=r3({UA:e,ua:e.toLowerCase()}),u=(0,t3.default)(e),{major:s}=u;if(n==="SurgeMac"&&s>=9860||n==="Surge"&&s>=3613)return!0}catch{}return!1}function Iw(t){t.get("/share/col/:name/:target",async(e,n)=>{let{target:u}=e.params;u&&(e.query.target=u,R.info(`\u4F7F\u7528\u8DEF\u7531\u6307\u5B9A\u76EE\u6807: ${u}`)),await Ql(e,n)}),t.get("/share/col/:name",Ql),t.get("/share/sub/:name/:target",async(e,n)=>{let{target:u}=e.params;u&&(e.query.target=u,R.info(`\u4F7F\u7528\u8DEF\u7531\u6307\u5B9A\u76EE\u6807: ${u}`)),await Zl(e,n)}),t.get("/share/sub/:name",Zl),t.get("/download/collection/:name/:target",async(e,n)=>{let{target:u}=e.params;u&&(e.query.target=u,R.info(`\u4F7F\u7528\u8DEF\u7531\u6307\u5B9A\u76EE\u6807: ${u}`)),await Ql(e,n)}),t.get("/download/collection/:name",Ql),t.get("/download/:name/:target",async(e,n)=>{let{target:u}=e.params;u&&(e.query.target=u,R.info(`\u4F7F\u7528\u8DEF\u7531\u6307\u5B9A\u76EE\u6807: ${u}`)),await Zl(e,n)}),t.get("/download/:name",Zl),t.get("/download/collection/:name/api/v1/server/details",async(e,n)=>{e.query.platform="JSON",e.query.produceType="internal",e.query.resultFormat="nezha",await Ql(e,n)}),t.get("/download/:name/api/v1/server/details",async(e,n)=>{e.query.platform="JSON",e.query.produceType="internal",e.query.resultFormat="nezha",await Zl(e,n)}),t.get("/download/collection/:name/api/v1/monitor/:nezhaIndex",async(e,n)=>{e.query.platform="JSON",e.query.produceType="internal",e.query.resultFormat="nezha-monitor",await Ql(e,n)}),t.get("/download/:name/api/v1/monitor/:nezhaIndex",async(e,n)=>{e.query.platform="JSON",e.query.produceType="internal",e.query.resultFormat="nezha-monitor",await Zl(e,n)})}async function Zl(t,e){let{name:n,nezhaIndex:u}=t.params,s=t.query.target==="SurgeMac",p=t.query.target||Sw(t.headers)||"JSON",y=t.headers["user-agent"]||t.headers["User-Agent"];R.info(`\u6B63\u5728\u4E0B\u8F7D\u8BA2\u9605\uFF1A${n}
\u8BF7\u6C42 User-Agent: ${y}
\u8BF7\u6C42 target: ${t.query.target}
\u5B9E\u9645\u8F93\u51FA: ${p}`);let{url:g,ua:E,content:m,mergeSources:D,ignoreFailedRemoteSub:a,produceType:H,includeUnsupportedProxy:W,resultFormat:w,proxy:U,noCache:tt}=t.query,J={_req:{method:t.method,url:t.url,path:t.path,query:t.query,params:t.params,headers:t.headers,body:t.body}};if(t.query.$options){try{J=JSON.parse(decodeURIComponent(t.query.$options))}catch{for(let it of t.query.$options.split("&")){let q=it.split("=")[0],L=it.split("=")[1];J[q]=L==null||L===""?!0:decodeURIComponent(L)}}R.info(`\u4F20\u5165 $options: ${JSON.stringify(J)}`)}g&&(R.info(`\u6307\u5B9A\u8FDC\u7A0B\u8BA2\u9605 URL: ${g}`),/^https?:\/\//.test(g)||(m=g,R.info("URL \u4E0D\u662F\u94FE\u63A5\uFF0C\u89C6\u4E3A\u672C\u5730\u8BA2\u9605"))),m&&R.info(`\u6307\u5B9A\u672C\u5730\u8BA2\u9605: ${m}`),U&&R.info(`\u6307\u5B9A\u8FDC\u7A0B\u8BA2\u9605\u4F7F\u7528\u4EE3\u7406/\u7B56\u7565 proxy: ${U}`),E&&R.info(`\u6307\u5B9A\u8FDC\u7A0B\u8BA2\u9605 User-Agent: ${E}`),D&&R.info(`\u6307\u5B9A\u5408\u5E76\u6765\u6E90: ${D}`),a!=null&&a!==""&&R.info(`\u6307\u5B9A\u5FFD\u7565\u5931\u8D25\u7684\u8FDC\u7A0B\u8BA2\u9605: ${a}`),H&&R.info(`\u6307\u5B9A\u751F\u4EA7\u7C7B\u578B: ${H}`),W&&R.info(`\u5305\u542B\u5B98\u65B9/\u5546\u5E97\u7248/\u672A\u7EED\u8D39\u8BA2\u9605\u4E0D\u652F\u6301\u7684\u534F\u8BAE: ${W}`),!W&&Fw(p,y)&&(W=!0,R.info(`\u5F53\u524D\u5BA2\u6237\u7AEF\u53EF\u5305\u542B\u5B98\u65B9/\u5546\u5E97\u7248/\u672A\u7EED\u8D39\u8BA2\u9605\u4E0D\u652F\u6301\u7684\u534F\u8BAE: ${W}`)),s&&R.info("\u624B\u52A8\u6307\u5B9A\u4E86 target \u4E3A SurgeMac, \u5C06\u4F7F\u7528 Mihomo External"),tt&&R.info(`\u6307\u5B9A\u4E0D\u4F7F\u7528\u7F13\u5B58: ${tt}`);let N=R.read(Jt),Q=ct(N,n);if(Q)try{Q.passThroughUA&&(R.info(`\u8BA2\u9605\u5F00\u542F\u4E86\u900F\u4F20 User-Agent, \u4F7F\u7528\u8BF7\u6C42\u7684 User-Agent: ${y}`),E=y);let it=await vn({type:"subscription",name:n,platform:p,url:g,ua:E,content:m,mergeSources:D,ignoreFailedRemoteSub:a,produceType:H,produceOpts:{"include-unsupported-proxy":W,useMihomoExternal:s},$options:J,proxy:U,noCache:tt}),q;if(Q.source!=="local"||["localFirst","remoteFirst"].includes(Q.mergeSources))try{g=`${g||Q.url}`.split(/[\r\n]+/).map(lt=>lt.trim()).filter(lt=>lt.length)?.[0]||"";let L={},V=g.split("#");if(g=g.split("#")[0],V.length>1)try{L=JSON.parse(decodeURIComponent(V[1]))}catch{for(let lt of V[1].split("&")){let mt=lt.split("=")[0],Rt=lt.split("=")[1];L[mt]=Rt==null||Rt===""?!0:decodeURIComponent(Rt)}}!L.noFlow&&/^https?/.test(g)&&(q=await zn(L?.insecure?`${g}#insecure`:g,L.flowUserAgent,void 0,U||Q.proxy,L.flowUrl),q&&e.set("subscription-userinfo",Yu(q)))}catch(L){R.error(`\u8BA2\u9605 ${n} \u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u65F6\u53D1\u751F\u9519\u8BEF: ${JSON.stringify(L)}`)}if(Q.subUserinfo){let L;if(/^https?:\/\//.test(Q.subUserinfo))try{L=await zn(void 0,void 0,void 0,U||Q.proxy,Q.subUserinfo)}catch(V){R.error(`\u8BA2\u9605 ${n} \u4F7F\u7528\u81EA\u5B9A\u4E49\u6D41\u91CF\u94FE\u63A5 ${Q.subUserinfo} \u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u65F6\u53D1\u751F\u9519\u8BEF: ${JSON.stringify(V)}`)}else L=Q.subUserinfo;e.set("subscription-userinfo",Yu([L,q].filter(V=>V).join(";")))}p==="JSON"?(w==="nezha"?it=i3(it):w==="nezha-monitor"&&(u=/^\d+$/.test(u)?parseInt(u,10):it.findIndex(L=>L.name===u),it=await n3(it[u],u,t.query)),e.set("Content-Type","application/json;charset=utf-8").send(it)):e.send(it)}catch(it){R.notify("\u{1F30D} Sub-Store \u4E0B\u8F7D\u8BA2\u9605\u5931\u8D25",`\u274C \u65E0\u6CD5\u4E0B\u8F7D\u8BA2\u9605\uFF1A${n}\uFF01`,`\u{1F914} \u539F\u56E0\uFF1A${it.message??it}`),R.error(it.message??it),xe(e,new pr("INTERNAL_SERVER_ERROR",`Failed to download subscription: ${n}`,`Reason: ${it.message??it}`))}else R.error(`\u{1F30D} Sub-Store \u4E0B\u8F7D\u8BA2\u9605\u5931\u8D25
\u274C \u672A\u627E\u5230\u8BA2\u9605\uFF1A${n}\uFF01`),xe(e,new yr("RESOURCE_NOT_FOUND",`Subscription ${n} does not exist!`),404)}async function Ql(t,e){let{name:n,nezhaIndex:u}=t.params,s=t.query.target==="SurgeMac",p=t.query.target||Sw(t.headers)||"JSON",y=R.read(Zt),g=ct(y,n),E=t.headers["user-agent"]||t.headers["User-Agent"];R.info(`\u6B63\u5728\u4E0B\u8F7D\u7EC4\u5408\u8BA2\u9605\uFF1A${n}
\u8BF7\u6C42 User-Agent: ${E}
\u8BF7\u6C42 target: ${t.query.target}
\u5B9E\u9645\u8F93\u51FA: ${p}`);let{ignoreFailedRemoteSub:m,produceType:D,includeUnsupportedProxy:a,resultFormat:H,proxy:W,noCache:w}=t.query,U={_req:{method:t.method,url:t.url,path:t.path,query:t.query,params:t.params,headers:t.headers,body:t.body}};if(t.query.$options){try{U=JSON.parse(decodeURIComponent(t.query.$options))}catch{for(let tt of t.query.$options.split("&")){let J=tt.split("=")[0],N=tt.split("=")[1];U[J]=N==null||N===""?!0:decodeURIComponent(N)}}R.info(`\u4F20\u5165 $options: ${JSON.stringify(U)}`)}if(W&&R.info(`\u6307\u5B9A\u8FDC\u7A0B\u8BA2\u9605\u4F7F\u7528\u4EE3\u7406/\u7B56\u7565 proxy: ${W}`),m!=null&&m!==""&&R.info(`\u6307\u5B9A\u5FFD\u7565\u5931\u8D25\u7684\u8FDC\u7A0B\u8BA2\u9605: ${m}`),D&&R.info(`\u6307\u5B9A\u751F\u4EA7\u7C7B\u578B: ${D}`),a&&R.info(`\u5305\u542B\u5B98\u65B9/\u5546\u5E97\u7248/\u672A\u7EED\u8D39\u8BA2\u9605\u4E0D\u652F\u6301\u7684\u534F\u8BAE: ${a}`),!a&&Fw(p,E)&&(a=!0,R.info(`\u5F53\u524D\u5BA2\u6237\u7AEF\u53EF\u5305\u542B\u5B98\u65B9/\u5546\u5E97\u7248/\u672A\u7EED\u8D39\u8BA2\u9605\u4E0D\u652F\u6301\u7684\u534F\u8BAE: ${a}`)),s&&R.info("\u624B\u52A8\u6307\u5B9A\u4E86 target \u4E3A SurgeMac, \u5C06\u4F7F\u7528 Mihomo External"),w&&R.info(`\u6307\u5B9A\u4E0D\u4F7F\u7528\u7F13\u5B58: ${w}`),g)try{let tt=await vn({type:"collection",name:n,platform:p,ignoreFailedRemoteSub:m,produceType:D,produceOpts:{"include-unsupported-proxy":a,useMihomoExternal:s},$options:U,proxy:W,noCache:w,ua:E}),J,N=R.read(Jt),Q=g.subscriptions;if(Q.length>0){let L=ct(N,Q[0]);if(L.source!=="local"||["localFirst","remoteFirst"].includes(L.mergeSources))try{let V=`${L.url}`.split(/[\r\n]+/).map(Rt=>Rt.trim()).filter(Rt=>Rt.length)?.[0]||"",lt={},mt=V.split("#");if(V=V.split("#")[0],mt.length>1)try{lt=JSON.parse(decodeURIComponent(mt[1]))}catch{for(let Rt of mt[1].split("&")){let Et=Rt.split("=")[0],vt=Rt.split("=")[1];lt[Et]=vt==null||vt===""?!0:decodeURIComponent(vt)}}!lt.noFlow&&/^https?:/.test(V)&&(J=await zn(lt?.insecure?`${V}#insecure`:V,lt.flowUserAgent,void 0,W||L.proxy||g.proxy,lt.flowUrl))}catch(V){R.error(`\u7EC4\u5408\u8BA2\u9605 ${n} \u4E2D\u7684\u5B50\u8BA2\u9605 ${L.name} \u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u65F6\u53D1\u751F\u9519\u8BEF: ${V.message??V}`)}if(L.subUserinfo){let V;if(/^https?:\/\//.test(L.subUserinfo))try{V=await zn(void 0,void 0,void 0,W||L.proxy,L.subUserinfo)}catch(lt){R.error(`\u7EC4\u5408\u8BA2\u9605 ${n} \u4F7F\u7528\u81EA\u5B9A\u4E49\u6D41\u91CF\u94FE\u63A5 ${L.subUserinfo} \u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u65F6\u53D1\u751F\u9519\u8BEF: ${JSON.stringify(lt)}`)}else V=L.subUserinfo;J=[V,J].filter(lt=>lt).join("; ")}}R.info(`\u7EC4\u5408\u8BA2\u9605 ${n} \u900F\u4F20\u7684\u7684\u6D41\u91CF\u4FE1\u606F: ${J}`);let it;if(/^https?:\/\//.test(g.subUserinfo))try{it=await zn(void 0,void 0,void 0,W||g.proxy,g.subUserinfo)}catch(L){R.error(`\u7EC4\u5408\u8BA2\u9605 ${n} \u4F7F\u7528\u81EA\u5B9A\u4E49\u6D41\u91CF\u94FE\u63A5 ${g.subUserinfo} \u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u65F6\u53D1\u751F\u9519\u8BEF: ${JSON.stringify(L)}`)}else it=g.subUserinfo;let q=[it,J].filter(L=>L).join("; ");q&&e.set("subscription-userinfo",Yu(q)),p==="JSON"?(H==="nezha"?tt=i3(tt):H==="nezha-monitor"&&(u=/^\d+$/.test(u)?parseInt(u,10):tt.findIndex(L=>L.name===u),tt=await n3(tt[u],u,t.query)),e.set("Content-Type","application/json;charset=utf-8").send(tt)):e.send(tt)}catch(tt){R.notify("\u{1F30D} Sub-Store \u4E0B\u8F7D\u7EC4\u5408\u8BA2\u9605\u5931\u8D25",`\u274C \u4E0B\u8F7D\u7EC4\u5408\u8BA2\u9605\u9519\u8BEF\uFF1A${n}\uFF01`,`\u{1F914} \u539F\u56E0\uFF1A${tt}`),xe(e,new pr("INTERNAL_SERVER_ERROR",`Failed to download collection: ${n}`,`Reason: ${tt.message??tt}`))}else R.error("\u{1F30D} Sub-Store \u4E0B\u8F7D\u7EC4\u5408\u8BA2\u9605\u5931\u8D25",`\u274C \u672A\u627E\u5230\u7EC4\u5408\u8BA2\u9605\uFF1A${n}\uFF01`),xe(e,new yr("RESOURCE_NOT_FOUND",`Collection ${n} does not exist!`),404)}async function n3(t,e,n){let u={code:0,message:"success",result:[]};try{let{isLoon:s,isSurge:p}=R.env;if(!s&&!p)throw new Error("\u4EC5\u652F\u6301 Loon \u548C Surge(ability=http-client-policy)");let y=xt.produce([t],s?"Loon":"Surge");if(!y)throw new Error("\u5F53\u524D\u5BA2\u6237\u7AEF\u4E0D\u517C\u5BB9\u6B64\u8282\u70B9");let g=t._monitors||[{name:"Cloudflare",url:"http://cp.cloudflare.com/generate_204",method:"HEAD",number:3,timeout:2e3},{name:"Google",url:"http://www.google.com/generate_204",method:"HEAD",number:3,timeout:2e3}],E=n.number||Math.max(...g.map(m=>m.number))||3;for(let m of g){let D={monitor_id:g.indexOf(m),server_id:e,monitor_name:m.name,server_name:t.name,created_at:[],avg_delay:[]};for(let a=0;a<E;a++){let H=Date.now();try{await R.http[(m.method||"HEAD").toLowerCase()]({timeout:m.timeout||2e3,url:m.url,"policy-descriptor":y,node:y});let W=Date.now()-H;R.info(`${m.name} latency: ${W}`),D.avg_delay.push(W)}catch(W){R.error(W),D.avg_delay.push(0)}D.created_at.push(Date.now()-6e5*(m.number-a-1))}u.result.push(D)}}catch(s){R.error(s),u.result.push({monitor_id:0,server_id:0,monitor_name:`\u274C ${s.message??s}`,server_name:t.name,created_at:[Date.now()],avg_delay:[0]})}return JSON.stringify(u,null,2)}function i3(t){let e={code:0,message:"success",result:[]};return t.map((n,u)=>{let s=n._geo?.countryCode||n._geo?.country;if(/^[a-z]{2}$/i.test(s)||(s=k0(n.name)),/^[a-z]{2}$/i.test(s)){let p=Math.round(new Date().getTime()/1e3),y=n._unavailable?0:p,g=parseInt(n._uptime||0,10);e.result.push({id:u,name:n.name,tag:`${n._tag??""}`,last_active:y,valid_ip:n._IP||n.server,ipv4:n._IPv4||n.server,ipv6:n._IPv6||(Mr(n.server)?n.server:""),host:{Platform:"Sub-Store",PlatformVersion:to.version,CPU:[],MemTotal:1024,DiskTotal:1024,SwapTotal:1024,Arch:"",Virtualization:"",BootTime:p-g,CountryCode:s,Version:"0.0.1"},status:{CPU:0,MemUsed:0,SwapUsed:0,DiskUsed:0,NetInTransfer:0,NetOutTransfer:0,NetInSpeed:0,NetOutSpeed:0,Uptime:g,Load1:0,Load5:0,Load15:0,TcpConnCount:0,UdpConnCount:0,ProcessCount:0}})}}),JSON.stringify(e,null,2)}function Bw(t){t.post("/api/preview/sub",Yz),t.post("/api/preview/collection",Wz),t.post("/api/preview/file",Gz)}async function Gz(t,e){try{let n=t.body,u="";if(n.type!=="mihomoProfile")if(n.source==="local"&&!["localFirst","remoteFirst"].includes(n.mergeSources))u=n.content;else{let g={};if(u=await Promise.all(n.url.split(/[\r\n]+/).map(E=>E.trim()).filter(E=>E.length).map(async E=>{try{return await un(E,n.ua,void 0,n.proxy)}catch(m){return g[E]=m,R.error(`\u6587\u4EF6 ${n.name} \u7684\u8FDC\u7A0B\u6587\u4EF6 ${E} \u53D1\u751F\u9519\u8BEF: ${m}`),""}})),Object.keys(g).length>0)if(n.ignoreFailedRemoteFile)n.ignoreFailedRemoteFile==="enabled"&&R.notify("\u{1F30D} Sub-Store \u9884\u89C8\u6587\u4EF6\u5931\u8D25",`\u274C ${n.name}`,`\u8FDC\u7A0B\u6587\u4EF6 ${Object.keys(g).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u6587\u4EF6 ${n.name} \u7684\u8FDC\u7A0B\u6587\u4EF6 ${Object.keys(g).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);n.mergeSources==="localFirst"?u.unshift(n.content):n.mergeSources==="remoteFirst"&&u.push(n.content)}let s=(Array.isArray(u)?u:[u]).flat(),p=s.filter(g=>g!=null&&g!=="").join(`
`),y=Array.isArray(n.process)&&n.process.length>0?await xt.process({$files:s,$content:p,$file:n},n.process):{$content:p,$files:s};je(e,{original:p,processed:y?.$content??""})}catch(n){R.error(n.message??n),xe(e,new pr("INTERNAL_SERVER_ERROR","Failed to preview file",`Reason: ${n.message??n}`))}}async function Yz(t,e){try{let n=t.body,u=t.query.target||"JSON",s;if(n.source==="local"&&!["localFirst","remoteFirst"].includes(n.mergeSources))s=n.content;else{let g={};if(s=await Promise.all(n.url.split(/[\r\n]+/).map(E=>E.trim()).filter(E=>E.length).map(async E=>{try{return await un(E,n.ua,void 0,n.proxy,void 0,void 0,void 0,!0)}catch(m){return g[E]=m,R.error(`\u8BA2\u9605 ${n.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${E} \u53D1\u751F\u9519\u8BEF: ${m}`),""}})),Object.keys(g).length>0)if(n.ignoreFailedRemoteSub)n.ignoreFailedRemoteSub==="enabled"&&R.notify("\u{1F30D} Sub-Store \u9884\u89C8\u8BA2\u9605\u5931\u8D25",`\u274C ${n.name}`,`\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(g).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u8BA2\u9605 ${n.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(g).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);n.mergeSources==="localFirst"?s.unshift(n.content):n.mergeSources==="remoteFirst"&&s.push(n.content)}let p=(Array.isArray(s)?s:[s]).map(g=>xt.parse(g)).flat();p.forEach((g,E)=>{g.id=E,g._subName=n.name,g._subDisplayName=n.displayName});let y=await xt.process(p,n.process||[],u,{[n.name]:n});je(e,{original:p,processed:y})}catch(n){R.error(n.message??n),xe(e,new pr("INTERNAL_SERVER_ERROR","Failed to preview subscription",`Reason: ${n.message??n}`))}}async function Wz(t,e){try{let n=R.read(Jt),u=t.body,s=[...u.subscriptions],p=u.subscriptionTags;Array.isArray(p)&&p.length>0&&n.forEach(D=>{Array.isArray(D.tag)&&D.tag.length>0&&!s.includes(D.name)&&D.tag.some(a=>p.includes(a))&&s.push(D.name)});let y={},g={};if(await Promise.all(s.map(async D=>{let a=ct(n,D);try{let H;if(a.source==="local"&&!["localFirst","remoteFirst"].includes(a.mergeSources))H=a.content;else{let w={};if(H=await Promise.all(a.url.split(/[\r\n]+/).map(U=>U.trim()).filter(U=>U.length).map(async U=>{try{return await un(U,a.ua,void 0,a.proxy,void 0,void 0,void 0,!0)}catch(tt){return w[U]=tt,R.error(`\u8BA2\u9605 ${a.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${U} \u53D1\u751F\u9519\u8BEF: ${tt}`),""}})),Object.keys(w).length>0)if(a.ignoreFailedRemoteSub)a.ignoreFailedRemoteSub==="enabled"&&R.notify("\u{1F30D} Sub-Store \u9884\u89C8\u8BA2\u9605\u5931\u8D25",`\u274C ${a.name}`,`\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(w).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u8BA2\u9605 ${a.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(w).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);a.mergeSources==="localFirst"?H.unshift(a.content):a.mergeSources==="remoteFirst"&&H.push(a.content)}let W=(Array.isArray(H)?H:[H]).map(w=>xt.parse(w)).flat();W.forEach(w=>{w._subName=a.name,w._subDisplayName=a.displayName,w._collectionName=u.name,w._collectionDisplayName=u.displayName}),W=await xt.process(W,a.process||[],"JSON",{[a.name]:a,_collection:u}),y[D]=W}catch(H){g[D]=H,R.error(`\u274C \u5904\u7406\u7EC4\u5408\u8BA2\u9605 ${u.name} \u4E2D\u7684\u5B50\u8BA2\u9605: ${a.name} \u65F6\u51FA\u73B0\u9519\u8BEF\uFF1A${H}\uFF01`)}})),Object.keys(g).length>0)if(u.ignoreFailedRemoteSub)u.ignoreFailedRemoteSub==="enabled"&&R.notify("\u{1F30D} Sub-Store \u9884\u89C8\u7EC4\u5408\u8BA2\u9605\u5931\u8D25",`\u274C ${u.name}`,`\u5B50\u8BA2\u9605 ${Object.keys(g).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u7EC4\u5408\u8BA2\u9605 ${u.name} \u7684\u5B50\u8BA2\u9605 ${Object.keys(g).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);let E=Array.prototype.concat.apply([],s.map(D=>y[D]||[]));E.forEach((D,a)=>{D.id=a,D._collectionName=u.name,D._collectionDisplayName=u.displayName});let m=await xt.process(E,u.process||[],"JSON",{_collection:u});je(e,{original:E,processed:m})}catch(n){R.error(n.message??n),xe(e,new pr("INTERNAL_SERVER_ERROR","Failed to preview collection",`Reason: ${n.message??n}`))}}function $w(t){t.post("/api/sort/subs",Xz),t.post("/api/sort/collections",Jz),t.post("/api/sort/artifacts",Zz),t.post("/api/sort/files",Qz)}function Xz(t,e){let n=t.body,u=R.read(Jt);u.sort((s,p)=>n.indexOf(s.name)-n.indexOf(p.name)),R.write(u,Jt),je(e,u)}function Jz(t,e){let n=t.body,u=R.read(Zt);u.sort((s,p)=>n.indexOf(s.name)-n.indexOf(p.name)),R.write(u,Zt),je(e,u)}function Zz(t,e){let n=t.body,u=R.read(Bt);u.sort((s,p)=>n.indexOf(s.name)-n.indexOf(p.name)),R.write(u,Bt),je(e,u)}function Qz(t,e){let n=t.body,u=R.read(Lt);u.sort((s,p)=>n.indexOf(s.name)-n.indexOf(p.name)),R.write(u,Lt),je(e,u)}function Rw(t){t.post("/api/utils/node-info",eG)}async function eG(t,e){let n=t.body,u=t.query.lang||"zh-CN",s;try{s=Op.URI.produce(n)}catch{}try{let p=await Rs().get({url:`http://ip-api.com/json/${encodeURIComponent(`${n.server}`.trim().replace(/^\[/,"").replace(/\]$/,""))}?lang=${u}`,headers:{"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 12_4) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Safari/605.1.15"}}).then(y=>{let g=JSON.parse(y.body);if(g.status!=="success")throw new Error(g.message);return delete g.status,g});je(e,{shareUrl:s,info:p})}catch(p){xe(e,new el("FAILED_TO_GET_NODE_INFO","Failed to get node info",`Reason: ${p}`))}}function Pw(t){t.route("/api/proxy/parse").post(tG),t.route("/api/rule/parse").post(rG)}function tG(t,e){let{data:n,client:u,content:s,platform:p}=t.body;var y={};try{var g=xt.parse(n??s),E=xt.produce(g,u??p);y.par_res=E}catch(m){xe(e,m);return}je(e,y)}function rG(t,e){let{data:n,client:u,content:s,platform:p}=t.body;var y={};try{let E=Ec.parse(n??s);var g=Ec.produce(E,u??p);y.par_res=g}catch(E){xe(e,E);return}je(e,y)}function Ow(){let port,host;R.env.isNode&&(port=eval("process.env.SUB_STORE_BACKEND_API_PORT")||3e3,host=eval("process.env.SUB_STORE_BACKEND_API_HOST")||"::");let $app=Ag({substore:R,port,host});if(R.env.isNode){let be_merge=eval("process.env.SUB_STORE_BACKEND_MERGE"),be_prefix=eval("process.env.SUB_STORE_BACKEND_PREFIX"),fe_be_path=eval("process.env.SUB_STORE_FRONTEND_BACKEND_PATH"),fe_path=eval("process.env.SUB_STORE_FRONTEND_PATH");if(be_prefix||be_merge){if(!fe_be_path.startsWith("/"))throw new Error("SUB_STORE_FRONTEND_BACKEND_PATH should start with /");be_merge&&(R.info("[BACKEND] MERGE mode is [ON]."),R.info(`[BACKEND && FRONTEND] ${host}:${port}`)),R.info(`[BACKEND PREFIX] ${host}:${port}${fe_be_path}`),$app.use((t,e,n)=>{if(t.path.startsWith(fe_be_path)){t.url=t.url.replace(fe_be_path,"")||"/",be_merge&&t.url.startsWith("/api/")&&(t.query.share="true"),n();return}let u=decodeURIComponent(t._parsedUrl.pathname)||"/";if(be_merge&&t.path.startsWith("/share/")&&t.query.token){if(t.method.toLowerCase()!=="get"){e.status(405).send("Method not allowed");return}if((R.read(ui)||[]).find(s=>s.token===t.query.token&&`/share/${s.type}/${s.name}`===u&&(s.exp==null||s.exp>Date.now()))){n();return}}if(be_merge&&fe_path&&t.path.indexOf("/",1)==-1){t.path.indexOf(".")==-1&&(t.url="/index.html");let s=require("express"),p=require("mime-types"),y=require("path");s.static(fe_path,{setHeaders:(E,m)=>{let D=p.contentType(y.extname(m));D&&E.set("Content-Type",D)}})(t,e,n);return}e.status(404).end()})}}if(mw($app),gw($app),Iw($app),Bw($app),$w($app),hw($app),ow($app),vw($app),ww($app),Ew($app),cw($app),Rw($app),pw($app),Pw($app),$app.start(),R.env.isNode){let backend_sync_cron=eval("process.env.SUB_STORE_BACKEND_SYNC_CRON");if(backend_sync_cron){R.info(`[SYNC CRON] ${backend_sync_cron} enabled`);let{CronJob:t}=require("cron");new t(backend_sync_cron,async function(){try{R.info(`[SYNC CRON] ${backend_sync_cron} started`),await lw(),R.info(`[SYNC CRON] ${backend_sync_cron} finished`)}catch(e){R.error(`[SYNC CRON] ${backend_sync_cron} error: ${e.message??e}`)}},null,!0)}else eval("process.env.SUB_STORE_BACKEND_CRON")&&R.error("[SYNC CRON] SUB_STORE_BACKEND_CRON \u5DF2\u5F03\u7528, \u8BF7\u4F7F\u7528 SUB_STORE_BACKEND_SYNC_CRON"),eval("process.env.SUB_STORE_CRON")&&R.error("[SYNC CRON] SUB_STORE_CRON \u5DF2\u5F03\u7528, \u8BF7\u4F7F\u7528 SUB_STORE_BACKEND_SYNC_CRON");let produce_cron=eval("process.env.SUB_STORE_PRODUCE_CRON");if(produce_cron){R.info(`[PRODUCE CRON] ${produce_cron} enabled`);let{CronJob:t}=require("cron");produce_cron.split(/\s*;\s*/).map(e=>{let[n,u,s]=e.split(/\s*,\s*/);new t(n.trim(),async function(){try{R.info(`[PRODUCE CRON] ${u} ${s} ${n} started`),await vn({type:u,name:s}),R.info(`[PRODUCE CRON] ${u} ${s} ${n} finished`)}catch(p){R.error(`[PRODUCE CRON] ${u} ${s} ${n} error: ${p.message??p}`)}},null,!0)})}let backend_download_cron=eval("process.env.SUB_STORE_BACKEND_DOWNLOAD_CRON");if(backend_download_cron){R.info(`[DOWNLOAD CRON] ${backend_download_cron} enabled`);let{CronJob:t}=require("cron");new t(backend_download_cron,async function(){try{R.info(`[DOWNLOAD CRON] ${backend_download_cron} started`),await zp("download"),R.info(`[DOWNLOAD CRON] ${backend_download_cron} finished`)}catch(e){R.error(`[DOWNLOAD CRON] ${backend_download_cron} error: ${e.message??e}`)}},null,!0)}let backend_upload_cron=eval("process.env.SUB_STORE_BACKEND_UPLOAD_CRON");if(backend_upload_cron){R.info(`[UPLOAD CRON] ${backend_upload_cron} enabled`);let{CronJob:t}=require("cron");new t(backend_upload_cron,async function(){try{R.info(`[UPLOAD CRON] ${backend_upload_cron} started`),await zp("upload"),R.info(`[UPLOAD CRON] ${backend_upload_cron} finished`)}catch(e){R.error(`[UPLOAD CRON] ${backend_upload_cron} error: ${e.message??e}`)}},null,!0)}let mmdb_cron=eval("process.env.SUB_STORE_MMDB_CRON"),countryFile=eval("process.env.SUB_STORE_MMDB_COUNTRY_PATH"),countryUrl=eval("process.env.SUB_STORE_MMDB_COUNTRY_URL"),asnFile=eval("process.env.SUB_STORE_MMDB_ASN_PATH"),asnUrl=eval("process.env.SUB_STORE_MMDB_ASN_URL");if(mmdb_cron&&(countryFile&&countryUrl||asnFile&&asnUrl)){R.info(`[MMDB CRON] ${mmdb_cron} enabled`);let{CronJob:t}=require("cron");new t(mmdb_cron,async function(){try{if(R.info(`[MMDB CRON] ${mmdb_cron} started`),countryFile&&countryUrl)try{R.info(`[MMDB CRON] downloading ${countryUrl} to ${countryFile}`),await Kh(countryUrl,countryFile)}catch(e){R.error(`[MMDB CRON] ${countryUrl} download failed: ${e.message??e}`)}if(asnFile&&asnUrl)try{R.info(`[MMDB CRON] downloading ${asnUrl} to ${asnFile}`),await Kh(asnUrl,asnFile)}catch(e){R.error(`[MMDB CRON] ${asnUrl} download failed: ${e.message??e}`)}R.info(`[MMDB CRON] ${mmdb_cron} finished`)}catch(e){R.error(`[MMDB CRON] ${mmdb_cron} error: ${e.message??e}`)}},null,!0)}let path=require("path"),fs=require("fs"),data_url=eval("process.env.SUB_STORE_DATA_URL"),data_url_post=eval("process.env.SUB_STORE_DATA_URL_POST"),fe_be_path=eval("process.env.SUB_STORE_FRONTEND_BACKEND_PATH"),fe_port=eval("process.env.SUB_STORE_FRONTEND_PORT")||3001,fe_host=eval("process.env.SUB_STORE_FRONTEND_HOST")||host||"::",fe_path=eval("process.env.SUB_STORE_FRONTEND_PATH"),fe_abs_path=path.resolve(fe_path||path.join(__dirname,"frontend")),be_merge=eval("process.env.SUB_STORE_BACKEND_MERGE");if(fe_path&&!be_merge){try{fs.accessSync(path.join(fe_abs_path,"index.html"))}catch(t){R.error(`[FRONTEND] index.html file not found in ${fe_abs_path}`)}let express_=require("express"),history=require("connect-history-api-fallback"),{createProxyMiddleware}=require("http-proxy-middleware"),app=express_(),staticFileMiddleware=express_.static(fe_path),be_api="/api/",be_download="/download/",be_share="/share/",be_download_rewrite="",be_api_rewrite="",be_share_rewrite=`${be_share}:type/:name`,prefix=eval("process.env.SUB_STORE_BACKEND_PREFIX")?fe_be_path:"";if(fe_be_path){if(!fe_be_path.startsWith("/"))throw new Error("SUB_STORE_FRONTEND_BACKEND_PATH should start with /");be_api_rewrite=`${fe_be_path==="/"?"":fe_be_path}${be_api}`,be_download_rewrite=`${fe_be_path==="/"?"":fe_be_path}${be_download}`,app.use(be_share_rewrite,createProxyMiddleware({target:`http://127.0.0.1:${port}${prefix}`,changeOrigin:!0,pathRewrite:async(t,e)=>{if(e.method.toLowerCase()!=="get")throw new Error("Method not allowed");if(!(R.read(ui)||[]).find(n=>n.token===e.query.token&&n.type===e.params.type&&n.name===e.params.name&&(n.exp==null||n.exp>Date.now())))throw new Error("Forbbiden");return e.originalUrl}})),app.use(be_api_rewrite,createProxyMiddleware({target:`http://127.0.0.1:${port}${prefix}${be_api}`,pathRewrite:async t=>t.includes("?")?`${t}&share=true`:`${t}?share=true`})),app.use(be_download_rewrite,createProxyMiddleware({target:`http://127.0.0.1:${port}${prefix}${be_download}`,changeOrigin:!0}))}app.use(staticFileMiddleware),app.use(history({disableDotRule:!0,verbose:!1})),app.use(staticFileMiddleware);let listener=app.listen(fe_port,fe_host,()=>{let{address:t,port:e}=listener.address();R.info(`[FRONTEND] ${t}:${e}`),fe_be_path&&(R.info(`[FRONTEND -> BACKEND] ${t}:${e}${be_api_rewrite} -> ${host}:${port}${prefix}${be_api}`),R.info(`[FRONTEND -> BACKEND] ${t}:${e}${be_download_rewrite} -> ${host}:${port}${prefix}${be_download}`),R.info(`[SHARE BACKEND] ${t}:${e}${be_share_rewrite}`))})}data_url&&(R.info(`[BACKEND] downloading data from ${data_url}`),un(data_url).then(async content=>{try{if(content=JSON.parse(ft.decode(content)),Object.keys(content.settings).length===0)throw new Error("\u5907\u4EFD\u6587\u4EF6\u5E94\u8BE5\u81F3\u5C11\u5305\u542B settings \u5B57\u6BB5")}catch(t){try{if(content=JSON.parse(content),Object.keys(content.settings).length===0)throw new Error("\u5907\u4EFD\u6587\u4EF6\u5E94\u8BE5\u81F3\u5C11\u5305\u542B settings \u5B57\u6BB5")}catch(e){throw R.error(`Gist \u5907\u4EFD\u6587\u4EF6\u6821\u9A8C\u5931\u8D25, \u65E0\u6CD5\u8FD8\u539F
Reason: ${e.message??e}`),new Error("Gist \u5907\u4EFD\u6587\u4EF6\u6821\u9A8C\u5931\u8D25, \u65E0\u6CD5\u8FD8\u539F")}}data_url_post&&(R.info("[BACKEND] executing post-processing script"),eval(data_url_post)),R.write(JSON.stringify(content,null,"  "),"#sub-store"),R.cache=content,R.persistCache(),Ku(),R.info(`[BACKEND] restored data from ${data_url}`)}).catch(t=>{throw R.error("[BACKEND] restore data failed"),t}))}}Ku(),Ow()})();
