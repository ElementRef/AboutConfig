// Sat Aug 23 2025 21:19:06 GMT+0000 (Coordinated Universal Time) https://raw.githubusercontent.com/ElementRef/AboutConfig/main/script/peng.ym.sub.store.js
(()=>{var X9=Object.create,wA=Object.defineProperty,J9=Object.getOwnPropertyDescriptor,Z9=Object.getOwnPropertyNames,Q9=Object.getPrototypeOf,e$=Object.prototype.hasOwnProperty,ko=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(r,n)=>(typeof require<"u"?require:r)[n]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')}),ce=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports),t$=(t,r,n,i)=>{if(r&&typeof r=="object"||typeof r=="function")for(let u of Z9(r))!e$.call(t,u)&&u!==n&&wA(t,u,{get:()=>r[u],enumerable:!(i=J9(r,u))||i.enumerable});return t},tn=(t,r,n)=>(n=t!=null?X9(Q9(t)):{},t$(r||!t||!t.__esModule?wA(n,"default",{value:t,enumerable:!0}):n,t)),Sf=ce((t,r)=>{(function(){var n,i="4.17.21",u=200,p="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",g="Expected a function",m="Invalid `variable` option passed into `_.template`",A="__lodash_hash_undefined__",y=500,D="__lodash_placeholder__",o=1,M=2,W=4,w=1,U=2,nt=1,X=2,j=4,it=8,ot=16,K=32,H=64,q=128,pt=256,yt=512,Rt=30,Et="...",vt=800,Ft=16,Xt=1,ee=2,ne=3,ae=1/0,Le=9007199254740991,de=17976931348623157e292,He=NaN,ze=4294967295,Pe=ze-1,Je=ze>>>1,Xe=[["ary",q],["bind",nt],["bindKey",X],["curry",it],["curryRight",ot],["flip",yt],["partial",K],["partialRight",H],["rearg",pt]],Ae="[object Arguments]",xe="[object Array]",Qe="[object AsyncFunction]",Ve="[object Boolean]",Ze="[object Date]",vr="[object DOMException]",Pr="[object Error]",Dr="[object Function]",Q="[object GeneratorFunction]",k="[object Map]",Z="[object Number]",se="[object Null]",ye="[object Object]",rr="[object Promise]",dr="[object Proxy]",mr="[object RegExp]",ur="[object Set]",er="[object String]",Gr="[object Symbol]",Lr="[object Undefined]",Br="[object WeakMap]",N="[object WeakSet]",f="[object ArrayBuffer]",B="[object DataView]",J="[object Float32Array]",St="[object Float64Array]",Pt="[object Int8Array]",et="[object Int16Array]",zt="[object Int32Array]",Ut="[object Uint8Array]",_e="[object Uint8ClampedArray]",xt="[object Uint16Array]",dt="[object Uint32Array]",tt=/\b__p \+= '';/g,F=/\b(__p \+=) '' \+/g,rt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,At=/&(?:amp|lt|gt|quot|#39);/g,Ct=/[&<>"']/g,Nt=RegExp(At.source),Yt=RegExp(Ct.source),Ce=/<%-([\s\S]+?)%>/g,Qt=/<%([\s\S]+?)%>/g,Ee=/<%=([\s\S]+?)%>/g,Be=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,sr=/^\w*$/,O=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,le=/[\\^$.*+?()[\]{}|]/g,qt=RegExp(le.source),pe=/^\s+/,$t=/\s/,re=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Re=/\{\n\/\* \[wrapped with (.+)\] \*/,De=/,? & /,ke=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ne=/[()=,{}\[\]\/\s]/,tr=/\\(\\)?/g,lr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,or=/\w*$/,Ar=/^[-+]0x[0-9a-f]+$/i,jr=/^0b[01]+$/i,ln=/^\[object .+?Constructor\]$/,cn=/^0o[0-7]+$/i,Vr=/^(?:0|[1-9]\d*)$/,yr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Tr=/($^)/,gn=/['\n\r\u2028\u2029\\]/g,Kn="\\ud800-\\udfff",Qr="\\u0300-\\u036f",Wn="\\ufe20-\\ufe2f",Sr="\\u20d0-\\u20ff",bn=Qr+Wn+Sr,os="\\u2700-\\u27bf",_n="a-z\\xdf-\\xf6\\xf8-\\xff",Ps="\\xac\\xb1\\xd7\\xf7",Xr="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Is="\\u2000-\\u206f",Ts=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Xs="A-Z\\xc0-\\xd6\\xd8-\\xde",qs="\\ufe0e\\ufe0f",as=Ps+Xr+Is+Ts,In="['\u2019]",xi="["+Kn+"]",Xn="["+as+"]",ls="["+bn+"]",Mi="\\d+",Vi="["+os+"]",_i="["+_n+"]",cu="[^"+Kn+as+Mi+os+_n+Xs+"]",mi="\\ud83c[\\udffb-\\udfff]",qi="(?:"+ls+"|"+mi+")",Bi="[^"+Kn+"]",ai="(?:\\ud83c[\\udde6-\\uddff]){2}",ns="[\\ud800-\\udbff][\\udc00-\\udfff]",Cn="["+Xs+"]",bt="\\u200d",It="(?:"+_i+"|"+cu+")",Ht="(?:"+Cn+"|"+cu+")",fe="(?:"+In+"(?:d|ll|m|re|s|t|ve))?",Me="(?:"+In+"(?:D|LL|M|RE|S|T|VE))?",We=qi+"?",ir="["+qs+"]?",cr="(?:"+bt+"(?:"+[Bi,ai,ns].join("|")+")"+ir+We+")*",nn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",en="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Er=ir+We+cr,hs="(?:"+[Vi,ai,ns].join("|")+")"+Er,Ns="(?:"+[Bi+ls+"?",ls,ai,ns,xi].join("|")+")",Si=RegExp(In,"g"),ws=RegExp(ls,"g"),ds=RegExp(mi+"(?="+mi+")|"+Ns+Er,"g"),Ii=RegExp([Cn+"?"+_i+"+"+fe+"(?="+[Xn,Cn,"$"].join("|")+")",Ht+"+"+Me+"(?="+[Xn,Cn+It,"$"].join("|")+")",Cn+"?"+It+"+"+fe,Cn+"+"+Me,en,nn,Mi,hs].join("|"),"g"),En=RegExp("["+bt+Kn+bn+qs+"]"),Ki=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Eo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],vo=-1,Rn={};Rn[J]=Rn[St]=Rn[Pt]=Rn[et]=Rn[zt]=Rn[Ut]=Rn[_e]=Rn[xt]=Rn[dt]=!0,Rn[Ae]=Rn[xe]=Rn[f]=Rn[Ve]=Rn[B]=Rn[Ze]=Rn[Pr]=Rn[Dr]=Rn[k]=Rn[Z]=Rn[ye]=Rn[mr]=Rn[ur]=Rn[er]=Rn[Br]=!1;var Bn={};Bn[Ae]=Bn[xe]=Bn[f]=Bn[B]=Bn[Ve]=Bn[Ze]=Bn[J]=Bn[St]=Bn[Pt]=Bn[et]=Bn[zt]=Bn[k]=Bn[Z]=Bn[ye]=Bn[mr]=Bn[ur]=Bn[er]=Bn[Gr]=Bn[Ut]=Bn[_e]=Bn[xt]=Bn[dt]=!0,Bn[Pr]=Bn[Dr]=Bn[Br]=!1;var Ao={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Fo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},wo={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},on={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},bo=parseFloat,Co=parseInt,Ju=typeof global=="object"&&global&&global.Object===Object&&global,Do=typeof self=="object"&&self&&self.Object===Object&&self,Qn=Ju||Do||Function("return this")(),bu=typeof t=="object"&&t&&!t.nodeType&&t,yi=bu&&typeof r=="object"&&r&&!r.nodeType&&r,Wu=yi&&yi.exports===bu,Cu=Wu&&Ju.process,Yn=(function(){try{var me=yi&&yi.require&&yi.require("util").types;return me||Cu&&Cu.binding&&Cu.binding("util")}catch{}})(),Xu=Yn&&Yn.isArrayBuffer,Zu=Yn&&Yn.isDate,Qu=Yn&&Yn.isMap,to=Yn&&Yn.isRegExp,eo=Yn&&Yn.isSet,no=Yn&&Yn.isTypedArray;function bs(me,Ue,Ie){switch(Ie.length){case 0:return me.call(Ue);case 1:return me.call(Ue,Ie[0]);case 2:return me.call(Ue,Ie[0],Ie[1]);case 3:return me.call(Ue,Ie[0],Ie[1],Ie[2])}return me.apply(Ue,Ie)}function so(me,Ue,Ie,hr){for(var Or=-1,an=me==null?0:me.length;++Or<an;){var Gn=me[Or];Ue(hr,Gn,Ie(Gn),me)}return hr}function Ge(me,Ue){for(var Ie=-1,hr=me==null?0:me.length;++Ie<hr&&Ue(me[Ie],Ie,me)!==!1;);return me}function E(me,Ue){for(var Ie=me==null?0:me.length;Ie--&&Ue(me[Ie],Ie,me)!==!1;);return me}function Du(me,Ue){for(var Ie=-1,hr=me==null?0:me.length;++Ie<hr;)if(!Ue(me[Ie],Ie,me))return!1;return!0}function Zs(me,Ue){for(var Ie=-1,hr=me==null?0:me.length,Or=0,an=[];++Ie<hr;){var Gn=me[Ie];Ue(Gn,Ie,me)&&(an[Or++]=Gn)}return an}function Ei(me,Ue){var Ie=me==null?0:me.length;return!!Ie&&zi(me,Ue,0)>-1}function cs(me,Ue,Ie){for(var hr=-1,Or=me==null?0:me.length;++hr<Or;)if(Ie(Ue,me[hr]))return!0;return!1}function Pn(me,Ue){for(var Ie=-1,hr=me==null?0:me.length,Or=Array(hr);++Ie<hr;)Or[Ie]=Ue(me[Ie],Ie,me);return Or}function li(me,Ue){for(var Ie=-1,hr=Ue.length,Or=me.length;++Ie<hr;)me[Or+Ie]=Ue[Ie];return me}function lt(me,Ue,Ie,hr){var Or=-1,an=me==null?0:me.length;for(hr&&an&&(Ie=me[++Or]);++Or<an;)Ie=Ue(Ie,me[Or],Or,me);return Ie}function Rr(me,Ue,Ie,hr){var Or=me==null?0:me.length;for(hr&&Or&&(Ie=me[--Or]);Or--;)Ie=Ue(Ie,me[Or],Or,me);return Ie}function Ks(me,Ue){for(var Ie=-1,hr=me==null?0:me.length;++Ie<hr;)if(Ue(me[Ie],Ie,me))return!0;return!1}var An=Ji("length");function Dn(me){return me.split("")}function we(me){return me.match(ke)||[]}function ms(me,Ue,Ie){var hr;return Ie(me,function(Or,an,Gn){if(Ue(Or,an,Gn))return hr=an,!1}),hr}function pu(me,Ue,Ie,hr){for(var Or=me.length,an=Ie+(hr?1:-1);hr?an--:++an<Or;)if(Ue(me[an],an,me))return an;return-1}function zi(me,Ue,Ie){return Ue===Ue?oo(me,Ue,Ie):pu(me,_r,Ie)}function xu(me,Ue,Ie,hr){for(var Or=Ie-1,an=me.length;++Or<an;)if(hr(me[Or],Ue))return Or;return-1}function _r(me){return me!==me}function xo(me,Ue){var Ie=me==null?0:me.length;return Ie?Bu(me,Ue)/Ie:He}function Ji(me){return function(Ue){return Ue==null?n:Ue[me]}}function gr(me){return function(Ue){return me==null?n:me[Ue]}}function kn(me,Ue,Ie,hr,Or){return Or(me,function(an,Gn,Fn){Ie=hr?(hr=!1,an):Ue(Ie,an,Gn,Fn)}),Ie}function _u(me,Ue){var Ie=me.length;for(me.sort(Ue);Ie--;)me[Ie]=me[Ie].value;return me}function Bu(me,Ue){for(var Ie,hr=-1,Or=me.length;++hr<Or;){var an=Ue(me[hr]);an!==n&&(Ie=Ie===n?an:Ie+an)}return Ie}function ys(me,Ue){for(var Ie=-1,hr=Array(me);++Ie<me;)hr[Ie]=Ue(Ie);return hr}function Iu(me,Ue){return Pn(Ue,function(Ie){return[Ie,me[Ie]]})}function Ri(me){return me&&me.slice(0,Xi(me)+1).replace(pe,"")}function $e(me){return function(Ue){return me(Ue)}}function On(me,Ue){return Pn(Ue,function(Ie){return me[Ie]})}function $i(me,Ue){return me.has(Ue)}function Ru(me,Ue){for(var Ie=-1,hr=me.length;++Ie<hr&&zi(Ue,me[Ie],0)>-1;);return Ie}function io(me,Ue){for(var Ie=me.length;Ie--&&zi(Ue,me[Ie],0)>-1;);return Ie}function $u(me,Ue){for(var Ie=me.length,hr=0;Ie--;)me[Ie]===Ue&&++hr;return hr}var uo=gr(Ao),ku=gr(Fo);function Ou(me){return"\\"+on[me]}function _o(me,Ue){return me==null?n:me[Ue]}function Qs(me){return En.test(me)}function hu(me){return Ki.test(me)}function Wi(me){for(var Ue,Ie=[];!(Ue=me.next()).done;)Ie.push(Ue.value);return Ie}function vi(me){var Ue=-1,Ie=Array(me.size);return me.forEach(function(hr,Or){Ie[++Ue]=[Or,hr]}),Ie}function fu(me,Ue){return function(Ie){return me(Ue(Ie))}}function Rs(me,Ue){for(var Ie=-1,hr=me.length,Or=0,an=[];++Ie<hr;){var Gn=me[Ie];(Gn===Ue||Gn===D)&&(me[Ie]=D,an[Or++]=Ie)}return an}function Yi(me){var Ue=-1,Ie=Array(me.size);return me.forEach(function(hr){Ie[++Ue]=hr}),Ie}function du(me){var Ue=-1,Ie=Array(me.size);return me.forEach(function(hr){Ie[++Ue]=[hr,hr]}),Ie}function oo(me,Ue,Ie){for(var hr=Ie-1,Or=me.length;++hr<Or;)if(me[hr]===Ue)return hr;return-1}function Pu(me,Ue,Ie){for(var hr=Ie+1;hr--;)if(me[hr]===Ue)return hr;return hr}function ti(me){return Qs(me)?ki(me):An(me)}function Tn(me){return Qs(me)?gu(me):Dn(me)}function Xi(me){for(var Ue=me.length;Ue--&&$t.test(me.charAt(Ue)););return Ue}var ei=gr(wo);function ki(me){for(var Ue=ds.lastIndex=0;ds.test(me);)++Ue;return Ue}function gu(me){return me.match(ds)||[]}function Bo(me){return me.match(Ii)||[]}var ao=function me(Ue){Ue=Ue==null?Qn:zs.defaults(Qn.Object(),Ue,zs.pick(Qn,Eo));var Ie=Ue.Array,hr=Ue.Date,Or=Ue.Error,an=Ue.Function,Gn=Ue.Math,Fn=Ue.Object,Ai=Ue.RegExp,wn=Ue.String,Oe=Ue.TypeError,Nr=Ie.prototype,lo=an.prototype,ri=Fn.prototype,Qi=Ue["__core-js_shared__"],Oi=lo.toString,nr=ri.hasOwnProperty,So=0,e=(function(){var s=/[^.]+$/.exec(Qi&&Qi.keys&&Qi.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""})(),l=ri.toString,a=Oi.call(Fn),h=Qn._,b=Ai("^"+Oi.call(nr).replace(le,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),C=Wu?Ue.Buffer:n,x=Ue.Symbol,_=Ue.Uint8Array,L=C?C.allocUnsafe:n,V=fu(Fn.getPrototypeOf,Fn),ht=Fn.create,gt=ri.propertyIsEnumerable,P=Nr.splice,I=x?x.isConcatSpreadable:n,ut=x?x.iterator:n,T=x?x.toStringTag:n,at=(function(){try{var s=Uu(Fn,"defineProperty");return s({},"",{}),s}catch{}})(),Y=Ue.clearTimeout!==Qn.clearTimeout&&Ue.clearTimeout,wt=hr&&hr.now!==Qn.Date.now&&hr.now,Tt=Ue.setTimeout!==Qn.setTimeout&&Ue.setTimeout,Wt=Gn.ceil,Gt=Gn.floor,ve=Fn.getOwnPropertySymbols,be=C?C.isBuffer:n,d=Ue.isFinite,S=Nr.join,st=fu(Fn.keys,Fn),z=Gn.max,_t=Gn.min,Mt=hr.now,te=Ue.parseInt,ie=Gn.random,ge=Nr.reverse,Se=Uu(Ue,"DataView"),wr=Uu(Ue,"Map"),xr=Uu(Ue,"Promise"),Fr=Uu(Ue,"Set"),qr=Uu(Ue,"WeakMap"),Ur=Uu(Fn,"create"),xn=qr&&new qr,pn={},Fi=Lu(Se),js=Lu(wr),Es=Lu(xr),Cs=Lu(Fr),$s=Lu(qr),fn=x?x.prototype:n,Jn=fn?fn.valueOf:n,Nn=fn?fn.toString:n;function kt(s){if(es(s)&&!Hr(s)&&!(s instanceof Kr)){if(s instanceof Un)return s;if(nr.call(s,"__wrapped__"))return Rc(s)}return new Un(s)}var ps=(function(){function s(){}return function(c){if(!Zn(c))return{};if(ht)return ht(c);s.prototype=c;var v=new s;return s.prototype=n,v}})();function mn(){}function Un(s,c){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=n}kt.templateSettings={escape:Ce,evaluate:Qt,interpolate:Ee,variable:"",imports:{_:kt}},kt.prototype=mn.prototype,kt.prototype.constructor=kt,Un.prototype=ps(mn.prototype),Un.prototype.constructor=Un;function Kr(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ze,this.__views__=[]}function Pi(){var s=new Kr(this.__wrapped__);return s.__actions__=Gs(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=Gs(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=Gs(this.__views__),s}function wa(){if(this.__filtered__){var s=new Kr(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function ci(){var s=this.__wrapped__.value(),c=this.__dir__,v=Hr(s),G=c<0,Dt=v?s.length:0,Vt=Jh(0,Dt,this.__views__),oe=Vt.start,he=Vt.end,Fe=he-oe,qe=G?he:oe-1,Ke=this.__iteratees__,Ye=Ke.length,ar=0,Cr=_t(Fe,this.__takeCount__);if(!v||!G&&Dt==Fe&&Cr==Fe)return Jl(s,this.__actions__);var $r=[];t:for(;Fe--&&ar<Cr;){qe+=c;for(var Jr=-1,kr=s[qe];++Jr<Ye;){var rn=Ke[Jr],dn=rn.iteratee,ii=rn.type,Vs=dn(kr);if(ii==ee)kr=Vs;else if(!Vs){if(ii==Xt)continue t;break t}}$r[ar++]=kr}return $r}Kr.prototype=ps(mn.prototype),Kr.prototype.constructor=Kr;function Ls(s){var c=-1,v=s==null?0:s.length;for(this.clear();++c<v;){var G=s[c];this.set(G[0],G[1])}}function Ca(){this.__data__=Ur?Ur(null):{},this.size=0}function zo(s){var c=this.has(s)&&delete this.__data__[s];return this.size-=c?1:0,c}function Ln(s){var c=this.__data__;if(Ur){var v=c[s];return v===A?n:v}return nr.call(c,s)?c[s]:n}function pi(s){var c=this.__data__;return Ur?c[s]!==n:nr.call(c,s)}function yn(s,c){var v=this.__data__;return this.size+=this.has(s)?0:1,v[s]=Ur&&c===n?A:c,this}Ls.prototype.clear=Ca,Ls.prototype.delete=zo,Ls.prototype.get=Ln,Ls.prototype.has=pi,Ls.prototype.set=yn;function vs(s){var c=-1,v=s==null?0:s.length;for(this.clear();++c<v;){var G=s[c];this.set(G[0],G[1])}}function bp(){this.__data__=[],this.size=0}function Cp(s){var c=this.__data__,v=Go(c,s);if(v<0)return!1;var G=c.length-1;return v==G?c.pop():P.call(c,v,1),--this.size,!0}function Dp(s){var c=this.__data__,v=Go(c,s);return v<0?n:c[v][1]}function _p(s){return Go(this.__data__,s)>-1}function Bp(s,c){var v=this.__data__,G=Go(v,s);return G<0?(++this.size,v.push([s,c])):v[G][1]=c,this}vs.prototype.clear=bp,vs.prototype.delete=Cp,vs.prototype.get=Dp,vs.prototype.has=_p,vs.prototype.set=Bp;function tu(s){var c=-1,v=s==null?0:s.length;for(this.clear();++c<v;){var G=s[c];this.set(G[0],G[1])}}function Sp(){this.size=0,this.__data__={hash:new Ls,map:new(wr||vs),string:new Ls}}function Ip(s){var c=ca(this,s).delete(s);return this.size-=c?1:0,c}function kp(s){return ca(this,s).get(s)}function Tp(s){return ca(this,s).has(s)}function Np(s,c){var v=ca(this,s),G=v.size;return v.set(s,c),this.size+=v.size==G?0:1,this}tu.prototype.clear=Sp,tu.prototype.delete=Ip,tu.prototype.get=kp,tu.prototype.has=Tp,tu.prototype.set=Np;function Tu(s){var c=-1,v=s==null?0:s.length;for(this.__data__=new tu;++c<v;)this.add(s[c])}function jp(s){return this.__data__.set(s,A),this}function Up(s){return this.__data__.has(s)}Tu.prototype.add=Tu.prototype.push=jp,Tu.prototype.has=Up;function wi(s){var c=this.__data__=new vs(s);this.size=c.size}function Hp(){this.__data__=new vs,this.size=0}function Gp(s){var c=this.__data__,v=c.delete(s);return this.size=c.size,v}function Jp(s){return this.__data__.get(s)}function Yp(s){return this.__data__.has(s)}function Xp(s,c){var v=this.__data__;if(v instanceof vs){var G=v.__data__;if(!wr||G.length<u-1)return G.push([s,c]),this.size=++v.size,this;v=this.__data__=new tu(G)}return v.set(s,c),this.size=v.size,this}wi.prototype.clear=Hp,wi.prototype.delete=Gp,wi.prototype.get=Jp,wi.prototype.has=Yp,wi.prototype.set=Xp;function Dl(s,c){var v=Hr(s),G=!v&&Hu(s),Dt=!v&&!G&&Fu(s),Vt=!v&&!G&&!Dt&&mo(s),oe=v||G||Dt||Vt,he=oe?ys(s.length,wn):[],Fe=he.length;for(var qe in s)(c||nr.call(s,qe))&&!(oe&&(qe=="length"||Dt&&(qe=="offset"||qe=="parent")||Vt&&(qe=="buffer"||qe=="byteLength"||qe=="byteOffset")||uu(qe,Fe)))&&he.push(qe);return he}function xl(s){var c=s.length;return c?s[ja(0,c-1)]:n}function Zp(s,c){return pa(Gs(s),Nu(c,0,s.length))}function Qp(s){return pa(Gs(s))}function Da(s,c,v){(v!==n&&!bi(s[c],v)||v===n&&!(c in s))&&nu(s,c,v)}function Io(s,c,v){var G=s[c];(!(nr.call(s,c)&&bi(G,v))||v===n&&!(c in s))&&nu(s,c,v)}function Go(s,c){for(var v=s.length;v--;)if(bi(s[v][0],c))return v;return-1}function eh(s,c,v,G){return mu(s,function(Dt,Vt,oe){c(G,Dt,v(Dt),oe)}),G}function _l(s,c){return s&&Ui(c,Fs(c),s)}function rh(s,c){return s&&Ui(c,Ws(c),s)}function nu(s,c,v){c=="__proto__"&&at?at(s,c,{configurable:!0,enumerable:!0,value:v,writable:!0}):s[c]=v}function xa(s,c){for(var v=-1,G=c.length,Dt=Ie(G),Vt=s==null;++v<G;)Dt[v]=Vt?n:cl(s,c[v]);return Dt}function Nu(s,c,v){return s===s&&(v!==n&&(s=s<=v?s:v),c!==n&&(s=s>=c?s:c)),s}function hi(s,c,v,G,Dt,Vt){var oe,he=c&o,Fe=c&M,qe=c&W;if(v&&(oe=Dt?v(s,G,Dt,Vt):v(s)),oe!==n)return oe;if(!Zn(s))return s;var Ke=Hr(s);if(Ke){if(oe=Yh(s),!he)return Gs(s,oe)}else{var Ye=ks(s),ar=Ye==Dr||Ye==Q;if(Fu(s))return tc(s,he);if(Ye==ye||Ye==Ae||ar&&!Dt){if(oe=Fe||ar?{}:wc(s),!he)return Fe?Ph(s,rh(oe,s)):Oh(s,_l(oe,s))}else{if(!Bn[Ye])return Dt?s:{};oe=Xh(s,Ye,he)}}Vt||(Vt=new wi);var Cr=Vt.get(s);if(Cr)return Cr;Vt.set(s,oe),np(s)?s.forEach(function(kr){oe.add(hi(kr,c,v,kr,s,Vt))}):ep(s)&&s.forEach(function(kr,rn){oe.set(rn,hi(kr,c,v,rn,s,Vt))});var $r=qe?Fe?Wa:Ja:Fe?Ws:Fs,Jr=Ke?n:$r(s);return Ge(Jr||s,function(kr,rn){Jr&&(rn=kr,kr=s[rn]),Io(oe,rn,hi(kr,c,v,rn,s,Vt))}),oe}function nh(s){var c=Fs(s);return function(v){return Bl(v,s,c)}}function Bl(s,c,v){var G=v.length;if(s==null)return!G;for(s=Fn(s);G--;){var Dt=v[G],Vt=c[Dt],oe=s[Dt];if(oe===n&&!(Dt in s)||!Vt(oe))return!1}return!0}function Sl(s,c,v){if(typeof s!="function")throw new Oe(g);return Mo(function(){s.apply(n,v)},c)}function Ro(s,c,v,G){var Dt=-1,Vt=Ei,oe=!0,he=s.length,Fe=[],qe=c.length;if(!he)return Fe;v&&(c=Pn(c,$e(v))),G?(Vt=cs,oe=!1):c.length>=u&&(Vt=$i,oe=!1,c=new Tu(c));t:for(;++Dt<he;){var Ke=s[Dt],Ye=v==null?Ke:v(Ke);if(Ke=G||Ke!==0?Ke:0,oe&&Ye===Ye){for(var ar=qe;ar--;)if(c[ar]===Ye)continue t;Fe.push(Ke)}else Vt(c,Ye,G)||Fe.push(Ke)}return Fe}var mu=oc(ji),Il=oc(Ba,!0);function sh(s,c){var v=!0;return mu(s,function(G,Dt,Vt){return v=!!c(G,Dt,Vt),v}),v}function Wo(s,c,v){for(var G=-1,Dt=s.length;++G<Dt;){var Vt=s[G],oe=c(Vt);if(oe!=null&&(he===n?oe===oe&&!si(oe):v(oe,he)))var he=oe,Fe=Vt}return Fe}function ih(s,c,v,G){var Dt=s.length;for(v=zr(v),v<0&&(v=-v>Dt?0:Dt+v),G=G===n||G>Dt?Dt:zr(G),G<0&&(G+=Dt),G=v>G?0:up(G);v<G;)s[v++]=c;return s}function Rl(s,c){var v=[];return mu(s,function(G,Dt,Vt){c(G,Dt,Vt)&&v.push(G)}),v}function Bs(s,c,v,G,Dt){var Vt=-1,oe=s.length;for(v||(v=Qh),Dt||(Dt=[]);++Vt<oe;){var he=s[Vt];c>0&&v(he)?c>1?Bs(he,c-1,v,G,Dt):li(Dt,he):G||(Dt[Dt.length]=he)}return Dt}var _a=ac(),$l=ac(!0);function ji(s,c){return s&&_a(s,c,Fs)}function Ba(s,c){return s&&$l(s,c,Fs)}function Yo(s,c){return Zs(c,function(v){return ou(s[v])})}function ju(s,c){c=vu(c,s);for(var v=0,G=c.length;s!=null&&v<G;)s=s[Li(c[v++])];return v&&v==G?s:n}function kl(s,c,v){var G=c(s);return Hr(s)?G:li(G,v(s))}function Hs(s){return s==null?s===n?Lr:se:T&&T in Fn(s)?Gh(s):p0(s)}function Sa(s,c){return s>c}function uh(s,c){return s!=null&&nr.call(s,c)}function oh(s,c){return s!=null&&c in Fn(s)}function ah(s,c,v){return s>=_t(c,v)&&s<z(c,v)}function Ia(s,c,v){for(var G=v?cs:Ei,Dt=s[0].length,Vt=s.length,oe=Vt,he=Ie(Vt),Fe=1/0,qe=[];oe--;){var Ke=s[oe];oe&&c&&(Ke=Pn(Ke,$e(c))),Fe=_t(Ke.length,Fe),he[oe]=!v&&(c||Dt>=120&&Ke.length>=120)?new Tu(oe&&Ke):n}Ke=s[0];var Ye=-1,ar=he[0];t:for(;++Ye<Dt&&qe.length<Fe;){var Cr=Ke[Ye],$r=c?c(Cr):Cr;if(Cr=v||Cr!==0?Cr:0,!(ar?$i(ar,$r):G(qe,$r,v))){for(oe=Vt;--oe;){var Jr=he[oe];if(!(Jr?$i(Jr,$r):G(s[oe],$r,v)))continue t}ar&&ar.push($r),qe.push(Cr)}}return qe}function lh(s,c,v,G){return ji(s,function(Dt,Vt,oe){c(G,v(Dt),Vt,oe)}),G}function $o(s,c,v){c=vu(c,s),s=xc(s,c);var G=s==null?s:s[Li(di(c))];return G==null?n:bs(G,s,v)}function Ol(s){return es(s)&&Hs(s)==Ae}function ch(s){return es(s)&&Hs(s)==f}function ph(s){return es(s)&&Hs(s)==Ze}function Oo(s,c,v,G,Dt){return s===c?!0:s==null||c==null||!es(s)&&!es(c)?s!==s&&c!==c:hh(s,c,v,G,Oo,Dt)}function hh(s,c,v,G,Dt,Vt){var oe=Hr(s),he=Hr(c),Fe=oe?xe:ks(s),qe=he?xe:ks(c);Fe=Fe==Ae?ye:Fe,qe=qe==Ae?ye:qe;var Ke=Fe==ye,Ye=qe==ye,ar=Fe==qe;if(ar&&Fu(s)){if(!Fu(c))return!1;oe=!0,Ke=!1}if(ar&&!Ke)return Vt||(Vt=new wi),oe||mo(s)?vc(s,c,v,G,Dt,Vt):qh(s,c,Fe,v,G,Dt,Vt);if(!(v&w)){var Cr=Ke&&nr.call(s,"__wrapped__"),$r=Ye&&nr.call(c,"__wrapped__");if(Cr||$r){var Jr=Cr?s.value():s,kr=$r?c.value():c;return Vt||(Vt=new wi),Dt(Jr,kr,v,G,Vt)}}return ar?(Vt||(Vt=new wi),zh(s,c,v,G,Dt,Vt)):!1}function fh(s){return es(s)&&ks(s)==k}function Ra(s,c,v,G){var Dt=v.length,Vt=Dt,oe=!G;if(s==null)return!Vt;for(s=Fn(s);Dt--;){var he=v[Dt];if(oe&&he[2]?he[1]!==s[he[0]]:!(he[0]in s))return!1}for(;++Dt<Vt;){he=v[Dt];var Fe=he[0],qe=s[Fe],Ke=he[1];if(oe&&he[2]){if(qe===n&&!(Fe in s))return!1}else{var Ye=new wi;if(G)var ar=G(qe,Ke,Fe,s,c,Ye);if(!(ar===n?Oo(Ke,qe,w|U,G,Ye):ar))return!1}}return!0}function Pl(s){if(!Zn(s)||e0(s))return!1;var c=ou(s)?b:ln;return c.test(Lu(s))}function dh(s){return es(s)&&Hs(s)==mr}function gh(s){return es(s)&&ks(s)==ur}function mh(s){return es(s)&&va(s.length)&&!!Rn[Hs(s)]}function Tl(s){return typeof s=="function"?s:s==null?Ys:typeof s=="object"?Hr(s)?Ul(s[0],s[1]):jl(s):yp(s)}function $a(s){if(!No(s))return st(s);var c=[];for(var v in Fn(s))nr.call(s,v)&&v!="constructor"&&c.push(v);return c}function yh(s){if(!Zn(s))return c0(s);var c=No(s),v=[];for(var G in s)G=="constructor"&&(c||!nr.call(s,G))||v.push(G);return v}function ka(s,c){return s<c}function Nl(s,c){var v=-1,G=Js(s)?Ie(s.length):[];return mu(s,function(Dt,Vt,oe){G[++v]=c(Dt,Vt,oe)}),G}function jl(s){var c=Xa(s);return c.length==1&&c[0][2]?Cc(c[0][0],c[0][1]):function(v){return v===s||Ra(v,s,c)}}function Ul(s,c){return Qa(s)&&bc(c)?Cc(Li(s),c):function(v){var G=cl(v,s);return G===n&&G===c?fl(v,s):Oo(c,G,w|U)}}function Xo(s,c,v,G,Dt){s!==c&&_a(c,function(Vt,oe){if(Dt||(Dt=new wi),Zn(Vt))Eh(s,c,oe,v,Xo,G,Dt);else{var he=G?G(rl(s,oe),Vt,oe+"",s,c,Dt):n;he===n&&(he=Vt),Da(s,oe,he)}},Ws)}function Eh(s,c,v,G,Dt,Vt,oe){var he=rl(s,v),Fe=rl(c,v),qe=oe.get(Fe);if(qe){Da(s,v,qe);return}var Ke=Vt?Vt(he,Fe,v+"",s,c,oe):n,Ye=Ke===n;if(Ye){var ar=Hr(Fe),Cr=!ar&&Fu(Fe),$r=!ar&&!Cr&&mo(Fe);Ke=Fe,ar||Cr||$r?Hr(he)?Ke=he:ss(he)?Ke=Gs(he):Cr?(Ye=!1,Ke=tc(Fe,!0)):$r?(Ye=!1,Ke=ec(Fe,!0)):Ke=[]:qo(Fe)||Hu(Fe)?(Ke=he,Hu(he)?Ke=op(he):(!Zn(he)||ou(he))&&(Ke=wc(Fe))):Ye=!1}Ye&&(oe.set(Fe,Ke),Dt(Ke,Fe,G,Vt,oe),oe.delete(Fe)),Da(s,v,Ke)}function Ll(s,c){var v=s.length;if(v)return c+=c<0?v:0,uu(c,v)?s[c]:n}function Hl(s,c,v){c.length?c=Pn(c,function(Vt){return Hr(Vt)?function(oe){return ju(oe,Vt.length===1?Vt[0]:Vt)}:Vt}):c=[Ys];var G=-1;c=Pn(c,$e(Ir()));var Dt=Nl(s,function(Vt,oe,he){var Fe=Pn(c,function(qe){return qe(Vt)});return{criteria:Fe,index:++G,value:Vt}});return _u(Dt,function(Vt,oe){return $h(Vt,oe,v)})}function vh(s,c){return Ml(s,c,function(v,G){return fl(s,G)})}function Ml(s,c,v){for(var G=-1,Dt=c.length,Vt={};++G<Dt;){var oe=c[G],he=ju(s,oe);v(he,oe)&&Po(Vt,vu(oe,s),he)}return Vt}function Ah(s){return function(c){return ju(c,s)}}function Na(s,c,v,G){var Dt=G?xu:zi,Vt=-1,oe=c.length,he=s;for(s===c&&(c=Gs(c)),v&&(he=Pn(s,$e(v)));++Vt<oe;)for(var Fe=0,qe=c[Vt],Ke=v?v(qe):qe;(Fe=Dt(he,Ke,Fe,G))>-1;)he!==s&&P.call(he,Fe,1),P.call(s,Fe,1);return s}function Vl(s,c){for(var v=s?c.length:0,G=v-1;v--;){var Dt=c[v];if(v==G||Dt!==Vt){var Vt=Dt;uu(Dt)?P.call(s,Dt,1):Ha(s,Dt)}}return s}function ja(s,c){return s+Gt(ie()*(c-s+1))}function Fh(s,c,v,G){for(var Dt=-1,Vt=z(Wt((c-s)/(v||1)),0),oe=Ie(Vt);Vt--;)oe[G?Vt:++Dt]=s,s+=v;return oe}function Ua(s,c){var v="";if(!s||c<1||c>Le)return v;do c%2&&(v+=s),c=Gt(c/2),c&&(s+=s);while(c);return v}function Zr(s,c){return nl(Dc(s,c,Ys),s+"")}function wh(s){return xl(yo(s))}function bh(s,c){var v=yo(s);return pa(v,Nu(c,0,v.length))}function Po(s,c,v,G){if(!Zn(s))return s;c=vu(c,s);for(var Dt=-1,Vt=c.length,oe=Vt-1,he=s;he!=null&&++Dt<Vt;){var Fe=Li(c[Dt]),qe=v;if(Fe==="__proto__"||Fe==="constructor"||Fe==="prototype")return s;if(Dt!=oe){var Ke=he[Fe];qe=G?G(Ke,Fe,he):n,qe===n&&(qe=Zn(Ke)?Ke:uu(c[Dt+1])?[]:{})}Io(he,Fe,qe),he=he[Fe]}return s}var ql=xn?function(s,c){return xn.set(s,c),s}:Ys,Ch=at?function(s,c){return at(s,"toString",{configurable:!0,enumerable:!1,value:gl(c),writable:!0})}:Ys;function Dh(s){return pa(yo(s))}function fi(s,c,v){var G=-1,Dt=s.length;c<0&&(c=-c>Dt?0:Dt+c),v=v>Dt?Dt:v,v<0&&(v+=Dt),Dt=c>v?0:v-c>>>0,c>>>=0;for(var Vt=Ie(Dt);++G<Dt;)Vt[G]=s[G+c];return Vt}function xh(s,c){var v;return mu(s,function(G,Dt,Vt){return v=c(G,Dt,Vt),!v}),!!v}function Qo(s,c,v){var G=0,Dt=s==null?G:s.length;if(typeof c=="number"&&c===c&&Dt<=Je){for(;G<Dt;){var Vt=G+Dt>>>1,oe=s[Vt];oe!==null&&!si(oe)&&(v?oe<=c:oe<c)?G=Vt+1:Dt=Vt}return Dt}return La(s,c,Ys,v)}function La(s,c,v,G){var Dt=0,Vt=s==null?0:s.length;if(Vt===0)return 0;c=v(c);for(var oe=c!==c,he=c===null,Fe=si(c),qe=c===n;Dt<Vt;){var Ke=Gt((Dt+Vt)/2),Ye=v(s[Ke]),ar=Ye!==n,Cr=Ye===null,$r=Ye===Ye,Jr=si(Ye);if(oe)var kr=G||$r;else qe?kr=$r&&(G||ar):he?kr=$r&&ar&&(G||!Cr):Fe?kr=$r&&ar&&!Cr&&(G||!Jr):Cr||Jr?kr=!1:kr=G?Ye<=c:Ye<c;kr?Dt=Ke+1:Vt=Ke}return _t(Vt,Pe)}function Kl(s,c){for(var v=-1,G=s.length,Dt=0,Vt=[];++v<G;){var oe=s[v],he=c?c(oe):oe;if(!v||!bi(he,Fe)){var Fe=he;Vt[Dt++]=oe===0?0:oe}}return Vt}function zl(s){return typeof s=="number"?s:si(s)?He:+s}function ni(s){if(typeof s=="string")return s;if(Hr(s))return Pn(s,ni)+"";if(si(s))return Nn?Nn.call(s):"";var c=s+"";return c=="0"&&1/s==-ae?"-0":c}function yu(s,c,v){var G=-1,Dt=Ei,Vt=s.length,oe=!0,he=[],Fe=he;if(v)oe=!1,Dt=cs;else if(Vt>=u){var qe=c?null:Hh(s);if(qe)return Yi(qe);oe=!1,Dt=$i,Fe=new Tu}else Fe=c?[]:he;t:for(;++G<Vt;){var Ke=s[G],Ye=c?c(Ke):Ke;if(Ke=v||Ke!==0?Ke:0,oe&&Ye===Ye){for(var ar=Fe.length;ar--;)if(Fe[ar]===Ye)continue t;c&&Fe.push(Ye),he.push(Ke)}else Dt(Fe,Ye,v)||(Fe!==he&&Fe.push(Ye),he.push(Ke))}return he}function Ha(s,c){return c=vu(c,s),s=xc(s,c),s==null||delete s[Li(di(c))]}function Gl(s,c,v,G){return Po(s,c,v(ju(s,c)),G)}function ta(s,c,v,G){for(var Dt=s.length,Vt=G?Dt:-1;(G?Vt--:++Vt<Dt)&&c(s[Vt],Vt,s););return v?fi(s,G?0:Vt,G?Vt+1:Dt):fi(s,G?Vt+1:0,G?Dt:Vt)}function Jl(s,c){var v=s;return v instanceof Kr&&(v=v.value()),lt(c,function(G,Dt){return Dt.func.apply(Dt.thisArg,li([G],Dt.args))},v)}function Ma(s,c,v){var G=s.length;if(G<2)return G?yu(s[0]):[];for(var Dt=-1,Vt=Ie(G);++Dt<G;)for(var oe=s[Dt],he=-1;++he<G;)he!=Dt&&(Vt[Dt]=Ro(Vt[Dt]||oe,s[he],c,v));return yu(Bs(Vt,1),c,v)}function Wl(s,c,v){for(var G=-1,Dt=s.length,Vt=c.length,oe={};++G<Dt;){var he=G<Vt?c[G]:n;v(oe,s[G],he)}return oe}function Va(s){return ss(s)?s:[]}function qa(s){return typeof s=="function"?s:Ys}function vu(s,c){return Hr(s)?s:Qa(s,c)?[s]:Ic(Sn(s))}var _h=Zr;function Au(s,c,v){var G=s.length;return v=v===n?G:v,!c&&v>=G?s:fi(s,c,v)}var Xl=Y||function(s){return Qn.clearTimeout(s)};function tc(s,c){if(c)return s.slice();var v=s.length,G=L?L(v):new s.constructor(v);return s.copy(G),G}function Ka(s){var c=new s.constructor(s.byteLength);return new _(c).set(new _(s)),c}function Sh(s,c){var v=c?Ka(s.buffer):s.buffer;return new s.constructor(v,s.byteOffset,s.byteLength)}function Ih(s){var c=new s.constructor(s.source,or.exec(s));return c.lastIndex=s.lastIndex,c}function Rh(s){return Jn?Fn(Jn.call(s)):{}}function ec(s,c){var v=c?Ka(s.buffer):s.buffer;return new s.constructor(v,s.byteOffset,s.length)}function rc(s,c){if(s!==c){var v=s!==n,G=s===null,Dt=s===s,Vt=si(s),oe=c!==n,he=c===null,Fe=c===c,qe=si(c);if(!he&&!qe&&!Vt&&s>c||Vt&&oe&&Fe&&!he&&!qe||G&&oe&&Fe||!v&&Fe||!Dt)return 1;if(!G&&!Vt&&!qe&&s<c||qe&&v&&Dt&&!G&&!Vt||he&&v&&Dt||!oe&&Dt||!Fe)return-1}return 0}function $h(s,c,v){for(var G=-1,Dt=s.criteria,Vt=c.criteria,oe=Dt.length,he=v.length;++G<oe;){var Fe=rc(Dt[G],Vt[G]);if(Fe){if(G>=he)return Fe;var qe=v[G];return Fe*(qe=="desc"?-1:1)}}return s.index-c.index}function nc(s,c,v,G){for(var Dt=-1,Vt=s.length,oe=v.length,he=-1,Fe=c.length,qe=z(Vt-oe,0),Ke=Ie(Fe+qe),Ye=!G;++he<Fe;)Ke[he]=c[he];for(;++Dt<oe;)(Ye||Dt<Vt)&&(Ke[v[Dt]]=s[Dt]);for(;qe--;)Ke[he++]=s[Dt++];return Ke}function uc(s,c,v,G){for(var Dt=-1,Vt=s.length,oe=-1,he=v.length,Fe=-1,qe=c.length,Ke=z(Vt-he,0),Ye=Ie(Ke+qe),ar=!G;++Dt<Ke;)Ye[Dt]=s[Dt];for(var Cr=Dt;++Fe<qe;)Ye[Cr+Fe]=c[Fe];for(;++oe<he;)(ar||Dt<Vt)&&(Ye[Cr+v[oe]]=s[Dt++]);return Ye}function Gs(s,c){var v=-1,G=s.length;for(c||(c=Ie(G));++v<G;)c[v]=s[v];return c}function Ui(s,c,v,G){var Dt=!v;v||(v={});for(var Vt=-1,oe=c.length;++Vt<oe;){var he=c[Vt],Fe=G?G(v[he],s[he],he,v,s):n;Fe===n&&(Fe=s[he]),Dt?nu(v,he,Fe):Io(v,he,Fe)}return v}function Oh(s,c){return Ui(s,Za(s),c)}function Ph(s,c){return Ui(s,Ac(s),c)}function ea(s,c){return function(v,G){var Dt=Hr(v)?so:eh,Vt=c?c():{};return Dt(v,s,Ir(G,2),Vt)}}function co(s){return Zr(function(c,v){var G=-1,Dt=v.length,Vt=Dt>1?v[Dt-1]:n,oe=Dt>2?v[2]:n;for(Vt=s.length>3&&typeof Vt=="function"?(Dt--,Vt):n,oe&&Ms(v[0],v[1],oe)&&(Vt=Dt<3?n:Vt,Dt=1),c=Fn(c);++G<Dt;){var he=v[G];he&&s(c,he,G,Vt)}return c})}function oc(s,c){return function(v,G){if(v==null)return v;if(!Js(v))return s(v,G);for(var Dt=v.length,Vt=c?Dt:-1,oe=Fn(v);(c?Vt--:++Vt<Dt)&&G(oe[Vt],Vt,oe)!==!1;);return v}}function ac(s){return function(c,v,G){for(var Dt=-1,Vt=Fn(c),oe=G(c),he=oe.length;he--;){var Fe=oe[s?he:++Dt];if(v(Vt[Fe],Fe,Vt)===!1)break}return c}}function jh(s,c,v){var G=c&nt,Dt=To(s);function Vt(){var oe=this&&this!==Qn&&this instanceof Vt?Dt:s;return oe.apply(G?v:this,arguments)}return Vt}function lc(s){return function(c){c=Sn(c);var v=Qs(c)?Tn(c):n,G=v?v[0]:c.charAt(0),Dt=v?Au(v,1).join(""):c.slice(1);return G[s]()+Dt}}function po(s){return function(c){return lt(gp(dp(c).replace(Si,"")),s,"")}}function To(s){return function(){var c=arguments;switch(c.length){case 0:return new s;case 1:return new s(c[0]);case 2:return new s(c[0],c[1]);case 3:return new s(c[0],c[1],c[2]);case 4:return new s(c[0],c[1],c[2],c[3]);case 5:return new s(c[0],c[1],c[2],c[3],c[4]);case 6:return new s(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new s(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var v=ps(s.prototype),G=s.apply(v,c);return Zn(G)?G:v}}function Uh(s,c,v){var G=To(s);function Dt(){for(var Vt=arguments.length,oe=Ie(Vt),he=Vt,Fe=go(Dt);he--;)oe[he]=arguments[he];var qe=Vt<3&&oe[0]!==Fe&&oe[Vt-1]!==Fe?[]:Rs(oe,Fe);if(Vt-=qe.length,Vt<v)return dc(s,c,na,Dt.placeholder,n,oe,qe,n,n,v-Vt);var Ke=this&&this!==Qn&&this instanceof Dt?G:s;return bs(Ke,this,oe)}return Dt}function cc(s){return function(c,v,G){var Dt=Fn(c);if(!Js(c)){var Vt=Ir(v,3);c=Fs(c),v=function(he){return Vt(Dt[he],he,Dt)}}var oe=s(c,v,G);return oe>-1?Dt[Vt?c[oe]:oe]:n}}function pc(s){return iu(function(c){var v=c.length,G=v,Dt=Un.prototype.thru;for(s&&c.reverse();G--;){var Vt=c[G];if(typeof Vt!="function")throw new Oe(g);if(Dt&&!oe&&la(Vt)=="wrapper")var oe=new Un([],!0)}for(G=oe?G:v;++G<v;){Vt=c[G];var he=la(Vt),Fe=he=="wrapper"?Ya(Vt):n;Fe&&tl(Fe[0])&&Fe[1]==(q|it|K|pt)&&!Fe[4].length&&Fe[9]==1?oe=oe[la(Fe[0])].apply(oe,Fe[3]):oe=Vt.length==1&&tl(Vt)?oe[he]():oe.thru(Vt)}return function(){var qe=arguments,Ke=qe[0];if(oe&&qe.length==1&&Hr(Ke))return oe.plant(Ke).value();for(var Ye=0,ar=v?c[Ye].apply(this,qe):Ke;++Ye<v;)ar=c[Ye].call(this,ar);return ar}})}function na(s,c,v,G,Dt,Vt,oe,he,Fe,qe){var Ke=c&q,Ye=c&nt,ar=c&X,Cr=c&(it|ot),$r=c&yt,Jr=ar?n:To(s);function kr(){for(var rn=arguments.length,dn=Ie(rn),ii=rn;ii--;)dn[ii]=arguments[ii];if(Cr)var Vs=go(kr),oi=$u(dn,Vs);if(G&&(dn=nc(dn,G,Dt,Cr)),Vt&&(dn=uc(dn,Vt,oe,Cr)),rn-=oi,Cr&&rn<qe){var us=Rs(dn,Vs);return dc(s,c,na,kr.placeholder,v,dn,us,he,Fe,qe-rn)}var Ci=Ye?v:this,lu=ar?Ci[s]:s;return rn=dn.length,he?dn=h0(dn,he):$r&&rn>1&&dn.reverse(),Ke&&Fe<rn&&(dn.length=Fe),this&&this!==Qn&&this instanceof kr&&(lu=Jr||To(lu)),lu.apply(Ci,dn)}return kr}function hc(s,c){return function(v,G){return lh(v,s,c(G),{})}}function sa(s,c){return function(v,G){var Dt;if(v===n&&G===n)return c;if(v!==n&&(Dt=v),G!==n){if(Dt===n)return G;typeof v=="string"||typeof G=="string"?(v=ni(v),G=ni(G)):(v=zl(v),G=zl(G)),Dt=s(v,G)}return Dt}}function za(s){return iu(function(c){return c=Pn(c,$e(Ir())),Zr(function(v){var G=this;return s(c,function(Dt){return bs(Dt,G,v)})})})}function ia(s,c){c=c===n?" ":ni(c);var v=c.length;if(v<2)return v?Ua(c,s):c;var G=Ua(c,Wt(s/ti(c)));return Qs(c)?Au(Tn(G),0,s).join(""):G.slice(0,s)}function Lh(s,c,v,G){var Dt=c&nt,Vt=To(s);function oe(){for(var he=-1,Fe=arguments.length,qe=-1,Ke=G.length,Ye=Ie(Ke+Fe),ar=this&&this!==Qn&&this instanceof oe?Vt:s;++qe<Ke;)Ye[qe]=G[qe];for(;Fe--;)Ye[qe++]=arguments[++he];return bs(ar,Dt?v:this,Ye)}return oe}function fc(s){return function(c,v,G){return G&&typeof G!="number"&&Ms(c,v,G)&&(v=G=n),c=au(c),v===n?(v=c,c=0):v=au(v),G=G===n?c<v?1:-1:au(G),Fh(c,v,G,s)}}function aa(s){return function(c,v){return typeof c=="string"&&typeof v=="string"||(c=gi(c),v=gi(v)),s(c,v)}}function dc(s,c,v,G,Dt,Vt,oe,he,Fe,qe){var Ke=c&it,Ye=Ke?oe:n,ar=Ke?n:oe,Cr=Ke?Vt:n,$r=Ke?n:Vt;c|=Ke?K:H,c&=~(Ke?H:K),c&j||(c&=~(nt|X));var Jr=[s,c,Dt,Cr,Ye,$r,ar,he,Fe,qe],kr=v.apply(n,Jr);return tl(s)&&_c(kr,Jr),kr.placeholder=G,Bc(kr,s,c)}function Ga(s){var c=Gn[s];return function(v,G){if(v=gi(v),G=G==null?0:_t(zr(G),292),G&&d(v)){var Dt=(Sn(v)+"e").split("e"),Vt=c(Dt[0]+"e"+(+Dt[1]+G));return Dt=(Sn(Vt)+"e").split("e"),+(Dt[0]+"e"+(+Dt[1]-G))}return c(v)}}var Hh=Fr&&1/Yi(new Fr([,-0]))[1]==ae?function(s){return new Fr(s)}:Al;function gc(s){return function(c){var v=ks(c);return v==k?vi(c):v==ur?du(c):Iu(c,s(c))}}function su(s,c,v,G,Dt,Vt,oe,he){var Fe=c&X;if(!Fe&&typeof s!="function")throw new Oe(g);var qe=G?G.length:0;if(qe||(c&=~(K|H),G=Dt=n),oe=oe===n?oe:z(zr(oe),0),he=he===n?he:zr(he),qe-=Dt?Dt.length:0,c&H){var Ke=G,Ye=Dt;G=Dt=n}var ar=Fe?n:Ya(s),Cr=[s,c,v,G,Dt,Ke,Ye,Vt,oe,he];if(ar&&o0(Cr,ar),s=Cr[0],c=Cr[1],v=Cr[2],G=Cr[3],Dt=Cr[4],he=Cr[9]=Cr[9]===n?Fe?0:s.length:z(Cr[9]-qe,0),!he&&c&(it|ot)&&(c&=~(it|ot)),!c||c==nt)var $r=jh(s,c,v);else c==it||c==ot?$r=Uh(s,c,he):(c==K||c==(nt|K))&&!Dt.length?$r=Lh(s,c,v,G):$r=na.apply(n,Cr);var Jr=ar?ql:_c;return Bc(Jr($r,Cr),s,c)}function mc(s,c,v,G){return s===n||bi(s,ri[v])&&!nr.call(G,v)?c:s}function yc(s,c,v,G,Dt,Vt){return Zn(s)&&Zn(c)&&(Vt.set(c,s),Xo(s,c,n,yc,Vt),Vt.delete(c)),s}function Mh(s){return qo(s)?n:s}function vc(s,c,v,G,Dt,Vt){var oe=v&w,he=s.length,Fe=c.length;if(he!=Fe&&!(oe&&Fe>he))return!1;var qe=Vt.get(s),Ke=Vt.get(c);if(qe&&Ke)return qe==c&&Ke==s;var Ye=-1,ar=!0,Cr=v&U?new Tu:n;for(Vt.set(s,c),Vt.set(c,s);++Ye<he;){var $r=s[Ye],Jr=c[Ye];if(G)var kr=oe?G(Jr,$r,Ye,c,s,Vt):G($r,Jr,Ye,s,c,Vt);if(kr!==n){if(kr)continue;ar=!1;break}if(Cr){if(!Ks(c,function(rn,dn){if(!$i(Cr,dn)&&($r===rn||Dt($r,rn,v,G,Vt)))return Cr.push(dn)})){ar=!1;break}}else if(!($r===Jr||Dt($r,Jr,v,G,Vt))){ar=!1;break}}return Vt.delete(s),Vt.delete(c),ar}function qh(s,c,v,G,Dt,Vt,oe){switch(v){case B:if(s.byteLength!=c.byteLength||s.byteOffset!=c.byteOffset)return!1;s=s.buffer,c=c.buffer;case f:return!(s.byteLength!=c.byteLength||!Vt(new _(s),new _(c)));case Ve:case Ze:case Z:return bi(+s,+c);case Pr:return s.name==c.name&&s.message==c.message;case mr:case er:return s==c+"";case k:var he=vi;case ur:var Fe=G&w;if(he||(he=Yi),s.size!=c.size&&!Fe)return!1;var qe=oe.get(s);if(qe)return qe==c;G|=U,oe.set(s,c);var Ke=vc(he(s),he(c),G,Dt,Vt,oe);return oe.delete(s),Ke;case Gr:if(Jn)return Jn.call(s)==Jn.call(c)}return!1}function zh(s,c,v,G,Dt,Vt){var oe=v&w,he=Ja(s),Fe=he.length,qe=Ja(c),Ke=qe.length;if(Fe!=Ke&&!oe)return!1;for(var Ye=Fe;Ye--;){var ar=he[Ye];if(!(oe?ar in c:nr.call(c,ar)))return!1}var Cr=Vt.get(s),$r=Vt.get(c);if(Cr&&$r)return Cr==c&&$r==s;var Jr=!0;Vt.set(s,c),Vt.set(c,s);for(var kr=oe;++Ye<Fe;){ar=he[Ye];var rn=s[ar],dn=c[ar];if(G)var ii=oe?G(dn,rn,ar,c,s,Vt):G(rn,dn,ar,s,c,Vt);if(!(ii===n?rn===dn||Dt(rn,dn,v,G,Vt):ii)){Jr=!1;break}kr||(kr=ar=="constructor")}if(Jr&&!kr){var Vs=s.constructor,oi=c.constructor;Vs!=oi&&"constructor"in s&&"constructor"in c&&!(typeof Vs=="function"&&Vs instanceof Vs&&typeof oi=="function"&&oi instanceof oi)&&(Jr=!1)}return Vt.delete(s),Vt.delete(c),Jr}function iu(s){return nl(Dc(s,n,Oc),s+"")}function Ja(s){return kl(s,Fs,Za)}function Wa(s){return kl(s,Ws,Ac)}var Ya=xn?function(s){return xn.get(s)}:Al;function la(s){for(var c=s.name+"",v=pn[c],G=nr.call(pn,c)?v.length:0;G--;){var Dt=v[G],Vt=Dt.func;if(Vt==null||Vt==s)return Dt.name}return c}function go(s){var c=nr.call(kt,"placeholder")?kt:s;return c.placeholder}function Ir(){var s=kt.iteratee||ml;return s=s===ml?Tl:s,arguments.length?s(arguments[0],arguments[1]):s}function ca(s,c){var v=s.__data__;return t0(c)?v[typeof c=="string"?"string":"hash"]:v.map}function Xa(s){for(var c=Fs(s),v=c.length;v--;){var G=c[v],Dt=s[G];c[v]=[G,Dt,bc(Dt)]}return c}function Uu(s,c){var v=_o(s,c);return Pl(v)?v:n}function Gh(s){var c=nr.call(s,T),v=s[T];try{s[T]=n;var G=!0}catch{}var Dt=l.call(s);return G&&(c?s[T]=v:delete s[T]),Dt}var Za=ve?function(s){return s==null?[]:(s=Fn(s),Zs(ve(s),function(c){return gt.call(s,c)}))}:Fl,Ac=ve?function(s){for(var c=[];s;)li(c,Za(s)),s=V(s);return c}:Fl,ks=Hs;(Se&&ks(new Se(new ArrayBuffer(1)))!=B||wr&&ks(new wr)!=k||xr&&ks(xr.resolve())!=rr||Fr&&ks(new Fr)!=ur||qr&&ks(new qr)!=Br)&&(ks=function(s){var c=Hs(s),v=c==ye?s.constructor:n,G=v?Lu(v):"";if(G)switch(G){case Fi:return B;case js:return k;case Es:return rr;case Cs:return ur;case $s:return Br}return c});function Jh(s,c,v){for(var G=-1,Dt=v.length;++G<Dt;){var Vt=v[G],oe=Vt.size;switch(Vt.type){case"drop":s+=oe;break;case"dropRight":c-=oe;break;case"take":c=_t(c,s+oe);break;case"takeRight":s=z(s,c-oe);break}}return{start:s,end:c}}function Wh(s){var c=s.match(Re);return c?c[1].split(De):[]}function Fc(s,c,v){c=vu(c,s);for(var G=-1,Dt=c.length,Vt=!1;++G<Dt;){var oe=Li(c[G]);if(!(Vt=s!=null&&v(s,oe)))break;s=s[oe]}return Vt||++G!=Dt?Vt:(Dt=s==null?0:s.length,!!Dt&&va(Dt)&&uu(oe,Dt)&&(Hr(s)||Hu(s)))}function Yh(s){var c=s.length,v=new s.constructor(c);return c&&typeof s[0]=="string"&&nr.call(s,"index")&&(v.index=s.index,v.input=s.input),v}function wc(s){return typeof s.constructor=="function"&&!No(s)?ps(V(s)):{}}function Xh(s,c,v){var G=s.constructor;switch(c){case f:return Ka(s);case Ve:case Ze:return new G(+s);case B:return Sh(s,v);case J:case St:case Pt:case et:case zt:case Ut:case _e:case xt:case dt:return ec(s,v);case k:return new G;case Z:case er:return new G(s);case mr:return Ih(s);case ur:return new G;case Gr:return Rh(s)}}function Zh(s,c){var v=c.length;if(!v)return s;var G=v-1;return c[G]=(v>1?"& ":"")+c[G],c=c.join(v>2?", ":" "),s.replace(re,`{
/* [wrapped with `+c+`] */
`)}function Qh(s){return Hr(s)||Hu(s)||!!(I&&s&&s[I])}function uu(s,c){var v=typeof s;return c=c??Le,!!c&&(v=="number"||v!="symbol"&&Vr.test(s))&&s>-1&&s%1==0&&s<c}function Ms(s,c,v){if(!Zn(v))return!1;var G=typeof c;return(G=="number"?Js(v)&&uu(c,v.length):G=="string"&&c in v)?bi(v[c],s):!1}function Qa(s,c){if(Hr(s))return!1;var v=typeof s;return v=="number"||v=="symbol"||v=="boolean"||s==null||si(s)?!0:sr.test(s)||!Be.test(s)||c!=null&&s in Fn(c)}function t0(s){var c=typeof s;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?s!=="__proto__":s===null}function tl(s){var c=la(s),v=kt[c];if(typeof v!="function"||!(c in Kr.prototype))return!1;if(s===v)return!0;var G=Ya(v);return!!G&&s===G[0]}function e0(s){return!!e&&e in s}var r0=Qi?ou:wl;function No(s){var c=s&&s.constructor,v=typeof c=="function"&&c.prototype||ri;return s===v}function bc(s){return s===s&&!Zn(s)}function Cc(s,c){return function(v){return v==null?!1:v[s]===c&&(c!==n||s in Fn(v))}}function u0(s){var c=ma(s,function(G){return v.size===y&&v.clear(),G}),v=c.cache;return c}function o0(s,c){var v=s[1],G=c[1],Dt=v|G,Vt=Dt<(nt|X|q),oe=G==q&&v==it||G==q&&v==pt&&s[7].length<=c[8]||G==(q|pt)&&c[7].length<=c[8]&&v==it;if(!(Vt||oe))return s;G&nt&&(s[2]=c[2],Dt|=v&nt?0:j);var he=c[3];if(he){var Fe=s[3];s[3]=Fe?nc(Fe,he,c[4]):he,s[4]=Fe?Rs(s[3],D):c[4]}return he=c[5],he&&(Fe=s[5],s[5]=Fe?uc(Fe,he,c[6]):he,s[6]=Fe?Rs(s[5],D):c[6]),he=c[7],he&&(s[7]=he),G&q&&(s[8]=s[8]==null?c[8]:_t(s[8],c[8])),s[9]==null&&(s[9]=c[9]),s[0]=c[0],s[1]=Dt,s}function c0(s){var c=[];if(s!=null)for(var v in Fn(s))c.push(v);return c}function p0(s){return l.call(s)}function Dc(s,c,v){return c=z(c===n?s.length-1:c,0),function(){for(var G=arguments,Dt=-1,Vt=z(G.length-c,0),oe=Ie(Vt);++Dt<Vt;)oe[Dt]=G[c+Dt];Dt=-1;for(var he=Ie(c+1);++Dt<c;)he[Dt]=G[Dt];return he[c]=v(oe),bs(s,this,he)}}function xc(s,c){return c.length<2?s:ju(s,fi(c,0,-1))}function h0(s,c){for(var v=s.length,G=_t(c.length,v),Dt=Gs(s);G--;){var Vt=c[G];s[G]=uu(Vt,v)?Dt[Vt]:n}return s}function rl(s,c){if(!(c==="constructor"&&typeof s[c]=="function")&&c!="__proto__")return s[c]}var _c=Sc(ql),Mo=Tt||function(s,c){return Qn.setTimeout(s,c)},nl=Sc(Ch);function Bc(s,c,v){var G=c+"";return nl(s,Zh(G,f0(Wh(G),v)))}function Sc(s){var c=0,v=0;return function(){var G=Mt(),Dt=Ft-(G-v);if(v=G,Dt>0){if(++c>=vt)return arguments[0]}else c=0;return s.apply(n,arguments)}}function pa(s,c){var v=-1,G=s.length,Dt=G-1;for(c=c===n?G:c;++v<c;){var Vt=ja(v,Dt),oe=s[Vt];s[Vt]=s[v],s[v]=oe}return s.length=c,s}var Ic=u0(function(s){var c=[];return s.charCodeAt(0)===46&&c.push(""),s.replace(O,function(v,G,Dt,Vt){c.push(Dt?Vt.replace(tr,"$1"):G||v)}),c});function Li(s){if(typeof s=="string"||si(s))return s;var c=s+"";return c=="0"&&1/s==-ae?"-0":c}function Lu(s){if(s!=null){try{return Oi.call(s)}catch{}try{return s+""}catch{}}return""}function f0(s,c){return Ge(Xe,function(v){var G="_."+v[0];c&v[1]&&!Ei(s,G)&&s.push(G)}),s.sort()}function Rc(s){if(s instanceof Kr)return s.clone();var c=new Un(s.__wrapped__,s.__chain__);return c.__actions__=Gs(s.__actions__),c.__index__=s.__index__,c.__values__=s.__values__,c}function d0(s,c,v){(v?Ms(s,c,v):c===n)?c=1:c=z(zr(c),0);var G=s==null?0:s.length;if(!G||c<1)return[];for(var Dt=0,Vt=0,oe=Ie(Wt(G/c));Dt<G;)oe[Vt++]=fi(s,Dt,Dt+=c);return oe}function g0(s){for(var c=-1,v=s==null?0:s.length,G=0,Dt=[];++c<v;){var Vt=s[c];Vt&&(Dt[G++]=Vt)}return Dt}function m0(){var s=arguments.length;if(!s)return[];for(var c=Ie(s-1),v=arguments[0],G=s;G--;)c[G-1]=arguments[G];return li(Hr(v)?Gs(v):[v],Bs(c,1))}var y0=Zr(function(s,c){return ss(s)?Ro(s,Bs(c,1,ss,!0)):[]}),E0=Zr(function(s,c){var v=di(c);return ss(v)&&(v=n),ss(s)?Ro(s,Bs(c,1,ss,!0),Ir(v,2)):[]}),v0=Zr(function(s,c){var v=di(c);return ss(v)&&(v=n),ss(s)?Ro(s,Bs(c,1,ss,!0),n,v):[]});function A0(s,c,v){var G=s==null?0:s.length;return G?(c=v||c===n?1:zr(c),fi(s,c<0?0:c,G)):[]}function F0(s,c,v){var G=s==null?0:s.length;return G?(c=v||c===n?1:zr(c),c=G-c,fi(s,0,c<0?0:c)):[]}function w0(s,c){return s&&s.length?ta(s,Ir(c,3),!0,!0):[]}function b0(s,c){return s&&s.length?ta(s,Ir(c,3),!0):[]}function C0(s,c,v,G){var Dt=s==null?0:s.length;return Dt?(v&&typeof v!="number"&&Ms(s,c,v)&&(v=0,G=Dt),ih(s,c,v,G)):[]}function $c(s,c,v){var G=s==null?0:s.length;if(!G)return-1;var Dt=v==null?0:zr(v);return Dt<0&&(Dt=z(G+Dt,0)),pu(s,Ir(c,3),Dt)}function kc(s,c,v){var G=s==null?0:s.length;if(!G)return-1;var Dt=G-1;return v!==n&&(Dt=zr(v),Dt=v<0?z(G+Dt,0):_t(Dt,G-1)),pu(s,Ir(c,3),Dt,!0)}function Oc(s){var c=s==null?0:s.length;return c?Bs(s,1):[]}function x0(s){var c=s==null?0:s.length;return c?Bs(s,ae):[]}function _0(s,c){var v=s==null?0:s.length;return v?(c=c===n?1:zr(c),Bs(s,c)):[]}function B0(s){for(var c=-1,v=s==null?0:s.length,G={};++c<v;){var Dt=s[c];G[Dt[0]]=Dt[1]}return G}function Pc(s){return s&&s.length?s[0]:n}function S0(s,c,v){var G=s==null?0:s.length;if(!G)return-1;var Dt=v==null?0:zr(v);return Dt<0&&(Dt=z(G+Dt,0)),zi(s,c,Dt)}function I0(s){var c=s==null?0:s.length;return c?fi(s,0,-1):[]}var R0=Zr(function(s){var c=Pn(s,Va);return c.length&&c[0]===s[0]?Ia(c):[]}),$0=Zr(function(s){var c=di(s),v=Pn(s,Va);return c===di(v)?c=n:v.pop(),v.length&&v[0]===s[0]?Ia(v,Ir(c,2)):[]}),O0=Zr(function(s){var c=di(s),v=Pn(s,Va);return c=typeof c=="function"?c:n,c&&v.pop(),v.length&&v[0]===s[0]?Ia(v,n,c):[]});function P0(s,c){return s==null?"":S.call(s,c)}function di(s){var c=s==null?0:s.length;return c?s[c-1]:n}function U0(s,c,v){var G=s==null?0:s.length;if(!G)return-1;var Dt=G;return v!==n&&(Dt=zr(v),Dt=Dt<0?z(G+Dt,0):_t(Dt,G-1)),c===c?Pu(s,c,Dt):pu(s,_r,Dt,!0)}function L0(s,c){return s&&s.length?Ll(s,zr(c)):n}var G0=Zr(Tc);function Tc(s,c){return s&&s.length&&c&&c.length?Na(s,c):s}function J0(s,c,v){return s&&s.length&&c&&c.length?Na(s,c,Ir(v,2)):s}function Y0(s,c,v){return s&&s.length&&c&&c.length?Na(s,c,n,v):s}var X0=iu(function(s,c){var v=s==null?0:s.length,G=xa(s,c);return Vl(s,Pn(c,function(Dt){return uu(Dt,v)?+Dt:Dt}).sort(rc)),G});function Z0(s,c){var v=[];if(!(s&&s.length))return v;var G=-1,Dt=[],Vt=s.length;for(c=Ir(c,3);++G<Vt;){var oe=s[G];c(oe,G,s)&&(v.push(oe),Dt.push(G))}return Vl(s,Dt),v}function sl(s){return s==null?s:ge.call(s)}function Q0(s,c,v){var G=s==null?0:s.length;return G?(v&&typeof v!="number"&&Ms(s,c,v)?(c=0,v=G):(c=c==null?0:zr(c),v=v===n?G:zr(v)),fi(s,c,v)):[]}function tf(s,c){return Qo(s,c)}function ef(s,c,v){return La(s,c,Ir(v,2))}function rf(s,c){var v=s==null?0:s.length;if(v){var G=Qo(s,c);if(G<v&&bi(s[G],c))return G}return-1}function nf(s,c){return Qo(s,c,!0)}function sf(s,c,v){return La(s,c,Ir(v,2),!0)}function uf(s,c){var v=s==null?0:s.length;if(v){var G=Qo(s,c,!0)-1;if(bi(s[G],c))return G}return-1}function of(s){return s&&s.length?Kl(s):[]}function af(s,c){return s&&s.length?Kl(s,Ir(c,2)):[]}function lf(s){var c=s==null?0:s.length;return c?fi(s,1,c):[]}function cf(s,c,v){return s&&s.length?(c=v||c===n?1:zr(c),fi(s,0,c<0?0:c)):[]}function pf(s,c,v){var G=s==null?0:s.length;return G?(c=v||c===n?1:zr(c),c=G-c,fi(s,c<0?0:c,G)):[]}function hf(s,c){return s&&s.length?ta(s,Ir(c,3),!1,!0):[]}function ff(s,c){return s&&s.length?ta(s,Ir(c,3)):[]}var df=Zr(function(s){return yu(Bs(s,1,ss,!0))}),gf=Zr(function(s){var c=di(s);return ss(c)&&(c=n),yu(Bs(s,1,ss,!0),Ir(c,2))}),mf=Zr(function(s){var c=di(s);return c=typeof c=="function"?c:n,yu(Bs(s,1,ss,!0),n,c)});function yf(s){return s&&s.length?yu(s):[]}function Ef(s,c){return s&&s.length?yu(s,Ir(c,2)):[]}function vf(s,c){return c=typeof c=="function"?c:n,s&&s.length?yu(s,n,c):[]}function il(s){if(!(s&&s.length))return[];var c=0;return s=Zs(s,function(v){if(ss(v))return c=z(v.length,c),!0}),ys(c,function(v){return Pn(s,Ji(v))})}function Nc(s,c){if(!(s&&s.length))return[];var v=il(s);return c==null?v:Pn(v,function(G){return bs(c,n,G)})}var Af=Zr(function(s,c){return ss(s)?Ro(s,c):[]}),Ff=Zr(function(s){return Ma(Zs(s,ss))}),wf=Zr(function(s){var c=di(s);return ss(c)&&(c=n),Ma(Zs(s,ss),Ir(c,2))}),bf=Zr(function(s){var c=di(s);return c=typeof c=="function"?c:n,Ma(Zs(s,ss),n,c)}),xf=Zr(il);function _f(s,c){return Wl(s||[],c||[],Io)}function Bf(s,c){return Wl(s||[],c||[],Po)}var kf=Zr(function(s){var c=s.length,v=c>1?s[c-1]:n;return v=typeof v=="function"?(s.pop(),v):n,Nc(s,v)});function jc(s){var c=kt(s);return c.__chain__=!0,c}function Of(s,c){return c(s),s}function ha(s,c){return c(s)}var Pf=iu(function(s){var c=s.length,v=c?s[0]:0,G=this.__wrapped__,Dt=function(Vt){return xa(Vt,s)};return c>1||this.__actions__.length||!(G instanceof Kr)||!uu(v)?this.thru(Dt):(G=G.slice(v,+v+(c?1:0)),G.__actions__.push({func:ha,args:[Dt],thisArg:n}),new Un(G,this.__chain__).thru(function(Vt){return c&&!Vt.length&&Vt.push(n),Vt}))});function Tf(){return jc(this)}function Nf(){return new Un(this.value(),this.__chain__)}function jf(){this.__values__===n&&(this.__values__=sp(this.value()));var s=this.__index__>=this.__values__.length,c=s?n:this.__values__[this.__index__++];return{done:s,value:c}}function Lf(){return this}function Hf(s){for(var c,v=this;v instanceof mn;){var G=Rc(v);G.__index__=0,G.__values__=n,c?Dt.__wrapped__=G:c=G;var Dt=G;v=v.__wrapped__}return Dt.__wrapped__=s,c}function Mf(){var s=this.__wrapped__;if(s instanceof Kr){var c=s;return this.__actions__.length&&(c=new Kr(this)),c=c.reverse(),c.__actions__.push({func:ha,args:[sl],thisArg:n}),new Un(c,this.__chain__)}return this.thru(sl)}function qf(){return Jl(this.__wrapped__,this.__actions__)}var Jf=ea(function(s,c,v){nr.call(s,v)?++s[v]:nu(s,v,1)});function Yf(s,c,v){var G=Hr(s)?Du:sh;return v&&Ms(s,c,v)&&(c=n),G(s,Ir(c,3))}function Xf(s,c){var v=Hr(s)?Zs:Rl;return v(s,Ir(c,3))}var Zf=cc($c),t1=cc(kc);function e1(s,c){return Bs(fa(s,c),1)}function r1(s,c){return Bs(fa(s,c),ae)}function n1(s,c,v){return v=v===n?1:zr(v),Bs(fa(s,c),v)}function Uc(s,c){var v=Hr(s)?Ge:mu;return v(s,Ir(c,3))}function Lc(s,c){var v=Hr(s)?E:Il;return v(s,Ir(c,3))}var s1=ea(function(s,c,v){nr.call(s,v)?s[v].push(c):nu(s,v,[c])});function i1(s,c,v,G){s=Js(s)?s:yo(s),v=v&&!G?zr(v):0;var Dt=s.length;return v<0&&(v=z(Dt+v,0)),Aa(s)?v<=Dt&&s.indexOf(c,v)>-1:!!Dt&&zi(s,c,v)>-1}var u1=Zr(function(s,c,v){var G=-1,Dt=typeof c=="function",Vt=Js(s)?Ie(s.length):[];return mu(s,function(oe){Vt[++G]=Dt?bs(c,oe,v):$o(oe,c,v)}),Vt}),o1=ea(function(s,c,v){nu(s,v,c)});function fa(s,c){var v=Hr(s)?Pn:Nl;return v(s,Ir(c,3))}function a1(s,c,v,G){return s==null?[]:(Hr(c)||(c=c==null?[]:[c]),v=G?n:v,Hr(v)||(v=v==null?[]:[v]),Hl(s,c,v))}var l1=ea(function(s,c,v){s[v?0:1].push(c)},function(){return[[],[]]});function c1(s,c,v){var G=Hr(s)?lt:kn,Dt=arguments.length<3;return G(s,Ir(c,4),v,Dt,mu)}function p1(s,c,v){var G=Hr(s)?Rr:kn,Dt=arguments.length<3;return G(s,Ir(c,4),v,Dt,Il)}function h1(s,c){var v=Hr(s)?Zs:Rl;return v(s,Ea(Ir(c,3)))}function f1(s){var c=Hr(s)?xl:wh;return c(s)}function d1(s,c,v){(v?Ms(s,c,v):c===n)?c=1:c=zr(c);var G=Hr(s)?Zp:bh;return G(s,c)}function g1(s){var c=Hr(s)?Qp:Dh;return c(s)}function m1(s){if(s==null)return 0;if(Js(s))return Aa(s)?ti(s):s.length;var c=ks(s);return c==k||c==ur?s.size:$a(s).length}function y1(s,c,v){var G=Hr(s)?Ks:xh;return v&&Ms(s,c,v)&&(c=n),G(s,Ir(c,3))}var E1=Zr(function(s,c){if(s==null)return[];var v=c.length;return v>1&&Ms(s,c[0],c[1])?c=[]:v>2&&Ms(c[0],c[1],c[2])&&(c=[c[0]]),Hl(s,Bs(c,1),[])}),ga=wt||function(){return Qn.Date.now()};function v1(s,c){if(typeof c!="function")throw new Oe(g);return s=zr(s),function(){if(--s<1)return c.apply(this,arguments)}}function Hc(s,c,v){return c=v?n:c,c=s&&c==null?s.length:c,su(s,q,n,n,n,n,c)}function Mc(s,c){var v;if(typeof c!="function")throw new Oe(g);return s=zr(s),function(){return--s>0&&(v=c.apply(this,arguments)),s<=1&&(c=n),v}}var ul=Zr(function(s,c,v){var G=nt;if(v.length){var Dt=Rs(v,go(ul));G|=K}return su(s,G,c,v,Dt)}),qc=Zr(function(s,c,v){var G=nt|X;if(v.length){var Dt=Rs(v,go(qc));G|=K}return su(c,G,s,v,Dt)});function zc(s,c,v){c=v?n:c;var G=su(s,it,n,n,n,n,n,c);return G.placeholder=zc.placeholder,G}function Gc(s,c,v){c=v?n:c;var G=su(s,ot,n,n,n,n,n,c);return G.placeholder=Gc.placeholder,G}function Wc(s,c,v){var G,Dt,Vt,oe,he,Fe,qe=0,Ke=!1,Ye=!1,ar=!0;if(typeof s!="function")throw new Oe(g);c=gi(c)||0,Zn(v)&&(Ke=!!v.leading,Ye="maxWait"in v,Vt=Ye?z(gi(v.maxWait)||0,c):Vt,ar="trailing"in v?!!v.trailing:ar);function Cr(us){var Ci=G,lu=Dt;return G=Dt=n,qe=us,oe=s.apply(lu,Ci),oe}function $r(us){return qe=us,he=Mo(rn,c),Ke?Cr(us):oe}function Jr(us){var Ci=us-Fe,lu=us-qe,Ep=c-Ci;return Ye?_t(Ep,Vt-lu):Ep}function kr(us){var Ci=us-Fe,lu=us-qe;return Fe===n||Ci>=c||Ci<0||Ye&&lu>=Vt}function rn(){var us=ga();if(kr(us))return dn(us);he=Mo(rn,Jr(us))}function dn(us){return he=n,ar&&G?Cr(us):(G=Dt=n,oe)}function ii(){he!==n&&Xl(he),qe=0,G=Fe=Dt=he=n}function Vs(){return he===n?oe:dn(ga())}function oi(){var us=ga(),Ci=kr(us);if(G=arguments,Dt=this,Fe=us,Ci){if(he===n)return $r(Fe);if(Ye)return Xl(he),he=Mo(rn,c),Cr(Fe)}return he===n&&(he=Mo(rn,c)),oe}return oi.cancel=ii,oi.flush=Vs,oi}var A1=Zr(function(s,c){return Sl(s,1,c)}),F1=Zr(function(s,c,v){return Sl(s,gi(c)||0,v)});function w1(s){return su(s,yt)}function ma(s,c){if(typeof s!="function"||c!=null&&typeof c!="function")throw new Oe(g);var v=function(){var G=arguments,Dt=c?c.apply(this,G):G[0],Vt=v.cache;if(Vt.has(Dt))return Vt.get(Dt);var oe=s.apply(this,G);return v.cache=Vt.set(Dt,oe)||Vt,oe};return v.cache=new(ma.Cache||tu),v}ma.Cache=tu;function Ea(s){if(typeof s!="function")throw new Oe(g);return function(){var c=arguments;switch(c.length){case 0:return!s.call(this);case 1:return!s.call(this,c[0]);case 2:return!s.call(this,c[0],c[1]);case 3:return!s.call(this,c[0],c[1],c[2])}return!s.apply(this,c)}}function b1(s){return Mc(2,s)}var C1=_h(function(s,c){c=c.length==1&&Hr(c[0])?Pn(c[0],$e(Ir())):Pn(Bs(c,1),$e(Ir()));var v=c.length;return Zr(function(G){for(var Dt=-1,Vt=_t(G.length,v);++Dt<Vt;)G[Dt]=c[Dt].call(this,G[Dt]);return bs(s,this,G)})}),ol=Zr(function(s,c){var v=Rs(c,go(ol));return su(s,K,n,c,v)}),Yc=Zr(function(s,c){var v=Rs(c,go(Yc));return su(s,H,n,c,v)}),D1=iu(function(s,c){return su(s,pt,n,n,n,c)});function x1(s,c){if(typeof s!="function")throw new Oe(g);return c=c===n?c:zr(c),Zr(s,c)}function _1(s,c){if(typeof s!="function")throw new Oe(g);return c=c==null?0:z(zr(c),0),Zr(function(v){var G=v[c],Dt=Au(v,0,c);return G&&li(Dt,G),bs(s,this,Dt)})}function B1(s,c,v){var G=!0,Dt=!0;if(typeof s!="function")throw new Oe(g);return Zn(v)&&(G="leading"in v?!!v.leading:G,Dt="trailing"in v?!!v.trailing:Dt),Wc(s,c,{leading:G,maxWait:c,trailing:Dt})}function S1(s){return Hc(s,1)}function I1(s,c){return ol(qa(c),s)}function R1(){if(!arguments.length)return[];var s=arguments[0];return Hr(s)?s:[s]}function $1(s){return hi(s,W)}function k1(s,c){return c=typeof c=="function"?c:n,hi(s,W,c)}function O1(s){return hi(s,o|W)}function P1(s,c){return c=typeof c=="function"?c:n,hi(s,o|W,c)}function T1(s,c){return c==null||Bl(s,c,Fs(c))}function bi(s,c){return s===c||s!==s&&c!==c}var N1=aa(Sa),j1=aa(function(s,c){return s>=c}),Hu=Ol((function(){return arguments})())?Ol:function(s){return es(s)&&nr.call(s,"callee")&&!gt.call(s,"callee")},Hr=Ie.isArray,U1=Xu?$e(Xu):ch;function Js(s){return s!=null&&va(s.length)&&!ou(s)}function ss(s){return es(s)&&Js(s)}function L1(s){return s===!0||s===!1||es(s)&&Hs(s)==Ve}var Fu=be||wl,H1=Zu?$e(Zu):ph;function M1(s){return es(s)&&s.nodeType===1&&!qo(s)}function V1(s){if(s==null)return!0;if(Js(s)&&(Hr(s)||typeof s=="string"||typeof s.splice=="function"||Fu(s)||mo(s)||Hu(s)))return!s.length;var c=ks(s);if(c==k||c==ur)return!s.size;if(No(s))return!$a(s).length;for(var v in s)if(nr.call(s,v))return!1;return!0}function q1(s,c){return Oo(s,c)}function K1(s,c,v){v=typeof v=="function"?v:n;var G=v?v(s,c):n;return G===n?Oo(s,c,n,v):!!G}function al(s){if(!es(s))return!1;var c=Hs(s);return c==Pr||c==vr||typeof s.message=="string"&&typeof s.name=="string"&&!qo(s)}function z1(s){return typeof s=="number"&&d(s)}function ou(s){if(!Zn(s))return!1;var c=Hs(s);return c==Dr||c==Q||c==Qe||c==dr}function tp(s){return typeof s=="number"&&s==zr(s)}function va(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=Le}function Zn(s){var c=typeof s;return s!=null&&(c=="object"||c=="function")}function es(s){return s!=null&&typeof s=="object"}var ep=Qu?$e(Qu):fh;function G1(s,c){return s===c||Ra(s,c,Xa(c))}function J1(s,c,v){return v=typeof v=="function"?v:n,Ra(s,c,Xa(c),v)}function W1(s){return rp(s)&&s!=+s}function Y1(s){if(r0(s))throw new Or(p);return Pl(s)}function X1(s){return s===null}function Z1(s){return s==null}function rp(s){return typeof s=="number"||es(s)&&Hs(s)==Z}function qo(s){if(!es(s)||Hs(s)!=ye)return!1;var c=V(s);if(c===null)return!0;var v=nr.call(c,"constructor")&&c.constructor;return typeof v=="function"&&v instanceof v&&Oi.call(v)==a}var ll=to?$e(to):dh;function Q1(s){return tp(s)&&s>=-Le&&s<=Le}var np=eo?$e(eo):gh;function Aa(s){return typeof s=="string"||!Hr(s)&&es(s)&&Hs(s)==er}function si(s){return typeof s=="symbol"||es(s)&&Hs(s)==Gr}var mo=no?$e(no):mh;function td(s){return s===n}function ed(s){return es(s)&&ks(s)==Br}function rd(s){return es(s)&&Hs(s)==N}var nd=aa(ka),sd=aa(function(s,c){return s<=c});function sp(s){if(!s)return[];if(Js(s))return Aa(s)?Tn(s):Gs(s);if(ut&&s[ut])return Wi(s[ut]());var c=ks(s),v=c==k?vi:c==ur?Yi:yo;return v(s)}function au(s){if(!s)return s===0?s:0;if(s=gi(s),s===ae||s===-ae){var c=s<0?-1:1;return c*de}return s===s?s:0}function zr(s){var c=au(s),v=c%1;return c===c?v?c-v:c:0}function up(s){return s?Nu(zr(s),0,ze):0}function gi(s){if(typeof s=="number")return s;if(si(s))return He;if(Zn(s)){var c=typeof s.valueOf=="function"?s.valueOf():s;s=Zn(c)?c+"":c}if(typeof s!="string")return s===0?s:+s;s=Ri(s);var v=jr.test(s);return v||cn.test(s)?Co(s.slice(2),v?2:8):Ar.test(s)?He:+s}function op(s){return Ui(s,Ws(s))}function ud(s){return s?Nu(zr(s),-Le,Le):s===0?s:0}function Sn(s){return s==null?"":ni(s)}var od=co(function(s,c){if(No(c)||Js(c)){Ui(c,Fs(c),s);return}for(var v in c)nr.call(c,v)&&Io(s,v,c[v])}),ap=co(function(s,c){Ui(c,Ws(c),s)}),Fa=co(function(s,c,v,G){Ui(c,Ws(c),s,G)}),ad=co(function(s,c,v,G){Ui(c,Fs(c),s,G)}),ld=iu(xa);function cd(s,c){var v=ps(s);return c==null?v:_l(v,c)}var pd=Zr(function(s,c){s=Fn(s);var v=-1,G=c.length,Dt=G>2?c[2]:n;for(Dt&&Ms(c[0],c[1],Dt)&&(G=1);++v<G;)for(var Vt=c[v],oe=Ws(Vt),he=-1,Fe=oe.length;++he<Fe;){var qe=oe[he],Ke=s[qe];(Ke===n||bi(Ke,ri[qe])&&!nr.call(s,qe))&&(s[qe]=Vt[qe])}return s}),hd=Zr(function(s){return s.push(n,yc),bs(lp,n,s)});function fd(s,c){return ms(s,Ir(c,3),ji)}function dd(s,c){return ms(s,Ir(c,3),Ba)}function gd(s,c){return s==null?s:_a(s,Ir(c,3),Ws)}function md(s,c){return s==null?s:$l(s,Ir(c,3),Ws)}function yd(s,c){return s&&ji(s,Ir(c,3))}function Ed(s,c){return s&&Ba(s,Ir(c,3))}function vd(s){return s==null?[]:Yo(s,Fs(s))}function Ad(s){return s==null?[]:Yo(s,Ws(s))}function cl(s,c,v){var G=s==null?n:ju(s,c);return G===n?v:G}function Fd(s,c){return s!=null&&Fc(s,c,uh)}function fl(s,c){return s!=null&&Fc(s,c,oh)}var wd=hc(function(s,c,v){c!=null&&typeof c.toString!="function"&&(c=l.call(c)),s[c]=v},gl(Ys)),bd=hc(function(s,c,v){c!=null&&typeof c.toString!="function"&&(c=l.call(c)),nr.call(s,c)?s[c].push(v):s[c]=[v]},Ir),Cd=Zr($o);function Fs(s){return Js(s)?Dl(s):$a(s)}function Ws(s){return Js(s)?Dl(s,!0):yh(s)}function Dd(s,c){var v={};return c=Ir(c,3),ji(s,function(G,Dt,Vt){nu(v,c(G,Dt,Vt),G)}),v}function xd(s,c){var v={};return c=Ir(c,3),ji(s,function(G,Dt,Vt){nu(v,Dt,c(G,Dt,Vt))}),v}var _d=co(function(s,c,v){Xo(s,c,v)}),lp=co(function(s,c,v,G){Xo(s,c,v,G)}),Bd=iu(function(s,c){var v={};if(s==null)return v;var G=!1;c=Pn(c,function(Vt){return Vt=vu(Vt,s),G||(G=Vt.length>1),Vt}),Ui(s,Wa(s),v),G&&(v=hi(v,o|M|W,Mh));for(var Dt=c.length;Dt--;)Ha(v,c[Dt]);return v});function Sd(s,c){return cp(s,Ea(Ir(c)))}var Id=iu(function(s,c){return s==null?{}:vh(s,c)});function cp(s,c){if(s==null)return{};var v=Pn(Wa(s),function(G){return[G]});return c=Ir(c),Ml(s,v,function(G,Dt){return c(G,Dt[0])})}function Rd(s,c,v){c=vu(c,s);var G=-1,Dt=c.length;for(Dt||(Dt=1,s=n);++G<Dt;){var Vt=s==null?n:s[Li(c[G])];Vt===n&&(G=Dt,Vt=v),s=ou(Vt)?Vt.call(s):Vt}return s}function $d(s,c,v){return s==null?s:Po(s,c,v)}function kd(s,c,v,G){return G=typeof G=="function"?G:n,s==null?s:Po(s,c,v,G)}var pp=gc(Fs),hp=gc(Ws);function Od(s,c,v){var G=Hr(s),Dt=G||Fu(s)||mo(s);if(c=Ir(c,4),v==null){var Vt=s&&s.constructor;Dt?v=G?new Vt:[]:Zn(s)?v=ou(Vt)?ps(V(s)):{}:v={}}return(Dt?Ge:ji)(s,function(oe,he,Fe){return c(v,oe,he,Fe)}),v}function Pd(s,c){return s==null?!0:Ha(s,c)}function Td(s,c,v){return s==null?s:Gl(s,c,qa(v))}function Nd(s,c,v,G){return G=typeof G=="function"?G:n,s==null?s:Gl(s,c,qa(v),G)}function yo(s){return s==null?[]:On(s,Fs(s))}function Ud(s){return s==null?[]:On(s,Ws(s))}function Ld(s,c,v){return v===n&&(v=c,c=n),v!==n&&(v=gi(v),v=v===v?v:0),c!==n&&(c=gi(c),c=c===c?c:0),Nu(gi(s),c,v)}function Jd(s,c,v){return c=au(c),v===n?(v=c,c=0):v=au(v),s=gi(s),ah(s,c,v)}function Wd(s,c,v){if(v&&typeof v!="boolean"&&Ms(s,c,v)&&(c=v=n),v===n&&(typeof c=="boolean"?(v=c,c=n):typeof s=="boolean"&&(v=s,s=n)),s===n&&c===n?(s=0,c=1):(s=au(s),c===n?(c=s,s=0):c=au(c)),s>c){var G=s;s=c,c=G}if(v||s%1||c%1){var Dt=ie();return _t(s+Dt*(c-s+bo("1e-"+((Dt+"").length-1))),c)}return ja(s,c)}var Zd=po(function(s,c,v){return c=c.toLowerCase(),s+(v?fp(c):c)});function fp(s){return dl(Sn(s).toLowerCase())}function dp(s){return s=Sn(s),s&&s.replace(yr,uo).replace(ws,"")}function Qd(s,c,v){s=Sn(s),c=ni(c);var G=s.length;v=v===n?G:Nu(zr(v),0,G);var Dt=v;return v-=c.length,v>=0&&s.slice(v,Dt)==c}function tg(s){return s=Sn(s),s&&Yt.test(s)?s.replace(Ct,ku):s}function eg(s){return s=Sn(s),s&&qt.test(s)?s.replace(le,"\\$&"):s}var rg=po(function(s,c,v){return s+(v?"-":"")+c.toLowerCase()}),ng=po(function(s,c,v){return s+(v?" ":"")+c.toLowerCase()}),sg=lc("toLowerCase");function ig(s,c,v){s=Sn(s),c=zr(c);var G=c?ti(s):0;if(!c||G>=c)return s;var Dt=(c-G)/2;return ia(Gt(Dt),v)+s+ia(Wt(Dt),v)}function ug(s,c,v){s=Sn(s),c=zr(c);var G=c?ti(s):0;return c&&G<c?s+ia(c-G,v):s}function og(s,c,v){s=Sn(s),c=zr(c);var G=c?ti(s):0;return c&&G<c?ia(c-G,v)+s:s}function ag(s,c,v){return v||c==null?c=0:c&&(c=+c),te(Sn(s).replace(pe,""),c||0)}function lg(s,c,v){return(v?Ms(s,c,v):c===n)?c=1:c=zr(c),Ua(Sn(s),c)}function cg(){var s=arguments,c=Sn(s[0]);return s.length<3?c:c.replace(s[1],s[2])}var pg=po(function(s,c,v){return s+(v?"_":"")+c.toLowerCase()});function hg(s,c,v){return v&&typeof v!="number"&&Ms(s,c,v)&&(c=v=n),v=v===n?ze:v>>>0,v?(s=Sn(s),s&&(typeof c=="string"||c!=null&&!ll(c))&&(c=ni(c),!c&&Qs(s))?Au(Tn(s),0,v):s.split(c,v)):[]}var fg=po(function(s,c,v){return s+(v?" ":"")+dl(c)});function dg(s,c,v){return s=Sn(s),v=v==null?0:Nu(zr(v),0,s.length),c=ni(c),s.slice(v,v+c.length)==c}function Fg(s,c,v){var G=kt.templateSettings;v&&Ms(s,c,v)&&(c=n),s=Sn(s),c=Fa({},c,G,mc);var Dt=Fa({},c.imports,G.imports,mc),Vt=Fs(Dt),oe=On(Dt,Vt),he,Fe,qe=0,Ke=c.interpolate||Tr,Ye="__p += '",ar=Ai((c.escape||Tr).source+"|"+Ke.source+"|"+(Ke===Ee?lr:Tr).source+"|"+(c.evaluate||Tr).source+"|$","g"),Cr="//# sourceURL="+(nr.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++vo+"]")+`
`;s.replace(ar,function(kr,rn,dn,ii,Vs,oi){return dn||(dn=ii),Ye+=s.slice(qe,oi).replace(gn,Ou),rn&&(he=!0,Ye+=`' +
__e(`+rn+`) +
'`),Vs&&(Fe=!0,Ye+=`';
`+Vs+`;
__p += '`),dn&&(Ye+=`' +
((__t = (`+dn+`)) == null ? '' : __t) +
'`),qe=oi+kr.length,kr}),Ye+=`';
`;var $r=nr.call(c,"variable")&&c.variable;if(!$r)Ye=`with (obj) {
`+Ye+`
}
`;else if(Ne.test($r))throw new Or(m);Ye=(Fe?Ye.replace(tt,""):Ye).replace(F,"$1").replace(rt,"$1;"),Ye="function("+($r||"obj")+`) {
`+($r?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(he?", __e = _.escape":"")+(Fe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ye+`return __p
}`;var Jr=mp(function(){return an(Vt,Cr+"return "+Ye).apply(n,oe)});if(Jr.source=Ye,al(Jr))throw Jr;return Jr}function Cg(s){return Sn(s).toLowerCase()}function xg(s){return Sn(s).toUpperCase()}function Rg(s,c,v){if(s=Sn(s),s&&(v||c===n))return Ri(s);if(!s||!(c=ni(c)))return s;var G=Tn(s),Dt=Tn(c),Vt=Ru(G,Dt),oe=io(G,Dt)+1;return Au(G,Vt,oe).join("")}function $g(s,c,v){if(s=Sn(s),s&&(v||c===n))return s.slice(0,Xi(s)+1);if(!s||!(c=ni(c)))return s;var G=Tn(s),Dt=io(G,Tn(c))+1;return Au(G,0,Dt).join("")}function kg(s,c,v){if(s=Sn(s),s&&(v||c===n))return s.replace(pe,"");if(!s||!(c=ni(c)))return s;var G=Tn(s),Dt=Ru(G,Tn(c));return Au(G,Dt).join("")}function Tg(s,c){var v=Rt,G=Et;if(Zn(c)){var Dt="separator"in c?c.separator:Dt;v="length"in c?zr(c.length):v,G="omission"in c?ni(c.omission):G}s=Sn(s);var Vt=s.length;if(Qs(s)){var oe=Tn(s);Vt=oe.length}if(v>=Vt)return s;var he=v-ti(G);if(he<1)return G;var Fe=oe?Au(oe,0,he).join(""):s.slice(0,he);if(Dt===n)return Fe+G;if(oe&&(he+=Fe.length-he),ll(Dt)){if(s.slice(he).search(Dt)){var qe,Ke=Fe;for(Dt.global||(Dt=Ai(Dt.source,Sn(or.exec(Dt))+"g")),Dt.lastIndex=0;qe=Dt.exec(Ke);)var Ye=qe.index;Fe=Fe.slice(0,Ye===n?he:Ye)}}else if(s.indexOf(ni(Dt),he)!=he){var ar=Fe.lastIndexOf(Dt);ar>-1&&(Fe=Fe.slice(0,ar))}return Fe+G}function Ng(s){return s=Sn(s),s&&Nt.test(s)?s.replace(At,ei):s}var jg=po(function(s,c,v){return s+(v?" ":"")+c.toUpperCase()}),dl=lc("toUpperCase");function gp(s,c,v){return s=Sn(s),c=v?n:c,c===n?hu(s)?Bo(s):we(s):s.match(c)||[]}var mp=Zr(function(s,c){try{return bs(s,n,c)}catch(v){return al(v)?v:new Or(v)}}),Ug=iu(function(s,c){return Ge(c,function(v){v=Li(v),nu(s,v,ul(s[v],s))}),s});function Lg(s){var c=s==null?0:s.length,v=Ir();return s=c?Pn(s,function(G){if(typeof G[1]!="function")throw new Oe(g);return[v(G[0]),G[1]]}):[],Zr(function(G){for(var Dt=-1;++Dt<c;){var Vt=s[Dt];if(bs(Vt[0],this,G))return bs(Vt[1],this,G)}})}function Hg(s){return nh(hi(s,o))}function gl(s){return function(){return s}}function Mg(s,c){return s==null||s!==s?c:s}var Vg=pc(),qg=pc(!0);function Ys(s){return s}function ml(s){return Tl(typeof s=="function"?s:hi(s,o))}function Kg(s){return jl(hi(s,o))}function zg(s,c){return Ul(s,hi(c,o))}var Gg=Zr(function(s,c){return function(v){return $o(v,s,c)}}),Jg=Zr(function(s,c){return function(v){return $o(s,v,c)}});function vl(s,c,v){var G=Fs(c),Dt=Yo(c,G);v==null&&!(Zn(c)&&(Dt.length||!G.length))&&(v=c,c=s,s=this,Dt=Yo(c,Fs(c)));var Vt=!(Zn(v)&&"chain"in v)||!!v.chain,oe=ou(s);return Ge(Dt,function(he){var Fe=c[he];s[he]=Fe,oe&&(s.prototype[he]=function(){var qe=this.__chain__;if(Vt||qe){var Ke=s(this.__wrapped__),Ye=Ke.__actions__=Gs(this.__actions__);return Ye.push({func:Fe,args:arguments,thisArg:s}),Ke.__chain__=qe,Ke}return Fe.apply(s,li([this.value()],arguments))})}),s}function Wg(){return Qn._===this&&(Qn._=h),this}function Al(){}function Yg(s){return s=zr(s),Zr(function(c){return Ll(c,s)})}var Xg=za(Pn),Zg=za(Du),Qg=za(Ks);function yp(s){return Qa(s)?Ji(Li(s)):Ah(s)}function t2(s){return function(c){return s==null?n:ju(s,c)}}var e2=fc(),r2=fc(!0);function Fl(){return[]}function wl(){return!1}function n2(){return{}}function s2(){return""}function u2(){return!0}function o2(s,c){if(s=zr(s),s<1||s>Le)return[];var v=ze,G=_t(s,ze);c=Ir(c),s-=ze;for(var Dt=ys(G,c);++v<s;)c(v);return Dt}function a2(s){return Hr(s)?Pn(s,Li):si(s)?[s]:Gs(Ic(Sn(s)))}function l2(s){var c=++So;return Sn(s)+c}var c2=sa(function(s,c){return s+c},0),p2=Ga("ceil"),h2=sa(function(s,c){return s/c},1),f2=Ga("floor");function d2(s){return s&&s.length?Wo(s,Ys,Sa):n}function g2(s,c){return s&&s.length?Wo(s,Ir(c,2),Sa):n}function m2(s){return xo(s,Ys)}function y2(s,c){return xo(s,Ir(c,2))}function E2(s){return s&&s.length?Wo(s,Ys,ka):n}function v2(s,c){return s&&s.length?Wo(s,Ir(c,2),ka):n}var A2=sa(function(s,c){return s*c},1),F2=Ga("round"),w2=sa(function(s,c){return s-c},0);function b2(s){return s&&s.length?Bu(s,Ys):0}function C2(s,c){return s&&s.length?Bu(s,Ir(c,2)):0}return kt.after=v1,kt.ary=Hc,kt.assign=od,kt.assignIn=ap,kt.assignInWith=Fa,kt.assignWith=ad,kt.at=ld,kt.before=Mc,kt.bind=ul,kt.bindAll=Ug,kt.bindKey=qc,kt.castArray=R1,kt.chain=jc,kt.chunk=d0,kt.compact=g0,kt.concat=m0,kt.cond=Lg,kt.conforms=Hg,kt.constant=gl,kt.countBy=Jf,kt.create=cd,kt.curry=zc,kt.curryRight=Gc,kt.debounce=Wc,kt.defaults=pd,kt.defaultsDeep=hd,kt.defer=A1,kt.delay=F1,kt.difference=y0,kt.differenceBy=E0,kt.differenceWith=v0,kt.drop=A0,kt.dropRight=F0,kt.dropRightWhile=w0,kt.dropWhile=b0,kt.fill=C0,kt.filter=Xf,kt.flatMap=e1,kt.flatMapDeep=r1,kt.flatMapDepth=n1,kt.flatten=Oc,kt.flattenDeep=x0,kt.flattenDepth=_0,kt.flip=w1,kt.flow=Vg,kt.flowRight=qg,kt.fromPairs=B0,kt.functions=vd,kt.functionsIn=Ad,kt.groupBy=s1,kt.initial=I0,kt.intersection=R0,kt.intersectionBy=$0,kt.intersectionWith=O0,kt.invert=wd,kt.invertBy=bd,kt.invokeMap=u1,kt.iteratee=ml,kt.keyBy=o1,kt.keys=Fs,kt.keysIn=Ws,kt.map=fa,kt.mapKeys=Dd,kt.mapValues=xd,kt.matches=Kg,kt.matchesProperty=zg,kt.memoize=ma,kt.merge=_d,kt.mergeWith=lp,kt.method=Gg,kt.methodOf=Jg,kt.mixin=vl,kt.negate=Ea,kt.nthArg=Yg,kt.omit=Bd,kt.omitBy=Sd,kt.once=b1,kt.orderBy=a1,kt.over=Xg,kt.overArgs=C1,kt.overEvery=Zg,kt.overSome=Qg,kt.partial=ol,kt.partialRight=Yc,kt.partition=l1,kt.pick=Id,kt.pickBy=cp,kt.property=yp,kt.propertyOf=t2,kt.pull=G0,kt.pullAll=Tc,kt.pullAllBy=J0,kt.pullAllWith=Y0,kt.pullAt=X0,kt.range=e2,kt.rangeRight=r2,kt.rearg=D1,kt.reject=h1,kt.remove=Z0,kt.rest=x1,kt.reverse=sl,kt.sampleSize=d1,kt.set=$d,kt.setWith=kd,kt.shuffle=g1,kt.slice=Q0,kt.sortBy=E1,kt.sortedUniq=of,kt.sortedUniqBy=af,kt.split=hg,kt.spread=_1,kt.tail=lf,kt.take=cf,kt.takeRight=pf,kt.takeRightWhile=hf,kt.takeWhile=ff,kt.tap=Of,kt.throttle=B1,kt.thru=ha,kt.toArray=sp,kt.toPairs=pp,kt.toPairsIn=hp,kt.toPath=a2,kt.toPlainObject=op,kt.transform=Od,kt.unary=S1,kt.union=df,kt.unionBy=gf,kt.unionWith=mf,kt.uniq=yf,kt.uniqBy=Ef,kt.uniqWith=vf,kt.unset=Pd,kt.unzip=il,kt.unzipWith=Nc,kt.update=Td,kt.updateWith=Nd,kt.values=yo,kt.valuesIn=Ud,kt.without=Af,kt.words=gp,kt.wrap=I1,kt.xor=Ff,kt.xorBy=wf,kt.xorWith=bf,kt.zip=xf,kt.zipObject=_f,kt.zipObjectDeep=Bf,kt.zipWith=kf,kt.entries=pp,kt.entriesIn=hp,kt.extend=ap,kt.extendWith=Fa,vl(kt,kt),kt.add=c2,kt.attempt=mp,kt.camelCase=Zd,kt.capitalize=fp,kt.ceil=p2,kt.clamp=Ld,kt.clone=$1,kt.cloneDeep=O1,kt.cloneDeepWith=P1,kt.cloneWith=k1,kt.conformsTo=T1,kt.deburr=dp,kt.defaultTo=Mg,kt.divide=h2,kt.endsWith=Qd,kt.eq=bi,kt.escape=tg,kt.escapeRegExp=eg,kt.every=Yf,kt.find=Zf,kt.findIndex=$c,kt.findKey=fd,kt.findLast=t1,kt.findLastIndex=kc,kt.findLastKey=dd,kt.floor=f2,kt.forEach=Uc,kt.forEachRight=Lc,kt.forIn=gd,kt.forInRight=md,kt.forOwn=yd,kt.forOwnRight=Ed,kt.get=cl,kt.gt=N1,kt.gte=j1,kt.has=Fd,kt.hasIn=fl,kt.head=Pc,kt.identity=Ys,kt.includes=i1,kt.indexOf=S0,kt.inRange=Jd,kt.invoke=Cd,kt.isArguments=Hu,kt.isArray=Hr,kt.isArrayBuffer=U1,kt.isArrayLike=Js,kt.isArrayLikeObject=ss,kt.isBoolean=L1,kt.isBuffer=Fu,kt.isDate=H1,kt.isElement=M1,kt.isEmpty=V1,kt.isEqual=q1,kt.isEqualWith=K1,kt.isError=al,kt.isFinite=z1,kt.isFunction=ou,kt.isInteger=tp,kt.isLength=va,kt.isMap=ep,kt.isMatch=G1,kt.isMatchWith=J1,kt.isNaN=W1,kt.isNative=Y1,kt.isNil=Z1,kt.isNull=X1,kt.isNumber=rp,kt.isObject=Zn,kt.isObjectLike=es,kt.isPlainObject=qo,kt.isRegExp=ll,kt.isSafeInteger=Q1,kt.isSet=np,kt.isString=Aa,kt.isSymbol=si,kt.isTypedArray=mo,kt.isUndefined=td,kt.isWeakMap=ed,kt.isWeakSet=rd,kt.join=P0,kt.kebabCase=rg,kt.last=di,kt.lastIndexOf=U0,kt.lowerCase=ng,kt.lowerFirst=sg,kt.lt=nd,kt.lte=sd,kt.max=d2,kt.maxBy=g2,kt.mean=m2,kt.meanBy=y2,kt.min=E2,kt.minBy=v2,kt.stubArray=Fl,kt.stubFalse=wl,kt.stubObject=n2,kt.stubString=s2,kt.stubTrue=u2,kt.multiply=A2,kt.nth=L0,kt.noConflict=Wg,kt.noop=Al,kt.now=ga,kt.pad=ig,kt.padEnd=ug,kt.padStart=og,kt.parseInt=ag,kt.random=Wd,kt.reduce=c1,kt.reduceRight=p1,kt.repeat=lg,kt.replace=cg,kt.result=Rd,kt.round=F2,kt.runInContext=me,kt.sample=f1,kt.size=m1,kt.snakeCase=pg,kt.some=y1,kt.sortedIndex=tf,kt.sortedIndexBy=ef,kt.sortedIndexOf=rf,kt.sortedLastIndex=nf,kt.sortedLastIndexBy=sf,kt.sortedLastIndexOf=uf,kt.startCase=fg,kt.startsWith=dg,kt.subtract=w2,kt.sum=b2,kt.sumBy=C2,kt.template=Fg,kt.times=o2,kt.toFinite=au,kt.toInteger=zr,kt.toLength=up,kt.toLower=Cg,kt.toNumber=gi,kt.toSafeInteger=ud,kt.toString=Sn,kt.toUpper=xg,kt.trim=Rg,kt.trimEnd=$g,kt.trimStart=kg,kt.truncate=Tg,kt.unescape=Ng,kt.uniqueId=l2,kt.upperCase=jg,kt.upperFirst=dl,kt.each=Uc,kt.eachRight=Lc,kt.first=Pc,vl(kt,(function(){var s={};return ji(kt,function(c,v){nr.call(kt.prototype,v)||(s[v]=c)}),s})(),{chain:!1}),kt.VERSION=i,Ge(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){kt[s].placeholder=kt}),Ge(["drop","take"],function(s,c){Kr.prototype[s]=function(v){v=v===n?1:z(zr(v),0);var G=this.__filtered__&&!c?new Kr(this):this.clone();return G.__filtered__?G.__takeCount__=_t(v,G.__takeCount__):G.__views__.push({size:_t(v,ze),type:s+(G.__dir__<0?"Right":"")}),G},Kr.prototype[s+"Right"]=function(v){return this.reverse()[s](v).reverse()}}),Ge(["filter","map","takeWhile"],function(s,c){var v=c+1,G=v==Xt||v==ne;Kr.prototype[s]=function(Dt){var Vt=this.clone();return Vt.__iteratees__.push({iteratee:Ir(Dt,3),type:v}),Vt.__filtered__=Vt.__filtered__||G,Vt}}),Ge(["head","last"],function(s,c){var v="take"+(c?"Right":"");Kr.prototype[s]=function(){return this[v](1).value()[0]}}),Ge(["initial","tail"],function(s,c){var v="drop"+(c?"":"Right");Kr.prototype[s]=function(){return this.__filtered__?new Kr(this):this[v](1)}}),Kr.prototype.compact=function(){return this.filter(Ys)},Kr.prototype.find=function(s){return this.filter(s).head()},Kr.prototype.findLast=function(s){return this.reverse().find(s)},Kr.prototype.invokeMap=Zr(function(s,c){return typeof s=="function"?new Kr(this):this.map(function(v){return $o(v,s,c)})}),Kr.prototype.reject=function(s){return this.filter(Ea(Ir(s)))},Kr.prototype.slice=function(s,c){s=zr(s);var v=this;return v.__filtered__&&(s>0||c<0)?new Kr(v):(s<0?v=v.takeRight(-s):s&&(v=v.drop(s)),c!==n&&(c=zr(c),v=c<0?v.dropRight(-c):v.take(c-s)),v)},Kr.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},Kr.prototype.toArray=function(){return this.take(ze)},ji(Kr.prototype,function(s,c){var v=/^(?:filter|find|map|reject)|While$/.test(c),G=/^(?:head|last)$/.test(c),Dt=kt[G?"take"+(c=="last"?"Right":""):c],Vt=G||/^find/.test(c);Dt&&(kt.prototype[c]=function(){var oe=this.__wrapped__,he=G?[1]:arguments,Fe=oe instanceof Kr,qe=he[0],Ke=Fe||Hr(oe),Ye=function(rn){var dn=Dt.apply(kt,li([rn],he));return G&&ar?dn[0]:dn};Ke&&v&&typeof qe=="function"&&qe.length!=1&&(Fe=Ke=!1);var ar=this.__chain__,Cr=!!this.__actions__.length,$r=Vt&&!ar,Jr=Fe&&!Cr;if(!Vt&&Ke){oe=Jr?oe:new Kr(this);var kr=s.apply(oe,he);return kr.__actions__.push({func:ha,args:[Ye],thisArg:n}),new Un(kr,ar)}return $r&&Jr?s.apply(this,he):(kr=this.thru(Ye),$r?G?kr.value()[0]:kr.value():kr)})}),Ge(["pop","push","shift","sort","splice","unshift"],function(s){var c=Nr[s],v=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",G=/^(?:pop|shift)$/.test(s);kt.prototype[s]=function(){var Dt=arguments;if(G&&!this.__chain__){var Vt=this.value();return c.apply(Hr(Vt)?Vt:[],Dt)}return this[v](function(oe){return c.apply(Hr(oe)?oe:[],Dt)})}}),ji(Kr.prototype,function(s,c){var v=kt[c];if(v){var G=v.name+"";nr.call(pn,G)||(pn[G]=[]),pn[G].push({name:c,func:v})}}),pn[na(n,X).name]=[{name:"wrapper",func:n}],Kr.prototype.clone=Pi,Kr.prototype.reverse=wa,Kr.prototype.value=ci,kt.prototype.at=Pf,kt.prototype.chain=Tf,kt.prototype.commit=Nf,kt.prototype.next=jf,kt.prototype.plant=Hf,kt.prototype.reverse=Mf,kt.prototype.toJSON=kt.prototype.valueOf=kt.prototype.value=qf,kt.prototype.first=kt.prototype.head,ut&&(kt.prototype[ut]=Lf),kt},zs=ao();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Qn._=zs,define(function(){return zs})):yi?((yi.exports=zs)._=zs,bu._=zs):Qn._=zs}).call(t)}),bg=ce(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCorrect=t.isInSubnet=void 0;function r(i){return this.subnetMask<i.subnetMask?!1:this.mask(i.subnetMask)===i.mask()}t.isInSubnet=r;function n(i){return function(){return this.addressMinusSuffix!==this.correctForm()?!1:this.subnetMask===i&&!this.parsedSubnet?!0:this.parsedSubnet===String(this.subnetMask)}}t.isCorrect=n}),_g=ce(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RE_SUBNET_STRING=t.RE_ADDRESS=t.GROUPS=t.BITS=void 0,t.BITS=32,t.GROUPS=4,t.RE_ADDRESS=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g,t.RE_SUBNET_STRING=/\/\d{1,2}$/}),Xd=ce(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddressError=void 0;var r=class extends Error{constructor(n,i){super(n),this.name="AddressError",i!==null&&(this.parseMessage=i)}};t.AddressError=r}),Dg=ce((t,r)=>{(function(){var n,i=0xdeadbeefcafe,u=(i&16777215)==15715070;function p(bt,It,Ht){bt!=null&&(typeof bt=="number"?this.fromNumber(bt,It,Ht):It==null&&typeof bt!="string"?this.fromString(bt,256):this.fromString(bt,It))}function g(){return new p(null)}function m(bt,It,Ht,fe,Me,We){for(;--We>=0;){var ir=It*this[bt++]+Ht[fe]+Me;Me=Math.floor(ir/67108864),Ht[fe++]=ir&67108863}return Me}function A(bt,It,Ht,fe,Me,We){for(var ir=It&32767,cr=It>>15;--We>=0;){var nn=this[bt]&32767,en=this[bt++]>>15,Er=cr*nn+en*ir;nn=ir*nn+((Er&32767)<<15)+Ht[fe]+(Me&1073741823),Me=(nn>>>30)+(Er>>>15)+cr*en+(Me>>>30),Ht[fe++]=nn&1073741823}return Me}function y(bt,It,Ht,fe,Me,We){for(var ir=It&16383,cr=It>>14;--We>=0;){var nn=this[bt]&16383,en=this[bt++]>>14,Er=cr*nn+en*ir;nn=ir*nn+((Er&16383)<<14)+Ht[fe]+Me,Me=(nn>>28)+(Er>>14)+cr*en,Ht[fe++]=nn&268435455}return Me}var D=typeof navigator<"u";D&&u&&navigator.appName=="Microsoft Internet Explorer"?(p.prototype.am=A,n=30):D&&u&&navigator.appName!="Netscape"?(p.prototype.am=m,n=26):(p.prototype.am=y,n=28),p.prototype.DB=n,p.prototype.DM=(1<<n)-1,p.prototype.DV=1<<n;var o=52;p.prototype.FV=Math.pow(2,o),p.prototype.F1=o-n,p.prototype.F2=2*n-o;var M="0123456789abcdefghijklmnopqrstuvwxyz",W=new Array,w,U;for(w=48,U=0;U<=9;++U)W[w++]=U;for(w=97,U=10;U<36;++U)W[w++]=U;for(w=65,U=10;U<36;++U)W[w++]=U;function nt(bt){return M.charAt(bt)}function X(bt,It){var Ht=W[bt.charCodeAt(It)];return Ht??-1}function j(bt){for(var It=this.t-1;It>=0;--It)bt[It]=this[It];bt.t=this.t,bt.s=this.s}function it(bt){this.t=1,this.s=bt<0?-1:0,bt>0?this[0]=bt:bt<-1?this[0]=bt+this.DV:this.t=0}function ot(bt){var It=g();return It.fromInt(bt),It}function K(bt,It){var Ht;if(It==16)Ht=4;else if(It==8)Ht=3;else if(It==256)Ht=8;else if(It==2)Ht=1;else if(It==32)Ht=5;else if(It==4)Ht=2;else{this.fromRadix(bt,It);return}this.t=0,this.s=0;for(var fe=bt.length,Me=!1,We=0;--fe>=0;){var ir=Ht==8?bt[fe]&255:X(bt,fe);if(ir<0){bt.charAt(fe)=="-"&&(Me=!0);continue}Me=!1,We==0?this[this.t++]=ir:We+Ht>this.DB?(this[this.t-1]|=(ir&(1<<this.DB-We)-1)<<We,this[this.t++]=ir>>this.DB-We):this[this.t-1]|=ir<<We,We+=Ht,We>=this.DB&&(We-=this.DB)}Ht==8&&bt[0]&128&&(this.s=-1,We>0&&(this[this.t-1]|=(1<<this.DB-We)-1<<We)),this.clamp(),Me&&p.ZERO.subTo(this,this)}function H(){for(var bt=this.s&this.DM;this.t>0&&this[this.t-1]==bt;)--this.t}function q(bt){if(this.s<0)return"-"+this.negate().toString(bt);var It;if(bt==16)It=4;else if(bt==8)It=3;else if(bt==2)It=1;else if(bt==32)It=5;else if(bt==4)It=2;else return this.toRadix(bt);var Ht=(1<<It)-1,fe,Me=!1,We="",ir=this.t,cr=this.DB-ir*this.DB%It;if(ir-- >0)for(cr<this.DB&&(fe=this[ir]>>cr)>0&&(Me=!0,We=nt(fe));ir>=0;)cr<It?(fe=(this[ir]&(1<<cr)-1)<<It-cr,fe|=this[--ir]>>(cr+=this.DB-It)):(fe=this[ir]>>(cr-=It)&Ht,cr<=0&&(cr+=this.DB,--ir)),fe>0&&(Me=!0),Me&&(We+=nt(fe));return Me?We:"0"}function pt(){var bt=g();return p.ZERO.subTo(this,bt),bt}function yt(){return this.s<0?this.negate():this}function Rt(bt){var It=this.s-bt.s;if(It!=0)return It;var Ht=this.t;if(It=Ht-bt.t,It!=0)return this.s<0?-It:It;for(;--Ht>=0;)if((It=this[Ht]-bt[Ht])!=0)return It;return 0}function Et(bt){var It=1,Ht;return(Ht=bt>>>16)!=0&&(bt=Ht,It+=16),(Ht=bt>>8)!=0&&(bt=Ht,It+=8),(Ht=bt>>4)!=0&&(bt=Ht,It+=4),(Ht=bt>>2)!=0&&(bt=Ht,It+=2),(Ht=bt>>1)!=0&&(bt=Ht,It+=1),It}function vt(){return this.t<=0?0:this.DB*(this.t-1)+Et(this[this.t-1]^this.s&this.DM)}function Ft(bt,It){var Ht;for(Ht=this.t-1;Ht>=0;--Ht)It[Ht+bt]=this[Ht];for(Ht=bt-1;Ht>=0;--Ht)It[Ht]=0;It.t=this.t+bt,It.s=this.s}function Xt(bt,It){for(var Ht=bt;Ht<this.t;++Ht)It[Ht-bt]=this[Ht];It.t=Math.max(this.t-bt,0),It.s=this.s}function ee(bt,It){var Ht=bt%this.DB,fe=this.DB-Ht,Me=(1<<fe)-1,We=Math.floor(bt/this.DB),ir=this.s<<Ht&this.DM,cr;for(cr=this.t-1;cr>=0;--cr)It[cr+We+1]=this[cr]>>fe|ir,ir=(this[cr]&Me)<<Ht;for(cr=We-1;cr>=0;--cr)It[cr]=0;It[We]=ir,It.t=this.t+We+1,It.s=this.s,It.clamp()}function ne(bt,It){It.s=this.s;var Ht=Math.floor(bt/this.DB);if(Ht>=this.t){It.t=0;return}var fe=bt%this.DB,Me=this.DB-fe,We=(1<<fe)-1;It[0]=this[Ht]>>fe;for(var ir=Ht+1;ir<this.t;++ir)It[ir-Ht-1]|=(this[ir]&We)<<Me,It[ir-Ht]=this[ir]>>fe;fe>0&&(It[this.t-Ht-1]|=(this.s&We)<<Me),It.t=this.t-Ht,It.clamp()}function ae(bt,It){for(var Ht=0,fe=0,Me=Math.min(bt.t,this.t);Ht<Me;)fe+=this[Ht]-bt[Ht],It[Ht++]=fe&this.DM,fe>>=this.DB;if(bt.t<this.t){for(fe-=bt.s;Ht<this.t;)fe+=this[Ht],It[Ht++]=fe&this.DM,fe>>=this.DB;fe+=this.s}else{for(fe+=this.s;Ht<bt.t;)fe-=bt[Ht],It[Ht++]=fe&this.DM,fe>>=this.DB;fe-=bt.s}It.s=fe<0?-1:0,fe<-1?It[Ht++]=this.DV+fe:fe>0&&(It[Ht++]=fe),It.t=Ht,It.clamp()}function Le(bt,It){var Ht=this.abs(),fe=bt.abs(),Me=Ht.t;for(It.t=Me+fe.t;--Me>=0;)It[Me]=0;for(Me=0;Me<fe.t;++Me)It[Me+Ht.t]=Ht.am(0,fe[Me],It,Me,0,Ht.t);It.s=0,It.clamp(),this.s!=bt.s&&p.ZERO.subTo(It,It)}function de(bt){for(var It=this.abs(),Ht=bt.t=2*It.t;--Ht>=0;)bt[Ht]=0;for(Ht=0;Ht<It.t-1;++Ht){var fe=It.am(Ht,It[Ht],bt,2*Ht,0,1);(bt[Ht+It.t]+=It.am(Ht+1,2*It[Ht],bt,2*Ht+1,fe,It.t-Ht-1))>=It.DV&&(bt[Ht+It.t]-=It.DV,bt[Ht+It.t+1]=1)}bt.t>0&&(bt[bt.t-1]+=It.am(Ht,It[Ht],bt,2*Ht,0,1)),bt.s=0,bt.clamp()}function He(bt,It,Ht){var fe=bt.abs();if(!(fe.t<=0)){var Me=this.abs();if(Me.t<fe.t){It?.fromInt(0),Ht!=null&&this.copyTo(Ht);return}Ht==null&&(Ht=g());var We=g(),ir=this.s,cr=bt.s,nn=this.DB-Et(fe[fe.t-1]);nn>0?(fe.lShiftTo(nn,We),Me.lShiftTo(nn,Ht)):(fe.copyTo(We),Me.copyTo(Ht));var en=We.t,Er=We[en-1];if(Er!=0){var hs=Er*(1<<this.F1)+(en>1?We[en-2]>>this.F2:0),Ns=this.FV/hs,Si=(1<<this.F1)/hs,ws=1<<this.F2,ds=Ht.t,Ii=ds-en,En=It??g();for(We.dlShiftTo(Ii,En),Ht.compareTo(En)>=0&&(Ht[Ht.t++]=1,Ht.subTo(En,Ht)),p.ONE.dlShiftTo(en,En),En.subTo(We,We);We.t<en;)We[We.t++]=0;for(;--Ii>=0;){var Ki=Ht[--ds]==Er?this.DM:Math.floor(Ht[ds]*Ns+(Ht[ds-1]+ws)*Si);if((Ht[ds]+=We.am(0,Ki,Ht,Ii,0,en))<Ki)for(We.dlShiftTo(Ii,En),Ht.subTo(En,Ht);Ht[ds]<--Ki;)Ht.subTo(En,Ht)}It!=null&&(Ht.drShiftTo(en,It),ir!=cr&&p.ZERO.subTo(It,It)),Ht.t=en,Ht.clamp(),nn>0&&Ht.rShiftTo(nn,Ht),ir<0&&p.ZERO.subTo(Ht,Ht)}}}function ze(bt){var It=g();return this.abs().divRemTo(bt,null,It),this.s<0&&It.compareTo(p.ZERO)>0&&bt.subTo(It,It),It}function Pe(bt){this.m=bt}function Je(bt){return bt.s<0||bt.compareTo(this.m)>=0?bt.mod(this.m):bt}function Xe(bt){return bt}function Ae(bt){bt.divRemTo(this.m,null,bt)}function xe(bt,It,Ht){bt.multiplyTo(It,Ht),this.reduce(Ht)}function Qe(bt,It){bt.squareTo(It),this.reduce(It)}Pe.prototype.convert=Je,Pe.prototype.revert=Xe,Pe.prototype.reduce=Ae,Pe.prototype.mulTo=xe,Pe.prototype.sqrTo=Qe;function Ve(){if(this.t<1)return 0;var bt=this[0];if(!(bt&1))return 0;var It=bt&3;return It=It*(2-(bt&15)*It)&15,It=It*(2-(bt&255)*It)&255,It=It*(2-((bt&65535)*It&65535))&65535,It=It*(2-bt*It%this.DV)%this.DV,It>0?this.DV-It:-It}function Ze(bt){this.m=bt,this.mp=bt.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<bt.DB-15)-1,this.mt2=2*bt.t}function vr(bt){var It=g();return bt.abs().dlShiftTo(this.m.t,It),It.divRemTo(this.m,null,It),bt.s<0&&It.compareTo(p.ZERO)>0&&this.m.subTo(It,It),It}function Pr(bt){var It=g();return bt.copyTo(It),this.reduce(It),It}function Dr(bt){for(;bt.t<=this.mt2;)bt[bt.t++]=0;for(var It=0;It<this.m.t;++It){var Ht=bt[It]&32767,fe=Ht*this.mpl+((Ht*this.mph+(bt[It]>>15)*this.mpl&this.um)<<15)&bt.DM;for(Ht=It+this.m.t,bt[Ht]+=this.m.am(0,fe,bt,It,0,this.m.t);bt[Ht]>=bt.DV;)bt[Ht]-=bt.DV,bt[++Ht]++}bt.clamp(),bt.drShiftTo(this.m.t,bt),bt.compareTo(this.m)>=0&&bt.subTo(this.m,bt)}function Q(bt,It){bt.squareTo(It),this.reduce(It)}function k(bt,It,Ht){bt.multiplyTo(It,Ht),this.reduce(Ht)}Ze.prototype.convert=vr,Ze.prototype.revert=Pr,Ze.prototype.reduce=Dr,Ze.prototype.mulTo=k,Ze.prototype.sqrTo=Q;function Z(){return(this.t>0?this[0]&1:this.s)==0}function se(bt,It){if(bt>4294967295||bt<1)return p.ONE;var Ht=g(),fe=g(),Me=It.convert(this),We=Et(bt)-1;for(Me.copyTo(Ht);--We>=0;)if(It.sqrTo(Ht,fe),(bt&1<<We)>0)It.mulTo(fe,Me,Ht);else{var ir=Ht;Ht=fe,fe=ir}return It.revert(Ht)}function ye(bt,It){var Ht;return bt<256||It.isEven()?Ht=new Pe(It):Ht=new Ze(It),this.exp(bt,Ht)}p.prototype.copyTo=j,p.prototype.fromInt=it,p.prototype.fromString=K,p.prototype.clamp=H,p.prototype.dlShiftTo=Ft,p.prototype.drShiftTo=Xt,p.prototype.lShiftTo=ee,p.prototype.rShiftTo=ne,p.prototype.subTo=ae,p.prototype.multiplyTo=Le,p.prototype.squareTo=de,p.prototype.divRemTo=He,p.prototype.invDigit=Ve,p.prototype.isEven=Z,p.prototype.exp=se,p.prototype.toString=q,p.prototype.negate=pt,p.prototype.abs=yt,p.prototype.compareTo=Rt,p.prototype.bitLength=vt,p.prototype.mod=ze,p.prototype.modPowInt=ye,p.ZERO=ot(0),p.ONE=ot(1);function rr(){var bt=g();return this.copyTo(bt),bt}function dr(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function mr(){return this.t==0?this.s:this[0]<<24>>24}function ur(){return this.t==0?this.s:this[0]<<16>>16}function er(bt){return Math.floor(Math.LN2*this.DB/Math.log(bt))}function Gr(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function Lr(bt){if(bt==null&&(bt=10),this.signum()==0||bt<2||bt>36)return"0";var It=this.chunkSize(bt),Ht=Math.pow(bt,It),fe=ot(Ht),Me=g(),We=g(),ir="";for(this.divRemTo(fe,Me,We);Me.signum()>0;)ir=(Ht+We.intValue()).toString(bt).substr(1)+ir,Me.divRemTo(fe,Me,We);return We.intValue().toString(bt)+ir}function Br(bt,It){this.fromInt(0),It==null&&(It=10);for(var Ht=this.chunkSize(It),fe=Math.pow(It,Ht),Me=!1,We=0,ir=0,cr=0;cr<bt.length;++cr){var nn=X(bt,cr);if(nn<0){bt.charAt(cr)=="-"&&this.signum()==0&&(Me=!0);continue}ir=It*ir+nn,++We>=Ht&&(this.dMultiply(fe),this.dAddOffset(ir,0),We=0,ir=0)}We>0&&(this.dMultiply(Math.pow(It,We)),this.dAddOffset(ir,0)),Me&&p.ZERO.subTo(this,this)}function N(bt,It,Ht){if(typeof It=="number")if(bt<2)this.fromInt(1);else for(this.fromNumber(bt,Ht),this.testBit(bt-1)||this.bitwiseTo(p.ONE.shiftLeft(bt-1),Ut,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(It);)this.dAddOffset(2,0),this.bitLength()>bt&&this.subTo(p.ONE.shiftLeft(bt-1),this);else{var fe=new Array,Me=bt&7;fe.length=(bt>>3)+1,It.nextBytes(fe),Me>0?fe[0]&=(1<<Me)-1:fe[0]=0,this.fromString(fe,256)}}function f(){var bt=this.t,It=new Array;It[0]=this.s;var Ht=this.DB-bt*this.DB%8,fe,Me=0;if(bt-- >0)for(Ht<this.DB&&(fe=this[bt]>>Ht)!=(this.s&this.DM)>>Ht&&(It[Me++]=fe|this.s<<this.DB-Ht);bt>=0;)Ht<8?(fe=(this[bt]&(1<<Ht)-1)<<8-Ht,fe|=this[--bt]>>(Ht+=this.DB-8)):(fe=this[bt]>>(Ht-=8)&255,Ht<=0&&(Ht+=this.DB,--bt)),fe&128&&(fe|=-256),Me==0&&(this.s&128)!=(fe&128)&&++Me,(Me>0||fe!=this.s)&&(It[Me++]=fe);return It}function B(bt){return this.compareTo(bt)==0}function J(bt){return this.compareTo(bt)<0?this:bt}function St(bt){return this.compareTo(bt)>0?this:bt}function Pt(bt,It,Ht){var fe,Me,We=Math.min(bt.t,this.t);for(fe=0;fe<We;++fe)Ht[fe]=It(this[fe],bt[fe]);if(bt.t<this.t){for(Me=bt.s&this.DM,fe=We;fe<this.t;++fe)Ht[fe]=It(this[fe],Me);Ht.t=this.t}else{for(Me=this.s&this.DM,fe=We;fe<bt.t;++fe)Ht[fe]=It(Me,bt[fe]);Ht.t=bt.t}Ht.s=It(this.s,bt.s),Ht.clamp()}function et(bt,It){return bt&It}function zt(bt){var It=g();return this.bitwiseTo(bt,et,It),It}function Ut(bt,It){return bt|It}function _e(bt){var It=g();return this.bitwiseTo(bt,Ut,It),It}function xt(bt,It){return bt^It}function dt(bt){var It=g();return this.bitwiseTo(bt,xt,It),It}function tt(bt,It){return bt&~It}function F(bt){var It=g();return this.bitwiseTo(bt,tt,It),It}function rt(){for(var bt=g(),It=0;It<this.t;++It)bt[It]=this.DM&~this[It];return bt.t=this.t,bt.s=~this.s,bt}function At(bt){var It=g();return bt<0?this.rShiftTo(-bt,It):this.lShiftTo(bt,It),It}function Ct(bt){var It=g();return bt<0?this.lShiftTo(-bt,It):this.rShiftTo(bt,It),It}function Nt(bt){if(bt==0)return-1;var It=0;return bt&65535||(bt>>=16,It+=16),bt&255||(bt>>=8,It+=8),bt&15||(bt>>=4,It+=4),bt&3||(bt>>=2,It+=2),bt&1||++It,It}function Yt(){for(var bt=0;bt<this.t;++bt)if(this[bt]!=0)return bt*this.DB+Nt(this[bt]);return this.s<0?this.t*this.DB:-1}function Ce(bt){for(var It=0;bt!=0;)bt&=bt-1,++It;return It}function Qt(){for(var bt=0,It=this.s&this.DM,Ht=0;Ht<this.t;++Ht)bt+=Ce(this[Ht]^It);return bt}function Ee(bt){var It=Math.floor(bt/this.DB);return It>=this.t?this.s!=0:(this[It]&1<<bt%this.DB)!=0}function Be(bt,It){var Ht=p.ONE.shiftLeft(bt);return this.bitwiseTo(Ht,It,Ht),Ht}function sr(bt){return this.changeBit(bt,Ut)}function O(bt){return this.changeBit(bt,tt)}function le(bt){return this.changeBit(bt,xt)}function qt(bt,It){for(var Ht=0,fe=0,Me=Math.min(bt.t,this.t);Ht<Me;)fe+=this[Ht]+bt[Ht],It[Ht++]=fe&this.DM,fe>>=this.DB;if(bt.t<this.t){for(fe+=bt.s;Ht<this.t;)fe+=this[Ht],It[Ht++]=fe&this.DM,fe>>=this.DB;fe+=this.s}else{for(fe+=this.s;Ht<bt.t;)fe+=bt[Ht],It[Ht++]=fe&this.DM,fe>>=this.DB;fe+=bt.s}It.s=fe<0?-1:0,fe>0?It[Ht++]=fe:fe<-1&&(It[Ht++]=this.DV+fe),It.t=Ht,It.clamp()}function pe(bt){var It=g();return this.addTo(bt,It),It}function $t(bt){var It=g();return this.subTo(bt,It),It}function re(bt){var It=g();return this.multiplyTo(bt,It),It}function Re(){var bt=g();return this.squareTo(bt),bt}function De(bt){var It=g();return this.divRemTo(bt,It,null),It}function ke(bt){var It=g();return this.divRemTo(bt,null,It),It}function Ne(bt){var It=g(),Ht=g();return this.divRemTo(bt,It,Ht),new Array(It,Ht)}function tr(bt){this[this.t]=this.am(0,bt-1,this,0,0,this.t),++this.t,this.clamp()}function lr(bt,It){if(bt!=0){for(;this.t<=It;)this[this.t++]=0;for(this[It]+=bt;this[It]>=this.DV;)this[It]-=this.DV,++It>=this.t&&(this[this.t++]=0),++this[It]}}function or(){}function Ar(bt){return bt}function jr(bt,It,Ht){bt.multiplyTo(It,Ht)}function ln(bt,It){bt.squareTo(It)}or.prototype.convert=Ar,or.prototype.revert=Ar,or.prototype.mulTo=jr,or.prototype.sqrTo=ln;function cn(bt){return this.exp(bt,new or)}function Vr(bt,It,Ht){var fe=Math.min(this.t+bt.t,It);for(Ht.s=0,Ht.t=fe;fe>0;)Ht[--fe]=0;var Me;for(Me=Ht.t-this.t;fe<Me;++fe)Ht[fe+this.t]=this.am(0,bt[fe],Ht,fe,0,this.t);for(Me=Math.min(bt.t,It);fe<Me;++fe)this.am(0,bt[fe],Ht,fe,0,It-fe);Ht.clamp()}function yr(bt,It,Ht){--It;var fe=Ht.t=this.t+bt.t-It;for(Ht.s=0;--fe>=0;)Ht[fe]=0;for(fe=Math.max(It-this.t,0);fe<bt.t;++fe)Ht[this.t+fe-It]=this.am(It-fe,bt[fe],Ht,0,0,this.t+fe-It);Ht.clamp(),Ht.drShiftTo(1,Ht)}function Tr(bt){this.r2=g(),this.q3=g(),p.ONE.dlShiftTo(2*bt.t,this.r2),this.mu=this.r2.divide(bt),this.m=bt}function gn(bt){if(bt.s<0||bt.t>2*this.m.t)return bt.mod(this.m);if(bt.compareTo(this.m)<0)return bt;var It=g();return bt.copyTo(It),this.reduce(It),It}function Kn(bt){return bt}function Qr(bt){for(bt.drShiftTo(this.m.t-1,this.r2),bt.t>this.m.t+1&&(bt.t=this.m.t+1,bt.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);bt.compareTo(this.r2)<0;)bt.dAddOffset(1,this.m.t+1);for(bt.subTo(this.r2,bt);bt.compareTo(this.m)>=0;)bt.subTo(this.m,bt)}function Wn(bt,It){bt.squareTo(It),this.reduce(It)}function Sr(bt,It,Ht){bt.multiplyTo(It,Ht),this.reduce(Ht)}Tr.prototype.convert=gn,Tr.prototype.revert=Kn,Tr.prototype.reduce=Qr,Tr.prototype.mulTo=Sr,Tr.prototype.sqrTo=Wn;function bn(bt,It){var Ht=bt.bitLength(),fe,Me=ot(1),We;if(Ht<=0)return Me;Ht<18?fe=1:Ht<48?fe=3:Ht<144?fe=4:Ht<768?fe=5:fe=6,Ht<8?We=new Pe(It):It.isEven()?We=new Tr(It):We=new Ze(It);var ir=new Array,cr=3,nn=fe-1,en=(1<<fe)-1;if(ir[1]=We.convert(this),fe>1){var Er=g();for(We.sqrTo(ir[1],Er);cr<=en;)ir[cr]=g(),We.mulTo(Er,ir[cr-2],ir[cr]),cr+=2}var hs=bt.t-1,Ns,Si=!0,ws=g(),ds;for(Ht=Et(bt[hs])-1;hs>=0;){for(Ht>=nn?Ns=bt[hs]>>Ht-nn&en:(Ns=(bt[hs]&(1<<Ht+1)-1)<<nn-Ht,hs>0&&(Ns|=bt[hs-1]>>this.DB+Ht-nn)),cr=fe;!(Ns&1);)Ns>>=1,--cr;if((Ht-=cr)<0&&(Ht+=this.DB,--hs),Si)ir[Ns].copyTo(Me),Si=!1;else{for(;cr>1;)We.sqrTo(Me,ws),We.sqrTo(ws,Me),cr-=2;cr>0?We.sqrTo(Me,ws):(ds=Me,Me=ws,ws=ds),We.mulTo(ws,ir[Ns],Me)}for(;hs>=0&&!(bt[hs]&1<<Ht);)We.sqrTo(Me,ws),ds=Me,Me=ws,ws=ds,--Ht<0&&(Ht=this.DB-1,--hs)}return We.revert(Me)}function os(bt){var It=this.s<0?this.negate():this.clone(),Ht=bt.s<0?bt.negate():bt.clone();if(It.compareTo(Ht)<0){var fe=It;It=Ht,Ht=fe}var Me=It.getLowestSetBit(),We=Ht.getLowestSetBit();if(We<0)return It;for(Me<We&&(We=Me),We>0&&(It.rShiftTo(We,It),Ht.rShiftTo(We,Ht));It.signum()>0;)(Me=It.getLowestSetBit())>0&&It.rShiftTo(Me,It),(Me=Ht.getLowestSetBit())>0&&Ht.rShiftTo(Me,Ht),It.compareTo(Ht)>=0?(It.subTo(Ht,It),It.rShiftTo(1,It)):(Ht.subTo(It,Ht),Ht.rShiftTo(1,Ht));return We>0&&Ht.lShiftTo(We,Ht),Ht}function _n(bt){if(bt<=0)return 0;var It=this.DV%bt,Ht=this.s<0?bt-1:0;if(this.t>0)if(It==0)Ht=this[0]%bt;else for(var fe=this.t-1;fe>=0;--fe)Ht=(It*Ht+this[fe])%bt;return Ht}function Ps(bt){var It=bt.isEven();if(this.isEven()&&It||bt.signum()==0)return p.ZERO;for(var Ht=bt.clone(),fe=this.clone(),Me=ot(1),We=ot(0),ir=ot(0),cr=ot(1);Ht.signum()!=0;){for(;Ht.isEven();)Ht.rShiftTo(1,Ht),It?((!Me.isEven()||!We.isEven())&&(Me.addTo(this,Me),We.subTo(bt,We)),Me.rShiftTo(1,Me)):We.isEven()||We.subTo(bt,We),We.rShiftTo(1,We);for(;fe.isEven();)fe.rShiftTo(1,fe),It?((!ir.isEven()||!cr.isEven())&&(ir.addTo(this,ir),cr.subTo(bt,cr)),ir.rShiftTo(1,ir)):cr.isEven()||cr.subTo(bt,cr),cr.rShiftTo(1,cr);Ht.compareTo(fe)>=0?(Ht.subTo(fe,Ht),It&&Me.subTo(ir,Me),We.subTo(cr,We)):(fe.subTo(Ht,fe),It&&ir.subTo(Me,ir),cr.subTo(We,cr))}if(fe.compareTo(p.ONE)!=0)return p.ZERO;if(cr.compareTo(bt)>=0)return cr.subtract(bt);if(cr.signum()<0)cr.addTo(bt,cr);else return cr;return cr.signum()<0?cr.add(bt):cr}var Xr=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],Is=(1<<26)/Xr[Xr.length-1];function Ts(bt){var It,Ht=this.abs();if(Ht.t==1&&Ht[0]<=Xr[Xr.length-1]){for(It=0;It<Xr.length;++It)if(Ht[0]==Xr[It])return!0;return!1}if(Ht.isEven())return!1;for(It=1;It<Xr.length;){for(var fe=Xr[It],Me=It+1;Me<Xr.length&&fe<Is;)fe*=Xr[Me++];for(fe=Ht.modInt(fe);It<Me;)if(fe%Xr[It++]==0)return!1}return Ht.millerRabin(bt)}function Xs(bt){var It=this.subtract(p.ONE),Ht=It.getLowestSetBit();if(Ht<=0)return!1;var fe=It.shiftRight(Ht);bt=bt+1>>1,bt>Xr.length&&(bt=Xr.length);for(var Me=g(),We=0;We<bt;++We){Me.fromInt(Xr[Math.floor(Math.random()*Xr.length)]);var ir=Me.modPow(fe,this);if(ir.compareTo(p.ONE)!=0&&ir.compareTo(It)!=0){for(var cr=1;cr++<Ht&&ir.compareTo(It)!=0;)if(ir=ir.modPowInt(2,this),ir.compareTo(p.ONE)==0)return!1;if(ir.compareTo(It)!=0)return!1}}return!0}p.prototype.chunkSize=er,p.prototype.toRadix=Lr,p.prototype.fromRadix=Br,p.prototype.fromNumber=N,p.prototype.bitwiseTo=Pt,p.prototype.changeBit=Be,p.prototype.addTo=qt,p.prototype.dMultiply=tr,p.prototype.dAddOffset=lr,p.prototype.multiplyLowerTo=Vr,p.prototype.multiplyUpperTo=yr,p.prototype.modInt=_n,p.prototype.millerRabin=Xs,p.prototype.clone=rr,p.prototype.intValue=dr,p.prototype.byteValue=mr,p.prototype.shortValue=ur,p.prototype.signum=Gr,p.prototype.toByteArray=f,p.prototype.equals=B,p.prototype.min=J,p.prototype.max=St,p.prototype.and=zt,p.prototype.or=_e,p.prototype.xor=dt,p.prototype.andNot=F,p.prototype.not=rt,p.prototype.shiftLeft=At,p.prototype.shiftRight=Ct,p.prototype.getLowestSetBit=Yt,p.prototype.bitCount=Qt,p.prototype.testBit=Ee,p.prototype.setBit=sr,p.prototype.clearBit=O,p.prototype.flipBit=le,p.prototype.add=pe,p.prototype.subtract=$t,p.prototype.multiply=re,p.prototype.divide=De,p.prototype.remainder=ke,p.prototype.divideAndRemainder=Ne,p.prototype.modPow=bn,p.prototype.modInverse=Ps,p.prototype.pow=cn,p.prototype.gcd=os,p.prototype.isProbablePrime=Ts,p.prototype.square=Re,p.prototype.Barrett=Tr;var qs,as,In;function xi(bt){as[In++]^=bt&255,as[In++]^=bt>>8&255,as[In++]^=bt>>16&255,as[In++]^=bt>>24&255,In>=Cn&&(In-=Cn)}function Xn(){xi(new Date().getTime())}if(as==null){as=new Array,In=0;var ls;if(typeof window<"u"&&window.crypto){if(window.crypto.getRandomValues){var Mi=new Uint8Array(32);for(window.crypto.getRandomValues(Mi),ls=0;ls<32;++ls)as[In++]=Mi[ls]}else if(navigator.appName=="Netscape"&&navigator.appVersion<"5"){var Vi=window.crypto.random(32);for(ls=0;ls<Vi.length;++ls)as[In++]=Vi.charCodeAt(ls)&255}}for(;In<Cn;)ls=Math.floor(65536*Math.random()),as[In++]=ls>>>8,as[In++]=ls&255;In=0,Xn()}function _i(){if(qs==null){for(Xn(),qs=ns(),qs.init(as),In=0;In<as.length;++In)as[In]=0;In=0}return qs.next()}function cu(bt){var It;for(It=0;It<bt.length;++It)bt[It]=_i()}function mi(){}mi.prototype.nextBytes=cu;function qi(){this.i=0,this.j=0,this.S=new Array}function Bi(bt){var It,Ht,fe;for(It=0;It<256;++It)this.S[It]=It;for(Ht=0,It=0;It<256;++It)Ht=Ht+this.S[It]+bt[It%bt.length]&255,fe=this.S[It],this.S[It]=this.S[Ht],this.S[Ht]=fe;this.i=0,this.j=0}function ai(){var bt;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,bt=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=bt,this.S[bt+this.S[this.i]&255]}qi.prototype.init=Bi,qi.prototype.next=ai;function ns(){return new qi}var Cn=256;typeof t<"u"?t=r.exports={default:p,BigInteger:p,SecureRandom:mi}:this.jsbn={BigInteger:p,SecureRandom:mi}}).call(t)}),If=ce(t=>{(function(){"use strict";var r={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function n(m){return u(g(m),arguments)}function i(m,A){return n.apply(null,[m].concat(A||[]))}function u(m,A){var y=1,D=m.length,o,M="",W,w,U,nt,X,j,it,ot;for(W=0;W<D;W++)if(typeof m[W]=="string")M+=m[W];else if(typeof m[W]=="object"){if(U=m[W],U.keys)for(o=A[y],w=0;w<U.keys.length;w++){if(o==null)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',U.keys[w],U.keys[w-1]));o=o[U.keys[w]]}else U.param_no?o=A[U.param_no]:o=A[y++];if(r.not_type.test(U.type)&&r.not_primitive.test(U.type)&&o instanceof Function&&(o=o()),r.numeric_arg.test(U.type)&&typeof o!="number"&&isNaN(o))throw new TypeError(n("[sprintf] expecting number but found %T",o));switch(r.number.test(U.type)&&(it=o>=0),U.type){case"b":o=parseInt(o,10).toString(2);break;case"c":o=String.fromCharCode(parseInt(o,10));break;case"d":case"i":o=parseInt(o,10);break;case"j":o=JSON.stringify(o,null,U.width?parseInt(U.width):0);break;case"e":o=U.precision?parseFloat(o).toExponential(U.precision):parseFloat(o).toExponential();break;case"f":o=U.precision?parseFloat(o).toFixed(U.precision):parseFloat(o);break;case"g":o=U.precision?String(Number(o.toPrecision(U.precision))):parseFloat(o);break;case"o":o=(parseInt(o,10)>>>0).toString(8);break;case"s":o=String(o),o=U.precision?o.substring(0,U.precision):o;break;case"t":o=String(!!o),o=U.precision?o.substring(0,U.precision):o;break;case"T":o=Object.prototype.toString.call(o).slice(8,-1).toLowerCase(),o=U.precision?o.substring(0,U.precision):o;break;case"u":o=parseInt(o,10)>>>0;break;case"v":o=o.valueOf(),o=U.precision?o.substring(0,U.precision):o;break;case"x":o=(parseInt(o,10)>>>0).toString(16);break;case"X":o=(parseInt(o,10)>>>0).toString(16).toUpperCase();break}r.json.test(U.type)?M+=o:(r.number.test(U.type)&&(!it||U.sign)?(ot=it?"+":"-",o=o.toString().replace(r.sign,"")):ot="",X=U.pad_char?U.pad_char==="0"?"0":U.pad_char.charAt(1):" ",j=U.width-(ot+o).length,nt=U.width&&j>0?X.repeat(j):"",M+=U.align?ot+o+nt:X==="0"?ot+nt+o:nt+ot+o)}return M}var p=Object.create(null);function g(m){if(p[m])return p[m];for(var A=m,y,D=[],o=0;A;){if((y=r.text.exec(A))!==null)D.push(y[0]);else if((y=r.modulo.exec(A))!==null)D.push("%");else if((y=r.placeholder.exec(A))!==null){if(y[2]){o|=1;var M=[],W=y[2],w=[];if((w=r.key.exec(W))!==null)for(M.push(w[1]);(W=W.substring(w[0].length))!=="";)if((w=r.key_access.exec(W))!==null)M.push(w[1]);else if((w=r.index_access.exec(W))!==null)M.push(w[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");y[2]=M}else o|=2;if(o===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");D.push({placeholder:y[0],param_no:y[1],keys:y[2],sign:y[3],pad_char:y[4],align:y[5],width:y[6],precision:y[7],type:y[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");A=A.substring(y[0].length)}return p[m]=D}typeof t<"u"&&(t.sprintf=n,t.vsprintf=i),typeof window<"u"&&(window.sprintf=n,window.vsprintf=i,typeof define=="function"&&define.amd&&define(function(){return{sprintf:n,vsprintf:i}}))})()}),Sg=ce(t=>{"use strict";var r=t&&t.__createBinding||(Object.create?function(D,o,M,W){W===void 0&&(W=M);var w=Object.getOwnPropertyDescriptor(o,M);(!w||("get"in w?!o.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return o[M]}}),Object.defineProperty(D,W,w)}:function(D,o,M,W){W===void 0&&(W=M),D[W]=o[M]}),n=t&&t.__setModuleDefault||(Object.create?function(D,o){Object.defineProperty(D,"default",{enumerable:!0,value:o})}:function(D,o){D.default=o}),i=t&&t.__importStar||function(D){if(D&&D.__esModule)return D;var o={};if(D!=null)for(var M in D)M!=="default"&&Object.prototype.hasOwnProperty.call(D,M)&&r(o,D,M);return n(o,D),o};Object.defineProperty(t,"__esModule",{value:!0}),t.Address4=void 0;var u=i(bg()),p=i(_g()),g=Xd(),m=Dg(),A=If(),y=class Di{constructor(o){this.groups=p.GROUPS,this.parsedAddress=[],this.parsedSubnet="",this.subnet="/32",this.subnetMask=32,this.v4=!0,this.isCorrect=u.isCorrect(p.BITS),this.isInSubnet=u.isInSubnet,this.address=o;let M=p.RE_SUBNET_STRING.exec(o);if(M){if(this.parsedSubnet=M[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,this.subnetMask<0||this.subnetMask>p.BITS)throw new g.AddressError("Invalid subnet mask.");o=o.replace(p.RE_SUBNET_STRING,"")}this.addressMinusSuffix=o,this.parsedAddress=this.parse(o)}static isValid(o){try{return new Di(o),!0}catch{return!1}}parse(o){let M=o.split(".");if(!o.match(p.RE_ADDRESS))throw new g.AddressError("Invalid IPv4 address.");return M}correctForm(){return this.parsedAddress.map(o=>parseInt(o,10)).join(".")}static fromHex(o){let M=o.replace(/:/g,"").padStart(8,"0"),W=[],w;for(w=0;w<8;w+=2){let U=M.slice(w,w+2);W.push(parseInt(U,16))}return new Di(W.join("."))}static fromInteger(o){return Di.fromHex(o.toString(16))}static fromArpa(o){let M=o.replace(/(\.in-addr\.arpa)?\.$/,"").split(".").reverse().join(".");return new Di(M)}toHex(){return this.parsedAddress.map(o=>(0,A.sprintf)("%02x",parseInt(o,10))).join(":")}toArray(){return this.parsedAddress.map(o=>parseInt(o,10))}toGroup6(){let o=[],M;for(M=0;M<p.GROUPS;M+=2){let W=(0,A.sprintf)("%02x%02x",parseInt(this.parsedAddress[M],10),parseInt(this.parsedAddress[M+1],10));o.push((0,A.sprintf)("%x",parseInt(W,16)))}return o.join(":")}bigInteger(){return new m.BigInteger(this.parsedAddress.map(o=>(0,A.sprintf)("%02x",parseInt(o,10))).join(""),16)}_startAddress(){return new m.BigInteger(this.mask()+"0".repeat(p.BITS-this.subnetMask),2)}startAddress(){return Di.fromBigInteger(this._startAddress())}startAddressExclusive(){let o=new m.BigInteger("1");return Di.fromBigInteger(this._startAddress().add(o))}_endAddress(){return new m.BigInteger(this.mask()+"1".repeat(p.BITS-this.subnetMask),2)}endAddress(){return Di.fromBigInteger(this._endAddress())}endAddressExclusive(){let o=new m.BigInteger("1");return Di.fromBigInteger(this._endAddress().subtract(o))}static fromBigInteger(o){return Di.fromInteger(parseInt(o.toString(),10))}mask(o){return o===void 0&&(o=this.subnetMask),this.getBitsBase2(0,o)}getBitsBase2(o,M){return this.binaryZeroPad().slice(o,M)}reverseForm(o){o||(o={});let M=this.correctForm().split(".").reverse().join(".");return o.omitSuffix?M:(0,A.sprintf)("%s.in-addr.arpa.",M)}isMulticast(){return this.isInSubnet(new Di("224.0.0.0/4"))}binaryZeroPad(){return this.bigInteger().toString(2).padStart(p.BITS,"0")}groupForV6(){let o=this.parsedAddress;return this.address.replace(p.RE_ADDRESS,(0,A.sprintf)('<span class="hover-group group-v4 group-6">%s</span>.<span class="hover-group group-v4 group-7">%s</span>',o.slice(0,2).join("."),o.slice(2,4).join(".")))}};t.Address4=y}),Ig=ce(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RE_URL_WITH_PORT=t.RE_URL=t.RE_ZONE_STRING=t.RE_SUBNET_STRING=t.RE_BAD_ADDRESS=t.RE_BAD_CHARACTERS=t.TYPES=t.SCOPES=t.GROUPS=t.BITS=void 0,t.BITS=128,t.GROUPS=8,t.SCOPES={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"},t.TYPES={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"},t.RE_BAD_CHARACTERS=/([^0-9a-f:/%])/gi,t.RE_BAD_ADDRESS=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi,t.RE_SUBNET_STRING=/\/\d{1,3}(?=%|$)/,t.RE_ZONE_STRING=/%.*$/,t.RE_URL=new RegExp(/^\[{0,1}([0-9a-f:]+)\]{0,1}/),t.RE_URL_WITH_PORT=new RegExp(/\[([0-9a-f:]+)\]:([0-9]{1,5})/)}),Bg=ce(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.simpleGroup=t.spanLeadingZeroes=t.spanAll=t.spanAllZeroes=void 0;var r=If();function n(m){return m.replace(/(0+)/g,'<span class="zero">$1</span>')}t.spanAllZeroes=n;function i(m,A=0){return m.split("").map((y,D)=>(0,r.sprintf)('<span class="digit value-%s position-%d">%s</span>',y,D+A,n(y))).join("")}t.spanAll=i;function u(m){return m.replace(/^(0+)/,'<span class="zero">$1</span>')}function p(m){return m.split(":").map(A=>u(A)).join(":")}t.spanLeadingZeroes=p;function g(m,A=0){return m.split(":").map((y,D)=>/group-v4/.test(y)?y:(0,r.sprintf)('<span class="hover-group group-%d">%s</span>',D+A,u(y)))}t.simpleGroup=g}),YA=ce(t=>{"use strict";var r=t&&t.__createBinding||(Object.create?function(D,o,M,W){W===void 0&&(W=M);var w=Object.getOwnPropertyDescriptor(o,M);(!w||("get"in w?!o.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return o[M]}}),Object.defineProperty(D,W,w)}:function(D,o,M,W){W===void 0&&(W=M),D[W]=o[M]}),n=t&&t.__setModuleDefault||(Object.create?function(D,o){Object.defineProperty(D,"default",{enumerable:!0,value:o})}:function(D,o){D.default=o}),i=t&&t.__importStar||function(D){if(D&&D.__esModule)return D;var o={};if(D!=null)for(var M in D)M!=="default"&&Object.prototype.hasOwnProperty.call(D,M)&&r(o,D,M);return n(o,D),o};Object.defineProperty(t,"__esModule",{value:!0}),t.possibleElisions=t.simpleRegularExpression=t.ADDRESS_BOUNDARY=t.padGroup=t.groupPossibilities=void 0;var u=i(Ig()),p=If();function g(D){return(0,p.sprintf)("(%s)",D.join("|"))}t.groupPossibilities=g;function m(D){return D.length<4?(0,p.sprintf)("0{0,%d}%s",4-D.length,D):D}t.padGroup=m,t.ADDRESS_BOUNDARY="[^A-Fa-f0-9:]";function A(D){let o=[];D.forEach((W,w)=>{parseInt(W,16)===0&&o.push(w)});let M=o.map(W=>D.map((w,U)=>{if(U===W){let nt=U===0||U===u.GROUPS-1?":":"";return g([m(w),nt])}return m(w)}).join(":"));return M.push(D.map(m).join(":")),g(M)}t.simpleRegularExpression=A;function y(D,o,M){let W=o?"":":",w=M?"":":",U=[];!o&&!M&&U.push("::"),o&&M&&U.push(""),(M&&!o||!M&&o)&&U.push(":"),U.push((0,p.sprintf)("%s(:0{1,4}){1,%d}",W,D-1)),U.push((0,p.sprintf)("(0{1,4}:){1,%d}%s",D-1,w)),U.push((0,p.sprintf)("(0{1,4}:){%d}0{1,4}",D-1));for(let nt=1;nt<D-1;nt++)for(let X=1;X<D-nt;X++)U.push((0,p.sprintf)("(0{1,4}:){%d}:(0{1,4}:){%d}0{1,4}",X,D-X-nt-1));return g(U)}t.possibleElisions=y}),ZA=ce(t=>{"use strict";var r=t&&t.__createBinding||(Object.create?function(ot,K,H,q){q===void 0&&(q=H);var pt=Object.getOwnPropertyDescriptor(K,H);(!pt||("get"in pt?!K.__esModule:pt.writable||pt.configurable))&&(pt={enumerable:!0,get:function(){return K[H]}}),Object.defineProperty(ot,q,pt)}:function(ot,K,H,q){q===void 0&&(q=H),ot[q]=K[H]}),n=t&&t.__setModuleDefault||(Object.create?function(ot,K){Object.defineProperty(ot,"default",{enumerable:!0,value:K})}:function(ot,K){ot.default=K}),i=t&&t.__importStar||function(ot){if(ot&&ot.__esModule)return ot;var K={};if(ot!=null)for(var H in ot)H!=="default"&&Object.prototype.hasOwnProperty.call(ot,H)&&r(K,ot,H);return n(K,ot),K};Object.defineProperty(t,"__esModule",{value:!0}),t.Address6=void 0;var u=i(bg()),p=i(_g()),g=i(Ig()),m=i(Bg()),A=Sg(),y=YA(),D=Xd(),o=Dg(),M=If();function W(ot){if(!ot)throw new Error("Assertion failed.")}function w(ot){let K=/(\d+)(\d{3})/;for(;K.test(ot);)ot=ot.replace(K,"$1,$2");return ot}function U(ot){return ot=ot.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2'),ot=ot.replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2'),ot}function nt(ot,K){let H=[],q=[],pt;for(pt=0;pt<ot.length;pt++)pt<K[0]?H.push(ot[pt]):pt>K[1]&&q.push(ot[pt]);return H.concat(["compact"]).concat(q)}function X(ot){return(0,M.sprintf)("%04x",parseInt(ot,16))}function j(ot){return ot&255}var it=class Ss{constructor(K,H){this.addressMinusSuffix="",this.parsedSubnet="",this.subnet="/128",this.subnetMask=128,this.v4=!1,this.zone="",this.isInSubnet=u.isInSubnet,this.isCorrect=u.isCorrect(g.BITS),H===void 0?this.groups=g.GROUPS:this.groups=H,this.address=K;let q=g.RE_SUBNET_STRING.exec(K);if(q){if(this.parsedSubnet=q[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,Number.isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>g.BITS)throw new D.AddressError("Invalid subnet mask.");K=K.replace(g.RE_SUBNET_STRING,"")}else if(/\//.test(K))throw new D.AddressError("Invalid subnet mask.");let pt=g.RE_ZONE_STRING.exec(K);pt&&(this.zone=pt[0],K=K.replace(g.RE_ZONE_STRING,"")),this.addressMinusSuffix=K,this.parsedAddress=this.parse(this.addressMinusSuffix)}static isValid(K){try{return new Ss(K),!0}catch{return!1}}static fromBigInteger(K){let H=K.toString(16).padStart(32,"0"),q=[],pt;for(pt=0;pt<g.GROUPS;pt++)q.push(H.slice(pt*4,(pt+1)*4));return new Ss(q.join(":"))}static fromURL(K){let H,q=null,pt;if(K.indexOf("[")!==-1&&K.indexOf("]:")!==-1){if(pt=g.RE_URL_WITH_PORT.exec(K),pt===null)return{error:"failed to parse address with port",address:null,port:null};H=pt[1],q=pt[2]}else if(K.indexOf("/")!==-1){if(K=K.replace(/^[a-z0-9]+:\/\//,""),pt=g.RE_URL.exec(K),pt===null)return{error:"failed to parse address from URL",address:null,port:null};H=pt[1]}else H=K;return q?(q=parseInt(q,10),(q<0||q>65536)&&(q=null)):q=null,{address:new Ss(H),port:q}}static fromAddress4(K){let H=new A.Address4(K),q=g.BITS-(p.BITS-H.subnetMask);return new Ss(`::ffff:${H.correctForm()}/${q}`)}static fromArpa(K){let H=K.replace(/(\.ip6\.arpa)?\.$/,""),q=7;if(H.length!==63)throw new D.AddressError("Invalid 'ip6.arpa' form.");let pt=H.split(".").reverse();for(let yt=q;yt>0;yt--){let Rt=yt*4;pt.splice(Rt,0,":")}return H=pt.join(""),new Ss(H)}microsoftTranscription(){return(0,M.sprintf)("%s.ipv6-literal.net",this.correctForm().replace(/:/g,"-"))}mask(K=this.subnetMask){return this.getBitsBase2(0,K)}possibleSubnets(K=128){let H=g.BITS-this.subnetMask,q=Math.abs(K-g.BITS),pt=H-q;return pt<0?"0":w(new o.BigInteger("2",10).pow(pt).toString(10))}_startAddress(){return new o.BigInteger(this.mask()+"0".repeat(g.BITS-this.subnetMask),2)}startAddress(){return Ss.fromBigInteger(this._startAddress())}startAddressExclusive(){let K=new o.BigInteger("1");return Ss.fromBigInteger(this._startAddress().add(K))}_endAddress(){return new o.BigInteger(this.mask()+"1".repeat(g.BITS-this.subnetMask),2)}endAddress(){return Ss.fromBigInteger(this._endAddress())}endAddressExclusive(){let K=new o.BigInteger("1");return Ss.fromBigInteger(this._endAddress().subtract(K))}getScope(){let K=g.SCOPES[this.getBits(12,16).intValue()];return this.getType()==="Global unicast"&&K!=="Link local"&&(K="Global"),K||"Unknown"}getType(){for(let K of Object.keys(g.TYPES))if(this.isInSubnet(new Ss(K)))return g.TYPES[K];return"Global unicast"}getBits(K,H){return new o.BigInteger(this.getBitsBase2(K,H),2)}getBitsBase2(K,H){return this.binaryZeroPad().slice(K,H)}getBitsBase16(K,H){let q=H-K;if(q%4!==0)throw new Error("Length of bits to retrieve must be divisible by four");return this.getBits(K,H).toString(16).padStart(q/4,"0")}getBitsPastSubnet(){return this.getBitsBase2(this.subnetMask,g.BITS)}reverseForm(K){K||(K={});let H=Math.floor(this.subnetMask/4),q=this.canonicalForm().replace(/:/g,"").split("").slice(0,H).reverse().join(".");return H>0?K.omitSuffix?q:(0,M.sprintf)("%s.ip6.arpa.",q):K.omitSuffix?"":"ip6.arpa."}correctForm(){let K,H=[],q=0,pt=[];for(K=0;K<this.parsedAddress.length;K++){let Et=parseInt(this.parsedAddress[K],16);Et===0&&q++,Et!==0&&q>0&&(q>1&&pt.push([K-q,K-1]),q=0)}q>1&&pt.push([this.parsedAddress.length-q,this.parsedAddress.length-1]);let yt=pt.map(Et=>Et[1]-Et[0]+1);if(pt.length>0){let Et=yt.indexOf(Math.max(...yt));H=nt(this.parsedAddress,pt[Et])}else H=this.parsedAddress;for(K=0;K<H.length;K++)H[K]!=="compact"&&(H[K]=parseInt(H[K],16).toString(16));let Rt=H.join(":");return Rt=Rt.replace(/^compact$/,"::"),Rt=Rt.replace(/^compact|compact$/,":"),Rt=Rt.replace(/compact/,""),Rt}binaryZeroPad(){return this.bigInteger().toString(2).padStart(g.BITS,"0")}parse4in6(K){let H=K.split(":"),q=H.slice(-1)[0].match(p.RE_ADDRESS);if(q){this.parsedAddress4=q[0],this.address4=new A.Address4(this.parsedAddress4);for(let pt=0;pt<this.address4.groups;pt++)if(/^0[0-9]+/.test(this.address4.parsedAddress[pt]))throw new D.AddressError("IPv4 addresses can't have leading zeroes.",K.replace(p.RE_ADDRESS,this.address4.parsedAddress.map(U).join(".")));this.v4=!0,H[H.length-1]=this.address4.toGroup6(),K=H.join(":")}return K}parse(K){K=this.parse4in6(K);let H=K.match(g.RE_BAD_CHARACTERS);if(H)throw new D.AddressError((0,M.sprintf)("Bad character%s detected in address: %s",H.length>1?"s":"",H.join("")),K.replace(g.RE_BAD_CHARACTERS,'<span class="parse-error">$1</span>'));let q=K.match(g.RE_BAD_ADDRESS);if(q)throw new D.AddressError((0,M.sprintf)("Address failed regex: %s",q.join("")),K.replace(g.RE_BAD_ADDRESS,'<span class="parse-error">$1</span>'));let pt=[],yt=K.split("::");if(yt.length===2){let Rt=yt[0].split(":"),Et=yt[1].split(":");Rt.length===1&&Rt[0]===""&&(Rt=[]),Et.length===1&&Et[0]===""&&(Et=[]);let vt=this.groups-(Rt.length+Et.length);if(!vt)throw new D.AddressError("Error parsing groups");this.elidedGroups=vt,this.elisionBegin=Rt.length,this.elisionEnd=Rt.length+this.elidedGroups,pt=pt.concat(Rt);for(let Ft=0;Ft<vt;Ft++)pt.push("0");pt=pt.concat(Et)}else if(yt.length===1)pt=K.split(":"),this.elidedGroups=0;else throw new D.AddressError("Too many :: groups found");if(pt=pt.map(Rt=>(0,M.sprintf)("%x",parseInt(Rt,16))),pt.length!==this.groups)throw new D.AddressError("Incorrect number of groups found");return pt}canonicalForm(){return this.parsedAddress.map(X).join(":")}decimal(){return this.parsedAddress.map(K=>(0,M.sprintf)("%05d",parseInt(K,16))).join(":")}bigInteger(){return new o.BigInteger(this.parsedAddress.map(X).join(""),16)}to4(){let K=this.binaryZeroPad().split("");return A.Address4.fromHex(new o.BigInteger(K.slice(96,128).join(""),2).toString(16))}to4in6(){let K=this.to4(),H=new Ss(this.parsedAddress.slice(0,6).join(":"),6).correctForm(),q="";return/:$/.test(H)||(q=":"),H+q+K.address}inspectTeredo(){let K=this.getBitsBase16(0,32),H=this.getBits(80,96).xor(new o.BigInteger("ffff",16)).toString(),q=A.Address4.fromHex(this.getBitsBase16(32,64)),pt=A.Address4.fromHex(this.getBits(96,128).xor(new o.BigInteger("ffffffff",16)).toString(16)),yt=this.getBits(64,80),Rt=this.getBitsBase2(64,80),Et=yt.testBit(15),vt=yt.testBit(14),Ft=yt.testBit(8),Xt=yt.testBit(9),ee=new o.BigInteger(Rt.slice(2,6)+Rt.slice(8,16),2).toString(10);return{prefix:(0,M.sprintf)("%s:%s",K.slice(0,4),K.slice(4,8)),server4:q.address,client4:pt.address,flags:Rt,coneNat:Et,microsoft:{reserved:vt,universalLocal:Xt,groupIndividual:Ft,nonce:ee},udpPort:H}}inspect6to4(){let K=this.getBitsBase16(0,16),H=A.Address4.fromHex(this.getBitsBase16(16,48));return{prefix:(0,M.sprintf)("%s",K.slice(0,4)),gateway:H.address}}to6to4(){if(!this.is4())return null;let K=["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":");return new Ss(K)}toByteArray(){let K=this.bigInteger().toByteArray();return K.length===17&&K[0]===0?K.slice(1):K}toUnsignedByteArray(){return this.toByteArray().map(j)}static fromByteArray(K){return this.fromUnsignedByteArray(K.map(j))}static fromUnsignedByteArray(K){let H=new o.BigInteger("256",10),q=new o.BigInteger("0",10),pt=new o.BigInteger("1",10);for(let yt=K.length-1;yt>=0;yt--)q=q.add(pt.multiply(new o.BigInteger(K[yt].toString(10),10))),pt=pt.multiply(H);return Ss.fromBigInteger(q)}isCanonical(){return this.addressMinusSuffix===this.canonicalForm()}isLinkLocal(){return this.getBitsBase2(0,64)==="1111111010000000000000000000000000000000000000000000000000000000"}isMulticast(){return this.getType()==="Multicast"}is4(){return this.v4}isTeredo(){return this.isInSubnet(new Ss("2001::/32"))}is6to4(){return this.isInSubnet(new Ss("2002::/16"))}isLoopback(){return this.getType()==="Loopback"}href(K){return K===void 0?K="":K=(0,M.sprintf)(":%s",K),(0,M.sprintf)("http://[%s]%s/",this.correctForm(),K)}link(K){K||(K={}),K.className===void 0&&(K.className=""),K.prefix===void 0&&(K.prefix="/#address="),K.v4===void 0&&(K.v4=!1);let H=this.correctForm;return K.v4&&(H=this.to4in6),K.className?(0,M.sprintf)('<a href="%1$s%2$s" class="%3$s">%2$s</a>',K.prefix,H.call(this),K.className):(0,M.sprintf)('<a href="%1$s%2$s">%2$s</a>',K.prefix,H.call(this))}group(){if(this.elidedGroups===0)return m.simpleGroup(this.address).join(":");W(typeof this.elidedGroups=="number"),W(typeof this.elisionBegin=="number");let K=[],[H,q]=this.address.split("::");H.length?K.push(...m.simpleGroup(H)):K.push("");let pt=["hover-group"];for(let yt=this.elisionBegin;yt<this.elisionBegin+this.elidedGroups;yt++)pt.push((0,M.sprintf)("group-%d",yt));return K.push((0,M.sprintf)('<span class="%s"></span>',pt.join(" "))),q.length?K.push(...m.simpleGroup(q,this.elisionEnd)):K.push(""),this.is4()&&(W(this.address4 instanceof A.Address4),K.pop(),K.push(this.address4.groupForV6())),K.join(":")}regularExpressionString(K=!1){let H=[],q=new Ss(this.correctForm());if(q.elidedGroups===0)H.push((0,y.simpleRegularExpression)(q.parsedAddress));else if(q.elidedGroups===g.GROUPS)H.push((0,y.possibleElisions)(g.GROUPS));else{let pt=q.address.split("::");pt[0].length&&H.push((0,y.simpleRegularExpression)(pt[0].split(":"))),W(typeof q.elidedGroups=="number"),H.push((0,y.possibleElisions)(q.elidedGroups,pt[0].length!==0,pt[1].length!==0)),pt[1].length&&H.push((0,y.simpleRegularExpression)(pt[1].split(":"))),H=[H.join(":")]}return K||(H=["(?=^|",y.ADDRESS_BOUNDARY,"|[^\\w\\:])(",...H,")(?=[^\\w\\:]|",y.ADDRESS_BOUNDARY,"|$)"]),H.join("")}regularExpression(K=!1){return new RegExp(this.regularExpressionString(K),"i")}};t.Address6=it}),QA=ce(t=>{"use strict";var r=t&&t.__createBinding||(Object.create?function(A,y,D,o){o===void 0&&(o=D);var M=Object.getOwnPropertyDescriptor(y,D);(!M||("get"in M?!y.__esModule:M.writable||M.configurable))&&(M={enumerable:!0,get:function(){return y[D]}}),Object.defineProperty(A,o,M)}:function(A,y,D,o){o===void 0&&(o=D),A[o]=y[D]}),n=t&&t.__setModuleDefault||(Object.create?function(A,y){Object.defineProperty(A,"default",{enumerable:!0,value:y})}:function(A,y){A.default=y}),i=t&&t.__importStar||function(A){if(A&&A.__esModule)return A;var y={};if(A!=null)for(var D in A)D!=="default"&&Object.prototype.hasOwnProperty.call(A,D)&&r(y,A,D);return n(y,A),y};Object.defineProperty(t,"__esModule",{value:!0}),t.v6=t.AddressError=t.Address6=t.Address4=void 0;var u=Sg();Object.defineProperty(t,"Address4",{enumerable:!0,get:function(){return u.Address4}});var p=ZA();Object.defineProperty(t,"Address6",{enumerable:!0,get:function(){return p.Address6}});var g=Xd();Object.defineProperty(t,"AddressError",{enumerable:!0,get:function(){return g.AddressError}});var m=i(Bg());t.v6={helpers:m}}),sy=ce(t=>{"use strict";t.byteLength=A,t.toByteArray=D,t.fromByteArray=W;var r=[],n=[],i=typeof Uint8Array<"u"?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(p=0,g=u.length;p<g;++p)r[p]=u[p],n[u.charCodeAt(p)]=p;var p,g;n[45]=62,n[95]=63;function m(w){var U=w.length;if(U%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var nt=w.indexOf("=");nt===-1&&(nt=U);var X=nt===U?0:4-nt%4;return[nt,X]}function A(w){var U=m(w),nt=U[0],X=U[1];return(nt+X)*3/4-X}function y(w,U,nt){return(U+nt)*3/4-nt}function D(w){var U,nt=m(w),X=nt[0],j=nt[1],it=new i(y(w,X,j)),ot=0,K=j>0?X-4:X,H;for(H=0;H<K;H+=4)U=n[w.charCodeAt(H)]<<18|n[w.charCodeAt(H+1)]<<12|n[w.charCodeAt(H+2)]<<6|n[w.charCodeAt(H+3)],it[ot++]=U>>16&255,it[ot++]=U>>8&255,it[ot++]=U&255;return j===2&&(U=n[w.charCodeAt(H)]<<2|n[w.charCodeAt(H+1)]>>4,it[ot++]=U&255),j===1&&(U=n[w.charCodeAt(H)]<<10|n[w.charCodeAt(H+1)]<<4|n[w.charCodeAt(H+2)]>>2,it[ot++]=U>>8&255,it[ot++]=U&255),it}function o(w){return r[w>>18&63]+r[w>>12&63]+r[w>>6&63]+r[w&63]}function M(w,U,nt){for(var X,j=[],it=U;it<nt;it+=3)X=(w[it]<<16&16711680)+(w[it+1]<<8&65280)+(w[it+2]&255),j.push(o(X));return j.join("")}function W(w){for(var U,nt=w.length,X=nt%3,j=[],it=16383,ot=0,K=nt-X;ot<K;ot+=it)j.push(M(w,ot,ot+it>K?K:ot+it));return X===1?(U=w[nt-1],j.push(r[U>>2]+r[U<<4&63]+"==")):X===2&&(U=(w[nt-2]<<8)+w[nt-1],j.push(r[U>>10]+r[U>>4&63]+r[U<<2&63]+"=")),j.join("")}}),ay=ce(t=>{t.read=function(r,n,i,u,p){var g,m,A=p*8-u-1,y=(1<<A)-1,D=y>>1,o=-7,M=i?p-1:0,W=i?-1:1,w=r[n+M];for(M+=W,g=w&(1<<-o)-1,w>>=-o,o+=A;o>0;g=g*256+r[n+M],M+=W,o-=8);for(m=g&(1<<-o)-1,g>>=-o,o+=u;o>0;m=m*256+r[n+M],M+=W,o-=8);if(g===0)g=1-D;else{if(g===y)return m?NaN:(w?-1:1)*(1/0);m=m+Math.pow(2,u),g=g-D}return(w?-1:1)*m*Math.pow(2,g-u)},t.write=function(r,n,i,u,p,g){var m,A,y,D=g*8-p-1,o=(1<<D)-1,M=o>>1,W=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=u?0:g-1,U=u?1:-1,nt=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(A=isNaN(n)?1:0,m=o):(m=Math.floor(Math.log(n)/Math.LN2),n*(y=Math.pow(2,-m))<1&&(m--,y*=2),m+M>=1?n+=W/y:n+=W*Math.pow(2,1-M),n*y>=2&&(m++,y/=2),m+M>=o?(A=0,m=o):m+M>=1?(A=(n*y-1)*Math.pow(2,p),m=m+M):(A=n*Math.pow(2,M-1)*Math.pow(2,p),m=0));p>=8;r[i+w]=A&255,w+=U,A/=256,p-=8);for(m=m<<p|A,D+=p;D>0;r[i+w]=m&255,w+=U,m/=256,D-=8);r[i+w-U]|=nt*128}}),l0=ce(t=>{"use strict";var r=sy(),n=ay(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=m,t.SlowBuffer=j,t.INSPECT_MAX_BYTES=50;var u=2147483647;t.kMaxLength=u,m.TYPED_ARRAY_SUPPORT=p(),!m.TYPED_ARRAY_SUPPORT&&typeof console<"u";function p(){try{let f=new Uint8Array(1),B={foo:function(){return 42}};return Object.setPrototypeOf(B,Uint8Array.prototype),Object.setPrototypeOf(f,B),f.foo()===42}catch{return!1}}Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.buffer}}),Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.byteOffset}});function g(f){if(f>u)throw new RangeError('The value "'+f+'" is invalid for option "size"');let B=new Uint8Array(f);return Object.setPrototypeOf(B,m.prototype),B}function m(f,B,J){if(typeof f=="number"){if(typeof B=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return o(f)}return A(f,B,J)}m.poolSize=8192;function A(f,B,J){if(typeof f=="string")return M(f,B);if(ArrayBuffer.isView(f))return w(f);if(f==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(er(f,ArrayBuffer)||f&&er(f.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(er(f,SharedArrayBuffer)||f&&er(f.buffer,SharedArrayBuffer)))return U(f,B,J);if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let St=f.valueOf&&f.valueOf();if(St!=null&&St!==f)return m.from(St,B,J);let Pt=nt(f);if(Pt)return Pt;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof f[Symbol.toPrimitive]=="function")return m.from(f[Symbol.toPrimitive]("string"),B,J);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f)}m.from=function(f,B,J){return A(f,B,J)},Object.setPrototypeOf(m.prototype,Uint8Array.prototype),Object.setPrototypeOf(m,Uint8Array);function y(f){if(typeof f!="number")throw new TypeError('"size" argument must be of type number');if(f<0)throw new RangeError('The value "'+f+'" is invalid for option "size"')}function D(f,B,J){return y(f),f<=0?g(f):B!==void 0?typeof J=="string"?g(f).fill(B,J):g(f).fill(B):g(f)}m.alloc=function(f,B,J){return D(f,B,J)};function o(f){return y(f),g(f<0?0:X(f)|0)}m.allocUnsafe=function(f){return o(f)},m.allocUnsafeSlow=function(f){return o(f)};function M(f,B){if((typeof B!="string"||B==="")&&(B="utf8"),!m.isEncoding(B))throw new TypeError("Unknown encoding: "+B);let J=it(f,B)|0,St=g(J),Pt=St.write(f,B);return Pt!==J&&(St=St.slice(0,Pt)),St}function W(f){let B=f.length<0?0:X(f.length)|0,J=g(B);for(let St=0;St<B;St+=1)J[St]=f[St]&255;return J}function w(f){if(er(f,Uint8Array)){let B=new Uint8Array(f);return U(B.buffer,B.byteOffset,B.byteLength)}return W(f)}function U(f,B,J){if(B<0||f.byteLength<B)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<B+(J||0))throw new RangeError('"length" is outside of buffer bounds');let St;return B===void 0&&J===void 0?St=new Uint8Array(f):J===void 0?St=new Uint8Array(f,B):St=new Uint8Array(f,B,J),Object.setPrototypeOf(St,m.prototype),St}function nt(f){if(m.isBuffer(f)){let B=X(f.length)|0,J=g(B);return J.length===0||f.copy(J,0,0,B),J}if(f.length!==void 0)return typeof f.length!="number"||Gr(f.length)?g(0):W(f);if(f.type==="Buffer"&&Array.isArray(f.data))return W(f.data)}function X(f){if(f>=u)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u.toString(16)+" bytes");return f|0}function j(f){return+f!=f&&(f=0),m.alloc(+f)}m.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==m.prototype},m.compare=function(f,B){if(er(f,Uint8Array)&&(f=m.from(f,f.offset,f.byteLength)),er(B,Uint8Array)&&(B=m.from(B,B.offset,B.byteLength)),!m.isBuffer(f)||!m.isBuffer(B))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===B)return 0;let J=f.length,St=B.length;for(let Pt=0,et=Math.min(J,St);Pt<et;++Pt)if(f[Pt]!==B[Pt]){J=f[Pt],St=B[Pt];break}return J<St?-1:St<J?1:0},m.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.concat=function(f,B){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return m.alloc(0);let J;if(B===void 0)for(B=0,J=0;J<f.length;++J)B+=f[J].length;let St=m.allocUnsafe(B),Pt=0;for(J=0;J<f.length;++J){let et=f[J];if(er(et,Uint8Array))Pt+et.length>St.length?(m.isBuffer(et)||(et=m.from(et)),et.copy(St,Pt)):Uint8Array.prototype.set.call(St,et,Pt);else if(m.isBuffer(et))et.copy(St,Pt);else throw new TypeError('"list" argument must be an Array of Buffers');Pt+=et.length}return St};function it(f,B){if(m.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||er(f,ArrayBuffer))return f.byteLength;if(typeof f!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);let J=f.length,St=arguments.length>2&&arguments[2]===!0;if(!St&&J===0)return 0;let Pt=!1;for(;;)switch(B){case"ascii":case"latin1":case"binary":return J;case"utf8":case"utf-8":return ye(f).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J*2;case"hex":return J>>>1;case"base64":return mr(f).length;default:if(Pt)return St?-1:ye(f).length;B=(""+B).toLowerCase(),Pt=!0}}m.byteLength=it;function ot(f,B,J){let St=!1;if((B===void 0||B<0)&&(B=0),B>this.length||((J===void 0||J>this.length)&&(J=this.length),J<=0)||(J>>>=0,B>>>=0,J<=B))return"";for(f||(f="utf8");;)switch(f){case"hex":return de(this,B,J);case"utf8":case"utf-8":return Xt(this,B,J);case"ascii":return ae(this,B,J);case"latin1":case"binary":return Le(this,B,J);case"base64":return Ft(this,B,J);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return He(this,B,J);default:if(St)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase(),St=!0}}m.prototype._isBuffer=!0;function K(f,B,J){let St=f[B];f[B]=f[J],f[J]=St}m.prototype.swap16=function(){let f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let B=0;B<f;B+=2)K(this,B,B+1);return this},m.prototype.swap32=function(){let f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let B=0;B<f;B+=4)K(this,B,B+3),K(this,B+1,B+2);return this},m.prototype.swap64=function(){let f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let B=0;B<f;B+=8)K(this,B,B+7),K(this,B+1,B+6),K(this,B+2,B+5),K(this,B+3,B+4);return this},m.prototype.toString=function(){let f=this.length;return f===0?"":arguments.length===0?Xt(this,0,f):ot.apply(this,arguments)},m.prototype.toLocaleString=m.prototype.toString,m.prototype.equals=function(f){if(!m.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:m.compare(this,f)===0},m.prototype.inspect=function(){let f="",B=t.INSPECT_MAX_BYTES;return f=this.toString("hex",0,B).replace(/(.{2})/g,"$1 ").trim(),this.length>B&&(f+=" ... "),"<Buffer "+f+">"},i&&(m.prototype[i]=m.prototype.inspect),m.prototype.compare=function(f,B,J,St,Pt){if(er(f,Uint8Array)&&(f=m.from(f,f.offset,f.byteLength)),!m.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(B===void 0&&(B=0),J===void 0&&(J=f?f.length:0),St===void 0&&(St=0),Pt===void 0&&(Pt=this.length),B<0||J>f.length||St<0||Pt>this.length)throw new RangeError("out of range index");if(St>=Pt&&B>=J)return 0;if(St>=Pt)return-1;if(B>=J)return 1;if(B>>>=0,J>>>=0,St>>>=0,Pt>>>=0,this===f)return 0;let et=Pt-St,zt=J-B,Ut=Math.min(et,zt),_e=this.slice(St,Pt),xt=f.slice(B,J);for(let dt=0;dt<Ut;++dt)if(_e[dt]!==xt[dt]){et=_e[dt],zt=xt[dt];break}return et<zt?-1:zt<et?1:0};function H(f,B,J,St,Pt){if(f.length===0)return-1;if(typeof J=="string"?(St=J,J=0):J>2147483647?J=2147483647:J<-2147483648&&(J=-2147483648),J=+J,Gr(J)&&(J=Pt?0:f.length-1),J<0&&(J=f.length+J),J>=f.length){if(Pt)return-1;J=f.length-1}else if(J<0)if(Pt)J=0;else return-1;if(typeof B=="string"&&(B=m.from(B,St)),m.isBuffer(B))return B.length===0?-1:q(f,B,J,St,Pt);if(typeof B=="number")return B=B&255,typeof Uint8Array.prototype.indexOf=="function"?Pt?Uint8Array.prototype.indexOf.call(f,B,J):Uint8Array.prototype.lastIndexOf.call(f,B,J):q(f,[B],J,St,Pt);throw new TypeError("val must be string, number or Buffer")}function q(f,B,J,St,Pt){let et=1,zt=f.length,Ut=B.length;if(St!==void 0&&(St=String(St).toLowerCase(),St==="ucs2"||St==="ucs-2"||St==="utf16le"||St==="utf-16le")){if(f.length<2||B.length<2)return-1;et=2,zt/=2,Ut/=2,J/=2}function _e(dt,tt){return et===1?dt[tt]:dt.readUInt16BE(tt*et)}let xt;if(Pt){let dt=-1;for(xt=J;xt<zt;xt++)if(_e(f,xt)===_e(B,dt===-1?0:xt-dt)){if(dt===-1&&(dt=xt),xt-dt+1===Ut)return dt*et}else dt!==-1&&(xt-=xt-dt),dt=-1}else for(J+Ut>zt&&(J=zt-Ut),xt=J;xt>=0;xt--){let dt=!0;for(let tt=0;tt<Ut;tt++)if(_e(f,xt+tt)!==_e(B,tt)){dt=!1;break}if(dt)return xt}return-1}m.prototype.includes=function(f,B,J){return this.indexOf(f,B,J)!==-1},m.prototype.indexOf=function(f,B,J){return H(this,f,B,J,!0)},m.prototype.lastIndexOf=function(f,B,J){return H(this,f,B,J,!1)};function pt(f,B,J,St){J=Number(J)||0;let Pt=f.length-J;St?(St=Number(St),St>Pt&&(St=Pt)):St=Pt;let et=B.length;St>et/2&&(St=et/2);let zt;for(zt=0;zt<St;++zt){let Ut=parseInt(B.substr(zt*2,2),16);if(Gr(Ut))return zt;f[J+zt]=Ut}return zt}function yt(f,B,J,St){return ur(ye(B,f.length-J),f,J,St)}function Rt(f,B,J,St){return ur(rr(B),f,J,St)}function Et(f,B,J,St){return ur(mr(B),f,J,St)}function vt(f,B,J,St){return ur(dr(B,f.length-J),f,J,St)}m.prototype.write=function(f,B,J,St){if(B===void 0)St="utf8",J=this.length,B=0;else if(J===void 0&&typeof B=="string")St=B,J=this.length,B=0;else if(isFinite(B))B=B>>>0,isFinite(J)?(J=J>>>0,St===void 0&&(St="utf8")):(St=J,J=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let Pt=this.length-B;if((J===void 0||J>Pt)&&(J=Pt),f.length>0&&(J<0||B<0)||B>this.length)throw new RangeError("Attempt to write outside buffer bounds");St||(St="utf8");let et=!1;for(;;)switch(St){case"hex":return pt(this,f,B,J);case"utf8":case"utf-8":return yt(this,f,B,J);case"ascii":case"latin1":case"binary":return Rt(this,f,B,J);case"base64":return Et(this,f,B,J);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return vt(this,f,B,J);default:if(et)throw new TypeError("Unknown encoding: "+St);St=(""+St).toLowerCase(),et=!0}},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ft(f,B,J){return B===0&&J===f.length?r.fromByteArray(f):r.fromByteArray(f.slice(B,J))}function Xt(f,B,J){J=Math.min(f.length,J);let St=[],Pt=B;for(;Pt<J;){let et=f[Pt],zt=null,Ut=et>239?4:et>223?3:et>191?2:1;if(Pt+Ut<=J){let _e,xt,dt,tt;switch(Ut){case 1:et<128&&(zt=et);break;case 2:_e=f[Pt+1],(_e&192)===128&&(tt=(et&31)<<6|_e&63,tt>127&&(zt=tt));break;case 3:_e=f[Pt+1],xt=f[Pt+2],(_e&192)===128&&(xt&192)===128&&(tt=(et&15)<<12|(_e&63)<<6|xt&63,tt>2047&&(tt<55296||tt>57343)&&(zt=tt));break;case 4:_e=f[Pt+1],xt=f[Pt+2],dt=f[Pt+3],(_e&192)===128&&(xt&192)===128&&(dt&192)===128&&(tt=(et&15)<<18|(_e&63)<<12|(xt&63)<<6|dt&63,tt>65535&&tt<1114112&&(zt=tt))}}zt===null?(zt=65533,Ut=1):zt>65535&&(zt-=65536,St.push(zt>>>10&1023|55296),zt=56320|zt&1023),St.push(zt),Pt+=Ut}return ne(St)}var ee=4096;function ne(f){let B=f.length;if(B<=ee)return String.fromCharCode.apply(String,f);let J="",St=0;for(;St<B;)J+=String.fromCharCode.apply(String,f.slice(St,St+=ee));return J}function ae(f,B,J){let St="";J=Math.min(f.length,J);for(let Pt=B;Pt<J;++Pt)St+=String.fromCharCode(f[Pt]&127);return St}function Le(f,B,J){let St="";J=Math.min(f.length,J);for(let Pt=B;Pt<J;++Pt)St+=String.fromCharCode(f[Pt]);return St}function de(f,B,J){let St=f.length;(!B||B<0)&&(B=0),(!J||J<0||J>St)&&(J=St);let Pt="";for(let et=B;et<J;++et)Pt+=Lr[f[et]];return Pt}function He(f,B,J){let St=f.slice(B,J),Pt="";for(let et=0;et<St.length-1;et+=2)Pt+=String.fromCharCode(St[et]+St[et+1]*256);return Pt}m.prototype.slice=function(f,B){let J=this.length;f=~~f,B=B===void 0?J:~~B,f<0?(f+=J,f<0&&(f=0)):f>J&&(f=J),B<0?(B+=J,B<0&&(B=0)):B>J&&(B=J),B<f&&(B=f);let St=this.subarray(f,B);return Object.setPrototypeOf(St,m.prototype),St};function ze(f,B,J){if(f%1!==0||f<0)throw new RangeError("offset is not uint");if(f+B>J)throw new RangeError("Trying to access beyond buffer length")}m.prototype.readUintLE=m.prototype.readUIntLE=function(f,B,J){f=f>>>0,B=B>>>0,J||ze(f,B,this.length);let St=this[f],Pt=1,et=0;for(;++et<B&&(Pt*=256);)St+=this[f+et]*Pt;return St},m.prototype.readUintBE=m.prototype.readUIntBE=function(f,B,J){f=f>>>0,B=B>>>0,J||ze(f,B,this.length);let St=this[f+--B],Pt=1;for(;B>0&&(Pt*=256);)St+=this[f+--B]*Pt;return St},m.prototype.readUint8=m.prototype.readUInt8=function(f,B){return f=f>>>0,B||ze(f,1,this.length),this[f]},m.prototype.readUint16LE=m.prototype.readUInt16LE=function(f,B){return f=f>>>0,B||ze(f,2,this.length),this[f]|this[f+1]<<8},m.prototype.readUint16BE=m.prototype.readUInt16BE=function(f,B){return f=f>>>0,B||ze(f,2,this.length),this[f]<<8|this[f+1]},m.prototype.readUint32LE=m.prototype.readUInt32LE=function(f,B){return f=f>>>0,B||ze(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},m.prototype.readUint32BE=m.prototype.readUInt32BE=function(f,B){return f=f>>>0,B||ze(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},m.prototype.readBigUInt64LE=Br(function(f){f=f>>>0,Q(f,"offset");let B=this[f],J=this[f+7];(B===void 0||J===void 0)&&k(f,this.length-8);let St=B+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24,Pt=this[++f]+this[++f]*2**8+this[++f]*2**16+J*2**24;return BigInt(St)+(BigInt(Pt)<<BigInt(32))}),m.prototype.readBigUInt64BE=Br(function(f){f=f>>>0,Q(f,"offset");let B=this[f],J=this[f+7];(B===void 0||J===void 0)&&k(f,this.length-8);let St=B*2**24+this[++f]*2**16+this[++f]*2**8+this[++f],Pt=this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+J;return(BigInt(St)<<BigInt(32))+BigInt(Pt)}),m.prototype.readIntLE=function(f,B,J){f=f>>>0,B=B>>>0,J||ze(f,B,this.length);let St=this[f],Pt=1,et=0;for(;++et<B&&(Pt*=256);)St+=this[f+et]*Pt;return Pt*=128,St>=Pt&&(St-=Math.pow(2,8*B)),St},m.prototype.readIntBE=function(f,B,J){f=f>>>0,B=B>>>0,J||ze(f,B,this.length);let St=B,Pt=1,et=this[f+--St];for(;St>0&&(Pt*=256);)et+=this[f+--St]*Pt;return Pt*=128,et>=Pt&&(et-=Math.pow(2,8*B)),et},m.prototype.readInt8=function(f,B){return f=f>>>0,B||ze(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},m.prototype.readInt16LE=function(f,B){f=f>>>0,B||ze(f,2,this.length);let J=this[f]|this[f+1]<<8;return J&32768?J|4294901760:J},m.prototype.readInt16BE=function(f,B){f=f>>>0,B||ze(f,2,this.length);let J=this[f+1]|this[f]<<8;return J&32768?J|4294901760:J},m.prototype.readInt32LE=function(f,B){return f=f>>>0,B||ze(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},m.prototype.readInt32BE=function(f,B){return f=f>>>0,B||ze(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},m.prototype.readBigInt64LE=Br(function(f){f=f>>>0,Q(f,"offset");let B=this[f],J=this[f+7];(B===void 0||J===void 0)&&k(f,this.length-8);let St=this[f+4]+this[f+5]*2**8+this[f+6]*2**16+(J<<24);return(BigInt(St)<<BigInt(32))+BigInt(B+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24)}),m.prototype.readBigInt64BE=Br(function(f){f=f>>>0,Q(f,"offset");let B=this[f],J=this[f+7];(B===void 0||J===void 0)&&k(f,this.length-8);let St=(B<<24)+this[++f]*2**16+this[++f]*2**8+this[++f];return(BigInt(St)<<BigInt(32))+BigInt(this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+J)}),m.prototype.readFloatLE=function(f,B){return f=f>>>0,B||ze(f,4,this.length),n.read(this,f,!0,23,4)},m.prototype.readFloatBE=function(f,B){return f=f>>>0,B||ze(f,4,this.length),n.read(this,f,!1,23,4)},m.prototype.readDoubleLE=function(f,B){return f=f>>>0,B||ze(f,8,this.length),n.read(this,f,!0,52,8)},m.prototype.readDoubleBE=function(f,B){return f=f>>>0,B||ze(f,8,this.length),n.read(this,f,!1,52,8)};function Pe(f,B,J,St,Pt,et){if(!m.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(B>Pt||B<et)throw new RangeError('"value" argument is out of bounds');if(J+St>f.length)throw new RangeError("Index out of range")}m.prototype.writeUintLE=m.prototype.writeUIntLE=function(f,B,J,St){if(f=+f,B=B>>>0,J=J>>>0,!St){let zt=Math.pow(2,8*J)-1;Pe(this,f,B,J,zt,0)}let Pt=1,et=0;for(this[B]=f&255;++et<J&&(Pt*=256);)this[B+et]=f/Pt&255;return B+J},m.prototype.writeUintBE=m.prototype.writeUIntBE=function(f,B,J,St){if(f=+f,B=B>>>0,J=J>>>0,!St){let zt=Math.pow(2,8*J)-1;Pe(this,f,B,J,zt,0)}let Pt=J-1,et=1;for(this[B+Pt]=f&255;--Pt>=0&&(et*=256);)this[B+Pt]=f/et&255;return B+J},m.prototype.writeUint8=m.prototype.writeUInt8=function(f,B,J){return f=+f,B=B>>>0,J||Pe(this,f,B,1,255,0),this[B]=f&255,B+1},m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function(f,B,J){return f=+f,B=B>>>0,J||Pe(this,f,B,2,65535,0),this[B]=f&255,this[B+1]=f>>>8,B+2},m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function(f,B,J){return f=+f,B=B>>>0,J||Pe(this,f,B,2,65535,0),this[B]=f>>>8,this[B+1]=f&255,B+2},m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function(f,B,J){return f=+f,B=B>>>0,J||Pe(this,f,B,4,4294967295,0),this[B+3]=f>>>24,this[B+2]=f>>>16,this[B+1]=f>>>8,this[B]=f&255,B+4},m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function(f,B,J){return f=+f,B=B>>>0,J||Pe(this,f,B,4,4294967295,0),this[B]=f>>>24,this[B+1]=f>>>16,this[B+2]=f>>>8,this[B+3]=f&255,B+4};function Je(f,B,J,St,Pt){Dr(B,St,Pt,f,J,7);let et=Number(B&BigInt(4294967295));f[J++]=et,et=et>>8,f[J++]=et,et=et>>8,f[J++]=et,et=et>>8,f[J++]=et;let zt=Number(B>>BigInt(32)&BigInt(4294967295));return f[J++]=zt,zt=zt>>8,f[J++]=zt,zt=zt>>8,f[J++]=zt,zt=zt>>8,f[J++]=zt,J}function Xe(f,B,J,St,Pt){Dr(B,St,Pt,f,J,7);let et=Number(B&BigInt(4294967295));f[J+7]=et,et=et>>8,f[J+6]=et,et=et>>8,f[J+5]=et,et=et>>8,f[J+4]=et;let zt=Number(B>>BigInt(32)&BigInt(4294967295));return f[J+3]=zt,zt=zt>>8,f[J+2]=zt,zt=zt>>8,f[J+1]=zt,zt=zt>>8,f[J]=zt,J+8}m.prototype.writeBigUInt64LE=Br(function(f,B=0){return Je(this,f,B,BigInt(0),BigInt("0xffffffffffffffff"))}),m.prototype.writeBigUInt64BE=Br(function(f,B=0){return Xe(this,f,B,BigInt(0),BigInt("0xffffffffffffffff"))}),m.prototype.writeIntLE=function(f,B,J,St){if(f=+f,B=B>>>0,!St){let Ut=Math.pow(2,8*J-1);Pe(this,f,B,J,Ut-1,-Ut)}let Pt=0,et=1,zt=0;for(this[B]=f&255;++Pt<J&&(et*=256);)f<0&&zt===0&&this[B+Pt-1]!==0&&(zt=1),this[B+Pt]=(f/et>>0)-zt&255;return B+J},m.prototype.writeIntBE=function(f,B,J,St){if(f=+f,B=B>>>0,!St){let Ut=Math.pow(2,8*J-1);Pe(this,f,B,J,Ut-1,-Ut)}let Pt=J-1,et=1,zt=0;for(this[B+Pt]=f&255;--Pt>=0&&(et*=256);)f<0&&zt===0&&this[B+Pt+1]!==0&&(zt=1),this[B+Pt]=(f/et>>0)-zt&255;return B+J},m.prototype.writeInt8=function(f,B,J){return f=+f,B=B>>>0,J||Pe(this,f,B,1,127,-128),f<0&&(f=255+f+1),this[B]=f&255,B+1},m.prototype.writeInt16LE=function(f,B,J){return f=+f,B=B>>>0,J||Pe(this,f,B,2,32767,-32768),this[B]=f&255,this[B+1]=f>>>8,B+2},m.prototype.writeInt16BE=function(f,B,J){return f=+f,B=B>>>0,J||Pe(this,f,B,2,32767,-32768),this[B]=f>>>8,this[B+1]=f&255,B+2},m.prototype.writeInt32LE=function(f,B,J){return f=+f,B=B>>>0,J||Pe(this,f,B,4,2147483647,-2147483648),this[B]=f&255,this[B+1]=f>>>8,this[B+2]=f>>>16,this[B+3]=f>>>24,B+4},m.prototype.writeInt32BE=function(f,B,J){return f=+f,B=B>>>0,J||Pe(this,f,B,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[B]=f>>>24,this[B+1]=f>>>16,this[B+2]=f>>>8,this[B+3]=f&255,B+4},m.prototype.writeBigInt64LE=Br(function(f,B=0){return Je(this,f,B,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),m.prototype.writeBigInt64BE=Br(function(f,B=0){return Xe(this,f,B,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ae(f,B,J,St,Pt,et){if(J+St>f.length)throw new RangeError("Index out of range");if(J<0)throw new RangeError("Index out of range")}function xe(f,B,J,St,Pt){return B=+B,J=J>>>0,Pt||Ae(f,B,J,4,34028234663852886e22,-34028234663852886e22),n.write(f,B,J,St,23,4),J+4}m.prototype.writeFloatLE=function(f,B,J){return xe(this,f,B,!0,J)},m.prototype.writeFloatBE=function(f,B,J){return xe(this,f,B,!1,J)};function Qe(f,B,J,St,Pt){return B=+B,J=J>>>0,Pt||Ae(f,B,J,8,17976931348623157e292,-17976931348623157e292),n.write(f,B,J,St,52,8),J+8}m.prototype.writeDoubleLE=function(f,B,J){return Qe(this,f,B,!0,J)},m.prototype.writeDoubleBE=function(f,B,J){return Qe(this,f,B,!1,J)},m.prototype.copy=function(f,B,J,St){if(!m.isBuffer(f))throw new TypeError("argument should be a Buffer");if(J||(J=0),!St&&St!==0&&(St=this.length),B>=f.length&&(B=f.length),B||(B=0),St>0&&St<J&&(St=J),St===J||f.length===0||this.length===0)return 0;if(B<0)throw new RangeError("targetStart out of bounds");if(J<0||J>=this.length)throw new RangeError("Index out of range");if(St<0)throw new RangeError("sourceEnd out of bounds");St>this.length&&(St=this.length),f.length-B<St-J&&(St=f.length-B+J);let Pt=St-J;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(B,J,St):Uint8Array.prototype.set.call(f,this.subarray(J,St),B),Pt},m.prototype.fill=function(f,B,J,St){if(typeof f=="string"){if(typeof B=="string"?(St=B,B=0,J=this.length):typeof J=="string"&&(St=J,J=this.length),St!==void 0&&typeof St!="string")throw new TypeError("encoding must be a string");if(typeof St=="string"&&!m.isEncoding(St))throw new TypeError("Unknown encoding: "+St);if(f.length===1){let et=f.charCodeAt(0);(St==="utf8"&&et<128||St==="latin1")&&(f=et)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(B<0||this.length<B||this.length<J)throw new RangeError("Out of range index");if(J<=B)return this;B=B>>>0,J=J===void 0?this.length:J>>>0,f||(f=0);let Pt;if(typeof f=="number")for(Pt=B;Pt<J;++Pt)this[Pt]=f;else{let et=m.isBuffer(f)?f:m.from(f,St),zt=et.length;if(zt===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(Pt=0;Pt<J-B;++Pt)this[Pt+B]=et[Pt%zt]}return this};var Ve={};function Ze(f,B,J){Ve[f]=class extends J{constructor(){super(),Object.defineProperty(this,"message",{value:B.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${f}]`,this.stack,delete this.name}get code(){return f}set code(St){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:St,writable:!0})}toString(){return`${this.name} [${f}]: ${this.message}`}}}Ze("ERR_BUFFER_OUT_OF_BOUNDS",function(f){return f?`${f} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ze("ERR_INVALID_ARG_TYPE",function(f,B){return`The "${f}" argument must be of type number. Received type ${typeof B}`},TypeError),Ze("ERR_OUT_OF_RANGE",function(f,B,J){let St=`The value of "${f}" is out of range.`,Pt=J;return Number.isInteger(J)&&Math.abs(J)>2**32?Pt=vr(String(J)):typeof J=="bigint"&&(Pt=String(J),(J>BigInt(2)**BigInt(32)||J<-(BigInt(2)**BigInt(32)))&&(Pt=vr(Pt)),Pt+="n"),St+=` It must be ${B}. Received ${Pt}`,St},RangeError);function vr(f){let B="",J=f.length,St=f[0]==="-"?1:0;for(;J>=St+4;J-=3)B=`_${f.slice(J-3,J)}${B}`;return`${f.slice(0,J)}${B}`}function Pr(f,B,J){Q(B,"offset"),(f[B]===void 0||f[B+J]===void 0)&&k(B,f.length-(J+1))}function Dr(f,B,J,St,Pt,et){if(f>J||f<B){let zt=typeof B=="bigint"?"n":"",Ut;throw et>3?B===0||B===BigInt(0)?Ut=`>= 0${zt} and < 2${zt} ** ${(et+1)*8}${zt}`:Ut=`>= -(2${zt} ** ${(et+1)*8-1}${zt}) and < 2 ** ${(et+1)*8-1}${zt}`:Ut=`>= ${B}${zt} and <= ${J}${zt}`,new Ve.ERR_OUT_OF_RANGE("value",Ut,f)}Pr(St,Pt,et)}function Q(f,B){if(typeof f!="number")throw new Ve.ERR_INVALID_ARG_TYPE(B,"number",f)}function k(f,B,J){throw Math.floor(f)!==f?(Q(f,J),new Ve.ERR_OUT_OF_RANGE(J||"offset","an integer",f)):B<0?new Ve.ERR_BUFFER_OUT_OF_BOUNDS:new Ve.ERR_OUT_OF_RANGE(J||"offset",`>= ${J?1:0} and <= ${B}`,f)}var Z=/[^+/0-9A-Za-z-_]/g;function se(f){if(f=f.split("=")[0],f=f.trim().replace(Z,""),f.length<2)return"";for(;f.length%4!==0;)f=f+"=";return f}function ye(f,B){B=B||1/0;let J,St=f.length,Pt=null,et=[];for(let zt=0;zt<St;++zt){if(J=f.charCodeAt(zt),J>55295&&J<57344){if(!Pt){if(J>56319){(B-=3)>-1&&et.push(239,191,189);continue}else if(zt+1===St){(B-=3)>-1&&et.push(239,191,189);continue}Pt=J;continue}if(J<56320){(B-=3)>-1&&et.push(239,191,189),Pt=J;continue}J=(Pt-55296<<10|J-56320)+65536}else Pt&&(B-=3)>-1&&et.push(239,191,189);if(Pt=null,J<128){if((B-=1)<0)break;et.push(J)}else if(J<2048){if((B-=2)<0)break;et.push(J>>6|192,J&63|128)}else if(J<65536){if((B-=3)<0)break;et.push(J>>12|224,J>>6&63|128,J&63|128)}else if(J<1114112){if((B-=4)<0)break;et.push(J>>18|240,J>>12&63|128,J>>6&63|128,J&63|128)}else throw new Error("Invalid code point")}return et}function rr(f){let B=[];for(let J=0;J<f.length;++J)B.push(f.charCodeAt(J)&255);return B}function dr(f,B){let J,St,Pt,et=[];for(let zt=0;zt<f.length&&!((B-=2)<0);++zt)J=f.charCodeAt(zt),St=J>>8,Pt=J%256,et.push(Pt),et.push(St);return et}function mr(f){return r.toByteArray(se(f))}function ur(f,B,J,St){let Pt;for(Pt=0;Pt<St&&!(Pt+J>=B.length||Pt>=f.length);++Pt)B[Pt+J]=f[Pt];return Pt}function er(f,B){return f instanceof B||f!=null&&f.constructor!=null&&f.constructor.name!=null&&f.constructor.name===B.name}function Gr(f){return f!==f}var Lr=(function(){let f="0123456789abcdef",B=new Array(256);for(let J=0;J<16;++J){let St=J*16;for(let Pt=0;Pt<16;++Pt)B[St+Pt]=f[J]+f[Pt]}return B})();function Br(f){return typeof BigInt>"u"?N:f}function N(){throw new Error("BigInt not supported")}}),zy=ce(t=>{var r={};r.userAgent=!1;var n={},i="11.1.0",u="jsrsasign(all) 11.1.0 (2024-02-01) (c) 2010-2023 Kenji Urushima | kjur.github.io/jsrsasign/license",p=p||(function(e,l){var a={},h=a.lib={},b=h.Base=(function(){function I(){}return{extend:function(ut){I.prototype=this;var T=new I;return ut&&T.mixIn(ut),T.hasOwnProperty("init")||(T.init=function(){T.$super.init.apply(this,arguments)}),T.init.prototype=T,T.$super=this,T},create:function(){var ut=this.extend();return ut.init.apply(ut,arguments),ut},init:function(){},mixIn:function(ut){for(var T in ut)ut.hasOwnProperty(T)&&(this[T]=ut[T]);ut.hasOwnProperty("toString")&&(this.toString=ut.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),C=h.WordArray=b.extend({init:function(I,ut){I=this.words=I||[],ut!=l?this.sigBytes=ut:this.sigBytes=I.length*4},toString:function(I){return(I||_).stringify(this)},concat:function(I){var ut=this.words,T=I.words,at=this.sigBytes,Y=I.sigBytes;if(this.clamp(),at%4)for(var wt=0;wt<Y;wt++){var Tt=T[wt>>>2]>>>24-wt%4*8&255;ut[at+wt>>>2]|=Tt<<24-(at+wt)%4*8}else for(var wt=0;wt<Y;wt+=4)ut[at+wt>>>2]=T[wt>>>2];return this.sigBytes+=Y,this},clamp:function(){var I=this.words,ut=this.sigBytes;I[ut>>>2]&=4294967295<<32-ut%4*8,I.length=e.ceil(ut/4)},clone:function(){var I=b.clone.call(this);return I.words=this.words.slice(0),I},random:function(I){for(var ut=[],T=0;T<I;T+=4)ut.push(e.random()*4294967296|0);return new C.init(ut,I)}}),x=a.enc={},_=x.Hex={stringify:function(I){for(var ut=I.words,T=I.sigBytes,at=[],Y=0;Y<T;Y++){var wt=ut[Y>>>2]>>>24-Y%4*8&255;at.push((wt>>>4).toString(16)),at.push((wt&15).toString(16))}return at.join("")},parse:function(I){for(var ut=I.length,T=[],at=0;at<ut;at+=2)T[at>>>3]|=parseInt(I.substr(at,2),16)<<24-at%8*4;return new C.init(T,ut/2)}},L=x.Latin1={stringify:function(I){for(var ut=I.words,T=I.sigBytes,at=[],Y=0;Y<T;Y++){var wt=ut[Y>>>2]>>>24-Y%4*8&255;at.push(String.fromCharCode(wt))}return at.join("")},parse:function(I){for(var ut=I.length,T=[],at=0;at<ut;at++)T[at>>>2]|=(I.charCodeAt(at)&255)<<24-at%4*8;return new C.init(T,ut)}},V=x.Utf8={stringify:function(I){try{return decodeURIComponent(escape(L.stringify(I)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(I){return L.parse(unescape(encodeURIComponent(I)))}},ht=h.BufferedBlockAlgorithm=b.extend({reset:function(){this._data=new C.init,this._nDataBytes=0},_append:function(I){typeof I=="string"&&(I=V.parse(I)),this._data.concat(I),this._nDataBytes+=I.sigBytes},_process:function(I){var ut=this._data,T=ut.words,at=ut.sigBytes,Y=this.blockSize,wt=Y*4,Tt=at/wt;I?Tt=e.ceil(Tt):Tt=e.max((Tt|0)-this._minBufferSize,0);var Wt=Tt*Y,Gt=e.min(Wt*4,at);if(Wt){for(var ve=0;ve<Wt;ve+=Y)this._doProcessBlock(T,ve);var be=T.splice(0,Wt);ut.sigBytes-=Gt}return new C.init(be,Gt)},clone:function(){var I=b.clone.call(this);return I._data=this._data.clone(),I},_minBufferSize:0}),gt=h.Hasher=ht.extend({cfg:b.extend(),init:function(I){this.cfg=this.cfg.extend(I),this.reset()},reset:function(){ht.reset.call(this),this._doReset()},update:function(I){return this._append(I),this._process(),this},finalize:function(I){I&&this._append(I);var ut=this._doFinalize();return ut},blockSize:512/32,_createHelper:function(I){return function(ut,T){return new I.init(T).finalize(ut)}},_createHmacHelper:function(I){return function(ut,T){return new P.HMAC.init(I,T).finalize(ut)}}}),P=a.algo={};return a})(Math);(function(e){var b=p,l=b.lib,a=l.Base,h=l.WordArray,b=b.x64={};b.Word=a.extend({init:function(C,x){this.high=C,this.low=x}}),b.WordArray=a.extend({init:function(C,x){C=this.words=C||[],this.sigBytes=x!=e?x:8*C.length},toX32:function(){for(var C=this.words,x=C.length,_=[],L=0;L<x;L++){var V=C[L];_.push(V.high),_.push(V.low)}return h.create(_,this.sigBytes)},clone:function(){for(var C=a.clone.call(this),x=C.words=this.words.slice(0),_=x.length,L=0;L<_;L++)x[L]=x[L].clone();return C}})})(),p.lib.Cipher||(function(e){var I=p,l=I.lib,a=l.Base,h=l.WordArray,b=l.BufferedBlockAlgorithm,C=I.enc.Base64,x=I.algo.EvpKDF,_=l.Cipher=b.extend({cfg:a.extend(),createEncryptor:function(T,at){return this.create(this._ENC_XFORM_MODE,T,at)},createDecryptor:function(T,at){return this.create(this._DEC_XFORM_MODE,T,at)},init:function(T,at,Y){this.cfg=this.cfg.extend(Y),this._xformMode=T,this._key=at,this.reset()},reset:function(){b.reset.call(this),this._doReset()},process:function(T){return this._append(T),this._process()},finalize:function(T){return T&&this._append(T),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(T){return{encrypt:function(at,Y,wt){return(typeof Y=="string"?ut:P).encrypt(T,at,Y,wt)},decrypt:function(at,Y,wt){return(typeof Y=="string"?ut:P).decrypt(T,at,Y,wt)}}}});l.StreamCipher=_.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var gt=I.mode={},L=function(T,at,Y){var wt=this._iv;wt?this._iv=e:wt=this._prevBlock;for(var Tt=0;Tt<Y;Tt++)T[at+Tt]^=wt[Tt]},V=(l.BlockCipherMode=a.extend({createEncryptor:function(T,at){return this.Encryptor.create(T,at)},createDecryptor:function(T,at){return this.Decryptor.create(T,at)},init:function(T,at){this._cipher=T,this._iv=at}})).extend();V.Encryptor=V.extend({processBlock:function(T,at){var Y=this._cipher,wt=Y.blockSize;L.call(this,T,at,wt),Y.encryptBlock(T,at),this._prevBlock=T.slice(at,at+wt)}}),V.Decryptor=V.extend({processBlock:function(T,at){var Y=this._cipher,wt=Y.blockSize,Tt=T.slice(at,at+wt);Y.decryptBlock(T,at),L.call(this,T,at,wt),this._prevBlock=Tt}}),gt=gt.CBC=V,V=(I.pad={}).Pkcs7={pad:function(T,at){for(var Y=4*at,Y=Y-T.sigBytes%Y,wt=Y<<24|Y<<16|Y<<8|Y,Tt=[],Wt=0;Wt<Y;Wt+=4)Tt.push(wt);Y=h.create(Tt,Y),T.concat(Y)},unpad:function(T){T.sigBytes-=T.words[T.sigBytes-1>>>2]&255}},l.BlockCipher=_.extend({cfg:_.cfg.extend({mode:gt,padding:V}),reset:function(){_.reset.call(this);var at=this.cfg,T=at.iv,at=at.mode;if(this._xformMode==this._ENC_XFORM_MODE)var Y=at.createEncryptor;else Y=at.createDecryptor,this._minBufferSize=1;this._mode=Y.call(at,this,T&&T.words)},_doProcessBlock:function(T,at){this._mode.processBlock(T,at)},_doFinalize:function(){var T=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){T.pad(this._data,this.blockSize);var at=this._process(!0)}else at=this._process(!0),T.unpad(at);return at},blockSize:4});var ht=l.CipherParams=a.extend({init:function(T){this.mixIn(T)},toString:function(T){return(T||this.formatter).stringify(this)}}),gt=(I.format={}).OpenSSL={stringify:function(T){var at=T.ciphertext;return T=T.salt,(T?h.create([1398893684,1701076831]).concat(T).concat(at):at).toString(C)},parse:function(T){T=C.parse(T);var at=T.words;if(at[0]==1398893684&&at[1]==1701076831){var Y=h.create(at.slice(2,4));at.splice(0,4),T.sigBytes-=16}return ht.create({ciphertext:T,salt:Y})}},P=l.SerializableCipher=a.extend({cfg:a.extend({format:gt}),encrypt:function(T,at,Y,wt){wt=this.cfg.extend(wt);var Tt=T.createEncryptor(Y,wt);return at=Tt.finalize(at),Tt=Tt.cfg,ht.create({ciphertext:at,key:Y,iv:Tt.iv,algorithm:T,mode:Tt.mode,padding:Tt.padding,blockSize:T.blockSize,formatter:wt.format})},decrypt:function(T,at,Y,wt){return wt=this.cfg.extend(wt),at=this._parse(at,wt.format),T.createDecryptor(Y,wt).finalize(at.ciphertext)},_parse:function(T,at){return typeof T=="string"?at.parse(T,this):T}}),I=(I.kdf={}).OpenSSL={execute:function(T,at,Y,wt){return wt||(wt=h.random(8)),T=x.create({keySize:at+Y}).compute(T,wt),Y=h.create(T.words.slice(at),4*Y),T.sigBytes=4*at,ht.create({key:T,iv:Y,salt:wt})}},ut=l.PasswordBasedCipher=P.extend({cfg:P.cfg.extend({kdf:I}),encrypt:function(T,at,Y,wt){return wt=this.cfg.extend(wt),Y=wt.kdf.execute(Y,T.keySize,T.ivSize),wt.iv=Y.iv,T=P.encrypt.call(this,T,at,Y.key,wt),T.mixIn(Y),T},decrypt:function(T,at,Y,wt){return wt=this.cfg.extend(wt),at=this._parse(at,wt.format),Y=wt.kdf.execute(Y,T.keySize,T.ivSize,at.salt),wt.iv=Y.iv,P.decrypt.call(this,T,at,Y.key,wt)}})})(),(function(){for(var e=p,l=e.lib.BlockCipher,ve=e.algo,a=[],h=[],b=[],C=[],x=[],_=[],L=[],V=[],ht=[],gt=[],P=[],I=0;256>I;I++)P[I]=128>I?I<<1:I<<1^283;for(var ut=0,T=0,I=0;256>I;I++){var at=T^T<<1^T<<2^T<<3^T<<4,at=at>>>8^at&255^99;a[ut]=at,h[at]=ut;var Y=P[ut],wt=P[Y],Tt=P[wt],Wt=257*P[at]^16843008*at;b[ut]=Wt<<24|Wt>>>8,C[ut]=Wt<<16|Wt>>>16,x[ut]=Wt<<8|Wt>>>24,_[ut]=Wt,Wt=16843009*Tt^65537*wt^257*Y^16843008*ut,L[at]=Wt<<24|Wt>>>8,V[at]=Wt<<16|Wt>>>16,ht[at]=Wt<<8|Wt>>>24,gt[at]=Wt,ut?(ut=Y^P[P[P[Tt^Y]]],T^=P[P[T]]):ut=T=1}var Gt=[0,1,2,4,8,16,32,64,128,27,54],ve=ve.AES=l.extend({_doReset:function(){for(var S=this._key,be=S.words,d=S.sigBytes/4,S=4*((this._nRounds=d+6)+1),st=this._keySchedule=[],z=0;z<S;z++)if(z<d)st[z]=be[z];else{var _t=st[z-1];z%d?6<d&&z%d==4&&(_t=a[_t>>>24]<<24|a[_t>>>16&255]<<16|a[_t>>>8&255]<<8|a[_t&255]):(_t=_t<<8|_t>>>24,_t=a[_t>>>24]<<24|a[_t>>>16&255]<<16|a[_t>>>8&255]<<8|a[_t&255],_t^=Gt[z/d|0]<<24),st[z]=st[z-d]^_t}for(be=this._invKeySchedule=[],d=0;d<S;d++)z=S-d,_t=d%4?st[z]:st[z-4],be[d]=4>d||4>=z?_t:L[a[_t>>>24]]^V[a[_t>>>16&255]]^ht[a[_t>>>8&255]]^gt[a[_t&255]]},encryptBlock:function(be,d){this._doCryptBlock(be,d,this._keySchedule,b,C,x,_,a)},decryptBlock:function(be,d){var S=be[d+1];be[d+1]=be[d+3],be[d+3]=S,this._doCryptBlock(be,d,this._invKeySchedule,L,V,ht,gt,h),S=be[d+1],be[d+1]=be[d+3],be[d+3]=S},_doCryptBlock:function(be,d,S,st,z,_t,Mt,te){for(var ie=this._nRounds,Ur=be[d]^S[0],xn=be[d+1]^S[1],pn=be[d+2]^S[2],qr=be[d+3]^S[3],ge=4,Se=1;Se<ie;Se++)var wr=st[Ur>>>24]^z[xn>>>16&255]^_t[pn>>>8&255]^Mt[qr&255]^S[ge++],xr=st[xn>>>24]^z[pn>>>16&255]^_t[qr>>>8&255]^Mt[Ur&255]^S[ge++],Fr=st[pn>>>24]^z[qr>>>16&255]^_t[Ur>>>8&255]^Mt[xn&255]^S[ge++],qr=st[qr>>>24]^z[Ur>>>16&255]^_t[xn>>>8&255]^Mt[pn&255]^S[ge++],Ur=wr,xn=xr,pn=Fr;wr=(te[Ur>>>24]<<24|te[xn>>>16&255]<<16|te[pn>>>8&255]<<8|te[qr&255])^S[ge++],xr=(te[xn>>>24]<<24|te[pn>>>16&255]<<16|te[qr>>>8&255]<<8|te[Ur&255])^S[ge++],Fr=(te[pn>>>24]<<24|te[qr>>>16&255]<<16|te[Ur>>>8&255]<<8|te[xn&255])^S[ge++],qr=(te[qr>>>24]<<24|te[Ur>>>16&255]<<16|te[xn>>>8&255]<<8|te[pn&255])^S[ge++],be[d]=wr,be[d+1]=xr,be[d+2]=Fr,be[d+3]=qr},keySize:8});e.AES=l._createHelper(ve)})(),(function(){function e(P,I){var ut=(this._lBlock>>>P^this._rBlock)&I;this._rBlock^=ut,this._lBlock^=ut<<P}function l(P,I){var ut=(this._rBlock>>>P^this._lBlock)&I;this._lBlock^=ut,this._rBlock^=ut<<P}var a=p,b=a.lib,h=b.WordArray,b=b.BlockCipher,C=a.algo,x=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],_=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],L=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],V=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],ht=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],gt=C.DES=b.extend({_doReset:function(){for(var P=this._key.words,I=[],ut=0;56>ut;ut++){var T=x[ut]-1;I[ut]=P[T>>>5]>>>31-T%32&1}for(P=this._subKeys=[],T=0;16>T;T++){for(var at=P[T]=[],Y=L[T],ut=0;24>ut;ut++)at[ut/6|0]|=I[(_[ut]-1+Y)%28]<<31-ut%6,at[4+(ut/6|0)]|=I[28+(_[ut+24]-1+Y)%28]<<31-ut%6;for(at[0]=at[0]<<1|at[0]>>>31,ut=1;7>ut;ut++)at[ut]>>>=4*(ut-1)+3;at[7]=at[7]<<5|at[7]>>>27}for(I=this._invSubKeys=[],ut=0;16>ut;ut++)I[ut]=P[15-ut]},encryptBlock:function(P,I){this._doCryptBlock(P,I,this._subKeys)},decryptBlock:function(P,I){this._doCryptBlock(P,I,this._invSubKeys)},_doCryptBlock:function(P,I,ut){this._lBlock=P[I],this._rBlock=P[I+1],e.call(this,4,252645135),e.call(this,16,65535),l.call(this,2,858993459),l.call(this,8,16711935),e.call(this,1,1431655765);for(var T=0;16>T;T++){for(var at=ut[T],Y=this._lBlock,wt=this._rBlock,Tt=0,Wt=0;8>Wt;Wt++)Tt|=V[Wt][((wt^at[Wt])&ht[Wt])>>>0];this._lBlock=wt,this._rBlock=Y^Tt}ut=this._lBlock,this._lBlock=this._rBlock,this._rBlock=ut,e.call(this,1,1431655765),l.call(this,8,16711935),l.call(this,2,858993459),e.call(this,16,65535),e.call(this,4,252645135),P[I]=this._lBlock,P[I+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});a.DES=b._createHelper(gt),C=C.TripleDES=b.extend({_doReset:function(){var P=this._key.words;this._des1=gt.createEncryptor(h.create(P.slice(0,2))),this._des2=gt.createEncryptor(h.create(P.slice(2,4))),this._des3=gt.createEncryptor(h.create(P.slice(4,6)))},encryptBlock:function(P,I){this._des1.encryptBlock(P,I),this._des2.decryptBlock(P,I),this._des3.encryptBlock(P,I)},decryptBlock:function(P,I){this._des3.decryptBlock(P,I),this._des2.encryptBlock(P,I),this._des1.decryptBlock(P,I)},keySize:6,ivSize:2,blockSize:2}),a.TripleDES=b._createHelper(C)})(),(function(){var e=p,l=e.lib.WordArray;e.enc.Base64={stringify:function(a){var h=a.words,b=a.sigBytes,C=this._map;a.clamp(),a=[];for(var x=0;x<b;x+=3)for(var _=(h[x>>>2]>>>24-8*(x%4)&255)<<16|(h[x+1>>>2]>>>24-8*((x+1)%4)&255)<<8|h[x+2>>>2]>>>24-8*((x+2)%4)&255,L=0;4>L&&x+.75*L<b;L++)a.push(C.charAt(_>>>6*(3-L)&63));if(h=C.charAt(64))for(;a.length%4;)a.push(h);return a.join("")},parse:function(a){var h=a.length,b=this._map,C=b.charAt(64);C&&(C=a.indexOf(C),C!=-1&&(h=C));for(var C=[],x=0,_=0;_<h;_++)if(_%4){var L=b.indexOf(a.charAt(_-1))<<2*(_%4),V=b.indexOf(a.charAt(_))>>>6-2*(_%4);C[x>>>2]|=(L|V)<<24-8*(x%4),x++}return l.create(C,x)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})(),(function(e){function l(gt,P,I,ut,T,at,Y){return gt=gt+(P&I|~P&ut)+T+Y,(gt<<at|gt>>>32-at)+P}function a(gt,P,I,ut,T,at,Y){return gt=gt+(P&ut|I&~ut)+T+Y,(gt<<at|gt>>>32-at)+P}function h(gt,P,I,ut,T,at,Y){return gt=gt+(P^I^ut)+T+Y,(gt<<at|gt>>>32-at)+P}function b(gt,P,I,ut,T,at,Y){return gt=gt+(I^(P|~ut))+T+Y,(gt<<at|gt>>>32-at)+P}for(var C=p,L=C.lib,x=L.WordArray,_=L.Hasher,L=C.algo,V=[],ht=0;64>ht;ht++)V[ht]=4294967296*e.abs(e.sin(ht+1))|0;L=L.MD5=_.extend({_doReset:function(){this._hash=new x.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(gt,P){for(var I=0;16>I;I++){var ut=P+I,T=gt[ut];gt[ut]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360}var I=this._hash.words,ut=gt[P+0],T=gt[P+1],at=gt[P+2],Y=gt[P+3],wt=gt[P+4],Tt=gt[P+5],Wt=gt[P+6],Gt=gt[P+7],ve=gt[P+8],be=gt[P+9],d=gt[P+10],S=gt[P+11],st=gt[P+12],z=gt[P+13],_t=gt[P+14],Mt=gt[P+15],te=I[0],Se=I[1],ge=I[2],ie=I[3],te=l(te,Se,ge,ie,ut,7,V[0]),ie=l(ie,te,Se,ge,T,12,V[1]),ge=l(ge,ie,te,Se,at,17,V[2]),Se=l(Se,ge,ie,te,Y,22,V[3]),te=l(te,Se,ge,ie,wt,7,V[4]),ie=l(ie,te,Se,ge,Tt,12,V[5]),ge=l(ge,ie,te,Se,Wt,17,V[6]),Se=l(Se,ge,ie,te,Gt,22,V[7]),te=l(te,Se,ge,ie,ve,7,V[8]),ie=l(ie,te,Se,ge,be,12,V[9]),ge=l(ge,ie,te,Se,d,17,V[10]),Se=l(Se,ge,ie,te,S,22,V[11]),te=l(te,Se,ge,ie,st,7,V[12]),ie=l(ie,te,Se,ge,z,12,V[13]),ge=l(ge,ie,te,Se,_t,17,V[14]),Se=l(Se,ge,ie,te,Mt,22,V[15]),te=a(te,Se,ge,ie,T,5,V[16]),ie=a(ie,te,Se,ge,Wt,9,V[17]),ge=a(ge,ie,te,Se,S,14,V[18]),Se=a(Se,ge,ie,te,ut,20,V[19]),te=a(te,Se,ge,ie,Tt,5,V[20]),ie=a(ie,te,Se,ge,d,9,V[21]),ge=a(ge,ie,te,Se,Mt,14,V[22]),Se=a(Se,ge,ie,te,wt,20,V[23]),te=a(te,Se,ge,ie,be,5,V[24]),ie=a(ie,te,Se,ge,_t,9,V[25]),ge=a(ge,ie,te,Se,Y,14,V[26]),Se=a(Se,ge,ie,te,ve,20,V[27]),te=a(te,Se,ge,ie,z,5,V[28]),ie=a(ie,te,Se,ge,at,9,V[29]),ge=a(ge,ie,te,Se,Gt,14,V[30]),Se=a(Se,ge,ie,te,st,20,V[31]),te=h(te,Se,ge,ie,Tt,4,V[32]),ie=h(ie,te,Se,ge,ve,11,V[33]),ge=h(ge,ie,te,Se,S,16,V[34]),Se=h(Se,ge,ie,te,_t,23,V[35]),te=h(te,Se,ge,ie,T,4,V[36]),ie=h(ie,te,Se,ge,wt,11,V[37]),ge=h(ge,ie,te,Se,Gt,16,V[38]),Se=h(Se,ge,ie,te,d,23,V[39]),te=h(te,Se,ge,ie,z,4,V[40]),ie=h(ie,te,Se,ge,ut,11,V[41]),ge=h(ge,ie,te,Se,Y,16,V[42]),Se=h(Se,ge,ie,te,Wt,23,V[43]),te=h(te,Se,ge,ie,be,4,V[44]),ie=h(ie,te,Se,ge,st,11,V[45]),ge=h(ge,ie,te,Se,Mt,16,V[46]),Se=h(Se,ge,ie,te,at,23,V[47]),te=b(te,Se,ge,ie,ut,6,V[48]),ie=b(ie,te,Se,ge,Gt,10,V[49]),ge=b(ge,ie,te,Se,_t,15,V[50]),Se=b(Se,ge,ie,te,Tt,21,V[51]),te=b(te,Se,ge,ie,st,6,V[52]),ie=b(ie,te,Se,ge,Y,10,V[53]),ge=b(ge,ie,te,Se,d,15,V[54]),Se=b(Se,ge,ie,te,T,21,V[55]),te=b(te,Se,ge,ie,ve,6,V[56]),ie=b(ie,te,Se,ge,Mt,10,V[57]),ge=b(ge,ie,te,Se,Wt,15,V[58]),Se=b(Se,ge,ie,te,z,21,V[59]),te=b(te,Se,ge,ie,wt,6,V[60]),ie=b(ie,te,Se,ge,S,10,V[61]),ge=b(ge,ie,te,Se,at,15,V[62]),Se=b(Se,ge,ie,te,be,21,V[63]);I[0]=I[0]+te|0,I[1]=I[1]+Se|0,I[2]=I[2]+ge|0,I[3]=I[3]+ie|0},_doFinalize:function(){var gt=this._data,P=gt.words,I=8*this._nDataBytes,ut=8*gt.sigBytes;P[ut>>>5]|=128<<24-ut%32;var T=e.floor(I/4294967296);for(P[(ut+64>>>9<<4)+15]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,P[(ut+64>>>9<<4)+14]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,gt.sigBytes=4*(P.length+1),this._process(),gt=this._hash,P=gt.words,I=0;4>I;I++)ut=P[I],P[I]=(ut<<8|ut>>>24)&16711935|(ut<<24|ut>>>8)&4278255360;return gt},clone:function(){var gt=_.clone.call(this);return gt._hash=this._hash.clone(),gt}}),C.MD5=_._createHelper(L),C.HmacMD5=_._createHmacHelper(L)})(Math),(function(){var e=p,b=e.lib,l=b.WordArray,a=b.Hasher,h=[],b=e.algo.SHA1=a.extend({_doReset:function(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(C,x){for(var _=this._hash.words,L=_[0],V=_[1],ht=_[2],gt=_[3],P=_[4],I=0;80>I;I++){if(16>I)h[I]=C[x+I]|0;else{var ut=h[I-3]^h[I-8]^h[I-14]^h[I-16];h[I]=ut<<1|ut>>>31}ut=(L<<5|L>>>27)+P+h[I],ut=20>I?ut+((V&ht|~V&gt)+1518500249):40>I?ut+((V^ht^gt)+1859775393):60>I?ut+((V&ht|V&gt|ht&gt)-1894007588):ut+((V^ht^gt)-899497514),P=gt,gt=ht,ht=V<<30|V>>>2,V=L,L=ut}_[0]=_[0]+L|0,_[1]=_[1]+V|0,_[2]=_[2]+ht|0,_[3]=_[3]+gt|0,_[4]=_[4]+P|0},_doFinalize:function(){var C=this._data,x=C.words,_=8*this._nDataBytes,L=8*C.sigBytes;return x[L>>>5]|=128<<24-L%32,x[(L+64>>>9<<4)+14]=Math.floor(_/4294967296),x[(L+64>>>9<<4)+15]=_,C.sigBytes=4*x.length,this._process(),this._hash},clone:function(){var C=a.clone.call(this);return C._hash=this._hash.clone(),C}});e.SHA1=a._createHelper(b),e.HmacSHA1=a._createHmacHelper(b)})(),(function(e){for(var l=p,I=l.lib,a=I.WordArray,h=I.Hasher,I=l.algo,b=[],C=[],x=function(T){return 4294967296*(T-(T|0))|0},_=2,L=0;64>L;){var V;t:{V=_;for(var ht=e.sqrt(V),gt=2;gt<=ht;gt++)if(!(V%gt)){V=!1;break t}V=!0}V&&(8>L&&(b[L]=x(e.pow(_,.5))),C[L]=x(e.pow(_,1/3)),L++),_++}var P=[],I=I.SHA256=h.extend({_doReset:function(){this._hash=new a.init(b.slice(0))},_doProcessBlock:function(ut,T){for(var at=this._hash.words,Y=at[0],wt=at[1],Tt=at[2],Wt=at[3],Gt=at[4],ve=at[5],be=at[6],d=at[7],S=0;64>S;S++){if(16>S)P[S]=ut[T+S]|0;else{var st=P[S-15],z=P[S-2];P[S]=((st<<25|st>>>7)^(st<<14|st>>>18)^st>>>3)+P[S-7]+((z<<15|z>>>17)^(z<<13|z>>>19)^z>>>10)+P[S-16]}st=d+((Gt<<26|Gt>>>6)^(Gt<<21|Gt>>>11)^(Gt<<7|Gt>>>25))+(Gt&ve^~Gt&be)+C[S]+P[S],z=((Y<<30|Y>>>2)^(Y<<19|Y>>>13)^(Y<<10|Y>>>22))+(Y&wt^Y&Tt^wt&Tt),d=be,be=ve,ve=Gt,Gt=Wt+st|0,Wt=Tt,Tt=wt,wt=Y,Y=st+z|0}at[0]=at[0]+Y|0,at[1]=at[1]+wt|0,at[2]=at[2]+Tt|0,at[3]=at[3]+Wt|0,at[4]=at[4]+Gt|0,at[5]=at[5]+ve|0,at[6]=at[6]+be|0,at[7]=at[7]+d|0},_doFinalize:function(){var ut=this._data,T=ut.words,at=8*this._nDataBytes,Y=8*ut.sigBytes;return T[Y>>>5]|=128<<24-Y%32,T[(Y+64>>>9<<4)+14]=e.floor(at/4294967296),T[(Y+64>>>9<<4)+15]=at,ut.sigBytes=4*T.length,this._process(),this._hash},clone:function(){var ut=h.clone.call(this);return ut._hash=this._hash.clone(),ut}});l.SHA256=h._createHelper(I),l.HmacSHA256=h._createHmacHelper(I)})(Math),(function(){var e=p,l=e.lib.WordArray,h=e.algo,a=h.SHA256,h=h.SHA224=a.extend({_doReset:function(){this._hash=new l.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var b=a._doFinalize.call(this);return b.sigBytes-=4,b}});e.SHA224=a._createHelper(h),e.HmacSHA224=a._createHmacHelper(h)})(),(function(){function e(){return h.create.apply(h,arguments)}for(var l=p,a=l.lib.Hasher,C=l.x64,h=C.Word,b=C.WordArray,C=l.algo,x=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],_=[],L=0;80>L;L++)_[L]=e();C=C.SHA512=a.extend({_doReset:function(){this._hash=new b.init([new h.init(1779033703,4089235720),new h.init(3144134277,2227873595),new h.init(1013904242,4271175723),new h.init(2773480762,1595750129),new h.init(1359893119,2917565137),new h.init(2600822924,725511199),new h.init(528734635,4215389547),new h.init(1541459225,327033209)])},_doProcessBlock:function(V,ht){for(var wt=this._hash.words,gt=wt[0],P=wt[1],I=wt[2],ut=wt[3],T=wt[4],at=wt[5],Y=wt[6],wt=wt[7],Tt=gt.high,Wt=gt.low,Gt=P.high,ve=P.low,be=I.high,d=I.low,S=ut.high,st=ut.low,z=T.high,_t=T.low,Mt=at.high,te=at.low,ie=Y.high,ge=Y.low,Se=wt.high,wr=wt.low,xr=Tt,Fr=Wt,qr=Gt,Ur=ve,xn=be,pn=d,Fi=S,js=st,Es=z,Cs=_t,$s=Mt,fn=te,Jn=ie,Nn=ge,kt=Se,ps=wr,mn=0;80>mn;mn++){var vs=_[mn];if(16>mn)var Un=vs.high=V[ht+2*mn]|0,yn=vs.low=V[ht+2*mn+1]|0;else{var Un=_[mn-15],yn=Un.high,ci=Un.low,Un=(yn>>>1|ci<<31)^(yn>>>8|ci<<24)^yn>>>7,ci=(ci>>>1|yn<<31)^(ci>>>8|yn<<24)^(ci>>>7|yn<<25),Ls=_[mn-2],yn=Ls.high,Ln=Ls.low,Ls=(yn>>>19|Ln<<13)^(yn<<3|Ln>>>29)^yn>>>6,Ln=(Ln>>>19|yn<<13)^(Ln<<3|yn>>>29)^(Ln>>>6|yn<<26),yn=_[mn-7],Kr=yn.high,Pi=_[mn-16],pi=Pi.high,Pi=Pi.low,yn=ci+yn.low,Un=Un+Kr+(yn>>>0<ci>>>0?1:0),yn=yn+Ln,Un=Un+Ls+(yn>>>0<Ln>>>0?1:0),yn=yn+Pi,Un=Un+pi+(yn>>>0<Pi>>>0?1:0);vs.high=Un,vs.low=yn}var Kr=Es&$s^~Es&Jn,Pi=Cs&fn^~Cs&Nn,vs=xr&qr^xr&xn^qr&xn,wa=Fr&Ur^Fr&pn^Ur&pn,ci=(xr>>>28|Fr<<4)^(xr<<30|Fr>>>2)^(xr<<25|Fr>>>7),Ls=(Fr>>>28|xr<<4)^(Fr<<30|xr>>>2)^(Fr<<25|xr>>>7),Ln=x[mn],Ca=Ln.high,zo=Ln.low,Ln=ps+((Cs>>>14|Es<<18)^(Cs>>>18|Es<<14)^(Cs<<23|Es>>>9)),pi=kt+((Es>>>14|Cs<<18)^(Es>>>18|Cs<<14)^(Es<<23|Cs>>>9))+(Ln>>>0<ps>>>0?1:0),Ln=Ln+Pi,pi=pi+Kr+(Ln>>>0<Pi>>>0?1:0),Ln=Ln+zo,pi=pi+Ca+(Ln>>>0<zo>>>0?1:0),Ln=Ln+yn,pi=pi+Un+(Ln>>>0<yn>>>0?1:0),yn=Ls+wa,vs=ci+vs+(yn>>>0<Ls>>>0?1:0),kt=Jn,ps=Nn,Jn=$s,Nn=fn,$s=Es,fn=Cs,Cs=js+Ln|0,Es=Fi+pi+(Cs>>>0<js>>>0?1:0)|0,Fi=xn,js=pn,xn=qr,pn=Ur,qr=xr,Ur=Fr,Fr=Ln+yn|0,xr=pi+vs+(Fr>>>0<Ln>>>0?1:0)|0}Wt=gt.low=Wt+Fr,gt.high=Tt+xr+(Wt>>>0<Fr>>>0?1:0),ve=P.low=ve+Ur,P.high=Gt+qr+(ve>>>0<Ur>>>0?1:0),d=I.low=d+pn,I.high=be+xn+(d>>>0<pn>>>0?1:0),st=ut.low=st+js,ut.high=S+Fi+(st>>>0<js>>>0?1:0),_t=T.low=_t+Cs,T.high=z+Es+(_t>>>0<Cs>>>0?1:0),te=at.low=te+fn,at.high=Mt+$s+(te>>>0<fn>>>0?1:0),ge=Y.low=ge+Nn,Y.high=ie+Jn+(ge>>>0<Nn>>>0?1:0),wr=wt.low=wr+ps,wt.high=Se+kt+(wr>>>0<ps>>>0?1:0)},_doFinalize:function(){var V=this._data,ht=V.words,gt=8*this._nDataBytes,P=8*V.sigBytes;return ht[P>>>5]|=128<<24-P%32,ht[(P+128>>>10<<5)+30]=Math.floor(gt/4294967296),ht[(P+128>>>10<<5)+31]=gt,V.sigBytes=4*ht.length,this._process(),this._hash.toX32()},clone:function(){var V=a.clone.call(this);return V._hash=this._hash.clone(),V},blockSize:32}),l.SHA512=a._createHelper(C),l.HmacSHA512=a._createHmacHelper(C)})(),(function(){var e=p,b=e.x64,l=b.Word,a=b.WordArray,b=e.algo,h=b.SHA512,b=b.SHA384=h.extend({_doReset:function(){this._hash=new a.init([new l.init(3418070365,3238371032),new l.init(1654270250,914150663),new l.init(2438529370,812702999),new l.init(355462360,4144912697),new l.init(1731405415,4290775857),new l.init(2394180231,1750603025),new l.init(3675008525,1694076839),new l.init(1203062813,3204075428)])},_doFinalize:function(){var C=h._doFinalize.call(this);return C.sigBytes-=16,C}});e.SHA384=h._createHelper(b),e.HmacSHA384=h._createHmacHelper(b)})(),(function(){var e=p,V=e.lib,l=V.WordArray,a=V.Hasher,V=e.algo,h=l.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),b=l.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),C=l.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),x=l.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),_=l.create([0,1518500249,1859775393,2400959708,2840853838]),L=l.create([1352829926,1548603684,1836072691,2053994217,0]),V=V.RIPEMD160=a.extend({_doReset:function(){this._hash=l.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(ht,gt){for(var P=0;16>P;P++){var I=gt+P,ut=ht[I];ht[I]=(ut<<8|ut>>>24)&16711935|(ut<<24|ut>>>8)&4278255360}var I=this._hash.words,ut=_.words,T=L.words,at=h.words,Y=b.words,wt=C.words,Tt=x.words,Wt,Gt,ve,be,d,S,st,z,_t,Mt;S=Wt=I[0],st=Gt=I[1],z=ve=I[2],_t=be=I[3],Mt=d=I[4];for(var te,P=0;80>P;P+=1)te=Wt+ht[gt+at[P]]|0,te=16>P?te+((Gt^ve^be)+ut[0]):32>P?te+((Gt&ve|~Gt&be)+ut[1]):48>P?te+(((Gt|~ve)^be)+ut[2]):64>P?te+((Gt&be|ve&~be)+ut[3]):te+((Gt^(ve|~be))+ut[4]),te|=0,te=te<<wt[P]|te>>>32-wt[P],te=te+d|0,Wt=d,d=be,be=ve<<10|ve>>>22,ve=Gt,Gt=te,te=S+ht[gt+Y[P]]|0,te=16>P?te+((st^(z|~_t))+T[0]):32>P?te+((st&_t|z&~_t)+T[1]):48>P?te+(((st|~z)^_t)+T[2]):64>P?te+((st&z|~st&_t)+T[3]):te+((st^z^_t)+T[4]),te|=0,te=te<<Tt[P]|te>>>32-Tt[P],te=te+Mt|0,S=Mt,Mt=_t,_t=z<<10|z>>>22,z=st,st=te;te=I[1]+ve+_t|0,I[1]=I[2]+be+Mt|0,I[2]=I[3]+d+S|0,I[3]=I[4]+Wt+st|0,I[4]=I[0]+Gt+z|0,I[0]=te},_doFinalize:function(){var ht=this._data,gt=ht.words,P=8*this._nDataBytes,I=8*ht.sigBytes;for(gt[I>>>5]|=128<<24-I%32,gt[(I+64>>>9<<4)+14]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,ht.sigBytes=4*(gt.length+1),this._process(),ht=this._hash,gt=ht.words,P=0;5>P;P++)I=gt[P],gt[P]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360;return ht},clone:function(){var ht=a.clone.call(this);return ht._hash=this._hash.clone(),ht}});e.RIPEMD160=a._createHelper(V),e.HmacRIPEMD160=a._createHmacHelper(V)})(Math),(function(){var e=p,l=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(a,h){a=this._hasher=new a.init,typeof h=="string"&&(h=l.parse(h));var b=a.blockSize,C=4*b;h.sigBytes>C&&(h=a.finalize(h)),h.clamp();for(var x=this._oKey=h.clone(),_=this._iKey=h.clone(),L=x.words,V=_.words,ht=0;ht<b;ht++)L[ht]^=1549556828,V[ht]^=909522486;x.sigBytes=_.sigBytes=C,this.reset()},reset:function(){var a=this._hasher;a.reset(),a.update(this._iKey)},update:function(a){return this._hasher.update(a),this},finalize:function(a){var h=this._hasher;return a=h.finalize(a),h.reset(),h.finalize(this._oKey.clone().concat(a))}})})(),(function(){var e=p,h=e.lib,l=h.Base,a=h.WordArray,h=e.algo,b=h.HMAC,C=h.PBKDF2=l.extend({cfg:l.extend({keySize:4,hasher:h.SHA1,iterations:1}),init:function(x){this.cfg=this.cfg.extend(x)},compute:function(x,_){for(var ut=this.cfg,L=b.create(ut.hasher,x),V=a.create(),ht=a.create([1]),gt=V.words,P=ht.words,I=ut.keySize,ut=ut.iterations;gt.length<I;){var T=L.update(_).finalize(ht);L.reset();for(var at=T.words,Y=at.length,wt=T,Tt=1;Tt<ut;Tt++){wt=L.finalize(wt),L.reset();for(var Wt=wt.words,Gt=0;Gt<Y;Gt++)at[Gt]^=Wt[Gt]}V.concat(T),P[0]++}return V.sigBytes=4*I,V}});e.PBKDF2=function(x,_,L){return C.create(L).compute(x,_)}})();var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m="=";function A(e){var l,a,h="";for(l=0;l+3<=e.length;l+=3)a=parseInt(e.substring(l,l+3),16),h+=g.charAt(a>>6)+g.charAt(a&63);if(l+1==e.length?(a=parseInt(e.substring(l,l+1),16),h+=g.charAt(a<<2)):l+2==e.length&&(a=parseInt(e.substring(l,l+2),16),h+=g.charAt(a>>2)+g.charAt((a&3)<<4)),m)for(;(h.length&3)>0;)h+=m;return h}function y(e){var l="",a,h=0,b,C;for(a=0;a<e.length&&e.charAt(a)!=m;++a)C=g.indexOf(e.charAt(a)),!(C<0)&&(h==0?(l+=pt(C>>2),b=C&3,h=1):h==1?(l+=pt(b<<2|C>>4),b=C&15,h=2):h==2?(l+=pt(b),l+=pt(C>>2),b=C&3,h=3):(l+=pt(b<<2|C>>4),l+=pt(C&15),h=0));return h==1&&(l+=pt(b<<2)),l}function D(e){var l=y(e),a,h=new Array;for(a=0;2*a<l.length;++a)h[a]=parseInt(l.substring(2*a,2*a+2),16);return h}var o,M=0xdeadbeefcafe,W=(M&16777215)==15715070;function w(e,l,a){e!=null&&(typeof e=="number"?this.fromNumber(e,l,a):l==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,l))}function U(){return new w(null)}function nt(e,l,a,h,b,C){for(;--C>=0;){var x=l*this[e++]+a[h]+b;b=Math.floor(x/67108864),a[h++]=x&67108863}return b}function X(e,l,a,h,b,C){for(var x=l&32767,_=l>>15;--C>=0;){var L=this[e]&32767,V=this[e++]>>15,ht=_*L+V*x;L=x*L+((ht&32767)<<15)+a[h]+(b&1073741823),b=(L>>>30)+(ht>>>15)+_*V+(b>>>30),a[h++]=L&1073741823}return b}function j(e,l,a,h,b,C){for(var x=l&16383,_=l>>14;--C>=0;){var L=this[e]&16383,V=this[e++]>>14,ht=_*L+V*x;L=x*L+((ht&16383)<<14)+a[h]+b,b=(L>>28)+(ht>>14)+_*V,a[h++]=L&268435455}return b}W&&r.appName=="Microsoft Internet Explorer"?(w.prototype.am=X,o=30):W&&r.appName!="Netscape"?(w.prototype.am=nt,o=26):(w.prototype.am=j,o=28),w.prototype.DB=o,w.prototype.DM=(1<<o)-1,w.prototype.DV=1<<o;var it=52;w.prototype.FV=Math.pow(2,it),w.prototype.F1=it-o,w.prototype.F2=2*o-it;var ot="0123456789abcdefghijklmnopqrstuvwxyz",K=new Array,H,q;for(H=48,q=0;q<=9;++q)K[H++]=q;for(H=97,q=10;q<36;++q)K[H++]=q;for(H=65,q=10;q<36;++q)K[H++]=q;function pt(e){return ot.charAt(e)}function yt(e,l){var a=K[e.charCodeAt(l)];return a??-1}function Rt(e){for(var l=this.t-1;l>=0;--l)e[l]=this[l];e.t=this.t,e.s=this.s}function Et(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function vt(e){var l=U();return l.fromInt(e),l}function Ft(e,l){var a;if(l==16)a=4;else if(l==8)a=3;else if(l==256)a=8;else if(l==2)a=1;else if(l==32)a=5;else if(l==4)a=2;else{this.fromRadix(e,l);return}this.t=0,this.s=0;for(var h=e.length,b=!1,C=0;--h>=0;){var x=a==8?e[h]&255:yt(e,h);if(x<0){e.charAt(h)=="-"&&(b=!0);continue}b=!1,C==0?this[this.t++]=x:C+a>this.DB?(this[this.t-1]|=(x&(1<<this.DB-C)-1)<<C,this[this.t++]=x>>this.DB-C):this[this.t-1]|=x<<C,C+=a,C>=this.DB&&(C-=this.DB)}a==8&&e[0]&128&&(this.s=-1,C>0&&(this[this.t-1]|=(1<<this.DB-C)-1<<C)),this.clamp(),b&&w.ZERO.subTo(this,this)}function Xt(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t}function ee(e){if(this.s<0)return"-"+this.negate().toString(e);var l;if(e==16)l=4;else if(e==8)l=3;else if(e==2)l=1;else if(e==32)l=5;else if(e==4)l=2;else return this.toRadix(e);var a=(1<<l)-1,h,b=!1,C="",x=this.t,_=this.DB-x*this.DB%l;if(x-- >0)for(_<this.DB&&(h=this[x]>>_)>0&&(b=!0,C=pt(h));x>=0;)_<l?(h=(this[x]&(1<<_)-1)<<l-_,h|=this[--x]>>(_+=this.DB-l)):(h=this[x]>>(_-=l)&a,_<=0&&(_+=this.DB,--x)),h>0&&(b=!0),b&&(C+=pt(h));return b?C:"0"}function ne(){var e=U();return w.ZERO.subTo(this,e),e}function ae(){return this.s<0?this.negate():this}function Le(e){var l=this.s-e.s;if(l!=0)return l;var a=this.t;if(l=a-e.t,l!=0)return this.s<0?-l:l;for(;--a>=0;)if((l=this[a]-e[a])!=0)return l;return 0}function de(e){var l=1,a;return(a=e>>>16)!=0&&(e=a,l+=16),(a=e>>8)!=0&&(e=a,l+=8),(a=e>>4)!=0&&(e=a,l+=4),(a=e>>2)!=0&&(e=a,l+=2),(a=e>>1)!=0&&(e=a,l+=1),l}function He(){return this.t<=0?0:this.DB*(this.t-1)+de(this[this.t-1]^this.s&this.DM)}function ze(e,l){var a;for(a=this.t-1;a>=0;--a)l[a+e]=this[a];for(a=e-1;a>=0;--a)l[a]=0;l.t=this.t+e,l.s=this.s}function Pe(e,l){for(var a=e;a<this.t;++a)l[a-e]=this[a];l.t=Math.max(this.t-e,0),l.s=this.s}function Je(e,l){var a=e%this.DB,h=this.DB-a,b=(1<<h)-1,C=Math.floor(e/this.DB),x=this.s<<a&this.DM,_;for(_=this.t-1;_>=0;--_)l[_+C+1]=this[_]>>h|x,x=(this[_]&b)<<a;for(_=C-1;_>=0;--_)l[_]=0;l[C]=x,l.t=this.t+C+1,l.s=this.s,l.clamp()}function Xe(e,l){l.s=this.s;var a=Math.floor(e/this.DB);if(a>=this.t){l.t=0;return}var h=e%this.DB,b=this.DB-h,C=(1<<h)-1;l[0]=this[a]>>h;for(var x=a+1;x<this.t;++x)l[x-a-1]|=(this[x]&C)<<b,l[x-a]=this[x]>>h;h>0&&(l[this.t-a-1]|=(this.s&C)<<b),l.t=this.t-a,l.clamp()}function Ae(e,l){for(var a=0,h=0,b=Math.min(e.t,this.t);a<b;)h+=this[a]-e[a],l[a++]=h&this.DM,h>>=this.DB;if(e.t<this.t){for(h-=e.s;a<this.t;)h+=this[a],l[a++]=h&this.DM,h>>=this.DB;h+=this.s}else{for(h+=this.s;a<e.t;)h-=e[a],l[a++]=h&this.DM,h>>=this.DB;h-=e.s}l.s=h<0?-1:0,h<-1?l[a++]=this.DV+h:h>0&&(l[a++]=h),l.t=a,l.clamp()}function xe(e,l){var a=this.abs(),h=e.abs(),b=a.t;for(l.t=b+h.t;--b>=0;)l[b]=0;for(b=0;b<h.t;++b)l[b+a.t]=a.am(0,h[b],l,b,0,a.t);l.s=0,l.clamp(),this.s!=e.s&&w.ZERO.subTo(l,l)}function Qe(e){for(var l=this.abs(),a=e.t=2*l.t;--a>=0;)e[a]=0;for(a=0;a<l.t-1;++a){var h=l.am(a,l[a],e,2*a,0,1);(e[a+l.t]+=l.am(a+1,2*l[a],e,2*a+1,h,l.t-a-1))>=l.DV&&(e[a+l.t]-=l.DV,e[a+l.t+1]=1)}e.t>0&&(e[e.t-1]+=l.am(a,l[a],e,2*a,0,1)),e.s=0,e.clamp()}function Ve(e,l,a){var h=e.abs();if(!(h.t<=0)){var b=this.abs();if(b.t<h.t){l?.fromInt(0),a!=null&&this.copyTo(a);return}a==null&&(a=U());var C=U(),x=this.s,_=e.s,L=this.DB-de(h[h.t-1]);L>0?(h.lShiftTo(L,C),b.lShiftTo(L,a)):(h.copyTo(C),b.copyTo(a));var V=C.t,ht=C[V-1];if(ht!=0){var gt=ht*(1<<this.F1)+(V>1?C[V-2]>>this.F2:0),P=this.FV/gt,I=(1<<this.F1)/gt,ut=1<<this.F2,T=a.t,at=T-V,Y=l??U();for(C.dlShiftTo(at,Y),a.compareTo(Y)>=0&&(a[a.t++]=1,a.subTo(Y,a)),w.ONE.dlShiftTo(V,Y),Y.subTo(C,C);C.t<V;)C[C.t++]=0;for(;--at>=0;){var wt=a[--T]==ht?this.DM:Math.floor(a[T]*P+(a[T-1]+ut)*I);if((a[T]+=C.am(0,wt,a,at,0,V))<wt)for(C.dlShiftTo(at,Y),a.subTo(Y,a);a[T]<--wt;)a.subTo(Y,a)}l!=null&&(a.drShiftTo(V,l),x!=_&&w.ZERO.subTo(l,l)),a.t=V,a.clamp(),L>0&&a.rShiftTo(L,a),x<0&&w.ZERO.subTo(a,a)}}}function Ze(e){var l=U();return this.abs().divRemTo(e,null,l),this.s<0&&l.compareTo(w.ZERO)>0&&e.subTo(l,l),l}function vr(e){this.m=e}function Pr(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function Dr(e){return e}function Q(e){e.divRemTo(this.m,null,e)}function k(e,l,a){e.multiplyTo(l,a),this.reduce(a)}function Z(e,l){e.squareTo(l),this.reduce(l)}vr.prototype.convert=Pr,vr.prototype.revert=Dr,vr.prototype.reduce=Q,vr.prototype.mulTo=k,vr.prototype.sqrTo=Z;function se(){if(this.t<1)return 0;var e=this[0];if(!(e&1))return 0;var l=e&3;return l=l*(2-(e&15)*l)&15,l=l*(2-(e&255)*l)&255,l=l*(2-((e&65535)*l&65535))&65535,l=l*(2-e*l%this.DV)%this.DV,l>0?this.DV-l:-l}function ye(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function rr(e){var l=U();return e.abs().dlShiftTo(this.m.t,l),l.divRemTo(this.m,null,l),e.s<0&&l.compareTo(w.ZERO)>0&&this.m.subTo(l,l),l}function dr(e){var l=U();return e.copyTo(l),this.reduce(l),l}function mr(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var l=0;l<this.m.t;++l){var a=e[l]&32767,h=a*this.mpl+((a*this.mph+(e[l]>>15)*this.mpl&this.um)<<15)&e.DM;for(a=l+this.m.t,e[a]+=this.m.am(0,h,e,l,0,this.m.t);e[a]>=e.DV;)e[a]-=e.DV,e[++a]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function ur(e,l){e.squareTo(l),this.reduce(l)}function er(e,l,a){e.multiplyTo(l,a),this.reduce(a)}ye.prototype.convert=rr,ye.prototype.revert=dr,ye.prototype.reduce=mr,ye.prototype.mulTo=er,ye.prototype.sqrTo=ur;function Gr(){return(this.t>0?this[0]&1:this.s)==0}function Lr(e,l){if(e>4294967295||e<1)return w.ONE;var a=U(),h=U(),b=l.convert(this),C=de(e)-1;for(b.copyTo(a);--C>=0;)if(l.sqrTo(a,h),(e&1<<C)>0)l.mulTo(h,b,a);else{var x=a;a=h,h=x}return l.revert(a)}function Br(e,l){var a;return e<256||l.isEven()?a=new vr(l):a=new ye(l),this.exp(e,a)}w.prototype.copyTo=Rt,w.prototype.fromInt=Et,w.prototype.fromString=Ft,w.prototype.clamp=Xt,w.prototype.dlShiftTo=ze,w.prototype.drShiftTo=Pe,w.prototype.lShiftTo=Je,w.prototype.rShiftTo=Xe,w.prototype.subTo=Ae,w.prototype.multiplyTo=xe,w.prototype.squareTo=Qe,w.prototype.divRemTo=Ve,w.prototype.invDigit=se,w.prototype.isEven=Gr,w.prototype.exp=Lr,w.prototype.toString=ee,w.prototype.negate=ne,w.prototype.abs=ae,w.prototype.compareTo=Le,w.prototype.bitLength=He,w.prototype.mod=Ze,w.prototype.modPowInt=Br,w.ZERO=vt(0),w.ONE=vt(1);function N(){var e=U();return this.copyTo(e),e}function f(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function B(){return this.t==0?this.s:this[0]<<24>>24}function J(){return this.t==0?this.s:this[0]<<16>>16}function St(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function Pt(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function et(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var l=this.chunkSize(e),a=Math.pow(e,l),h=vt(a),b=U(),C=U(),x="";for(this.divRemTo(h,b,C);b.signum()>0;)x=(a+C.intValue()).toString(e).substr(1)+x,b.divRemTo(h,b,C);return C.intValue().toString(e)+x}function zt(e,l){this.fromInt(0),l==null&&(l=10);for(var a=this.chunkSize(l),h=Math.pow(l,a),b=!1,C=0,x=0,_=0;_<e.length;++_){var L=yt(e,_);if(L<0){e.charAt(_)=="-"&&this.signum()==0&&(b=!0);continue}x=l*x+L,++C>=a&&(this.dMultiply(h),this.dAddOffset(x,0),C=0,x=0)}C>0&&(this.dMultiply(Math.pow(l,C)),this.dAddOffset(x,0)),b&&w.ZERO.subTo(this,this)}function Ut(e,l,a){if(typeof l=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,a),this.testBit(e-1)||this.bitwiseTo(w.ONE.shiftLeft(e-1),Ct,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(l);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(w.ONE.shiftLeft(e-1),this);else{var h=new Array,b=e&7;h.length=(e>>3)+1,l.nextBytes(h),b>0?h[0]&=(1<<b)-1:h[0]=0,this.fromString(h,256)}}function _e(){var e=this.t,l=new Array;l[0]=this.s;var a=this.DB-e*this.DB%8,h,b=0;if(e-- >0)for(a<this.DB&&(h=this[e]>>a)!=(this.s&this.DM)>>a&&(l[b++]=h|this.s<<this.DB-a);e>=0;)a<8?(h=(this[e]&(1<<a)-1)<<8-a,h|=this[--e]>>(a+=this.DB-8)):(h=this[e]>>(a-=8)&255,a<=0&&(a+=this.DB,--e)),h&128&&(h|=-256),b==0&&(this.s&128)!=(h&128)&&++b,(b>0||h!=this.s)&&(l[b++]=h);return l}function xt(e){return this.compareTo(e)==0}function dt(e){return this.compareTo(e)<0?this:e}function tt(e){return this.compareTo(e)>0?this:e}function F(e,l,a){var h,b,C=Math.min(e.t,this.t);for(h=0;h<C;++h)a[h]=l(this[h],e[h]);if(e.t<this.t){for(b=e.s&this.DM,h=C;h<this.t;++h)a[h]=l(this[h],b);a.t=this.t}else{for(b=this.s&this.DM,h=C;h<e.t;++h)a[h]=l(b,e[h]);a.t=e.t}a.s=l(this.s,e.s),a.clamp()}function rt(e,l){return e&l}function At(e){var l=U();return this.bitwiseTo(e,rt,l),l}function Ct(e,l){return e|l}function Nt(e){var l=U();return this.bitwiseTo(e,Ct,l),l}function Yt(e,l){return e^l}function Ce(e){var l=U();return this.bitwiseTo(e,Yt,l),l}function Qt(e,l){return e&~l}function Ee(e){var l=U();return this.bitwiseTo(e,Qt,l),l}function Be(){for(var e=U(),l=0;l<this.t;++l)e[l]=this.DM&~this[l];return e.t=this.t,e.s=~this.s,e}function sr(e){var l=U();return e<0?this.rShiftTo(-e,l):this.lShiftTo(e,l),l}function O(e){var l=U();return e<0?this.lShiftTo(-e,l):this.rShiftTo(e,l),l}function le(e){if(e==0)return-1;var l=0;return e&65535||(e>>=16,l+=16),e&255||(e>>=8,l+=8),e&15||(e>>=4,l+=4),e&3||(e>>=2,l+=2),e&1||++l,l}function qt(){for(var e=0;e<this.t;++e)if(this[e]!=0)return e*this.DB+le(this[e]);return this.s<0?this.t*this.DB:-1}function pe(e){for(var l=0;e!=0;)e&=e-1,++l;return l}function $t(){for(var e=0,l=this.s&this.DM,a=0;a<this.t;++a)e+=pe(this[a]^l);return e}function re(e){var l=Math.floor(e/this.DB);return l>=this.t?this.s!=0:(this[l]&1<<e%this.DB)!=0}function Re(e,l){var a=w.ONE.shiftLeft(e);return this.bitwiseTo(a,l,a),a}function De(e){return this.changeBit(e,Ct)}function ke(e){return this.changeBit(e,Qt)}function Ne(e){return this.changeBit(e,Yt)}function tr(e,l){for(var a=0,h=0,b=Math.min(e.t,this.t);a<b;)h+=this[a]+e[a],l[a++]=h&this.DM,h>>=this.DB;if(e.t<this.t){for(h+=e.s;a<this.t;)h+=this[a],l[a++]=h&this.DM,h>>=this.DB;h+=this.s}else{for(h+=this.s;a<e.t;)h+=e[a],l[a++]=h&this.DM,h>>=this.DB;h+=e.s}l.s=h<0?-1:0,h>0?l[a++]=h:h<-1&&(l[a++]=this.DV+h),l.t=a,l.clamp()}function lr(e){var l=U();return this.addTo(e,l),l}function or(e){var l=U();return this.subTo(e,l),l}function Ar(e){var l=U();return this.multiplyTo(e,l),l}function jr(){var e=U();return this.squareTo(e),e}function ln(e){var l=U();return this.divRemTo(e,l,null),l}function cn(e){var l=U();return this.divRemTo(e,null,l),l}function Vr(e){var l=U(),a=U();return this.divRemTo(e,l,a),new Array(l,a)}function yr(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function Tr(e,l){if(e!=0){for(;this.t<=l;)this[this.t++]=0;for(this[l]+=e;this[l]>=this.DV;)this[l]-=this.DV,++l>=this.t&&(this[this.t++]=0),++this[l]}}function gn(){}function Kn(e){return e}function Qr(e,l,a){e.multiplyTo(l,a)}function Wn(e,l){e.squareTo(l)}gn.prototype.convert=Kn,gn.prototype.revert=Kn,gn.prototype.mulTo=Qr,gn.prototype.sqrTo=Wn;function Sr(e){return this.exp(e,new gn)}function bn(e,l,a){var h=Math.min(this.t+e.t,l);for(a.s=0,a.t=h;h>0;)a[--h]=0;var b;for(b=a.t-this.t;h<b;++h)a[h+this.t]=this.am(0,e[h],a,h,0,this.t);for(b=Math.min(e.t,l);h<b;++h)this.am(0,e[h],a,h,0,l-h);a.clamp()}function os(e,l,a){--l;var h=a.t=this.t+e.t-l;for(a.s=0;--h>=0;)a[h]=0;for(h=Math.max(l-this.t,0);h<e.t;++h)a[this.t+h-l]=this.am(l-h,e[h],a,0,0,this.t+h-l);a.clamp(),a.drShiftTo(1,a)}function _n(e){this.r2=U(),this.q3=U(),w.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function Ps(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var l=U();return e.copyTo(l),this.reduce(l),l}function Xr(e){return e}function Is(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function Ts(e,l){e.squareTo(l),this.reduce(l)}function Xs(e,l,a){e.multiplyTo(l,a),this.reduce(a)}_n.prototype.convert=Ps,_n.prototype.revert=Xr,_n.prototype.reduce=Is,_n.prototype.mulTo=Xs,_n.prototype.sqrTo=Ts;function qs(e,l){var a=e.bitLength(),h,b=vt(1),C;if(a<=0)return b;a<18?h=1:a<48?h=3:a<144?h=4:a<768?h=5:h=6,a<8?C=new vr(l):l.isEven()?C=new _n(l):C=new ye(l);var x=new Array,_=3,L=h-1,V=(1<<h)-1;if(x[1]=C.convert(this),h>1){var ht=U();for(C.sqrTo(x[1],ht);_<=V;)x[_]=U(),C.mulTo(ht,x[_-2],x[_]),_+=2}var gt=e.t-1,P,I=!0,ut=U(),T;for(a=de(e[gt])-1;gt>=0;){for(a>=L?P=e[gt]>>a-L&V:(P=(e[gt]&(1<<a+1)-1)<<L-a,gt>0&&(P|=e[gt-1]>>this.DB+a-L)),_=h;!(P&1);)P>>=1,--_;if((a-=_)<0&&(a+=this.DB,--gt),I)x[P].copyTo(b),I=!1;else{for(;_>1;)C.sqrTo(b,ut),C.sqrTo(ut,b),_-=2;_>0?C.sqrTo(b,ut):(T=b,b=ut,ut=T),C.mulTo(ut,x[P],b)}for(;gt>=0&&!(e[gt]&1<<a);)C.sqrTo(b,ut),T=b,b=ut,ut=T,--a<0&&(a=this.DB-1,--gt)}return C.revert(b)}function as(e){var l=this.s<0?this.negate():this.clone(),a=e.s<0?e.negate():e.clone();if(l.compareTo(a)<0){var h=l;l=a,a=h}var b=l.getLowestSetBit(),C=a.getLowestSetBit();if(C<0)return l;for(b<C&&(C=b),C>0&&(l.rShiftTo(C,l),a.rShiftTo(C,a));l.signum()>0;)(b=l.getLowestSetBit())>0&&l.rShiftTo(b,l),(b=a.getLowestSetBit())>0&&a.rShiftTo(b,a),l.compareTo(a)>=0?(l.subTo(a,l),l.rShiftTo(1,l)):(a.subTo(l,a),a.rShiftTo(1,a));return C>0&&a.lShiftTo(C,a),a}function In(e){if(e<=0)return 0;var l=this.DV%e,a=this.s<0?e-1:0;if(this.t>0)if(l==0)a=this[0]%e;else for(var h=this.t-1;h>=0;--h)a=(l*a+this[h])%e;return a}function xi(e){var l=e.isEven();if(this.isEven()&&l||e.signum()==0)return w.ZERO;for(var a=e.clone(),h=this.clone(),b=vt(1),C=vt(0),x=vt(0),_=vt(1);a.signum()!=0;){for(;a.isEven();)a.rShiftTo(1,a),l?((!b.isEven()||!C.isEven())&&(b.addTo(this,b),C.subTo(e,C)),b.rShiftTo(1,b)):C.isEven()||C.subTo(e,C),C.rShiftTo(1,C);for(;h.isEven();)h.rShiftTo(1,h),l?((!x.isEven()||!_.isEven())&&(x.addTo(this,x),_.subTo(e,_)),x.rShiftTo(1,x)):_.isEven()||_.subTo(e,_),_.rShiftTo(1,_);a.compareTo(h)>=0?(a.subTo(h,a),l&&b.subTo(x,b),C.subTo(_,C)):(h.subTo(a,h),l&&x.subTo(b,x),_.subTo(C,_))}if(h.compareTo(w.ONE)!=0)return w.ZERO;if(_.compareTo(e)>=0)return _.subtract(e);if(_.signum()<0)_.addTo(e,_);else return _;return _.signum()<0?_.add(e):_}var Xn=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],ls=(1<<26)/Xn[Xn.length-1];function Mi(e){var l,a=this.abs();if(a.t==1&&a[0]<=Xn[Xn.length-1]){for(l=0;l<Xn.length;++l)if(a[0]==Xn[l])return!0;return!1}if(a.isEven())return!1;for(l=1;l<Xn.length;){for(var h=Xn[l],b=l+1;b<Xn.length&&h<ls;)h*=Xn[b++];for(h=a.modInt(h);l<b;)if(h%Xn[l++]==0)return!1}return a.millerRabin(e)}function Vi(e){var l=this.subtract(w.ONE),a=l.getLowestSetBit();if(a<=0)return!1;var h=l.shiftRight(a);e=e+1>>1,e>Xn.length&&(e=Xn.length);for(var b=U(),C=0;C<e;++C){b.fromInt(Xn[Math.floor(Math.random()*Xn.length)]);var x=b.modPow(h,this);if(x.compareTo(w.ONE)!=0&&x.compareTo(l)!=0){for(var _=1;_++<a&&x.compareTo(l)!=0;)if(x=x.modPowInt(2,this),x.compareTo(w.ONE)==0)return!1;if(x.compareTo(l)!=0)return!1}}return!0}w.prototype.chunkSize=St,w.prototype.toRadix=et,w.prototype.fromRadix=zt,w.prototype.fromNumber=Ut,w.prototype.bitwiseTo=F,w.prototype.changeBit=Re,w.prototype.addTo=tr,w.prototype.dMultiply=yr,w.prototype.dAddOffset=Tr,w.prototype.multiplyLowerTo=bn,w.prototype.multiplyUpperTo=os,w.prototype.modInt=In,w.prototype.millerRabin=Vi,w.prototype.clone=N,w.prototype.intValue=f,w.prototype.byteValue=B,w.prototype.shortValue=J,w.prototype.signum=Pt,w.prototype.toByteArray=_e,w.prototype.equals=xt,w.prototype.min=dt,w.prototype.max=tt,w.prototype.and=At,w.prototype.or=Nt,w.prototype.xor=Ce,w.prototype.andNot=Ee,w.prototype.not=Be,w.prototype.shiftLeft=sr,w.prototype.shiftRight=O,w.prototype.getLowestSetBit=qt,w.prototype.bitCount=$t,w.prototype.testBit=re,w.prototype.setBit=De,w.prototype.clearBit=ke,w.prototype.flipBit=Ne,w.prototype.add=lr,w.prototype.subtract=or,w.prototype.multiply=Ar,w.prototype.divide=ln,w.prototype.remainder=cn,w.prototype.divideAndRemainder=Vr,w.prototype.modPow=qs,w.prototype.modInverse=xi,w.prototype.pow=Sr,w.prototype.gcd=as,w.prototype.isProbablePrime=Mi,w.prototype.square=jr;function _i(){this.i=0,this.j=0,this.S=new Array}function cu(e){var l,a,h;for(l=0;l<256;++l)this.S[l]=l;for(a=0,l=0;l<256;++l)a=a+this.S[l]+e[l%e.length]&255,h=this.S[l],this.S[l]=this.S[a],this.S[a]=h;this.i=0,this.j=0}function mi(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]}_i.prototype.init=cu,_i.prototype.next=mi;function qi(){return new _i}var Bi=256,ai,ns,Cn;function bt(e){ns[Cn++]^=e&255,ns[Cn++]^=e>>8&255,ns[Cn++]^=e>>16&255,ns[Cn++]^=e>>24&255,Cn>=Bi&&(Cn-=Bi)}function It(){bt(new Date().getTime())}if(ns==null){if(ns=new Array,Cn=0,n!==void 0&&(n.crypto!==void 0||n.msCrypto!==void 0)){if(fe=n.crypto||n.msCrypto,fe.getRandomValues)for(Me=new Uint8Array(32),fe.getRandomValues(Me),Ht=0;Ht<32;++Ht)ns[Cn++]=Me[Ht];else if(r.appName=="Netscape"&&r.appVersion<"5")for(We=n.crypto.random(32),Ht=0;Ht<We.length;++Ht)ns[Cn++]=We.charCodeAt(Ht)&255}for(;Cn<Bi;)Ht=Math.floor(65536*Math.random()),ns[Cn++]=Ht>>>8,ns[Cn++]=Ht&255;Cn=0,It()}var Ht,fe,Me,We;function ir(){if(ai==null){for(It(),ai=qi(),ai.init(ns),Cn=0;Cn<ns.length;++Cn)ns[Cn]=0;Cn=0}return ai.next()}function cr(e){var l;for(l=0;l<e.length;++l)e[l]=ir()}function nn(){}nn.prototype.nextBytes=cr;function en(e,l){return new w(e,l)}function Er(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function hs(e,l){if(this.isPublic=!0,this.isPrivate=!1,typeof e!="string")this.n=e,this.e=l;else if(e!=null&&l!=null&&e.length>0&&l.length>0)this.n=en(e,16),this.e=parseInt(l,16);else throw"Invalid RSA public key"}function Ns(e){return e.modPowInt(this.e,this.n)}Er.prototype.doPublic=Ns,Er.prototype.setPublic=hs,Er.prototype.type="RSA";function Si(e,l,a){if(this.isPrivate=!0,typeof e!="string")this.n=e,this.e=l,this.d=a;else if(e!=null&&l!=null&&e.length>0&&l.length>0)this.n=en(e,16),this.e=parseInt(l,16),this.d=en(a,16);else throw"Invalid RSA private key"}function ws(e,l,a,h,b,C,x,_){if(this.isPrivate=!0,this.isPublic=!1,e==null)throw"RSASetPrivateEx N == null";if(l==null)throw"RSASetPrivateEx E == null";if(e.length==0)throw"RSASetPrivateEx N.length == 0";if(l.length==0)throw"RSASetPrivateEx E.length == 0";if(e!=null&&l!=null&&e.length>0&&l.length>0)this.n=en(e,16),this.e=parseInt(l,16),this.d=en(a,16),this.p=en(h,16),this.q=en(b,16),this.dmp1=en(C,16),this.dmq1=en(x,16),this.coeff=en(_,16);else throw"Invalid RSA private key in RSASetPrivateEx"}function ds(e,l){var a=new nn,h=e>>1;this.e=parseInt(l,16);for(var b=new w(l,16),C=e/2-100,x=w.ONE.shiftLeft(C);;){for(;this.p=new w(e-h,1,a),!(this.p.subtract(w.ONE).gcd(b).compareTo(w.ONE)==0&&this.p.isProbablePrime(10)););for(;this.q=new w(h,1,a),!(this.q.subtract(w.ONE).gcd(b).compareTo(w.ONE)==0&&this.q.isProbablePrime(10)););if(this.p.compareTo(this.q)<=0){var _=this.p;this.p=this.q,this.q=_}var L=this.q.subtract(this.p).abs();if(!(L.bitLength()<C||L.compareTo(x)<=0)){var V=this.p.subtract(w.ONE),ht=this.q.subtract(w.ONE),gt=V.multiply(ht);if(gt.gcd(b).compareTo(w.ONE)==0&&(this.n=this.p.multiply(this.q),this.n.bitLength()==e)){this.d=b.modInverse(gt),this.dmp1=this.d.mod(V),this.dmq1=this.d.mod(ht),this.coeff=this.q.modInverse(this.p);break}}}this.isPrivate=!0}function Ii(e){if(this.p==null||this.q==null)return e.modPow(this.d,this.n);for(var l=e.mod(this.p).modPow(this.dmp1,this.p),a=e.mod(this.q).modPow(this.dmq1,this.q);l.compareTo(a)<0;)l=l.add(this.p);return l.subtract(a).multiply(this.coeff).mod(this.p).multiply(this.q).add(a)}Er.prototype.doPrivate=Ii,Er.prototype.setPrivate=Si,Er.prototype.setPrivateEx=ws,Er.prototype.generate=ds;function En(e,l){this.x=l,this.q=e}function Ki(e){return e==this?!0:this.q.equals(e.q)&&this.x.equals(e.x)}function Eo(){return this.x}function vo(){return new En(this.q,this.x.negate().mod(this.q))}function Rn(e){return new En(this.q,this.x.add(e.toBigInteger()).mod(this.q))}function Bn(e){return new En(this.q,this.x.subtract(e.toBigInteger()).mod(this.q))}function Ao(e){return new En(this.q,this.x.multiply(e.toBigInteger()).mod(this.q))}function Fo(){return new En(this.q,this.x.square().mod(this.q))}function wo(e){return new En(this.q,this.x.multiply(e.toBigInteger().modInverse(this.q)).mod(this.q))}En.prototype.equals=Ki,En.prototype.toBigInteger=Eo,En.prototype.negate=vo,En.prototype.add=Rn,En.prototype.subtract=Bn,En.prototype.multiply=Ao,En.prototype.square=Fo,En.prototype.divide=wo,En.prototype.sqrt=function(){return new En(this.q,this.x.sqrt().mod(this.q))};function on(e,l,a,h){this.curve=e,this.x=l,this.y=a,h==null?this.z=w.ONE:this.z=h,this.zinv=null}function bo(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function Co(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function Ju(e){if(e==this)return!0;if(this.isInfinity())return e.isInfinity();if(e.isInfinity())return this.isInfinity();var l,a;return l=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),l.equals(w.ZERO)?(a=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q),a.equals(w.ZERO)):!1}function Do(){return this.x==null&&this.y==null?!0:this.z.equals(w.ZERO)&&!this.y.toBigInteger().equals(w.ZERO)}function Qn(){return new on(this.curve,this.x,this.y.negate(),this.z)}function bu(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var l=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),a=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q);if(w.ZERO.equals(a))return w.ZERO.equals(l)?this.twice():this.curve.getInfinity();var h=new w("3"),b=this.x.toBigInteger(),C=this.y.toBigInteger(),x=e.x.toBigInteger(),_=e.y.toBigInteger(),L=a.square(),V=L.multiply(a),ht=b.multiply(L),gt=l.square().multiply(this.z),P=gt.subtract(ht.shiftLeft(1)).multiply(e.z).subtract(V).multiply(a).mod(this.curve.q),I=ht.multiply(h).multiply(l).subtract(C.multiply(V)).subtract(gt.multiply(l)).multiply(e.z).add(l.multiply(V)).mod(this.curve.q),ut=V.multiply(this.z).multiply(e.z).mod(this.curve.q);return new on(this.curve,this.curve.fromBigInteger(P),this.curve.fromBigInteger(I),ut)}function yi(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var e=new w("3"),l=this.x.toBigInteger(),a=this.y.toBigInteger(),h=a.multiply(this.z),b=h.multiply(a).mod(this.curve.q),C=this.curve.a.toBigInteger(),x=l.square().multiply(e);w.ZERO.equals(C)||(x=x.add(this.z.square().multiply(C))),x=x.mod(this.curve.q);var _=x.square().subtract(l.shiftLeft(3).multiply(b)).shiftLeft(1).multiply(h).mod(this.curve.q),L=x.multiply(e).multiply(l).subtract(b.shiftLeft(1)).shiftLeft(2).multiply(b).subtract(x.square().multiply(x)).mod(this.curve.q),V=h.square().multiply(h).shiftLeft(3).mod(this.curve.q);return new on(this.curve,this.curve.fromBigInteger(_),this.curve.fromBigInteger(L),V)}function Wu(e){if(this.isInfinity())return this;if(e.signum()==0)return this.curve.getInfinity();var l=e,a=l.multiply(new w("3")),h=this.negate(),b=this,C=this.curve.q.subtract(e),x=C.multiply(new w("3")),_=new on(this.curve,this.x,this.y),L=_.negate(),V;for(V=a.bitLength()-2;V>0;--V){b=b.twice();var ht=a.testBit(V),gt=l.testBit(V);ht!=gt&&(b=b.add(ht?this:h))}for(V=x.bitLength()-2;V>0;--V){_=_.twice();var P=x.testBit(V),I=C.testBit(V);P!=I&&(_=_.add(P?_:L))}return b}function Cu(e,l,a){var h;e.bitLength()>a.bitLength()?h=e.bitLength()-1:h=a.bitLength()-1;for(var b=this.curve.getInfinity(),C=this.add(l);h>=0;)b=b.twice(),e.testBit(h)?a.testBit(h)?b=b.add(C):b=b.add(this):a.testBit(h)&&(b=b.add(l)),--h;return b}on.prototype.getX=bo,on.prototype.getY=Co,on.prototype.equals=Ju,on.prototype.isInfinity=Do,on.prototype.negate=Qn,on.prototype.add=bu,on.prototype.twice=yi,on.prototype.multiply=Wu,on.prototype.multiplyTwo=Cu;function Yn(e,l,a){this.q=e,this.a=this.fromBigInteger(l),this.b=this.fromBigInteger(a),this.infinity=new on(this,null,null)}function Xu(){return this.q}function Zu(){return this.a}function Qu(){return this.b}function to(e){return e==this?!0:this.q.equals(e.q)&&this.a.equals(e.a)&&this.b.equals(e.b)}function eo(){return this.infinity}function no(e){return new En(this.q,e)}function bs(e){switch(parseInt(e.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:var l=e.substr(0,2),a=e.substr(2),h=this.fromBigInteger(new w(V,16)),b=this.getA(),C=this.getB(),x=h.square().add(b).multiply(h).add(C),_=x.sqrt();return l=="03"&&(_=_.negate()),new on(this,h,_);case 4:case 6:case 7:var L=(e.length-2)/2,V=e.substr(2,L),ht=e.substr(L+2,L);return new on(this,this.fromBigInteger(new w(V,16)),this.fromBigInteger(new w(ht,16)));default:return null}}Yn.prototype.getQ=Xu,Yn.prototype.getA=Zu,Yn.prototype.getB=Qu,Yn.prototype.equals=to,Yn.prototype.getInfinity=eo,Yn.prototype.fromBigInteger=no,Yn.prototype.decodePointHex=bs,En.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},on.prototype.getEncoded=function(e){var l=function(C,x){var _=C.toByteArrayUnsigned();if(x<_.length)_=_.slice(_.length-x);else for(;x>_.length;)_.unshift(0);return _},a=this.getX().toBigInteger(),h=this.getY().toBigInteger(),b=l(a,32);return e?h.isEven()?b.unshift(2):b.unshift(3):(b.unshift(4),b=b.concat(l(h,32))),b},on.decodeFrom=function(e,l){var a=l[0],h=l.length-1,b=l.slice(1,1+h/2),C=l.slice(1+h/2,1+h);b.unshift(0),C.unshift(0);var x=new w(b),_=new w(C);return new on(e,e.fromBigInteger(x),e.fromBigInteger(_))},on.decodeFromHex=function(e,l){var a=l.substr(0,2),h=l.length-2,b=l.substr(2,h/2),C=l.substr(2+h/2,h/2),x=new w(b,16),_=new w(C,16);return new on(e,e.fromBigInteger(x),e.fromBigInteger(_))},on.prototype.add2D=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;if(this.x.equals(e.x))return this.y.equals(e.y)?this.twice():this.curve.getInfinity();var l=e.x.subtract(this.x),a=e.y.subtract(this.y),h=a.divide(l),b=h.square().subtract(this.x).subtract(e.x),C=h.multiply(this.x.subtract(b)).subtract(this.y);return new on(this.curve,b,C)},on.prototype.twice2D=function(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var e=this.curve.fromBigInteger(w.valueOf(2)),l=this.curve.fromBigInteger(w.valueOf(3)),a=this.x.square().multiply(l).add(this.curve.a).divide(this.y.multiply(e)),h=a.square().subtract(this.x.multiply(e)),b=a.multiply(this.x.subtract(h)).subtract(this.y);return new on(this.curve,h,b)},on.prototype.multiply2D=function(e){if(this.isInfinity())return this;if(e.signum()==0)return this.curve.getInfinity();var l=e,a=l.multiply(new w("3")),h=this.negate(),b=this,C;for(C=a.bitLength()-2;C>0;--C){b=b.twice();var x=a.testBit(C),_=l.testBit(C);x!=_&&(b=b.add2D(x?this:h))}return b},on.prototype.isOnCurve=function(){var e=this.getX().toBigInteger(),l=this.getY().toBigInteger(),a=this.curve.getA().toBigInteger(),h=this.curve.getB().toBigInteger(),b=this.curve.getQ(),C=l.multiply(l).mod(b),x=e.multiply(e).multiply(e).add(a.multiply(e)).add(h).mod(b);return C.equals(x)},on.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},on.prototype.validate=function(){var e=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var l=this.getX().toBigInteger(),a=this.getY().toBigInteger();if(l.compareTo(w.ONE)<0||l.compareTo(e.subtract(w.ONE))>0)throw new Error("x coordinate out of bounds");if(a.compareTo(w.ONE)<0||a.compareTo(e.subtract(w.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(e).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var so=(function(){var e="(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)",l='(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))',a='(?:"'+l+'*")',h=new RegExp("(?:false|true|null|[\\{\\}\\[\\]]|"+e+"|"+a+")","g"),b=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),C={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function x(gt,P,I){return P?C[P]:String.fromCharCode(parseInt(I,16))}var _=new String(""),L="\\",V={"{":Object,"[":Array},ht=Object.hasOwnProperty;return function(gt,P){var I=gt.match(h),ut,T=I[0],at=!1;T==="{"?ut={}:T==="["?ut=[]:(ut=[],at=!0);for(var Y,wt=[ut],Tt=1-at,Wt=I.length;Tt<Wt;++Tt){T=I[Tt];var Gt;switch(T.charCodeAt(0)){default:Gt=wt[0],Gt[Y||Gt.length]=+T,Y=void 0;break;case 34:if(T=T.substring(1,T.length-1),T.indexOf(L)!==-1&&(T=T.replace(b,x)),Gt=wt[0],!Y)if(Gt instanceof Array)Y=Gt.length;else{Y=T||_;break}Gt[Y]=T,Y=void 0;break;case 91:Gt=wt[0],wt.unshift(Gt[Y||Gt.length]=[]),Y=void 0;break;case 93:wt.shift();break;case 102:Gt=wt[0],Gt[Y||Gt.length]=!1,Y=void 0;break;case 110:Gt=wt[0],Gt[Y||Gt.length]=null,Y=void 0;break;case 116:Gt=wt[0],Gt[Y||Gt.length]=!0,Y=void 0;break;case 123:Gt=wt[0],wt.unshift(Gt[Y||Gt.length]={}),Y=void 0;break;case 125:wt.shift();break}}if(at){if(wt.length!==1)throw new Error;ut=ut[0]}else if(wt.length)throw new Error;if(P){var ve=function(be,d){var S=be[d];if(S&&typeof S=="object"){var st=null;for(var z in S)if(ht.call(S,z)&&S!==be){var _t=ve(S,z);_t!==void 0?S[z]=_t:(st||(st=[]),st.push(z))}if(st)for(var Mt=st.length;--Mt>=0;)delete S[st[Mt]]}return P.call(be,d,S)};ut=ve({"":ut},"")}return ut}})();(typeof E>"u"||!E)&&(E={}),(typeof E.asn1>"u"||!E.asn1)&&(E.asn1={}),E.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){var l=e.toString(16);return l.length%2==1&&(l="0"+l),l},this.bigIntToMinTwosComplementsHex=function(e){return Ie(e)},this.getPEMStringFromHex=function(e,l){return $e(e,l)},this.newObject=function(e){var l=E,a=l.asn1,h=a.ASN1Object,b=a.DERBoolean,C=a.DERInteger,x=a.DERBitString,_=a.DEROctetString,L=a.DERNull,V=a.DERObjectIdentifier,ht=a.DEREnumerated,gt=a.DERUTF8String,P=a.DERNumericString,I=a.DERPrintableString,ut=a.DERTeletexString,T=a.DERIA5String,at=a.DERUTCTime,Y=a.DERGeneralizedTime,wt=a.DERVisibleString,Tt=a.DERBMPString,Wt=a.DERSequence,Gt=a.DERSet,ve=a.DERTaggedObject,be=a.ASN1Util.newObject;if(e instanceof a.ASN1Object)return e;var d=Object.keys(e);if(d.length!=1)throw new Error("key of param shall be only one.");var S=d[0];if(":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+S+":")==-1)throw new Error("undefined key: "+S);if(S=="bool")return new b(e[S]);if(S=="int")return new C(e[S]);if(S=="bitstr")return new x(e[S]);if(S=="octstr")return new _(e[S]);if(S=="null")return new L(e[S]);if(S=="oid")return new V(e[S]);if(S=="enum")return new ht(e[S]);if(S=="utf8str")return new gt(e[S]);if(S=="numstr")return new P(e[S]);if(S=="prnstr")return new I(e[S]);if(S=="telstr")return new ut(e[S]);if(S=="ia5str")return new T(e[S]);if(S=="utctime")return new at(e[S]);if(S=="gentime")return new Y(e[S]);if(S=="visstr")return new wt(e[S]);if(S=="bmpstr")return new Tt(e[S]);if(S=="asn1")return new h(e[S]);if(S=="seq"){for(var st=e[S],z=[],_t=0;_t<st.length;_t++){var Mt=be(st[_t]);z.push(Mt)}return new Wt({array:z})}if(S=="set"){for(var st=e[S],z=[],_t=0;_t<st.length;_t++){var Mt=be(st[_t]);z.push(Mt)}return new Gt({array:z})}if(S=="tag"){var te=e[S];if(Object.prototype.toString.call(te)==="[object Array]"&&te.length==3){var ie=be(te[2]);return new ve({tag:te[0],explicit:te[1],obj:ie})}else return new ve(te)}},this.jsonToASN1HEX=function(e){var l=this.newObject(e);return l.tohex()}},E.asn1.ASN1Util.oidHexToInt=function(e){for(var b="",l=parseInt(e.substr(0,2),16),a=Math.floor(l/40),h=l%40,b=a+"."+h,C="",x=2;x<e.length;x+=2){var _=parseInt(e.substr(x,2),16),L=("00000000"+_.toString(2)).slice(-8);if(C=C+L.substr(1,7),L.substr(0,1)=="0"){var V=new w(C,2);b=b+"."+V.toString(10),C=""}}return b},E.asn1.ASN1Util.oidIntToHex=function(e){var l=function(_){var L=_.toString(16);return L.length==1&&(L="0"+L),L},a=function(_){var L="",V=new w(_,10),ht=V.toString(2),gt=7-ht.length%7;gt==7&&(gt=0);for(var P="",I=0;I<gt;I++)P+="0";ht=P+ht;for(var I=0;I<ht.length-1;I+=7){var ut=ht.substr(I,7);I!=ht.length-7&&(ut="1"+ut),L+=l(parseInt(ut,2))}return L};if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var h="",b=e.split("."),C=parseInt(b[0])*40+parseInt(b[1]);h+=l(C),b.splice(0,2);for(var x=0;x<b.length;x++)h+=a(b[x]);return h},E.asn1.ASN1Object=function(e){var l=!0,a=null,h="00",b="00",C="";this.params=null,this.getLengthHexFromValue=function(){if(typeof this.hV>"u"||this.hV==null)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+C.length+",v="+this.hV);var x=this.hV.length/2,_=x.toString(16);if(_.length%2==1&&(_="0"+_),x<128)return _;var L=_.length/2;if(L>15)throw new Error("ASN.1 length too long to represent by 8x: n = "+x.toString(16));var V=128+L;return V.toString(16)+_},this.tohex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.getValueHex=function(){return this.tohex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(x){this.params=x},e!=null&&e.tlv!=null&&(this.hTLV=e.tlv,this.isModified=!1)},E.asn1.DERAbstractString=function(e){E.asn1.DERAbstractString.superclass.constructor.call(this);var l=null,a=null;this.getString=function(){return this.s},this.setString=function(h){this.hTLV=null,this.isModified=!0,this.s=h,this.hV=xu(this.s).toLowerCase()},this.setStringHex=function(h){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=h},this.getFreshValueHex=function(){return this.hV},typeof e<"u"&&(typeof e=="string"?this.setString(e):typeof e.str<"u"?this.setString(e.str):typeof e.hex<"u"&&this.setStringHex(e.hex))},Oe(E.asn1.DERAbstractString,E.asn1.ASN1Object),E.asn1.DERAbstractTime=function(e){E.asn1.DERAbstractTime.superclass.constructor.call(this);var l=null,a=null;this.localDateToUTC=function(h){var b=h.getTime()+h.getTimezoneOffset()*6e4,C=new Date(b);return C},this.formatDate=function(h,b,C){var x=this.zeroPadding,_=this.localDateToUTC(h),L=String(_.getFullYear());b=="utc"&&(L=L.substr(2,2));var V=x(String(_.getMonth()+1),2),ht=x(String(_.getDate()),2),gt=x(String(_.getHours()),2),P=x(String(_.getMinutes()),2),I=x(String(_.getSeconds()),2),ut=L+V+ht+gt+P+I;if(C===!0){var T=_.getMilliseconds();if(T!=0){var at=x(String(T),3);at=at.replace(/[0]+$/,""),ut=ut+"."+at}}return ut+"Z"},this.zeroPadding=function(h,b){return h.length>=b?h:new Array(b-h.length+1).join("0")+h},this.setByParam=function(h){this.hV=null,this.hTLV=null,this.params=h},this.getString=function(){},this.setString=function(h){this.hTLV=null,this.isModified=!0,this.params==null&&(this.params={}),this.params.str=h},this.setByDate=function(h){this.hTLV=null,this.isModified=!0,this.params==null&&(this.params={}),this.params.date=h},this.setByDateValue=function(h,b,C,x,_,L){var V=new Date(Date.UTC(h,b-1,C,x,_,L,0));this.setByDate(V)},this.getFreshValueHex=function(){return this.hV}},Oe(E.asn1.DERAbstractTime,E.asn1.ASN1Object),E.asn1.DERAbstractStructured=function(e){E.asn1.DERAbstractString.superclass.constructor.call(this);var l=null;this.setByASN1ObjectArray=function(a){this.hTLV=null,this.isModified=!0,this.asn1Array=a},this.appendASN1Object=function(a){this.hTLV=null,this.isModified=!0,this.asn1Array.push(a)},this.asn1Array=new Array,typeof e<"u"&&typeof e.array<"u"&&(this.asn1Array=e.array)},Oe(E.asn1.DERAbstractStructured,E.asn1.ASN1Object),E.asn1.DERBoolean=function(e){E.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",e==!1?this.hTLV="010100":this.hTLV="0101ff"},Oe(E.asn1.DERBoolean,E.asn1.ASN1Object),E.asn1.DERInteger=function(e){E.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.params=null;var l=Ie;this.setByBigInteger=function(a){this.isModified=!0,this.params={bigint:a}},this.setByInteger=function(a){this.isModified=!0,this.params=a},this.setValueHex=function(a){this.isModified=!0,this.params={hex:a}},this.getFreshValueHex=function(){var a=this.params,h=null;if(a==null)throw new Error("value not set");if(typeof a=="object"&&a.hex!=null)return this.hV=a.hex,this.hV;if(typeof a=="number")h=new w(String(a),10);else if(a.int!=null)h=new w(String(a.int),10);else if(a.bigint!=null)h=a.bigint;else throw new Error("wrong parameter");return this.hV=l(h),this.hV},e!=null&&(this.params=e)},Oe(E.asn1.DERInteger,E.asn1.ASN1Object),E.asn1.DERBitString=function(e){if(e!==void 0&&typeof e.obj<"u"){var l=E.asn1.ASN1Util.newObject(e.obj);e.hex="00"+l.tohex()}E.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(a){this.hTLV=null,this.isModified=!0,this.hV=a},this.setUnusedBitsAndHexValue=function(a,h){if(a<0||7<a)throw"unused bits shall be from 0 to 7: u = "+a;var b="0"+a;this.hTLV=null,this.isModified=!0,this.hV=b+h},this.setByBinaryString=function(a){a=a.replace(/0+$/,"");var h=8-a.length%8;h==8&&(h=0),a+="0000000".substr(0,h);for(var b="",C=0;C<a.length-1;C+=8){var x=a.substr(C,8),_=parseInt(x,2).toString(16);_.length==1&&(_="0"+_),b+=_}this.hTLV=null,this.isModified=!0,this.hV="0"+h+b},this.setByBooleanArray=function(a){for(var h="",b=0;b<a.length;b++)a[b]==!0?h+="1":h+="0";this.setByBinaryString(h)},this.newFalseArray=function(a){for(var h=new Array(a),b=0;b<a;b++)h[b]=!1;return h},this.getFreshValueHex=function(){return this.hV},typeof e<"u"&&(typeof e=="string"&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):typeof e.hex<"u"?this.setHexValueIncludingUnusedBits(e.hex):typeof e.bin<"u"?this.setByBinaryString(e.bin):typeof e.array<"u"&&this.setByBooleanArray(e.array))},Oe(E.asn1.DERBitString,E.asn1.ASN1Object),E.asn1.DEROctetString=function(e){if(e!==void 0&&typeof e.obj<"u"){var l=E.asn1.ASN1Util.newObject(e.obj);e.hex=l.tohex()}E.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"},Oe(E.asn1.DEROctetString,E.asn1.DERAbstractString),E.asn1.DERNull=function(){E.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},Oe(E.asn1.DERNull,E.asn1.ASN1Object),E.asn1.DERObjectIdentifier=function(e){E.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(l){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=l},this.setValueOidString=function(l){var a=zs(l);if(a==null)throw new Error("malformed oid string: "+l);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=a},this.setValueName=function(l){var a=E.asn1.x509.OID.name2oid(l);if(a!=="")this.setValueOidString(a);else throw new Error("DERObjectIdentifier oidName undefined: "+l)},this.setValueNameOrOid=function(l){l.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(l):this.setValueName(l)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(l){typeof l=="string"?this.setValueNameOrOid(l):l.oid!==void 0?this.setValueNameOrOid(l.oid):l.name!==void 0?this.setValueNameOrOid(l.name):l.hex!==void 0&&this.setValueHex(l.hex)},e!==void 0&&this.setByParam(e)},Oe(E.asn1.DERObjectIdentifier,E.asn1.ASN1Object),E.asn1.DEREnumerated=function(e){E.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(l){this.hTLV=null,this.isModified=!0,this.hV=Ie(l)},this.setByInteger=function(l){var a=new w(String(l),10);this.setByBigInteger(a)},this.setValueHex=function(l){this.hV=l},this.getFreshValueHex=function(){return this.hV},typeof e<"u"&&(typeof e.int<"u"?this.setByInteger(e.int):typeof e=="number"?this.setByInteger(e):typeof e.hex<"u"&&this.setValueHex(e.hex))},Oe(E.asn1.DEREnumerated,E.asn1.ASN1Object),E.asn1.DERUTF8String=function(e){E.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"},Oe(E.asn1.DERUTF8String,E.asn1.DERAbstractString),E.asn1.DERNumericString=function(e){E.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"},Oe(E.asn1.DERNumericString,E.asn1.DERAbstractString),E.asn1.DERPrintableString=function(e){E.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"},Oe(E.asn1.DERPrintableString,E.asn1.DERAbstractString),E.asn1.DERTeletexString=function(e){E.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"},Oe(E.asn1.DERTeletexString,E.asn1.DERAbstractString),E.asn1.DERIA5String=function(e){E.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"},Oe(E.asn1.DERIA5String,E.asn1.DERAbstractString),E.asn1.DERVisibleString=function(e){E.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="1a"},Oe(E.asn1.DERVisibleString,E.asn1.DERAbstractString),E.asn1.DERBMPString=function(e){E.asn1.DERBMPString.superclass.constructor.call(this,e),this.hT="1e"},Oe(E.asn1.DERBMPString,E.asn1.DERAbstractString),E.asn1.DERUTCTime=function(e){E.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.params=void 0,this.getFreshValueHex=function(){var l=this.params;if(this.params==null&&(l={date:new Date}),typeof l=="string")if(l.match(/^[0-9]{12}Z$/)||l.match(/^[0-9]{12}\.[0-9]+Z$/))this.hV=cs(l);else throw new Error("malformed string for UTCTime: "+l);else if(l.str!=null)this.hV=cs(l.str);else if(l.date==null&&l.millis==!0){var a=new Date;this.hV=cs(this.formatDate(a,"utc",!0))}else if(l.date!=null&&l.date instanceof Date){var h=l.millis===!0;this.hV=cs(this.formatDate(l.date,"utc",h))}else l instanceof Date&&(this.hV=cs(this.formatDate(l,"utc")));if(this.hV==null)throw new Error("parameter not specified properly for UTCTime");return this.hV},e!=null&&this.setByParam(e)},Oe(E.asn1.DERUTCTime,E.asn1.DERAbstractTime),E.asn1.DERGeneralizedTime=function(e){E.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.params=e,this.getFreshValueHex=function(){var l=this.params;if(this.params==null&&(l={date:new Date}),typeof l=="string")if(l.match(/^[0-9]{14}Z$/)||l.match(/^[0-9]{14}\.[0-9]+Z$/))this.hV=cs(l);else throw new Error("malformed string for GeneralizedTime: "+l);else if(l.str!=null)this.hV=cs(l.str);else if(l.date==null&&l.millis==!0){var a=new Date;this.hV=cs(this.formatDate(a,"gen",!0))}else if(l.date!=null&&l.date instanceof Date){var h=l.millis===!0;this.hV=cs(this.formatDate(l.date,"gen",h))}else l instanceof Date&&(this.hV=cs(this.formatDate(l,"gen")));if(this.hV==null)throw new Error("parameter not specified properly for GeneralizedTime");return this.hV},e!=null&&this.setByParam(e)},Oe(E.asn1.DERGeneralizedTime,E.asn1.DERAbstractTime),E.asn1.DERSequence=function(e){E.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var l="",a=0;a<this.asn1Array.length;a++){var h=this.asn1Array[a];l+=h.tohex()}return this.hV=l,this.hV}},Oe(E.asn1.DERSequence,E.asn1.DERAbstractStructured),E.asn1.DERSet=function(e){E.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var l=new Array,a=0;a<this.asn1Array.length;a++){var h=this.asn1Array[a];l.push(h.tohex())}return this.sortFlag==!0&&l.sort(),this.hV=l.join(""),this.hV},typeof e<"u"&&typeof e.sortflag<"u"&&e.sortflag==!1&&(this.sortFlag=!1)},Oe(E.asn1.DERSet,E.asn1.DERAbstractStructured),E.asn1.DERTaggedObject=function(e){E.asn1.DERTaggedObject.superclass.constructor.call(this);var l=E.asn1,a=Ge,h=a.getV,b=a.isASN1HEX,C=l.ASN1Util.newObject;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.params={tag:"a0",explicit:!0},this.setASN1Object=function(x,_,L){this.params={tag:_,explicit:x,obj:L}},this.getFreshValueHex=function(){var x=this.params;if(x.explicit==null&&(x.explicit=!0),x.tage!=null&&(x.tag=x.tage,x.explicit=!0),x.tagi!=null&&(x.tag=x.tagi,x.explicit=!1),x.str!=null)this.hV=xu(x.str);else if(x.hex!=null)this.hV=x.hex;else if(x.obj!=null){var _;x.obj instanceof l.ASN1Object?_=x.obj.tohex():typeof x.obj=="object"&&(_=C(x.obj).tohex()),x.explicit?this.hV=_:this.hV=h(_,0)}else throw new Error("str, hex nor obj not specified");return x.tag==null&&(x.tag="a0"),this.hT=x.tag,this.hTLV=null,this.isModified=!0,this.hV},this.setByParam=function(x){this.params=x},e!==void 0&&this.setByParam(e)},Oe(E.asn1.DERTaggedObject,E.asn1.ASN1Object);var Ge=new function(){};Ge.getLblen=function(e,l){if(e.substr(l+2,1)!="8")return 1;var a=parseInt(e.substr(l+3,1));return a==0?-1:0<a&&a<10?a+1:-2},Ge.getL=function(e,l){var a=Ge.getLblen(e,l);return a<1?"":e.substr(l+2,a*2)},Ge.getVblen=function(e,l){var a,h;return a=Ge.getL(e,l),a==""?-1:(a.substr(0,1)==="8"?h=new w(a.substr(2),16):h=new w(a,16),h.intValue())},Ge.getVidx=function(e,l){var a=Ge.getLblen(e,l);return a<0?a:l+(a+1)*2},Ge.getV=function(e,l){var a=Ge.getVidx(e,l),h=Ge.getVblen(e,l);return e.substr(a,h*2)},Ge.getTLV=function(e,l){return e.substr(l,2)+Ge.getL(e,l)+Ge.getV(e,l)},Ge.getTLVblen=function(e,l){return 2+Ge.getLblen(e,l)*2+Ge.getVblen(e,l)*2},Ge.getNextSiblingIdx=function(e,l){var a=Ge.getVidx(e,l),h=Ge.getVblen(e,l);return a+h*2},Ge.getChildIdx=function(e,l){var a=Ge,h=[],b,C,x;b=a.getVidx(e,l),C=a.getVblen(e,l)*2,e.substr(l,2)=="03"&&(b+=2,C-=2),x=0;for(var _=b;x<=C;){var L=a.getTLVblen(e,_);if(x+=L,x<=C&&h.push(_),_+=L,x>=C)break}return h},Ge.getNthChildIdx=function(e,l,a){var h=Ge.getChildIdx(e,l);return h[a]},Ge.getIdxbyList=function(e,l,a,h){var b=Ge,C,x;return a.length==0?h!==void 0&&e.substr(l,2)!==h?-1:l:(C=a.shift(),x=b.getChildIdx(e,l),C>=x.length?-1:b.getIdxbyList(e,x[C],a,h))},Ge.getIdxbyListEx=function(e,l,a,h){var b=Ge,C,x;if(a.length==0)return h!==void 0&&e.substr(l,2)!==h?-1:l;C=a.shift(),x=b.getChildIdx(e,l);for(var _=0,L=0;L<x.length;L++){var V=e.substr(x[L],2);if(typeof C=="number"&&!b.isContextTag(V)&&_==C||typeof C=="string"&&b.isContextTag(V,C))return b.getIdxbyListEx(e,x[L],a,h);b.isContextTag(V)||_++}return-1},Ge.getTLVbyList=function(e,l,a,h){var b=Ge,C=b.getIdxbyList(e,l,a,h);return C==-1||C>=e.length?null:b.getTLV(e,C)},Ge.getTLVbyListEx=function(e,l,a,h){var b=Ge,C=b.getIdxbyListEx(e,l,a,h);return C==-1?null:b.getTLV(e,C)},Ge.getVbyList=function(e,l,a,h,b){var C=Ge,x,_;return x=C.getIdxbyList(e,l,a,h),x==-1||x>=e.length?null:(_=C.getV(e,x),b===!0&&(_=_.substr(2)),_)},Ge.getVbyListEx=function(e,l,a,h,b){var C=Ge,x,_,L;return x=C.getIdxbyListEx(e,l,a,h),x==-1?null:(L=C.getV(e,x),e.substr(x,2)=="03"&&b!==!1&&(L=L.substr(2)),L)},Ge.getInt=function(e,l,a){a==null&&(a=-1);try{var h=e.substr(l,2);if(h!="02"&&h!="03")return a;var b=Ge.getV(e,l);return h=="02"?parseInt(b,16):Or(b)}catch{return a}},Ge.getOID=function(e,l,a){a==null&&(a=null);try{if(e.substr(l,2)!="06")return a;var h=Ge.getV(e,l);return me(h)}catch{return a}},Ge.getOIDName=function(e,l,a){a==null&&(a=null);try{var h=Ge.getOID(e,l,a);if(h==a)return a;var b=E.asn1.x509.OID.oid2name(h);return b==""?h:b}catch{return a}},Ge.getString=function(e,l,a){a==null&&(a=null);try{var h=Ge.getV(e,l);return gr(h)}catch{return a}},Ge.hextooidstr=function(e){var l=function(gt,P){return gt.length>=P?gt:new Array(P-gt.length+1).join("0")+gt},a=[],h=e.substr(0,2),b=parseInt(h,16);a[0]=new String(Math.floor(b/40)),a[1]=new String(b%40);for(var C=e.substr(2),x=[],_=0;_<C.length/2;_++)x.push(parseInt(C.substr(_*2,2),16));for(var L=[],V="",_=0;_<x.length;_++)x[_]&128?V=V+l((x[_]&127).toString(2),7):(V=V+l((x[_]&127).toString(2),7),L.push(new String(parseInt(V,2))),V="");var ht=a.join(".");return L.length>0&&(ht=ht+"."+L.join(".")),ht},Ge.dump=function(e,l,a,h){var b=Ge,C=b.getV,x=b.dump,_=b.getChildIdx,L=e;e instanceof E.asn1.ASN1Object&&(L=e.tohex());var V=function(be,d){if(be.length<=d*2)return be;var S=be.substr(0,d)+"..(total "+be.length/2+"bytes).."+be.substr(be.length-d,d);return S};l===void 0&&(l={ommit_long_octet:32}),a===void 0&&(a=0),h===void 0&&(h="");var ht=l.ommit_long_octet,Gt=L.substr(a,2);if(Gt=="01"){var gt=C(L,a);return gt=="00"?h+`BOOLEAN FALSE
`:h+`BOOLEAN TRUE
`}if(Gt=="02"){var gt=C(L,a);return h+"INTEGER "+V(gt,ht)+`
`}if(Gt=="03"){var gt=C(L,a);if(b.isASN1HEX(gt.substr(2))){var P=h+`BITSTRING, encapsulates
`;return P=P+x(gt.substr(2),l,0,h+"  "),P}else return h+"BITSTRING "+V(gt,ht)+`
`}if(Gt=="04"){var gt=C(L,a);if(b.isASN1HEX(gt)){var P=h+`OCTETSTRING, encapsulates
`;return P=P+x(gt,l,0,h+"  "),P}else return h+"OCTETSTRING "+V(gt,ht)+`
`}if(Gt=="05")return h+`NULL
`;if(Gt=="06"){var I=C(L,a),ut=E.asn1.ASN1Util.oidHexToInt(I),T=E.asn1.x509.OID.oid2name(ut),at=ut.replace(/\./g," ");return T!=""?h+"ObjectIdentifier "+T+" ("+at+`)
`:h+"ObjectIdentifier ("+at+`)
`}if(Gt=="0a")return h+"ENUMERATED "+parseInt(C(L,a))+`
`;if(Gt=="0c")return h+"UTF8String '"+_r(C(L,a))+`'
`;if(Gt=="13")return h+"PrintableString '"+_r(C(L,a))+`'
`;if(Gt=="14")return h+"TeletexString '"+_r(C(L,a))+`'
`;if(Gt=="16")return h+"IA5String '"+_r(C(L,a))+`'
`;if(Gt=="17")return h+"UTCTime "+_r(C(L,a))+`
`;if(Gt=="18")return h+"GeneralizedTime "+_r(C(L,a))+`
`;if(Gt=="1a")return h+"VisualString '"+_r(C(L,a))+`'
`;if(Gt=="1e")return h+"BMPString '"+Pu(C(L,a))+`'
`;if(Gt=="30"){if(L.substr(a,4)=="3000")return h+`SEQUENCE {}
`;var P=h+`SEQUENCE
`,Y=_(L,a),wt=l;if((Y.length==2||Y.length==3)&&L.substr(Y[0],2)=="06"&&L.substr(Y[Y.length-1],2)=="04"){var T=b.oidname(C(L,Y[0])),Tt=JSON.parse(JSON.stringify(l));Tt.x509ExtName=T,wt=Tt}for(var Wt=0;Wt<Y.length;Wt++)P=P+x(L,wt,Y[Wt],h+"  ");return P}if(Gt=="31"){for(var P=h+`SET
`,Y=_(L,a),Wt=0;Wt<Y.length;Wt++)P=P+x(L,l,Y[Wt],h+"  ");return P}var Gt=parseInt(Gt,16);if(Gt&128){var ve=Gt&31;if(Gt&32){for(var P=h+"["+ve+`]
`,Y=_(L,a),Wt=0;Wt<Y.length;Wt++)P=P+x(L,l,Y[Wt],h+"  ");return P}else{var gt=C(L,a);if(Ge.isASN1HEX(gt)){var P=h+"["+ve+`]
`;return P=P+x(gt,l,0,h+"  "),P}else(gt.substr(0,8)=="68747470"||l.x509ExtName==="subjectAltName"&&ve==2)&&(gt=_r(gt));var P=h+"["+ve+"] "+gt+`
`;return P}}return h+"UNKNOWN("+Gt+") "+C(L,a)+`
`},Ge.parse=function(e){var l=Ge,a=l.parse,h=l.isASN1HEX,b=l.getV,C=l.getTLV,x=l.getChildIdx,_=E.asn1,L=_.ASN1Util.oidHexToInt,V=_.x509.OID.oid2name,ht=_r,gt=Pu,P=xo,I={"0c":"utf8str",12:"numstr",13:"prnstr",14:"telstr",16:"ia5str",17:"utctime",18:"gentime","1a":"visstr","1e":"bmpstr",30:"seq",31:"set"},ut=function(S){for(var st=[],z=x(S,0),_t=0;_t<z.length;_t++){var Mt=z[_t],te=C(S,Mt),ie=a(te);st.push(ie)}return st},T=e.substr(0,2),at={},Y=b(e,0);if(T=="01")return e=="0101ff"?{bool:!0}:{bool:!1};if(T=="02")return{int:{hex:Y}};if(T=="03")try{if(Y.substr(0,2)!="00")throw"not encap";var wt=Y.substr(2);if(!h(wt))throw"not encap";return{bitstr:{obj:a(wt)}}}catch{var Tt=null;return Y.length<=10&&(Tt=Gn(Y)),Tt==null?{bitstr:{hex:Y}}:{bitstr:{bin:Tt}}}else if(T=="04")try{if(!h(Y))throw"not encap";return{octstr:{obj:a(Y)}}}catch{return{octstr:{hex:Y}}}else{if(T=="05")return{null:""};if(T=="06"){var Wt=L(Y),Gt=V(Wt);return Gt==""?{oid:Wt}:{oid:Gt}}else{if(T=="0a")return Y.length>4?{enum:{hex:Y}}:{enum:parseInt(Y,16)};if(T=="30"||T=="31")return at[I[T]]=ut(e),at;if(T=="14"){var ve=P(Y);return at[I[T]]={str:ve},at}else if(T=="1e"){var ve=gt(Y);return at[I[T]]={str:ve},at}else if(":0c:12:13:16:17:18:1a:".indexOf(T)!=-1){var ve=ht(Y);return at[I[T]]={str:ve},at}else if(T.match(/^8[0-9]$/)){var ve=ht(Y);return ve==null|ve==""?{tag:{tag:T,explicit:!1,hex:Y}}:ve.match(/[\x00-\x1F\x7F-\x9F]/)!=null||ve.match(/[\u0000-\u001F\u0080\u009F]/)!=null?{tag:{tag:T,explicit:!1,hex:Y}}:{tag:{tag:T,explicit:!1,str:ve}}}else if(T.match(/^a[0-9]$/))try{if(!h(Y))throw new Error("not encap");return{tag:{tag:T,explicit:!0,obj:a(Y)}}}catch{return{tag:{tag:T,explicit:!0,hex:Y}}}else{var be=new E.asn1.ASN1Object;be.hV=Y;var d=be.getLengthHexFromValue();return{asn1:{tlv:T+d+Y}}}}}},Ge.isContextTag=function(e,l){e=e.toLowerCase();var a,h;try{a=parseInt(e,16)}catch{return-1}if(l===void 0)return(a&192)==128;try{var b=l.match(/^\[[0-9]+\]$/);return b==null||(h=parseInt(l.substr(1,l.length-1),10),h>31)?!1:(a&192)==128&&(a&31)==h}catch{return!1}},Ge.isASN1HEX=function(e){var l=Ge;if(e.length%2==1)return!1;var a=l.getVblen(e,0),h=e.substr(0,2),b=l.getL(e,0),C=e.length-h.length-b.length;return C==a*2},Ge.checkStrictDER=function(e,l,a,h,b){var C=Ge;if(a===void 0){if(typeof e!="string")throw new Error("not hex string");if(e=e.toLowerCase(),!E.lang.String.isHex(e))throw new Error("not hex string");a=e.length,h=e.length/2,h<128?b=1:b=Math.ceil(h.toString(16))+1}var x=C.getL(e,l);if(x.length>b*2)throw new Error("L of TLV too long: idx="+l);var _=C.getVblen(e,l);if(_>h)throw new Error("value of L too long than hex: idx="+l);var L=C.getTLV(e,l),V=L.length-2-C.getL(e,l).length;if(V!==_*2)throw new Error("V string length and L's value not the same:"+V+"/"+_*2);if(l===0&&e.length!=L.length)throw new Error("total length and TLV length unmatch:"+e.length+"!="+L.length);var ht=e.substr(l,2);if(ht==="02"){var gt=C.getVidx(e,l);if(e.substr(gt,2)=="00"&&e.charCodeAt(gt+2)<56)throw new Error("not least zeros for DER INTEGER")}if(parseInt(ht,16)&32){for(var P=C.getVblen(e,l),I=0,ut=C.getChildIdx(e,l),T=0;T<ut.length;T++){var at=C.getTLV(e,ut[T]);I+=at.length,C.checkStrictDER(e,ut[T],a,h,b)}if(P*2!=I)throw new Error("sum of children's TLV length and L unmatch: "+P*2+"!="+I)}},Ge.oidname=function(e){var l=E.asn1;E.lang.String.isHex(e)&&(e=l.ASN1Util.oidHexToInt(e));var a=l.x509.OID.oid2name(e);return a===""&&(a=e),a},(typeof E>"u"||!E)&&(E={}),(typeof E.asn1>"u"||!E.asn1)&&(E.asn1={}),(typeof E.asn1.x509>"u"||!E.asn1.x509)&&(E.asn1.x509={}),E.asn1.x509.Certificate=function(e){E.asn1.x509.Certificate.superclass.constructor.call(this);var l=E,a=l.asn1,h=a.DERBitString,b=a.DERSequence,C=a.x509,x=C.TBSCertificate,_=C.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(L){this.params=L},this.sign=function(){var L=this.params,V=L.sigalg;L.sigalg.name!=null&&(V=L.sigalg.name);var ht=L.tbsobj.tohex(),gt=new E.crypto.Signature({alg:V});gt.init(L.cakey),gt.updateHex(ht),L.sighex=gt.sign()},this.getPEM=function(){return $e(this.tohex(),"CERTIFICATE")},this.tohex=function(){var L=this.params;if((L.tbsobj==null||L.tbsobj==null)&&(L.tbsobj=new x(L)),L.sighex==null&&L.cakey!=null&&this.sign(),L.sighex==null)throw new Error("sighex or cakey parameter not defined");var V=[];V.push(L.tbsobj),V.push(new _({name:L.sigalg})),V.push(new h({hex:"00"+L.sighex}));var ht=new b({array:V});return ht.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&(this.params=e)},Oe(E.asn1.x509.Certificate,E.asn1.ASN1Object),E.asn1.x509.TBSCertificate=function(e){E.asn1.x509.TBSCertificate.superclass.constructor.call(this);var l=E,a=l.asn1,h=a.x509,b=a.DERTaggedObject,C=a.DERInteger,x=a.DERSequence,_=h.AlgorithmIdentifier,L=h.Time,V=h.X500Name,ht=h.Extensions,gt=h.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(P){this.params=P},this.tohex=function(){var P=[],I=this.params;if(I.version!=null||I.version!=1){var ut=2;I.version!=null&&(ut=I.version-1);var T=new b({obj:new C({int:ut})});P.push(T)}P.push(new C(I.serial)),P.push(new _({name:I.sigalg})),P.push(new V(I.issuer)),P.push(new x({array:[new L(I.notbefore),new L(I.notafter)]})),P.push(new V(I.subject)),P.push(new gt(Nr.getKey(I.sbjpubkey))),I.ext!==void 0&&I.ext.length>0&&P.push(new b({tag:"a3",obj:new ht(I.ext)}));var at=new E.asn1.DERSequence({array:P});return at.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)},Oe(E.asn1.x509.TBSCertificate,E.asn1.ASN1Object),E.asn1.x509.Extensions=function(e){E.asn1.x509.Extensions.superclass.constructor.call(this);var l=E,a=l.asn1,h=a.DERSequence,b=a.x509;this.aParam=[],this.setByParam=function(C){this.aParam=C},this.tohex=function(){for(var C=[],x=0;x<this.aParam.length;x++){var _=this.aParam[x],L=_.extname,V=null;if(_.extn!=null)V=new b.PrivateExtension(_);else if(L=="subjectKeyIdentifier")V=new b.SubjectKeyIdentifier(_);else if(L=="keyUsage")V=new b.KeyUsage(_);else if(L=="subjectAltName")V=new b.SubjectAltName(_);else if(L=="issuerAltName")V=new b.IssuerAltName(_);else if(L=="basicConstraints")V=new b.BasicConstraints(_);else if(L=="nameConstraints")V=new b.NameConstraints(_);else if(L=="cRLDistributionPoints")V=new b.CRLDistributionPoints(_);else if(L=="certificatePolicies")V=new b.CertificatePolicies(_);else if(L=="policyMappings")V=new b.PolicyMappings(_);else if(L=="policyConstraints")V=new b.PolicyConstraints(_);else if(L=="inhibitAnyPolicy")V=new b.InhibitAnyPolicy(_);else if(L=="authorityKeyIdentifier")V=new b.AuthorityKeyIdentifier(_);else if(L=="extKeyUsage")V=new b.ExtKeyUsage(_);else if(L=="authorityInfoAccess")V=new b.AuthorityInfoAccess(_);else if(L=="cRLNumber")V=new b.CRLNumber(_);else if(L=="cRLReason")V=new b.CRLReason(_);else if(L=="ocspNonce")V=new b.OCSPNonce(_);else if(L=="ocspNoCheck")V=new b.OCSPNoCheck(_);else if(L=="adobeTimeStamp")V=new b.AdobeTimeStamp(_);else if(L=="subjectDirectoryAttributes")V=new b.SubjectDirectoryAttributes(_);else throw new Error("extension not supported:"+JSON.stringify(_));V!=null&&C.push(V)}var ht=new h({array:C});return ht.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)},Oe(E.asn1.x509.Extensions,E.asn1.ASN1Object),E.asn1.x509.Extension=function(e){E.asn1.x509.Extension.superclass.constructor.call(this);var l=null,a=E,h=a.asn1,b=h.DERObjectIdentifier,C=h.DEROctetString,x=h.DERBitString,_=h.DERBoolean,L=h.DERSequence;this.tohex=function(){var V=new b({oid:this.oid}),ht=new C({hex:this.getExtnValueHex()}),gt=new Array;gt.push(V),this.critical&&gt.push(new _),gt.push(ht);var P=new L({array:gt});return P.tohex()},this.getEncodedHex=function(){return this.tohex()},this.critical=!1,e!==void 0&&e.critical!==void 0&&(this.critical=e.critical)},Oe(E.asn1.x509.Extension,E.asn1.ASN1Object),E.asn1.x509.KeyUsage=function(e){E.asn1.x509.KeyUsage.superclass.constructor.call(this,e);var l=Error,a={digitalSignature:0,nonRepudiation:1,keyEncipherment:2,dataEncipherment:3,keyAgreement:4,keyCertSign:5,cRLSign:6,encipherOnly:7,decipherOnly:8};this.getExtnValueHex=function(){var h=this.getBinValue();return this.asn1ExtnValue=new E.asn1.DERBitString({bin:h}),this.asn1ExtnValue.tohex()},this.getBinValue=function(){var h=this.params;if(typeof h!="object"||typeof h.names!="object"&&typeof h.bin!="string")throw new l("parameter not yet set");if(h.names!=null)return Ai(h.names,a);if(h.bin!=null)return h.bin;throw new l("parameter not set properly")},this.oid="2.5.29.15",e!==void 0&&(this.params=e)},Oe(E.asn1.x509.KeyUsage,E.asn1.x509.Extension),E.asn1.x509.BasicConstraints=function(e){E.asn1.x509.BasicConstraints.superclass.constructor.call(this,e);var l=E.asn1,a=l.DERBoolean,h=l.DERInteger,b=l.DERSequence,C=!1,x=-1;this.getExtnValueHex=function(){var _=new Array;this.cA&&_.push(new a),this.pathLen>-1&&_.push(new h({int:this.pathLen}));var L=new b({array:_});return this.asn1ExtnValue=L,this.asn1ExtnValue.tohex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,e!==void 0&&(e.cA!==void 0&&(this.cA=e.cA),e.pathLen!==void 0&&(this.pathLen=e.pathLen))},Oe(E.asn1.x509.BasicConstraints,E.asn1.x509.Extension),E.asn1.x509.CRLDistributionPoints=function(e){E.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,e);var l=E,a=l.asn1,h=a.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.setByDPArray=function(b){for(var C=[],x=0;x<b.length;x++)if(b[x]instanceof E.asn1.ASN1Object)C.push(b[x]);else{var _=new h.DistributionPoint(b[x]);C.push(_)}this.asn1ExtnValue=new a.DERSequence({array:C})},this.setByOneURI=function(b){var C=new h.DistributionPoint({fulluri:b});this.setByDPArray([C])},this.oid="2.5.29.31",e!==void 0&&(e.array!==void 0?this.setByDPArray(e.array):e.uri!==void 0&&this.setByOneURI(e.uri))},Oe(E.asn1.x509.CRLDistributionPoints,E.asn1.x509.Extension),E.asn1.x509.DistributionPoint=function(e){E.asn1.x509.DistributionPoint.superclass.constructor.call(this);var l=null,a=E,h=a.asn1,b=h.x509.DistributionPointName;this.tohex=function(){var C=new h.DERSequence;if(this.asn1DP!=null){var x=new h.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});C.appendASN1Object(x)}return this.hTLV=C.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(e.dpobj!==void 0?this.asn1DP=e.dpobj:e.dpname!==void 0?this.asn1DP=new b(e.dpname):e.fulluri!==void 0&&(this.asn1DP=new b({full:[{uri:e.fulluri}]})))},Oe(E.asn1.x509.DistributionPoint,E.asn1.ASN1Object),E.asn1.x509.DistributionPointName=function(e){E.asn1.x509.DistributionPointName.superclass.constructor.call(this);var l=null,a=null,h=null,b=null,C=E,x=C.asn1,_=x.DERTaggedObject;if(this.tohex=function(){if(this.type!="full")throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new _({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0)if(x.x509.GeneralNames.prototype.isPrototypeOf(e))this.type="full",this.tag="a0",this.asn1V=e;else if(e.full!==void 0)this.type="full",this.tag="a0",this.asn1V=new x.x509.GeneralNames(e.full);else throw new Error("This class supports GeneralNames only as argument")},Oe(E.asn1.x509.DistributionPointName,E.asn1.ASN1Object),E.asn1.x509.CertificatePolicies=function(e){E.asn1.x509.CertificatePolicies.superclass.constructor.call(this,e);var l=E,a=l.asn1,h=a.x509,b=a.DERSequence,C=h.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var x=[],_=0;_<this.params.array.length;_++)x.push(new C(this.params.array[_]));var L=new b({array:x});return this.asn1ExtnValue=L,this.asn1ExtnValue.tohex()},this.oid="2.5.29.32",e!==void 0&&(this.params=e)},Oe(E.asn1.x509.CertificatePolicies,E.asn1.x509.Extension),E.asn1.x509.PolicyInformation=function(e){E.asn1.x509.PolicyInformation.superclass.constructor.call(this,e);var l=E.asn1,a=l.DERSequence,h=l.DERObjectIdentifier,b=l.x509.PolicyQualifierInfo;this.params=null,this.tohex=function(){if(this.params.policyoid===void 0&&this.params.array===void 0)throw new Error("parameter oid and array missing");var C=[new h(this.params.policyoid)];if(this.params.array!==void 0){for(var x=[],_=0;_<this.params.array.length;_++)x.push(new b(this.params.array[_]));x.length>0&&C.push(new a({array:x}))}var L=new a({array:C});return L.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(this.params=e)},Oe(E.asn1.x509.PolicyInformation,E.asn1.ASN1Object),E.asn1.x509.PolicyQualifierInfo=function(e){E.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,e);var l=E.asn1,a=l.DERSequence,h=l.DERIA5String,b=l.DERObjectIdentifier,C=l.x509.UserNotice;this.params=null,this.tohex=function(){if(this.params.cps!==void 0){var x=new a({array:[new b({oid:"1.3.6.1.5.5.7.2.1"}),new h({str:this.params.cps})]});return x.tohex()}if(this.params.unotice!=null){var x=new a({array:[new b({oid:"1.3.6.1.5.5.7.2.2"}),new C(this.params.unotice)]});return x.tohex()}},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(this.params=e)},Oe(E.asn1.x509.PolicyQualifierInfo,E.asn1.ASN1Object),E.asn1.x509.UserNotice=function(e){E.asn1.x509.UserNotice.superclass.constructor.call(this,e);var l=E.asn1.DERSequence,a=E.asn1.DERInteger,h=E.asn1.x509.DisplayText,b=E.asn1.x509.NoticeReference;this.params=null,this.tohex=function(){var C=[];this.params.noticeref!==void 0&&C.push(new b(this.params.noticeref)),this.params.exptext!==void 0&&C.push(new h(this.params.exptext));var x=new l({array:C});return x.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(this.params=e)},Oe(E.asn1.x509.UserNotice,E.asn1.ASN1Object),E.asn1.x509.NoticeReference=function(e){E.asn1.x509.NoticeReference.superclass.constructor.call(this,e);var l=E.asn1.DERSequence,a=E.asn1.DERInteger,h=E.asn1.x509.DisplayText;this.params=null,this.tohex=function(){var b=[];if(this.params.org!==void 0&&b.push(new h(this.params.org)),this.params.noticenum!==void 0){for(var C=[],x=this.params.noticenum,_=0;_<x.length;_++)C.push(new a(x[_]));b.push(new l({array:C}))}if(b.length==0)throw new Error("parameter is empty");var L=new l({array:b});return L.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(this.params=e)},Oe(E.asn1.x509.NoticeReference,E.asn1.ASN1Object),E.asn1.x509.DisplayText=function(e){E.asn1.x509.DisplayText.superclass.constructor.call(this,e),this.hT="0c",e!==void 0&&(e.type==="ia5"?this.hT="16":e.type==="vis"?this.hT="1a":e.type==="bmp"&&(this.hT="1e"))},Oe(E.asn1.x509.DisplayText,E.asn1.DERAbstractString),E.asn1.x509.PolicyMappings=function(e){E.asn1.x509.PolicyMappings.superclass.constructor.call(this,e);var l=E,a=l.asn1,h=a.x509,b=a.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){for(var C=this.params,x=[],_=0;_<C.array.length;_++){var L=C.array[_];x.push({seq:[{oid:L[0]},{oid:L[1]}]})}return this.asn1ExtnValue=b({seq:x}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.33",e!==void 0&&(this.params=e)},Oe(E.asn1.x509.PolicyMappings,E.asn1.x509.Extension),E.asn1.x509.PolicyConstraints=function(e){E.asn1.x509.PolicyConstraints.superclass.constructor.call(this,e);var l=E,a=l.asn1,h=a.x509,b=a.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){var C=this.params,x=[];return C.reqexp!=null&&x.push({tag:{tagi:"80",obj:{int:C.reqexp}}}),C.inhibit!=null&&x.push({tag:{tagi:"81",obj:{int:C.inhibit}}}),this.asn1ExtnValue=b({seq:x}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.36",e!==void 0&&(this.params=e)},Oe(E.asn1.x509.PolicyConstraints,E.asn1.x509.Extension),E.asn1.x509.InhibitAnyPolicy=function(e){E.asn1.x509.InhibitAnyPolicy.superclass.constructor.call(this,e);var l=E,a=l.asn1,h=a.x509,b=a.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=b({int:this.params.skip}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.54",e!==void 0&&(this.params=e)},Oe(E.asn1.x509.InhibitAnyPolicy,E.asn1.x509.Extension),E.asn1.x509.NameConstraints=function(e){E.asn1.x509.NameConstraints.superclass.constructor.call(this,e);var l=E,a=l.asn1,h=a.x509,b=a.ASN1Util.newObject,C=h.GeneralSubtree;this.params=null,this.getExtnValueHex=function(){var x=this.params,_=[];if(x.permit!=null&&x.permit.length!=null){for(var L=[],V=0;V<x.permit.length;V++)L.push(new C(x.permit[V]));_.push({tag:{tagi:"a0",obj:{seq:L}}})}if(x.exclude!=null&&x.exclude.length!=null){for(var ht=[],V=0;V<x.exclude.length;V++)ht.push(new C(x.exclude[V]));_.push({tag:{tagi:"a1",obj:{seq:ht}}})}return this.asn1ExtnValue=b({seq:_}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.30",e!==void 0&&(this.params=e)},Oe(E.asn1.x509.NameConstraints,E.asn1.x509.Extension),E.asn1.x509.GeneralSubtree=function(e){E.asn1.x509.GeneralSubtree.superclass.constructor.call(this);var l=E.asn1,a=l.x509,h=a.GeneralName,b=l.ASN1Util.newObject;this.params=null,this.setByParam=function(C){this.params=C},this.tohex=function(){var C=this.params,x=[new h(C)];C.min!=null&&x.push({tag:{tagi:"80",obj:{int:C.min}}}),C.max!=null&&x.push({tag:{tagi:"81",obj:{int:C.max}}});var _=b({seq:x});return _.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)},Oe(E.asn1.x509.GeneralSubtree,E.asn1.ASN1Object),E.asn1.x509.ExtKeyUsage=function(e){E.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,e);var l=E,a=l.asn1;this.setPurposeArray=function(h){this.asn1ExtnValue=new a.DERSequence;for(var b=0;b<h.length;b++){var C=new a.DERObjectIdentifier(h[b]);this.asn1ExtnValue.appendASN1Object(C)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.37",e!==void 0&&e.array!==void 0&&this.setPurposeArray(e.array)},Oe(E.asn1.x509.ExtKeyUsage,E.asn1.x509.Extension),E.asn1.x509.AuthorityKeyIdentifier=function(e){E.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,e);var l=E,a=l.asn1,h=a.DERTaggedObject,b=a.x509.GeneralNames,C=l.crypto.Util.isKey;this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var x=new Array;this.asn1KID&&x.push(new h({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&x.push(new h({explicit:!1,tag:"a1",obj:new b([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&x.push(new h({explicit:!1,tag:"82",obj:this.asn1CertSN}));var _=new a.DERSequence({array:x});return this.asn1ExtnValue=_,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(x){if(x.str!==void 0||x.hex!==void 0)this.asn1KID=new E.asn1.DEROctetString(x);else if(typeof x=="object"&&E.crypto.Util.isKey(x)||typeof x=="string"&&x.indexOf("BEGIN ")!=-1){var _=x;typeof x=="string"&&(_=Nr.getKey(x));var L=Nr.getKeyID(_);this.asn1KID=new E.asn1.DEROctetString({hex:L})}},this.setCertIssuerByParam=function(x){x.str!==void 0||x.ldapstr!==void 0||x.hex!==void 0||x.certsubject!==void 0||x.certissuer!==void 0?this.asn1CertIssuer=new E.asn1.x509.X500Name(x):typeof x=="string"&&x.indexOf("BEGIN ")!=-1&&x.indexOf("CERTIFICATE")!=-1&&(this.asn1CertIssuer=new E.asn1.x509.X500Name({certissuer:x}))},this.setCertSNByParam=function(x){if(x.str!==void 0||x.bigint!==void 0||x.hex!==void 0)this.asn1CertSN=new E.asn1.DERInteger(x);else if(typeof x=="string"&&x.indexOf("BEGIN ")!=-1&&x.indexOf("CERTIFICATE")){var _=new nr;_.readCertPEM(x);var L=_.getSerialNumberHex();this.asn1CertSN=new E.asn1.DERInteger({hex:L})}},this.oid="2.5.29.35",e!==void 0&&(e.kid!==void 0&&this.setKIDByParam(e.kid),e.issuer!==void 0&&this.setCertIssuerByParam(e.issuer),e.sn!==void 0&&this.setCertSNByParam(e.sn),e.issuersn!==void 0&&typeof e.issuersn=="string"&&e.issuersn.indexOf("BEGIN ")!=-1&&e.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(e.issuersn),this.setCertIssuerByParam(e.issuersn)))},Oe(E.asn1.x509.AuthorityKeyIdentifier,E.asn1.x509.Extension),E.asn1.x509.SubjectKeyIdentifier=function(e){E.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,e);var l=E,a=l.asn1,h=a.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(b){if(b.str!==void 0||b.hex!==void 0)this.asn1KID=new h(b);else if(typeof b=="object"&&E.crypto.Util.isKey(b)||typeof b=="string"&&b.indexOf("BEGIN")!=-1){var C=b;typeof b=="string"&&(C=Nr.getKey(b));var x=Nr.getKeyID(C);this.asn1KID=new E.asn1.DEROctetString({hex:x})}},this.oid="2.5.29.14",e!==void 0&&e.kid!==void 0&&this.setKIDByParam(e.kid)},Oe(E.asn1.x509.SubjectKeyIdentifier,E.asn1.x509.Extension),E.asn1.x509.AuthorityInfoAccess=function(e){E.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,e),this.setAccessDescriptionArray=function(l){for(var a=new Array,h=E,b=h.asn1,C=b.DERSequence,x=b.DERObjectIdentifier,_=b.x509.GeneralName,L=0;L<l.length;L++){var V,ht=l[L];if(ht.ocsp!==void 0)V=new C({array:[new x({oid:"1.3.6.1.5.5.7.48.1"}),new _({uri:ht.ocsp})]});else if(ht.caissuer!==void 0)V=new C({array:[new x({oid:"1.3.6.1.5.5.7.48.2"}),new _({uri:ht.caissuer})]});else throw new Error("unknown AccessMethod parameter: "+JSON.stringify(ht));a.push(V)}this.asn1ExtnValue=new C({array:a})},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.1.1",e!==void 0&&e.array!==void 0&&this.setAccessDescriptionArray(e.array)},Oe(E.asn1.x509.AuthorityInfoAccess,E.asn1.x509.Extension),E.asn1.x509.SubjectAltName=function(e){E.asn1.x509.SubjectAltName.superclass.constructor.call(this,e),this.setNameArray=function(l){this.asn1ExtnValue=new E.asn1.x509.GeneralNames(l)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.17",e!==void 0&&e.array!==void 0&&this.setNameArray(e.array)},Oe(E.asn1.x509.SubjectAltName,E.asn1.x509.Extension),E.asn1.x509.IssuerAltName=function(e){E.asn1.x509.IssuerAltName.superclass.constructor.call(this,e),this.setNameArray=function(l){this.asn1ExtnValue=new E.asn1.x509.GeneralNames(l)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.18",e!==void 0&&e.array!==void 0&&this.setNameArray(e.array)},Oe(E.asn1.x509.IssuerAltName,E.asn1.x509.Extension),E.asn1.x509.SubjectDirectoryAttributes=function(e){E.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,e);var l=E.asn1,a=l.DERSequence,h=l.ASN1Util.newObject,b=l.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var C=[],x=0;x<this.params.array.length;x++){var _=this.params.array[x];if(_.attr!=null&&_.array!=null){var L={seq:[{oid:_.attr},{set:_.array}]};C.push(h(L));continue}var V={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if(_.attr=="dateOfBirth")V.seq[0].oid=b(_.attr),V.seq[1].set[0]={gentime:_.str};else if(_.attr=="placeOfBirth")V.seq[0].oid=b(_.attr),V.seq[1].set[0]={utf8str:_.str};else if(_.attr=="gender")V.seq[0].oid=b(_.attr),V.seq[1].set[0]={prnstr:_.str};else if(_.attr=="countryOfCitizenship")V.seq[0].oid=b(_.attr),V.seq[1].set[0]={prnstr:_.str};else if(_.attr=="countryOfResidence")V.seq[0].oid=b(_.attr),V.seq[1].set[0]={prnstr:_.str};else throw new Error("unsupported attribute: "+_.attr);C.push(new h(V))}var ht=new a({array:C});return this.asn1ExtnValue=ht,this.asn1ExtnValue.tohex()},this.oid="2.5.29.9",e!==void 0&&(this.params=e)},Oe(E.asn1.x509.SubjectDirectoryAttributes,E.asn1.x509.Extension),E.asn1.x509.PrivateExtension=function(e){E.asn1.x509.PrivateExtension.superclass.constructor.call(this,e);var l=E,a=l.lang.String.isHex,h=l.asn1,b=h.x509.OID.name2oid,C=h.ASN1Util.newObject;this.params=null,this.setByParam=function(x){this.oid=b(x.extname),this.params=x},this.getExtnValueHex=function(){if(this.params.extname==null||this.params.extn==null)throw new Error("extname or extnhex not specified");var x=this.params.extn;if(typeof x=="string"&&a(x))return x;if(typeof x=="object")try{return C(x).tohex()}catch{}throw new Error("unsupported extn value")},e!=null&&this.setByParam(e)},Oe(E.asn1.x509.PrivateExtension,E.asn1.x509.Extension),E.asn1.x509.CRL=function(e){E.asn1.x509.CRL.superclass.constructor.call(this);var l=E,a=l.asn1,h=a.DERSequence,b=a.DERBitString,C=a.x509,x=C.AlgorithmIdentifier,_=C.TBSCertList;this.params=void 0,this.setByParam=function(L){this.params=L},this.sign=function(){var L=new _(this.params).tohex(),V=new E.crypto.Signature({alg:this.params.sigalg});V.init(this.params.cakey),V.updateHex(L);var ht=V.sign();this.params.sighex=ht},this.getPEM=function(){return $e(this.tohex(),"X509 CRL")},this.tohex=function(){var L=this.params;if(L.tbsobj==null&&(L.tbsobj=new _(L)),L.sighex==null&&L.cakey!=null&&this.sign(),L.sighex==null)throw new Error("sighex or cakey parameter not defined");var V=[];V.push(L.tbsobj),V.push(new x({name:L.sigalg})),V.push(new b({hex:"00"+L.sighex}));var ht=new h({array:V});return ht.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&(this.params=e)},Oe(E.asn1.x509.CRL,E.asn1.ASN1Object),E.asn1.x509.TBSCertList=function(e){E.asn1.x509.TBSCertList.superclass.constructor.call(this);var l=E,a=l.asn1,h=a.DERInteger,b=a.DERSequence,C=a.DERTaggedObject,x=a.DERObjectIdentifier,_=a.x509,L=_.AlgorithmIdentifier,V=_.Time,ht=_.Extensions,gt=_.X500Name;this.params=null,this.setByParam=function(P){this.params=P},this.getRevCertSequence=function(){for(var P=[],I=this.params.revcert,ut=0;ut<I.length;ut++){var T=[new h(I[ut].sn),new V(I[ut].date)];I[ut].ext!=null&&T.push(new ht(I[ut].ext)),P.push(new b({array:T}))}return new b({array:P})},this.tohex=function(){var P=[],I=this.params;if(I.version!=null){var ut=I.version-1,T=new h({int:ut});P.push(T)}if(P.push(new L({name:I.sigalg})),P.push(new gt(I.issuer)),P.push(new V(I.thisupdate)),I.nextupdate!=null&&P.push(new V(I.nextupdate)),I.revcert!=null&&P.push(this.getRevCertSequence()),I.ext!=null){var at=new ht(I.ext);P.push(new C({tag:"a0",explicit:!0,obj:at}))}var Y=new b({array:P});return Y.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)},Oe(E.asn1.x509.TBSCertList,E.asn1.ASN1Object),E.asn1.x509.CRLEntry=function(e){E.asn1.x509.CRLEntry.superclass.constructor.call(this);var l=null,a=null,h=E,b=h.asn1;this.setCertSerial=function(C){this.sn=new b.DERInteger(C)},this.setRevocationDate=function(C){this.time=new b.x509.Time(C)},this.tohex=function(){var C=new b.DERSequence({array:[this.sn,this.time]});return this.TLV=C.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(e.time!==void 0&&this.setRevocationDate(e.time),e.sn!==void 0&&this.setCertSerial(e.sn))},Oe(E.asn1.x509.CRLEntry,E.asn1.ASN1Object),E.asn1.x509.CRLNumber=function(e){E.asn1.x509.CRLNumber.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new E.asn1.DERInteger(this.params.num),this.asn1ExtnValue.tohex()},this.oid="2.5.29.20",e!=null&&(this.params=e)},Oe(E.asn1.x509.CRLNumber,E.asn1.x509.Extension),E.asn1.x509.CRLReason=function(e){E.asn1.x509.CRLReason.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new E.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.tohex()},this.oid="2.5.29.21",e!=null&&(this.params=e)},Oe(E.asn1.x509.CRLReason,E.asn1.x509.Extension),E.asn1.x509.OCSPNonce=function(e){E.asn1.x509.OCSPNonce.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new E.asn1.DEROctetString(this.params),this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.2",e!=null&&(this.params=e)},Oe(E.asn1.x509.OCSPNonce,E.asn1.x509.Extension),E.asn1.x509.OCSPNoCheck=function(e){E.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new E.asn1.DERNull,this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.5",e!=null&&(this.params=e)},Oe(E.asn1.x509.OCSPNoCheck,E.asn1.x509.Extension),E.asn1.x509.AdobeTimeStamp=function(e){E.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,e);var l=E,a=l.asn1,h=a.DERInteger,b=a.DERBoolean,C=a.DERSequence,x=a.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var _=this.params,L=[new h(1)];return L.push(new x({uri:_.uri})),_.reqauth!=null&&L.push(new b(_.reqauth)),this.asn1ExtnValue=new C({array:L}),this.asn1ExtnValue.tohex()},this.oid="1.2.840.113583.1.1.9.1",e!==void 0&&this.setByParam(e)},Oe(E.asn1.x509.AdobeTimeStamp,E.asn1.x509.Extension),E.asn1.x509.X500Name=function(e){E.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var l=E,a=l.asn1,h=a.x509,b=h.RDN,C=On;this.setByString=function(x,_){_!==void 0&&(this.sRule=_);var L=x.split("/");L.shift();for(var V=[],ht=0;ht<L.length;ht++)if(L[ht].match(/^[^=]+=.+$/))V.push(L[ht]);else{var gt=V.length-1;V[gt]=V[gt]+"/"+L[ht]}for(var ht=0;ht<V.length;ht++)this.asn1Array.push(new b({str:V[ht],rule:this.sRule}))},this.setByLdapString=function(x,_){_!==void 0&&(this.sRule=_);var L=h.X500Name.ldapToCompat(x);this.setByString(L,_)},this.setByObject=function(x,_){_!==void 0&&(this.sRule=_);for(var L in x)if(x.hasOwnProperty(L)){var V=new b({str:L+"="+x[L],rule:this.sRule});this.asn1Array?this.asn1Array.push(V):this.asn1Array=[V]}},this.setByParam=function(x){if(x.rule!==void 0&&(this.sRule=x.rule),x.array!==void 0)this.paramArray=x.array;else if(x.str!==void 0)this.setByString(x.str);else if(x.ldapstr!==void 0)this.setByLdapString(x.ldapstr);else if(x.hex!==void 0)this.hTLV=x.hex;else if(x.certissuer!==void 0){var _=new nr;_.readCertPEM(x.certissuer),this.hTLV=_.getIssuerHex()}else if(x.certsubject!==void 0){var _=new nr;_.readCertPEM(x.certsubject),this.hTLV=_.getSubjectHex()}else typeof x=="object"&&x.certsubject===void 0&&x.certissuer===void 0&&this.setByObject(x)},this.tohex=function(){if(typeof this.hTLV=="string")return this.hTLV;if(this.asn1Array.length==0&&this.paramArray.length>0)for(var x=0;x<this.paramArray.length;x++){var _={array:this.paramArray[x]};this.sRule!="utf8"&&(_.rule=this.sRule);var L=new b(_);this.asn1Array.push(L)}var V=new a.DERSequence({array:this.asn1Array});return this.hTLV=V.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)},Oe(E.asn1.x509.X500Name,E.asn1.ASN1Object),E.asn1.x509.X500Name.compatToLDAP=function(e){if(e.substr(0,1)!=="/")throw"malformed input";var l="";e=e.substr(1);var a=e.split("/");return a.reverse(),a=a.map(function(h){return h.replace(/,/,"\\,")}),a.join(",")},E.asn1.x509.X500Name.onelineToLDAP=function(e){return E.asn1.x509.X500Name.compatToLDAP(e)},E.asn1.x509.X500Name.ldapToCompat=function(e){for(var l=e.split(","),a=!1,h=[],b=0;l.length>0;b++){var C=l.shift();if(a===!0){var x=h.pop(),_=(x+","+C).replace(/\\,/g,",");h.push(_),a=!1}else h.push(C);C.substr(-1,1)==="\\"&&(a=!0)}return h=h.map(function(L){return L.replace("/","\\/")}),h.reverse(),"/"+h.join("/")},E.asn1.x509.X500Name.ldapToOneline=function(e){return E.asn1.x509.X500Name.ldapToCompat(e)},E.asn1.x509.RDN=function(e){E.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var l=E.asn1.x509.AttributeTypeAndValue;this.setByParam=function(a){a.rule!==void 0&&(this.sRule=a.rule),a.str!==void 0&&this.addByMultiValuedString(a.str),a.array!==void 0&&(this.paramArray=a.array)},this.addByString=function(a){this.asn1Array.push(new E.asn1.x509.AttributeTypeAndValue({str:a,rule:this.sRule}))},this.addByMultiValuedString=function(a){for(var h=E.asn1.x509.RDN.parseString(a),b=0;b<h.length;b++)this.addByString(h[b])},this.tohex=function(){if(this.asn1Array.length==0&&this.paramArray.length>0)for(var a=0;a<this.paramArray.length;a++){var h=this.paramArray[a];h.rule!==void 0&&this.sRule!="utf8"&&(h.rule=this.sRule);var b=new l(h);this.asn1Array.push(b)}var C=new E.asn1.DERSet({array:this.asn1Array});return this.TLV=C.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)},Oe(E.asn1.x509.RDN,E.asn1.ASN1Object),E.asn1.x509.RDN.parseString=function(e){for(var l=e.split(/\+/),a=!1,h=[],b=0;l.length>0;b++){var C=l.shift();if(a===!0){var x=h.pop(),_=(x+"+"+C).replace(/\\\+/g,"+");h.push(_),a=!1}else h.push(C);C.substr(-1,1)==="\\"&&(a=!0)}for(var L=!1,V=[],b=0;h.length>0;b++){var C=h.shift();if(L===!0){var ht=V.pop();if(C.match(/"$/)){var _=(ht+"+"+C).replace(/^([^=]+)="(.*)"$/,"$1=$2");V.push(_),L=!1}else V.push(ht+"+"+C)}else V.push(C);C.match(/^[^=]+="/)&&(L=!0)}return V},E.asn1.x509.AttributeTypeAndValue=function(e){E.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var l=E,a=l.asn1,h=a.DERSequence,b=a.DERUTF8String,C=a.DERPrintableString,x=a.DERTeletexString,_=a.DERIA5String,L=a.DERVisibleString,V=a.DERBMPString,ht=l.lang.String.isMail,gt=l.lang.String.isPrintable;this.setByParam=function(P){if(P.rule!==void 0&&(this.sRule=P.rule),P.ds!==void 0&&(this.dsType=P.ds),P.value===void 0&&P.str!==void 0){var I=P.str,ut=I.match(/^([^=]+)=(.+)$/);if(ut)this.sType=ut[1],this.sValue=ut[2];else throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr)}else this.sType=P.type,this.sValue=P.value},this.setByString=function(P,I){I!==void 0&&(this.sRule=I);var ut=P.match(/^([^=]+)=(.+)$/);if(ut)this.setByAttrTypeAndValueStr(ut[1],ut[2]);else throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr)},this._getDsType=function(){var P=this.sType,I=this.sValue,ut=this.sRule;return ut==="prn"?P=="CN"&&ht(I)?"ia5":gt(I)?"prn":"utf8":ut==="utf8"?P=="CN"&&ht(I)?"ia5":P=="C"?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(P,I,ut){ut!==void 0&&(this.sRule=ut),this.sType=P,this.sValue=I},this.getValueObj=function(P,I){if(P=="utf8")return new b({str:I});if(P=="prn")return new C({str:I});if(P=="tel")return new x({str:I});if(P=="ia5")return new _({str:I});if(P=="vis")return new L({str:I});if(P=="bmp")return new V({str:I});throw new Error("unsupported directory string type: type="+P+" value="+I)},this.tohex=function(){this.dsType==null&&(this.dsType=this._getDsType());var P=E.asn1.x509.OID.atype2obj(this.sType),I=this.getValueObj(this.dsType,this.sValue),ut=new h({array:[P,I]});return this.TLV=ut.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)},Oe(E.asn1.x509.AttributeTypeAndValue,E.asn1.ASN1Object),E.asn1.x509.SubjectPublicKeyInfo=function(e){E.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var l=null,a=null,h=E,b=h.asn1,C=b.DERInteger,x=b.DERBitString,_=b.DERObjectIdentifier,L=b.DERSequence,V=b.ASN1Util.newObject,ht=b.x509,gt=ht.AlgorithmIdentifier,P=h.crypto,I=P.ECDSA,ut=P.DSA;this.getASN1Object=function(){if(this.asn1AlgId==null||this.asn1SubjPKey==null)throw"algId and/or subjPubKey not set";var T=new L({array:[this.asn1AlgId,this.asn1SubjPKey]});return T},this.tohex=function(){var T=this.getASN1Object();return this.hTLV=T.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.setPubKey=function(T){try{if(T instanceof Er){var at=V({seq:[{int:{bigint:T.n}},{int:{int:T.e}}]}),Y=at.tohex();this.asn1AlgId=new gt({name:"rsaEncryption"}),this.asn1SubjPKey=new x({hex:"00"+Y})}}catch{}try{if(T instanceof E.crypto.ECDSA){var wt=new _({name:T.curveName});this.asn1AlgId=new gt({name:"ecPublicKey",asn1params:wt}),this.asn1SubjPKey=new x({hex:"00"+T.pubKeyHex})}}catch{}try{if(T instanceof E.crypto.DSA){var wt=new V({seq:[{int:{bigint:T.p}},{int:{bigint:T.q}},{int:{bigint:T.g}}]});this.asn1AlgId=new gt({name:"dsa",asn1params:wt});var Tt=new C({bigint:T.y});this.asn1SubjPKey=new x({hex:"00"+Tt.tohex()})}}catch{}},e!==void 0&&this.setPubKey(e)},Oe(E.asn1.x509.SubjectPublicKeyInfo,E.asn1.ASN1Object),E.asn1.x509.Time=function(e){E.asn1.x509.Time.superclass.constructor.call(this);var l=null,a=null,h=E,b=h.asn1,C=b.DERUTCTime,x=b.DERGeneralizedTime;this.params=null,this.type=null,this.setTimeParams=function(_){this.timeParams=_},this.setByParam=function(_){this.params=_},this.getType=function(_){return _.match(/^[0-9]{12}Z$/)?"utc":_.match(/^[0-9]{14}Z$/)?"gen":_.match(/^[0-9]{12}\.[0-9]+Z$/)?"utc":_.match(/^[0-9]{14}\.[0-9]+Z$/)?"gen":null},this.tohex=function(){var _=this.params,L=null;if(typeof _=="string"&&(_={str:_}),_!=null&&_.str&&(_.type==null||_.type==null)&&(_.type=this.getType(_.str)),_!=null&&_.str?(_.type=="utc"&&(L=new C(_.str)),_.type=="gen"&&(L=new x(_.str))):this.type=="gen"?L=new x:L=new C,L==null)throw new Error("wrong setting for Time");return this.TLV=L.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)},E.asn1.x509.Time_bak=function(e){E.asn1.x509.Time_bak.superclass.constructor.call(this);var l=null,a=null,h=E,b=h.asn1,C=b.DERUTCTime,x=b.DERGeneralizedTime;this.setTimeParams=function(_){this.timeParams=_},this.tohex=function(){var _=null;return this.timeParams!=null?this.type=="utc"?_=new C(this.timeParams):_=new x(this.timeParams):this.type=="utc"?_=new C:_=new x,this.TLV=_.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},this.type="utc",e!==void 0&&(e.type!==void 0?this.type=e.type:e.str!==void 0&&(e.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),e.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=e)},Oe(E.asn1.x509.Time,E.asn1.ASN1Object),E.asn1.x509.AlgorithmIdentifier=function(e){E.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var l=E,a=l.asn1,h=a.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.tohex=function(){if(this.nameAlg===null&&this.asn1Alg===null)throw new Error("algorithm not specified");if(this.nameAlg!==null){var C=null;for(var x in h)x===this.nameAlg&&(C=h[x]);if(C!==null)return this.hTLV=C,this.hTLV}this.nameAlg!==null&&this.asn1Alg===null&&(this.asn1Alg=a.x509.OID.name2obj(this.nameAlg));var _=[this.asn1Alg];this.asn1Params!==null&&_.push(this.asn1Params);var L=new a.DERSequence({array:_});return this.hTLV=L.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(e.name!==void 0&&(this.nameAlg=e.name),e.asn1params!==void 0&&(this.asn1Params=e.asn1params),e.paramempty!==void 0&&(this.paramEmpty=e.paramempty)),this.asn1Params===null&&this.paramEmpty===!1&&this.nameAlg!==null){this.nameAlg.name!==void 0&&(this.nameAlg=this.nameAlg.name);var b=this.nameAlg.toLowerCase();b.substr(-7,7)!=="withdsa"&&b.substr(-9,9)!=="withecdsa"&&(this.asn1Params=new a.DERNull)}},Oe(E.asn1.x509.AlgorithmIdentifier,E.asn1.ASN1Object),E.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"},E.asn1.x509.GeneralName=function(e){E.asn1.x509.GeneralName.superclass.constructor.call(this);var l={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87",otherName:"a0"},a=E,h=a.asn1,b=h.x509,C=b.X500Name,x=b.OtherName,_=h.DERIA5String,L=h.DERPrintableString,V=h.DEROctetString,ht=h.DERTaggedObject,gt=h.ASN1Object,P=Error;this.params=null,this.setByParam=function(I){this.params=I},this.tohex=function(){var I=this.params,ut,at,T,at=!1;if(I.other!==void 0)ut="a0",T=new x(I.other);else if(I.rfc822!==void 0)ut="81",T=new _({str:I.rfc822});else if(I.dns!==void 0)ut="82",T=new _({str:I.dns});else if(I.dn!==void 0)ut="a4",at=!0,typeof I.dn=="string"?T=new C({str:I.dn}):I.dn instanceof E.asn1.x509.X500Name?T=I.dn:T=new C(I.dn);else if(I.ldapdn!==void 0)ut="a4",at=!0,T=new C({ldapstr:I.ldapdn});else if(I.certissuer!==void 0||I.certsubj!==void 0){ut="a4",at=!0;var Y,wt,Tt=null;if(I.certsubj!==void 0?(Y=!1,wt=I.certsubj):(Y=!0,wt=I.certissuer),wt.match(/^[0-9A-Fa-f]+$/)&&Tt==wt,wt.indexOf("-----BEGIN ")!=-1&&(Tt=On(wt)),Tt==null)throw new Error("certsubj/certissuer not cert");var Wt=new nr;Wt.hex=Tt;var Gt;Y?Gt=Wt.getIssuerHex():Gt=Wt.getSubjectHex(),T=new gt,T.hTLV=Gt}else if(I.uri!==void 0)ut="86",T=new _({str:I.uri});else if(I.ip!==void 0){ut="87";var ve,be=I.ip;try{if(be.match(/^[0-9a-f]+$/)){var d=be.length;if(d==8||d==16||d==32||d==64)ve=be;else throw"err"}else ve=du(be)}catch(st){throw new P("malformed IP address: "+I.ip+":"+st.message)}T=new V({hex:ve})}else throw new P("improper params");var S=new ht({tag:ut,explicit:at,obj:T});return S.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)},Oe(E.asn1.x509.GeneralName,E.asn1.ASN1Object),E.asn1.x509.GeneralNames=function(e){E.asn1.x509.GeneralNames.superclass.constructor.call(this);var l=null,a=E,h=a.asn1;this.setByParamArray=function(b){for(var C=0;C<b.length;C++){var x=new h.x509.GeneralName(b[C]);this.asn1Array.push(x)}},this.tohex=function(){var b=new h.DERSequence({array:this.asn1Array});return b.tohex()},this.getEncodedHex=function(){return this.tohex()},this.asn1Array=new Array,typeof e<"u"&&this.setByParamArray(e)},Oe(E.asn1.x509.GeneralNames,E.asn1.ASN1Object),E.asn1.x509.OtherName=function(e){E.asn1.x509.OtherName.superclass.constructor.call(this);var l=null,a=null,h=E,b=h.asn1,C=b.DERObjectIdentifier,x=b.DERSequence,_=b.ASN1Util.newObject;this.params=null,this.setByParam=function(L){this.params=L},this.tohex=function(){var L=this.params;if(L.oid==null||L.value==null)throw new Error("oid or value not specified");var V=new C({oid:L.oid}),ht=_({tag:{tag:"a0",explicit:!0,obj:L.value}}),gt=new x({array:[V,ht]});return gt.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)},Oe(E.asn1.x509.OtherName,E.asn1.ASN1Object),E.asn1.x509.OID=new function(){var e=E.asn1.DERObjectIdentifier;this.name2oidList={"aes128-CBC":"2.16.840.1.101.3.4.1.2","aes256-CBC":"2.16.840.1.101.3.4.1.42",sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",hmacWithSHA1:"1.2.840.113549.2.7",hmacWithSHA224:"1.2.840.113549.2.8",hmacWithSHA256:"1.2.840.113549.2.9",hmacWithSHA384:"1.2.840.113549.2.10",hmacWithSHA512:"1.2.840.113549.2.11",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",policyMappings:"2.5.29.33",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",inhibitAnyPolicy:"2.5.29.54",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",smtpUTF8Mailbox:"1.3.6.1.5.5.7.8.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",secp521r1:"1.3.132.0.35",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1",smimeMailboxLegacy:"2.23.140.1.5.1.1",smimeMailboxMulti:"2.23.140.1.5.1.2",smimeMailboxStrict:"2.23.140.1.5.1.3",smimeOrganizationLegacy:"2.23.140.1.5.2.1",smimeOrganizationMulti:"2.23.140.1.5.2.2",smimeOrganizationStrict:"2.23.140.1.5.2.3",smimeSponsorLegacy:"2.23.140.1.5.3.1",smimeSponsorMulti:"2.23.140.1.5.3.2",smimeSponsorStrict:"2.23.140.1.5.3.3",smimeIndividualLegacy:"2.23.140.1.5.4.1",smimeIndividualMulti:"2.23.140.1.5.4.2",smimeIndividualStrict:"2.23.140.1.5.4.3"},this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",GN:"2.5.4.42",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.objCache={},this.name2obj=function(l){if(typeof this.objCache[l]<"u")return this.objCache[l];if(typeof this.name2oidList[l]>"u")throw"Name of ObjectIdentifier not defined: "+l;var a=this.name2oidList[l],h=new e({oid:a});return this.objCache[l]=h,h},this.atype2obj=function(l){if(this.objCache[l]!==void 0)return this.objCache[l];var a;if(l.match(/^\d+\.\d+\.[0-9.]+$/))a=l;else if(this.atype2oidList[l]!==void 0)a=this.atype2oidList[l];else if(this.name2oidList[l]!==void 0)a=this.name2oidList[l];else throw new Error("AttributeType name undefined: "+l);var h=new e({oid:a});return this.objCache[l]=h,h},this.registerOIDs=function(l){if(this.checkOIDs(l))for(var a in l)this.name2oidList[a]=l[a]},this.checkOIDs=function(l){try{var a=Object.keys(l);return a.length==0?!1:(a.map(function(h,b,C){var x=this[h];if(!x.match(/^[0-2]\.[0-9.]+$/))throw new Error("value is not OID")},l),!0)}catch{return!1}}},E.asn1.x509.OID.oid2name=function(e){var l=E.asn1.x509.OID.name2oidList;for(var a in l)if(l[a]==e)return a;return""},E.asn1.x509.OID.oid2atype=function(e){var l=E.asn1.x509.OID.atype2oidList;for(var a in l)if(l[a]==e)return a;return e},E.asn1.x509.OID.name2oid=function(e){if(e.match(/^[0-9.]+$/))return e;var l=E.asn1.x509.OID.name2oidList;return l[e]===void 0?"":l[e]},E.asn1.x509.X509Util={},E.asn1.x509.X509Util.newCertPEM=function(e){var l=E.asn1.x509,a=l.TBSCertificate,h=l.Certificate,b=new h(e);return b.getPEM()},(typeof E>"u"||!E)&&(E={}),(typeof E.asn1>"u"||!E.asn1)&&(E.asn1={}),(typeof E.asn1.cms>"u"||!E.asn1.cms)&&(E.asn1.cms={}),E.asn1.cms.Attribute=function(e){var l=Error,a=E,h=a.asn1,b=h.DERSequence,C=h.DERSet,x=h.DERObjectIdentifier;this.params=null,this.typeOid=null,this.setByParam=function(_){this.params=_},this.getValueArray=function(){throw new l("not yet implemented abstract")},this.tohex=function(){var _=new x({oid:this.typeOid}),L=new C({array:this.getValueArray()}),V=new b({array:[_,L]});return V.tohex()},this.getEncodedHex=function(){return this.tohex()}},Oe(E.asn1.cms.Attribute,E.asn1.ASN1Object),E.asn1.cms.ContentType=function(e){var l=E,a=l.asn1;a.cms.ContentType.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.3",this.getValueArray=function(){var h=new a.DERObjectIdentifier(this.params.type);return[h]},e!=null&&this.setByParam(e)},Oe(E.asn1.cms.ContentType,E.asn1.cms.Attribute),E.asn1.cms.MessageDigest=function(e){var l=E,a=l.asn1,h=a.DEROctetString,b=a.cms;b.MessageDigest.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.4",this.getValueArray=function(){var C=new h(this.params);return[C]},e!=null&&this.setByParam(e)},Oe(E.asn1.cms.MessageDigest,E.asn1.cms.Attribute),E.asn1.cms.SigningTime=function(e){var l=E,a=l.asn1;a.cms.SigningTime.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.5",this.getValueArray=function(){var h=new a.x509.Time(this.params);return[h]},e!=null&&this.setByParam(e)},Oe(E.asn1.cms.SigningTime,E.asn1.cms.Attribute),E.asn1.cms.SigningCertificate=function(e){var l=Error,a=E,h=a.asn1,b=h.DERSequence,C=h.cms,x=C.ESSCertID,_=a.crypto;C.SigningCertificate.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.12",this.getValueArray=function(){if(this.params==null||this.params==null||this.params.array==null)throw new l("parameter 'array' not specified");for(var L=this.params.array,V=[],ht=0;ht<L.length;ht++){var gt=L[ht];e.hasis==!1&&typeof gt=="string"&&(gt.indexOf("-----BEGIN")!=-1||Ge.isASN1HEX(gt))&&(gt={cert:gt}),gt.hasis!=!1&&e.hasis==!1&&(gt.hasis=!1),V.push(new x(gt))}var P=new b({array:V}),I=new b({array:[P]});return[I]},e!=null&&this.setByParam(e)},Oe(E.asn1.cms.SigningCertificate,E.asn1.cms.Attribute),E.asn1.cms.ESSCertID=function(e){E.asn1.cms.ESSCertID.superclass.constructor.call(this);var l=Error,a=E,h=a.asn1,b=h.DEROctetString,C=h.DERSequence,x=h.cms.IssuerSerial;this.params=null,this.getCertHash=function(_,L){if(_.hash!=null)return _.hash;if(typeof _=="string"&&_.indexOf("-----BEGIN")==-1&&!Ge.isASN1HEX(_))return _;var V;if(typeof _=="string")V=_;else if(_.cert!=null)V=_.cert;else throw new l("hash nor cert unspecified");var ht;V.indexOf("-----BEGIN")!=-1?ht=On(V):ht=V,typeof _=="string"&&(_.indexOf("-----BEGIN")!=-1?ht=On(_):Ge.isASN1HEX(_)&&(ht=_));var gt;if(_.alg!=null)gt=_.alg;else if(L!=null)gt=L;else throw new l("hash alg unspecified");return a.crypto.Util.hashHex(ht,gt)},this.tohex=function(){var _=this.params,L=this.getCertHash(_,"sha1"),V=[];V.push(new b({hex:L})),(typeof _=="string"&&_.indexOf("-----BEGIN")!=-1||_.cert!=null&&_.hasis!=!1||_.issuer!=null&&_.serial!=null)&&V.push(new x(_));var ht=new C({array:V});return ht.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)},Oe(E.asn1.cms.ESSCertID,E.asn1.ASN1Object),E.asn1.cms.SigningCertificateV2=function(e){var l=Error,a=E,h=a.asn1,b=h.DERSequence,C=h.x509,x=h.cms,_=x.ESSCertIDv2,L=a.crypto;x.SigningCertificateV2.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.47",this.getValueArray=function(){if(this.params==null||this.params==null||this.params.array==null)throw new l("parameter 'array' not specified");for(var V=this.params.array,ht=[],gt=0;gt<V.length;gt++){var P=V[gt];(e.alg!=null||e.hasis==!1)&&typeof P=="string"&&(P.indexOf("-----BEGIN")!=-1||Ge.isASN1HEX(P))&&(P={cert:P}),P.alg==null&&e.alg!=null&&(P.alg=e.alg),P.hasis!=!1&&e.hasis==!1&&(P.hasis=!1),ht.push(new _(P))}var I=new b({array:ht}),ut=new b({array:[I]});return[ut]},e!=null&&this.setByParam(e)},Oe(E.asn1.cms.SigningCertificateV2,E.asn1.cms.Attribute),E.asn1.cms.ESSCertIDv2=function(e){E.asn1.cms.ESSCertIDv2.superclass.constructor.call(this);var l=Error,a=E,h=a.asn1,b=h.DEROctetString,C=h.DERSequence,x=h.cms.IssuerSerial,_=h.x509.AlgorithmIdentifier;this.params=null,this.tohex=function(){var L=this.params,V=this.getCertHash(L,"sha256"),ht=[];L.alg!=null&&L.alg!="sha256"&&ht.push(new _({name:L.alg})),ht.push(new b({hex:V})),(typeof L=="string"&&L.indexOf("-----BEGIN")!=-1||L.cert!=null&&L.hasis!=!1||L.issuer!=null&&L.serial!=null)&&ht.push(new x(L));var gt=new C({array:ht});return gt.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)},Oe(E.asn1.cms.ESSCertIDv2,E.asn1.cms.ESSCertID),E.asn1.cms.IssuerSerial=function(e){var l=Error,a=E,h=a.asn1,b=h.DERInteger,C=h.DERSequence,x=h.cms,_=h.x509,L=_.GeneralNames,V=nr;x.IssuerSerial.superclass.constructor.call(this),this.setByParam=function(ht){this.params=ht},this.tohex=function(){var ht=this.params,gt,P;if(typeof ht=="string"&&ht.indexOf("-----BEGIN")!=-1||ht.cert!=null){var I;ht.cert!=null?I=ht.cert:I=ht;var ut=new V;ut.readCertPEM(I),gt=ut.getIssuer(),P={hex:ut.getSerialNumberHex()}}else if(ht.issuer!=null&&ht.serial)gt=ht.issuer,P=ht.serial;else throw new l("cert or issuer and serial parameter not specified");var T=new L([{dn:gt}]),at=new b(P),Y=new C({array:[T,at]});return Y.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)},Oe(E.asn1.cms.IssuerSerial,E.asn1.ASN1Object),E.asn1.cms.SignerIdentifier=function(e){var l=E,a=l.asn1,h=a.DERInteger,b=a.DERSequence,C=a.cms,x=C.IssuerAndSerialNumber,_=C.SubjectKeyIdentifier,L=a.x509,V=L.X500Name,ht=nr,gt=Error;C.SignerIdentifier.superclass.constructor.call(this),this.params=null,this.tohex=function(){var P=this.params;if(P.type=="isssn"){var I=new x(P);return I.tohex()}else if(P.type=="skid"){var ut=new _(P);return ut.tohex()}else throw new Error("wrong property for isssn or skid")},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)},Oe(E.asn1.cms.SignerIdentifier,E.asn1.ASN1Object),E.asn1.cms.IssuerAndSerialNumber=function(e){var l=E,a=l.asn1,h=a.DERInteger,b=a.DERSequence,C=a.cms,x=a.x509,_=x.X500Name,L=nr,V=Error;C.IssuerAndSerialNumber.superclass.constructor.call(this),this.params=null,this.tohex=function(){var ht=this.params,gt,P;if(typeof ht=="string"&&ht.indexOf("-----BEGIN")!=-1||ht.cert!=null){var I;ht.cert!=null?I=ht.cert:I=ht;var ut=new L;ut.readCertPEM(I),gt=ut.getIssuer(),P={hex:ut.getSerialNumberHex()}}else if(ht.issuer!=null&&ht.serial)gt=ht.issuer,P=ht.serial;else throw new V("cert or issuer and serial parameter not specified");var T=new _(gt),at=new h(P),Y=new b({array:[T,at]});return Y.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(ht){this.params=ht},e!=null&&this.setByParam(e)},Oe(E.asn1.cms.IssuerAndSerialNumber,E.asn1.ASN1Object),E.asn1.cms.SubjectKeyIdentifier=function(e){var l=E,a=l.asn1,h=a.DERInteger,b=a.DERSequence,C=a.ASN1Util.newObject,x=a.cms,_=x.IssuerAndSerialName,L=x.SubjectKeyIdentifier,V=a.x509,ht=V.X500Name,gt=nr,P=Error;x.SubjectKeyIdentifier.superclass.constructor.call(this),this.tohex=function(){var I=this.params;if(I.cert==null&&I.skid==null)throw new P("property cert nor skid undefined");var ut;if(I.cert!=null){var T=new gt(I.cert),at=T.getExtSubjectKeyIdentifier();ut=at.kid.hex}else I.skid!=null&&(ut=I.skid);var Y=C({tag:{tage:"a0",obj:{octstr:{hex:ut}}}});return Y.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)},Oe(E.asn1.cms.SubjectKeyIdentifier,E.asn1.ASN1Object),E.asn1.cms.AttributeList=function(e){var l=Error,a=E,h=a.asn1,b=h.DERSet,C=h.cms;C.AttributeList.superclass.constructor.call(this),this.params=null,this.hTLV=null,this.setByParam=function(x){this.params=x},this.tohex=function(){var x=this.params;if(this.hTLV!=null)return this.hTLV;var _=!0;x.sortflag!=null&&(_=x.sortflag);for(var L=x.array,V=[],ht=0;ht<L.length;ht++){var gt=L[ht],P=gt.attr;if(P=="contentType")V.push(new C.ContentType(gt));else if(P=="messageDigest")V.push(new C.MessageDigest(gt));else if(P=="signingTime")V.push(new C.SigningTime(gt));else if(P=="signingCertificate")V.push(new C.SigningCertificate(gt));else if(P=="signingCertificateV2")V.push(new C.SigningCertificateV2(gt));else if(P=="signaturePolicyIdentifier")V.push(new E.asn1.cades.SignaturePolicyIdentifier(gt));else if(P=="signatureTimeStamp"||P=="timeStampToken")V.push(new E.asn1.cades.SignatureTimeStamp(gt));else throw new l("unknown attr: "+P)}var I=new b({array:V,sortflag:_});return this.hTLV=I.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)},Oe(E.asn1.cms.AttributeList,E.asn1.ASN1Object),E.asn1.cms.SignerInfo=function(e){var l=Error,a=E,h=a.asn1,b=h.DERInteger,C=h.DEROctetString,x=h.DERSequence,_=h.DERTaggedObject,L=h.cms,V=L.SignerIdentifier,ht=L.AttributeList,gt=L.ContentType,P=L.EncapsulatedContentInfo,I=L.MessageDigest,ut=L.SignedData,T=h.x509,at=T.AlgorithmIdentifier,Y=a.crypto,wt=Nr;L.SignerInfo.superclass.constructor.call(this),this.params=null,this.sign=function(){var Tt=this.params,Wt=Tt.sigalg,Gt=new ht(Tt.sattrs).tohex(),ve=wt.getKey(Tt.signkey),be=new Y.Signature({alg:Wt});be.init(ve),be.updateHex(Gt);var d=be.sign();Tt.sighex=d},this.tohex=function(){var Tt=this.params,Wt=[];if(Wt.push(new b({int:Tt.version})),Wt.push(new V(Tt.id)),Wt.push(new at({name:Tt.hashalg})),Tt.sattrs!=null){var Gt=new ht(Tt.sattrs);try{Wt.push(new _({tag:"a0",explicit:!1,obj:Gt}))}catch(be){throw new l("si sattr error: "+be)}}if(Tt.sigalgfield!=null?Wt.push(new at({name:Tt.sigalgfield})):Wt.push(new at({name:Tt.sigalg})),Tt.sighex==null&&Tt.signkey!=null&&this.sign(),Wt.push(new C({hex:Tt.sighex})),Tt.uattrs!=null){var Gt=new ht(Tt.uattrs);try{Wt.push(new _({tag:"a1",explicit:!1,obj:Gt}))}catch(d){throw new l("si uattr error: "+d)}}var ve=new x({array:Wt});return ve.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)},Oe(E.asn1.cms.SignerInfo,E.asn1.ASN1Object),E.asn1.cms.EncapsulatedContentInfo=function(e){var l=E,a=l.asn1,h=a.DERTaggedObject,b=a.DERSequence,C=a.DERObjectIdentifier,x=a.DEROctetString,_=a.cms;_.EncapsulatedContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var L=this.params,V=[];if(V.push(new C(L.type)),L.content!=null&&(L.content.hex!=null||L.content.str!=null)&&L.isDetached!=!0){var ht=new x(L.content),gt=new h({tag:"a0",explicit:!0,obj:ht});V.push(gt)}var P=new b({array:V});return P.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(L){this.params=L},e!=null&&this.setByParam(e)},Oe(E.asn1.cms.EncapsulatedContentInfo,E.asn1.ASN1Object),E.asn1.cms.ContentInfo=function(e){var l=E,a=l.asn1,h=a.DERTaggedObject,b=a.DERSequence,C=a.DERObjectIdentifier,x=a.x509,_=x.OID.name2obj;E.asn1.cms.ContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var L=this.params,V=[];V.push(new C(L.type));var ht=new h({tag:"a0",explicit:!0,obj:L.obj});V.push(ht);var gt=new b({array:V});return gt.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(L){this.params=L},e!=null&&this.setByParam(e)},Oe(E.asn1.cms.ContentInfo,E.asn1.ASN1Object),E.asn1.cms.SignedData=function(e){var l=Error,a=E,h=a.asn1,b=h.ASN1Object,C=h.DERInteger,x=h.DERSet,_=h.DERSequence,L=h.DERTaggedObject,V=h.cms,ht=V.EncapsulatedContentInfo,gt=V.SignerInfo,P=V.ContentInfo,I=V.CertificateSet,ut=V.RevocationInfoChoices,T=h.x509,at=T.AlgorithmIdentifier;E.asn1.cms.SignedData.superclass.constructor.call(this),this.params=null,this.checkAndFixParam=function(){var Y=this.params;this._setDigestAlgs(Y),this._setContentTypeByEContent(Y),this._setMessageDigestByEContent(Y),this._setSignerInfoVersion(Y),this._setSignedDataVersion(Y)},this._setDigestAlgs=function(Y){for(var wt={},Tt=Y.sinfos,Wt=0;Wt<Tt.length;Wt++){var Gt=Tt[Wt];wt[Gt.hashalg]=1}Y.hashalgs=Object.keys(wt).sort()},this._setContentTypeByEContent=function(Y){for(var wt=Y.econtent.type,Tt=Y.sinfos,Wt=0;Wt<Tt.length;Wt++){var Gt=Tt[Wt],ve=this._getAttrParamByName(Gt,"contentType");ve.type=wt}},this._setMessageDigestByEContent=function(Y){var wt=Y.econtent,Tt=Y.econtent.type,Wt=wt.content.hex;Wt==null&&wt.type=="data"&&wt.content.str!=null&&(Wt=kn(wt.content.str));for(var Gt=Y.sinfos,ve=0;ve<Gt.length;ve++){var be=Gt[ve],d=be.hashalg,S=this._getAttrParamByName(be,"messageDigest"),st=E.crypto.Util.hashHex(Wt,d);S.hex=st}},this._getAttrParamByName=function(Y,wt){for(var Tt=Y.sattrs.array,Wt=0;Wt<Tt.length;Wt++)if(Tt[Wt].attr==wt)return Tt[Wt]},this._setSignerInfoVersion=function(Y){for(var wt=Y.sinfos,Tt=0;Tt<wt.length;Tt++){var Wt=wt[Tt],Gt=1;Wt.id.type=="skid"&&(Gt=3),Wt.version=Gt}},this._setSignedDataVersion=function(Y){var wt=this._getSignedDataVersion(Y);Y.version=wt},this._getSignedDataVersion=function(Y){if(Y.revinfos!=null)for(var wt=Y.revinfos,Tt=0;Tt<wt.length;Tt++){var Wt=wt[Tt];if(Wt.ocsp!=null)return 5}for(var Gt=Y.sinfos,Tt=0;Tt<Gt.length;Tt++){var ve=Y.sinfos[Tt];if(ve.version==3)return 3}return Y.econtent.type!="data"?3:1},this.tohex=function(){var Y=this.params;this.getEncodedHexPrepare!=null&&this.getEncodedHexPrepare(),Y.fixed!=!0&&this.checkAndFixParam();var wt=[];wt.push(new C({int:Y.version}));for(var Tt=[],Wt=0;Wt<Y.hashalgs.length;Wt++){var Gt=Y.hashalgs[Wt];Tt.push(new at({name:Gt}))}wt.push(new x({array:Tt})),wt.push(new ht(Y.econtent)),Y.certs!=null&&wt.push(new I(Y.certs)),Y.revinfos!=null&&wt.push(new ut(Y.revinfos));for(var ve=[],Wt=0;Wt<Y.sinfos.length;Wt++){var be=Y.sinfos[Wt];ve.push(new gt(be))}wt.push(new x({array:ve}));var d=new _({array:wt});return d.tohex()},this.getEncodedHex=function(){return this.tohex()},this.getContentInfo=function(){var Y=new P({type:"signed-data",obj:this});return Y},this.getContentInfoEncodedHex=function(){return this.getContentInfo().tohex()},e!=null&&this.setByParam(e)},Oe(E.asn1.cms.SignedData,E.asn1.ASN1Object),E.asn1.cms.CertificateSet=function(e){E.asn1.cms.CertificateSet.superclass.constructor.call(this);var l=Error,a=E.asn1,h=a.DERTaggedObject,b=a.DERSet,C=a.ASN1Object;this.params=null,this.tohex=function(){var x=this.params,_=[],L;if(x instanceof Array)L=x;else if(x.array!=null)L=x.array;else throw new l("cert array not specified");for(var V=0;V<L.length;V++){var ht=L[V],gt=On(ht),P=new C;P.hTLV=gt,_.push(P)}var I={array:_};x.sortflag==!1&&(I.sortflag=!1);var ut=new b(I),T=new h({tag:"a0",explicit:!1,obj:ut});return T.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)},Oe(E.asn1.cms.CertificateSet,E.asn1.ASN1Object),E.asn1.cms.RevocationInfoChoices=function(e){E.asn1.cms.RevocationInfoChoices.superclass.constructor.call(this),this.params=null,this.tohex=function(){var l=this.params;if(!l instanceof Array)throw new Error("params is not array");for(var a=[],h=0;h<l.length;h++)a.push(new E.asn1.cms.RevocationInfoChoice(l[h]));var b=E.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:{set:a}}});return b.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)},Oe(E.asn1.cms.RevocationInfoChoices,E.asn1.ASN1Object),E.asn1.cms.RevocationInfoChoice=function(e){E.asn1.cms.RevocationInfoChoice.superclass.constructor.call(this),this.params=null,this.tohex=function(){var l=this.params;if(l.crl!=null&&typeof l.crl=="string"){var a=l.crl;return l.crl.indexOf("-----BEGIN")!=-1&&(a=On(l.crl)),a}else if(l.ocsp!=null){var h=E.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:new E.asn1.cms.OtherRevocationFormat(l)}});return h.tohex()}else throw new Error("property crl or ocsp undefined")},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)},Oe(E.asn1.cms.RevocationInfoChoice,E.asn1.ASN1Object),E.asn1.cms.OtherRevocationFormat=function(e){E.asn1.cms.OtherRevocationFormat.superclass.constructor.call(this);var l=Error,a=E,h=a.asn1,b=h.ASN1Util.newObject,C=a.lang.String.isHex;this.params=null,this.tohex=function(){var x=this.params;if(x.ocsp==null)throw new l("property ocsp not specified");if(!C(x.ocsp)||!Ge.isASN1HEX(x.ocsp))throw new l("ocsp value not ASN.1 hex string");var _=b({seq:[{oid:"1.3.6.1.5.5.7.16.2"},{asn1:{tlv:x.ocsp}}]});return _.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)},Oe(E.asn1.cms.OtherRevocationFormat,E.asn1.ASN1Object),E.asn1.cms.CMSUtil=new function(){},E.asn1.cms.CMSUtil.newSignedData=function(e){return new E.asn1.cms.SignedData(e)},E.asn1.cms.CMSUtil.verifySignedData=function(e){var l=E,a=l.asn1,h=a.cms,b=h.SignerInfo,C=h.SignedData,x=h.SigningTime,_=h.SigningCertificate,L=h.SigningCertificateV2,V=a.cades,ht=V.SignaturePolicyIdentifier,gt=l.lang.String.isHex,P=Ge,I=P.getVbyList,ut=P.getTLVbyList,T=P.getIdxbyList,at=P.getChildIdx,Y=P.getTLV,wt=P.oidname,Tt=l.crypto.Util.hashHex;e.cms===void 0&&gt(e.cms);var Wt=e.cms,Gt=function(ie,ge){for(var Se,wr=3;wr<6;wr++)if(Se=T(ie,0,[1,0,wr]),Se!==void 0){var xr=ie.substr(Se,2);xr==="a0"&&(ge.certsIdx=Se),xr==="a1"&&(ge.revinfosIdx=Se),xr==="31"&&(ge.signerinfosIdx=Se)}},ve=function(ie,ge){var Se=ge.signerinfosIdx;if(Se!==void 0){var wr=at(ie,Se);ge.signerInfoIdxList=wr;for(var xr=0;xr<wr.length;xr++){var Fr=wr[xr],qr={idx:Fr};be(ie,qr),ge.signerInfos.push(qr)}}},be=function(ie,ge){var Se=ge.idx;ge.signerid_issuer1=ut(ie,Se,[1,0],"30"),ge.signerid_serial1=I(ie,Se,[1,1],"02"),ge.hashalg=wt(I(ie,Se,[2,0],"06"));var wr=T(ie,Se,[3],"a0");ge.idxSignedAttrs=wr,d(ie,ge,wr);var xr=at(ie,Se),Fr=xr.length;if(Fr<6)throw"malformed SignerInfo";ge.sigalg=wt(I(ie,Se,[Fr-2,0],"06")),ge.sigval=I(ie,Se,[Fr-1],"04")},d=function(ie,ge,Se){var wr=at(ie,Se);ge.signedAttrIdxList=wr;for(var xr=0;xr<wr.length;xr++){var Fr=wr[xr],qr=I(ie,Fr,[0],"06"),Ur;qr==="2a864886f70d010905"?(Ur=_r(I(ie,Fr,[1,0])),ge.saSigningTime=Ur):qr==="2a864886f70d010904"&&(Ur=I(ie,Fr,[1,0],"04"),ge.saMessageDigest=Ur)}},S=function(ie,ge){if(I(ie,0,[0],"06")!=="2a864886f70d010702")return ge;ge.cmsType="signedData",ge.econtent=I(ie,0,[1,0,2,1,0]),Gt(ie,ge),ge.signerInfos=[],ve(ie,ge)},st=function(ie,ge){for(var Se=ge.parse.signerInfos,wr=Se.length,xr=!0,Fr=0;Fr<wr;Fr++){var qr=Se[Fr];_t(ie,ge,qr,Fr),qr.isValid||(xr=!1)}ge.isValid=xr},z=function(ie,ge,Se,wr){var xr=ge.parse.certsIdx,Fr;if(ge.certs===void 0){Fr=[],ge.certkeys=[];for(var qr=at(ie,xr),Ur=0;Ur<qr.length;Ur++){var xn=Y(ie,qr[Ur]),pn=new nr;pn.readCertHex(xn),Fr[Ur]=pn,ge.certkeys[Ur]=pn.getPublicKey()}ge.certs=Fr}else Fr=ge.certs;ge.cccc=Fr.length,ge.cccci=qr.length;for(var Ur=0;Ur<Fr.length;Ur++){var Fi=pn.getIssuerHex(),js=pn.getSerialNumberHex();Se.signerid_issuer1===Fi&&Se.signerid_serial1===js&&(Se.certkey_idx=Ur)}},_t=function(ie,ge,Se,wr){Se.verifyDetail={};var xr=Se.verifyDetail,Fr=ge.parse.econtent,qr=Se.hashalg,Ur=Se.saMessageDigest;xr.validMessageDigest=!1,Tt(Fr,qr)===Ur&&(xr.validMessageDigest=!0),z(ie,ge,Se,wr),xr.validSignatureValue=!1;var xn=Se.sigalg,pn="31"+Y(ie,Se.idxSignedAttrs).substr(2);Se.signedattrshex=pn;var Fi=ge.certs[Se.certkey_idx].getPublicKey(),js=new E.crypto.Signature({alg:xn});js.init(Fi),js.updateHex(pn);var Es=js.verify(Se.sigval);xr.validSignatureValue_isValid=Es,Es===!0&&(xr.validSignatureValue=!0),Se.isValid=!1,xr.validMessageDigest&&xr.validSignatureValue&&(Se.isValid=!0)},Mt=function(){},te={isValid:!1,parse:{}};return S(Wt,te.parse),st(Wt,te),te},E.asn1.cms.CMSParser=function(){var e=Error,l=nr,a=new l,h=Ge,b=h.getV,C=h.getTLV,x=h.getIdxbyList,_=h.getTLVbyList,L=h.getTLVbyListEx,V=h.getVbyList,ht=h.getVbyListEx,gt=h.getChildIdx;this.getCMSSignedData=function(P){var I=_(P,0,[1,0]),ut=this.getSignedData(I);return ut},this.getSignedData=function(P){var I=gt(P,0),ut={},T=b(P,I[0]),at=parseInt(T,16);ut.version=at;var Y=C(P,I[1]);ut.hashalgs=this.getHashAlgArray(Y);var wt=C(P,I[2]);ut.econtent=this.getEContent(wt);var Tt=L(P,0,["[0]"]);Tt!=null&&(ut.certs=this.getCertificateSet(Tt));var Wt=L(P,0,["[1]"]);Wt!=null;var Gt=L(P,0,[3]);return ut.sinfos=this.getSignerInfos(Gt),ut},this.getHashAlgArray=function(P){for(var I=gt(P,0),ut=new l,T=[],at=0;at<I.length;at++){var Y=C(P,I[at]),wt=ut.getAlgorithmIdentifierName(Y);T.push(wt)}return T},this.getEContent=function(P){var I={},ut=V(P,0,[0]),T=V(P,0,[1,0]);return I.type=E.asn1.x509.OID.oid2name(Ge.hextooidstr(ut)),I.content={hex:T},I},this.getSignerInfos=function(P){for(var I=[],ut=gt(P,0),T=0;T<ut.length;T++){var at=C(P,ut[T]),Y=this.getSignerInfo(at);I.push(Y)}return I},this.getSignerInfo=function(P){var I={},ut=gt(P,0),T=h.getInt(P,ut[0],-1);T!=-1&&(I.version=T);var at=C(P,ut[1]),Y=this.getIssuerAndSerialNumber(at);I.id=Y;var wt=C(P,ut[2]),Tt=a.getAlgorithmIdentifierName(wt);I.hashalg=Tt;var Wt=L(P,0,["[0]"]);if(Wt!=null){var Gt=this.getAttributeList(Wt);I.sattrs=Gt}var ve=L(P,0,[3]),be=a.getAlgorithmIdentifierName(ve);I.sigalg=be;var d=ht(P,0,[4]);I.sighex=d;var S=L(P,0,["[1]"]);if(S!=null){var st=this.getAttributeList(S);I.uattrs=st}return I},this.getSignerIdentifier=function(P){if(P.substr(0,2)=="30")return this.getIssuerAndSerialNumber(P);throw new Error("SKID of signerIdentifier not supported")},this.getIssuerAndSerialNumber=function(P){var I={type:"isssn"},ut=gt(P,0),T=C(P,ut[0]);I.issuer=a.getX500Name(T);var at=b(P,ut[1]);return I.serial={hex:at},I},this.getAttributeList=function(P){for(var I=[],ut=gt(P,0),T=0;T<ut.length;T++){var at=C(P,ut[T]),Y=this.getAttribute(at);I.push(Y)}return{array:I}},this.getAttribute=function(P){var I={},ut=gt(P,0),T=h.getOID(P,ut[0]),at=E.asn1.x509.OID.oid2name(T);I.attr=at;var Y=C(P,ut[1]),wt=gt(Y,0);if(wt.length==1)I.valhex=C(Y,wt[0]);else{for(var Tt=[],Wt=0;Wt<wt.length;Wt++)Tt.push(C(Y,wt[Wt]));I.valhex=Tt}return at=="contentType"?this.setContentType(I):at=="messageDigest"?this.setMessageDigest(I):at=="signingTime"?this.setSigningTime(I):at=="signingCertificate"?this.setSigningCertificate(I):at=="signingCertificateV2"?this.setSigningCertificateV2(I):at=="signaturePolicyIdentifier"&&this.setSignaturePolicyIdentifier(I),I},this.setContentType=function(P){var I=h.getOIDName(P.valhex,0,null);I!=null&&(P.type=I,delete P.valhex)},this.setSigningTime=function(P){var I=b(P.valhex,0),ut=_r(I);P.str=ut,delete P.valhex},this.setMessageDigest=function(P){var I=b(P.valhex,0);P.hex=I,delete P.valhex},this.setSigningCertificate=function(P){var I=gt(P.valhex,0);if(I.length>0){for(var ut=C(P.valhex,I[0]),T=gt(ut,0),at=[],Y=0;Y<T.length;Y++){var wt=C(ut,T[Y]),Tt=this.getESSCertID(wt);at.push(Tt)}P.array=at}if(I.length>1){var Wt=C(P.valhex,I[1]);P.polhex=Wt}delete P.valhex},this.setSignaturePolicyIdentifier=function(P){var I=gt(P.valhex,0);if(I.length>0){var ut=h.getOID(P.valhex,I[0]);P.oid=ut}if(I.length>1){var T=new l,at=gt(P.valhex,I[1]),Y=C(P.valhex,at[0]),wt=T.getAlgorithmIdentifierName(Y);P.alg=wt;var Tt=b(P.valhex,at[1]);P.hash=Tt}delete P.valhex},this.setSigningCertificateV2=function(P){var I=gt(P.valhex,0);if(I.length>0){for(var ut=C(P.valhex,I[0]),T=gt(ut,0),at=[],Y=0;Y<T.length;Y++){var wt=C(ut,T[Y]),Tt=this.getESSCertIDv2(wt);at.push(Tt)}P.array=at}if(I.length>1){var Wt=C(P.valhex,I[1]);P.polhex=Wt}delete P.valhex},this.getESSCertID=function(P){var I={},ut=gt(P,0);if(ut.length>0){var T=b(P,ut[0]);I.hash=T}if(ut.length>1){var at=C(P,ut[1]),Y=this.getIssuerSerial(at);Y.serial!=null&&(I.serial=Y.serial),Y.issuer!=null&&(I.issuer=Y.issuer)}return I},this.getESSCertIDv2=function(P){var I={},ut=gt(P,0);if(ut.length<1||3<ut.length)throw new e("wrong number of elements");var T=0;if(P.substr(ut[0],2)=="30"){var at=C(P,ut[0]);I.alg=a.getAlgorithmIdentifierName(at),T++}else I.alg="sha256";var Y=b(P,ut[T]);if(I.hash=Y,ut.length>T+1){var wt=C(P,ut[T+1]),Tt=this.getIssuerSerial(wt);I.issuer=Tt.issuer,I.serial=Tt.serial}return I},this.getIssuerSerial=function(P){var I={},ut=gt(P,0),T=C(P,ut[0]),at=a.getGeneralNames(T),Y=at[0].dn;I.issuer=Y;var wt=b(P,ut[1]);return I.serial={hex:wt},I},this.getCertificateSet=function(P){for(var I=gt(P,0),ut=[],T=0;T<I.length;T++){var at=C(P,I[T]);if(at.substr(0,2)=="30"){var Y=$e(at,"CERTIFICATE");ut.push(Y)}}return{array:ut,sortflag:!1}}},(typeof E>"u"||!E)&&(E={}),(typeof E.asn1>"u"||!E.asn1)&&(E.asn1={}),(typeof E.asn1.tsp>"u"||!E.asn1.tsp)&&(E.asn1.tsp={}),E.asn1.tsp.TimeStampToken=function(e){var l=E,a=l.asn1,h=a.tsp;h.TimeStampToken.superclass.constructor.call(this),this.params=null,this.getEncodedHexPrepare=function(){var b=new h.TSTInfo(this.params.econtent.content);this.params.econtent.content.hex=b.tohex()},e!=null&&this.setByParam(e)},Oe(E.asn1.tsp.TimeStampToken,E.asn1.cms.SignedData),E.asn1.tsp.TSTInfo=function(e){var l=Error,a=E,h=a.asn1,b=h.DERSequence,C=h.DERInteger,x=h.DERBoolean,_=h.DERGeneralizedTime,L=h.DERObjectIdentifier,V=h.DERTaggedObject,ht=h.tsp,gt=ht.MessageImprint,P=ht.Accuracy,I=h.x509.X500Name,ut=h.x509.GeneralName;if(ht.TSTInfo.superclass.constructor.call(this),this.dVersion=new C({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerial=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.tohex=function(){var T=[this.dVersion];if(this.dPolicy==null)throw new Error("policy shall be specified.");if(T.push(this.dPolicy),this.dMessageImprint==null)throw new Error("messageImprint shall be specified.");if(T.push(this.dMessageImprint),this.dSerial==null)throw new Error("serialNumber shall be specified.");if(T.push(this.dSerial),this.dGenTime==null)throw new Error("genTime shall be specified.");T.push(this.dGenTime),this.dAccuracy!=null&&T.push(this.dAccuracy),this.dOrdering!=null&&T.push(this.dOrdering),this.dNonce!=null&&T.push(this.dNonce),this.dTsa!=null&&T.push(this.dTsa);var at=new b({array:T});return this.hTLV=at.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0){if(typeof e.policy=="string"){if(!e.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new L({oid:e.policy})}e.messageImprint!==void 0&&(this.dMessageImprint=new gt(e.messageImprint)),e.serial!==void 0&&(this.dSerial=new C(e.serial)),e.genTime!==void 0&&(this.dGenTime=new _(e.genTime)),e.accuracy!==void 0&&(this.dAccuracy=new P(e.accuracy)),e.ordering!==void 0&&e.ordering==!0&&(this.dOrdering=new x),e.nonce!==void 0&&(this.dNonce=new C(e.nonce)),e.tsa!==void 0&&(this.dTsa=new V({tag:"a0",explicit:!0,obj:new ut({dn:e.tsa})}))}},Oe(E.asn1.tsp.TSTInfo,E.asn1.ASN1Object),E.asn1.tsp.Accuracy=function(e){var l=E,a=l.asn1,h=a.ASN1Util.newObject;a.tsp.Accuracy.superclass.constructor.call(this),this.params=null,this.tohex=function(){var b=this.params,C=[];return b.seconds!=null&&typeof b.seconds=="number"&&C.push({int:b.seconds}),b.millis!=null&&typeof b.millis=="number"&&C.push({tag:{tagi:"80",obj:{int:b.millis}}}),b.micros!=null&&typeof b.micros=="number"&&C.push({tag:{tagi:"81",obj:{int:b.micros}}}),h({seq:C}).tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)},Oe(E.asn1.tsp.Accuracy,E.asn1.ASN1Object),E.asn1.tsp.MessageImprint=function(e){var l=E,a=l.asn1,h=a.DERSequence,b=a.DEROctetString,C=a.x509,x=C.AlgorithmIdentifier;a.tsp.MessageImprint.superclass.constructor.call(this),this.params=null,this.tohex=function(){var _=this.params,L=new x({name:_.alg}),V=new b({hex:_.hash}),ht=new h({array:[L,V]});return ht.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)},Oe(E.asn1.tsp.MessageImprint,E.asn1.ASN1Object),E.asn1.tsp.TimeStampReq=function(e){var l=E,a=l.asn1,h=a.DERSequence,b=a.DERInteger,C=a.DERBoolean,x=a.ASN1Object,_=a.DERObjectIdentifier,L=a.tsp,V=L.MessageImprint;L.TimeStampReq.superclass.constructor.call(this),this.params=null,this.tohex=function(){var ht=this.params,gt=[];gt.push(new b({int:1})),ht.messageImprint instanceof E.asn1.ASN1Object?gt.push(ht.messageImprint):gt.push(new V(ht.messageImprint)),ht.policy!=null&&gt.push(new _(ht.policy)),ht.nonce!=null&&gt.push(new b(ht.nonce)),ht.certreq==!0&&gt.push(new C);var P=new h({array:gt});return P.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)},Oe(E.asn1.tsp.TimeStampReq,E.asn1.ASN1Object),E.asn1.tsp.TimeStampResp=function(e){var l=E,a=l.asn1,h=a.DERSequence,b=a.ASN1Object,C=a.tsp,x=C.PKIStatusInfo;C.TimeStampResp.superclass.constructor.call(this),this.params=null,this.tohex=function(){var _=this.params,L=[];if(_.econtent!=null||_.tst!=null)if(_.statusinfo!=null?L.push(new x(_.statusinfo)):L.push(new x("granted")),_.econtent!=null)L.push(new C.TimeStampToken(_).getContentInfo());else if(_.tst instanceof a.ASN1Object)L.push(_.tst);else throw new Error("improper member tst value");else if(_.statusinfo!=null)L.push(new x(_.statusinfo));else throw new Error("parameter for token nor statusinfo not specified");var V=new h({array:L});return V.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)},Oe(E.asn1.tsp.TimeStampResp,E.asn1.ASN1Object),E.asn1.tsp.PKIStatusInfo=function(e){var l=Error,a=E,h=a.asn1,b=h.DERSequence,C=h.tsp,x=C.PKIStatus,_=C.PKIFreeText,L=C.PKIFailureInfo;C.PKIStatusInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var V=this.params,ht=[];if(typeof V=="string")ht.push(new x(V));else{if(V.status==null)throw new l("property 'status' unspecified");ht.push(new x(V.status)),V.statusstr!=null&&ht.push(new _(V.statusstr)),V.failinfo!=null&&ht.push(new L(V.failinfo))}var gt=new b({array:ht});return gt.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)},Oe(E.asn1.tsp.PKIStatusInfo,E.asn1.ASN1Object),E.asn1.tsp.PKIStatus=function(e){var l=Error,a=E,h=a.asn1,b=h.DERInteger,C=h.tsp;C.PKIStatus.superclass.constructor.call(this);var x={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5};this.params=null,this.tohex=function(){var _=this.params,L,V;if(typeof _=="string")try{V=x[_]}catch{throw new l("undefined name: "+_)}else if(typeof _=="number")V=_;else throw new l("unsupported params");return new b({int:V}).tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)},Oe(E.asn1.tsp.PKIStatus,E.asn1.ASN1Object),E.asn1.tsp.PKIFreeText=function(e){var l=Error,a=E,h=a.asn1,b=h.DERSequence,C=h.DERUTF8String,x=h.tsp;x.PKIFreeText.superclass.constructor.call(this),this.params=null,this.tohex=function(){var _=this.params;if(!_ instanceof Array)throw new l("wrong params: not array");for(var L=[],V=0;V<_.length;V++)L.push(new C({str:_[V]}));var ht=new b({array:L});return ht.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)},Oe(E.asn1.tsp.PKIFreeText,E.asn1.ASN1Object),E.asn1.tsp.PKIFailureInfo=function(e){var l=Error,a=E,h=a.asn1,b=h.DERBitString,C=h.tsp,x=C.PKIFailureInfo,_={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25};x.superclass.constructor.call(this),this.params=null,this.getBinValue=function(){var L=this.params,V=0;if(typeof L=="number"&&0<=L&&L<=25){V|=1<<L;for(var ht=V.toString(2),gt="",P=ht.length-1;P>=0;P--)gt+=ht[P];return gt}else{if(typeof L=="string"&&_[L]!=null)return Ai([L],_);if(typeof L=="object"&&L.length!=null)return Ai(L,_);throw new l("wrong params")}},this.tohex=function(){var L=this.params,V=this.getBinValue();return new b({bin:V}).tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)},Oe(E.asn1.tsp.PKIFailureInfo,E.asn1.ASN1Object),E.asn1.tsp.AbstractTSAAdapter=function(e){this.getTSTHex=function(l,a){throw"not implemented yet"}},E.asn1.tsp.SimpleTSAAdapter=function(e){var l=E,a=l.asn1,h=a.tsp,b=l.crypto.Util.hashHex;h.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(C,x){var _=b(C,x);this.params.econtent.content.messageImprint={alg:x,hash:_},this.params.econtent.content.serial={int:this.serial++};var L=Math.floor(Math.random()*1e9);this.params.econtent.content.nonce={int:L};var V=new h.TimeStampToken(this.params);return V.getContentInfoEncodedHex()},e!==void 0&&(this.params=e)},Oe(E.asn1.tsp.SimpleTSAAdapter,E.asn1.tsp.AbstractTSAAdapter),E.asn1.tsp.FixedTSAAdapter=function(e){var l=E,a=l.asn1,h=a.tsp,b=l.crypto.Util.hashHex;h.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(C,x){var _=b(C,x);this.params.econtent.content.messageImprint={alg:x,hash:_};var L=new h.TimeStampToken(this.params);return L.getContentInfoEncodedHex()},e!==void 0&&(this.params=e)},Oe(E.asn1.tsp.FixedTSAAdapter,E.asn1.tsp.AbstractTSAAdapter),E.asn1.tsp.TSPUtil=new function(){},E.asn1.tsp.TSPUtil.newTimeStampToken=function(e){return new E.asn1.tsp.TimeStampToken(e)},E.asn1.tsp.TSPUtil.parseTimeStampReq=function(e){var l=new E.asn1.tsp.TSPParser;return l.getTimeStampReq(e)},E.asn1.tsp.TSPUtil.parseMessageImprint=function(e){var l=new E.asn1.tsp.TSPParser;return l.getMessageImprint(e)},E.asn1.tsp.TSPParser=function(){var e=Error,l=nr,a=new l,h=Ge,b=h.getV,C=h.getTLV,x=h.getIdxbyList,_=h.getTLVbyListEx,L=h.getChildIdx,V=["granted","grantedWithMods","rejection","waiting","revocationWarning","revocationNotification"],ht={0:"badAlg",2:"badRequest",5:"badDataFormat",14:"timeNotAvailable",15:"unacceptedPolicy",16:"unacceptedExtension",17:"addInfoNotAvailable",25:"systemFailure"};this.getResponse=function(gt){var P=L(gt,0);if(P.length==1)return this.getPKIStatusInfo(C(gt,P[0]));if(P.length>1){var I=this.getPKIStatusInfo(C(gt,P[0])),ut=C(gt,P[1]),T=this.getToken(ut);return T.statusinfo=I,T}},this.getToken=function(gt){var P=new E.asn1.cms.CMSParser,I=P.getCMSSignedData(gt);return this.setTSTInfo(I),I},this.setTSTInfo=function(gt){var P=gt.econtent;if(P.type=="tstinfo"){var I=P.content.hex,ut=this.getTSTInfo(I);P.content=ut}},this.getTSTInfo=function(gt){var P={},I=L(gt,0),ut=b(gt,I[1]);P.policy=me(ut);var T=C(gt,I[2]);P.messageImprint=this.getMessageImprint(T);var at=b(gt,I[3]);P.serial={hex:at};var Y=b(gt,I[4]);P.genTime={str:_r(Y)};var wt=0;if(I.length>5&&gt.substr(I[5],2)=="30"){var Tt=C(gt,I[5]);P.accuracy=this.getAccuracy(Tt),wt++}if(I.length>5+wt&&gt.substr(I[5+wt],2)=="01"){var Wt=b(gt,I[5+wt]);Wt=="ff"&&(P.ordering=!0),wt++}if(I.length>5+wt&&gt.substr(I[5+wt],2)=="02"){var Gt=b(gt,I[5+wt]);P.nonce={hex:Gt},wt++}if(I.length>5+wt&&gt.substr(I[5+wt],2)=="a0"){var ve=C(gt,I[5+wt]);ve="30"+ve.substr(2),pGeneralNames=a.getGeneralNames(ve);var be=pGeneralNames[0].dn;P.tsa=be,wt++}if(I.length>5+wt&&gt.substr(I[5+wt],2)=="a1"){var d=C(gt,I[5+wt]);d="30"+d.substr(2);var S=a.getExtParamArray(d);P.ext=S,wt++}return P},this.getAccuracy=function(gt){for(var P={},I=L(gt,0),ut=0;ut<I.length;ut++){var T=gt.substr(I[ut],2),at=b(gt,I[ut]),Y=parseInt(at,16);T=="02"?P.seconds=Y:T=="80"?P.millis=Y:T=="81"&&(P.micros=Y)}return P},this.getMessageImprint=function(gt){if(gt.substr(0,2)!="30")throw new Error("head of messageImprint hex shall be x30");var P={},I=L(gt,0),ut=x(gt,0,[0,0]),T=b(gt,ut),at=h.hextooidstr(T),Y=E.asn1.x509.OID.oid2name(at);if(Y=="")throw new Error("hashAlg name undefined: "+at);var wt=Y,Tt=x(gt,0,[1]);return P.alg=wt,P.hash=b(gt,Tt),P},this.getPKIStatusInfo=function(gt){var P={},I=L(gt,0),ut=0;try{var T=b(gt,I[0]),at=parseInt(T,16);P.status=V[at]}catch{}if(I.length>1&&gt.substr(I[1],2)=="30"){var Y=C(gt,I[1]);P.statusstr=this.getPKIFreeText(Y),ut++}if(I.length>ut&&gt.substr(I[1+ut],2)=="03"){var wt=C(gt,I[1+ut]);P.failinfo=this.getPKIFailureInfo(wt)}return P},this.getPKIFreeText=function(gt){for(var P=[],I=L(gt,0),ut=0;ut<I.length;ut++)P.push(h.getString(gt,I[ut]));return P},this.getPKIFailureInfo=function(gt){var P=h.getInt(gt,0);return ht[P]!=null?ht[P]:P},this.getTimeStampReq=function(gt){var P={};P.certreq=!1;var I=L(gt,0);if(I.length<2)throw new Error("TimeStampReq must have at least 2 items");var ut=C(gt,I[1]);P.messageImprint=E.asn1.tsp.TSPUtil.parseMessageImprint(ut);for(var T=2;T<I.length;T++){var at=I[T],Y=gt.substr(at,2);if(Y=="06"){var wt=b(gt,at);P.policy=h.hextooidstr(wt)}Y=="02"&&(P.nonce=b(gt,at)),Y=="01"&&(P.certreq=!0)}return P}},(typeof E>"u"||!E)&&(E={}),(typeof E.asn1>"u"||!E.asn1)&&(E.asn1={}),(typeof E.asn1.cades>"u"||!E.asn1.cades)&&(E.asn1.cades={}),E.asn1.cades.SignaturePolicyIdentifier=function(e){var l=E,a=l.asn1,h=a.cades,b=h.SignaturePolicyId;h.SignaturePolicyIdentifier.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.15",this.params=null,this.getValueArray=function(){return[new b(this.params)]},this.setByParam=function(C){this.params=C},e!=null&&this.setByParam(e)},Oe(E.asn1.cades.SignaturePolicyIdentifier,E.asn1.cms.Attribute),E.asn1.cades.SignaturePolicyId=function(e){var l=E,a=l.asn1,h=a.DERSequence,b=a.DERObjectIdentifier,C=a.x509,x=C.AlgorithmIdentifier,_=a.cades,L=_.SignaturePolicyId,V=_.OtherHashAlgAndValue;L.superclass.constructor.call(this),this.params=null,this.tohex=function(){var ht=this.params,gt=[];gt.push(new b(ht.oid)),gt.push(new V(ht));var P=new h({array:gt});return P.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(ht){this.params=ht},e!=null&&this.setByParam(e)},Oe(E.asn1.cades.SignaturePolicyId,E.asn1.ASN1Object),E.asn1.cades.OtherHashAlgAndValue=function(e){var l=Error,a=E,h=a.asn1,b=h.DERSequence,C=h.DEROctetString,x=h.x509,_=x.AlgorithmIdentifier,L=h.cades,V=L.OtherHashAlgAndValue;V.superclass.constructor.call(this),this.params=null,this.tohex=function(){var ht=this.params;if(ht.alg==null)throw new l("property 'alg' not specified");if(ht.hash==null&&ht.cert==null)throw new l("property 'hash' nor 'cert' not specified");var gt=null;if(ht.hash!=null)gt=ht.hash;else if(ht.cert!=null){if(typeof ht.cert!="string")throw new l("cert not string");var P=ht.cert;ht.cert.indexOf("-----BEGIN")!=-1&&(P=On(ht.cert)),gt=E.crypto.Util.hashHex(P,ht.alg)}var I=[];I.push(new _({name:ht.alg})),I.push(new C({hex:gt}));var ut=new b({array:I});return ut.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)},Oe(E.asn1.cades.OtherHashAlgAndValue,E.asn1.ASN1Object),E.asn1.cades.OtherHashValue=function(e){E.asn1.cades.OtherHashValue.superclass.constructor.call(this);var l=Error,a=E,h=a.lang.String.isHex,b=a.asn1,C=b.DEROctetString,x=a.crypto.Util.hashHex;this.params=null,this.tohex=function(){var _=this.params;if(_.hash==null&&_.cert==null)throw new l("hash or cert not specified");var L=null;if(_.hash!=null)L=_.hash;else if(_.cert!=null){if(typeof _.cert!="string")throw new l("cert not string");var V=_.cert;_.cert.indexOf("-----BEGIN")!=-1&&(V=On(_.cert)),L=E.crypto.Util.hashHex(V,"sha1")}return new C({hex:L}).tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)},Oe(E.asn1.cades.OtherHashValue,E.asn1.ASN1Object),E.asn1.cades.SignatureTimeStamp=function(e){var l=Error,a=E,h=a.lang.String.isHex,b=a.asn1,C=b.ASN1Object,x=b.x509,_=b.cades;_.SignatureTimeStamp.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.14",this.params=null,this.getValueArray=function(){var L=this.params;if(L.tst!=null)if(h(L.tst)){var V=new C;return V.hTLV=L.tst,[V]}else{if(L.tst instanceof C)return[L.tst];throw new l("params.tst has wrong value")}else if(L.res!=null){var ht=L.res;if(ht instanceof C&&(ht=ht.tohex()),typeof ht!="string"||!h(ht))throw new l("params.res has wrong value");var gt=Ge.getTLVbyList(ht,0,[1]),V=new C;return V.hTLV=L.tst,[V]}},e!=null&&this.setByParam(e)},Oe(E.asn1.cades.SignatureTimeStamp,E.asn1.cms.Attribute),E.asn1.cades.CompleteCertificateRefs=function(e){var l=Error,a=E,h=a.asn1,b=h.DERSequence,C=h.cades,x=C.OtherCertID,_=a.lang.String.isHex;C.CompleteCertificateRefs.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.21",this.params=null,this.getValueArray=function(){for(var L=this.params,V=[],ht=0;ht<L.array.length;ht++){var gt=L.array[ht];if(typeof gt=="string")if(gt.indexOf("-----BEGIN")!=-1)gt={cert:gt};else if(_(gt))gt={hash:gt};else throw new l("unsupported value: "+gt);L.alg!=null&&gt.alg==null&&(gt.alg=L.alg),L.hasis!=null&&gt.hasis==null&&(gt.hasis=L.hasis);var P=new x(gt);V.push(P)}var I=new b({array:V});return[I]},e!=null&&this.setByParam(e)},Oe(E.asn1.cades.CompleteCertificateRefs,E.asn1.cms.Attribute),E.asn1.cades.OtherCertID=function(e){var l=E,a=l.asn1,h=a.DERSequence,b=a.cms,C=b.IssuerSerial,x=a.cades,_=x.OtherHashValue,L=x.OtherHashAlgAndValue;x.OtherCertID.superclass.constructor.call(this),this.params=e,this.tohex=function(){var V=this.params;typeof V=="string"&&(V.indexOf("-----BEGIN")!=-1?V={cert:V}:_isHex(V)&&(V={hash:V}));var ht=[],gt=null;if(V.alg!=null?gt=new L(V):gt=new _(V),ht.push(gt),V.cert!=null&&V.hasis==!0||V.issuer!=null&&V.serial!=null){var P=new C(V);ht.push(P)}var I=new h({array:ht});return I.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)},Oe(E.asn1.cades.OtherCertID,E.asn1.ASN1Object),E.asn1.cades.OtherHash=function(e){var l=Error,a=E,h=a.asn1,b=h.cms,C=h.cades,x=C.OtherHashAlgAndValue,_=C.OtherHashValue,L=a.crypto.Util.hashHex,V=a.lang.String.isHex;C.OtherHash.superclass.constructor.call(this),this.params=null,this.tohex=function(){var ht=this.params;typeof ht=="string"&&(ht.indexOf("-----BEGIN")!=-1?ht={cert:ht}:V(ht)&&(ht={hash:ht}));var gt=null;return ht.alg!=null?gt=new x(ht):gt=new _(ht),gt.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)},Oe(E.asn1.cades.OtherHash,E.asn1.ASN1Object),E.asn1.cades.CAdESUtil=new function(){},E.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(e){var l=new E.asn1.cms.CMSParser,a=l.getCMSSignedData(e);return a},E.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(e,l,a){var h=Ge,b=h.getChildIdx,C=h.getTLV,x=h.getV,_=E,L=_.asn1,V=L.ASN1Object,ht=L.cms,gt=ht.AttributeList,P=ht.SignerInfo,I={},ut=b(e,l);if(ut.length!=6)throw"not supported items for SignerInfo (!=6)";var T=ut.shift();I.version=C(e,T);var at=ut.shift();I.si=C(e,at);var Y=ut.shift();I.digalg=C(e,Y);var wt=ut.shift();I.sattrs=C(e,wt);var Tt=ut.shift();I.sigalg=C(e,Tt);var Wt=ut.shift();I.sig=C(e,Wt),I.sigval=x(e,Wt);var Gt=null;return I.obj=new P,Gt=new V,Gt.hTLV=I.version,I.obj.dCMSVersion=Gt,Gt=new V,Gt.hTLV=I.si,I.obj.dSignerIdentifier=Gt,Gt=new V,Gt.hTLV=I.digalg,I.obj.dDigestAlgorithm=Gt,Gt=new V,Gt.hTLV=I.sattrs,I.obj.dSignedAttrs=Gt,Gt=new V,Gt.hTLV=I.sigalg,I.obj.dSigAlg=Gt,Gt=new V,Gt.hTLV=I.sig,I.obj.dSig=Gt,I.obj.dUnsignedAttrs=new gt,I},(typeof E.asn1.csr>"u"||!E.asn1.csr)&&(E.asn1.csr={}),E.asn1.csr.CertificationRequest=function(e){var l=E,a=l.asn1,h=a.DERBitString,b=a.DERSequence,C=a.csr,x=a.x509,_=C.CertificationRequestInfo;C.CertificationRequest.superclass.constructor.call(this),this.setByParam=function(L){this.params=L},this.sign=function(){var L=new _(this.params).tohex(),V=new E.crypto.Signature({alg:this.params.sigalg});V.init(this.params.sbjprvkey),V.updateHex(L);var ht=V.sign();this.params.sighex=ht},this.getPEM=function(){return $e(this.tohex(),"CERTIFICATE REQUEST")},this.tohex=function(){var L=this.params,V=new E.asn1.csr.CertificationRequestInfo(this.params),ht=new E.asn1.x509.AlgorithmIdentifier({name:L.sigalg});if(L.sighex==null&&L.sbjprvkey!=null&&this.sign(),L.sighex==null)throw new Error("sighex or sbjprvkey parameter not defined");var gt=new h({hex:"00"+L.sighex}),P=new b({array:[V,ht,gt]});return P.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)},Oe(E.asn1.csr.CertificationRequest,E.asn1.ASN1Object),E.asn1.csr.CertificationRequestInfo=function(e){var l=E,a=l.asn1,h=a.DERBitString,b=a.DERSequence,C=a.DERInteger,x=a.DERUTF8String,_=a.DERTaggedObject,L=a.ASN1Util.newObject,V=a.csr,ht=a.x509,gt=ht.X500Name,P=ht.Extensions,I=ht.SubjectPublicKeyInfo,ut=V.AttributeList;V.CertificationRequestInfo.superclass.constructor.call(this),this.params=null,this.setByParam=function(at){at!=null&&(this.params=at)},this.tohex=function(){var at=this.params,Y=[];if(Y.push(new C({int:0})),Y.push(new gt(at.subject)),Y.push(new I(Nr.getKey(at.sbjpubkey))),at.attrs!=null){var wt=T(at.attrs),Tt=L({tag:{tage:"a0",obj:wt}});Y.push(Tt)}else if(at.extreq!=null){var Wt=new P(at.extreq),Tt=L({tag:{tage:"a0",obj:{seq:[{oid:"1.2.840.113549.1.9.14"},{set:[Wt]}]}}});Y.push(Tt)}else Y.push(new _({tag:"a0",explicit:!1,obj:new x({str:""})}));var Gt=new b({array:Y});return Gt.tohex()},this.getEncodedHex=function(){return this.tohex()};function T(at){for(var Y=Error,wt=E.asn1.x509.Extensions,Tt=[],Wt=0;Wt<at.length;Wt++){var Gt=at[Wt],ve=Gt.attr;if(ve=="extensionRequest"){var be=new wt(Gt.ext),d={seq:[{oid:"1.2.840.113549.1.9.14"},{set:[be]}]};Tt.push(d)}else if(ve=="unstructuredName"){var d={seq:[{oid:"1.2.840.113549.1.9.2"},{set:Gt.names}]};Tt.push(d)}else if(ve=="challengePassword"){var d={seq:[{oid:"1.2.840.113549.1.9.7"},{set:[{utf8str:Gt.password}]}]};Tt.push(d)}else throw new Y("unknown CSR attribute")}return{set:Tt}}e!=null&&this.setByParam(e)},Oe(E.asn1.csr.CertificationRequestInfo,E.asn1.ASN1Object),E.asn1.csr.AttributeList=function(e){function l(a){}},Oe(E.asn1.csr.AttributeList,E.asn1.ASN1Object),E.asn1.csr.CSRUtil=new function(){},E.asn1.csr.CSRUtil.newCSRPEM=function(e){var l=Nr,a=E.asn1.csr,h=new a.CertificationRequest(e),b=h.getPEM();return b},E.asn1.csr.CSRUtil.getParam=function(e,l){var a=Ge,h=a.getV,b=a.getIdxbyList,C=a.getTLVbyList,x=a.getTLVbyListEx,_=a.getVbyListEx,L=function(wt){var Tt=b(wt,0,[0,3,0,0],"06");return h(wt,Tt)!="2a864886f70d01090e"?null:C(wt,0,[0,3,0,1,0],"30")},V={};if(e.indexOf("-----BEGIN CERTIFICATE REQUEST")==-1)throw new Error("argument is not PEM file");var ht=On(e,"CERTIFICATE REQUEST");l&&(V.tbs=C(ht,0,[0]));try{var gt=x(ht,0,[0,1]);if(gt=="3000")V.subject={};else{var T=new nr;V.subject=T.getX500Name(gt)}}catch{}var P=x(ht,0,[0,2]),I=Nr.getKey(P,null,"pkcs8pub");V.sbjpubkey=Nr.getPEM(I,"PKCS8PUB");var ut=L(ht),T=new nr;ut!=null&&(V.extreq=T.getExtParamArray(ut));try{var at=x(ht,0,[1],"30"),T=new nr;V.sigalg=T.getAlgorithmIdentifierName(at)}catch{}try{var Y=_(ht,0,[2]);V.sighex=Y}catch{}return V},E.asn1.csr.CSRUtil.verifySignature=function(e){try{var l=null;if(typeof e=="string"&&e.indexOf("-----BEGIN CERTIFICATE REQUEST")!=-1?l=E.asn1.csr.CSRUtil.getParam(e,!0):typeof e=="object"&&e.sbjpubkey!=null&&e.sigalg!=null&&e.sighex!=null&&e.tbs!=null&&(l=e),l==null)return!1;var a=new E.crypto.Signature({alg:l.sigalg});return a.init(l.sbjpubkey),a.updateHex(l.tbs),a.verify(l.sighex)}catch(h){return alert(h),!1}},(typeof E>"u"||!E)&&(E={}),(typeof E.asn1>"u"||!E.asn1)&&(E.asn1={}),(typeof E.asn1.ocsp>"u"||!E.asn1.ocsp)&&(E.asn1.ocsp={}),E.asn1.ocsp.DEFAULT_HASH="sha1",E.asn1.ocsp.OCSPResponse=function(e){E.asn1.ocsp.OCSPResponse.superclass.constructor.call(this);var l=E.asn1.DEREnumerated,a=E.asn1.ASN1Util.newObject,h=E.asn1.ocsp.ResponseBytes,b=["successful","malformedRequest","internalError","tryLater","_not_used_","sigRequired","unauthorized"];this.params=null,this._getStatusCode=function(){var C=this.params.resstatus;return typeof C=="number"?C:typeof C!="string"?-1:b.indexOf(C)},this.setByParam=function(C){this.params=C},this.tohex=function(){var C=this.params,x=this._getStatusCode();if(x==-1)throw new Error("responseStatus not supported: "+C.resstatus);if(x!=0)return a({seq:[{enum:{int:x}}]}).tohex();var _=new h(C);return a({seq:[{enum:{int:0}},{tag:{tag:"a0",explicit:!0,obj:_}}]}).tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)},Oe(E.asn1.ocsp.OCSPResponse,E.asn1.ASN1Object),E.asn1.ocsp.ResponseBytes=function(e){E.asn1.ocsp.ResponseBytes.superclass.constructor.call(this);var l=E.asn1,a=l.DERSequence,h=l.DERObjectIdentifier,b=l.DEROctetString,C=l.ocsp.BasicOCSPResponse;this.params=null,this.setByParam=function(x){this.params=x},this.tohex=function(){var x=this.params;if(x.restype!="ocspBasic")throw new Error("not supported responseType: "+x.restype);var _=new C(x),L=[];L.push(new h({name:"ocspBasic"})),L.push(new b({hex:_.tohex()}));var V=new a({array:L});return V.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)},Oe(E.asn1.ocsp.ResponseBytes,E.asn1.ASN1Object),E.asn1.ocsp.BasicOCSPResponse=function(e){E.asn1.ocsp.BasicOCSPResponse.superclass.constructor.call(this);var l=Error,a=E.asn1,h=a.ASN1Object,b=a.DERSequence,C=a.DERGeneralizedTime,x=a.DERTaggedObject,_=a.DERBitString,L=a.x509.Extensions,V=a.x509.AlgorithmIdentifier,ht=a.ocsp,gt=ht.ResponderID;_SingleResponseList=ht.SingleResponseList,_ResponseData=ht.ResponseData,this.params=null,this.setByParam=function(P){this.params=P},this.sign=function(){var P=this.params,I=P.tbsresp.tohex(),ut=new E.crypto.Signature({alg:P.sigalg});ut.init(P.reskey),ut.updateHex(I),P.sighex=ut.sign()},this.tohex=function(){var P=this.params;P.tbsresp==null&&(P.tbsresp=new _ResponseData(P)),P.sighex==null&&P.reskey!=null&&this.sign();var I=[];if(I.push(P.tbsresp),I.push(new V({name:P.sigalg})),I.push(new _({hex:"00"+P.sighex})),P.certs!=null&&P.certs.length!=null){for(var ut=[],T=0;T<P.certs.length;T++){var at=P.certs[T],Y=null;if(Ge.isASN1HEX(at))Y=at;else if(at.match(/-----BEGIN/))Y=On(at);else throw new l("certs["+T+"] not hex or PEM");ut.push(new h({tlv:Y}))}var wt=new b({array:ut});I.push(new x({tag:"a0",explicit:!0,obj:wt}))}var Tt=new b({array:I});return Tt.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)},Oe(E.asn1.ocsp.BasicOCSPResponse,E.asn1.ASN1Object),E.asn1.ocsp.ResponseData=function(e){E.asn1.ocsp.ResponseData.superclass.constructor.call(this);var l=Error,a=E.asn1,h=a.DERSequence,b=a.DERGeneralizedTime,C=a.DERTaggedObject,x=a.x509.Extensions,_=a.ocsp,L=_.ResponderID;_SingleResponseList=_.SingleResponseList,this.params=null,this.tohex=function(){var V=this.params;V.respid!=null&&new l("respid not specified"),V.prodat!=null&&new l("prodat not specified"),V.array!=null&&new l("array not specified");var ht=[];if(ht.push(new L(V.respid)),ht.push(new b(V.prodat)),ht.push(new _SingleResponseList(V.array)),V.ext!=null){var gt=new x(V.ext);ht.push(new C({tag:"a1",explicit:!0,obj:gt}))}var P=new h({array:ht});return P.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(V){this.params=V},e!==void 0&&this.setByParam(e)},Oe(E.asn1.ocsp.ResponseData,E.asn1.ASN1Object),E.asn1.ocsp.ResponderID=function(e){E.asn1.ocsp.ResponderID.superclass.constructor.call(this);var l=E,a=l.asn1,h=a.ASN1Util.newObject,b=a.x509.X500Name,C=l.lang.String.isHex,x=Error;this.params=null,this.tohex=function(){var _=this.params;if(_.key!=null){var L=null;if(typeof _.key=="string"){if(C(_.key)&&(L=_.key),_.key.match(/-----BEGIN CERTIFICATE/)){var V=new nr(_.key),ht=V.getExtSubjectKeyIdentifier();ht!=null&&(L=ht.kid.hex)}}else if(_.key instanceof nr){var ht=_.key.getExtSubjectKeyIdentifier();ht!=null&&(L=ht.kid.hex)}if(L==null)throw new x("wrong key member value");var gt=h({tag:{tag:"a2",explicit:!0,obj:{octstr:{hex:L}}}});return gt.tohex()}else if(_.name!=null){var P=null;if(typeof _.name=="string"&&_.name.match(/-----BEGIN CERTIFICATE/)){var V=new nr(_.name);P=V.getSubject()}else _.name instanceof nr?P=_.name.getSubject():typeof _.name=="object"&&(_.name.array!=null||_.name.str!=null)&&(P=_.name);if(P==null)throw new x("wrong name member value");var gt=h({tag:{tag:"a1",explicit:!0,obj:new b(P)}});return gt.tohex()}throw new x("key or name not specified")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(_){this.params=_},e!==void 0&&this.setByParam(e)},Oe(E.asn1.ocsp.ResponderID,E.asn1.ASN1Object),E.asn1.ocsp.SingleResponseList=function(e){E.asn1.ocsp.SingleResponseList.superclass.constructor.call(this);var l=E.asn1,a=l.DERSequence,h=l.ocsp.SingleResponse;this.params=null,this.tohex=function(){var b=this.params;if(typeof b!="object"||b.length==null)throw new Error("params not specified properly");for(var C=[],x=0;x<b.length;x++)C.push(new h(b[x]));var _=new a({array:C});return _.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(b){this.params=b},e!==void 0&&this.setByParam(e)},Oe(E.asn1.ocsp.SingleResponseList,E.asn1.ASN1Object),E.asn1.ocsp.SingleResponse=function(e){var l=Error,a=E,h=a.asn1,b=h.DERSequence,C=h.DERGeneralizedTime,x=h.DERTaggedObject,_=h.ocsp,L=_.CertID,V=_.CertStatus,ht=h.x509,gt=ht.Extensions;_.SingleResponse.superclass.constructor.call(this),this.params=null,this.tohex=function(){var P=this.params,I=[];if(P.certid==null)throw new l("certid unspecified");if(P.status==null)throw new l("status unspecified");if(P.thisupdate==null)throw new l("thisupdate unspecified");if(I.push(new L(P.certid)),I.push(new V(P.status)),I.push(new C(P.thisupdate)),P.nextupdate!=null){var ut=new C(P.nextupdate);I.push(new x({tag:"a0",explicit:!0,obj:ut}))}if(P.ext!=null){var T=new gt(P.ext);I.push(new x({tag:"a1",explicit:!0,obj:T}))}var at=new b({array:I});return at.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(P){this.params=P},e!==void 0&&this.setByParam(e)},Oe(E.asn1.ocsp.SingleResponse,E.asn1.ASN1Object),E.asn1.ocsp.CertID=function(e){var l=E,a=l.asn1,h=a.DEROctetString,b=a.DERInteger,C=a.DERSequence,x=a.x509,_=x.AlgorithmIdentifier,L=a.ocsp,V=L.DEFAULT_HASH,ht=l.crypto,gt=ht.Util.hashHex,P=nr,I=Ge,ut=I.getVbyList;L.CertID.superclass.constructor.call(this),this.DEFAULT_HASH="sha1",this.params=null,this.setByValue=function(T,at,Y,wt){wt==null&&(wt=this.DEFAULT_HASH),this.params={alg:wt,issname:T,isskey:at,sbjsn:Y}},this.setByCert=function(T,at,Y){Y==null&&(Y=this.DEFAULT_HASH),this.params={alg:Y,issuerCert:T,subjectCert:at}},this.getParamByCerts=function(T,at,Y){Y==null&&(Y=this.DEFAULT_HASH);var wt=new P(T),Tt=new P(at),Wt=gt(wt.getSubjectHex(),Y),Gt=wt.getPublicKeyHex(),ve=gt(ut(Gt,0,[1],"03",!0),Y),be=Tt.getSerialNumberHex(),d={alg:Y,issname:Wt,isskey:ve,sbjsn:be};return d},this.tohex=function(){if(typeof this.params!="object")throw new Error("params not set");var T=this.params,at,Y,wt,Tt;if(T.alg==null?Tt=this.DEFAULT_HASH:Tt=T.alg,T.issuerCert!=null&&T.subjectCert!=null){var Wt=this.getParamByCerts(T.issuerCert,T.subjectCert,Tt);at=Wt.issname,Y=Wt.isskey,wt=Wt.sbjsn}else if(T.issname!=null&&T.isskey!=null&&T.sbjsn!=null)at=T.issname,Y=T.isskey,wt=T.sbjsn;else throw new Error("required param members not defined");var Gt=new _({name:Tt}),ve=new h({hex:at}),be=new h({hex:Y}),d=new b({hex:wt}),S=new C({array:[Gt,ve,be,d]});return this.hTLV=S.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)},Oe(E.asn1.ocsp.CertID,E.asn1.ASN1Object),E.asn1.ocsp.CertStatus=function(e){E.asn1.ocsp.CertStatus.superclass.constructor.call(this),this.params=null,this.tohex=function(){var l=this.params;if(l.status=="good")return"8000";if(l.status=="unknown")return"8200";if(l.status=="revoked"){var a=[{gentime:{str:l.time}}];l.reason!=null&&a.push({tag:{tag:"a0",explicit:!0,obj:{enum:{int:l.reason}}}});var h={tag:"a1",explicit:!1,obj:{seq:a}};return E.asn1.ASN1Util.newObject({tag:h}).tohex()}throw new Error("bad status")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(l){this.params=l},e!==void 0&&this.setByParam(e)},Oe(E.asn1.ocsp.CertStatus,E.asn1.ASN1Object),E.asn1.ocsp.Request=function(e){var l=E,a=l.asn1,h=a.DERSequence,b=a.ocsp;if(b.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.tohex=function(){var x=[];if(this.dReqCert===null)throw"reqCert not set";x.push(this.dReqCert);var _=new h({array:x});return this.hTLV=_.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},typeof e<"u"){var C=new b.CertID(e);this.dReqCert=C}},Oe(E.asn1.ocsp.Request,E.asn1.ASN1Object),E.asn1.ocsp.TBSRequest=function(e){var l=E,a=l.asn1,h=a.DERSequence,b=a.ocsp;b.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(C){for(var x=[],_=0;_<C.length;_++){var L=new b.Request(C[0]);x.push(L)}this.dRequestList=x},this.tohex=function(){var C=[];if(this.version!==0)throw"not supported version: "+this.version;if(this.dRequestorName!==null)throw"requestorName not supported";var x=new h({array:this.dRequestList});if(C.push(x),this.dRequestExt!==null)throw"requestExtensions not supported";var _=new h({array:C});return this.hTLV=_.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&e.reqList!==void 0&&this.setRequestListByParam(e.reqList)},Oe(E.asn1.ocsp.TBSRequest,E.asn1.ASN1Object),E.asn1.ocsp.OCSPRequest=function(e){var l=E,a=l.asn1,h=a.DERSequence,b=a.ocsp;if(b.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.tohex=function(){var x=[];if(this.dTbsRequest!==null)x.push(this.dTbsRequest);else throw"tbsRequest not set";if(this.dOptionalSignature!==null)throw"optionalSignature not supported";var _=new h({array:x});return this.hTLV=_.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&e.reqList!==void 0){var C=new b.TBSRequest(e);this.dTbsRequest=C}},Oe(E.asn1.ocsp.OCSPRequest,E.asn1.ASN1Object),E.asn1.ocsp.OCSPUtil={},E.asn1.ocsp.OCSPUtil.getRequestHex=function(e,l,a){var h=E,b=h.asn1,C=b.ocsp;a===void 0&&(a=C.DEFAULT_HASH);var x={alg:a,issuerCert:e,subjectCert:l},_=new C.OCSPRequest({reqList:[x]});return _.tohex()},E.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(e){var l=Ge,a=l.getVbyList,h=l.getVbyListEx,b=l.getIdxbyList,C=l.getIdxbyListEx,x=l.getV,_={};try{var L=h(e,0,[0],"0a");_.responseStatus=parseInt(L,16)}catch{}if(_.responseStatus!==0)return _;try{var V=b(e,0,[1,0,1,0,0,2,0,1]);e.substr(V,2)==="80"?_.certStatus="good":e.substr(V,2)==="a1"?(_.certStatus="revoked",_.revocationTime=_r(a(e,V,[0]))):e.substr(V,2)==="82"&&(_.certStatus="unknown")}catch{}try{var ht=b(e,0,[1,0,1,0,0,2,0,2]);_.thisUpdate=_r(x(e,ht))}catch{}try{var gt=b(e,0,[1,0,1,0,0,2,0,3]);e.substr(gt,2)==="a0"&&(_.nextUpdate=_r(a(e,gt,[0])))}catch{}return _},E.asn1.ocsp.OCSPParser=function(){var e=Error,l=nr,a=new l,h=Ge,b=h.getV,C=h.getTLV,x=h.getIdxbyList,_=h.getVbyList,L=h.getTLVbyList,V=h.getVbyListEx,ht=h.getTLVbyListEx,gt=h.getChildIdx;this.getOCSPRequest=function(P){var I=gt(P,0);if(I.length!=1&&I.length!=2)throw new e("wrong number elements: "+I.length);var ut=this.getTBSRequest(C(P,I[0]));return ut},this.getTBSRequest=function(P){var I={},ut=ht(P,0,[0],"30");I.array=this.getRequestList(ut);var T=ht(P,0,["[2]",0],"30");return T!=null&&(I.ext=a.getExtParamArray(T)),I},this.getRequestList=function(P){for(var I=[],ut=gt(P,0),T=0;T<ut.length;T++){var P=C(P,ut[T]);I.push(this.getRequest(P))}return I},this.getRequest=function(P){var I=gt(P,0);if(I.length!=1&&I.length!=2)throw new e("wrong number elements: "+I.length);var ut=this.getCertID(C(P,I[0]));if(I.length==2){var T=x(P,0,[1,0]);ut.ext=a.getExtParamArray(C(P,T))}return ut},this.getCertID=function(P){var I=gt(P,0);if(I.length!=4)throw new e("wrong number elements: "+I.length);var ut=new l,T={};return T.alg=ut.getAlgorithmIdentifierName(C(P,I[0])),T.issname=b(P,I[1]),T.isskey=b(P,I[2]),T.sbjsn=b(P,I[3]),T},this.getOCSPResponse=function(P){var I=gt(P,0),ut,T=b(P,I[0]),at=parseInt(T);if(I.length==1)return{resstatus:at};var Y=L(P,0,[1,0]);return ut=this.getResponseBytes(Y),ut.resstatus=at,ut},this.getResponseBytes=function(P){var I=gt(P,0),ut,T=L(P,0,[1,0]);ut=this.getBasicOCSPResponse(T);var at=b(P,I[0]);return ut.restype=E.asn1.x509.OID.oid2name(me(at)),ut},this.getBasicOCSPResponse=function(P){var I=gt(P,0),ut;ut=this.getResponseData(C(P,I[0]));var T=new nr;ut.alg=T.getAlgorithmIdentifierName(C(P,I[1]));var at=b(P,I[2]);ut.sighex=at.substr(2);var Y=V(P,0,["[0]"]);if(Y!=null){for(var wt=gt(Y,0),Tt=[],Wt=0;Wt<wt.length;Wt++){var Gt=C(Y,wt[Wt]);Tt.push(Gt)}ut.certs=Tt}return ut},this.getResponseData=function(P){var I=gt(P,0),ut=I.length,T={},at=0;P.substr(I[0],2)=="a0"&&at++,T.respid=this.getResponderID(C(P,I[at++]));var Y=b(P,I[at++]);if(T.prodat=_r(Y),T.array=this.getSingleResponseList(C(P,I[at++])),P.substr(I[ut-1],2)=="a1"){var wt=L(P,I[ut-1],[0]),Tt=new nr;T.ext=Tt.getExtParamArray(wt)}return T},this.getResponderID=function(P){var I={};if(P.substr(0,2)=="a2"){var ut=_(P,0,[0]);I.key=ut}if(P.substr(0,2)=="a1"){var T=L(P,0,[0]),at=new nr;I.name=at.getX500Name(T)}return I},this.getSingleResponseList=function(P){for(var I=gt(P,0),ut=[],T=0;T<I.length;T++){var at=this.getSingleResponse(C(P,I[T]));ut.push(at)}return ut},this.getSingleResponse=function(P){var I=gt(P,0),ut={},T=this.getCertID(C(P,I[0]));ut.certid=T;var at=this.getCertStatus(C(P,I[1]));if(ut.status=at,P.substr(I[2],2)=="18"){var Y=b(P,I[2]);ut.thisupdate=_r(Y)}for(var wt=3;wt<I.length;wt++){if(P.substr(I[wt],2)=="a0"){var Tt=_(P,I[wt],[0],"18");ut.nextupdate=_r(Tt)}if(P.substr(I[wt],2)=="a1"){var Wt=new nr,Gt=L(P,0,[wt,0]);ut.ext=Wt.getExtParamArray(Gt)}}return ut},this.getCertStatus=function(P){var I={};if(P=="8000")return{status:"good"};if(P=="8200")return{status:"unknown"};if(P.substr(0,2)=="a1"){I.status="revoked";var ut=_(P,0,[0]),T=_r(ut);I.time=T}return I}};var E;(typeof E>"u"||!E)&&(E={}),(typeof E.lang>"u"||!E.lang)&&(E.lang={}),E.lang.String=function(){};function Du(e){for(var l=new Array,a=0;a<e.length;a++)l[a]=e.charCodeAt(a);return l}function Zs(e){for(var l="",a=0;a<e.length;a++)l=l+String.fromCharCode(e[a]);return l}function Ei(e){for(var l="",a=0;a<e.length;a++){var h=e[a].toString(16);h.length==1&&(h="0"+h),l=l+h}return l}function cs(e){return Ei(Du(e))}function Pn(e){return A(cs(e))}function li(e){return Rr(A(cs(e)))}function lt(e){return Zs(D(Ks(e)))}function Rr(e){return e=e.replace(/\=/g,""),e=e.replace(/\+/g,"-"),e=e.replace(/\//g,"_"),e}function Ks(e){return e.length%4==2?e=e+"==":e.length%4==3&&(e=e+"="),e=e.replace(/-/g,"+"),e=e.replace(/_/g,"/"),e}function An(e){return e.length%2==1&&(e="0"+e),Rr(A(e))}function Dn(e){return y(Ks(e))}var we,ms;typeof Buffer=="function"?(we=function(e){return Rr(Buffer.from(e,"utf8").toString("base64"))},ms=function(e){return Buffer.from(Ks(e),"base64").toString("utf8")}):(we=function(e){return An(hu(ti(e)))},ms=function(e){return decodeURIComponent(Wi(Dn(e)))});function pu(e){return A(hu(ti(e)))}function zi(e){return decodeURIComponent(Wi(y(e)))}function xu(e){return hu(ti(e)).toLowerCase()}function _r(e){try{return decodeURIComponent(Wi(e))}catch{return null}}function xo(e){return _r(Ji(e))}function Ji(e){for(var l=e.match(/.{1,2}/g),a=[],h=0;h<l.length;h++){var b=parseInt(l[h],16);161<=b&&b<=191?(a.push("c2"),a.push(l[h])):192<=b&&b<=255?(a.push("c3"),a.push((b-64).toString(16))):a.push(l[h])}return a.join("")}function gr(e){for(var l="",a=0;a<e.length-1;a+=2)l+=String.fromCharCode(parseInt(e.substr(a,2),16));return l}function kn(e){for(var l="",a=0;a<e.length;a++)l+=("0"+e.charCodeAt(a).toString(16)).slice(-2);return l}function _u(e){return A(e)}function Bu(e){return ys(_u(e),64)}function ys(e,l){return e=e.replace(new RegExp("(.{"+l+"})","g"),`$1\r
`),e=e.replace(/\s+$/,""),e}function Iu(e){var l=e.replace(/[^0-9A-Za-z\/+=]*/g,""),a=y(l);return a}function Ri(e,l){return"-----BEGIN "+l+`-----\r
`+ys(e,64)+`\r
-----END `+l+`-----\r
`}function $e(e,l){return"-----BEGIN "+l+`-----\r
`+ys(_u(e),64)+`\r
-----END `+l+`-----\r
`}function On(e,l){if(e.indexOf("-----BEGIN ")==-1)throw new Error("can't find PEM header");return l!==void 0?(e=e.replace(new RegExp("^[^]*-----BEGIN "+l+"-----"),""),e=e.replace(new RegExp("-----END "+l+"-----[^]*$"),"")):(e=e.replace(/^[^]*-----BEGIN [^-]+-----/,""),e=e.replace(/-----END [^-]+-----[^]*$/,"")),Iu(e)}function $i(e){return e.indexOf("-----BEGIN ")==-1||e.indexOf("-----END ")==-1?null:(e=e.replace(/^[\s\S]*?-----BEGIN [^-]+-----/m,""),e=e.replace(/-----END [\s\S]+$/m,""),e=e.replace(/\s+/g,""),e.match(/^[0-9a-zA-Z+/=]+$/)?e:null)}function Ru(e){if(e.length%2!=0)throw"input is not even length";if(e.match(/^[0-9A-Fa-f]+$/)==null)throw"input is not hexadecimal";for(var l=new ArrayBuffer(e.length/2),a=new DataView(l),h=0;h<e.length/2;h++)a.setUint8(h,parseInt(e.substr(h*2,2),16));return l}function io(e){for(var l="",a=new DataView(e),h=0;h<e.byteLength;h++)l+=("00"+a.getUint8(h).toString(16)).slice(-2);return l}function $u(e){var l,a,h,b,C,x,_,L,V,ht,gt,P;if(e=Qs(e),P=e.match(/^(\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/),P)return l=parseInt(P[1]),a=parseInt(P[2])-1,h=parseInt(P[3]),b=parseInt(P[4]),C=parseInt(P[5]),x=parseInt(P[6]),_=0,ht=P[7],ht!==""&&(gt=(ht.substr(1)+"00").substr(0,3),_=parseInt(gt)),Date.UTC(l,a,h,b,C,x,_);throw new Error("unsupported zulu format: "+e)}function uo(e){var l=new Date(e),a=("0000"+l.getUTCFullYear()).slice(-4),h=("00"+(l.getUTCMonth()+1)).slice(-2),b=("00"+l.getUTCDate()).slice(-2),C=("00"+l.getUTCHours()).slice(-2),x=("00"+l.getUTCMinutes()).slice(-2),_=("00"+l.getUTCSeconds()).slice(-2),L=("000"+l.getUTCMilliseconds()).slice(-3);return L=L.replace(/0+$/,""),L=L!=""?"."+L:L,a+h+b+C+x+_+L+"Z"}function ku(e){return Math.round($u(e)/1e3)}function Ou(e){return new Date($u(e))}function _o(e,l,a){var h,b=e.getUTCFullYear();if(l){if(b<1950||2049<b)throw"not proper year for UTCTime: "+b;h=(""+b).slice(-2)}else h=("000"+b).slice(-4);if(h+=("0"+(e.getUTCMonth()+1)).slice(-2),h+=("0"+e.getUTCDate()).slice(-2),h+=("0"+e.getUTCHours()).slice(-2),h+=("0"+e.getUTCMinutes()).slice(-2),h+=("0"+e.getUTCSeconds()).slice(-2),a){var C=e.getUTCMilliseconds();C!==0&&(C=("00"+C).slice(-3),C=C.replace(/0+$/g,""),h+="."+C)}return h+="Z",h}function Qs(e){return e.match(/^[0-9]{12}Z$/)||e.match(/^[0-9]{12}[.][0-9]*Z$/)?e.match(/^[0-4]/)?"20"+e:"19"+e:e}function hu(e){return e.replace(/%/g,"")}function Wi(e){return e.replace(/(..)/g,"%$1")}function vi(e){var l="malformed IPv6 address";if(!e.match(/^[0-9A-Fa-f:]+$/))throw l;e=e.toLowerCase();var a=e.split(":").length-1;if(a<2)throw l;var h=":".repeat(7-a+2);e=e.replace("::",h);var b=e.split(":");if(b.length!=8)throw l;for(var C=0;C<8;C++)b[C]=("0000"+b[C]).slice(-4);return b.join("")}function fu(e){if(!e.match(/^[0-9A-Fa-f]{32}$/))throw new Error("malformed IPv6 address: "+e);e=e.toLowerCase();var l=e.match(/.{1,4}/g);l=l.map(function(b){return b.replace(/^0+/,"")}),l=l.map(function(b){return b==""?"0":b}),e=":"+l.join(":")+":";var a=e.match(/:(0:){2,}/g);if(a==null)return e.slice(1,-1);var h=a.sort().slice(-1)[0];return e=e.replace(h.substr(0,h.length-1),":"),e.substr(0,2)!="::"&&(e=e.substr(1)),e.substr(-2,2)!="::"&&(e=e.substr(0,e.length-1)),e}function Rs(e){var l=new Error("malformed hex value");if(!e.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw l;if(e.length==8){var a;try{return a=parseInt(e.substr(0,2),16)+"."+parseInt(e.substr(2,2),16)+"."+parseInt(e.substr(4,2),16)+"."+parseInt(e.substr(6,2),16),a}catch{throw l}}else if(e.length==16)try{return Rs(e.substr(0,8))+"/"+Yi(e.substr(8))}catch{throw l}else{if(e.length==32)return fu(e);if(e.length==64){try{return fu(e.substr(0,32))+"/"+Yi(e.substr(32))}catch{throw l}return}else return e}}function Yi(e){var l=new Error("malformed mask"),a;try{a=new w(e,16).toString(2)}catch{throw l}if(!a.match(/^1*0*$/))throw l;return a.replace(/0+$/,"").length}function du(e){var l=new Error("malformed IP address");if(e=e.toLowerCase(e),!e.match(/^[0-9a-f.:/]+$/))throw l;if(e.match(/^[0-9.]+$/)){var a=e.split(".");if(a.length!==4)throw l;var h="";try{for(var b=0;b<4;b++){var C=parseInt(a[b]);h+=("0"+C.toString(16)).slice(-2)}return h}catch{throw l}}else if(e.match(/^[0-9.]+\/[0-9]+$/)){var x=e.split("/");return du(x[0])+oo(parseInt(x[1]),32)}else{if(e.match(/^[0-9a-f:]+$/)&&e.indexOf(":")!==-1)return vi(e);if(e.match(/^[0-9a-f:]+\/[0-9]+$/)&&e.indexOf(":")!==-1){var x=e.split("/");return vi(x[0])+oo(parseInt(x[1]),128)}else throw l}}function oo(e,l){if(l==32&&e==0)return"00000000";if(l==128&&e==0)return"00000000000000000000000000000000";var a=Array(e+1).join("1")+Array(l-e+1).join("0");return new w(a,2).toString(16)}function Pu(e){function l(b){var C=parseInt(b.substr(0,2),16),x=parseInt(b.substr(2),16);if(C==0&x<128)return String.fromCharCode(x);if(C<8){var _=192|(C&7)<<3|(x&192)>>6,L=128|x&63;return _r(_.toString(16)+L.toString(16))}var _=224|(C&240)>>4,L=128|(C&15)<<2|(x&192)>>6,V=128|x&63;return _r(_.toString(16)+L.toString(16)+V.toString(16))}var a=e.match(/.{4}/g),h=a.map(l);return h.join("")}function ti(e){for(var l=encodeURIComponent(e),a="",h=0;h<l.length;h++)l[h]=="%"?(a=a+l.substr(h,3),h=h+2):a=a+"%"+cs(l[h]);return a}function Tn(e){return e=e.replace(/\r\n/mg,`
`),e}function Xi(e){return e=e.replace(/\r\n/mg,`
`),e=e.replace(/\n/mg,`\r
`),e}E.lang.String.isInteger=function(e){return e.match(/^[0-9]+$/)?!0:!!e.match(/^-[0-9]+$/)},E.lang.String.isHex=function(e){return ei(e)};function ei(e){return!!(e.length%2==0&&(e.match(/^[0-9a-f]+$/)||e.match(/^[0-9A-F]+$/)))}E.lang.String.isBase64=function(e){return e=e.replace(/\s+/g,""),!!(e.match(/^[0-9A-Za-z+\/]+={0,3}$/)&&e.length%4==0)},E.lang.String.isBase64URL=function(e){return e.match(/[+/=]/)?!1:(e=Ks(e),E.lang.String.isBase64(e))};function ki(e){return!!e.match(/^[0-9A-Za-z-_.]+$/)}E.lang.String.isIntegerArray=function(e){return e=e.replace(/\s+/g,""),!!e.match(/^\[[0-9,]+\]$/)},E.lang.String.isPrintable=function(e){return e.match(/^[0-9A-Za-z '()+,-./:=?]*$/)!==null},E.lang.String.isIA5=function(e){return e.match(/^[\x20-\x21\x23-\x7f]*$/)!==null},E.lang.String.isMail=function(e){return e.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};function gu(e){return e.length%2==1?"0"+e:e.substr(0,1)>"7"?"00"+e:e}function Bo(e){e=e.replace(/^\s*\[\s*/,""),e=e.replace(/\s*\]\s*$/,""),e=e.replace(/\s*/g,"");try{var l=e.split(/,/).map(function(a,h,b){var C=parseInt(a);if(C<0||255<C)throw"integer not in range 0-255";var x=("00"+C.toString(16)).slice(-2);return x}).join("");return l}catch(a){throw"malformed integer array string: "+a}}var ao=function(e,l){var a=e.length;e.length>l.length&&(a=l.length);for(var h=0;h<a;h++)if(e.charCodeAt(h)!=l.charCodeAt(h))return h;return e.length!=l.length?a:-1};function zs(e){var l=function(_){var L=_.toString(16);return L.length==1&&(L="0"+L),L},a=function(_){var L="",V=parseInt(_,10),ht=V.toString(2),gt=7-ht.length%7;gt==7&&(gt=0);for(var P="",I=0;I<gt;I++)P+="0";ht=P+ht;for(var I=0;I<ht.length-1;I+=7){var ut=ht.substr(I,7);I!=ht.length-7&&(ut="1"+ut),L+=l(parseInt(ut,2))}return L};try{if(!e.match(/^[0-9.]+$/))return null;var h="",b=e.split("."),C=parseInt(b[0],10)*40+parseInt(b[1],10);h+=l(C),b.splice(0,2);for(var x=0;x<b.length;x++)h+=a(b[x]);return h}catch{return null}}function me(e){if(!ei(e))return null;try{var l=[],a=e.substr(0,2),h=parseInt(a,16);l[0]=new String(Math.floor(h/40)),l[1]=new String(h%40);for(var b=e.substr(2),C=[],x=0;x<b.length/2;x++)C.push(parseInt(b.substr(x*2,2),16));for(var _=[],L="",x=0;x<C.length;x++)C[x]&128?L=L+hr((C[x]&127).toString(2),7):(L=L+hr((C[x]&127).toString(2),7),_.push(new String(parseInt(L,2))),L="");var V=l.join(".");return _.length>0&&(V=V+"."+_.join(".")),V}catch{return null}}function Ue(e){var l=new w(String(e),10);return Ie(l)}function Ie(e){var l=e.toString(16);if(l.substr(0,1)!="-")return l.length%2==1?l="0"+l:l.match(/^[0-7]/)||(l="00"+l),l;var a=l.substr(1),h=a.length;h%2==1?h+=1:l.match(/^[0-7]/)||(h+=2);for(var b="",C=0;C<h;C++)b+="f";var x=new w(b,16),_=x.xor(e).add(w.ONE);return l=_.toString(16).replace(/^-/,""),l}var hr=function(e,l,a){return a==null&&(a="0"),e.length>=l?e:new Array(l-e.length+1).join(a)+e};function Or(e){if(e.length%2!=0||(e=e.toLowerCase(),e.match(/^[0-9a-f]+$/)==null))return-1;try{var l=e.substr(0,2);if(l=="00")return parseInt(e.substr(2),16);var a=parseInt(l,16);if(a>7)return-1;var h=e.substr(2),b=parseInt(h,16).toString(2);b=="0"&&(b="00000000"),b=b.slice(0,0-a);var C=parseInt(b,2);return C==NaN?-1:C}catch{return-1}}function an(e){if(typeof e!="number"||e<0)return null;var l=Number(e).toString(2),a=8-l.length%8;a==8&&(a=0),l=l+hr("",a,"0");var h=parseInt(l,2).toString(16);h.length%2==1&&(h="0"+h);var b="0"+a;return b+h}function Gn(e){if(typeof e!="string"||e.length%2!=0||!e.match(/^[0-9a-f]+$/))return null;try{var l=parseInt(e.substr(0,2),16);if(l<0||7<l)return null;for(var a=e.substr(2),h="",b=0;b<a.length;b+=2){var C=a.substr(b,2),x=parseInt(C,16).toString(2);x=("0000000"+x).slice(-8),h+=x}return h.substr(0,h.length-l)}catch{return null}}function Fn(e){if(typeof e!="string"||e.match(/^[01]+$/)==null)return null;try{var l=parseInt(e,2);return an(l)}catch{return null}}function Ai(e,l){for(var a=0,h=0;h<e.length;h++)a|=1<<l[e[h]];for(var b=a.toString(2),C="",h=b.length-1;h>=0;h--)C+=b[h];return C}function wn(e,l,a){if(typeof e=="object"){for(var l=String(l).split("."),h=0;h<l.length&&e;h++){var b=l[h];b.match(/^[0-9]+$/)&&(b=parseInt(b)),e=e[b]}return e||e===!1?e:a}}function Oe(e,l){var a=function(){};a.prototype=l.prototype,e.prototype=new a,e.prototype.constructor=e,e.superclass=l.prototype,l.prototype.constructor==Object.prototype.constructor&&(l.prototype.constructor=l)}(typeof E>"u"||!E)&&(E={}),(typeof E.crypto>"u"||!E.crypto)&&(E.crypto={}),E.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:p.algo.MD5,sha1:p.algo.SHA1,sha224:p.algo.SHA224,sha256:p.algo.SHA256,sha384:p.algo.SHA384,sha512:p.algo.SHA512,ripemd160:p.algo.RIPEMD160},this.getDigestInfoHex=function(e,l){if(typeof this.DIGESTINFOHEAD[l]>"u")throw"alg not supported in Util.DIGESTINFOHEAD: "+l;return this.DIGESTINFOHEAD[l]+e},this.getPaddedDigestInfoHex=function(e,l,a){var h=this.getDigestInfoHex(e,l),b=a/4;if(h.length+22>b)throw"key is too short for SigAlg: keylen="+a+","+l;for(var C="0001",x="00"+h,_="",L=b-C.length-x.length,V=0;V<L;V+=2)_+="ff";var ht=C+_+x;return ht},this.hashString=function(e,l){var a=new E.crypto.MessageDigest({alg:l});return a.digestString(e)},this.hashHex=function(e,l){var a=new E.crypto.MessageDigest({alg:l});return a.digestHex(e)},this.sha1=function(e){return this.hashString(e,"sha1")},this.sha256=function(e){return this.hashString(e,"sha256")},this.sha256Hex=function(e){return this.hashHex(e,"sha256")},this.sha512=function(e){return this.hashString(e,"sha512")},this.sha512Hex=function(e){return this.hashHex(e,"sha512")},this.isKey=function(e){return e instanceof Er||e instanceof E.crypto.DSA||e instanceof E.crypto.ECDSA}},E.crypto.Util.md5=function(e){var l=new E.crypto.MessageDigest({alg:"md5",prov:"cryptojs"});return l.digestString(e)},E.crypto.Util.ripemd160=function(e){var l=new E.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"});return l.digestString(e)},E.crypto.Util.SECURERANDOMGEN=new nn,E.crypto.Util.getRandomHexOfNbytes=function(e){var l=new Array(e);return E.crypto.Util.SECURERANDOMGEN.nextBytes(l),Ei(l)},E.crypto.Util.getRandomBigIntegerOfNbytes=function(e){return new w(E.crypto.Util.getRandomHexOfNbytes(e),16)},E.crypto.Util.getRandomHexOfNbits=function(e){var l=e%8,a=(e-l)/8,h=new Array(a+1);return E.crypto.Util.SECURERANDOMGEN.nextBytes(h),h[0]=(255<<l&255^255)&h[0],Ei(h)},E.crypto.Util.getRandomBigIntegerOfNbits=function(e){return new w(E.crypto.Util.getRandomHexOfNbits(e),16)},E.crypto.Util.getRandomBigIntegerZeroToMax=function(e){for(var l=e.bitLength();;){var a=E.crypto.Util.getRandomBigIntegerOfNbits(l);if(e.compareTo(a)!=-1)return a}},E.crypto.Util.getRandomBigIntegerMinToMax=function(e,l){var a=e.compareTo(l);if(a==1)throw"biMin is greater than biMax";if(a==0)return e;var h=l.subtract(e),b=E.crypto.Util.getRandomBigIntegerZeroToMax(h);return b.add(e)},E.crypto.MessageDigest=function(e){var l=null,a=null,h=null;this.setAlgAndProvider=function(b,C){if(b=E.crypto.MessageDigest.getCanonicalAlgName(b),b!==null&&C===void 0&&(C=E.crypto.Util.DEFAULTPROVIDER[b]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(b)!=-1&&C=="cryptojs"){try{this.md=E.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[b].create()}catch(x){throw"setAlgAndProvider hash alg set fail alg="+b+"/"+x}this.updateString=function(x){this.md.update(x)},this.updateHex=function(x){var _=p.enc.Hex.parse(x);this.md.update(_)},this.digest=function(){var x=this.md.finalize();return x.toString(p.enc.Hex)},this.digestString=function(x){return this.updateString(x),this.digest()},this.digestHex=function(x){return this.updateHex(x),this.digest()}}if(":sha256:".indexOf(b)!=-1&&C=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(x){throw"setAlgAndProvider hash alg set fail alg="+b+"/"+x}this.updateString=function(x){this.md.update(x)},this.updateHex=function(x){var _=sjcl.codec.hex.toBits(x);this.md.update(_)},this.digest=function(){var x=this.md.finalize();return sjcl.codec.hex.fromBits(x)},this.digestString=function(x){return this.updateString(x),this.digest()},this.digestHex=function(x){return this.updateHex(x),this.digest()}}},this.updateString=function(b){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(b){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(b){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(b){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},e!==void 0&&e.alg!==void 0&&(this.algName=e.alg,e.prov===void 0&&(this.provName=E.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},E.crypto.MessageDigest.getCanonicalAlgName=function(e){return typeof e=="string"&&(e=e.toLowerCase(),e=e.replace(/-/,"")),e},E.crypto.MessageDigest.getHashLength=function(e){var l=E.crypto.MessageDigest,a=l.getCanonicalAlgName(e);if(l.HASHLENGTH[a]===void 0)throw"not supported algorithm: "+e;return l.HASHLENGTH[a]},E.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},E.crypto.Mac=function(e){var l=null,a=null,h=null,b=null,C=null;this.setAlgAndProvider=function(x,_){if(x=x.toLowerCase(),x==null&&(x="hmacsha1"),x=x.toLowerCase(),x.substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+x;_===void 0&&(_=E.crypto.Util.DEFAULTPROVIDER[x]),this.algProv=x+"/"+_;var L=x.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(L)!=-1&&_=="cryptojs"){try{var V=E.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[L];this.mac=p.algo.HMAC.create(V,this.pass)}catch(ht){throw"setAlgAndProvider hash alg set fail hashAlg="+L+"/"+ht}this.updateString=function(ht){this.mac.update(ht)},this.updateHex=function(ht){var gt=p.enc.Hex.parse(ht);this.mac.update(gt)},this.doFinal=function(){var ht=this.mac.finalize();return ht.toString(p.enc.Hex)},this.doFinalString=function(ht){return this.updateString(ht),this.doFinal()},this.doFinalHex=function(ht){return this.updateHex(ht),this.doFinal()}}},this.updateString=function(x){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(x){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(x){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(x){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(x){if(typeof x=="string"){var _=x;(x.length%2==1||!x.match(/^[0-9A-Fa-f]+$/))&&(_=kn(x)),this.pass=p.enc.Hex.parse(_);return}if(typeof x!="object")throw"KJUR.crypto.Mac unsupported password type: "+x;var _=null;if(x.hex!==void 0){if(x.hex.length%2!=0||!x.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+x.hex;_=x.hex}if(x.utf8!==void 0&&(_=xu(x.utf8)),x.rstr!==void 0&&(_=kn(x.rstr)),x.b64!==void 0&&(_=y(x.b64)),x.b64u!==void 0&&(_=Dn(x.b64u)),_==null)throw"KJUR.crypto.Mac unsupported password type: "+x;this.pass=p.enc.Hex.parse(_)},e!==void 0&&(e.pass!==void 0&&this.setPassword(e.pass),e.alg!==void 0&&(this.algName=e.alg,e.prov===void 0&&(this.provName=E.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},E.crypto.Signature=function(e){var l=null,a=null,h=null,b=null,C=null,x=null,_=null,L=null,V=null,ht=null,gt=-1,P=null,I=null,ut=null,T=null,at=null;if(this._setAlgNames=function(){var Y=this.algName.match(/^(.+)with(.+)$/);Y&&(this.mdAlgName=Y[1].toLowerCase(),this.pubkeyAlgName=Y[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(Y,wt){for(var Tt="",Wt=wt/4-Y.length,Gt=0;Gt<Wt;Gt++)Tt=Tt+"0";return Tt+Y},this.setAlgAndProvider=function(Y,wt){if(this._setAlgNames(),wt!="cryptojs/jsrsa")throw new Error("provider not supported: "+wt);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new E.crypto.MessageDigest({alg:this.mdAlgName})}catch(Tt){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+Tt)}this.init=function(Tt,Wt){var Gt=null;try{Wt===void 0?Gt=Nr.getKey(Tt):Gt=Nr.getKey(Tt,Wt)}catch(ve){throw"init failed:"+ve}if(Gt.isPrivate===!0)this.prvKey=Gt,this.state="SIGN";else if(Gt.isPublic===!0)this.pubKey=Gt,this.state="VERIFY";else throw"init failed.:"+Gt},this.updateString=function(Tt){this.md.updateString(Tt)},this.updateHex=function(Tt){this.md.updateHex(Tt)},this.sign=function(){if(this.sHashHex=this.md.digest(),this.prvKey===void 0&&this.ecprvhex!==void 0&&this.eccurvename!==void 0&&E.crypto.ECDSA!==void 0&&(this.prvKey=new E.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof Er&&this.pubkeyAlgName==="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof Er&&this.pubkeyAlgName==="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof E.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else if(this.prvKey instanceof E.crypto.DSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;return this.hSign},this.signString=function(Tt){return this.updateString(Tt),this.sign()},this.signHex=function(Tt){return this.updateHex(Tt),this.sign()},this.verify=function(Tt){if(this.sHashHex=this.md.digest(),this.pubKey===void 0&&this.ecpubhex!==void 0&&this.eccurvename!==void 0&&E.crypto.ECDSA!==void 0&&(this.pubKey=new E.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof Er&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,Tt,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof Er&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,Tt);if(E.crypto.ECDSA!==void 0&&this.pubKey instanceof E.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,Tt);if(E.crypto.DSA!==void 0&&this.pubKey instanceof E.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,Tt);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(Y,wt){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(Y){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(Y){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(Y){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(Y){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(Y){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=e,e!==void 0&&(e.alg!==void 0&&(this.algName=e.alg,e.prov===void 0?this.provName=E.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=e.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),e.psssaltlen!==void 0&&(this.pssSaltLen=e.psssaltlen),e.prvkeypem!==void 0)){if(e.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{var l=Nr.getKey(e.prvkeypem);this.init(l)}catch(Y){throw"fatal error to load pem private key: "+Y}}},E.crypto.Cipher=function(e){},E.crypto.Cipher.encrypt=function(e,l,a,h){if(wn(h,"enclag")!=null&&(a=h.encalg),typeof a=="string"&&a.substr(-4)=="-CBC"){var b=l,C=e;wn(h,"key")!=null&&(b=h.key),wn(h,"enc")!=null&&(hEnc=h.enc);var x=p.enc.Hex.parse(b),_=p.enc.Hex.parse(C),L=p.enc.Hex.parse(h.iv),V;if(a=="des-EDE3-CBC")V=p.TripleDES.encrypt(_,x,{iv:L});else if(a=="aes128-CBC"||a=="aes256-CBC")V=p.AES.encrypt(_,x,{iv:L});else throw new Error("unsupported algorithm: "+a);return V+""}else throw new Error("Cipher.encrypt: unsupported key or algorithm")},E.crypto.Cipher.decrypt=function(e,l,a,h){if(wn(h,"enclag")!=null&&(a=h.encalg),typeof a=="string"&&a.substr(-4)=="-CBC"){var b=l,C=e;wn(h,"key")!=null&&(b=h.key),wn(h,"enc")!=null&&(C=h.enc);var x=p.enc.Hex.parse(b),_=p.enc.Hex.parse(C),L=p.enc.Hex.parse(h.iv),V;if(a=="des-EDE3-CBC")V=p.TripleDES.decrypt({ciphertext:_},x,{iv:L});else if(a=="aes128-CBC"||a=="aes256-CBC")V=p.AES.decrypt({ciphertext:_},x,{iv:L});else throw new Error("unsupported algorithm: "+a);return p.enc.Hex.stringify(V)}else throw new Error("Cipher.decrypt: unsupported key or algorithm")},E.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040022":"secp384r1","2b81040023":"secp521r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},(typeof E>"u"||!E)&&(E={}),(typeof E.crypto>"u"||!E.crypto)&&(E.crypto={}),E.crypto.ECDSA=function(e){var l="secp256r1",a=null,h=null,b=null,C=Error,x=w,_=on,L=E.crypto.ECDSA,V=E.crypto.ECParameterDB,ht=L.getName,gt=Ge,P=gt.getVbyListEx,I=gt.isASN1HEX,ut=new nn,T=null;this.type="EC",this.isPrivate=!1,this.isPublic=!1;function at(Y,wt,Tt,Wt){for(var Gt=Math.max(wt.bitLength(),Wt.bitLength()),ve=Y.add2D(Tt),be=Y.curve.getInfinity(),d=Gt-1;d>=0;--d)be=be.twice2D(),be.z=x.ONE,wt.testBit(d)?Wt.testBit(d)?be=be.add2D(ve):be=be.add2D(Y):Wt.testBit(d)&&(be=be.add2D(Tt));return be}this.getBigRandom=function(Y){return new x(Y.bitLength(),ut).mod(Y.subtract(x.ONE)).add(x.ONE)},this.setNamedCurve=function(Y){this.ecparams=V.getByName(Y),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=Y},this.setPrivateKeyHex=function(Y){this.isPrivate=!0,this.prvKeyHex=Y},this.setPublicKeyHex=function(Y){this.isPublic=!0,this.pubKeyHex=Y},this.getPublicKeyXYHex=function(){var Y=this.pubKeyHex;if(Y.substr(0,2)!=="04")throw"this method supports uncompressed format(04) only";var wt=this.ecparams.keycharlen;if(Y.length!==2+wt*2)throw"malformed public key hex length";var Tt={};return Tt.x=Y.substr(2,wt),Tt.y=Y.substr(2+wt),Tt},this.getShortNISTPCurveName=function(){var Y=this.curveName;return Y==="secp256r1"||Y==="NIST P-256"||Y==="P-256"||Y==="prime256v1"?"P-256":Y==="secp384r1"||Y==="NIST P-384"||Y==="P-384"?"P-384":Y==="secp521r1"||Y==="NIST P-521"||Y==="P-521"?"P-521":null},this.generateKeyPairHex=function(){var Y=this.ecparams.n,wt=this.getBigRandom(Y),Tt=this.ecparams.keycharlen,Wt=("0000000000"+wt.toString(16)).slice(-Tt);this.setPrivateKeyHex(Wt);var Gt=this.generatePublicKeyHex();return{ecprvhex:Wt,ecpubhex:Gt}},this.generatePublicKeyHex=function(){var Y=new x(this.prvKeyHex,16),wt=this.ecparams.G.multiply(Y),Tt=wt.getX().toBigInteger(),Wt=wt.getY().toBigInteger(),Gt=this.ecparams.keycharlen,ve=("0000000000"+Tt.toString(16)).slice(-Gt),be=("0000000000"+Wt.toString(16)).slice(-Gt),d="04"+ve+be;return this.setPublicKeyHex(d),d},this.signWithMessageHash=function(Y){return this.signHex(Y,this.prvKeyHex)},this.signHex=function(Y,wt){var Tt=new x(wt,16),Wt=this.ecparams.n,Gt=new x(Y.substring(0,this.ecparams.keycharlen),16);do var ve=this.getBigRandom(Wt),be=this.ecparams.G,d=be.multiply(ve),S=d.getX().toBigInteger().mod(Wt);while(S.compareTo(x.ZERO)<=0);var st=ve.modInverse(Wt).multiply(Gt.add(Tt.multiply(S))).mod(Wt);return L.biRSSigToASN1Sig(S,st)},this.sign=function(Y,wt){var Tt=wt,Wt=this.ecparams.n,Gt=x.fromByteArrayUnsigned(Y);do var ve=this.getBigRandom(Wt),be=this.ecparams.G,d=be.multiply(ve),S=d.getX().toBigInteger().mod(Wt);while(S.compareTo(w.ZERO)<=0);var st=ve.modInverse(Wt).multiply(Gt.add(Tt.multiply(S))).mod(Wt);return this.serializeSig(S,st)},this.verifyWithMessageHash=function(Y,wt){return this.verifyHex(Y,wt,this.pubKeyHex)},this.verifyHex=function(Y,wt,Tt){try{var Wt,Gt,ve=L.parseSigHex(wt);Wt=ve.r,Gt=ve.s;var be=_.decodeFromHex(this.ecparams.curve,Tt),d=new x(Y.substring(0,this.ecparams.keycharlen),16);return this.verifyRaw(d,Wt,Gt,be)}catch{return!1}},this.verify=function(Y,wt,Tt){var Wt,Gt;if(Bitcoin.Util.isArray(wt)){var ve=this.parseSig(wt);Wt=ve.r,Gt=ve.s}else if(typeof wt=="object"&&wt.r&&wt.s)Wt=wt.r,Gt=wt.s;else throw"Invalid value for signature";var be;if(Tt instanceof on)be=Tt;else if(Bitcoin.Util.isArray(Tt))be=_.decodeFrom(this.ecparams.curve,Tt);else throw"Invalid format for pubkey value, must be byte array or ECPointFp";var d=x.fromByteArrayUnsigned(Y);return this.verifyRaw(d,Wt,Gt,be)},this.verifyRaw=function(Y,wt,Tt,Wt){var Gt=this.ecparams.n,ve=this.ecparams.G;if(wt.compareTo(x.ONE)<0||wt.compareTo(Gt)>=0||Tt.compareTo(x.ONE)<0||Tt.compareTo(Gt)>=0)return!1;var be=Tt.modInverse(Gt),d=Y.multiply(be).mod(Gt),S=wt.multiply(be).mod(Gt),st=ve.multiply(d).add(Wt.multiply(S)),z=st.getX().toBigInteger().mod(Gt);return z.equals(wt)},this.serializeSig=function(Y,wt){var Tt=Y.toByteArraySigned(),Wt=wt.toByteArraySigned(),Gt=[];return Gt.push(2),Gt.push(Tt.length),Gt=Gt.concat(Tt),Gt.push(2),Gt.push(Wt.length),Gt=Gt.concat(Wt),Gt.unshift(Gt.length),Gt.unshift(48),Gt},this.parseSig=function(Y){var wt;if(Y[0]!=48)throw new Error("Signature not a valid DERSequence");if(wt=2,Y[wt]!=2)throw new Error("First element in signature must be a DERInteger");var Tt=Y.slice(wt+2,wt+2+Y[wt+1]);if(wt+=2+Y[wt+1],Y[wt]!=2)throw new Error("Second element in signature must be a DERInteger");var Wt=Y.slice(wt+2,wt+2+Y[wt+1]);wt+=2+Y[wt+1];var Gt=x.fromByteArrayUnsigned(Tt),ve=x.fromByteArrayUnsigned(Wt);return{r:Gt,s:ve}},this.parseSigCompact=function(Y){if(Y.length!==65)throw"Signature has the wrong length";var wt=Y[0]-27;if(wt<0||wt>7)throw"Invalid signature type";var Tt=this.ecparams.n,Wt=x.fromByteArrayUnsigned(Y.slice(1,33)).mod(Tt),Gt=x.fromByteArrayUnsigned(Y.slice(33,65)).mod(Tt);return{r:Wt,s:Gt,i:wt}},this.readPKCS5PrvKeyHex=function(Y){if(I(Y)===!1)throw new Error("not ASN.1 hex string");var wt,Tt,Wt;try{wt=P(Y,0,["[0]",0],"06"),Tt=P(Y,0,[1],"04");try{Wt=P(Y,0,["[1]",0],"03")}catch{}}catch{throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=ht(wt),this.curveName===void 0)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(Wt),this.setPrivateKeyHex(Tt),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(Y){if(I(Y)===!1)throw new C("not ASN.1 hex string");var wt,Tt,Wt,Gt;try{wt=P(Y,0,[1,0],"06"),Tt=P(Y,0,[1,1],"06"),Wt=P(Y,0,[2,0,1],"04");try{Gt=P(Y,0,[2,0,"[1]",0],"03")}catch{}}catch{throw new C("malformed PKCS#8 plain ECC private key")}if(this.curveName=ht(Tt),this.curveName===void 0)throw new C("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(Gt),this.setPrivateKeyHex(Wt),this.isPublic=!1},this.readPKCS8PubKeyHex=function(Y){if(I(Y)===!1)throw new C("not ASN.1 hex string");var wt,Tt,Wt;try{wt=P(Y,0,[0,0],"06"),Tt=P(Y,0,[0,1],"06"),Wt=P(Y,0,[1],"03")}catch{throw new C("malformed PKCS#8 ECC public key")}if(this.curveName=ht(Tt),this.curveName===null)throw new C("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(Wt)},this.readCertPubKeyHex=function(Y,wt){if(I(Y)===!1)throw new C("not ASN.1 hex string");var Tt,Wt;try{Tt=P(Y,0,[0,5,0,1],"06"),Wt=P(Y,0,[0,5,1],"03")}catch{throw new C("malformed X.509 certificate ECC public key")}if(this.curveName=ht(Tt),this.curveName===null)throw new C("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(Wt)},e!==void 0&&e.curve!==void 0&&(this.curveName=e.curve),this.curveName===void 0&&(this.curveName=l),this.setNamedCurve(this.curveName),e!==void 0&&(e.prv!==void 0&&this.setPrivateKeyHex(e.prv),e.pub!==void 0&&this.setPublicKeyHex(e.pub))},E.crypto.ECDSA.parseSigHex=function(e){var l=E.crypto.ECDSA.parseSigHexInHexRS(e),a=new w(l.r,16),h=new w(l.s,16);return{r:a,s:h}},E.crypto.ECDSA.parseSigHexInHexRS=function(e){var l=Ge,a=l.getChildIdx,h=l.getV;if(l.checkStrictDER(e,0),e.substr(0,2)!="30")throw new Error("signature is not a ASN.1 sequence");var b=a(e,0);if(b.length!=2)throw new Error("signature shall have two elements");var C=b[0],x=b[1];if(e.substr(C,2)!="02")throw new Error("1st item not ASN.1 integer");if(e.substr(x,2)!="02")throw new Error("2nd item not ASN.1 integer");var _=h(e,C),L=h(e,x);return{r:_,s:L}},E.crypto.ECDSA.asn1SigToConcatSig=function(e){var l=E.crypto.ECDSA.parseSigHexInHexRS(e),a=l.r,h=l.s;if(a.length>=130&&a.length<=134){if(a.length%2!=0)throw Error("unknown ECDSA sig r length error");if(h.length%2!=0)throw Error("unknown ECDSA sig s length error");a.substr(0,2)=="00"&&(a=a.substr(2)),h.substr(0,2)=="00"&&(h=h.substr(2));var b=Math.max(a.length,h.length);return a=("000000"+a).slice(-b),h=("000000"+h).slice(-b),a+h}if(a.substr(0,2)=="00"&&a.length%32==2&&(a=a.substr(2)),h.substr(0,2)=="00"&&h.length%32==2&&(h=h.substr(2)),a.length%32==30&&(a="00"+a),h.length%32==30&&(h="00"+h),a.length%32!=0)throw Error("unknown ECDSA sig r length error");if(h.length%32!=0)throw Error("unknown ECDSA sig s length error");return a+h},E.crypto.ECDSA.concatSigToASN1Sig=function(e){if(e.length%4!=0)throw Error("unknown ECDSA concatinated r-s sig length error");var l=e.substr(0,e.length/2),a=e.substr(e.length/2);return E.crypto.ECDSA.hexRSSigToASN1Sig(l,a)},E.crypto.ECDSA.hexRSSigToASN1Sig=function(e,l){var a=new w(e,16),h=new w(l,16);return E.crypto.ECDSA.biRSSigToASN1Sig(a,h)},E.crypto.ECDSA.biRSSigToASN1Sig=function(e,l){var a=E.asn1,h=new a.DERInteger({bigint:e}),b=new a.DERInteger({bigint:l}),C=new a.DERSequence({array:[h,b]});return C.tohex()},E.crypto.ECDSA.getName=function(e){return e==="2b8104001f"?"secp192k1":e==="2a8648ce3d030107"?"secp256r1":e==="2b8104000a"?"secp256k1":e==="2b81040021"?"secp224r1":e==="2b81040022"?"secp384r1":e==="2b81040023"?"secp521r1":"|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(e)!==-1?"secp256r1":"|secp256k1|".indexOf(e)!==-1?"secp256k1":"|secp224r1|NIST P-224|P-224|".indexOf(e)!==-1?"secp224r1":"|secp384r1|NIST P-384|P-384|".indexOf(e)!==-1?"secp384r1":"|secp521r1|NIST P-521|P-521|".indexOf(e)!==-1?"secp521r1":null},(typeof E>"u"||!E)&&(E={}),(typeof E.crypto>"u"||!E.crypto)&&(E.crypto={}),E.crypto.ECParameterDB=new function(){var e={},l={};function a(h){return new w(h,16)}this.getByName=function(h){var b=h;if(typeof l[b]<"u"&&(b=l[h]),typeof e[b]<"u")return e[b];throw"unregistered EC curve name: "+b},this.regist=function(h,b,C,x,_,L,V,ht,gt,P,I,ut){e[h]={};var T=a(C),at=a(x),Y=a(_),wt=a(L),Tt=a(V),Wt=new Yn(T,at,Y),Gt=Wt.decodePointHex("04"+ht+gt);e[h].name=h,e[h].keylen=b,e[h].keycharlen=Math.ceil(b/8)*2,e[h].curve=Wt,e[h].G=Gt,e[h].n=wt,e[h].h=Tt,e[h].oid=I,e[h].info=ut;for(var ve=0;ve<P.length;ve++)l[P[ve]]=h}},E.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),E.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),E.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),E.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),E.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),E.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),E.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),E.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),E.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),E.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","00C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]),(typeof E>"u"||!E)&&(E={}),(typeof E.crypto>"u"||!E.crypto)&&(E.crypto={}),E.crypto.DSA=function(){var e=Ge,l=e.getVbyList,a=e.getVbyListEx,h=e.isASN1HEX,b=w;this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(C,x,_,L,V){this.isPrivate=!0,this.p=C,this.q=x,this.g=_,this.y=L,this.x=V},this.setPrivateHex=function(C,x,_,L,V){var ht,gt,P,I,ut;ht=new w(C,16),gt=new w(x,16),P=new w(_,16),typeof L=="string"&&L.length>1?I=new w(L,16):I=null,ut=new w(V,16),this.setPrivate(ht,gt,P,I,ut)},this.setPublic=function(C,x,_,L){this.isPublic=!0,this.p=C,this.q=x,this.g=_,this.y=L,this.x=null},this.setPublicHex=function(C,x,_,L){var V,ht,gt,P;V=new w(C,16),ht=new w(x,16),gt=new w(_,16),P=new w(L,16),this.setPublic(V,ht,gt,P)},this.signWithMessageHash=function(C){var x=this.p,_=this.q,L=this.g,V=this.y,ht=this.x,gt=E.crypto.Util.getRandomBigIntegerMinToMax(w.ONE.add(w.ONE),_.subtract(w.ONE)),P=C.substr(0,_.bitLength()/4),I=new w(P,16),ut=L.modPow(gt,x).mod(_),T=gt.modInverse(_).multiply(I.add(ht.multiply(ut))).mod(_),at=E.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:ut}},{int:{bigint:T}}]});return at},this.verifyWithMessageHash=function(C,x){var _=this.p,L=this.q,V=this.g,ht=this.y,gt=this.parseASN1Signature(x),P=gt[0],I=gt[1],ut=C.substr(0,L.bitLength()/4),T=new w(ut,16);if(w.ZERO.compareTo(P)>0||P.compareTo(L)>0||w.ZERO.compareTo(I)>=0||I.compareTo(L)>0)throw"invalid DSA signature";var at=I.modInverse(L),Y=T.multiply(at).mod(L),wt=P.multiply(at).mod(L),Tt=V.modPow(Y,_).multiply(ht.modPow(wt,_)).mod(_).mod(L);return Tt.compareTo(P)==0},this.parseASN1Signature=function(C){try{var x=new b(a(C,0,[0],"02"),16),_=new b(a(C,0,[1],"02"),16);return[x,_]}catch{throw new Error("malformed ASN.1 DSA signature")}},this.readPKCS5PrvKeyHex=function(C){var x,_,L,V,ht;if(h(C)===!1)throw new Error("not ASN.1 hex string");try{x=a(C,0,[1],"02"),_=a(C,0,[2],"02"),L=a(C,0,[3],"02"),V=a(C,0,[4],"02"),ht=a(C,0,[5],"02")}catch{throw new Error("malformed PKCS#1/5 plain DSA private key")}this.setPrivateHex(x,_,L,V,ht)},this.readPKCS8PrvKeyHex=function(C){var x,_,L,V;if(h(C)===!1)throw new Error("not ASN.1 hex string");try{x=a(C,0,[1,1,0],"02"),_=a(C,0,[1,1,1],"02"),L=a(C,0,[1,1,2],"02"),V=a(C,0,[2,0],"02")}catch{throw new Error("malformed PKCS#8 plain DSA private key")}this.setPrivateHex(x,_,L,null,V)},this.readPKCS8PubKeyHex=function(C){var x,_,L,V;if(h(C)===!1)throw new Error("not ASN.1 hex string");try{x=a(C,0,[0,1,0],"02"),_=a(C,0,[0,1,1],"02"),L=a(C,0,[0,1,2],"02"),V=a(C,0,[1,0],"02")}catch{throw new Error("malformed PKCS#8 DSA public key")}this.setPublicHex(x,_,L,V)},this.readCertPubKeyHex=function(C,x){var _,L,V,ht;if(h(C)===!1)throw new Error("not ASN.1 hex string");try{_=a(C,0,[0,5,0,1,0],"02"),L=a(C,0,[0,5,0,1,1],"02"),V=a(C,0,[0,5,0,1,2],"02"),ht=a(C,0,[0,5,1,0],"02")}catch{throw new Error("malformed X.509 certificate DSA public key")}this.setPublicHex(_,L,V,ht)}};var Nr=(function(){var e=function(T,at,Y){return h(p.AES,T,at,Y)},l=function(T,at,Y){return h(p.TripleDES,T,at,Y)},a=function(T,at,Y){return h(p.DES,T,at,Y)},h=function(T,at,Y,wt){var Tt=p.enc.Hex.parse(at),Wt=p.enc.Hex.parse(Y),Gt=p.enc.Hex.parse(wt),ve={};ve.key=Wt,ve.iv=Gt,ve.ciphertext=Tt;var be=T.decrypt(ve,Wt,{iv:Gt});return p.enc.Hex.stringify(be)},b=function(T,at,Y){return _(p.AES,T,at,Y)},C=function(T,at,Y){return _(p.TripleDES,T,at,Y)},x=function(T,at,Y){return _(p.DES,T,at,Y)},_=function(T,at,Y,wt){var Tt=p.enc.Hex.parse(at),Wt=p.enc.Hex.parse(Y),Gt=p.enc.Hex.parse(wt),ve=T.encrypt(Tt,Wt,{iv:Gt}),be=p.enc.Hex.parse(ve.toString()),d=p.enc.Base64.stringify(be);return d},L={"AES-256-CBC":{proc:e,eproc:b,keylen:32,ivlen:16},"AES-192-CBC":{proc:e,eproc:b,keylen:24,ivlen:16},"AES-128-CBC":{proc:e,eproc:b,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:l,eproc:C,keylen:24,ivlen:8},"DES-CBC":{proc:a,eproc:x,keylen:8,ivlen:8}},V=function(T){return L[T].proc},ht=function(T){var at=p.lib.WordArray.random(T),Y=p.enc.Hex.stringify(at);return Y},gt=function(T){var at={},Y=T.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));Y&&(at.cipher=Y[1],at.ivsalt=Y[2]);var wt=T.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));wt&&(at.type=wt[1]);var Tt=-1,Wt=0;T.indexOf(`\r
\r
`)!=-1&&(Tt=T.indexOf(`\r
\r
`),Wt=2),T.indexOf(`

`)!=-1&&(Tt=T.indexOf(`

`),Wt=1);var Gt=T.indexOf("-----END");if(Tt!=-1&&Gt!=-1){var ve=T.substring(Tt+Wt*2,Gt-Wt);ve=ve.replace(/\s+/g,""),at.data=ve}return at},P=function(T,at,Y){for(var wt=Y.substring(0,16),Tt=p.enc.Hex.parse(wt),Wt=p.enc.Utf8.parse(at),Gt=L[T].keylen+L[T].ivlen,ve="",be=null;;){var d=p.algo.MD5.create();if(be!=null&&d.update(be),d.update(Wt),d.update(Tt),be=d.finalize(),ve=ve+p.enc.Hex.stringify(be),ve.length>=Gt*2)break}var S={};return S.keyhex=ve.substr(0,L[T].keylen*2),S.ivhex=ve.substr(L[T].keylen*2,L[T].ivlen*2),S},I=function(T,at,Y,wt){var Tt=p.enc.Base64.parse(T),Wt=p.enc.Hex.stringify(Tt),Gt=L[at].proc,ve=Gt(Wt,Y,wt);return ve},ut=function(T,at,Y,wt){var Tt=L[at].eproc,Wt=Tt(T,Y,wt);return Wt};return{version:"1.0.0",parsePKCS5PEM:function(T){return gt(T)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(T,at,Y){return P(T,at,Y)},decryptKeyB64:function(T,at,Y,wt){return I(T,at,Y,wt)},getDecryptedKeyHex:function(T,at){var Y=gt(T),wt=Y.type,Tt=Y.cipher,Wt=Y.ivsalt,Gt=Y.data,ve=P(Tt,at,Wt),be=ve.keyhex,d=I(Gt,Tt,be,Wt);return d},getEncryptedPKCS5PEMFromPrvKeyHex:function(T,at,Y,wt,Tt){var st="";if((typeof wt>"u"||wt==null)&&(wt="AES-256-CBC"),typeof L[wt]>"u")throw new Error("KEYUTIL unsupported algorithm: "+wt);if(typeof Tt>"u"||Tt==null){var Wt=L[wt].ivlen,Gt=ht(Wt);Tt=Gt.toUpperCase()}var ve=P(wt,Y,Tt),be=ve.keyhex,d=ut(at,wt,be,Tt),S=d.replace(/(.{64})/g,`$1\r
`),st="-----BEGIN "+T+` PRIVATE KEY-----\r
`;return st+=`Proc-Type: 4,ENCRYPTED\r
`,st+="DEK-Info: "+wt+","+Tt+`\r
`,st+=`\r
`,st+=S,st+=`\r
-----END `+T+` PRIVATE KEY-----\r
`,st},getEncryptedPKCS8PEM:function(T,at,Y){var wt=this.getEncryptedPKCS8Hex(T,at,Y);return $e(wt,"ENCRYPTED PRIVATE KEY")},getEncryptedPKCS8Hex:function(T,at,Y){var wt;Y==null||Y==null?wt={}:wt=JSON.parse(JSON.stringify(Y)),wt.plain=T,this.initPBES2Param(wt),this.encryptPBES2Param(wt,at);var Tt=this.generatePBES2ASN1Param(wt);return E.asn1.ASN1Util.newObject(Tt).tohex()},initPBES2Param:function(T){if(wn(T,"encalg")==null&&(T.encalg="aes256-CBC"),wn(T,"iter")==null&&(T.iter=2048),wn(T,"prf")==null&&(T.prf="hmacWithSHA256"),wn(T,"salt")==null&&(T.salt=p.enc.Hex.stringify(p.lib.WordArray.random(8))),wn(T,"enciv")==null){var at;T.encalg=="des-EDE3-CBC"&&(at=8),T.encalg=="aes128-CBC"&&(at=16),T.encalg=="aes256-CBC"&&(at=16),T.enciv=p.enc.Hex.stringify(p.lib.WordArray.random(at))}},encryptPBES2Param:function(T,at){var Y=Nr.getDKFromPBES2Param(T,at);try{var wt=E.crypto.Cipher.encrypt(T.plain,Y,T.encalg,{iv:T.enciv})}catch{throw new Error("encrypt error: "+T.plain+" "+Y+" "+T.encalg+" "+T.enciv)}T.enc=wt},generatePBES2ASN1Param:function(T){var at={seq:[{seq:[{oid:"pkcs5PBES2"},{seq:[{seq:[{oid:"pkcs5PBKDF2"},{seq:[{octstr:{hex:T.salt}},{int:{hex:Ue(T.iter)}}]}]},{seq:[{oid:T.encalg},{octstr:{hex:T.enciv}}]}]}]},{octstr:{hex:T.enc}}]};return T.prf!="hmacWithSHA1"&&at.seq[0].seq[1].seq[0].seq[1].seq.push({seq:[{oid:T.prf},{null:""}]}),at},parseHexOfEncryptedPKCS8:function(T){var at=Ge,Y=at.getChildIdx,wt=at.getV,Tt={},Wt=Y(T,0);if(Wt.length!=2)throw new Error("malformed format: SEQUENCE(0).items != 2: "+Wt.length);Tt.ciphertext=wt(T,Wt[1]);var Gt=Y(T,Wt[0]);if(Gt.length!=2)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+Gt.length);if(wt(T,Gt[0])!="2a864886f70d01050d")throw new Error("this only supports pkcs5PBES2");var ve=Y(T,Gt[1]);if(Gt.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+ve.length);var be=Y(T,ve[1]);if(be.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+be.length);if(wt(T,be[0])!="2a864886f70d0307")throw"this only supports TripleDES";Tt.encryptionSchemeAlg="TripleDES",Tt.encryptionSchemeIV=wt(T,be[1]);var d=Y(T,ve[0]);if(d.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+d.length);if(wt(T,d[0])!="2a864886f70d01050c")throw new Error("this only supports pkcs5PBKDF2");var S=Y(T,d[1]);if(S.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+S.length);Tt.pbkdf2Salt=wt(T,S[0]);var st=wt(T,S[1]);try{Tt.pbkdf2Iter=parseInt(st,16)}catch{throw new Error("malformed format pbkdf2Iter: "+st)}return Tt},getPBKDF2KeyHexFromParam:function(T,at){var Y=p.enc.Hex.parse(T.pbkdf2Salt),wt=T.pbkdf2Iter,Tt=p.PBKDF2(at,Y,{keySize:192/32,iterations:wt}),Wt=p.enc.Hex.stringify(Tt);return Wt},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(T,at){var Y=On(T,"ENCRYPTED PRIVATE KEY"),wt=this.parseHexOfEncryptedPKCS8(Y),Tt=Nr.getPBKDF2KeyHexFromParam(wt,at),Wt={};Wt.ciphertext=p.enc.Hex.parse(wt.ciphertext);var Gt=p.enc.Hex.parse(Tt),ve=p.enc.Hex.parse(wt.encryptionSchemeIV),be=p.TripleDES.decrypt(Wt,Gt,{iv:ve}),d=p.enc.Hex.stringify(be);return d},parsePBES2:function(T){var at=Ge.parse(T);if(wn(at,"seq.0.seq.0.oid")!="pkcs5PBES2"||wn(at,"seq.0.seq.1.seq.0.seq.0.oid")!="pkcs5PBKDF2")throw new Error("not pkcs5PBES2 and pkcs5PBKDF2 used");var Y=wn(at,"seq.0.seq.1.seq.0.seq.1.seq");if(Y==null)throw new Error("PBKDF2 parameter not found");var wt=wn(Y,"0.octstr.hex"),Tt=wn(Y,"1.int.hex"),Wt=wn(Y,"2.seq.0.oid","hmacWithSHA1"),Gt=-1;try{Gt=parseInt(Tt,16)}catch{throw new Error("iter not proper value")}var ve=wn(at,"seq.0.seq.1.seq.1.seq.0.oid"),be=wn(at,"seq.0.seq.1.seq.1.seq.1.octstr.hex"),d=wn(at,"seq.1.octstr.hex");if(ve==null||be==null||d==null)throw new Error("encalg, enciv or enc is undefined");var S={salt:wt,iter:Gt,prf:Wt,encalg:ve,enciv:be,enc:d};return S},getDKFromPBES2Param:function(T,at){var Y={hmacWithSHA1:p.algo.SHA1,hmacWithSHA224:p.algo.SHA224,hmacWithSHA256:p.algo.SHA256,hmacWithSHA384:p.algo.SHA384,hmacWithSHA512:p.algo.SHA512},wt={"des-EDE3-CBC":192/32,"aes128-CBC":128/32,"aes256-CBC":256/32},Tt=Y[T.prf];if(Tt==null)throw new Error("unsupported prf");var Wt=wt[T.encalg];if(Wt==null)throw new Error("unsupported encalg");var Gt=p.enc.Hex.parse(T.salt),ve=T.iter;try{var be=p.PBKDF2(at,Gt,{keySize:Wt,iterations:ve,hasher:Tt});return p.enc.Hex.stringify(be)}catch(d){throw new Error("PBKDF2 error: "+d+" "+JSON.stringify(T)+" "+at)}},getPlainHexFromEncryptedPKCS8PEM:function(T,at){if(T.indexOf("BEGIN ENCRYPTED PRIVATE KEY")==-1)throw new Error("not Encrypted PKCS#8 PEM string");var Y=On(T),wt;try{wt=Nr.parsePBES2(Y)}catch(Wt){throw new Error("malformed PBES2 format: "+Wt.message)}var Tt=Nr.getDKFromPBES2Param(wt,at);return E.crypto.Cipher.decrypt(wt.enc,Tt,wt.encalg,{iv:wt.enciv})},getKeyFromEncryptedPKCS8PEM:function(T,at){var Y=this.getPlainHexFromEncryptedPKCS8PEM(T,at),wt=this.getKeyFromPlainPrivatePKCS8Hex(Y);return wt},parsePlainPrivatePKCS8Hex:function(T){var at=Ge,Y=at.getChildIdx,wt=at.getV,Tt={};if(Tt.algparam=null,T.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var Wt=Y(T,0);if(Wt.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(T.substr(Wt[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var Gt=Y(T,Wt[1]);if(Gt.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(T.substr(Gt[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if(Tt.algoid=wt(T,Gt[0]),T.substr(Gt[1],2)=="06"&&(Tt.algparam=wt(T,Gt[1])),T.substr(Wt[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return Tt.keyidx=at.getVidx(T,Wt[2]),Tt},getKeyFromPlainPrivatePKCS8PEM:function(T){var at=On(T,"PRIVATE KEY"),Y=this.getKeyFromPlainPrivatePKCS8Hex(at);return Y},getKeyFromPlainPrivatePKCS8Hex:function(T){var at=this.parsePlainPrivatePKCS8Hex(T),Y;if(at.algoid=="2a864886f70d010101")Y=new Er;else if(at.algoid=="2a8648ce380401")Y=new E.crypto.DSA;else if(at.algoid=="2a8648ce3d0201")Y=new E.crypto.ECDSA;else throw new Error("unsupported private key algorithm");return Y.readPKCS8PrvKeyHex(T),Y},_getKeyFromPublicPKCS8Hex:function(T){var at,Y=Ge.getVbyList(T,0,[0,0],"06");if(Y==="2a864886f70d010101")at=new Er;else if(Y==="2a8648ce380401")at=new E.crypto.DSA;else if(Y==="2a8648ce3d0201")at=new E.crypto.ECDSA;else throw new Error("unsupported PKCS#8 public key hex");return at.readPKCS8PubKeyHex(T),at},parsePublicRawRSAKeyHex:function(T){var at=Ge,Y=at.getChildIdx,wt=at.getV,Tt={};if(T.substr(0,2)!="30")throw new Error("malformed RSA key(code:001)");var Wt=Y(T,0);if(Wt.length!=2)throw new Error("malformed RSA key(code:002)");if(T.substr(Wt[0],2)!="02")throw new Error("malformed RSA key(code:003)");if(Tt.n=wt(T,Wt[0]),T.substr(Wt[1],2)!="02")throw new Error("malformed RSA key(code:004)");return Tt.e=wt(T,Wt[1]),Tt},parsePublicPKCS8Hex:function(T){var at=Ge,Y=at.getChildIdx,wt=at.getV,Tt={};Tt.algparam=null;var Wt=Y(T,0);if(Wt.length!=2)throw new Error("outer DERSequence shall have 2 elements: "+Wt.length);var Gt=Wt[0];if(T.substr(Gt,2)!="30")throw new Error("malformed PKCS8 public key(code:001)");var ve=Y(T,Gt);if(ve.length!=2)throw new Error("malformed PKCS8 public key(code:002)");if(T.substr(ve[0],2)!="06")throw new Error("malformed PKCS8 public key(code:003)");if(Tt.algoid=wt(T,ve[0]),T.substr(ve[1],2)=="06"?Tt.algparam=wt(T,ve[1]):T.substr(ve[1],2)=="30"&&(Tt.algparam={},Tt.algparam.p=at.getVbyList(T,ve[1],[0],"02"),Tt.algparam.q=at.getVbyList(T,ve[1],[1],"02"),Tt.algparam.g=at.getVbyList(T,ve[1],[2],"02")),T.substr(Wt[1],2)!="03")throw new Error("malformed PKCS8 public key(code:004)");return Tt.key=wt(T,Wt[1]).substr(2),Tt}}})();Nr.getKey=function(e,l,a){var h=Ge,b=h.getChildIdx,C=h.getV,x=h.getVbyList,_=E.crypto,L=_.ECDSA,V=_.DSA,ht=Er,gt=On,P=Nr;if(typeof ht<"u"&&e instanceof ht||typeof L<"u"&&e instanceof L||typeof V<"u"&&e instanceof V)return e;if(e.curve!==void 0&&e.xy!==void 0&&e.d===void 0)return new L({pub:e.xy,curve:e.curve});if(e.curve!==void 0&&e.d!==void 0)return new L({prv:e.d,curve:e.curve});if(e.kty===void 0&&e.n!==void 0&&e.e!==void 0&&e.d===void 0){var I=new ht;return I.setPublic(e.n,e.e),I}if(e.kty===void 0&&e.n!==void 0&&e.e!==void 0&&e.d!==void 0&&e.p!==void 0&&e.q!==void 0&&e.dp!==void 0&&e.dq!==void 0&&e.co!==void 0&&e.qi===void 0){var I=new ht;return I.setPrivateEx(e.n,e.e,e.d,e.p,e.q,e.dp,e.dq,e.co),I}if(e.kty===void 0&&e.n!==void 0&&e.e!==void 0&&e.d!==void 0&&e.p===void 0){var I=new ht;return I.setPrivate(e.n,e.e,e.d),I}if(e.p!==void 0&&e.q!==void 0&&e.g!==void 0&&e.y!==void 0&&e.x===void 0){var I=new V;return I.setPublic(e.p,e.q,e.g,e.y),I}if(e.p!==void 0&&e.q!==void 0&&e.g!==void 0&&e.y!==void 0&&e.x!==void 0){var I=new V;return I.setPrivate(e.p,e.q,e.g,e.y,e.x),I}if(e.kty==="RSA"&&e.n!==void 0&&e.e!==void 0&&e.d===void 0){var I=new ht;return I.setPublic(Dn(e.n),Dn(e.e)),I}if(e.kty==="RSA"&&e.n!==void 0&&e.e!==void 0&&e.d!==void 0&&e.p!==void 0&&e.q!==void 0&&e.dp!==void 0&&e.dq!==void 0&&e.qi!==void 0){var I=new ht;return I.setPrivateEx(Dn(e.n),Dn(e.e),Dn(e.d),Dn(e.p),Dn(e.q),Dn(e.dp),Dn(e.dq),Dn(e.qi)),I}if(e.kty==="RSA"&&e.n!==void 0&&e.e!==void 0&&e.d!==void 0){var I=new ht;return I.setPrivate(Dn(e.n),Dn(e.e),Dn(e.d)),I}if(e.kty==="EC"&&e.crv!==void 0&&e.x!==void 0&&e.y!==void 0&&e.d===void 0){var ut=new L({curve:e.crv}),T=ut.ecparams.keycharlen,at=("0000000000"+Dn(e.x)).slice(-T),Y=("0000000000"+Dn(e.y)).slice(-T),wt="04"+at+Y;return ut.setPublicKeyHex(wt),ut}if(e.kty==="EC"&&e.crv!==void 0&&e.x!==void 0&&e.y!==void 0&&e.d!==void 0){var ut=new L({curve:e.crv}),T=ut.ecparams.keycharlen,at=("0000000000"+Dn(e.x)).slice(-T),Y=("0000000000"+Dn(e.y)).slice(-T),wt="04"+at+Y,Tt=("0000000000"+Dn(e.d)).slice(-T);return ut.setPublicKeyHex(wt),ut.setPrivateKeyHex(Tt),ut}if(a==="pkcs5prv"){var Wt=e,h=Ge,Gt,I;if(Gt=b(Wt,0),Gt.length===9)I=new ht,I.readPKCS5PrvKeyHex(Wt);else if(Gt.length===6)I=new V,I.readPKCS5PrvKeyHex(Wt);else if(Gt.length>2&&Wt.substr(Gt[1],2)==="04")I=new L,I.readPKCS5PrvKeyHex(Wt);else throw new Error("unsupported PKCS#1/5 hexadecimal key");return I}if(a==="pkcs8prv"){var I=P.getKeyFromPlainPrivatePKCS8Hex(e);return I}if(a==="pkcs8pub")return P._getKeyFromPublicPKCS8Hex(e);if(a==="x509pub")return nr.getPublicKeyFromCertHex(e);if(e.indexOf("-END CERTIFICATE-",0)!=-1||e.indexOf("-END X509 CERTIFICATE-",0)!=-1||e.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return nr.getPublicKeyFromCertPEM(e);if(e.indexOf("-END PUBLIC KEY-")!=-1){var ve=On(e,"PUBLIC KEY");return P._getKeyFromPublicPKCS8Hex(ve)}if(e.indexOf("-END RSA PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")==-1){var be=gt(e,"RSA PRIVATE KEY");return P.getKey(be,null,"pkcs5prv")}if(e.indexOf("-END DSA PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")==-1){var d=gt(e,"DSA PRIVATE KEY"),S=x(d,0,[1],"02"),st=x(d,0,[2],"02"),z=x(d,0,[3],"02"),_t=x(d,0,[4],"02"),Mt=x(d,0,[5],"02"),I=new V;return I.setPrivate(new w(S,16),new w(st,16),new w(z,16),new w(_t,16),new w(Mt,16)),I}if(e.indexOf("-END EC PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")==-1){var be=gt(e,"EC PRIVATE KEY");return P.getKey(be,null,"pkcs5prv")}if(e.indexOf("-END PRIVATE KEY-")!=-1)return P.getKeyFromPlainPrivatePKCS8PEM(e);if(e.indexOf("-END RSA PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")!=-1){var te=P.getDecryptedKeyHex(e,l),ie=new Er;return ie.readPKCS5PrvKeyHex(te),ie}if(e.indexOf("-END EC PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")!=-1){var d=P.getDecryptedKeyHex(e,l),I=x(d,0,[1],"04"),ge=x(d,0,[2,0],"06"),Se=x(d,0,[3,0],"03").substr(2),wr="";if(E.crypto.OID.oidhex2name[ge]!==void 0)wr=E.crypto.OID.oidhex2name[ge];else throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+ge);var ut=new L({curve:wr});return ut.setPublicKeyHex(Se),ut.setPrivateKeyHex(I),ut.isPublic=!1,ut}if(e.indexOf("-END DSA PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")!=-1){var d=P.getDecryptedKeyHex(e,l),S=x(d,0,[1],"02"),st=x(d,0,[2],"02"),z=x(d,0,[3],"02"),_t=x(d,0,[4],"02"),Mt=x(d,0,[5],"02"),I=new V;return I.setPrivate(new w(S,16),new w(st,16),new w(z,16),new w(_t,16),new w(Mt,16)),I}if(e.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return P.getKeyFromEncryptedPKCS8PEM(e,l);throw new Error("not supported argument")},Nr.generateKeypair=function(e,l){if(e=="RSA"){var a=l,h=new Er;h.generate(a,"10001"),h.isPrivate=!0,h.isPublic=!0;var b=new Er,C=h.n.toString(16),x=h.e.toString(16);b.setPublic(C,x),b.isPrivate=!1,b.isPublic=!0;var _={};return _.prvKeyObj=h,_.pubKeyObj=b,_}else if(e=="EC"){var L=l,V=new E.crypto.ECDSA({curve:L}),ht=V.generateKeyPairHex(),h=new E.crypto.ECDSA({curve:L});h.setPublicKeyHex(ht.ecpubhex),h.setPrivateKeyHex(ht.ecprvhex),h.isPrivate=!0,h.isPublic=!1;var b=new E.crypto.ECDSA({curve:L});b.setPublicKeyHex(ht.ecpubhex),b.isPrivate=!1,b.isPublic=!0;var _={};return _.prvKeyObj=h,_.pubKeyObj=b,_}else throw new Error("unknown algorithm: "+e)},Nr.getPEM=function(e,l,a,h,b,C){var x=E,_=x.asn1,L=_.DERObjectIdentifier,V=_.DERInteger,ht=_.ASN1Util.newObject,gt=_.x509,P=gt.SubjectPublicKeyInfo,I=x.crypto,ut=I.DSA,T=I.ECDSA,at=Er;function Y(ie){var ge=ht({seq:[{int:0},{int:{bigint:ie.n}},{int:ie.e},{int:{bigint:ie.d}},{int:{bigint:ie.p}},{int:{bigint:ie.q}},{int:{bigint:ie.dmp1}},{int:{bigint:ie.dmq1}},{int:{bigint:ie.coeff}}]});return ge}function wt(ie){var ge=ht({seq:[{int:1},{octstr:{hex:ie.prvKeyHex}},{tag:["a0",!0,{oid:{name:ie.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+ie.pubKeyHex}}]}]});return ge}function Tt(ie){var ge=ht({seq:[{int:0},{int:{bigint:ie.p}},{int:{bigint:ie.q}},{int:{bigint:ie.g}},{int:{bigint:ie.y}},{int:{bigint:ie.x}}]});return ge}if((at!==void 0&&e instanceof at||ut!==void 0&&e instanceof ut||T!==void 0&&e instanceof T)&&e.isPublic==!0&&(l===void 0||l=="PKCS8PUB")){var Wt=new P(e),Gt=Wt.tohex();return $e(Gt,"PUBLIC KEY")}if(l=="PKCS1PRV"&&at!==void 0&&e instanceof at&&(a===void 0||a==null)&&e.isPrivate==!0){var Wt=Y(e),Gt=Wt.tohex();return $e(Gt,"RSA PRIVATE KEY")}if(l=="PKCS1PRV"&&T!==void 0&&e instanceof T&&(a===void 0||a==null)&&e.isPrivate==!0){var ve=new L({name:e.curveName}),be=ve.tohex(),d=wt(e),S=d.tohex(),st="";return st+=$e(be,"EC PARAMETERS"),st+=$e(S,"EC PRIVATE KEY"),st}if(l=="PKCS1PRV"&&ut!==void 0&&e instanceof ut&&(a===void 0||a==null)&&e.isPrivate==!0){var Wt=Tt(e),Gt=Wt.tohex();return $e(Gt,"DSA PRIVATE KEY")}if(l=="PKCS5PRV"&&at!==void 0&&e instanceof at&&a!==void 0&&a!=null&&e.isPrivate==!0){var Wt=Y(e),Gt=Wt.tohex();return h===void 0&&(h="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",Gt,a,h,C)}if(l=="PKCS5PRV"&&T!==void 0&&e instanceof T&&a!==void 0&&a!=null&&e.isPrivate==!0){var Wt=wt(e),Gt=Wt.tohex();return h===void 0&&(h="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",Gt,a,h,C)}if(l=="PKCS5PRV"&&ut!==void 0&&e instanceof ut&&a!==void 0&&a!=null&&e.isPrivate==!0){var Wt=Tt(e),Gt=Wt.tohex();return h===void 0&&(h="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",Gt,a,h,C)}var z=function(ie,ge){if(typeof ge=="string")return Nr.getEncryptedPKCS8PEM(ie,ge);if(typeof ge=="object"&&wn(ge,"passcode")!=null){var Se=JSON.parse(JSON.stringify(ge)),wr=Se.passcode;return delete Se.passcode,Nr.getEncryptedPKCS8PEM(ie,wr,Se)}};if(l=="PKCS8PRV"&&at!=null&&e instanceof at&&e.isPrivate==!0){var _t=Y(e),Mt=_t.tohex(),Wt=ht({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:Mt}}]}),Gt=Wt.tohex();return a===void 0||a==null?$e(Gt,"PRIVATE KEY"):z(Gt,a)}if(l=="PKCS8PRV"&&T!==void 0&&e instanceof T&&e.isPrivate==!0){var te={seq:[{int:1},{octstr:{hex:e.prvKeyHex}}]};typeof e.pubKeyHex=="string"&&te.seq.push({tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]});var _t=new ht(te),Mt=_t.tohex(),Wt=ht({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:e.curveName}}]},{octstr:{hex:Mt}}]}),Gt=Wt.tohex();return a===void 0||a==null?$e(Gt,"PRIVATE KEY"):z(Gt,a)}if(l=="PKCS8PRV"&&ut!==void 0&&e instanceof ut&&e.isPrivate==!0){var _t=new V({bigint:e.x}),Mt=_t.tohex(),Wt=ht({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]}]},{octstr:{hex:Mt}}]}),Gt=Wt.tohex();return a===void 0||a==null?$e(Gt,"PRIVATE KEY"):z(Gt,a)}throw new Error("unsupported object nor format")},Nr.getKeyFromCSRPEM=function(e){var l=On(e,"CERTIFICATE REQUEST"),a=Nr.getKeyFromCSRHex(l);return a},Nr.getKeyFromCSRHex=function(e){var l=Nr.parseCSRHex(e),a=Nr.getKey(l.p8pubkeyhex,null,"pkcs8pub");return a},Nr.parseCSRHex=function(e){var l=Ge,a=l.getChildIdx,h=l.getTLV,b={},C=e;if(C.substr(0,2)!="30")throw new Error("malformed CSR(code:001)");var x=a(C,0);if(x.length<1)throw new Error("malformed CSR(code:002)");if(C.substr(x[0],2)!="30")throw new Error("malformed CSR(code:003)");var _=a(C,x[0]);if(_.length<3)throw new Error("malformed CSR(code:004)");return b.p8pubkeyhex=h(C,_[2]),b},Nr.getKeyID=function(e){var l=Nr,a=Ge;typeof e=="string"&&e.indexOf("BEGIN ")!=-1&&(e=l.getKey(e));var h=On(l.getPEM(e)),b=a.getIdxbyList(h,0,[1]),C=a.getV(h,b).substring(2);return E.crypto.Util.hashHex(C,"sha1")},Nr.getJWK=function(e,l,a,h,b){var C,x={},_,L=E.crypto.Util.hashHex;if(typeof e=="string")C=Nr.getKey(e),e.indexOf("CERTIFICATE")!=-1&&(_=On(e));else if(typeof e=="object")e instanceof nr?(C=e.getPublicKey(),_=e.hex):C=e;else throw new Error("unsupported keyinfo type");if(C instanceof Er&&C.isPrivate)x.kty="RSA",x.n=An(C.n.toString(16)),x.e=An(C.e.toString(16)),x.d=An(C.d.toString(16)),x.p=An(C.p.toString(16)),x.q=An(C.q.toString(16)),x.dp=An(C.dmp1.toString(16)),x.dq=An(C.dmq1.toString(16)),x.qi=An(C.coeff.toString(16));else if(C instanceof Er&&C.isPublic)x.kty="RSA",x.n=An(C.n.toString(16)),x.e=An(C.e.toString(16));else if(C instanceof E.crypto.ECDSA&&C.isPrivate){var V=C.getShortNISTPCurveName();if(V!=="P-256"&&V!=="P-384"&&V!=="P-521")throw new Error("unsupported curve name for JWT: "+V);var ht=C.getPublicKeyXYHex();x.kty="EC",x.crv=V,x.x=An(ht.x),x.y=An(ht.y),x.d=An(C.prvKeyHex)}else if(C instanceof E.crypto.ECDSA&&C.isPublic){var V=C.getShortNISTPCurveName();if(V!=="P-256"&&V!=="P-384"&&V!=="P-521")throw new Error("unsupported curve name for JWT: "+V);var ht=C.getPublicKeyXYHex();x.kty="EC",x.crv=V,x.x=An(ht.x),x.y=An(ht.y)}if(x.kty==null)throw new Error("unsupported keyinfo");return!C.isPrivate&&l!=!0&&(x.kid=E.jws.JWS.getJWKthumbprint(x)),_!=null&&a!=!0&&(x.x5c=[A(_)]),_!=null&&h!=!0&&(x.x5t=Rr(A(L(_,"sha1")))),_!=null&&b!=!0&&(x["x5t#S256"]=Rr(A(L(_,"sha256")))),x},Nr.getJWKFromKey=function(e){return Nr.getJWK(e,!0,!0,!0,!0)},Er.getPosArrayOfChildrenFromHex=function(e){return Ge.getChildIdx(e,0)},Er.getHexValueArrayOfChildrenFromHex=function(e){var l=Ge,a=l.getV,P=Er.getPosArrayOfChildrenFromHex(e),h=a(e,P[0]),b=a(e,P[1]),C=a(e,P[2]),x=a(e,P[3]),_=a(e,P[4]),L=a(e,P[5]),V=a(e,P[6]),ht=a(e,P[7]),gt=a(e,P[8]),P=new Array;return P.push(h,b,C,x,_,L,V,ht,gt),P},Er.prototype.readPrivateKeyFromPEMString=function(e){var l=On(e),a=Er.getHexValueArrayOfChildrenFromHex(l);this.setPrivateEx(a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8])},Er.prototype.readPKCS5PrvKeyHex=function(e){var l=Er.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8])},Er.prototype.readPKCS8PrvKeyHex=function(e){var l,a,h,b,C,x,_,L,V=Ge,ht=V.getVbyListEx;if(V.isASN1HEX(e)===!1)throw new Error("not ASN.1 hex string");try{l=ht(e,0,[2,0,1],"02"),a=ht(e,0,[2,0,2],"02"),h=ht(e,0,[2,0,3],"02"),b=ht(e,0,[2,0,4],"02"),C=ht(e,0,[2,0,5],"02"),x=ht(e,0,[2,0,6],"02"),_=ht(e,0,[2,0,7],"02"),L=ht(e,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(l,a,h,b,C,x,_,L)},Er.prototype.readPKCS5PubKeyHex=function(e){var l=Ge,a=l.getV;if(l.isASN1HEX(e)===!1)throw new Error("keyHex is not ASN.1 hex string");var h=l.getChildIdx(e,0);if(h.length!==2||e.substr(h[0],2)!=="02"||e.substr(h[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var b=a(e,h[0]),C=a(e,h[1]);this.setPublic(b,C)},Er.prototype.readPKCS8PubKeyHex=function(e){var l=Ge;if(l.isASN1HEX(e)===!1)throw new Error("not ASN.1 hex string");if(l.getTLVbyListEx(e,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var a=l.getTLVbyListEx(e,0,[1,0]);this.readPKCS5PubKeyHex(a)},Er.prototype.readCertPubKeyHex=function(e,l){var a,h;a=new nr,a.readCertHex(e),h=a.getPublicKeyHex(),this.readPKCS8PubKeyHex(h)};var lo=new RegExp("[^0-9a-f]","gi");function ri(e,l){for(var a="",h=l/4-e.length,b=0;b<h;b++)a=a+"0";return a+e}Er.prototype.sign=function(e,l){var a=function(b){return E.crypto.Util.hashString(b,l)},h=a(e);return this.signWithMessageHash(h,l)},Er.prototype.signWithMessageHash=function(e,l){var a=E.crypto.Util.getPaddedDigestInfoHex(e,l,this.n.bitLength()),h=en(a,16),b=this.doPrivate(h),C=b.toString(16);return ri(C,this.n.bitLength())};function Qi(e,l,a){for(var h="",b=0;h.length<l;)h+=gr(a(kn(e+String.fromCharCode.apply(String,[(b&4278190080)>>24,(b&16711680)>>16,(b&65280)>>8,b&255])))),b+=1;return h}Er.prototype.signPSS=function(e,l,a){var h=function(C){return E.crypto.Util.hashHex(C,l)},b=h(kn(e));return a===void 0&&(a=-1),this.signWithMessageHashPSS(b,l,a)},Er.prototype.signWithMessageHashPSS=function(e,l,a){var h=gr(e),b=h.length,C=this.n.bitLength()-1,x=Math.ceil(C/8),_,L=function(at){return E.crypto.Util.hashHex(at,l)};if(a===-1||a===void 0)a=b;else if(a===-2)a=x-b-2;else if(a<-2)throw new Error("invalid salt length");if(x<b+a+2)throw new Error("data too long");var V="";a>0&&(V=new Array(a),new nn().nextBytes(V),V=String.fromCharCode.apply(String,V));var ht=gr(L(kn("\0\0\0\0\0\0\0\0"+h+V))),gt=[];for(_=0;_<x-a-b-2;_+=1)gt[_]=0;var P=String.fromCharCode.apply(String,gt)+""+V,I=Qi(ht,P.length,L),ut=[];for(_=0;_<P.length;_+=1)ut[_]=P.charCodeAt(_)^I.charCodeAt(_);var T=65280>>8*x-C&255;for(ut[0]&=~T,_=0;_<b;_++)ut.push(ht.charCodeAt(_));return ut.push(188),ri(this.doPrivate(new w(ut)).toString(16),this.n.bitLength())};function Oi(e){for(var l in E.crypto.Util.DIGESTINFOHEAD){var a=E.crypto.Util.DIGESTINFOHEAD[l],h=a.length;if(e.substring(0,h)==a){var b=[l,e.substring(h)];return b}}return[]}Er.prototype.verify=function(e,l){if(l=l.toLowerCase(),l.match(/^[0-9a-f]+$/)==null)return!1;var a=en(l,16),h=this.n.bitLength();if(a.bitLength()>h)return!1;var b=this.doPublic(a),C=b.toString(16);if(C.length+3!=h/4)return!1;var x=C.replace(/^1f+00/,""),_=Oi(x);if(_.length==0)return!1;var L=_[0],V=_[1],ht=function(P){return E.crypto.Util.hashString(P,L)},gt=ht(e);return V==gt},Er.prototype.verifyWithMessageHash=function(e,l){if(l.length!=Math.ceil(this.n.bitLength()/4))return!1;var a=en(l,16);if(a.bitLength()>this.n.bitLength())return 0;var h=this.doPublic(a),b=h.toString(16).replace(/^1f+00/,""),C=Oi(b);if(C.length==0)return!1;var x=C[0],_=C[1];return _==e},Er.prototype.verifyPSS=function(e,l,a,h){var b=function(x){return E.crypto.Util.hashHex(x,a)},C=b(kn(e));return h===void 0&&(h=-1),this.verifyWithMessageHashPSS(C,l,a,h)},Er.prototype.verifyWithMessageHashPSS=function(e,l,a,h){if(l.length!=Math.ceil(this.n.bitLength()/4))return!1;var b=new w(l,16),C=function(wt){return E.crypto.Util.hashHex(wt,a)},x=gr(e),_=x.length,L=this.n.bitLength()-1,V=Math.ceil(L/8),ht;if(h===-1||h===void 0)h=_;else if(h===-2)h=V-_-2;else if(h<-2)throw new Error("invalid salt length");if(V<_+h+2)throw new Error("data too long");var gt=this.doPublic(b).toByteArray();for(ht=0;ht<gt.length;ht+=1)gt[ht]&=255;for(;gt.length<V;)gt.unshift(0);if(gt[V-1]!==188)throw new Error("encoded message does not end in 0xbc");gt=String.fromCharCode.apply(String,gt);var P=gt.substr(0,V-_-1),I=gt.substr(P.length,_),ut=65280>>8*V-L&255;if(P.charCodeAt(0)&ut)throw new Error("bits beyond keysize not zero");var T=Qi(I,P.length,C),at=[];for(ht=0;ht<P.length;ht+=1)at[ht]=P.charCodeAt(ht)^T.charCodeAt(ht);at[0]&=~ut;var Y=V-_-h-2;for(ht=0;ht<Y;ht+=1)if(at[ht]!==0)throw new Error("leftmost octets not zero");if(at[Y]!==1)throw new Error("0x01 marker not found");return I===gr(C(kn("\0\0\0\0\0\0\0\0"+x+String.fromCharCode.apply(String,at.slice(-h)))))},Er.SALT_LEN_HLEN=-1,Er.SALT_LEN_MAX=-2,Er.SALT_LEN_RECOVER=-2;function nr(e){var l=Ge,a=l.getChildIdx,h=l.getV,b=l.dump,C=l.parse,x=l.getTLV,_=l.getVbyList,L=l.getVbyListEx,V=l.getTLVbyList,ht=l.getTLVbyListEx,gt=l.getIdxbyList,P=l.getIdxbyListEx,I=l.getVidx,ut=l.getInt,T=l.oidname,at=l.hextooidstr,Y=nr,wt=On,Tt,Wt=Error;try{Tt=E.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var d=V(this.hex,0,[0,0]);if(d.substr(0,2)=="a0"){var S=V(d,0,[0]),st=ut(S,0);if(st<0||2<st)throw new Error("malformed version field");return this.version=st+1,this.version}else return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return L(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var d=ht(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(d)},this.getAlgorithmIdentifierName=function(d){for(var S in Tt)if(d===Tt[S])return S;return T(L(d,0,[0],"06"))},this.getIssuer=function(d,S){return this.getX500Name(this.getIssuerHex(),d,S)},this.getIssuerHex=function(){return V(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){var d=this.getIssuer();return d.str},this.getSubject=function(d,S){return this.getX500Name(this.getSubjectHex(),d,S)},this.getSubjectHex=function(){return V(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){var d=this.getSubject();return d.str},this.getNotBefore=function(){var d=_(this.hex,0,[0,4+this.foffset,0]);return d=d.replace(/(..)/g,"%$1"),d=decodeURIComponent(d),d},this.getNotAfter=function(){var d=_(this.hex,0,[0,4+this.foffset,1]);return d=d.replace(/(..)/g,"%$1"),d=decodeURIComponent(d),d},this.getPublicKeyHex=function(){return this.getSPKI()},this.getSPKI=function(){return V(this.hex,0,[0,6+this.foffset],"30")},this.getSPKIValue=function(){var d=this.getSPKI();return d==null?null:_(d,0,[1],"03",!0)},this.getPublicKeyIdx=function(){return gt(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var d=this.getPublicKeyIdx();return gt(this.hex,d,[1,0],"30")},this.getPublicKey=function(){return Nr.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var d=V(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(d)},this.getSignatureValueHex=function(){return _(this.hex,0,[2],"03",!0)},this.verifySignature=function(d){var S=this.getSignatureAlgorithmField(),st=this.getSignatureValueHex(),z=V(this.hex,0,[0],"30"),_t=new E.crypto.Signature({alg:S});return _t.init(d),_t.updateHex(z),_t.verify(st)},this.parseExt=function(d){var S,st,z;if(d===void 0){if(z=this.hex,this.version!==3)return-1;S=gt(z,0,[0,7,0],"30"),st=a(z,S)}else{z=On(d);var _t=gt(z,0,[0,3,0,0],"06");if(h(z,_t)!="2a864886f70d01090e"){this.aExtInfo=new Array;return}S=gt(z,0,[0,3,0,1,0],"30"),st=a(z,S),this.hex=z}this.aExtInfo=new Array;for(var Mt=0;Mt<st.length;Mt++){var te={};te.critical=!1;var ie=a(z,st[Mt]),ge=0;ie.length===3&&(te.critical=!0,ge=1),te.oid=l.hextooidstr(_(z,st[Mt],[0],"06"));var Se=gt(z,st[Mt],[1+ge]);te.vidx=I(z,Se),this.aExtInfo.push(te)}},this.getExtInfo=function(d){var S=this.aExtInfo,st=d;if(d.match(/^[0-9.]+$/)||(st=E.asn1.x509.OID.name2oid(d)),st!==""){for(var z=0;z<S.length;z++)if(S[z].oid===st)return S[z]}},this.getCriticalExtV=function(d,S,st){if(S!=null)return[S,st];var z=this.getExtInfo(d);return z==null?[null,null]:[x(this.hex,z.vidx),z.critical]},this.getExtBasicConstraints=function(d,S){if(d===void 0&&S===void 0){var st=this.getExtInfo("basicConstraints");if(st===void 0)return;d=x(this.hex,st.vidx),S=st.critical}var z={extname:"basicConstraints"};if(S&&(z.critical=!0),d==="3000")return z;if(d==="30030101ff")return z.cA=!0,z;if(d.substr(0,12)==="30060101ff02"){var _t=h(d,10),Mt=parseInt(_t,16);return z.cA=!0,z.pathLen=Mt,z}throw new Error("hExtV parse error: "+d)},this.getExtNameConstraints=function(d,S){var st=this.getCriticalExtV("nameConstraints",d,S);if(d=st[0],S=st[1],d!=null){var z={extname:"nameConstraints"};S&&(z.critical=!0);for(var _t=a(d,0),Mt=0;Mt<_t.length;Mt++){for(var te=[],ie=a(d,_t[Mt]),ge=0;ge<ie.length;ge++){var Se=x(d,ie[ge]),wr=this.getGeneralSubtree(Se);te.push(wr)}var xr=d.substr(_t[Mt],2);xr=="a0"?z.permit=te:xr=="a1"&&(z.exclude=te)}return z}},this.getGeneralSubtree=function(d){var S=a(d,0),st=S.length;if(st<1||2<st)throw new Error("wrong num elements");for(var z=this.getGeneralName(x(d,S[0])),_t=1;_t<st;_t++){var Mt=d.substr(S[_t],2),te=h(d,S[_t]),ie=parseInt(te,16);Mt=="80"&&(z.min=ie),Mt=="81"&&(z.max=ie)}return z},this.getExtKeyUsage=function(d,S){var st=this.getCriticalExtV("keyUsage",d,S);if(d=st[0],S=st[1],d!=null){var z={extname:"keyUsage"};return S&&(z.critical=!0),z.names=this.getExtKeyUsageString(d).split(","),z}},this.getExtKeyUsageBin=function(d){if(d===void 0){var S=this.getExtInfo("keyUsage");if(S===void 0)return"";d=x(this.hex,S.vidx)}if(d.length!=8&&d.length!=10)throw new Error("malformed key usage value: "+d);var st="000000000000000"+parseInt(d.substr(6),16).toString(2);return d.length==8&&(st=st.slice(-8)),d.length==10&&(st=st.slice(-16)),st=st.replace(/0+$/,""),st==""&&(st="0"),st},this.getExtKeyUsageString=function(d){for(var S=this.getExtKeyUsageBin(d),st=new Array,z=0;z<S.length;z++)S.substr(z,1)=="1"&&st.push(nr.KEYUSAGE_NAME[z]);return st.join(",")},this.getExtSubjectKeyIdentifier=function(d,S){if(d===void 0&&S===void 0){var st=this.getExtInfo("subjectKeyIdentifier");if(st===void 0)return;d=x(this.hex,st.vidx),S=st.critical}var z={extname:"subjectKeyIdentifier"};S&&(z.critical=!0);var _t=h(d,0);return z.kid={hex:_t},z},this.getExtAuthorityKeyIdentifier=function(d,S){if(d===void 0&&S===void 0){var st=this.getExtInfo("authorityKeyIdentifier");if(st===void 0)return;d=x(this.hex,st.vidx),S=st.critical}var z={extname:"authorityKeyIdentifier"};S&&(z.critical=!0);for(var _t=a(d,0),Mt=0;Mt<_t.length;Mt++){var te=d.substr(_t[Mt],2);if(te==="80"&&(z.kid={hex:h(d,_t[Mt])}),te==="a1"){var ie=x(d,_t[Mt]),ge=this.getGeneralNames(ie);z.issuer=ge[0].dn}te==="82"&&(z.sn={hex:h(d,_t[Mt])})}return z},this.getExtExtKeyUsage=function(d,S){if(d===void 0&&S===void 0){var st=this.getExtInfo("extKeyUsage");if(st===void 0)return;d=x(this.hex,st.vidx),S=st.critical}var z={extname:"extKeyUsage",array:[]};S&&(z.critical=!0);for(var _t=a(d,0),Mt=0;Mt<_t.length;Mt++)z.array.push(T(h(d,_t[Mt])));return z},this.getExtExtKeyUsageName=function(){var d=this.getExtInfo("extKeyUsage");if(d===void 0)return d;var S=new Array,st=x(this.hex,d.vidx);if(st==="")return S;for(var z=a(st,0),_t=0;_t<z.length;_t++)S.push(T(h(st,z[_t])));return S},this.getExtSubjectAltName=function(d,S){if(d===void 0&&S===void 0){var st=this.getExtInfo("subjectAltName");if(st===void 0)return;d=x(this.hex,st.vidx),S=st.critical}var z={extname:"subjectAltName",array:[]};return S&&(z.critical=!0),z.array=this.getGeneralNames(d),z},this.getExtIssuerAltName=function(d,S){if(d===void 0&&S===void 0){var st=this.getExtInfo("issuerAltName");if(st===void 0)return;d=x(this.hex,st.vidx),S=st.critical}var z={extname:"issuerAltName",array:[]};return S&&(z.critical=!0),z.array=this.getGeneralNames(d),z},this.getGeneralNames=function(d){for(var S=a(d,0),st=[],z=0;z<S.length;z++){var _t=this.getGeneralName(x(d,S[z]));_t!==void 0&&st.push(_t)}return st},this.getGeneralName=function(d){var S=d.substr(0,2),st=h(d,0),z=gr(st);if(S=="81")return{rfc822:z};if(S=="82")return{dns:z};if(S=="86")return{uri:z};if(S=="87")return{ip:Rs(st)};if(S=="a4")return{dn:this.getX500Name(st)};if(S=="a0")return{other:this.getOtherName(d)}},this.getExtSubjectAltName2=function(){var d,S,st,z=this.getExtInfo("subjectAltName");if(z===void 0)return z;for(var _t=new Array,Mt=x(this.hex,z.vidx),te=a(Mt,0),ie=0;ie<te.length;ie++)st=Mt.substr(te[ie],2),d=h(Mt,te[ie]),st==="81"&&(S=_r(d),_t.push(["MAIL",S])),st==="82"&&(S=_r(d),_t.push(["DNS",S])),st==="84"&&(S=nr.hex2dn(d,0),_t.push(["DN",S])),st==="86"&&(S=_r(d),_t.push(["URI",S])),st==="87"&&(S=Rs(d),_t.push(["IP",S]));return _t},this.getExtCRLDistributionPoints=function(d,S){if(d===void 0&&S===void 0){var st=this.getExtInfo("cRLDistributionPoints");if(st===void 0)return;d=x(this.hex,st.vidx),S=st.critical}var z={extname:"cRLDistributionPoints",array:[]};S&&(z.critical=!0);for(var _t=a(d,0),Mt=0;Mt<_t.length;Mt++){var te=x(d,_t[Mt]);z.array.push(this.getDistributionPoint(te))}return z},this.getDistributionPoint=function(d){for(var S={},st=a(d,0),z=0;z<st.length;z++){var _t=d.substr(st[z],2),Mt=x(d,st[z]);_t=="a0"&&(S.dpname=this.getDistributionPointName(Mt))}return S},this.getDistributionPointName=function(d){for(var S={},st=a(d,0),z=0;z<st.length;z++){var _t=d.substr(st[z],2),Mt=x(d,st[z]);_t=="a0"&&(S.full=this.getGeneralNames(Mt))}return S},this.getExtCRLDistributionPointsURI=function(){var d=this.getExtCRLDistributionPoints();if(d==null)return d;for(var S=d.array,st=[],z=0;z<S.length;z++)try{S[z].dpname.full[0].uri!=null&&st.push(S[z].dpname.full[0].uri)}catch{}return st},this.getExtAIAInfo=function(){var d=this.getExtInfo("authorityInfoAccess");if(d===void 0)return d;for(var S={ocsp:[],caissuer:[]},st=a(this.hex,d.vidx),z=0;z<st.length;z++){var _t=_(this.hex,st[z],[0],"06"),Mt=_(this.hex,st[z],[1],"86");_t==="2b06010505073001"&&S.ocsp.push(_r(Mt)),_t==="2b06010505073002"&&S.caissuer.push(_r(Mt))}return S},this.getExtAuthorityInfoAccess=function(d,S){if(d===void 0&&S===void 0){var st=this.getExtInfo("authorityInfoAccess");if(st===void 0)return;d=x(this.hex,st.vidx),S=st.critical}var z={extname:"authorityInfoAccess",array:[]};S&&(z.critical=!0);for(var _t=a(d,0),Mt=0;Mt<_t.length;Mt++){var te=L(d,_t[Mt],[0],"06"),ie=_(d,_t[Mt],[1],"86"),ge=_r(ie);if(te=="2b06010505073001")z.array.push({ocsp:ge});else if(te=="2b06010505073002")z.array.push({caissuer:ge});else throw new Error("unknown method: "+te)}return z},this.getExtCertificatePolicies=function(d,S){if(d===void 0&&S===void 0){var st=this.getExtInfo("certificatePolicies");if(st===void 0)return;d=x(this.hex,st.vidx),S=st.critical}var z={extname:"certificatePolicies",array:[]};S&&(z.critical=!0);for(var _t=a(d,0),Mt=0;Mt<_t.length;Mt++){var te=x(d,_t[Mt]),ie=this.getPolicyInformation(te);z.array.push(ie)}return z},this.getPolicyInformation=function(d){var S={},st=_(d,0,[0],"06");S.policyoid=T(st);var z=P(d,0,[1],"30");if(z!=-1){S.array=[];for(var _t=a(d,z),Mt=0;Mt<_t.length;Mt++){var te=x(d,_t[Mt]),ie=this.getPolicyQualifierInfo(te);S.array.push(ie)}}return S},this.getOtherName=function(d){var S={},st=a(d,0),z=_(d,st[0],[],"06"),_t=_(d,st[1],[]);return S.oid=T(z),S.value=C(_t),S},this.getPolicyQualifierInfo=function(d){var S={},st=_(d,0,[0],"06");if(st==="2b06010505070201"){var z=L(d,0,[1],"16");S.cps=gr(z)}else if(st==="2b06010505070202"){var _t=V(d,0,[1],"30");S.unotice=this.getUserNotice(_t)}return S},this.getUserNotice=function(d){var S=null,st={};try{S=l.parse(d);var z=this._asn1ToUnotice(S);return z}catch{return}},this._asn1ToUnotice=function(d){try{for(var S={},st=wn(d,"seq"),z=0;z<st.length;z++){var _t=this._asn1ToNoticeRef(st[z]);_t!=null&&(S.noticeref=_t);var Mt=this.asn1ToDisplayText(st[z]);Mt!=null&&(S.exptext=Mt)}return Object.keys(S).length>0?S:void 0}catch{return}},this._asn1ToNoticeRef=function(d){try{for(var S={},st=wn(d,"seq"),z=0;z<st.length;z++){var _t=this._asn1ToNoticeNum(st[z]);_t!=null&&(S.noticenum=_t);var Mt=this.asn1ToDisplayText(st[z]);Mt!=null&&(S.org=Mt)}return Object.keys(S).length>0?S:void 0}catch{return}},this._asn1ToNoticeNum=function(d){try{for(var S=wn(d,"seq"),st=[],z=0;z<S.length;z++){var _t=S[z];st.push(parseInt(wn(_t,"int.hex"),16))}return st}catch{return}},this.getDisplayText=function(d){var S={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"},st={};return st.type=S[d.substr(0,2)],st.str=gr(h(d,0)),st},this.asn1ToDisplayText=function(d){if(d.utf8str!=null)return{type:"utf8",str:d.utf8str.str};if(d.ia5str!=null)return{type:"ia5",str:d.ia5str.str};if(d.visstr!=null)return{type:"vis",str:d.visstr.str};if(d.bmpstr!=null)return{type:"bmp",str:d.bmpstr.str};if(d.prnstr!=null)return{type:"prn",str:d.prnstr.str}},this.getExtPolicyMappings=function(d,S){var st=this.getCriticalExtV("policyMappings",d,S);if(d=st[0],S=st[1],d!=null){var z={extname:"policyMappings"};S&&(z.critical=!0);try{for(var _t=C(d),Mt=_t.seq,te=[],ie=0;ie<Mt.length;ie++){var ge=Mt[ie].seq;te.push([ge[0].oid,ge[1].oid])}z.array=te}catch{throw new Wt("malformed policyMappings")}return z}},this.getExtPolicyConstraints=function(d,S){var st=this.getCriticalExtV("policyConstraints",d,S);if(d=st[0],S=st[1],d!=null){var z={extname:"policyConstraints"};S&&(z.critical=!0);var _t=C(d);try{for(var Mt=_t.seq,te=0;te<Mt.length;te++){var ie=Mt[te].tag;ie.explicit==!1&&(ie.tag=="80"&&(z.reqexp=parseInt(ie.hex,16)),ie.tag=="81"&&(z.inhibit=parseInt(ie.hex,16)))}}catch{return new Wt("malformed policyConstraints value")}return z}},this.getExtInhibitAnyPolicy=function(d,S){var st=this.getCriticalExtV("inhibitAnyPolicy",d,S);if(d=st[0],S=st[1],d!=null){var z={extname:"inhibitAnyPolicy"};S&&(z.critical=!0);var _t=ut(d,0);return _t==-1?new Wt("wrong value"):(z.skip=_t,z)}},this.getExtCRLNumber=function(d,S){var st={extname:"cRLNumber"};if(S&&(st.critical=!0),d.substr(0,2)=="02")return st.num={hex:h(d,0)},st;throw new Wt("hExtV parse error: "+d)},this.getExtCRLReason=function(d,S){var st={extname:"cRLReason"};if(S&&(st.critical=!0),d.substr(0,2)=="0a")return st.code=parseInt(h(d,0),16),st;throw new Error("hExtV parse error: "+d)},this.getExtOcspNonce=function(d,S){var st={extname:"ocspNonce"};S&&(st.critical=!0);var z=h(d,0);return st.hex=z,st},this.getExtOcspNoCheck=function(d,S){var st={extname:"ocspNoCheck"};return S&&(st.critical=!0),st},this.getExtAdobeTimeStamp=function(d,S){if(d===void 0&&S===void 0){var st=this.getExtInfo("adobeTimeStamp");if(st===void 0)return;d=x(this.hex,st.vidx),S=st.critical}var z={extname:"adobeTimeStamp"};S&&(z.critical=!0);var _t=a(d,0);if(_t.length>1){var Mt=x(d,_t[1]),te=this.getGeneralName(Mt);te.uri!=null&&(z.uri=te.uri)}if(_t.length>2){var ie=x(d,_t[2]);ie=="0101ff"&&(z.reqauth=!0),ie=="010100"&&(z.reqauth=!1)}return z},this.getExtSubjectDirectoryAttributes=function(d,S){if(d===void 0&&S===void 0){var st=this.getExtInfo("subjectDirectoryAttributes");if(st===void 0)return;d=x(this.hex,st.vidx),S=st.critical}var z={extname:"subjectDirectoryAttributes"};S&&(z.critical=!0);try{for(var _t=C(d),Mt=[],te=0;te<_t.seq.length;te++){var ie=_t.seq[te],ge=wn(ie,"seq.0.oid"),Se=wn(ie,"seq.1.set");if(ge==null||Se==null)throw"error";Mt.push({attr:ge,array:Se})}return z.array=Mt,z}catch{throw new Error("malformed subjectDirectoryAttributes extension value")}};var Gt=function(d){var S={};try{var st=d.seq[0].oid,z=E.asn1.x509.OID.name2oid(st);S.type=E.asn1.x509.OID.oid2atype(z);var _t=d.seq[1];if(_t.utf8str!=null)S.ds="utf8",S.value=_t.utf8str.str;else if(_t.numstr!=null)S.ds="num",S.value=_t.numstr.str;else if(_t.telstr!=null)S.ds="tel",S.value=_t.telstr.str;else if(_t.prnstr!=null)S.ds="prn",S.value=_t.prnstr.str;else if(_t.ia5str!=null)S.ds="ia5",S.value=_t.ia5str.str;else if(_t.visstr!=null)S.ds="vis",S.value=_t.visstr.str;else if(_t.bmpstr!=null)S.ds="bmp",S.value=_t.bmpstr.str;else throw"error";return S}catch{throw new Erorr("improper ASN.1 parsed AttrTypeAndValue")}},ve=function(d){try{return d.set.map(function(S){return Gt(S)})}catch(S){throw new Error("improper ASN.1 parsed RDN: "+S)}},be=function(d){try{return d.seq.map(function(S){return ve(S)})}catch(S){throw new Error("improper ASN.1 parsed X500Name: "+S)}};this.getX500NameRule=function(d){for(var S=!0,st=!0,z=!1,_t="",Mt="",te=null,ie=[],ge=0;ge<d.length;ge++)for(var Se=d[ge],wr=0;wr<Se.length;wr++)ie.push(Se[wr]);for(var ge=0;ge<ie.length;ge++){var xr=ie[ge],Fr=xr.ds,qr=xr.value,Ur=xr.type;if(_t+=":"+Fr,Fr!="prn"&&Fr!="utf8"&&Fr!="ia5")return"mixed";if(Fr=="ia5"){if(Ur!="CN")return"mixed";if(E.lang.String.isMail(qr))continue;return"mixed"}if(Ur=="C"){if(Fr=="prn")continue;return"mixed"}if(Mt+=":"+Fr,te==null)te=Fr;else if(te!==Fr)return"mixed"}return te??"prn"},this.getAttrTypeAndValue=function(d){var S=C(d);return Gt(S)},this.getRDN=function(d){var S=C(d);return ve(S)},this.getX500NameArray=function(d){var S=C(d);return be(S)},this.getX500Name=function(d,S,st){var z=this.getX500NameArray(d),_t=this.dnarraytostr(z),Mt={str:_t};return Mt.array=z,st==!0&&(Mt.hex=d),S==!0&&(Mt.canon=this.c14nRDNArray(z)),Mt},this.readCertPEM=function(d){this.readCertHex(wt(d))},this.readCertHex=function(d){this.hex=d,this.getVersion();try{gt(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(d){var S={};return d==null&&(d={}),S.version=this.getVersion(),S.serial={hex:this.getSerialNumberHex()},S.sigalg=this.getSignatureAlgorithmField(),S.issuer=this.getIssuer(d.dncanon,d.dnhex),S.notbefore=this.getNotBefore(),S.notafter=this.getNotAfter(),S.subject=this.getSubject(d.dncanon,d.dnhex),S.sbjpubkey=$e(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo!=null&&this.aExtInfo.length>0&&(S.ext=this.getExtParamArray()),S.sighex=this.getSignatureValueHex(),d.tbshex==!0&&(S.tbshex=V(this.hex,0,[0])),d.nodnarray==!0&&(delete S.issuer.array,delete S.subject.array),S},this.getExtParamArray=function(d){if(d==null){var S=P(this.hex,0,[0,"[3]"]);S!=-1&&(d=ht(this.hex,0,[0,"[3]",0],"30"))}for(var st=[],z=a(d,0),_t=0;_t<z.length;_t++){var Mt=x(d,z[_t]),te=this.getExtParam(Mt);te!=null&&st.push(te)}return st},this.getExtParam=function(d){var S={},st=a(d,0),z=st.length;if(z!=2&&z!=3)throw new Error("wrong number elements in Extension: "+z+" "+d);var _t=at(_(d,0,[0],"06")),Mt=!1;z==3&&V(d,0,[1])=="0101ff"&&(Mt=!0);var te=V(d,0,[z-1,0]),ie=void 0;if(_t=="2.5.29.14"?ie=this.getExtSubjectKeyIdentifier(te,Mt):_t=="2.5.29.15"?ie=this.getExtKeyUsage(te,Mt):_t=="2.5.29.17"?ie=this.getExtSubjectAltName(te,Mt):_t=="2.5.29.18"?ie=this.getExtIssuerAltName(te,Mt):_t=="2.5.29.19"?ie=this.getExtBasicConstraints(te,Mt):_t=="2.5.29.30"?ie=this.getExtNameConstraints(te,Mt):_t=="2.5.29.31"?ie=this.getExtCRLDistributionPoints(te,Mt):_t=="2.5.29.32"?ie=this.getExtCertificatePolicies(te,Mt):_t=="2.5.29.33"?ie=this.getExtPolicyMappings(te,Mt):_t=="2.5.29.35"?ie=this.getExtAuthorityKeyIdentifier(te,Mt):_t=="2.5.29.36"?ie=this.getExtPolicyConstraints(te,Mt):_t=="2.5.29.37"?ie=this.getExtExtKeyUsage(te,Mt):_t=="2.5.29.54"?ie=this.getExtInhibitAnyPolicy(te,Mt):_t=="1.3.6.1.5.5.7.1.1"?ie=this.getExtAuthorityInfoAccess(te,Mt):_t=="2.5.29.20"?ie=this.getExtCRLNumber(te,Mt):_t=="2.5.29.21"?ie=this.getExtCRLReason(te,Mt):_t=="2.5.29.9"?ie=this.getExtSubjectDirectoryAttributes(te,Mt):_t=="1.3.6.1.5.5.7.48.1.2"?ie=this.getExtOcspNonce(te,Mt):_t=="1.3.6.1.5.5.7.48.1.5"?ie=this.getExtOcspNoCheck(te,Mt):_t=="1.2.840.113583.1.1.9.1"?ie=this.getExtAdobeTimeStamp(te,Mt):nr.EXT_PARSER[_t]!=null&&(ie=nr.EXT_PARSER[_t](_t,Mt,te)),ie!=null)return ie;var ge={extname:_t,extn:te};try{ge.extn=C(te)}catch{}return Mt&&(ge.critical=!0),ge},this.findExt=function(d,S){for(var st=0;st<d.length;st++)if(d[st].extname==S)return d[st];return null},this.updateExtCDPFullURI=function(d,S){var st=this.findExt(d,"cRLDistributionPoints");if(st!=null&&st.array!=null){for(var z=st.array,_t=0;_t<z.length;_t++)if(z[_t].dpname!=null&&z[_t].dpname.full!=null)for(var Mt=z[_t].dpname.full,te=0;te<Mt.length;te++){var ie=Mt[_t];ie.uri!=null&&(ie.uri=S)}}},this.updateExtAIAOCSP=function(d,S){var st=this.findExt(d,"authorityInfoAccess");if(st!=null&&st.array!=null)for(var z=st.array,_t=0;_t<z.length;_t++)z[_t].ocsp!=null&&(z[_t].ocsp=S)},this.updateExtAIACAIssuer=function(d,S){var st=this.findExt(d,"authorityInfoAccess");if(st!=null&&st.array!=null)for(var z=st.array,_t=0;_t<z.length;_t++)z[_t].caissuer!=null&&(z[_t].caissuer=S)},this.dnarraytostr=function(d){function S(z){return z.map(function(_t){return st(_t).replace(/\+/,"\\+")}).join("+")}function st(z){return z.type+"="+z.value}return"/"+d.map(function(z){return S(z).replace(/\//,"\\/")}).join("/")},this.setCanonicalizedDN=function(d){var S;if(d.str!=null&&d.array==null){var st=new E.asn1.x509.X500Name({str:d.str}),z=st.tohex();S=this.getX500NameArray(z)}else S=d.array;d.canon==null&&(d.canon=this.c14nRDNArray(S))},this.c14nRDNArray=function(d){for(var S=[],st=0;st<d.length;st++){for(var z=d[st],_t=[],Mt=0;Mt<z.length;Mt++){var te=z[Mt],ie=te.value;ie=ie.replace(/^\s*/,""),ie=ie.replace(/\s*$/,""),ie=ie.replace(/\s+/g," "),ie=ie.toLowerCase(),_t.push(te.type.toLowerCase()+"="+ie)}S.push(_t.join("+"))}return"/"+S.join("/")},this.getInfo=function(){var d=function($s){for(var fn="",Jn="    ",Nn=`
`,kt=$s.array,ps=0;ps<kt.length;ps++){var mn=kt[ps];if(mn.dn!=null&&(fn+=Jn+"dn: "+mn.dn.str+Nn),mn.ip!=null&&(fn+=Jn+"ip: "+mn.ip+Nn),mn.rfc822!=null&&(fn+=Jn+"rfc822: "+mn.rfc822+Nn),mn.dns!=null&&(fn+=Jn+"dns: "+mn.dns+Nn),mn.uri!=null&&(fn+=Jn+"uri: "+mn.uri+Nn),mn.other!=null){var Un=mn.other.oid,Kr=JSON.stringify(mn.other.value).replace(/\"/g,"");fn+=Jn+"other: "+Un+"="+Kr+Nn}}return fn=fn.replace(/\n$/,""),fn},S=function($s){for(var fn="",Jn=$s.array,Nn=0;Nn<Jn.length;Nn++){var kt=Jn[Nn];if(fn+="    policy oid: "+kt.policyoid+`
`,kt.array!==void 0)for(var ps=0;ps<kt.array.length;ps++){var mn=kt.array[ps];mn.cps!==void 0&&(fn+="    cps: "+mn.cps+`
`)}}return fn},st=function($s){for(var fn="",Jn=$s.array,Nn=0;Nn<Jn.length;Nn++){var kt=Jn[Nn];try{kt.dpname.full[0].uri!==void 0&&(fn+="    "+kt.dpname.full[0].uri+`
`)}catch{}try{kt.dname.full[0].dn.hex!==void 0&&(fn+="    "+nr.hex2dn(kt.dpname.full[0].dn.hex)+`
`)}catch{}}return fn},z=function($s){for(var fn="",Jn=$s.array,Nn=0;Nn<Jn.length;Nn++){var kt=Jn[Nn];kt.caissuer!==void 0&&(fn+="    caissuer: "+kt.caissuer+`
`),kt.ocsp!==void 0&&(fn+="    ocsp: "+kt.ocsp+`
`)}return fn},_t=nr,Mt,te,ie;if(Mt=`Basic Fields
`,Mt+="  serial number: "+this.getSerialNumberHex()+`
`,Mt+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,Mt+="  issuer: "+this.getIssuerString()+`
`,Mt+="  notBefore: "+this.getNotBefore()+`
`,Mt+="  notAfter: "+this.getNotAfter()+`
`,Mt+="  subject: "+this.getSubjectString()+`
`,Mt+=`  subject public key info: 
`,te=this.getPublicKey(),Mt+="    key algorithm: "+te.type+`
`,te.type==="RSA"&&(Mt+="    n="+gu(te.n.toString(16)).substr(0,16)+`...
`,Mt+="    e="+gu(te.e.toString(16))+`
`),ie=this.aExtInfo,ie!=null){Mt+=`X509v3 Extensions:
`;for(var ge=0;ge<ie.length;ge++){var Se=ie[ge],wr=E.asn1.x509.OID.oid2name(Se.oid);wr===""&&(wr=Se.oid);var xr="";if(Se.critical===!0&&(xr="CRITICAL"),Mt+="  "+wr+" "+xr+`:
`,wr==="basicConstraints"){var Fr=this.getExtBasicConstraints();Fr.cA===void 0?Mt+=`    {}
`:(Mt+="    cA=true",Fr.pathLen!==void 0&&(Mt+=", pathLen="+Fr.pathLen),Mt+=`
`)}else if(wr=="policyMappings"){var qr=this.getExtPolicyMappings().array,Ur=qr.map(function($s){var fn=$s;return fn[0]+":"+fn[1]}).join(", ");Mt+="    "+Ur+`
`}else if(wr=="policyConstraints"){var xn=this.getExtPolicyConstraints();Mt+="    ",xn.reqexp!=null&&(Mt+=" reqexp="+xn.reqexp),xn.inhibit!=null&&(Mt+=" inhibit="+xn.inhibit),Mt+=`
`}else if(wr=="inhibitAnyPolicy"){var xn=this.getExtInhibitAnyPolicy();Mt+="    skip="+xn.skip+`
`}else if(wr=="keyUsage")Mt+="    "+this.getExtKeyUsageString()+`
`;else if(wr=="subjectKeyIdentifier")Mt+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(wr=="authorityKeyIdentifier"){var pn=this.getExtAuthorityKeyIdentifier();pn.kid!==void 0&&(Mt+="    kid="+pn.kid.hex+`
`)}else if(wr=="extKeyUsage"){var Fi=this.getExtExtKeyUsage().array;Mt+="    "+Fi.join(", ")+`
`}else if(wr=="subjectAltName"){var js=d(this.getExtSubjectAltName());Mt+=js+`
`}else if(wr=="cRLDistributionPoints"){var Es=this.getExtCRLDistributionPoints();Mt+=st(Es)}else if(wr=="authorityInfoAccess"){var Cs=this.getExtAuthorityInfoAccess();Mt+=z(Cs)}else wr=="certificatePolicies"&&(Mt+=S(this.getExtCertificatePolicies()))}}return Mt+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,Mt+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`,Mt},typeof e=="string"&&(e.indexOf("-----BEGIN")!=-1?this.readCertPEM(e):E.lang.String.isHex(e)&&this.readCertHex(e))}nr.EXT_PARSER={},nr.registExtParser=function(e,l){nr.EXT_PARSER[e]=l},nr.hex2dn=function(e,l){l===void 0&&(l=0);var a=new nr,h=Ge.getTLV(e,l),b=a.getX500Name(e);return b.str},nr.hex2rdn=function(e,l){if(l===void 0&&(l=0),e.substr(l,2)!=="31")throw new Error("malformed RDN");for(var a=new Array,h=Ge.getChildIdx(e,l),b=0;b<h.length;b++)a.push(nr.hex2attrTypeValue(e,h[b]));return a=a.map(function(C){return C.replace("+","\\+")}),a.join("+")},nr.hex2attrTypeValue=function(e,l){var a=Ge,h=a.getV;if(l===void 0&&(l=0),e.substr(l,2)!=="30")throw new Error("malformed attribute type and value");var b=a.getChildIdx(e,l);b.length!==2||e.substr(b[0],2);var C=h(e,b[0]),x=E.asn1.ASN1Util.oidHexToInt(C),_=E.asn1.x509.OID.oid2atype(x),L=h(e,b[1]),V=gr(L);return _+"="+V},nr.getPublicKeyFromCertHex=function(e){var l=new nr;return l.readCertHex(e),l.getPublicKey()},nr.getPublicKeyFromCertPEM=function(e){var l=new nr;return l.readCertPEM(e),l.getPublicKey()},nr.getPublicKeyInfoPropOfCertPEM=function(e){var l=Ge,a=l.getVbyList,h={},b,C,x;return h.algparam=null,b=new nr,b.readCertPEM(e),C=b.getPublicKeyHex(),h.keyhex=a(C,0,[1],"03").substr(2),h.algoid=a(C,0,[0,0],"06"),h.algoid==="2a8648ce3d0201"&&(h.algparam=a(C,0,[0,1],"06")),h},nr.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"];var So=function(e){var l=E,a=l.lang.String.isHex,h=Ge,b=h.getV,C=h.getTLV,x=h.getVbyList,_=h.getTLVbyList,L=h.getTLVbyListEx,V=h.getIdxbyList,ht=h.getIdxbyListEx,gt=h.getChildIdx,P=new nr;this.hex=null,this.posSigAlg=null,this.posRevCert=null,this.parsed=null,this._setPos=function(){var I=V(this.hex,0,[0,0]),ut=this.hex.substr(I,2);if(ut=="02")this.posSigAlg=1;else if(ut=="30")this.posSigAlg=0;else throw new Error("malformed 1st item of TBSCertList: "+ut);var T=V(this.hex,0,[0,this.posSigAlg+3]),at=this.hex.substr(T,2);if(at=="17"||at=="18"){var Y,wt;Y=V(this.hex,0,[0,this.posSigAlg+4]),this.posRevCert=null,Y!=-1&&(wt=this.hex.substr(Y,2),wt=="30"&&(this.posRevCert=this.posSigAlg+4))}else if(at=="30")this.posRevCert=this.posSigAlg+3;else if(at=="a0")this.posRevCert=null;else throw new Error("malformed nextUpdate or revCert tag: "+at)},this.getVersion=function(){return this.posSigAlg==0?null:parseInt(x(this.hex,0,[0,0],"02"),16)+1},this.getSignatureAlgorithmField=function(){var I=_(this.hex,0,[0,this.posSigAlg],"30");return P.getAlgorithmIdentifierName(I)},this.getIssuer=function(){return P.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return _(this.hex,0,[0,this.posSigAlg+1],"30")},this.getThisUpdate=function(){var I=x(this.hex,0,[0,this.posSigAlg+2]);return result=gr(I)},this.getNextUpdate=function(){var I=V(this.hex,0,[0,this.posSigAlg+3]),ut=this.hex.substr(I,2);return ut!="17"&&ut!="18"?null:gr(b(this.hex,I))},this.getRevCertArray=function(){if(this.posRevCert==null)return null;for(var I=[],ut=V(this.hex,0,[0,this.posRevCert]),T=gt(this.hex,ut),at=0;at<T.length;at++){var Y=C(this.hex,T[at]);I.push(this.getRevCert(Y))}return I},this.getRevCert=function(I){var ut={},T=gt(I,0);return ut.sn={hex:x(I,0,[0],"02")},ut.date=gr(x(I,0,[1])),T.length==3&&(ut.ext=P.getExtParamArray(_(I,0,[2]))),ut},this.findRevCert=function(I){var ut=new nr(I),T=ut.getSerialNumberHex();return this.findRevCertBySN(T)},this.findRevCertBySN=function(I){if(this.parsed==null&&this.getParam(),this.parsed.revcert==null)return null;for(var ut=this.parsed.revcert,T=0;T<ut.length;T++)if(I==ut[T].sn.hex)return ut[T];return null},this.getSignatureValueHex=function(){return x(this.hex,0,[2],"03",!0)},this.verifySignature=function(I){var ut=this.getSignatureAlgorithmField(),T=this.getSignatureValueHex(),at=_(this.hex,0,[0],"30"),Y=new E.crypto.Signature({alg:ut});return Y.init(I),Y.updateHex(at),Y.verify(T)},this.getParam=function(I){var ut={},T=this.getVersion();T!=null&&(ut.version=T),ut.sigalg=this.getSignatureAlgorithmField(),ut.issuer=this.getIssuer(),ut.thisupdate=this.getThisUpdate();var at=this.getNextUpdate();at!=null&&(ut.nextupdate=at);var Y=this.getRevCertArray();Y!=null&&(ut.revcert=Y);var wt=ht(this.hex,0,[0,"[0]"]);if(wt!=-1){var Tt=L(this.hex,0,[0,"[0]",0]);ut.ext=P.getExtParamArray(Tt)}return ut.sighex=this.getSignatureValueHex(),this.parsed=ut,typeof I=="object"&&(I.tbshex==!0&&(ut.tbshex=_(this.hex,0,[0])),I.nodnarray==!0&&delete ut.issuer.array),ut},typeof e=="string"&&(a(e)?this.hex=e:e.match(/-----BEGIN X509 CRL/)&&(this.hex=On(e)),this._setPos())};(typeof E>"u"||!E)&&(E={}),(typeof E.jws>"u"||!E.jws)&&(E.jws={}),E.jws.JWS=function(){var e=E,l=e.jws.JWS,a=l.isSafeJSONString;this.parseJWS=function(h,b){if(!(this.parsedJWS!==void 0&&(b||this.parsedJWS.sigvalH!==void 0))){var C=h.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(C==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var x=C[1],_=C[2],L=C[3],V=x+"."+_;if(this.parsedJWS={},this.parsedJWS.headB64U=x,this.parsedJWS.payloadB64U=_,this.parsedJWS.sigvalB64U=L,this.parsedJWS.si=V,!b){var ht=Dn(L),gt=en(ht,16);this.parsedJWS.sigvalH=ht,this.parsedJWS.sigvalBI=gt}var P=ms(x),I=ms(_);if(this.parsedJWS.headS=P,this.parsedJWS.payloadS=I,!a(P,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+P}}},E.jws.JWS.sign=function(e,l,a,h,b){var C=E,x=C.jws,_=x.JWS,L=_.readSafeJSONString,V=_.isSafeJSONString,ht=C.crypto,gt=ht.ECDSA,P=ht.Mac,I=ht.Signature,ut=JSON,T,at,Y;if(typeof l!="string"&&typeof l!="object")throw"spHeader must be JSON string or object: "+l;if(typeof l=="object"&&(at=l,T=ut.stringify(at)),typeof l=="string"){if(T=l,!V(T))throw"JWS Head is not safe JSON string: "+T;at=L(T)}if(Y=a,typeof a=="object"&&(Y=ut.stringify(a)),(e==""||e==null)&&at.alg!==void 0&&(e=at.alg),e!=""&&e!=null&&at.alg===void 0&&(at.alg=e,T=ut.stringify(at)),e!==at.alg)throw"alg and sHeader.alg doesn't match: "+e+"!="+at.alg;var wt=null;if(_.jwsalg2sigalg[e]===void 0)throw"unsupported alg name: "+e;wt=_.jwsalg2sigalg[e];var Tt=we(T),Wt=we(Y),Gt=Tt+"."+Wt,ve="";if(wt.substr(0,4)=="Hmac"){if(h===void 0)throw"mac key shall be specified for HS* alg";var be=new P({alg:wt,prov:"cryptojs",pass:h});be.updateString(Gt),ve=be.doFinal()}else if(wt.indexOf("withECDSA")!=-1){var d=new I({alg:wt});d.init(h,b),d.updateString(Gt);var S=d.sign();ve=E.crypto.ECDSA.asn1SigToConcatSig(S)}else if(wt!="none"){var d=new I({alg:wt});d.init(h,b),d.updateString(Gt),ve=d.sign()}var st=An(ve);return Gt+"."+st},E.jws.JWS.verify=function(e,l,a){var h=E,b=h.jws,C=b.JWS,x=C.readSafeJSONString,_=h.crypto,L=_.ECDSA,V=_.Mac,ht=_.Signature,gt;if(typeof Er!==void 0&&(gt=Er),!ki(e))return!1;var P=e.split(".");if(P.length!==3)return!1;var I=P[0],ut=P[1],T=I+"."+ut,at=Dn(P[2]),Y=x(ms(P[0])),wt=null,Tt=null;if(Y.alg===void 0)throw"algorithm not specified in header";if(wt=Y.alg,Tt=wt.substr(0,2),a!=null&&Object.prototype.toString.call(a)==="[object Array]"&&a.length>0){var Wt=":"+a.join(":")+":";if(Wt.indexOf(":"+wt+":")==-1)throw"algorithm '"+wt+"' not accepted in the list"}if(wt!="none"&&l===null)throw"key shall be specified to verify.";if(typeof l=="string"&&l.indexOf("-----BEGIN ")!=-1&&(l=Nr.getKey(l)),(Tt=="RS"||Tt=="PS")&&!(l instanceof gt))throw"key shall be a RSAKey obj for RS* and PS* algs";if(Tt=="ES"&&!(l instanceof L))throw"key shall be a ECDSA obj for ES* algs";wt=="none";var Gt=null;if(C.jwsalg2sigalg[Y.alg]===void 0)throw"unsupported alg name: "+wt;if(Gt=C.jwsalg2sigalg[wt],Gt=="none")throw"not supported";if(Gt.substr(0,4)=="Hmac"){var ve=null;if(l===void 0)throw"hexadecimal key shall be specified for HMAC";var be=new V({alg:Gt,pass:l});return be.updateString(T),ve=be.doFinal(),at==ve}else if(Gt.indexOf("withECDSA")!=-1){var d=null;try{d=L.concatSigToASN1Sig(at)}catch{return!1}var S=new ht({alg:Gt});return S.init(l),S.updateString(T),S.verify(d)}else{var S=new ht({alg:Gt});return S.init(l),S.updateString(T),S.verify(at)}},E.jws.JWS.parse=function(e){var l=e.split("."),a={},h,b,C;if(l.length!=2&&l.length!=3)throw"malformed sJWS: wrong number of '.' splitted elements";return h=l[0],b=l[1],l.length==3&&(C=l[2]),a.headerObj=E.jws.JWS.readSafeJSONString(ms(h)),a.payloadObj=E.jws.JWS.readSafeJSONString(ms(b)),a.headerPP=JSON.stringify(a.headerObj,null,"  "),a.payloadObj==null?a.payloadPP=ms(b):a.payloadPP=JSON.stringify(a.payloadObj,null,"  "),C!==void 0&&(a.sigHex=Dn(C)),a},E.jws.JWS.verifyJWT=function(e,l,a){var h=E,b=h.jws,C=b.JWS,x=C.readSafeJSONString,_=C.inArray,L=C.includedArray;if(!ki(e))return!1;var V=e.split(".");if(V.length!=3)return!1;var ht=V[0],gt=V[1],P=ht+"."+gt,I=Dn(V[2]),ut=x(ms(ht)),T=x(ms(gt));if(ut.alg===void 0)return!1;if(a.alg===void 0)throw"acceptField.alg shall be specified";if(!_(ut.alg,a.alg)||T.iss!==void 0&&typeof a.iss=="object"&&!_(T.iss,a.iss)||T.sub!==void 0&&typeof a.sub=="object"&&!_(T.sub,a.sub))return!1;if(T.aud!==void 0&&typeof a.aud=="object"){if(typeof T.aud=="string"){if(!_(T.aud,a.aud))return!1}else if(typeof T.aud=="object"&&!L(T.aud,a.aud))return!1}var at=b.IntDate.getNow();return a.verifyAt!==void 0&&typeof a.verifyAt=="number"&&(at=a.verifyAt),(a.gracePeriod===void 0||typeof a.gracePeriod!="number")&&(a.gracePeriod=0),!(T.exp!==void 0&&typeof T.exp=="number"&&T.exp+a.gracePeriod<at||T.nbf!==void 0&&typeof T.nbf=="number"&&at<T.nbf-a.gracePeriod||T.iat!==void 0&&typeof T.iat=="number"&&at<T.iat-a.gracePeriod||T.jti!==void 0&&a.jti!==void 0&&T.jti!==a.jti||!C.verify(e,l,a.alg))},E.jws.JWS.includedArray=function(e,l){var a=E.jws.JWS.inArray;if(e===null||typeof e!="object"||typeof e.length!="number")return!1;for(var h=0;h<e.length;h++)if(!a(e[h],l))return!1;return!0},E.jws.JWS.inArray=function(e,l){if(l===null||typeof l!="object"||typeof l.length!="number")return!1;for(var a=0;a<l.length;a++)if(l[a]==e)return!0;return!1},E.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",ES512:"SHA512withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},E.jws.JWS.isSafeJSONString=function(e,l,a){var h=null;try{return h=so(e),typeof h!="object"||h.constructor===Array?0:(l&&(l[a]=h),1)}catch{return 0}},E.jws.JWS.readSafeJSONString=function(e){var l=null;try{return l=so(e),typeof l!="object"||l.constructor===Array?null:l}catch{return null}},E.jws.JWS.getEncodedSignatureValueFromJWS=function(e){var l=e.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(l==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return l[1]},E.jws.JWS.getJWKthumbprint=function(e){if(e.kty!=="RSA"&&e.kty!=="EC"&&e.kty!=="oct")throw"unsupported algorithm for JWK Thumprint";var l="{";if(e.kty==="RSA"){if(typeof e.n!="string"||typeof e.e!="string")throw"wrong n and e value for RSA key";l+='"e":"'+e.e+'",',l+='"kty":"'+e.kty+'",',l+='"n":"'+e.n+'"}'}else if(e.kty==="EC"){if(typeof e.crv!="string"||typeof e.x!="string"||typeof e.y!="string")throw"wrong crv, x and y value for EC key";l+='"crv":"'+e.crv+'",',l+='"kty":"'+e.kty+'",',l+='"x":"'+e.x+'",',l+='"y":"'+e.y+'"}'}else if(e.kty==="oct"){if(typeof e.k!="string")throw"wrong k value for oct(symmetric) key";l+='"kty":"'+e.kty+'",',l+='"k":"'+e.k+'"}'}var a=kn(l),h=E.crypto.Util.hashHex(a,"sha256"),b=An(h);return b},E.jws.IntDate={},E.jws.IntDate.get=function(e){var l=E.jws.IntDate,a=l.getNow,h=l.getZulu;if(e=="now")return a();if(e=="now + 1hour")return a()+3600;if(e=="now + 1day")return a()+3600*24;if(e=="now + 1month")return a()+3600*24*30;if(e=="now + 1year")return a()+3600*24*365;if(e.match(/Z$/))return h(e);if(e.match(/^[0-9]+$/))return parseInt(e);throw"unsupported format: "+e},E.jws.IntDate.getZulu=function(e){return ku(e)},E.jws.IntDate.getNow=function(){var e=~~(new Date/1e3);return e},E.jws.IntDate.intDate2UTCString=function(e){var l=new Date(e*1e3);return l.toUTCString()},E.jws.IntDate.intDate2Zulu=function(e){var l=new Date(e*1e3),a=("0000"+l.getUTCFullYear()).slice(-4),h=("00"+(l.getUTCMonth()+1)).slice(-2),b=("00"+l.getUTCDate()).slice(-2),C=("00"+l.getUTCHours()).slice(-2),x=("00"+l.getUTCMinutes()).slice(-2),_=("00"+l.getUTCSeconds()).slice(-2);return a+h+b+C+x+_+"Z"},(typeof E>"u"||!E)&&(E={}),(typeof E.jws>"u"||!E.jws)&&(E.jws={}),E.jws.JWSJS=function(){var e=E,l=e.jws,a=l.JWS,h=a.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(b){this.init();var C=b.split(".");if(C.length!=3)throw"malformed input JWS";this.aHeader.push(C[0]),this.sPayload=C[1],this.aSignature.push(C[2])},this.addSignature=function(b,C,x,_){if(this.sPayload===void 0||this.sPayload===null)throw"there's no JSON-JS signature to add.";var L=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var V=E.jws.JWS.sign(b,C,this.sPayload,x,_),ht=V.split("."),gt=ht[0],P=ht[2];this.aHeader.push(ht[0]),this.aSignature.push(ht[2])}catch(I){throw this.aHeader.length>L&&this.aHeader.pop(),this.aSignature.length>L&&this.aSignature.pop(),"addSignature failed: "+I}},this.verifyAll=function(b){if(this.aHeader.length!==b.length||this.aSignature.length!==b.length)return!1;for(var C=0;C<b.length;C++){var x=b[C];if(x.length!==2)return!1;var _=this.verifyNth(C,x[0],x[1]);if(_===!1)return!1}return!0},this.verifyNth=function(b,C,x){if(this.aHeader.length<=b||this.aSignature.length<=b)return!1;var _=this.aHeader[b],L=this.aSignature[b],V=_+"."+this.sPayload+"."+L,ht=!1;try{ht=a.verify(V,C,x)}catch{return!1}return ht},this.readJWSJS=function(b){if(typeof b=="string"){var C=h(b);if(C==null)throw"argument is not safe JSON object string";this.aHeader=C.headers,this.sPayload=C.payload,this.aSignature=C.signatures}else try{if(b.headers.length>0)this.aHeader=b.headers;else throw"malformed header";if(typeof b.payload=="string")this.sPayload=b.payload;else throw"malformed signatures";if(b.signatures.length>0)this.aSignature=b.signatures;else throw"malformed signatures"}catch(x){throw"malformed JWS-JS JSON object: "+x}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return this.aHeader.length==0?1:0}},t.SecureRandom=nn,t.rng_seed_time=It,t.BigInteger=w,t.RSAKey=Er,t.ECDSA=E.crypto.ECDSA,t.DSA=E.crypto.DSA,t.Signature=E.crypto.Signature,t.MessageDigest=E.crypto.MessageDigest,t.Mac=E.crypto.Mac,t.KEYUTIL=Nr,t.ASN1HEX=Ge,t.X509=nr,t.X509CRL=So,t.CryptoJS=p,t.b64tohex=y,t.b64toBA=D,t.ECFieldElementFp=En,t.ECPointFp=on,t.ECCurveFp=Yn,t.stoBA=Du,t.BAtos=Zs,t.BAtohex=Ei,t.stohex=cs,t.stob64=Pn,t.stob64u=li,t.b64utos=lt,t.b64tob64u=Rr,t.b64utob64=Ks,t.hex2b64=A,t.hextob64u=An,t.b64utohex=Dn,t.utf8tob64u=we,t.b64utoutf8=ms,t.utf8tob64=pu,t.b64toutf8=zi,t.utf8tohex=xu,t.hextoutf8=_r,t.hextorstr=gr,t.rstrtohex=kn,t.hextob64=_u,t.hextob64nl=Bu,t.b64nltohex=Iu,t.hextopem=$e,t.pemtohex=On,t.hextoArrayBuffer=Ru,t.ArrayBuffertohex=io,t.zulutomsec=$u,t.msectozulu=uo,t.zulutosec=ku,t.zulutodate=Ou,t.datetozulu=_o,t.uricmptohex=hu,t.hextouricmp=Wi,t.ipv6tohex=vi,t.hextoipv6=fu,t.hextoip=Rs,t.iptohex=du,t.ucs2hextoutf8=Pu,t.encodeURIComponentAll=ti,t.newline_toUnix=Tn,t.newline_toDos=Xi,t.hextoposhex=gu,t.intarystrtohex=Bo,t.strdiffidx=ao,t.oidtohex=zs,t.hextooid=me,t.strpad=hr,t.bitstrtoint=Or,t.inttobitstr=an,t.bitstrtobinstr=Gn,t.binstrtobitstr=Fn,t.isBase64URLDot=ki,t.namearraytobinstr=Ai,t.extendClass=Oe,t.foldnl=ys,t.b64topem=Ri,t.pemtob64=$i,t.timeogen=Qs,t.aryval=wn,t.inttohex=Ue,t.twoscompl=Ie,t.KJUR=E,t.crypto=E.crypto,t.asn1=E.asn1,t.jws=E.jws,t.lang=E.lang,t.VERSION=i,t.VERSION_FULL=u}),Jo=ce((t,r)=>{"use strict";function n(A){return typeof A>"u"||A===null}function i(A){return typeof A=="object"&&A!==null}function u(A){return Array.isArray(A)?A:n(A)?[]:[A]}function p(A,y){var D,o,M,W;if(y)for(W=Object.keys(y),D=0,o=W.length;D<o;D+=1)M=W[D],A[M]=y[M];return A}function g(A,y){var D="",o;for(o=0;o<y;o+=1)D+=A;return D}function m(A){return A===0&&Number.NEGATIVE_INFINITY===1/A}r.exports.isNothing=n,r.exports.isObject=i,r.exports.toArray=u,r.exports.repeat=g,r.exports.isNegativeZero=m,r.exports.extend=p}),hl=ce((t,r)=>{"use strict";function n(i,u){Error.call(this),this.name="YAMLException",this.reason=i,this.mark=u,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n.prototype.toString=function(i){var u=this.name+": ";return u+=this.reason||"(unknown reason)",!i&&this.mark&&(u+=" "+this.mark.toString()),u},r.exports=n}),Zy=ce((t,r)=>{"use strict";var n=Jo();function i(u,p,g,m,A){this.name=u,this.buffer=p,this.position=g,this.line=m,this.column=A}i.prototype.getSnippet=function(u,p){var g,m,A,y,D;if(!this.buffer)return null;for(u=u||4,p=p||75,g="",m=this.position;m>0&&`\0\r
\x85\u2028\u2029`.indexOf(this.buffer.charAt(m-1))===-1;)if(m-=1,this.position-m>p/2-1){g=" ... ",m+=5;break}for(A="",y=this.position;y<this.buffer.length&&`\0\r
\x85\u2028\u2029`.indexOf(this.buffer.charAt(y))===-1;)if(y+=1,y-this.position>p/2-1){A=" ... ",y-=5;break}return D=this.buffer.slice(m,y),n.repeat(" ",u)+g+D+A+`
`+n.repeat(" ",u+this.position-m+g.length)+"^"},i.prototype.toString=function(u){var p,g="";return this.name&&(g+='in "'+this.name+'" '),g+="at line "+(this.line+1)+", column "+(this.column+1),u||(p=this.getSnippet(),p&&(g+=`:
`+p)),g},r.exports=i}),sn=ce((t,r)=>{"use strict";var n=hl(),i=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],u=["scalar","sequence","mapping"];function p(m){var A={};return m!==null&&Object.keys(m).forEach(function(y){m[y].forEach(function(D){A[String(D)]=y})}),A}function g(m,A){if(A=A||{},Object.keys(A).forEach(function(y){if(i.indexOf(y)===-1)throw new n('Unknown option "'+y+'" is met in definition of "'+m+'" YAML type.')}),this.tag=m,this.kind=A.kind||null,this.resolve=A.resolve||function(){return!0},this.construct=A.construct||function(y){return y},this.instanceOf=A.instanceOf||null,this.predicate=A.predicate||null,this.represent=A.represent||null,this.defaultStyle=A.defaultStyle||null,this.styleAliases=p(A.styleAliases||null),u.indexOf(this.kind)===-1)throw new n('Unknown kind "'+this.kind+'" is specified for "'+m+'" YAML type.')}r.exports=g}),Zo=ce((t,r)=>{"use strict";var n=Jo(),i=hl(),u=sn();function p(A,y,D){var o=[];return A.include.forEach(function(M){D=p(M,y,D)}),A[y].forEach(function(M){D.forEach(function(W,w){W.tag===M.tag&&W.kind===M.kind&&o.push(w)}),D.push(M)}),D.filter(function(M,W){return o.indexOf(W)===-1})}function g(){var A={scalar:{},sequence:{},mapping:{},fallback:{}},y,D;function o(M){A[M.kind][M.tag]=A.fallback[M.tag]=M}for(y=0,D=arguments.length;y<D;y+=1)arguments[y].forEach(o);return A}function m(A){this.include=A.include||[],this.implicit=A.implicit||[],this.explicit=A.explicit||[],this.implicit.forEach(function(y){if(y.loadKind&&y.loadKind!=="scalar")throw new i("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=p(this,"implicit",[]),this.compiledExplicit=p(this,"explicit",[]),this.compiledTypeMap=g(this.compiledImplicit,this.compiledExplicit)}m.DEFAULT=null,m.create=function(){var A,y;switch(arguments.length){case 1:A=m.DEFAULT,y=arguments[0];break;case 2:A=arguments[0],y=arguments[1];break;default:throw new i("Wrong number of arguments for Schema.create function")}if(A=n.toArray(A),y=n.toArray(y),!A.every(function(D){return D instanceof m}))throw new i("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!y.every(function(D){return D instanceof u}))throw new i("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new m({include:A,explicit:y})},r.exports=m}),ib=ce((t,r)=>{"use strict";var n=sn();r.exports=new n("tag:yaml.org,2002:str",{kind:"scalar",construct:function(i){return i!==null?i:""}})}),ab=ce((t,r)=>{"use strict";var n=sn();r.exports=new n("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(i){return i!==null?i:[]}})}),ob=ce((t,r)=>{"use strict";var n=sn();r.exports=new n("tag:yaml.org,2002:map",{kind:"mapping",construct:function(i){return i!==null?i:{}}})}),D0=ce((t,r)=>{"use strict";var n=Zo();r.exports=new n({explicit:[ib(),ab(),ob()]})}),fb=ce((t,r)=>{"use strict";var n=sn();function i(g){if(g===null)return!0;var m=g.length;return m===1&&g==="~"||m===4&&(g==="null"||g==="Null"||g==="NULL")}function u(){return null}function p(g){return g===null}r.exports=new n("tag:yaml.org,2002:null",{kind:"scalar",resolve:i,construct:u,predicate:p,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})}),db=ce((t,r)=>{"use strict";var n=sn();function i(g){if(g===null)return!1;var m=g.length;return m===4&&(g==="true"||g==="True"||g==="TRUE")||m===5&&(g==="false"||g==="False"||g==="FALSE")}function u(g){return g==="true"||g==="True"||g==="TRUE"}function p(g){return Object.prototype.toString.call(g)==="[object Boolean]"}r.exports=new n("tag:yaml.org,2002:bool",{kind:"scalar",resolve:i,construct:u,predicate:p,represent:{lowercase:function(g){return g?"true":"false"},uppercase:function(g){return g?"TRUE":"FALSE"},camelcase:function(g){return g?"True":"False"}},defaultStyle:"lowercase"})}),gb=ce((t,r)=>{"use strict";var n=Jo(),i=sn();function u(D){return 48<=D&&D<=57||65<=D&&D<=70||97<=D&&D<=102}function p(D){return 48<=D&&D<=55}function g(D){return 48<=D&&D<=57}function m(D){if(D===null)return!1;var o=D.length,M=0,W=!1,w;if(!o)return!1;if(w=D[M],(w==="-"||w==="+")&&(w=D[++M]),w==="0"){if(M+1===o)return!0;if(w=D[++M],w==="b"){for(M++;M<o;M++)if(w=D[M],w!=="_"){if(w!=="0"&&w!=="1")return!1;W=!0}return W&&w!=="_"}if(w==="x"){for(M++;M<o;M++)if(w=D[M],w!=="_"){if(!u(D.charCodeAt(M)))return!1;W=!0}return W&&w!=="_"}for(;M<o;M++)if(w=D[M],w!=="_"){if(!p(D.charCodeAt(M)))return!1;W=!0}return W&&w!=="_"}if(w==="_")return!1;for(;M<o;M++)if(w=D[M],w!=="_"){if(w===":")break;if(!g(D.charCodeAt(M)))return!1;W=!0}return!W||w==="_"?!1:w!==":"?!0:/^(:[0-5]?[0-9])+$/.test(D.slice(M))}function A(D){var o=D,M=1,W,w,U=[];return o.indexOf("_")!==-1&&(o=o.replace(/_/g,"")),W=o[0],(W==="-"||W==="+")&&(W==="-"&&(M=-1),o=o.slice(1),W=o[0]),o==="0"?0:W==="0"?o[1]==="b"?M*parseInt(o.slice(2),2):o[1]==="x"?M*parseInt(o,16):M*parseInt(o,8):o.indexOf(":")!==-1?(o.split(":").forEach(function(nt){U.unshift(parseInt(nt,10))}),o=0,w=1,U.forEach(function(nt){o+=nt*w,w*=60}),M*o):M*parseInt(o,10)}function y(D){return Object.prototype.toString.call(D)==="[object Number]"&&D%1===0&&!n.isNegativeZero(D)}r.exports=new i("tag:yaml.org,2002:int",{kind:"scalar",resolve:m,construct:A,predicate:y,represent:{binary:function(D){return D>=0?"0b"+D.toString(2):"-0b"+D.toString(2).slice(1)},octal:function(D){return D>=0?"0"+D.toString(8):"-0"+D.toString(8).slice(1)},decimal:function(D){return D.toString(10)},hexadecimal:function(D){return D>=0?"0x"+D.toString(16).toUpperCase():"-0x"+D.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})}),wb=ce((t,r)=>{"use strict";var n=Jo(),i=sn(),u=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function p(D){return!(D===null||!u.test(D)||D[D.length-1]==="_")}function g(D){var o,M,W,w;return o=D.replace(/_/g,"").toLowerCase(),M=o[0]==="-"?-1:1,w=[],"+-".indexOf(o[0])>=0&&(o=o.slice(1)),o===".inf"?M===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:o===".nan"?NaN:o.indexOf(":")>=0?(o.split(":").forEach(function(U){w.unshift(parseFloat(U,10))}),o=0,W=1,w.forEach(function(U){o+=U*W,W*=60}),M*o):M*parseFloat(o,10)}var m=/^[-+]?[0-9]+e/;function A(D,o){var M;if(isNaN(D))switch(o){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===D)switch(o){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===D)switch(o){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(n.isNegativeZero(D))return"-0.0";return M=D.toString(10),m.test(M)?M.replace("e",".e"):M}function y(D){return Object.prototype.toString.call(D)==="[object Number]"&&(D%1!==0||n.isNegativeZero(D))}r.exports=new i("tag:yaml.org,2002:float",{kind:"scalar",resolve:p,construct:g,predicate:y,represent:A,defaultStyle:"lowercase"})}),fm=ce((t,r)=>{"use strict";var n=Zo();r.exports=new n({include:[D0()],implicit:[fb(),db(),gb(),wb()]})}),hm=ce((t,r)=>{"use strict";var n=Zo();r.exports=new n({include:[fm()]})}),Cb=ce((t,r)=>{"use strict";var n=sn(),i=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),u=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function p(A){return A===null?!1:i.exec(A)!==null||u.exec(A)!==null}function g(A){var y,D,o,M,W,w,U,nt=0,X=null,j,it,ot;if(y=i.exec(A),y===null&&(y=u.exec(A)),y===null)throw new Error("Date resolve error");if(D=+y[1],o=+y[2]-1,M=+y[3],!y[4])return new Date(Date.UTC(D,o,M));if(W=+y[4],w=+y[5],U=+y[6],y[7]){for(nt=y[7].slice(0,3);nt.length<3;)nt+="0";nt=+nt}return y[9]&&(j=+y[10],it=+(y[11]||0),X=(j*60+it)*6e4,y[9]==="-"&&(X=-X)),ot=new Date(Date.UTC(D,o,M,W,w,U,nt)),X&&ot.setTime(ot.getTime()-X),ot}function m(A){return A.toISOString()}r.exports=new n("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:p,construct:g,instanceOf:Date,represent:m})}),Fb=ce((t,r)=>{"use strict";var n=sn();function i(u){return u==="<<"||u===null}r.exports=new n("tag:yaml.org,2002:merge",{kind:"scalar",resolve:i})}),Bb=ce((t,r)=>{"use strict";var n;try{i=ko,n=i("buffer").Buffer}catch{}var i,u=sn(),p=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function g(D){if(D===null)return!1;var o,M,W=0,w=D.length,U=p;for(M=0;M<w;M++)if(o=U.indexOf(D.charAt(M)),!(o>64)){if(o<0)return!1;W+=6}return W%8===0}function m(D){var o,M,W=D.replace(/[\r\n=]/g,""),w=W.length,U=p,nt=0,X=[];for(o=0;o<w;o++)o%4===0&&o&&(X.push(nt>>16&255),X.push(nt>>8&255),X.push(nt&255)),nt=nt<<6|U.indexOf(W.charAt(o));return M=w%4*6,M===0?(X.push(nt>>16&255),X.push(nt>>8&255),X.push(nt&255)):M===18?(X.push(nt>>10&255),X.push(nt>>2&255)):M===12&&X.push(nt>>4&255),n?n.from?n.from(X):new n(X):X}function A(D){var o="",M=0,W,w,U=D.length,nt=p;for(W=0;W<U;W++)W%3===0&&W&&(o+=nt[M>>18&63],o+=nt[M>>12&63],o+=nt[M>>6&63],o+=nt[M&63]),M=(M<<8)+D[W];return w=U%3,w===0?(o+=nt[M>>18&63],o+=nt[M>>12&63],o+=nt[M>>6&63],o+=nt[M&63]):w===2?(o+=nt[M>>10&63],o+=nt[M>>4&63],o+=nt[M<<2&63],o+=nt[64]):w===1&&(o+=nt[M>>2&63],o+=nt[M<<4&63],o+=nt[64],o+=nt[64]),o}function y(D){return n&&n.isBuffer(D)}r.exports=new u("tag:yaml.org,2002:binary",{kind:"scalar",resolve:g,construct:m,predicate:y,represent:A})}),Rb=ce((t,r)=>{"use strict";var n=sn(),i=Object.prototype.hasOwnProperty,u=Object.prototype.toString;function p(m){if(m===null)return!0;var A=[],y,D,o,M,W,w=m;for(y=0,D=w.length;y<D;y+=1){if(o=w[y],W=!1,u.call(o)!=="[object Object]")return!1;for(M in o)if(i.call(o,M))if(!W)W=!0;else return!1;if(!W)return!1;if(A.indexOf(M)===-1)A.push(M);else return!1}return!0}function g(m){return m!==null?m:[]}r.exports=new n("tag:yaml.org,2002:omap",{kind:"sequence",resolve:p,construct:g})}),Pb=ce((t,r)=>{"use strict";var n=sn(),i=Object.prototype.toString;function u(g){if(g===null)return!0;var m,A,y,D,o,M=g;for(o=new Array(M.length),m=0,A=M.length;m<A;m+=1){if(y=M[m],i.call(y)!=="[object Object]"||(D=Object.keys(y),D.length!==1))return!1;o[m]=[D[0],y[D[0]]]}return!0}function p(g){if(g===null)return[];var m,A,y,D,o,M=g;for(o=new Array(M.length),m=0,A=M.length;m<A;m+=1)y=M[m],D=Object.keys(y),o[m]=[D[0],y[D[0]]];return o}r.exports=new n("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:u,construct:p})}),Tb=ce((t,r)=>{"use strict";var n=sn(),i=Object.prototype.hasOwnProperty;function u(g){if(g===null)return!0;var m,A=g;for(m in A)if(i.call(A,m)&&A[m]!==null)return!1;return!0}function p(g){return g!==null?g:{}}r.exports=new n("tag:yaml.org,2002:set",{kind:"mapping",resolve:u,construct:p})}),pl=ce((t,r)=>{"use strict";var n=Zo();r.exports=new n({include:[hm()],implicit:[Cb(),Fb()],explicit:[Bb(),Rb(),Pb(),Tb()]})}),Lb=ce((t,r)=>{"use strict";var n=sn();function i(){return!0}function u(){}function p(){return""}function g(m){return typeof m>"u"}r.exports=new n("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:i,construct:u,predicate:g,represent:p})}),jb=ce((t,r)=>{"use strict";var n=sn();function i(m){if(m===null||m.length===0)return!1;var A=m,y=/\/([gim]*)$/.exec(m),D="";return!(A[0]==="/"&&(y&&(D=y[1]),D.length>3||A[A.length-D.length-1]!=="/"))}function u(m){var A=m,y=/\/([gim]*)$/.exec(m),D="";return A[0]==="/"&&(y&&(D=y[1]),A=A.slice(1,A.length-D.length-1)),new RegExp(A,D)}function p(m){var A="/"+m.source+"/";return m.global&&(A+="g"),m.multiline&&(A+="m"),m.ignoreCase&&(A+="i"),A}function g(m){return Object.prototype.toString.call(m)==="[object RegExp]"}r.exports=new n("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:i,construct:u,predicate:g,represent:p})}),qb=ce((t,r)=>{"use strict";var n;try{i=ko,n=i("esprima")}catch{typeof window<"u"&&(n=window.esprima)}var i,u=sn();function p(y){if(y===null)return!1;try{var D="("+y+")",o=n.parse(D,{range:!0});return!(o.type!=="Program"||o.body.length!==1||o.body[0].type!=="ExpressionStatement"||o.body[0].expression.type!=="ArrowFunctionExpression"&&o.body[0].expression.type!=="FunctionExpression")}catch{return!1}}function g(y){var D="("+y+")",o=n.parse(D,{range:!0}),M=[],W;if(o.type!=="Program"||o.body.length!==1||o.body[0].type!=="ExpressionStatement"||o.body[0].expression.type!=="ArrowFunctionExpression"&&o.body[0].expression.type!=="FunctionExpression")throw new Error("Failed to resolve function");return o.body[0].expression.params.forEach(function(w){M.push(w.name)}),W=o.body[0].expression.body.range,o.body[0].expression.body.type==="BlockStatement"?new Function(M,D.slice(W[0]+1,W[1]-1)):new Function(M,"return "+D.slice(W[0],W[1]))}function m(y){return y.toString()}function A(y){return Object.prototype.toString.call(y)==="[object Function]"}r.exports=new u("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:p,construct:g,predicate:A,represent:m})}),Uf=ce((t,r)=>{"use strict";var n=Zo();r.exports=n.DEFAULT=new n({include:[pl()],explicit:[Lb(),jb(),qb()]})}),l_=ce((t,r)=>{"use strict";var n=Jo(),i=hl(),u=Zy(),p=pl(),g=Uf(),m=Object.prototype.hasOwnProperty,A=1,y=2,D=3,o=4,M=1,W=2,w=3,U=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,nt=/[\x85\u2028\u2029]/,X=/[,\[\]\{\}]/,j=/^(?:!|!!|![a-z\-]+!)$/i,it=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function ot(N){return Object.prototype.toString.call(N)}function K(N){return N===10||N===13}function H(N){return N===9||N===32}function q(N){return N===9||N===32||N===10||N===13}function pt(N){return N===44||N===91||N===93||N===123||N===125}function yt(N){var f;return 48<=N&&N<=57?N-48:(f=N|32,97<=f&&f<=102?f-97+10:-1)}function Rt(N){return N===120?2:N===117?4:N===85?8:0}function Et(N){return 48<=N&&N<=57?N-48:-1}function vt(N){return N===48?"\0":N===97?"\x07":N===98?"\b":N===116||N===9?"	":N===110?`
`:N===118?"\v":N===102?"\f":N===114?"\r":N===101?"\x1B":N===32?" ":N===34?'"':N===47?"/":N===92?"\\":N===78?"\x85":N===95?"\xA0":N===76?"\u2028":N===80?"\u2029":""}function Ft(N){return N<=65535?String.fromCharCode(N):String.fromCharCode((N-65536>>10)+55296,(N-65536&1023)+56320)}var Xt=new Array(256),ee=new Array(256);for(ne=0;ne<256;ne++)Xt[ne]=vt(ne)?1:0,ee[ne]=vt(ne);var ne;function ae(N,f){this.input=N,this.filename=f.filename||null,this.schema=f.schema||g,this.onWarning=f.onWarning||null,this.legacy=f.legacy||!1,this.json=f.json||!1,this.listener=f.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=N.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function Le(N,f){return new i(f,new u(N.filename,N.input,N.position,N.line,N.position-N.lineStart))}function de(N,f){throw Le(N,f)}function He(N,f){N.onWarning&&N.onWarning.call(null,Le(N,f))}var ze={YAML:function(N,f,B){var J,St,Pt;N.version!==null&&de(N,"duplication of %YAML directive"),B.length!==1&&de(N,"YAML directive accepts exactly one argument"),J=/^([0-9]+)\.([0-9]+)$/.exec(B[0]),J===null&&de(N,"ill-formed argument of the YAML directive"),St=parseInt(J[1],10),Pt=parseInt(J[2],10),St!==1&&de(N,"unacceptable YAML version of the document"),N.version=B[0],N.checkLineBreaks=Pt<2,Pt!==1&&Pt!==2&&He(N,"unsupported YAML version of the document")},TAG:function(N,f,B){var J,St;B.length!==2&&de(N,"TAG directive accepts exactly two arguments"),J=B[0],St=B[1],j.test(J)||de(N,"ill-formed tag handle (first argument) of the TAG directive"),m.call(N.tagMap,J)&&de(N,'there is a previously declared suffix for "'+J+'" tag handle'),it.test(St)||de(N,"ill-formed tag prefix (second argument) of the TAG directive"),N.tagMap[J]=St}};function Pe(N,f,B,J){var St,Pt,et,zt;if(f<B){if(zt=N.input.slice(f,B),J)for(St=0,Pt=zt.length;St<Pt;St+=1)et=zt.charCodeAt(St),et===9||32<=et&&et<=1114111||de(N,"expected valid JSON character");else U.test(zt)&&de(N,"the stream contains non-printable characters");N.result+=zt}}function Je(N,f,B,J){var St,Pt,et,zt;for(n.isObject(B)||de(N,"cannot merge mappings; the provided source object is unacceptable"),St=Object.keys(B),et=0,zt=St.length;et<zt;et+=1)Pt=St[et],m.call(f,Pt)||(f[Pt]=B[Pt],J[Pt]=!0)}function Xe(N,f,B,J,St,Pt,et,zt){var Ut,_e;if(Array.isArray(St))for(St=Array.prototype.slice.call(St),Ut=0,_e=St.length;Ut<_e;Ut+=1)Array.isArray(St[Ut])&&de(N,"nested arrays are not supported inside keys"),typeof St=="object"&&ot(St[Ut])==="[object Object]"&&(St[Ut]="[object Object]");if(typeof St=="object"&&ot(St)==="[object Object]"&&(St="[object Object]"),St=String(St),f===null&&(f={}),J==="tag:yaml.org,2002:merge")if(Array.isArray(Pt))for(Ut=0,_e=Pt.length;Ut<_e;Ut+=1)Je(N,f,Pt[Ut],B);else Je(N,f,Pt,B);else!N.json&&!m.call(B,St)&&m.call(f,St)&&(N.line=et||N.line,N.position=zt||N.position,de(N,"duplicated mapping key")),f[St]=Pt,delete B[St];return f}function Ae(N){var f;f=N.input.charCodeAt(N.position),f===10?N.position++:f===13?(N.position++,N.input.charCodeAt(N.position)===10&&N.position++):de(N,"a line break is expected"),N.line+=1,N.lineStart=N.position}function xe(N,f,B){for(var J=0,St=N.input.charCodeAt(N.position);St!==0;){for(;H(St);)St=N.input.charCodeAt(++N.position);if(f&&St===35)do St=N.input.charCodeAt(++N.position);while(St!==10&&St!==13&&St!==0);if(K(St))for(Ae(N),St=N.input.charCodeAt(N.position),J++,N.lineIndent=0;St===32;)N.lineIndent++,St=N.input.charCodeAt(++N.position);else break}return B!==-1&&J!==0&&N.lineIndent<B&&He(N,"deficient indentation"),J}function Qe(N){var f=N.position,B;return B=N.input.charCodeAt(f),!!((B===45||B===46)&&B===N.input.charCodeAt(f+1)&&B===N.input.charCodeAt(f+2)&&(f+=3,B=N.input.charCodeAt(f),B===0||q(B)))}function Ve(N,f){f===1?N.result+=" ":f>1&&(N.result+=n.repeat(`
`,f-1))}function Ze(N,f,B){var J,St,Pt,et,zt,Ut,_e,xt,dt=N.kind,tt=N.result,F;if(F=N.input.charCodeAt(N.position),q(F)||pt(F)||F===35||F===38||F===42||F===33||F===124||F===62||F===39||F===34||F===37||F===64||F===96||(F===63||F===45)&&(St=N.input.charCodeAt(N.position+1),q(St)||B&&pt(St)))return!1;for(N.kind="scalar",N.result="",Pt=et=N.position,zt=!1;F!==0;){if(F===58){if(St=N.input.charCodeAt(N.position+1),q(St)||B&&pt(St))break}else if(F===35){if(J=N.input.charCodeAt(N.position-1),q(J))break}else{if(N.position===N.lineStart&&Qe(N)||B&&pt(F))break;if(K(F))if(Ut=N.line,_e=N.lineStart,xt=N.lineIndent,xe(N,!1,-1),N.lineIndent>=f){zt=!0,F=N.input.charCodeAt(N.position);continue}else{N.position=et,N.line=Ut,N.lineStart=_e,N.lineIndent=xt;break}}zt&&(Pe(N,Pt,et,!1),Ve(N,N.line-Ut),Pt=et=N.position,zt=!1),H(F)||(et=N.position+1),F=N.input.charCodeAt(++N.position)}return Pe(N,Pt,et,!1),N.result?!0:(N.kind=dt,N.result=tt,!1)}function vr(N,f){var B,J,St;if(B=N.input.charCodeAt(N.position),B!==39)return!1;for(N.kind="scalar",N.result="",N.position++,J=St=N.position;(B=N.input.charCodeAt(N.position))!==0;)if(B===39)if(Pe(N,J,N.position,!0),B=N.input.charCodeAt(++N.position),B===39)J=N.position,N.position++,St=N.position;else return!0;else K(B)?(Pe(N,J,St,!0),Ve(N,xe(N,!1,f)),J=St=N.position):N.position===N.lineStart&&Qe(N)?de(N,"unexpected end of the document within a single quoted scalar"):(N.position++,St=N.position);de(N,"unexpected end of the stream within a single quoted scalar")}function Pr(N,f){var B,J,St,Pt,et,zt;if(zt=N.input.charCodeAt(N.position),zt!==34)return!1;for(N.kind="scalar",N.result="",N.position++,B=J=N.position;(zt=N.input.charCodeAt(N.position))!==0;){if(zt===34)return Pe(N,B,N.position,!0),N.position++,!0;if(zt===92){if(Pe(N,B,N.position,!0),zt=N.input.charCodeAt(++N.position),K(zt))xe(N,!1,f);else if(zt<256&&Xt[zt])N.result+=ee[zt],N.position++;else if((et=Rt(zt))>0){for(St=et,Pt=0;St>0;St--)zt=N.input.charCodeAt(++N.position),(et=yt(zt))>=0?Pt=(Pt<<4)+et:de(N,"expected hexadecimal character");N.result+=Ft(Pt),N.position++}else de(N,"unknown escape sequence");B=J=N.position}else K(zt)?(Pe(N,B,J,!0),Ve(N,xe(N,!1,f)),B=J=N.position):N.position===N.lineStart&&Qe(N)?de(N,"unexpected end of the document within a double quoted scalar"):(N.position++,J=N.position)}de(N,"unexpected end of the stream within a double quoted scalar")}function Dr(N,f){var B=!0,J,St=N.tag,Pt,et=N.anchor,zt,Ut,_e,xt,dt,tt={},F,rt,At,Ct;if(Ct=N.input.charCodeAt(N.position),Ct===91)Ut=93,dt=!1,Pt=[];else if(Ct===123)Ut=125,dt=!0,Pt={};else return!1;for(N.anchor!==null&&(N.anchorMap[N.anchor]=Pt),Ct=N.input.charCodeAt(++N.position);Ct!==0;){if(xe(N,!0,f),Ct=N.input.charCodeAt(N.position),Ct===Ut)return N.position++,N.tag=St,N.anchor=et,N.kind=dt?"mapping":"sequence",N.result=Pt,!0;B||de(N,"missed comma between flow collection entries"),rt=F=At=null,_e=xt=!1,Ct===63&&(zt=N.input.charCodeAt(N.position+1),q(zt)&&(_e=xt=!0,N.position++,xe(N,!0,f))),J=N.line,dr(N,f,A,!1,!0),rt=N.tag,F=N.result,xe(N,!0,f),Ct=N.input.charCodeAt(N.position),(xt||N.line===J)&&Ct===58&&(_e=!0,Ct=N.input.charCodeAt(++N.position),xe(N,!0,f),dr(N,f,A,!1,!0),At=N.result),dt?Xe(N,Pt,tt,rt,F,At):_e?Pt.push(Xe(N,null,tt,rt,F,At)):Pt.push(F),xe(N,!0,f),Ct=N.input.charCodeAt(N.position),Ct===44?(B=!0,Ct=N.input.charCodeAt(++N.position)):B=!1}de(N,"unexpected end of the stream within a flow collection")}function Q(N,f){var B,J,St=M,Pt=!1,et=!1,zt=f,Ut=0,_e=!1,xt,dt;if(dt=N.input.charCodeAt(N.position),dt===124)J=!1;else if(dt===62)J=!0;else return!1;for(N.kind="scalar",N.result="";dt!==0;)if(dt=N.input.charCodeAt(++N.position),dt===43||dt===45)M===St?St=dt===43?w:W:de(N,"repeat of a chomping mode identifier");else if((xt=Et(dt))>=0)xt===0?de(N,"bad explicit indentation width of a block scalar; it cannot be less than one"):et?de(N,"repeat of an indentation width identifier"):(zt=f+xt-1,et=!0);else break;if(H(dt)){do dt=N.input.charCodeAt(++N.position);while(H(dt));if(dt===35)do dt=N.input.charCodeAt(++N.position);while(!K(dt)&&dt!==0)}for(;dt!==0;){for(Ae(N),N.lineIndent=0,dt=N.input.charCodeAt(N.position);(!et||N.lineIndent<zt)&&dt===32;)N.lineIndent++,dt=N.input.charCodeAt(++N.position);if(!et&&N.lineIndent>zt&&(zt=N.lineIndent),K(dt)){Ut++;continue}if(N.lineIndent<zt){St===w?N.result+=n.repeat(`
`,Pt?1+Ut:Ut):St===M&&Pt&&(N.result+=`
`);break}for(J?H(dt)?(_e=!0,N.result+=n.repeat(`
`,Pt?1+Ut:Ut)):_e?(_e=!1,N.result+=n.repeat(`
`,Ut+1)):Ut===0?Pt&&(N.result+=" "):N.result+=n.repeat(`
`,Ut):N.result+=n.repeat(`
`,Pt?1+Ut:Ut),Pt=!0,et=!0,Ut=0,B=N.position;!K(dt)&&dt!==0;)dt=N.input.charCodeAt(++N.position);Pe(N,B,N.position,!1)}return!0}function k(N,f){var B,J=N.tag,St=N.anchor,Pt=[],et,zt=!1,Ut;for(N.anchor!==null&&(N.anchorMap[N.anchor]=Pt),Ut=N.input.charCodeAt(N.position);Ut!==0&&!(Ut!==45||(et=N.input.charCodeAt(N.position+1),!q(et)));){if(zt=!0,N.position++,xe(N,!0,-1)&&N.lineIndent<=f){Pt.push(null),Ut=N.input.charCodeAt(N.position);continue}if(B=N.line,dr(N,f,D,!1,!0),Pt.push(N.result),xe(N,!0,-1),Ut=N.input.charCodeAt(N.position),(N.line===B||N.lineIndent>f)&&Ut!==0)de(N,"bad indentation of a sequence entry");else if(N.lineIndent<f)break}return zt?(N.tag=J,N.anchor=St,N.kind="sequence",N.result=Pt,!0):!1}function Z(N,f,B){var J,St,Pt,et,zt=N.tag,Ut=N.anchor,_e={},xt={},dt=null,tt=null,F=null,rt=!1,At=!1,Ct;for(N.anchor!==null&&(N.anchorMap[N.anchor]=_e),Ct=N.input.charCodeAt(N.position);Ct!==0;){if(J=N.input.charCodeAt(N.position+1),Pt=N.line,et=N.position,(Ct===63||Ct===58)&&q(J))Ct===63?(rt&&(Xe(N,_e,xt,dt,tt,null),dt=tt=F=null),At=!0,rt=!0,St=!0):rt?(rt=!1,St=!0):de(N,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),N.position+=1,Ct=J;else if(dr(N,B,y,!1,!0))if(N.line===Pt){for(Ct=N.input.charCodeAt(N.position);H(Ct);)Ct=N.input.charCodeAt(++N.position);if(Ct===58)Ct=N.input.charCodeAt(++N.position),q(Ct)||de(N,"a whitespace character is expected after the key-value separator within a block mapping"),rt&&(Xe(N,_e,xt,dt,tt,null),dt=tt=F=null),At=!0,rt=!1,St=!1,dt=N.tag,tt=N.result;else if(At)de(N,"can not read an implicit mapping pair; a colon is missed");else return N.tag=zt,N.anchor=Ut,!0}else if(At)de(N,"can not read a block mapping entry; a multiline key may not be an implicit key");else return N.tag=zt,N.anchor=Ut,!0;else break;if((N.line===Pt||N.lineIndent>f)&&(dr(N,f,o,!0,St)&&(rt?tt=N.result:F=N.result),rt||(Xe(N,_e,xt,dt,tt,F,Pt,et),dt=tt=F=null),xe(N,!0,-1),Ct=N.input.charCodeAt(N.position)),N.lineIndent>f&&Ct!==0)de(N,"bad indentation of a mapping entry");else if(N.lineIndent<f)break}return rt&&Xe(N,_e,xt,dt,tt,null),At&&(N.tag=zt,N.anchor=Ut,N.kind="mapping",N.result=_e),At}function se(N){var f,B=!1,J=!1,St,Pt,et;if(et=N.input.charCodeAt(N.position),et!==33)return!1;if(N.tag!==null&&de(N,"duplication of a tag property"),et=N.input.charCodeAt(++N.position),et===60?(B=!0,et=N.input.charCodeAt(++N.position)):et===33?(J=!0,St="!!",et=N.input.charCodeAt(++N.position)):St="!",f=N.position,B){do et=N.input.charCodeAt(++N.position);while(et!==0&&et!==62);N.position<N.length?(Pt=N.input.slice(f,N.position),et=N.input.charCodeAt(++N.position)):de(N,"unexpected end of the stream within a verbatim tag")}else{for(;et!==0&&!q(et);)et===33&&(J?de(N,"tag suffix cannot contain exclamation marks"):(St=N.input.slice(f-1,N.position+1),j.test(St)||de(N,"named tag handle cannot contain such characters"),J=!0,f=N.position+1)),et=N.input.charCodeAt(++N.position);Pt=N.input.slice(f,N.position),X.test(Pt)&&de(N,"tag suffix cannot contain flow indicator characters")}return Pt&&!it.test(Pt)&&de(N,"tag name cannot contain such characters: "+Pt),B?N.tag=Pt:m.call(N.tagMap,St)?N.tag=N.tagMap[St]+Pt:St==="!"?N.tag="!"+Pt:St==="!!"?N.tag="tag:yaml.org,2002:"+Pt:de(N,'undeclared tag handle "'+St+'"'),!0}function ye(N){var f,B;if(B=N.input.charCodeAt(N.position),B!==38)return!1;for(N.anchor!==null&&de(N,"duplication of an anchor property"),B=N.input.charCodeAt(++N.position),f=N.position;B!==0&&!q(B)&&!pt(B);)B=N.input.charCodeAt(++N.position);return N.position===f&&de(N,"name of an anchor node must contain at least one character"),N.anchor=N.input.slice(f,N.position),!0}function rr(N){var f,B,J;if(J=N.input.charCodeAt(N.position),J!==42)return!1;for(J=N.input.charCodeAt(++N.position),f=N.position;J!==0&&!q(J)&&!pt(J);)J=N.input.charCodeAt(++N.position);return N.position===f&&de(N,"name of an alias node must contain at least one character"),B=N.input.slice(f,N.position),m.call(N.anchorMap,B)||de(N,'unidentified alias "'+B+'"'),N.result=N.anchorMap[B],xe(N,!0,-1),!0}function dr(N,f,B,J,St){var Pt,et,zt,Ut=1,_e=!1,xt=!1,dt,tt,F,rt,At;if(N.listener!==null&&N.listener("open",N),N.tag=null,N.anchor=null,N.kind=null,N.result=null,Pt=et=zt=o===B||D===B,J&&xe(N,!0,-1)&&(_e=!0,N.lineIndent>f?Ut=1:N.lineIndent===f?Ut=0:N.lineIndent<f&&(Ut=-1)),Ut===1)for(;se(N)||ye(N);)xe(N,!0,-1)?(_e=!0,zt=Pt,N.lineIndent>f?Ut=1:N.lineIndent===f?Ut=0:N.lineIndent<f&&(Ut=-1)):zt=!1;if(zt&&(zt=_e||St),(Ut===1||o===B)&&(A===B||y===B?rt=f:rt=f+1,At=N.position-N.lineStart,Ut===1?zt&&(k(N,At)||Z(N,At,rt))||Dr(N,rt)?xt=!0:(et&&Q(N,rt)||vr(N,rt)||Pr(N,rt)?xt=!0:rr(N)?(xt=!0,(N.tag!==null||N.anchor!==null)&&de(N,"alias node should not have any properties")):Ze(N,rt,A===B)&&(xt=!0,N.tag===null&&(N.tag="?")),N.anchor!==null&&(N.anchorMap[N.anchor]=N.result)):Ut===0&&(xt=zt&&k(N,At))),N.tag!==null&&N.tag!=="!")if(N.tag==="?"){for(N.result!==null&&N.kind!=="scalar"&&de(N,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+N.kind+'"'),dt=0,tt=N.implicitTypes.length;dt<tt;dt+=1)if(F=N.implicitTypes[dt],F.resolve(N.result)){N.result=F.construct(N.result),N.tag=F.tag,N.anchor!==null&&(N.anchorMap[N.anchor]=N.result);break}}else m.call(N.typeMap[N.kind||"fallback"],N.tag)?(F=N.typeMap[N.kind||"fallback"][N.tag],N.result!==null&&F.kind!==N.kind&&de(N,"unacceptable node kind for !<"+N.tag+'> tag; it should be "'+F.kind+'", not "'+N.kind+'"'),F.resolve(N.result)?(N.result=F.construct(N.result),N.anchor!==null&&(N.anchorMap[N.anchor]=N.result)):de(N,"cannot resolve a node with !<"+N.tag+"> explicit tag")):de(N,"unknown tag !<"+N.tag+">");return N.listener!==null&&N.listener("close",N),N.tag!==null||N.anchor!==null||xt}function mr(N){var f=N.position,B,J,St,Pt=!1,et;for(N.version=null,N.checkLineBreaks=N.legacy,N.tagMap={},N.anchorMap={};(et=N.input.charCodeAt(N.position))!==0&&(xe(N,!0,-1),et=N.input.charCodeAt(N.position),!(N.lineIndent>0||et!==37));){for(Pt=!0,et=N.input.charCodeAt(++N.position),B=N.position;et!==0&&!q(et);)et=N.input.charCodeAt(++N.position);for(J=N.input.slice(B,N.position),St=[],J.length<1&&de(N,"directive name must not be less than one character in length");et!==0;){for(;H(et);)et=N.input.charCodeAt(++N.position);if(et===35){do et=N.input.charCodeAt(++N.position);while(et!==0&&!K(et));break}if(K(et))break;for(B=N.position;et!==0&&!q(et);)et=N.input.charCodeAt(++N.position);St.push(N.input.slice(B,N.position))}et!==0&&Ae(N),m.call(ze,J)?ze[J](N,J,St):He(N,'unknown document directive "'+J+'"')}if(xe(N,!0,-1),N.lineIndent===0&&N.input.charCodeAt(N.position)===45&&N.input.charCodeAt(N.position+1)===45&&N.input.charCodeAt(N.position+2)===45?(N.position+=3,xe(N,!0,-1)):Pt&&de(N,"directives end mark is expected"),dr(N,N.lineIndent-1,o,!1,!0),xe(N,!0,-1),N.checkLineBreaks&&nt.test(N.input.slice(f,N.position))&&He(N,"non-ASCII line breaks are interpreted as content"),N.documents.push(N.result),N.position===N.lineStart&&Qe(N)){N.input.charCodeAt(N.position)===46&&(N.position+=3,xe(N,!0,-1));return}if(N.position<N.length-1)de(N,"end of the stream or a document separator is expected");else return}function ur(N,f){N=String(N),f=f||{},N.length!==0&&(N.charCodeAt(N.length-1)!==10&&N.charCodeAt(N.length-1)!==13&&(N+=`
`),N.charCodeAt(0)===65279&&(N=N.slice(1)));var B=new ae(N,f),J=N.indexOf("\0");for(J!==-1&&(B.position=J,de(B,"null byte is not allowed in input")),B.input+="\0";B.input.charCodeAt(B.position)===32;)B.lineIndent+=1,B.position+=1;for(;B.position<B.length-1;)mr(B);return B.documents}function er(N,f,B){f!==null&&typeof f=="object"&&typeof B>"u"&&(B=f,f=null);var J=ur(N,B);if(typeof f!="function")return J;for(var St=0,Pt=J.length;St<Pt;St+=1)f(J[St])}function Gr(N,f){var B=ur(N,f);if(B.length!==0){if(B.length===1)return B[0];throw new i("expected a single document in the stream, but found more")}}function Lr(N,f,B){return typeof f=="object"&&f!==null&&typeof B>"u"&&(B=f,f=null),er(N,f,n.extend({schema:p},B))}function Br(N,f){return Gr(N,n.extend({schema:p},f))}r.exports.loadAll=er,r.exports.load=Gr,r.exports.safeLoadAll=Lr,r.exports.safeLoad=Br}),P_=ce((t,r)=>{"use strict";var n=Jo(),i=hl(),u=Uf(),p=pl(),g=Object.prototype.toString,m=Object.prototype.hasOwnProperty,A=9,y=10,D=13,o=32,M=33,W=34,w=35,U=37,nt=38,X=39,j=42,it=44,ot=45,K=58,H=61,q=62,pt=63,yt=64,Rt=91,Et=93,vt=96,Ft=123,Xt=124,ee=125,ne={};ne[0]="\\0",ne[7]="\\a",ne[8]="\\b",ne[9]="\\t",ne[10]="\\n",ne[11]="\\v",ne[12]="\\f",ne[13]="\\r",ne[27]="\\e",ne[34]='\\"',ne[92]="\\\\",ne[133]="\\N",ne[160]="\\_",ne[8232]="\\L",ne[8233]="\\P";var ae=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function Le(et,zt){var Ut,_e,xt,dt,tt,F,rt;if(zt===null)return{};for(Ut={},_e=Object.keys(zt),xt=0,dt=_e.length;xt<dt;xt+=1)tt=_e[xt],F=String(zt[tt]),tt.slice(0,2)==="!!"&&(tt="tag:yaml.org,2002:"+tt.slice(2)),rt=et.compiledTypeMap.fallback[tt],rt&&m.call(rt.styleAliases,F)&&(F=rt.styleAliases[F]),Ut[tt]=F;return Ut}function de(et){var zt,Ut,_e;if(zt=et.toString(16).toUpperCase(),et<=255)Ut="x",_e=2;else if(et<=65535)Ut="u",_e=4;else if(et<=4294967295)Ut="U",_e=8;else throw new i("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+Ut+n.repeat("0",_e-zt.length)+zt}function He(et){this.schema=et.schema||u,this.indent=Math.max(1,et.indent||2),this.noArrayIndent=et.noArrayIndent||!1,this.skipInvalid=et.skipInvalid||!1,this.flowLevel=n.isNothing(et.flowLevel)?-1:et.flowLevel,this.styleMap=Le(this.schema,et.styles||null),this.sortKeys=et.sortKeys||!1,this.lineWidth=et.lineWidth||80,this.noRefs=et.noRefs||!1,this.noCompatMode=et.noCompatMode||!1,this.condenseFlow=et.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function ze(et,zt){for(var Ut=n.repeat(" ",zt),_e=0,xt=-1,dt="",tt,F=et.length;_e<F;)xt=et.indexOf(`
`,_e),xt===-1?(tt=et.slice(_e),_e=F):(tt=et.slice(_e,xt+1),_e=xt+1),tt.length&&tt!==`
`&&(dt+=Ut),dt+=tt;return dt}function Pe(et,zt){return`
`+n.repeat(" ",et.indent*zt)}function Je(et,zt){var Ut,_e,xt;for(Ut=0,_e=et.implicitTypes.length;Ut<_e;Ut+=1)if(xt=et.implicitTypes[Ut],xt.resolve(zt))return!0;return!1}function Xe(et){return et===o||et===A}function Ae(et){return 32<=et&&et<=126||161<=et&&et<=55295&&et!==8232&&et!==8233||57344<=et&&et<=65533&&et!==65279||65536<=et&&et<=1114111}function xe(et){return Ae(et)&&!Xe(et)&&et!==65279&&et!==D&&et!==y}function Qe(et,zt){return Ae(et)&&et!==65279&&et!==it&&et!==Rt&&et!==Et&&et!==Ft&&et!==ee&&et!==K&&(et!==w||zt&&xe(zt))}function Ve(et){return Ae(et)&&et!==65279&&!Xe(et)&&et!==ot&&et!==pt&&et!==K&&et!==it&&et!==Rt&&et!==Et&&et!==Ft&&et!==ee&&et!==w&&et!==nt&&et!==j&&et!==M&&et!==Xt&&et!==H&&et!==q&&et!==X&&et!==W&&et!==U&&et!==yt&&et!==vt}function Ze(et){var zt=/^\n* /;return zt.test(et)}var vr=1,Pr=2,Dr=3,Q=4,k=5;function Z(et,zt,Ut,_e,xt){var dt,tt,F,rt=!1,At=!1,Ct=_e!==-1,Nt=-1,Yt=Ve(et.charCodeAt(0))&&!Xe(et.charCodeAt(et.length-1));if(zt)for(dt=0;dt<et.length;dt++){if(tt=et.charCodeAt(dt),!Ae(tt))return k;F=dt>0?et.charCodeAt(dt-1):null,Yt=Yt&&Qe(tt,F)}else{for(dt=0;dt<et.length;dt++){if(tt=et.charCodeAt(dt),tt===y)rt=!0,Ct&&(At=At||dt-Nt-1>_e&&et[Nt+1]!==" ",Nt=dt);else if(!Ae(tt))return k;F=dt>0?et.charCodeAt(dt-1):null,Yt=Yt&&Qe(tt,F)}At=At||Ct&&dt-Nt-1>_e&&et[Nt+1]!==" "}return!rt&&!At?Yt&&!xt(et)?vr:Pr:Ut>9&&Ze(et)?k:At?Q:Dr}function se(et,zt,Ut,_e){et.dump=(function(){if(zt.length===0)return"''";if(!et.noCompatMode&&ae.indexOf(zt)!==-1)return"'"+zt+"'";var xt=et.indent*Math.max(1,Ut),dt=et.lineWidth===-1?-1:Math.max(Math.min(et.lineWidth,40),et.lineWidth-xt),tt=_e||et.flowLevel>-1&&Ut>=et.flowLevel;function F(rt){return Je(et,rt)}switch(Z(zt,tt,et.indent,dt,F)){case vr:return zt;case Pr:return"'"+zt.replace(/'/g,"''")+"'";case Dr:return"|"+ye(zt,et.indent)+rr(ze(zt,xt));case Q:return">"+ye(zt,et.indent)+rr(ze(dr(zt,dt),xt));case k:return'"'+ur(zt,dt)+'"';default:throw new i("impossible error: invalid scalar style")}})()}function ye(et,zt){var Ut=Ze(et)?String(zt):"",_e=et[et.length-1]===`
`,xt=_e&&(et[et.length-2]===`
`||et===`
`),dt=xt?"+":_e?"":"-";return Ut+dt+`
`}function rr(et){return et[et.length-1]===`
`?et.slice(0,-1):et}function dr(et,zt){for(var Ut=/(\n+)([^\n]*)/g,_e=(function(){var At=et.indexOf(`
`);return At=At!==-1?At:et.length,Ut.lastIndex=At,mr(et.slice(0,At),zt)})(),xt=et[0]===`
`||et[0]===" ",dt,tt;tt=Ut.exec(et);){var F=tt[1],rt=tt[2];dt=rt[0]===" ",_e+=F+(!xt&&!dt&&rt!==""?`
`:"")+mr(rt,zt),xt=dt}return _e}function mr(et,zt){if(et===""||et[0]===" ")return et;for(var Ut=/ [^ ]/g,_e,xt=0,dt,tt=0,F=0,rt="";_e=Ut.exec(et);)F=_e.index,F-xt>zt&&(dt=tt>xt?tt:F,rt+=`
`+et.slice(xt,dt),xt=dt+1),tt=F;return rt+=`
`,et.length-xt>zt&&tt>xt?rt+=et.slice(xt,tt)+`
`+et.slice(tt+1):rt+=et.slice(xt),rt.slice(1)}function ur(et){for(var zt="",Ut,_e,xt,dt=0;dt<et.length;dt++){if(Ut=et.charCodeAt(dt),Ut>=55296&&Ut<=56319&&(_e=et.charCodeAt(dt+1),_e>=56320&&_e<=57343)){zt+=de((Ut-55296)*1024+_e-56320+65536),dt++;continue}xt=ne[Ut],zt+=!xt&&Ae(Ut)?et[dt]:xt||de(Ut)}return zt}function er(et,zt,Ut){var _e="",xt=et.tag,dt,tt;for(dt=0,tt=Ut.length;dt<tt;dt+=1)f(et,zt,Ut[dt],!1,!1)&&(dt!==0&&(_e+=","+(et.condenseFlow?"":" ")),_e+=et.dump);et.tag=xt,et.dump="["+_e+"]"}function Gr(et,zt,Ut,_e){var xt="",dt=et.tag,tt,F;for(tt=0,F=Ut.length;tt<F;tt+=1)f(et,zt+1,Ut[tt],!0,!0)&&((!_e||tt!==0)&&(xt+=Pe(et,zt)),et.dump&&y===et.dump.charCodeAt(0)?xt+="-":xt+="- ",xt+=et.dump);et.tag=dt,et.dump=xt||"[]"}function Lr(et,zt,Ut){var _e="",xt=et.tag,dt=Object.keys(Ut),tt,F,rt,At,Ct;for(tt=0,F=dt.length;tt<F;tt+=1)Ct="",tt!==0&&(Ct+=", "),et.condenseFlow&&(Ct+='"'),rt=dt[tt],At=Ut[rt],f(et,zt,rt,!1,!1)&&(et.dump.length>1024&&(Ct+="? "),Ct+=et.dump+(et.condenseFlow?'"':"")+":"+(et.condenseFlow?"":" "),f(et,zt,At,!1,!1)&&(Ct+=et.dump,_e+=Ct));et.tag=xt,et.dump="{"+_e+"}"}function Br(et,zt,Ut,_e){var xt="",dt=et.tag,tt=Object.keys(Ut),F,rt,At,Ct,Nt,Yt;if(et.sortKeys===!0)tt.sort();else if(typeof et.sortKeys=="function")tt.sort(et.sortKeys);else if(et.sortKeys)throw new i("sortKeys must be a boolean or a function");for(F=0,rt=tt.length;F<rt;F+=1)Yt="",(!_e||F!==0)&&(Yt+=Pe(et,zt)),At=tt[F],Ct=Ut[At],f(et,zt+1,At,!0,!0,!0)&&(Nt=et.tag!==null&&et.tag!=="?"||et.dump&&et.dump.length>1024,Nt&&(et.dump&&y===et.dump.charCodeAt(0)?Yt+="?":Yt+="? "),Yt+=et.dump,Nt&&(Yt+=Pe(et,zt)),f(et,zt+1,Ct,!0,Nt)&&(et.dump&&y===et.dump.charCodeAt(0)?Yt+=":":Yt+=": ",Yt+=et.dump,xt+=Yt));et.tag=dt,et.dump=xt||"{}"}function N(et,zt,Ut){var _e,xt,dt,tt,F,rt;for(xt=Ut?et.explicitTypes:et.implicitTypes,dt=0,tt=xt.length;dt<tt;dt+=1)if(F=xt[dt],(F.instanceOf||F.predicate)&&(!F.instanceOf||typeof zt=="object"&&zt instanceof F.instanceOf)&&(!F.predicate||F.predicate(zt))){if(et.tag=Ut?F.tag:"?",F.represent){if(rt=et.styleMap[F.tag]||F.defaultStyle,g.call(F.represent)==="[object Function]")_e=F.represent(zt,rt);else if(m.call(F.represent,rt))_e=F.represent[rt](zt,rt);else throw new i("!<"+F.tag+'> tag resolver accepts not "'+rt+'" style');et.dump=_e}return!0}return!1}function f(et,zt,Ut,_e,xt,dt){et.tag=null,et.dump=Ut,N(et,Ut,!1)||N(et,Ut,!0);var tt=g.call(et.dump);_e&&(_e=et.flowLevel<0||et.flowLevel>zt);var F=tt==="[object Object]"||tt==="[object Array]",rt,At;if(F&&(rt=et.duplicates.indexOf(Ut),At=rt!==-1),(et.tag!==null&&et.tag!=="?"||At||et.indent!==2&&zt>0)&&(xt=!1),At&&et.usedDuplicates[rt])et.dump="*ref_"+rt;else{if(F&&At&&!et.usedDuplicates[rt]&&(et.usedDuplicates[rt]=!0),tt==="[object Object]")_e&&Object.keys(et.dump).length!==0?(Br(et,zt,et.dump,xt),At&&(et.dump="&ref_"+rt+et.dump)):(Lr(et,zt,et.dump),At&&(et.dump="&ref_"+rt+" "+et.dump));else if(tt==="[object Array]"){var Ct=et.noArrayIndent&&zt>0?zt-1:zt;_e&&et.dump.length!==0?(Gr(et,Ct,et.dump,xt),At&&(et.dump="&ref_"+rt+et.dump)):(er(et,Ct,et.dump),At&&(et.dump="&ref_"+rt+" "+et.dump))}else if(tt==="[object String]")et.tag!=="?"&&se(et,et.dump,zt,dt);else{if(et.skipInvalid)return!1;throw new i("unacceptable kind of an object to dump "+tt)}et.tag!==null&&et.tag!=="?"&&(et.dump="!<"+et.tag+"> "+et.dump)}return!0}function B(et,zt){var Ut=[],_e=[],xt,dt;for(J(et,Ut,_e),xt=0,dt=_e.length;xt<dt;xt+=1)zt.duplicates.push(Ut[_e[xt]]);zt.usedDuplicates=new Array(dt)}function J(et,zt,Ut){var _e,xt,dt;if(et!==null&&typeof et=="object")if(xt=zt.indexOf(et),xt!==-1)Ut.indexOf(xt)===-1&&Ut.push(xt);else if(zt.push(et),Array.isArray(et))for(xt=0,dt=et.length;xt<dt;xt+=1)J(et[xt],zt,Ut);else for(_e=Object.keys(et),xt=0,dt=_e.length;xt<dt;xt+=1)J(et[_e[xt]],zt,Ut)}function St(et,zt){zt=zt||{};var Ut=new He(zt);return Ut.noRefs||B(et,Ut),f(Ut,0,et,!0,!0)?Ut.dump+`
`:""}function Pt(et,zt){return St(et,n.extend({schema:p},zt))}r.exports.dump=St,r.exports.safeDump=Pt}),T_=ce((t,r)=>{"use strict";var n=l_(),i=P_();function u(p){return function(){throw new Error("Function "+p+" is deprecated and cannot be used.")}}r.exports.Type=sn(),r.exports.Schema=Zo(),r.exports.FAILSAFE_SCHEMA=D0(),r.exports.JSON_SCHEMA=fm(),r.exports.CORE_SCHEMA=hm(),r.exports.DEFAULT_SAFE_SCHEMA=pl(),r.exports.DEFAULT_FULL_SCHEMA=Uf(),r.exports.load=n.load,r.exports.loadAll=n.loadAll,r.exports.safeLoad=n.safeLoad,r.exports.safeLoadAll=n.safeLoadAll,r.exports.dump=i.dump,r.exports.safeDump=i.safeDump,r.exports.YAMLException=hl(),r.exports.MINIMAL_SCHEMA=D0(),r.exports.SAFE_SCHEMA=pl(),r.exports.DEFAULT_SCHEMA=Uf(),r.exports.scan=u("scan"),r.exports.parse=u("parse"),r.exports.compose=u("compose"),r.exports.addConstructor=u("addConstructor")}),k_=ce((t,r)=>{"use strict";var n=T_();r.exports=n}),U_=ce((t,r)=>{"use strict";var n=k_();r.exports={safeLoad:n.safeLoad,load:n.load,safeDump:n.safeDump,dump:n.dump}}),q_=ce(t=>{"use strict";t.toString=function(r){switch(r){case 1:return"A";case 10:return"NULL";case 28:return"AAAA";case 18:return"AFSDB";case 42:return"APL";case 257:return"CAA";case 60:return"CDNSKEY";case 59:return"CDS";case 37:return"CERT";case 5:return"CNAME";case 49:return"DHCID";case 32769:return"DLV";case 39:return"DNAME";case 48:return"DNSKEY";case 43:return"DS";case 55:return"HIP";case 13:return"HINFO";case 45:return"IPSECKEY";case 25:return"KEY";case 36:return"KX";case 29:return"LOC";case 15:return"MX";case 35:return"NAPTR";case 2:return"NS";case 47:return"NSEC";case 50:return"NSEC3";case 51:return"NSEC3PARAM";case 12:return"PTR";case 46:return"RRSIG";case 17:return"RP";case 24:return"SIG";case 6:return"SOA";case 99:return"SPF";case 33:return"SRV";case 44:return"SSHFP";case 32768:return"TA";case 249:return"TKEY";case 52:return"TLSA";case 250:return"TSIG";case 16:return"TXT";case 252:return"AXFR";case 251:return"IXFR";case 41:return"OPT";case 255:return"ANY"}return"UNKNOWN_"+r},t.toType=function(r){switch(r.toUpperCase()){case"A":return 1;case"NULL":return 10;case"AAAA":return 28;case"AFSDB":return 18;case"APL":return 42;case"CAA":return 257;case"CDNSKEY":return 60;case"CDS":return 59;case"CERT":return 37;case"CNAME":return 5;case"DHCID":return 49;case"DLV":return 32769;case"DNAME":return 39;case"DNSKEY":return 48;case"DS":return 43;case"HIP":return 55;case"HINFO":return 13;case"IPSECKEY":return 45;case"KEY":return 25;case"KX":return 36;case"LOC":return 29;case"MX":return 15;case"NAPTR":return 35;case"NS":return 2;case"NSEC":return 47;case"NSEC3":return 50;case"NSEC3PARAM":return 51;case"PTR":return 12;case"RRSIG":return 46;case"RP":return 17;case"SIG":return 24;case"SOA":return 6;case"SPF":return 99;case"SRV":return 33;case"SSHFP":return 44;case"TA":return 32768;case"TKEY":return 249;case"TLSA":return 52;case"TSIG":return 250;case"TXT":return 16;case"AXFR":return 252;case"IXFR":return 251;case"OPT":return 41;case"ANY":return 255;case"*":return 255}return r.toUpperCase().startsWith("UNKNOWN_")?parseInt(r.slice(8)):0}}),V_=ce(t=>{"use strict";t.toString=function(r){switch(r){case 0:return"NOERROR";case 1:return"FORMERR";case 2:return"SERVFAIL";case 3:return"NXDOMAIN";case 4:return"NOTIMP";case 5:return"REFUSED";case 6:return"YXDOMAIN";case 7:return"YXRRSET";case 8:return"NXRRSET";case 9:return"NOTAUTH";case 10:return"NOTZONE";case 11:return"RCODE_11";case 12:return"RCODE_12";case 13:return"RCODE_13";case 14:return"RCODE_14";case 15:return"RCODE_15"}return"RCODE_"+r},t.toRcode=function(r){switch(r.toUpperCase()){case"NOERROR":return 0;case"FORMERR":return 1;case"SERVFAIL":return 2;case"NXDOMAIN":return 3;case"NOTIMP":return 4;case"REFUSED":return 5;case"YXDOMAIN":return 6;case"YXRRSET":return 7;case"NXRRSET":return 8;case"NOTAUTH":return 9;case"NOTZONE":return 10;case"RCODE_11":return 11;case"RCODE_12":return 12;case"RCODE_13":return 13;case"RCODE_14":return 14;case"RCODE_15":return 15}return 0}}),K_=ce(t=>{"use strict";t.toString=function(r){switch(r){case 0:return"QUERY";case 1:return"IQUERY";case 2:return"STATUS";case 3:return"OPCODE_3";case 4:return"NOTIFY";case 5:return"UPDATE";case 6:return"OPCODE_6";case 7:return"OPCODE_7";case 8:return"OPCODE_8";case 9:return"OPCODE_9";case 10:return"OPCODE_10";case 11:return"OPCODE_11";case 12:return"OPCODE_12";case 13:return"OPCODE_13";case 14:return"OPCODE_14";case 15:return"OPCODE_15"}return"OPCODE_"+r},t.toOpcode=function(r){switch(r.toUpperCase()){case"QUERY":return 0;case"IQUERY":return 1;case"STATUS":return 2;case"OPCODE_3":return 3;case"NOTIFY":return 4;case"UPDATE":return 5;case"OPCODE_6":return 6;case"OPCODE_7":return 7;case"OPCODE_8":return 8;case"OPCODE_9":return 9;case"OPCODE_10":return 10;case"OPCODE_11":return 11;case"OPCODE_12":return 12;case"OPCODE_13":return 13;case"OPCODE_14":return 14;case"OPCODE_15":return 15}return 0}}),z_=ce(t=>{"use strict";t.toString=function(r){switch(r){case 1:return"IN";case 2:return"CS";case 3:return"CH";case 4:return"HS";case 255:return"ANY"}return"UNKNOWN_"+r},t.toClass=function(r){switch(r.toUpperCase()){case"IN":return 1;case"CS":return 2;case"CH":return 3;case"HS":return 4;case"ANY":return 255}return 0}}),G_=ce(t=>{"use strict";t.toString=function(r){switch(r){case 1:return"LLQ";case 2:return"UL";case 3:return"NSID";case 5:return"DAU";case 6:return"DHU";case 7:return"N3U";case 8:return"CLIENT_SUBNET";case 9:return"EXPIRE";case 10:return"COOKIE";case 11:return"TCP_KEEPALIVE";case 12:return"PADDING";case 13:return"CHAIN";case 14:return"KEY_TAG";case 26946:return"DEVICEID"}return r<0?null:`OPTION_${r}`},t.toCode=function(r){if(typeof r=="number")return r;if(!r)return-1;switch(r.toUpperCase()){case"OPTION_0":return 0;case"LLQ":return 1;case"UL":return 2;case"NSID":return 3;case"OPTION_4":return 4;case"DAU":return 5;case"DHU":return 6;case"N3U":return 7;case"CLIENT_SUBNET":return 8;case"EXPIRE":return 9;case"COOKIE":return 10;case"TCP_KEEPALIVE":return 11;case"PADDING":return 12;case"CHAIN":return 13;case"KEY_TAG":return 14;case"DEVICEID":return 26946;case"OPTION_65535":return 65535}let n=r.match(/_(\d+)$/);return n?parseInt(n[1],10):-1}}),X_=ce((t,r)=>{var n=(function(i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.decode=w,i.encode=W,i.familyOf=M,i.name=void 0,i.sizeOf=o,i.v6=i.v4=void 0;let u=/^(\d{1,3}\.){3,3}\d{1,3}$/,p=4,g=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i,m=16,A={name:"v4",size:p,isFormat:U=>u.test(U),encode(U,nt,X){X=~~X,nt=nt||new Uint8Array(X+p);let j=U.length,it=0;for(let ot=0;ot<j;){let K=U.charCodeAt(ot++);K===46?(nt[X++]=it,it=0):it=it*10+(K-48)}return nt[X]=it,nt},decode(U,nt){return nt=~~nt,`${U[nt++]}.${U[nt++]}.${U[nt++]}.${U[nt]}`}};i.v4=A;let y={name:"v6",size:m,isFormat:U=>U.length>0&&g.test(U),encode(U,nt,X){X=~~X;let j=X+m,it=-1,ot=0,K=0,H=!0,q=!1;nt=nt||new Uint8Array(X+m);for(let pt=0;pt<U.length;pt++){let yt=U.charCodeAt(pt);yt===58?(H?it!==-1?(X<j&&(nt[X]=0),X<j-1&&(nt[X+1]=0),X+=2):X<j&&(it=X):(q===!0?(X<j&&(nt[X]=K),X++):(X<j&&(nt[X]=ot>>8),X<j-1&&(nt[X+1]=ot&255),X+=2),ot=0,K=0),H=!0,q=!1):yt===46?(X<j&&(nt[X]=K),X++,K=0,ot=0,H=!1,q=!0):(H=!1,yt>=97?yt-=87:yt>=65?yt-=55:(yt-=48,K=K*10+yt),ot=(ot<<4)+yt)}if(H===!1)q===!0?(X<j&&(nt[X]=K),X++):(X<j&&(nt[X]=ot>>8),X<j-1&&(nt[X+1]=ot&255),X+=2);else if(it===0)X<j&&(nt[X]=0),X<j-1&&(nt[X+1]=0),X+=2;else if(it!==-1){X+=2;for(let pt=Math.min(X-1,j-1);pt>=it+2;pt--)nt[pt]=nt[pt-2];nt[it]=0,nt[it+1]=0,it=X}if(it!==X&&it!==-1)for(X>j-2&&(X=j-2);j>it;)nt[--j]=X<j&&X>it?nt[--X]:0;else for(;X<j;)nt[X++]=0;return nt},decode(U,nt){nt=~~nt;let X="";for(let j=0;j<m;j+=2)j!==0&&(X+=":"),X+=(U[nt+j]<<8|U[nt+j+1]).toString(16);return X.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}};i.v6=y;let D="ip";i.name=D;function o(U){if(A.isFormat(U))return A.size;if(y.isFormat(U))return y.size;throw Error(`Invalid ip address: ${U}`)}function M(U){return o(U)===A.size?1:2}function W(U,nt,X){X=~~X;let j=o(U);return typeof nt=="function"&&(nt=nt(X+j)),j===A.size?A.encode(U,nt,X):y.encode(U,nt,X)}function w(U,nt,X){if(nt=~~nt,X=X||U.length-nt,X===A.size)return A.decode(U,nt,X);if(X===y.size)return y.decode(U,nt,X);throw Error(`Invalid buffer size needs to be ${A.size} for v4 or ${y.size} for v6.`)}return"default"in i?i.default:i})({});typeof define=="function"&&define.amd?define([],function(){return n}):typeof r=="object"&&typeof t=="object"&&(r.exports=n)}),Q_=ce(t=>{"use strict";var r=l0().Buffer,n=q_(),i=V_(),u=K_(),p=z_(),g=G_(),m=X_(),A=0,y=32768,D=32768,o=~D,M=32768,W=~M,w=t.name={};w.encode=function(Q,k,Z,{mail:se=!1}={}){k||(k=r.alloc(w.encodingLength(Q))),Z||(Z=0);let ye=Z,rr=Q.replace(/^\.|\.$/gm,"");if(rr.length){let dr=[];if(se){let mr="";rr.split(".").forEach(ur=>{ur.endsWith("\\")?mr+=(mr.length?".":"")+ur.slice(0,-1):dr.length===0&&mr.length?dr.push(mr+"."+ur):dr.push(ur)})}else dr=rr.split(".");for(let mr=0;mr<dr.length;mr++){let ur=k.write(dr[mr],Z+1);k[Z]=ur,Z+=ur+1}}return k[Z++]=0,w.encode.bytes=Z-ye,k},w.encode.bytes=0,w.decode=function(Q,k,{mail:Z=!1}={}){k||(k=0);let se=[],ye=k,rr=0,dr=0,mr=!1;for(;;){if(k>=Q.length)throw new Error("Cannot decode name (buffer overflow)");let ur=Q[k++];if(dr+=mr?0:1,ur===0)break;if(ur&192)if((ur&192)===192){if(k+1>Q.length)throw new Error("Cannot decode name (buffer overflow)");let er=Q.readUInt16BE(k-1)-49152;if(er>=ye)throw new Error("Cannot decode name (bad pointer)");k=er,ye=er,dr+=mr?0:1,mr=!0}else throw new Error("Cannot decode name (bad label)");else{if(k+ur>Q.length)throw new Error("Cannot decode name (buffer overflow)");if(rr+=ur+1,rr>254)throw new Error("Cannot decode name (name too long)");let er=Q.toString("utf-8",k,k+ur);Z&&(er=er.replace(/\./g,"\\.")),se.push(er),k+=ur,dr+=mr?0:ur}}return w.decode.bytes=dr,se.length===0?".":se.join(".")},w.decode.bytes=0,w.encodingLength=function(Q){return Q==="."||Q===".."?1:r.byteLength(Q.replace(/^\.|\.$/gm,""))+2};var U={};U.encode=function(Q,k,Z){k||(k=r.alloc(U.encodingLength(Q))),Z||(Z=0);let se=k.write(Q,Z+1);return k[Z]=se,U.encode.bytes=se+1,k},U.encode.bytes=0,U.decode=function(Q,k){k||(k=0);let Z=Q[k],se=Q.toString("utf-8",k+1,k+1+Z);return U.decode.bytes=Z+1,se},U.decode.bytes=0,U.encodingLength=function(Q){return r.byteLength(Q)+1};var nt={};nt.encode=function(Q,k,Z){k||(k=nt.encodingLength(Q)),Z||(Z=0);let se=(Q.flags||0)&32767,ye=Q.type==="response"?y:A;return k.writeUInt16BE(Q.id||0,Z),k.writeUInt16BE(se|ye,Z+2),k.writeUInt16BE(Q.questions.length,Z+4),k.writeUInt16BE(Q.answers.length,Z+6),k.writeUInt16BE(Q.authorities.length,Z+8),k.writeUInt16BE(Q.additionals.length,Z+10),k},nt.encode.bytes=12,nt.decode=function(Q,k){if(k||(k=0),Q.length<12)throw new Error("Header must be 12 bytes");let Z=Q.readUInt16BE(k+2);return{id:Q.readUInt16BE(k),type:Z&y?"response":"query",flags:Z&32767,flag_qr:(Z>>15&1)===1,opcode:u.toString(Z>>11&15),flag_aa:(Z>>10&1)===1,flag_tc:(Z>>9&1)===1,flag_rd:(Z>>8&1)===1,flag_ra:(Z>>7&1)===1,flag_z:(Z>>6&1)===1,flag_ad:(Z>>5&1)===1,flag_cd:(Z>>4&1)===1,rcode:i.toString(Z&15),questions:new Array(Q.readUInt16BE(k+4)),answers:new Array(Q.readUInt16BE(k+6)),authorities:new Array(Q.readUInt16BE(k+8)),additionals:new Array(Q.readUInt16BE(k+10))}},nt.decode.bytes=12,nt.encodingLength=function(){return 12};var X=t.unknown={};X.encode=function(Q,k,Z){return k||(k=r.alloc(X.encodingLength(Q))),Z||(Z=0),k.writeUInt16BE(Q.length,Z),Q.copy(k,Z+2),X.encode.bytes=Q.length+2,k},X.encode.bytes=0,X.decode=function(Q,k){k||(k=0);let Z=Q.readUInt16BE(k),se=Q.slice(k+2,k+2+Z);return X.decode.bytes=Z+2,se},X.decode.bytes=0,X.encodingLength=function(Q){return Q.length+2};var j=t.ns={};j.encode=function(Q,k,Z){return k||(k=r.alloc(j.encodingLength(Q))),Z||(Z=0),w.encode(Q,k,Z+2),k.writeUInt16BE(w.encode.bytes,Z),j.encode.bytes=w.encode.bytes+2,k},j.encode.bytes=0,j.decode=function(Q,k){k||(k=0);let Z=Q.readUInt16BE(k),se=w.decode(Q,k+2);return j.decode.bytes=Z+2,se},j.decode.bytes=0,j.encodingLength=function(Q){return w.encodingLength(Q)+2};var it=t.soa={};it.encode=function(Q,k,Z){k||(k=r.alloc(it.encodingLength(Q))),Z||(Z=0);let se=Z;return Z+=2,w.encode(Q.mname,k,Z),Z+=w.encode.bytes,w.encode(Q.rname,k,Z,{mail:!0}),Z+=w.encode.bytes,k.writeUInt32BE(Q.serial||0,Z),Z+=4,k.writeUInt32BE(Q.refresh||0,Z),Z+=4,k.writeUInt32BE(Q.retry||0,Z),Z+=4,k.writeUInt32BE(Q.expire||0,Z),Z+=4,k.writeUInt32BE(Q.minimum||0,Z),Z+=4,k.writeUInt16BE(Z-se-2,se),it.encode.bytes=Z-se,k},it.encode.bytes=0,it.decode=function(Q,k){k||(k=0);let Z=k,se={};return k+=2,se.mname=w.decode(Q,k),k+=w.decode.bytes,se.rname=w.decode(Q,k,{mail:!0}),k+=w.decode.bytes,se.serial=Q.readUInt32BE(k),k+=4,se.refresh=Q.readUInt32BE(k),k+=4,se.retry=Q.readUInt32BE(k),k+=4,se.expire=Q.readUInt32BE(k),k+=4,se.minimum=Q.readUInt32BE(k),k+=4,it.decode.bytes=k-Z,se},it.decode.bytes=0,it.encodingLength=function(Q){return 22+w.encodingLength(Q.mname)+w.encodingLength(Q.rname)};var ot=t.txt={};ot.encode=function(Q,k,Z){Array.isArray(Q)||(Q=[Q]);for(let ye=0;ye<Q.length;ye++)if(typeof Q[ye]=="string"&&(Q[ye]=r.from(Q[ye])),!r.isBuffer(Q[ye]))throw new Error("Must be a Buffer");k||(k=r.alloc(ot.encodingLength(Q))),Z||(Z=0);let se=Z;return Z+=2,Q.forEach(function(ye){k[Z++]=ye.length,ye.copy(k,Z,0,ye.length),Z+=ye.length}),k.writeUInt16BE(Z-se-2,se),ot.encode.bytes=Z-se,k},ot.encode.bytes=0,ot.decode=function(Q,k){k||(k=0);let Z=k,se=Q.readUInt16BE(k);k+=2;let ye=[];for(;se>0;){let rr=Q[k++];if(--se,se<rr)throw new Error("Buffer overflow");ye.push(Q.slice(k,k+rr)),k+=rr,se-=rr}return ot.decode.bytes=k-Z,ye},ot.decode.bytes=0,ot.encodingLength=function(Q){Array.isArray(Q)||(Q=[Q]);let k=2;return Q.forEach(function(Z){typeof Z=="string"?k+=r.byteLength(Z)+1:k+=Z.length+1}),k};var K=t.null={};K.encode=function(Q,k,Z){k||(k=r.alloc(K.encodingLength(Q))),Z||(Z=0),typeof Q=="string"&&(Q=r.from(Q)),Q||(Q=r.alloc(0));let se=Z;Z+=2;let ye=Q.length;return Q.copy(k,Z,0,ye),Z+=ye,k.writeUInt16BE(Z-se-2,se),K.encode.bytes=Z-se,k},K.encode.bytes=0,K.decode=function(Q,k){k||(k=0);let Z=k,se=Q.readUInt16BE(k);k+=2;let ye=Q.slice(k,k+se);return k+=se,K.decode.bytes=k-Z,ye},K.decode.bytes=0,K.encodingLength=function(Q){return Q?(r.isBuffer(Q)?Q.length:r.byteLength(Q))+2:2};var H=t.hinfo={};H.encode=function(Q,k,Z){k||(k=r.alloc(H.encodingLength(Q))),Z||(Z=0);let se=Z;return Z+=2,U.encode(Q.cpu,k,Z),Z+=U.encode.bytes,U.encode(Q.os,k,Z),Z+=U.encode.bytes,k.writeUInt16BE(Z-se-2,se),H.encode.bytes=Z-se,k},H.encode.bytes=0,H.decode=function(Q,k){k||(k=0);let Z=k,se={};return k+=2,se.cpu=U.decode(Q,k),k+=U.decode.bytes,se.os=U.decode(Q,k),k+=U.decode.bytes,H.decode.bytes=k-Z,se},H.decode.bytes=0,H.encodingLength=function(Q){return U.encodingLength(Q.cpu)+U.encodingLength(Q.os)+2};var q=t.ptr={},pt=t.cname=q,yt=t.dname=q;q.encode=function(Q,k,Z){return k||(k=r.alloc(q.encodingLength(Q))),Z||(Z=0),w.encode(Q,k,Z+2),k.writeUInt16BE(w.encode.bytes,Z),q.encode.bytes=w.encode.bytes+2,k},q.encode.bytes=0,q.decode=function(Q,k){k||(k=0);let Z=w.decode(Q,k+2);return q.decode.bytes=w.decode.bytes+2,Z},q.decode.bytes=0,q.encodingLength=function(Q){return w.encodingLength(Q)+2};var Rt=t.srv={};Rt.encode=function(Q,k,Z){k||(k=r.alloc(Rt.encodingLength(Q))),Z||(Z=0),k.writeUInt16BE(Q.priority||0,Z+2),k.writeUInt16BE(Q.weight||0,Z+4),k.writeUInt16BE(Q.port||0,Z+6),w.encode(Q.target,k,Z+8);let se=w.encode.bytes+6;return k.writeUInt16BE(se,Z),Rt.encode.bytes=se+2,k},Rt.encode.bytes=0,Rt.decode=function(Q,k){k||(k=0);let Z=Q.readUInt16BE(k),se={};return se.priority=Q.readUInt16BE(k+2),se.weight=Q.readUInt16BE(k+4),se.port=Q.readUInt16BE(k+6),se.target=w.decode(Q,k+8),Rt.decode.bytes=Z+2,se},Rt.decode.bytes=0,Rt.encodingLength=function(Q){return 8+w.encodingLength(Q.target)};var Et=t.caa={};Et.ISSUER_CRITICAL=128,Et.encode=function(Q,k,Z){let se=Et.encodingLength(Q);return k||(k=r.alloc(Et.encodingLength(Q))),Z||(Z=0),Q.issuerCritical&&(Q.flags=Et.ISSUER_CRITICAL),k.writeUInt16BE(se-2,Z),Z+=2,k.writeUInt8(Q.flags||0,Z),Z+=1,U.encode(Q.tag,k,Z),Z+=U.encode.bytes,k.write(Q.value,Z),Z+=r.byteLength(Q.value),Et.encode.bytes=se,k},Et.encode.bytes=0,Et.decode=function(Q,k){k||(k=0);let Z=Q.readUInt16BE(k);k+=2;let se=k,ye={};return ye.flags=Q.readUInt8(k),k+=1,ye.tag=U.decode(Q,k),k+=U.decode.bytes,ye.value=Q.toString("utf-8",k,se+Z),ye.issuerCritical=!!(ye.flags&Et.ISSUER_CRITICAL),Et.decode.bytes=Z+2,ye},Et.decode.bytes=0,Et.encodingLength=function(Q){return U.encodingLength(Q.tag)+U.encodingLength(Q.value)+2};var vt=t.mx={};vt.encode=function(Q,k,Z){k||(k=r.alloc(vt.encodingLength(Q))),Z||(Z=0);let se=Z;return Z+=2,k.writeUInt16BE(Q.preference||0,Z),Z+=2,w.encode(Q.exchange,k,Z),Z+=w.encode.bytes,k.writeUInt16BE(Z-se-2,se),vt.encode.bytes=Z-se,k},vt.encode.bytes=0,vt.decode=function(Q,k){k||(k=0);let Z=k,se={};return k+=2,se.preference=Q.readUInt16BE(k),k+=2,se.exchange=w.decode(Q,k),k+=w.decode.bytes,vt.decode.bytes=k-Z,se},vt.encodingLength=function(Q){return 4+w.encodingLength(Q.exchange)};var Ft=t.a={};Ft.encode=function(Q,k,Z){return k||(k=r.alloc(Ft.encodingLength(Q))),Z||(Z=0),k.writeUInt16BE(4,Z),Z+=2,m.v4.encode(Q,k,Z),Ft.encode.bytes=6,k},Ft.encode.bytes=0,Ft.decode=function(Q,k){k||(k=0),k+=2;let Z=m.v4.decode(Q,k);return Ft.decode.bytes=6,Z},Ft.decode.bytes=0,Ft.encodingLength=function(){return 6};var Xt=t.aaaa={};Xt.encode=function(Q,k,Z){return k||(k=r.alloc(Xt.encodingLength(Q))),Z||(Z=0),k.writeUInt16BE(16,Z),Z+=2,m.v6.encode(Q,k,Z),Xt.encode.bytes=18,k},Xt.encode.bytes=0,Xt.decode=function(Q,k){k||(k=0),k+=2;let Z=m.v6.decode(Q,k);return Xt.decode.bytes=18,Z},Xt.decode.bytes=0,Xt.encodingLength=function(){return 18};var ee=t.option={};ee.encode=function(Q,k,Z){k||(k=r.alloc(ee.encodingLength(Q))),Z||(Z=0);let se=Z,ye=g.toCode(Q.code);if(k.writeUInt16BE(ye,Z),Z+=2,Q.data)k.writeUInt16BE(Q.data.length,Z),Z+=2,Q.data.copy(k,Z),Z+=Q.data.length;else switch(ye){case 8:let rr=Q.sourcePrefixLength||0,dr=Q.family||m.familyOf(Q.ip),mr=m.encode(Q.ip,r.alloc),ur=Math.ceil(rr/8);k.writeUInt16BE(ur+4,Z),Z+=2,k.writeUInt16BE(dr,Z),Z+=2,k.writeUInt8(rr,Z++),k.writeUInt8(Q.scopePrefixLength||0,Z++),mr.copy(k,Z,0,ur),Z+=ur;break;case 11:Q.timeout?(k.writeUInt16BE(2,Z),Z+=2,k.writeUInt16BE(Q.timeout,Z),Z+=2):(k.writeUInt16BE(0,Z),Z+=2);break;case 12:let er=Q.length||0;k.writeUInt16BE(er,Z),Z+=2,k.fill(0,Z,Z+er),Z+=er;break;case 14:let Gr=Q.tags.length*2;k.writeUInt16BE(Gr,Z),Z+=2;for(let Lr of Q.tags)k.writeUInt16BE(Lr,Z),Z+=2;break;default:throw new Error(`Unknown roption code: ${Q.code}`)}return ee.encode.bytes=Z-se,k},ee.encode.bytes=0,ee.decode=function(Q,k){k||(k=0);let Z={};Z.code=Q.readUInt16BE(k),Z.type=g.toString(Z.code),k+=2;let se=Q.readUInt16BE(k);switch(k+=2,Z.data=Q.slice(k,k+se),Z.code){case 8:Z.family=Q.readUInt16BE(k),k+=2,Z.sourcePrefixLength=Q.readUInt8(k++),Z.scopePrefixLength=Q.readUInt8(k++);let ye=r.alloc(Z.family===1?4:16);Q.copy(ye,0,k,k+se-4),Z.ip=m.decode(ye);break;case 11:se>0&&(Z.timeout=Q.readUInt16BE(k),k+=2);break;case 14:Z.tags=[];for(let rr=0;rr<se;rr+=2)Z.tags.push(Q.readUInt16BE(k)),k+=2}return ee.decode.bytes=se+4,Z},ee.decode.bytes=0,ee.encodingLength=function(Q){if(Q.data)return Q.data.length+4;switch(g.toCode(Q.code)){case 8:let k=Q.sourcePrefixLength||0;return Math.ceil(k/8)+8;case 11:return typeof Q.timeout=="number"?6:4;case 12:return Q.length+4;case 14:return 4+Q.tags.length*2}throw new Error(`Unknown roption code: ${Q.code}`)};var ne=t.opt={};ne.encode=function(Q,k,Z){k||(k=r.alloc(ne.encodingLength(Q))),Z||(Z=0);let se=Z,ye=vr(Q,ee);return k.writeUInt16BE(ye,Z),Z=Pr(Q,ee,k,Z+2),ne.encode.bytes=Z-se,k},ne.encode.bytes=0,ne.decode=function(Q,k){k||(k=0);let Z=k,se=[],ye=Q.readUInt16BE(k);k+=2;let rr=0;for(;ye>0;)se[rr++]=ee.decode(Q,k),k+=ee.decode.bytes,ye-=ee.decode.bytes;return ne.decode.bytes=k-Z,se},ne.decode.bytes=0,ne.encodingLength=function(Q){return 2+vr(Q||[],ee)};var ae=t.dnskey={};ae.PROTOCOL_DNSSEC=3,ae.ZONE_KEY=128,ae.SECURE_ENTRYPOINT=32768,ae.encode=function(Q,k,Z){k||(k=r.alloc(ae.encodingLength(Q))),Z||(Z=0);let se=Z,ye=Q.key;if(!r.isBuffer(ye))throw new Error("Key must be a Buffer");return Z+=2,k.writeUInt16BE(Q.flags,Z),Z+=2,k.writeUInt8(ae.PROTOCOL_DNSSEC,Z),Z+=1,k.writeUInt8(Q.algorithm,Z),Z+=1,ye.copy(k,Z,0,ye.length),Z+=ye.length,ae.encode.bytes=Z-se,k.writeUInt16BE(ae.encode.bytes-2,se),k},ae.encode.bytes=0,ae.decode=function(Q,k){k||(k=0);let Z=k;var se={},ye=Q.readUInt16BE(k);if(k+=2,se.flags=Q.readUInt16BE(k),k+=2,Q.readUInt8(k)!==ae.PROTOCOL_DNSSEC)throw new Error("Protocol must be 3");return k+=1,se.algorithm=Q.readUInt8(k),k+=1,se.key=Q.slice(k,Z+ye+2),k+=se.key.length,ae.decode.bytes=k-Z,se},ae.decode.bytes=0,ae.encodingLength=function(Q){return 6+r.byteLength(Q.key)};var Le=t.rrsig={};Le.encode=function(Q,k,Z){k||(k=r.alloc(Le.encodingLength(Q))),Z||(Z=0);let se=Z,ye=Q.signature;if(!r.isBuffer(ye))throw new Error("Signature must be a Buffer");return Z+=2,k.writeUInt16BE(n.toType(Q.typeCovered),Z),Z+=2,k.writeUInt8(Q.algorithm,Z),Z+=1,k.writeUInt8(Q.labels,Z),Z+=1,k.writeUInt32BE(Q.originalTTL,Z),Z+=4,k.writeUInt32BE(Q.expiration,Z),Z+=4,k.writeUInt32BE(Q.inception,Z),Z+=4,k.writeUInt16BE(Q.keyTag,Z),Z+=2,w.encode(Q.signersName,k,Z),Z+=w.encode.bytes,ye.copy(k,Z,0,ye.length),Z+=ye.length,Le.encode.bytes=Z-se,k.writeUInt16BE(Le.encode.bytes-2,se),k},Le.encode.bytes=0,Le.decode=function(Q,k){k||(k=0);let Z=k;var se={},ye=Q.readUInt16BE(k);return k+=2,se.typeCovered=n.toString(Q.readUInt16BE(k)),k+=2,se.algorithm=Q.readUInt8(k),k+=1,se.labels=Q.readUInt8(k),k+=1,se.originalTTL=Q.readUInt32BE(k),k+=4,se.expiration=Q.readUInt32BE(k),k+=4,se.inception=Q.readUInt32BE(k),k+=4,se.keyTag=Q.readUInt16BE(k),k+=2,se.signersName=w.decode(Q,k),k+=w.decode.bytes,se.signature=Q.slice(k,Z+ye+2),k+=se.signature.length,Le.decode.bytes=k-Z,se},Le.decode.bytes=0,Le.encodingLength=function(Q){return 20+w.encodingLength(Q.signersName)+r.byteLength(Q.signature)};var de=t.rp={};de.encode=function(Q,k,Z){k||(k=r.alloc(de.encodingLength(Q))),Z||(Z=0);let se=Z;return Z+=2,w.encode(Q.mbox||".",k,Z,{mail:!0}),Z+=w.encode.bytes,w.encode(Q.txt||".",k,Z),Z+=w.encode.bytes,de.encode.bytes=Z-se,k.writeUInt16BE(de.encode.bytes-2,se),k},de.encode.bytes=0,de.decode=function(Q,k){k||(k=0);let Z=k,se={};return k+=2,se.mbox=w.decode(Q,k,{mail:!0})||".",k+=w.decode.bytes,se.txt=w.decode(Q,k)||".",k+=w.decode.bytes,de.decode.bytes=k-Z,se},de.decode.bytes=0,de.encodingLength=function(Q){return 2+w.encodingLength(Q.mbox||".")+w.encodingLength(Q.txt||".")};var He={};He.encode=function(Q,k,Z){k||(k=r.alloc(He.encodingLength(Q))),Z||(Z=0);let se=Z;for(var ye=[],rr=0;rr<Q.length;rr++){var dr=n.toType(Q[rr]);ye[dr>>8]===void 0&&(ye[dr>>8]=[]),ye[dr>>8][dr>>3&31]|=1<<7-(dr&7)}for(rr=0;rr<ye.length;rr++)if(ye[rr]!==void 0){var mr=r.from(ye[rr]);k.writeUInt8(rr,Z),Z+=1,k.writeUInt8(mr.length,Z),Z+=1,mr.copy(k,Z),Z+=mr.length}return He.encode.bytes=Z-se,k},He.encode.bytes=0,He.decode=function(Q,k,Z){k||(k=0);let se=k;for(var ye=[];k-se<Z;){var rr=Q.readUInt8(k);k+=1;var dr=Q.readUInt8(k);k+=1;for(var mr=0;mr<dr;mr++)for(var ur=Q.readUInt8(k+mr),er=0;er<8;er++)if(ur&1<<7-er){var Gr=n.toString(rr<<8|mr<<3|er);ye.push(Gr)}k+=dr}return He.decode.bytes=k-se,ye},He.decode.bytes=0,He.encodingLength=function(Q){for(var k=[],Z=0;Z<Q.length;Z++){var se=n.toType(Q[Z]);k[se>>8]=Math.max(k[se>>8]||0,se&255)}var ye=0;for(Z=0;Z<k.length;Z++)k[Z]!==void 0&&(ye+=2+Math.ceil((k[Z]+1)/8));return ye};var ze=t.nsec={};ze.encode=function(Q,k,Z){k||(k=r.alloc(ze.encodingLength(Q))),Z||(Z=0);let se=Z;return Z+=2,w.encode(Q.nextDomain,k,Z),Z+=w.encode.bytes,He.encode(Q.rrtypes,k,Z),Z+=He.encode.bytes,ze.encode.bytes=Z-se,k.writeUInt16BE(ze.encode.bytes-2,se),k},ze.encode.bytes=0,ze.decode=function(Q,k){k||(k=0);let Z=k;var se={},ye=Q.readUInt16BE(k);return k+=2,se.nextDomain=w.decode(Q,k),k+=w.decode.bytes,se.rrtypes=He.decode(Q,k,ye-(k-Z)),k+=He.decode.bytes,ze.decode.bytes=k-Z,se},ze.decode.bytes=0,ze.encodingLength=function(Q){return 2+w.encodingLength(Q.nextDomain)+He.encodingLength(Q.rrtypes)};var Pe=t.nsec3={};Pe.encode=function(Q,k,Z){k||(k=r.alloc(Pe.encodingLength(Q))),Z||(Z=0);let se=Z,ye=Q.salt;if(!r.isBuffer(ye))throw new Error("salt must be a Buffer");let rr=Q.nextDomain;if(!r.isBuffer(rr))throw new Error("nextDomain must be a Buffer");return Z+=2,k.writeUInt8(Q.algorithm,Z),Z+=1,k.writeUInt8(Q.flags,Z),Z+=1,k.writeUInt16BE(Q.iterations,Z),Z+=2,k.writeUInt8(ye.length,Z),Z+=1,ye.copy(k,Z,0,ye.length),Z+=ye.length,k.writeUInt8(rr.length,Z),Z+=1,rr.copy(k,Z,0,rr.length),Z+=rr.length,He.encode(Q.rrtypes,k,Z),Z+=He.encode.bytes,Pe.encode.bytes=Z-se,k.writeUInt16BE(Pe.encode.bytes-2,se),k},Pe.encode.bytes=0,Pe.decode=function(Q,k){k||(k=0);let Z=k;var se={},ye=Q.readUInt16BE(k);k+=2,se.algorithm=Q.readUInt8(k),k+=1,se.flags=Q.readUInt8(k),k+=1,se.iterations=Q.readUInt16BE(k),k+=2;let rr=Q.readUInt8(k);k+=1,se.salt=Q.slice(k,k+rr),k+=rr;let dr=Q.readUInt8(k);return k+=1,se.nextDomain=Q.slice(k,k+dr),k+=dr,se.rrtypes=He.decode(Q,k,ye-(k-Z)),k+=He.decode.bytes,Pe.decode.bytes=k-Z,se},Pe.decode.bytes=0,Pe.encodingLength=function(Q){return 8+Q.salt.length+Q.nextDomain.length+He.encodingLength(Q.rrtypes)};var Je=t.ds={};Je.encode=function(Q,k,Z){k||(k=r.alloc(Je.encodingLength(Q))),Z||(Z=0);let se=Z,ye=Q.digest;if(!r.isBuffer(ye))throw new Error("Digest must be a Buffer");return Z+=2,k.writeUInt16BE(Q.keyTag,Z),Z+=2,k.writeUInt8(Q.algorithm,Z),Z+=1,k.writeUInt8(Q.digestType,Z),Z+=1,ye.copy(k,Z,0,ye.length),Z+=ye.length,Je.encode.bytes=Z-se,k.writeUInt16BE(Je.encode.bytes-2,se),k},Je.encode.bytes=0,Je.decode=function(Q,k){k||(k=0);let Z=k;var se={},ye=Q.readUInt16BE(k);return k+=2,se.keyTag=Q.readUInt16BE(k),k+=2,se.algorithm=Q.readUInt8(k),k+=1,se.digestType=Q.readUInt8(k),k+=1,se.digest=Q.slice(k,Z+ye+2),k+=se.digest.length,Je.decode.bytes=k-Z,se},Je.decode.bytes=0,Je.encodingLength=function(Q){return 6+r.byteLength(Q.digest)};var Xe=t.sshfp={};Xe.getFingerprintLengthForHashType=function(Q){switch(Q){case 1:return 20;case 2:return 32}},Xe.encode=function(Q,k,Z){k||(k=r.alloc(Xe.encodingLength(Q))),Z||(Z=0);let se=Z;Z+=2,k[Z]=Q.algorithm,Z+=1,k[Z]=Q.hash,Z+=1;let ye=r.from(Q.fingerprint.toUpperCase(),"hex");if(ye.length!==Xe.getFingerprintLengthForHashType(Q.hash))throw new Error("Invalid fingerprint length");return ye.copy(k,Z),Z+=ye.byteLength,Xe.encode.bytes=Z-se,k.writeUInt16BE(Xe.encode.bytes-2,se),k},Xe.encode.bytes=0,Xe.decode=function(Q,k){k||(k=0);let Z=k,se={};k+=2,se.algorithm=Q[k],k+=1,se.hash=Q[k],k+=1;let ye=Xe.getFingerprintLengthForHashType(se.hash);return se.fingerprint=Q.slice(k,k+ye).toString("hex").toUpperCase(),k+=ye,Xe.decode.bytes=k-Z,se},Xe.decode.bytes=0,Xe.encodingLength=function(Q){return 4+r.from(Q.fingerprint,"hex").byteLength};var Ae=t.naptr={};Ae.encode=function(Q,k,Z){k||(k=r.alloc(Ae.encodingLength(Q))),Z||(Z=0);let se=Z;return Z+=2,k.writeUInt16BE(Q.order||0,Z),Z+=2,k.writeUInt16BE(Q.preference||0,Z),Z+=2,U.encode(Q.flags,k,Z),Z+=U.encode.bytes,U.encode(Q.services,k,Z),Z+=U.encode.bytes,U.encode(Q.regexp,k,Z),Z+=U.encode.bytes,w.encode(Q.replacement,k,Z),Z+=w.encode.bytes,Ae.encode.bytes=Z-se,k.writeUInt16BE(Ae.encode.bytes-2,se),k},Ae.encode.bytes=0,Ae.decode=function(Q,k){k||(k=0);let Z=k,se={};return k+=2,se.order=Q.readUInt16BE(k),k+=2,se.preference=Q.readUInt16BE(k),k+=2,se.flags=U.decode(Q,k),k+=U.decode.bytes,se.services=U.decode(Q,k),k+=U.decode.bytes,se.regexp=U.decode(Q,k),k+=U.decode.bytes,se.replacement=w.decode(Q,k),k+=w.decode.bytes,Ae.decode.bytes=k-Z,se},Ae.decode.bytes=0,Ae.encodingLength=function(Q){return U.encodingLength(Q.flags)+U.encodingLength(Q.services)+U.encodingLength(Q.regexp)+w.encodingLength(Q.replacement)+6};var xe=t.tlsa={};xe.encode=function(Q,k,Z){k||(k=r.alloc(xe.encodingLength(Q))),Z||(Z=0);let se=Z,ye=Q.certificate;if(!r.isBuffer(ye))throw new Error("Certificate must be a Buffer");return Z+=2,k.writeUInt8(Q.usage,Z),Z+=1,k.writeUInt8(Q.selector,Z),Z+=1,k.writeUInt8(Q.matchingType,Z),Z+=1,ye.copy(k,Z,0,ye.length),Z+=ye.length,xe.encode.bytes=Z-se,k.writeUInt16BE(xe.encode.bytes-2,se),k},xe.encode.bytes=0,xe.decode=function(Q,k){k||(k=0);let Z=k,se={},ye=Q.readUInt16BE(k);return k+=2,se.usage=Q.readUInt8(k),k+=1,se.selector=Q.readUInt8(k),k+=1,se.matchingType=Q.readUInt8(k),k+=1,se.certificate=Q.slice(k,Z+ye+2),k+=se.certificate.length,xe.decode.bytes=k-Z,se},xe.decode.bytes=0,xe.encodingLength=function(Q){return 5+r.byteLength(Q.certificate)};var Qe=t.record=function(Q){switch(Q.toUpperCase()){case"A":return Ft;case"PTR":return q;case"CNAME":return pt;case"DNAME":return yt;case"TXT":return ot;case"NULL":return K;case"AAAA":return Xt;case"SRV":return Rt;case"HINFO":return H;case"CAA":return Et;case"NS":return j;case"SOA":return it;case"MX":return vt;case"OPT":return ne;case"DNSKEY":return ae;case"RRSIG":return Le;case"RP":return de;case"NSEC":return ze;case"NSEC3":return Pe;case"SSHFP":return Xe;case"DS":return Je;case"NAPTR":return Ae;case"TLSA":return xe}return X},Ve=t.answer={};Ve.encode=function(Q,k,Z){k||(k=r.alloc(Ve.encodingLength(Q))),Z||(Z=0);let se=Z;if(w.encode(Q.name,k,Z),Z+=w.encode.bytes,k.writeUInt16BE(n.toType(Q.type),Z),Q.type.toUpperCase()==="OPT"){if(Q.name!==".")throw new Error("OPT name must be root.");k.writeUInt16BE(Q.udpPayloadSize||4096,Z+2),k.writeUInt8(Q.extendedRcode||0,Z+4),k.writeUInt8(Q.ednsVersion||0,Z+5),k.writeUInt16BE(Q.flags||0,Z+6),Z+=8,ne.encode(Q.options||[],k,Z),Z+=ne.encode.bytes}else{let ye=p.toClass(Q.class===void 0?"IN":Q.class);Q.flush&&(ye|=D),k.writeUInt16BE(ye,Z+2),k.writeUInt32BE(Q.ttl||0,Z+4),Z+=8;let rr=Qe(Q.type);rr.encode(Q.data,k,Z),Z+=rr.encode.bytes}return Ve.encode.bytes=Z-se,k},Ve.encode.bytes=0,Ve.decode=function(Q,k){k||(k=0);let Z={},se=k;if(Z.name=w.decode(Q,k),k+=w.decode.bytes,Z.type=n.toString(Q.readUInt16BE(k)),Z.type==="OPT")Z.udpPayloadSize=Q.readUInt16BE(k+2),Z.extendedRcode=Q.readUInt8(k+4),Z.ednsVersion=Q.readUInt8(k+5),Z.flags=Q.readUInt16BE(k+6),Z.flag_do=(Z.flags>>15&1)===1,Z.options=ne.decode(Q,k+8),k+=8+ne.decode.bytes;else{let ye=Q.readUInt16BE(k+2);Z.ttl=Q.readUInt32BE(k+4),Z.class=p.toString(ye&o),Z.flush=!!(ye&D);let rr=Qe(Z.type);Z.data=rr.decode(Q,k+8),k+=8+rr.decode.bytes}return Ve.decode.bytes=k-se,Z},Ve.decode.bytes=0,Ve.encodingLength=function(Q){let k=Q.data!==null&&Q.data!==void 0?Q.data:Q.options;return w.encodingLength(Q.name)+8+Qe(Q.type).encodingLength(k)};var Ze=t.question={};Ze.encode=function(Q,k,Z){k||(k=r.alloc(Ze.encodingLength(Q))),Z||(Z=0);let se=Z;return w.encode(Q.name,k,Z),Z+=w.encode.bytes,k.writeUInt16BE(n.toType(Q.type),Z),Z+=2,k.writeUInt16BE(p.toClass(Q.class===void 0?"IN":Q.class),Z),Z+=2,Ze.encode.bytes=Z-se,Q},Ze.encode.bytes=0,Ze.decode=function(Q,k){k||(k=0);let Z=k,se={};return se.name=w.decode(Q,k),k+=w.decode.bytes,se.type=n.toString(Q.readUInt16BE(k)),k+=2,se.class=p.toString(Q.readUInt16BE(k)),k+=2,se.class&M&&(se.class&=W),Ze.decode.bytes=k-Z,se},Ze.decode.bytes=0,Ze.encodingLength=function(Q){return w.encodingLength(Q.name)+4},t.AUTHORITATIVE_ANSWER=1024,t.TRUNCATED_RESPONSE=512,t.RECURSION_DESIRED=256,t.RECURSION_AVAILABLE=128,t.AUTHENTIC_DATA=32,t.CHECKING_DISABLED=16,t.DNSSEC_OK=32768,t.encode=function(Q,k,Z){let se=!k;se&&(k=r.alloc(t.encodingLength(Q))),Z||(Z=0);let ye=Z;return Q.questions||(Q.questions=[]),Q.answers||(Q.answers=[]),Q.authorities||(Q.authorities=[]),Q.additionals||(Q.additionals=[]),nt.encode(Q,k,Z),Z+=nt.encode.bytes,Z=Pr(Q.questions,Ze,k,Z),Z=Pr(Q.answers,Ve,k,Z),Z=Pr(Q.authorities,Ve,k,Z),Z=Pr(Q.additionals,Ve,k,Z),t.encode.bytes=Z-ye,se&&t.encode.bytes!==k.length?k.slice(0,t.encode.bytes):k},t.encode.bytes=0,t.decode=function(Q,k){k||(k=0);let Z=k,se=nt.decode(Q,k);return k+=nt.decode.bytes,k=Dr(se.questions,Ze,Q,k),k=Dr(se.answers,Ve,Q,k),k=Dr(se.authorities,Ve,Q,k),k=Dr(se.additionals,Ve,Q,k),t.decode.bytes=k-Z,se},t.decode.bytes=0,t.encodingLength=function(Q){return nt.encodingLength(Q)+vr(Q.questions||[],Ze)+vr(Q.answers||[],Ve)+vr(Q.authorities||[],Ve)+vr(Q.additionals||[],Ve)},t.streamEncode=function(Q){let k=t.encode(Q),Z=r.alloc(2);Z.writeUInt16BE(k.byteLength);let se=r.concat([Z,k]);return t.streamEncode.bytes=se.byteLength,se},t.streamEncode.bytes=0,t.streamDecode=function(Q){let k=Q.readUInt16BE(0);if(Q.byteLength<k+2)return null;let Z=t.decode(Q.slice(2));return t.streamDecode.bytes=t.decode.bytes,Z},t.streamDecode.bytes=0;function vr(Q,k){let Z=0;for(let se=0;se<Q.length;se++)Z+=k.encodingLength(Q[se]);return Z}function Pr(Q,k,Z,se){for(let ye=0;ye<Q.length;ye++)k.encode(Q[ye],Z,se),se+=k.encode.bytes;return se}function Dr(Q,k,Z,se){for(let ye=0;ye<Q.length;ye++)Q[ye]=k.decode(Z,se),se+=k.decode.bytes;return se}}),Mm=ce((t,r)=>{var n=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);n?(i=new Uint8Array(16),r.exports=function(){return n(i),i}):(u=new Array(16),r.exports=function(){for(var p=0,g;p<16;p++)p&3||(g=Math.random()*4294967296),u[p]=g>>>((p&3)<<3)&255;return u});var i,u}),qm=ce((t,r)=>{var n=[];for(i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);var i;function u(p,g){var m=g||0,A=n;return[A[p[m++]],A[p[m++]],A[p[m++]],A[p[m++]],"-",A[p[m++]],A[p[m++]],"-",A[p[m++]],A[p[m++]],"-",A[p[m++]],A[p[m++]],"-",A[p[m++]],A[p[m++]],A[p[m++]],A[p[m++]],A[p[m++]],A[p[m++]]].join("")}r.exports=u}),vC=ce((t,r)=>{var n=Mm(),i=qm(),u,p,g=0,m=0;function A(y,D,o){var M=D&&o||0,W=D||[];y=y||{};var w=y.node||u,U=y.clockseq!==void 0?y.clockseq:p;if(w==null||U==null){var nt=n();w==null&&(w=u=[nt[0]|1,nt[1],nt[2],nt[3],nt[4],nt[5]]),U==null&&(U=p=(nt[6]<<8|nt[7])&16383)}var X=y.msecs!==void 0?y.msecs:new Date().getTime(),j=y.nsecs!==void 0?y.nsecs:m+1,it=X-g+(j-m)/1e4;if(it<0&&y.clockseq===void 0&&(U=U+1&16383),(it<0||X>g)&&y.nsecs===void 0&&(j=0),j>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");g=X,m=j,p=U,X+=122192928e5;var ot=((X&268435455)*1e4+j)%4294967296;W[M++]=ot>>>24&255,W[M++]=ot>>>16&255,W[M++]=ot>>>8&255,W[M++]=ot&255;var K=X/4294967296*1e4&268435455;W[M++]=K>>>8&255,W[M++]=K&255,W[M++]=K>>>24&15|16,W[M++]=K>>>16&255,W[M++]=U>>>8|128,W[M++]=U&255;for(var H=0;H<6;++H)W[M+H]=w[H];return D||i(W)}r.exports=A}),EC=ce((t,r)=>{var n=Mm(),i=qm();function u(p,g,m){var A=g&&m||0;typeof p=="string"&&(g=p==="binary"?new Array(16):null,p=null),p=p||{};var y=p.random||(p.rng||n)();if(y[6]=y[6]&15|64,y[8]=y[8]&63|128,g)for(var D=0;D<16;++D)g[A+D]=y[D];return g||i(y)}r.exports=u}),bC=ce((t,r)=>{var n=vC(),i=EC(),u=i;u.v1=n,u.v4=i,r.exports=u}),z0=ce((t,r)=>{var{v4:n}=bC();function i(){return n().replace(/-/g,"")}var u=i;function p(){return u()}p.setFactory=g=>{u=g},p.reset=()=>{u=i},r.exports=p}),Eu=ce((t,r)=>{var n=Symbol("_options"),i=Symbol("_cache"),u=Symbol("_state"),p=Symbol("_objectId"),g=Symbol("_conflicts"),m=Symbol("_change"),A=Symbol("_elemIds");r.exports={OPTIONS:n,CACHE:i,STATE:u,OBJECT_ID:p,CONFLICTS:g,CHANGE:m,ELEM_IDS:A}}),Us=ce((t,r)=>{function n(m){return typeof m=="object"&&m!==null}function i(m){if(!n(m))return{};let A={};for(let y of Object.keys(m))A[y]=m[y];return A}function u(m){let A=/^(\d+)@(.*)$/.exec(m||"");if(!A)throw new RangeError(`Not a valid opId: ${m}`);return{counter:parseInt(A[1],10),actorId:A[2]}}function p(m,A){if(!(m instanceof Uint8Array)||!(A instanceof Uint8Array))throw new TypeError("equalBytes can only compare Uint8Arrays");if(m.byteLength!==A.byteLength)return!1;for(let y=0;y<m.byteLength;y++)if(m[y]!==A[y])return!1;return!0}function g(m){let A=new Array(m);for(let y=0;y<m;y++)A[y]=null;return A}r.exports={isObject:n,copyObject:i,parseOpId:u,equalBytes:p,createArrayOfNulls:g}}),Qf=ce((t,r)=>{var{OBJECT_ID:n}=Eu(),{isObject:i}=Us(),u=class{constructor(g){if(typeof g=="string"){let m=[...g].map(A=>({value:A}));return p(void 0,m)}else if(Array.isArray(g)){let m=g.map(A=>({value:A}));return p(void 0,m)}else{if(g===void 0)return p(void 0,[]);throw new TypeError(`Unsupported initial value for Text: ${g}`)}}get length(){return this.elems.length}get(g){let m=this.elems[g].value;if(this.context&&i(m)){let A=m[n],y=this.path.concat([{key:g,objectId:A}]);return this.context.instantiateObject(y,A)}else return m}getElemId(g){return this.elems[g].elemId}[Symbol.iterator](){let g=this.elems,m=-1;return{next(){return m+=1,m<g.length?{done:!1,value:g[m].value}:{done:!0}}}}toString(){let g="";for(let m of this.elems)typeof m.value=="string"&&(g+=m.value);return g}toSpans(){let g=[],m="";for(let A of this.elems)typeof A.value=="string"?m+=A.value:(m.length>0&&(g.push(m),m=""),g.push(A.value));return m.length>0&&g.push(m),g}toJSON(){return this.toString()}getWriteable(g,m){if(!this[n])throw new RangeError("getWriteable() requires the objectId to be set");let A=p(this[n],this.elems);return A.context=g,A.path=m,A}set(g,m){if(this.context)this.context.setListIndex(this.path,g,m);else if(!this[n])this.elems[g].value=m;else throw new TypeError("Automerge.Text object cannot be modified outside of a change block");return this}insertAt(g,...m){if(this.context)this.context.splice(this.path,g,0,m);else if(!this[n])this.elems.splice(g,0,...m.map(A=>({value:A})));else throw new TypeError("Automerge.Text object cannot be modified outside of a change block");return this}deleteAt(g,m=1){if(this.context)this.context.splice(this.path,g,m,[]);else if(!this[n])this.elems.splice(g,m);else throw new TypeError("Automerge.Text object cannot be modified outside of a change block");return this}};for(let g of["concat","every","filter","find","findIndex","forEach","includes","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toLocaleString"])u.prototype[g]=function(...m){return[...this][g](...m)};function p(g,m){let A=Object.create(u.prototype);return A[n]=g,A.elems=m,A}r.exports={Text:u,instantiateText:p}}),th=ce((t,r)=>{var{OBJECT_ID:n,CONFLICTS:i}=Eu(),{isObject:u,copyObject:p}=Us();function g(D,o,M){for(let W of D)if(o[W]!==M[W]){if(typeof o[W]=="number"&&typeof M[W]=="number")return o[W]-M[W];{let w=""+o[W],U=""+M[W];if(w===U)continue;return w<U?-1:1}}return 0}var m=class{constructor(){this.entries=Object.freeze({}),this.opIds=Object.freeze({}),Object.freeze(this)}byId(D){return this.entries[D]}get ids(){return Object.keys(this.entries).filter(D=>{let o=this.entries[D];return u(o)&&o.id===D})}get count(){return this.ids.length}get rows(){return this.ids.map(D=>this.byId(D))}filter(D,o){return this.rows.filter(D,o)}find(D,o){return this.rows.find(D,o)}map(D,o){return this.rows.map(D,o)}sort(D){if(typeof D=="function")return this.rows.sort(D);if(typeof D=="string")return this.rows.sort((o,M)=>g([D],o,M));if(Array.isArray(D))return this.rows.sort((o,M)=>g(D,o,M));if(D===void 0)return this.rows.sort((o,M)=>g(["id"],o,M));throw new TypeError(`Unsupported sorting argument: ${D}`)}[Symbol.iterator](){let D=this.rows,o=-1;return{next(){return o+=1,o<D.length?{done:!1,value:D[o]}:{done:!0}}}}_clone(){if(!this[n])throw new RangeError("clone() requires the objectId to be set");return y(this[n],p(this.entries),p(this.opIds))}_set(D,o,M){if(Object.isFrozen(this.entries))throw new Error("A table can only be modified in a change function");u(o)&&!Array.isArray(o)&&Object.defineProperty(o,"id",{value:D,enumerable:!0}),this.entries[D]=o,this.opIds[D]=M}remove(D){if(Object.isFrozen(this.entries))throw new Error("A table can only be modified in a change function");delete this.entries[D],delete this.opIds[D]}_freeze(){Object.freeze(this.entries),Object.freeze(this.opIds),Object.freeze(this)}getWriteable(D,o){if(!this[n])throw new RangeError("getWriteable() requires the objectId to be set");let M=Object.create(A.prototype);return M[n]=this[n],M.context=D,M.entries=this.entries,M.opIds=this.opIds,M.path=o,M}toJSON(){let D={};for(let o of this.ids)D[o]=this.byId(o);return D}},A=class extends m{byId(D){if(u(this.entries[D])&&this.entries[D].id===D){let o=this.entries[D][n],M=this.path.concat([{key:D,objectId:o}]);return this.context.instantiateObject(M,o,["id"])}}add(D){return this.context.addTableRow(this.path,D)}remove(D){if(u(this.entries[D])&&this.entries[D].id===D)this.context.deleteTableRow(this.path,D,this.opIds[D]);else throw new RangeError(`There is no row with ID ${D} in this table`)}};function y(D,o,M){let W=Object.create(m.prototype);if(!D)throw new RangeError("instantiateTable requires an objectId to be given");return W[n]=D,W[i]=Object.freeze({}),W.entries=o||{},W.opIds=M||{},W}r.exports={Table:m,instantiateTable:y}}),W0=ce((t,r)=>{var n=class{constructor(p){this.value=p||0,Object.freeze(this)}valueOf(){return this.value}toString(){return this.valueOf().toString()}toJSON(){return this.value}},i=class extends n{increment(p){return p=typeof p=="number"?p:1,this.context.increment(this.path,this.key,p),this.value+=p,this.value}decrement(p){return this.increment(typeof p=="number"?-p:-1)}};function u(p,g,m,A,y){let D=Object.create(i.prototype);return D.value=p,D.context=g,D.path=m,D.objectId=A,D.key=y,D}r.exports={Counter:n,getWriteableCounter:u}}),Qm=ce((t,r)=>{var{isObject:n,copyObject:i,parseOpId:u}=Us(),{OBJECT_ID:p,CONFLICTS:g,ELEM_IDS:m}=Eu(),{instantiateText:A}=Qf(),{instantiateTable:y}=th(),{Counter:D}=W0();function o(H,q,pt){return H.objectId?(q&&q[p]!==H.objectId&&(q=void 0),ot(H,q,pt)):H.datatype==="timestamp"?new Date(H.value):H.datatype==="counter"?new D(H.value):H.value}function M(H,q){let pt=/^(\d+)@(.*)$/,yt=pt.test(H)?u(H):{counter:0,actorId:H},Rt=pt.test(q)?u(q):{counter:0,actorId:q};return yt.counter<Rt.counter?-1:yt.counter>Rt.counter?1:yt.actorId<Rt.actorId?-1:yt.actorId>Rt.actorId?1:0}function W(H,q,pt,yt){if(H)for(let Rt of Object.keys(H)){let Et={},vt=Object.keys(H[Rt]).sort(M).reverse();for(let Ft of vt){let Xt=H[Rt][Ft];pt[Rt]&&pt[Rt][Ft]?Et[Ft]=o(Xt,pt[Rt][Ft],yt):Et[Ft]=o(Xt,void 0,yt)}vt.length===0?(delete q[Rt],delete pt[Rt]):(q[Rt]=Et[vt[0]],pt[Rt]=Et)}}function w(H,q){let pt=i(H),yt=i(H?H[g]:void 0);return Object.defineProperty(pt,p,{value:q}),Object.defineProperty(pt,g,{value:yt}),pt}function U(H,q,pt){let yt=H.objectId;pt[yt]||(pt[yt]=w(q,yt));let Rt=pt[yt];return W(H.props,Rt,Rt[g],pt),Rt}function nt(H,q,pt){let yt=H.objectId;pt[yt]||(pt[yt]=q?q._clone():y(yt));let Rt=pt[yt];for(let Et of Object.keys(H.props||{})){let vt=Object.keys(H.props[Et]);if(vt.length===0)Rt.remove(Et);else if(vt.length===1){let Ft=H.props[Et][vt[0]];Rt._set(Et,o(Ft,Rt.byId(Et),pt),vt[0])}else throw new RangeError("Conflicts are not supported on properties of a table")}return Rt}function X(H,q){let pt=H?H.slice():[],yt=H&&H[g]?H[g].slice():[],Rt=H&&H[m]?H[m].slice():[];return Object.defineProperty(pt,p,{value:q}),Object.defineProperty(pt,g,{value:yt}),Object.defineProperty(pt,m,{value:Rt}),pt}function j(H,q,pt){let yt=H.objectId;pt[yt]||(pt[yt]=X(q,yt));let Rt=pt[yt],Et=Rt[g],vt=Rt[m];for(let Ft=0;Ft<H.edits.length;Ft++){let Xt=H.edits[Ft];if(Xt.action==="insert"||Xt.action==="update"){let ee=Et[Xt.index]&&Et[Xt.index][Xt.opId],ne=o(Xt.value,ee,pt),ae={[Xt.opId]:ne};for(;Ft<H.edits.length-1&&H.edits[Ft+1].index===Xt.index&&H.edits[Ft+1].action==="update";){Ft++;let Le=H.edits[Ft],de=Et[Le.index]&&Et[Le.index][Le.opId];ne=o(Le.value,de,pt),ae[Le.opId]=ne}Xt.action==="insert"?(Rt.splice(Xt.index,0,ne),Et.splice(Xt.index,0,ae),vt.splice(Xt.index,0,Xt.elemId)):(Rt[Xt.index]=ne,Et[Xt.index]=ae)}else if(Xt.action==="multi-insert"){let ee=u(Xt.elemId),ne=[],ae=[],Le=[],de=Xt.datatype;Xt.values.forEach((He,ze)=>{let Pe=`${ee.counter+ze}@${ee.actorId}`;He=o({value:He,datatype:de},void 0,pt),ae.push(He),Le.push({[Pe]:{value:He,datatype:de,type:"value"}}),ne.push(Pe)}),Rt.splice(Xt.index,0,...ae),Et.splice(Xt.index,0,...Le),vt.splice(Xt.index,0,...ne)}else Xt.action==="remove"&&(Rt.splice(Xt.index,Xt.count),Et.splice(Xt.index,Xt.count),vt.splice(Xt.index,Xt.count))}return Rt}function it(H,q,pt){let yt=H.objectId,Rt;pt[yt]?Rt=pt[yt].elems:q?Rt=q.elems.slice():Rt=[];for(let Et of H.edits)if(Et.action==="insert"){let vt=o(Et.value,void 0,pt),Ft={elemId:Et.elemId,pred:[Et.opId],value:vt};Rt.splice(Et.index,0,Ft)}else if(Et.action==="multi-insert"){let vt=u(Et.elemId),Ft=Et.datatype,Xt=Et.values.map((ee,ne)=>{ee=o({datatype:Ft,value:ee},void 0,pt);let ae=`${vt.counter+ne}@${vt.actorId}`;return{elemId:ae,pred:[ae],value:ee}});Rt.splice(Et.index,0,...Xt)}else if(Et.action==="update"){let vt=Rt[Et.index].elemId,Ft=o(Et.value,Rt[Et.index].value,pt);Rt[Et.index]={elemId:vt,pred:[Et.opId],value:Ft}}else Et.action==="remove"&&Rt.splice(Et.index,Et.count);return pt[yt]=A(yt,Rt),pt[yt]}function ot(H,q,pt){if(n(q)&&(!H.props||Object.keys(H.props).length===0)&&(!H.edits||H.edits.length===0)&&!pt[H.objectId])return q;if(H.type==="map")return U(H,q,pt);if(H.type==="table")return nt(H,q,pt);if(H.type==="list")return j(H,q,pt);if(H.type==="text")return it(H,q,pt);throw new TypeError(`Unknown object type: ${H.type}`)}function K(H){if(H[p]!=="_root")throw new RangeError(`Not the root object: ${H[p]}`);return w(H,"_root")}r.exports={interpretPatch:ot,cloneRootObject:K}}),UC=ce((t,r)=>{var{OBJECT_ID:n,CHANGE:i,STATE:u}=Eu(),{createArrayOfNulls:p}=Us(),{Text:g}=Qf(),{Table:m}=th();function A(nt){if(typeof nt=="string"&&/^[0-9]+$/.test(nt)&&(nt=parseInt(nt,10)),typeof nt!="number")throw new TypeError("A list index must be a number, but you passed "+JSON.stringify(nt));if(nt<0||isNaN(nt)||nt===1/0||nt===-1/0)throw new RangeError("A list index must be positive, but you passed "+nt);return nt}function y(nt,X,j){let it={deleteAt(ot,K){return nt.splice(j,A(ot),K||1,[]),this},fill(ot,K,H){let q=nt.getObject(X);for(let pt=A(K||0);pt<A(H||q.length);pt++)nt.setListIndex(j,pt,ot);return this},indexOf(ot,K=0){let H=ot[n];if(H){let q=nt.getObject(X);for(let pt=K;pt<q.length;pt++)if(q[pt][n]===H)return pt;return-1}else return nt.getObject(X).indexOf(ot,K)},insertAt(ot,...K){return nt.splice(j,A(ot),0,K),this},pop(){let ot=nt.getObject(X);if(ot.length==0)return;let K=nt.getObjectField(j,X,ot.length-1);return nt.splice(j,ot.length-1,1,[]),K},push(...ot){let K=nt.getObject(X);return nt.splice(j,K.length,0,ot),nt.getObject(X).length},shift(){if(nt.getObject(X).length==0)return;let ot=nt.getObjectField(j,X,0);return nt.splice(j,0,1,[]),ot},splice(ot,K,...H){let q=nt.getObject(X);ot=A(ot),(K===void 0||K>q.length-ot)&&(K=q.length-ot);let pt=[];for(let yt=0;yt<K;yt++)pt.push(nt.getObjectField(j,X,ot+yt));return nt.splice(j,ot,K,H),pt},unshift(...ot){return nt.splice(j,0,0,ot),nt.getObject(X).length}};for(let ot of["entries","keys","values"]){let K=nt.getObject(X);it[ot]=()=>K[ot]()}for(let ot of["concat","every","filter","find","findIndex","forEach","includes","join","lastIndexOf","map","reduce","reduceRight","slice","some","toLocaleString","toString"])it[ot]=(...K)=>nt.getObject(X).map((H,q)=>nt.getObjectField(j,X,q))[ot](...K);return it}var D={get(nt,X){let{context:j,objectId:it,path:ot}=nt;return X===n?it:X===i?j:X===u?{actorId:j.actorId}:j.getObjectField(ot,it,X)},set(nt,X,j){let{context:it,path:ot,readonly:K}=nt;if(Array.isArray(K)&&K.indexOf(X)>=0)throw new RangeError(`Object property "${X}" cannot be modified`);return it.setMapKey(ot,X,j),!0},deleteProperty(nt,X){let{context:j,path:it,readonly:ot}=nt;if(Array.isArray(ot)&&ot.indexOf(X)>=0)throw new RangeError(`Object property "${X}" cannot be modified`);return j.deleteMapKey(it,X),!0},has(nt,X){let{context:j,objectId:it}=nt;return[n,i].includes(X)||X in j.getObject(it)},getOwnPropertyDescriptor(nt,X){let{context:j,objectId:it}=nt,ot=j.getObject(it);if(X in ot)return{configurable:!0,enumerable:!0,value:j.getObjectField(it,X)}},ownKeys(nt){let{context:X,objectId:j}=nt;return Object.keys(X.getObject(j))}},o={get(nt,X){let[j,it,ot]=nt;return X===Symbol.iterator?j.getObject(it)[Symbol.iterator]:X===n?it:X===i?j:X==="length"?j.getObject(it).length:typeof X=="string"&&/^[0-9]+$/.test(X)?j.getObjectField(ot,it,A(X)):y(j,it,ot)[X]},set(nt,X,j){let[it,ot,K]=nt;if(X==="length"){if(typeof j!="number")throw new RangeError("Invalid array length");let H=it.getObject(ot).length;H>j?it.splice(K,j,H-j,[]):it.splice(K,H,0,p(j-H))}else it.setListIndex(K,A(X),j);return!0},deleteProperty(nt,X){let[j,,it]=nt;return j.splice(it,A(X),1,[]),!0},has(nt,X){let[j,it]=nt;return typeof X=="string"&&/^[0-9]+$/.test(X)?A(X)<j.getObject(it).length:["length",n,i].includes(X)},getOwnPropertyDescriptor(nt,X){let[j,it]=nt,ot=j.getObject(it);if(X==="length")return{writable:!0,value:ot.length};if(X===n)return{configurable:!1,enumerable:!1,value:it};if(typeof X=="string"&&/^[0-9]+$/.test(X)){let K=A(X);if(K<ot.length)return{configurable:!0,enumerable:!0,value:j.getObjectField(it,K)}}},ownKeys(nt){let[X,j]=nt,it=X.getObject(j),ot=["length"];for(let K of Object.keys(it))ot.push(K);return ot}};function M(nt,X,j,it){return new Proxy({context:nt,objectId:X,path:j,readonly:it},D)}function W(nt,X,j){return new Proxy([nt,X,j],o)}function w(nt,X,j){let it=this.getObject(X);return Array.isArray(it)?W(this,X,nt):it instanceof g||it instanceof m?it.getWriteable(this,nt):M(this,X,nt,j)}function U(nt){return nt.instantiateObject=w,M(nt,"_root",[])}r.exports={rootObjectProxy:U}}),nv=ce((t,r)=>{var n=class{constructor(p){if(!(Number.isInteger(p)&&p<=Number.MAX_SAFE_INTEGER&&p>=Number.MIN_SAFE_INTEGER))throw new RangeError(`Value ${p} cannot be a uint`);this.value=p,Object.freeze(this)}},i=class{constructor(p){if(!(Number.isInteger(p)&&p<=Number.MAX_SAFE_INTEGER&&p>=0))throw new RangeError(`Value ${p} cannot be a uint`);this.value=p,Object.freeze(this)}},u=class{constructor(p){if(typeof p!="number")throw new RangeError(`Value ${p} cannot be a float64`);this.value=p||0,Object.freeze(this)}};r.exports={Int:n,Uint:i,Float64:u}}),VC=ce((t,r)=>{var{CACHE:n,OBJECT_ID:i,CONFLICTS:u,ELEM_IDS:p,STATE:g}=Eu(),{interpretPatch:m}=Qm(),{Text:A}=Qf(),{Table:y}=th(),{Counter:D,getWriteableCounter:o}=W0(),{Int:M,Uint:W,Float64:w}=nv(),{isObject:U,parseOpId:nt,createArrayOfNulls:X}=Us(),j=z0(),it=class{constructor(H,q,pt){this.actorId=q,this.nextOpNum=H[g].maxOp+1,this.cache=H[n],this.updated={},this.ops=[],this.applyPatch=pt||m}addOp(H){this.ops.push(H),H.action==="set"&&H.values?this.nextOpNum+=H.values.length:H.action==="del"&&H.multiOp?this.nextOpNum+=H.multiOp:this.nextOpNum+=1}nextOpId(){return`${this.nextOpNum}@${this.actorId}`}getValueDescription(H){if(!["object","boolean","number","string"].includes(typeof H))throw new TypeError(`Unsupported type of value: ${typeof H}`);if(U(H)){if(H instanceof Date)return{type:"value",value:H.getTime(),datatype:"timestamp"};if(H instanceof M)return{type:"value",value:H.value,datatype:"int"};if(H instanceof W)return{type:"value",value:H.value,datatype:"uint"};if(H instanceof w)return{type:"value",value:H.value,datatype:"float64"};if(H instanceof D)return{type:"value",value:H.value,datatype:"counter"};{let q=H[i],pt=this.getObjectType(q);if(!q)throw new RangeError(`Object ${JSON.stringify(H)} has no objectId`);return pt==="list"||pt==="text"?{objectId:q,type:pt,edits:[]}:{objectId:q,type:pt,props:{}}}}else return typeof H=="number"?Number.isInteger(H)&&H<=Number.MAX_SAFE_INTEGER&&H>=Number.MIN_SAFE_INTEGER?{type:"value",value:H,datatype:"int"}:{type:"value",value:H,datatype:"float64"}:{type:"value",value:H}}getValuesDescriptions(H,q,pt){if(q instanceof y){let yt=q.byId(pt),Rt=q.opIds[pt];return yt?{[Rt]:this.getValueDescription(yt)}:{}}else if(q instanceof A){let yt=q.get(pt),Rt=q.getElemId(pt);return yt?{[Rt]:this.getValueDescription(yt)}:{}}else{let yt=q[u][pt],Rt={};if(!yt)throw new RangeError(`No children at key ${pt} of path ${JSON.stringify(H)}`);for(let Et of Object.keys(yt))Rt[Et]=this.getValueDescription(yt[Et]);return Rt}}getPropertyValue(H,q,pt){return H instanceof y?H.byId(q):H instanceof A?H.get(q):H[u][q][pt]}getSubpatch(H,q){if(q.length==0)return H;let pt=H,yt=this.getObject("_root");for(let Rt of q){let Et=this.getValuesDescriptions(q,yt,Rt.key);if(pt.props)pt.props[Rt.key]||(pt.props[Rt.key]=Et);else if(pt.edits)for(let Ft of Object.keys(Et))pt.edits.push({action:"update",index:Rt.key,opId:Ft,value:Et[Ft]});let vt=null;for(let Ft of Object.keys(Et))Et[Ft].objectId===Rt.objectId&&(vt=Ft);if(!vt)throw new RangeError(`Cannot find path object with objectId ${Rt.objectId}`);pt=Et[vt],yt=this.getPropertyValue(yt,Rt.key,vt)}return pt}getObject(H){let q=this.updated[H]||this.cache[H];if(!q)throw new RangeError(`Target object does not exist: ${H}`);return q}getObjectType(H){if(H==="_root")return"map";let q=this.getObject(H);return q instanceof A?"text":q instanceof y?"table":Array.isArray(q)?"list":"map"}getObjectField(H,q,pt){if(!["string","number"].includes(typeof pt))return;let yt=this.getObject(q);if(yt[pt]instanceof D)return o(yt[pt].value,this,H,q,pt);if(U(yt[pt])){let Rt=yt[pt][i],Et=H.concat([{key:pt,objectId:Rt}]);return this.instantiateObject(Et,Rt)}else return yt[pt]}createNestedObjects(H,q,pt,yt,Rt,Et){if(pt[i])throw new RangeError("Cannot create a reference to an existing document object");let vt=this.nextOpId();if(pt instanceof A){this.addOp(Et?{action:"makeText",obj:H,elemId:Et,insert:yt,pred:Rt}:{action:"makeText",obj:H,key:q,insert:yt,pred:Rt});let Ft={objectId:vt,type:"text",edits:[]};return this.insertListItems(Ft,0,[...pt],!0),Ft}else if(pt instanceof y){if(pt.count>0)throw new RangeError("Assigning a non-empty Table object is not supported");return this.addOp(Et?{action:"makeTable",obj:H,elemId:Et,insert:yt,pred:Rt}:{action:"makeTable",obj:H,key:q,insert:yt,pred:Rt}),{objectId:vt,type:"table",props:{}}}else if(Array.isArray(pt)){this.addOp(Et?{action:"makeList",obj:H,elemId:Et,insert:yt,pred:Rt}:{action:"makeList",obj:H,key:q,insert:yt,pred:Rt});let Ft={objectId:vt,type:"list",edits:[]};return this.insertListItems(Ft,0,pt,!0),Ft}else{this.addOp(Et?{action:"makeMap",obj:H,elemId:Et,insert:yt,pred:Rt}:{action:"makeMap",obj:H,key:q,insert:yt,pred:Rt});let Ft={};for(let Xt of Object.keys(pt).sort()){let ee=this.nextOpId(),ne=this.setValue(vt,Xt,pt[Xt],!1,[]);Ft[Xt]={[ee]:ne}}return{objectId:vt,type:"map",props:Ft}}}setValue(H,q,pt,yt,Rt,Et){if(!H)throw new RangeError("setValue needs an objectId");if(q==="")throw new RangeError("The key of a map entry must not be an empty string");if(U(pt)&&!(pt instanceof Date)&&!(pt instanceof D)&&!(pt instanceof M)&&!(pt instanceof W)&&!(pt instanceof w))return this.createNestedObjects(H,q,pt,yt,Rt,Et);{let vt=this.getValueDescription(pt),Ft={action:"set",obj:H,insert:yt,value:vt.value,pred:Rt};return Et?Ft.elemId=Et:Ft.key=q,vt.datatype&&(Ft.datatype=vt.datatype),this.addOp(Ft),vt}}applyAtPath(H,q){let pt={objectId:"_root",type:"map",props:{}};q(this.getSubpatch(pt,H)),this.applyPatch(pt,this.cache._root,this.updated)}setMapKey(H,q,pt){if(typeof q!="string")throw new RangeError(`The key of a map entry must be a string, not ${typeof q}`);let yt=H.length===0?"_root":H[H.length-1].objectId,Rt=this.getObject(yt);if(Rt[q]instanceof D)throw new RangeError("Cannot overwrite a Counter object; use .increment() or .decrement() to change its value.");(Rt[q]!==pt||Object.keys(Rt[u][q]||{}).length>1||pt===void 0)&&this.applyAtPath(H,Et=>{let vt=ot(Rt,q),Ft=this.nextOpId(),Xt=this.setValue(yt,q,pt,!1,vt);Et.props[q]={[Ft]:Xt}})}deleteMapKey(H,q){let pt=H.length===0?"_root":H[H.length-1].objectId,yt=this.getObject(pt);if(yt[q]!==void 0){let Rt=ot(yt,q);this.addOp({action:"del",obj:pt,key:q,insert:!1,pred:Rt}),this.applyAtPath(H,Et=>{Et.props[q]={}})}}insertListItems(H,q,pt,yt){let Rt=yt?[]:this.getObject(H.objectId);if(q<0||q>Rt.length)throw new RangeError(`List index ${q} is out of bounds for list of length ${Rt.length}`);if(pt.length===0)return;let Et=K(Rt,q,!0),vt=pt.every(ee=>typeof ee=="string"||typeof ee=="number"||typeof ee=="boolean"||ee===null||U(ee)&&(ee instanceof Date||ee instanceof D||ee instanceof M||ee instanceof W||ee instanceof w)),Ft=vt?pt.map(ee=>this.getValueDescription(ee)):[],Xt=Ft.every(ee=>ee.datatype===Ft[0].datatype);if(vt&&Xt&&pt.length>1){let ee=this.nextOpId(),ne=Ft[0].datatype,ae=Ft.map(He=>He.value),Le={action:"set",obj:H.objectId,elemId:Et,insert:!0,values:ae,pred:[]},de={action:"multi-insert",elemId:ee,index:q,values:ae};ne&&(Le.datatype=ne,de.datatype=ne),this.addOp(Le),H.edits.push(de)}else for(let ee=0;ee<pt.length;ee++){let ne=this.nextOpId(),ae=this.setValue(H.objectId,q+ee,pt[ee],!0,[],Et);Et=ne,H.edits.push({action:"insert",index:q+ee,elemId:Et,opId:Et,value:ae})}}setListIndex(H,q,pt){let yt=H.length===0?"_root":H[H.length-1].objectId,Rt=this.getObject(yt);if(q>=Rt.length){let Et=X(q-Rt.length);return Et.push(pt),this.splice(H,Rt.length,0,Et)}if(Rt[q]instanceof D)throw new RangeError("Cannot overwrite a Counter object; use .increment() or .decrement() to change its value.");(Rt[q]!==pt||Object.keys(Rt[u][q]||{}).length>1||pt===void 0)&&this.applyAtPath(H,Et=>{let vt=ot(Rt,q),Ft=this.nextOpId(),Xt=this.setValue(yt,q,pt,!1,vt,K(Rt,q));Et.edits.push({action:"update",index:q,opId:Ft,value:Xt})})}splice(H,q,pt,yt){let Rt=H.length===0?"_root":H[H.length-1].objectId,Et=this.getObject(Rt);if(q<0||pt<0||q>Et.length-pt)throw new RangeError(`${pt} deletions starting at index ${q} are out of bounds for list of length ${Et.length}`);if(pt===0&&yt.length===0)return;let vt={diffs:{objectId:"_root",type:"map",props:{}}},Ft=this.getSubpatch(vt.diffs,H);if(pt>0){let Xt,ee,ne;for(let ae=0;ae<pt;ae++){if(this.getObjectField(H,Rt,q+ae)instanceof D)throw new TypeError("Unsupported operation: deleting a counter from a list");let Le=K(Et,q+ae),de=nt(Le),He=ot(Et,q+ae),ze=He.length===1?nt(He[0]):void 0;Xt&&ee&&ne&&ze&&ee.actorId===de.actorId&&ee.counter+1===de.counter&&ne.actorId===ze.actorId&&ne.counter+1===ze.counter?Xt.multiOp=(Xt.multiOp||1)+1:(Xt&&this.addOp(Xt),Xt={action:"del",obj:Rt,elemId:Le,insert:!1,pred:He}),ee=de,ne=ze}this.addOp(Xt),Ft.edits.push({action:"remove",index:q,count:pt})}yt.length>0&&this.insertListItems(Ft,q,yt,!1),this.applyPatch(vt.diffs,this.cache._root,this.updated)}addTableRow(H,q){if(!U(q)||Array.isArray(q))throw new TypeError("A table row must be an object");if(q[i])throw new TypeError("Cannot reuse an existing object as table row");if(q.id)throw new TypeError('A table row must not have an "id" property; it is generated automatically');let pt=j(),yt=this.setValue(H[H.length-1].objectId,pt,q,!1,[]);return this.applyAtPath(H,Rt=>{Rt.props[pt]={[yt.objectId]:yt}}),pt}deleteTableRow(H,q,pt){let yt=H[H.length-1].objectId;this.getObject(yt).byId(q)&&(this.addOp({action:"del",obj:yt,key:q,insert:!1,pred:[pt]}),this.applyAtPath(H,Rt=>{Rt.props[q]={}}))}increment(H,q,pt){let yt=H.length===0?"_root":H[H.length-1].objectId,Rt=this.getObject(yt);if(!(Rt[q]instanceof D))throw new TypeError("Only counter values can be incremented");let Et=this.getObjectType(yt),vt=Rt[q].value+pt,Ft=this.nextOpId(),Xt=ot(Rt,q);if(Et==="list"||Et==="text"){let ee=K(Rt,q,!1);this.addOp({action:"inc",obj:yt,elemId:ee,value:pt,insert:!1,pred:Xt})}else this.addOp({action:"inc",obj:yt,key:q,value:pt,insert:!1,pred:Xt});this.applyAtPath(H,ee=>{Et==="list"||Et==="text"?ee.edits.push({action:"update",index:q,opId:Ft,value:{value:vt,datatype:"counter"}}):ee.props[q]={[Ft]:{value:vt,datatype:"counter"}}})}};function ot(H,q){return H instanceof y?[H.opIds[q]]:H instanceof A?H.elems[q].pred:H[u]?H[u][q]?Object.keys(H[u][q]):[]:[]}function K(H,q,pt=!1){if(pt){if(q===0)return"_head";q-=1}if(H[p])return H[p][q];if(H.getElemId)return H.getElemId(q);throw new RangeError(`Cannot find elemId at list index ${q}`)}r.exports={Context:it}}),zC=ce((t,r)=>{var{OBJECT_ID:n,CONFLICTS:i}=Eu(),u=class{constructor(){this.observers={}}patchCallback(p,g,m,A,y){this._objectUpdate(p.diffs,g,m,A,y)}_objectUpdate(p,g,m,A,y){if(p.objectId){if(this.observers[p.objectId])for(let D of this.observers[p.objectId])D(p,g,m,A,y);if(p.type==="map"&&p.props)for(let D of Object.keys(p.props))for(let o of Object.keys(p.props[D]))this._objectUpdate(p.props[D][o],g&&g[i]&&g[i][D]&&g[i][D][o],m&&m[i]&&m[i][D]&&m[i][D][o],A,y);else if(p.type==="table"&&p.props)for(let D of Object.keys(p.props))for(let o of Object.keys(p.props[D]))this._objectUpdate(p.props[D][o],g&&g.byId(D),m&&m.byId(D),A,y);else if(p.type==="list"&&p.edits){let D=0;for(let o of p.edits)o.action==="insert"?(D-=1,this._objectUpdate(o.value,void 0,m&&m[i]&&m[i][o.index]&&m[i][o.index][o.elemId],A,y)):o.action==="multi-insert"?D-=o.values.length:o.action==="update"?this._objectUpdate(o.value,g&&g[i]&&g[i][o.index+D]&&g[i][o.index+D][o.opId],m&&m[i]&&m[i][o.index]&&m[i][o.index][o.opId],A,y):o.action==="remove"&&(D+=o.count)}else if(p.type==="text"&&p.edits){let D=0;for(let o of p.edits)o.action==="insert"?(D-=1,this._objectUpdate(o.value,void 0,m&&m.get(o.index),A,y)):o.action==="multi-insert"?D-=o.values.length:o.action==="update"?this._objectUpdate(o.value,g&&g.get(o.index+D),m&&m.get(o.index),A,y):o.action==="remove"&&(D+=o.count)}}}observe(p,g){let m=p[n];if(!m)throw new TypeError("The observed object must be part of an Automerge document");this.observers[m]||(this.observers[m]=[]),this.observers[m].push(g)}};r.exports={Observable:u}}),tD=ce((t,r)=>{var{OPTIONS:n,CACHE:i,STATE:u,OBJECT_ID:p,CONFLICTS:g,CHANGE:m,ELEM_IDS:A}=Eu(),{isObject:y,copyObject:D}=Us(),o=z0(),{interpretPatch:M,cloneRootObject:W}=Qm(),{rootObjectProxy:w}=UC(),{Context:U}=VC(),{Text:nt}=Qf(),{Table:X}=th(),{Counter:j}=W0(),{Float64:it,Int:ot,Uint:K}=nv(),{Observable:H}=zC();function q(Ae){if(typeof Ae!="string")throw new TypeError(`Unsupported type of actorId: ${typeof Ae}`);if(!/^[0-9a-f]+$/.test(Ae))throw new RangeError("actorId must consist only of lowercase hex digits");if(Ae.length%2!==0)throw new RangeError("actorId must consist of an even number of digits")}function pt(Ae,xe,Qe){let Ve=xe._root;if(Ve||(Ve=W(Ae[i]._root),xe._root=Ve),Object.defineProperty(Ve,n,{value:Ae[n]}),Object.defineProperty(Ve,i,{value:xe}),Object.defineProperty(Ve,u,{value:Qe}),Ae[n].freeze)for(let Ze of Object.keys(xe))xe[Ze]instanceof X?xe[Ze]._freeze():xe[Ze]instanceof nt?(Object.freeze(xe[Ze].elems),Object.freeze(xe[Ze])):(Object.freeze(xe[Ze]),Object.freeze(xe[Ze][g]));for(let Ze of Object.keys(Ae[i]))xe[Ze]||(xe[Ze]=Ae[i][Ze]);return Ae[n].freeze&&Object.freeze(xe),Ve}function yt(Ae,xe,Qe){let Ve=He(Ae);if(!Ve)throw new Error("Actor ID must be initialized with setActorId() before making a change");let Ze=D(Ae[u]);Ze.seq+=1;let vr={actor:Ve,seq:Ze.seq,startOp:Ze.maxOp+1,deps:Ze.deps,time:Qe&&typeof Qe.time=="number"?Qe.time:Math.round(new Date().getTime()/1e3),message:Qe&&typeof Qe.message=="string"?Qe.message:"",ops:xe.ops};if(Ae[n].backend){let[Pr,Dr,Q]=Ae[n].backend.applyLocalChange(Ze.backendState,vr);Ze.backendState=Pr,Ze.lastLocalChange=Q;let k=vt(Ae,Dr,Ze,!0),Z=Qe&&Qe.patchCallback||Ae[n].patchCallback;return Z&&Z(Dr,Ae,k,!0,[Q]),[k,vr]}else{let Pr={actor:Ve,seq:vr.seq,before:Ae};return Ze.requests=Ze.requests.concat([Pr]),Ze.maxOp=Ze.maxOp+Rt(vr.ops),Ze.deps=[],[pt(Ae,xe?xe.updated:{},Ze),vr]}}function Rt(Ae){let xe=0;for(let Qe of Ae)Qe.action==="set"&&Qe.values?xe+=Qe.values.length:xe+=1;return xe}function Et(Ae){return Ae[u]&&Ae[u].lastLocalChange?Ae[u].lastLocalChange:null}function vt(Ae,xe,Qe,Ve){let Ze=He(Ae),vr={};if(M(xe.diffs,Ae,vr),Ve){if(!xe.clock)throw new RangeError("patch is missing clock field");xe.clock[Ze]&&xe.clock[Ze]>Qe.seq&&(Qe.seq=xe.clock[Ze]),Qe.clock=xe.clock,Qe.deps=xe.deps,Qe.maxOp=Math.max(Qe.maxOp,xe.maxOp)}return pt(Ae,vr,Qe)}function Ft(Ae){if(typeof Ae=="string")Ae={actorId:Ae};else if(typeof Ae>"u")Ae={};else if(!y(Ae))throw new TypeError(`Unsupported value for init() options: ${Ae}`);if(Ae.deferActorId||(Ae.actorId===void 0&&(Ae.actorId=o()),q(Ae.actorId)),Ae.observable){let Ze=Ae.patchCallback,vr=Ae.observable;Ae.patchCallback=(Pr,Dr,Q,k,Z)=>{Ze&&Ze(Pr,Dr,Q,k,Z),vr.patchCallback(Pr,Dr,Q,k,Z)}}let xe={},Qe={_root:xe},Ve={seq:0,maxOp:0,requests:[],clock:{},deps:[]};return Ae.backend&&(Ve.backendState=Ae.backend.init(),Ve.lastLocalChange=null),Object.defineProperty(xe,p,{value:"_root"}),Object.defineProperty(xe,n,{value:Object.freeze(Ae)}),Object.defineProperty(xe,g,{value:Object.freeze({})}),Object.defineProperty(xe,i,{value:Object.freeze(Qe)}),Object.defineProperty(xe,u,{value:Object.freeze(Ve)}),Object.freeze(xe)}function Xt(Ae,xe){return ee(Ft(xe),"Initialization",Qe=>Object.assign(Qe,Ae))}function ee(Ae,xe,Qe){if(Ae[p]!=="_root")throw new TypeError("The first argument to Automerge.change must be the document root");if(Ae[m])throw new TypeError("Calls to Automerge.change cannot be nested");if(typeof xe=="function"&&Qe===void 0&&([xe,Qe]=[Qe,xe]),typeof xe=="string"&&(xe={message:xe}),xe!==void 0&&!y(xe))throw new TypeError("Unsupported type of options");let Ve=He(Ae);if(!Ve)throw new Error("Actor ID must be initialized with setActorId() before making a change");let Ze=new U(Ae,Ve);return Qe(w(Ze)),Object.keys(Ze.updated).length===0?[Ae,null]:yt(Ae,Ze,xe)}function ne(Ae,xe){if(Ae[p]!=="_root")throw new TypeError("The first argument to Automerge.emptyChange must be the document root");if(typeof xe=="string"&&(xe={message:xe}),xe!==void 0&&!y(xe))throw new TypeError("Unsupported type of options");let Qe=He(Ae);if(!Qe)throw new Error("Actor ID must be initialized with setActorId() before making a change");return yt(Ae,new U(Ae,Qe),xe)}function ae(Ae,xe,Qe=void 0){if(Ae[p]!=="_root")throw new TypeError("The first argument to Frontend.applyPatch must be the document root");let Ve=D(Ae[u]);if(Ae[n].backend){if(!Qe)throw new RangeError("applyPatch must be called with the updated backend state");return Ve.backendState=Qe,vt(Ae,xe,Ve,!0)}let Ze;if(Ve.requests.length>0)if(Ze=Ve.requests[0].before,xe.actor===He(Ae)){if(Ve.requests[0].seq!==xe.seq)throw new RangeError(`Mismatched sequence number: patch ${xe.seq} does not match next request ${Ve.requests[0].seq}`);Ve.requests=Ve.requests.slice(1)}else Ve.requests=Ve.requests.slice();else Ze=Ae,Ve.requests=[];let vr=vt(Ze,xe,Ve,!0);return Ve.requests.length===0?vr:(Ve.requests[0]=D(Ve.requests[0]),Ve.requests[0].before=vr,pt(Ae,{},Ve))}function Le(Ae){return Ae[p]}function de(Ae,xe){if(Ae[m])throw new TypeError("Cannot use getObjectById in a change callback");return Ae[i][xe]}function He(Ae){return Ae[u].actorId||Ae[n].actorId}function ze(Ae,xe){q(xe);let Qe=Object.assign({},Ae[u],{actorId:xe});return pt(Ae,{},Qe)}function Pe(Ae,xe){if(Ae[g]&&Ae[g][xe]&&Object.keys(Ae[g][xe]).length>1)return Ae[g][xe]}function Je(Ae,xe=null,Qe="first"){if(Ae[p]!=="_root"){let Ve=Array.isArray(Ae)?". Note: Automerge.applyChanges now returns an array.":"";throw xe?new TypeError(`The ${Qe} argument to Automerge.${xe} must be the document root${Ve}`):new TypeError(`Argument is not an Automerge document root${Ve}`)}return Ae[u].backendState}function Xe(Ae){return Ae instanceof nt?Ae.elems.map(xe=>xe.elemId):Ae[A]}r.exports={init:Ft,from:Xt,change:ee,emptyChange:ne,applyPatch:ae,getObjectId:Le,getObjectById:de,getActorId:He,setActorId:ze,getConflicts:Pe,getLastLocalChange:Et,getBackendState:Je,getElementIds:Xe,Text:nt,Table:X,Counter:j,Observable:H,Float64:it,Int:ot,Uint:K}}),bD=ce((t,r)=>{"use strict";function n(f){let B=f.length;for(;--B>=0;)f[B]=0}var i=0,u=1,p=2,g=3,m=258,A=29,y=256,D=y+1+A,o=30,M=19,W=2*D+1,w=15,U=16,nt=7,X=256,j=16,it=17,ot=18,K=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),H=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),q=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),pt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),yt=512,Rt=new Array((D+2)*2);n(Rt);var Et=new Array(o*2);n(Et);var vt=new Array(yt);n(vt);var Ft=new Array(m-g+1);n(Ft);var Xt=new Array(A);n(Xt);var ee=new Array(o);n(ee);function ne(f,B,J,St,Pt){this.static_tree=f,this.extra_bits=B,this.extra_base=J,this.elems=St,this.max_length=Pt,this.has_stree=f&&f.length}var ae,Le,de;function He(f,B){this.dyn_tree=f,this.max_code=0,this.stat_desc=B}var ze=f=>f<256?vt[f]:vt[256+(f>>>7)],Pe=(f,B)=>{f.pending_buf[f.pending++]=B&255,f.pending_buf[f.pending++]=B>>>8&255},Je=(f,B,J)=>{f.bi_valid>U-J?(f.bi_buf|=B<<f.bi_valid&65535,Pe(f,f.bi_buf),f.bi_buf=B>>U-f.bi_valid,f.bi_valid+=J-U):(f.bi_buf|=B<<f.bi_valid&65535,f.bi_valid+=J)},Xe=(f,B,J)=>{Je(f,J[B*2],J[B*2+1])},Ae=(f,B)=>{let J=0;do J|=f&1,f>>>=1,J<<=1;while(--B>0);return J>>>1},xe=f=>{f.bi_valid===16?(Pe(f,f.bi_buf),f.bi_buf=0,f.bi_valid=0):f.bi_valid>=8&&(f.pending_buf[f.pending++]=f.bi_buf&255,f.bi_buf>>=8,f.bi_valid-=8)},Qe=(f,B)=>{let J=B.dyn_tree,St=B.max_code,Pt=B.stat_desc.static_tree,et=B.stat_desc.has_stree,zt=B.stat_desc.extra_bits,Ut=B.stat_desc.extra_base,_e=B.stat_desc.max_length,xt,dt,tt,F,rt,At,Ct=0;for(F=0;F<=w;F++)f.bl_count[F]=0;for(J[f.heap[f.heap_max]*2+1]=0,xt=f.heap_max+1;xt<W;xt++)dt=f.heap[xt],F=J[J[dt*2+1]*2+1]+1,F>_e&&(F=_e,Ct++),J[dt*2+1]=F,!(dt>St)&&(f.bl_count[F]++,rt=0,dt>=Ut&&(rt=zt[dt-Ut]),At=J[dt*2],f.opt_len+=At*(F+rt),et&&(f.static_len+=At*(Pt[dt*2+1]+rt)));if(Ct!==0){do{for(F=_e-1;f.bl_count[F]===0;)F--;f.bl_count[F]--,f.bl_count[F+1]+=2,f.bl_count[_e]--,Ct-=2}while(Ct>0);for(F=_e;F!==0;F--)for(dt=f.bl_count[F];dt!==0;)tt=f.heap[--xt],!(tt>St)&&(J[tt*2+1]!==F&&(f.opt_len+=(F-J[tt*2+1])*J[tt*2],J[tt*2+1]=F),dt--)}},Ve=(f,B,J)=>{let St=new Array(w+1),Pt=0,et,zt;for(et=1;et<=w;et++)Pt=Pt+J[et-1]<<1,St[et]=Pt;for(zt=0;zt<=B;zt++){let Ut=f[zt*2+1];Ut!==0&&(f[zt*2]=Ae(St[Ut]++,Ut))}},Ze=()=>{let f,B,J,St,Pt,et=new Array(w+1);for(J=0,St=0;St<A-1;St++)for(Xt[St]=J,f=0;f<1<<K[St];f++)Ft[J++]=St;for(Ft[J-1]=St,Pt=0,St=0;St<16;St++)for(ee[St]=Pt,f=0;f<1<<H[St];f++)vt[Pt++]=St;for(Pt>>=7;St<o;St++)for(ee[St]=Pt<<7,f=0;f<1<<H[St]-7;f++)vt[256+Pt++]=St;for(B=0;B<=w;B++)et[B]=0;for(f=0;f<=143;)Rt[f*2+1]=8,f++,et[8]++;for(;f<=255;)Rt[f*2+1]=9,f++,et[9]++;for(;f<=279;)Rt[f*2+1]=7,f++,et[7]++;for(;f<=287;)Rt[f*2+1]=8,f++,et[8]++;for(Ve(Rt,D+1,et),f=0;f<o;f++)Et[f*2+1]=5,Et[f*2]=Ae(f,5);ae=new ne(Rt,K,y+1,D,w),Le=new ne(Et,H,0,o,w),de=new ne(new Array(0),q,0,M,nt)},vr=f=>{let B;for(B=0;B<D;B++)f.dyn_ltree[B*2]=0;for(B=0;B<o;B++)f.dyn_dtree[B*2]=0;for(B=0;B<M;B++)f.bl_tree[B*2]=0;f.dyn_ltree[X*2]=1,f.opt_len=f.static_len=0,f.sym_next=f.matches=0},Pr=f=>{f.bi_valid>8?Pe(f,f.bi_buf):f.bi_valid>0&&(f.pending_buf[f.pending++]=f.bi_buf),f.bi_buf=0,f.bi_valid=0},Dr=(f,B,J,St)=>{let Pt=B*2,et=J*2;return f[Pt]<f[et]||f[Pt]===f[et]&&St[B]<=St[J]},Q=(f,B,J)=>{let St=f.heap[J],Pt=J<<1;for(;Pt<=f.heap_len&&(Pt<f.heap_len&&Dr(B,f.heap[Pt+1],f.heap[Pt],f.depth)&&Pt++,!Dr(B,St,f.heap[Pt],f.depth));)f.heap[J]=f.heap[Pt],J=Pt,Pt<<=1;f.heap[J]=St},k=(f,B,J)=>{let St,Pt,et=0,zt,Ut;if(f.sym_next!==0)do St=f.pending_buf[f.sym_buf+et++]&255,St+=(f.pending_buf[f.sym_buf+et++]&255)<<8,Pt=f.pending_buf[f.sym_buf+et++],St===0?Xe(f,Pt,B):(zt=Ft[Pt],Xe(f,zt+y+1,B),Ut=K[zt],Ut!==0&&(Pt-=Xt[zt],Je(f,Pt,Ut)),St--,zt=ze(St),Xe(f,zt,J),Ut=H[zt],Ut!==0&&(St-=ee[zt],Je(f,St,Ut)));while(et<f.sym_next);Xe(f,X,B)},Z=(f,B)=>{let J=B.dyn_tree,St=B.stat_desc.static_tree,Pt=B.stat_desc.has_stree,et=B.stat_desc.elems,zt,Ut,_e=-1,xt;for(f.heap_len=0,f.heap_max=W,zt=0;zt<et;zt++)J[zt*2]!==0?(f.heap[++f.heap_len]=_e=zt,f.depth[zt]=0):J[zt*2+1]=0;for(;f.heap_len<2;)xt=f.heap[++f.heap_len]=_e<2?++_e:0,J[xt*2]=1,f.depth[xt]=0,f.opt_len--,Pt&&(f.static_len-=St[xt*2+1]);for(B.max_code=_e,zt=f.heap_len>>1;zt>=1;zt--)Q(f,J,zt);xt=et;do zt=f.heap[1],f.heap[1]=f.heap[f.heap_len--],Q(f,J,1),Ut=f.heap[1],f.heap[--f.heap_max]=zt,f.heap[--f.heap_max]=Ut,J[xt*2]=J[zt*2]+J[Ut*2],f.depth[xt]=(f.depth[zt]>=f.depth[Ut]?f.depth[zt]:f.depth[Ut])+1,J[zt*2+1]=J[Ut*2+1]=xt,f.heap[1]=xt++,Q(f,J,1);while(f.heap_len>=2);f.heap[--f.heap_max]=f.heap[1],Qe(f,B),Ve(J,_e,f.bl_count)},se=(f,B,J)=>{let St,Pt=-1,et,zt=B[1],Ut=0,_e=7,xt=4;for(zt===0&&(_e=138,xt=3),B[(J+1)*2+1]=65535,St=0;St<=J;St++)et=zt,zt=B[(St+1)*2+1],!(++Ut<_e&&et===zt)&&(Ut<xt?f.bl_tree[et*2]+=Ut:et!==0?(et!==Pt&&f.bl_tree[et*2]++,f.bl_tree[j*2]++):Ut<=10?f.bl_tree[it*2]++:f.bl_tree[ot*2]++,Ut=0,Pt=et,zt===0?(_e=138,xt=3):et===zt?(_e=6,xt=3):(_e=7,xt=4))},ye=(f,B,J)=>{let St,Pt=-1,et,zt=B[1],Ut=0,_e=7,xt=4;for(zt===0&&(_e=138,xt=3),St=0;St<=J;St++)if(et=zt,zt=B[(St+1)*2+1],!(++Ut<_e&&et===zt)){if(Ut<xt)do Xe(f,et,f.bl_tree);while(--Ut!==0);else et!==0?(et!==Pt&&(Xe(f,et,f.bl_tree),Ut--),Xe(f,j,f.bl_tree),Je(f,Ut-3,2)):Ut<=10?(Xe(f,it,f.bl_tree),Je(f,Ut-3,3)):(Xe(f,ot,f.bl_tree),Je(f,Ut-11,7));Ut=0,Pt=et,zt===0?(_e=138,xt=3):et===zt?(_e=6,xt=3):(_e=7,xt=4)}},rr=f=>{let B;for(se(f,f.dyn_ltree,f.l_desc.max_code),se(f,f.dyn_dtree,f.d_desc.max_code),Z(f,f.bl_desc),B=M-1;B>=3&&f.bl_tree[pt[B]*2+1]===0;B--);return f.opt_len+=3*(B+1)+5+5+4,B},dr=(f,B,J,St)=>{let Pt;for(Je(f,B-257,5),Je(f,J-1,5),Je(f,St-4,4),Pt=0;Pt<St;Pt++)Je(f,f.bl_tree[pt[Pt]*2+1],3);ye(f,f.dyn_ltree,B-1),ye(f,f.dyn_dtree,J-1)},mr=f=>{let B=4093624447,J;for(J=0;J<=31;J++,B>>>=1)if(B&1&&f.dyn_ltree[J*2]!==0)return 0;if(f.dyn_ltree[18]!==0||f.dyn_ltree[20]!==0||f.dyn_ltree[26]!==0)return 1;for(J=32;J<y;J++)if(f.dyn_ltree[J*2]!==0)return 1;return 0},ur=!1,er=f=>{ur||(Ze(),ur=!0),f.l_desc=new He(f.dyn_ltree,ae),f.d_desc=new He(f.dyn_dtree,Le),f.bl_desc=new He(f.bl_tree,de),f.bi_buf=0,f.bi_valid=0,vr(f)},Gr=(f,B,J,St)=>{Je(f,(i<<1)+(St?1:0),3),Pr(f),Pe(f,J),Pe(f,~J),J&&f.pending_buf.set(f.window.subarray(B,B+J),f.pending),f.pending+=J},Lr=f=>{Je(f,u<<1,3),Xe(f,X,Rt),xe(f)},Br=(f,B,J,St)=>{let Pt,et,zt=0;f.level>0?(f.strm.data_type===2&&(f.strm.data_type=mr(f)),Z(f,f.l_desc),Z(f,f.d_desc),zt=rr(f),Pt=f.opt_len+3+7>>>3,et=f.static_len+3+7>>>3,et<=Pt&&(Pt=et)):Pt=et=J+5,J+4<=Pt&&B!==-1?Gr(f,B,J,St):f.strategy===4||et===Pt?(Je(f,(u<<1)+(St?1:0),3),k(f,Rt,Et)):(Je(f,(p<<1)+(St?1:0),3),dr(f,f.l_desc.max_code+1,f.d_desc.max_code+1,zt+1),k(f,f.dyn_ltree,f.dyn_dtree)),vr(f),St&&Pr(f)},N=(f,B,J)=>(f.pending_buf[f.sym_buf+f.sym_next++]=B,f.pending_buf[f.sym_buf+f.sym_next++]=B>>8,f.pending_buf[f.sym_buf+f.sym_next++]=J,B===0?f.dyn_ltree[J*2]++:(f.matches++,B--,f.dyn_ltree[(Ft[J]+y+1)*2]++,f.dyn_dtree[ze(B)*2]++),f.sym_next===f.sym_end);r.exports._tr_init=er,r.exports._tr_stored_block=Gr,r.exports._tr_flush_block=Br,r.exports._tr_tally=N,r.exports._tr_align=Lr}),_v=ce((t,r)=>{"use strict";var n=(i,u,p,g)=>{let m=i&65535|0,A=i>>>16&65535|0,y=0;for(;p!==0;){y=p>2e3?2e3:p,p-=y;do m=m+u[g++]|0,A=A+m|0;while(--y);m%=65521,A%=65521}return m|A<<16|0};r.exports=n}),Cv=ce((t,r)=>{"use strict";var n=()=>{let p,g=[];for(var m=0;m<256;m++){p=m;for(var A=0;A<8;A++)p=p&1?3988292384^p>>>1:p>>>1;g[m]=p}return g},i=new Uint32Array(n()),u=(p,g,m,A)=>{let y=i,D=A+m;p^=-1;for(let o=A;o<D;o++)p=p>>>8^y[(p^g[o])&255];return p^-1};r.exports=u}),ip=ce((t,r)=>{"use strict";r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}}),ro=ce((t,r)=>{"use strict";r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}}),ND=ce((t,r)=>{"use strict";var{_tr_init:n,_tr_stored_block:i,_tr_flush_block:u,_tr_tally:p,_tr_align:g}=bD(),m=_v(),A=Cv(),y=ip(),{Z_NO_FLUSH:D,Z_PARTIAL_FLUSH:o,Z_FULL_FLUSH:M,Z_FINISH:W,Z_BLOCK:w,Z_OK:U,Z_STREAM_END:nt,Z_STREAM_ERROR:X,Z_DATA_ERROR:j,Z_BUF_ERROR:it,Z_DEFAULT_COMPRESSION:ot,Z_FILTERED:K,Z_HUFFMAN_ONLY:H,Z_RLE:q,Z_FIXED:pt,Z_DEFAULT_STRATEGY:yt,Z_UNKNOWN:Rt,Z_DEFLATED:Et}=ro(),vt=9,Ft=15,Xt=8,ee=29,ne=256,ae=ne+1+ee,Le=30,de=19,He=2*ae+1,ze=15,Pe=3,Je=258,Xe=Je+Pe+1,Ae=32,xe=42,Qe=57,Ve=69,Ze=73,vr=91,Pr=103,Dr=113,Q=666,k=1,Z=2,se=3,ye=4,rr=3,dr=(O,le)=>(O.msg=y[le],le),mr=O=>O*2-(O>4?9:0),ur=O=>{let le=O.length;for(;--le>=0;)O[le]=0},er=O=>{let le,qt,pe,$t=O.w_size;le=O.hash_size,pe=le;do qt=O.head[--pe],O.head[pe]=qt>=$t?qt-$t:0;while(--le);le=$t,pe=le;do qt=O.prev[--pe],O.prev[pe]=qt>=$t?qt-$t:0;while(--le)},Gr=(O,le,qt)=>(le<<O.hash_shift^qt)&O.hash_mask,Lr=Gr,Br=O=>{let le=O.state,qt=le.pending;qt>O.avail_out&&(qt=O.avail_out),qt!==0&&(O.output.set(le.pending_buf.subarray(le.pending_out,le.pending_out+qt),O.next_out),O.next_out+=qt,le.pending_out+=qt,O.total_out+=qt,O.avail_out-=qt,le.pending-=qt,le.pending===0&&(le.pending_out=0))},N=(O,le)=>{u(O,O.block_start>=0?O.block_start:-1,O.strstart-O.block_start,le),O.block_start=O.strstart,Br(O.strm)},f=(O,le)=>{O.pending_buf[O.pending++]=le},B=(O,le)=>{O.pending_buf[O.pending++]=le>>>8&255,O.pending_buf[O.pending++]=le&255},J=(O,le,qt,pe)=>{let $t=O.avail_in;return $t>pe&&($t=pe),$t===0?0:(O.avail_in-=$t,le.set(O.input.subarray(O.next_in,O.next_in+$t),qt),O.state.wrap===1?O.adler=m(O.adler,le,$t,qt):O.state.wrap===2&&(O.adler=A(O.adler,le,$t,qt)),O.next_in+=$t,O.total_in+=$t,$t)},St=(O,le)=>{let qt=O.max_chain_length,pe=O.strstart,$t,re,Re=O.prev_length,De=O.nice_match,ke=O.strstart>O.w_size-Xe?O.strstart-(O.w_size-Xe):0,Ne=O.window,tr=O.w_mask,lr=O.prev,or=O.strstart+Je,Ar=Ne[pe+Re-1],jr=Ne[pe+Re];O.prev_length>=O.good_match&&(qt>>=2),De>O.lookahead&&(De=O.lookahead);do if($t=le,!(Ne[$t+Re]!==jr||Ne[$t+Re-1]!==Ar||Ne[$t]!==Ne[pe]||Ne[++$t]!==Ne[pe+1])){pe+=2,$t++;do;while(Ne[++pe]===Ne[++$t]&&Ne[++pe]===Ne[++$t]&&Ne[++pe]===Ne[++$t]&&Ne[++pe]===Ne[++$t]&&Ne[++pe]===Ne[++$t]&&Ne[++pe]===Ne[++$t]&&Ne[++pe]===Ne[++$t]&&Ne[++pe]===Ne[++$t]&&pe<or);if(re=Je-(or-pe),pe=or-Je,re>Re){if(O.match_start=le,Re=re,re>=De)break;Ar=Ne[pe+Re-1],jr=Ne[pe+Re]}}while((le=lr[le&tr])>ke&&--qt!==0);return Re<=O.lookahead?Re:O.lookahead},Pt=O=>{let le=O.w_size,qt,pe,$t;do{if(pe=O.window_size-O.lookahead-O.strstart,O.strstart>=le+(le-Xe)&&(O.window.set(O.window.subarray(le,le+le-pe),0),O.match_start-=le,O.strstart-=le,O.block_start-=le,O.insert>O.strstart&&(O.insert=O.strstart),er(O),pe+=le),O.strm.avail_in===0)break;if(qt=J(O.strm,O.window,O.strstart+O.lookahead,pe),O.lookahead+=qt,O.lookahead+O.insert>=Pe)for($t=O.strstart-O.insert,O.ins_h=O.window[$t],O.ins_h=Lr(O,O.ins_h,O.window[$t+1]);O.insert&&(O.ins_h=Lr(O,O.ins_h,O.window[$t+Pe-1]),O.prev[$t&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=$t,$t++,O.insert--,!(O.lookahead+O.insert<Pe)););}while(O.lookahead<Xe&&O.strm.avail_in!==0)},et=(O,le)=>{let qt=O.pending_buf_size-5>O.w_size?O.w_size:O.pending_buf_size-5,pe,$t,re,Re=0,De=O.strm.avail_in;do{if(pe=65535,re=O.bi_valid+42>>3,O.strm.avail_out<re||(re=O.strm.avail_out-re,$t=O.strstart-O.block_start,pe>$t+O.strm.avail_in&&(pe=$t+O.strm.avail_in),pe>re&&(pe=re),pe<qt&&(pe===0&&le!==W||le===D||pe!==$t+O.strm.avail_in)))break;Re=le===W&&pe===$t+O.strm.avail_in?1:0,i(O,0,0,Re),O.pending_buf[O.pending-4]=pe,O.pending_buf[O.pending-3]=pe>>8,O.pending_buf[O.pending-2]=~pe,O.pending_buf[O.pending-1]=~pe>>8,Br(O.strm),$t&&($t>pe&&($t=pe),O.strm.output.set(O.window.subarray(O.block_start,O.block_start+$t),O.strm.next_out),O.strm.next_out+=$t,O.strm.avail_out-=$t,O.strm.total_out+=$t,O.block_start+=$t,pe-=$t),pe&&(J(O.strm,O.strm.output,O.strm.next_out,pe),O.strm.next_out+=pe,O.strm.avail_out-=pe,O.strm.total_out+=pe)}while(Re===0);return De-=O.strm.avail_in,De&&(De>=O.w_size?(O.matches=2,O.window.set(O.strm.input.subarray(O.strm.next_in-O.w_size,O.strm.next_in),0),O.strstart=O.w_size,O.insert=O.strstart):(O.window_size-O.strstart<=De&&(O.strstart-=O.w_size,O.window.set(O.window.subarray(O.w_size,O.w_size+O.strstart),0),O.matches<2&&O.matches++,O.insert>O.strstart&&(O.insert=O.strstart)),O.window.set(O.strm.input.subarray(O.strm.next_in-De,O.strm.next_in),O.strstart),O.strstart+=De,O.insert+=De>O.w_size-O.insert?O.w_size-O.insert:De),O.block_start=O.strstart),O.high_water<O.strstart&&(O.high_water=O.strstart),Re?ye:le!==D&&le!==W&&O.strm.avail_in===0&&O.strstart===O.block_start?Z:(re=O.window_size-O.strstart,O.strm.avail_in>re&&O.block_start>=O.w_size&&(O.block_start-=O.w_size,O.strstart-=O.w_size,O.window.set(O.window.subarray(O.w_size,O.w_size+O.strstart),0),O.matches<2&&O.matches++,re+=O.w_size,O.insert>O.strstart&&(O.insert=O.strstart)),re>O.strm.avail_in&&(re=O.strm.avail_in),re&&(J(O.strm,O.window,O.strstart,re),O.strstart+=re,O.insert+=re>O.w_size-O.insert?O.w_size-O.insert:re),O.high_water<O.strstart&&(O.high_water=O.strstart),re=O.bi_valid+42>>3,re=O.pending_buf_size-re>65535?65535:O.pending_buf_size-re,qt=re>O.w_size?O.w_size:re,$t=O.strstart-O.block_start,($t>=qt||($t||le===W)&&le!==D&&O.strm.avail_in===0&&$t<=re)&&(pe=$t>re?re:$t,Re=le===W&&O.strm.avail_in===0&&pe===$t?1:0,i(O,O.block_start,pe,Re),O.block_start+=pe,Br(O.strm)),Re?se:k)},zt=(O,le)=>{let qt,pe;for(;;){if(O.lookahead<Xe){if(Pt(O),O.lookahead<Xe&&le===D)return k;if(O.lookahead===0)break}if(qt=0,O.lookahead>=Pe&&(O.ins_h=Lr(O,O.ins_h,O.window[O.strstart+Pe-1]),qt=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),qt!==0&&O.strstart-qt<=O.w_size-Xe&&(O.match_length=St(O,qt)),O.match_length>=Pe)if(pe=p(O,O.strstart-O.match_start,O.match_length-Pe),O.lookahead-=O.match_length,O.match_length<=O.max_lazy_match&&O.lookahead>=Pe){O.match_length--;do O.strstart++,O.ins_h=Lr(O,O.ins_h,O.window[O.strstart+Pe-1]),qt=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart;while(--O.match_length!==0);O.strstart++}else O.strstart+=O.match_length,O.match_length=0,O.ins_h=O.window[O.strstart],O.ins_h=Lr(O,O.ins_h,O.window[O.strstart+1]);else pe=p(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++;if(pe&&(N(O,!1),O.strm.avail_out===0))return k}return O.insert=O.strstart<Pe-1?O.strstart:Pe-1,le===W?(N(O,!0),O.strm.avail_out===0?se:ye):O.sym_next&&(N(O,!1),O.strm.avail_out===0)?k:Z},Ut=(O,le)=>{let qt,pe,$t;for(;;){if(O.lookahead<Xe){if(Pt(O),O.lookahead<Xe&&le===D)return k;if(O.lookahead===0)break}if(qt=0,O.lookahead>=Pe&&(O.ins_h=Lr(O,O.ins_h,O.window[O.strstart+Pe-1]),qt=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),O.prev_length=O.match_length,O.prev_match=O.match_start,O.match_length=Pe-1,qt!==0&&O.prev_length<O.max_lazy_match&&O.strstart-qt<=O.w_size-Xe&&(O.match_length=St(O,qt),O.match_length<=5&&(O.strategy===K||O.match_length===Pe&&O.strstart-O.match_start>4096)&&(O.match_length=Pe-1)),O.prev_length>=Pe&&O.match_length<=O.prev_length){$t=O.strstart+O.lookahead-Pe,pe=p(O,O.strstart-1-O.prev_match,O.prev_length-Pe),O.lookahead-=O.prev_length-1,O.prev_length-=2;do++O.strstart<=$t&&(O.ins_h=Lr(O,O.ins_h,O.window[O.strstart+Pe-1]),qt=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart);while(--O.prev_length!==0);if(O.match_available=0,O.match_length=Pe-1,O.strstart++,pe&&(N(O,!1),O.strm.avail_out===0))return k}else if(O.match_available){if(pe=p(O,0,O.window[O.strstart-1]),pe&&N(O,!1),O.strstart++,O.lookahead--,O.strm.avail_out===0)return k}else O.match_available=1,O.strstart++,O.lookahead--}return O.match_available&&(pe=p(O,0,O.window[O.strstart-1]),O.match_available=0),O.insert=O.strstart<Pe-1?O.strstart:Pe-1,le===W?(N(O,!0),O.strm.avail_out===0?se:ye):O.sym_next&&(N(O,!1),O.strm.avail_out===0)?k:Z},_e=(O,le)=>{let qt,pe,$t,re,Re=O.window;for(;;){if(O.lookahead<=Je){if(Pt(O),O.lookahead<=Je&&le===D)return k;if(O.lookahead===0)break}if(O.match_length=0,O.lookahead>=Pe&&O.strstart>0&&($t=O.strstart-1,pe=Re[$t],pe===Re[++$t]&&pe===Re[++$t]&&pe===Re[++$t])){re=O.strstart+Je;do;while(pe===Re[++$t]&&pe===Re[++$t]&&pe===Re[++$t]&&pe===Re[++$t]&&pe===Re[++$t]&&pe===Re[++$t]&&pe===Re[++$t]&&pe===Re[++$t]&&$t<re);O.match_length=Je-(re-$t),O.match_length>O.lookahead&&(O.match_length=O.lookahead)}if(O.match_length>=Pe?(qt=p(O,1,O.match_length-Pe),O.lookahead-=O.match_length,O.strstart+=O.match_length,O.match_length=0):(qt=p(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++),qt&&(N(O,!1),O.strm.avail_out===0))return k}return O.insert=0,le===W?(N(O,!0),O.strm.avail_out===0?se:ye):O.sym_next&&(N(O,!1),O.strm.avail_out===0)?k:Z},xt=(O,le)=>{let qt;for(;;){if(O.lookahead===0&&(Pt(O),O.lookahead===0)){if(le===D)return k;break}if(O.match_length=0,qt=p(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++,qt&&(N(O,!1),O.strm.avail_out===0))return k}return O.insert=0,le===W?(N(O,!0),O.strm.avail_out===0?se:ye):O.sym_next&&(N(O,!1),O.strm.avail_out===0)?k:Z};function dt(O,le,qt,pe,$t){this.good_length=O,this.max_lazy=le,this.nice_length=qt,this.max_chain=pe,this.func=$t}var tt=[new dt(0,0,0,0,et),new dt(4,4,8,4,zt),new dt(4,5,16,8,zt),new dt(4,6,32,32,zt),new dt(4,4,16,16,Ut),new dt(8,16,32,32,Ut),new dt(8,16,128,128,Ut),new dt(8,32,128,256,Ut),new dt(32,128,258,1024,Ut),new dt(32,258,258,4096,Ut)],F=O=>{O.window_size=2*O.w_size,ur(O.head),O.max_lazy_match=tt[O.level].max_lazy,O.good_match=tt[O.level].good_length,O.nice_match=tt[O.level].nice_length,O.max_chain_length=tt[O.level].max_chain,O.strstart=0,O.block_start=0,O.lookahead=0,O.insert=0,O.match_length=O.prev_length=Pe-1,O.match_available=0,O.ins_h=0};function rt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Et,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(He*2),this.dyn_dtree=new Uint16Array((2*Le+1)*2),this.bl_tree=new Uint16Array((2*de+1)*2),ur(this.dyn_ltree),ur(this.dyn_dtree),ur(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(ze+1),this.heap=new Uint16Array(2*ae+1),ur(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*ae+1),ur(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var At=O=>{if(!O)return 1;let le=O.state;return!le||le.strm!==O||le.status!==xe&&le.status!==Qe&&le.status!==Ve&&le.status!==Ze&&le.status!==vr&&le.status!==Pr&&le.status!==Dr&&le.status!==Q?1:0},Ct=O=>{if(At(O))return dr(O,X);O.total_in=O.total_out=0,O.data_type=Rt;let le=O.state;return le.pending=0,le.pending_out=0,le.wrap<0&&(le.wrap=-le.wrap),le.status=le.wrap===2?Qe:le.wrap?xe:Dr,O.adler=le.wrap===2?0:1,le.last_flush=-2,n(le),U},Nt=O=>{let le=Ct(O);return le===U&&F(O.state),le},Yt=(O,le)=>At(O)||O.state.wrap!==2?X:(O.state.gzhead=le,U),Ce=(O,le,qt,pe,$t,re)=>{if(!O)return X;let Re=1;if(le===ot&&(le=6),pe<0?(Re=0,pe=-pe):pe>15&&(Re=2,pe-=16),$t<1||$t>vt||qt!==Et||pe<8||pe>15||le<0||le>9||re<0||re>pt||pe===8&&Re!==1)return dr(O,X);pe===8&&(pe=9);let De=new rt;return O.state=De,De.strm=O,De.status=xe,De.wrap=Re,De.gzhead=null,De.w_bits=pe,De.w_size=1<<De.w_bits,De.w_mask=De.w_size-1,De.hash_bits=$t+7,De.hash_size=1<<De.hash_bits,De.hash_mask=De.hash_size-1,De.hash_shift=~~((De.hash_bits+Pe-1)/Pe),De.window=new Uint8Array(De.w_size*2),De.head=new Uint16Array(De.hash_size),De.prev=new Uint16Array(De.w_size),De.lit_bufsize=1<<$t+6,De.pending_buf_size=De.lit_bufsize*4,De.pending_buf=new Uint8Array(De.pending_buf_size),De.sym_buf=De.lit_bufsize,De.sym_end=(De.lit_bufsize-1)*3,De.level=le,De.strategy=re,De.method=qt,Nt(O)},Qt=(O,le)=>Ce(O,le,Et,Ft,Xt,yt),Ee=(O,le)=>{if(At(O)||le>w||le<0)return O?dr(O,X):X;let qt=O.state;if(!O.output||O.avail_in!==0&&!O.input||qt.status===Q&&le!==W)return dr(O,O.avail_out===0?it:X);let pe=qt.last_flush;if(qt.last_flush=le,qt.pending!==0){if(Br(O),O.avail_out===0)return qt.last_flush=-1,U}else if(O.avail_in===0&&mr(le)<=mr(pe)&&le!==W)return dr(O,it);if(qt.status===Q&&O.avail_in!==0)return dr(O,it);if(qt.status===xe&&qt.wrap===0&&(qt.status=Dr),qt.status===xe){let $t=Et+(qt.w_bits-8<<4)<<8,re=-1;if(qt.strategy>=H||qt.level<2?re=0:qt.level<6?re=1:qt.level===6?re=2:re=3,$t|=re<<6,qt.strstart!==0&&($t|=Ae),$t+=31-$t%31,B(qt,$t),qt.strstart!==0&&(B(qt,O.adler>>>16),B(qt,O.adler&65535)),O.adler=1,qt.status=Dr,Br(O),qt.pending!==0)return qt.last_flush=-1,U}if(qt.status===Qe){if(O.adler=0,f(qt,31),f(qt,139),f(qt,8),qt.gzhead)f(qt,(qt.gzhead.text?1:0)+(qt.gzhead.hcrc?2:0)+(qt.gzhead.extra?4:0)+(qt.gzhead.name?8:0)+(qt.gzhead.comment?16:0)),f(qt,qt.gzhead.time&255),f(qt,qt.gzhead.time>>8&255),f(qt,qt.gzhead.time>>16&255),f(qt,qt.gzhead.time>>24&255),f(qt,qt.level===9?2:qt.strategy>=H||qt.level<2?4:0),f(qt,qt.gzhead.os&255),qt.gzhead.extra&&qt.gzhead.extra.length&&(f(qt,qt.gzhead.extra.length&255),f(qt,qt.gzhead.extra.length>>8&255)),qt.gzhead.hcrc&&(O.adler=A(O.adler,qt.pending_buf,qt.pending,0)),qt.gzindex=0,qt.status=Ve;else if(f(qt,0),f(qt,0),f(qt,0),f(qt,0),f(qt,0),f(qt,qt.level===9?2:qt.strategy>=H||qt.level<2?4:0),f(qt,rr),qt.status=Dr,Br(O),qt.pending!==0)return qt.last_flush=-1,U}if(qt.status===Ve){if(qt.gzhead.extra){let $t=qt.pending,re=(qt.gzhead.extra.length&65535)-qt.gzindex;for(;qt.pending+re>qt.pending_buf_size;){let De=qt.pending_buf_size-qt.pending;if(qt.pending_buf.set(qt.gzhead.extra.subarray(qt.gzindex,qt.gzindex+De),qt.pending),qt.pending=qt.pending_buf_size,qt.gzhead.hcrc&&qt.pending>$t&&(O.adler=A(O.adler,qt.pending_buf,qt.pending-$t,$t)),qt.gzindex+=De,Br(O),qt.pending!==0)return qt.last_flush=-1,U;$t=0,re-=De}let Re=new Uint8Array(qt.gzhead.extra);qt.pending_buf.set(Re.subarray(qt.gzindex,qt.gzindex+re),qt.pending),qt.pending+=re,qt.gzhead.hcrc&&qt.pending>$t&&(O.adler=A(O.adler,qt.pending_buf,qt.pending-$t,$t)),qt.gzindex=0}qt.status=Ze}if(qt.status===Ze){if(qt.gzhead.name){let $t=qt.pending,re;do{if(qt.pending===qt.pending_buf_size){if(qt.gzhead.hcrc&&qt.pending>$t&&(O.adler=A(O.adler,qt.pending_buf,qt.pending-$t,$t)),Br(O),qt.pending!==0)return qt.last_flush=-1,U;$t=0}qt.gzindex<qt.gzhead.name.length?re=qt.gzhead.name.charCodeAt(qt.gzindex++)&255:re=0,f(qt,re)}while(re!==0);qt.gzhead.hcrc&&qt.pending>$t&&(O.adler=A(O.adler,qt.pending_buf,qt.pending-$t,$t)),qt.gzindex=0}qt.status=vr}if(qt.status===vr){if(qt.gzhead.comment){let $t=qt.pending,re;do{if(qt.pending===qt.pending_buf_size){if(qt.gzhead.hcrc&&qt.pending>$t&&(O.adler=A(O.adler,qt.pending_buf,qt.pending-$t,$t)),Br(O),qt.pending!==0)return qt.last_flush=-1,U;$t=0}qt.gzindex<qt.gzhead.comment.length?re=qt.gzhead.comment.charCodeAt(qt.gzindex++)&255:re=0,f(qt,re)}while(re!==0);qt.gzhead.hcrc&&qt.pending>$t&&(O.adler=A(O.adler,qt.pending_buf,qt.pending-$t,$t))}qt.status=Pr}if(qt.status===Pr){if(qt.gzhead.hcrc){if(qt.pending+2>qt.pending_buf_size&&(Br(O),qt.pending!==0))return qt.last_flush=-1,U;f(qt,O.adler&255),f(qt,O.adler>>8&255),O.adler=0}if(qt.status=Dr,Br(O),qt.pending!==0)return qt.last_flush=-1,U}if(O.avail_in!==0||qt.lookahead!==0||le!==D&&qt.status!==Q){let $t=qt.level===0?et(qt,le):qt.strategy===H?xt(qt,le):qt.strategy===q?_e(qt,le):tt[qt.level].func(qt,le);if(($t===se||$t===ye)&&(qt.status=Q),$t===k||$t===se)return O.avail_out===0&&(qt.last_flush=-1),U;if($t===Z&&(le===o?g(qt):le!==w&&(i(qt,0,0,!1),le===M&&(ur(qt.head),qt.lookahead===0&&(qt.strstart=0,qt.block_start=0,qt.insert=0))),Br(O),O.avail_out===0))return qt.last_flush=-1,U}return le!==W?U:qt.wrap<=0?nt:(qt.wrap===2?(f(qt,O.adler&255),f(qt,O.adler>>8&255),f(qt,O.adler>>16&255),f(qt,O.adler>>24&255),f(qt,O.total_in&255),f(qt,O.total_in>>8&255),f(qt,O.total_in>>16&255),f(qt,O.total_in>>24&255)):(B(qt,O.adler>>>16),B(qt,O.adler&65535)),Br(O),qt.wrap>0&&(qt.wrap=-qt.wrap),qt.pending!==0?U:nt)},Be=O=>{if(At(O))return X;let le=O.state.status;return O.state=null,le===Dr?dr(O,j):U},sr=(O,le)=>{let qt=le.length;if(At(O))return X;let pe=O.state,$t=pe.wrap;if($t===2||$t===1&&pe.status!==xe||pe.lookahead)return X;if($t===1&&(O.adler=m(O.adler,le,qt,0)),pe.wrap=0,qt>=pe.w_size){$t===0&&(ur(pe.head),pe.strstart=0,pe.block_start=0,pe.insert=0);let ke=new Uint8Array(pe.w_size);ke.set(le.subarray(qt-pe.w_size,qt),0),le=ke,qt=pe.w_size}let re=O.avail_in,Re=O.next_in,De=O.input;for(O.avail_in=qt,O.next_in=0,O.input=le,Pt(pe);pe.lookahead>=Pe;){let ke=pe.strstart,Ne=pe.lookahead-(Pe-1);do pe.ins_h=Lr(pe,pe.ins_h,pe.window[ke+Pe-1]),pe.prev[ke&pe.w_mask]=pe.head[pe.ins_h],pe.head[pe.ins_h]=ke,ke++;while(--Ne);pe.strstart=ke,pe.lookahead=Pe-1,Pt(pe)}return pe.strstart+=pe.lookahead,pe.block_start=pe.strstart,pe.insert=pe.lookahead,pe.lookahead=0,pe.match_length=pe.prev_length=Pe-1,pe.match_available=0,O.next_in=Re,O.input=De,O.avail_in=re,pe.wrap=$t,U};r.exports.deflateInit=Qt,r.exports.deflateInit2=Ce,r.exports.deflateReset=Nt,r.exports.deflateResetKeep=Ct,r.exports.deflateSetHeader=Yt,r.exports.deflate=Ee,r.exports.deflateEnd=Be,r.exports.deflateSetDictionary=sr,r.exports.deflateInfo="pako deflate (from Nodeca project)"}),Nv=ce((t,r)=>{"use strict";var n=(i,u)=>Object.prototype.hasOwnProperty.call(i,u);r.exports.assign=function(i){let u=Array.prototype.slice.call(arguments,1);for(;u.length;){let p=u.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(let g in p)n(p,g)&&(i[g]=p[g])}}return i},r.exports.flattenChunks=i=>{let u=0;for(let g=0,m=i.length;g<m;g++)u+=i[g].length;let p=new Uint8Array(u);for(let g=0,m=0,A=i.length;g<A;g++){let y=i[g];p.set(y,m),m+=y.length}return p}}),kv=ce((t,r)=>{"use strict";var n=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}var i=new Uint8Array(256);for(let p=0;p<256;p++)i[p]=p>=252?6:p>=248?5:p>=240?4:p>=224?3:p>=192?2:1;i[254]=i[254]=1,r.exports.string2buf=p=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(p);let g,m,A,y,D,o=p.length,M=0;for(y=0;y<o;y++)m=p.charCodeAt(y),(m&64512)===55296&&y+1<o&&(A=p.charCodeAt(y+1),(A&64512)===56320&&(m=65536+(m-55296<<10)+(A-56320),y++)),M+=m<128?1:m<2048?2:m<65536?3:4;for(g=new Uint8Array(M),D=0,y=0;D<M;y++)m=p.charCodeAt(y),(m&64512)===55296&&y+1<o&&(A=p.charCodeAt(y+1),(A&64512)===56320&&(m=65536+(m-55296<<10)+(A-56320),y++)),m<128?g[D++]=m:m<2048?(g[D++]=192|m>>>6,g[D++]=128|m&63):m<65536?(g[D++]=224|m>>>12,g[D++]=128|m>>>6&63,g[D++]=128|m&63):(g[D++]=240|m>>>18,g[D++]=128|m>>>12&63,g[D++]=128|m>>>6&63,g[D++]=128|m&63);return g};var u=(p,g)=>{if(g<65534&&p.subarray&&n)return String.fromCharCode.apply(null,p.length===g?p:p.subarray(0,g));let m="";for(let A=0;A<g;A++)m+=String.fromCharCode(p[A]);return m};r.exports.buf2string=(p,g)=>{let m=g||p.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(p.subarray(0,g));let A,y,D=new Array(m*2);for(y=0,A=0;A<m;){let o=p[A++];if(o<128){D[y++]=o;continue}let M=i[o];if(M>4){D[y++]=65533,A+=M-1;continue}for(o&=M===2?31:M===3?15:7;M>1&&A<m;)o=o<<6|p[A++]&63,M--;if(M>1){D[y++]=65533;continue}o<65536?D[y++]=o:(o-=65536,D[y++]=55296|o>>10&1023,D[y++]=56320|o&1023)}return u(D,y)},r.exports.utf8border=(p,g)=>{g=g||p.length,g>p.length&&(g=p.length);let m=g-1;for(;m>=0&&(p[m]&192)===128;)m--;return m<0||m===0?g:m+i[p[m]]>g?m:g}}),Lv=ce((t,r)=>{"use strict";function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}r.exports=n}),MD=ce((t,r)=>{"use strict";var n=ND(),i=Nv(),u=kv(),p=ip(),g=Lv(),m=Object.prototype.toString,{Z_NO_FLUSH:A,Z_SYNC_FLUSH:y,Z_FULL_FLUSH:D,Z_FINISH:o,Z_OK:M,Z_STREAM_END:W,Z_DEFAULT_COMPRESSION:w,Z_DEFAULT_STRATEGY:U,Z_DEFLATED:nt}=ro();function X(K){this.options=i.assign({level:w,method:nt,chunkSize:16384,windowBits:15,memLevel:8,strategy:U},K||{});let H=this.options;H.raw&&H.windowBits>0?H.windowBits=-H.windowBits:H.gzip&&H.windowBits>0&&H.windowBits<16&&(H.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new g,this.strm.avail_out=0;let q=n.deflateInit2(this.strm,H.level,H.method,H.windowBits,H.memLevel,H.strategy);if(q!==M)throw new Error(p[q]);if(H.header&&n.deflateSetHeader(this.strm,H.header),H.dictionary){let pt;if(typeof H.dictionary=="string"?pt=u.string2buf(H.dictionary):m.call(H.dictionary)==="[object ArrayBuffer]"?pt=new Uint8Array(H.dictionary):pt=H.dictionary,q=n.deflateSetDictionary(this.strm,pt),q!==M)throw new Error(p[q]);this._dict_set=!0}}X.prototype.push=function(K,H){let q=this.strm,pt=this.options.chunkSize,yt,Rt;if(this.ended)return!1;for(H===~~H?Rt=H:Rt=H===!0?o:A,typeof K=="string"?q.input=u.string2buf(K):m.call(K)==="[object ArrayBuffer]"?q.input=new Uint8Array(K):q.input=K,q.next_in=0,q.avail_in=q.input.length;;){if(q.avail_out===0&&(q.output=new Uint8Array(pt),q.next_out=0,q.avail_out=pt),(Rt===y||Rt===D)&&q.avail_out<=6){this.onData(q.output.subarray(0,q.next_out)),q.avail_out=0;continue}if(yt=n.deflate(q,Rt),yt===W)return q.next_out>0&&this.onData(q.output.subarray(0,q.next_out)),yt=n.deflateEnd(this.strm),this.onEnd(yt),this.ended=!0,yt===M;if(q.avail_out===0){this.onData(q.output);continue}if(Rt>0&&q.next_out>0){this.onData(q.output.subarray(0,q.next_out)),q.avail_out=0;continue}if(q.avail_in===0)break}return!0},X.prototype.onData=function(K){this.chunks.push(K)},X.prototype.onEnd=function(K){K===M&&(this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=K,this.msg=this.strm.msg};function j(K,H){let q=new X(H);if(q.push(K,!0),q.err)throw q.msg||p[q.err];return q.result}function it(K,H){return H=H||{},H.raw=!0,j(K,H)}function ot(K,H){return H=H||{},H.gzip=!0,j(K,H)}r.exports.Deflate=X,r.exports.deflate=j,r.exports.deflateRaw=it,r.exports.gzip=ot,r.exports.constants=ro()}),VD=ce((t,r)=>{"use strict";r.exports=function(n,i){let u,p,g,m,A,y,D,o,M,W,w,U,nt,X,j,it,ot,K,H,q,pt,yt,Rt,Et,vt=n.state;u=n.next_in,Rt=n.input,p=u+(n.avail_in-5),g=n.next_out,Et=n.output,m=g-(i-n.avail_out),A=g+(n.avail_out-257),y=vt.dmax,D=vt.wsize,o=vt.whave,M=vt.wnext,W=vt.window,w=vt.hold,U=vt.bits,nt=vt.lencode,X=vt.distcode,j=(1<<vt.lenbits)-1,it=(1<<vt.distbits)-1;t:do{U<15&&(w+=Rt[u++]<<U,U+=8,w+=Rt[u++]<<U,U+=8),ot=nt[w&j];e:for(;;){if(K=ot>>>24,w>>>=K,U-=K,K=ot>>>16&255,K===0)Et[g++]=ot&65535;else if(K&16){H=ot&65535,K&=15,K&&(U<K&&(w+=Rt[u++]<<U,U+=8),H+=w&(1<<K)-1,w>>>=K,U-=K),U<15&&(w+=Rt[u++]<<U,U+=8,w+=Rt[u++]<<U,U+=8),ot=X[w&it];r:for(;;){if(K=ot>>>24,w>>>=K,U-=K,K=ot>>>16&255,K&16){if(q=ot&65535,K&=15,U<K&&(w+=Rt[u++]<<U,U+=8,U<K&&(w+=Rt[u++]<<U,U+=8)),q+=w&(1<<K)-1,q>y){n.msg="invalid distance too far back",vt.mode=16209;break t}if(w>>>=K,U-=K,K=g-m,q>K){if(K=q-K,K>o&&vt.sane){n.msg="invalid distance too far back",vt.mode=16209;break t}if(pt=0,yt=W,M===0){if(pt+=D-K,K<H){H-=K;do Et[g++]=W[pt++];while(--K);pt=g-q,yt=Et}}else if(M<K){if(pt+=D+M-K,K-=M,K<H){H-=K;do Et[g++]=W[pt++];while(--K);if(pt=0,M<H){K=M,H-=K;do Et[g++]=W[pt++];while(--K);pt=g-q,yt=Et}}}else if(pt+=M-K,K<H){H-=K;do Et[g++]=W[pt++];while(--K);pt=g-q,yt=Et}for(;H>2;)Et[g++]=yt[pt++],Et[g++]=yt[pt++],Et[g++]=yt[pt++],H-=3;H&&(Et[g++]=yt[pt++],H>1&&(Et[g++]=yt[pt++]))}else{pt=g-q;do Et[g++]=Et[pt++],Et[g++]=Et[pt++],Et[g++]=Et[pt++],H-=3;while(H>2);H&&(Et[g++]=Et[pt++],H>1&&(Et[g++]=Et[pt++]))}}else if(K&64){n.msg="invalid distance code",vt.mode=16209;break t}else{ot=X[(ot&65535)+(w&(1<<K)-1)];continue r}break}}else if(K&64)if(K&32){vt.mode=16191;break t}else{n.msg="invalid literal/length code",vt.mode=16209;break t}else{ot=nt[(ot&65535)+(w&(1<<K)-1)];continue e}break}}while(u<p&&g<A);H=U>>3,u-=H,U-=H<<3,w&=(1<<U)-1,n.next_in=u,n.next_out=g,n.avail_in=u<p?5+(p-u):5-(u-p),n.avail_out=g<A?257+(A-g):257-(g-A),vt.hold=w,vt.bits=U}}),zD=ce((t,r)=>{"use strict";var n=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),i=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),u=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),p=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),g=(m,A,y,D,o,M,W,w)=>{let U=w.bits,nt=0,X=0,j=0,it=0,ot=0,K=0,H=0,q=0,pt=0,yt=0,Rt,Et,vt,Ft,Xt,ee=null,ne,ae=new Uint16Array(16),Le=new Uint16Array(16),de=null,He,ze,Pe;for(nt=0;nt<=15;nt++)ae[nt]=0;for(X=0;X<D;X++)ae[A[y+X]]++;for(ot=U,it=15;it>=1&&ae[it]===0;it--);if(ot>it&&(ot=it),it===0)return o[M++]=1<<24|64<<16|0,o[M++]=1<<24|64<<16|0,w.bits=1,0;for(j=1;j<it&&ae[j]===0;j++);for(ot<j&&(ot=j),q=1,nt=1;nt<=15;nt++)if(q<<=1,q-=ae[nt],q<0)return-1;if(q>0&&(m===0||it!==1))return-1;for(Le[1]=0,nt=1;nt<15;nt++)Le[nt+1]=Le[nt]+ae[nt];for(X=0;X<D;X++)A[y+X]!==0&&(W[Le[A[y+X]]++]=X);if(m===0?(ee=de=W,ne=20):m===1?(ee=n,de=i,ne=257):(ee=u,de=p,ne=0),yt=0,X=0,nt=j,Xt=M,K=ot,H=0,vt=-1,pt=1<<ot,Ft=pt-1,m===1&&pt>852||m===2&&pt>592)return 1;for(;;){He=nt-H,W[X]+1<ne?(ze=0,Pe=W[X]):W[X]>=ne?(ze=de[W[X]-ne],Pe=ee[W[X]-ne]):(ze=96,Pe=0),Rt=1<<nt-H,Et=1<<K,j=Et;do Et-=Rt,o[Xt+(yt>>H)+Et]=He<<24|ze<<16|Pe|0;while(Et!==0);for(Rt=1<<nt-1;yt&Rt;)Rt>>=1;if(Rt!==0?(yt&=Rt-1,yt+=Rt):yt=0,X++,--ae[nt]===0){if(nt===it)break;nt=A[y+W[X]]}if(nt>ot&&(yt&Ft)!==vt){for(H===0&&(H=ot),Xt+=j,K=nt-H,q=1<<K;K+H<it&&(q-=ae[K+H],!(q<=0));)K++,q<<=1;if(pt+=1<<K,m===1&&pt>852||m===2&&pt>592)return 1;vt=yt&Ft,o[vt]=ot<<24|K<<16|Xt-M|0}}return yt!==0&&(o[Xt+yt]=nt-H<<24|64<<16|0),w.bits=ot,0};r.exports=g}),S4=ce((t,r)=>{"use strict";var n=_v(),i=Cv(),u=VD(),p=zD(),g=0,m=1,A=2,{Z_FINISH:y,Z_BLOCK:D,Z_TREES:o,Z_OK:M,Z_STREAM_END:W,Z_NEED_DICT:w,Z_STREAM_ERROR:U,Z_DATA_ERROR:nt,Z_MEM_ERROR:X,Z_BUF_ERROR:j,Z_DEFLATED:it}=ro(),ot=16180,K=16181,H=16182,q=16183,pt=16184,yt=16185,Rt=16186,Et=16187,vt=16188,Ft=16189,Xt=16190,ee=16191,ne=16192,ae=16193,Le=16194,de=16195,He=16196,ze=16197,Pe=16198,Je=16199,Xe=16200,Ae=16201,xe=16202,Qe=16203,Ve=16204,Ze=16205,vr=16206,Pr=16207,Dr=16208,Q=16209,k=16210,Z=16211,se=852,ye=592,rr=15,dr=rr,mr=dt=>(dt>>>24&255)+(dt>>>8&65280)+((dt&65280)<<8)+((dt&255)<<24);function ur(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var er=dt=>{if(!dt)return 1;let tt=dt.state;return!tt||tt.strm!==dt||tt.mode<ot||tt.mode>Z?1:0},Gr=dt=>{if(er(dt))return U;let tt=dt.state;return dt.total_in=dt.total_out=tt.total=0,dt.msg="",tt.wrap&&(dt.adler=tt.wrap&1),tt.mode=ot,tt.last=0,tt.havedict=0,tt.flags=-1,tt.dmax=32768,tt.head=null,tt.hold=0,tt.bits=0,tt.lencode=tt.lendyn=new Int32Array(se),tt.distcode=tt.distdyn=new Int32Array(ye),tt.sane=1,tt.back=-1,M},Lr=dt=>{if(er(dt))return U;let tt=dt.state;return tt.wsize=0,tt.whave=0,tt.wnext=0,Gr(dt)},Br=(dt,tt)=>{let F;if(er(dt))return U;let rt=dt.state;return tt<0?(F=0,tt=-tt):(F=(tt>>4)+5,tt<48&&(tt&=15)),tt&&(tt<8||tt>15)?U:(rt.window!==null&&rt.wbits!==tt&&(rt.window=null),rt.wrap=F,rt.wbits=tt,Lr(dt))},N=(dt,tt)=>{if(!dt)return U;let F=new ur;dt.state=F,F.strm=dt,F.window=null,F.mode=ot;let rt=Br(dt,tt);return rt!==M&&(dt.state=null),rt},f=dt=>N(dt,dr),B=!0,J,St,Pt=dt=>{if(B){J=new Int32Array(512),St=new Int32Array(32);let tt=0;for(;tt<144;)dt.lens[tt++]=8;for(;tt<256;)dt.lens[tt++]=9;for(;tt<280;)dt.lens[tt++]=7;for(;tt<288;)dt.lens[tt++]=8;for(p(m,dt.lens,0,288,J,0,dt.work,{bits:9}),tt=0;tt<32;)dt.lens[tt++]=5;p(A,dt.lens,0,32,St,0,dt.work,{bits:5}),B=!1}dt.lencode=J,dt.lenbits=9,dt.distcode=St,dt.distbits=5},et=(dt,tt,F,rt)=>{let At,Ct=dt.state;return Ct.window===null&&(Ct.wsize=1<<Ct.wbits,Ct.wnext=0,Ct.whave=0,Ct.window=new Uint8Array(Ct.wsize)),rt>=Ct.wsize?(Ct.window.set(tt.subarray(F-Ct.wsize,F),0),Ct.wnext=0,Ct.whave=Ct.wsize):(At=Ct.wsize-Ct.wnext,At>rt&&(At=rt),Ct.window.set(tt.subarray(F-rt,F-rt+At),Ct.wnext),rt-=At,rt?(Ct.window.set(tt.subarray(F-rt,F),0),Ct.wnext=rt,Ct.whave=Ct.wsize):(Ct.wnext+=At,Ct.wnext===Ct.wsize&&(Ct.wnext=0),Ct.whave<Ct.wsize&&(Ct.whave+=At))),0},zt=(dt,tt)=>{let F,rt,At,Ct,Nt,Yt,Ce,Qt,Ee,Be,sr,O,le,qt,pe=0,$t,re,Re,De,ke,Ne,tr,lr,or=new Uint8Array(4),Ar,jr,ln=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(er(dt)||!dt.output||!dt.input&&dt.avail_in!==0)return U;F=dt.state,F.mode===ee&&(F.mode=ne),Nt=dt.next_out,At=dt.output,Ce=dt.avail_out,Ct=dt.next_in,rt=dt.input,Yt=dt.avail_in,Qt=F.hold,Ee=F.bits,Be=Yt,sr=Ce,lr=M;t:for(;;)switch(F.mode){case ot:if(F.wrap===0){F.mode=ne;break}for(;Ee<16;){if(Yt===0)break t;Yt--,Qt+=rt[Ct++]<<Ee,Ee+=8}if(F.wrap&2&&Qt===35615){F.wbits===0&&(F.wbits=15),F.check=0,or[0]=Qt&255,or[1]=Qt>>>8&255,F.check=i(F.check,or,2,0),Qt=0,Ee=0,F.mode=K;break}if(F.head&&(F.head.done=!1),!(F.wrap&1)||(((Qt&255)<<8)+(Qt>>8))%31){dt.msg="incorrect header check",F.mode=Q;break}if((Qt&15)!==it){dt.msg="unknown compression method",F.mode=Q;break}if(Qt>>>=4,Ee-=4,tr=(Qt&15)+8,F.wbits===0&&(F.wbits=tr),tr>15||tr>F.wbits){dt.msg="invalid window size",F.mode=Q;break}F.dmax=1<<F.wbits,F.flags=0,dt.adler=F.check=1,F.mode=Qt&512?Ft:ee,Qt=0,Ee=0;break;case K:for(;Ee<16;){if(Yt===0)break t;Yt--,Qt+=rt[Ct++]<<Ee,Ee+=8}if(F.flags=Qt,(F.flags&255)!==it){dt.msg="unknown compression method",F.mode=Q;break}if(F.flags&57344){dt.msg="unknown header flags set",F.mode=Q;break}F.head&&(F.head.text=Qt>>8&1),F.flags&512&&F.wrap&4&&(or[0]=Qt&255,or[1]=Qt>>>8&255,F.check=i(F.check,or,2,0)),Qt=0,Ee=0,F.mode=H;case H:for(;Ee<32;){if(Yt===0)break t;Yt--,Qt+=rt[Ct++]<<Ee,Ee+=8}F.head&&(F.head.time=Qt),F.flags&512&&F.wrap&4&&(or[0]=Qt&255,or[1]=Qt>>>8&255,or[2]=Qt>>>16&255,or[3]=Qt>>>24&255,F.check=i(F.check,or,4,0)),Qt=0,Ee=0,F.mode=q;case q:for(;Ee<16;){if(Yt===0)break t;Yt--,Qt+=rt[Ct++]<<Ee,Ee+=8}F.head&&(F.head.xflags=Qt&255,F.head.os=Qt>>8),F.flags&512&&F.wrap&4&&(or[0]=Qt&255,or[1]=Qt>>>8&255,F.check=i(F.check,or,2,0)),Qt=0,Ee=0,F.mode=pt;case pt:if(F.flags&1024){for(;Ee<16;){if(Yt===0)break t;Yt--,Qt+=rt[Ct++]<<Ee,Ee+=8}F.length=Qt,F.head&&(F.head.extra_len=Qt),F.flags&512&&F.wrap&4&&(or[0]=Qt&255,or[1]=Qt>>>8&255,F.check=i(F.check,or,2,0)),Qt=0,Ee=0}else F.head&&(F.head.extra=null);F.mode=yt;case yt:if(F.flags&1024&&(O=F.length,O>Yt&&(O=Yt),O&&(F.head&&(tr=F.head.extra_len-F.length,F.head.extra||(F.head.extra=new Uint8Array(F.head.extra_len)),F.head.extra.set(rt.subarray(Ct,Ct+O),tr)),F.flags&512&&F.wrap&4&&(F.check=i(F.check,rt,O,Ct)),Yt-=O,Ct+=O,F.length-=O),F.length))break t;F.length=0,F.mode=Rt;case Rt:if(F.flags&2048){if(Yt===0)break t;O=0;do tr=rt[Ct+O++],F.head&&tr&&F.length<65536&&(F.head.name+=String.fromCharCode(tr));while(tr&&O<Yt);if(F.flags&512&&F.wrap&4&&(F.check=i(F.check,rt,O,Ct)),Yt-=O,Ct+=O,tr)break t}else F.head&&(F.head.name=null);F.length=0,F.mode=Et;case Et:if(F.flags&4096){if(Yt===0)break t;O=0;do tr=rt[Ct+O++],F.head&&tr&&F.length<65536&&(F.head.comment+=String.fromCharCode(tr));while(tr&&O<Yt);if(F.flags&512&&F.wrap&4&&(F.check=i(F.check,rt,O,Ct)),Yt-=O,Ct+=O,tr)break t}else F.head&&(F.head.comment=null);F.mode=vt;case vt:if(F.flags&512){for(;Ee<16;){if(Yt===0)break t;Yt--,Qt+=rt[Ct++]<<Ee,Ee+=8}if(F.wrap&4&&Qt!==(F.check&65535)){dt.msg="header crc mismatch",F.mode=Q;break}Qt=0,Ee=0}F.head&&(F.head.hcrc=F.flags>>9&1,F.head.done=!0),dt.adler=F.check=0,F.mode=ee;break;case Ft:for(;Ee<32;){if(Yt===0)break t;Yt--,Qt+=rt[Ct++]<<Ee,Ee+=8}dt.adler=F.check=mr(Qt),Qt=0,Ee=0,F.mode=Xt;case Xt:if(F.havedict===0)return dt.next_out=Nt,dt.avail_out=Ce,dt.next_in=Ct,dt.avail_in=Yt,F.hold=Qt,F.bits=Ee,w;dt.adler=F.check=1,F.mode=ee;case ee:if(tt===D||tt===o)break t;case ne:if(F.last){Qt>>>=Ee&7,Ee-=Ee&7,F.mode=vr;break}for(;Ee<3;){if(Yt===0)break t;Yt--,Qt+=rt[Ct++]<<Ee,Ee+=8}switch(F.last=Qt&1,Qt>>>=1,Ee-=1,Qt&3){case 0:F.mode=ae;break;case 1:if(Pt(F),F.mode=Je,tt===o){Qt>>>=2,Ee-=2;break t}break;case 2:F.mode=He;break;case 3:dt.msg="invalid block type",F.mode=Q}Qt>>>=2,Ee-=2;break;case ae:for(Qt>>>=Ee&7,Ee-=Ee&7;Ee<32;){if(Yt===0)break t;Yt--,Qt+=rt[Ct++]<<Ee,Ee+=8}if((Qt&65535)!==(Qt>>>16^65535)){dt.msg="invalid stored block lengths",F.mode=Q;break}if(F.length=Qt&65535,Qt=0,Ee=0,F.mode=Le,tt===o)break t;case Le:F.mode=de;case de:if(O=F.length,O){if(O>Yt&&(O=Yt),O>Ce&&(O=Ce),O===0)break t;At.set(rt.subarray(Ct,Ct+O),Nt),Yt-=O,Ct+=O,Ce-=O,Nt+=O,F.length-=O;break}F.mode=ee;break;case He:for(;Ee<14;){if(Yt===0)break t;Yt--,Qt+=rt[Ct++]<<Ee,Ee+=8}if(F.nlen=(Qt&31)+257,Qt>>>=5,Ee-=5,F.ndist=(Qt&31)+1,Qt>>>=5,Ee-=5,F.ncode=(Qt&15)+4,Qt>>>=4,Ee-=4,F.nlen>286||F.ndist>30){dt.msg="too many length or distance symbols",F.mode=Q;break}F.have=0,F.mode=ze;case ze:for(;F.have<F.ncode;){for(;Ee<3;){if(Yt===0)break t;Yt--,Qt+=rt[Ct++]<<Ee,Ee+=8}F.lens[ln[F.have++]]=Qt&7,Qt>>>=3,Ee-=3}for(;F.have<19;)F.lens[ln[F.have++]]=0;if(F.lencode=F.lendyn,F.lenbits=7,Ar={bits:F.lenbits},lr=p(g,F.lens,0,19,F.lencode,0,F.work,Ar),F.lenbits=Ar.bits,lr){dt.msg="invalid code lengths set",F.mode=Q;break}F.have=0,F.mode=Pe;case Pe:for(;F.have<F.nlen+F.ndist;){for(;pe=F.lencode[Qt&(1<<F.lenbits)-1],$t=pe>>>24,re=pe>>>16&255,Re=pe&65535,!($t<=Ee);){if(Yt===0)break t;Yt--,Qt+=rt[Ct++]<<Ee,Ee+=8}if(Re<16)Qt>>>=$t,Ee-=$t,F.lens[F.have++]=Re;else{if(Re===16){for(jr=$t+2;Ee<jr;){if(Yt===0)break t;Yt--,Qt+=rt[Ct++]<<Ee,Ee+=8}if(Qt>>>=$t,Ee-=$t,F.have===0){dt.msg="invalid bit length repeat",F.mode=Q;break}tr=F.lens[F.have-1],O=3+(Qt&3),Qt>>>=2,Ee-=2}else if(Re===17){for(jr=$t+3;Ee<jr;){if(Yt===0)break t;Yt--,Qt+=rt[Ct++]<<Ee,Ee+=8}Qt>>>=$t,Ee-=$t,tr=0,O=3+(Qt&7),Qt>>>=3,Ee-=3}else{for(jr=$t+7;Ee<jr;){if(Yt===0)break t;Yt--,Qt+=rt[Ct++]<<Ee,Ee+=8}Qt>>>=$t,Ee-=$t,tr=0,O=11+(Qt&127),Qt>>>=7,Ee-=7}if(F.have+O>F.nlen+F.ndist){dt.msg="invalid bit length repeat",F.mode=Q;break}for(;O--;)F.lens[F.have++]=tr}}if(F.mode===Q)break;if(F.lens[256]===0){dt.msg="invalid code -- missing end-of-block",F.mode=Q;break}if(F.lenbits=9,Ar={bits:F.lenbits},lr=p(m,F.lens,0,F.nlen,F.lencode,0,F.work,Ar),F.lenbits=Ar.bits,lr){dt.msg="invalid literal/lengths set",F.mode=Q;break}if(F.distbits=6,F.distcode=F.distdyn,Ar={bits:F.distbits},lr=p(A,F.lens,F.nlen,F.ndist,F.distcode,0,F.work,Ar),F.distbits=Ar.bits,lr){dt.msg="invalid distances set",F.mode=Q;break}if(F.mode=Je,tt===o)break t;case Je:F.mode=Xe;case Xe:if(Yt>=6&&Ce>=258){dt.next_out=Nt,dt.avail_out=Ce,dt.next_in=Ct,dt.avail_in=Yt,F.hold=Qt,F.bits=Ee,u(dt,sr),Nt=dt.next_out,At=dt.output,Ce=dt.avail_out,Ct=dt.next_in,rt=dt.input,Yt=dt.avail_in,Qt=F.hold,Ee=F.bits,F.mode===ee&&(F.back=-1);break}for(F.back=0;pe=F.lencode[Qt&(1<<F.lenbits)-1],$t=pe>>>24,re=pe>>>16&255,Re=pe&65535,!($t<=Ee);){if(Yt===0)break t;Yt--,Qt+=rt[Ct++]<<Ee,Ee+=8}if(re&&!(re&240)){for(De=$t,ke=re,Ne=Re;pe=F.lencode[Ne+((Qt&(1<<De+ke)-1)>>De)],$t=pe>>>24,re=pe>>>16&255,Re=pe&65535,!(De+$t<=Ee);){if(Yt===0)break t;Yt--,Qt+=rt[Ct++]<<Ee,Ee+=8}Qt>>>=De,Ee-=De,F.back+=De}if(Qt>>>=$t,Ee-=$t,F.back+=$t,F.length=Re,re===0){F.mode=Ze;break}if(re&32){F.back=-1,F.mode=ee;break}if(re&64){dt.msg="invalid literal/length code",F.mode=Q;break}F.extra=re&15,F.mode=Ae;case Ae:if(F.extra){for(jr=F.extra;Ee<jr;){if(Yt===0)break t;Yt--,Qt+=rt[Ct++]<<Ee,Ee+=8}F.length+=Qt&(1<<F.extra)-1,Qt>>>=F.extra,Ee-=F.extra,F.back+=F.extra}F.was=F.length,F.mode=xe;case xe:for(;pe=F.distcode[Qt&(1<<F.distbits)-1],$t=pe>>>24,re=pe>>>16&255,Re=pe&65535,!($t<=Ee);){if(Yt===0)break t;Yt--,Qt+=rt[Ct++]<<Ee,Ee+=8}if(!(re&240)){for(De=$t,ke=re,Ne=Re;pe=F.distcode[Ne+((Qt&(1<<De+ke)-1)>>De)],$t=pe>>>24,re=pe>>>16&255,Re=pe&65535,!(De+$t<=Ee);){if(Yt===0)break t;Yt--,Qt+=rt[Ct++]<<Ee,Ee+=8}Qt>>>=De,Ee-=De,F.back+=De}if(Qt>>>=$t,Ee-=$t,F.back+=$t,re&64){dt.msg="invalid distance code",F.mode=Q;break}F.offset=Re,F.extra=re&15,F.mode=Qe;case Qe:if(F.extra){for(jr=F.extra;Ee<jr;){if(Yt===0)break t;Yt--,Qt+=rt[Ct++]<<Ee,Ee+=8}F.offset+=Qt&(1<<F.extra)-1,Qt>>>=F.extra,Ee-=F.extra,F.back+=F.extra}if(F.offset>F.dmax){dt.msg="invalid distance too far back",F.mode=Q;break}F.mode=Ve;case Ve:if(Ce===0)break t;if(O=sr-Ce,F.offset>O){if(O=F.offset-O,O>F.whave&&F.sane){dt.msg="invalid distance too far back",F.mode=Q;break}O>F.wnext?(O-=F.wnext,le=F.wsize-O):le=F.wnext-O,O>F.length&&(O=F.length),qt=F.window}else qt=At,le=Nt-F.offset,O=F.length;O>Ce&&(O=Ce),Ce-=O,F.length-=O;do At[Nt++]=qt[le++];while(--O);F.length===0&&(F.mode=Xe);break;case Ze:if(Ce===0)break t;At[Nt++]=F.length,Ce--,F.mode=Xe;break;case vr:if(F.wrap){for(;Ee<32;){if(Yt===0)break t;Yt--,Qt|=rt[Ct++]<<Ee,Ee+=8}if(sr-=Ce,dt.total_out+=sr,F.total+=sr,F.wrap&4&&sr&&(dt.adler=F.check=F.flags?i(F.check,At,sr,Nt-sr):n(F.check,At,sr,Nt-sr)),sr=Ce,F.wrap&4&&(F.flags?Qt:mr(Qt))!==F.check){dt.msg="incorrect data check",F.mode=Q;break}Qt=0,Ee=0}F.mode=Pr;case Pr:if(F.wrap&&F.flags){for(;Ee<32;){if(Yt===0)break t;Yt--,Qt+=rt[Ct++]<<Ee,Ee+=8}if(F.wrap&4&&Qt!==(F.total&4294967295)){dt.msg="incorrect length check",F.mode=Q;break}Qt=0,Ee=0}F.mode=Dr;case Dr:lr=W;break t;case Q:lr=nt;break t;case k:return X;case Z:default:return U}return dt.next_out=Nt,dt.avail_out=Ce,dt.next_in=Ct,dt.avail_in=Yt,F.hold=Qt,F.bits=Ee,(F.wsize||sr!==dt.avail_out&&F.mode<Q&&(F.mode<vr||tt!==y))&&et(dt,dt.output,dt.next_out,sr-dt.avail_out)?(F.mode=k,X):(Be-=dt.avail_in,sr-=dt.avail_out,dt.total_in+=Be,dt.total_out+=sr,F.total+=sr,F.wrap&4&&sr&&(dt.adler=F.check=F.flags?i(F.check,At,sr,dt.next_out-sr):n(F.check,At,sr,dt.next_out-sr)),dt.data_type=F.bits+(F.last?64:0)+(F.mode===ee?128:0)+(F.mode===Je||F.mode===Le?256:0),(Be===0&&sr===0||tt===y)&&lr===M&&(lr=j),lr)},Ut=dt=>{if(er(dt))return U;let tt=dt.state;return tt.window&&(tt.window=null),dt.state=null,M},_e=(dt,tt)=>{if(er(dt))return U;let F=dt.state;return F.wrap&2?(F.head=tt,tt.done=!1,M):U},xt=(dt,tt)=>{let F=tt.length,rt,At,Ct;return er(dt)||(rt=dt.state,rt.wrap!==0&&rt.mode!==Xt)?U:rt.mode===Xt&&(At=1,At=n(At,tt,F,0),At!==rt.check)?nt:(Ct=et(dt,tt,F,F),Ct?(rt.mode=k,X):(rt.havedict=1,M))};r.exports.inflateReset=Lr,r.exports.inflateReset2=Br,r.exports.inflateResetKeep=Gr,r.exports.inflateInit=f,r.exports.inflateInit2=N,r.exports.inflate=zt,r.exports.inflateEnd=Ut,r.exports.inflateGetHeader=_e,r.exports.inflateSetDictionary=xt,r.exports.inflateInfo="pako inflate (from Nodeca project)"}),B4=ce((t,r)=>{"use strict";function n(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}r.exports=n}),P4=ce((t,r)=>{"use strict";var n=S4(),i=Nv(),u=kv(),p=ip(),g=Lv(),m=B4(),A=Object.prototype.toString,{Z_NO_FLUSH:y,Z_FINISH:D,Z_OK:o,Z_STREAM_END:M,Z_NEED_DICT:W,Z_STREAM_ERROR:w,Z_DATA_ERROR:U,Z_MEM_ERROR:nt}=ro();function X(ot){this.options=i.assign({chunkSize:1024*64,windowBits:15,to:""},ot||{});let K=this.options;K.raw&&K.windowBits>=0&&K.windowBits<16&&(K.windowBits=-K.windowBits,K.windowBits===0&&(K.windowBits=-15)),K.windowBits>=0&&K.windowBits<16&&!(ot&&ot.windowBits)&&(K.windowBits+=32),K.windowBits>15&&K.windowBits<48&&(K.windowBits&15||(K.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new g,this.strm.avail_out=0;let H=n.inflateInit2(this.strm,K.windowBits);if(H!==o)throw new Error(p[H]);if(this.header=new m,n.inflateGetHeader(this.strm,this.header),K.dictionary&&(typeof K.dictionary=="string"?K.dictionary=u.string2buf(K.dictionary):A.call(K.dictionary)==="[object ArrayBuffer]"&&(K.dictionary=new Uint8Array(K.dictionary)),K.raw&&(H=n.inflateSetDictionary(this.strm,K.dictionary),H!==o)))throw new Error(p[H])}X.prototype.push=function(ot,K){let H=this.strm,q=this.options.chunkSize,pt=this.options.dictionary,yt,Rt,Et;if(this.ended)return!1;for(K===~~K?Rt=K:Rt=K===!0?D:y,A.call(ot)==="[object ArrayBuffer]"?H.input=new Uint8Array(ot):H.input=ot,H.next_in=0,H.avail_in=H.input.length;;){for(H.avail_out===0&&(H.output=new Uint8Array(q),H.next_out=0,H.avail_out=q),yt=n.inflate(H,Rt),yt===W&&pt&&(yt=n.inflateSetDictionary(H,pt),yt===o?yt=n.inflate(H,Rt):yt===U&&(yt=W));H.avail_in>0&&yt===M&&H.state.wrap>0&&ot[H.next_in]!==0;)n.inflateReset(H),yt=n.inflate(H,Rt);switch(yt){case w:case U:case W:case nt:return this.onEnd(yt),this.ended=!0,!1}if(Et=H.avail_out,H.next_out&&(H.avail_out===0||yt===M))if(this.options.to==="string"){let vt=u.utf8border(H.output,H.next_out),Ft=H.next_out-vt,Xt=u.buf2string(H.output,vt);H.next_out=Ft,H.avail_out=q-Ft,Ft&&H.output.set(H.output.subarray(vt,vt+Ft),0),this.onData(Xt)}else this.onData(H.output.length===H.next_out?H.output:H.output.subarray(0,H.next_out));if(!(yt===o&&Et===0)){if(yt===M)return yt=n.inflateEnd(this.strm),this.onEnd(yt),this.ended=!0,!0;if(H.avail_in===0)break}}return!0},X.prototype.onData=function(ot){this.chunks.push(ot)},X.prototype.onEnd=function(ot){ot===o&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=ot,this.msg=this.strm.msg};function j(ot,K){let H=new X(K);if(H.push(ot),H.err)throw H.msg||p[H.err];return H.result}function it(ot,K){return K=K||{},K.raw=!0,j(ot,K)}r.exports.Inflate=X,r.exports.inflate=j,r.exports.inflateRaw=it,r.exports.ungzip=j,r.exports.constants=ro()}),O4=ce((t,r)=>{"use strict";var{Deflate:n,deflate:i,deflateRaw:u,gzip:p}=MD(),{Inflate:g,inflate:m,inflateRaw:A,ungzip:y}=P4(),D=ro();r.exports.Deflate=n,r.exports.deflate=i,r.exports.deflateRaw=u,r.exports.gzip=p,r.exports.Inflate=g,r.exports.inflate=m,r.exports.inflateRaw=A,r.exports.ungzip=y,r.exports.constants=D}),i2=ce((t,r)=>{var n=new TextEncoder,i=new TextDecoder("utf-8");function u(j){return n.encode(j)}function p(j){return i.decode(j)}function g(j){if(typeof j!="string")throw new TypeError("value is not a string");if(!/^([0-9a-f][0-9a-f])*$/.test(j))throw new RangeError("value is not hexadecimal");return j===""?new Uint8Array(0):new Uint8Array(j.match(/../g).map(it=>parseInt(it,16)))}var m=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],A=new Array(256);for(let j=0;j<256;j++)A[j]=`${m[j>>>4&15]}${m[j&15]}`;function y(j){let it="",ot=j.byteLength;for(let K=0;K<ot;K++)it+=A[j[K]];return it}var D=class{constructor(){this.buf=new Uint8Array(16),this.offset=0}get buffer(){return this.finish(),this.buf.subarray(0,this.offset)}grow(j=0){let it=this.buf.byteLength*4;for(;it<j;)it*=2;let ot=new Uint8Array(it);return ot.set(this.buf,0),this.buf=ot,this}appendByte(j){this.offset>=this.buf.byteLength&&this.grow(),this.buf[this.offset]=j,this.offset+=1}appendUint32(j){if(!Number.isInteger(j))throw new RangeError("value is not an integer");if(j<0||j>4294967295)throw new RangeError("number out of range");let it=Math.max(1,Math.ceil((32-Math.clz32(j))/7));this.offset+it>this.buf.byteLength&&this.grow();for(let ot=0;ot<it;ot++)this.buf[this.offset+ot]=j&127|(ot===it-1?0:128),j>>>=7;return this.offset+=it,it}appendInt32(j){if(!Number.isInteger(j))throw new RangeError("value is not an integer");if(j<-2147483648||j>2147483647)throw new RangeError("number out of range");let it=Math.ceil((33-Math.clz32(j>=0?j:-j-1))/7);this.offset+it>this.buf.byteLength&&this.grow();for(let ot=0;ot<it;ot++)this.buf[this.offset+ot]=j&127|(ot===it-1?0:128),j>>=7;return this.offset+=it,it}appendUint53(j){if(!Number.isInteger(j))throw new RangeError("value is not an integer");if(j<0||j>Number.MAX_SAFE_INTEGER)throw new RangeError("number out of range");let it=Math.floor(j/4294967296),ot=(j&4294967295)>>>0;return this.appendUint64(it,ot)}appendInt53(j){if(!Number.isInteger(j))throw new RangeError("value is not an integer");if(j<Number.MIN_SAFE_INTEGER||j>Number.MAX_SAFE_INTEGER)throw new RangeError("number out of range");let it=Math.floor(j/4294967296),ot=(j&4294967295)>>>0;return this.appendInt64(it,ot)}appendUint64(j,it){if(!Number.isInteger(j)||!Number.isInteger(it))throw new RangeError("value is not an integer");if(j<0||j>4294967295||it<0||it>4294967295)throw new RangeError("number out of range");if(j===0)return this.appendUint32(it);let ot=Math.ceil((64-Math.clz32(j))/7);this.offset+ot>this.buf.byteLength&&this.grow();for(let K=0;K<4;K++)this.buf[this.offset+K]=it&127|128,it>>>=7;this.buf[this.offset+4]=it&15|(j&7)<<4|(ot===5?0:128),j>>>=3;for(let K=5;K<ot;K++)this.buf[this.offset+K]=j&127|(K===ot-1?0:128),j>>>=7;return this.offset+=ot,ot}appendInt64(j,it){if(!Number.isInteger(j)||!Number.isInteger(it))throw new RangeError("value is not an integer");if(j<-2147483648||j>2147483647||it<-2147483648||it>4294967295)throw new RangeError("number out of range");if(it>>>=0,j===0&&it<=2147483647)return this.appendInt32(it);if(j===-1&&it>=2147483648)return this.appendInt32(it-4294967296);let ot=Math.ceil((65-Math.clz32(j>=0?j:-j-1))/7);this.offset+ot>this.buf.byteLength&&this.grow();for(let K=0;K<4;K++)this.buf[this.offset+K]=it&127|128,it>>>=7;this.buf[this.offset+4]=it&15|(j&7)<<4|(ot===5?0:128),j>>=3;for(let K=5;K<ot;K++)this.buf[this.offset+K]=j&127|(K===ot-1?0:128),j>>=7;return this.offset+=ot,ot}appendRawBytes(j){return this.offset+j.byteLength>this.buf.byteLength&&this.grow(this.offset+j.byteLength),this.buf.set(j,this.offset),this.offset+=j.byteLength,j.byteLength}appendRawString(j){if(typeof j!="string")throw new TypeError("value is not a string");return this.appendRawBytes(u(j))}appendPrefixedBytes(j){return this.appendUint53(j.byteLength),this.appendRawBytes(j),this}appendPrefixedString(j){if(typeof j!="string")throw new TypeError("value is not a string");return this.appendPrefixedBytes(u(j)),this}appendHexString(j){return this.appendPrefixedBytes(g(j)),this}finish(){}},o=class{constructor(j){if(!(j instanceof Uint8Array))throw new TypeError(`Not a byte array: ${j}`);this.buf=j,this.offset=0}get done(){return this.offset===this.buf.byteLength}reset(){this.offset=0}skip(j){if(this.offset+j>this.buf.byteLength)throw new RangeError("cannot skip beyond end of buffer");this.offset+=j}readByte(){return this.offset+=1,this.buf[this.offset-1]}readUint32(){let j=0,it=0;for(;this.offset<this.buf.byteLength;){let ot=this.buf[this.offset];if(it===28&&ot&240)throw new RangeError("number out of range");if(j=(j|(ot&127)<<it)>>>0,it+=7,this.offset++,!(ot&128))return j}throw new RangeError("buffer ended with incomplete number")}readInt32(){let j=0,it=0;for(;this.offset<this.buf.byteLength;){let ot=this.buf[this.offset];if(it===28&&ot&128||it===28&&!(ot&64)&&ot&56||it===28&&ot&64&&(ot&56)!==56)throw new RangeError("number out of range");if(j|=(ot&127)<<it,it+=7,this.offset++,!(ot&128))return!(ot&64)||it>28?j:j|-1<<it}throw new RangeError("buffer ended with incomplete number")}readUint53(){let{low32:j,high32:it}=this.readUint64();if(it<0||it>2097151)throw new RangeError("number out of range");return it*4294967296+j}readInt53(){let{low32:j,high32:it}=this.readInt64();if(it<-2097152||it===-2097152&&j===0||it>2097151)throw new RangeError("number out of range");return it*4294967296+j}readUint64(){let j=0,it=0,ot=0;for(;this.offset<this.buf.byteLength&&ot<=28;){let K=this.buf[this.offset];if(j=(j|(K&127)<<ot)>>>0,ot===28&&(it=(K&112)>>>4),ot+=7,this.offset++,!(K&128))return{high32:it,low32:j}}for(ot=3;this.offset<this.buf.byteLength;){let K=this.buf[this.offset];if(ot===31&&K&254)throw new RangeError("number out of range");if(it=(it|(K&127)<<ot)>>>0,ot+=7,this.offset++,!(K&128))return{high32:it,low32:j}}throw new RangeError("buffer ended with incomplete number")}readInt64(){let j=0,it=0,ot=0;for(;this.offset<this.buf.byteLength&&ot<=28;){let K=this.buf[this.offset];if(j=(j|(K&127)<<ot)>>>0,ot===28&&(it=(K&112)>>>4),ot+=7,this.offset++,!(K&128))return K&64&&(ot<32&&(j=(j|-1<<ot)>>>0),it|=-1<<Math.max(ot-32,0)),{high32:it,low32:j}}for(ot=3;this.offset<this.buf.byteLength;){let K=this.buf[this.offset];if(ot===31&&K!==0&&K!==127)throw new RangeError("number out of range");if(it|=(K&127)<<ot,ot+=7,this.offset++,!(K&128))return K&64&&ot<32&&(it|=-1<<ot),{high32:it,low32:j}}throw new RangeError("buffer ended with incomplete number")}readRawBytes(j){let it=this.offset;if(it+j>this.buf.byteLength)throw new RangeError("subarray exceeds buffer size");return this.offset+=j,this.buf.subarray(it,this.offset)}readRawString(j){return p(this.readRawBytes(j))}readPrefixedBytes(){return this.readRawBytes(this.readUint53())}readPrefixedString(){return p(this.readPrefixedBytes())}readHexString(){return y(this.readPrefixedBytes())}},M=class extends D{constructor(j){super(),this.type=j,this.state="empty",this.lastValue=void 0,this.count=0,this.literal=[]}appendValue(j,it=1){this._appendValue(j,it)}_appendValue(j,it=1){it<=0||(this.state==="empty"?(this.state=j===null?"nulls":it===1?"loneValue":"repetition",this.lastValue=j,this.count=it):this.state==="loneValue"?j===null?(this.flush(),this.state="nulls",this.count=it):j===this.lastValue?(this.state="repetition",this.count=1+it):it>1?(this.flush(),this.state="repetition",this.count=it,this.lastValue=j):(this.state="literal",this.literal=[this.lastValue],this.lastValue=j):this.state==="repetition"?j===null?(this.flush(),this.state="nulls",this.count=it):j===this.lastValue?this.count+=it:it>1?(this.flush(),this.state="repetition",this.count=it,this.lastValue=j):(this.flush(),this.state="loneValue",this.lastValue=j):this.state==="literal"?j===null?(this.literal.push(this.lastValue),this.flush(),this.state="nulls",this.count=it):j===this.lastValue?(this.flush(),this.state="repetition",this.count=1+it):it>1?(this.literal.push(this.lastValue),this.flush(),this.state="repetition",this.count=it,this.lastValue=j):(this.literal.push(this.lastValue),this.lastValue=j):this.state==="nulls"&&(j===null?this.count+=it:it>1?(this.flush(),this.state="repetition",this.count=it,this.lastValue=j):(this.flush(),this.state="loneValue",this.lastValue=j)))}copyFrom(j,it={}){let{count:ot,sumValues:K,sumShift:H}=it;if(!(j instanceof W)||j.type!==this.type)throw new TypeError("incompatible type of decoder");let q=typeof ot=="number"?ot:Number.MAX_SAFE_INTEGER,pt=0,yt=0;if(ot&&q>0&&j.done)throw new RangeError(`cannot copy ${ot} values`);if(q===0||j.done)return K?{nonNullValues:pt,sum:yt}:{nonNullValues:pt};let Rt=j.readValue();if(Rt===null){let vt=Math.min(j.count+1,q);if(q-=vt,j.count-=vt-1,this.appendValue(null,vt),ot&&q>0&&j.done)throw new RangeError(`cannot copy ${ot} values`);if(q===0||j.done)return K?{nonNullValues:pt,sum:yt}:{nonNullValues:pt};if(Rt=j.readValue(),Rt===null)throw new RangeError("null run must be followed by non-null value")}if(this.appendValue(Rt),q--,pt++,K&&(yt+=H?Rt>>>H:Rt),ot&&q>0&&j.done)throw new RangeError(`cannot copy ${ot} values`);if(q===0||j.done)return K?{nonNullValues:pt,sum:yt}:{nonNullValues:pt};let Et=j.count>0;for(;q>0&&!j.done;){Et||j.readRecord();let vt=Math.min(j.count,q);if(j.count-=vt,j.state==="literal"){pt+=vt;for(let Ft=0;Ft<vt;Ft++){if(j.done)throw new RangeError("incomplete literal");let Xt=j.readRawValue();if(Xt===j.lastValue)throw new RangeError("Repetition of values is not allowed in literal");j.lastValue=Xt,this._appendValue(Xt),K&&(yt+=H?Xt>>>H:Xt)}}else if(j.state==="repetition"){pt+=vt,K&&(yt+=vt*(H?j.lastValue>>>H:j.lastValue));let Ft=j.lastValue;if(this._appendValue(Ft),vt>1){if(this._appendValue(Ft),this.state!=="repetition")throw new RangeError(`Unexpected state ${this.state}`);this.count+=vt-2}}else if(j.state==="nulls"){if(this._appendValue(null),this.state!=="nulls")throw new RangeError(`Unexpected state ${this.state}`);this.count+=vt-1}Et=!1,q-=vt}if(ot&&q>0&&j.done)throw new RangeError(`cannot copy ${ot} values`);return K?{nonNullValues:pt,sum:yt}:{nonNullValues:pt}}flush(){if(this.state==="loneValue")this.appendInt32(-1),this.appendRawValue(this.lastValue);else if(this.state==="repetition")this.appendInt53(this.count),this.appendRawValue(this.lastValue);else if(this.state==="literal"){this.appendInt53(-this.literal.length);for(let j of this.literal)this.appendRawValue(j)}else this.state==="nulls"&&(this.appendInt32(0),this.appendUint53(this.count));this.state="empty"}appendRawValue(j){if(this.type==="int")this.appendInt53(j);else if(this.type==="uint")this.appendUint53(j);else if(this.type==="utf8")this.appendPrefixedString(j);else throw new RangeError(`Unknown RLEEncoder datatype: ${this.type}`)}finish(){this.state==="literal"&&this.literal.push(this.lastValue),(this.state!=="nulls"||this.offset>0)&&this.flush()}},W=class extends o{constructor(j,it){super(it),this.type=j,this.lastValue=void 0,this.count=0,this.state=void 0}get done(){return this.count===0&&this.offset===this.buf.byteLength}reset(){this.offset=0,this.lastValue=void 0,this.count=0,this.state=void 0}readValue(){if(this.done)return null;if(this.count===0&&this.readRecord(),this.count-=1,this.state==="literal"){let j=this.readRawValue();if(j===this.lastValue)throw new RangeError("Repetition of values is not allowed in literal");return this.lastValue=j,j}else return this.lastValue}skipValues(j){for(;j>0&&!this.done;){this.count===0&&(this.count=this.readInt53(),this.count>0?(this.lastValue=this.count<=j?this.skipRawValues(1):this.readRawValue(),this.state="repetition"):this.count<0?(this.count=-this.count,this.state="literal"):(this.count=this.readUint53(),this.lastValue=null,this.state="nulls"));let it=Math.min(j,this.count);this.state==="literal"&&this.skipRawValues(it),j-=it,this.count-=it}}readRecord(){if(this.count=this.readInt53(),this.count>1){let j=this.readRawValue();if((this.state==="repetition"||this.state==="literal")&&this.lastValue===j)throw new RangeError("Successive repetitions with the same value are not allowed");this.state="repetition",this.lastValue=j}else{if(this.count===1)throw new RangeError("Repetition count of 1 is not allowed, use a literal instead");if(this.count<0){if(this.count=-this.count,this.state==="literal")throw new RangeError("Successive literals are not allowed");this.state="literal"}else{if(this.state==="nulls")throw new RangeError("Successive null runs are not allowed");if(this.count=this.readUint53(),this.count===0)throw new RangeError("Zero-length null runs are not allowed");this.lastValue=null,this.state="nulls"}}}readRawValue(){if(this.type==="int")return this.readInt53();if(this.type==="uint")return this.readUint53();if(this.type==="utf8")return this.readPrefixedString();throw new RangeError(`Unknown RLEDecoder datatype: ${this.type}`)}skipRawValues(j){if(this.type==="utf8")for(let it=0;it<j;it++)this.skip(this.readUint53());else{for(;j>0&&this.offset<this.buf.byteLength;)this.buf[this.offset]&128||j--,this.offset++;if(j>0)throw new RangeError("cannot skip beyond end of buffer")}}},w=class extends M{constructor(){super("int"),this.absoluteValue=0}appendValue(j,it=1){it<=0||(typeof j=="number"?(super.appendValue(j-this.absoluteValue,1),this.absoluteValue=j,it>1&&super.appendValue(0,it-1)):super.appendValue(j,it))}copyFrom(j,it={}){if(it.sumValues)throw new RangeError("unsupported options for DeltaEncoder.copyFrom()");if(!(j instanceof U))throw new TypeError("incompatible type of decoder");let ot=it.count;if(ot>0&&j.done)throw new RangeError(`cannot copy ${ot} values`);if(ot===0||j.done)return;let K=j.readValue(),H=0;if(this.appendValue(K),K===null){if(H=j.count+1,ot!==void 0&&ot<H&&(H=ot),j.count-=H-1,this.count+=H-1,ot>H&&j.done)throw new RangeError(`cannot copy ${ot} values`);if(ot===H||j.done)return;j.count===0&&this.appendValue(j.readValue())}ot!==void 0&&(ot-=H+1);let{nonNullValues:q,sum:pt}=super.copyFrom(j,{count:ot,sumValues:!0});q>0&&(this.absoluteValue=pt,j.absoluteValue=pt)}},U=class extends W{constructor(j){super("int",j),this.absoluteValue=0}reset(){this.offset=0,this.lastValue=void 0,this.count=0,this.state=void 0,this.absoluteValue=0}readValue(){let j=super.readValue();return j===null?null:(this.absoluteValue+=j,this.absoluteValue)}skipValues(j){for(;j>0&&!this.done;){this.count===0&&this.readRecord();let it=Math.min(j,this.count);if(this.state==="literal")for(let ot=0;ot<it;ot++)this.lastValue=this.readRawValue(),this.absoluteValue+=this.lastValue;else this.state==="repetition"&&(this.absoluteValue+=it*this.lastValue);j-=it,this.count-=it}}},nt=class extends D{constructor(){super(),this.lastValue=!1,this.count=0}appendValue(j,it=1){if(j!==!1&&j!==!0)throw new RangeError(`Unsupported value for BooleanEncoder: ${j}`);it<=0||(this.lastValue===j?this.count+=it:(this.appendUint53(this.count),this.lastValue=j,this.count=it))}copyFrom(j,it={}){if(!(j instanceof X))throw new TypeError("incompatible type of decoder");let{count:ot}=it,K=typeof ot=="number"?ot:Number.MAX_SAFE_INTEGER;if(ot&&K>0&&j.done)throw new RangeError(`cannot copy ${ot} values`);if(K===0||j.done)return;this.appendValue(j.readValue()),K--;let H=Math.min(j.count,K);for(this.count+=H,j.count-=H,K-=H;K>0&&!j.done;){if(j.count=j.readUint53(),j.count===0)throw new RangeError("Zero-length runs are not allowed");j.lastValue=!j.lastValue,this.appendUint53(this.count);let q=Math.min(j.count,K);this.count=q,this.lastValue=j.lastValue,j.count-=q,K-=q}if(ot&&K>0&&j.done)throw new RangeError(`cannot copy ${ot} values`)}finish(){this.count>0&&(this.appendUint53(this.count),this.count=0)}},X=class extends o{constructor(j){super(j),this.lastValue=!0,this.firstRun=!0,this.count=0}get done(){return this.count===0&&this.offset===this.buf.byteLength}reset(){this.offset=0,this.lastValue=!0,this.firstRun=!0,this.count=0}readValue(){if(this.done)return!1;for(;this.count===0;){if(this.count=this.readUint53(),this.lastValue=!this.lastValue,this.count===0&&!this.firstRun)throw new RangeError("Zero-length runs are not allowed");this.firstRun=!1}return this.count-=1,this.lastValue}skipValues(j){for(;j>0&&!this.done;){if(this.count===0){if(this.count=this.readUint53(),this.lastValue=!this.lastValue,this.count===0&&!this.firstRun)throw new RangeError("Zero-length runs are not allowed");this.firstRun=!1}this.count<j?(j-=this.count,this.count=0):(this.count-=j,j=0)}}};r.exports={stringToUtf8:u,utf8ToString:p,hexStringToBytes:g,bytesToHexString:y,Encoder:D,Decoder:o,RLEEncoder:M,RLEDecoder:W,DeltaEncoder:w,DeltaDecoder:U,BooleanEncoder:nt,BooleanDecoder:X}}),H4=ce((t,r)=>{(function(n,i){var u={};i(u);var p=u.default;for(var g in u)p[g]=u[g];typeof r=="object"&&typeof r.exports=="object"?r.exports=p:typeof define=="function"&&define.amd?define(function(){return p}):n.sha256=p})(t,function(n){"use strict";n.__esModule=!0,n.digestLength=32,n.blockSize=64;var i=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function u(W,w,U,nt,X){for(var j,it,ot,K,H,q,pt,yt,Rt,Et,vt,Ft,Xt;X>=64;){for(j=w[0],it=w[1],ot=w[2],K=w[3],H=w[4],q=w[5],pt=w[6],yt=w[7],Et=0;Et<16;Et++)vt=nt+Et*4,W[Et]=(U[vt]&255)<<24|(U[vt+1]&255)<<16|(U[vt+2]&255)<<8|U[vt+3]&255;for(Et=16;Et<64;Et++)Rt=W[Et-2],Ft=(Rt>>>17|Rt<<15)^(Rt>>>19|Rt<<13)^Rt>>>10,Rt=W[Et-15],Xt=(Rt>>>7|Rt<<25)^(Rt>>>18|Rt<<14)^Rt>>>3,W[Et]=(Ft+W[Et-7]|0)+(Xt+W[Et-16]|0);for(Et=0;Et<64;Et++)Ft=(((H>>>6|H<<26)^(H>>>11|H<<21)^(H>>>25|H<<7))+(H&q^~H&pt)|0)+(yt+(i[Et]+W[Et]|0)|0)|0,Xt=((j>>>2|j<<30)^(j>>>13|j<<19)^(j>>>22|j<<10))+(j&it^j&ot^it&ot)|0,yt=pt,pt=q,q=H,H=K+Ft|0,K=ot,ot=it,it=j,j=Ft+Xt|0;w[0]+=j,w[1]+=it,w[2]+=ot,w[3]+=K,w[4]+=H,w[5]+=q,w[6]+=pt,w[7]+=yt,nt+=64,X-=64}return nt}var p=(function(){function W(){this.digestLength=n.digestLength,this.blockSize=n.blockSize,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return W.prototype.reset=function(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},W.prototype.clean=function(){for(var w=0;w<this.buffer.length;w++)this.buffer[w]=0;for(var w=0;w<this.temp.length;w++)this.temp[w]=0;this.reset()},W.prototype.update=function(w,U){if(U===void 0&&(U=w.length),this.finished)throw new Error("SHA256: can't update because hash was finished.");var nt=0;if(this.bytesHashed+=U,this.bufferLength>0){for(;this.bufferLength<64&&U>0;)this.buffer[this.bufferLength++]=w[nt++],U--;this.bufferLength===64&&(u(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(U>=64&&(nt=u(this.temp,this.state,w,nt,U),U%=64);U>0;)this.buffer[this.bufferLength++]=w[nt++],U--;return this},W.prototype.finish=function(w){if(!this.finished){var U=this.bytesHashed,nt=this.bufferLength,X=U/536870912|0,j=U<<3,it=U%64<56?64:128;this.buffer[nt]=128;for(var ot=nt+1;ot<it-8;ot++)this.buffer[ot]=0;this.buffer[it-8]=X>>>24&255,this.buffer[it-7]=X>>>16&255,this.buffer[it-6]=X>>>8&255,this.buffer[it-5]=X>>>0&255,this.buffer[it-4]=j>>>24&255,this.buffer[it-3]=j>>>16&255,this.buffer[it-2]=j>>>8&255,this.buffer[it-1]=j>>>0&255,u(this.temp,this.state,this.buffer,0,it),this.finished=!0}for(var ot=0;ot<8;ot++)w[ot*4+0]=this.state[ot]>>>24&255,w[ot*4+1]=this.state[ot]>>>16&255,w[ot*4+2]=this.state[ot]>>>8&255,w[ot*4+3]=this.state[ot]>>>0&255;return this},W.prototype.digest=function(){var w=new Uint8Array(this.digestLength);return this.finish(w),w},W.prototype._saveState=function(w){for(var U=0;U<this.state.length;U++)w[U]=this.state[U]},W.prototype._restoreState=function(w,U){for(var nt=0;nt<this.state.length;nt++)this.state[nt]=w[nt];this.bytesHashed=U,this.finished=!1,this.bufferLength=0},W})();n.Hash=p;var g=(function(){function W(w){this.inner=new p,this.outer=new p,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;var U=new Uint8Array(this.blockSize);if(w.length>this.blockSize)new p().update(w).finish(U).clean();else for(var nt=0;nt<w.length;nt++)U[nt]=w[nt];for(var nt=0;nt<U.length;nt++)U[nt]^=54;this.inner.update(U);for(var nt=0;nt<U.length;nt++)U[nt]^=106;this.outer.update(U),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate);for(var nt=0;nt<U.length;nt++)U[nt]=0}return W.prototype.reset=function(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this},W.prototype.clean=function(){for(var w=0;w<this.istate.length;w++)this.ostate[w]=this.istate[w]=0;this.inner.clean(),this.outer.clean()},W.prototype.update=function(w){return this.inner.update(w),this},W.prototype.finish=function(w){return this.outer.finished?this.outer.finish(w):(this.inner.finish(w),this.outer.update(w,this.digestLength).finish(w)),this},W.prototype.digest=function(){var w=new Uint8Array(this.digestLength);return this.finish(w),w},W})();n.HMAC=g;function m(W){var w=new p().update(W),U=w.digest();return w.clean(),U}n.hash=m,n.default=m;function A(W,w){var U=new g(W).update(w),nt=U.digest();return U.clean(),nt}n.hmac=A;function y(W,w,U,nt){var X=nt[0];if(X===0)throw new Error("hkdf: cannot expand more");w.reset(),X>1&&w.update(W),U&&w.update(U),w.update(nt),w.finish(W),nt[0]++}var D=new Uint8Array(n.digestLength);function o(W,w,U,nt){w===void 0&&(w=D),nt===void 0&&(nt=32);for(var X=new Uint8Array([1]),j=A(w,W),it=new g(j),ot=new Uint8Array(it.digestLength),K=ot.length,H=new Uint8Array(nt),q=0;q<nt;q++)K===ot.length&&(y(ot,it,U,X),K=0),H[q]=ot[K++];return it.clean(),ot.fill(0),X.fill(0),H}n.hkdf=o;function M(W,w,U,nt){for(var X=new g(W),j=X.digestLength,it=new Uint8Array(4),ot=new Uint8Array(j),K=new Uint8Array(j),H=new Uint8Array(nt),q=0;q*j<nt;q++){var pt=q+1;it[0]=pt>>>24&255,it[1]=pt>>>16&255,it[2]=pt>>>8&255,it[3]=pt>>>0&255,X.reset(),X.update(w),X.update(it),X.finish(K);for(var yt=0;yt<j;yt++)ot[yt]=K[yt];for(var yt=2;yt<=U;yt++){X.reset(),X.update(K).finish(K);for(var Rt=0;Rt<j;Rt++)ot[Rt]^=K[Rt]}for(var yt=0;yt<j&&q*j+yt<nt;yt++)H[q*j+yt]=ot[yt]}for(var q=0;q<j;q++)ot[q]=K[q]=0;for(var q=0;q<4;q++)it[q]=0;return X.clean(),H}n.pbkdf2=M})}),Bh=ce((t,r)=>{var n=O4(),{copyObject:i,parseOpId:u,equalBytes:p}=Us(),{utf8ToString:g,hexStringToBytes:m,bytesToHexString:A,Encoder:y,Decoder:D,RLEEncoder:o,RLEDecoder:M,DeltaEncoder:W,DeltaDecoder:w,BooleanEncoder:U,BooleanDecoder:nt}=i2(),{Hash:X}=H4(),j=new Uint8Array([133,111,74,131]),it=0,ot=1,K=2,H=256,q={GROUP_CARD:0,ACTOR_ID:1,INT_RLE:2,INT_DELTA:3,BOOLEAN:4,STRING_RLE:5,VALUE_LEN:6,VALUE_RAW:7},pt=8,yt={NULL:0,FALSE:1,TRUE:2,LEB128_UINT:3,LEB128_INT:4,IEEE754:5,UTF8:6,BYTES:7,COUNTER:8,TIMESTAMP:9,MIN_UNKNOWN:10,MAX_UNKNOWN:15},Rt=["makeMap","set","makeList","del","makeText","inc","makeTable","link"],Et={makeMap:"map",makeList:"list",makeText:"text",makeTable:"table"},vt=[{columnName:"objActor",columnId:0|q.ACTOR_ID},{columnName:"objCtr",columnId:0|q.INT_RLE},{columnName:"keyActor",columnId:16|q.ACTOR_ID},{columnName:"keyCtr",columnId:16|q.INT_DELTA},{columnName:"keyStr",columnId:16|q.STRING_RLE},{columnName:"idActor",columnId:32|q.ACTOR_ID},{columnName:"idCtr",columnId:32|q.INT_DELTA},{columnName:"insert",columnId:48|q.BOOLEAN},{columnName:"action",columnId:64|q.INT_RLE},{columnName:"valLen",columnId:80|q.VALUE_LEN},{columnName:"valRaw",columnId:80|q.VALUE_RAW},{columnName:"chldActor",columnId:96|q.ACTOR_ID},{columnName:"chldCtr",columnId:96|q.INT_DELTA}],Ft=vt.concat([{columnName:"predNum",columnId:112|q.GROUP_CARD},{columnName:"predActor",columnId:112|q.ACTOR_ID},{columnName:"predCtr",columnId:112|q.INT_DELTA}]),Xt=vt.concat([{columnName:"succNum",columnId:128|q.GROUP_CARD},{columnName:"succActor",columnId:128|q.ACTOR_ID},{columnName:"succCtr",columnId:128|q.INT_DELTA}]),ee=[{columnName:"actor",columnId:0|q.ACTOR_ID},{columnName:"seq",columnId:0|q.INT_DELTA},{columnName:"maxOp",columnId:16|q.INT_DELTA},{columnName:"time",columnId:32|q.INT_DELTA},{columnName:"message",columnId:48|q.STRING_RLE},{columnName:"depsNum",columnId:64|q.GROUP_CARD},{columnName:"depsIndex",columnId:64|q.INT_DELTA},{columnName:"extraLen",columnId:80|q.VALUE_LEN},{columnName:"extraRaw",columnId:80|q.VALUE_RAW}];function ne(xt,dt){if(!xt||!xt.actorId)return xt;let tt=xt.counter,F=dt.indexOf(xt.actorId);if(F<0)throw new RangeError("missing actorId");return{counter:tt,actorNum:F,actorId:xt.actorId}}function ae(xt,dt){return xt.counter<dt.counter?-1:xt.counter>dt.counter?1:xt.actorId<dt.actorId?-1:xt.actorId>dt.actorId?1:0}function Le(xt,dt){let tt={},F=[];for(let At of xt)At=i(At),tt[At.actor]=!0,At.ops=Ve(At.ops,At.startOp,At.actor),At.ops=At.ops.map(Ct=>{Ct=i(Ct),Ct.obj!=="_root"&&(Ct.obj=u(Ct.obj)),Ct.elemId&&Ct.elemId!=="_head"&&(Ct.elemId=u(Ct.elemId)),Ct.child&&(Ct.child=u(Ct.child)),Ct.pred&&(Ct.pred=Ct.pred.map(u)),Ct.obj.actorId&&(tt[Ct.obj.actorId]=!0),Ct.elemId&&Ct.elemId.actorId&&(tt[Ct.elemId.actorId]=!0),Ct.child&&Ct.child.actorId&&(tt[Ct.child.actorId]=!0);for(let Nt of Ct.pred)tt[Nt.actorId]=!0;return Ct}),F.push(At);let rt=Object.keys(tt).sort();dt&&(rt=[xt[0].actor].concat(rt.filter(At=>At!==xt[0].actor)));for(let At of F){At.actorNum=rt.indexOf(At.actor);for(let Ct=0;Ct<At.ops.length;Ct++){let Nt=At.ops[Ct];Nt.id={counter:At.startOp+Ct,actorNum:At.actorNum,actorId:At.actor},Nt.obj=ne(Nt.obj,rt),Nt.elemId=ne(Nt.elemId,rt),Nt.child=ne(Nt.child,rt),Nt.pred=Nt.pred.map(Yt=>ne(Yt,rt))}}return{changes:F,actorIds:rt}}function de(xt,dt){if(xt.obj==="_root")dt.objActor.appendValue(null),dt.objCtr.appendValue(null);else if(xt.obj.actorNum>=0&&xt.obj.counter>0)dt.objActor.appendValue(xt.obj.actorNum),dt.objCtr.appendValue(xt.obj.counter);else throw new RangeError(`Unexpected objectId reference: ${JSON.stringify(xt.obj)}`)}function He(xt,dt){if(xt.key)dt.keyActor.appendValue(null),dt.keyCtr.appendValue(null),dt.keyStr.appendValue(xt.key);else if(xt.elemId==="_head"&&xt.insert)dt.keyActor.appendValue(null),dt.keyCtr.appendValue(0),dt.keyStr.appendValue(null);else if(xt.elemId&&xt.elemId.actorNum>=0&&xt.elemId.counter>0)dt.keyActor.appendValue(xt.elemId.actorNum),dt.keyCtr.appendValue(xt.elemId.counter),dt.keyStr.appendValue(null);else throw new RangeError(`Unexpected operation key: ${JSON.stringify(xt)}`)}function ze(xt,dt){let tt=Rt.indexOf(xt.action);if(tt>=0)dt.action.appendValue(tt);else if(typeof xt.action=="number")dt.action.appendValue(xt.action);else throw new RangeError(`Unexpected operation action: ${xt.action}`)}function Pe(xt){switch(xt.datatype){case"counter":return[yt.COUNTER,xt.value];case"timestamp":return[yt.TIMESTAMP,xt.value];case"uint":return[yt.LEB128_UINT,xt.value];case"int":return[yt.LEB128_INT,xt.value];case"float64":{let dt=new ArrayBuffer(8);return new DataView(dt).setFloat64(0,xt.value,!0),[yt.IEEE754,new Uint8Array(dt)]}default:if(Number.isInteger(xt.value)&&xt.value<=Number.MAX_SAFE_INTEGER&&xt.value>=Number.MIN_SAFE_INTEGER)return[yt.LEB128_INT,xt.value];{let dt=new ArrayBuffer(8);return new DataView(dt).setFloat64(0,xt.value,!0),[yt.IEEE754,new Uint8Array(dt)]}}}function Je(xt,dt){if(xt.action!=="set"&&xt.action!=="inc"||xt.value===null)dt.valLen.appendValue(yt.NULL);else if(xt.value===!1)dt.valLen.appendValue(yt.FALSE);else if(xt.value===!0)dt.valLen.appendValue(yt.TRUE);else if(typeof xt.value=="string"){let tt=dt.valRaw.appendRawString(xt.value);dt.valLen.appendValue(tt<<4|yt.UTF8)}else if(ArrayBuffer.isView(xt.value)){let tt=dt.valRaw.appendRawBytes(new Uint8Array(xt.value.buffer));dt.valLen.appendValue(tt<<4|yt.BYTES)}else if(typeof xt.value=="number"){let[tt,F]=Pe(xt),rt;tt===yt.LEB128_UINT?rt=dt.valRaw.appendUint53(F):tt===yt.IEEE754?rt=dt.valRaw.appendRawBytes(F):rt=dt.valRaw.appendInt53(F),dt.valLen.appendValue(rt<<4|tt)}else if(typeof xt.datatype=="number"&&xt.datatype>=yt.MIN_UNKNOWN&&xt.datatype<=yt.MAX_UNKNOWN&&xt.value instanceof Uint8Array){let tt=dt.valRaw.appendRawBytes(xt.value);dt.valLen.appendValue(tt<<4|xt.datatype)}else throw xt.datatype?new RangeError(`Unknown datatype ${xt.datatype} for value ${xt.value}`):new RangeError(`Unsupported value in operation: ${xt.value}`)}function Xe(xt,dt){if(xt===yt.NULL)return{value:null};if(xt===yt.FALSE)return{value:!1};if(xt===yt.TRUE)return{value:!0};if(xt%16===yt.UTF8)return{value:g(dt)};if(xt%16===yt.LEB128_UINT)return{value:new D(dt).readUint53(),datatype:"uint"};if(xt%16===yt.LEB128_INT)return{value:new D(dt).readInt53(),datatype:"int"};if(xt%16===yt.IEEE754){let tt=new DataView(dt.buffer,dt.byteOffset,dt.byteLength);if(dt.byteLength===8)return{value:tt.getFloat64(0,!0),datatype:"float64"};throw new RangeError(`Invalid length for floating point number: ${dt.byteLength}`)}else return xt%16===yt.COUNTER?{value:new D(dt).readInt53(),datatype:"counter"}:xt%16===yt.TIMESTAMP?{value:new D(dt).readInt53(),datatype:"timestamp"}:{value:dt,datatype:xt%16}}function Ae(xt,dt,tt,F){let{columnId:rt,columnName:At,decoder:Ct}=xt[dt];if(rt%8===q.VALUE_LEN&&dt+1<xt.length&&xt[dt+1].columnId===rt+1){let Nt=Ct.readValue(),Yt=xt[dt+1].decoder.readRawBytes(Nt>>4),{value:Ce,datatype:Qt}=Xe(Nt,Yt);return F[At]=Ce,Qt&&(F[At+"_datatype"]=Qt),2}else if(rt%8===q.ACTOR_ID){let Nt=Ct.readValue();if(Nt===null)F[At]=null;else{if(!tt[Nt])throw new RangeError(`No actor index ${Nt}`);F[At]=tt[Nt]}}else F[At]=Ct.readValue();return 1}function xe(xt,dt){let tt={objActor:new o("uint"),objCtr:new o("uint"),keyActor:new o("uint"),keyCtr:new W,keyStr:new o("utf8"),insert:new U,action:new o("uint"),valLen:new o("uint"),valRaw:new y,chldActor:new o("uint"),chldCtr:new W};dt?(tt.idActor=new o("uint"),tt.idCtr=new W,tt.succNum=new o("uint"),tt.succActor=new o("uint"),tt.succCtr=new W):(tt.predNum=new o("uint"),tt.predCtr=new W,tt.predActor=new o("uint"));for(let rt of xt)if(de(rt,tt),He(rt,tt),tt.insert.appendValue(!!rt.insert),ze(rt,tt),Je(rt,tt),rt.child&&rt.child.counter?(tt.chldActor.appendValue(rt.child.actorNum),tt.chldCtr.appendValue(rt.child.counter)):(tt.chldActor.appendValue(null),tt.chldCtr.appendValue(null)),dt){tt.idActor.appendValue(rt.id.actorNum),tt.idCtr.appendValue(rt.id.counter),tt.succNum.appendValue(rt.succ.length),rt.succ.sort(ae);for(let At=0;At<rt.succ.length;At++)tt.succActor.appendValue(rt.succ[At].actorNum),tt.succCtr.appendValue(rt.succ[At].counter)}else{tt.predNum.appendValue(rt.pred.length),rt.pred.sort(ae);for(let At=0;At<rt.pred.length;At++)tt.predActor.appendValue(rt.pred[At].actorNum),tt.predCtr.appendValue(rt.pred[At].counter)}let F=[];for(let{columnName:rt,columnId:At}of dt?Xt:Ft)tt[rt]&&F.push({columnId:At,columnName:rt,encoder:tt[rt]});return F.sort((rt,At)=>rt.columnId-At.columnId)}function Qe(xt,dt){return dt===void 0?typeof xt=="string"||typeof xt=="boolean"||xt===null:typeof xt=="number"}function Ve(xt,dt,tt){let F=dt,rt=[];for(let At of xt)if(At.action==="set"&&At.values&&At.insert){if(At.pred.length!==0)throw new RangeError("multi-insert pred must be empty");let Ct=At.elemId,Nt=At.datatype;for(let Yt of At.values){if(!Qe(Yt,Nt))throw new RangeError(`Decode failed: bad value/datatype association (${Yt},${Nt})`);rt.push({action:"set",obj:At.obj,elemId:Ct,datatype:Nt,value:Yt,pred:[],insert:!0}),Ct=`${F}@${tt}`,F+=1}}else if(At.action==="del"&&At.multiOp>1){if(At.pred.length!==1)throw new RangeError("multiOp deletion must have exactly one pred");let Ct=u(At.elemId),Nt=u(At.pred[0]);for(let Yt=0;Yt<At.multiOp;Yt++){let Ce=`${Ct.counter+Yt}@${Ct.actorId}`,Qt=[`${Nt.counter+Yt}@${Nt.actorId}`];rt.push({action:"del",obj:At.obj,elemId:Ce,pred:Qt}),F+=1}}else rt.push(At),F+=1;return rt}function Ze(xt,dt){let tt=[];for(let F of xt){let rt=F.objCtr===null?"_root":`${F.objCtr}@${F.objActor}`,At=F.keyStr?void 0:F.keyCtr===0?"_head":`${F.keyCtr}@${F.keyActor}`,Ct=Rt[F.action]||F.action,Nt=At?{obj:rt,elemId:At,action:Ct}:{obj:rt,key:F.keyStr,action:Ct};if(Nt.insert=!!F.insert,(Rt[F.action]==="set"||Rt[F.action]==="inc")&&(Nt.value=F.valLen,F.valLen_datatype&&(Nt.datatype=F.valLen_datatype)),!!F.chldCtr!=!!F.chldActor)throw new RangeError(`Mismatched child columns: ${F.chldCtr} and ${F.chldActor}`);F.chldCtr!==null&&(Nt.child=`${F.chldCtr}@${F.chldActor}`),dt?(Nt.id=`${F.idCtr}@${F.idActor}`,Nt.succ=F.succNum.map(Yt=>`${Yt.succCtr}@${Yt.succActor}`),vr(F.succNum.map(Yt=>({counter:Yt.succCtr,actorId:Yt.succActor})))):(Nt.pred=F.predNum.map(Yt=>`${Yt.predCtr}@${Yt.predActor}`),vr(F.predNum.map(Yt=>({counter:Yt.predCtr,actorId:Yt.predActor})))),tt.push(Nt)}return tt}function vr(xt){let dt=null;for(let tt of xt){if(dt&&ae(dt,tt)!==-1)throw new RangeError("operation IDs are not in ascending order");dt=tt}}function Pr(xt){return(xt&7)===q.INT_DELTA?new W:(xt&7)===q.BOOLEAN?new U:(xt&7)===q.STRING_RLE?new o("utf8"):(xt&7)===q.VALUE_RAW?new y:new o("uint")}function Dr(xt,dt){return(xt&7)===q.INT_DELTA?new w(dt):(xt&7)===q.BOOLEAN?new nt(dt):(xt&7)===q.STRING_RLE?new M("utf8",dt):(xt&7)===q.VALUE_RAW?new D(dt):new M("uint",dt)}function Q(xt,dt){let tt=new Uint8Array(0),F=[],rt=0,At=0;for(;rt<xt.length||At<dt.length;)if(rt===xt.length||At<dt.length&&dt[At].columnId<xt[rt].columnId){let{columnId:Ct,columnName:Nt}=dt[At];F.push({columnId:Ct,columnName:Nt,decoder:Dr(Ct,tt)}),At++}else if(At===dt.length||xt[rt].columnId<dt[At].columnId){let{columnId:Ct,buffer:Nt}=xt[rt];F.push({columnId:Ct,decoder:Dr(Ct,Nt)}),rt++}else{let{columnId:Ct,buffer:Nt}=xt[rt],{columnName:Yt}=dt[At];F.push({columnId:Ct,columnName:Yt,decoder:Dr(Ct,Nt)}),rt++,At++}return F}function k(xt,dt,tt){xt=Q(xt,tt);let F=[];for(;xt.some(rt=>!rt.decoder.done);){let rt={},At=0;for(;At<xt.length;){let Ct=xt[At].columnId,Nt=Ct>>4,Yt=1;for(;At+Yt<xt.length&&xt[At+Yt].columnId>>4===Nt;)Yt++;if(Ct%8===q.GROUP_CARD){let Ce=[],Qt=xt[At].decoder.readValue();for(let Ee=0;Ee<Qt;Ee++){let Be={};for(let sr=1;sr<Yt;sr++)Ae(xt,At+sr,dt,Be);Ce.push(Be)}rt[xt[At].columnName]=Ce,At+=Yt}else At+=Ae(xt,At,dt,rt)}F.push(rt)}return F}function Z(xt){let dt=(-1^pt)>>>0,tt=-1,F=[],rt=xt.readUint53();for(let At=0;At<rt;At++){let Ct=xt.readUint53(),Nt=xt.readUint53();if((Ct&dt)<=(tt&dt))throw new RangeError("Columns must be in ascending order");tt=Ct,F.push({columnId:Ct,bufferLen:Nt})}return F}function se(xt,dt){let tt=dt.filter(F=>F.encoder.buffer.byteLength>0);xt.appendUint53(tt.length);for(let F of tt)xt.appendUint53(F.columnId),xt.appendUint53(F.encoder.buffer.byteLength)}function ye(xt){let dt=xt.readUint53(),tt=[];for(let Ct=0;Ct<dt;Ct++)tt.push(A(xt.readRawBytes(32)));let F={actor:xt.readHexString(),seq:xt.readUint53(),startOp:xt.readUint53(),time:xt.readInt53(),message:xt.readPrefixedString(),deps:tt},rt=[F.actor],At=xt.readUint53();for(let Ct=0;Ct<At;Ct++)rt.push(xt.readHexString());return F.actorIds=rt,F}function rr(xt,dt){let tt=j.byteLength+4+1+5,F=new y;F.appendRawBytes(new Uint8Array(tt)),dt(F);let rt=F.buffer,At=new y;At.appendByte(xt),At.appendUint53(rt.byteLength-tt);let Ct=At.buffer,Nt=new X;Nt.update(Ct),Nt.update(rt.subarray(tt));let Yt=Nt.digest(),Ce=Yt.subarray(0,4);return rt.set(j,tt-Ct.byteLength-4-j.byteLength),rt.set(Ce,tt-Ct.byteLength-4),rt.set(Ct,tt-Ct.byteLength),{hash:Yt,bytes:rt.subarray(tt-Ct.byteLength-4-j.byteLength)}}function dr(xt,dt){if(!p(xt.readRawBytes(j.byteLength),j))throw new RangeError("Data does not begin with magic bytes 85 6f 4a 83");let tt=xt.readRawBytes(4),F=xt.offset,rt=xt.readByte(),At=xt.readUint53(),Ct={chunkType:rt,chunkLength:At,chunkData:xt.readRawBytes(At)};if(dt){let Nt=new X;Nt.update(xt.buf.subarray(F,xt.offset));let Yt=Nt.digest();if(!p(Yt.subarray(0,4),tt))throw new RangeError("checksum does not match data");Ct.hash=A(Yt)}return Ct}function mr(xt){let{changes:dt,actorIds:tt}=Le([xt],!0),F=dt[0],{hash:rt,bytes:At}=rr(ot,Nt=>{if(!Array.isArray(F.deps))throw new TypeError("deps is not an array");Nt.appendUint53(F.deps.length);for(let Ce of F.deps.slice().sort())Nt.appendRawBytes(m(Ce));Nt.appendHexString(F.actor),Nt.appendUint53(F.seq),Nt.appendUint53(F.startOp),Nt.appendInt53(F.time),Nt.appendPrefixedString(F.message||""),Nt.appendUint53(tt.length-1);for(let Ce of tt.slice(1))Nt.appendHexString(Ce);let Yt=xe(F.ops,!1);se(Nt,Yt);for(let Ce of Yt)Nt.appendRawBytes(Ce.encoder.buffer);F.extraBytes&&Nt.appendRawBytes(F.extraBytes)}),Ct=A(rt);if(xt.hash&&xt.hash!==Ct)throw new RangeError(`Change hash does not match encoding: ${xt.hash} != ${Ct}`);return At.byteLength>=H?Lr(At):At}function ur(xt){xt[8]===K&&(xt=Br(xt));let dt=new D(xt),tt=dr(dt,!0),F=new D(tt.chunkData);if(!dt.done)throw new RangeError("Encoded change has trailing data");if(tt.chunkType!==ot)throw new RangeError(`Unexpected chunk type: ${tt.chunkType}`);let rt=ye(F),At=Z(F);for(let Ct=0;Ct<At.length;Ct++){if(At[Ct].columnId&pt)throw new RangeError("change must not contain deflated columns");At[Ct].buffer=F.readRawBytes(At[Ct].bufferLen)}if(!F.done){let Ct=F.buf.byteLength-F.offset;rt.extraBytes=F.readRawBytes(Ct)}return rt.columns=At,rt.hash=tt.hash,rt}function er(xt){let dt=ur(xt);return dt.ops=Ze(k(dt.columns,dt.actorIds,Ft),!1),delete dt.actorIds,delete dt.columns,dt}function Gr(xt,dt){xt[8]===K&&(xt=Br(xt));let tt=dr(new D(xt),dt);if(tt.chunkType!==ot)throw new RangeError("Buffer chunk type is not a change");let F=ye(new D(tt.chunkData));return F.change=xt,dt&&(F.hash=tt.hash),F}function Lr(xt){let dt=dr(new D(xt),!1);if(dt.chunkType!==ot)throw new RangeError(`Unexpected chunk type: ${dt.chunkType}`);let tt=n.deflateRaw(dt.chunkData),F=new y;return F.appendRawBytes(xt.subarray(0,8)),F.appendByte(K),F.appendUint53(tt.byteLength),F.appendRawBytes(tt),F.buffer}function Br(xt){let dt=dr(new D(xt),!1);if(dt.chunkType!==K)throw new RangeError(`Unexpected chunk type: ${dt.chunkType}`);let tt=n.inflateRaw(dt.chunkData),F=new y;return F.appendRawBytes(xt.subarray(0,8)),F.appendByte(ot),F.appendUint53(tt.byteLength),F.appendRawBytes(tt),F.buffer}function N(xt){let dt=new D(xt),tt=[],F=0;for(;!dt.done;)dr(dt,!1),tt.push(xt.subarray(F,dt.offset)),F=dt.offset;return tt}function f(xt){let dt=[];for(let tt of xt)for(let F of N(tt))F[8]===it?dt=dt.concat(zt(F)):(F[8]===ot||F[8]===K)&&dt.push(er(F));return dt}function B(xt,dt){if(xt===dt)return 0;if(xt==="_root")return-1;if(dt==="_root")return 1;let tt=u(xt),F=u(dt);return tt.counter<F.counter?-1:tt.counter>F.counter?1:tt.actorId<F.actorId?-1:tt.actorId>F.actorId?1:0}function J(xt,dt){let tt={};for(let rt of xt){if(rt.ops=[],tt[rt.actor]||(tt[rt.actor]=[]),rt.seq!==tt[rt.actor].length+1)throw new RangeError(`Expected seq = ${tt[rt.actor].length+1}, got ${rt.seq}`);if(rt.seq>1&&tt[rt.actor][rt.seq-2].maxOp>rt.maxOp)throw new RangeError("maxOp must increase monotonically per actor");tt[rt.actor].push(rt)}let F={};for(let rt of dt){if(rt.action==="del")throw new RangeError("document should not contain del operations");rt.pred=F[rt.id]?F[rt.id].pred:[],F[rt.id]=rt;for(let At of rt.succ){if(!F[At])if(rt.elemId){let Ct=rt.insert?rt.id:rt.elemId;F[At]={id:At,action:"del",obj:rt.obj,elemId:Ct,pred:[]}}else F[At]={id:At,action:"del",obj:rt.obj,key:rt.key,pred:[]};F[At].pred.push(rt.id)}delete rt.succ}for(let rt of Object.values(F))rt.action==="del"&&dt.push(rt);for(let rt of dt){let{counter:At,actorId:Ct}=u(rt.id),Nt=tt[Ct],Yt=0,Ce=Nt.length;for(;Yt<Ce;){let Qt=Math.floor((Yt+Ce)/2);Nt[Qt].maxOp<At?Yt=Qt+1:Ce=Qt}if(Yt>=Nt.length)throw new RangeError(`Operation ID ${rt.id} outside of allowed range`);Nt[Yt].ops.push(rt)}for(let rt of xt){rt.ops.sort((At,Ct)=>B(At.id,Ct.id)),rt.startOp=rt.maxOp-rt.ops.length+1,delete rt.maxOp;for(let At=0;At<rt.ops.length;At++){let Ct=rt.ops[At],Nt=`${rt.startOp+At}@${rt.actor}`;if(Ct.id!==Nt)throw new RangeError(`Expected opId ${Nt}, got ${Ct.id}`);delete Ct.id}}}function St(xt,dt){let tt={};for(let Ct=0;Ct<xt.length;Ct++){let Nt=xt[Ct];Nt.deps=[];for(let Yt of Nt.depsNum.map(Ce=>Ce.depsIndex)){if(!xt[Yt]||!xt[Yt].hash)throw new RangeError(`No hash for index ${Yt} while processing index ${Ct}`);let Ce=xt[Yt].hash;Nt.deps.push(Ce),tt[Ce]&&delete tt[Ce]}if(Nt.deps.sort(),delete Nt.depsNum,Nt.extraLen_datatype!==yt.BYTES)throw new RangeError(`Bad datatype for extra bytes: ${yt.BYTES}`);Nt.extraBytes=Nt.extraLen,delete Nt.extraLen_datatype,xt[Ct]=er(mr(Nt)),tt[xt[Ct].hash]=!0}let F=Object.keys(tt).sort(),rt=F.length===dt.length,At=0;for(;rt&&At<F.length;)rt=F[At]===dt[At],At++;if(!rt)throw new RangeError(`Mismatched heads hashes: expected ${dt.join(", ")}, got ${F.join(", ")}`)}function Pt(xt){let{changesColumns:dt,opsColumns:tt,actorIds:F,heads:rt,headsIndexes:At,extraBytes:Ct}=xt;for(let Nt of dt)Ut(Nt);for(let Nt of tt)Ut(Nt);return rr(it,Nt=>{Nt.appendUint53(F.length);for(let Yt of F)Nt.appendHexString(Yt);Nt.appendUint53(rt.length);for(let Yt of rt.sort())Nt.appendRawBytes(m(Yt));se(Nt,dt),se(Nt,tt);for(let Yt of dt)Nt.appendRawBytes(Yt.encoder.buffer);for(let Yt of tt)Nt.appendRawBytes(Yt.encoder.buffer);for(let Yt of At)Nt.appendUint53(Yt);Ct&&Nt.appendRawBytes(Ct)}).bytes}function et(xt){let dt=new D(xt),tt=dr(dt,!0),F=new D(tt.chunkData);if(!dt.done)throw new RangeError("Encoded document has trailing data");if(tt.chunkType!==it)throw new RangeError(`Unexpected chunk type: ${tt.chunkType}`);let rt=[],At=F.readUint53();for(let Be=0;Be<At;Be++)rt.push(F.readHexString());let Ct=[],Nt=[],Yt=F.readUint53();for(let Be=0;Be<Yt;Be++)Ct.push(A(F.readRawBytes(32)));let Ce=Z(F),Qt=Z(F);for(let Be=0;Be<Ce.length;Be++)Ce[Be].buffer=F.readRawBytes(Ce[Be].bufferLen),_e(Ce[Be]);for(let Be=0;Be<Qt.length;Be++)Qt[Be].buffer=F.readRawBytes(Qt[Be].bufferLen),_e(Qt[Be]);if(!F.done)for(let Be=0;Be<Yt;Be++)Nt.push(F.readUint53());let Ee=F.readRawBytes(F.buf.byteLength-F.offset);return{changesColumns:Ce,opsColumns:Qt,actorIds:rt,heads:Ct,headsIndexes:Nt,extraBytes:Ee}}function zt(xt){let{changesColumns:dt,opsColumns:tt,actorIds:F,heads:rt}=et(xt),At=k(dt,F,ee),Ct=Ze(k(tt,F,Xt),!0);return J(At,Ct),St(At,rt),At}function Ut(xt){xt.encoder.buffer.byteLength>=H&&(xt.encoder={buffer:n.deflateRaw(xt.encoder.buffer)},xt.columnId|=pt)}function _e(xt){xt.columnId&pt&&(xt.buffer=n.inflateRaw(xt.buffer),xt.columnId^=pt)}r.exports={COLUMN_TYPE:q,VALUE_TYPE:yt,ACTIONS:Rt,OBJECT_TYPE:Et,DOC_OPS_COLUMNS:Xt,CHANGE_COLUMNS:Ft,DOCUMENT_COLUMNS:ee,encoderByColumnId:Pr,decoderByColumnId:Dr,makeDecoders:Q,decodeValue:Xe,splitContainers:N,encodeChange:mr,decodeChangeColumns:ur,decodeChange:er,decodeChangeMeta:Gr,decodeChanges:f,encodeDocumentHeader:Pt,decodeDocumentHeader:et,decodeDocument:zt}}),B6=ce((t,r)=>{var{parseOpId:n,copyObject:i}=Us(),{COLUMN_TYPE:u,VALUE_TYPE:p,ACTIONS:g,OBJECT_TYPE:m,DOC_OPS_COLUMNS:A,CHANGE_COLUMNS:y,DOCUMENT_COLUMNS:D,encoderByColumnId:o,decoderByColumnId:M,makeDecoders:W,decodeValue:w,encodeChange:U,decodeChangeColumns:nt,decodeChangeMeta:X,decodeChanges:j,decodeDocumentHeader:it,encodeDocumentHeader:ot}=Bh(),K=600,H=10,q=7,pt=Math.floor(H*K/8),yt=0,Rt=1,Et=2,vt=3,Ft=4,Xt=5,ee=6,ne=7,ae=8,Le=9,de=10,He=13,ze=14,Pe=15,Je=13,Xe=14,Ae=15,xe=y.filter(tt=>["predNum","predActor","predCtr"].includes(tt.columnName)).map(tt=>tt.columnId);function Qe(tt,F,rt){if(F.length===1)tt[F[0]]=rt;else{let At=Object.assign({},tt[F[0]]);Qe(At,F.slice(1),rt),tt[F[0]]=At}}function Ve(tt,F,rt,At){for(let yr of F)yr.decoder.reset();let{objActor:Ct,objCtr:Nt,keyActor:Yt,keyCtr:Ce,keyStr:Qt,idActor:Ee,idCtr:Be,insert:sr}=tt,[O,le,,,qt,pe,$t,re,Re,,,,,De]=F.map(yr=>yr.decoder),ke=0,Ne=0,tr=!1,lr=null,or=null,Ar=null,jr=null,ln=null,cn=null,Vr=0;if(Nt!==null&&!At)for(;(!le.done||!O.done||!Re.done)&&(or=le.readValue(),lr=rt[O.readValue()],Re.skipValues(1),or===null||!lr||or<Nt||or===Nt&&lr<Ct);)ke+=1;if((or!==Nt||lr!==Ct)&&!At)return{found:!0,skipCount:ke,visibleCount:Ne};if(Qt!==null){for(qt.skipValues(ke);!qt.done;){let yr=O.readValue();if(lr=yr===null?null:rt[yr],or=le.readValue(),ln=qt.readValue(),ln!==null&&ln<Qt&&or===Nt&&lr===Ct)ke+=1;else break}return{found:!0,skipCount:ke,visibleCount:Ne}}if($t.skipValues(ke),pe.skipValues(ke),re.skipValues(ke),De.skipValues(ke),jr=$t.readValue(),Ar=rt[pe.readValue()],cn=re.readValue(),Vr=De.readValue(),sr){if(!At&&Ce!==null&&Ce>0&&Yt!==null){for(ke+=1;!$t.done&&!pe.done&&(jr!==Ce||Ar!==Yt)&&(cn&&(tr=!1),Vr===0&&!tr&&(Ne+=1,tr=!0),jr=$t.readValue(),Ar=rt[pe.readValue()],or=le.readValue(),lr=rt[O.readValue()],cn=re.readValue(),Vr=De.readValue(),or===Nt&&lr===Ct);)ke+=1;if(or!==Nt||lr!==Ct||jr!==Ce||Ar!==Yt||!cn)return{found:!1,skipCount:ke,visibleCount:Ne};if(cn&&(tr=!1),Vr===0&&!tr&&(Ne+=1,tr=!0),$t.done||pe.done)return{found:!0,skipCount:ke,visibleCount:Ne};jr=$t.readValue(),Ar=rt[pe.readValue()],or=le.readValue(),lr=rt[O.readValue()],cn=re.readValue(),Vr=De.readValue()}for(;(!cn||jr>Be||jr===Be&&Ar>Ee)&&or===Nt&&lr===Ct&&(ke+=1,cn&&(tr=!1),Vr===0&&!tr&&(Ne+=1,tr=!0),!$t.done&&!pe.done);)jr=$t.readValue(),Ar=rt[pe.readValue()],or=le.readValue(),lr=rt[O.readValue()],cn=re.readValue(),Vr=De.readValue()}else if(Ce!==null&&Ce>0&&Yt!==null){for(;(!cn||jr!==Ce||Ar!==Yt)&&or===Nt&&lr===Ct&&(ke+=1,cn&&(tr=!1),Vr===0&&!tr&&(Ne+=1,tr=!0),!$t.done&&!pe.done);)jr=$t.readValue(),Ar=rt[pe.readValue()],or=le.readValue(),lr=rt[O.readValue()],cn=re.readValue(),Vr=De.readValue();if(or!==Nt||lr!==Ct||jr!==Ce||Ar!==Yt||!cn)return{found:!1,skipCount:ke,visibleCount:Ne}}return{found:!0,skipCount:ke,visibleCount:Ne}}function Ze(tt,F,rt,At){let Ct=tt.blocks[F],Nt=tt.blocks[F+1];return Ct.lastObjectActor!==rt||Ct.lastObjectCtr!==At||Ct.numVisible===void 0?0:Ct.lastVisibleActor===Nt.firstVisibleActor&&Ct.lastVisibleActor!==void 0&&Ct.lastVisibleCtr===Nt.firstVisibleCtr&&Ct.lastVisibleCtr!==void 0?Ct.numVisible-1:Ct.numVisible}function vr(tt,F){let{objActor:rt,objActorNum:At,objCtr:Ct,keyActor:Nt,keyCtr:Yt,keyStr:Ce}=F,Qt=0,Ee=0;if(Ct!==null)for(;Qt<tt.blocks.length-1;){let Be=tt.blocks[Qt].lastObjectActor===void 0?void 0:tt.actorIds[tt.blocks[Qt].lastObjectActor],sr=tt.blocks[Qt].lastObjectCtr;if(sr===null||sr<Ct||sr===Ct&&Be<rt)Qt++;else break}if(Ce!==null){for(;Qt<tt.blocks.length-1;){let{lastObjectActor:sr,lastObjectCtr:O,lastKey:le}=tt.blocks[Qt];if(Ct===O&&At===sr&&le!==void 0&&le<Ce)Qt++;else break}let{skipCount:Be}=Ve(F,tt.blocks[Qt].columns,tt.actorIds,!1);return{blockIndex:Qt,skipCount:Be,visibleCount:0}}else{let Be=Yt===null||Yt===0||Nt===null,sr=Nt===null?null:tt.actorIds.indexOf(Nt),O=!1;for(;;){if(!Be&&!O)for(;Qt<tt.blocks.length-1&&tt.blocks[Qt].lastObjectActor===At&&tt.blocks[Qt].lastObjectCtr===Ct&&!Dr(tt.blocks[Qt].bloom,sr,Yt);){if(tt.blocks[Qt].lastObjectCtr>Ct)throw new RangeError(`Reference element not found: ${Yt}@${Nt}`);Ee+=Ze(tt,Qt,At,Ct),Qt++}let{found:le,skipCount:qt,visibleCount:pe}=Ve(F,tt.blocks[Qt].columns,tt.actorIds,O);if(Qt===tt.blocks.length-1||tt.blocks[Qt].lastObjectActor!==At||tt.blocks[Qt].lastObjectCtr!==Ct){if(le)return{blockIndex:Qt,skipCount:qt,visibleCount:Ee+pe};throw new RangeError(`Reference element not found: ${Yt}@${Nt}`)}else if(le&&qt<tt.blocks[Qt].numOps)return{blockIndex:Qt,skipCount:qt,visibleCount:Ee+pe};O=le&&F.insert,Ee+=Ze(tt,Qt,At,Ct),Qt++}}}function Pr(tt,F,rt){let At=8*tt.byteLength,Ct=rt%At,Nt=F%At,Yt=((rt^F)*16777619>>>0)%At;for(let Ce=0;Ce<q;Ce++)tt[Ct>>>3]|=1<<(Ct&7),Ct=(Ct+Nt)%At,Nt=(Nt+Yt)%At}function Dr(tt,F,rt){let At=8*tt.byteLength,Ct=rt%At,Nt=F%At,Yt=((rt^F)*16777619>>>0)%At;for(let Ce=0;Ce<q;Ce++){if(!(tt[Ct>>>3]&1<<(Ct&7)))return!1;Ct=(Ct+Nt)%At,Nt=(Nt+Yt)%At}return!0}function Q(tt){tt.bloom=new Uint8Array(pt),tt.numOps=0,tt.lastKey=void 0,tt.numVisible=void 0,tt.lastObjectActor=void 0,tt.lastObjectCtr=void 0,tt.firstVisibleActor=void 0,tt.firstVisibleCtr=void 0,tt.lastVisibleActor=void 0,tt.lastVisibleCtr=void 0;for(let Be of tt.columns)Be.decoder.reset();let[F,rt,At,Ct,Nt,Yt,Ce,Qt,,,,,,Ee]=tt.columns.map(Be=>Be.decoder);for(;!Ce.done;){tt.numOps+=1;let Be=F.readValue(),sr=rt.readValue(),O=At.readValue(),le=Ct.readValue(),qt=Nt.readValue(),pe=Yt.readValue(),$t=Ce.readValue(),re=Qt.readValue(),Re=Ee.readValue();if((tt.lastObjectActor!==Be||tt.lastObjectCtr!==sr)&&(tt.numVisible=0,tt.lastObjectActor=Be,tt.lastObjectCtr=sr),qt!==null)tt.lastKey=qt;else if(re||le!==null){tt.lastKey=void 0;let De=re?pe:O,ke=re?$t:le;Pr(tt.bloom,De,ke),Re===0&&(tt.firstVisibleActor===void 0&&(tt.firstVisibleActor=De),tt.firstVisibleCtr===void 0&&(tt.firstVisibleCtr=ke),(tt.lastVisibleActor!==De||tt.lastVisibleCtr!==ke)&&(tt.numVisible+=1,tt.lastVisibleActor=De,tt.lastVisibleCtr=ke))}}}function k(tt,F,rt,At){if(F[Ft]!==null)tt.lastObjectCtr===F[Rt]&&tt.lastObjectActor===F[yt]&&(tt.lastKey===void 0||tt.lastKey<F[Ft])&&(tt.lastKey=F[Ft]);else{let Ct=F[ne]?F[Xt]:F[Et],Nt=F[ne]?F[ee]:F[vt];Pr(tt.bloom,Ct,Nt),(F[Je]===0||At)&&(tt.firstVisibleActor===void 0&&(tt.firstVisibleActor=Ct),tt.firstVisibleCtr===void 0&&(tt.firstVisibleCtr=Nt),tt.lastVisibleActor=Ct,tt.lastVisibleCtr=Nt)}(tt.lastObjectCtr===void 0||F[yt]!==null&&F[Rt]!==null&&(tt.lastObjectCtr===null||tt.lastObjectCtr<F[Rt]||tt.lastObjectCtr===F[Rt]&&rt[tt.lastObjectActor]<rt[F[yt]]))&&(tt.lastObjectActor=F[yt],tt.lastObjectCtr=F[Rt],tt.lastKey=F[Ft]!==null?F[Ft]:void 0,tt.numVisible=0)}function Z(tt){for(let Ct of tt.columns)Ct.decoder.reset();let F=Math.ceil(tt.numOps/(.8*K)),rt=[],At=0;for(let Ct=1;Ct<=F;Ct++){let Nt=Math.ceil(Ct*tt.numOps/F)-At,Yt=tt.columns.map(Qt=>({columnId:Qt.columnId,encoder:o(Qt.columnId)}));ye(Yt,tt.columns,Nt);let Ce={columns:Yt.map(Qt=>{let Ee=M(Qt.columnId,Qt.encoder.buffer);return{columnId:Qt.columnId,decoder:Ee}})};Q(Ce),rt.push(Ce),At+=Nt}return rt}function se(tt){let F=tt[0].columns.map(rt=>({columnId:rt.columnId,encoder:o(rt.columnId)}));for(let rt of tt){for(let At of rt.columns)At.decoder.reset();ye(F,rt.columns,rt.numOps)}return F}function ye(tt,F,rt){if(rt===0)return;let At=0,Ct=-1,Nt=0,Yt=-1,Ce=0;for(let Qt of tt){for(;At<F.length&&F[At].columnId<Qt.columnId;)At++;let Ee=null;At<F.length&&F[At].columnId===Qt.columnId&&F[At].decoder.buf.byteLength>0&&(Ee=F[At].decoder);let Be=Qt.columnId>>4===Ct?Nt:rt;if(Qt.columnId%8===u.GROUP_CARD)Ct=Qt.columnId>>4,Ee?Nt=Qt.encoder.copyFrom(Ee,{count:rt,sumValues:!0}).sum:(Qt.encoder.appendValue(0,rt),Nt=0);else if(Qt.columnId%8===u.VALUE_LEN)if(Ee){if(At+1===F.length||F[At+1].columnId!==Qt.columnId+1)throw new RangeError("VALUE_LEN column without accompanying VALUE_RAW column");Yt=Qt.columnId+1,Ce=Qt.encoder.copyFrom(Ee,{count:Be,sumValues:!0,sumShift:4}).sum}else Qt.encoder.appendValue(null,Be),Yt=Qt.columnId+1,Ce=0;else if(Qt.columnId%8===u.VALUE_RAW){if(Qt.columnId!==Yt)throw new RangeError("VALUE_RAW column without accompanying VALUE_LEN column");Ce>0&&Qt.encoder.appendRawBytes(Ee.readRawBytes(Ce))}else if(Ee)Qt.encoder.copyFrom(Ee,{count:Be});else{let sr=Qt.columnId%8===u.BOOLEAN?!1:null;Qt.encoder.appendValue(sr,Be)}}}function rr(tt,F){let rt=[],At,Ct=-1,Nt=0,Yt=-1,Ce=0;for(let Qt of tt){if(Qt.columnId%8===u.VALUE_RAW){if(Qt.columnId!==Yt)throw new RangeError("unexpected VALUE_RAW column");At=Qt.decoder.readRawBytes(Ce)}else if(Qt.columnId%8===u.GROUP_CARD)Ct=Qt.columnId>>4,Nt=Qt.decoder.readValue()||0,At=Nt;else if(Qt.columnId>>4===Ct){At=[],Qt.columnId%8===u.VALUE_LEN&&(Yt=Qt.columnId+1,Ce=0);for(let Ee=0;Ee<Nt;Ee++){let Be=Qt.decoder.readValue();Qt.columnId%8===u.ACTOR_ID&&F&&typeof Be=="number"&&(Be=F[Be]),Qt.columnId%8===u.VALUE_LEN&&(Ce+=At>>>4),At.push(Be)}}else At=Qt.decoder.readValue(),Qt.columnId%8===u.ACTOR_ID&&F&&typeof At=="number"&&(At=F[At]),Qt.columnId%8===u.VALUE_LEN&&(Yt=Qt.columnId+1,Ce=At>>>4);rt.push(At)}return rt}function dr(tt,F,rt){let At=0,Ct=-1,Nt=0;for(let Yt of tt){for(;At<F.length&&F[At].columnId<Yt.columnId;)At++;if(At<F.length&&F[At].columnId===Yt.columnId){let Ce=rt[At];if(Yt.columnId%8===u.GROUP_CARD)Ct=Yt.columnId>>4,Nt=Ce,Yt.encoder.appendValue(Ce);else if(Yt.columnId>>4===Ct){if(!Array.isArray(Ce)||Ce.length!==Nt)throw new RangeError("bad group value");for(let Qt of Ce)Yt.encoder.appendValue(Qt)}else Yt.columnId%8===u.VALUE_RAW?Ce&&Yt.encoder.appendRawBytes(Ce):Yt.encoder.appendValue(Ce)}else if(Yt.columnId%8===u.GROUP_CARD)Ct=Yt.columnId>>4,Nt=0,Yt.encoder.appendValue(0);else if(Yt.columnId%8!==u.VALUE_RAW){let Ce=Yt.columnId>>4===Ct?Nt:1,Qt=null;Yt.columnId%8===u.BOOLEAN&&(Qt=!1),Yt.columnId%8===u.VALUE_LEN&&(Qt=0),Yt.encoder.appendValue(Qt,Ce)}}}function mr(tt,F){let rt=tt.blocks[F];if(rt.columns[ae].decoder.done){if(F===tt.blocks.length-1)return{docOp:null,blockIndex:F};F+=1,rt=tt.blocks[F];for(let At of rt.columns)At.decoder.reset();return{docOp:rr(rt.columns),blockIndex:F}}else return{docOp:rr(rt.columns),blockIndex:F}}function ur(tt,F){for(;F.changeIndex<F.changes.length-1&&(!F.columns||F.columns[ae].decoder.done);){F.changeIndex+=1;let At=F.changes[F.changeIndex];F.columns=W(At.columns,y),F.opCtr=At.startOp,F.columns[ae].decoder.done&&(At.maxOp=At.startOp-1),St(tt,F.columns);let{actorIds:Ct,actorTable:Nt}=Pt(tt.actorIds,At);tt.actorIds=Ct,F.actorTable=Nt,F.actorIndex=tt.actorIds.indexOf(At.actorIds[0])}if(F.columns[ae].decoder.done){F.done=!0,F.nextOp=null;return}F.nextOp=rr(F.columns,F.actorTable),F.nextOp[Xt]=F.actorIndex,F.nextOp[ee]=F.opCtr,F.changes[F.changeIndex].maxOp=F.opCtr,F.opCtr>tt.maxOp&&(tt.maxOp=F.opCtr),F.opCtr+=1;let rt=F.nextOp;if(rt[Rt]===null&&rt[yt]!==null||rt[Rt]!==null&&rt[yt]===null)throw new RangeError(`Mismatched object reference: (${rt[Rt]}, ${rt[yt]})`);if(rt[vt]===null&&rt[Et]!==null||rt[vt]===0&&rt[Et]!==null||rt[vt]>0&&rt[Et]===null)throw new RangeError(`Mismatched operation key: (${rt[vt]}, ${rt[Et]})`)}function er(tt,F){return F==="list"||F==="text"?{objectId:tt,type:F,edits:[]}:{objectId:tt,type:F,props:{}}}function Gr(tt,F,rt=1){let At=n(tt),Ct=n(F);return At.actorId===Ct.actorId&&At.counter+rt===Ct.counter}function Lr(tt,F){if(tt.length===0){tt.push(F);return}let rt=tt[tt.length-1];rt.action==="insert"&&F.action==="insert"&&rt.index===F.index-1&&rt.value.type==="value"&&F.value.type==="value"&&rt.elemId===rt.opId&&F.elemId===F.opId&&Gr(rt.elemId,F.elemId,1)&&rt.value.datatype===F.value.datatype&&typeof rt.value.value==typeof F.value.value?(rt.action="multi-insert",F.value.datatype&&(rt.datatype=F.value.datatype),rt.values=[rt.value.value,F.value.value],delete rt.value,delete rt.opId):rt.action==="multi-insert"&&F.action==="insert"&&rt.index+rt.values.length===F.index&&F.value.type==="value"&&F.elemId===F.opId&&Gr(rt.elemId,F.elemId,rt.values.length)&&rt.datatype===F.value.datatype&&typeof rt.values[0]==typeof F.value.value?rt.values.push(F.value.value):rt.action==="remove"&&F.action==="remove"&&rt.index===F.index?rt.count+=F.count:tt.push(F)}function Br(tt,F,rt,At,Ct,Nt){let Yt=!1;if(Nt)for(;!Yt&&tt.length>0;){let Ce=tt[tt.length-1];if((Ce.action==="insert"||Ce.action==="update")&&Ce.index===F)tt.pop(),Yt=Ce.action==="insert";else if(Ce.action==="multi-insert"&&Ce.index+Ce.values.length-1===F)Ce.values.pop(),Yt=!0;else break}Yt?Lr(tt,{action:"insert",index:F,elemId:rt,opId:At,value:Ct}):Lr(tt,{action:"update",index:F,opId:At,value:Ct})}function N(tt,F,rt){let At=[];for(;tt.length>0;){let Nt=tt[tt.length-1];if(Nt.action==="insert"){if(Nt.index!==F)throw new RangeError("last edit has unexpected index");At.unshift(tt.pop());break}else if(Nt.action==="update"){if(Nt.index!==F)throw new RangeError("last edit has unexpected index");At.unshift(tt.pop())}else throw new RangeError("last edit has unexpected action")}let Ct=!0;for(let Nt of At)Br(tt,F,rt,Nt.opId,Nt.value,Ct),Ct=!1}function f(tt,F,rt,At,Ct,Nt,Yt,Ce){let Qt=!F,Ee=At[ae]<g.length?m[g[At[ae]]]:null,Be=`${At[ee]}@${Ct.actorIds[At[Xt]]}`,sr=At[ne]?At[Xt]:At[Et],O=At[ne]?At[ee]:At[vt],le=At[Ft]?At[Ft]:`${O}@${Ct.actorIds[sr]}`;At[ae]%2===0&&!Ct.objectMeta[Be]&&(Ct.objectMeta[Be]={parentObj:rt,parentKey:le,opId:Be,type:Ee,children:{}},Qe(Ct.objectMeta,[rt,"children",le,Be],{objectId:Be,type:Ee,props:{}}));let qt=!Nt[le];Nt[le]||(Nt[le]={visibleOps:[],hasChild:!1});let pe=Ce!==void 0&&At[Je]>0;pe||(Nt[le].visibleOps.push(At),Nt[le].hasChild=Nt[le].hasChild||At[ae]%2===0);let $t=Ct.objectMeta[rt].children[le];if(Nt[le].hasChild||$t&&Object.keys($t).length>0){let ke={};for(let Ne of Nt[le].visibleOps){let tr=`${Ne[ee]}@${Ct.actorIds[Ne[Xt]]}`;if(g[Ne[ae]]==="set")ke[tr]=Object.assign({type:"value"},w(Ne[Le],Ne[de]));else if(Ne[ae]%2===0){let lr=Ne[ae]<g.length?m[g[Ne[ae]]]:null;ke[tr]=er(tr,lr)}}Qe(Ct.objectMeta,[rt,"children",le],ke)}let re,Re;if(pe&&g[At[ae]]==="set"&&(At[Le]&15)===p.COUNTER){Nt[le]||(Nt[le]={visibleOps:[],hasChild:!1}),Nt[le].counterStates||(Nt[le].counterStates={});let ke=Nt[le].counterStates,Ne={opId:Be,value:w(At[Le],At[de]).value,succs:{}};for(let tr=0;tr<At[Je];tr++){let lr=`${At[Ae][tr]}@${Ct.actorIds[At[Xe][tr]]}`;ke[lr]=Ne,Ne.succs[lr]=!0}}else if(g[At[ae]]==="inc"){if(!Nt[le]||!Nt[le].counterStates||!Nt[le].counterStates[Be])throw new RangeError(`increment operation ${Be} for unknown counter`);let ke=Nt[le].counterStates[Be];ke.value+=w(At[Le],At[de]).value,delete ke.succs[Be],Object.keys(ke.succs).length===0&&(re=ke.opId,Re={type:"value",datatype:"counter",value:ke.value})}else pe||(g[At[ae]]==="set"?(re=Be,Re=Object.assign({type:"value"},w(At[Le],At[de]))):At[ae]%2===0&&(tt[Be]||(tt[Be]=er(Be,Ee)),re=Be,Re=tt[Be]));tt[rt]||(tt[rt]=er(rt,Ct.objectMeta[rt].type));let De=tt[rt];if(At[Ft]===null)if(Ce===0&&!Qt&&Nt[le].action==="insert"&&(Nt[le].action="update",N(De.edits,Yt,le),F&&F.lastObjectActor===At[yt]&&F.lastObjectCtr===At[Rt]&&(F.numVisible-=1)),Re)if(!Nt[le].action&&(Ce===void 0||Qt))Nt[le].action="insert",Lr(De.edits,{action:"insert",index:Yt,elemId:le,opId:re,value:Re}),F&&F.lastObjectActor===At[yt]&&F.lastObjectCtr===At[Rt]&&(F.numVisible+=1);else if(Nt[le].action==="remove"){let ke=De.edits[De.edits.length-1];if(ke.action!=="remove")throw new RangeError("last edit has unexpected type");ke.count>1?ke.count-=1:De.edits.pop(),Nt[le].action="update",Br(De.edits,Yt,le,re,Re,!0),F&&F.lastObjectActor===At[yt]&&F.lastObjectCtr===At[Rt]&&(F.numVisible+=1)}else Br(De.edits,Yt,le,re,Re,!Nt[le].action),Nt[le].action||(Nt[le].action="update");else Ce===0&&!Nt[le].action&&(Nt[le].action="remove",Lr(De.edits,{action:"remove",index:Yt,count:1}),F&&F.lastObjectActor===At[yt]&&F.lastObjectCtr===At[Rt]&&(F.numVisible-=1));else(Re||!Qt)&&((qt||!De.props[At[Ft]])&&(De.props[At[Ft]]={}),Re&&(De.props[At[Ft]][re]=Re))}function B(tt,F,rt,At,Ct,Nt,Yt){let Ce=At.nextOp,Qt=Ce[ne],Ee=Ce[yt],Be=Ce[Rt],sr=Ee===null?"_root":`${Be}@${Ct.actorIds[Ee]}`,O=At.actorIndex,le=Ct.actorIds[O],qt=!1,pe=!1,$t={},re;({docOp:re,blockIndex:Yt}=mr(Ct,Yt));let Re=re===null?0:1,De=re===null?0:re[Je],ke=null,Ne=[],tr=[],lr=[],or=null;for(At.objectIds.add(sr);;){if(Ne.length===0){qt=!1;let yr=At.nextOp;for(;!At.done&&yr[Xt]===O&&yr[ne]===Qt&&yr[yt]===Ce[yt]&&yr[Rt]===Ce[Rt];){let Tr=Ne.length>0?Ne[Ne.length-1]:null,gn=!1;for(let Kn=0;Kn<yr[He];Kn++)for(let Qr of Ne)yr[ze][Kn]===Qr[Xt]&&yr[Pe][Kn]===Qr[ee]&&(gn=!0);if(yr!==Ce&&!(Qt&&Tr!==null&&yr[Ft]===null&&yr[Et]===Tr[Xt]&&yr[vt]===Tr[ee])&&!(!Qt&&Tr!==null&&yr[Ft]!==null&&yr[Ft]===Tr[Ft]&&!gn)&&!(!Qt&&Tr!==null&&yr[Ft]===null&&Tr[Ft]===null&&yr[Et]===Tr[Et]&&yr[vt]===Tr[vt]&&!gn)&&!(!Qt&&Tr===null&&yr[Ft]===null&&re&&re[ne]&&re[Ft]===null&&re[Xt]===yr[Et]&&re[ee]===yr[vt])&&!(!Qt&&Tr===null&&yr[Ft]!==null&&or!==null&&or<yr[Ft]))break;or=yr!==null?yr[Ft]:null,Ne.push(At.nextOp),tr.push(At.columns),lr.push(new Array(At.nextOp[He])),ur(Ct,At),yr=At.nextOp}}Ne.length>0&&(ke=Ne[0]);let Ar=re&&re[yt]===ke[yt]&&re[Rt]===ke[Rt],jr=re&&re[Ft]!==null&&re[Ft]===ke[Ft],ln=re&&re[Ft]===null&&ke[Ft]===null&&(!re[ne]&&re[Et]===ke[Et]&&re[vt]===ke[vt]||re[ne]&&re[Xt]===ke[Et]&&re[ee]===ke[vt]);if(Ne.length===0&&!(Ar&&(jr||ln)))break;let cn=!1,Vr=0;if(Qt||!Ar||re[Ft]===null&&ke[Ft]!==null||re[Ft]!==null&&ke[Ft]!==null&&ke[Ft]<re[Ft]){if(Vr=Ne.length,!Ar&&!qt&&ke[Ft]===null&&!ke[ne])throw new RangeError(`could not find list element with ID: ${ke[vt]}@${Ct.actorIds[ke[Et]]}`)}else if(jr||ln||qt){for(let yr=0;yr<Ne.length;yr++){let Tr=Ne[yr];for(let gn=0;gn<Tr[He];gn++)if(Tr[ze][gn]===re[Xt]&&Tr[Pe][gn]===re[ee]){let Kn=0;for(;Kn<re[Je]&&(re[Ae][Kn]<Tr[ee]||re[Ae][Kn]===Tr[ee]&&Ct.actorIds[re[Xe][Kn]]<le);)Kn++;re[Ae].splice(Kn,0,Tr[ee]),re[Xe].splice(Kn,0,O),re[Je]++,lr[yr][gn]=!0;break}}if(ln&&(qt=!0),qt&&!ln)Vr=Ne.length;else if(Ne.length===0||re[ee]<ke[ee]||re[ee]===ke[ee]&&Ct.actorIds[re[Xt]]<le){cn=!0,f(tt,F,sr,re,Ct,$t,Nt,De);for(let yr=Ne.length-1;yr>=0;yr--){let Tr=!0;for(let gn=0;gn<Ne[yr][He];gn++)lr[yr][gn]||(Tr=!1);g[Ne[yr][ae]]==="del"&&Tr&&(Ne.splice(yr,1),tr.splice(yr,1),lr.splice(yr,1))}}else{if(re[ee]===ke[ee]&&Ct.actorIds[re[Xt]]===le)throw new RangeError(`duplicate operation ID: ${ke[ee]}@${le}`);Vr=1}}else cn=!0;if(cn&&(dr(rt,Ct.blocks[Yt].columns,re),k(F,re,Ct.actorIds,!1),re[ne]&&pe&&(pe=!1,Nt++),re[Je]===0&&(pe=!0),F.numOps++,{docOp:re,blockIndex:Yt}=mr(Ct,Yt),re!==null&&(Re++,De=re[Je])),Vr>0){for(let yr=0;yr<Vr;yr++){let Tr=Ne[yr];for(let gn=0;gn<Tr[He];gn++)if(!lr[yr][gn])throw new RangeError(`no matching operation for pred: ${Tr[Pe][gn]}@${Ct.actorIds[Tr[ze][gn]]}`);dr(rt,tr[yr],Tr),k(F,Tr,Ct.actorIds,!0),f(tt,F,sr,Tr,Ct,$t,Nt),Tr[ne]?(pe=!1,Nt++):pe=!0}Vr===Ne.length?(Ne.length=0,tr.length=0,lr.length=0):(Ne.splice(0,Vr),tr.splice(0,Vr),lr.splice(0,Vr)),F.numOps+=Vr}}return re&&(dr(rt,Ct.blocks[Yt].columns,re),F.numOps++,k(F,re,Ct.actorIds,!1)),{docOpsConsumed:Re,blockIndex:Yt}}function J(tt,F,rt){let[At,Ct,Nt,Yt,Ce,Qt,Ee,Be]=F.nextOp,sr=At===null?null:rt.actorIds[At],O=Nt===null?null:rt.actorIds[Nt],le={objActor:sr,objActorNum:At,objCtr:Ct,keyActor:O,keyActorNum:Nt,keyCtr:Yt,keyStr:Ce,idActor:rt.actorIds[Qt],idCtr:Ee,insert:Be,objId:sr===null?"_root":`${Ct}@${sr}`},{blockIndex:qt,skipCount:pe,visibleCount:$t}=vr(rt,le),re=rt.blocks[qt];for(let Ar of re.columns)Ar.decoder.reset();let Re=pe===0||re.firstVisibleActor===void 0||!Be&&re.firstVisibleActor===Nt&&re.firstVisibleCtr===Yt,De={columns:void 0,bloom:new Uint8Array(re.bloom),numOps:pe,lastKey:re.lastKey,numVisible:re.numVisible,lastObjectActor:re.lastObjectActor,lastObjectCtr:re.lastObjectCtr,firstVisibleActor:Re?void 0:re.firstVisibleActor,firstVisibleCtr:Re?void 0:re.firstVisibleCtr,lastVisibleActor:void 0,lastVisibleCtr:void 0},ke=re.columns.map(Ar=>({columnId:Ar.columnId,encoder:o(Ar.columnId)}));ye(ke,re.columns,pe);let{blockIndex:Ne,docOpsConsumed:tr}=B(tt,De,ke,F,rt,$t,qt),lr=rt.blocks[Ne],or=-pe-tr;for(let Ar=qt;Ar<=Ne;Ar++)or+=rt.blocks[Ar].numOps;ye(ke,lr.columns,or),De.numOps+=or;for(let Ar of lr.columns)if(!Ar.decoder.done)throw new RangeError(`excess ops in column ${Ar.columnId}`);if(De.columns=ke.map(Ar=>{let jr=M(Ar.columnId,Ar.encoder.buffer);return{columnId:Ar.columnId,decoder:jr}}),qt===Ne&&De.numOps<=K)or>0&&re.lastVisibleActor!==void 0&&re.lastVisibleCtr!==void 0&&(De.lastVisibleActor=re.lastVisibleActor,De.lastVisibleCtr=re.lastVisibleCtr),rt.blocks[qt]=De;else{let Ar=Z(De);rt.blocks.splice(qt,Ne-qt+1,...Ar)}}function St(tt,F){if(F[yt].columnId!==y[yt].columnId||y[yt].columnName!=="objActor"||F[Rt].columnId!==y[Rt].columnId||y[Rt].columnName!=="objCtr"||F[Et].columnId!==y[Et].columnId||y[Et].columnName!=="keyActor"||F[vt].columnId!==y[vt].columnId||y[vt].columnName!=="keyCtr"||F[Ft].columnId!==y[Ft].columnId||y[Ft].columnName!=="keyStr"||F[Xt].columnId!==y[Xt].columnId||y[Xt].columnName!=="idActor"||F[ee].columnId!==y[ee].columnId||y[ee].columnName!=="idCtr"||F[ne].columnId!==y[ne].columnId||y[ne].columnName!=="insert"||F[ae].columnId!==y[ae].columnId||y[ae].columnName!=="action"||F[Le].columnId!==y[Le].columnId||y[Le].columnName!=="valLen"||F[de].columnId!==y[de].columnId||y[de].columnName!=="valRaw"||F[He].columnId!==y[He].columnId||y[He].columnName!=="predNum"||F[ze].columnId!==y[ze].columnId||y[ze].columnName!=="predActor"||F[Pe].columnId!==y[Pe].columnId||y[Pe].columnName!=="predCtr")throw new RangeError("unexpected columnId");let rt=tt.blocks[0].columns;if(!F.every(At=>xe.includes(At.columnId)||rt.find(Ct=>Ct.columnId===At.columnId))){let At=rt.map(Ct=>({columnId:Ct.columnId}));for(let Ct of F){let{columnId:Nt}=Ct;!xe.includes(Nt)&&!rt.find(Yt=>Yt.columnId===Nt)&&At.push({columnId:Nt})}At.sort((Ct,Nt)=>Ct.columnId-Nt.columnId);for(let Ct=0;Ct<tt.blocks.length;Ct++){let Nt=i(tt.blocks[Ct]);Nt.columns=W(Nt.columns.map(Yt=>({columnId:Yt.columnId,buffer:Yt.decoder.buf})),At),tt.blocks[Ct]=Nt}}}function Pt(tt,F){if(tt.indexOf(F.actorIds[0])<0){if(F.seq!==1)throw new RangeError(`Seq ${F.seq} is the first change for actor ${F.actorIds[0]}`);tt=tt.concat([F.actorIds[0]])}let rt=[];for(let At of F.actorIds){let Ct=tt.indexOf(At);if(Ct<0)throw new RangeError(`actorId ${At} is not known to document`);rt.push(Ct)}return{actorIds:tt,actorTable:rt}}function et(tt,F,rt){for(let At of F){let Ct=rt.objectMeta[At],Nt=null,Yt=!1;for(;;){let Ce=Nt&&Object.keys(Ct.children[Nt.parentKey]).length>0;if(tt[At]||(tt[At]=er(At,Ct.type)),Nt&&Ce)if(Ct.type==="list"||Ct.type==="text"){for(let Qt of tt[At].edits)Qt.opId&&Ct.children[Nt.parentKey][Qt.opId]&&(Yt=!0);if(!Yt){let Qt=n(At),Ee=n(Nt.parentKey),Be={objActor:Qt.actorId,objCtr:Qt.counter,keyActor:Ee.actorId,keyCtr:Ee.counter,objActorNum:rt.actorIds.indexOf(Qt.actorId),keyActorNum:rt.actorIds.indexOf(Ee.actorId),keyStr:null,insert:!1,objId:At},{visibleCount:sr}=vr(rt,Be);for(let[O,le]of Object.entries(Ct.children[Nt.parentKey])){let qt=le;le.objectId&&(tt[le.objectId]||(tt[le.objectId]=er(le.objectId,le.type)),qt=tt[le.objectId]);let pe={action:"update",index:sr,opId:O,value:qt};Lr(tt[At].edits,pe)}}}else{tt[At].props[Nt.parentKey]||(tt[At].props[Nt.parentKey]={});let Qt=tt[At].props[Nt.parentKey];for(let[Ee,Be]of Object.entries(Ct.children[Nt.parentKey]))Qt[Ee]?Yt=!0:Be.objectId?(tt[Be.objectId]||(tt[Be.objectId]=er(Be.objectId,Be.type)),Qt[Ee]=tt[Be.objectId]):Qt[Ee]=Be}if(Yt||!Ct.parentObj||Nt&&!Ce)break;Nt=Ct,At=Ct.parentObj,Ct=rt.objectMeta[At]}}return tt}function zt(tt,F,rt,At,Ct){let Nt=new Set(rt.heads),Yt=new Set,Ce=i(rt.clock),Qt=[],Ee=[];for(let Be of F){if(rt.changeIndexByHash[Be.hash]!==void 0||Yt.has(Be.hash))continue;let sr=(Ce[Be.actor]||0)+1,O=!0;for(let le of Be.deps){let qt=rt.changeIndexByHash[le];(qt===void 0||qt===-1)&&!Yt.has(le)&&(O=!1)}if(!O)Ee.push(Be);else if(Be.seq<sr){if(Ct)throw new RangeError(`Reuse of sequence number ${Be.seq} for actor ${Be.actor}`);return[[],F]}else{if(Be.seq>sr)throw new RangeError(`Skipped sequence number ${sr} for actor ${Be.actor}`);Ce[Be.actor]=Be.seq,Yt.add(Be.hash);for(let le of Be.deps)Nt.delete(le);Nt.add(Be.hash),Qt.push(Be)}}if(Qt.length>0){let Be={changes:Qt,changeIndex:-1,objectIds:At};for(ur(rt,Be);!Be.done;)J(tt,Be,rt);rt.heads=[...Nt].sort(),rt.clock=Ce}return[Qt,Ee]}function Ut(tt){for(let Be of tt.blocks[0].columns)Be.decoder.reset();let F={},rt=null,At=0,Ct={_root:{objectId:"_root",type:"map",props:{}}},Nt=null,Yt=null,Ce="_root",Qt=!1,Ee=0;for(;{docOp:rt,blockIndex:At}=mr(tt,At),rt!==null;){(rt[yt]!==Nt||rt[Rt]!==Yt)&&(Ce=`${rt[Rt]}@${tt.actorIds[rt[yt]]}`,Nt=rt[yt],Yt=rt[Rt],F={},Ee=0,Qt=!1),rt[ne]&&Qt&&(Qt=!1,Ee++),rt[Je]===0&&(Qt=!0),rt[ee]>tt.maxOp&&(tt.maxOp=rt[ee]);for(let Be=0;Be<rt[Je];Be++)rt[Ae][Be]>tt.maxOp&&(tt.maxOp=rt[Ae][Be]);f(Ct,null,Ce,rt,tt,F,Ee,rt[Je])}return Ct._root}function _e(tt){let F=W(tt.changesColumns,D),rt=F[0].decoder,At=F[1].decoder,Ct=F[5].decoder,Nt=F[6].decoder;if(F[0].columnId!==D[0].columnId||D[0].columnName!=="actor"||F[1].columnId!==D[1].columnId||D[1].columnName!=="seq"||F[5].columnId!==D[5].columnId||D[5].columnName!=="depsNum"||F[6].columnId!==D[6].columnId||D[6].columnName!=="depsIndex")throw new RangeError("unexpected columnId");let Yt=0,Ce={},Qt=[],Ee=new Set;for(;!rt.done;){let O=rt.readValue(),le=At.readValue(),qt=Ct.readValue(),pe=tt.actorIds[O];if(le!==1&&le!==Ce[pe]+1)throw new RangeError(`Expected seq ${Ce[pe]+1}, got ${le} for actor ${pe}`);Qt.push(O),Ce[pe]=le,Ee.add(Yt);for(let $t=0;$t<qt;$t++)Ee.delete(Nt.readValue());Yt++}let Be=[...Ee].map(O=>tt.actorIds[Qt[O]]).sort();for(let O of F)O.decoder.reset();let sr=F.map(O=>({columnId:O.columnId,encoder:o(O.columnId)}));return ye(sr,F,Yt),{clock:Ce,headActors:Be,encoders:sr,numChanges:Yt}}function xt(tt,F,rt,At){dr(tt,D,[rt.indexOf(F.actor),F.seq,F.maxOp,F.time,F.message,F.deps.length,F.deps.map(Ct=>At[Ct]),F.extraBytes?F.extraBytes.byteLength<<4|p.BYTES:p.BYTES,F.extraBytes])}var dt=class vp{constructor(F){if(this.maxOp=0,this.haveHashGraph=!1,this.changes=[],this.changeIndexByHash={},this.dependenciesByHash={},this.dependentsByHash={},this.hashesByActor={},this.actorIds=[],this.heads=[],this.clock={},this.queue=[],this.objectMeta={_root:{parentObj:null,parentKey:null,opId:null,type:"map",children:{}}},F){let rt=it(F),{clock:At,headActors:Ct,encoders:Nt,numChanges:Yt}=_e(rt);if(this.binaryDoc=F,this.changes=new Array(Yt),this.actorIds=rt.actorIds,this.heads=rt.heads,this.clock=At,this.changesEncoders=Nt,this.extraBytes=rt.extraBytes,rt.heads.length===1&&Ct.length===1&&(this.hashesByActor[Ct[0]]=[],this.hashesByActor[Ct[0]][At[Ct[0]]-1]=rt.heads[0]),rt.heads.length===rt.headsIndexes.length)for(let Qt=0;Qt<rt.heads.length;Qt++)this.changeIndexByHash[rt.heads[Qt]]=rt.headsIndexes[Qt];else if(rt.heads.length===1)this.changeIndexByHash[rt.heads[0]]=Yt-1;else for(let Qt of rt.heads)this.changeIndexByHash[Qt]=-1;this.blocks=[{columns:W(rt.opsColumns,A)}],Q(this.blocks[0]),this.blocks[0].numOps>K&&(this.blocks=Z(this.blocks[0]));let Ce={blocks:this.blocks,actorIds:this.actorIds,objectMeta:this.objectMeta,maxOp:0};this.initPatch=Ut(Ce),this.maxOp=Ce.maxOp}else this.haveHashGraph=!0,this.changesEncoders=D.map(rt=>({columnId:rt.columnId,encoder:o(rt.columnId)})),this.blocks=[{columns:W([],A),bloom:new Uint8Array(pt),numOps:0,lastKey:void 0,numVisible:void 0,lastObjectActor:void 0,lastObjectCtr:void 0,firstVisibleActor:void 0,firstVisibleCtr:void 0,lastVisibleActor:void 0,lastVisibleCtr:void 0}]}clone(){let F=new vp;return F.maxOp=this.maxOp,F.haveHashGraph=this.haveHashGraph,F.changes=this.changes.slice(),F.changeIndexByHash=i(this.changeIndexByHash),F.dependenciesByHash=i(this.dependenciesByHash),F.dependentsByHash=Object.entries(this.dependentsByHash).reduce((rt,[At,Ct])=>(rt[At]=Ct.slice(),rt),{}),F.hashesByActor=Object.entries(this.hashesByActor).reduce((rt,[At,Ct])=>(rt[At]=Ct.slice(),rt),{}),F.actorIds=this.actorIds,F.heads=this.heads,F.clock=this.clock,F.blocks=this.blocks,F.objectMeta=this.objectMeta,F.queue=this.queue,F}applyChanges(F,rt=!1){let At=F.map(Be=>{let sr=nt(Be);return sr.buffer=Be,sr}),Ct={_root:{objectId:"_root",type:"map",props:{}}},Nt={maxOp:this.maxOp,changeIndexByHash:this.changeIndexByHash,actorIds:this.actorIds,heads:this.heads,clock:this.clock,blocks:this.blocks.slice(),objectMeta:Object.assign({},this.objectMeta)},Yt=this.queue.length===0?At:At.concat(this.queue),Ce=[],Qt=new Set;for(;;){let[Be,sr]=zt(Ct,Yt,Nt,Qt,this.haveHashGraph);Yt=sr;for(let O=0;O<Be.length;O++)Nt.changeIndexByHash[Be[O].hash]=this.changes.length+Ce.length+O;if(Be.length>0&&(Ce=Ce.concat(Be)),Yt.length===0)break;if(Be.length===0){if(this.haveHashGraph)break;this.computeHashGraph(),Nt.changeIndexByHash=this.changeIndexByHash}}et(Ct,Qt,Nt);for(let Be of Ce){this.changes.push(Be.buffer),this.hashesByActor[Be.actor]||(this.hashesByActor[Be.actor]=[]),this.hashesByActor[Be.actor][Be.seq-1]=Be.hash,this.changeIndexByHash[Be.hash]=this.changes.length-1,this.dependenciesByHash[Be.hash]=Be.deps,this.dependentsByHash[Be.hash]=[];for(let sr of Be.deps)this.dependentsByHash[sr]||(this.dependentsByHash[sr]=[]),this.dependentsByHash[sr].push(Be.hash);xt(this.changesEncoders,Be,Nt.actorIds,this.changeIndexByHash)}this.maxOp=Nt.maxOp,this.actorIds=Nt.actorIds,this.heads=Nt.heads,this.clock=Nt.clock,this.blocks=Nt.blocks,this.objectMeta=Nt.objectMeta,this.queue=Yt,this.binaryDoc=null,this.initPatch=null;let Ee={maxOp:this.maxOp,clock:this.clock,deps:this.heads,pendingChanges:this.queue.length,diffs:Ct._root};return rt&&At.length===1&&(Ee.actor=At[0].actor,Ee.seq=At[0].seq),Ee}computeHashGraph(){let F=this.save();this.haveHashGraph=!0,this.changes=[],this.changeIndexByHash={},this.dependenciesByHash={},this.dependentsByHash={},this.hashesByActor={},this.clock={};for(let rt of j([F])){let At=U(rt);this.changes.push(At),this.changeIndexByHash[rt.hash]=this.changes.length-1,this.dependenciesByHash[rt.hash]=rt.deps,this.dependentsByHash[rt.hash]=[];for(let Nt of rt.deps)this.dependentsByHash[Nt].push(rt.hash);rt.seq===1&&(this.hashesByActor[rt.actor]=[]),this.hashesByActor[rt.actor].push(rt.hash);let Ct=(this.clock[rt.actor]||0)+1;if(rt.seq!==Ct)throw new RangeError(`Expected seq ${Ct}, got seq ${rt.seq} from actor ${rt.actor}`);this.clock[rt.actor]=rt.seq}}getChanges(F){if(this.haveHashGraph||this.computeHashGraph(),F.length===0)return this.changes.slice();let rt=[],At={},Ct=[];for(let Nt of F){At[Nt]=!0;let Yt=this.dependentsByHash[Nt];if(!Yt)throw new RangeError(`hash not found: ${Nt}`);rt.push(...Yt)}for(;rt.length>0;){let Nt=rt.pop();if(At[Nt]=!0,Ct.push(Nt),!this.dependenciesByHash[Nt].every(Yt=>At[Yt]))break;rt.push(...this.dependentsByHash[Nt])}if(rt.length===0&&this.heads.every(Nt=>At[Nt]))return Ct.map(Nt=>this.changes[this.changeIndexByHash[Nt]]);for(rt=F.slice(),At={};rt.length>0;){let Nt=rt.pop();if(!At[Nt]){let Yt=this.dependenciesByHash[Nt];if(!Yt)throw new RangeError(`hash not found: ${Nt}`);rt.push(...Yt),At[Nt]=!0}}return this.changes.filter(Nt=>!At[X(Nt,!0).hash])}getChangesAdded(F){this.haveHashGraph||this.computeHashGraph();let rt=this.heads.slice(),At={},Ct=[];for(;rt.length>0;){let Nt=rt.pop();!At[Nt]&&F.changeIndexByHash[Nt]===void 0&&(At[Nt]=!0,Ct.push(Nt),rt.push(...this.dependenciesByHash[Nt]))}return Ct.reverse().map(Nt=>this.changes[this.changeIndexByHash[Nt]])}getChangeByHash(F){return this.haveHashGraph||this.computeHashGraph(),this.changes[this.changeIndexByHash[F]]}getMissingDeps(F=[]){this.haveHashGraph||this.computeHashGraph();let rt=new Set(F),At=new Set;for(let Nt of this.queue){At.add(Nt.hash);for(let Yt of Nt.deps)rt.add(Yt)}let Ct=[];for(let Nt of rt)this.changeIndexByHash[Nt]===void 0&&!At.has(Nt)&&Ct.push(Nt);return Ct.sort()}save(){if(this.binaryDoc)return this.binaryDoc;let F=this.changesEncoders.map(At=>({columnId:At.columnId,encoder:o(At.columnId)})),rt=this.changesEncoders.map(At=>{let Ct=M(At.columnId,At.encoder.buffer);return{columnId:At.columnId,decoder:Ct}});return ye(F,rt,this.changes.length),this.binaryDoc=ot({changesColumns:this.changesEncoders,opsColumns:se(this.blocks),actorIds:this.actorIds,heads:this.heads,headsIndexes:this.heads.map(At=>this.changeIndexByHash[At]),extraBytes:this.extraBytes}),this.changesEncoders=F,this.binaryDoc}getPatch(){let F={_root:{parentObj:null,parentKey:null,opId:null,type:"map",children:{}}},rt={blocks:this.blocks,actorIds:this.actorIds,objectMeta:F,maxOp:0},At=this.initPatch?this.initPatch:Ut(rt);return{maxOp:this.maxOp,clock:this.clock,deps:this.heads,pendingChanges:this.queue.length,diffs:At}}};r.exports={MAX_BLOCK_SIZE:K,BackendDoc:dt,bloomFilterContains:Dr}}),R6=ce((t,r)=>{function n(i){if(i.frozen)throw new Error("Attempting to use an outdated Automerge document that has already been updated. Please use the latest document state, or call Automerge.clone() if you really need to use this old document state.");return i.state}r.exports={backendState:n}}),_2=ce((t,r)=>{var{encodeChange:n}=Bh(),{BackendDoc:i}=B6(),{backendState:u}=R6();function p(){return{state:new i,heads:[]}}function g(K){return{state:u(K).clone(),heads:K.heads}}function m(K){K.state=null,K.frozen=!0}function A(K,H){let q=u(K),pt=q.applyChanges(H);return K.frozen=!0,[{state:q,heads:q.heads},pt]}function y(K,H,q){if(K.hashesByActor[H]&&K.hashesByActor[H][q]||!K.haveHashGraph&&(K.computeHashGraph(),K.hashesByActor[H]&&K.hashesByActor[H][q]))return K.hashesByActor[H][q];throw new RangeError(`Unknown change: actorId = ${H}, seq = ${q+1}`)}function D(K,H){let q=u(K);if(H.seq<=q.clock[H.actor])throw new RangeError("Change request has already been applied");if(H.seq>1){let Et=y(q,H.actor,H.seq-2);if(!Et)throw new RangeError(`Cannot find hash of localChange before seq=${H.seq}`);let vt={[Et]:!0};for(let Ft of H.deps)vt[Ft]=!0;H.deps=Object.keys(vt).sort()}let pt=n(H),yt=q.applyChanges([pt],!0);K.frozen=!0;let Rt=y(q,H.actor,H.seq-1);return yt.deps=yt.deps.filter(Et=>Et!==Rt),[{state:q,heads:q.heads},yt,pt]}function o(K){return u(K).save()}function M(K){let H=new i(K);return{state:H,heads:H.heads}}function W(K,H){let q=u(K);return q.applyChanges(H),K.frozen=!0,{state:q,heads:q.heads}}function w(K){return u(K).getPatch()}function U(K){return K.heads}function nt(K){return X(K,[])}function X(K,H){if(!Array.isArray(H))throw new TypeError("Pass an array of hashes to Backend.getChanges()");return u(K).getChanges(H)}function j(K,H){return u(H).getChangesAdded(u(K))}function it(K,H){return u(K).getChangeByHash(H)}function ot(K,H=[]){return u(K).getMissingDeps(H)}r.exports={init:p,clone:g,free:m,applyChanges:A,applyLocalChange:D,save:o,load:M,loadChanges:W,getPatch:w,getHeads:U,getAllChanges:nt,getChanges:X,getChangesAdded:j,getChangeByHash:it,getMissingDeps:ot}}),q6=ce((t,r)=>{var n=_2(),{hexStringToBytes:i,bytesToHexString:u,Encoder:p,Decoder:g}=i2(),{decodeChangeMeta:m}=Bh(),{copyObject:A}=Us(),y=32,D=66,o=67,M=10,W=7,w=class{constructor(vt){if(Array.isArray(vt)){this.numEntries=vt.length,this.numBitsPerEntry=M,this.numProbes=W,this.bits=new Uint8Array(Math.ceil(this.numEntries*this.numBitsPerEntry/8));for(let Ft of vt)this.addHash(Ft)}else if(vt instanceof Uint8Array)if(vt.byteLength===0)this.numEntries=0,this.numBitsPerEntry=0,this.numProbes=0,this.bits=vt;else{let Ft=new g(vt);this.numEntries=Ft.readUint32(),this.numBitsPerEntry=Ft.readUint32(),this.numProbes=Ft.readUint32(),this.bits=Ft.readRawBytes(Math.ceil(this.numEntries*this.numBitsPerEntry/8))}else throw new TypeError("invalid argument")}get bytes(){if(this.numEntries===0)return new Uint8Array(0);let vt=new p;return vt.appendUint32(this.numEntries),vt.appendUint32(this.numBitsPerEntry),vt.appendUint32(this.numProbes),vt.appendRawBytes(this.bits),vt.buffer}getProbes(vt){let Ft=i(vt),Xt=8*this.bits.byteLength;if(Ft.byteLength!==32)throw new RangeError(`Not a 256-bit hash: ${vt}`);let ee=((Ft[0]|Ft[1]<<8|Ft[2]<<16|Ft[3]<<24)>>>0)%Xt,ne=((Ft[4]|Ft[5]<<8|Ft[6]<<16|Ft[7]<<24)>>>0)%Xt,ae=((Ft[8]|Ft[9]<<8|Ft[10]<<16|Ft[11]<<24)>>>0)%Xt,Le=[ee];for(let de=1;de<this.numProbes;de++)ee=(ee+ne)%Xt,ne=(ne+ae)%Xt,Le.push(ee);return Le}addHash(vt){for(let Ft of this.getProbes(vt))this.bits[Ft>>>3]|=1<<(Ft&7)}containsHash(vt){if(this.numEntries===0)return!1;for(let Ft of this.getProbes(vt))if(!(this.bits[Ft>>>3]&1<<(Ft&7)))return!1;return!0}};function U(vt,Ft){if(!Array.isArray(Ft))throw new TypeError("hashes must be an array");vt.appendUint32(Ft.length);for(let Xt=0;Xt<Ft.length;Xt++){if(Xt>0&&Ft[Xt-1]>=Ft[Xt])throw new RangeError("hashes must be sorted");let ee=i(Ft[Xt]);if(ee.byteLength!==y)throw new TypeError("heads hashes must be 256 bits");vt.appendRawBytes(ee)}}function nt(vt){let Ft=vt.readUint32(),Xt=[];for(let ee=0;ee<Ft;ee++)Xt.push(u(vt.readRawBytes(y)));return Xt}function X(vt){let Ft=new p;Ft.appendByte(D),U(Ft,vt.heads),U(Ft,vt.need),Ft.appendUint32(vt.have.length);for(let Xt of vt.have)U(Ft,Xt.lastSync),Ft.appendPrefixedBytes(Xt.bloom);Ft.appendUint32(vt.changes.length);for(let Xt of vt.changes)Ft.appendPrefixedBytes(Xt);return Ft.buffer}function j(vt){let Ft=new g(vt),Xt=Ft.readByte();if(Xt!==D)throw new RangeError(`Unexpected message type: ${Xt}`);let ee=nt(Ft),ne=nt(Ft),ae=Ft.readUint32(),Le={heads:ee,need:ne,have:[],changes:[]};for(let He=0;He<ae;He++){let ze=nt(Ft),Pe=Ft.readPrefixedBytes(Ft);Le.have.push({lastSync:ze,bloom:Pe})}let de=Ft.readUint32();for(let He=0;He<de;He++){let ze=Ft.readPrefixedBytes();Le.changes.push(ze)}return Le}function it(vt){let Ft=new p;return Ft.appendByte(o),U(Ft,vt.sharedHeads),Ft.buffer}function ot(vt){let Ft=new g(vt),Xt=Ft.readByte();if(Xt!==o)throw new RangeError(`Unexpected record type: ${Xt}`);let ee=nt(Ft);return Object.assign(q(),{sharedHeads:ee})}function K(vt,Ft){let Xt=n.getChanges(vt,Ft).map(ee=>m(ee,!0).hash);return{lastSync:Ft,bloom:new w(Xt).bytes}}function H(vt,Ft,Xt){if(Ft.length===0)return Xt.map(Je=>n.getChangeByHash(vt,Je)).filter(Je=>Je!==void 0);let ee={},ne=[];for(let Je of Ft){for(let Xe of Je.lastSync)ee[Xe]=!0;ne.push(new w(Je.bloom))}let ae=n.getChanges(vt,Object.keys(ee)).map(Je=>m(Je,!0)),Le={},de={},He={};for(let Je of ae){Le[Je.hash]=!0;for(let Xe of Je.deps)de[Xe]||(de[Xe]=[]),de[Xe].push(Je.hash);ne.every(Xe=>!Xe.containsHash(Je.hash))&&(He[Je.hash]=!0)}let ze=Object.keys(He);for(;ze.length>0;){let Je=ze.pop();if(de[Je])for(let Xe of de[Je])He[Xe]||(He[Xe]=!0,ze.push(Xe))}let Pe=[];for(let Je of Xt)if(He[Je]=!0,!Le[Je]){let Xe=n.getChangeByHash(vt,Je);Xe&&Pe.push(Xe)}for(let Je of ae)He[Je.hash]&&Pe.push(Je.change);return Pe}function q(){return{sharedHeads:[],lastSentHeads:[],theirHeads:null,theirNeed:null,theirHave:null,sentHashes:{}}}function pt(vt,Ft){return vt.length===Ft.length&&vt.every((Xt,ee)=>Xt===Ft[ee])}function yt(vt,Ft){if(!vt)throw new Error("generateSyncMessage called with no Automerge document");if(!Ft)throw new Error("generateSyncMessage requires a syncState, which can be created with initSyncState()");let{sharedHeads:Xt,lastSentHeads:ee,theirHeads:ne,theirNeed:ae,theirHave:Le,sentHashes:de}=Ft,He=n.getHeads(vt),ze=n.getMissingDeps(vt,ne||[]),Pe=[];if((!ne||ze.every(Qe=>ne.includes(Qe)))&&(Pe=[K(vt,Xt)]),Le&&Le.length>0&&!Le[0].lastSync.every(Qe=>n.getChangeByHash(vt,Qe))){let Qe={heads:He,need:[],have:[{lastSync:[],bloom:new Uint8Array(0)}],changes:[]};return[Ft,X(Qe)]}let Je=Array.isArray(Le)&&Array.isArray(ae)?H(vt,Le,ae):[],Xe=Array.isArray(ee)&&pt(He,ee),Ae=Array.isArray(ne)&&pt(He,ne);if(Xe&&Ae&&Je.length===0)return[Ft,null];Je=Je.filter(Qe=>!de[m(Qe,!0).hash]);let xe={heads:He,have:Pe,need:ze,changes:Je};if(Je.length>0){de=A(de);for(let Qe of Je)de[m(Qe,!0).hash]=!0}return Ft=Object.assign({},Ft,{lastSentHeads:He,sentHashes:de}),[Ft,X(xe)]}function Rt(vt,Ft,Xt){let ee=Ft.filter(ae=>!vt.includes(ae)),ne=Xt.filter(ae=>Ft.includes(ae));return[...new Set([...ee,...ne])].sort()}function Et(vt,Ft,Xt){if(!vt)throw new Error("generateSyncMessage called with no Automerge document");if(!Ft)throw new Error("generateSyncMessage requires a syncState, which can be created with initSyncState()");let{sharedHeads:ee,lastSentHeads:ne,sentHashes:ae}=Ft,Le=null,de=j(Xt),He=n.getHeads(vt);de.changes.length>0&&([vt,Le]=n.applyChanges(vt,de.changes),ee=Rt(He,n.getHeads(vt),ee)),de.changes.length===0&&pt(de.heads,He)&&(ne=de.heads);let ze=de.heads.filter(Je=>n.getChangeByHash(vt,Je));ze.length===de.heads.length?(ee=de.heads,de.heads.length===0&&(ne=[],ae=[])):ee=[...new Set(ze.concat(ee))].sort();let Pe={sharedHeads:ee,lastSentHeads:ne,theirHave:de.have,theirHeads:de.heads,theirNeed:de.need,sentHashes:ae};return[vt,Pe,Le]}r.exports={receiveSyncMessage:Et,generateSyncMessage:yt,encodeSyncMessage:X,decodeSyncMessage:j,initSyncState:q,encodeSyncState:it,decodeSyncState:ot,BloomFilter:w}}),K6=ce((t,r)=>{var{init:n,clone:i,free:u,applyChanges:p,applyLocalChange:g,save:m,load:A,loadChanges:y,getPatch:D,getHeads:o,getAllChanges:M,getChanges:W,getChangesAdded:w,getChangeByHash:U,getMissingDeps:nt}=_2(),{receiveSyncMessage:X,generateSyncMessage:j,encodeSyncMessage:it,decodeSyncMessage:ot,encodeSyncState:K,decodeSyncState:H,initSyncState:q}=q6();r.exports={init:n,clone:i,free:u,applyChanges:p,applyLocalChange:g,save:m,load:A,loadChanges:y,getPatch:D,getHeads:o,getAllChanges:M,getChanges:W,getChangesAdded:w,getChangeByHash:U,getMissingDeps:nt,receiveSyncMessage:X,generateSyncMessage:j,encodeSyncMessage:it,decodeSyncMessage:ot,encodeSyncState:K,decodeSyncState:H,initSyncState:q}}),Z6=ce((t,r)=>{var n=z0(),i=tD(),{OPTIONS:u}=Eu(),{encodeChange:p,decodeChange:g}=Bh(),{isObject:m}=Us(),A=K6();function y(vt){if(typeof vt=="string")vt={actorId:vt};else if(typeof vt>"u")vt={};else if(!m(vt))throw new TypeError(`Unsupported options for init(): ${vt}`);return i.init(Object.assign({backend:A},vt))}function D(vt,Ft){let Xt={message:"Initialization"};return o(y(Ft),Xt,ee=>Object.assign(ee,vt))}function o(vt,Ft,Xt){let[ee]=i.change(vt,Ft,Xt);return ee}function M(vt,Ft){let[Xt]=i.emptyChange(vt,Ft);return Xt}function W(vt,Ft={}){let Xt=A.clone(i.getBackendState(vt,"clone"));return ot(y(Ft),A.getPatch(Xt),Xt,[],Ft)}function w(vt){A.free(i.getBackendState(vt,"free"))}function U(vt,Ft={}){let Xt=A.load(vt);return ot(y(Ft),A.getPatch(Xt),Xt,[vt],Ft)}function nt(vt){return A.save(i.getBackendState(vt,"save"))}function X(vt,Ft){let Xt=i.getBackendState(vt,"merge"),ee=i.getBackendState(Ft,"merge","second"),ne=A.getChangesAdded(Xt,ee),[ae]=K(vt,ne);return ae}function j(vt,Ft){let Xt=i.getBackendState(vt,"getChanges"),ee=i.getBackendState(Ft,"getChanges","second");return A.getChanges(ee,A.getHeads(Xt))}function it(vt){return A.getAllChanges(i.getBackendState(vt,"getAllChanges"))}function ot(vt,Ft,Xt,ee,ne){let ae=i.applyPatch(vt,Ft,Xt),Le=ne.patchCallback||vt[u].patchCallback;return Le&&Le(Ft,vt,ae,!1,ee),ae}function K(vt,Ft,Xt={}){let ee=i.getBackendState(vt,"applyChanges"),[ne,ae]=A.applyChanges(ee,Ft);return[ot(vt,ae,ne,Ft,Xt),ae]}function H(vt,Ft){if(!m(vt)||!m(Ft))return vt===Ft;let Xt=Object.keys(vt).sort(),ee=Object.keys(Ft).sort();if(Xt.length!==ee.length)return!1;for(let ne=0;ne<Xt.length;ne++)if(Xt[ne]!==ee[ne]||!H(vt[Xt[ne]],Ft[ee[ne]]))return!1;return!0}function q(vt){let Ft=i.getActorId(vt),Xt=it(vt);return Xt.map((ee,ne)=>({get change(){return g(ee)},get snapshot(){let ae=A.loadChanges(A.init(),Xt.slice(0,ne+1));return i.applyPatch(y(Ft),A.getPatch(ae),ae)}}))}function pt(vt,Ft){let Xt=i.getBackendState(vt,"generateSyncMessage");return A.generateSyncMessage(Xt,Ft)}function yt(vt,Ft,Xt){let ee=i.getBackendState(vt,"receiveSyncMessage"),[ne,ae,Le]=A.receiveSyncMessage(ee,Ft,Xt);if(!Le)return[vt,ae,Le];let de=null;return vt[u].patchCallback&&(de=A.decodeSyncMessage(Xt).changes),[ot(vt,Le,ne,de,{}),ae,Le]}function Rt(){return A.initSyncState()}function Et(vt){A=vt}r.exports={init:y,from:D,change:o,emptyChange:M,clone:W,free:w,load:U,save:nt,merge:X,getChanges:j,getAllChanges:it,applyChanges:K,encodeChange:p,decodeChange:g,equals:H,getHistory:q,uuid:n,Frontend:i,setDefaultBackend:Et,generateSyncMessage:pt,receiveSyncMessage:yt,initSyncState:Rt,get Backend(){return A}};for(let vt of["getObjectId","getObjectById","getActorId","setActorId","getConflicts","getLastLocalChange","Text","Table","Counter","Observable","Int","Uint","Float64"])r.exports[vt]=i[vt]}),Op=ce((t,r)=>{"use strict";var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,p){u.__proto__=p}||function(u,p){for(let g in p)Object.prototype.hasOwnProperty.call(p,g)&&(u[g]=p[g])},i=class Ap extends Error{constructor(p,g,m){super(p),n(this,Ap.prototype),this.name="GrammarError",this.location=g,m===void 0&&(m=[]),this.diagnostics=m,this.stage=null,this.problems=[["error",p,g,m]]}toString(){let p=super.toString();this.location&&(p+=`
 at `,this.location.source!==void 0&&this.location.source!==null&&(p+=`${this.location.source}:`),p+=`${this.location.start.line}:${this.location.start.column}`);for(let g of this.diagnostics)p+=`
 from `,g.location.source!==void 0&&g.location.source!==null&&(p+=`${g.location.source}:`),p+=`${g.location.start.line}:${g.location.start.column}: ${g.message}`;return p}format(p){let g=p.map(({source:y,text:D})=>({source:y,text:D.split(/\r\n|\n|\r/g)}));function m(y,D,o=""){let M="",W=g.find(({source:U})=>U===y.source),w=y.start;if(W){let U=y.end,nt=W.text[w.line-1],X=(w.line===U.line?U.column:nt.length+1)-w.column||1;o&&(M+=`
note: ${o}`),M+=`
 --> ${y.source}:${w.line}:${w.column}
${"".padEnd(D)} |
${w.line.toString().padStart(D)} | ${nt}
${"".padEnd(D)} | ${"".padEnd(w.column-1)}${"".padEnd(X,"^")}`}else M+=`
 at ${y.source}:${w.line}:${w.column}`,o&&(M+=`: ${o}`);return M}function A(y,D,o,M=[]){let W;o?W=M.reduce((U,{location:nt})=>Math.max(U,nt.start.line),o.start.line):W=Math.max.apply(null,M.map(U=>U.location.start.line)),W=W.toString().length;let w=`${y}: ${D}`;o&&(w+=m(o,W));for(let U of M)w+=m(U.location,W,U.message);return w}return this.problems.filter(y=>y[0]!=="info").map(y=>A(...y)).join(`

`)}};r.exports=i}),_s=ce((t,r)=>{"use strict";var n={build(i){function u(y,...D){return i[y.type](y,...D)}function p(){}function g(y,...D){return u(y.expression,...D)}function m(y){return function(D,...o){D[y].forEach(M=>u(M,...o))}}let A={grammar(y,...D){y.topLevelInitializer&&u(y.topLevelInitializer,...D),y.initializer&&u(y.initializer,...D),y.rules.forEach(o=>u(o,...D))},top_level_initializer:p,initializer:p,rule:g,named:g,choice:m("alternatives"),action:g,sequence:m("elements"),labeled:g,text:g,simple_and:g,simple_not:g,optional:g,zero_or_more:g,one_or_more:g,group:g,semantic_and:p,semantic_not:p,rule_ref:p,literal:p,class:p,any:p};return Object.keys(A).forEach(y=>{Object.prototype.hasOwnProperty.call(i,y)||(i[y]=A[y])}),u}};r.exports=n}),ho=ce((t,r)=>{"use strict";var n=_s(),i={findRule(u,p){for(let g=0;g<u.rules.length;g++)if(u.rules[g].name===p)return u.rules[g]},indexOfRule(u,p){for(let g=0;g<u.rules.length;g++)if(u.rules[g].name===p)return g;return-1},alwaysConsumesOnSuccess(u,p){function g(){return!0}function m(){return!1}let A=n.build({choice(y){return y.alternatives.every(A)},sequence(y){return y.elements.some(A)},simple_and:m,simple_not:m,optional:m,zero_or_more:m,semantic_and:m,semantic_not:m,rule_ref(y){let D=i.findRule(u,y.name);return D?A(D):void 0},literal(y){return y.value!==""},class:g,any:g});return A(p)}};r.exports=i}),P2=ce((t,r)=>{"use strict";var n={PUSH:0,PUSH_EMPTY_STRING:35,PUSH_UNDEFINED:1,PUSH_NULL:2,PUSH_FAILED:3,PUSH_EMPTY_ARRAY:4,PUSH_CURR_POS:5,POP:6,POP_CURR_POS:7,POP_N:8,NIP:9,APPEND:10,WRAP:11,TEXT:12,PLUCK:36,IF:13,IF_ERROR:14,IF_NOT_ERROR:15,WHILE_NOT_ERROR:16,MATCH_ANY:17,MATCH_STRING:18,MATCH_STRING_IC:19,MATCH_CHAR_CLASS:20,MATCH_REGEXP:20,ACCEPT_N:21,ACCEPT_STRING:22,FAIL:23,LOAD_SAVED_POS:24,UPDATE_SAVED_POS:25,CALL:26,RULE:27,SILENT_FAILS_ON:28,SILENT_FAILS_OFF:29};r.exports=n}),O2=ce((t,r)=>{"use strict";var n=_s(),i=ho(),u=Op(),p=1,g=0,m=-1;function A(y){function D(U){return U.match=g}function o(U){return w(U.expression),U.match=p}function M(U){return U.match=w(U.expression)}function W(U,nt){let X=U.length,j=0,it=0;for(let ot=0;ot<X;++ot){let K=w(U[ot]);K===p&&++j,K===m&&++it}return j===X?p:nt?it===X?m:g:it>0?m:g}let w=n.build({rule(U){let nt,X=0;if(typeof U.match>"u"){U.match=g;do if(nt=U.match,U.match=w(U.expression),++X>6)throw new u("Infinity cycle detected when trying to evaluate node match result",U.location);while(nt!==U.match)}return U.match},named:M,choice(U){return U.match=W(U.alternatives,!0)},action:M,sequence(U){return U.match=W(U.elements,!1)},labeled:M,text:M,simple_and:M,simple_not(U){return U.match=-w(U.expression)},optional:o,zero_or_more:o,one_or_more:M,group:M,semantic_and:D,semantic_not:D,rule_ref(U){let nt=i.findRule(y,U.name);return U.match=w(nt)},literal(U){let nt=U.value.length===0?p:g;return U.match=nt},class(U){let nt=U.parts.length===0?m:g;return U.match=nt},any:D});w(y)}A.ALWAYS_MATCH=p,A.SOMETIMES_MATCH=g,A.NEVER_MATCH=m,r.exports=A}),fF=ce((t,r)=>{"use strict";var n=ho(),i=P2(),u=_s(),{ALWAYS_MATCH:p,SOMETIMES_MATCH:g,NEVER_MATCH:m}=O2();function A(y){let D=[],o=[],M=[],W=[];function w(Et){let vt=D.indexOf(Et);return vt===-1?D.push(Et)-1:vt}function U(Et){let vt={value:Et.parts,inverted:Et.inverted,ignoreCase:Et.ignoreCase},Ft=JSON.stringify(vt),Xt=o.findIndex(ee=>JSON.stringify(ee)===Ft);return Xt===-1?o.push(vt)-1:Xt}function nt(Et){let vt=JSON.stringify(Et),Ft=M.findIndex(Xt=>JSON.stringify(Xt)===vt);return Ft===-1?M.push(Et)-1:Ft}function X(Et,vt,Ft){let Xt={predicate:Et,params:vt,body:Ft.code,location:Ft.codeLocation},ee=JSON.stringify(Xt),ne=W.findIndex(ae=>JSON.stringify(ae)===ee);return ne===-1?W.push(Xt)-1:ne}function j(Et){let vt={};return Object.keys(Et).forEach(Ft=>{vt[Ft]=Et[Ft]}),vt}function it(Et,...vt){return Et.concat(...vt)}function ot(Et,vt,Ft,Xt){return Et===p?Ft:Et===m?Xt:vt.concat([Ft.length,Xt.length],Ft,Xt)}function K(Et,vt){return Et.concat([vt.length],vt)}function H(Et,vt,Ft,Xt){let ee=Object.keys(Ft).map(ne=>Xt-Ft[ne]);return[i.CALL,Et,vt,ee.length].concat(ee)}function q(Et,vt,Ft){let Xt=Et.match|0;return it([i.PUSH_CURR_POS],[i.SILENT_FAILS_ON],Rt(Et,{sp:Ft.sp+1,env:j(Ft.env),action:null}),[i.SILENT_FAILS_OFF],ot(vt?-Xt:Xt,[vt?i.IF_ERROR:i.IF_NOT_ERROR],it([i.POP],[vt?i.POP:i.POP_CURR_POS],[i.PUSH_UNDEFINED]),it([i.POP],[vt?i.POP_CURR_POS:i.POP],[i.PUSH_FAILED])))}function pt(Et,vt,Ft){let Xt=X(!0,Object.keys(Ft.env),Et);return it([i.UPDATE_SAVED_POS],H(Xt,0,Ft.env,Ft.sp),ot(Et.match|0,[i.IF],it([i.POP],vt?[i.PUSH_FAILED]:[i.PUSH_UNDEFINED]),it([i.POP],vt?[i.PUSH_UNDEFINED]:[i.PUSH_FAILED])))}function yt(Et){return K([i.WHILE_NOT_ERROR],it([i.APPEND],Et))}let Rt=u.build({grammar(Et){Et.rules.forEach(Rt),Et.literals=D,Et.classes=o,Et.expectations=M,Et.functions=W},rule(Et){Et.bytecode=Rt(Et.expression,{sp:-1,env:{},pluck:[],action:null})},named(Et,vt){let Ft=Et.match|0,Xt=Ft===m?null:nt({type:"rule",value:Et.name});return it([i.SILENT_FAILS_ON],Rt(Et.expression,vt),[i.SILENT_FAILS_OFF],ot(Ft,[i.IF_ERROR],[i.FAIL,Xt],[]))},choice(Et,vt){function Ft(Xt,ee){let ne=Xt[0].match|0,ae=Rt(Xt[0],{sp:ee.sp,env:j(ee.env),action:null});return ne===p?ae:it(ae,Xt.length>1?ot(g,[i.IF_ERROR],it([i.POP],Ft(Xt.slice(1),ee)),[]):[])}return Ft(Et.alternatives,vt)},action(Et,vt){let Ft=j(vt.env),Xt=Et.expression.type!=="sequence"||Et.expression.elements.length===0,ee=Rt(Et.expression,{sp:vt.sp+(Xt?1:0),env:Ft,action:Et}),ne=Et.expression.match|0,ae=Xt&&ne!==m?X(!1,Object.keys(Ft),Et):null;return Xt?it([i.PUSH_CURR_POS],ee,ot(ne,[i.IF_NOT_ERROR],it([i.LOAD_SAVED_POS,1],H(ae,1,Ft,vt.sp+2)),[]),[i.NIP]):ee},sequence(Et,vt){function Ft(Xt,ee){if(Xt.length>0){let ne=Et.elements.length-Xt.length+1;return it(Rt(Xt[0],{sp:ee.sp,env:ee.env,pluck:ee.pluck,action:null}),ot(Xt[0].match|0,[i.IF_NOT_ERROR],Ft(Xt.slice(1),{sp:ee.sp+1,env:ee.env,pluck:ee.pluck,action:ee.action}),it(ne>1?[i.POP_N,ne]:[i.POP],[i.POP_CURR_POS],[i.PUSH_FAILED])))}else{if(ee.pluck.length>0)return it([i.PLUCK,Et.elements.length+1,ee.pluck.length],ee.pluck.map(ne=>ee.sp-ne));if(ee.action){let ne=X(!1,Object.keys(ee.env),ee.action);return it([i.LOAD_SAVED_POS,Et.elements.length],H(ne,Et.elements.length+1,ee.env,ee.sp))}else return it([i.WRAP,Et.elements.length],[i.NIP])}}return it([i.PUSH_CURR_POS],Ft(Et.elements,{sp:vt.sp+1,env:vt.env,pluck:[],action:vt.action}))},labeled(Et,vt){let Ft=vt.env,Xt=Et.label,ee=vt.sp+1;return Xt&&(Ft=j(vt.env),vt.env[Et.label]=ee),Et.pick&&vt.pluck.push(ee),Rt(Et.expression,{sp:vt.sp,env:Ft,action:null})},text(Et,vt){return it([i.PUSH_CURR_POS],Rt(Et.expression,{sp:vt.sp+1,env:j(vt.env),action:null}),ot(Et.match|0,[i.IF_NOT_ERROR],it([i.POP],[i.TEXT]),[i.NIP]))},simple_and(Et,vt){return q(Et.expression,!1,vt)},simple_not(Et,vt){return q(Et.expression,!0,vt)},optional(Et,vt){return it(Rt(Et.expression,{sp:vt.sp,env:j(vt.env),action:null}),ot(-(Et.expression.match|0),[i.IF_ERROR],it([i.POP],[i.PUSH_NULL]),[]))},zero_or_more(Et,vt){let Ft=Rt(Et.expression,{sp:vt.sp+1,env:j(vt.env),action:null});return it([i.PUSH_EMPTY_ARRAY],Ft,yt(Ft),[i.POP])},one_or_more(Et,vt){let Ft=Rt(Et.expression,{sp:vt.sp+1,env:j(vt.env),action:null});return it([i.PUSH_EMPTY_ARRAY],Ft,ot(Et.expression.match|0,[i.IF_NOT_ERROR],it(yt(Ft),[i.POP]),it([i.POP],[i.POP],[i.PUSH_FAILED])))},group(Et,vt){return Rt(Et.expression,{sp:vt.sp,env:j(vt.env),action:null})},semantic_and(Et,vt){return pt(Et,!1,vt)},semantic_not(Et,vt){return pt(Et,!0,vt)},rule_ref(Et){return[i.RULE,n.indexOfRule(y,Et.name)]},literal(Et){if(Et.value.length>0){let vt=Et.match|0,Ft=vt===g||vt===p&&!Et.ignoreCase?w(Et.ignoreCase?Et.value.toLowerCase():Et.value):null,Xt=vt!==p?nt({type:"literal",value:Et.value,ignoreCase:Et.ignoreCase}):null;return ot(vt,Et.ignoreCase?[i.MATCH_STRING_IC,Ft]:[i.MATCH_STRING,Ft],Et.ignoreCase?[i.ACCEPT_N,Et.value.length]:[i.ACCEPT_STRING,Ft],[i.FAIL,Xt])}return[i.PUSH_EMPTY_STRING]},class(Et){let vt=Et.match|0,Ft=vt===g?U(Et):null,Xt=vt!==p?nt({type:"class",value:Et.parts,inverted:Et.inverted,ignoreCase:Et.ignoreCase}):null;return ot(vt,[i.MATCH_CHAR_CLASS,Ft],[i.ACCEPT_N,1],[i.FAIL,Xt])},any(Et){let vt=Et.match|0,Ft=vt!==p?nt({type:"any"}):null;return ot(vt,[i.MATCH_ANY],[i.ACCEPT_N,1],[i.FAIL,Ft])}});Rt(y)}r.exports=A}),dF=ce((t,r)=>{"use strict";var n=class{constructor(i,u,p){this.sp=-1,this.maxSp=-1,this.varName=u,this.ruleName=i,this.type=p}name(i){if(i<0)throw new RangeError(`Rule '${this.ruleName}': The variable stack underflow: attempt to use a variable '${this.varName}<x>' at an index ${i}`);return this.varName+i}push(i){let u=this.name(++this.sp)+" = "+i+";";return this.sp>this.maxSp&&(this.maxSp=this.sp),u}pop(i){return i!==void 0?(this.sp-=i,Array.from({length:i},(u,p)=>this.name(this.sp+1+p))):this.name(this.sp--)}top(){return this.name(this.sp)}index(i){if(i<0)throw new RangeError(`Rule '${this.ruleName}': The variable stack overflow: attempt to get a variable at a negative index ${i}`);return this.name(this.sp-i)}result(){if(this.maxSp<0)throw new RangeError(`Rule '${this.ruleName}': The variable stack is empty, can't get the result'`);return this.name(0)}defines(){return this.maxSp<0?"":this.type+" "+Array.from({length:this.maxSp+1},(i,u)=>this.name(u)).join(", ")+";"}checkedIf(i,u,p){let g=this.sp;if(u(),p){let m=this.sp;if(this.sp=g,p(),m!==this.sp)throw new Error("Rule '"+this.ruleName+"', position "+i+": Branches of a condition can't move the stack pointer differently (before: "+g+", after then: "+m+", after else: "+this.sp+").")}}checkedLoop(i,u){let p=this.sp;if(u(),p!==this.sp)throw new Error("Rule '"+this.ruleName+"', position "+i+": Body of a loop can't move the stack pointer (before: "+p+", after: "+this.sp+").")}};r.exports=n}),L2=ce((t,r)=>{"use strict";r.exports="2.0.1"}),gF=ce(t=>{"use strict";function r(u){return u.charCodeAt(0).toString(16).toUpperCase()}t.hex=r;function n(u){return u.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\v").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,p=>"\\x0"+r(p)).replace(/[\x10-\x1F\x7F-\xFF]/g,p=>"\\x"+r(p)).replace(/[\u0100-\u0FFF]/g,p=>"\\u0"+r(p)).replace(/[\u1000-\uFFFF]/g,p=>"\\u"+r(p))}t.stringEscape=n;function i(u){return u.replace(/\\/g,"\\\\").replace(/\//g,"\\/").replace(/]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\v").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,p=>"\\x0"+r(p)).replace(/[\x10-\x1F\x7F-\xFF]/g,p=>"\\x"+r(p)).replace(/[\u0100-\u0FFF]/g,p=>"\\u0"+r(p)).replace(/[\u1000-\uFFFF]/g,p=>"\\u"+r(p))}t.regexpClassEscape=i}),wF=ce(t=>{var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");t.encode=function(n){if(0<=n&&n<r.length)return r[n];throw new TypeError("Must be between 0 and 63: "+n)}}),bF=ce(t=>{var r=wF(),n=5,i=1<<n,u=i-1,p=i;function g(m){return m<0?(-m<<1)+1:(m<<1)+0}t.encode=function(m){let A="",y,D=g(m);do y=D&u,D>>>=n,D>0&&(y|=p),A+=r.encode(y);while(D>0);return A}}),Lp=ce(t=>{function r(q,pt,yt){if(pt in q)return q[pt];if(arguments.length===3)return yt;throw new Error('"'+pt+'" is a required argument.')}t.getArg=r;var n=(function(){return!("__proto__"in Object.create(null))})();function i(q){return q}function u(q){return g(q)?"$"+q:q}t.toSetString=n?i:u;function p(q){return g(q)?q.slice(1):q}t.fromSetString=n?i:p;function g(q){if(!q)return!1;let pt=q.length;if(pt<9||q.charCodeAt(pt-1)!==95||q.charCodeAt(pt-2)!==95||q.charCodeAt(pt-3)!==111||q.charCodeAt(pt-4)!==116||q.charCodeAt(pt-5)!==111||q.charCodeAt(pt-6)!==114||q.charCodeAt(pt-7)!==112||q.charCodeAt(pt-8)!==95||q.charCodeAt(pt-9)!==95)return!1;for(let yt=pt-10;yt>=0;yt--)if(q.charCodeAt(yt)!==36)return!1;return!0}function m(q,pt){return q===pt?0:q===null?1:pt===null?-1:q>pt?1:-1}function A(q,pt){let yt=q.generatedLine-pt.generatedLine;return yt!==0||(yt=q.generatedColumn-pt.generatedColumn,yt!==0)||(yt=m(q.source,pt.source),yt!==0)||(yt=q.originalLine-pt.originalLine,yt!==0)||(yt=q.originalColumn-pt.originalColumn,yt!==0)?yt:m(q.name,pt.name)}t.compareByGeneratedPositionsInflated=A;var y="http:",D=`${y}//host`;function o(q){return pt=>{let yt=nt(pt),Rt=w(pt),Et=new URL(pt,Rt);q(Et);let vt=Et.toString();return yt==="absolute"?vt:yt==="scheme-relative"?vt.slice(y.length):yt==="path-absolute"?vt.slice(D.length):X(Rt,vt)}}function M(q,pt){return new URL(q,pt).toString()}function W(q,pt){let yt=0;do{let Rt=q+yt++;if(pt.indexOf(Rt)===-1)return Rt}while(!0)}function w(q){let pt=q.split("..").length-1,yt=W("p",q),Rt=`${D}/`;for(let Et=0;Et<pt;Et++)Rt+=`${yt}/`;return Rt}var U=/^[A-Za-z0-9\+\-\.]+:/;function nt(q){return q[0]==="/"?q[1]==="/"?"scheme-relative":"path-absolute":U.test(q)?"absolute":"path-relative"}function X(q,pt){typeof q=="string"&&(q=new URL(q)),typeof pt=="string"&&(pt=new URL(pt));let yt=pt.pathname.split("/"),Rt=q.pathname.split("/");for(Rt.length>0&&!Rt[Rt.length-1]&&Rt.pop();yt.length>0&&Rt.length>0&&yt[0]===Rt[0];)yt.shift(),Rt.shift();return Rt.map(()=>"..").concat(yt).join("/")+pt.search+pt.hash}var j=o(q=>{q.pathname=q.pathname.replace(/\/?$/,"/")}),it=o(q=>{});t.normalize=it;function ot(q,pt){let yt=nt(pt),Rt=nt(q);if(q=j(q),yt==="absolute")return M(pt,void 0);if(Rt==="absolute")return M(pt,q);if(yt==="scheme-relative")return it(pt);if(Rt==="scheme-relative")return M(pt,M(q,D)).slice(y.length);if(yt==="path-absolute")return it(pt);if(Rt==="path-absolute")return M(pt,M(q,D)).slice(D.length);let Et=w(pt+q),vt=M(pt,M(q,Et));return X(Et,vt)}t.join=ot;function K(q,pt){let yt=H(q,pt);return typeof yt=="string"?yt:it(pt)}t.relative=K;function H(q,pt){if(nt(q)!==nt(pt))return null;let yt=w(q+pt),Rt=new URL(q,yt),Et=new URL(pt,yt);try{new URL("",Et.toString())}catch{return null}return Et.protocol!==Rt.protocol||Et.user!==Rt.user||Et.password!==Rt.password||Et.hostname!==Rt.hostname||Et.port!==Rt.port?null:X(Rt,Et)}}),BF=ce(t=>{var r=class Fp{constructor(){this._array=[],this._set=new Map}static fromArray(i,u){let p=new Fp;for(let g=0,m=i.length;g<m;g++)p.add(i[g],u);return p}size(){return this._set.size}add(i,u){let p=this.has(i),g=this._array.length;(!p||u)&&this._array.push(i),p||this._set.set(i,g)}has(i){return this._set.has(i)}indexOf(i){let u=this._set.get(i);if(u>=0)return u;throw new Error('"'+i+'" is not in the set.')}at(i){if(i>=0&&i<this._array.length)return this._array[i];throw new Error("No element indexed by "+i)}toArray(){return this._array.slice()}};t.ArraySet=r}),xF=ce(t=>{var r=Lp();function n(u,p){let g=u.generatedLine,m=p.generatedLine,A=u.generatedColumn,y=p.generatedColumn;return m>g||m==g&&y>=A||r.compareByGeneratedPositionsInflated(u,p)<=0}var i=class{constructor(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}unsortedForEach(u,p){this._array.forEach(u,p)}add(u){n(this._last,u)?(this._last=u,this._array.push(u)):(this._sorted=!1,this._array.push(u))}toArray(){return this._sorted||(this._array.sort(r.compareByGeneratedPositionsInflated),this._sorted=!0),this._array}};t.MappingList=i}),V2=ce(t=>{var r=bF(),n=Lp(),i=BF().ArraySet,u=xF().MappingList,p=class wp{constructor(m){m||(m={}),this._file=n.getArg(m,"file",null),this._sourceRoot=n.getArg(m,"sourceRoot",null),this._skipValidation=n.getArg(m,"skipValidation",!1),this._sources=new i,this._names=new i,this._mappings=new u,this._sourcesContents=null}static fromSourceMap(m){let A=m.sourceRoot,y=new wp({file:m.file,sourceRoot:A});return m.eachMapping(function(D){let o={generated:{line:D.generatedLine,column:D.generatedColumn}};D.source!=null&&(o.source=D.source,A!=null&&(o.source=n.relative(A,o.source)),o.original={line:D.originalLine,column:D.originalColumn},D.name!=null&&(o.name=D.name)),y.addMapping(o)}),m.sources.forEach(function(D){let o=D;A!=null&&(o=n.relative(A,D)),y._sources.has(o)||y._sources.add(o);let M=m.sourceContentFor(D);M!=null&&y.setSourceContent(D,M)}),y}addMapping(m){let A=n.getArg(m,"generated"),y=n.getArg(m,"original",null),D=n.getArg(m,"source",null),o=n.getArg(m,"name",null);this._skipValidation||this._validateMapping(A,y,D,o),D!=null&&(D=String(D),this._sources.has(D)||this._sources.add(D)),o!=null&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:A.line,generatedColumn:A.column,originalLine:y&&y.line,originalColumn:y&&y.column,source:D,name:o})}setSourceContent(m,A){let y=m;this._sourceRoot!=null&&(y=n.relative(this._sourceRoot,y)),A!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[n.toSetString(y)]=A):this._sourcesContents&&(delete this._sourcesContents[n.toSetString(y)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))}applySourceMap(m,A,y){let D=A;if(A==null){if(m.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);D=m.file}let o=this._sourceRoot;o!=null&&(D=n.relative(o,D));let M=this._mappings.toArray().length>0?new i:this._sources,W=new i;this._mappings.unsortedForEach(function(w){if(w.source===D&&w.originalLine!=null){let X=m.originalPositionFor({line:w.originalLine,column:w.originalColumn});X.source!=null&&(w.source=X.source,y!=null&&(w.source=n.join(y,w.source)),o!=null&&(w.source=n.relative(o,w.source)),w.originalLine=X.line,w.originalColumn=X.column,X.name!=null&&(w.name=X.name))}let U=w.source;U!=null&&!M.has(U)&&M.add(U);let nt=w.name;nt!=null&&!W.has(nt)&&W.add(nt)},this),this._sources=M,this._names=W,m.sources.forEach(function(w){let U=m.sourceContentFor(w);U!=null&&(y!=null&&(w=n.join(y,w)),o!=null&&(w=n.relative(o,w)),this.setSourceContent(w,U))},this)}_validateMapping(m,A,y,D){if(A&&typeof A.line!="number"&&typeof A.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(m&&"line"in m&&"column"in m&&m.line>0&&m.column>=0&&!A&&!y&&!D)&&!(m&&"line"in m&&"column"in m&&A&&"line"in A&&"column"in A&&m.line>0&&m.column>=0&&A.line>0&&A.column>=0&&y))throw new Error("Invalid mapping: "+JSON.stringify({generated:m,source:y,original:A,name:D}))}_serializeMappings(){let m=0,A=1,y=0,D=0,o=0,M=0,W="",w,U,nt,X,j=this._mappings.toArray();for(let it=0,ot=j.length;it<ot;it++){if(U=j[it],w="",U.generatedLine!==A)for(m=0;U.generatedLine!==A;)w+=";",A++;else if(it>0){if(!n.compareByGeneratedPositionsInflated(U,j[it-1]))continue;w+=","}w+=r.encode(U.generatedColumn-m),m=U.generatedColumn,U.source!=null&&(X=this._sources.indexOf(U.source),w+=r.encode(X-M),M=X,w+=r.encode(U.originalLine-1-D),D=U.originalLine-1,w+=r.encode(U.originalColumn-y),y=U.originalColumn,U.name!=null&&(nt=this._names.indexOf(U.name),w+=r.encode(nt-o),o=nt)),W+=w}return W}_generateSourcesContent(m,A){return m.map(function(y){if(!this._sourcesContents)return null;A!=null&&(y=n.relative(A,y));let D=n.toSetString(y);return Object.prototype.hasOwnProperty.call(this._sourcesContents,D)?this._sourcesContents[D]:null},this)}toJSON(){let m={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(m.file=this._file),this._sourceRoot!=null&&(m.sourceRoot=this._sourceRoot),this._sourcesContents&&(m.sourcesContent=this._generateSourcesContent(m.sources,m.sourceRoot)),m}toString(){return JSON.stringify(this.toJSON())}};p.prototype._version=3,t.SourceMapGenerator=p}),TF=ce(t=>{var r=V2().SourceMapGenerator,n=Lp(),i=/(\r?\n)/,u=10,p="$$$isSourceNode$$$",g=class Cl{constructor(A,y,D,o,M){this.children=[],this.sourceContents={},this.line=A??null,this.column=y??null,this.source=D??null,this.name=M??null,this[p]=!0,o!=null&&this.add(o)}static fromStringWithSourceMap(A,y,D){let o=new Cl,M=A.split(i),W=0,w=function(){let ot=H(),K=H()||"";return ot+K;function H(){return W<M.length?M[W++]:void 0}},U=1,nt=0,X=null,j;return y.eachMapping(function(ot){if(X!==null)if(U<ot.generatedLine)it(X,w()),U++,nt=0;else{j=M[W]||"";let K=j.substr(0,ot.generatedColumn-nt);M[W]=j.substr(ot.generatedColumn-nt),nt=ot.generatedColumn,it(X,K),X=ot;return}for(;U<ot.generatedLine;)o.add(w()),U++;nt<ot.generatedColumn&&(j=M[W]||"",o.add(j.substr(0,ot.generatedColumn)),M[W]=j.substr(ot.generatedColumn),nt=ot.generatedColumn),X=ot},this),W<M.length&&(X&&it(X,w()),o.add(M.splice(W).join(""))),y.sources.forEach(function(ot){let K=y.sourceContentFor(ot);K!=null&&(D!=null&&(ot=n.join(D,ot)),o.setSourceContent(ot,K))}),o;function it(ot,K){if(ot===null||ot.source===void 0)o.add(K);else{let H=D?n.join(D,ot.source):ot.source;o.add(new Cl(ot.originalLine,ot.originalColumn,H,K,ot.name))}}}add(A){if(Array.isArray(A))A.forEach(function(y){this.add(y)},this);else if(A[p]||typeof A=="string")A&&this.children.push(A);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+A);return this}prepend(A){if(Array.isArray(A))for(let y=A.length-1;y>=0;y--)this.prepend(A[y]);else if(A[p]||typeof A=="string")this.children.unshift(A);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+A);return this}walk(A){let y;for(let D=0,o=this.children.length;D<o;D++)y=this.children[D],y[p]?y.walk(A):y!==""&&A(y,{source:this.source,line:this.line,column:this.column,name:this.name})}join(A){let y,D,o=this.children.length;if(o>0){for(y=[],D=0;D<o-1;D++)y.push(this.children[D]),y.push(A);y.push(this.children[D]),this.children=y}return this}replaceRight(A,y){let D=this.children[this.children.length-1];return D[p]?D.replaceRight(A,y):typeof D=="string"?this.children[this.children.length-1]=D.replace(A,y):this.children.push("".replace(A,y)),this}setSourceContent(A,y){this.sourceContents[n.toSetString(A)]=y}walkSourceContents(A){for(let D=0,o=this.children.length;D<o;D++)this.children[D][p]&&this.children[D].walkSourceContents(A);let y=Object.keys(this.sourceContents);for(let D=0,o=y.length;D<o;D++)A(n.fromSetString(y[D]),this.sourceContents[y[D]])}toString(){let A="";return this.walk(function(y){A+=y}),A}toStringWithSourceMap(A){let y={code:"",line:1,column:0},D=new r(A),o=!1,M=null,W=null,w=null,U=null;return this.walk(function(nt,X){y.code+=nt,X.source!==null&&X.line!==null&&X.column!==null?((M!==X.source||W!==X.line||w!==X.column||U!==X.name)&&D.addMapping({source:X.source,original:{line:X.line,column:X.column},generated:{line:y.line,column:y.column},name:X.name}),M=X.source,W=X.line,w=X.column,U=X.name,o=!0):o&&(D.addMapping({generated:{line:y.line,column:y.column}}),M=null,o=!1);for(let j=0,it=nt.length;j<it;j++)nt.charCodeAt(j)===u?(y.line++,y.column=0,j+1===it?(M=null,o=!1):o&&D.addMapping({source:X.source,original:{line:X.line,column:X.column},generated:{line:y.line,column:y.column},name:X.name})):y.column++}),this.walkSourceContents(function(nt,X){D.setSourceContent(nt,X)}),{code:y.code,map:D}}};t.SourceNode=g}),NF=ce(t=>{t.SourceMapGenerator=V2().SourceMapGenerator,t.SourceNode=TF().SourceNode}),jF=ce((t,r)=>{"use strict";var n=ho(),i=P2(),u=dF(),p=L2(),{stringEscape:g,regexpClassEscape:m}=gF(),{SourceNode:A}=NF();function y(M,W,w){let U=W.start.line,nt=W.start.column-1,X=M.split(`
`);return X.length===1?new A(U,nt,W.source,M,w):new A(null,null,W.source,X.map((j,it)=>new A(U+it,it===0?nt:0,W.source,it===X.length-1?j:[j,`
`],w)))}function D(M,W,w,U,nt){return w?new A(null,null,w.source,[M,y(W,w,nt),new A(w.end.line,w.end.column-1,w.source,U)]):new A(null,null,null,[M,W,U])}function o(M,W){function w(Et){return Et instanceof A?Et:Et.replace(/^(.+)$/gm,"  $1")}function U(Et){return"peg$c"+Et}function nt(Et){return"peg$r"+Et}function X(Et){return"peg$e"+Et}function j(Et){return"peg$f"+Et}function it(Et){return"peg$parse"+Et}function ot(){function Et(ee){return'"'+g(ee)+'"'}function vt(ee){return"/^["+(ee.inverted?"^":"")+ee.value.map(ne=>Array.isArray(ne)?m(ne[0])+"-"+m(ne[1]):m(ne)).join("")+"]/"+(ee.ignoreCase?"i":"")}function Ft(ee){switch(ee.type){case"rule":return'peg$otherExpectation("'+g(ee.value)+'")';case"literal":return'peg$literalExpectation("'+g(ee.value)+'", '+ee.ignoreCase+")";case"class":return"peg$classExpectation(["+ee.value.map(ne=>Array.isArray(ne)?'["'+g(ne[0])+'", "'+g(ne[1])+'"]':'"'+g(ne)+'"').join(", ")+"], "+ee.inverted+", "+ee.ignoreCase+")";case"any":return"peg$anyExpectation()";default:throw new Error("Unknown expectation type ("+JSON.stringify(ee)+")")}}function Xt(ee,ne){return D(`
  var ${j(ne)} = function(${ee.params.join(", ")}) {`,ee.body,ee.location,"};")}return new A(null,null,W.grammarSource,[M.literals.map((ee,ne)=>"  var "+U(ne)+" = "+Et(ee)+";").concat("",M.classes.map((ee,ne)=>"  var "+nt(ne)+" = "+vt(ee)+";")).concat("",M.expectations.map((ee,ne)=>"  var "+X(ne)+" = "+Ft(ee)+";")).concat("").join(`
`),M.functions.map(Xt)])}function K(Et,vt){let Ft=[];return Ft.push(""),W.trace&&Ft.push("peg$tracer.trace({",'  type: "rule.enter",',"  rule: "+Et+",","  location: peg$computeLocation(startPos, startPos)","});",""),W.cache&&(Ft.push("var key = peg$currPos * "+M.rules.length+" + "+vt+";","var cached = peg$resultsCache[key];","","if (cached) {","  peg$currPos = cached.nextPos;",""),W.trace&&Ft.push("if (cached.result !== peg$FAILED) {","  peg$tracer.trace({",'    type: "rule.match",',"    rule: "+Et+",","    result: cached.result,","    location: peg$computeLocation(startPos, peg$currPos)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+Et+",","    location: peg$computeLocation(startPos, startPos)","  });","}",""),Ft.push("  return cached.result;","}","")),Ft}function H(Et,vt){let Ft=[];return W.cache&&Ft.push("","peg$resultsCache[key] = { nextPos: peg$currPos, result: "+vt+" };"),W.trace&&Ft.push("","if ("+vt+" !== peg$FAILED) {","  peg$tracer.trace({",'    type: "rule.match",',"    rule: "+Et+",","    result: "+vt+",","    location: peg$computeLocation(startPos, peg$currPos)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+Et+",","    location: peg$computeLocation(startPos, startPos)","  });","}"),Ft.push("","return "+vt+";"),Ft}function q(Et){let vt=[],Ft=new u(Et.name,"s","var");function Xt(ne){let ae=0,Le=ne.length,de=[],He;function ze(Xe,Ae){let xe=Ae+3,Qe=ne[ae+xe-2],Ve=ne[ae+xe-1],Ze,vr;Ft.checkedIf(ae,()=>{ae+=xe,Ze=Xt(ne.slice(ae,ae+Qe)),ae+=Qe},Ve>0?()=>{vr=Xt(ne.slice(ae,ae+Ve)),ae+=Ve}:null),de.push("if ("+Xe+") {"),de.push(...Ze.map(w)),Ve>0&&(de.push("} else {"),de.push(...vr.map(w))),de.push("}")}function Pe(Xe){let Ae=ne[ae+2-1],xe;Ft.checkedLoop(ae,()=>{ae+=2,xe=Xt(ne.slice(ae,ae+Ae)),ae+=Ae}),de.push("while ("+Xe+") {"),de.push(...xe.map(w)),de.push("}")}function Je(){let Xe=ne[ae+4-1],Ae=j(ne[ae+1])+"("+ne.slice(ae+4,ae+4+Xe).map(xe=>Ft.index(xe)).join(", ")+")";Ft.pop(ne[ae+2]),de.push(Ft.push(Ae)),ae+=4+Xe}for(;ae<Le;)switch(ne[ae]){case i.PUSH_EMPTY_STRING:de.push(Ft.push("''")),ae++;break;case i.PUSH_CURR_POS:de.push(Ft.push("peg$currPos")),ae++;break;case i.PUSH_UNDEFINED:de.push(Ft.push("undefined")),ae++;break;case i.PUSH_NULL:de.push(Ft.push("null")),ae++;break;case i.PUSH_FAILED:de.push(Ft.push("peg$FAILED")),ae++;break;case i.PUSH_EMPTY_ARRAY:de.push(Ft.push("[]")),ae++;break;case i.POP:Ft.pop(),ae++;break;case i.POP_CURR_POS:de.push("peg$currPos = "+Ft.pop()+";"),ae++;break;case i.POP_N:Ft.pop(ne[ae+1]),ae+=2;break;case i.NIP:He=Ft.pop(),Ft.pop(),de.push(Ft.push(He)),ae++;break;case i.APPEND:He=Ft.pop(),de.push(Ft.top()+".push("+He+");"),ae++;break;case i.WRAP:de.push(Ft.push("["+Ft.pop(ne[ae+1]).join(", ")+"]")),ae+=2;break;case i.TEXT:de.push(Ft.push("input.substring("+Ft.pop()+", peg$currPos)")),ae++;break;case i.PLUCK:{let Xe=ne[ae+3-1],Ae=3+Xe;He=ne.slice(ae+3,ae+Ae),He=Xe===1?Ft.index(He[0]):`[ ${He.map(xe=>Ft.index(xe)).join(", ")} ]`,Ft.pop(ne[ae+1]),de.push(Ft.push(He)),ae+=Ae;break}case i.IF:ze(Ft.top(),0);break;case i.IF_ERROR:ze(Ft.top()+" === peg$FAILED",0);break;case i.IF_NOT_ERROR:ze(Ft.top()+" !== peg$FAILED",0);break;case i.WHILE_NOT_ERROR:Pe(Ft.top()+" !== peg$FAILED");break;case i.MATCH_ANY:ze("input.length > peg$currPos",0);break;case i.MATCH_STRING:ze(M.literals[ne[ae+1]].length>1?"input.substr(peg$currPos, "+M.literals[ne[ae+1]].length+") === "+U(ne[ae+1]):"input.charCodeAt(peg$currPos) === "+M.literals[ne[ae+1]].charCodeAt(0),1);break;case i.MATCH_STRING_IC:ze("input.substr(peg$currPos, "+M.literals[ne[ae+1]].length+").toLowerCase() === "+U(ne[ae+1]),1);break;case i.MATCH_CHAR_CLASS:ze(nt(ne[ae+1])+".test(input.charAt(peg$currPos))",1);break;case i.ACCEPT_N:de.push(Ft.push(ne[ae+1]>1?"input.substr(peg$currPos, "+ne[ae+1]+")":"input.charAt(peg$currPos)")),de.push(ne[ae+1]>1?"peg$currPos += "+ne[ae+1]+";":"peg$currPos++;"),ae+=2;break;case i.ACCEPT_STRING:de.push(Ft.push(U(ne[ae+1]))),de.push(M.literals[ne[ae+1]].length>1?"peg$currPos += "+M.literals[ne[ae+1]].length+";":"peg$currPos++;"),ae+=2;break;case i.FAIL:de.push(Ft.push("peg$FAILED")),de.push("if (peg$silentFails === 0) { peg$fail("+X(ne[ae+1])+"); }"),ae+=2;break;case i.LOAD_SAVED_POS:de.push("peg$savedPos = "+Ft.index(ne[ae+1])+";"),ae+=2;break;case i.UPDATE_SAVED_POS:de.push("peg$savedPos = peg$currPos;"),ae++;break;case i.CALL:Je();break;case i.RULE:de.push(Ft.push(it(M.rules[ne[ae+1]].name)+"()")),ae+=2;break;case i.SILENT_FAILS_ON:de.push("peg$silentFails++;"),ae++;break;case i.SILENT_FAILS_OFF:de.push("peg$silentFails--;"),ae++;break;default:throw new Error("Invalid opcode: "+ne[ae]+".")}return de}let ee=Xt(Et.bytecode);return vt.push(D("  function ",it(Et.name),Et.nameLocation,`() {
`,Et.name)),W.trace&&vt.push("  var startPos = peg$currPos;"),vt.push(w(Ft.defines())),vt.push(...K('"'+g(Et.name)+'"',n.indexOfRule(M,Et.name)).map(w)),vt.push(...ee.map(w)),vt.push(...H('"'+g(Et.name)+'"',Ft.result()).map(w)),vt.push("}"),vt}function pt(Et){return Et.codeLocation?y(Et.code,Et.codeLocation,"$"+Et.type):Et.code}function yt(){let Et=[];M.topLevelInitializer&&(Et.push(pt(M.topLevelInitializer)),Et.push("")),Et.push("function peg$subclass(child, parent) {","  function C() { this.constructor = child; }","  C.prototype = parent.prototype;","  child.prototype = new C();","}","","function peg$SyntaxError(message, expected, found, location) {","  var self = Error.call(this, message);","  // istanbul ignore next Check is a necessary evil to support older environments","  if (Object.setPrototypeOf) {","    Object.setPrototypeOf(self, peg$SyntaxError.prototype);","  }","  self.expected = expected;","  self.found = found;","  self.location = location;",'  self.name = "SyntaxError";',"  return self;","}","","peg$subclass(peg$SyntaxError, Error);","","function peg$padEnd(str, targetLength, padString) {",'  padString = padString || " ";',"  if (str.length > targetLength) { return str; }","  targetLength -= str.length;","  padString += padString.repeat(targetLength);","  return str + padString.slice(0, targetLength);","}","","peg$SyntaxError.prototype.format = function(sources) {",'  var str = "Error: " + this.message;',"  if (this.location) {","    var src = null;","    var k;","    for (k = 0; k < sources.length; k++) {","      if (sources[k].source === this.location.source) {","        src = sources[k].text.split(/\\r\\n|\\n|\\r/g);","        break;","      }","    }","    var s = this.location.start;",'    var loc = this.location.source + ":" + s.line + ":" + s.column;',"    if (src) {","      var e = this.location.end;",`      var filler = peg$padEnd("", s.line.toString().length, ' ');`,"      var line = src[s.line - 1];","      var last = s.line === e.line ? e.column : line.length + 1;","      var hatLen = (last - s.column) || 1;",'      str += "\\n --> " + loc + "\\n"','          + filler + " |\\n"','          + s.line + " | " + line + "\\n"',`          + filler + " | " + peg$padEnd("", s.column - 1, ' ')`,'          + peg$padEnd("", hatLen, "^");',"    } else {",'      str += "\\n at " + loc;',"    }","  }","  return str;","};","","peg$SyntaxError.buildMessage = function(expected, found) {","  var DESCRIBE_EXPECTATION_FNS = {","    literal: function(expectation) {",'      return "\\"" + literalEscape(expectation.text) + "\\"";',"    },","","    class: function(expectation) {","      var escapedParts = expectation.parts.map(function(part) {","        return Array.isArray(part)",'          ? classEscape(part[0]) + "-" + classEscape(part[1])',"          : classEscape(part);","      });","",'      return "[" + (expectation.inverted ? "^" : "") + escapedParts.join("") + "]";',"    },","","    any: function() {",'      return "any character";',"    },","","    end: function() {",'      return "end of input";',"    },","","    other: function(expectation) {","      return expectation.description;","    }","  };","","  function hex(ch) {","    return ch.charCodeAt(0).toString(16).toUpperCase();","  }","","  function literalEscape(s) {","    return s",'      .replace(/\\\\/g, "\\\\\\\\")','      .replace(/"/g,  "\\\\\\"")','      .replace(/\\0/g, "\\\\0")','      .replace(/\\t/g, "\\\\t")','      .replace(/\\n/g, "\\\\n")','      .replace(/\\r/g, "\\\\r")','      .replace(/[\\x00-\\x0F]/g,          function(ch) { return "\\\\x0" + hex(ch); })','      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return "\\\\x"  + hex(ch); });',"  }","","  function classEscape(s) {","    return s",'      .replace(/\\\\/g, "\\\\\\\\")','      .replace(/\\]/g, "\\\\]")','      .replace(/\\^/g, "\\\\^")','      .replace(/-/g,  "\\\\-")','      .replace(/\\0/g, "\\\\0")','      .replace(/\\t/g, "\\\\t")','      .replace(/\\n/g, "\\\\n")','      .replace(/\\r/g, "\\\\r")','      .replace(/[\\x00-\\x0F]/g,          function(ch) { return "\\\\x0" + hex(ch); })','      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return "\\\\x"  + hex(ch); });',"  }","","  function describeExpectation(expectation) {","    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);","  }","","  function describeExpected(expected) {","    var descriptions = expected.map(describeExpectation);","    var i, j;","","    descriptions.sort();","","    if (descriptions.length > 0) {","      for (i = 1, j = 1; i < descriptions.length; i++) {","        if (descriptions[i - 1] !== descriptions[i]) {","          descriptions[j] = descriptions[i];","          j++;","        }","      }","      descriptions.length = j;","    }","","    switch (descriptions.length) {","      case 1:","        return descriptions[0];","","      case 2:",'        return descriptions[0] + " or " + descriptions[1];',"","      default:",'        return descriptions.slice(0, -1).join(", ")','          + ", or "',"          + descriptions[descriptions.length - 1];","    }","  }","","  function describeFound(found) {",'    return found ? "\\"" + literalEscape(found) + "\\"" : "end of input";',"  }","",'  return "Expected " + describeExpected(expected) + " but " + describeFound(found) + " found.";',"};",""),W.trace&&Et.push("function peg$DefaultTracer() {","  this.indentLevel = 0;","}","","peg$DefaultTracer.prototype.trace = function(event) {","  var that = this;","","  function log(event) {","    function repeat(string, n) {",'       var result = "", i;',"","       for (i = 0; i < n; i++) {","         result += string;","       }","","       return result;","    }","","    function pad(string, length) {",'      return string + repeat(" ", length - string.length);',"    }","",'    if (typeof console === "object") {',"      console.log(",'        event.location.start.line + ":" + event.location.start.column + "-"','          + event.location.end.line + ":" + event.location.end.column + " "','          + pad(event.type, 10) + " "','          + repeat("  ", that.indentLevel) + event.rule',"      );","    }","  }","","  switch (event.type) {",'    case "rule.enter":',"      log(event);","      this.indentLevel++;","      break;","",'    case "rule.match":',"      this.indentLevel--;","      log(event);","      break;","",'    case "rule.fail":',"      this.indentLevel--;","      log(event);","      break;","","    default:",'      throw new Error("Invalid event type: " + event.type + ".");',"  }","};","");let vt="{ "+W.allowedStartRules.map(Xt=>Xt+": "+it(Xt)).join(", ")+" }",Ft=it(W.allowedStartRules[0]);return Et.push("function peg$parse(input, options) {","  options = options !== undefined ? options : {};","","  var peg$FAILED = {};","  var peg$source = options.grammarSource;","","  var peg$startRuleFunctions = "+vt+";","  var peg$startRuleFunction = "+Ft+";","",ot(),"","  var peg$currPos = 0;","  var peg$savedPos = 0;","  var peg$posDetailsCache = [{ line: 1, column: 1 }];","  var peg$maxFailPos = 0;","  var peg$maxFailExpected = [];","  var peg$silentFails = 0;",""),W.cache&&Et.push("  var peg$resultsCache = {};",""),W.trace&&Et.push('  var peg$tracer = "tracer" in options ? options.tracer : new peg$DefaultTracer();',""),Et.push("  var peg$result;","",'  if ("startRule" in options) {',"    if (!(options.startRule in peg$startRuleFunctions)) {",`      throw new Error("Can't start parsing from rule \\"" + options.startRule + "\\".");`,"    }","","    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];","  }","","  function text() {","    return input.substring(peg$savedPos, peg$currPos);","  }","","  function offset() {","    return peg$savedPos;","  }","","  function range() {","    return {","      source: peg$source,","      start: peg$savedPos,","      end: peg$currPos","    };","  }","","  function location() {","    return peg$computeLocation(peg$savedPos, peg$currPos);","  }","","  function expected(description, location) {","    location = location !== undefined","      ? location","      : peg$computeLocation(peg$savedPos, peg$currPos);","","    throw peg$buildStructuredError(","      [peg$otherExpectation(description)],","      input.substring(peg$savedPos, peg$currPos),","      location","    );","  }","","  function error(message, location) {","    location = location !== undefined","      ? location","      : peg$computeLocation(peg$savedPos, peg$currPos);","","    throw peg$buildSimpleError(message, location);","  }","","  function peg$literalExpectation(text, ignoreCase) {",'    return { type: "literal", text: text, ignoreCase: ignoreCase };',"  }","","  function peg$classExpectation(parts, inverted, ignoreCase) {",'    return { type: "class", parts: parts, inverted: inverted, ignoreCase: ignoreCase };',"  }","","  function peg$anyExpectation() {",'    return { type: "any" };',"  }","","  function peg$endExpectation() {",'    return { type: "end" };',"  }","","  function peg$otherExpectation(description) {",'    return { type: "other", description: description };',"  }","","  function peg$computePosDetails(pos) {","    var details = peg$posDetailsCache[pos];","    var p;","","    if (details) {","      return details;","    } else {","      p = pos - 1;","      while (!peg$posDetailsCache[p]) {","        p--;","      }","","      details = peg$posDetailsCache[p];","      details = {","        line: details.line,","        column: details.column","      };","","      while (p < pos) {","        if (input.charCodeAt(p) === 10) {","          details.line++;","          details.column = 1;","        } else {","          details.column++;","        }","","        p++;","      }","","      peg$posDetailsCache[pos] = details;","","      return details;","    }","  }","","  function peg$computeLocation(startPos, endPos) {","    var startPosDetails = peg$computePosDetails(startPos);","    var endPosDetails = peg$computePosDetails(endPos);","","    return {","      source: peg$source,","      start: {","        offset: startPos,","        line: startPosDetails.line,","        column: startPosDetails.column","      },","      end: {","        offset: endPos,","        line: endPosDetails.line,","        column: endPosDetails.column","      }","    };","  }","","  function peg$fail(expected) {","    if (peg$currPos < peg$maxFailPos) { return; }","","    if (peg$currPos > peg$maxFailPos) {","      peg$maxFailPos = peg$currPos;","      peg$maxFailExpected = [];","    }","","    peg$maxFailExpected.push(expected);","  }","","  function peg$buildSimpleError(message, location) {","    return new peg$SyntaxError(message, null, null, location);","  }","","  function peg$buildStructuredError(expected, found, location) {","    return new peg$SyntaxError(","      peg$SyntaxError.buildMessage(expected, found),","      expected,","      found,","      location","    );","  }",""),M.rules.forEach(Xt=>{Et.push(...q(Xt).map(w)),Et.push("")}),M.initializer&&(Et.push(pt(M.initializer)),Et.push("")),Et.push("  peg$result = peg$startRuleFunction();","","  if (peg$result !== peg$FAILED && peg$currPos === input.length) {","    return peg$result;","  } else {","    if (peg$result !== peg$FAILED && peg$currPos < input.length) {","      peg$fail(peg$endExpectation());","    }","","    throw peg$buildStructuredError(","      peg$maxFailExpected,","      peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,","      peg$maxFailPos < input.length","        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)","        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)","    );","  }","}"),new A(null,null,W.grammarSource,Et.map(Xt=>Xt instanceof A?Xt:Xt+`
`))}function Rt(Et){function vt(){return[`// Generated by Peggy ${p}.`,"//","// https://peggyjs.org/"]}function Ft(){return W.trace?["{","  SyntaxError: peg$SyntaxError,","  DefaultTracer: peg$DefaultTracer,","  parse: peg$parse","}"].join(`
`):["{","  SyntaxError: peg$SyntaxError,","  parse: peg$parse","}"].join(`
`)}let Xt={bare(){return[...vt(),"(function() {",'  "use strict";',"",Et,"",w("return "+Ft()+";"),"})()"]},commonjs(){let ee=Object.keys(W.dependencies),ne=vt();return ne.push("",'"use strict";',""),ee.length>0&&(ee.forEach(ae=>{ne.push("var "+ae+' = require("'+g(W.dependencies[ae])+'");')}),ne.push("")),ne.push(Et,"","module.exports = "+Ft()+";"),ne},es(){let ee=Object.keys(W.dependencies),ne=vt();return ne.push(""),ee.length>0&&(ee.forEach(ae=>{ne.push("import "+ae+' from "'+g(W.dependencies[ae])+'";')}),ne.push("")),ne.push(Et,"","export {","  peg$SyntaxError as SyntaxError,",W.trace?"  peg$DefaultTracer as DefaultTracer,":"","  peg$parse as parse","};"),ne},amd(){let ee=Object.keys(W.dependencies),ne="["+ee.map(Le=>W.dependencies[Le]).map(Le=>'"'+g(Le)+'"').join(", ")+"]",ae=ee.join(", ");return[...vt(),"define("+ne+", function("+ae+") {",'  "use strict";',"",Et,"",w("return "+Ft()+";"),"});"]},globals(){return[...vt(),"(function(root) {",'  "use strict";',"",Et,"",w("root."+W.exportVar+" = "+Ft()+";"),"})(this);"]},umd(){let ee=Object.keys(W.dependencies),ne=ee.map(ze=>W.dependencies[ze]),ae="["+ne.map(ze=>'"'+g(ze)+'"').join(", ")+"]",Le=ne.map(ze=>'require("'+g(ze)+'")').join(", "),de=ee.join(", "),He=vt();return He.push("(function(root, factory) {",'  if (typeof define === "function" && define.amd) {',"    define("+ae+", factory);",'  } else if (typeof module === "object" && module.exports) {',"    module.exports = factory("+Le+");"),W.exportVar!==null&&He.push("  } else {","    root."+W.exportVar+" = factory();"),He.push("  }","})(this, function("+de+") {",'  "use strict";',"",Et,"",w("return "+Ft()+";"),"});"),He}}[W.format]();return new A(null,null,W.grammarSource,Xt.map(ee=>ee instanceof A?ee:ee+`
`))}M.code=Rt(yt())}r.exports=o}),MF=ce((t,r)=>{"use strict";var n=ho(),i=_s();function u(p,g,m){function A(o){return o.type==="rule"&&o.expression.type==="rule_ref"}function y(o,M,W){i.build({rule_ref(w){w.name===M&&(w.name=W,m.info(`Proxy rule "${M}" replaced by the rule "${W}"`,w.location,[{message:"This rule will be used",location:n.findRule(o,W).nameLocation}]))}})(o)}let D=[];p.rules.forEach((o,M)=>{A(o)&&(y(p,o.name,o.expression.name),g.allowedStartRules.indexOf(o.name)===-1&&D.push(M))}),D.reverse(),D.forEach(o=>{p.rules.splice(o,1)})}r.exports=u}),VF=ce((t,r)=>{"use strict";var n=_s();function i(u,p,g){function m(D){let o={};return Object.keys(D).forEach(M=>{o[M]=D[M]}),o}function A(D,o){y(D.expression,m(o))}let y=n.build({rule(D){y(D.expression,{})},choice(D,o){D.alternatives.forEach(M=>{y(M,m(o))})},action:A,labeled(D,o){let M=D.label;M&&Object.prototype.hasOwnProperty.call(o,M)&&g.error(`Label "${D.label}" is already defined`,D.labelLocation,[{message:"Original label location",location:o[M]}]),y(D.expression,o),o[D.label]=D.labelLocation},text:A,simple_and:A,simple_not:A,optional:A,zero_or_more:A,one_or_more:A,group:A});y(u)}r.exports=i}),zF=ce((t,r)=>{"use strict";var n=_s();function i(u,p,g){let m={};n.build({rule(A){if(Object.prototype.hasOwnProperty.call(m,A.name)){g.error(`Rule "${A.name}" is already defined`,A.nameLocation,[{message:"Original rule location",location:m[A.name]}]);return}m[A.name]=A.nameLocation}})(u)}r.exports=i}),WF=ce((t,r)=>{"use strict";var n=ho(),i=_s();function u(p,g,m){let A=[],y=[],D=i.build({rule(o){A.push(o.name),D(o.expression),A.pop()},sequence(o){o.elements.every(M=>(D(M),!n.alwaysConsumesOnSuccess(p,M)))},rule_ref(o){y.push(o);let M=n.findRule(p,o.name);if(A.indexOf(o.name)!==-1){A.push(o.name),m.error("Possible infinite loop when parsing (left recursion: "+A.join(" -> ")+")",M.nameLocation,y.map((W,w,U)=>({message:w+1!==U.length?`Step ${w+1}: call of the rule "${W.name}" without input consumption`:`Step ${w+1}: call itself without input consumption - left recursion`,location:W.location})));return}M&&D(M),y.pop()}});D(p)}r.exports=u}),ZF=ce((t,r)=>{"use strict";var n=ho(),i=_s();function u(p,g,m){i.build({zero_or_more(A){n.alwaysConsumesOnSuccess(p,A.expression)||m.error("Possible infinite loop when parsing (repetition used with an expression that may not consume any input)",A.location)},one_or_more(A){n.alwaysConsumesOnSuccess(p,A.expression)||m.error("Possible infinite loop when parsing (repetition used with an expression that may not consume any input)",A.location)}})(p)}r.exports=u}),eS=ce((t,r)=>{"use strict";var n=ho(),i=_s();function u(p,g,m){i.build({rule_ref(A){n.findRule(p,A.name)||m.error(`Rule "${A.name}" is not defined`,A.location)}})(p)}r.exports=u}),rS=ce((t,r)=>{"use strict";var n=_s();function i(u,p,g){let m=n.build({action(A){m(A.expression,A)},labeled(A,y){A.pick&&y&&g.error('"@" cannot be used with an action block',A.labelLocation,[{message:"Action block location",location:y.codeLocation}]),m(A.expression)}});m(u)}r.exports=i}),iS=ce((t,r)=>{"use strict";var n=Op(),i=class{constructor(p){p=typeof p<"u"?p:{},typeof p.error=="function"&&(this.error=p.error),typeof p.warning=="function"&&(this.warning=p.warning),typeof p.info=="function"&&(this.info=p.info)}error(){}warning(){}info(){}},u=class{constructor(p){this._callbacks=new i(p),this._firstError=null,this.errors=0,this.problems=[],this.stage=null}error(...p){++this.errors,this._firstError===null&&(this._firstError=new n(...p),this._firstError.stage=this.stage,this._firstError.problems=this.problems),this.problems.push(["error",...p]),this._callbacks.error(this.stage,...p)}warning(...p){this.problems.push(["warning",...p]),this._callbacks.warning(this.stage,...p)}info(...p){this.problems.push(["info",...p]),this._callbacks.info(this.stage,...p)}checkErrors(){if(this.errors!==0)throw this._firstError}};r.exports=u}),sS=ce((exports,module)=>{"use strict";var generateBytecode=fF(),generateJS=jF(),inferenceMatchResult=O2(),removeProxyRules=MF(),reportDuplicateLabels=VF(),reportDuplicateRules=zF(),reportInfiniteRecursion=WF(),reportInfiniteRepetition=ZF(),reportUndefinedRules=eS(),reportIncorrectPlucking=rS(),Session=iS(),visitor=_s();function processOptions(t,r){let n={};return Object.keys(t).forEach(i=>{n[i]=t[i]}),Object.keys(r).forEach(i=>{Object.prototype.hasOwnProperty.call(n,i)||(n[i]=r[i])}),n}var compiler={visitor,passes:{check:[reportUndefinedRules,reportDuplicateRules,reportDuplicateLabels,reportInfiniteRecursion,reportInfiniteRepetition,reportIncorrectPlucking],transform:[removeProxyRules,inferenceMatchResult],generate:[generateBytecode,generateJS]},compile(ast,passes,options){if(options=options!==void 0?options:{},options=processOptions(options,{allowedStartRules:[ast.rules[0].name],cache:!1,dependencies:{},exportVar:null,format:"bare",output:"parser",trace:!1}),!Array.isArray(options.allowedStartRules))throw new Error("allowedStartRules must be an array");if(options.allowedStartRules.length===0)throw new Error("Must have at least one start rule");let allRules=ast.rules.map(t=>t.name);for(let t of options.allowedStartRules)if(allRules.indexOf(t)===-1)throw new Error(`Unknown start rule "${t}"`);let session=new Session(options);switch(Object.keys(passes).forEach(t=>{session.stage=t,session.info(`Process stage ${t}`),passes[t].forEach(r=>{session.info(`Process pass ${t}.${r.name}`),r(ast,options,session)}),session.checkErrors()}),options.output){case"parser":return eval(ast.code.toString());case"source":return ast.code.toString();case"source-and-map":return ast.code;default:throw new Error("Invalid output format: "+options.output+".")}}};module.exports=compiler}),uS=ce((t,r)=>{"use strict";var n={$:"text","&":"simple_and","!":"simple_not"},i={"?":"optional","*":"zero_or_more","+":"one_or_more"},u={"&":"semantic_and","!":"semantic_not"};function p(y,D){function o(){this.constructor=y}o.prototype=D.prototype,y.prototype=new o}function g(y,D,o,M){var W=Error.call(this,y);return Object.setPrototypeOf&&Object.setPrototypeOf(W,g.prototype),W.expected=D,W.found=o,W.location=M,W.name="SyntaxError",W}p(g,Error);function m(y,D,o){return o=o||" ",y.length>D?y:(D-=y.length,o+=o.repeat(D),y+o.slice(0,D))}g.prototype.format=function(y){var D="Error: "+this.message;if(this.location){var o=null,M;for(M=0;M<y.length;M++)if(y[M].source===this.location.source){o=y[M].text.split(/\r\n|\n|\r/g);break}var W=this.location.start,w=this.location.source+":"+W.line+":"+W.column;if(o){var U=this.location.end,nt=m("",W.line.toString().length," "),X=o[W.line-1],j=W.line===U.line?U.column:X.length+1,it=j-W.column||1;D+=`
 --> `+w+`
`+nt+` |
`+W.line+" | "+X+`
`+nt+" | "+m("",W.column-1," ")+m("",it,"^")}else D+=`
 at `+w}return D},g.buildMessage=function(y,D){var o={literal:function(j){return'"'+W(j.text)+'"'},class:function(j){var it=j.parts.map(function(ot){return Array.isArray(ot)?w(ot[0])+"-"+w(ot[1]):w(ot)});return"["+(j.inverted?"^":"")+it.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(j){return j.description}};function M(j){return j.charCodeAt(0).toString(16).toUpperCase()}function W(j){return j.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(it){return"\\x0"+M(it)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(it){return"\\x"+M(it)})}function w(j){return j.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(it){return"\\x0"+M(it)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(it){return"\\x"+M(it)})}function U(j){return o[j.type](j)}function nt(j){var it=j.map(U),ot,K;if(it.sort(),it.length>0){for(ot=1,K=1;ot<it.length;ot++)it[ot-1]!==it[ot]&&(it[K]=it[ot],K++);it.length=K}switch(it.length){case 1:return it[0];case 2:return it[0]+" or "+it[1];default:return it.slice(0,-1).join(", ")+", or "+it[it.length-1]}}function X(j){return j?'"'+W(j)+'"':"end of input"}return"Expected "+nt(y)+" but "+X(D)+" found."};function A(y,D){D=D!==void 0?D:{};var o={},M=D.grammarSource,W={Grammar:Ru},w=Ru,U="{",nt="}",X="=",j="/",it="@",ot=":",K="$",H="&",q="!",pt="?",yt="*",Rt="+",Et="(",vt=")",Ft="	",Xt="\v",ee="\f",ne=" ",ae="\xA0",Le="\uFEFF",de=`
`,He=`\r
`,ze="\r",Pe="\u2028",Je="\u2029",Xe="/*",Ae="*/",xe="//",Qe="_",Ve="\\",Ze="\u200C",vr="\u200D",Pr="i",Dr='"',Q="'",k="[",Z="^",se="]",ye="-",rr="0",dr="b",mr="f",ur="n",er="r",Gr="t",Lr="v",Br="x",N="u",f=".",B=";",J=/^[\n\r\u2028\u2029]/,St=/^[0-9]/,Pt=/^[0-9a-f]/i,et=/^[{}]/,zt=/^[a-z\xB5\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137-\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148-\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C-\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA-\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9-\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC-\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF-\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F-\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02AF\u0371\u0373\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D0-\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB-\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE-\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0561-\u0587\u13F8-\u13FD\u1D00-\u1D2B\u1D6B-\u1D77\u1D79-\u1D9A\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6-\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FC7\u1FD0-\u1FD3\u1FD6-\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6-\u1FF7\u210A\u210E-\u210F\u2113\u212F\u2134\u2139\u213C-\u213D\u2146-\u2149\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65-\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73-\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3-\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7B5\uA7B7\uA7FA\uAB30-\uAB5A\uAB60-\uAB65\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A]/,Ut=/^[\u02B0-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0374\u037A\u0559\u0640\u06E5-\u06E6\u07F4-\u07F5\u07FA\u081A\u0824\u0828\u0971\u0E46\u0EC6\u10FC\u17D7\u1843\u1AA7\u1C78-\u1C7D\u1D2C-\u1D6A\u1D78\u1D9B-\u1DBF\u2071\u207F\u2090-\u209C\u2C7C-\u2C7D\u2D6F\u2E2F\u3005\u3031-\u3035\u303B\u309D-\u309E\u30FC-\u30FE\uA015\uA4F8-\uA4FD\uA60C\uA67F\uA69C-\uA69D\uA717-\uA71F\uA770\uA788\uA7F8-\uA7F9\uA9CF\uA9E6\uAA70\uAADD\uAAF3-\uAAF4\uAB5C-\uAB5F\uFF70\uFF9E-\uFF9F]/,_e=/^[\xAA\xBA\u01BB\u01C0-\u01C3\u0294\u05D0-\u05EA\u05F0-\u05F2\u0620-\u063F\u0641-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u0800-\u0815\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0972-\u0980\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60-\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E45\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065-\u1066\u106E-\u1070\u1075-\u1081\u108E\u10D0-\u10FA\u10FD-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17DC\u1820-\u1842\u1844-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE-\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C77\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5-\u1CF6\u2135-\u2138\u2D30-\u2D67\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3006\u303C\u3041-\u3096\u309F\u30A1-\u30FA\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA014\uA016-\uA48C\uA4D0-\uA4F7\uA500-\uA60B\uA610-\uA61F\uA62A-\uA62B\uA66E\uA6A0-\uA6E5\uA78F\uA7F7\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9E0-\uA9E4\uA9E7-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA6F\uAA71-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADC\uAAE0-\uAAEA\uAAF2\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF66-\uFF6F\uFF71-\uFF9D\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,xt=/^[\u01C5\u01C8\u01CB\u01F2\u1F88-\u1F8F\u1F98-\u1F9F\u1FA8-\u1FAF\u1FBC\u1FCC\u1FFC]/,dt=/^[A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178-\u0179\u017B\u017D\u0181-\u0182\u0184\u0186-\u0187\u0189-\u018B\u018E-\u0191\u0193-\u0194\u0196-\u0198\u019C-\u019D\u019F-\u01A0\u01A2\u01A4\u01A6-\u01A7\u01A9\u01AC\u01AE-\u01AF\u01B1-\u01B3\u01B5\u01B7-\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A-\u023B\u023D-\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E-\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9-\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0-\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E-\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D-\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AD\uA7B0-\uA7B4\uA7B6\uFF21-\uFF3A]/,tt=/^[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E-\u094F\u0982-\u0983\u09BE-\u09C0\u09C7-\u09C8\u09CB-\u09CC\u09D7\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB-\u0ACC\u0B02-\u0B03\u0B3E\u0B40\u0B47-\u0B48\u0B4B-\u0B4C\u0B57\u0BBE-\u0BBF\u0BC1-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD7\u0C01-\u0C03\u0C41-\u0C44\u0C82-\u0C83\u0CBE\u0CC0-\u0CC4\u0CC7-\u0CC8\u0CCA-\u0CCB\u0CD5-\u0CD6\u0D02-\u0D03\u0D3E-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D57\u0D82-\u0D83\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DF2-\u0DF3\u0F3E-\u0F3F\u0F7F\u102B-\u102C\u1031\u1038\u103B-\u103C\u1056-\u1057\u1062-\u1064\u1067-\u106D\u1083-\u1084\u1087-\u108C\u108F\u109A-\u109C\u17B6\u17BE-\u17C5\u17C7-\u17C8\u1923-\u1926\u1929-\u192B\u1930-\u1931\u1933-\u1938\u1A19-\u1A1A\u1A55\u1A57\u1A61\u1A63-\u1A64\u1A6D-\u1A72\u1B04\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B44\u1B82\u1BA1\u1BA6-\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2-\u1BF3\u1C24-\u1C2B\u1C34-\u1C35\u1CE1\u1CF2-\u1CF3\u302E-\u302F\uA823-\uA824\uA827\uA880-\uA881\uA8B4-\uA8C3\uA952-\uA953\uA983\uA9B4-\uA9B5\uA9BA-\uA9BB\uA9BD-\uA9C0\uAA2F-\uAA30\uAA33-\uAA34\uAA4D\uAA7B\uAA7D\uAAEB\uAAEE-\uAAEF\uAAF5\uABE3-\uABE4\uABE6-\uABE7\uABE9-\uABEA\uABEC]/,F=/^[\u0300-\u036F\u0483-\u0487\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B62-\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC-\u0CCD\u0CE2-\u0CE3\u0D01\u0D41-\u0D44\u0D4D\u0D62-\u0D63\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099-\u309A\uA66F\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/,rt=/^[0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]/,At=/^[\u16EE-\u16F0\u2160-\u2182\u2185-\u2188\u3007\u3021-\u3029\u3038-\u303A\uA6E6-\uA6EF]/,Ct=/^[_\u203F-\u2040\u2054\uFE33-\uFE34\uFE4D-\uFE4F\uFF3F]/,Nt=/^[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,Yt=gr("{",!1),Ce=gr("}",!1),Qt=gr("=",!1),Ee=gr("/",!1),Be=gr("@",!1),sr=gr(":",!1),O=gr("$",!1),le=gr("&",!1),qt=gr("!",!1),pe=gr("?",!1),$t=gr("*",!1),re=gr("+",!1),Re=gr("(",!1),De=gr(")",!1),ke=_u(),Ne=ys("whitespace"),tr=gr("	",!1),lr=gr("\v",!1),or=gr("\f",!1),Ar=gr(" ",!1),jr=gr("\xA0",!1),ln=gr("\uFEFF",!1),cn=kn([`
`,"\r","\u2028","\u2029"],!1,!1),Vr=ys("end of line"),yr=gr(`
`,!1),Tr=gr(`\r
`,!1),gn=gr("\r",!1),Kn=gr("\u2028",!1),Qr=gr("\u2029",!1),Wn=ys("comment"),Sr=gr("/*",!1),bn=gr("*/",!1),os=gr("//",!1),_n=ys("identifier"),Ps=gr("_",!1),Xr=gr("\\",!1),Is=gr("\u200C",!1),Ts=gr("\u200D",!1),Xs=ys("literal"),qs=gr("i",!1),as=ys("string"),In=gr('"',!1),xi=gr("'",!1),Xn=ys("character class"),ls=gr("[",!1),Mi=gr("^",!1),Vi=gr("]",!1),_i=gr("-",!1),cu=gr("0",!1),mi=gr("b",!1),qi=gr("f",!1),Bi=gr("n",!1),ai=gr("r",!1),ns=gr("t",!1),Cn=gr("v",!1),bt=gr("x",!1),It=gr("u",!1),Ht=kn([["0","9"]],!1,!1),fe=kn([["0","9"],["a","f"]],!1,!0),Me=gr(".",!1),We=ys("code block"),ir=kn(["{","}"],!1,!1),cr=kn([["a","z"],"\xB5",["\xDF","\xF6"],["\xF8","\xFF"],"\u0101","\u0103","\u0105","\u0107","\u0109","\u010B","\u010D","\u010F","\u0111","\u0113","\u0115","\u0117","\u0119","\u011B","\u011D","\u011F","\u0121","\u0123","\u0125","\u0127","\u0129","\u012B","\u012D","\u012F","\u0131","\u0133","\u0135",["\u0137","\u0138"],"\u013A","\u013C","\u013E","\u0140","\u0142","\u0144","\u0146",["\u0148","\u0149"],"\u014B","\u014D","\u014F","\u0151","\u0153","\u0155","\u0157","\u0159","\u015B","\u015D","\u015F","\u0161","\u0163","\u0165","\u0167","\u0169","\u016B","\u016D","\u016F","\u0171","\u0173","\u0175","\u0177","\u017A","\u017C",["\u017E","\u0180"],"\u0183","\u0185","\u0188",["\u018C","\u018D"],"\u0192","\u0195",["\u0199","\u019B"],"\u019E","\u01A1","\u01A3","\u01A5","\u01A8",["\u01AA","\u01AB"],"\u01AD","\u01B0","\u01B4","\u01B6",["\u01B9","\u01BA"],["\u01BD","\u01BF"],"\u01C6","\u01C9","\u01CC","\u01CE","\u01D0","\u01D2","\u01D4","\u01D6","\u01D8","\u01DA",["\u01DC","\u01DD"],"\u01DF","\u01E1","\u01E3","\u01E5","\u01E7","\u01E9","\u01EB","\u01ED",["\u01EF","\u01F0"],"\u01F3","\u01F5","\u01F9","\u01FB","\u01FD","\u01FF","\u0201","\u0203","\u0205","\u0207","\u0209","\u020B","\u020D","\u020F","\u0211","\u0213","\u0215","\u0217","\u0219","\u021B","\u021D","\u021F","\u0221","\u0223","\u0225","\u0227","\u0229","\u022B","\u022D","\u022F","\u0231",["\u0233","\u0239"],"\u023C",["\u023F","\u0240"],"\u0242","\u0247","\u0249","\u024B","\u024D",["\u024F","\u0293"],["\u0295","\u02AF"],"\u0371","\u0373","\u0377",["\u037B","\u037D"],"\u0390",["\u03AC","\u03CE"],["\u03D0","\u03D1"],["\u03D5","\u03D7"],"\u03D9","\u03DB","\u03DD","\u03DF","\u03E1","\u03E3","\u03E5","\u03E7","\u03E9","\u03EB","\u03ED",["\u03EF","\u03F3"],"\u03F5","\u03F8",["\u03FB","\u03FC"],["\u0430","\u045F"],"\u0461","\u0463","\u0465","\u0467","\u0469","\u046B","\u046D","\u046F","\u0471","\u0473","\u0475","\u0477","\u0479","\u047B","\u047D","\u047F","\u0481","\u048B","\u048D","\u048F","\u0491","\u0493","\u0495","\u0497","\u0499","\u049B","\u049D","\u049F","\u04A1","\u04A3","\u04A5","\u04A7","\u04A9","\u04AB","\u04AD","\u04AF","\u04B1","\u04B3","\u04B5","\u04B7","\u04B9","\u04BB","\u04BD","\u04BF","\u04C2","\u04C4","\u04C6","\u04C8","\u04CA","\u04CC",["\u04CE","\u04CF"],"\u04D1","\u04D3","\u04D5","\u04D7","\u04D9","\u04DB","\u04DD","\u04DF","\u04E1","\u04E3","\u04E5","\u04E7","\u04E9","\u04EB","\u04ED","\u04EF","\u04F1","\u04F3","\u04F5","\u04F7","\u04F9","\u04FB","\u04FD","\u04FF","\u0501","\u0503","\u0505","\u0507","\u0509","\u050B","\u050D","\u050F","\u0511","\u0513","\u0515","\u0517","\u0519","\u051B","\u051D","\u051F","\u0521","\u0523","\u0525","\u0527","\u0529","\u052B","\u052D","\u052F",["\u0561","\u0587"],["\u13F8","\u13FD"],["\u1D00","\u1D2B"],["\u1D6B","\u1D77"],["\u1D79","\u1D9A"],"\u1E01","\u1E03","\u1E05","\u1E07","\u1E09","\u1E0B","\u1E0D","\u1E0F","\u1E11","\u1E13","\u1E15","\u1E17","\u1E19","\u1E1B","\u1E1D","\u1E1F","\u1E21","\u1E23","\u1E25","\u1E27","\u1E29","\u1E2B","\u1E2D","\u1E2F","\u1E31","\u1E33","\u1E35","\u1E37","\u1E39","\u1E3B","\u1E3D","\u1E3F","\u1E41","\u1E43","\u1E45","\u1E47","\u1E49","\u1E4B","\u1E4D","\u1E4F","\u1E51","\u1E53","\u1E55","\u1E57","\u1E59","\u1E5B","\u1E5D","\u1E5F","\u1E61","\u1E63","\u1E65","\u1E67","\u1E69","\u1E6B","\u1E6D","\u1E6F","\u1E71","\u1E73","\u1E75","\u1E77","\u1E79","\u1E7B","\u1E7D","\u1E7F","\u1E81","\u1E83","\u1E85","\u1E87","\u1E89","\u1E8B","\u1E8D","\u1E8F","\u1E91","\u1E93",["\u1E95","\u1E9D"],"\u1E9F","\u1EA1","\u1EA3","\u1EA5","\u1EA7","\u1EA9","\u1EAB","\u1EAD","\u1EAF","\u1EB1","\u1EB3","\u1EB5","\u1EB7","\u1EB9","\u1EBB","\u1EBD","\u1EBF","\u1EC1","\u1EC3","\u1EC5","\u1EC7","\u1EC9","\u1ECB","\u1ECD","\u1ECF","\u1ED1","\u1ED3","\u1ED5","\u1ED7","\u1ED9","\u1EDB","\u1EDD","\u1EDF","\u1EE1","\u1EE3","\u1EE5","\u1EE7","\u1EE9","\u1EEB","\u1EED","\u1EEF","\u1EF1","\u1EF3","\u1EF5","\u1EF7","\u1EF9","\u1EFB","\u1EFD",["\u1EFF","\u1F07"],["\u1F10","\u1F15"],["\u1F20","\u1F27"],["\u1F30","\u1F37"],["\u1F40","\u1F45"],["\u1F50","\u1F57"],["\u1F60","\u1F67"],["\u1F70","\u1F7D"],["\u1F80","\u1F87"],["\u1F90","\u1F97"],["\u1FA0","\u1FA7"],["\u1FB0","\u1FB4"],["\u1FB6","\u1FB7"],"\u1FBE",["\u1FC2","\u1FC4"],["\u1FC6","\u1FC7"],["\u1FD0","\u1FD3"],["\u1FD6","\u1FD7"],["\u1FE0","\u1FE7"],["\u1FF2","\u1FF4"],["\u1FF6","\u1FF7"],"\u210A",["\u210E","\u210F"],"\u2113","\u212F","\u2134","\u2139",["\u213C","\u213D"],["\u2146","\u2149"],"\u214E","\u2184",["\u2C30","\u2C5E"],"\u2C61",["\u2C65","\u2C66"],"\u2C68","\u2C6A","\u2C6C","\u2C71",["\u2C73","\u2C74"],["\u2C76","\u2C7B"],"\u2C81","\u2C83","\u2C85","\u2C87","\u2C89","\u2C8B","\u2C8D","\u2C8F","\u2C91","\u2C93","\u2C95","\u2C97","\u2C99","\u2C9B","\u2C9D","\u2C9F","\u2CA1","\u2CA3","\u2CA5","\u2CA7","\u2CA9","\u2CAB","\u2CAD","\u2CAF","\u2CB1","\u2CB3","\u2CB5","\u2CB7","\u2CB9","\u2CBB","\u2CBD","\u2CBF","\u2CC1","\u2CC3","\u2CC5","\u2CC7","\u2CC9","\u2CCB","\u2CCD","\u2CCF","\u2CD1","\u2CD3","\u2CD5","\u2CD7","\u2CD9","\u2CDB","\u2CDD","\u2CDF","\u2CE1",["\u2CE3","\u2CE4"],"\u2CEC","\u2CEE","\u2CF3",["\u2D00","\u2D25"],"\u2D27","\u2D2D","\uA641","\uA643","\uA645","\uA647","\uA649","\uA64B","\uA64D","\uA64F","\uA651","\uA653","\uA655","\uA657","\uA659","\uA65B","\uA65D","\uA65F","\uA661","\uA663","\uA665","\uA667","\uA669","\uA66B","\uA66D","\uA681","\uA683","\uA685","\uA687","\uA689","\uA68B","\uA68D","\uA68F","\uA691","\uA693","\uA695","\uA697","\uA699","\uA69B","\uA723","\uA725","\uA727","\uA729","\uA72B","\uA72D",["\uA72F","\uA731"],"\uA733","\uA735","\uA737","\uA739","\uA73B","\uA73D","\uA73F","\uA741","\uA743","\uA745","\uA747","\uA749","\uA74B","\uA74D","\uA74F","\uA751","\uA753","\uA755","\uA757","\uA759","\uA75B","\uA75D","\uA75F","\uA761","\uA763","\uA765","\uA767","\uA769","\uA76B","\uA76D","\uA76F",["\uA771","\uA778"],"\uA77A","\uA77C","\uA77F","\uA781","\uA783","\uA785","\uA787","\uA78C","\uA78E","\uA791",["\uA793","\uA795"],"\uA797","\uA799","\uA79B","\uA79D","\uA79F","\uA7A1","\uA7A3","\uA7A5","\uA7A7","\uA7A9","\uA7B5","\uA7B7","\uA7FA",["\uAB30","\uAB5A"],["\uAB60","\uAB65"],["\uAB70","\uABBF"],["\uFB00","\uFB06"],["\uFB13","\uFB17"],["\uFF41","\uFF5A"]],!1,!1),nn=kn([["\u02B0","\u02C1"],["\u02C6","\u02D1"],["\u02E0","\u02E4"],"\u02EC","\u02EE","\u0374","\u037A","\u0559","\u0640",["\u06E5","\u06E6"],["\u07F4","\u07F5"],"\u07FA","\u081A","\u0824","\u0828","\u0971","\u0E46","\u0EC6","\u10FC","\u17D7","\u1843","\u1AA7",["\u1C78","\u1C7D"],["\u1D2C","\u1D6A"],"\u1D78",["\u1D9B","\u1DBF"],"\u2071","\u207F",["\u2090","\u209C"],["\u2C7C","\u2C7D"],"\u2D6F","\u2E2F","\u3005",["\u3031","\u3035"],"\u303B",["\u309D","\u309E"],["\u30FC","\u30FE"],"\uA015",["\uA4F8","\uA4FD"],"\uA60C","\uA67F",["\uA69C","\uA69D"],["\uA717","\uA71F"],"\uA770","\uA788",["\uA7F8","\uA7F9"],"\uA9CF","\uA9E6","\uAA70","\uAADD",["\uAAF3","\uAAF4"],["\uAB5C","\uAB5F"],"\uFF70",["\uFF9E","\uFF9F"]],!1,!1),en=kn(["\xAA","\xBA","\u01BB",["\u01C0","\u01C3"],"\u0294",["\u05D0","\u05EA"],["\u05F0","\u05F2"],["\u0620","\u063F"],["\u0641","\u064A"],["\u066E","\u066F"],["\u0671","\u06D3"],"\u06D5",["\u06EE","\u06EF"],["\u06FA","\u06FC"],"\u06FF","\u0710",["\u0712","\u072F"],["\u074D","\u07A5"],"\u07B1",["\u07CA","\u07EA"],["\u0800","\u0815"],["\u0840","\u0858"],["\u08A0","\u08B4"],["\u0904","\u0939"],"\u093D","\u0950",["\u0958","\u0961"],["\u0972","\u0980"],["\u0985","\u098C"],["\u098F","\u0990"],["\u0993","\u09A8"],["\u09AA","\u09B0"],"\u09B2",["\u09B6","\u09B9"],"\u09BD","\u09CE",["\u09DC","\u09DD"],["\u09DF","\u09E1"],["\u09F0","\u09F1"],["\u0A05","\u0A0A"],["\u0A0F","\u0A10"],["\u0A13","\u0A28"],["\u0A2A","\u0A30"],["\u0A32","\u0A33"],["\u0A35","\u0A36"],["\u0A38","\u0A39"],["\u0A59","\u0A5C"],"\u0A5E",["\u0A72","\u0A74"],["\u0A85","\u0A8D"],["\u0A8F","\u0A91"],["\u0A93","\u0AA8"],["\u0AAA","\u0AB0"],["\u0AB2","\u0AB3"],["\u0AB5","\u0AB9"],"\u0ABD","\u0AD0",["\u0AE0","\u0AE1"],"\u0AF9",["\u0B05","\u0B0C"],["\u0B0F","\u0B10"],["\u0B13","\u0B28"],["\u0B2A","\u0B30"],["\u0B32","\u0B33"],["\u0B35","\u0B39"],"\u0B3D",["\u0B5C","\u0B5D"],["\u0B5F","\u0B61"],"\u0B71","\u0B83",["\u0B85","\u0B8A"],["\u0B8E","\u0B90"],["\u0B92","\u0B95"],["\u0B99","\u0B9A"],"\u0B9C",["\u0B9E","\u0B9F"],["\u0BA3","\u0BA4"],["\u0BA8","\u0BAA"],["\u0BAE","\u0BB9"],"\u0BD0",["\u0C05","\u0C0C"],["\u0C0E","\u0C10"],["\u0C12","\u0C28"],["\u0C2A","\u0C39"],"\u0C3D",["\u0C58","\u0C5A"],["\u0C60","\u0C61"],["\u0C85","\u0C8C"],["\u0C8E","\u0C90"],["\u0C92","\u0CA8"],["\u0CAA","\u0CB3"],["\u0CB5","\u0CB9"],"\u0CBD","\u0CDE",["\u0CE0","\u0CE1"],["\u0CF1","\u0CF2"],["\u0D05","\u0D0C"],["\u0D0E","\u0D10"],["\u0D12","\u0D3A"],"\u0D3D","\u0D4E",["\u0D5F","\u0D61"],["\u0D7A","\u0D7F"],["\u0D85","\u0D96"],["\u0D9A","\u0DB1"],["\u0DB3","\u0DBB"],"\u0DBD",["\u0DC0","\u0DC6"],["\u0E01","\u0E30"],["\u0E32","\u0E33"],["\u0E40","\u0E45"],["\u0E81","\u0E82"],"\u0E84",["\u0E87","\u0E88"],"\u0E8A","\u0E8D",["\u0E94","\u0E97"],["\u0E99","\u0E9F"],["\u0EA1","\u0EA3"],"\u0EA5","\u0EA7",["\u0EAA","\u0EAB"],["\u0EAD","\u0EB0"],["\u0EB2","\u0EB3"],"\u0EBD",["\u0EC0","\u0EC4"],["\u0EDC","\u0EDF"],"\u0F00",["\u0F40","\u0F47"],["\u0F49","\u0F6C"],["\u0F88","\u0F8C"],["\u1000","\u102A"],"\u103F",["\u1050","\u1055"],["\u105A","\u105D"],"\u1061",["\u1065","\u1066"],["\u106E","\u1070"],["\u1075","\u1081"],"\u108E",["\u10D0","\u10FA"],["\u10FD","\u1248"],["\u124A","\u124D"],["\u1250","\u1256"],"\u1258",["\u125A","\u125D"],["\u1260","\u1288"],["\u128A","\u128D"],["\u1290","\u12B0"],["\u12B2","\u12B5"],["\u12B8","\u12BE"],"\u12C0",["\u12C2","\u12C5"],["\u12C8","\u12D6"],["\u12D8","\u1310"],["\u1312","\u1315"],["\u1318","\u135A"],["\u1380","\u138F"],["\u1401","\u166C"],["\u166F","\u167F"],["\u1681","\u169A"],["\u16A0","\u16EA"],["\u16F1","\u16F8"],["\u1700","\u170C"],["\u170E","\u1711"],["\u1720","\u1731"],["\u1740","\u1751"],["\u1760","\u176C"],["\u176E","\u1770"],["\u1780","\u17B3"],"\u17DC",["\u1820","\u1842"],["\u1844","\u1877"],["\u1880","\u18A8"],"\u18AA",["\u18B0","\u18F5"],["\u1900","\u191E"],["\u1950","\u196D"],["\u1970","\u1974"],["\u1980","\u19AB"],["\u19B0","\u19C9"],["\u1A00","\u1A16"],["\u1A20","\u1A54"],["\u1B05","\u1B33"],["\u1B45","\u1B4B"],["\u1B83","\u1BA0"],["\u1BAE","\u1BAF"],["\u1BBA","\u1BE5"],["\u1C00","\u1C23"],["\u1C4D","\u1C4F"],["\u1C5A","\u1C77"],["\u1CE9","\u1CEC"],["\u1CEE","\u1CF1"],["\u1CF5","\u1CF6"],["\u2135","\u2138"],["\u2D30","\u2D67"],["\u2D80","\u2D96"],["\u2DA0","\u2DA6"],["\u2DA8","\u2DAE"],["\u2DB0","\u2DB6"],["\u2DB8","\u2DBE"],["\u2DC0","\u2DC6"],["\u2DC8","\u2DCE"],["\u2DD0","\u2DD6"],["\u2DD8","\u2DDE"],"\u3006","\u303C",["\u3041","\u3096"],"\u309F",["\u30A1","\u30FA"],"\u30FF",["\u3105","\u312D"],["\u3131","\u318E"],["\u31A0","\u31BA"],["\u31F0","\u31FF"],["\u3400","\u4DB5"],["\u4E00","\u9FD5"],["\uA000","\uA014"],["\uA016","\uA48C"],["\uA4D0","\uA4F7"],["\uA500","\uA60B"],["\uA610","\uA61F"],["\uA62A","\uA62B"],"\uA66E",["\uA6A0","\uA6E5"],"\uA78F","\uA7F7",["\uA7FB","\uA801"],["\uA803","\uA805"],["\uA807","\uA80A"],["\uA80C","\uA822"],["\uA840","\uA873"],["\uA882","\uA8B3"],["\uA8F2","\uA8F7"],"\uA8FB","\uA8FD",["\uA90A","\uA925"],["\uA930","\uA946"],["\uA960","\uA97C"],["\uA984","\uA9B2"],["\uA9E0","\uA9E4"],["\uA9E7","\uA9EF"],["\uA9FA","\uA9FE"],["\uAA00","\uAA28"],["\uAA40","\uAA42"],["\uAA44","\uAA4B"],["\uAA60","\uAA6F"],["\uAA71","\uAA76"],"\uAA7A",["\uAA7E","\uAAAF"],"\uAAB1",["\uAAB5","\uAAB6"],["\uAAB9","\uAABD"],"\uAAC0","\uAAC2",["\uAADB","\uAADC"],["\uAAE0","\uAAEA"],"\uAAF2",["\uAB01","\uAB06"],["\uAB09","\uAB0E"],["\uAB11","\uAB16"],["\uAB20","\uAB26"],["\uAB28","\uAB2E"],["\uABC0","\uABE2"],["\uAC00","\uD7A3"],["\uD7B0","\uD7C6"],["\uD7CB","\uD7FB"],["\uF900","\uFA6D"],["\uFA70","\uFAD9"],"\uFB1D",["\uFB1F","\uFB28"],["\uFB2A","\uFB36"],["\uFB38","\uFB3C"],"\uFB3E",["\uFB40","\uFB41"],["\uFB43","\uFB44"],["\uFB46","\uFBB1"],["\uFBD3","\uFD3D"],["\uFD50","\uFD8F"],["\uFD92","\uFDC7"],["\uFDF0","\uFDFB"],["\uFE70","\uFE74"],["\uFE76","\uFEFC"],["\uFF66","\uFF6F"],["\uFF71","\uFF9D"],["\uFFA0","\uFFBE"],["\uFFC2","\uFFC7"],["\uFFCA","\uFFCF"],["\uFFD2","\uFFD7"],["\uFFDA","\uFFDC"]],!1,!1),Er=kn(["\u01C5","\u01C8","\u01CB","\u01F2",["\u1F88","\u1F8F"],["\u1F98","\u1F9F"],["\u1FA8","\u1FAF"],"\u1FBC","\u1FCC","\u1FFC"],!1,!1),hs=kn([["A","Z"],["\xC0","\xD6"],["\xD8","\xDE"],"\u0100","\u0102","\u0104","\u0106","\u0108","\u010A","\u010C","\u010E","\u0110","\u0112","\u0114","\u0116","\u0118","\u011A","\u011C","\u011E","\u0120","\u0122","\u0124","\u0126","\u0128","\u012A","\u012C","\u012E","\u0130","\u0132","\u0134","\u0136","\u0139","\u013B","\u013D","\u013F","\u0141","\u0143","\u0145","\u0147","\u014A","\u014C","\u014E","\u0150","\u0152","\u0154","\u0156","\u0158","\u015A","\u015C","\u015E","\u0160","\u0162","\u0164","\u0166","\u0168","\u016A","\u016C","\u016E","\u0170","\u0172","\u0174","\u0176",["\u0178","\u0179"],"\u017B","\u017D",["\u0181","\u0182"],"\u0184",["\u0186","\u0187"],["\u0189","\u018B"],["\u018E","\u0191"],["\u0193","\u0194"],["\u0196","\u0198"],["\u019C","\u019D"],["\u019F","\u01A0"],"\u01A2","\u01A4",["\u01A6","\u01A7"],"\u01A9","\u01AC",["\u01AE","\u01AF"],["\u01B1","\u01B3"],"\u01B5",["\u01B7","\u01B8"],"\u01BC","\u01C4","\u01C7","\u01CA","\u01CD","\u01CF","\u01D1","\u01D3","\u01D5","\u01D7","\u01D9","\u01DB","\u01DE","\u01E0","\u01E2","\u01E4","\u01E6","\u01E8","\u01EA","\u01EC","\u01EE","\u01F1","\u01F4",["\u01F6","\u01F8"],"\u01FA","\u01FC","\u01FE","\u0200","\u0202","\u0204","\u0206","\u0208","\u020A","\u020C","\u020E","\u0210","\u0212","\u0214","\u0216","\u0218","\u021A","\u021C","\u021E","\u0220","\u0222","\u0224","\u0226","\u0228","\u022A","\u022C","\u022E","\u0230","\u0232",["\u023A","\u023B"],["\u023D","\u023E"],"\u0241",["\u0243","\u0246"],"\u0248","\u024A","\u024C","\u024E","\u0370","\u0372","\u0376","\u037F","\u0386",["\u0388","\u038A"],"\u038C",["\u038E","\u038F"],["\u0391","\u03A1"],["\u03A3","\u03AB"],"\u03CF",["\u03D2","\u03D4"],"\u03D8","\u03DA","\u03DC","\u03DE","\u03E0","\u03E2","\u03E4","\u03E6","\u03E8","\u03EA","\u03EC","\u03EE","\u03F4","\u03F7",["\u03F9","\u03FA"],["\u03FD","\u042F"],"\u0460","\u0462","\u0464","\u0466","\u0468","\u046A","\u046C","\u046E","\u0470","\u0472","\u0474","\u0476","\u0478","\u047A","\u047C","\u047E","\u0480","\u048A","\u048C","\u048E","\u0490","\u0492","\u0494","\u0496","\u0498","\u049A","\u049C","\u049E","\u04A0","\u04A2","\u04A4","\u04A6","\u04A8","\u04AA","\u04AC","\u04AE","\u04B0","\u04B2","\u04B4","\u04B6","\u04B8","\u04BA","\u04BC","\u04BE",["\u04C0","\u04C1"],"\u04C3","\u04C5","\u04C7","\u04C9","\u04CB","\u04CD","\u04D0","\u04D2","\u04D4","\u04D6","\u04D8","\u04DA","\u04DC","\u04DE","\u04E0","\u04E2","\u04E4","\u04E6","\u04E8","\u04EA","\u04EC","\u04EE","\u04F0","\u04F2","\u04F4","\u04F6","\u04F8","\u04FA","\u04FC","\u04FE","\u0500","\u0502","\u0504","\u0506","\u0508","\u050A","\u050C","\u050E","\u0510","\u0512","\u0514","\u0516","\u0518","\u051A","\u051C","\u051E","\u0520","\u0522","\u0524","\u0526","\u0528","\u052A","\u052C","\u052E",["\u0531","\u0556"],["\u10A0","\u10C5"],"\u10C7","\u10CD",["\u13A0","\u13F5"],"\u1E00","\u1E02","\u1E04","\u1E06","\u1E08","\u1E0A","\u1E0C","\u1E0E","\u1E10","\u1E12","\u1E14","\u1E16","\u1E18","\u1E1A","\u1E1C","\u1E1E","\u1E20","\u1E22","\u1E24","\u1E26","\u1E28","\u1E2A","\u1E2C","\u1E2E","\u1E30","\u1E32","\u1E34","\u1E36","\u1E38","\u1E3A","\u1E3C","\u1E3E","\u1E40","\u1E42","\u1E44","\u1E46","\u1E48","\u1E4A","\u1E4C","\u1E4E","\u1E50","\u1E52","\u1E54","\u1E56","\u1E58","\u1E5A","\u1E5C","\u1E5E","\u1E60","\u1E62","\u1E64","\u1E66","\u1E68","\u1E6A","\u1E6C","\u1E6E","\u1E70","\u1E72","\u1E74","\u1E76","\u1E78","\u1E7A","\u1E7C","\u1E7E","\u1E80","\u1E82","\u1E84","\u1E86","\u1E88","\u1E8A","\u1E8C","\u1E8E","\u1E90","\u1E92","\u1E94","\u1E9E","\u1EA0","\u1EA2","\u1EA4","\u1EA6","\u1EA8","\u1EAA","\u1EAC","\u1EAE","\u1EB0","\u1EB2","\u1EB4","\u1EB6","\u1EB8","\u1EBA","\u1EBC","\u1EBE","\u1EC0","\u1EC2","\u1EC4","\u1EC6","\u1EC8","\u1ECA","\u1ECC","\u1ECE","\u1ED0","\u1ED2","\u1ED4","\u1ED6","\u1ED8","\u1EDA","\u1EDC","\u1EDE","\u1EE0","\u1EE2","\u1EE4","\u1EE6","\u1EE8","\u1EEA","\u1EEC","\u1EEE","\u1EF0","\u1EF2","\u1EF4","\u1EF6","\u1EF8","\u1EFA","\u1EFC","\u1EFE",["\u1F08","\u1F0F"],["\u1F18","\u1F1D"],["\u1F28","\u1F2F"],["\u1F38","\u1F3F"],["\u1F48","\u1F4D"],"\u1F59","\u1F5B","\u1F5D","\u1F5F",["\u1F68","\u1F6F"],["\u1FB8","\u1FBB"],["\u1FC8","\u1FCB"],["\u1FD8","\u1FDB"],["\u1FE8","\u1FEC"],["\u1FF8","\u1FFB"],"\u2102","\u2107",["\u210B","\u210D"],["\u2110","\u2112"],"\u2115",["\u2119","\u211D"],"\u2124","\u2126","\u2128",["\u212A","\u212D"],["\u2130","\u2133"],["\u213E","\u213F"],"\u2145","\u2183",["\u2C00","\u2C2E"],"\u2C60",["\u2C62","\u2C64"],"\u2C67","\u2C69","\u2C6B",["\u2C6D","\u2C70"],"\u2C72","\u2C75",["\u2C7E","\u2C80"],"\u2C82","\u2C84","\u2C86","\u2C88","\u2C8A","\u2C8C","\u2C8E","\u2C90","\u2C92","\u2C94","\u2C96","\u2C98","\u2C9A","\u2C9C","\u2C9E","\u2CA0","\u2CA2","\u2CA4","\u2CA6","\u2CA8","\u2CAA","\u2CAC","\u2CAE","\u2CB0","\u2CB2","\u2CB4","\u2CB6","\u2CB8","\u2CBA","\u2CBC","\u2CBE","\u2CC0","\u2CC2","\u2CC4","\u2CC6","\u2CC8","\u2CCA","\u2CCC","\u2CCE","\u2CD0","\u2CD2","\u2CD4","\u2CD6","\u2CD8","\u2CDA","\u2CDC","\u2CDE","\u2CE0","\u2CE2","\u2CEB","\u2CED","\u2CF2","\uA640","\uA642","\uA644","\uA646","\uA648","\uA64A","\uA64C","\uA64E","\uA650","\uA652","\uA654","\uA656","\uA658","\uA65A","\uA65C","\uA65E","\uA660","\uA662","\uA664","\uA666","\uA668","\uA66A","\uA66C","\uA680","\uA682","\uA684","\uA686","\uA688","\uA68A","\uA68C","\uA68E","\uA690","\uA692","\uA694","\uA696","\uA698","\uA69A","\uA722","\uA724","\uA726","\uA728","\uA72A","\uA72C","\uA72E","\uA732","\uA734","\uA736","\uA738","\uA73A","\uA73C","\uA73E","\uA740","\uA742","\uA744","\uA746","\uA748","\uA74A","\uA74C","\uA74E","\uA750","\uA752","\uA754","\uA756","\uA758","\uA75A","\uA75C","\uA75E","\uA760","\uA762","\uA764","\uA766","\uA768","\uA76A","\uA76C","\uA76E","\uA779","\uA77B",["\uA77D","\uA77E"],"\uA780","\uA782","\uA784","\uA786","\uA78B","\uA78D","\uA790","\uA792","\uA796","\uA798","\uA79A","\uA79C","\uA79E","\uA7A0","\uA7A2","\uA7A4","\uA7A6","\uA7A8",["\uA7AA","\uA7AD"],["\uA7B0","\uA7B4"],"\uA7B6",["\uFF21","\uFF3A"]],!1,!1),Ns=kn(["\u0903","\u093B",["\u093E","\u0940"],["\u0949","\u094C"],["\u094E","\u094F"],["\u0982","\u0983"],["\u09BE","\u09C0"],["\u09C7","\u09C8"],["\u09CB","\u09CC"],"\u09D7","\u0A03",["\u0A3E","\u0A40"],"\u0A83",["\u0ABE","\u0AC0"],"\u0AC9",["\u0ACB","\u0ACC"],["\u0B02","\u0B03"],"\u0B3E","\u0B40",["\u0B47","\u0B48"],["\u0B4B","\u0B4C"],"\u0B57",["\u0BBE","\u0BBF"],["\u0BC1","\u0BC2"],["\u0BC6","\u0BC8"],["\u0BCA","\u0BCC"],"\u0BD7",["\u0C01","\u0C03"],["\u0C41","\u0C44"],["\u0C82","\u0C83"],"\u0CBE",["\u0CC0","\u0CC4"],["\u0CC7","\u0CC8"],["\u0CCA","\u0CCB"],["\u0CD5","\u0CD6"],["\u0D02","\u0D03"],["\u0D3E","\u0D40"],["\u0D46","\u0D48"],["\u0D4A","\u0D4C"],"\u0D57",["\u0D82","\u0D83"],["\u0DCF","\u0DD1"],["\u0DD8","\u0DDF"],["\u0DF2","\u0DF3"],["\u0F3E","\u0F3F"],"\u0F7F",["\u102B","\u102C"],"\u1031","\u1038",["\u103B","\u103C"],["\u1056","\u1057"],["\u1062","\u1064"],["\u1067","\u106D"],["\u1083","\u1084"],["\u1087","\u108C"],"\u108F",["\u109A","\u109C"],"\u17B6",["\u17BE","\u17C5"],["\u17C7","\u17C8"],["\u1923","\u1926"],["\u1929","\u192B"],["\u1930","\u1931"],["\u1933","\u1938"],["\u1A19","\u1A1A"],"\u1A55","\u1A57","\u1A61",["\u1A63","\u1A64"],["\u1A6D","\u1A72"],"\u1B04","\u1B35","\u1B3B",["\u1B3D","\u1B41"],["\u1B43","\u1B44"],"\u1B82","\u1BA1",["\u1BA6","\u1BA7"],"\u1BAA","\u1BE7",["\u1BEA","\u1BEC"],"\u1BEE",["\u1BF2","\u1BF3"],["\u1C24","\u1C2B"],["\u1C34","\u1C35"],"\u1CE1",["\u1CF2","\u1CF3"],["\u302E","\u302F"],["\uA823","\uA824"],"\uA827",["\uA880","\uA881"],["\uA8B4","\uA8C3"],["\uA952","\uA953"],"\uA983",["\uA9B4","\uA9B5"],["\uA9BA","\uA9BB"],["\uA9BD","\uA9C0"],["\uAA2F","\uAA30"],["\uAA33","\uAA34"],"\uAA4D","\uAA7B","\uAA7D","\uAAEB",["\uAAEE","\uAAEF"],"\uAAF5",["\uABE3","\uABE4"],["\uABE6","\uABE7"],["\uABE9","\uABEA"],"\uABEC"],!1,!1),Si=kn([["\u0300","\u036F"],["\u0483","\u0487"],["\u0591","\u05BD"],"\u05BF",["\u05C1","\u05C2"],["\u05C4","\u05C5"],"\u05C7",["\u0610","\u061A"],["\u064B","\u065F"],"\u0670",["\u06D6","\u06DC"],["\u06DF","\u06E4"],["\u06E7","\u06E8"],["\u06EA","\u06ED"],"\u0711",["\u0730","\u074A"],["\u07A6","\u07B0"],["\u07EB","\u07F3"],["\u0816","\u0819"],["\u081B","\u0823"],["\u0825","\u0827"],["\u0829","\u082D"],["\u0859","\u085B"],["\u08E3","\u0902"],"\u093A","\u093C",["\u0941","\u0948"],"\u094D",["\u0951","\u0957"],["\u0962","\u0963"],"\u0981","\u09BC",["\u09C1","\u09C4"],"\u09CD",["\u09E2","\u09E3"],["\u0A01","\u0A02"],"\u0A3C",["\u0A41","\u0A42"],["\u0A47","\u0A48"],["\u0A4B","\u0A4D"],"\u0A51",["\u0A70","\u0A71"],"\u0A75",["\u0A81","\u0A82"],"\u0ABC",["\u0AC1","\u0AC5"],["\u0AC7","\u0AC8"],"\u0ACD",["\u0AE2","\u0AE3"],"\u0B01","\u0B3C","\u0B3F",["\u0B41","\u0B44"],"\u0B4D","\u0B56",["\u0B62","\u0B63"],"\u0B82","\u0BC0","\u0BCD","\u0C00",["\u0C3E","\u0C40"],["\u0C46","\u0C48"],["\u0C4A","\u0C4D"],["\u0C55","\u0C56"],["\u0C62","\u0C63"],"\u0C81","\u0CBC","\u0CBF","\u0CC6",["\u0CCC","\u0CCD"],["\u0CE2","\u0CE3"],"\u0D01",["\u0D41","\u0D44"],"\u0D4D",["\u0D62","\u0D63"],"\u0DCA",["\u0DD2","\u0DD4"],"\u0DD6","\u0E31",["\u0E34","\u0E3A"],["\u0E47","\u0E4E"],"\u0EB1",["\u0EB4","\u0EB9"],["\u0EBB","\u0EBC"],["\u0EC8","\u0ECD"],["\u0F18","\u0F19"],"\u0F35","\u0F37","\u0F39",["\u0F71","\u0F7E"],["\u0F80","\u0F84"],["\u0F86","\u0F87"],["\u0F8D","\u0F97"],["\u0F99","\u0FBC"],"\u0FC6",["\u102D","\u1030"],["\u1032","\u1037"],["\u1039","\u103A"],["\u103D","\u103E"],["\u1058","\u1059"],["\u105E","\u1060"],["\u1071","\u1074"],"\u1082",["\u1085","\u1086"],"\u108D","\u109D",["\u135D","\u135F"],["\u1712","\u1714"],["\u1732","\u1734"],["\u1752","\u1753"],["\u1772","\u1773"],["\u17B4","\u17B5"],["\u17B7","\u17BD"],"\u17C6",["\u17C9","\u17D3"],"\u17DD",["\u180B","\u180D"],"\u18A9",["\u1920","\u1922"],["\u1927","\u1928"],"\u1932",["\u1939","\u193B"],["\u1A17","\u1A18"],"\u1A1B","\u1A56",["\u1A58","\u1A5E"],"\u1A60","\u1A62",["\u1A65","\u1A6C"],["\u1A73","\u1A7C"],"\u1A7F",["\u1AB0","\u1ABD"],["\u1B00","\u1B03"],"\u1B34",["\u1B36","\u1B3A"],"\u1B3C","\u1B42",["\u1B6B","\u1B73"],["\u1B80","\u1B81"],["\u1BA2","\u1BA5"],["\u1BA8","\u1BA9"],["\u1BAB","\u1BAD"],"\u1BE6",["\u1BE8","\u1BE9"],"\u1BED",["\u1BEF","\u1BF1"],["\u1C2C","\u1C33"],["\u1C36","\u1C37"],["\u1CD0","\u1CD2"],["\u1CD4","\u1CE0"],["\u1CE2","\u1CE8"],"\u1CED","\u1CF4",["\u1CF8","\u1CF9"],["\u1DC0","\u1DF5"],["\u1DFC","\u1DFF"],["\u20D0","\u20DC"],"\u20E1",["\u20E5","\u20F0"],["\u2CEF","\u2CF1"],"\u2D7F",["\u2DE0","\u2DFF"],["\u302A","\u302D"],["\u3099","\u309A"],"\uA66F",["\uA674","\uA67D"],["\uA69E","\uA69F"],["\uA6F0","\uA6F1"],"\uA802","\uA806","\uA80B",["\uA825","\uA826"],"\uA8C4",["\uA8E0","\uA8F1"],["\uA926","\uA92D"],["\uA947","\uA951"],["\uA980","\uA982"],"\uA9B3",["\uA9B6","\uA9B9"],"\uA9BC","\uA9E5",["\uAA29","\uAA2E"],["\uAA31","\uAA32"],["\uAA35","\uAA36"],"\uAA43","\uAA4C","\uAA7C","\uAAB0",["\uAAB2","\uAAB4"],["\uAAB7","\uAAB8"],["\uAABE","\uAABF"],"\uAAC1",["\uAAEC","\uAAED"],"\uAAF6","\uABE5","\uABE8","\uABED","\uFB1E",["\uFE00","\uFE0F"],["\uFE20","\uFE2F"]],!1,!1),ws=kn([["0","9"],["\u0660","\u0669"],["\u06F0","\u06F9"],["\u07C0","\u07C9"],["\u0966","\u096F"],["\u09E6","\u09EF"],["\u0A66","\u0A6F"],["\u0AE6","\u0AEF"],["\u0B66","\u0B6F"],["\u0BE6","\u0BEF"],["\u0C66","\u0C6F"],["\u0CE6","\u0CEF"],["\u0D66","\u0D6F"],["\u0DE6","\u0DEF"],["\u0E50","\u0E59"],["\u0ED0","\u0ED9"],["\u0F20","\u0F29"],["\u1040","\u1049"],["\u1090","\u1099"],["\u17E0","\u17E9"],["\u1810","\u1819"],["\u1946","\u194F"],["\u19D0","\u19D9"],["\u1A80","\u1A89"],["\u1A90","\u1A99"],["\u1B50","\u1B59"],["\u1BB0","\u1BB9"],["\u1C40","\u1C49"],["\u1C50","\u1C59"],["\uA620","\uA629"],["\uA8D0","\uA8D9"],["\uA900","\uA909"],["\uA9D0","\uA9D9"],["\uA9F0","\uA9F9"],["\uAA50","\uAA59"],["\uABF0","\uABF9"],["\uFF10","\uFF19"]],!1,!1),ds=kn([["\u16EE","\u16F0"],["\u2160","\u2182"],["\u2185","\u2188"],"\u3007",["\u3021","\u3029"],["\u3038","\u303A"],["\uA6E6","\uA6EF"]],!1,!1),Ii=kn(["_",["\u203F","\u2040"],"\u2054",["\uFE33","\uFE34"],["\uFE4D","\uFE4F"],"\uFF3F"],!1,!1),En=kn([" ","\xA0","\u1680",["\u2000","\u200A"],"\u202F","\u205F","\u3000"],!1,!1),Ki=gr(";",!1),Eo=function(d,S,st){return{type:"grammar",topLevelInitializer:d,initializer:S,rules:st,location:_r()}},vo=function(d){return{type:"top_level_initializer",code:d[0],codeLocation:d[1],location:_r()}},Rn=function(d){return{type:"initializer",code:d[0],codeLocation:d[1],location:_r()}},Bn=function(d,S,st){return{type:"rule",name:d[0],nameLocation:d[1],expression:S!==null?{type:"named",name:S,expression:st,location:_r()}:st,location:_r()}},Ao=function(d,S){return S.length>0?{type:"choice",alternatives:[d].concat(S),location:_r()}:d},Fo=function(d,S){return S!==null?{type:"action",expression:d,code:S[0],codeLocation:S[1],location:_r()}:d},wo=function(d,S){return S.length>0||d.type==="labeled"&&d.pick?{type:"sequence",elements:[d].concat(S),location:_r()}:d},on=function(d,S,st){return st.type.startsWith("semantic_")&&Ji('"@" cannot be used on a semantic predicate',d),{type:"labeled",label:S!==null?S[0]:null,labelLocation:S!==null?S[1]:d,pick:!0,expression:st,location:_r()}},bo=function(d,S){return{type:"labeled",label:d[0],labelLocation:d[1],expression:S,location:_r()}},Co=function(){return _r()},Ju=function(d){return be.indexOf(d[0])>=0&&Ji(`Label can't be a reserved word "${d[0]}"`,d[1]),d},Do=function(d,S){return{type:n[d],expression:S,location:_r()}},Qn=function(d,S){return{type:i[S],expression:d,location:_r()}},bu=function(d){return d.type==="labeled"||d.type==="sequence"?{type:"group",expression:d,location:_r()}:d},yi=function(d){return{type:"rule_ref",name:d[0],location:_r()}},Wu=function(d,S){return{type:u[d],code:S[0],codeLocation:S[1],location:_r()}},Cu=function(d,S){return[d+S.join(""),_r()]},Yn=function(d,S){return{type:"literal",value:d,ignoreCase:S!==null,location:_r()}},Xu=function(d){return d.join("")},Zu=function(d){return d.join("")},Qu=function(d,S,st){return{type:"class",parts:S.filter(z=>z!==""),inverted:d!==null,ignoreCase:st!==null,location:_r()}},to=function(d,S){return d.charCodeAt(0)>S.charCodeAt(0)&&Ji("Invalid character range: "+pu()+"."),[d,S]},eo=function(){return""},no=function(){return"\0"},bs=function(){return"\b"},so=function(){return"\f"},Ge=function(){return`
`},E=function(){return"\r"},Du=function(){return"	"},Zs=function(){return"\v"},Ei=function(d){return String.fromCharCode(parseInt(d,16))},cs=function(d){return String.fromCharCode(parseInt(d,16))},Pn=function(){return{type:"any",location:_r()}},li=function(d){return[d,_r()]},lt=0,Rr=0,Ks=[{line:1,column:1}],An=0,Dn=[],we=0,ms;if("startRule"in D){if(!(D.startRule in W))throw new Error(`Can't start parsing from rule "`+D.startRule+'".');w=W[D.startRule]}function pu(){return y.substring(Rr,lt)}function zi(){return Rr}function xu(){return{source:M,start:Rr,end:lt}}function _r(){return Ri(Rr,lt)}function xo(d,S){throw S=S!==void 0?S:Ri(Rr,lt),$i([ys(d)],y.substring(Rr,lt),S)}function Ji(d,S){throw S=S!==void 0?S:Ri(Rr,lt),On(d,S)}function gr(d,S){return{type:"literal",text:d,ignoreCase:S}}function kn(d,S,st){return{type:"class",parts:d,inverted:S,ignoreCase:st}}function _u(){return{type:"any"}}function Bu(){return{type:"end"}}function ys(d){return{type:"other",description:d}}function Iu(d){var S=Ks[d],st;if(S)return S;for(st=d-1;!Ks[st];)st--;for(S=Ks[st],S={line:S.line,column:S.column};st<d;)y.charCodeAt(st)===10?(S.line++,S.column=1):S.column++,st++;return Ks[d]=S,S}function Ri(d,S){var st=Iu(d),z=Iu(S);return{source:M,start:{offset:d,line:st.line,column:st.column},end:{offset:S,line:z.line,column:z.column}}}function $e(d){lt<An||(lt>An&&(An=lt,Dn=[]),Dn.push(d))}function On(d,S){return new g(d,null,null,S)}function $i(d,S,st){return new g(g.buildMessage(d,S),d,S,st)}function Ru(){var d,S,st,z,_t,Mt,te,ie;if(d=lt,S=Tt(),st=lt,z=io(),z!==o?(_t=Tt(),st=z):(lt=st,st=o),st===o&&(st=null),z=lt,_t=$u(),_t!==o?(Mt=Tt(),z=_t):(lt=z,z=o),z===o&&(z=null),_t=[],Mt=lt,te=uo(),te!==o?(ie=Tt(),Mt=te):(lt=Mt,Mt=o),Mt!==o)for(;Mt!==o;)_t.push(Mt),Mt=lt,te=uo(),te!==o?(ie=Tt(),Mt=te):(lt=Mt,Mt=o);else _t=o;return _t!==o?(Rr=d,d=Eo(st,z,_t)):(lt=d,d=o),d}function io(){var d,S,st,z,_t;return d=lt,y.charCodeAt(lt)===123?(S=U,lt++):(S=o,we===0&&$e(Yt)),S!==o?(st=C(),st!==o?(y.charCodeAt(lt)===125?(z=nt,lt++):(z=o,we===0&&$e(Ce)),z!==o?(_t=Gt(),_t!==o?(Rr=d,d=vo(st)):(lt=d,d=o)):(lt=d,d=o)):(lt=d,d=o)):(lt=d,d=o),d}function $u(){var d,S,st;return d=lt,S=C(),S!==o?(st=Gt(),st!==o?(Rr=d,d=Rn(S)):(lt=d,d=o)):(lt=d,d=o),d}function uo(){var d,S,st,z,_t,Mt,te,ie;return d=lt,S=me(),S!==o?(st=Tt(),z=lt,_t=Gn(),_t!==o?(Mt=Tt(),z=_t):(lt=z,z=o),z===o&&(z=null),y.charCodeAt(lt)===61?(_t=X,lt++):(_t=o,we===0&&$e(Qt)),_t!==o?(Mt=Tt(),te=ku(),te!==o?(ie=Gt(),ie!==o?(Rr=d,d=Bn(S,z,te)):(lt=d,d=o)):(lt=d,d=o)):(lt=d,d=o)):(lt=d,d=o),d}function ku(){var d,S,st,z,_t,Mt,te,ie;if(d=lt,S=Ou(),S!==o){for(st=[],z=lt,_t=Tt(),y.charCodeAt(lt)===47?(Mt=j,lt++):(Mt=o,we===0&&$e(Ee)),Mt!==o?(te=Tt(),ie=Ou(),ie!==o?z=ie:(lt=z,z=o)):(lt=z,z=o);z!==o;)st.push(z),z=lt,_t=Tt(),y.charCodeAt(lt)===47?(Mt=j,lt++):(Mt=o,we===0&&$e(Ee)),Mt!==o?(te=Tt(),ie=Ou(),ie!==o?z=ie:(lt=z,z=o)):(lt=z,z=o);Rr=d,d=Ao(S,st)}else lt=d,d=o;return d}function Ou(){var d,S,st,z,_t;return d=lt,S=_o(),S!==o?(st=lt,z=Tt(),_t=C(),_t!==o?st=_t:(lt=st,st=o),st===o&&(st=null),Rr=d,d=Fo(S,st)):(lt=d,d=o),d}function _o(){var d,S,st,z,_t,Mt;if(d=lt,S=Qs(),S!==o){for(st=[],z=lt,_t=Tt(),Mt=Qs(),Mt!==o?z=Mt:(lt=z,z=o);z!==o;)st.push(z),z=lt,_t=Tt(),Mt=Qs(),Mt!==o?z=Mt:(lt=z,z=o);Rr=d,d=wo(S,st)}else lt=d,d=o;return d}function Qs(){var d,S,st,z;return d=lt,S=hu(),S!==o?(st=Wi(),st===o&&(st=null),z=vi(),z!==o?(Rr=d,d=on(S,st,z)):(lt=d,d=o)):(lt=d,d=o),d===o&&(d=lt,S=Wi(),S!==o?(st=Tt(),z=vi(),z!==o?(Rr=d,d=bo(S,z)):(lt=d,d=o)):(lt=d,d=o),d===o&&(d=vi())),d}function hu(){var d,S;return d=lt,y.charCodeAt(lt)===64?(S=it,lt++):(S=o,we===0&&$e(Be)),S!==o&&(Rr=d,S=Co()),d=S,d}function Wi(){var d,S,st,z;return d=lt,S=me(),S!==o?(st=Tt(),y.charCodeAt(lt)===58?(z=ot,lt++):(z=o,we===0&&$e(sr)),z!==o?(Rr=d,d=Ju(S)):(lt=d,d=o)):(lt=d,d=o),d}function vi(){var d,S,st,z;return d=lt,S=fu(),S!==o?(st=Tt(),z=Rs(),z!==o?(Rr=d,d=Do(S,z)):(lt=d,d=o)):(lt=d,d=o),d===o&&(d=Rs()),d}function fu(){var d;return y.charCodeAt(lt)===36?(d=K,lt++):(d=o,we===0&&$e(O)),d===o&&(y.charCodeAt(lt)===38?(d=H,lt++):(d=o,we===0&&$e(le)),d===o&&(y.charCodeAt(lt)===33?(d=q,lt++):(d=o,we===0&&$e(qt)))),d}function Rs(){var d,S,st,z;return d=lt,S=du(),S!==o?(st=Tt(),z=Yi(),z!==o?(Rr=d,d=Qn(S,z)):(lt=d,d=o)):(lt=d,d=o),d===o&&(d=du()),d}function Yi(){var d;return y.charCodeAt(lt)===63?(d=pt,lt++):(d=o,we===0&&$e(pe)),d===o&&(y.charCodeAt(lt)===42?(d=yt,lt++):(d=o,we===0&&$e($t)),d===o&&(y.charCodeAt(lt)===43?(d=Rt,lt++):(d=o,we===0&&$e(re)))),d}function du(){var d,S,st,z,_t,Mt;return d=an(),d===o&&(d=wn(),d===o&&(d=b(),d===o&&(d=oo(),d===o&&(d=Pu(),d===o&&(d=lt,y.charCodeAt(lt)===40?(S=Et,lt++):(S=o,we===0&&$e(Re)),S!==o?(st=Tt(),z=ku(),z!==o?(_t=Tt(),y.charCodeAt(lt)===41?(Mt=vt,lt++):(Mt=o,we===0&&$e(De)),Mt!==o?(Rr=d,d=bu(z)):(lt=d,d=o)):(lt=d,d=o)):(lt=d,d=o)))))),d}function oo(){var d,S,st,z,_t,Mt,te,ie;return d=lt,S=me(),S!==o?(st=lt,we++,z=lt,_t=Tt(),Mt=lt,te=Gn(),te!==o?(ie=Tt(),te=[te,ie],Mt=te):(lt=Mt,Mt=o),Mt===o&&(Mt=null),y.charCodeAt(lt)===61?(te=X,lt++):(te=o,we===0&&$e(Qt)),te!==o?(_t=[_t,Mt,te],z=_t):(lt=z,z=o),we--,z===o?st=void 0:(lt=st,st=o),st!==o?(Rr=d,d=yi(S)):(lt=d,d=o)):(lt=d,d=o),d}function Pu(){var d,S,st,z;return d=lt,S=ti(),S!==o?(st=Tt(),z=C(),z!==o?(Rr=d,d=Wu(S,z)):(lt=d,d=o)):(lt=d,d=o),d}function ti(){var d;return y.charCodeAt(lt)===38?(d=H,lt++):(d=o,we===0&&$e(le)),d===o&&(y.charCodeAt(lt)===33?(d=q,lt++):(d=o,we===0&&$e(qt))),d}function Tn(){var d;return y.length>lt?(d=y.charAt(lt),lt++):(d=o,we===0&&$e(ke)),d}function Xi(){var d,S;return we++,y.charCodeAt(lt)===9?(d=Ft,lt++):(d=o,we===0&&$e(tr)),d===o&&(y.charCodeAt(lt)===11?(d=Xt,lt++):(d=o,we===0&&$e(lr)),d===o&&(y.charCodeAt(lt)===12?(d=ee,lt++):(d=o,we===0&&$e(or)),d===o&&(y.charCodeAt(lt)===32?(d=ne,lt++):(d=o,we===0&&$e(Ar)),d===o&&(y.charCodeAt(lt)===160?(d=ae,lt++):(d=o,we===0&&$e(jr)),d===o&&(y.charCodeAt(lt)===65279?(d=Le,lt++):(d=o,we===0&&$e(ln)),d===o&&(d=wt())))))),we--,d===o&&(S=o,we===0&&$e(Ne)),d}function ei(){var d;return J.test(y.charAt(lt))?(d=y.charAt(lt),lt++):(d=o,we===0&&$e(cn)),d}function ki(){var d,S;return we++,y.charCodeAt(lt)===10?(d=de,lt++):(d=o,we===0&&$e(yr)),d===o&&(y.substr(lt,2)===He?(d=He,lt+=2):(d=o,we===0&&$e(Tr)),d===o&&(y.charCodeAt(lt)===13?(d=ze,lt++):(d=o,we===0&&$e(gn)),d===o&&(y.charCodeAt(lt)===8232?(d=Pe,lt++):(d=o,we===0&&$e(Kn)),d===o&&(y.charCodeAt(lt)===8233?(d=Je,lt++):(d=o,we===0&&$e(Qr)))))),we--,d===o&&(S=o,we===0&&$e(Vr)),d}function gu(){var d,S;return we++,d=Bo(),d===o&&(d=zs()),we--,d===o&&(S=o,we===0&&$e(Wn)),d}function Bo(){var d,S,st,z,_t,Mt;if(d=lt,y.substr(lt,2)===Xe?(S=Xe,lt+=2):(S=o,we===0&&$e(Sr)),S!==o){for(st=[],z=lt,_t=lt,we++,y.substr(lt,2)===Ae?(Mt=Ae,lt+=2):(Mt=o,we===0&&$e(bn)),we--,Mt===o?_t=void 0:(lt=_t,_t=o),_t!==o?(Mt=Tn(),Mt!==o?(_t=[_t,Mt],z=_t):(lt=z,z=o)):(lt=z,z=o);z!==o;)st.push(z),z=lt,_t=lt,we++,y.substr(lt,2)===Ae?(Mt=Ae,lt+=2):(Mt=o,we===0&&$e(bn)),we--,Mt===o?_t=void 0:(lt=_t,_t=o),_t!==o?(Mt=Tn(),Mt!==o?(_t=[_t,Mt],z=_t):(lt=z,z=o)):(lt=z,z=o);y.substr(lt,2)===Ae?(z=Ae,lt+=2):(z=o,we===0&&$e(bn)),z!==o?(S=[S,st,z],d=S):(lt=d,d=o)}else lt=d,d=o;return d}function ao(){var d,S,st,z,_t,Mt;if(d=lt,y.substr(lt,2)===Xe?(S=Xe,lt+=2):(S=o,we===0&&$e(Sr)),S!==o){for(st=[],z=lt,_t=lt,we++,y.substr(lt,2)===Ae?(Mt=Ae,lt+=2):(Mt=o,we===0&&$e(bn)),Mt===o&&(Mt=ei()),we--,Mt===o?_t=void 0:(lt=_t,_t=o),_t!==o?(Mt=Tn(),Mt!==o?(_t=[_t,Mt],z=_t):(lt=z,z=o)):(lt=z,z=o);z!==o;)st.push(z),z=lt,_t=lt,we++,y.substr(lt,2)===Ae?(Mt=Ae,lt+=2):(Mt=o,we===0&&$e(bn)),Mt===o&&(Mt=ei()),we--,Mt===o?_t=void 0:(lt=_t,_t=o),_t!==o?(Mt=Tn(),Mt!==o?(_t=[_t,Mt],z=_t):(lt=z,z=o)):(lt=z,z=o);y.substr(lt,2)===Ae?(z=Ae,lt+=2):(z=o,we===0&&$e(bn)),z!==o?(S=[S,st,z],d=S):(lt=d,d=o)}else lt=d,d=o;return d}function zs(){var d,S,st,z,_t,Mt;if(d=lt,y.substr(lt,2)===xe?(S=xe,lt+=2):(S=o,we===0&&$e(os)),S!==o){for(st=[],z=lt,_t=lt,we++,Mt=ei(),we--,Mt===o?_t=void 0:(lt=_t,_t=o),_t!==o?(Mt=Tn(),Mt!==o?(_t=[_t,Mt],z=_t):(lt=z,z=o)):(lt=z,z=o);z!==o;)st.push(z),z=lt,_t=lt,we++,Mt=ei(),we--,Mt===o?_t=void 0:(lt=_t,_t=o),_t!==o?(Mt=Tn(),Mt!==o?(_t=[_t,Mt],z=_t):(lt=z,z=o)):(lt=z,z=o);S=[S,st],d=S}else lt=d,d=o;return d}function me(){var d,S,st,z;if(we++,d=lt,S=Ue(),S!==o){for(st=[],z=Ie();z!==o;)st.push(z),z=Ie();Rr=d,d=Cu(S,st)}else lt=d,d=o;return we--,d===o&&(S=o,we===0&&$e(_n)),d}function Ue(){var d,S,st;return d=hr(),d===o&&(y.charCodeAt(lt)===36?(d=K,lt++):(d=o,we===0&&$e(O)),d===o&&(y.charCodeAt(lt)===95?(d=Qe,lt++):(d=o,we===0&&$e(Ps)),d===o&&(d=lt,y.charCodeAt(lt)===92?(S=Ve,lt++):(S=o,we===0&&$e(Xr)),S!==o?(st=l(),st!==o?d=st:(lt=d,d=o)):(lt=d,d=o)))),d}function Ie(){var d;return d=Ue(),d===o&&(d=Or(),d===o&&(d=T(),d===o&&(d=Y(),d===o&&(y.charCodeAt(lt)===8204?(d=Ze,lt++):(d=o,we===0&&$e(Is)),d===o&&(y.charCodeAt(lt)===8205?(d=vr,lt++):(d=o,we===0&&$e(Ts))))))),d}function hr(){var d;return d=P(),d===o&&(d=L(),d===o&&(d=gt(),d===o&&(d=V(),d===o&&(d=ht(),d===o&&(d=at()))))),d}function Or(){var d;return d=ut(),d===o&&(d=I()),d}function an(){var d,S,st;return we++,d=lt,S=Gn(),S!==o?(y.charCodeAt(lt)===105?(st=Pr,lt++):(st=o,we===0&&$e(qs)),st===o&&(st=null),Rr=d,d=Yn(S,st)):(lt=d,d=o),we--,d===o&&(S=o,we===0&&$e(Xs)),d}function Gn(){var d,S,st,z;if(we++,d=lt,y.charCodeAt(lt)===34?(S=Dr,lt++):(S=o,we===0&&$e(In)),S!==o){for(st=[],z=Fn();z!==o;)st.push(z),z=Fn();y.charCodeAt(lt)===34?(z=Dr,lt++):(z=o,we===0&&$e(In)),z!==o?(Rr=d,d=Xu(st)):(lt=d,d=o)}else lt=d,d=o;if(d===o)if(d=lt,y.charCodeAt(lt)===39?(S=Q,lt++):(S=o,we===0&&$e(xi)),S!==o){for(st=[],z=Ai();z!==o;)st.push(z),z=Ai();y.charCodeAt(lt)===39?(z=Q,lt++):(z=o,we===0&&$e(xi)),z!==o?(Rr=d,d=Zu(st)):(lt=d,d=o)}else lt=d,d=o;return we--,d===o&&(S=o,we===0&&$e(as)),d}function Fn(){var d,S,st,z;return d=lt,S=lt,st=lt,we++,y.charCodeAt(lt)===34?(z=Dr,lt++):(z=o,we===0&&$e(In)),z===o&&(y.charCodeAt(lt)===92?(z=Ve,lt++):(z=o,we===0&&$e(Xr)),z===o&&(z=ei())),we--,z===o?st=void 0:(lt=st,st=o),st!==o?(z=Tn(),z!==o?(st=[st,z],S=st):(lt=S,S=o)):(lt=S,S=o),S!==o?d=y.substring(d,lt):d=S,d===o&&(d=lt,y.charCodeAt(lt)===92?(S=Ve,lt++):(S=o,we===0&&$e(Xr)),S!==o?(st=ri(),st!==o?d=st:(lt=d,d=o)):(lt=d,d=o),d===o&&(d=lo())),d}function Ai(){var d,S,st,z;return d=lt,S=lt,st=lt,we++,y.charCodeAt(lt)===39?(z=Q,lt++):(z=o,we===0&&$e(xi)),z===o&&(y.charCodeAt(lt)===92?(z=Ve,lt++):(z=o,we===0&&$e(Xr)),z===o&&(z=ei())),we--,z===o?st=void 0:(lt=st,st=o),st!==o?(z=Tn(),z!==o?(st=[st,z],S=st):(lt=S,S=o)):(lt=S,S=o),S!==o?d=y.substring(d,lt):d=S,d===o&&(d=lt,y.charCodeAt(lt)===92?(S=Ve,lt++):(S=o,we===0&&$e(Xr)),S!==o?(st=ri(),st!==o?d=st:(lt=d,d=o)):(lt=d,d=o),d===o&&(d=lo())),d}function wn(){var d,S,st,z,_t,Mt;if(we++,d=lt,y.charCodeAt(lt)===91?(S=k,lt++):(S=o,we===0&&$e(ls)),S!==o){for(y.charCodeAt(lt)===94?(st=Z,lt++):(st=o,we===0&&$e(Mi)),st===o&&(st=null),z=[],_t=Oe(),_t===o&&(_t=Nr());_t!==o;)z.push(_t),_t=Oe(),_t===o&&(_t=Nr());y.charCodeAt(lt)===93?(_t=se,lt++):(_t=o,we===0&&$e(Vi)),_t!==o?(y.charCodeAt(lt)===105?(Mt=Pr,lt++):(Mt=o,we===0&&$e(qs)),Mt===o&&(Mt=null),Rr=d,d=Qu(st,z,Mt)):(lt=d,d=o)}else lt=d,d=o;return we--,d===o&&(S=o,we===0&&$e(Xn)),d}function Oe(){var d,S,st,z;return d=lt,S=Nr(),S!==o?(y.charCodeAt(lt)===45?(st=ye,lt++):(st=o,we===0&&$e(_i)),st!==o?(z=Nr(),z!==o?(Rr=d,d=to(S,z)):(lt=d,d=o)):(lt=d,d=o)):(lt=d,d=o),d}function Nr(){var d,S,st,z;return d=lt,S=lt,st=lt,we++,y.charCodeAt(lt)===93?(z=se,lt++):(z=o,we===0&&$e(Vi)),z===o&&(y.charCodeAt(lt)===92?(z=Ve,lt++):(z=o,we===0&&$e(Xr)),z===o&&(z=ei())),we--,z===o?st=void 0:(lt=st,st=o),st!==o?(z=Tn(),z!==o?(st=[st,z],S=st):(lt=S,S=o)):(lt=S,S=o),S!==o?d=y.substring(d,lt):d=S,d===o&&(d=lt,y.charCodeAt(lt)===92?(S=Ve,lt++):(S=o,we===0&&$e(Xr)),S!==o?(st=ri(),st!==o?d=st:(lt=d,d=o)):(lt=d,d=o),d===o&&(d=lo())),d}function lo(){var d,S,st;return d=lt,y.charCodeAt(lt)===92?(S=Ve,lt++):(S=o,we===0&&$e(Xr)),S!==o?(st=ki(),st!==o?(Rr=d,d=eo()):(lt=d,d=o)):(lt=d,d=o),d}function ri(){var d,S,st,z;return d=Qi(),d===o&&(d=lt,y.charCodeAt(lt)===48?(S=rr,lt++):(S=o,we===0&&$e(cu)),S!==o?(st=lt,we++,z=a(),we--,z===o?st=void 0:(lt=st,st=o),st!==o?(Rr=d,d=no()):(lt=d,d=o)):(lt=d,d=o),d===o&&(d=e(),d===o&&(d=l()))),d}function Qi(){var d;return d=Oi(),d===o&&(d=nr()),d}function Oi(){var d,S;return y.charCodeAt(lt)===39?(d=Q,lt++):(d=o,we===0&&$e(xi)),d===o&&(y.charCodeAt(lt)===34?(d=Dr,lt++):(d=o,we===0&&$e(In)),d===o&&(y.charCodeAt(lt)===92?(d=Ve,lt++):(d=o,we===0&&$e(Xr)),d===o&&(d=lt,y.charCodeAt(lt)===98?(S=dr,lt++):(S=o,we===0&&$e(mi)),S!==o&&(Rr=d,S=bs()),d=S,d===o&&(d=lt,y.charCodeAt(lt)===102?(S=mr,lt++):(S=o,we===0&&$e(qi)),S!==o&&(Rr=d,S=so()),d=S,d===o&&(d=lt,y.charCodeAt(lt)===110?(S=ur,lt++):(S=o,we===0&&$e(Bi)),S!==o&&(Rr=d,S=Ge()),d=S,d===o&&(d=lt,y.charCodeAt(lt)===114?(S=er,lt++):(S=o,we===0&&$e(ai)),S!==o&&(Rr=d,S=E()),d=S,d===o&&(d=lt,y.charCodeAt(lt)===116?(S=Gr,lt++):(S=o,we===0&&$e(ns)),S!==o&&(Rr=d,S=Du()),d=S,d===o&&(d=lt,y.charCodeAt(lt)===118?(S=Lr,lt++):(S=o,we===0&&$e(Cn)),S!==o&&(Rr=d,S=Zs()),d=S)))))))),d}function nr(){var d,S,st,z;return d=lt,S=lt,st=lt,we++,z=So(),z===o&&(z=ei()),we--,z===o?st=void 0:(lt=st,st=o),st!==o?(z=Tn(),z!==o?(st=[st,z],S=st):(lt=S,S=o)):(lt=S,S=o),S!==o?d=y.substring(d,lt):d=S,d}function So(){var d;return d=Oi(),d===o&&(d=a(),d===o&&(y.charCodeAt(lt)===120?(d=Br,lt++):(d=o,we===0&&$e(bt)),d===o&&(y.charCodeAt(lt)===117?(d=N,lt++):(d=o,we===0&&$e(It))))),d}function e(){var d,S,st,z,_t,Mt;return d=lt,y.charCodeAt(lt)===120?(S=Br,lt++):(S=o,we===0&&$e(bt)),S!==o?(st=lt,z=lt,_t=h(),_t!==o?(Mt=h(),Mt!==o?(_t=[_t,Mt],z=_t):(lt=z,z=o)):(lt=z,z=o),z!==o?st=y.substring(st,lt):st=z,st!==o?(Rr=d,d=Ei(st)):(lt=d,d=o)):(lt=d,d=o),d}function l(){var d,S,st,z,_t,Mt,te,ie;return d=lt,y.charCodeAt(lt)===117?(S=N,lt++):(S=o,we===0&&$e(It)),S!==o?(st=lt,z=lt,_t=h(),_t!==o?(Mt=h(),Mt!==o?(te=h(),te!==o?(ie=h(),ie!==o?(_t=[_t,Mt,te,ie],z=_t):(lt=z,z=o)):(lt=z,z=o)):(lt=z,z=o)):(lt=z,z=o),z!==o?st=y.substring(st,lt):st=z,st!==o?(Rr=d,d=cs(st)):(lt=d,d=o)):(lt=d,d=o),d}function a(){var d;return St.test(y.charAt(lt))?(d=y.charAt(lt),lt++):(d=o,we===0&&$e(Ht)),d}function h(){var d;return Pt.test(y.charAt(lt))?(d=y.charAt(lt),lt++):(d=o,we===0&&$e(fe)),d}function b(){var d,S;return d=lt,y.charCodeAt(lt)===46?(S=f,lt++):(S=o,we===0&&$e(Me)),S!==o&&(Rr=d,S=Pn()),d=S,d}function C(){var d,S,st,z;return we++,d=lt,y.charCodeAt(lt)===123?(S=U,lt++):(S=o,we===0&&$e(Yt)),S!==o?(st=x(),y.charCodeAt(lt)===125?(z=nt,lt++):(z=o,we===0&&$e(Ce)),z!==o?d=st:(lt=d,d=o)):(lt=d,d=o),we--,d===o&&(S=o,we===0&&$e(We)),d}function x(){var d,S;return d=lt,S=_(),Rr=d,S=li(S),d=S,d}function _(){var d,S,st,z,_t,Mt;if(d=lt,S=[],st=[],z=lt,_t=lt,we++,et.test(y.charAt(lt))?(Mt=y.charAt(lt),lt++):(Mt=o,we===0&&$e(ir)),we--,Mt===o?_t=void 0:(lt=_t,_t=o),_t!==o?(Mt=Tn(),Mt!==o?(_t=[_t,Mt],z=_t):(lt=z,z=o)):(lt=z,z=o),z!==o)for(;z!==o;)st.push(z),z=lt,_t=lt,we++,et.test(y.charAt(lt))?(Mt=y.charAt(lt),lt++):(Mt=o,we===0&&$e(ir)),we--,Mt===o?_t=void 0:(lt=_t,_t=o),_t!==o?(Mt=Tn(),Mt!==o?(_t=[_t,Mt],z=_t):(lt=z,z=o)):(lt=z,z=o);else st=o;for(st===o&&(st=lt,y.charCodeAt(lt)===123?(z=U,lt++):(z=o,we===0&&$e(Yt)),z!==o?(_t=_(),y.charCodeAt(lt)===125?(Mt=nt,lt++):(Mt=o,we===0&&$e(Ce)),Mt!==o?(z=[z,_t,Mt],st=z):(lt=st,st=o)):(lt=st,st=o));st!==o;){if(S.push(st),st=[],z=lt,_t=lt,we++,et.test(y.charAt(lt))?(Mt=y.charAt(lt),lt++):(Mt=o,we===0&&$e(ir)),we--,Mt===o?_t=void 0:(lt=_t,_t=o),_t!==o?(Mt=Tn(),Mt!==o?(_t=[_t,Mt],z=_t):(lt=z,z=o)):(lt=z,z=o),z!==o)for(;z!==o;)st.push(z),z=lt,_t=lt,we++,et.test(y.charAt(lt))?(Mt=y.charAt(lt),lt++):(Mt=o,we===0&&$e(ir)),we--,Mt===o?_t=void 0:(lt=_t,_t=o),_t!==o?(Mt=Tn(),Mt!==o?(_t=[_t,Mt],z=_t):(lt=z,z=o)):(lt=z,z=o);else st=o;st===o&&(st=lt,y.charCodeAt(lt)===123?(z=U,lt++):(z=o,we===0&&$e(Yt)),z!==o?(_t=_(),y.charCodeAt(lt)===125?(Mt=nt,lt++):(Mt=o,we===0&&$e(Ce)),Mt!==o?(z=[z,_t,Mt],st=z):(lt=st,st=o)):(lt=st,st=o))}return d=y.substring(d,lt),d}function L(){var d;return zt.test(y.charAt(lt))?(d=y.charAt(lt),lt++):(d=o,we===0&&$e(cr)),d}function V(){var d;return Ut.test(y.charAt(lt))?(d=y.charAt(lt),lt++):(d=o,we===0&&$e(nn)),d}function ht(){var d;return _e.test(y.charAt(lt))?(d=y.charAt(lt),lt++):(d=o,we===0&&$e(en)),d}function gt(){var d;return xt.test(y.charAt(lt))?(d=y.charAt(lt),lt++):(d=o,we===0&&$e(Er)),d}function P(){var d;return dt.test(y.charAt(lt))?(d=y.charAt(lt),lt++):(d=o,we===0&&$e(hs)),d}function I(){var d;return tt.test(y.charAt(lt))?(d=y.charAt(lt),lt++):(d=o,we===0&&$e(Ns)),d}function ut(){var d;return F.test(y.charAt(lt))?(d=y.charAt(lt),lt++):(d=o,we===0&&$e(Si)),d}function T(){var d;return rt.test(y.charAt(lt))?(d=y.charAt(lt),lt++):(d=o,we===0&&$e(ws)),d}function at(){var d;return At.test(y.charAt(lt))?(d=y.charAt(lt),lt++):(d=o,we===0&&$e(ds)),d}function Y(){var d;return Ct.test(y.charAt(lt))?(d=y.charAt(lt),lt++):(d=o,we===0&&$e(Ii)),d}function wt(){var d;return Nt.test(y.charAt(lt))?(d=y.charAt(lt),lt++):(d=o,we===0&&$e(En)),d}function Tt(){var d,S;for(d=[],S=Xi(),S===o&&(S=ki(),S===o&&(S=gu()));S!==o;)d.push(S),S=Xi(),S===o&&(S=ki(),S===o&&(S=gu()));return d}function Wt(){var d,S;for(d=[],S=Xi(),S===o&&(S=ao());S!==o;)d.push(S),S=Xi(),S===o&&(S=ao());return d}function Gt(){var d,S,st,z;return d=lt,S=Tt(),y.charCodeAt(lt)===59?(st=B,lt++):(st=o,we===0&&$e(Ki)),st!==o?(S=[S,st],d=S):(lt=d,d=o),d===o&&(d=lt,S=Wt(),st=zs(),st===o&&(st=null),z=ki(),z!==o?(S=[S,st,z],d=S):(lt=d,d=o),d===o&&(d=lt,S=Tt(),st=ve(),st!==o?(S=[S,st],d=S):(lt=d,d=o))),d}function ve(){var d,S;return d=lt,we++,y.length>lt?(S=y.charAt(lt),lt++):(S=o,we===0&&$e(ke)),we--,S===o?d=void 0:(lt=d,d=o),d}let be=D.reservedWords||[];if(ms=w(),ms!==o&&lt===y.length)return ms;throw ms!==o&&lt<y.length&&$e(Bu()),$i(Dn,An<y.length?y.charAt(An):null,An<y.length?Ri(An,An+1):Ri(An,An))}r.exports={SyntaxError:g,parse:A}}),Vh=ce((t,r)=>{"use strict";var n=Op(),i=sS(),u=uS(),p=L2(),g=["break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","new","return","super","switch","this","throw","try","typeof","var","void","while","with","null","true","false","enum","implements","interface","let","package","private","protected","public","static","yield","await"],m={VERSION:p,RESERVED_WORDS:g,GrammarError:n,parser:u,compiler:i,generate(A,y){y=y!==void 0?y:{};function D(W){let w={};return Object.keys(W).forEach(U=>{w[U]=W[U].slice()}),w}let o="plugins"in y?y.plugins:[],M={parser:m.parser,passes:D(m.compiler.passes),reservedWords:m.RESERVED_WORDS.slice()};return o.forEach(W=>{W.use(M,y)}),m.compiler.compile(M.parser.parse(A,{grammarSource:y.grammarSource,reservedWords:M.reservedWords}),M.passes,y)}};r.exports=m}),iw=ce((t,r)=>{(function(n,i){typeof t=="object"&&typeof r<"u"?r.exports=i():typeof define=="function"&&define.amd?define(i):n.JSON5=i()})(t,function(){"use strict";function n($t,re){return re={exports:{}},$t(re,re.exports),re.exports}var i=n(function($t){var re=$t.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=re)}),u=n(function($t){var re=$t.exports={version:"2.6.5"};typeof __e=="number"&&(__e=re)}),p=u.version,g=function($t){return typeof $t=="object"?$t!==null:typeof $t=="function"},m=function($t){if(!g($t))throw TypeError($t+" is not an object!");return $t},A=function($t){try{return!!$t()}catch{return!0}},y=!A(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}),D=i.document,o=g(D)&&g(D.createElement),M=function($t){return o?D.createElement($t):{}},W=!y&&!A(function(){return Object.defineProperty(M("div"),"a",{get:function(){return 7}}).a!=7}),w=function($t,re){if(!g($t))return $t;var Re,De;if(re&&typeof(Re=$t.toString)=="function"&&!g(De=Re.call($t))||typeof(Re=$t.valueOf)=="function"&&!g(De=Re.call($t))||!re&&typeof(Re=$t.toString)=="function"&&!g(De=Re.call($t)))return De;throw TypeError("Can't convert object to primitive value")},U=Object.defineProperty,nt=y?Object.defineProperty:function($t,re,Re){if(m($t),re=w(re,!0),m(Re),W)try{return U($t,re,Re)}catch{}if("get"in Re||"set"in Re)throw TypeError("Accessors not supported!");return"value"in Re&&($t[re]=Re.value),$t},X={f:nt},j=function($t,re){return{enumerable:!($t&1),configurable:!($t&2),writable:!($t&4),value:re}},it=y?function($t,re,Re){return X.f($t,re,j(1,Re))}:function($t,re,Re){return $t[re]=Re,$t},ot={}.hasOwnProperty,K=function($t,re){return ot.call($t,re)},H=0,q=Math.random(),pt=function($t){return"Symbol(".concat($t===void 0?"":$t,")_",(++H+q).toString(36))},yt=!1,Rt=n(function($t){var re="__core-js_shared__",Re=i[re]||(i[re]={});($t.exports=function(De,ke){return Re[De]||(Re[De]=ke!==void 0?ke:{})})("versions",[]).push({version:u.version,mode:yt?"pure":"global",copyright:"\xA9 2019 Denis Pushkarev (zloirock.ru)"})}),Et=Rt("native-function-to-string",Function.toString),vt=n(function($t){var re=pt("src"),Re="toString",De=(""+Et).split(Re);u.inspectSource=function(ke){return Et.call(ke)},($t.exports=function(ke,Ne,tr,lr){var or=typeof tr=="function";or&&(K(tr,"name")||it(tr,"name",Ne)),ke[Ne]!==tr&&(or&&(K(tr,re)||it(tr,re,ke[Ne]?""+ke[Ne]:De.join(String(Ne)))),ke===i?ke[Ne]=tr:lr?ke[Ne]?ke[Ne]=tr:it(ke,Ne,tr):(delete ke[Ne],it(ke,Ne,tr)))})(Function.prototype,Re,function(){return typeof this=="function"&&this[re]||Et.call(this)})}),Ft=function($t){if(typeof $t!="function")throw TypeError($t+" is not a function!");return $t},Xt=function($t,re,Re){if(Ft($t),re===void 0)return $t;switch(Re){case 1:return function(De){return $t.call(re,De)};case 2:return function(De,ke){return $t.call(re,De,ke)};case 3:return function(De,ke,Ne){return $t.call(re,De,ke,Ne)}}return function(){return $t.apply(re,arguments)}},ee="prototype",ne=function($t,re,Re){var De=$t&ne.F,ke=$t&ne.G,Ne=$t&ne.S,tr=$t&ne.P,lr=$t&ne.B,or=ke?i:Ne?i[re]||(i[re]={}):(i[re]||{})[ee],Ar=ke?u:u[re]||(u[re]={}),jr=Ar[ee]||(Ar[ee]={}),ln,cn,Vr,yr;ke&&(Re=re);for(ln in Re)cn=!De&&or&&or[ln]!==void 0,Vr=(cn?or:Re)[ln],yr=lr&&cn?Xt(Vr,i):tr&&typeof Vr=="function"?Xt(Function.call,Vr):Vr,or&&vt(or,ln,Vr,$t&ne.U),Ar[ln]!=Vr&&it(Ar,ln,yr),tr&&jr[ln]!=Vr&&(jr[ln]=Vr)};i.core=u,ne.F=1,ne.G=2,ne.S=4,ne.P=8,ne.B=16,ne.W=32,ne.U=64,ne.R=128;var ae=ne,Le=Math.ceil,de=Math.floor,He=function($t){return isNaN($t=+$t)?0:($t>0?de:Le)($t)},ze=function($t){if($t==null)throw TypeError("Can't call method on  "+$t);return $t},Pe=function($t){return function(re,Re){var De=String(ze(re)),ke=He(Re),Ne=De.length,tr,lr;return ke<0||ke>=Ne?$t?"":void 0:(tr=De.charCodeAt(ke),tr<55296||tr>56319||ke+1===Ne||(lr=De.charCodeAt(ke+1))<56320||lr>57343?$t?De.charAt(ke):tr:$t?De.slice(ke,ke+2):(tr-55296<<10)+(lr-56320)+65536)}},Je=Pe(!1);ae(ae.P,"String",{codePointAt:function($t){return Je(this,$t)}});var Xe=u.String.codePointAt,Ae=Math.max,xe=Math.min,Qe=function($t,re){return $t=He($t),$t<0?Ae($t+re,0):xe($t,re)},Ve=String.fromCharCode,Ze=String.fromCodePoint;ae(ae.S+ae.F*(!!Ze&&Ze.length!=1),"String",{fromCodePoint:function($t){for(var re=arguments,Re=[],De=arguments.length,ke=0,Ne;De>ke;){if(Ne=+re[ke++],Qe(Ne,1114111)!==Ne)throw RangeError(Ne+" is not a valid code point");Re.push(Ne<65536?Ve(Ne):Ve(((Ne-=65536)>>10)+55296,Ne%1024+56320))}return Re.join("")}});var vr=u.String.fromCodePoint,Pr=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,Dr=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,Q=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,k={Space_Separator:Pr,ID_Start:Dr,ID_Continue:Q},Z={isSpaceSeparator:function($t){return typeof $t=="string"&&k.Space_Separator.test($t)},isIdStartChar:function($t){return typeof $t=="string"&&($t>="a"&&$t<="z"||$t>="A"&&$t<="Z"||$t==="$"||$t==="_"||k.ID_Start.test($t))},isIdContinueChar:function($t){return typeof $t=="string"&&($t>="a"&&$t<="z"||$t>="A"&&$t<="Z"||$t>="0"&&$t<="9"||$t==="$"||$t==="_"||$t==="\u200C"||$t==="\u200D"||k.ID_Continue.test($t))},isDigit:function($t){return typeof $t=="string"&&/[0-9]/.test($t)},isHexDigit:function($t){return typeof $t=="string"&&/[0-9A-Fa-f]/.test($t)}},se,ye,rr,dr,mr,ur,er,Gr,Lr,Br=function($t,re){se=String($t),ye="start",rr=[],dr=0,mr=1,ur=0,er=void 0,Gr=void 0,Lr=void 0;do er=et(),At[ye]();while(er.type!=="eof");return typeof re=="function"?N({"":Lr},"",re):Lr};function N($t,re,Re){var De=$t[re];if(De!=null&&typeof De=="object")if(Array.isArray(De))for(var ke=0;ke<De.length;ke++){var Ne=String(ke),tr=N(De,Ne,Re);tr===void 0?delete De[Ne]:Object.defineProperty(De,Ne,{value:tr,writable:!0,enumerable:!0,configurable:!0})}else for(var lr in De){var or=N(De,lr,Re);or===void 0?delete De[lr]:Object.defineProperty(De,lr,{value:or,writable:!0,enumerable:!0,configurable:!0})}return Re.call($t,re,De)}var f,B,J,St,Pt;function et(){for(f="default",B="",J=!1,St=1;;){Pt=zt();var $t=_e[f]();if($t)return $t}}function zt(){if(se[dr])return String.fromCodePoint(se.codePointAt(dr))}function Ut(){var $t=zt();return $t===`
`?(mr++,ur=0):$t?ur+=$t.length:ur++,$t&&(dr+=$t.length),$t}var _e={default:function(){switch(Pt){case"	":case"\v":case"\f":case" ":case"\xA0":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":Ut();return;case"/":Ut(),f="comment";return;case void 0:return Ut(),xt("eof")}if(Z.isSpaceSeparator(Pt)){Ut();return}return _e[ye]()},comment:function(){switch(Pt){case"*":Ut(),f="multiLineComment";return;case"/":Ut(),f="singleLineComment";return}throw Yt(Ut())},multiLineComment:function(){switch(Pt){case"*":Ut(),f="multiLineCommentAsterisk";return;case void 0:throw Yt(Ut())}Ut()},multiLineCommentAsterisk:function(){switch(Pt){case"*":Ut();return;case"/":Ut(),f="default";return;case void 0:throw Yt(Ut())}Ut(),f="multiLineComment"},singleLineComment:function(){switch(Pt){case`
`:case"\r":case"\u2028":case"\u2029":Ut(),f="default";return;case void 0:return Ut(),xt("eof")}Ut()},value:function(){switch(Pt){case"{":case"[":return xt("punctuator",Ut());case"n":return Ut(),dt("ull"),xt("null",null);case"t":return Ut(),dt("rue"),xt("boolean",!0);case"f":return Ut(),dt("alse"),xt("boolean",!1);case"-":case"+":Ut()==="-"&&(St=-1),f="sign";return;case".":B=Ut(),f="decimalPointLeading";return;case"0":B=Ut(),f="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":B=Ut(),f="decimalInteger";return;case"I":return Ut(),dt("nfinity"),xt("numeric",1/0);case"N":return Ut(),dt("aN"),xt("numeric",NaN);case'"':case"'":J=Ut()==='"',B="",f="string";return}throw Yt(Ut())},identifierNameStartEscape:function(){if(Pt!=="u")throw Yt(Ut());Ut();var $t=rt();switch($t){case"$":case"_":break;default:if(!Z.isIdStartChar($t))throw Qt();break}B+=$t,f="identifierName"},identifierName:function(){switch(Pt){case"$":case"_":case"\u200C":case"\u200D":B+=Ut();return;case"\\":Ut(),f="identifierNameEscape";return}if(Z.isIdContinueChar(Pt)){B+=Ut();return}return xt("identifier",B)},identifierNameEscape:function(){if(Pt!=="u")throw Yt(Ut());Ut();var $t=rt();switch($t){case"$":case"_":case"\u200C":case"\u200D":break;default:if(!Z.isIdContinueChar($t))throw Qt();break}B+=$t,f="identifierName"},sign:function(){switch(Pt){case".":B=Ut(),f="decimalPointLeading";return;case"0":B=Ut(),f="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":B=Ut(),f="decimalInteger";return;case"I":return Ut(),dt("nfinity"),xt("numeric",St*(1/0));case"N":return Ut(),dt("aN"),xt("numeric",NaN)}throw Yt(Ut())},zero:function(){switch(Pt){case".":B+=Ut(),f="decimalPoint";return;case"e":case"E":B+=Ut(),f="decimalExponent";return;case"x":case"X":B+=Ut(),f="hexadecimal";return}return xt("numeric",St*0)},decimalInteger:function(){switch(Pt){case".":B+=Ut(),f="decimalPoint";return;case"e":case"E":B+=Ut(),f="decimalExponent";return}if(Z.isDigit(Pt)){B+=Ut();return}return xt("numeric",St*Number(B))},decimalPointLeading:function(){if(Z.isDigit(Pt)){B+=Ut(),f="decimalFraction";return}throw Yt(Ut())},decimalPoint:function(){switch(Pt){case"e":case"E":B+=Ut(),f="decimalExponent";return}if(Z.isDigit(Pt)){B+=Ut(),f="decimalFraction";return}return xt("numeric",St*Number(B))},decimalFraction:function(){switch(Pt){case"e":case"E":B+=Ut(),f="decimalExponent";return}if(Z.isDigit(Pt)){B+=Ut();return}return xt("numeric",St*Number(B))},decimalExponent:function(){switch(Pt){case"+":case"-":B+=Ut(),f="decimalExponentSign";return}if(Z.isDigit(Pt)){B+=Ut(),f="decimalExponentInteger";return}throw Yt(Ut())},decimalExponentSign:function(){if(Z.isDigit(Pt)){B+=Ut(),f="decimalExponentInteger";return}throw Yt(Ut())},decimalExponentInteger:function(){if(Z.isDigit(Pt)){B+=Ut();return}return xt("numeric",St*Number(B))},hexadecimal:function(){if(Z.isHexDigit(Pt)){B+=Ut(),f="hexadecimalInteger";return}throw Yt(Ut())},hexadecimalInteger:function(){if(Z.isHexDigit(Pt)){B+=Ut();return}return xt("numeric",St*Number(B))},string:function(){switch(Pt){case"\\":Ut(),B+=tt();return;case'"':if(J)return Ut(),xt("string",B);B+=Ut();return;case"'":if(!J)return Ut(),xt("string",B);B+=Ut();return;case`
`:case"\r":throw Yt(Ut());case"\u2028":case"\u2029":break;case void 0:throw Yt(Ut())}B+=Ut()},start:function(){switch(Pt){case"{":case"[":return xt("punctuator",Ut())}f="value"},beforePropertyName:function(){switch(Pt){case"$":case"_":B=Ut(),f="identifierName";return;case"\\":Ut(),f="identifierNameStartEscape";return;case"}":return xt("punctuator",Ut());case'"':case"'":J=Ut()==='"',f="string";return}if(Z.isIdStartChar(Pt)){B+=Ut(),f="identifierName";return}throw Yt(Ut())},afterPropertyName:function(){if(Pt===":")return xt("punctuator",Ut());throw Yt(Ut())},beforePropertyValue:function(){f="value"},afterPropertyValue:function(){switch(Pt){case",":case"}":return xt("punctuator",Ut())}throw Yt(Ut())},beforeArrayValue:function(){if(Pt==="]")return xt("punctuator",Ut());f="value"},afterArrayValue:function(){switch(Pt){case",":case"]":return xt("punctuator",Ut())}throw Yt(Ut())},end:function(){throw Yt(Ut())}};function xt($t,re){return{type:$t,value:re,line:mr,column:ur}}function dt($t){for(var re=0,Re=$t;re<Re.length;re+=1){var De=Re[re],ke=zt();if(ke!==De)throw Yt(Ut());Ut()}}function tt(){var $t=zt();switch($t){case"b":return Ut(),"\b";case"f":return Ut(),"\f";case"n":return Ut(),`
`;case"r":return Ut(),"\r";case"t":return Ut(),"	";case"v":return Ut(),"\v";case"0":if(Ut(),Z.isDigit(zt()))throw Yt(Ut());return"\0";case"x":return Ut(),F();case"u":return Ut(),rt();case`
`:case"\u2028":case"\u2029":return Ut(),"";case"\r":return Ut(),zt()===`
`&&Ut(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw Yt(Ut());case void 0:throw Yt(Ut())}return Ut()}function F(){var $t="",re=zt();if(!Z.isHexDigit(re)||($t+=Ut(),re=zt(),!Z.isHexDigit(re)))throw Yt(Ut());return $t+=Ut(),String.fromCodePoint(parseInt($t,16))}function rt(){for(var $t="",re=4;re-- >0;){var Re=zt();if(!Z.isHexDigit(Re))throw Yt(Ut());$t+=Ut()}return String.fromCodePoint(parseInt($t,16))}var At={start:function(){if(er.type==="eof")throw Ce();Ct()},beforePropertyName:function(){switch(er.type){case"identifier":case"string":Gr=er.value,ye="afterPropertyName";return;case"punctuator":Nt();return;case"eof":throw Ce()}},afterPropertyName:function(){if(er.type==="eof")throw Ce();ye="beforePropertyValue"},beforePropertyValue:function(){if(er.type==="eof")throw Ce();Ct()},beforeArrayValue:function(){if(er.type==="eof")throw Ce();if(er.type==="punctuator"&&er.value==="]"){Nt();return}Ct()},afterPropertyValue:function(){if(er.type==="eof")throw Ce();switch(er.value){case",":ye="beforePropertyName";return;case"}":Nt()}},afterArrayValue:function(){if(er.type==="eof")throw Ce();switch(er.value){case",":ye="beforeArrayValue";return;case"]":Nt()}},end:function(){}};function Ct(){var $t;switch(er.type){case"punctuator":switch(er.value){case"{":$t={};break;case"[":$t=[];break}break;case"null":case"boolean":case"numeric":case"string":$t=er.value;break}if(Lr===void 0)Lr=$t;else{var re=rr[rr.length-1];Array.isArray(re)?re.push($t):Object.defineProperty(re,Gr,{value:$t,writable:!0,enumerable:!0,configurable:!0})}if($t!==null&&typeof $t=="object")rr.push($t),Array.isArray($t)?ye="beforeArrayValue":ye="beforePropertyName";else{var Re=rr[rr.length-1];Re==null?ye="end":Array.isArray(Re)?ye="afterArrayValue":ye="afterPropertyValue"}}function Nt(){rr.pop();var $t=rr[rr.length-1];$t==null?ye="end":Array.isArray($t)?ye="afterArrayValue":ye="afterPropertyValue"}function Yt($t){return sr($t===void 0?"JSON5: invalid end of input at "+mr+":"+ur:"JSON5: invalid character '"+Be($t)+"' at "+mr+":"+ur)}function Ce(){return sr("JSON5: invalid end of input at "+mr+":"+ur)}function Qt(){return ur-=5,sr("JSON5: invalid identifier character at "+mr+":"+ur)}function Ee($t){}function Be($t){var re={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(re[$t])return re[$t];if($t<" "){var Re=$t.charCodeAt(0).toString(16);return"\\x"+("00"+Re).substring(Re.length)}return $t}function sr($t){var re=new SyntaxError($t);return re.lineNumber=mr,re.columnNumber=ur,re}var O=function($t,re,Re){var De=[],ke="",Ne,tr,lr="",or;if(re!=null&&typeof re=="object"&&!Array.isArray(re)&&(Re=re.space,or=re.quote,re=re.replacer),typeof re=="function")tr=re;else if(Array.isArray(re)){Ne=[];for(var Ar=0,jr=re;Ar<jr.length;Ar+=1){var ln=jr[Ar],cn=void 0;typeof ln=="string"?cn=ln:(typeof ln=="number"||ln instanceof String||ln instanceof Number)&&(cn=String(ln)),cn!==void 0&&Ne.indexOf(cn)<0&&Ne.push(cn)}}return Re instanceof Number?Re=Number(Re):Re instanceof String&&(Re=String(Re)),typeof Re=="number"?Re>0&&(Re=Math.min(10,Math.floor(Re)),lr="          ".substr(0,Re)):typeof Re=="string"&&(lr=Re.substr(0,10)),Vr("",{"":$t});function Vr(Qr,Wn){var Sr=Wn[Qr];switch(Sr!=null&&(typeof Sr.toJSON5=="function"?Sr=Sr.toJSON5(Qr):typeof Sr.toJSON=="function"&&(Sr=Sr.toJSON(Qr))),tr&&(Sr=tr.call(Wn,Qr,Sr)),Sr instanceof Number?Sr=Number(Sr):Sr instanceof String?Sr=String(Sr):Sr instanceof Boolean&&(Sr=Sr.valueOf()),Sr){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof Sr=="string")return yr(Sr,!1);if(typeof Sr=="number")return String(Sr);if(typeof Sr=="object")return Array.isArray(Sr)?Kn(Sr):Tr(Sr)}function yr(Qr){for(var Wn={"'":.1,'"':.2},Sr={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},bn="",os=0;os<Qr.length;os++){var _n=Qr[os];switch(_n){case"'":case'"':Wn[_n]++,bn+=_n;continue;case"\0":if(Z.isDigit(Qr[os+1])){bn+="\\x00";continue}}if(Sr[_n]){bn+=Sr[_n];continue}if(_n<" "){var Ps=_n.charCodeAt(0).toString(16);bn+="\\x"+("00"+Ps).substring(Ps.length);continue}bn+=_n}var Xr=or||Object.keys(Wn).reduce(function(Is,Ts){return Wn[Is]<Wn[Ts]?Is:Ts});return bn=bn.replace(new RegExp(Xr,"g"),Sr[Xr]),Xr+bn+Xr}function Tr(Qr){if(De.indexOf(Qr)>=0)throw TypeError("Converting circular structure to JSON5");De.push(Qr);var Wn=ke;ke=ke+lr;for(var Sr=Ne||Object.keys(Qr),bn=[],os=0,_n=Sr;os<_n.length;os+=1){var Ps=_n[os],Xr=Vr(Ps,Qr);if(Xr!==void 0){var Is=gn(Ps)+":";lr!==""&&(Is+=" "),Is+=Xr,bn.push(Is)}}var Ts;if(bn.length===0)Ts="{}";else{var Xs;if(lr==="")Xs=bn.join(","),Ts="{"+Xs+"}";else{var qs=`,
`+ke;Xs=bn.join(qs),Ts=`{
`+ke+Xs+`,
`+Wn+"}"}}return De.pop(),ke=Wn,Ts}function gn(Qr){if(Qr.length===0)return yr(Qr,!0);var Wn=String.fromCodePoint(Qr.codePointAt(0));if(!Z.isIdStartChar(Wn))return yr(Qr,!0);for(var Sr=Wn.length;Sr<Qr.length;Sr++)if(!Z.isIdContinueChar(String.fromCodePoint(Qr.codePointAt(Sr))))return yr(Qr,!0);return Qr}function Kn(Qr){if(De.indexOf(Qr)>=0)throw TypeError("Converting circular structure to JSON5");De.push(Qr);var Wn=ke;ke=ke+lr;for(var Sr=[],bn=0;bn<Qr.length;bn++){var os=Vr(String(bn),Qr);Sr.push(os!==void 0?os:"null")}var _n;if(Sr.length===0)_n="[]";else if(lr===""){var Ps=Sr.join(",");_n="["+Ps+"]"}else{var Xr=`,
`+ke,Is=Sr.join(Xr);_n=`[
`+ke+Is+`,
`+Wn+"]"}return De.pop(),ke=Wn,_n}},le={parse:Br,stringify:O},qt=le,pe=qt;return pe})}),Ew=ce((t,r)=>{var n=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...i)=>{}:()=>{};r.exports=n}),Aw=ce((t,r)=>{var n="2.0.0",i=Number.MAX_SAFE_INTEGER||9007199254740991,u=16,p=250,g=["major","premajor","minor","preminor","patch","prepatch","prerelease"];r.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:u,MAX_SAFE_BUILD_LENGTH:p,MAX_SAFE_INTEGER:i,RELEASE_TYPES:g,SEMVER_SPEC_VERSION:n,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}}),_w=ce((t,r)=>{var{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:u}=Aw(),p=Ew();t=r.exports={};var g=t.re=[],m=t.safeRe=[],A=t.src=[],y=t.t={},D=0,o="[a-zA-Z0-9-]",M=[["\\s",1],["\\d",u],[o,i]],W=U=>{for(let[nt,X]of M)U=U.split(`${nt}*`).join(`${nt}{0,${X}}`).split(`${nt}+`).join(`${nt}{1,${X}}`);return U},w=(U,nt,X)=>{let j=W(nt),it=D++;p(U,it,nt),y[U]=it,A[it]=nt,g[it]=new RegExp(nt,X?"g":void 0),m[it]=new RegExp(j,X?"g":void 0)};w("NUMERICIDENTIFIER","0|[1-9]\\d*"),w("NUMERICIDENTIFIERLOOSE","\\d+"),w("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${o}*`),w("MAINVERSION",`(${A[y.NUMERICIDENTIFIER]})\\.(${A[y.NUMERICIDENTIFIER]})\\.(${A[y.NUMERICIDENTIFIER]})`),w("MAINVERSIONLOOSE",`(${A[y.NUMERICIDENTIFIERLOOSE]})\\.(${A[y.NUMERICIDENTIFIERLOOSE]})\\.(${A[y.NUMERICIDENTIFIERLOOSE]})`),w("PRERELEASEIDENTIFIER",`(?:${A[y.NUMERICIDENTIFIER]}|${A[y.NONNUMERICIDENTIFIER]})`),w("PRERELEASEIDENTIFIERLOOSE",`(?:${A[y.NUMERICIDENTIFIERLOOSE]}|${A[y.NONNUMERICIDENTIFIER]})`),w("PRERELEASE",`(?:-(${A[y.PRERELEASEIDENTIFIER]}(?:\\.${A[y.PRERELEASEIDENTIFIER]})*))`),w("PRERELEASELOOSE",`(?:-?(${A[y.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${A[y.PRERELEASEIDENTIFIERLOOSE]})*))`),w("BUILDIDENTIFIER",`${o}+`),w("BUILD",`(?:\\+(${A[y.BUILDIDENTIFIER]}(?:\\.${A[y.BUILDIDENTIFIER]})*))`),w("FULLPLAIN",`v?${A[y.MAINVERSION]}${A[y.PRERELEASE]}?${A[y.BUILD]}?`),w("FULL",`^${A[y.FULLPLAIN]}$`),w("LOOSEPLAIN",`[v=\\s]*${A[y.MAINVERSIONLOOSE]}${A[y.PRERELEASELOOSE]}?${A[y.BUILD]}?`),w("LOOSE",`^${A[y.LOOSEPLAIN]}$`),w("GTLT","((?:<|>)?=?)"),w("XRANGEIDENTIFIERLOOSE",`${A[y.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),w("XRANGEIDENTIFIER",`${A[y.NUMERICIDENTIFIER]}|x|X|\\*`),w("XRANGEPLAIN",`[v=\\s]*(${A[y.XRANGEIDENTIFIER]})(?:\\.(${A[y.XRANGEIDENTIFIER]})(?:\\.(${A[y.XRANGEIDENTIFIER]})(?:${A[y.PRERELEASE]})?${A[y.BUILD]}?)?)?`),w("XRANGEPLAINLOOSE",`[v=\\s]*(${A[y.XRANGEIDENTIFIERLOOSE]})(?:\\.(${A[y.XRANGEIDENTIFIERLOOSE]})(?:\\.(${A[y.XRANGEIDENTIFIERLOOSE]})(?:${A[y.PRERELEASELOOSE]})?${A[y.BUILD]}?)?)?`),w("XRANGE",`^${A[y.GTLT]}\\s*${A[y.XRANGEPLAIN]}$`),w("XRANGELOOSE",`^${A[y.GTLT]}\\s*${A[y.XRANGEPLAINLOOSE]}$`),w("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),w("COERCE",`${A[y.COERCEPLAIN]}(?:$|[^\\d])`),w("COERCEFULL",A[y.COERCEPLAIN]+`(?:${A[y.PRERELEASE]})?(?:${A[y.BUILD]})?(?:$|[^\\d])`),w("COERCERTL",A[y.COERCE],!0),w("COERCERTLFULL",A[y.COERCEFULL],!0),w("LONETILDE","(?:~>?)"),w("TILDETRIM",`(\\s*)${A[y.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",w("TILDE",`^${A[y.LONETILDE]}${A[y.XRANGEPLAIN]}$`),w("TILDELOOSE",`^${A[y.LONETILDE]}${A[y.XRANGEPLAINLOOSE]}$`),w("LONECARET","(?:\\^)"),w("CARETTRIM",`(\\s*)${A[y.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",w("CARET",`^${A[y.LONECARET]}${A[y.XRANGEPLAIN]}$`),w("CARETLOOSE",`^${A[y.LONECARET]}${A[y.XRANGEPLAINLOOSE]}$`),w("COMPARATORLOOSE",`^${A[y.GTLT]}\\s*(${A[y.LOOSEPLAIN]})$|^$`),w("COMPARATOR",`^${A[y.GTLT]}\\s*(${A[y.FULLPLAIN]})$|^$`),w("COMPARATORTRIM",`(\\s*)${A[y.GTLT]}\\s*(${A[y.LOOSEPLAIN]}|${A[y.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",w("HYPHENRANGE",`^\\s*(${A[y.XRANGEPLAIN]})\\s+-\\s+(${A[y.XRANGEPLAIN]})\\s*$`),w("HYPHENRANGELOOSE",`^\\s*(${A[y.XRANGEPLAINLOOSE]})\\s+-\\s+(${A[y.XRANGEPLAINLOOSE]})\\s*$`),w("STAR","(<|>)?=?\\s*\\*"),w("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),w("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}),xS=ce((t,r)=>{var n=Object.freeze({loose:!0}),i=Object.freeze({}),u=p=>p?typeof p!="object"?n:p:i;r.exports=u}),NS=ce((t,r)=>{var n=/^[0-9]+$/,i=(p,g)=>{let m=n.test(p),A=n.test(g);return m&&A&&(p=+p,g=+g),p===g?0:m&&!A?-1:A&&!m?1:p<g?-1:1},u=(p,g)=>i(g,p);r.exports={compareIdentifiers:i,rcompareIdentifiers:u}}),Wp=ce((t,r)=>{var n=Ew(),{MAX_LENGTH:i,MAX_SAFE_INTEGER:u}=Aw(),{safeRe:p,t:g}=_w(),m=xS(),{compareIdentifiers:A}=NS(),y=class Hi{constructor(o,M){if(M=m(M),o instanceof Hi){if(o.loose===!!M.loose&&o.includePrerelease===!!M.includePrerelease)return o;o=o.version}else if(typeof o!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof o}".`);if(o.length>i)throw new TypeError(`version is longer than ${i} characters`);n("SemVer",o,M),this.options=M,this.loose=!!M.loose,this.includePrerelease=!!M.includePrerelease;let W=o.trim().match(M.loose?p[g.LOOSE]:p[g.FULL]);if(!W)throw new TypeError(`Invalid Version: ${o}`);if(this.raw=o,this.major=+W[1],this.minor=+W[2],this.patch=+W[3],this.major>u||this.major<0)throw new TypeError("Invalid major version");if(this.minor>u||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>u||this.patch<0)throw new TypeError("Invalid patch version");W[4]?this.prerelease=W[4].split(".").map(w=>{if(/^[0-9]+$/.test(w)){let U=+w;if(U>=0&&U<u)return U}return w}):this.prerelease=[],this.build=W[5]?W[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(o){if(n("SemVer.compare",this.version,this.options,o),!(o instanceof Hi)){if(typeof o=="string"&&o===this.version)return 0;o=new Hi(o,this.options)}return o.version===this.version?0:this.compareMain(o)||this.comparePre(o)}compareMain(o){return o instanceof Hi||(o=new Hi(o,this.options)),A(this.major,o.major)||A(this.minor,o.minor)||A(this.patch,o.patch)}comparePre(o){if(o instanceof Hi||(o=new Hi(o,this.options)),this.prerelease.length&&!o.prerelease.length)return-1;if(!this.prerelease.length&&o.prerelease.length)return 1;if(!this.prerelease.length&&!o.prerelease.length)return 0;let M=0;do{let W=this.prerelease[M],w=o.prerelease[M];if(n("prerelease compare",M,W,w),W===void 0&&w===void 0)return 0;if(w===void 0)return 1;if(W===void 0)return-1;if(W!==w)return A(W,w)}while(++M)}compareBuild(o){o instanceof Hi||(o=new Hi(o,this.options));let M=0;do{let W=this.build[M],w=o.build[M];if(n("build compare",M,W,w),W===void 0&&w===void 0)return 0;if(w===void 0)return 1;if(W===void 0)return-1;if(W!==w)return A(W,w)}while(++M)}inc(o,M,W){switch(o){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",M,W);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",M,W);break;case"prepatch":this.prerelease.length=0,this.inc("patch",M,W),this.inc("pre",M,W);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",M,W),this.inc("pre",M,W);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let w=Number(W)?1:0;if(!M&&W===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[w];else{let U=this.prerelease.length;for(;--U>=0;)typeof this.prerelease[U]=="number"&&(this.prerelease[U]++,U=-2);if(U===-1){if(M===this.prerelease.join(".")&&W===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(w)}}if(M){let U=[M,w];W===!1&&(U=[M]),A(this.prerelease[0],M)===0?isNaN(this.prerelease[1])&&(this.prerelease=U):this.prerelease=U}break}default:throw new Error(`invalid increment argument: ${o}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};r.exports=y}),qS=ce((t,r)=>{var n=Wp(),i=(u,p,g)=>new n(u,g).compare(new n(p,g));r.exports=i}),KS=ce((t,r)=>{var n=qS(),i=(u,p,g)=>n(u,p,g)>=0;r.exports=i}),YS=ce((t,r)=>{var n=Wp(),i=(u,p,g=!1)=>{if(u instanceof n)return u;try{return new n(u,p)}catch(m){if(!g)return null;throw m}};r.exports=i}),XS=ce((t,r)=>{var n=Wp(),i=YS(),{safeRe:u,t:p}=_w(),g=(m,A)=>{if(m instanceof n)return m;if(typeof m=="number"&&(m=String(m)),typeof m!="string")return null;A=A||{};let y=null;if(!A.rtl)y=m.match(A.includePrerelease?u[p.COERCEFULL]:u[p.COERCE]);else{let U=A.includePrerelease?u[p.COERCERTLFULL]:u[p.COERCERTL],nt;for(;(nt=U.exec(m))&&(!y||y.index+y[0].length!==m.length);)(!y||nt.index+nt[0].length!==y.index+y[0].length)&&(y=nt),U.lastIndex=nt.index+nt[1].length+nt[2].length;U.lastIndex=-1}if(y===null)return null;let D=y[2],o=y[3]||"0",M=y[4]||"0",W=A.includePrerelease&&y[5]?`-${y[5]}`:"",w=A.includePrerelease&&y[6]?`+${y[6]}`:"";return i(`${D}.${o}.${M}${W}${w}`,A)};r.exports=g}),jd="2.20.13",CA="3.7.7",n$=CA,Kc=typeof Buffer=="function",EA=typeof TextDecoder=="function"?new TextDecoder:void 0,AA=typeof TextEncoder=="function"?new TextEncoder:void 0,i$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Cf=Array.prototype.slice.call(i$),Hd=(t=>{let r={};return t.forEach((n,i)=>r[n]=i),r})(Cf),s$=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,$n=String.fromCharCode.bind(String),yA=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),DA=t=>t.replace(/=/g,"").replace(/[+\/]/g,r=>r=="+"?"-":"_"),FA=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),SA=t=>{let r,n,i,u,p="",g=t.length%3;for(let m=0;m<t.length;){if((n=t.charCodeAt(m++))>255||(i=t.charCodeAt(m++))>255||(u=t.charCodeAt(m++))>255)throw new TypeError("invalid character found");r=n<<16|i<<8|u,p+=Cf[r>>18&63]+Cf[r>>12&63]+Cf[r>>6&63]+Cf[r&63]}return g?p.slice(0,g-3)+"===".substring(g):p},vg=typeof btoa=="function"?t=>btoa(t):Kc?t=>Buffer.from(t,"binary").toString("base64"):SA,gg=Kc?t=>Buffer.from(t).toString("base64"):t=>{let r=[];for(let n=0,i=t.length;n<i;n+=4096)r.push($n.apply(null,t.subarray(n,n+4096)));return vg(r.join(""))},Md=(t,r=!1)=>r?DA(gg(t)):gg(t),a$=t=>{if(t.length<2){var r=t.charCodeAt(0);return r<128?t:r<2048?$n(192|r>>>6)+$n(128|r&63):$n(224|r>>>12&15)+$n(128|r>>>6&63)+$n(128|r&63)}else{var r=65536+(t.charCodeAt(0)-55296)*1024+(t.charCodeAt(1)-56320);return $n(240|r>>>18&7)+$n(128|r>>>12&63)+$n(128|r>>>6&63)+$n(128|r&63)}},u$=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,IA=t=>t.replace(u$,a$),bA=Kc?t=>Buffer.from(t,"utf8").toString("base64"):AA?t=>gg(AA.encode(t)):t=>vg(IA(t)),Vc=(t,r=!1)=>r?DA(bA(t)):bA(t),_A=t=>Vc(t,!0),o$=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,c$=t=>{switch(t.length){case 4:var r=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),n=r-65536;return $n((n>>>10)+55296)+$n((n&1023)+56320);case 3:return $n((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return $n((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},BA=t=>t.replace(o$,c$),$A=t=>{if(t=t.replace(/\s+/g,""),!s$.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let r,n="",i,u;for(let p=0;p<t.length;)r=Hd[t.charAt(p++)]<<18|Hd[t.charAt(p++)]<<12|(i=Hd[t.charAt(p++)])<<6|(u=Hd[t.charAt(p++)]),n+=i===64?$n(r>>16&255):u===64?$n(r>>16&255,r>>8&255):$n(r>>16&255,r>>8&255,r&255);return n},wg=typeof atob=="function"?t=>atob(FA(t)):Kc?t=>Buffer.from(t,"base64").toString("binary"):$A,RA=Kc?t=>yA(Buffer.from(t,"base64")):t=>yA(wg(t).split("").map(r=>r.charCodeAt(0))),xA=t=>RA(PA(t)),l$=Kc?t=>Buffer.from(t,"base64").toString("utf8"):EA?t=>EA.decode(RA(t)):t=>BA(wg(t)),PA=t=>FA(t.replace(/[-_]/g,r=>r=="-"?"+":"/")),mg=t=>l$(PA(t)),f$=t=>{if(typeof t!="string")return!1;let r=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(r)||!/[^\s0-9a-zA-Z\-_]/.test(r)},OA=t=>({value:t,enumerable:!1,writable:!0,configurable:!0}),TA=function(){let t=(r,n)=>Object.defineProperty(String.prototype,r,OA(n));t("fromBase64",function(){return mg(this)}),t("toBase64",function(r){return Vc(this,r)}),t("toBase64URI",function(){return Vc(this,!0)}),t("toBase64URL",function(){return Vc(this,!0)}),t("toUint8Array",function(){return xA(this)})},NA=function(){let t=(r,n)=>Object.defineProperty(Uint8Array.prototype,r,OA(n));t("toBase64",function(r){return Md(this,r)}),t("toBase64URI",function(){return Md(this,!0)}),t("toBase64URL",function(){return Md(this,!0)})},h$=()=>{TA(),NA()},ft={version:CA,VERSION:n$,atob:wg,atobPolyfill:$A,btoa:vg,btoaPolyfill:SA,fromBase64:mg,toBase64:Vc,encode:Vc,encodeURI:_A,encodeURL:_A,utob:IA,btou:BA,decode:mg,isValid:f$,fromUint8Array:Md,toUint8Array:xA,extendString:TA,extendUint8Array:NA,extendBuiltins:h$},Mu=typeof $task<"u",eu=typeof $loon<"u",qu=typeof $httpClient<"u"&&!eu,ra=eval('typeof process !== "undefined"'),kA=typeof $environment<"u"&&$environment["stash-version"],LA=typeof $rocket<"u",d$=typeof egern=="object",p$=typeof $native<"u",Vu=typeof $Plugins<"u";function qd(t){return t!==null&&typeof t=="object"&&[null,Object.prototype].includes(Object.getPrototypeOf(t))}function g$(t){let[r,n,i,u,p,g,m]=t.match(/^socks5:\/\/(?:(.*?):(.*?)@)?(.*?)(?::(\d+?))?(\?.*?)?(?:#(.*?))?$/);if(p)p=parseInt(p,10);else throw $.error(`port is not present in line: ${t}`),new Error(`port is not present in line: ${t}`);return{type:5,host:u,port:p,userId:n!=null?decodeURIComponent(n):void 0,password:i!=null?decodeURIComponent(i):void 0}}var Vd=class{constructor(t="untitled",r=!1){this.name=t,this.debug=r,this.http=xs(),this.env=hn(),ra&&require("dotenv").config(),this.node=ra?{fs:require("fs")}:null,this.initCache();let n=(i,u)=>new Promise(function(p){setTimeout(p.bind(null,u),i)});Promise.prototype.delay=async function(i){let u=await this;return await n(i,u)}}initCache(){if(Mu&&(this.cache=JSON.parse($prefs.valueForKey(this.name)||"{}")),(eu||qu)&&(this.cache=JSON.parse($persistentStore.read(this.name)||"{}")),Vu&&(this.cache=JSON.parse($Plugins.SubStoreCache.get(this.name)||"{}")),ra){let basePath=eval("process.env.SUB_STORE_DATA_BASE_PATH")||".",rootPath=`${basePath}/root.json`,backupRootPath=`${basePath}/root_${Date.now()}.json`;if(this.log(`Root path: ${rootPath}`),this.node.fs.existsSync(rootPath))try{this.root=JSON.parse(this.node.fs.readFileSync(`${rootPath}`))}catch(t){this.node.fs.copyFileSync(rootPath,backupRootPath),this.error(`Failed to parse ${rootPath}: ${t.message}. Backup created at ${backupRootPath}`)}qd(this.root)||(this.node.fs.writeFileSync(rootPath,JSON.stringify({}),{flag:"w"}),this.root={});let fpath=`${basePath}/${this.name}.json`,backupPath=`${basePath}/${this.name}_${Date.now()}.json`;if(this.log(`Data path: ${fpath}`),this.node.fs.existsSync(fpath))try{if(this.cache=JSON.parse(this.node.fs.readFileSync(`${fpath}`,"utf-8")),!qd(this.cache))throw new Error("Invalid Data")}catch{try{let t=ft.decode(this.node.fs.readFileSync(`${fpath}`,"utf-8"));if(this.cache=JSON.parse(t),this.node.fs.writeFileSync(fpath,t,{flag:"w"}),!qd(this.cache))throw new Error("Invalid Data")}catch(t){this.node.fs.copyFileSync(fpath,backupPath),this.error(`Failed to parse ${fpath}: ${t.message}. Backup created at ${backupPath}`)}}qd(this.cache)||(this.node.fs.writeFileSync(fpath,JSON.stringify({}),{flag:"w"}),this.cache={})}}persistCache(){let data=JSON.stringify(this.cache,null,2);if(Mu&&$prefs.setValueForKey(data,this.name),(eu||qu)&&$persistentStore.write(data,this.name),Vu&&$Plugins.SubStoreCache.set(this.name,data),ra){let basePath=eval("process.env.SUB_STORE_DATA_BASE_PATH")||".";this.node.fs.writeFileSync(`${basePath}/${this.name}.json`,data,{flag:"w"},t=>{}),this.node.fs.writeFileSync(`${basePath}/root.json`,JSON.stringify(this.root,null,2),{flag:"w"},t=>{})}}write(t,r){if(this.log(`SET ${r}`),r.indexOf("#")!==-1){if(r=r.substr(1),qu||eu)return $persistentStore.write(t,r);if(Mu)return $prefs.setValueForKey(t,r);if(ra&&(this.root[r]=t),Vu)return $Plugins.SubStoreCache.set(r,t)}else this.cache[r]=t;this.persistCache()}read(t){if(this.log(`READ ${t}`),t.indexOf("#")!==-1){if(t=t.substr(1),qu||eu)return $persistentStore.read(t);if(Mu)return $prefs.valueForKey(t);if(ra)return this.root[t];if(Vu)return $Plugins.SubStoreCache.get(t)}else return this.cache[t]}delete(t){if(this.log(`DELETE ${t}`),t.indexOf("#")!==-1){if(t=t.substr(1),qu||eu)return $persistentStore.write(null,t);if(Mu)return $prefs.removeValueForKey(t);if(ra&&delete this.root[t],Vu)return $Plugins.SubStoreCache.remove(t)}else delete this.cache[t];this.persistCache()}notify(title,subtitle="",content="",options={}){let openURL=options["open-url"],mediaURL=options["media-url"];if(Mu&&$notify(title,subtitle,content,options),qu&&$notification.post(title,subtitle,content+`${mediaURL?`
\u591A\u5A92\u4F53:`+mediaURL:""}`,{url:openURL}),eu){let t={};openURL&&(t.openUrl=openURL),mediaURL&&(t.mediaUrl=mediaURL),JSON.stringify(t)==="{}"?$notification.post(title,subtitle,content):$notification.post(title,subtitle,content,t)}if(ra){let content_=content+(openURL?`
\u70B9\u51FB\u8DF3\u8F6C: ${openURL}`:"")+(mediaURL?`
\u591A\u5A92\u4F53: ${mediaURL}`:""),push=eval("process.env.SUB_STORE_PUSH_SERVICE");if(push){let t=push.replace("[\u63A8\u9001\u6807\u9898]",encodeURIComponent(title||"Sub-Store")).replace("[\u63A8\u9001\u5185\u5BB9]",encodeURIComponent([subtitle,content_].map(r=>r).join(`
`)));xs().get({url:t}).then(r=>{}).catch(r=>{})}}Vu&&$Plugins.Notify(title,subtitle+`
`+content)}log(t){this.debug}info(t){}error(t){}wait(t){return new Promise(r=>setTimeout(r,t))}done(t={}){Mu||eu||qu||Vu?$done(t):ra&&typeof $context<"u"&&($context.headers=t.headers,$context.statusCode=t.statusCode,$context.body=t.body)}};function hn(){return{isQX:Mu,isLoon:eu,isSurge:qu,isNode:ra,isStash:kA,isShadowRocket:LA,isEgern:d$,isLanceX:p$,isGUIforCores:Vu}}function xs(defaultOptions={baseURL:""}){let{isQX,isLoon,isSurge,isNode,isGUIforCores}=hn(),methods=["GET","POST","PUT","DELETE","HEAD","OPTIONS","PATCH"],URL_REGEX=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/;function send(method,options){options=typeof options=="string"?{url:options}:options;let baseURL=defaultOptions.baseURL;baseURL&&!URL_REGEX.test(options.url||"")&&(options.url=baseURL?baseURL+options.url:options.url),options={...defaultOptions,...options};let timeout=options.timeout,events={onRequest:()=>{},onResponse:t=>t,onTimeout:()=>{},...options.events};if(events.onRequest(method,options),options.node&&isSurge){let t=$environment["surge-build"];t&&parseInt(t)>=2407&&(options["policy-descriptor"]=options.node,delete options.node)}let worker;isQX?worker=$task.fetch({method,url:options.url,headers:options.headers,body:options.body,opts:options.opts}):isLoon||isSurge||isNode?worker=new Promise(async(resolve,reject)=>{let body=options.body,opts=JSON.parse(JSON.stringify(options));if(opts.body=body,opts.timeout=opts.timeout||8e3,opts.timeout&&(opts.timeout++,isNaN(opts.timeout)&&(opts.timeout=8e3),!isNode)){let t="ms";(isSurge||kA||LA)&&(opts.timeout=Math.ceil(opts.timeout/1e3),t="s")}if(isNode){let undici=require("undici"),{socksDispatcher}=require("fetch-socks"),{ProxyAgent,EnvHttpProxyAgent,request,interceptors}=undici,agentOpts={connect:{rejectUnauthorized:!(opts.strictSSL===!1||opts.insecure===!0)},bodyTimeout:opts.timeout,headersTimeout:opts.timeout};try{let url=new URL(opts.url);(url.username||url.password)&&(opts.headers={...opts.headers||{},Authorization:`Basic ${Buffer.from(`${url.username||""}:${url.password||""}`).toString("base64")}`});let dispatcher;if(!opts.proxy){let allProxy=eval("process.env.all_proxy")||eval("process.env.ALL_PROXY");allProxy&&/^socks5:\/\//.test(allProxy)&&(opts.proxy=allProxy)}opts.proxy?/^socks5:\/\//.test(opts.proxy)?dispatcher=socksDispatcher(g$(opts.proxy),agentOpts):dispatcher=new ProxyAgent({...agentOpts,uri:opts.proxy}):dispatcher=new EnvHttpProxyAgent(agentOpts);let response=await request(opts.url,{...opts,method:method.toUpperCase(),dispatcher:dispatcher.compose(interceptors.redirect({maxRedirections:3,throwOnMaxRedirects:!0}))});resolve({statusCode:response.statusCode,headers:response.headers,body:opts.encoding===null?await response.body.arrayBuffer():await response.body.text()})}catch(t){reject(t)}}else $httpClient[method.toLowerCase()](opts,(t,r,n)=>{t?reject(t):resolve({statusCode:r.status||r.statusCode,headers:r.headers,body:n})})}):isGUIforCores&&(worker=new Promise(async(t,r)=>{try{let n=await $Plugins.Requests({method,url:options.url,headers:options.headers,body:options.body,autoTransformBody:!1,options:{Proxy:options.proxy,Timeout:options.timeout?options.timeout/1e3:15}});t({statusCode:n.status,headers:n.headers,body:n.body})}catch(n){r(n)}}));let timeoutid,timer=timeout?new Promise((t,r)=>{timeoutid=setTimeout(()=>(events.onTimeout(),r(`${method} URL: ${options.url} exceeds the timeout ${timeout} ms`)),timeout)}):null;return(timer?Promise.race([timer,worker]).then(t=>(typeof clearTimeout<"u"&&clearTimeout(timeoutid),t)):worker).then(t=>events.onResponse(t))}let http={};return methods.forEach(t=>http[t.toLowerCase()]=r=>send(t,r)),http}var m$=new Vd("sub-store"),R=m$,Eg="schemaVersion",Kt="settings",Jt="subs",Zt="collections",Lt="files",jn="modules",Bt="artifacts",Df="rules",ui="tokens",UA="Auto Generated Sub-Store Backup",Kd="Sub-Store",Lo="Sub-Store Artifacts Repository",Uo="#sub-store-cached-resource",jo="#sub-store-cached-headers-resource",zd="#sub-store-chr-expiration-time",Ho="#sub-store-cached-script-resource",Gd="#sub-store-csr-expiration-time";function Ku(){v$()}function v$(){let t=R.read(Eg);t||w$(),t!=="2.0"&&R.write("2.0",Eg)}function w$(){R.info("Start migrating...");let t=R.read(Jt)||{},r=Object.values(t).map(w=>(w.source=w.source||"remote",M(w),W(w),w));R.write(r,Jt);let n=R.read(Zt)||{},i=Object.values(n).map(w=>(delete w.ua,M(w),W(w),w));R.write(i,Zt);let u=R.read(Bt)||{},p=Object.values(u);R.write(p,Bt);let g=R.read(Df)||{},m=Object.values(g);R.write(m,Df);let A=R.read(Lt)||{},y=Object.values(A);R.write(y,Lt);let D=R.read(ui)||{},o=Object.values(D);R.write(o,ui),delete R.cache.builtin,R.info("Migration complete!");function M(w){let U=w["display-name"];U&&(w.displayName=U,delete w["display-name"])}function W(w){let U=w.process;if(!U||U.length===0)return;let nt=[],X={type:"Quick Setting Operator",args:{udp:"DEFAULT",tfo:"DEFAULT",scert:"DEFAULT","vmess aead":"DEFAULT",useless:"DEFAULT"}};for(let j of U)if(j.type){if(j.type==="Useless Filter")X.args.useless="ENABLED";else if(j.type==="Set Property Operator"){let{key:it,value:ot}=j.args;switch(it){case"udp":X.args.udp=ot?"ENABLED":"DISABLED";break;case"tfo":X.args.tfo=ot?"ENABLED":"DISABLED";break;case"skip-cert-verify":X.args.scert=ot?"ENABLED":"DISABLED";break;case"aead":X.args["vmess aead"]=ot?"ENABLED":"DISABLED";break}}else if(j.type.indexOf("Keyword")===-1)if(j.type==="Flag Operator"){let it=typeof j.args>"u"?!0:j.args;j.args={mode:it?"add":"remove"},nt.push(j)}else nt.push(j)}nt.unshift(X),w.process=nt}}var Jz=tn(Sf());function Ag({substore:$,port,host}){let{isNode}=hn(),DEFAULT_HEADERS={"Content-Type":"text/plain;charset=UTF-8","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST,GET,OPTIONS,PATCH,PUT,DELETE","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept","X-Powered-By":"Sub-Store"};if(isNode){let express_=require("express"),bodyParser=require("body-parser"),app=express_(),limit=eval("process.env.SUB_STORE_BODY_JSON_LIMIT")||"1mb";return $.info(`[BACKEND] body JSON limit: ${limit}`),app.use(bodyParser.json({verify:rawBodySaver,limit})),app.use(bodyParser.urlencoded({verify:rawBodySaver,extended:!0})),app.use(bodyParser.raw({verify:rawBodySaver,type:"*/*"})),app.use((t,r,n)=>{r.set(DEFAULT_HEADERS),n()}),app.start=()=>{app.get("*",function(r,n){n.status(404).end()});let t=app.listen(port,host,()=>{let{address:r,port:n}=t.address();$.info(`[BACKEND] listening on ${r}:${n}`)})},app}let handlers=[],METHODS_NAMES=["GET","POST","PUT","DELETE","PATCH","OPTIONS","HEAD'","ALL"],dispatch=(t,r=0)=>{let{method:n,url:i,headers:u,body:p}=t;u=E$(u),/json/i.test(u["content-type"])&&(p=JSON.parse(p)),n=n.toUpperCase();let{path:g,query:m}=y$(i),A=null,y,D=0;for(y=r;y<handlers.length;y++)if(handlers[y].method==="ALL"||n===handlers[y].method){let{pattern:o}=handlers[y];A$(o,g)&&o.split("/").length>D&&(A=handlers[y],D=o.split("/").length)}if(A){let o=()=>{dispatch(n,i,y)},M={method:n,url:i,path:g,query:m,params:jA(A.pattern,g),headers:u,body:p},W=Response(),w=A.callback,U=nt=>{W.status(500).json({status:"failed",message:`Internal Server Error: ${nt}`})};if(w.constructor.name==="AsyncFunction")w(M,W,o).catch(U);else try{w(M,W,o)}catch(nt){U(nt)}}else Response().status(404).json({status:"failed",message:"ERROR: 404 not found"})},app={};return METHODS_NAMES.forEach(t=>{app[t.toLowerCase()]=(r,n)=>{handlers.push({method:t,pattern:r,callback:n})}}),app.route=t=>{let r={};return METHODS_NAMES.forEach(n=>{r[n.toLowerCase()]=i=>(handlers.push({method:n,pattern:t,callback:i}),r)}),r},app.start=()=>{dispatch($request)},app;function rawBodySaver(t,r,n,i){n&&n.length&&(t.rawBody=n.toString(i||"utf8"))}function Response(){let t=200,{isQX:r,isLoon:n,isSurge:i,isGUIforCores:u}=hn(),p=DEFAULT_HEADERS,g={200:"HTTP/1.1 200 OK",201:"HTTP/1.1 201 Created",302:"HTTP/1.1 302 Found",307:"HTTP/1.1 307 Temporary Redirect",308:"HTTP/1.1 308 Permanent Redirect",404:"HTTP/1.1 404 Not Found",500:"HTTP/1.1 500 Internal Server Error"};return new class{status(m){return t=m,this}send(m=""){let A={status:r?g[t]:t,body:m,headers:p};r||u?$done(A):(n||i)&&$done({response:A})}end(){this.send()}html(m){this.set("Content-Type","text/html;charset=UTF-8"),this.send(m)}json(m){this.set("Content-Type","application/json;charset=UTF-8"),this.send(JSON.stringify(m))}set(m,A){return p[m]=A,this}}}}function E$(t){let r={};for(let n of Object.keys(t))r[n.toLowerCase()]=t[n];return r}function A$(t,r){if(t instanceof RegExp&&t.test(r)||t==="/")return!0;if(t.indexOf(":")===-1){let n=r.split("/"),i=t.split("/");for(let u=0;u<i.length;u++)if(n[u]!==i[u])return!1;return!0}else if(jA(t,r))return!0;return!1}function y$(t){let r=(t.match(/https?:\/\/[^/]+(\/[^?]*)/)||[])[1]||"/",n=t.indexOf("?"),i={};if(n!==-1){let u=t.slice(t.indexOf("?")+1).split("&");for(let p=0;p<u.length;p++){let g=u[p].split("=");i[g[0]]=decodeURIComponent(g[1])}}return{path:r,query:i}}function jA(t,r){if(t.indexOf(":")===-1)return null;{let n={};for(let i=0,u=0;i<t.length;i++,u++)if(t[i]===":"){let p=[],g=[];for(;t[++i]!=="/"&&i<t.length;)p.push(t[i]);for(;r[u]!=="/"&&u<r.length;)g.push(r[u++]);n[p.join("")]=decodeURIComponent(g.join(""))}else if(t[i]!==r[u])return null;return n}}var yg=0;function Gi(t){return _$(b$(C$(t)))}function b$(t){return F$(S$(D$(t),t.length*8))}function _$(t){for(var r=yg?"0123456789ABCDEF":"0123456789abcdef",n="",i,u=0;u<t.length;u++)i=t.charCodeAt(u),n+=r.charAt(i>>>4&15)+r.charAt(i&15);return n}function C$(t){for(var r="",n=-1,i,u;++n<t.length;)i=t.charCodeAt(n),u=n+1<t.length?t.charCodeAt(n+1):0,55296<=i&&i<=56319&&56320<=u&&u<=57343&&(i=65536+((i&1023)<<10)+(u&1023),n++),i<=127?r+=String.fromCharCode(i):i<=2047?r+=String.fromCharCode(192|i>>>6&31,128|i&63):i<=65535?r+=String.fromCharCode(224|i>>>12&15,128|i>>>6&63,128|i&63):i<=2097151&&(r+=String.fromCharCode(240|i>>>18&7,128|i>>>12&63,128|i>>>6&63,128|i&63));return r}function D$(t){for(var r=Array(t.length>>2),n=0;n<r.length;n++)r[n]=0;for(var n=0;n<t.length*8;n+=8)r[n>>5]|=(t.charCodeAt(n/8)&255)<<n%32;return r}function F$(t){for(var r="",n=0;n<t.length*32;n+=8)r+=String.fromCharCode(t[n>>5]>>>n%32&255);return r}function S$(t,r){t[r>>5]|=128<<r%32,t[(r+64>>>9<<4)+14]=r;for(var n=1732584193,i=-271733879,u=-1732584194,p=271733878,g=0;g<t.length;g+=16){var m=n,A=i,y=u,D=p;n=Hn(n,i,u,p,t[g+0],7,-680876936),p=Hn(p,n,i,u,t[g+1],12,-389564586),u=Hn(u,p,n,i,t[g+2],17,606105819),i=Hn(i,u,p,n,t[g+3],22,-1044525330),n=Hn(n,i,u,p,t[g+4],7,-176418897),p=Hn(p,n,i,u,t[g+5],12,1200080426),u=Hn(u,p,n,i,t[g+6],17,-1473231341),i=Hn(i,u,p,n,t[g+7],22,-45705983),n=Hn(n,i,u,p,t[g+8],7,1770035416),p=Hn(p,n,i,u,t[g+9],12,-1958414417),u=Hn(u,p,n,i,t[g+10],17,-42063),i=Hn(i,u,p,n,t[g+11],22,-1990404162),n=Hn(n,i,u,p,t[g+12],7,1804603682),p=Hn(p,n,i,u,t[g+13],12,-40341101),u=Hn(u,p,n,i,t[g+14],17,-1502002290),i=Hn(i,u,p,n,t[g+15],22,1236535329),n=Mn(n,i,u,p,t[g+1],5,-165796510),p=Mn(p,n,i,u,t[g+6],9,-1069501632),u=Mn(u,p,n,i,t[g+11],14,643717713),i=Mn(i,u,p,n,t[g+0],20,-373897302),n=Mn(n,i,u,p,t[g+5],5,-701558691),p=Mn(p,n,i,u,t[g+10],9,38016083),u=Mn(u,p,n,i,t[g+15],14,-660478335),i=Mn(i,u,p,n,t[g+4],20,-405537848),n=Mn(n,i,u,p,t[g+9],5,568446438),p=Mn(p,n,i,u,t[g+14],9,-1019803690),u=Mn(u,p,n,i,t[g+3],14,-187363961),i=Mn(i,u,p,n,t[g+8],20,1163531501),n=Mn(n,i,u,p,t[g+13],5,-1444681467),p=Mn(p,n,i,u,t[g+2],9,-51403784),u=Mn(u,p,n,i,t[g+7],14,1735328473),i=Mn(i,u,p,n,t[g+12],20,-1926607734),n=qn(n,i,u,p,t[g+5],4,-378558),p=qn(p,n,i,u,t[g+8],11,-2022574463),u=qn(u,p,n,i,t[g+11],16,1839030562),i=qn(i,u,p,n,t[g+14],23,-35309556),n=qn(n,i,u,p,t[g+1],4,-1530992060),p=qn(p,n,i,u,t[g+4],11,1272893353),u=qn(u,p,n,i,t[g+7],16,-155497632),i=qn(i,u,p,n,t[g+10],23,-1094730640),n=qn(n,i,u,p,t[g+13],4,681279174),p=qn(p,n,i,u,t[g+0],11,-358537222),u=qn(u,p,n,i,t[g+3],16,-722521979),i=qn(i,u,p,n,t[g+6],23,76029189),n=qn(n,i,u,p,t[g+9],4,-640364487),p=qn(p,n,i,u,t[g+12],11,-421815835),u=qn(u,p,n,i,t[g+15],16,530742520),i=qn(i,u,p,n,t[g+2],23,-995338651),n=Vn(n,i,u,p,t[g+0],6,-198630844),p=Vn(p,n,i,u,t[g+7],10,1126891415),u=Vn(u,p,n,i,t[g+14],15,-1416354905),i=Vn(i,u,p,n,t[g+5],21,-57434055),n=Vn(n,i,u,p,t[g+12],6,1700485571),p=Vn(p,n,i,u,t[g+3],10,-1894986606),u=Vn(u,p,n,i,t[g+10],15,-1051523),i=Vn(i,u,p,n,t[g+1],21,-2054922799),n=Vn(n,i,u,p,t[g+8],6,1873313359),p=Vn(p,n,i,u,t[g+15],10,-30611744),u=Vn(u,p,n,i,t[g+6],15,-1560198380),i=Vn(i,u,p,n,t[g+13],21,1309151649),n=Vn(n,i,u,p,t[g+4],6,-145523070),p=Vn(p,n,i,u,t[g+11],10,-1120210379),u=Vn(u,p,n,i,t[g+2],15,718787259),i=Vn(i,u,p,n,t[g+9],21,-343485551),n=zu(n,m),i=zu(i,A),u=zu(u,y),p=zu(p,D)}return Array(n,i,u,p)}function Yd(t,r,n,i,u,p){return zu(I$(zu(zu(r,t),zu(i,p)),u),n)}function Hn(t,r,n,i,u,p,g){return Yd(r&n|~r&i,t,r,u,p,g)}function Mn(t,r,n,i,u,p,g){return Yd(r&i|n&~i,t,r,u,p,g)}function qn(t,r,n,i,u,p,g){return Yd(r^n^i,t,r,u,p,g)}function Vn(t,r,n,i,u,p,g){return Yd(n^(r|~i),t,r,u,p,g)}function zu(t,r){var n=(t&65535)+(r&65535),i=(t>>16)+(r>>16)+(n>>16);return i<<16|n&65535}function I$(t,r){return t<<r|t>>>32-r}var n0=tn(QA()),e7=/^((25[0-5]|(2[0-4]|1\d|[1-9]|)\d)(\.(?!$)|$)){4}$/,t7=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/;function Yr(t){return e7.test(t)}function Mr(t){return t7.test(t)}function ey(t){return/^((6553[0-5])|(655[0-2][0-9])|(65[0-4][0-9]{2})|(6[0-4][0-9]{3})|([1-5][0-9]{4})|([0-5]{0,5})|([0-9]{1,4}))$/.test(t)}function oa(t){return typeof t=="string"&&t.trim().length>0}function fr(t,r){return oa(t)?t:r}function Xc(t){return typeof t<"u"&&t!==null}function Jc(t,r){return Xc(t)?t:r}function ru(t){return t?/^.+?\s*?=\s*?.+?\s*?,.+?/.test(t)?{"policy-descriptor":t}:{policy:t}:{}}function r7(t,r){return t=Math.ceil(t),r=Math.floor(r),Math.floor(Math.random()*(r-t+1))+t}function $f(t){let r=t.split(/,|\//),n=r[Math.floor(Math.random()*r.length)];if(n.includes("-")){let[i,u]=n.split("-").map(Number);return r7(i,u)}else return Number(n)}function ty(t){return Number.isSafeInteger(t)?String(t):BigInt(t).toString()}function i0(t){return typeof t=="string"&&/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(t)}function Gu(t,r="YYYY-MM-DD_HH-mm-ss"){let n=t instanceof Date?t:new Date(t);if(isNaN(n.getTime()))return"";let i=p=>String(p).padStart(2,"0"),u={YYYY:n.getFullYear(),MM:i(n.getMonth()+1),DD:i(n.getDate()),HH:i(n.getHours()),mm:i(n.getMinutes()),ss:i(n.getSeconds())};return r.replace(/YYYY|MM|DD|HH|mm|ss/g,p=>u[p])}var Pg=class{constructor(t){this.expires=t,R.read(Uo)||R.write("{}",Uo);try{this.resourceCache=JSON.parse(R.read(Uo))}catch(r){R.error(`\u89E3\u6790\u6301\u4E45\u5316\u7F13\u5B58\u4E2D\u7684 ${Uo} \u5931\u8D25, \u91CD\u7F6E\u4E3A {}, \u9519\u8BEF: ${r?.message??r}`),this.resourceCache={},R.write("{}",Uo)}this._cleanup()}_cleanup(){let t=!1;Object.entries(this.resourceCache).forEach(r=>{let[n,i]=r;i.time||(delete this.resourceCache[n],R.delete(`#${n}`),t=!0),new Date().getTime()-i.time>this.expires&&(delete this.resourceCache[n],t=!0)}),t&&this._persist()}revokeAll(){this.resourceCache={},this._persist()}_persist(){R.write(JSON.stringify(this.resourceCache),Uo)}get(t){let r=this.resourceCache[t]&&this.resourceCache[t].time;return r&&new Date().getTime()-r<=this.expires?this.resourceCache[t].data:null}set(t,r){this.resourceCache[t]={time:new Date().getTime(),data:r},this._persist()}},Wr=new Pg(36e5),Og=class{constructor(){this.expires=i7(),R.read(jo)||R.write("{}",jo);try{this.resourceCache=JSON.parse(R.read(jo))}catch(t){R.error(`\u89E3\u6790\u6301\u4E45\u5316\u7F13\u5B58\u4E2D\u7684 ${jo} \u5931\u8D25, \u91CD\u7F6E\u4E3A {}, \u9519\u8BEF: ${t?.message??t}`),this.resourceCache={},R.write("{}",jo)}this._cleanup()}_cleanup(){let t=!1;Object.entries(this.resourceCache).forEach(r=>{let[n,i]=r;i.time||(delete this.resourceCache[n],R.delete(`#${n}`),t=!0),new Date().getTime()-i.time>this.expires&&(delete this.resourceCache[n],t=!0)}),t&&this._persist()}revokeAll(){this.resourceCache={},this._persist()}_persist(){R.write(JSON.stringify(this.resourceCache),jo)}get(t){let r=this.resourceCache[t]&&this.resourceCache[t].time;return r&&new Date().getTime()-r<=this.expires?this.resourceCache[t].data:null}gettime(t){let r=this.resourceCache[t]&&this.resourceCache[t].time;return r&&new Date().getTime()-r<=this.expires?this.resourceCache[t].time:null}set(t,r){this.resourceCache[t]={time:new Date().getTime(),data:r},this._persist()}};function i7(){R.read(zd)||R.write("6e4",zd);let t=6e4;if(R.env.isLoon){let r={"1\u5206\u949F":6e4,"5\u5206\u949F":3e5,"10\u5206\u949F":6e5,"30\u5206\u949F":18e5,"1\u5C0F\u65F6":36e5,"2\u5C0F\u65F6":72e5,"3\u5C0F\u65F6":108e5,"6\u5C0F\u65F6":216e5,"12\u5C0F\u65F6":432e5,"24\u5C0F\u65F6":864e5,"48\u5C0F\u65F6":1728e5,"72\u5C0F\u65F6":2592e5,\u53C2\u6570\u4F20\u5165:"readcachets"},n=R.read("#\u54CD\u5E94\u5934\u7F13\u5B58\u6709\u6548\u671F");return n in r&&(t=r[n],t==="readcachets"&&(t=n)),t}else return t=R.read(zd),t}var Vo=new Og;function Zc(t){let r=Object.keys(t),n="",i="";for(let u of r){let p=u.toLowerCase();p==="subscription-userinfo"?n=t[u]:p==="profile-web-page-url"&&(i=t[u])}return`${n||""}${i?`; app_url=${encodeURIComponent(i)}`:""}`}async function zn(rawUrl,ua,timeout,customProxy,flowUrl){let url=flowUrl||rawUrl||"",$arguments={},rawArgs=url.split("#");if(url=url.split("#")[0],rawArgs.length>1)try{$arguments=JSON.parse(decodeURIComponent(rawArgs[1]))}catch{for(let t of rawArgs[1].split("&")){let r=t.split("=")[0],n=t.split("=")[1];$arguments[r]=n==null||n===""?!0:decodeURIComponent(n)}}if($arguments?.noFlow||!/^https?/.test(url))return;let{isStash,isLoon,isShadowRocket,isQX}=hn(),insecure=$arguments?.insecure?R.env.isNode?{strictSSL:!1}:{insecure:!0}:void 0,{defaultProxy,defaultFlowUserAgent,defaultTimeout}=R.read(Kt),proxy=customProxy||defaultProxy;R.env.isNode&&(proxy=proxy||eval("process.env.SUB_STORE_BACKEND_DEFAULT_PROXY"));let userAgent=ua||defaultFlowUserAgent||"clash",requestTimeout=timeout||defaultTimeout||8e3,id=Gi(userAgent+url),cached=Vo.get(id),flowInfo;if(!$arguments?.noCache&&cached)R.info(`\u4F7F\u7528\u7F13\u5B58\u7684\u6D41\u91CF\u4FE1\u606F: ${url}, ${userAgent}`),flowInfo=cached;else{let t=xs();if(flowUrl){R.info(`\u4F7F\u7528 GET \u65B9\u6CD5\u4ECE\u54CD\u5E94\u4F53\u83B7\u53D6\u6D41\u91CF\u4FE1\u606F: ${flowUrl}, User-Agent: ${userAgent||""}, Insecure: ${!!insecure}, Proxy: ${proxy}`);let{body:r}=await t.get({url:flowUrl,headers:{"User-Agent":userAgent},timeout:requestTimeout,...proxy?{proxy}:{},...isLoon&&proxy?{node:proxy}:{},...isQX&&proxy?{opts:{policy:proxy}}:{},...proxy?ru(proxy):{},...insecure||{}});flowInfo=r}else{try{R.info(`\u4F7F\u7528 HEAD \u65B9\u6CD5\u4ECE\u54CD\u5E94\u5934\u83B7\u53D6\u6D41\u91CF\u4FE1\u606F: ${url}, User-Agent: ${userAgent||""}, Insecure: ${!!insecure}, Proxy: ${proxy}`);let{headers:r}=await t.head({url:url.split(/[\r\n]+/).map(n=>n.trim()).filter(n=>n.length)[0],headers:{"User-Agent":userAgent,...isStash&&proxy?{"X-Stash-Selected-Proxy":encodeURIComponent(proxy)}:{},...isShadowRocket&&proxy?{"X-Surge-Policy":proxy}:{}},timeout:requestTimeout,...proxy?{proxy}:{},...isLoon&&proxy?{node:proxy}:{},...isQX&&proxy?{opts:{policy:proxy}}:{},...proxy?ru(proxy):{},...insecure||{}});flowInfo=Zc(r)}catch(r){R.error(`\u4F7F\u7528 HEAD \u65B9\u6CD5\u4ECE\u54CD\u5E94\u5934\u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u5931\u8D25: ${url}, User-Agent: ${userAgent||""}, Insecure: ${!!insecure}, Proxy: ${proxy}: ${r.message??r}`)}if(!flowInfo){R.info(`\u4F7F\u7528 GET \u65B9\u6CD5\u83B7\u53D6\u6D41\u91CF\u4FE1\u606F: ${url}, User-Agent: ${userAgent||""}, Insecure: ${!!insecure}, Proxy: ${proxy}`);let{headers:r}=await t.get({url:url.split(/[\r\n]+/).map(n=>n.trim()).filter(n=>n.length)[0],headers:{"User-Agent":userAgent,...isStash&&proxy?{"X-Stash-Selected-Proxy":encodeURIComponent(proxy)}:{},...isShadowRocket&&proxy?{"X-Surge-Policy":proxy}:{}},timeout:requestTimeout,...proxy?{proxy}:{},...isLoon&&proxy?{node:proxy}:{},...isQX&&proxy?{opts:{policy:proxy}}:{},...proxy?ru(proxy):{},...insecure||{}});flowInfo=Zc(r)}}flowInfo&&(flowInfo=flowInfo.trim()),flowInfo&&Vo.set(id,flowInfo)}return flowInfo}function Ko(t){if(!t)return;let r=t.match(/upload=([-+]?)([0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)/),n=Number(r[1]+r[2]),i=t.match(/download=([-+]?)([0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)/),u=Number(i[1]+i[2]),p=t.match(/total=([-+]?)([0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)/),g=Number(p[1]+p[2]),m=t.match(/expire=([-+]?)([0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)/),A=m?Number(m[1]+m[2]):void 0,y=t.match(/reset_day=([0-9]+)/),D=y?Number(y[1]):void 0,o=t.match(/app_url=(.*?)\s*?(;|$)/),M=o?decodeURIComponent(o[1]):void 0,W=t.match(/plan_name=(.*?)\s*?(;|$)/),w=W?decodeURIComponent(W[1]):void 0;return{expires:A,total:g,usage:{upload:n,download:u},remainingDays:D,appUrl:M,planName:w}}function Rf(t,r="B"){let n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],i=n.indexOf(r);return t<1024||i===n.length-1?{value:(Math.round(t*100)/100).toString(),unit:r}:Rf(t/1024,n[++i])}function s0(t){if(!t)throw new Error("\u6CA1\u6709\u6D41\u91CF\u4FE1\u606F");if(t?.expires&&t.expires*1e3<Date.now()){let r=new Date(t.expires*1e3).toLocaleDateString();throw new Error(`\u8BA2\u9605\u5DF2\u8FC7\u671F: ${r}`)}if(t?.total){let r=t.usage?.upload||0,n=t.usage?.download||0;if(t.total-r-n<0){let i=r+n,u=Rf(Math.abs(i));u.value=i<0?"-"+u.value:u.value;let p=Rf(t.total);throw new Error(`\u6D41\u91CF\u5DF2\u7528\u5B8C: ${u.value} ${u.unit} / ${p.value} ${p.unit}`)}}}function a0(t={}){try{let{resetDay:r,startDate:n,cycleDays:i}=t;if(["string","number"].includes(typeof t)&&(r=t),n&&i){if(i=parseInt(i),isNaN(i)||i<=0)throw new Error("\u91CD\u7F6E\u5468\u671F\u5E94\u4E3A\u6B63\u6574\u6570");if(!n||!Date.parse(n))throw new Error("\u5F00\u59CB\u65E5\u671F\u4E0D\u5408\u6CD5");let u=new Date(n),p=new Date;if(u.setHours(0,0,0,0),p.setHours(0,0,0,0),u.getTime()>p.getTime())throw new Error("\u5F00\u59CB\u65E5\u671F\u5E94\u65E9\u4E8E\u73B0\u5728");let g=new Date(n);for(g.setDate(g.getDate()+i);g<p;)g.setDate(g.getDate()+i);g.setHours(0,0,0,0);let m=g.getTime()-p.getTime();return Math.ceil(m/(1e3*3600*24))}else{if(!r)return;if(r=parseInt(r),isNaN(r)||r<=0||r>31)throw new Error("\u6708\u91CD\u7F6E\u65E5\u5E94\u4E3A 1-31 \u4E4B\u95F4\u7684\u6574\u6570");let u=new Date,p=u.getDate(),g=u.getMonth(),m=u.getFullYear(),A;return r>p?A=0:A=new Date(m,g+1,0).getDate(),A-p+r}}catch(r){R.error(`getRmainingDays failed: ${r.message??r}`)}}function Yu(t){try{let r=new Map;return t.split(";").map(n=>n.trim()).filter(Boolean).forEach(n=>{let i=n.indexOf("=");if(i===-1)return;let u=n.slice(0,i).trim(),p=n.slice(i+1).trim();if(!r.has(u))try{let g=decodeURIComponent(p);if(["upload","download","total","expire"].includes(u))try{g=Number(g).toFixed(0),["expire"].includes(u)&&g<=0&&(g="")}catch(m){R.error(`Failed to convert value for key "${u}=${p}": ${m.message??m}`)}r.set(u,g)}catch{r.set(u,p)}}),Array.from(r.entries()).map(([n,i])=>`${n}=${encodeURIComponent(i)}`).join("; ")}catch(r){return R.error(`normalizeFlowHeader failed: ${r.message??r}`),t}}function ct(t,r,n="name"){return t.find(i=>i[n]===r)}function ry(t,r,n="name"){return t.findIndex(i=>i[n]===r)}function gs(t,r,n="name"){let i=ry(t,r,n);t.splice(i,1)}function Os(t,r,n,i="name"){let u=ry(t,r,i);t[u]=n}function je(t,r,n){t.status(n||200).json({status:"success",data:r})}function Te(t,r,n){t.status(n||500).json({status:"failed",error:{code:r.code,type:r.type,message:r.message,details:t.req?.route?.path?.startsWith("/share/")?"\u8BE6\u60C5\u8BF7\u67E5\u770B\u65E5\u5FD7":r.details}})}var Qc=class{constructor(t,r,n){this.code=t,this.message=r,this.details=n}},pr=class extends Qc{constructor(t,r,n){super(t,r,n),this.type="InternalServerError"}},jt=class extends Qc{constructor(t,r,n){super(t,r,n),this.type="RequestInvalidError"}},br=class extends Qc{constructor(t,r,n){super(t,r,n),this.type="ResourceNotFoundError"}},el=class extends Qc{constructor(t,r,n){super(t,r,n),this.type="NetworkError"}},Mp=tn(l0()),om=tn(zy());function BP(t){let r=om.default.pemtohex(t);return om.default.KJUR.crypto.Util.hashHex(r,"sha256").match(/.{2}/g).join(":").toUpperCase()}var Gy={generateFingerprint:BP},Kf=tn(U_());function H_(t,r,...n){try{return t(r,...n)}catch{return t(M_(t(r.replace(/!<str>\s*/g,"__SubStoreJSYAMLString__"),...n)).replace(/__SubStoreJSYAMLString__/g,""),...n)}}function Vf(t,...r){return H_(Kf.default.safeLoad,JSON.parse(JSON.stringify(t)),...r)}function aN(t,...r){return H_(Kf.default.load,JSON.parse(JSON.stringify(t)),...r)}function j_(t,...r){return Kf.default.safeDump(JSON.parse(JSON.stringify(t)),...r)}function M_(t,...r){return Kf.default.dump(JSON.parse(JSON.stringify(t)),...r)}var da={safeLoad:Vf,load:aN,safeDump:j_,dump:M_,parse:Vf,stringify:j_},ym=class{constructor(){this.expires=uN(),R.read(Ho)||R.write("{}",Ho);try{this.resourceCache=JSON.parse(R.read(Ho))}catch(t){R.error(`\u89E3\u6790\u6301\u4E45\u5316\u7F13\u5B58\u4E2D\u7684 ${Ho} \u5931\u8D25, \u91CD\u7F6E\u4E3A {}, \u9519\u8BEF: ${t?.message??t}`),this.resourceCache={},R.write("{}",Ho)}this._cleanup()}_cleanup(t,r){let n=!1;Object.entries(this.resourceCache).forEach(i=>{let[u,p]=i;p.time||(delete this.resourceCache[u],R.delete(`#${u}`),n=!0),(new Date().getTime()-p.time>(r??this.expires)||t&&u.startsWith(t))&&(delete this.resourceCache[u],n=!0)}),n&&this._persist()}revokeAll(){this.resourceCache={},this._persist()}_persist(){R.write(JSON.stringify(this.resourceCache),Ho)}get(t,r,n){let i=this.resourceCache[t]&&this.resourceCache[t].time;if(i){if(new Date().getTime()-i<=(r??this.expires))return this.resourceCache[t].data;n&&(delete this.resourceCache[t],this._persist())}return null}gettime(t){let r=this.resourceCache[t]&&this.resourceCache[t].time;return r&&new Date().getTime()-r<=this.expires?this.resourceCache[t].time:null}set(t,r){this.resourceCache[t]={time:new Date().getTime(),data:r},this._persist()}};function uN(){R.read(Gd)||R.write("1728e5",Gd);let t=1728e5;if(R.env.isLoon){let r={"1\u5206\u949F":6e4,"5\u5206\u949F":3e5,"10\u5206\u949F":6e5,"30\u5206\u949F":18e5,"1\u5C0F\u65F6":36e5,"2\u5C0F\u65F6":72e5,"3\u5C0F\u65F6":108e5,"6\u5C0F\u65F6":216e5,"12\u5C0F\u65F6":432e5,"24\u5C0F\u65F6":864e5,"48\u5C0F\u65F6":1728e5,"72\u5C0F\u65F6":2592e5,\u53C2\u6570\u4F20\u5165:"readcachets"},n=R.read("#\u8282\u70B9\u7F13\u5B58\u6709\u6548\u671F");return n in r&&(t=r[n],t==="readcachets"&&(t=n)),t}else return t=R.read(Gd),t}var zf=new ym;function T0(t,r){return[...Array(t).keys()].map(()=>r)}var bm={"\u{1F3F3}\uFE0F\u200D\u{1F308}":["EXP","BAND"],"\u{1F1F8}\u{1F1F1}":["TEST","SOS"],"\u{1F1E6}\u{1F1E9}":["AD","AND"],"\u{1F1E6}\u{1F1EA}":["AE","ARE"],"\u{1F1E6}\u{1F1EB}":["AF","AFG"],"\u{1F1E6}\u{1F1F1}":["AL","ALB"],"\u{1F1E6}\u{1F1F2}":["AM","ARM"],"\u{1F1E6}\u{1F1F7}":["AR","ARG"],"\u{1F1E6}\u{1F1F9}":["AT","AUT"],"\u{1F1E6}\u{1F1FA}":["AU","AUS"],"\u{1F1E6}\u{1F1FF}":["AZ","AZE"],"\u{1F1E7}\u{1F1E6}":["BA","BIH"],"\u{1F1E7}\u{1F1E9}":["BD","BGD"],"\u{1F1E7}\u{1F1EA}":["BE","BEL"],"\u{1F1E7}\u{1F1EC}":["BG","BGR"],"\u{1F1E7}\u{1F1ED}":["BH","BHR"],"\u{1F1E7}\u{1F1F4}":["BO","BOL"],"\u{1F1E7}\u{1F1F3}":["BN","BRN"],"\u{1F1E7}\u{1F1F7}":["BR","BRA"],"\u{1F1E7}\u{1F1F9}":["BT","BTN"],"\u{1F1E7}\u{1F1FE}":["BY","BLR"],"\u{1F1E8}\u{1F1E6}":["CA","CAN"],"\u{1F1E8}\u{1F1ED}":["CH","CHE"],"\u{1F1E8}\u{1F1F1}":["CL","CHL"],"\u{1F1E8}\u{1F1F4}":["CO","COL"],"\u{1F1E8}\u{1F1F7}":["CR","CRI"],"\u{1F1E8}\u{1F1FE}":["CY","CYP"],"\u{1F1E8}\u{1F1FF}":["CZ","CZE"],"\u{1F1E9}\u{1F1EA}":["DE","DEU"],"\u{1F1E9}\u{1F1F0}":["DK","DNK"],"\u{1F1E9}\u{1F1FF}":["DZ","DZA"],"\u{1F1EA}\u{1F1E8}":["EC","ECU"],"\u{1F1EA}\u{1F1EA}":["EE","EST"],"\u{1F1EA}\u{1F1EC}":["EG","EGY"],"\u{1F1EA}\u{1F1F8}":["ES","ESP"],"\u{1F1EA}\u{1F1FA}":["EU"],"\u{1F1EB}\u{1F1EE}":["FI","FIN"],"\u{1F1EB}\u{1F1F7}":["FR","FRA"],"\u{1F1EC}\u{1F1E7}":["GB","GBR","UK"],"\u{1F1EC}\u{1F1EA}":["GE","GEO"],"\u{1F1EC}\u{1F1F7}":["GR","GRC"],"\u{1F1EC}\u{1F1F9}":["GT","GTM"],"\u{1F1EC}\u{1F1FA}":["GU","GUM"],"\u{1F1ED}\u{1F1F0}":["HK","HKG","HKT","HKBN","HGC","WTT","CMI"],"\u{1F1ED}\u{1F1F7}":["HR","HRV"],"\u{1F1ED}\u{1F1FA}":["HU","HUN"],"\u{1F1EE}\u{1F1F6}":["IQ","IRQ"],"\u{1F1EF}\u{1F1F4}":["JO","JOR"],"\u{1F1EF}\u{1F1F5}":["JP","JPN","TYO"],"\u{1F1F0}\u{1F1EA}":["KE","KEN"],"\u{1F1F0}\u{1F1EC}":["KG","KGZ"],"\u{1F1F0}\u{1F1ED}":["KH","KGZ"],"\u{1F1F0}\u{1F1F5}":["KP","PRK"],"\u{1F1F0}\u{1F1F7}":["KR","KOR","SEL"],"\u{1F1F0}\u{1F1FF}":["KZ","KAZ"],"\u{1F1EE}\u{1F1E9}":["ID","IDN"],"\u{1F1EE}\u{1F1EA}":["IE","IRL"],"\u{1F1EE}\u{1F1F1}":["IL","ISR"],"\u{1F1EE}\u{1F1F2}":["IM","IMN"],"\u{1F1EE}\u{1F1F3}":["IN","IND"],"\u{1F1EE}\u{1F1F7}":["IR","IRN"],"\u{1F1EE}\u{1F1F8}":["IS","ISL"],"\u{1F1EE}\u{1F1F9}":["IT","ITA"],"\u{1F1F1}\u{1F1E6}":["LA","LAO"],"\u{1F1F1}\u{1F1F0}":["LK","LKA"],"\u{1F1F1}\u{1F1F9}":["LT","LTU"],"\u{1F1F1}\u{1F1FA}":["LU","LUX"],"\u{1F1F1}\u{1F1FB}":["LV","LVA"],"\u{1F1F2}\u{1F1E6}":["MA","MAR"],"\u{1F1F2}\u{1F1E9}":["MD","MDA"],"\u{1F1F3}\u{1F1EC}":["NG","NGA"],"\u{1F1F2}\u{1F1F2}":["MM","MMR"],"\u{1F1F2}\u{1F1F0}":["MK","MKD"],"\u{1F1F2}\u{1F1F3}":["MN","MNG"],"\u{1F1F2}\u{1F1F4}":["MO","MAC","CTM"],"\u{1F1F2}\u{1F1F9}":["MT","MLT"],"\u{1F1F2}\u{1F1FD}":["MX","MEX"],"\u{1F1F2}\u{1F1FE}":["MY","MYS"],"\u{1F1F3}\u{1F1F1}":["NL","NLD","AMS"],"\u{1F1F3}\u{1F1F4}":["NO","NOR"],"\u{1F1F3}\u{1F1F5}":["NP","NPL"],"\u{1F1F3}\u{1F1FF}":["NZ","NZL"],"\u{1F1F5}\u{1F1E6}":["PA","PAN"],"\u{1F1F5}\u{1F1EA}":["PE","PER"],"\u{1F1F5}\u{1F1ED}":["PH","PHL"],"\u{1F1F5}\u{1F1F0}":["PK","PAK"],"\u{1F1F5}\u{1F1F1}":["PL","POL"],"\u{1F1F5}\u{1F1F7}":["PR","PRI"],"\u{1F1F5}\u{1F1F9}":["PT","PRT"],"\u{1F1F5}\u{1F1FE}":["PY","PRY"],"\u{1F1F5}\u{1F1EC}":["PG","PNG"],"\u{1F1F7}\u{1F1F4}":["RO","ROU"],"\u{1F1F7}\u{1F1F8}":["RS","SRB"],"\u{1F1F7}\u{1F1EA}":["RE","REU"],"\u{1F1F7}\u{1F1FA}":["RU","RUS"],"\u{1F1F8}\u{1F1E6}":["SA","SAU"],"\u{1F1F8}\u{1F1EA}":["SE","SWE"],"\u{1F1F8}\u{1F1EC}":["SG","SGP"],"\u{1F1F8}\u{1F1EE}":["SI","SVN"],"\u{1F1F8}\u{1F1F0}":["SK","SVK"],"\u{1F1F9}\u{1F1EC}":["TG","TGO"],"\u{1F1F9}\u{1F1ED}":["TH","THA"],"\u{1F1F9}\u{1F1F3}":["TN","TUN"],"\u{1F1F9}\u{1F1F7}":["TR","TUR"],"\u{1F1F9}\u{1F1FC}":["TW","TWN","CHT","HINET","ROC"],"\u{1F1FA}\u{1F1E6}":["UA","UKR"],"\u{1F1FA}\u{1F1F8}":["US","USA","LAX","SFO","SJC"],"\u{1F1FA}\u{1F1FE}":["UY","URY"],"\u{1F1FB}\u{1F1E6}":["VA","VAT"],"\u{1F1FB}\u{1F1EA}":["VE","VEN"],"\u{1F1FB}\u{1F1F3}":["VN","VNM"],"\u{1F1FF}\u{1F1E6}":["ZA","ZAF","JNB"],"\u{1F1E8}\u{1F1F3}":["CN","CHN","BACK"]};function El(t){let r={"\u{1F3F3}\uFE0F\u200D\u{1F308}":["\u6D41\u91CF","\u65F6\u95F4","\u8FC7\u671F","Bandwidth","Expire"],"\u{1F1F8}\u{1F1F1}":["\u5E94\u6025","\u6D4B\u8BD5\u8282\u70B9"],"\u{1F1E6}\u{1F1E9}":["Andorra","\u5B89\u9053\u5C14"],"\u{1F1E6}\u{1F1EA}":["United Arab Emirates","\u963F\u8054\u914B","\u8FEA\u62DC","Dubai"],"\u{1F1E6}\u{1F1EB}":["Afghanistan","\u963F\u5BCC\u6C57"],"\u{1F1E6}\u{1F1F1}":["Albania","\u963F\u5C14\u5DF4\u5C3C\u4E9A","\u963F\u723E\u5DF4\u5C3C\u4E9E"],"\u{1F1E6}\u{1F1F2}":["Armenia","\u4E9A\u7F8E\u5C3C\u4E9A"],"\u{1F1E6}\u{1F1F7}":["Argentina","\u963F\u6839\u5EF7"],"\u{1F1E6}\u{1F1F9}":["Austria","\u5965\u5730\u5229","\u5967\u5730\u5229","\u7EF4\u4E5F\u7EB3"],"\u{1F1E6}\u{1F1FA}":["Australia","\u6FB3\u5927\u5229\u4E9A","\u6FB3\u6D32","\u58A8\u5C14\u672C","\u6089\u5C3C","\u571F\u6FB3","\u4EAC\u6FB3","\u5EE3\u6FB3","\u6EEC\u6FB3","\u6CAA\u6FB3","\u5E7F\u6FB3","Sydney"],"\u{1F1E6}\u{1F1FF}":["Azerbaijan","\u963F\u585E\u62DC\u7586"],"\u{1F1E7}\u{1F1E6}":["Bosnia and Herzegovina","\u6CE2\u9ED1\u5171\u548C\u56FD","\u6CE2\u9ED1"],"\u{1F1E7}\u{1F1E9}":["Bangladesh","\u5B5F\u52A0\u62C9\u56FD","\u5B5F\u52A0\u62C9"],"\u{1F1E7}\u{1F1EA}":["Belgium","\u6BD4\u5229\u65F6","\u6BD4\u5229\u6642"],"\u{1F1E7}\u{1F1EC}":["Bulgaria","\u4FDD\u52A0\u5229\u4E9A","\u4FDD\u52A0\u5229\u4E9E"],"\u{1F1E7}\u{1F1ED}":["Bahrain","\u5DF4\u6797"],"\u{1F1E7}\u{1F1F7}":["Brazil","\u5DF4\u897F","\u5723\u4FDD\u7F57"],"\u{1F1E7}\u{1F1F3}":["Brunei","\u6587\u83B1","\u6C76\u840A"],"\u{1F1E7}\u{1F1FE}":["Belarus","\u767D\u4FC4\u7F57\u65AF","\u767D\u4FC4"],"\u{1F1E7}\u{1F1F4}":["Bolivia","\u73BB\u5229\u7EF4\u4E9A"],"\u{1F1E7}\u{1F1F9}":["Bhutan","\u4E0D\u4E39","\u4E0D\u4E39\u738B\u56FD"],"\u{1F1E8}\u{1F1E6}":["Canada","\u52A0\u62FF\u5927","\u8499\u7279\u5229\u5C14","\u6E29\u54E5\u534E","\u6953\u8449","\u67AB\u53F6","\u6ED1\u94C1\u5362","\u591A\u4F26\u591A","Waterloo","Toronto"],"\u{1F1E8}\u{1F1ED}":["Switzerland","\u745E\u58EB","\u82CF\u9ECE\u4E16","Zurich"],"\u{1F1E8}\u{1F1F1}":["Chile","\u667A\u5229"],"\u{1F1E8}\u{1F1F4}":["Colombia","\u54E5\u4F26\u6BD4\u4E9A"],"\u{1F1E8}\u{1F1F7}":["Costa Rica","\u54E5\u65AF\u8FBE\u9ECE\u52A0"],"\u{1F1E8}\u{1F1FE}":["Cyprus","\u585E\u6D66\u8DEF\u65AF"],"\u{1F1E8}\u{1F1FF}":["Czechia","\u6377\u514B","Czech","Czech Republic"],"\u{1F1E9}\u{1F1EA}":["German","\u5FB7\u56FD","\u5FB7\u570B","\u4EAC\u5FB7","\u6EEC\u5FB7","\u5EE3\u5FB7","\u6CAA\u5FB7","\u5E7F\u5FB7","\u6CD5\u5170\u514B\u798F","Frankfurt","\u5FB7\u610F\u5FD7"],"\u{1F1E9}\u{1F1F0}":["Denmark","\u4E39\u9EA6","\u4E39\u9EA5"],"\u{1F1E9}\u{1F1FF}":["Algeria","\u963F\u5C14\u53CA\u5229\u4E9A","\u963F\u723E\u53CA\u5229\u4E9E"],"\u{1F1EA}\u{1F1E8}":["Ecuador","\u5384\u74DC\u591A\u5C14"],"\u{1F1EA}\u{1F1EA}":["Estonia","\u7231\u6C99\u5C3C\u4E9A"],"\u{1F1EA}\u{1F1EC}":["Egypt","\u57C3\u53CA"],"\u{1F1EA}\u{1F1F8}":["Spain","\u897F\u73ED\u7259"],"\u{1F1EA}\u{1F1FA}":["European Union","\u6B27\u76DF","\u6B27\u7F57\u5DF4"],"\u{1F1EB}\u{1F1EE}":["Finland","\u82AC\u5170","\u82AC\u862D","\u8D6B\u5C14\u8F9B\u57FA"],"\u{1F1EB}\u{1F1F7}":["France","\u6CD5\u56FD","\u6CD5\u570B","\u5DF4\u9ECE"],"\u{1F1EC}\u{1F1E7}":["Great Britain","\u82F1\u56FD","England","United Kingdom","\u4F26\u6566","\u82F1","London"],"\u{1F1EC}\u{1F1EA}":["Georgia","\u683C\u9C81\u5409\u4E9A","\u683C\u9B6F\u5409\u4E9E"],"\u{1F1EC}\u{1F1F7}":["Greece","\u5E0C\u814A","\u5E0C\u81D8"],"\u{1F1EC}\u{1F1FA}":["Guam","\u5173\u5C9B","\u95DC\u5CF6"],"\u{1F1EC}\u{1F1F9}":["Guatemala","\u5371\u5730\u9A6C\u62C9"],"\u{1F1ED}\u{1F1F0}":["Hongkong","\u9999\u6E2F","Hong Kong","HongKong","HONG KONG","\u6DF1\u6E2F","\u6CAA\u6E2F","\u547C\u6E2F","\u7A57\u6E2F","\u4EAC\u6E2F","\u6E2F"],"\u{1F1ED}\u{1F1F7}":["Croatia","\u514B\u7F57\u5730\u4E9A","\u514B\u7F85\u5730\u4E9E"],"\u{1F1ED}\u{1F1FA}":["Hungary","\u5308\u7259\u5229"],"\u{1F1EE}\u{1F1F6}":["Iraq","\u4F0A\u62C9\u514B","\u5DF4\u683C\u8FBE","Baghdad"],"\u{1F1EF}\u{1F1F4}":["Jordan","\u7EA6\u65E6"],"\u{1F1EF}\u{1F1F5}":["Japan","\u65E5\u672C","\u4E1C\u4EAC","\u5927\u962A","\u57FC\u7389","\u6CAA\u65E5","\u7A57\u65E5","\u5DDD\u65E5","\u4E2D\u65E5","\u6CC9\u65E5","\u676D\u65E5","\u6DF1\u65E5","\u8FBD\u65E5","\u5E7F\u65E5","\u5927\u5742","Osaka","Tokyo"],"\u{1F1F0}\u{1F1EA}":["Kenya","\u80AF\u5C3C\u4E9A"],"\u{1F1F0}\u{1F1EC}":["Kyrgyzstan","\u5409\u5C14\u5409\u65AF\u65AF\u5766"],"\u{1F1F0}\u{1F1ED}":["Cambodia","\u67EC\u57D4\u5BE8"],"\u{1F1F0}\u{1F1F5}":["North Korea","\u671D\u9C9C"],"\u{1F1F0}\u{1F1F7}":["Korea","\u97E9\u56FD","\u97D3\u570B","\u97E9","\u97D3","\u9996\u5C14","\u6625\u5DDD","Chuncheon","Seoul"],"\u{1F1F0}\u{1F1FF}":["Kazakhstan","\u54C8\u8428\u514B\u65AF\u5766","\u54C8\u8428\u514B"],"\u{1F1EE}\u{1F1E9}":["Indonesia","\u5370\u5C3C","\u5370\u5EA6\u5C3C\u897F\u4E9A","\u96C5\u52A0\u8FBE"],"\u{1F1EE}\u{1F1EA}":["Ireland","\u7231\u5C14\u5170","\u611B\u723E\u862D","\u90FD\u67CF\u6797"],"\u{1F1EE}\u{1F1F1}":["Israel","\u4EE5\u8272\u5217"],"\u{1F1EE}\u{1F1F2}":["Isle of Man","\u9A6C\u6069\u5C9B","\u99AC\u6069\u5CF6"],"\u{1F1EE}\u{1F1F3}":["India","\u5370\u5EA6","\u5B5F\u4E70","MFumbai","Mumbai"],"\u{1F1EE}\u{1F1F7}":["Iran","\u4F0A\u6717"],"\u{1F1EE}\u{1F1F8}":["Iceland","\u51B0\u5C9B","\u51B0\u5CF6"],"\u{1F1EE}\u{1F1F9}":["Italy","\u610F\u5927\u5229","\u7FA9\u5927\u5229","\u7C73\u5170","Nachash"],"\u{1F1F1}\u{1F1F0}":["Sri Lanka","\u65AF\u91CC\u5170\u5361","\u65AF\u91CC\u862D\u5361"],"\u{1F1F1}\u{1F1E6}":["Laos","\u8001\u631D","\u8001\u64BE"],"\u{1F1F1}\u{1F1F9}":["Lithuania","\u7ACB\u9676\u5B9B"],"\u{1F1F1}\u{1F1FA}":["Luxembourg","\u5362\u68EE\u5821"],"\u{1F1F1}\u{1F1FB}":["Latvia","\u62C9\u8131\u7EF4\u4E9A","Latvija"],"\u{1F1F2}\u{1F1E6}":["Morocco","\u6469\u6D1B\u54E5"],"\u{1F1F2}\u{1F1E9}":["Moldova","\u6469\u5C14\u591A\u74E6","\u6469\u723E\u591A\u74E6"],"\u{1F1F2}\u{1F1F2}":["Myanmar","\u7F05\u7538","\u7DEC\u7538"],"\u{1F1F3}\u{1F1EC}":["Nigeria","\u5C3C\u65E5\u5229\u4E9A","\u5C3C\u65E5\u5229\u4E9E"],"\u{1F1F2}\u{1F1F0}":["Macedonia","\u9A6C\u5176\u987F","\u99AC\u5176\u9813"],"\u{1F1F2}\u{1F1F3}":["Mongolia","\u8499\u53E4"],"\u{1F1F2}\u{1F1F4}":["Macao","\u6FB3\u95E8","\u6FB3\u9580","CTM"],"\u{1F1F2}\u{1F1F9}":["Malta","\u9A6C\u8033\u4ED6"],"\u{1F1F2}\u{1F1FD}":["Mexico","\u58A8\u897F\u54E5"],"\u{1F1F2}\u{1F1FE}":["Malaysia","\u9A6C\u6765","\u99AC\u4F86","\u5409\u9686\u5761","\u5927\u99AC"],"\u{1F1F3}\u{1F1F1}":["Netherlands","\u8377\u5170","\u8377\u862D","\u5C3C\u5FB7\u862D","\u963F\u59C6\u65AF\u7279\u4E39","Amsterdam"],"\u{1F1F3}\u{1F1F4}":["Norway","\u632A\u5A01"],"\u{1F1F3}\u{1F1F5}":["Nepal","\u5C3C\u6CCA\u5C14"],"\u{1F1F3}\u{1F1FF}":["New Zealand","\u65B0\u897F\u5170","\u65B0\u897F\u862D"],"\u{1F1F5}\u{1F1E6}":["Panama","\u5DF4\u62FF\u9A6C"],"\u{1F1F5}\u{1F1EA}":["Peru","\u79D8\u9C81","\u7955\u9B6F"],"\u{1F1F5}\u{1F1ED}":["Philippines","\u83F2\u5F8B\u5BBE","\u83F2\u5F8B\u8CD3"],"\u{1F1F5}\u{1F1F0}":["Pakistan","\u5DF4\u57FA\u65AF\u5766"],"\u{1F1F5}\u{1F1F1}":["Poland","\u6CE2\u5170","\u6CE2\u862D","\u534E\u6C99","Warsaw"],"\u{1F1F5}\u{1F1F7}":["Puerto Rico","\u6CE2\u591A\u9ECE\u5404"],"\u{1F1F5}\u{1F1F9}":["Portugal","\u8461\u8404\u7259"],"\u{1F1F5}\u{1F1EC}":["Papua New Guinea","\u5DF4\u5E03\u4E9A\u65B0\u51E0\u5185\u4E9A"],"\u{1F1F5}\u{1F1FE}":["Paraguay","\u5DF4\u62C9\u572D"],"\u{1F1F7}\u{1F1F4}":["Romania","\u7F57\u9A6C\u5C3C\u4E9A"],"\u{1F1F7}\u{1F1F8}":["Serbia","\u585E\u5C14\u7EF4\u4E9A"],"\u{1F1F7}\u{1F1EA}":["R\xE9union","\u7559\u5C3C\u6C6A","\u6CD5\u5C5E\u7559\u5C3C\u6C6A"],"\u{1F1F7}\u{1F1FA}":["Russia","\u4FC4\u7F57\u65AF","\u4FC4\u56FD","\u4FC4\u7F85\u65AF","\u4F2F\u529B","\u83AB\u65AF\u79D1","\u5723\u5F7C\u5F97\u5821","\u897F\u4F2F\u5229\u4E9A","\u4EAC\u4FC4","\u676D\u4FC4","\u5EE3\u4FC4","\u6EEC\u4FC4","\u5E7F\u4FC4","\u6CAA\u4FC4","Moscow"],"\u{1F1F8}\u{1F1E6}":["Saudi","\u6C99\u7279\u963F\u62C9\u4F2F","\u6C99\u7279","Riyadh","\u5229\u96C5\u5F97"],"\u{1F1F8}\u{1F1EA}":["Sweden","\u745E\u5178","\u65AF\u5FB7\u54E5\u5C14\u6469","Stockholm"],"\u{1F1F8}\u{1F1EC}":["Singapore","\u65B0\u52A0\u5761","\u72EE\u57CE","\u6CAA\u65B0","\u4EAC\u65B0","\u4E2D\u65B0","\u6CC9\u65B0","\u7A57\u65B0","\u6DF1\u65B0","\u676D\u65B0","\u5E7F\u65B0","\u5EE3\u65B0","\u6EEC\u65B0"],"\u{1F1F8}\u{1F1EE}":["Slovenia","\u65AF\u6D1B\u6587\u5C3C\u4E9A"],"\u{1F1F8}\u{1F1F0}":["Slovakia","\u65AF\u6D1B\u4F10\u514B"],"\u{1F1F9}\u{1F1EC}":["Togo","\u591A\u54E5","\u6D1B\u7F8E","Lom\xE9","Lome"],"\u{1F1F9}\u{1F1ED}":["Thailand","\u6CF0\u56FD","\u6CF0\u570B","\u66FC\u8C37"],"\u{1F1F9}\u{1F1F3}":["Tunisia","\u7A81\u5C3C\u65AF"],"\u{1F1F9}\u{1F1F7}":["Turkey","\u571F\u8033\u5176","\u4F0A\u65AF\u5766\u5E03\u5C14","Istanbul"],"\u{1F1F9}\u{1F1FC}":["Taiwan","\u53F0\u6E7E","\u81FA\u7063","\u53F0\u7063","\u4E2D\u83EF\u6C11\u570B","\u4E2D\u534E\u6C11\u56FD","\u53F0\u5317","\u53F0\u4E2D","\u65B0\u5317","\u5F70\u5316","\u53F0","\u81FA","Taipei","Tai Wan"],"\u{1F1FA}\u{1F1E6}":["Ukraine","\u4E4C\u514B\u5170","\u70CF\u514B\u862D"],"\u{1F1FA}\u{1F1F8}":["United States","\u7F8E\u56FD","America","\u7F8E","\u4EAC\u7F8E","\u6CE2\u7279\u5170","\u8FBE\u62C9\u65AF","\u4FC4\u52D2\u5188","Oregon","\u51E4\u51F0\u57CE","\u8D39\u5229\u8499","\u7845\u8C37","\u77FD\u8C37","\u62C9\u65AF\u7EF4\u52A0\u65AF","\u6D1B\u6749\u77F6","\u5723\u4F55\u585E","\u5723\u514B\u62C9\u62C9","\u897F\u96C5\u56FE","\u829D\u52A0\u54E5","\u6CAA\u7F8E","\u54E5\u4F26\u5E03","\u7EBD\u7EA6","New York","Los Angeles","San Jose","Sillicon Valley","Michigan","\u4FC4\u4EA5\u4FC4","Ohio","\u9A6C\u7EB3\u8428\u65AF","Manassas","\u5F17\u5409\u5C3C\u4E9A","Virginia"],"\u{1F1FA}\u{1F1FE}":["Uruguay","\u4E4C\u62C9\u572D"],"\u{1F1FB}\u{1F1E6}":["Vatican","Vatican City","Holy See","\u68B5\u8482\u5188","\u68B5\u8482\u5CA1"],"\u{1F1FB}\u{1F1EA}":["Venezuela","\u59D4\u5185\u745E\u62C9"],"\u{1F1FB}\u{1F1F3}":["Vietnam","\u8D8A\u5357","\u80E1\u5FD7\u660E"],"\u{1F1FF}\u{1F1E6}":["South Africa","\u5357\u975E"],"\u{1F1E8}\u{1F1F3}":["China","\u4E2D\u56FD","\u4E2D\u570B","\u56DE\u56FD","\u56DE\u570B","\u56FD\u5185","\u570B\u5167","\u534E\u4E1C","\u534E\u897F","\u534E\u5357","\u534E\u5317","\u534E\u4E2D","\u6C5F\u82CF","\u5317\u4EAC","\u4E0A\u6D77","\u5E7F\u5DDE","\u6DF1\u5733","\u676D\u5DDE","\u5F90\u5DDE","\u9752\u5C9B","\u5B81\u6CE2","\u9547\u6C5F"]},n=t.match(/[\uD83C][\uDDE6-\uDDFF][\uD83C][\uDDE6-\uDDFF]/)?.[0]||"\u{1F3F4}\u200D\u2620\uFE0F";for(let i of Object.keys(r))if(r[i].some(u=>RegExp(`${u}`,"i").test(t)))return//.test(t)&&["\u{1F1F2}\u{1F1F3}"].includes(i)?n="\u{1F1E8}\u{1F1F3}":n=i;for(let i of Object.keys(bm))if(bm[i].some(u=>RegExp(`(^|[^a-zA-Z])${u}([^a-zA-Z]|$)`).test(t))&&!(i=="\u{1F1E8}\u{1F1F3}"&&RegExp("(^|[^a-zA-Z])CN2([^a-zA-Z]|$)").test(t)))return n=i;return n}function k0(t){return bm[El(t)]?.[0]}function Gf(t){return t.replace(/[\uD83C][\uDDE6-\uDDFF][\uD83C][\uDDE6-\uDDFF]||/g,"").trim()}var N0=class{constructor({country,asn}={}){if(R.env.isNode){let Reader=require("@maxmind/geoip2-node").Reader,fs=require("fs"),countryFile=country||eval("process.env.SUB_STORE_MMDB_COUNTRY_PATH"),asnFile=asn||eval("process.env.SUB_STORE_MMDB_ASN_PATH");if(countryFile&&(this.countryReader=Reader.openBuffer(fs.readFileSync(countryFile))),asnFile){if(!fs.existsSync(asnFile))throw new Error("GeoLite2 ASN MMDB does not exist");this.asnReader=Reader.openBuffer(fs.readFileSync(asnFile))}}}geoip(t){return this.countryReader?.country(t)?.country?.isoCode}ipaso(t){return this.asnReader?.asn(t)?.autonomousSystemOrganization}ipasn(t){return this.asnReader?.asn(t)?.autonomousSystemNumber}},j0=tn(Q_()),xm=tn(l0());async function yl({url:t,domain:r,type:n="A",timeout:i,edns:u}){let p=j0.default.encode({type:"query",id:0,flags:j0.default.RECURSION_DESIRED,questions:[{type:n,name:r}],additionals:[{type:"OPT",name:".",udpPayloadSize:4096,flags:0,options:[{code:"CLIENT_SUBNET",ip:u,sourcePrefixLength:Yr(u)?24:56,scopePrefixLength:0}]}]}),g=xm.Buffer.from(p).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),m=await R.http.get({url:`${t}?dns=${encodeURIComponent(g)}`,headers:{Accept:"application/dns-message"},"binary-mode":!0,encoding:null,timeout:i});return j0.default.decode(xm.Buffer.from(R.env.isQX?m.bodyBytes:m.body))}var Om=tn(Sf()),{isNode:eC,isQX:gN,isLoon:mN,isSurge:vN,isStash:wN,isShadowRocket:EN,isLanceX:AN,isEgern:yN,isGUIforCores:bN}=hn(),ya="Node";eC&&(ya="Node"),gN&&(ya="QX"),mN&&(ya="Loon"),vN&&(ya="Surge"),wN&&(ya="Stash"),EN&&(ya="ShadowRocket"),yN&&(ya="Egern"),AN&&(ya="LanceX"),bN&&(ya="GUI.for.Cores");var ic={},_N={};try{if(typeof $environment<"u"&&(ic.env=$environment),typeof $loon<"u"&&(ic.loon=$loon),typeof $script<"u"&&(ic.script=$script),typeof $Plugin<"u"&&(ic.plugin=$Plugin),eC){ic.node={version:eval("process.version"),argv:eval("process.argv"),filename:eval("__filename"),dirname:eval("__dirname"),env:{}};let env=eval("process.env");for(let t in env)/^SUB_STORE_/.test(t)&&(ic.node.env[t]=env[t])}}catch(t){}var ba={backend:ya,version:jd,feature:_N,meta:ic};function CN(t){return t&&typeof t=="object"&&!Array.isArray(t)}function Wf(t){return t.startsWith("<")&&t.endsWith(">")?t.slice(1,-1):t}function rC(t,r){let n=typeof r=="string"?JSON.parse(r):r;for(let i in n)if(CN(n[i]))if(i.endsWith("!")){let u=Wf(i.slice(0,-1));t[u]=n[i]}else{let u=Wf(i);t[u]||Object.assign(t,{[u]:{}}),rC(t[u],n[u])}else if(Array.isArray(n[i]))if(i.startsWith("+")){let u=Wf(i.slice(1));t[u]||Object.assign(t,{[u]:[]}),t[u]=[...n[i],...t[u]]}else if(i.endsWith("+")){let u=Wf(i.slice(0,-1));t[u]||Object.assign(t,{[u]:[]}),t[u]=[...t[u],...n[i]]}else{let u=Wf(i);Object.assign(t,{[u]:n[i]})}else Object.assign(t,{[i]:n[i]});return t}function DN({rule:t}){return{name:"Conditional Filter",func:r=>r.map(n=>H0(t,n))}}function H0(t,r){if(!t.operator)switch(t.proposition){case"IN":return t.value.indexOf(r[t.attr])!==-1;case"CONTAINS":return typeof r[t.attr]!="string"?!1:r[t.attr].indexOf(t.value)!==-1;case"EQUALS":return r[t.attr]===t.value;case"EXISTS":return r[t.attr]!==null||typeof r[t.attr]<"u";default:throw new Error(`Unknown proposition: ${t.proposition}`)}switch(t.operator){case"AND":return t.child.every(n=>H0(n,r));case"OR":return t.child.some(n=>H0(n,r));case"NOT":return!H0(t.child,r);default:throw new Error(`Unknown operator: ${t.operator}`)}}function FN(t){return{name:"Quick Setting Operator",func:n=>{if(r(t.useless)){let i=aC().func(n);n=n.filter((u,p)=>i[p]&&u.port>0&&u.port<=65535)}return n.map(i=>(i.udp=r(t.udp,i.udp),i.tfo=r(t.tfo,i.tfo),i["fast-open"]=r(t.tfo,i["fast-open"]),i["skip-cert-verify"]=r(t.scert,i["skip-cert-verify"]),i.type==="vmess"&&(i.aead=r(t["vmess aead"],i.aead)),i))}};function r(n,i){switch(n){case"ENABLED":return!0;case"DISABLED":return!1;default:return i}}}function SN({mode:t,tw:r}){return{name:"Flag Operator",func:n=>n.map(i=>{if(t==="remove")i.name=Gf(i.name);else{let u=El(i.name);i.name=Gf(i.name),i.name=u+" "+i.name,r=="ws"?i.name=i.name.replace(//g,"\u{1F1FC}\u{1F1F8}"):r=="tw"||(i.name=i.name.replace(//g,"\u{1F1E8}\u{1F1F3}"))}return i})}}function IN(t){let{action:r,template:n,link:i,position:u}={action:"rename",template:"0 1 2 3 4 5 6 7 8 9",link:"-",position:"back",...t};return{name:"Handle Duplicate Operator",func:p=>{if(r==="delete"){let g={};return p.filter(m=>g[m.name]?!1:(g[m.name]=!0,!0))}else if(r==="rename"){let g=n.split(" "),m={},A=0;p.forEach(D=>{typeof m[D.name]>"u"?m[D.name]=1:m[D.name]++,A=Math.max(m[D.name].toString().length,A)});let y={};return p.map(D=>{if(m[D.name]>1){typeof y[D.name]>"u"&&(y[D.name]=1);let o="",M=y[D.name]++,W=0;for(;M>0;)o=g[M%10]+o,M=parseInt(M/10),W++;for(;W++<A;)o=g[0]+o;u==="front"?D.name=o+i+D.name:u==="back"&&(D.name=D.name+i+o)}return D})}}}}function BN(t="asc"){return{name:"Sort Operator",func:r=>{switch(t){case"asc":case"desc":return r.sort((n,i)=>{let u=n.name>i.name?1:-1;return u*=t==="desc"?-1:1,u});case"random":return jN(r);default:throw new Error("Unknown sort option: "+t)}}}}function $N(t){let r=t.order||"asc",n=t.expressions;return Array.isArray(t)&&(n=t),Array.isArray(n)||(n=[]),{name:"Regex Sort Operator",func:i=>(n=n.map(u=>Tm(u)),i.sort((u,p)=>{let g=tC(n,u.name),m=tC(n,p.name);return g&&!m?-1:m&&!g?1:g&&m?g<m?-1:1:r==="original"?0:r==="desc"?u.name<p.name?1:-1:u.name<p.name?-1:1}))}}function tC(t,r){let n=null;for(let i=0;i<t.length;i++)if(t[i].test(r)){n=i+1;break}return n}function nC(t){return{name:"Regex Rename Operator",func:r=>r.map(n=>{for(let{expr:i,now:u}of t)n.name=n.name.replace(Tm(i,"g"),u).trim();return n})}}function RN(t){let r=t.map(n=>({expr:n,now:""}));return{name:"Regex Delete Operator",func:nC(r).func}}function xN(t,r,n,i,u){return{name:"Script Operator",func:async p=>{let g=p;if(g?.$file?.type==="mihomoProfile")try{let m=da.safeLoad(t),A;if(g?.$content)try{A=da.safeLoad(g?.$content)}catch(y){R.error(y.message??y)}if(typeof m!="object")throw new Error("patch is not an object");return g.$content=Ot.yaml.safeDump(rC(A||(g?.$file?.sourceType==="none"?{}:{proxies:await vn({type:g?.$file?.sourceType||"collection",name:g?.$file?.sourceName,platform:"mihomo",produceType:"internal",produceOpts:{"delete-underscore-fields":!0}})}),m)),g}catch{}return await(async function(){g=M0("operator",t,n,u)(p,r,{source:i,...ba})})(),g},nodeFunc:async p=>{let g=p;return await(async function(){g=M0("operator",`async function operator(input = []) {
                        if (input && (input.$files || input.$content)) {
                            let { $content, $files, $options, $file } = input
                            if($file.type === 'mihomoProfile') {
                                ${t}
                                if(typeof main === 'function') {
                                    let config;
                                    if ($content) {
                                        try {
                                            config = ProxyUtils.yaml.safeLoad($content);
                                        } catch (e) {
                                            console.log(e.message ?? e);
                                        }
                                    }
                                    $content = ProxyUtils.yaml.safeDump(await main(config || ($file.sourceType === 'none' ? {} : {
                                        proxies: await produceArtifact({
                                            type: $file.sourceType || 'collection',
                                            name: $file.sourceName,
                                            platform: 'mihomo',
                                            produceType: 'internal',
                                            produceOpts: {
                                                'delete-underscore-fields': true
                                            }
                                        }),
                                    })))
                                }
                            } else {
                                ${t}
                            }
                            return { $content, $files, $options, $file }
                        } else {
                            let proxies = input
                            let list = []
                            for await (let $server of proxies) {
                                ${t}
                                list.push($server)
                            }
                            return list
                        }
                      }`,n,u)(p,r,{source:i,...ba})})(),g}}}function PN(t){let r,n;try{let i=t.split(":");n=parseInt(i[2],16);let u=parseInt(i[3],16),p=parseInt(i[4],16),g=u>>8,m=u&255,A=p>>8,y=p&255;if(r=`${g}.${m}.${A}.${y}`,n<=0||n>65535)throw new Error(`Invalid port number: ${n}`);if(!Yr(r))throw new Error(`Invalid IP address: ${r}`)}catch(i){R.error(`IP4P \u89E3\u6790\u5931\u8D25: ${i}`)}return{server:r,port:n}}var iC={Custom:async function(t,r,n,i,u,p){let g=Gi(`CUSTOM:${p}:${t}:${r}`),m=Wr.get(g);if(!n&&m)return m;let A=r==="IPv6"?"AAAA":"A",y=await yl({url:p,domain:t,type:A,timeout:i,edns:u}),{answers:D}=y;if(!Array.isArray(D)||D.length===0)throw new Error("No answers");let o=D.filter(M=>M?.type===A).map(M=>M?.data).filter(M=>M);if(o.length===0)throw new Error("No answers");return Wr.set(g,o),o},Google:async function(t,r,n,i,u){let p=Gi(`GOOGLE:${t}:${r}`),g=Wr.get(p);if(!n&&g)return g;let m=r==="IPv6"?"AAAA":"A",A=await yl({url:"https://8.8.4.4/dns-query",domain:t,type:m,timeout:i,edns:u}),{answers:y}=A;if(!Array.isArray(y)||y.length===0)throw new Error("No answers");let D=y.filter(o=>o?.type===m).map(o=>o?.data).filter(o=>o);if(D.length===0)throw new Error("No answers");return Wr.set(p,D),D},"IP-API":async function(t,r,n,i){if(["IPv6"].includes(r))throw new Error(`\u57DF\u540D\u89E3\u6790\u670D\u52A1\u63D0\u4F9B\u65B9 IP-API \u4E0D\u652F\u6301 ${r}`);let u=Gi(`IP-API:${t}`),p=Wr.get(u);if(!n&&p)return p;let g=await R.http.get({url:`http://ip-api.com/json/${encodeURIComponent(t)}?lang=zh-CN`,timeout:i}),m=JSON.parse(g.body);if(m.status!=="success")throw new Error(`Status is ${m.status}`);if(!m.query||m.query===0)throw new Error("No answers");let A=[m.query];if(A.length===0)throw new Error("No answers");return Wr.set(u,A),A},Cloudflare:async function(t,r,n,i,u){let p=Gi(`CLOUDFLARE:${t}:${r}`),g=Wr.get(p);if(!n&&g)return g;let m=r==="IPv6"?"AAAA":"A",A=await yl({url:"https://1.0.0.1/dns-query",domain:t,type:m,timeout:i,edns:u}),{answers:y}=A;if(!Array.isArray(y)||y.length===0)throw new Error("No answers");let D=y.filter(o=>o?.type===m).map(o=>o?.data).filter(o=>o);if(D.length===0)throw new Error("No answers");return Wr.set(p,D),D},Ali:async function(t,r,n,i,u){let p=Gi(`ALI:${t}:${r}`),g=Wr.get(p);if(!n&&g)return g;let m=await R.http.get({url:`http://223.6.6.6/resolve?edns_client_subnet=${u}/${Yr(u)?24:56}&name=${encodeURIComponent(t)}&type=${r==="IPv6"?"AAAA":"A"}&short=1`,headers:{accept:"application/dns-json"},timeout:i}),A=JSON.parse(m.body);if(!Array.isArray(A)||A.length===0)throw new Error("No answers");let y=A;if(y.length===0)throw new Error("No answers");return Wr.set(p,y),y},Tencent:async function(t,r,n,i,u){let p=Gi(`TENCENT:${t}:${r}`),g=Wr.get(p);if(!n&&g)return g;let m=(await R.http.get({url:`http://119.28.28.28/d?ip=${u}&type=${r==="IPv6"?"AAAA":"A"}&dn=${encodeURIComponent(t)}`,headers:{accept:"application/dns-json"},timeout:i})).body.split(";").map(y=>y.split(",")[0]);if(m.length===0||String(m)==="0")throw new Error("No answers");let A=m;if(A.length===0)throw new Error("No answers");return Wr.set(p,A),A}};function sC({provider:t,type:r,filter:n,cache:i,url:u,timeout:p,edns:g}){if(["IPv6","IP4P"].includes(r)&&["IP-API"].includes(t))throw new Error(`\u57DF\u540D\u89E3\u6790\u670D\u52A1\u63D0\u4F9B\u65B9 ${t} \u4E0D\u652F\u6301 ${r}`);let{defaultTimeout:m}=R.read(Kt),A=p||m||8e3,y=["IPv6","IP4P"].includes(r)?"IPv6":"IPv4",D=iC[t];if(!D)throw new Error(`\u627E\u4E0D\u5230\u57DF\u540D\u89E3\u6790\u670D\u52A1\u63D0\u4F9B\u65B9: ${t}`);let o=g||"223.6.6.6";if(!sc(o))throw new Error("\u57DF\u540D\u89E3\u6790 EDNS \u5E94\u4E3A IP");return R.info(`Domain Resolver: [${r}] ${t} ${o||""} ${u||""}`),{name:"Resolve Domain Operator",func:async M=>{M.forEach((X,j)=>{!X["_no-resolve"]&&X["no-resolve"]&&(M[j]["_no-resolve"]=X["no-resolve"])});let W={},w=15,U=[...new Set(M.filter(X=>!sc(X.server)&&!X["_no-resolve"]).map(X=>X.server))],nt=Math.ceil(U.length/w);for(let X=0;X<nt;X++){let j=[];for(let it of U.splice(0,w))j.push(D(it,y,i==="disabled",A,o,u).then(ot=>{W[it]=ot,R.info(`Successfully resolved domain: ${it} \u279F ${ot}`)}).catch(ot=>{R.error(`Failed to resolve domain: ${it} with resolver [${t}]: ${ot}`)}));await Promise.all(j)}return M.forEach(X=>{if(!X["_no-resolve"])if(W[X.server]){X._resolved_ips=W[X.server];let j=Array.isArray(W[X.server])?W[X.server][Math.floor(Math.random()*W[X.server].length)]:W[X.server];if(y==="IPv6"&&Mr(j)){try{j=new n0.Address6(j).correctForm()}catch(it){R.error(`Failed to parse IPv6 address: ${j}: ${it}`)}if(/^2001::[^:]+:[^:]+:[^:]+$/.test(j)){X._IP4P=j;let{server:it,port:ot}=PN(j);it&&ot?(X._domain=X.server,X.server=it,X.port=ot,X.resolved=!0,X._IPv4=X.server,sc(X._IP)||(X._IP=X.server)):X.resolved||(X.resolved=!1)}else X._domain=X.server,X.server=j,X.resolved=!0,X[`_${y}`]=X.server,sc(X._IP)||(X._IP=X.server)}else X._domain=X.server,X.server=j,X.resolved=!0,X[`_${y}`]=X.server,sc(X._IP)||(X._IP=X.server)}else X.resolved||(X.resolved=!1)}),M.filter(X=>n==="removeFailed"?sc(X.server)||X["_no-resolve"]||X.resolved:n==="IPOnly"?sc(X.server):n==="IPv4Only"?Yr(X.server):n==="IPv6Only"?Mr(X.server):!0)}}}function sc(t){return Yr(t)||Mr(t)}sC.resolver=iC;function Pm(t){var r=/^[\x00-\x7F]+$/;return r.test(t)}function aC(){return{name:"Useless Filter",func:t=>t.map(r=>{if(r.cipher&&!Pm(r.cipher)||r.password&&!Pm(r.password))return!1;if(r.network){let n=r[`${r.network}-opts`]?.headers?.Host||r[`${r.network}-opts`]?.headers?.host;if(n=Array.isArray(n)?n:[n],n.some(i=>i&&!Pm(i)))return!1}return!/|||||Bandwidth|expire/.test(r.name)})}}function ON(t){let r=t?.value||t;Array.isArray(r)||(r=[]);let n=t?.keep??!0,i={HK:"\u{1F1ED}\u{1F1F0}",TW:"\u{1F1F9}\u{1F1FC}",US:"\u{1F1FA}\u{1F1F8}",SG:"\u{1F1F8}\u{1F1EC}",JP:"\u{1F1EF}\u{1F1F5}",UK:"\u{1F1EC}\u{1F1E7}",DE:"\u{1F1E9}\u{1F1EA}",KR:"\u{1F1F0}\u{1F1F7}"};return{name:"Region Filter",func:u=>u.map(p=>{let g=El(p.name),m=r.some(A=>i[A]===g);return n?m:!m})}}function TN({regex:t=[],keep:r=!0}){return{name:"Regex Filter",func:n=>n.map(i=>{let u=t.some(p=>Tm(p).test(i.name));return r?u:!u})}}function Tm(t,...r){return r=r.join(""),t.startsWith("(?i)")?(t=t.substring(4),new RegExp(t,"i"+r)):new RegExp(t,r)}function NN(t){let r=t?.value||t;Array.isArray(r)||(r=[]);let n=t?.keep??!0;return{name:"Type Filter",func:i=>i.map(u=>{let p=r.some(g=>u.type===g);return n?p:!p})}}function kN(t,r,n,i,u){return{name:"Script Filter",func:async p=>{let g=T0(p.length,!0);return await(async function(){g=M0("filter",t,n,u)(p,r,{source:i,...ba})})(),g},nodeFunc:async p=>{let g=T0(p.length,!0);return await(async function(){g=M0("filter",`async function filter(input = []) {
                        let proxies = input
                        let list = []
                        const fn = async ($server) => {
                            ${t}
                        }
                        for await (let $server of proxies) {
                            list.push(await fn($server))
                        }
                        return list
                      }`,n,u)(p,r,{source:i,...ba})})(),g}}}var q0={"Useless Filter":aC,"Region Filter":ON,"Regex Filter":TN,"Type Filter":NN,"Script Filter":kN,"Conditional Filter":DN,"Quick Setting Operator":FN,"Flag Operator":SN,"Sort Operator":BN,"Regex Sort Operator":$N,"Regex Rename Operator":nC,"Regex Delete Operator":RN,"Script Operator":xN,"Handle Duplicate Operator":IN,"Resolve Domain Operator":sC};async function LN(t,r){let n=T0(r.length,!0);try{n=await t.func(r)}catch(i){let u="",p=`${i.message??i}`;p.includes("$server is not defined")?u="":(R.error(`Cannot apply filter ${t.name}(function filter)! Reason: ${i}`),u=`\u6267\u884C function filter \u5931\u8D25 ${p}; `);try{n=await t.nodeFunc(r)}catch(g){R.error(`Cannot apply filter ${t.name}(shortcut script)! Reason: ${g}`);let m="",A=`${g.message??g}`;throw u&&A===p?(m="",u=`\u6267\u884C\u5931\u8D25 ${p}`):m=`\u6267\u884C\u5FEB\u6377\u8FC7\u6EE4\u811A\u672C \u5931\u8D25 ${A}`,new Error(`\u811A\u672C\u8FC7\u6EE4 ${u}${m}`)}}return r.filter((i,u)=>n[u])}async function UN(t,r){let n=HN(r);try{let i=await t.func(n);i&&(n=i)}catch(i){let u="",p=`${i.message??i}`;p.includes("$server is not defined")||p.includes("$content is not defined")||p.includes("$files is not defined")||n?.$files||n?.$content?u="":(R.error(`Cannot apply operator ${t.name}(function operator)! Reason: ${i}`),u=`\u6267\u884C function operator \u5931\u8D25 ${p}; `);try{let g=await t.nodeFunc(n);g&&(n=g)}catch(g){R.error(`Cannot apply operator ${t.name}(shortcut script)! Reason: ${g}`);let m="",A=`${g.message??g}`;throw u&&A===p?(m="",u=`\u6267\u884C\u5931\u8D25 ${p}`):m=`\u6267\u884C\u5FEB\u6377\u811A\u672C \u5931\u8D25 ${A}`,new Error(`\u811A\u672C\u64CD\u4F5C ${u}${m}`)}}return n}async function uC(t,r){if(t.name.indexOf("Filter")!==-1)return LN(t,r);if(t.name.indexOf("Operator")!==-1)return UN(t,r)}function jN(t){let r=t.length,n,i;for(;r!==0;)i=Math.floor(Math.random()*r),r-=1,n=t[r],t[r]=t[i],t[i]=n;return t}function HN(t){return JSON.parse(JSON.stringify(t))}function M0(name,script,$arguments,$options){let flowUtils={getFlowField:Zc,getFlowHeaders:zn,parseFlowHeaders:Ko,flowTransfer:Rf,validCheck:s0,getRmainingDays:a0,normalizeFlowHeader:Yu};return R.env.isLoon?new Function("$arguments","$options","$substore","lodash","$persistentStore","$httpClient","$notification","ProxyUtils","yaml","Buffer","b64d","b64e","scriptResourceCache","flowUtils","produceArtifact","require",`${script}
 return ${name}`)($arguments,$options,R,Om.default,$persistentStore,$httpClient,$notification,Ot,Ot.yaml,Ot.Buffer,Ot.Base64.decode,Ot.Base64.encode,zf,flowUtils,vn,eval('typeof require !== "undefined"')?ko:void 0):new Function("$arguments","$options","$substore","lodash","ProxyUtils","yaml","Buffer","b64d","b64e","scriptResourceCache","flowUtils","produceArtifact","require",`${script}
 return ${name}`)($arguments,$options,R,Om.default,Ot,Ot.yaml,Ot.Buffer,Ot.Base64.decode,Ot.Base64.encode,zf,flowUtils,vn,eval('typeof require !== "undefined"')?ko:void 0)}function MN(){return{name:"HTML",test:t=>/^<!DOCTYPE html>/.test(t),parse:()=>""}}function qN(){let t="Base64 Pre-processor",r=["dm1lc3M","c3NyOi8v","c29ja3M6Ly","dHJvamFu","c3M6Ly","c3NkOi8v","c2hhZG93","aHR0c","dmxlc3M=","aHlzdGVyaWEy","aHkyOi8v","d2lyZWd1YXJkOi8v","d2c6Ly8=","dHVpYzovLw=="];return{name:t,test:function(n){return!/^\w+:\/\/\w+/im.test(n)&&r.some(i=>n.indexOf(i)!==-1)},parse:function(n){let i=ft.decode(n);return/^\w+(:\/\/|\s*?=\s*?)\w+/m.test(i)?i:(R.error("Base64 Pre-processor error: decoded line does not start with protocol"),n)}}}function VN(){return{name:"Fallback Base64 Pre-processor",test:function(t){return!0},parse:function(t){let r=ft.decode(t);return/^\w+(:\/\/|\s*?=\s*?)\w+/m.test(r)?r:(R.error("Fallback Base64 Pre-processor error: decoded line does not start with protocol"),t)}}}function KN(){return{name:"Clash Pre-processor",test:function(t){if(!/proxies/.test(t))return!1;let r=Vf(t);return r.proxies&&Array.isArray(r.proxies)},parse:function(t,r){let n=t.replace(/short-id:([ \t]*[^#\n,}]*)/g,(p,g)=>{let m=g.trim();return!m||m===""?'short-id: ""':/^(['"]).*\1$/.test(m)?`short-id: ${m}`:["null"].includes(m)?`short-id: ${m}`:`short-id: "${m}"`}),{proxies:i,"global-client-fingerprint":u}=Vf(n);return(r?`proxies:
`:"")+i.map(p=>(u&&!p["client-fingerprint"]&&(p["client-fingerprint"]=u),`${r?"  - ":""}${JSON.stringify(p)}
`)).join("")}}}function zN(){return{name:"SSD Pre-processor",test:function(t){return t.indexOf("ssd://")===0},parse:function(t){let r=[],n=JSON.parse(ft.decode(t.split("ssd://")[1])),i=n.port,u=n.encryption,p=n.password,g=n.servers;for(let m=0;m<g.length;m++){let A=g[m];u=A.encryption?A.encryption:u,p=A.password?A.password:p;let y=ft.encode(u+":"+p),D=A.server;i=A.port?A.port:i;let o=A.remarks?A.remarks:m,M=A.plugin_options?"/?plugin="+encodeURIComponent(A.plugin+";"+A.plugin_options):"";r[m]="ss://"+y+"@"+D+":"+i+M+"#"+o}return r.join(`
`)}}}function GN(){return{name:"Full Config Preprocessor",test:function(t){return/^(\[server_local\]|\[Proxy\])/gm.test(t)},parse:function(t){return t.match(/^\[server_local|Proxy\]([\s\S]+?)^\[.+?\](\r?\n|$)/im)?.[1]||t}}}var V0=[MN(),KN(),qN(),zN(),GN(),VN()],oC=tn(Sf()),mt=class{constructor(t){this.proxy=t,this.output=[]}append(t){if(typeof t>"u")throw new Error("required field is missing");this.output.push(t)}appendIfPresent(t,r){ue(this.proxy,r)&&this.append(t)}toString(){return this.output.join("")}};function ue(t,r){let n=oC.default.get(t,r);return typeof n<"u"&&n!==null}var YN="Surge",As={dual:"dual",ipv4:"v4-only",ipv6:"v6-only","ipv4-prefer":"prefer-v4","ipv6-prefer":"prefer-v6"};function bl(){return{produce:(t,r,n={})=>{switch(t.name=t.name.replace(/=|,/g,""),t.ports&&(t.ports=String(t.ports)),t.type){case"ss":return WN(t,n["include-unsupported-proxy"]);case"trojan":return XN(t);case"vmess":return JN(t,n["include-unsupported-proxy"]);case"http":return QN(t);case"direct":return ek(t);case"socks5":return tk(t);case"snell":return rk(t);case"tuic":return nk(t);case"wireguard-surge":return sk(t);case"hysteria2":return ak(t);case"ssh":return ZN(t)}if(n["include-unsupported-proxy"]&&t.type==="wireguard")return ik(t);throw new Error(`Platform ${YN} does not support proxy type: ${t.type}`)}}}function WN(t){let r=new mt(t);if(r.append(`${t.name}=${t.type},${t.server},${t.port}`),t.cipher||(t.cipher="none"),!["aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","rc4","rc4-md5","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","cast5-cfb","des-cfb","idea-cfb","rc2-cfb","seed-cfb","salsa20","chacha20","chacha20-ietf","none","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(t.cipher))throw new Error(`cipher ${t.cipher} is not supported`);r.append(`,encrypt-method=${t.cipher}`),r.appendIfPresent(`,password="${t.password}"`,"password");let n=As[t["ip-version"]]||t["ip-version"];if(r.appendIfPresent(`,ip-version=${n}`,"ip-version"),r.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),ue(t,"plugin")){if(t.plugin==="obfs")r.append(`,obfs=${t["plugin-opts"].mode}`),r.appendIfPresent(`,obfs-host=${t["plugin-opts"].host}`,"plugin-opts.host"),r.appendIfPresent(`,obfs-uri=${t["plugin-opts"].path}`,"plugin-opts.path");else if(!["shadow-tls"].includes(t.plugin))throw new Error(`plugin ${t.plugin} is not supported`)}if(r.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),r.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),r.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),r.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),r.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),r.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),r.appendIfPresent(`,tos=${t.tos}`,"tos"),r.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),r.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),ue(t,"shadow-tls-password"))r.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),r.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),r.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni"),r.appendIfPresent(`,udp-port=${t["udp-port"]}`,"udp-port");else if(["shadow-tls"].includes(t.plugin)&&t["plugin-opts"]){let i=t["plugin-opts"].password,u=t["plugin-opts"].host,p=t["plugin-opts"].version;if(i){if(r.append(`,shadow-tls-password=${i}`),u&&r.append(`,shadow-tls-sni=${u}`),p){if(p<2)throw new Error(`shadow-tls version ${p} is not supported`);r.append(`,shadow-tls-version=${p}`)}r.appendIfPresent(`,udp-port=${t["udp-port"]}`,"udp-port")}}return r.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),r.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),r.toString()}function XN(t){let r=new mt(t);r.append(`${t.name}=${t.type},${t.server},${t.port}`),r.appendIfPresent(`,password="${t.password}"`,"password");let n=As[t["ip-version"]]||t["ip-version"];return r.appendIfPresent(`,ip-version=${n}`,"ip-version"),r.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),cC(r,t),r.appendIfPresent(`,tls=${t.tls}`,"tls"),r.appendIfPresent(`,server-cert-fingerprint-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),r.appendIfPresent(`,sni=${t.sni}`,"sni"),r.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),r.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),r.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),r.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),r.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),r.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),r.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),r.appendIfPresent(`,tos=${t.tos}`,"tos"),r.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),r.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),ue(t,"shadow-tls-password")&&(r.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),r.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),r.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),r.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),r.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),r.toString()}function JN(t,r){let n=new mt(t);n.append(`${t.name}=${t.type},${t.server},${t.port}`),n.appendIfPresent(`,username=${t.uuid}`,"uuid");let i=As[t["ip-version"]]||t["ip-version"];return n.appendIfPresent(`,ip-version=${i}`,"ip-version"),n.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),cC(n,t,r),ue(t,"aead")?n.append(`,vmess-aead=${t.aead}`):n.append(`,vmess-aead=${t.alterId===0}`),n.appendIfPresent(`,server-cert-fingerprint-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),n.appendIfPresent(`,tls=${t.tls}`,"tls"),n.appendIfPresent(`,sni=${t.sni}`,"sni"),n.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),n.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),n.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),n.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),n.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),n.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),n.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),n.appendIfPresent(`,tos=${t.tos}`,"tos"),n.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),n.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),ue(t,"shadow-tls-password")&&(n.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),n.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),n.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),n.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),n.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),n.toString()}function ZN(t){let r=new mt(t);r.append(`${t.name}=ssh,${t.server},${t.port}`),r.appendIfPresent(`,username="${t.username}"`,"username"),r.appendIfPresent(`,password="${t.password}"`,"password"),r.appendIfPresent(`,private-key=${t["keystore-private-key"]}`,"keystore-private-key"),r.appendIfPresent(`,idle-timeout=${t["idle-timeout"]}`,"idle-timeout"),r.appendIfPresent(`,server-fingerprint="${t["server-fingerprint"]}"`,"server-fingerprint");let n=As[t["ip-version"]]||t["ip-version"];return r.appendIfPresent(`,ip-version=${n}`,"ip-version"),r.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),r.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),r.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),r.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),r.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),r.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),r.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),r.appendIfPresent(`,tos=${t.tos}`,"tos"),r.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),r.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),r.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),r.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),r.toString()}function QN(t){if(t.headers&&Object.keys(t.headers).length>0)throw new Error("headers is unsupported");let r=new mt(t),n=t.tls?"https":"http";r.append(`${t.name}=${n},${t.server},${t.port}`),r.appendIfPresent(`,username="${t.username}"`,"username"),r.appendIfPresent(`,password="${t.password}"`,"password");let i=As[t["ip-version"]]||t["ip-version"];return r.appendIfPresent(`,ip-version=${i}`,"ip-version"),r.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),r.appendIfPresent(`,server-cert-fingerprint-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),r.appendIfPresent(`,sni=${t.sni}`,"sni"),r.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),r.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),r.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),r.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),r.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),r.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),r.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),r.appendIfPresent(`,tos=${t.tos}`,"tos"),r.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),r.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),ue(t,"shadow-tls-password")&&(r.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),r.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),r.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),r.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),r.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),r.toString()}function ek(t){let r=new mt(t);r.append(`${t.name}=direct`);let n=As[t["ip-version"]]||t["ip-version"];return r.appendIfPresent(`,ip-version=${n}`,"ip-version"),r.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),r.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),r.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),r.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),r.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),r.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),r.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),r.appendIfPresent(`,tos=${t.tos}`,"tos"),r.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),r.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),r.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),r.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),r.toString()}function tk(t){let r=new mt(t),n=t.tls?"socks5-tls":"socks5";r.append(`${t.name}=${n},${t.server},${t.port}`),r.appendIfPresent(`,username="${t.username}"`,"username"),r.appendIfPresent(`,password="${t.password}"`,"password");let i=As[t["ip-version"]]||t["ip-version"];return r.appendIfPresent(`,ip-version=${i}`,"ip-version"),r.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),r.appendIfPresent(`,server-cert-fingerprint-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),r.appendIfPresent(`,sni=${t.sni}`,"sni"),r.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),t.tfo&&R.info("Option tfo is not supported by Surge, thus omitted"),r.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),r.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),r.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),r.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),r.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),r.appendIfPresent(`,tos=${t.tos}`,"tos"),r.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),r.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),ue(t,"shadow-tls-password")&&(r.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),r.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),r.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),r.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),r.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),r.toString()}function rk(t){let r=new mt(t);r.append(`${t.name}=${t.type},${t.server},${t.port}`),r.appendIfPresent(`,version=${t.version}`,"version"),r.appendIfPresent(`,psk=${t.psk}`,"psk");let n=As[t["ip-version"]]||t["ip-version"];return r.appendIfPresent(`,ip-version=${n}`,"ip-version"),r.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),r.appendIfPresent(`,obfs=${t["obfs-opts"]?.mode}`,"obfs-opts.mode"),r.appendIfPresent(`,obfs-host=${t["obfs-opts"]?.host}`,"obfs-opts.host"),r.appendIfPresent(`,obfs-uri=${t["obfs-opts"]?.path}`,"obfs-opts.path"),r.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),r.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),r.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),r.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),r.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),r.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),r.appendIfPresent(`,tos=${t.tos}`,"tos"),r.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),r.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),ue(t,"shadow-tls-password")&&(r.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),r.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),r.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),r.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),r.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),r.appendIfPresent(`,reuse=${t.reuse}`,"reuse"),r.toString()}function nk(t){let r=new mt(t),n=t.type;(!t.token||t.token.length===0)&&(n="tuic-v5"),r.append(`${t.name}=${n},${t.server},${t.port}`),r.appendIfPresent(`,uuid=${t.uuid}`,"uuid"),r.appendIfPresent(`,password="${t.password}"`,"password"),r.appendIfPresent(`,token=${t.token}`,"token"),r.appendIfPresent(`,alpn=${Array.isArray(t.alpn)?t.alpn[0]:t.alpn}`,"alpn"),ue(t,"ports")&&r.append(`,port-hopping="${t.ports.replace(/,/g,";")}"`),r.appendIfPresent(`,port-hopping-interval=${t["hop-interval"]}`,"hop-interval");let i=As[t["ip-version"]]||t["ip-version"];return r.appendIfPresent(`,ip-version=${i}`,"ip-version"),r.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),r.appendIfPresent(`,sni=${t.sni}`,"sni"),r.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),r.appendIfPresent(`,server-cert-fingerprint-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),ue(t,"tfo")?r.append(`,tfo=${t.tfo}`):ue(t,"fast-open")&&r.append(`,tfo=${t["fast-open"]}`),r.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),r.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),r.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),r.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),r.appendIfPresent(`,tos=${t.tos}`,"tos"),r.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),r.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),ue(t,"shadow-tls-password")&&(r.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),r.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),r.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),r.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),r.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),r.appendIfPresent(`,ecn=${t.ecn}`,"ecn"),r.toString()}function ik(t){Array.isArray(t.peers)&&t.peers.length>0&&(t.server=t.peers[0].server,t.port=t.peers[0].port,t.ip=t.peers[0].ip,t.ipv6=t.peers[0].ipv6,t["public-key"]=t.peers[0]["public-key"],t["preshared-key"]=t.peers[0]["pre-shared-key"],t["allowed-ips"]=t.peers[0]["allowed-ips"],t.reserved=t.peers[0].reserved);let r=new mt(t);r.append(`# > WireGuard Proxy ${t.name}
# ${t.name}=wireguard`),t["section-name"]=fr(t["section-name"],t.name),r.appendIfPresent(`,section-name=${t["section-name"]}`,"section-name"),r.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert");let n=As[t["ip-version"]]||t["ip-version"];r.appendIfPresent(`,ip-version=${n}`,"ip-version"),r.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),r.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),r.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),r.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),r.appendIfPresent(`,tos=${t.tos}`,"tos"),r.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),r.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),ue(t,"shadow-tls-password")&&(r.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),r.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),r.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),r.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),r.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),r.append(`
# > WireGuard Section ${t.name}
[WireGuard ${t["section-name"]}]
private-key = ${t["private-key"]}`),r.appendIfPresent(`
self-ip = ${t.ip}`,"ip"),r.appendIfPresent(`
self-ip-v6 = ${t.ipv6}`,"ipv6"),t.dns&&(Array.isArray(t.dns)&&(t.dns=t.dns.join(", ")),r.append(`
dns-server = ${t.dns}`)),r.appendIfPresent(`
mtu = ${t.mtu}`,"mtu"),n==="prefer-v6"&&r.append(`
prefer-ipv6 = true`);let i=Array.isArray(t["allowed-ips"])?t["allowed-ips"].join(","):t["allowed-ips"],u=Array.isArray(t.reserved)?t.reserved.join("/"):t.reserved,p=t["preshared-key"]??t["pre-shared-key"];p&&(p=`,preshared-key="${p}"`);let g={"public-key":t["public-key"],"allowed-ips":i?`"${i}"`:void 0,endpoint:`${t.server}:${t.port}`,keepalive:t["persistent-keepalive"]||t.keepalive,"client-id":u,"preshared-key":p};return r.append(`
peer = (${Object.keys(g).filter(m=>g[m]!=null).map(m=>`${m} = ${g[m]}`).join(", ")})`),r.toString()}function sk(t){let r=new mt(t);r.append(`${t.name}=wireguard`),r.appendIfPresent(`,section-name=${t["section-name"]}`,"section-name"),r.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert");let n=As[t["ip-version"]]||t["ip-version"];return r.appendIfPresent(`,ip-version=${n}`,"ip-version"),r.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),r.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),r.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),r.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),r.appendIfPresent(`,tos=${t.tos}`,"tos"),r.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),r.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),ue(t,"shadow-tls-password")&&(r.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),r.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),r.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),r.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),r.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),r.toString()}function ak(t){if(t.obfs||t["obfs-password"])throw new Error("obfs is unsupported");let r=new mt(t);r.append(`${t.name}=hysteria2,${t.server},${t.port}`),r.appendIfPresent(`,password="${t.password}"`,"password"),ue(t,"ports")&&r.append(`,port-hopping="${t.ports.replace(/,/g,";")}"`),r.appendIfPresent(`,port-hopping-interval=${t["hop-interval"]}`,"hop-interval");let n=As[t["ip-version"]]||t["ip-version"];return r.appendIfPresent(`,ip-version=${n}`,"ip-version"),r.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),r.appendIfPresent(`,sni=${t.sni}`,"sni"),r.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),r.appendIfPresent(`,server-cert-fingerprint-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),ue(t,"tfo")?r.append(`,tfo=${t.tfo}`):ue(t,"fast-open")&&r.append(`,tfo=${t["fast-open"]}`),r.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),r.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),r.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),r.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),r.appendIfPresent(`,tos=${t.tos}`,"tos"),r.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),r.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),ue(t,"shadow-tls-password")&&(r.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),r.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),r.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),r.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),r.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),r.appendIfPresent(`,download-bandwidth=${`${t.down}`.match(/\d+/)?.[0]||0}`,"down"),r.appendIfPresent(`,ecn=${t.ecn}`,"ecn"),r.toString()}function cC(t,r,n){if(ue(r,"network"))if(r.network==="ws"){if(t.append(",ws=true"),ue(r,"ws-opts")&&(t.appendIfPresent(`,ws-path=${r["ws-opts"].path}`,"ws-opts.path"),ue(r,"ws-opts.headers"))){let i=r["ws-opts"].headers,u=Object.keys(i).map(p=>{let g=i[p];return g=`"${g}"`,`${p}:${g}`}).join("|");oa(u)&&t.append(`,ws-headers=${u}`)}}else if(n&&["http"].includes(r.network))R.info(`Include Unsupported Proxy: nework ${r.network} -> tcp`);else throw new Error(`network ${r.network} is unsupported`)}var uk={dual:"dual","v4-only":"ipv4","v6-only":"ipv6","prefer-v4":"ipv4-prefer","prefer-v6":"ipv6-prefer"};function Zi(){return{type:"ALL",produce:(t,r,n={})=>{let i=t.filter(u=>n["include-unsupported-proxy"]?!0:u.type==="snell"&&u.version>=4||["juicity"].includes(u.type)||["ss"].includes(u.type)&&!["aes-128-ctr","aes-192-ctr","aes-256-ctr","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-gcm","aes-192-gcm","aes-256-gcm","aes-128-ccm","aes-192-ccm","aes-256-ccm","aes-128-gcm-siv","aes-256-gcm-siv","chacha20-ietf","chacha20","xchacha20","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","chacha8-ietf-poly1305","xchacha8-ietf-poly1305","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm","2022-blake3-chacha20-poly1305","lea-128-gcm","lea-192-gcm","lea-256-gcm","rabbit128-poly1305","aegis-128l","aegis-256","aez-384","deoxys-ii-256-128","rc4-md5","none"].includes(u.cipher)?!1:!(["anytls"].includes(u.type)&&u.network&&(!["tcp"].includes(u.network)||["tcp"].includes(u.network)&&u["reality-opts"]))).map(u=>{if(u.type==="vmess"?(ue(u,"aead")&&(u.aead&&(u.alterId=0),delete u.aead),ue(u,"sni")&&(u.servername=u.sni,delete u.sni),ue(u,"cipher")&&!["auto","none","zero","aes-128-gcm","chacha20-poly1305"].includes(u.cipher)&&(u.cipher="auto")):u.type==="tuic"?(ue(u,"alpn")?u.alpn=Array.isArray(u.alpn)?u.alpn:[u.alpn]:u.alpn=["h3"],ue(u,"tfo")&&!ue(u,"fast-open")&&(u["fast-open"]=u.tfo),(!u.token||u.token.length===0)&&!ue(u,"version")&&(u.version=5)):u.type==="hysteria"?(ue(u,"auth_str")&&!ue(u,"auth-str")&&(u["auth-str"]=u.auth_str),ue(u,"alpn")&&(u.alpn=Array.isArray(u.alpn)?u.alpn:[u.alpn]),ue(u,"tfo")&&!ue(u,"fast-open")&&(u["fast-open"]=u.tfo)):u.type==="wireguard"?(u.keepalive=u.keepalive??u["persistent-keepalive"],u["persistent-keepalive"]=u.keepalive,u["preshared-key"]=u["preshared-key"]??u["pre-shared-key"],u["pre-shared-key"]=u["preshared-key"]):u.type==="snell"&&u.version<3?delete u.udp:u.type==="vless"?ue(u,"sni")&&(u.servername=u.sni,delete u.sni):u.type==="ss"&&ue(u,"shadow-tls-password")&&!ue(u,"plugin")&&(u.plugin="shadow-tls",u["plugin-opts"]={host:u["shadow-tls-sni"],password:u["shadow-tls-password"],version:u["shadow-tls-version"]},delete u["shadow-tls-password"],delete u["shadow-tls-sni"],delete u["shadow-tls-version"]),["vmess","vless"].includes(u.type)&&u.network==="http"){let p=u["http-opts"]?.path;ue(u,"http-opts.path")&&!Array.isArray(p)&&(u["http-opts"].path=[p]);let g=u["http-opts"]?.headers?.Host;ue(u,"http-opts.headers.Host")&&!Array.isArray(g)&&(u["http-opts"].headers.Host=[g])}if(["vmess","vless"].includes(u.type)&&u.network==="h2"){let p=u["h2-opts"]?.path;ue(u,"h2-opts.path")&&Array.isArray(p)&&(u["h2-opts"].path=p[0]);let g=u["h2-opts"]?.headers?.host;ue(u,"h2-opts.headers.Host")&&!Array.isArray(g)&&(u["h2-opts"].headers.host=[g])}if(["ws"].includes(u.network)){let p=u[`${u.network}-opts`]?.path;if(p){let g=/^(.*?)(?:\?ed=(\d+))?$/,[m,A="",y=""]=g.exec(p);u[`${u.network}-opts`].path=A,y!==""&&(u["ws-opts"]["early-data-header-name"]="Sec-WebSocket-Protocol",u["ws-opts"]["max-early-data"]=parseInt(y,10))}else u[`${u.network}-opts`]=u[`${u.network}-opts`]||{},u[`${u.network}-opts`].path="/"}if(u["plugin-opts"]?.tls&&ue(u,"skip-cert-verify")&&(u["plugin-opts"]["skip-cert-verify"]=u["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2","juicity","anytls"].includes(u.type)&&delete u.tls,u["tls-fingerprint"]&&(u.fingerprint=u["tls-fingerprint"]),delete u["tls-fingerprint"],u["underlying-proxy"]&&(u["dialer-proxy"]=u["underlying-proxy"]),delete u["underlying-proxy"],ue(u,"tls")&&typeof u.tls!="boolean"&&delete u.tls,delete u.subName,delete u.collectionName,delete u.id,delete u.resolved,delete u["no-resolve"],r!=="internal"||n["delete-underscore-fields"])for(let p in u)(u[p]==null||/^_/i.test(p))&&delete u[p];return["grpc"].includes(u.network)&&u[`${u.network}-opts`]&&(delete u[`${u.network}-opts`]["_grpc-type"],delete u[`${u.network}-opts`]["_grpc-authority"]),u["ip-version"]&&(u["ip-version"]=uk[u["ip-version"]]||u["ip-version"]),u});return r==="internal"?i:`proxies:
`+i.map(u=>"  - "+JSON.stringify(u)+`
`).join("")}}}var lC="SurgeMac",ok=bl();function Nm(){return{produce:(t,r,n={})=>{switch(t.type){case"external":return fC(t);default:try{return ok.produce(t,r,n)}catch{if(n.useMihomoExternal)return R.log(`${t.name} is not supported on ${lC}, try to use Mihomo(SurgeMac - External Proxy Program) instead`),ck(t,r,n);throw new Error("Surge for macOS \u53EF\u624B\u52A8\u6307\u5B9A\u94FE\u63A5\u53C2\u6570 target=SurgeMac \u6216\u5728 \u540C\u6B65\u914D\u7F6E \u4E2D\u6307\u5B9A SurgeMac \u6765\u542F\u7528 mihomo \u652F\u63F4 Surge \u672C\u8EAB\u4E0D\u652F\u6301\u7684\u534F\u8BAE")}}}}}function fC(t){let r=new mt(t);if(!t.exec||!t["local-port"])throw new Error(`${t.type}: exec and local-port are required`);return r.append(`${t.name}=external,exec="${t.exec}",local-port=${t["local-port"]}`),Array.isArray(t.args)&&t.args.map(n=>{r.append(`,args="${n}"`)}),Array.isArray(t.addresses)&&t.addresses.map(n=>{r.append(`,addresses=${n}`)}),r.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),ue(t,"tfo")?r.append(`,tfo=${t.tfo}`):ue(t,"fast-open")&&r.append(`,tfo=${t["fast-open"]}`),r.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),r.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),r.toString()}function ck(t,r,n){let i=Zi().produce([t],"internal")?.[0];if(i){let u=n?.localPort||t._localPort||65535,p=!["ipv4","v4-only"].includes(t["ip-version"]),g={name:t.name,type:"external",exec:t._exec||"/usr/local/bin/mihomo","local-port":u,args:["-config",ft.encode(JSON.stringify({"mixed-port":u,ipv6:p,mode:"global",dns:{enable:!0,ipv6:p,"default-nameserver":n?.defaultNameserver||t._defaultNameserver||["180.76.76.76","52.80.52.52","119.28.28.28","223.6.6.6"],nameserver:n?.nameserver||t._nameserver||["https://doh.pub/dns-query","https://dns.alidns.com/dns-query","https://doh-pure.onedns.net/dns-query"]},proxies:[{...i,name:"proxy"}],"proxy-groups":[{name:"GLOBAL",type:"select",proxies:["proxy"]}]}))],addresses:[]};return lk(t.server)?g.addresses.push(t.server):R.log(`Platform ${lC}, proxy type ${t.type}: addresses should be an IP address, but got ${t.server}`),n.localPort=u-1,fC(g)}}function lk(t){return Yr(t)||Mr(t)}function km(){return{type:"ALL",produce:(t,r,n={})=>{let i=t.filter(u=>n["include-unsupported-proxy"]?!0:!["ss","ssr","vmess","vless","socks5","http","snell","trojan","wireguard"].includes(u.type)||u.type==="ss"&&!["aes-128-gcm","aes-192-gcm","aes-256-gcm","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","rc4-md5","chacha20-ietf","xchacha20","chacha20-ietf-poly1305","xchacha20-ietf-poly1305"].includes(u.cipher)||u.type==="snell"&&u.version>=4||u.type==="vless"&&(typeof u.flow<"u"||u["reality-opts"])?!1:u["underlying-proxy"]||u["dialer-proxy"]?(R.error(`Clash \u4E0D\u652F\u6301\u524D\u7F6E\u4EE3\u7406\u5B57\u6BB5. \u5DF2\u8FC7\u6EE4\u8282\u70B9 ${u.name}`),!1):!0).map(u=>{if(u.type==="vmess"?(ue(u,"aead")&&(u.aead&&(u.alterId=0),delete u.aead),ue(u,"sni")&&(u.servername=u.sni,delete u.sni),ue(u,"cipher")&&!["auto","aes-128-gcm","chacha20-poly1305","none"].includes(u.cipher)&&(u.cipher="auto")):u.type==="wireguard"?(u.keepalive=u.keepalive??u["persistent-keepalive"],u["persistent-keepalive"]=u.keepalive,u["preshared-key"]=u["preshared-key"]??u["pre-shared-key"],u["pre-shared-key"]=u["preshared-key"]):u.type==="snell"&&u.version<3?delete u.udp:u.type==="vless"&&ue(u,"sni")&&(u.servername=u.sni,delete u.sni),["vmess","vless"].includes(u.type)&&u.network==="http"){let p=u["http-opts"]?.path;ue(u,"http-opts.path")&&!Array.isArray(p)&&(u["http-opts"].path=[p]);let g=u["http-opts"]?.headers?.Host;ue(u,"http-opts.headers.Host")&&!Array.isArray(g)&&(u["http-opts"].headers.Host=[g])}if(["vmess","vless"].includes(u.type)&&u.network==="h2"){let p=u["h2-opts"]?.path;ue(u,"h2-opts.path")&&Array.isArray(p)&&(u["h2-opts"].path=p[0]);let g=u["h2-opts"]?.headers?.host;ue(u,"h2-opts.headers.Host")&&!Array.isArray(g)&&(u["h2-opts"].headers.host=[g])}if(["ws"].includes(u.network)){let p=u[`${u.network}-opts`]?.path;if(p){let g=/^(.*?)(?:\?ed=(\d+))?$/,[m,A="",y=""]=g.exec(p);u[`${u.network}-opts`].path=A,y!==""&&(u["ws-opts"]["early-data-header-name"]="Sec-WebSocket-Protocol",u["ws-opts"]["max-early-data"]=parseInt(y,10))}else u[`${u.network}-opts`]=u[`${u.network}-opts`]||{},u[`${u.network}-opts`].path="/"}if(u["plugin-opts"]?.tls&&ue(u,"skip-cert-verify")&&(u["plugin-opts"]["skip-cert-verify"]=u["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2","juicity","anytls"].includes(u.type)&&delete u.tls,u["tls-fingerprint"]&&(u.fingerprint=u["tls-fingerprint"]),delete u["tls-fingerprint"],ue(u,"tls")&&typeof u.tls!="boolean"&&delete u.tls,delete u.subName,delete u.collectionName,delete u.id,delete u.resolved,delete u["no-resolve"],r!=="internal")for(let p in u)(u[p]==null||/^_/i.test(p))&&delete u[p];return["grpc"].includes(u.network)&&u[`${u.network}-opts`]&&(delete u[`${u.network}-opts`]["_grpc-type"],delete u[`${u.network}-opts`]["_grpc-authority"]),u});return r==="internal"?i:`proxies:
`+i.map(u=>"  - "+JSON.stringify(u)+`
`).join("")}}}function K0(){return{type:"ALL",produce:(t,r,n={})=>{let i=t.filter(u=>!["ss","ssr","vmess","socks5","http","snell","trojan","tuic","vless","wireguard","hysteria","hysteria2","ssh","juicity"].includes(u.type)||u.type==="ss"&&!["aes-128-gcm","aes-192-gcm","aes-256-gcm","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","rc4-md5","chacha20-ietf","xchacha20","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(u.cipher)||u.type==="snell"&&u.version>=4||u.type==="vless"&&u["reality-opts"]&&!["xtls-rprx-vision"].includes(u.flow)?!1:u["underlying-proxy"]||u["dialer-proxy"]?(R.error(`Stash \u6682\u4E0D\u652F\u6301\u524D\u7F6E\u4EE3\u7406\u5B57\u6BB5. \u5DF2\u8FC7\u6EE4\u8282\u70B9 ${u.name}. \u8BF7\u4F7F\u7528 \u4EE3\u7406\u7684\u8F6C\u53D1\u94FE https://stash.wiki/proxy-protocols/proxy-groups#relay`),!1):!0).map(u=>{if(u.type==="vmess"?(ue(u,"aead")&&(u.aead&&(u.alterId=0),delete u.aead),ue(u,"sni")&&(u.servername=u.sni,delete u.sni),ue(u,"cipher")&&!["auto","aes-128-gcm","chacha20-poly1305","none"].includes(u.cipher)&&(u.cipher="auto")):u.type==="tuic"?(ue(u,"alpn")?u.alpn=Array.isArray(u.alpn)?u.alpn:[u.alpn]:u.alpn=["h3"],ue(u,"tfo")&&!ue(u,"fast-open")&&(u["fast-open"]=u.tfo,delete u.tfo),(!u.token||u.token.length===0)&&!ue(u,"version")&&(u.version=5)):u.type==="hysteria"?(ue(u,"auth_str")&&!ue(u,"auth-str")&&(u["auth-str"]=u.auth_str),ue(u,"alpn")&&(u.alpn=Array.isArray(u.alpn)?u.alpn:[u.alpn]),ue(u,"tfo")&&!ue(u,"fast-open")&&(u["fast-open"]=u.tfo,delete u.tfo),ue(u,"down")&&!ue(u,"down-speed")&&(u["down-speed"]=u.down,delete u.down),ue(u,"up")&&!ue(u,"up-speed")&&(u["up-speed"]=u.up,delete u.up),ue(u,"down-speed")&&(u["down-speed"]=`${u["down-speed"]}`.match(/\d+/)?.[0]||0),ue(u,"up-speed")&&(u["up-speed"]=`${u["up-speed"]}`.match(/\d+/)?.[0]||0)):u.type==="hysteria2"?(ue(u,"password")&&!ue(u,"auth")&&(u.auth=u.password,delete u.password),ue(u,"tfo")&&!ue(u,"fast-open")&&(u["fast-open"]=u.tfo,delete u.tfo),ue(u,"down")&&!ue(u,"down-speed")&&(u["down-speed"]=u.down,delete u.down),ue(u,"up")&&!ue(u,"up-speed")&&(u["up-speed"]=u.up,delete u.up),ue(u,"down-speed")&&(u["down-speed"]=`${u["down-speed"]}`.match(/\d+/)?.[0]||0),ue(u,"up-speed")&&(u["up-speed"]=`${u["up-speed"]}`.match(/\d+/)?.[0]||0)):u.type==="wireguard"?(u.keepalive=u.keepalive??u["persistent-keepalive"],u["persistent-keepalive"]=u.keepalive,u["preshared-key"]=u["preshared-key"]??u["pre-shared-key"],u["pre-shared-key"]=u["preshared-key"]):u.type==="snell"&&u.version<3?delete u.udp:u.type==="vless"&&ue(u,"sni")&&(u.servername=u.sni,delete u.sni),["vmess","vless"].includes(u.type)&&u.network==="http"){let p=u["http-opts"]?.path;ue(u,"http-opts.path")&&!Array.isArray(p)&&(u["http-opts"].path=[p]);let g=u["http-opts"]?.headers?.Host;ue(u,"http-opts.headers.Host")&&!Array.isArray(g)&&(u["http-opts"].headers.Host=[g])}if(["vmess","vless"].includes(u.type)&&u.network==="h2"){let p=u["h2-opts"]?.path;ue(u,"h2-opts.path")&&Array.isArray(p)&&(u["h2-opts"].path=p[0]);let g=u["h2-opts"]?.headers?.host;ue(u,"h2-opts.headers.Host")&&!Array.isArray(g)&&(u["h2-opts"].headers.host=[g])}if(["ws"].includes(u.network)){let p=u[`${u.network}-opts`]?.path;if(p){let g=/^(.*?)(?:\?ed=(\d+))?$/,[m,A="",y=""]=g.exec(p);u[`${u.network}-opts`].path=A,y!==""&&(u["ws-opts"]["early-data-header-name"]="Sec-WebSocket-Protocol",u["ws-opts"]["max-early-data"]=parseInt(y,10))}else u[`${u.network}-opts`]=u[`${u.network}-opts`]||{},u[`${u.network}-opts`].path="/"}if(u["plugin-opts"]?.tls&&ue(u,"skip-cert-verify")&&(u["plugin-opts"]["skip-cert-verify"]=u["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2","juicity","anytls"].includes(u.type)&&delete u.tls,u["tls-fingerprint"]&&(u["server-cert-fingerprint"]=u["tls-fingerprint"]),delete u["tls-fingerprint"],ue(u,"tls")&&typeof u.tls!="boolean"&&delete u.tls,u["test-url"]&&(u["benchmark-url"]=u["test-url"],delete u["test-url"]),u["test-timeout"]&&(u["benchmark-timeout"]=u["test-timeout"],delete u["test-timeout"]),delete u.subName,delete u.collectionName,delete u.id,delete u.resolved,delete u["no-resolve"],r!=="internal")for(let p in u)(u[p]==null||/^_/i.test(p))&&delete u[p];return["grpc"].includes(u.network)&&u[`${u.network}-opts`]&&(delete u[`${u.network}-opts`]["_grpc-type"],delete u[`${u.network}-opts`]["_grpc-authority"]),u});return r==="internal"?i:`proxies:
`+i.map(u=>"  - "+JSON.stringify(u)+`
`).join("")}}}var fk="Loon",wu={dual:"dual",ipv4:"v4-only",ipv6:"v6-only","ipv4-prefer":"prefer-v4","ipv6-prefer":"prefer-v6"};function Lm(){return{produce:(t,r,n={})=>{switch(t.type){case"ss":return hk(t);case"ssr":return dk(t);case"trojan":return pk(t);case"vmess":return gk(t,n["include-unsupported-proxy"]);case"vless":return mk(t,n["include-unsupported-proxy"]);case"http":return vk(t);case"socks5":return wk(t);case"wireguard":return Ek(t);case"hysteria2":return Ak(t)}throw new Error(`Platform ${fk} does not support proxy type: ${t.type}`)}}}function hk(t){let r=new mt(t);if(!["rc4","rc4-md5","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","salsa20","chacha20","chacha20-ietf","aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(t.cipher))throw new Error(`cipher ${t.cipher} is not supported`);if(r.append(`${t.name}=shadowsocks,${t.server},${t.port},${t.cipher},"${t.password}"`),ue(t,"plugin")){if(t.plugin==="obfs")r.append(`,obfs-name=${t["plugin-opts"].mode}`),r.appendIfPresent(`,obfs-host=${t["plugin-opts"].host}`,"plugin-opts.host"),r.appendIfPresent(`,obfs-uri=${t["plugin-opts"].path}`,"plugin-opts.path");else if(!["shadow-tls"].includes(t.plugin))throw new Error(`plugin ${t.plugin} is not supported`)}if(ue(t,"shadow-tls-password"))r.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),r.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),r.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni"),r.appendIfPresent(`,udp-port=${t["udp-port"]}`,"udp-port");else if(["shadow-tls"].includes(t.plugin)&&t["plugin-opts"]){let i=t["plugin-opts"].password,u=t["plugin-opts"].host,p=t["plugin-opts"].version;if(i){if(r.append(`,shadow-tls-password=${i}`),u&&r.append(`,shadow-tls-sni=${u}`),p){if(p<2)throw new Error(`shadow-tls version ${p} is not supported`);r.append(`,shadow-tls-version=${p}`)}r.appendIfPresent(`,udp-port=${t["udp-port"]}`,"udp-port")}}r.appendIfPresent(`,fast-open=${t.tfo}`,"tfo"),t["block-quic"]==="on"?r.append(",block-quic=true"):t["block-quic"]==="off"&&r.append(",block-quic=false"),t.udp&&r.append(",udp=true");let n=wu[t["ip-version"]]||t["ip-version"];return r.appendIfPresent(`,ip-mode=${n}`,"ip-version"),r.toString()}function dk(t){let r=new mt(t);if(r.append(`${t.name}=shadowsocksr,${t.server},${t.port},${t.cipher},"${t.password}"`),r.append(`,protocol=${t.protocol}`),r.appendIfPresent(`,protocol-param=${t["protocol-param"]}`,"protocol-param"),r.appendIfPresent(`,obfs=${t.obfs}`,"obfs"),r.appendIfPresent(`,obfs-param=${t["obfs-param"]}`,"obfs-param"),ue(t,"shadow-tls-password"))r.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),r.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),r.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni"),r.appendIfPresent(`,udp-port=${t["udp-port"]}`,"udp-port");else if(["shadow-tls"].includes(t.plugin)&&t["plugin-opts"]){let i=t["plugin-opts"].password,u=t["plugin-opts"].host,p=t["plugin-opts"].version;if(i){if(r.append(`,shadow-tls-password=${i}`),u&&r.append(`,shadow-tls-sni=${u}`),p){if(p<2)throw new Error(`shadow-tls version ${p} is not supported`);r.append(`,shadow-tls-version=${p}`)}r.appendIfPresent(`,udp-port=${t["udp-port"]}`,"udp-port")}}r.appendIfPresent(`,fast-open=${t.tfo}`,"tfo"),t["block-quic"]==="on"?r.append(",block-quic=true"):t["block-quic"]==="off"&&r.append(",block-quic=false"),t.udp&&r.append(",udp=true");let n=wu[t["ip-version"]]||t["ip-version"];return r.appendIfPresent(`,ip-mode=${n}`,"ip-version"),r.toString()}function pk(t){let r=new mt(t);if(r.append(`${t.name}=trojan,${t.server},${t.port},"${t.password}"`),t.network==="tcp"&&delete t.network,ue(t,"network"))if(t.network==="ws")r.append(",transport=ws"),r.appendIfPresent(`,path=${t["ws-opts"]?.path}`,"ws-opts.path"),r.appendIfPresent(`,host=${t["ws-opts"]?.headers?.Host}`,"ws-opts.headers.Host");else throw new Error(`network ${t.network} is unsupported`);r.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),r.appendIfPresent(`,tls-name=${t.sni}`,"sni"),r.appendIfPresent(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),r.appendIfPresent(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),r.appendIfPresent(`,fast-open=${t.tfo}`,"tfo"),t["block-quic"]==="on"?r.append(",block-quic=true"):t["block-quic"]==="off"&&r.append(",block-quic=false"),t.udp&&r.append(",udp=true");let n=wu[t["ip-version"]]||t["ip-version"];return r.appendIfPresent(`,ip-mode=${n}`,"ip-version"),r.toString()}function gk(t){let r=!!t["reality-opts"],n=new mt(t);if(n.append(`${t.name}=vmess,${t.server},${t.port},${t.cipher},"${t.uuid}"`),t.network==="tcp"&&delete t.network,ue(t,"network"))if(t.network==="ws")n.append(",transport=ws"),n.appendIfPresent(`,path=${t["ws-opts"]?.path}`,"ws-opts.path"),n.appendIfPresent(`,host=${t["ws-opts"]?.headers?.Host}`,"ws-opts.headers.Host");else if(t.network==="http"){n.append(",transport=http");let u=t["http-opts"]?.path,p=t["http-opts"]?.headers?.Host;n.appendIfPresent(`,path=${Array.isArray(u)?u[0]:u}`,"http-opts.path"),n.appendIfPresent(`,host=${Array.isArray(p)?p[0]:p}`,"http-opts.headers.Host")}else throw new Error(`network ${t.network} is unsupported`);else n.append(",transport=tcp");n.appendIfPresent(`,over-tls=${t.tls}`,"tls"),n.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),r?(n.appendIfPresent(`,sni=${t.sni}`,"sni"),n.appendIfPresent(`,public-key="${t["reality-opts"]["public-key"]}"`,"reality-opts.public-key"),n.appendIfPresent(`,short-id=${t["reality-opts"]["short-id"]}`,"reality-opts.short-id")):(n.appendIfPresent(`,tls-name=${t.sni}`,"sni"),n.appendIfPresent(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),n.appendIfPresent(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256")),ue(t,"aead")?n.append(`,alterId=${t.aead?0:1}`):n.append(`,alterId=${t.alterId}`),n.appendIfPresent(`,fast-open=${t.tfo}`,"tfo"),t["block-quic"]==="on"?n.append(",block-quic=true"):t["block-quic"]==="off"&&n.append(",block-quic=false"),t.udp&&n.append(",udp=true");let i=wu[t["ip-version"]]||t["ip-version"];return n.appendIfPresent(`,ip-mode=${i}`,"ip-version"),n.toString()}function mk(t){let r=!1,n=!!t["reality-opts"];if(typeof t.flow<"u")if(["xtls-rprx-vision"].includes(t.flow))r=!0;else throw new Error(`VLESS flow(${t.flow}) is not supported`);let i=new mt(t);if(i.append(`${t.name}=vless,${t.server},${t.port},"${t.uuid}"`),t.network==="tcp"&&delete t.network,ue(t,"network"))if(t.network==="ws")i.append(",transport=ws"),i.appendIfPresent(`,path=${t["ws-opts"]?.path}`,"ws-opts.path"),i.appendIfPresent(`,host=${t["ws-opts"]?.headers?.Host}`,"ws-opts.headers.Host");else if(t.network==="http"){i.append(",transport=http");let p=t["http-opts"]?.path,g=t["http-opts"]?.headers?.Host;i.appendIfPresent(`,path=${Array.isArray(p)?p[0]:p}`,"http-opts.path"),i.appendIfPresent(`,host=${Array.isArray(g)?g[0]:g}`,"http-opts.headers.Host")}else throw new Error(`network ${t.network} is unsupported`);else i.append(",transport=tcp");i.appendIfPresent(`,over-tls=${t.tls}`,"tls"),i.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),r&&i.appendIfPresent(`,flow=${t.flow}`,"flow"),n?(i.appendIfPresent(`,sni=${t.sni}`,"sni"),i.appendIfPresent(`,public-key="${t["reality-opts"]["public-key"]}"`,"reality-opts.public-key"),i.appendIfPresent(`,short-id=${t["reality-opts"]["short-id"]}`,"reality-opts.short-id")):(i.appendIfPresent(`,tls-name=${t.sni}`,"sni"),i.appendIfPresent(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),i.appendIfPresent(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256")),i.appendIfPresent(`,fast-open=${t.tfo}`,"tfo"),t["block-quic"]==="on"?i.append(",block-quic=true"):t["block-quic"]==="off"&&i.append(",block-quic=false"),t.udp&&i.append(",udp=true");let u=wu[t["ip-version"]]||t["ip-version"];return i.appendIfPresent(`,ip-mode=${u}`,"ip-version"),i.toString()}function vk(t){let r=new mt(t),n=t.tls?"https":"http";r.append(`${t.name}=${n},${t.server},${t.port}`),r.appendIfPresent(`,${t.username}`,"username"),r.appendIfPresent(`,"${t.password}"`,"password"),r.appendIfPresent(`,sni=${t.sni}`,"sni"),r.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),r.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),t["block-quic"]==="on"?r.append(",block-quic=true"):t["block-quic"]==="off"&&r.append(",block-quic=false");let i=wu[t["ip-version"]]||t["ip-version"];return r.appendIfPresent(`,ip-mode=${i}`,"ip-version"),r.toString()}function wk(t){let r=new mt(t);r.append(`${t.name}=socks5,${t.server},${t.port}`),r.appendIfPresent(`,${t.username}`,"username"),r.appendIfPresent(`,"${t.password}"`,"password"),r.appendIfPresent(`,over-tls=${t.tls}`,"tls"),r.appendIfPresent(`,sni=${t.sni}`,"sni"),r.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),r.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),t["block-quic"]==="on"?r.append(",block-quic=true"):t["block-quic"]==="off"&&r.append(",block-quic=false"),t.udp&&r.append(",udp=true");let n=wu[t["ip-version"]]||t["ip-version"];return r.appendIfPresent(`,ip-mode=${n}`,"ip-version"),r.toString()}function Ek(t){Array.isArray(t.peers)&&t.peers.length>0&&(t.server=t.peers[0].server,t.port=t.peers[0].port,t.ip=t.peers[0].ip,t.ipv6=t.peers[0].ipv6,t["public-key"]=t.peers[0]["public-key"],t["preshared-key"]=t.peers[0]["pre-shared-key"],t["allowed-ips"]=t.peers[0]["allowed-ips"],t.reserved=t.peers[0].reserved);let r=new mt(t);if(r.append(`${t.name}=wireguard`),r.appendIfPresent(`,interface-ip=${t.ip}`,"ip"),r.appendIfPresent(`,interface-ipv6=${t.ipv6}`,"ipv6"),r.appendIfPresent(`,private-key="${t["private-key"]}"`,"private-key"),r.appendIfPresent(`,mtu=${t.mtu}`,"mtu"),t.dns&&Array.isArray(t.dns)){t.dnsv6=t.dns.find(m=>Mr(m));let g=t.dns.find(m=>Yr(m));g||(g=t.dns.find(m=>!Yr(m)&&!Mr(m))),t.dns=g}r.appendIfPresent(`,dns=${t.dns}`,"dns"),r.appendIfPresent(`,dnsv6=${t.dnsv6}`,"dnsv6"),r.appendIfPresent(`,keepalive=${t["persistent-keepalive"]}`,"persistent-keepalive"),r.appendIfPresent(`,keepalive=${t.keepalive}`,"keepalive");let n=Array.isArray(t["allowed-ips"])?t["allowed-ips"].join(","):t["allowed-ips"],i=Array.isArray(t.reserved)?t.reserved.join(","):t.reserved;i&&(i=`,reserved=[${i}]`);let u=t["preshared-key"]??t["pre-shared-key"];u&&(u=`,preshared-key="${u}"`),r.append(`,peers=[{public-key="${t["public-key"]}",allowed-ips="${n??"0.0.0.0/0,::/0"}",endpoint=${t.server}:${t.port}${i??""}${u??""}}]`);let p=wu[t["ip-version"]]||t["ip-version"];return r.appendIfPresent(`,ip-mode=${p}`,"ip-version"),t["block-quic"]==="on"?r.append(",block-quic=true"):t["block-quic"]==="off"&&r.append(",block-quic=false"),r.toString()}function Ak(t){if(t["obfs-password"]&&t.obfs!="salamander")throw new Error("only salamander obfs is supported");let r=new mt(t);r.append(`${t.name}=Hysteria2,${t.server},${t.port}`),r.appendIfPresent(`,"${t.password}"`,"password"),r.appendIfPresent(`,tls-name=${t.sni}`,"sni"),r.appendIfPresent(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),r.appendIfPresent(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),r.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),t["obfs-password"]&&t.obfs=="salamander"&&r.append(`,salamander-password=${t["obfs-password"]}`),r.appendIfPresent(`,fast-open=${t.tfo}`,"tfo"),t["block-quic"]==="on"?r.append(",block-quic=true"):t["block-quic"]==="off"&&r.append(",block-quic=false"),t.udp&&r.append(",udp=true"),r.appendIfPresent(`,download-bandwidth=${`${t.down}`.match(/\d+/)?.[0]||0}`,"down"),r.appendIfPresent(`,ecn=${t.ecn}`,"ecn");let n=wu[t["ip-version"]]||t["ip-version"];return r.appendIfPresent(`,ip-mode=${n}`,"ip-version"),r.toString()}var _X=tn(Z6());function Q6(t){let r="none",n=t["reality-opts"],i="",u="",p="";if(n){r="reality";let j=t["reality-opts"]?.["public-key"];j&&(u=`&pbk=${encodeURIComponent(j)}`);let it=t["reality-opts"]?.["short-id"];it&&(i=`&sid=${encodeURIComponent(it)}`);let ot=t["reality-opts"]?.["_spider-x"];ot&&(p=`&spx=${encodeURIComponent(ot)}`)}else t.tls&&(r="tls");let g="";t.alpn&&(g=`&alpn=${encodeURIComponent(Array.isArray(t.alpn)?t.alpn:t.alpn.join(","))}`);let m="";t["skip-cert-verify"]&&(m="&allowInsecure=1");let A="";t.sni&&(A=`&sni=${encodeURIComponent(t.sni)}`);let y="";t["client-fingerprint"]&&(y=`&fp=${encodeURIComponent(t["client-fingerprint"])}`);let D="";t.flow&&(D=`&flow=${encodeURIComponent(t.flow)}`);let o="";t._extra&&(o=`&extra=${encodeURIComponent(t._extra)}`);let M="";t._mode&&(M=`&mode=${encodeURIComponent(t._mode)}`);let W=t.network;t.network==="ws"&&t["ws-opts"]?.["v2ray-http-upgrade"]&&(W="httpupgrade");let w=`&type=${encodeURIComponent(W)}`;if(["grpc"].includes(t.network)){w+=`&mode=${encodeURIComponent(t[`${t.network}-opts`]?.["_grpc-type"]||"gun")}`;let j=t[`${t.network}-opts`]?.["_grpc-authority"];j&&(w+=`&authority=${encodeURIComponent(j)}`)}let U=t[`${t.network}-opts`]?.[`${t.network}-service-name`],nt=t[`${t.network}-opts`]?.path,X=t[`${t.network}-opts`]?.headers?.Host;return nt&&(w+=`&path=${encodeURIComponent(Array.isArray(nt)?nt[0]:nt)}`),X&&(w+=`&host=${encodeURIComponent(Array.isArray(X)?X[0]:X)}`),U&&(w+=`&serviceName=${encodeURIComponent(U)}`),t.network==="kcp"&&(t.seed&&(w+=`&seed=${encodeURIComponent(t.seed)}`),t.headerType&&(w+=`&headerType=${encodeURIComponent(t.headerType)}`)),`vless://${t.uuid}@${t.server}:${t.port}?security=${encodeURIComponent(r)}${w}${g}${m}${A}${y}${D}${i}${p}${u}${M}${o}#${encodeURIComponent(t.name)}`}function Yl(){return{type:"SINGLE",produce:t=>{let r="";delete t.subName,delete t.collectionName,delete t.id,delete t.resolved,delete t["no-resolve"];for(let n in t)t[n]==null&&delete t[n];switch(["trojan","tuic","hysteria","hysteria2","juicity"].includes(t.type)&&delete t.tls,!["vmess"].includes(t.type)&&t.server&&Mr(t.server)&&(t.server=`[${t.server}]`),t.type){case"socks5":r=`socks://${encodeURIComponent(ft.encode(`${t.username??""}:${t.password??""}`))}@${t.server}:${t.port}#${t.name}`;break;case"ss":let n=`${t.cipher}:${t.password}`;if(r=`ss://${t.cipher?.startsWith("2022-blake3-")?`${encodeURIComponent(t.cipher)}:${encodeURIComponent(t.password)}`:ft.encode(n)}@${t.server}:${t.port}${t.plugin?"/":""}`,t.plugin){r+="?plugin=";let yt=t["plugin-opts"];switch(t.plugin){case"obfs":r+=encodeURIComponent(`simple-obfs;obfs=${yt.mode}${yt.host?";obfs-host="+yt.host:""}`);break;case"v2ray-plugin":r+=encodeURIComponent(`v2ray-plugin;obfs=${yt.mode}${yt.host?";obfs-host"+yt.host:""}${yt.tls?";tls":""}`);break;case"shadow-tls":r+=encodeURIComponent(`shadow-tls;host=${yt.host};password=${yt.password};version=${yt.version}`);break;default:throw new Error(`Unsupported plugin option: ${t.plugin}`)}}t["udp-over-tcp"]&&(r=`${r}${t.plugin?"&":"?"}uot=1`),t.tfo&&(r=`${r}${t.plugin||t["udp-over-tcp"]?"&":"?"}tfo=1`),r+=`#${encodeURIComponent(t.name)}`;break;case"ssr":r=`${t.server}:${t.port}:${t.protocol}:${t.cipher}:${t.obfs}:${ft.encode(t.password)}/`,r+=`?remarks=${ft.encode(t.name)}${t["obfs-param"]?"&obfsparam="+ft.encode(t["obfs-param"]):""}${t["protocol-param"]?"&protocolparam="+ft.encode(t["protocol-param"]):""}`,r="ssr://"+ft.encode(r);break;case"vmess":let i="",u=t.network||"tcp";if(t.network==="http"?(u="tcp",i="http"):t.network==="ws"&&t["ws-opts"]?.["v2ray-http-upgrade"]&&(u="httpupgrade"),r={v:"2",ps:t.name,add:t.server,port:`${t.port}`,id:t.uuid,aid:`${t.alterId||0}`,scy:t.cipher,net:u,type:i,tls:t.tls?"tls":"",alpn:Array.isArray(t.alpn)?t.alpn.join(","):t.alpn,fp:t["client-fingerprint"]},t.tls&&t.sni&&(r.sni=t.sni),t.network){let yt=t[`${t.network}-opts`]?.path,Rt=t[`${t.network}-opts`]?.headers?.Host;["grpc"].includes(t.network)?(r.path=t[`${t.network}-opts`]?.["grpc-service-name"],r.type=t[`${t.network}-opts`]?.["_grpc-type"]||"gun",r.host=t[`${t.network}-opts`]?.["_grpc-authority"]):["kcp","quic"].includes(t.network)?(r.type=t[`${t.network}-opts`]?.[`_${t.network}-type`]||"none",r.host=t[`${t.network}-opts`]?.[`_${t.network}-host`],r.path=t[`${t.network}-opts`]?.[`_${t.network}-path`]):(yt&&(r.path=Array.isArray(yt)?yt[0]:yt),Rt&&(r.host=Array.isArray(Rt)?Rt[0]:Rt))}r="vmess://"+ft.encode(JSON.stringify(r));break;case"vless":r=Q6(t);break;case"trojan":let p="";if(t.network){let yt=t.network;if(t.network==="ws"&&t["ws-opts"]?.["v2ray-http-upgrade"]&&(yt="httpupgrade"),p=`&type=${encodeURIComponent(yt)}`,["grpc"].includes(t.network)){let vt=t[`${t.network}-opts`]?.[`${t.network}-service-name`],Ft=t[`${t.network}-opts`]?.["_grpc-authority"];vt&&(p+=`&serviceName=${encodeURIComponent(vt)}`),Ft&&(p+=`&authority=${encodeURIComponent(Ft)}`),p+=`&mode=${encodeURIComponent(t[`${t.network}-opts`]?.["_grpc-type"]||"gun")}`}let Rt=t[`${t.network}-opts`]?.path,Et=t[`${t.network}-opts`]?.headers?.Host;Rt&&(p+=`&path=${encodeURIComponent(Array.isArray(Rt)?Rt[0]:Rt)}`),Et&&(p+=`&host=${encodeURIComponent(Array.isArray(Et)?Et[0]:Et)}`)}let g="";t["client-fingerprint"]&&(g=`&fp=${encodeURIComponent(t["client-fingerprint"])}`);let m="";t.alpn&&(m=`&alpn=${encodeURIComponent(Array.isArray(t.alpn)?t.alpn:t.alpn.join(","))}`);let A=t["reality-opts"],y="",D="",o="",M="",W="",w="";if(A){M="&security=reality";let yt=t["reality-opts"]?.["public-key"];yt&&(D=`&pbk=${encodeURIComponent(yt)}`);let Rt=t["reality-opts"]?.["short-id"];Rt&&(y=`&sid=${encodeURIComponent(Rt)}`);let Et=t["reality-opts"]?.["_spider-x"];Et&&(o=`&spx=${encodeURIComponent(Et)}`),t._extra&&(w=`&extra=${encodeURIComponent(t._extra)}`),t._mode&&(W=`&mode=${encodeURIComponent(t._mode)}`)}r=`trojan://${t.password}@${t.server}:${t.port}?sni=${encodeURIComponent(t.sni||t.server)}${t["skip-cert-verify"]?"&allowInsecure=1":""}${p}${m}${g}${M}${y}${D}${o}${W}${w}#${encodeURIComponent(t.name)}`;break;case"hysteria2":let U=[];t["hop-interval"]&&U.push(`hop-interval=${t["hop-interval"]}`),t.keepalive&&U.push(`keepalive=${t.keepalive}`),t["skip-cert-verify"]&&U.push("insecure=1"),t.obfs&&(U.push(`obfs=${encodeURIComponent(t.obfs)}`),t["obfs-password"]&&U.push(`obfs-password=${encodeURIComponent(t["obfs-password"])}`)),t.sni&&U.push(`sni=${encodeURIComponent(t.sni)}`),t.ports&&U.push(`mport=${t.ports}`),t["tls-fingerprint"]&&U.push(`pinSHA256=${encodeURIComponent(t["tls-fingerprint"])}`),t.tfo&&U.push("fastopen=1"),r=`hysteria2://${encodeURIComponent(t.password)}@${t.server}:${t.port}?${U.join("&")}#${encodeURIComponent(t.name)}`;break;case"hysteria":let nt=[];Object.keys(t).forEach(yt=>{if(!["name","type","server","port"].includes(yt)){let Rt=yt.replace(/-/,"_");["alpn"].includes(yt)?t[yt]&&nt.push(`${Rt}=${encodeURIComponent(Array.isArray(t[yt])?t[yt][0]:t[yt])}`):["skip-cert-verify"].includes(yt)?t[yt]&&nt.push("insecure=1"):["tfo","fast-open"].includes(yt)?t[yt]&&!nt.includes("fastopen=1")&&nt.push("fastopen=1"):["ports"].includes(yt)?nt.push(`mport=${t[yt]}`):["auth-str"].includes(yt)?nt.push(`auth=${t[yt]}`):["up"].includes(yt)?nt.push(`upmbps=${t[yt]}`):["down"].includes(yt)?nt.push(`downmbps=${t[yt]}`):["_obfs"].includes(yt)?nt.push(`obfs=${t[yt]}`):["obfs"].includes(yt)?nt.push(`obfsParam=${t[yt]}`):["sni"].includes(yt)?nt.push(`peer=${t[yt]}`):t[yt]&&!/^_/i.test(yt)&&nt.push(`${Rt}=${encodeURIComponent(t[yt])}`)}}),r=`hysteria://${t.server}:${t.port}?${nt.join("&")}#${encodeURIComponent(t.name)}`;break;case"tuic":if(!t.token||t.token.length===0){let yt=[];Object.keys(t).forEach(Rt=>{if(!["name","type","uuid","password","server","port","tls"].includes(Rt)){let Et=Rt.replace(/-/,"_");["alpn"].includes(Rt)?t[Rt]&&yt.push(`${Et}=${encodeURIComponent(Array.isArray(t[Rt])?t[Rt][0]:t[Rt])}`):["skip-cert-verify"].includes(Rt)?t[Rt]&&yt.push("allow_insecure=1"):["tfo","fast-open"].includes(Rt)?t[Rt]&&!yt.includes("fast_open=1")&&yt.push("fast_open=1"):["disable-sni","reduce-rtt"].includes(Rt)&&t[Rt]?yt.push(`${Et.replace(/-/g,"_")}=1`):["congestion-controller"].includes(Rt)?yt.push(`congestion_control=${t[Rt]}`):t[Rt]&&!/^_/i.test(Rt)&&yt.push(`${Et.replace(/-/g,"_")}=${encodeURIComponent(t[Rt])}`)}}),r=`tuic://${encodeURIComponent(t.uuid)}:${encodeURIComponent(t.password)}@${t.server}:${t.port}?${yt.join("&")}#${encodeURIComponent(t.name)}`}break;case"anytls":r=Q6({...t,uuid:t.password,network:t.network||"tcp"}).replace("vless","anytls");let X=[];Object.keys(t).forEach(yt=>{if(!["name","type","password","server","port","tls"].includes(yt)){let Rt=yt.replace(/-/,"_");["alpn"].includes(yt)?t[yt]&&X.push(`${Rt}=${encodeURIComponent(Array.isArray(t[yt])?t[yt][0]:t[yt])}`):["skip-cert-verify"].includes(yt)?t[yt]&&X.push("insecure=1"):["udp"].includes(yt)?t[yt]&&X.push("udp=1"):t[yt]&&!/^_|client-fingerprint/i.test(yt)&&["number","string","boolean"].includes(typeof t[yt])&&X.push(`${Rt.replace(/-/g,"_")}=${encodeURIComponent(t[yt])}`)}});let j=r.split("?"),it=j[0],ot={};j.length>1&&j[1].split("#")[0].split("&").forEach(yt=>{let[Rt,Et]=yt.split("=");Rt&&(ot[Rt]=Et)}),X.forEach(yt=>{let[Rt,Et]=yt.split("=");Rt&&(ot[Rt]=Et)});let K=Object.keys(ot).map(yt=>`${yt}=${ot[yt]}`).join("&"),H=r.match(/#(.*)$/),q=H?`#${H[1]}`:"";r=`${it}?${K}${q}`;break;case"wireguard":let pt=[];Object.keys(t).forEach(yt=>{["name","type","server","port","ip","ipv6","private-key"].includes(yt)||(["public-key"].includes(yt)?pt.push(`publickey=${t[yt]}`):["udp"].includes(yt)?t[yt]&&pt.push(`${yt}=1`):t[yt]&&!/^_/i.test(yt)&&pt.push(`${yt}=${encodeURIComponent(t[yt])}`))}),t.ip&&t.ipv6?pt.push(`address=${t.ip}/32,${t.ipv6}/128`):t.ip?pt.push(`address=${t.ip}/32`):t.ipv6&&pt.push(`address=${t.ipv6}/128`),r=`wireguard://${encodeURIComponent(t["private-key"])}@${t.server}:${t.port}/?${pt.join("&")}#${encodeURIComponent(t.name)}`;break}return r}}}var kM=Yl();function Th(){return{type:"ALL",produce:t=>{let r=[];return t.map(n=>{try{r.push(kM.produce(n))}catch(i){R.error(`Cannot produce proxy: ${JSON.stringify(n,null,2)}
Reason: ${i}`)}}),ft.encode(r.join(`
`))}}}var LM="QX";function Nh(){return{produce:(t,r,n={})=>{switch(t.type){case"ss":return UM(t);case"ssr":return jM(t);case"trojan":return HM(t);case"vmess":return MM(t);case"http":return VM(t);case"socks5":return KM(t);case"vless":return qM(t)}throw new Error(`Platform ${LM} does not support proxy type: ${t.type}`)}}}function UM(t){let r=new mt(t),n=r.append.bind(r),i=r.appendIfPresent.bind(r);if(t.cipher||(t.cipher="none"),!["none","rc4-md5","rc4-md5-6","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","cast5-cfb","des-cfb","rc2-cfb","salsa20","chacha20","chacha20-ietf","aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(t.cipher))throw new Error(`cipher ${t.cipher} is not supported`);if(n(`shadowsocks=${t.server}:${t.port}`),n(`,method=${t.cipher}`),n(`,password=${t.password}`),ts(t)&&(t.tls=!0),ue(t,"plugin")){if(t.plugin==="obfs"){let u=t["plugin-opts"];n(`,obfs=${u.mode}`)}else if(t.plugin==="v2ray-plugin"&&t["plugin-opts"].mode==="websocket")t["plugin-opts"].tls?n(",obfs=wss"):n(",obfs=ws");else throw new Error("plugin is not supported");i(`,obfs-host=${t["plugin-opts"].host}`,"plugin-opts.host"),i(`,obfs-uri=${t["plugin-opts"].path}`,"plugin-opts.path")}return ts(t)&&(i(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),i(`,tls-alpn=${t["tls-alpn"]}`,"tls-alpn"),i(`,tls-no-session-ticket=${t["tls-no-session-ticket"]}`,"tls-no-session-ticket"),i(`,tls-no-session-reuse=${t["tls-no-session-reuse"]}`,"tls-no-session-reuse"),i(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),i(`,tls-verification=${!t["skip-cert-verify"]}`,"skip-cert-verify"),i(`,tls-host=${t.sni}`,"sni")),i(`,fast-open=${t.tfo}`,"tfo"),i(`,udp-relay=${t.udp}`,"udp"),t._ssr_python_uot?n(",udp-over-tcp=true"):t["udp-over-tcp"]&&(!t["udp-over-tcp-version"]||t["udp-over-tcp-version"]===1?n(",udp-over-tcp=sp.v1"):t["udp-over-tcp-version"]===2&&n(",udp-over-tcp=sp.v2")),r.appendIfPresent(`,server_check_url=${t["test-url"]}`,"test-url"),n(`,tag=${t.name}`),r.toString()}function jM(t){let r=new mt(t),n=r.append.bind(r),i=r.appendIfPresent.bind(r);return n(`shadowsocks=${t.server}:${t.port}`),n(`,method=${t.cipher}`),n(`,password=${t.password}`),n(`,ssr-protocol=${t.protocol}`),i(`,ssr-protocol-param=${t["protocol-param"]}`,"protocol-param"),i(`,obfs=${t.obfs}`,"obfs"),i(`,obfs-host=${t["obfs-param"]}`,"obfs-param"),i(`,fast-open=${t.tfo}`,"tfo"),i(`,udp-relay=${t.udp}`,"udp"),r.appendIfPresent(`,server_check_url=${t["test-url"]}`,"test-url"),n(`,tag=${t.name}`),r.toString()}function HM(t){let r=new mt(t),n=r.append.bind(r),i=r.appendIfPresent.bind(r);if(n(`trojan=${t.server}:${t.port}`),n(`,password=${t.password}`),ue(t,"network"))if(t.network==="ws")ts(t)?n(",obfs=wss"):n(",obfs=ws"),i(`,obfs-uri=${t["ws-opts"]?.path}`,"ws-opts.path"),i(`,obfs-host=${t["ws-opts"]?.headers?.Host}`,"ws-opts.headers.Host");else throw new Error(`network ${t.network} is unsupported`);return t.network!=="ws"&&ts(t)&&n(",over-tls=true"),ts(t)&&(i(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),i(`,tls-alpn=${t["tls-alpn"]}`,"tls-alpn"),i(`,tls-no-session-ticket=${t["tls-no-session-ticket"]}`,"tls-no-session-ticket"),i(`,tls-no-session-reuse=${t["tls-no-session-reuse"]}`,"tls-no-session-reuse"),i(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),i(`,tls-verification=${!t["skip-cert-verify"]}`,"skip-cert-verify"),i(`,tls-host=${t.sni}`,"sni")),i(`,fast-open=${t.tfo}`,"tfo"),i(`,udp-relay=${t.udp}`,"udp"),r.appendIfPresent(`,server_check_url=${t["test-url"]}`,"test-url"),n(`,tag=${t.name}`),r.toString()}function MM(t){let r=new mt(t),n=r.append.bind(r),i=r.appendIfPresent.bind(r);n(`vmess=${t.server}:${t.port}`);let u;if(t.cipher==="auto"?u="chacha20-ietf-poly1305":u=t.cipher,n(`,method=${u}`),n(`,password=${t.uuid}`),ts(t)&&(t.tls=!0),ue(t,"network")){if(t.network==="ws")t.tls?n(",obfs=wss"):n(",obfs=ws");else if(t.network==="http")n(",obfs=http");else throw new Error(`network ${t.network} is unsupported`);let p=t[`${t.network}-opts`]?.path,g=t[`${t.network}-opts`]?.headers?.Host;i(`,obfs-uri=${Array.isArray(p)?p[0]:p}`,`${t.network}-opts.path`),i(`,obfs-host=${Array.isArray(g)?g[0]:g}`,`${t.network}-opts.headers.Host`)}else t.tls&&n(",obfs=over-tls");return ts(t)&&(i(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),i(`,tls-alpn=${t["tls-alpn"]}`,"tls-alpn"),i(`,tls-no-session-ticket=${t["tls-no-session-ticket"]}`,"tls-no-session-ticket"),i(`,tls-no-session-reuse=${t["tls-no-session-reuse"]}`,"tls-no-session-reuse"),i(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),i(`,tls-verification=${!t["skip-cert-verify"]}`,"skip-cert-verify"),i(`,tls-host=${t.sni}`,"sni")),ue(t,"aead")?n(`,aead=${t.aead}`):n(`,aead=${t.alterId===0}`),i(`,fast-open=${t.tfo}`,"tfo"),i(`,udp-relay=${t.udp}`,"udp"),r.appendIfPresent(`,server_check_url=${t["test-url"]}`,"test-url"),n(`,tag=${t.name}`),r.toString()}function qM(t){if(typeof t.flow<"u"||t["reality-opts"])throw new Error("VLESS XTLS/REALITY is not supported");let r=new mt(t),n=r.append.bind(r),i=r.appendIfPresent.bind(r);if(n(`vless=${t.server}:${t.port}`),n(",method=none"),n(`,password=${t.uuid}`),ts(t)&&(t.tls=!0),ue(t,"network")){if(t.network==="ws")t.tls?n(",obfs=wss"):n(",obfs=ws");else if(t.network==="http")n(",obfs=http");else if(["tcp"].includes(t.network))t.tls&&n(",obfs=over-tls");else if(!["tcp"].includes(t.network))throw new Error(`network ${t.network} is unsupported`);let u=t[`${t.network}-opts`]?.path,p=t[`${t.network}-opts`]?.headers?.Host;i(`,obfs-uri=${Array.isArray(u)?u[0]:u}`,`${t.network}-opts.path`),i(`,obfs-host=${Array.isArray(p)?p[0]:p}`,`${t.network}-opts.headers.Host`)}else t.tls&&n(",obfs=over-tls");return ts(t)&&(i(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),i(`,tls-alpn=${t["tls-alpn"]}`,"tls-alpn"),i(`,tls-no-session-ticket=${t["tls-no-session-ticket"]}`,"tls-no-session-ticket"),i(`,tls-no-session-reuse=${t["tls-no-session-reuse"]}`,"tls-no-session-reuse"),i(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),i(`,tls-verification=${!t["skip-cert-verify"]}`,"skip-cert-verify"),i(`,tls-host=${t.sni}`,"sni")),i(`,fast-open=${t.tfo}`,"tfo"),i(`,udp-relay=${t.udp}`,"udp"),r.appendIfPresent(`,server_check_url=${t["test-url"]}`,"test-url"),n(`,tag=${t.name}`),r.toString()}function VM(t){let r=new mt(t),n=r.append.bind(r),i=r.appendIfPresent.bind(r);return n(`http=${t.server}:${t.port}`),i(`,username=${t.username}`,"username"),i(`,password=${t.password}`,"password"),ts(t)&&(t.tls=!0),i(`,over-tls=${t.tls}`,"tls"),ts(t)&&(i(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),i(`,tls-alpn=${t["tls-alpn"]}`,"tls-alpn"),i(`,tls-no-session-ticket=${t["tls-no-session-ticket"]}`,"tls-no-session-ticket"),i(`,tls-no-session-reuse=${t["tls-no-session-reuse"]}`,"tls-no-session-reuse"),i(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),i(`,tls-verification=${!t["skip-cert-verify"]}`,"skip-cert-verify"),i(`,tls-host=${t.sni}`,"sni")),i(`,fast-open=${t.tfo}`,"tfo"),i(`,udp-relay=${t.udp}`,"udp"),r.appendIfPresent(`,server_check_url=${t["test-url"]}`,"test-url"),n(`,tag=${t.name}`),r.toString()}function KM(t){let r=new mt(t),n=r.append.bind(r),i=r.appendIfPresent.bind(r);return n(`socks5=${t.server}:${t.port}`),i(`,username=${t.username}`,"username"),i(`,password=${t.password}`,"password"),ts(t)&&(t.tls=!0),i(`,over-tls=${t.tls}`,"tls"),ts(t)&&(i(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),i(`,tls-alpn=${t["tls-alpn"]}`,"tls-alpn"),i(`,tls-no-session-ticket=${t["tls-no-session-ticket"]}`,"tls-no-session-ticket"),i(`,tls-no-session-reuse=${t["tls-no-session-reuse"]}`,"tls-no-session-reuse"),i(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),i(`,tls-verification=${!t["skip-cert-verify"]}`,"skip-cert-verify"),i(`,tls-host=${t.sni}`,"sni")),i(`,fast-open=${t.tfo}`,"tfo"),i(`,udp-relay=${t.udp}`,"udp"),r.appendIfPresent(`,server_check_url=${t["test-url"]}`,"test-url"),n(`,tag=${t.name}`),r.toString()}function ts(t){return t.tls}function kh(){return{type:"ALL",produce:(t,r,n={})=>{let i=t.filter(u=>n["include-unsupported-proxy"]?!0:u.type==="snell"&&u.version>=4?!1:!["mieru"].includes(u.type)).map(u=>{if(u.type==="vmess")ue(u,"aead")&&(u.aead&&(u.alterId=0),delete u.aead),ue(u,"sni")&&(u.servername=u.sni,delete u.sni),ue(u,"cipher")&&!["auto","none","zero","aes-128-gcm","chacha20-poly1305"].includes(u.cipher)&&(u.cipher="auto");else if(u.type==="tuic")ue(u,"alpn")?u.alpn=Array.isArray(u.alpn)?u.alpn:[u.alpn]:u.alpn=["h3"],ue(u,"tfo")&&!ue(u,"fast-open")&&(u["fast-open"]=u.tfo),(!u.token||u.token.length===0)&&!ue(u,"version")&&(u.version=5);else if(u.type==="hysteria")ue(u,"auth_str")&&!ue(u,"auth-str")&&(u["auth-str"]=u.auth_str),ue(u,"alpn")&&(u.alpn=Array.isArray(u.alpn)?u.alpn:[u.alpn]),ue(u,"tfo")&&!ue(u,"fast-open")&&(u["fast-open"]=u.tfo);else if(u.type==="hysteria2")u["obfs-password"]&&u.obfs=="salamander"&&(u.obfs=u["obfs-password"],delete u["obfs-password"]),ue(u,"alpn")&&(u.alpn=Array.isArray(u.alpn)?u.alpn:[u.alpn]),ue(u,"tfo")&&!ue(u,"fast-open")&&(u["fast-open"]=u.tfo);else if(u.type==="wireguard")u.keepalive=u.keepalive??u["persistent-keepalive"],u["persistent-keepalive"]=u.keepalive,u["preshared-key"]=u["preshared-key"]??u["pre-shared-key"],u["pre-shared-key"]=u["preshared-key"];else if(u.type==="snell"&&u.version<3)delete u.udp;else if(u.type==="vless")ue(u,"sni")&&(u.servername=u.sni,delete u.sni);else if(u.type==="ss")ue(u,"shadow-tls-password")&&!ue(u,"plugin")&&(u.plugin="shadow-tls",u["plugin-opts"]={host:u["shadow-tls-sni"],password:u["shadow-tls-password"],version:u["shadow-tls-version"]},delete u["shadow-tls-password"],delete u["shadow-tls-sni"],delete u["shadow-tls-version"]);else if(["anytls"].includes(u.type)&&u.network&&(!["tcp"].includes(u.network)||["tcp"].includes(u.network)&&u["reality-opts"]))return!1;if(["vmess","vless"].includes(u.type)&&u.network==="http"){let p=u["http-opts"]?.path;ue(u,"http-opts.path")&&!Array.isArray(p)&&(u["http-opts"].path=[p]);let g=u["http-opts"]?.headers?.Host;ue(u,"http-opts.headers.Host")&&!Array.isArray(g)&&(u["http-opts"].headers.Host=[g])}if(["vmess","vless"].includes(u.type)&&u.network==="h2"){let p=u["h2-opts"]?.path;ue(u,"h2-opts.path")&&Array.isArray(p)&&(u["h2-opts"].path=p[0]);let g=u["h2-opts"]?.headers?.host;ue(u,"h2-opts.headers.Host")&&!Array.isArray(g)&&(u["h2-opts"].headers.host=[g])}if(["ws"].includes(u.network)){let p=u[`${u.network}-opts`]?.path;if(p){let g=/^(.*?)(?:\?ed=(\d+))?$/,[m,A="",y=""]=g.exec(p);u[`${u.network}-opts`].path=A,y!==""&&(u["ws-opts"]["early-data-header-name"]="Sec-WebSocket-Protocol",u["ws-opts"]["max-early-data"]=parseInt(y,10))}else u[`${u.network}-opts`]=u[`${u.network}-opts`]||{},u[`${u.network}-opts`].path="/"}if(u["plugin-opts"]?.tls&&ue(u,"skip-cert-verify")&&(u["plugin-opts"]["skip-cert-verify"]=u["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2","juicity","anytls"].includes(u.type)&&delete u.tls,u["tls-fingerprint"]&&(u.fingerprint=u["tls-fingerprint"]),delete u["tls-fingerprint"],u["underlying-proxy"]&&(u["dialer-proxy"]=u["underlying-proxy"]),delete u["underlying-proxy"],ue(u,"tls")&&typeof u.tls!="boolean"&&delete u.tls,delete u.subName,delete u.collectionName,delete u.id,delete u.resolved,delete u["no-resolve"],r!=="internal")for(let p in u)(u[p]==null||/^_/i.test(p))&&delete u[p];return["grpc"].includes(u.network)&&u[`${u.network}-opts`]&&(delete u[`${u.network}-opts`]["_grpc-type"],delete u[`${u.network}-opts`]["_grpc-authority"]),u});return r==="internal"?i:`proxies:
`+i.map(u=>"  - "+JSON.stringify(u)+`
`).join("")}}}var zM="Surfboard";function $p(){return{produce:t=>{switch(t.name=t.name.replace(/=|,/g,""),t.type){case"ss":return GM(t);case"trojan":return YM(t);case"vmess":return WM(t);case"http":return XM(t);case"socks5":return JM(t);case"wireguard-surge":return ZM(t)}throw new Error(`Platform ${zM} does not support proxy type: ${t.type}`)}}}function GM(t){let r=new mt(t);if(r.append(`${t.name}=${t.type},${t.server},${t.port}`),!["aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","rc4","rc4-md5","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","salsa20","chacha20","chacha20-ietf"].includes(t.cipher))throw new Error(`cipher ${t.cipher} is not supported`);if(r.append(`,encrypt-method=${t.cipher}`),r.appendIfPresent(`,password=${t.password}`,"password"),ue(t,"plugin"))if(t.plugin==="obfs")r.append(`,obfs=${t["plugin-opts"].mode}`),r.appendIfPresent(`,obfs-host=${t["plugin-opts"].host}`,"plugin-opts.host"),r.appendIfPresent(`,obfs-uri=${t["plugin-opts"].path}`,"plugin-opts.path");else throw new Error(`plugin ${t.plugin} is not supported`);return r.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),r.toString()}function YM(t){let r=new mt(t);return r.append(`${t.name}=${t.type},${t.server},${t.port}`),r.appendIfPresent(`,password=${t.password}`,"password"),eF(r,t),r.appendIfPresent(`,tls=${t.tls}`,"tls"),r.appendIfPresent(`,sni=${t.sni}`,"sni"),r.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),r.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),r.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),r.toString()}function WM(t){let r=new mt(t);return r.append(`${t.name}=${t.type},${t.server},${t.port}`),r.appendIfPresent(`,username=${t.uuid}`,"uuid"),eF(r,t),ue(t,"aead")?r.append(`,vmess-aead=${t.aead}`):r.append(`,vmess-aead=${t.alterId===0}`),r.appendIfPresent(`,tls=${t.tls}`,"tls"),r.appendIfPresent(`,sni=${t.sni}`,"sni"),r.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),r.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),r.toString()}function XM(t){let r=new mt(t),n=t.tls?"https":"http";return r.append(`${t.name}=${n},${t.server},${t.port}`),r.appendIfPresent(`,${t.username}`,"username"),r.appendIfPresent(`,${t.password}`,"password"),r.appendIfPresent(`,sni=${t.sni}`,"sni"),r.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),r.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),r.toString()}function JM(t){let r=new mt(t),n=t.tls?"socks5-tls":"socks5";return r.append(`${t.name}=${n},${t.server},${t.port}`),r.appendIfPresent(`,${t.username}`,"username"),r.appendIfPresent(`,${t.password}`,"password"),r.appendIfPresent(`,sni=${t.sni}`,"sni"),r.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),r.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),r.toString()}function ZM(t){let r=new mt(t);return r.append(`${t.name}=wireguard`),r.appendIfPresent(`,section-name=${t["section-name"]}`,"section-name"),r.toString()}function eF(t,r){if(ue(r,"network"))if(r.network==="ws"){if(t.append(",ws=true"),ue(r,"ws-opts")&&(t.appendIfPresent(`,ws-path=${r["ws-opts"].path}`,"ws-opts.path"),ue(r,"ws-opts.headers"))){let n=r["ws-opts"].headers,i=Object.keys(n).map(u=>{let p=n[u];return["Host"].includes(u)&&(p=`"${p}"`),`${u}:${p}`}).join("|");oa(i)&&t.append(`,ws-headers=${i}`)}}else throw new Error(`network ${r.network} is unsupported`)}var QM={ipv4:"ipv4_only",ipv6:"ipv6_only","v4-only":"ipv4_only","v6-only":"ipv6_only","ipv4-prefer":"prefer_ipv4","ipv6-prefer":"prefer_ipv6","prefer-v4":"prefer_ipv4","prefer-v6":"prefer_ipv6"},Ti=(t,r)=>{let n=QM[t["ip-version"]];t._dns_server&&n&&(r.domain_resolver={server:t._dns_server,strategy:n})},Ni=(t,r)=>{r.detour=t["dialer-proxy"]||t.detour},Pa=(t,r)=>{["tcp","udp"].includes(t._network)&&(r.network=t._network)},rs=(t,r)=>{r.tcp_fast_open=!1,t.tfo&&(r.tcp_fast_open=!0),t.tcp_fast_open&&(r.tcp_fast_open=!0),t["tcp-fast-open"]&&(r.tcp_fast_open=!0),r.tcp_fast_open||delete r.tcp_fast_open},Oa=(t,r)=>{!t||!t.enabled||(r.multiplex={enabled:!0},r.multiplex.protocol=t.protocol,t["max-connections"]&&(r.multiplex.max_connections=parseInt(`${t["max-connections"]}`,10)),t["max-streams"]&&(r.multiplex.max_streams=parseInt(`${t["max-streams"]}`,10)),t["min-streams"]&&(r.multiplex.min_streams=parseInt(`${t["min-streams"]}`,10)),t.padding&&(r.multiplex.padding=!0),(t["brutal-opts"]?.up||t["brutal-opts"]?.down)&&(r.multiplex.brutal={enabled:!0},t["brutal-opts"]?.up&&(r.multiplex.brutal.up_mbps=parseInt(`${t["brutal-opts"]?.up}`,10)),t["brutal-opts"]?.down&&(r.multiplex.brutal.down_mbps=parseInt(`${t["brutal-opts"]?.down}`,10))))},$2=(t,r)=>{let n={type:"ws",headers:{}};if(t["ws-opts"]){let{path:i="",headers:u={},"max-early-data":p,"early-data-header-name":g}=t["ws-opts"];if(n.early_data_header_name=g,n.max_early_data=parseInt(p,10),i!==""&&(n.path=`${i}`),Object.keys(u).length>0){let m={};for(let y of Object.keys(u)){let D=u[y];D!==""&&(Array.isArray(D)||(D=[`${D}`]),D.length>0&&(m[y]=D))}let{Host:A}=m;if(A.length===1)for(let y of`Host:${A[0]}`.split(`
`)){let[D,o]=y.split(":");o.trim()!==""&&(m[D.trim()]=o.trim().split(","))}n.headers=m}}if(t["ws-headers"]){let i={};for(let p of Object.keys(t["ws-headers"])){let g=t["ws-headers"][p];g!==""&&(Array.isArray(g)||(g=[`${g}`]),g.length>0&&(i[p]=g))}let{Host:u}=i;if(u.length===1)for(let p of`Host:${u[0]}`.split(`
`)){let[g,m]=p.split(":");m.trim()!==""&&(i[g.trim()]=m.trim().split(","))}for(let p of Object.keys(i))n.headers[p]=i[p]}if(t["ws-path"]&&t["ws-path"]!==""&&(n.path=`${t["ws-path"]}`),n.path){let i=/^(.*?)(?:\?ed=(\d+))?$/,[u,p="",g=""]=i.exec(n.path);n.path=p,g!==""&&(n.early_data_header_name="Sec-WebSocket-Protocol",n.max_early_data=parseInt(g,10))}r.tls.insecure&&(r.tls.server_name=n.headers.Host[0]),t["ws-opts"]&&t["ws-opts"]["v2ray-http-upgrade"]&&(n.type="httpupgrade",n.headers.Host&&(n.host=n.headers.Host[0],delete n.headers.Host),n.max_early_data&&delete n.max_early_data,n.early_data_header_name&&delete n.early_data_header_name);for(let i of Object.keys(n.headers)){let u=n.headers[i];u.length===1&&(n.headers[i]=u[0])}r.transport=n},tF=(t,r)=>{let n={type:"http",headers:{}};if(t["http-opts"]){let{method:i="",path:u="",headers:p={}}=t["http-opts"];i!==""&&(n.method=i),Array.isArray(u)?n.path=`${u[0]}`:u!==""&&(n.path=`${u}`);for(let g of Object.keys(p)){let m=p[g];if(m!==""){if(g.toLowerCase()==="host"){let A=m;Array.isArray(A)||(A=`${A}`.split(",").map(y=>y.trim())),A.length>0&&(n.host=A);continue}Array.isArray(m)||(m=`${m}`.split(",").map(A=>A.trim())),m.length>0&&(n.headers[g]=m)}}}if(t["http-host"]&&t["http-host"]!==""){let i=t["http-host"];Array.isArray(i)||(i=`${i}`.split(",").map(u=>u.trim())),i.length>0&&(n.host=i)}if(t["http-path"]&&t["http-path"]!==""){let i=t["http-path"];Array.isArray(i)?n.path=`${i[0]}`:i!==""&&(n.path=`${i}`)}r.tls.insecure&&(r.tls.server_name=n.host[0]),n.host?.length===1&&(n.host=n.host[0]);for(let i of Object.keys(n.headers)){let u=n.headers[i];u.length===1&&(n.headers[i]=u[0])}r.transport=n},rF=(t,r)=>{let n={type:"http"};if(t["h2-opts"]){let{host:i="",path:u=""}=t["h2-opts"];u!==""&&(n.path=`${u}`),i!==""&&(Array.isArray(i)||(i=`${i}`.split(",").map(p=>p.trim())),i.length>0&&(n.host=i))}if(t["h2-host"]&&t["h2-host"]!==""){let i=t["h2-host"];Array.isArray(i)||(i=`${i}`.split(",").map(u=>u.trim())),i.length>0&&(n.host=i)}t["h2-path"]&&t["h2-path"]!==""&&(n.path=`${t["h2-path"]}`),r.tls.enabled=!0,r.tls.insecure&&(r.tls.server_name=n.host[0]),n.host.length===1&&(n.host=n.host[0]),r.transport=n},R2=(t,r)=>{let n={type:"grpc"};if(t["grpc-opts"]){let i=t["grpc-opts"]["grpc-service-name"];i!=null&&i!==""&&(n.service_name=`${i}`)}r.transport=n},fo=(t,r)=>{t.tls&&(r.tls.enabled=!0),t.servername&&t.servername!==""&&(r.tls.server_name=t.servername),t.peer&&t.peer!==""&&(r.tls.server_name=t.peer),t.sni&&t.sni!==""&&(r.tls.server_name=t.sni),t["skip-cert-verify"]&&(r.tls.insecure=!0),t.insecure&&(r.tls.insecure=!0),t["disable-sni"]&&(r.tls.disable_sni=!0),typeof t.alpn=="string"?r.tls.alpn=[t.alpn]:Array.isArray(t.alpn)&&(r.tls.alpn=t.alpn),t.ca&&(r.tls.certificate_path=`${t.ca}`),t.ca_str&&(r.tls.certificate=[t.ca_str]),t["ca-str"]&&(r.tls.certificate=[t["ca-str"]]),t["reality-opts"]&&(r.tls.reality={enabled:!0},t["reality-opts"]["public-key"]&&(r.tls.reality.public_key=t["reality-opts"]["public-key"]),t["reality-opts"]["short-id"]&&(r.tls.reality.short_id=t["reality-opts"]["short-id"]),r.tls.utls={enabled:!0}),!["hysteria","hysteria2","tuic"].includes(t.type)&&t["client-fingerprint"]&&t["client-fingerprint"]!==""&&(r.tls.utls={enabled:!0,fingerprint:t["client-fingerprint"]}),r.tls.enabled||delete r.tls},eq=(t={})=>{let r={tag:t.name,type:"ssh",server:t.server,server_port:parseInt(`${t.port}`,10)};if(r.server_port<0||r.server_port>65535)throw"invalid port";return t.username&&(r.user=t.username),t.password&&(r.password=t.password),t.privateKey&&(r.private_key_path=t.privateKey),t["private-key"]&&(r.private_key_path=t["private-key"]),t["private-key-passphrase"]&&(r.private_key_passphrase=t["private-key-passphrase"]),t["server-fingerprint"]&&(r.host_key=[t["server-fingerprint"]],r.host_key_algorithms=[t["server-fingerprint"].split(" ")[0]]),t["host-key"]&&(r.host_key=t["host-key"]),t["host-key-algorithms"]&&(r.host_key_algorithms=t["host-key-algorithms"]),t["fast-open"]&&(r.udp_fragment=!0),rs(t,r),Ni(t,r),Ti(t,r),r},tq=(t={})=>{let r={tag:t.name,type:"http",server:t.server,server_port:parseInt(`${t.port}`,10),tls:{enabled:!1,server_name:t.server,insecure:!1}};if(r.server_port<0||r.server_port>65535)throw"invalid port";if(t.username&&(r.username=t.username),t.password&&(r.password=t.password),t.headers){r.headers={};for(let n of Object.keys(t.headers))r.headers[n]=`${t.headers[n]}`;Object.keys(r.headers).length===0&&delete r.headers}return t["fast-open"]&&(r.udp_fragment=!0),rs(t,r),Ni(t,r),fo(t,r),Ti(t,r),r},rq=(t={})=>{let r={tag:t.name,type:"socks",server:t.server,server_port:parseInt(`${t.port}`,10),password:t.password,version:"5"};if(r.server_port<0||r.server_port>65535)throw"invalid port";return t.username&&(r.username=t.username),t.password&&(r.password=t.password),t.uot&&(r.udp_over_tcp=!0),t["udp-over-tcp"]&&(r.udp_over_tcp=!0),t["fast-open"]&&(r.udp_fragment=!0),Pa(t,r),rs(t,r),Ni(t,r),Ti(t,r),r},nq=(t={})=>{let r={tag:t.name,type:"shadowsocks",method:t.cipher,password:t.password,detour:`${t.name}_shadowtls`};t.uot&&(r.udp_over_tcp=!0),t["udp-over-tcp"]&&(r.udp_over_tcp={enabled:!0,version:!t["udp-over-tcp-version"]||t["udp-over-tcp-version"]===1?1:2});let n={tag:`${t.name}_shadowtls`,type:"shadowtls",server:t.server,server_port:parseInt(`${t.port}`,10),version:t["plugin-opts"].version,password:t["plugin-opts"].password,tls:{enabled:!0,server_name:t["plugin-opts"].host,utls:{enabled:!0,fingerprint:t["client-fingerprint"]}}};if(n.server_port<0||n.server_port>65535)throw"\u7AEF\u53E3\u503C\u975E\u6CD5";return t["fast-open"]===!0&&(n.udp_fragment=!0),rs(t,n),Ni(t,n),Oa(t.smux,r),Ti(t,n),{type:"ss-with-st",ssPart:r,stPart:n}},iq=(t={})=>{let r={tag:t.name,type:"shadowsocks",server:t.server,server_port:parseInt(`${t.port}`,10),method:t.cipher,password:t.password};if(r.server_port<0||r.server_port>65535)throw"invalid port";if(t.uot&&(r.udp_over_tcp=!0),t["udp-over-tcp"]&&(r.udp_over_tcp={enabled:!0,version:!t["udp-over-tcp-version"]||t["udp-over-tcp-version"]===1?1:2}),t["fast-open"]&&(r.udp_fragment=!0),Pa(t,r),rs(t,r),Ni(t,r),Oa(t.smux,r),Ti(t,r),t.plugin){let n=[];t.plugin==="obfs"&&(r.plugin="obfs-local",r.plugin_opts="",t["obfs-host"]&&(t["plugin-opts"].host=t["obfs-host"]),Object.keys(t["plugin-opts"]).forEach(i=>{switch(i){case"mode":n.push(`obfs=${t["plugin-opts"].mode}`);break;case"host":n.push(`obfs-host=${t["plugin-opts"].host}`);break;default:n.push(`${i}=${t["plugin-opts"][i]}`);break}})),t.plugin==="v2ray-plugin"&&(r.plugin="v2ray-plugin",t["ws-host"]&&(t["plugin-opts"].host=t["ws-host"]),t["ws-path"]&&(t["plugin-opts"].path=t["ws-path"]),Object.keys(t["plugin-opts"]).forEach(i=>{switch(i){case"tls":t["plugin-opts"].tls&&n.push("tls");break;case"host":n.push(`host=${t["plugin-opts"].host}`);break;case"path":n.push(`path=${t["plugin-opts"].path}`);break;case"headers":n.push(`headers=${JSON.stringify(t["plugin-opts"].headers)}`);break;case"mux":t["plugin-opts"].mux&&(r.multiplex={enabled:!0});break;default:n.push(`${i}=${t["plugin-opts"][i]}`)}})),r.plugin_opts=n.join(";")}return r},sq=(t={})=>{let r={tag:t.name,type:"shadowsocksr",server:t.server,server_port:parseInt(`${t.port}`,10),method:t.cipher,password:t.password,obfs:t.obfs,protocol:t.protocol};if(r.server_port<0||r.server_port>65535)throw"invalid port";return t["obfs-param"]&&(r.obfs_param=t["obfs-param"]),t["protocol-param"]&&t["protocol-param"]!==""&&(r.protocol_param=t["protocol-param"]),t["fast-open"]&&(r.udp_fragment=!0),rs(t,r),Ni(t,r),Oa(t.smux,r),Ti(t,r),r},aq=(t={})=>{let r={tag:t.name,type:"vmess",server:t.server,server_port:parseInt(`${t.port}`,10),uuid:t.uuid,security:t.cipher,alter_id:parseInt(`${t.alterId}`,10),tls:{enabled:!1,server_name:t.server,insecure:!1}};if(["auto","none","zero","aes-128-gcm","chacha20-poly1305","aes-128-ctr"].indexOf(r.security)===-1&&(r.security="auto"),r.server_port<0||r.server_port>65535)throw"invalid port";return t.xudp&&(r.packet_encoding="xudp"),t["fast-open"]&&(r.udp_fragment=!0),t.network==="ws"&&$2(t,r),t.network==="h2"&&rF(t,r),t.network==="http"&&tF(t,r),t.network==="grpc"&&R2(t,r),Pa(t,r),rs(t,r),Ni(t,r),fo(t,r),Oa(t.smux,r),Ti(t,r),r},uq=(t={})=>{let r={tag:t.name,type:"vless",server:t.server,server_port:parseInt(`${t.port}`,10),uuid:t.uuid,tls:{enabled:!1,server_name:t.server,insecure:!1}};if(r.server_port<0||r.server_port>65535)throw"invalid port";return t.xudp&&(r.packet_encoding="xudp"),t["fast-open"]&&(r.udp_fragment=!0),t.flow!=null&&(r.flow=t.flow),t.network==="ws"&&$2(t,r),t.network==="h2"&&rF(t,r),t.network==="http"&&tF(t,r),t.network==="grpc"&&R2(t,r),Pa(t,r),rs(t,r),Ni(t,r),Oa(t.smux,r),fo(t,r),Ti(t,r),r},oq=(t={})=>{let r={tag:t.name,type:"trojan",server:t.server,server_port:parseInt(`${t.port}`,10),password:t.password,tls:{enabled:!0,server_name:t.server,insecure:!1}};if(r.server_port<0||r.server_port>65535)throw"invalid port";return t["fast-open"]&&(r.udp_fragment=!0),t.network==="grpc"&&R2(t,r),t.network==="ws"&&$2(t,r),Pa(t,r),rs(t,r),Ni(t,r),fo(t,r),Oa(t.smux,r),Ti(t,r),r},cq=(t={})=>{let r={tag:t.name,type:"hysteria",server:t.server,server_port:parseInt(`${t.port}`,10),disable_mtu_discovery:!1,tls:{enabled:!0,server_name:t.server,insecure:!1}};if(r.server_port<0||r.server_port>65535)throw"invalid port";t.auth_str&&(r.auth_str=`${t.auth_str}`),t["auth-str"]&&(r.auth_str=`${t["auth-str"]}`),t["fast-open"]&&(r.udp_fragment=!0);let n=new RegExp("^[0-9]+[ 	]*[KMGT]*[Bb]ps$");return n.test(`${t.up}`)&&!`${t.up}`.endsWith("Mbps")?r.up=`${t.up}`:r.up_mbps=parseInt(`${t.up}`,10),n.test(`${t.down}`)&&!`${t.down}`.endsWith("Mbps")?r.down=`${t.down}`:r.down_mbps=parseInt(`${t.down}`,10),t.obfs&&(r.obfs=t.obfs),t.recv_window_conn&&(r.recv_window_conn=t.recv_window_conn),t["recv-window-conn"]&&(r.recv_window_conn=t["recv-window-conn"]),t.recv_window&&(r.recv_window=t.recv_window),t["recv-window"]&&(r.recv_window=t["recv-window"]),t.disable_mtu_discovery&&(typeof t.disable_mtu_discovery=="boolean"?r.disable_mtu_discovery=t.disable_mtu_discovery:t.disable_mtu_discovery===1&&(r.disable_mtu_discovery=!0)),Pa(t,r),fo(t,r),Ni(t,r),rs(t,r),Oa(t.smux,r),Ti(t,r),r},lq=(t={})=>{let r={tag:t.name,type:"hysteria2",server:t.server,server_port:parseInt(`${t.port}`,10),password:t.password,obfs:{},tls:{enabled:!0,server_name:t.server,insecure:!1}};if(r.server_port<0||r.server_port>65535)throw"invalid port";return t["hop-interval"]&&(r.hop_interval=/^\d+$/.test(t["hop-interval"])?`${t["hop-interval"]}s`:t["hop-interval"]),t.ports&&(r.server_ports=t.ports.split(/\s*,\s*/).map(n=>n.replace(/\s*-\s*/g,":"))),t.up&&(r.up_mbps=parseInt(`${t.up}`,10)),t.down&&(r.down_mbps=parseInt(`${t.down}`,10)),t.obfs==="salamander"&&(r.obfs.type="salamander"),t["obfs-password"]&&(r.obfs.password=t["obfs-password"]),r.obfs.type||delete r.obfs,Pa(t,r),fo(t,r),rs(t,r),Ni(t,r),Oa(t.smux,r),Ti(t,r),r},fq=(t={})=>{let r={tag:t.name,type:"tuic",server:t.server,server_port:parseInt(`${t.port}`,10),uuid:t.uuid,password:t.password,tls:{enabled:!0,server_name:t.server,insecure:!1}};if(r.server_port<0||r.server_port>65535)throw"invalid port";return t["fast-open"]&&(r.udp_fragment=!0),t["congestion-controller"]&&t["congestion-controller"]!=="cubic"&&(r.congestion_control=t["congestion-controller"]),t["udp-relay-mode"]&&t["udp-relay-mode"]!=="native"&&(r.udp_relay_mode=t["udp-relay-mode"]),t["reduce-rtt"]&&(r.zero_rtt_handshake=!0),t["udp-over-stream"]&&(r.udp_over_stream=!0),t["heartbeat-interval"]&&(r.heartbeat=`${t["heartbeat-interval"]}ms`),Pa(t,r),rs(t,r),Ni(t,r),fo(t,r),Oa(t.smux,r),Ti(t,r),r},hq=(t={})=>{let r={tag:t.name,type:"anytls",server:t.server,server_port:parseInt(`${t.port}`,10),password:t.password,tls:{enabled:!0,server_name:t.server,insecure:!1}};return/^\d+$/.test(t["idle-session-check-interval"])&&(r.idle_session_check_interval=`${t["idle-session-check-interval"]}s`),/^\d+$/.test(t["idle-session-timeout"])&&(r.idle_session_timeout=`${t["idle-session-timeout"]}s`),/^\d+$/.test(t["min-idle-session"])&&(r.min_idle_session=parseInt(`${t["min-idle-session"]}`,10)),Pa(t,r),Ni(t,r),fo(t,r),Ti(t,r),r},dq=(t={})=>{let r=["ip","ipv6"].map(i=>t[i]).map(i=>{if(Yr(i))return`${i}/32`;if(Mr(i))return`${i}/128`}).filter(i=>i),n={tag:t.name,type:"wireguard",server:t.server,server_port:parseInt(`${t.port}`,10),local_address:r,private_key:t["private-key"],peer_public_key:t["public-key"],pre_shared_key:t["pre-shared-key"],reserved:[]};if(n.server_port<0||n.server_port>65535)throw"invalid port";if(t["fast-open"]&&(n.udp_fragment=!0),typeof t.reserved=="string")n.reserved=t.reserved;else if(Array.isArray(t.reserved))for(let i of t.reserved)n.reserved.push(i);else delete n.reserved;if(t.peers&&t.peers.length>0){n.peers=[];for(let i of t.peers){let u={server:i.server,server_port:parseInt(`${i.port}`,10),public_key:i["public-key"],allowed_ips:i["allowed-ips"]||i.allowed_ips,reserved:[]};if(typeof i.reserved=="string")u.reserved.push(i.reserved);else if(Array.isArray(i.reserved))for(let p of i.reserved)u.reserved.push(p);else delete u.reserved;i["pre-shared-key"]&&(u.pre_shared_key=i["pre-shared-key"]),n.peers.push(u)}}return Pa(t,n),rs(t,n),Ni(t,n),Oa(t.smux,n),Ti(t,n),n};function Rp(){return{type:"ALL",produce:(t,r,n={})=>{let i=[];return Zi().produce(t,"internal",{"include-unsupported-proxy":!0}).map(u=>{try{switch(u.type){case"ssh":i.push(eq(u));break;case"http":i.push(tq(u));break;case"socks5":if(u.tls)throw new Error(`Platform sing-box does not support proxy type: ${u.type} with tls`);i.push(rq(u));break;case"ss":if(u.plugin==="shadow-tls"){let{ssPart:p,stPart:g}=nq(u);i.push(p),i.push(g)}else i.push(iq(u));break;case"ssr":if(n["include-unsupported-proxy"])i.push(sq(u));else throw new Error(`Platform sing-box does not support proxy type: ${u.type}`);break;case"vmess":if(!u.network||["ws","grpc","h2","http"].includes(u.network))i.push(aq(u));else throw new Error(`Platform sing-box does not support proxy type: ${u.type} with network ${u.network}`);break;case"vless":if(!u.flow||["xtls-rprx-vision"].includes(u.flow))i.push(uq(u));else throw new Error(`Platform sing-box does not support proxy type: ${u.type} with flow ${u.flow}`);break;case"trojan":if(!u.flow)i.push(oq(u));else throw new Error(`Platform sing-box does not support proxy type: ${u.type} with flow ${u.flow}`);break;case"hysteria":i.push(cq(u));break;case"hysteria2":i.push(lq(u,n["include-unsupported-proxy"]));break;case"tuic":if(!u.token||u.token.length===0)i.push(fq(u));else throw new Error("Platform sing-box does not support proxy type: TUIC v4");break;case"wireguard":i.push(dq(u));break;case"anytls":i.push(hq(u));break;default:throw new Error(`Platform sing-box does not support proxy type: ${u.type}`)}}catch(p){R.error(p.message??p)}}),r==="internal"?i:JSON.stringify({outbounds:i},null,2)}}}function xp(){return{type:"ALL",produce:(t,r)=>{let n=t.filter(i=>!(!["http","socks5","ss","trojan","hysteria2","vless","vmess","tuic"].includes(i.type)||i.type==="ss"&&(i.plugin==="obfs"&&!["http","tls"].includes(i["plugin-opts"]?.mode)||!["chacha20-ietf-poly1305","chacha20-poly1305","aes-256-gcm","aes-128-gcm","none","tbale","rc4","rc4-md5","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","cast5-cfb","des-cfb","idea-cfb","rc2-cfb","seed-cfb","salsa20","chacha20","chacha20-ietf","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(i.cipher))||i.type==="vmess"&&!["http","ws","tcp"].includes(i.network)&&i.network||i.type==="trojan"&&!["http","ws","tcp"].includes(i.network)&&i.network||i.type==="vless"&&(typeof i.flow<"u"||i["reality-opts"]||!["http","ws","tcp"].includes(i.network)&&i.network)||i.type==="tuic"&&i.token&&i.token.length!==0)).map(i=>{let u={...i};i.tls&&!i.sni&&(i.sni=i.server);let p=i.prev_hop||i["underlying-proxy"]||i["dialer-proxy"]||i.detour;if(i.type==="http")i={type:"http",name:i.name,server:i.server,port:i.port,username:i.username,password:i.password,tfo:i.tfo||i["fast-open"],next_hop:i.next_hop};else if(i.type==="socks5")i={type:"socks5",name:i.name,server:i.server,port:i.port,username:i.username,password:i.password,tfo:i.tfo||i["fast-open"],udp_relay:i.udp||i.udp_relay||i.udp_relay,next_hop:i.next_hop};else if(i.type==="ss")i={type:"shadowsocks",name:i.name,method:i.cipher==="chacha20-ietf-poly1305"?"chacha20-poly1305":i.cipher,server:i.server,port:i.port,password:i.password,tfo:i.tfo||i["fast-open"],udp_relay:i.udp||i.udp_relay||i.udp_relay,next_hop:i.next_hop},u.plugin==="obfs"&&(i.obfs=u["plugin-opts"].mode,i.obfs_host=u["plugin-opts"].host,i.obfs_uri=u["plugin-opts"].path);else if(i.type==="hysteria2")i={type:"hysteria2",name:i.name,server:i.server,port:i.port,auth:i.password,tfo:i.tfo||i["fast-open"],udp_relay:i.udp||i.udp_relay||i.udp_relay,next_hop:i.next_hop,sni:i.sni,skip_tls_verify:i["skip-cert-verify"],port_hopping:i.ports,port_hopping_interval:i["hop-interval"]},u["obfs-password"]&&u.obfs=="salamander"&&(i.obfs="salamander",i.obfs_password=u["obfs-password"]);else if(i.type==="tuic")i={type:"tuic",name:i.name,server:i.server,port:i.port,uuid:i.uuid,password:i.password,next_hop:i.next_hop,sni:i.sni,alpn:Array.isArray(i.alpn)?i.alpn:[i.alpn||"h3"],skip_tls_verify:i["skip-cert-verify"],port_hopping:i.ports,port_hopping_interval:i["hop-interval"]};else if(i.type==="trojan")i.network==="ws"&&(i.websocket={path:i["ws-opts"]?.path,host:i["ws-opts"]?.headers?.Host}),i={type:"trojan",name:i.name,server:i.server,port:i.port,password:i.password,tfo:i.tfo||i["fast-open"],udp_relay:i.udp||i.udp_relay||i.udp_relay,next_hop:i.next_hop,sni:i.sni,skip_tls_verify:i["skip-cert-verify"],websocket:i.websocket};else if(i.type==="vmess"){let g=i.cipher;g&&!["auto","none","zero","aes-128-gcm","chacha20-poly1305"].includes(g)&&(g="auto"),i.network==="ws"?i.transport={[i.tls?"wss":"ws"]:{path:i["ws-opts"]?.path,headers:{Host:i["ws-opts"]?.headers?.Host},sni:i.tls?i.sni:void 0,skip_tls_verify:i.tls?i["skip-cert-verify"]:void 0}}:i.network==="http"?i.transport={http1:{method:i["http-opts"]?.method,path:Array.isArray(i["http-opts"]?.path)?i["http-opts"]?.path[0]:i["http-opts"]?.path,headers:{Host:Array.isArray(i["http-opts"]?.headers?.Host)?i["http-opts"]?.headers?.Host[0]:i["http-opts"]?.headers?.Host},skip_tls_verify:i["skip-cert-verify"]}}:i.network==="h2"?i.transport={http2:{method:i["h2-opts"]?.method,path:Array.isArray(i["h2-opts"]?.path)?i["h2-opts"]?.path[0]:i["h2-opts"]?.path,headers:{Host:Array.isArray(i["h2-opts"]?.headers?.Host)?i["h2-opts"]?.headers?.Host[0]:i["h2-opts"]?.headers?.Host},skip_tls_verify:i["skip-cert-verify"]}}:(i.network==="tcp"||!i.network)&&i.tls&&(i.transport={tls:{sni:i.tls?i.sni:void 0,skip_tls_verify:i.tls?i["skip-cert-verify"]:void 0}}),i={type:"vmess",name:i.name,server:i.server,port:i.port,user_id:i.uuid,security:g,tfo:i.tfo||i["fast-open"],legacy:i.legacy,udp_relay:i.udp||i.udp_relay||i.udp_relay,next_hop:i.next_hop,transport:i.transport}}else i.type==="vless"&&(i.network==="ws"?i.transport={[i.tls?"wss":"ws"]:{path:i["ws-opts"]?.path,headers:{Host:i["ws-opts"]?.headers?.Host},sni:i.tls?i.sni:void 0,skip_tls_verify:i.tls?i["skip-cert-verify"]:void 0}}:i.network==="http"?i.transport={http:{method:i["http-opts"]?.method,path:Array.isArray(i["http-opts"]?.path)?i["http-opts"]?.path[0]:i["http-opts"]?.path,headers:{Host:Array.isArray(i["http-opts"]?.headers?.Host)?i["http-opts"]?.headers?.Host[0]:i["http-opts"]?.headers?.Host},skip_tls_verify:i["skip-cert-verify"]}}:(i.network==="tcp"||!i.network)&&(i.transport={[i.tls?"tls":"tcp"]:{sni:i.tls?i.sni:void 0,skip_tls_verify:i.tls?i["skip-cert-verify"]:void 0}}),i={type:"vless",name:i.name,server:i.server,port:i.port,user_id:i.uuid,security:i.cipher,tfo:i.tfo||i["fast-open"],legacy:i.legacy,udp_relay:i.udp||i.udp_relay||i.udp_relay,next_hop:i.next_hop,transport:i.transport});if(["http","socks5","ss","trojan","vless","vmess"].includes(u.type)){if(ue(u,"shadow-tls-password")){if(u["shadow-tls-version"]!=3)throw new Error(`shadow-tls version ${u["shadow-tls-version"]} is not supported`);i.shadow_tls={password:u["shadow-tls-password"],sni:u["shadow-tls-sni"]}}else if(["shadow-tls"].includes(u.plugin)&&u["plugin-opts"]){if(u["plugin-opts"].version!=3)throw new Error(`shadow-tls version ${u["plugin-opts"].version} is not supported`);i.shadow_tls={password:u["plugin-opts"].password,sni:u["plugin-opts"].host}}}if(["ss"].includes(u.type)&&i.shadow_tls&&u["udp-port"]>0&&u["udp-port"]<=65535&&(i.udp_port=u["udp-port"]),delete i.subName,delete i.collectionName,delete i.id,delete i.resolved,delete i["no-resolve"],i.transport){for(let g in i.transport)(Object.keys(i.transport[g]).length===0||Object.values(i.transport[g]).every(m=>m==null))&&delete i.transport[g];Object.keys(i.transport).length===0&&delete i.transport}if(r!=="internal")for(let g in i)(i[g]==null||/^_/i.test(g))&&delete i[g];return{[i.type]:{...i,type:void 0,prev_hop:p}}});return r==="internal"?n:`proxies:
`+n.map(i=>"  - "+JSON.stringify(i)+`
`).join("")}}}function nF(){return{type:"ALL",produce:(t,r)=>r==="internal"?t:JSON.stringify(t,null,2)}}var Pp={qx:Nh(),QX:Nh(),QuantumultX:Nh(),surge:bl(),Surge:bl(),SurgeMac:Nm(),Loon:Lm(),Clash:km(),meta:Zi(),clashmeta:Zi(),"clash.meta":Zi(),"Clash.Meta":Zi(),ClashMeta:Zi(),mihomo:Zi(),Mihomo:Zi(),uri:Yl(),URI:Yl(),v2:Th(),v2ray:Th(),V2Ray:Th(),json:nF(),JSON:nF(),stash:K0(),Stash:K0(),shadowrocket:kh(),Shadowrocket:kh(),ShadowRocket:kh(),surfboard:$p(),Surfboard:$p(),singbox:Rp(),"sing-box":Rp(),egern:xp(),Egern:xp()},cS=tn(Vh()),bV=String.raw`
// global initializer
{{
    function $set(obj, path, value) {
      if (Object(obj) !== obj) return obj;
      if (!Array.isArray(path)) path = path.toString().match(/[^.[\]]+/g) || [];
      path
        .slice(0, -1)
        .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[
        path[path.length - 1]
      ] = value;
      return obj;
    }
}}

// per-parser initializer
{
    const proxy = {};
    const obfs = {};
    const $ = {};

    function handleWebsocket() {
        if (obfs.type === "ws") {
            proxy.network = "ws";
            $set(proxy, "ws-opts.path", obfs.path);
            $set(proxy, "ws-opts.headers", obfs['ws-headers']);
            if (proxy['ws-opts'] && proxy['ws-opts']['headers'] && proxy['ws-opts']['headers'].Host) {
                proxy['ws-opts']['headers'].Host = proxy['ws-opts']['headers'].Host.replace(/^"(.*)"$/, '$1')
            }
        }
    }
    function handleShadowTLS() {
        if (proxy['shadow-tls-password'] && !proxy['shadow-tls-version']) {
            proxy['shadow-tls-version'] = 2;
        }
    }
}

start = (shadowsocks/vmess/trojan/https/http/snell/socks5/socks5_tls/tuic/tuic_v5/wireguard/hysteria2/ssh/direct) {
    return proxy;
}

shadowsocks = tag equals "ss" address (method/passwordk/obfs/obfs_host/obfs_uri/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/udp_relay/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/udp_port/others)* {
    proxy.type = "ss";
    // handle obfs
    if (obfs.type == "http" || obfs.type === "tls") {
        proxy.plugin = "obfs";
        $set(proxy, "plugin-opts.mode", obfs.type);
        $set(proxy, "plugin-opts.host", obfs.host);
        $set(proxy, "plugin-opts.path", obfs.path);
    }
    handleShadowTLS();
}
vmess = tag equals "vmess" address (vmess_uuid/vmess_aead/ws/ws_path/ws_headers/method/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls/sni/tls_fingerprint/tls_verification/fast_open/tfo/udp_relay/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "vmess";
    proxy.cipher = proxy.cipher || "none";
    // Surfboard  Surge ,  Surfboard https://getsurfboard.com/docs/profile-format/proxy/external-proxy/vmess
    if (proxy.aead) {
        proxy.alterId = 0;
    } else {
        proxy.alterId = 1;
    }
    handleWebsocket();
    handleShadowTLS();
}
trojan = tag equals "trojan" address (passwordk/ws/ws_path/ws_headers/tls/sni/tls_fingerprint/tls_verification/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/udp_relay/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "trojan";
    handleWebsocket();
    handleShadowTLS();
}
https = tag equals "https" address (username password)? (usernamek passwordk)? (sni/tls_fingerprint/tls_verification/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "http";
    proxy.tls = true;
    handleShadowTLS();
}
http = tag equals "http" address (username password)? (usernamek passwordk)? (ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "http";
    handleShadowTLS();
}
ssh = tag equals "ssh" address (username password)? (usernamek passwordk)? (server_fingerprint/idle_timeout/private_key/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "ssh";
    handleShadowTLS();
}
snell = tag equals "snell" address (snell_version/snell_psk/obfs/obfs_host/obfs_uri/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/udp_relay/reuse/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "snell";
    // handle obfs
    if (obfs.type == "http" || obfs.type === "tls") {
        $set(proxy, "obfs-opts.mode", obfs.type);
        $set(proxy, "obfs-opts.host", obfs.host);
        $set(proxy, "obfs-opts.path", obfs.path);
    }
    handleShadowTLS();
}
tuic = tag equals "tuic" address (alpn/token/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls_fingerprint/tls_verification/sni/fast_open/tfo/ecn/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/port_hopping_interval/others)* {
    proxy.type = "tuic";
    handleShadowTLS();
}
tuic_v5 = tag equals "tuic-v5" address (alpn/passwordk/uuidk/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls_fingerprint/tls_verification/sni/fast_open/tfo/ecn/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/port_hopping_interval/others)* {
    proxy.type = "tuic";
    proxy.version = 5;
    handleShadowTLS();
}
wireguard = tag equals "wireguard" (section_name/no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "wireguard-surge";
    handleShadowTLS();
}
hysteria2 = tag equals "hysteria2" address (no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/sni/tls_verification/passwordk/tls_fingerprint/download_bandwidth/ecn/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/port_hopping_interval/others)* {
    proxy.type = "hysteria2";
    handleShadowTLS();
}
socks5 = tag equals "socks5" address (username password)? (usernamek passwordk)? (udp_relay/no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "socks5";
    handleShadowTLS();
}
socks5_tls = tag equals "socks5-tls" address (username password)? (usernamek passwordk)? (udp_relay/no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/sni/tls_fingerprint/tls_verification/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "socks5";
    proxy.tls = true;
    handleShadowTLS();
}
direct = tag equals "direct" (udp_relay/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/block_quic/others)* {
    proxy.type = "direct";
}
address = comma server:server comma port:port {
    proxy.server = server;
    proxy.port = port;
}

server = ip/domain

ip = & {
    const start = peg$currPos;
    let j = start;
    while (j < input.length) {
        if (input[j] === ",") break;
        j++;
    }
    peg$currPos = j;
    $.ip = input.substring(start, j).trim();
    return true;
} { return $.ip; }

domain = match:[0-9a-zA-z-_.]+ { 
    const domain = match.join(""); 
    if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {
        return domain;
    }
}

port = digits:[0-9]+ { 
    const port = parseInt(digits.join(""), 10); 
    if (port >= 0 && port <= 65535) {
    	return port;
    }
}

port_hopping_interval = comma "port-hopping-interval" equals match:$[0-9]+ { proxy["hop-interval"] = parseInt(match.trim()); }

username = & {
    let j = peg$currPos; 
    let start, end;
    let first = true;
    while (j < input.length) {
        if (input[j] === ',') {
            if (first) {
                start = j + 1;
                first = false;
            } else {
                end = j;
                break;
            }
        }
        j++;
    }
    const match = input.substring(start, end);
    if (match.indexOf("=") === -1) {
        $.username = match;
        peg$currPos = end;
        return true;
    }
} { proxy.username = $.username.trim().replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }
password = comma match:[^,]+ { proxy.password = match.join("").replace(/^"(.*)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }

tls = comma "tls" equals flag:bool { proxy.tls = flag; }
sni = comma "sni" equals sni:("off"/domain) { 
    if (sni === "off") {
        proxy["disable-sni"] = true;
    } else {
        proxy.sni = sni;
    }
}
tls_verification = comma "skip-cert-verify" equals flag:bool { proxy["skip-cert-verify"] = flag; }
tls_fingerprint = comma "server-cert-fingerprint-sha256" equals tls_fingerprint:$[^,]+ { proxy["tls-fingerprint"] = tls_fingerprint.trim(); }

snell_psk = comma "psk" equals match:[^,]+ { proxy.psk = match.join(""); }
snell_version = comma "version" equals match:$[0-9]+ { proxy.version = parseInt(match.trim()); }

usernamek = comma "username" equals match:[^,]+ { proxy.username = match.join("").replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }
passwordk = comma "password" equals match:[^,]+ { proxy.password = match.join("").replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }
vmess_uuid = comma "username" equals match:[^,]+ { proxy.uuid = match.join(""); }
vmess_aead = comma "vmess-aead" equals flag:bool { proxy.aead = flag; }

method = comma "encrypt-method" equals cipher:cipher {
    proxy.cipher = cipher;
}
cipher = ("aes-128-cfb"/"aes-128-ctr"/"aes-128-gcm"/"aes-192-cfb"/"aes-192-ctr"/"aes-192-gcm"/"aes-256-cfb"/"aes-256-ctr"/"aes-256-gcm"/"bf-cfb"/"camellia-128-cfb"/"camellia-192-cfb"/"camellia-256-cfb"/"cast5-cfb"/"chacha20-ietf-poly1305"/"chacha20-ietf"/"chacha20-poly1305"/"chacha20"/"des-cfb"/"idea-cfb"/"none"/"rc2-cfb"/"rc4-md5"/"rc4"/"salsa20"/"seed-cfb"/"xchacha20-ietf-poly1305"/"2022-blake3-aes-128-gcm"/"2022-blake3-aes-256-gcm");

ws = comma "ws" equals flag:bool { obfs.type = "ws"; }
ws_headers = comma "ws-headers" equals headers:$[^,]+ {
    const pairs = headers.split("|");
    const result = {};
    pairs.forEach(pair => {
        const [key, value] = pair.trim().split(":");
        result[key.trim()] = value.trim().replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1');
    })
    obfs["ws-headers"] = result;
}
ws_path = comma "ws-path" equals path:uri { obfs.path = path.trim().replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }

obfs = comma "obfs" equals type:("http"/"tls") { obfs.type = type; }
obfs_host = comma "obfs-host" equals host:domain { obfs.host = host; };
obfs_uri = comma "obfs-uri" equals path:uri { obfs.path = path }
uri = $[^,]+

udp_relay = comma "udp-relay" equals flag:bool { proxy.udp = flag; }
fast_open = comma "fast-open" equals flag:bool { proxy.tfo = flag; }
reuse = comma "reuse" equals flag:bool { proxy.reuse = flag; }
ecn = comma "ecn" equals flag:bool { proxy.ecn = flag; }
tfo = comma "tfo" equals flag:bool { proxy.tfo = flag; }
ip_version = comma "ip-version" equals match:[^,]+ { proxy["ip-version"] = match.join(""); }
section_name = comma "section-name" equals match:[^,]+ { proxy["section-name"] = match.join(""); }
no_error_alert = comma "no-error-alert" equals match:[^,]+ { proxy["no-error-alert"] = match.join(""); }
underlying_proxy = comma "underlying-proxy" equals match:[^,]+ { proxy["underlying-proxy"] = match.join(""); }
download_bandwidth = comma "download-bandwidth" equals match:[^,]+ { proxy.down = match.join(""); }
test_url = comma "test-url" equals match:[^,]+ { proxy["test-url"] = match.join(""); }
test_udp = comma "test-udp" equals match:[^,]+ { proxy["test-udp"] = match.join(""); }
test_timeout = comma "test-timeout" equals match:$[0-9]+ { proxy["test-timeout"] = parseInt(match.trim()); }
tos = comma "tos" equals match:$[0-9]+ { proxy.tos = parseInt(match.trim()); }
interface = comma "interface" equals match:[^,]+ { proxy.interface = match.join(""); }
allow_other_interface = comma "allow-other-interface" equals flag:bool { proxy["allow-other-interface"] = flag; }
hybrid = comma "hybrid" equals flag:bool { proxy.hybrid = flag; }
idle_timeout = comma "idle-timeout" equals match:$[0-9]+ { proxy["idle-timeout"] = parseInt(match.trim()); }
private_key = comma "private-key" equals match:[^,]+ { proxy["keystore-private-key"] = match.join("").replace(/^"(.*)"$/, '$1'); }
server_fingerprint = comma "server-fingerprint" equals match:[^,]+ { proxy["server-fingerprint"] = match.join("").replace(/^"(.*)"$/, '$1'); }
block_quic = comma "block-quic" equals match:[^,]+ { proxy["block-quic"] = match.join(""); }
udp_port = comma "udp-port" equals match:$[0-9]+ { proxy["udp-port"] = parseInt(match.trim()); }
shadow_tls_version = comma "shadow-tls-version" equals match:$[0-9]+ { proxy["shadow-tls-version"] = parseInt(match.trim()); }
shadow_tls_sni = comma "shadow-tls-sni" equals match:[^,]+ { proxy["shadow-tls-sni"] = match.join(""); }
shadow_tls_password = comma "shadow-tls-password" equals match:[^,]+ { proxy["shadow-tls-password"] = match.join("").replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }
token = comma "token" equals match:[^,]+ { proxy.token = match.join(""); }
alpn = comma "alpn" equals match:[^,]+ { proxy.alpn = match.join(""); }
uuidk = comma "uuid" equals match:[^,]+ { proxy.uuid = match.join(""); }

tag = match:[^=,]* { proxy.name = match.join("").trim(); }
comma = _ "," _
equals = _ "=" _
_ = [ \r\t]*
bool = b:("true"/"false") { return b === "true" }
others = comma [^=,]+ equals [^=,]+
`,J2;function is(){return J2||(J2=cS.generate(bV)),J2}var lS=tn(Vh()),_V=String.raw`
// global initializer
{{
    function $set(obj, path, value) {
      if (Object(obj) !== obj) return obj;
      if (!Array.isArray(path)) path = path.toString().match(/[^.[\]]+/g) || [];
      path
        .slice(0, -1)
        .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[
        path[path.length - 1]
      ] = value;
      return obj;
    }
}}

// per-parser initializer
{
    const proxy = {};
    const obfs = {};
    const transport = {};
    const $ = {};

    function handleTransport() {
        if (transport.type === "tcp") { /* do nothing */ }
        else if (transport.type === "ws") {
            proxy.network = "ws";
            $set(proxy, "ws-opts.path", transport.path);
            $set(proxy, "ws-opts.headers.Host", transport.host);
        } else if (transport.type === "http") {
            proxy.network = "http";
            $set(proxy, "http-opts.path", transport.path);
            $set(proxy, "http-opts.headers.Host", transport.host);
        }
    }
}

start = (shadowsocksr/shadowsocks/vmess/vless/trojan/https/http/socks5/hysteria2) {
    return proxy;
}

shadowsocksr = tag equals "shadowsocksr"i address method password (ssr_protocol/ssr_protocol_param/obfs_ssr/obfs_ssr_param/obfs_host/obfs_uri/fast_open/udp_relay/udp_port/shadow_tls_version/shadow_tls_sni/shadow_tls_password/ip_mode/block_quic/others)*{
    proxy.type = "ssr";
    // handle ssr obfs
    proxy.obfs = obfs.type;
}
shadowsocks = tag equals "shadowsocks"i address method password (obfs_typev obfs_hostv)? (obfs_ss/obfs_host/obfs_uri/fast_open/udp_relay/udp_port/shadow_tls_version/shadow_tls_sni/shadow_tls_password/ip_mode/block_quic/others)* {
    proxy.type = "ss";
    // handle ss obfs
    if (obfs.type == "http" || obfs.type === "tls") {
        proxy.plugin = "obfs";
        $set(proxy, "plugin-opts.mode", obfs.type);
        $set(proxy, "plugin-opts.host", obfs.host);
        $set(proxy, "plugin-opts.path", obfs.path);
    }
}
vmess = tag equals "vmess"i address method uuid (transport/transport_host/transport_path/over_tls/tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/vmess_alterId/fast_open/udp_relay/ip_mode/public_key/short_id/block_quic/others)* {
    proxy.type = "vmess";
    proxy.cipher = proxy.cipher || "none";
    proxy.alterId = proxy.alterId || 0;
    handleTransport();
}
vless = tag equals "vless"i address uuid (transport/transport_host/transport_path/over_tls/tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/ip_mode/flow/public_key/short_id/block_quic/others)* {
    proxy.type = "vless";
    handleTransport();
}
trojan = tag equals "trojan"i address password (transport/transport_host/transport_path/over_tls/tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/ip_mode/block_quic/others)* {
    proxy.type = "trojan";
    handleTransport();
}
hysteria2 = tag equals "hysteria2"i address password (tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/udp_relay/fast_open/download_bandwidth/salamander_password/ecn/ip_mode/block_quic/others)* {
    proxy.type = "hysteria2";
}
https = tag equals "https"i address (username password)? (tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/ip_mode/block_quic/others)* {
    proxy.type = "http";
    proxy.tls = true;
}
http = tag equals "http"i address (username password)? (fast_open/udp_relay/ip_mode/block_quic/others)* {
    proxy.type = "http";
}
socks5 = tag equals "socks5"i address (username password)? (over_tls/tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/ip_mode/block_quic/others)* {
    proxy.type = "socks5";
}

address = comma server:server comma port:port {
    proxy.server = server;
    proxy.port = port;
}

server = ip/domain

ip = & {
    const start = peg$currPos;
    let j = start;
    while (j < input.length) {
        if (input[j] === ",") break;
        j++;
    }
    peg$currPos = j;
    $.ip = input.substring(start, j).trim();
    return true;
} { return $.ip; }

domain = match:[0-9a-zA-z-_.]+ { 
    const domain = match.join(""); 
    if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {
        return domain;
    }
    throw new Error("Invalid domain: " + domain);
}

port = digits:[0-9]+ { 
    const port = parseInt(digits.join(""), 10); 
    if (port >= 0 && port <= 65535) {
    	return port;
    }
    throw new Error("Invalid port number: " + port);
}

method = comma cipher:cipher { 
    proxy.cipher = cipher;
}
cipher = ("aes-128-cfb"/"aes-128-ctr"/"aes-128-gcm"/"aes-192-cfb"/"aes-192-ctr"/"aes-192-gcm"/"aes-256-cfb"/"aes-256-ctr"/"aes-256-gcm"/"auto"/"bf-cfb"/"camellia-128-cfb"/"camellia-192-cfb"/"camellia-256-cfb"/"chacha20-ietf-poly1305"/"chacha20-ietf"/"chacha20-poly1305"/"chacha20"/"none"/"rc4-md5"/"rc4"/"salsa20"/"xchacha20-ietf-poly1305"/"2022-blake3-aes-128-gcm"/"2022-blake3-aes-256-gcm");

username = & {
    let j = peg$currPos; 
    let start, end;
    let first = true;
    while (j < input.length) {
        if (input[j] === ',') {
            if (first) {
                start = j + 1;
                first = false;
            } else {
                end = j;
                break;
            }
        }
        j++;
    }
    const match = input.substring(start, end);
    if (match.indexOf("=") === -1) {
        $.username = match;
        peg$currPos = end;
        return true;
    }
} { proxy.username = $.username; }
password = comma '"' match:[^"]* '"' { proxy.password = match.join(""); }
uuid = comma '"' match:[^"]+ '"' { proxy.uuid = match.join(""); }

obfs_typev = comma type:("http"/"tls") { obfs.type = type; }
obfs_hostv = comma match:[^,]+ { obfs.host = match.join(""); }

obfs_ss = comma "obfs-name" equals type:("http"/"tls") { obfs.type = type; }

obfs_ssr = comma "obfs" equals type:("plain"/"http_simple"/"http_post"/"random_head"/"tls1.2_ticket_auth"/"tls1.2_ticket_fastauth") { obfs.type = type; }
obfs_ssr_param = comma "obfs-param" equals match:$[^,]+ { proxy["obfs-param"] = match; }

obfs_host = comma "obfs-host" equals host:domain { obfs.host = host; }
obfs_uri = comma "obfs-uri" equals uri:uri { obfs.path = uri; }
uri = $[^,]+

transport = comma "transport" equals type:("tcp"/"ws"/"http") { transport.type = type; }
transport_host = comma "host" equals host:domain { transport.host = host; }
transport_path = comma "path" equals path:uri { transport.path = path; }

ssr_protocol = comma "protocol" equals protocol:("origin"/"auth_sha1_v4"/"auth_aes128_md5"/"auth_aes128_sha1"/"auth_chain_a"/"auth_chain_b") { proxy.protocol = protocol; }
ssr_protocol_param = comma "protocol-param" equals param:$[^=,]+ { proxy["protocol-param"] = param; }

vmess_alterId = comma "alterId" equals alterId:$[0-9]+ { proxy.alterId = parseInt(alterId); } 

udp_port = comma "udp-port" equals match:$[0-9]+ { proxy["udp-port"] = parseInt(match.trim()); }
shadow_tls_version = comma "shadow-tls-version" equals match:$[0-9]+ { proxy["shadow-tls-version"] = parseInt(match.trim()); }
shadow_tls_sni = comma "shadow-tls-sni" equals match:[^,]+ { proxy["shadow-tls-sni"] = match.join(""); }
shadow_tls_password = comma "shadow-tls-password" equals match:[^,]+ { proxy["shadow-tls-password"] = match.join(""); }

over_tls = comma "over-tls" equals flag:bool { proxy.tls = flag; }
tls_name = comma sni:("tls-name") equals host:domain { proxy.sni = host; }
sni = comma sni:("sni") equals host:domain { proxy.sni = host; }
tls_verification = comma "skip-cert-verify" equals flag:bool { proxy["skip-cert-verify"] = flag; }
tls_cert_sha256 = comma "tls-cert-sha256" equals match:[^,]+ { proxy["tls-fingerprint"] = match.join("").replace(/^"(.*)"$/, '$1'); }
tls_pubkey_sha256 = comma "tls-pubkey-sha256" equals match:[^,]+ { proxy["tls-pubkey-sha256"] = match.join("").replace(/^"(.*)"$/, '$1'); }

flow = comma "flow" equals match:[^,]+ { proxy["flow"] = match.join("").replace(/^"(.*)"$/, '$1'); }
public_key = comma "public-key" equals match:[^,]+ { proxy["reality-opts"] = proxy["reality-opts"] || {}; proxy["reality-opts"]["public-key"] = match.join("").replace(/^"(.*)"$/, '$1'); }
short_id = comma "short-id" equals match:[^,]+ { proxy["reality-opts"] = proxy["reality-opts"] || {}; proxy["reality-opts"]["short-id"] = match.join("").replace(/^"(.*)"$/, '$1'); }

fast_open = comma "fast-open" equals flag:bool { proxy.tfo = flag; }
udp_relay = comma "udp" equals flag:bool { proxy.udp = flag; }
ip_mode = comma "ip-mode" equals match:[^,]+ { proxy["ip-version"] = match.join(""); }

ecn = comma "ecn" equals flag:bool { proxy.ecn = flag; }
download_bandwidth = comma "download-bandwidth" equals match:[^,]+ { proxy.down = match.join(""); }
salamander_password = comma "salamander-password" equals match:[^,]+ { proxy['obfs-password'] = match.join(""); proxy.obfs = 'salamander'; }

block_quic = comma "block-quic" equals flag:bool { if(flag) proxy["block-quic"] = "on"; else proxy["block-quic"] = "off"; }

tag = match:[^=,]* { proxy.name = match.join("").trim(); }
comma = _ "," _
equals = _ "=" _
_ = [ \r\t]*
bool = b:("true"/"false") { return b === "true" }
others = comma [^=,]+ equals [^=,]+
`,Z2;function Ta(){return Z2||(Z2=lS.generate(_V)),Z2}var fS=tn(Vh()),CV=String.raw`
// global initializer
{{
    function $set(obj, path, value) {
      if (Object(obj) !== obj) return obj;
      if (!Array.isArray(path)) path = path.toString().match(/[^.[\]]+/g) || [];
      path
        .slice(0, -1)
        .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[
        path[path.length - 1]
      ] = value;
      return obj;
    }
}}

// per-parse initializer
{
	const proxy = {};
    const obfs = {};
    const $ = {};

    function handleObfs() {
        if (obfs.type === "ws" || obfs.type === "wss") {
            proxy.network = "ws";
            if (obfs.type === 'wss') {
                proxy.tls = true;
            }
            $set(proxy, "ws-opts.path", obfs.path);
            $set(proxy, "ws-opts.headers.Host", obfs.host);
        } else if (obfs.type === "over-tls") {
            proxy.tls = true;
        } else if (obfs.type === "http") {
            proxy.network = "http";
            $set(proxy, "http-opts.path", obfs.path);
            $set(proxy, "http-opts.headers.Host", obfs.host);
        }
    }
}

start = (trojan/shadowsocks/vmess/vless/http/socks5) {
    return proxy
}

trojan = "trojan" equals address
    (password/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/obfs/obfs_host/obfs_uri/tag/udp_relay/udp_over_tcp/fast_open/server_check_url/others)* {
    proxy.type = "trojan";
    handleObfs();
}

shadowsocks = "shadowsocks" equals address
    (password/method/obfs_ssr/obfs_ss/obfs_host/obfs_uri/ssr_protocol/ssr_protocol_param/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/udp_relay/udp_over_tcp_new/fast_open/tag/server_check_url/others)* {
    if (proxy.protocol || proxy.type === "ssr") {
        proxy.type = "ssr";
        if (!proxy.protocol) {
            proxy.protocol = "origin";
        }
        // handle ssr obfs
        if (obfs.host) proxy["obfs-param"] = obfs.host;
        if (obfs.type) proxy.obfs = obfs.type;
    } else {
        proxy.type = "ss";
        // handle ss obfs
        if (obfs.type == "http" || obfs.type === "tls") {
            proxy.plugin = "obfs";
            $set(proxy, "plugin-opts", {
                mode: obfs.type
            });
        } else if (obfs.type === "ws" || obfs.type === "wss") {
            proxy.plugin = "v2ray-plugin";
            $set(proxy, "plugin-opts.mode", "websocket");
            if (obfs.type === "wss") {
                $set(proxy, "plugin-opts.tls", true);
            }
        } else if (obfs.type === 'over-tls') {
            throw new Error('ss over-tls is not supported');
        }
        if (obfs.type) {
            $set(proxy, "plugin-opts.host", obfs.host);
            $set(proxy, "plugin-opts.path", obfs.path);
        }
    }
}

vmess = "vmess" equals address
    (uuid/method/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/obfs/obfs_host/obfs_uri/udp_relay/udp_over_tcp/fast_open/aead/server_check_url/others)* {
    proxy.type = "vmess";
    proxy.cipher = proxy.cipher || "none";
    if (proxy.aead === false) {
        proxy.alterId = 1;
    } else {
        proxy.alterId = 0;
    }
    handleObfs();
}

vless = "vless" equals address
    (uuid/method/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/obfs/obfs_host/obfs_uri/udp_relay/udp_over_tcp/fast_open/aead/server_check_url/others)* {
    proxy.type = "vless";
    proxy.cipher = proxy.cipher || "none";
    handleObfs();
}

http = "http" equals address 
    (username/password/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/fast_open/udp_relay/udp_over_tcp/server_check_url/others)*{
    proxy.type = "http";
}

socks5 = "socks5" equals address
    (username/password/password/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/fast_open/udp_relay/udp_over_tcp/server_check_url/others)* {
    proxy.type = "socks5";
}
    
address = server:server ":" port:port {
    proxy.server = server;
    proxy.port = port;
}
server = ip/domain

domain = match:[0-9a-zA-z-_.]+ { 
    const domain = match.join(""); 
    if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {
        return domain;
    }
}

ip = & {
    const start = peg$currPos;
    let end;
    let j = start;
    while (j < input.length) {
        if (input[j] === ",") break;
        if (input[j] === ":") end = j;
        j++;
    }
    peg$currPos = end || j;
    $.ip = input.substring(start, end).trim();
    return true;
} { return $.ip; }

port = digits:[0-9]+ { 
    const port = parseInt(digits.join(""), 10); 
    if (port >= 0 && port <= 65535) {
    	return port;
    }
}

username = comma "username" equals username:[^,]+ { proxy.username = username.join("").trim(); }
password = comma "password" equals password:[^,]+ { proxy.password = password.join("").trim(); }
uuid = comma "password" equals uuid:[^,]+ { proxy.uuid = uuid.join("").trim(); }

method = comma "method" equals cipher:cipher { 
    proxy.cipher = cipher;
};
cipher = ("aes-128-cfb"/"aes-128-ctr"/"aes-128-gcm"/"aes-192-cfb"/"aes-192-ctr"/"aes-192-gcm"/"aes-256-cfb"/"aes-256-ctr"/"aes-256-gcm"/"bf-cfb"/"cast5-cfb"/"chacha20-ietf-poly1305"/"chacha20-ietf"/"chacha20-poly1305"/"chacha20"/"des-cfb"/"none"/"rc2-cfb"/"rc4-md5-6"/"rc4-md5"/"salsa20"/"xchacha20-ietf-poly1305"/"2022-blake3-aes-128-gcm"/"2022-blake3-aes-256-gcm");
aead = comma "aead" equals flag:bool { proxy.aead = flag; }

udp_relay = comma "udp-relay" equals flag:bool { proxy.udp = flag; }
udp_over_tcp = comma "udp-over-tcp" equals flag:bool { throw new Error("UDP over TCP is not supported"); }
udp_over_tcp_new = comma "udp-over-tcp" equals param:$[^=,]+ { if (param === "sp.v1") { proxy["udp-over-tcp"] = true; proxy["udp-over-tcp-version"] = 1; } else if (param === "sp.v2") { proxy["udp-over-tcp"] = true; proxy["udp-over-tcp-version"] = 2; } else if (param === "true") { proxy["_ssr_python_uot"] = true; } else { throw new Error("Invalid value for udp-over-tcp"); } }

fast_open = comma "fast-open" equals flag:bool { proxy.tfo = flag; }

over_tls = comma "over-tls" equals flag:bool { proxy.tls = flag; }
tls_host = comma "tls-host" equals sni:domain { proxy.sni = sni; }
tls_verification = comma "tls-verification" equals flag:bool { 
    proxy["skip-cert-verify"] = !flag;
}
tls_fingerprint = comma "tls-cert-sha256" equals tls_fingerprint:$[^,]+ { proxy["tls-fingerprint"] = tls_fingerprint.trim(); }
tls_pubkey_sha256 = comma "tls-pubkey-sha256" equals param:$[^=,]+ { proxy["tls-pubkey-sha256"] = param; }
tls_alpn = comma "tls-alpn" equals param:$[^=,]+ { proxy["tls-alpn"] = param; }
tls_no_session_ticket = comma "tls-no-session-ticket" equals flag:bool { 
    proxy["tls-no-session-ticket"] = flag;
}
tls_no_session_reuse = comma "tls-no-session-reuse" equals flag:bool { 
    proxy["tls-no-session-reuse"] = flag;
}

obfs_ss = comma "obfs" equals type:("http"/"tls"/"wss"/"ws"/"over-tls") { obfs.type = type; return type; }
obfs_ssr = comma "obfs" equals type:("plain"/"http_simple"/"http_post"/"random_head"/"tls1.2_ticket_auth"/"tls1.2_ticket_fastauth") { proxy.type = "ssr"; obfs.type = type; return type; }
obfs = comma "obfs" equals type:("wss"/"ws"/"over-tls"/"http") { obfs.type = type; return type; };

obfs_host = comma "obfs-host" equals host:domain { obfs.host = host; }
obfs_uri = comma "obfs-uri" equals uri:uri { obfs.path = uri; }

ssr_protocol = comma "ssr-protocol" equals protocol:("origin"/"auth_sha1_v4"/"auth_aes128_md5"/"auth_aes128_sha1"/"auth_chain_a"/"auth_chain_b") { proxy.protocol = protocol; return protocol; }
ssr_protocol_param = comma "ssr-protocol-param" equals param:$[^=,]+ { proxy["protocol-param"] = param; }

server_check_url = comma "server_check_url" equals param:$[^=,]+ { proxy["test-url"] = param; }

uri = $[^,]+

tag = comma "tag" equals tag:[^=,]+ { proxy.name = tag.join(""); }
others = comma [^=,]+ equals [^=,]+
comma = _ "," _
equals = _ "=" _
_ = [ \r\t]*
bool = b:("true"/"false") { return b === "true" }
`,Q2;function Su(){return Q2||(Q2=fS.generate(CV)),Q2}var hS=tn(Vh()),DV=String.raw`
// global initializer
{{
  function $set(obj, path, value) {
    if (Object(obj) !== obj) return obj;
    if (!Array.isArray(path)) path = path.toString().match(/[^.[\]]+/g) || [];
    path
      .slice(0, -1)
      .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[
      path[path.length - 1]
    ] = value;
    return obj;
  }

  function toBool(str) {
    if (typeof str === 'undefined' || str === null) return undefined;
    return /(TRUE)|1/i.test(str);
  }
}}

{
  const proxy = {};
  const obfs = {};
  const $ = {};
  const params = {};
}

start = (trojan) {
  return proxy
}

trojan = "trojan://" password:password "@" server:server ":" port:port "/"? params? name:name?{
  proxy.type = "trojan";
  proxy.password = password;
  proxy.server = server;
  proxy.port = port;
  proxy.name = name;

  // name may be empty
  if (!proxy.name) {
    proxy.name = server + ":" + port;
  }
};

password = match:$[^@]+ {
  return decodeURIComponent(match);
};

server = ip/domain;

domain = match:[0-9a-zA-z-_.]+ { 
  const domain = match.join(""); 
  if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {
    return domain;
  }
}

ip = & {
  const start = peg$currPos;
  let end;
  let j = start;
  while (j < input.length) {
    if (input[j] === ",") break;
    if (input[j] === ":") end = j;
    j++;
  }
  peg$currPos = end || j;
  $.ip = input.substring(start, end).trim();
  return true;
} { return $.ip; }

port = digits:[0-9]+ { 
  const port = parseInt(digits.join(""), 10); 
  if (port >= 0 && port <= 65535) {
    return port;
  } else {
    throw new Error("Invalid port: " + port);
  }
}

params = "?" head:param tail:("&"@param)* {
  for (const [key, value] of Object.entries(params)) {
    params[key] = decodeURIComponent(value);
  }
  proxy["skip-cert-verify"] = toBool(params["allowInsecure"]);
  proxy.sni = params["sni"] || params["peer"];
  proxy['client-fingerprint'] = params.fp;
  proxy.alpn = params.alpn ? decodeURIComponent(params.alpn).split(',') : undefined;

  if (toBool(params["ws"])) {
    proxy.network = "ws";
    $set(proxy, "ws-opts.path", params["wspath"]);
  }
  
  if (params["type"]) {
    let httpupgrade
    proxy.network = params["type"]
    if(proxy.network === 'httpupgrade') {
      proxy.network = 'ws'
      httpupgrade = true
    }
    if (['grpc'].includes(proxy.network)) {
        proxy[proxy.network + '-opts'] = {
            'grpc-service-name': params["serviceName"],
            '_grpc-type': params["mode"],
            '_grpc-authority': params["authority"],
        };
    } else {
      if (params["path"]) {
        $set(proxy, proxy.network+"-opts.path", decodeURIComponent(params["path"]));  
      }
      if (params["host"]) {
        $set(proxy, proxy.network+"-opts.headers.Host", decodeURIComponent(params["host"])); 
      }
      if (httpupgrade) {
        $set(proxy, proxy.network+"-opts.v2ray-http-upgrade", true); 
        $set(proxy, proxy.network+"-opts.v2ray-http-upgrade-fast-open", true); 
      }
    }
    if (['reality'].includes(params.security)) {
      const opts = {};
      if (params.pbk) {
        opts['public-key'] = params.pbk;
      }
      if (params.sid) {
        opts['short-id'] = params.sid;
      }
      if (params.spx) {
        opts['_spider-x'] = params.spx;
      }
      if (params.mode) {
        proxy._mode = params.mode;
      }
      if (params.extra) {
        proxy._extra = params.extra;
      }
      if (Object.keys(opts).length > 0) {
        $set(proxy, params.security+"-opts", opts); 
      }
    }
  }

  proxy.udp = toBool(params["udp"]);
  proxy.tfo = toBool(params["tfo"]);
}

param = kv/single;

kv = key:$[a-z]i+ "=" value:$[^&#]i* {
  params[key] = value;
}

single = key:$[a-z]i+ {
  params[key] = true;
};

name = "#" + match:$.* {
  return decodeURIComponent(match);
}
`,ew;function tw(){return ew||(ew=hS.generate(DV)),ew}var sw=tn(iw());function dS(t){let[r,n]=t.match(/,\s*?port-hopping\s*?=\s*?["']?\s*?((\d+(-\d+)?)([,;]\d+(-\d+)?)*)\s*?["']?\s*?/)||[];return{port_hopping:n?n.replace(/;/g,","):void 0,line:r?t.replace(r,""):t}}function FV(){return{name:"URI PROXY Parser",test:t=>/^(socks5\+tls|socks5|http|https):\/\//.test(t),parse:t=>{let[r,n,i,u,p,g,m,A,y]=t.match(/^(socks5|http|http)(\+tls|s)?:\/\/(?:(.*?):(.*?)@)?(.*?)(?::(\d+?))?(\?.*?)?(?:#(.*?))?$/);if(m)m=parseInt(m,10);else{if(i)m=443;else if(n==="http")m=80;else throw R.error(`port is not present in line: ${t}`),new Error(`port is not present in line: ${t}`);R.info(`port is not present in line: ${t}, set to ${m}`)}return{name:y!=null?decodeURIComponent(y):`${n} ${g}:${m}`,type:n,tls:!!i,server:g,port:m,username:u!=null?decodeURIComponent(u):void 0,password:p!=null?decodeURIComponent(p):void 0}}}}function SV(){return{name:"URI SOCKS Parser",test:t=>/^socks:\/\//.test(t),parse:t=>{let[r,n,i,u,p,g,m]=t.match(/^(socks)?:\/\/(?:(.*)@)?(.*?)(?::(\d+?))?(\?.*?)?(?:#(.*?))?$/);if(p)p=parseInt(p,10);else throw R.error(`port is not present in line: ${t}`),new Error(`port is not present in line: ${t}`);let A,y;if(i){let D=ft.decode(decodeURIComponent(i)).split(":");A=D[0],y=D[1]}return{name:m!=null?decodeURIComponent(m):`${n} ${u}:${p}`,type:"socks5",server:u,port:p,username:A,password:y}}}}function IV(){return{name:"URI SS Parser",test:t=>/^ss:\/\//.test(t),parse:t=>{let r=t.split("ss://")[1],n=t.split("#")[1],i={type:"ss"};r=r.split("#")[0];let u=r.match(/@([^/?]*)(\/|\?|$)/),p=decodeURIComponent(r.split("@")[0]),g;p?.startsWith("2022-blake3-")?g=p:g=ft.decode(p);let m="";if(u)r.includes("?")&&(m=r.match(/(\?.*)$/)[1]);else{if(r.includes("?")){let W=r.match(/^(.*)(\?.*)$/);r=W[1],m=W[2]}if(r=ft.decode(r),m){if(/(&|\?)v2ray-plugin=/.test(m)){let W=m.match(/(&|\?)v2ray-plugin=(.*?)(&|$)/)[2];W&&(i.plugin="v2ray-plugin",i["plugin-opts"]=JSON.parse(ft.decode(W)))}r=`${r}${m}`}g=r.match(/(^.*)@/)?.[1],u=r.match(/@([^/@]*)(\/|$)/)}let A=u[1],y=A.lastIndexOf(":");i.server=A.substring(0,y),i.port=`${A.substring(y+1)}`.match(/\d+/)?.[0];let D=g.match(/(^.*?):(.*$)/);i.cipher=D?.[1],i.password=D?.[2];let o=r.match(/[?&]plugin=([^&]+)/),M=r.match(/[?&]shadow-tls=([^&]+)/);if(o){let W=("plugin="+decodeURIComponent(o[1])).split(";"),w={};for(let U of W){let[nt,X]=U.split("=");nt&&(w[nt]=X||!0)}switch(w.plugin){case"obfs-local":case"simple-obfs":i.plugin="obfs",i["plugin-opts"]={mode:w.obfs,host:fr(w["obfs-host"])};break;case"v2ray-plugin":i.plugin="v2ray-plugin",i["plugin-opts"]={mode:"websocket",host:fr(w["obfs-host"]),path:fr(w.path),tls:Jc(w.tls)};break;case"shadow-tls":{i.plugin="shadow-tls";let U=fr(w.version);i["plugin-opts"]={host:fr(w.host),password:fr(w.password),version:U?parseInt(U,10):void 0};break}default:throw new Error(`Unsupported plugin option: ${w.plugin}`)}}if(M){let W=JSON.parse(ft.decode(M[1])),w=fr(W.version),U=fr(W.address),nt=fr(W.port);i.plugin="shadow-tls",i["plugin-opts"]={host:fr(W.host),password:fr(W.password),version:w?parseInt(w,10):void 0},U&&(i.server=U),nt&&(i.port=parseInt(nt,10))}return/(&|\?)uot=(1|true)/i.test(m)&&(i["udp-over-tcp"]=!0),/(&|\?)tfo=(1|true)/i.test(m)&&(i.tfo=!0),n!=null&&(n=decodeURIComponent(n)),i.name=n??`SS ${i.server}:${i.port}`,i}}}function BV(){return{name:"URI SSR Parser",test:t=>/^ssr:\/\//.test(t),parse:t=>{t=ft.decode(t.split("ssr://")[1]);let r=t.indexOf(":origin");r===-1&&(r=t.indexOf(":auth_"));let n=t.substring(0,r),i=n.substring(0,n.lastIndexOf(":")),u=n.substring(n.lastIndexOf(":")+1),p=t.substring(r+1).split("/?")[0].split(":"),g={type:"ssr",server:i,port:u,protocol:p[0],cipher:p[1],obfs:p[2],password:ft.decode(p[3])},m={};if(t=t.split("/?")[1].split("&"),t.length>1)for(let A of t){let[y,D]=A.split("=");D=D.trim(),D.length>0&&D!=="(null)"&&(m[y]=D)}return g={...g,name:m.remarks?ft.decode(m.remarks):g.server,"protocol-param":fr(ft.decode(m.protoparam||"").replace(/\s/g,"")),"obfs-param":fr(ft.decode(m.obfsparam||"").replace(/\s/g,""))},g}}}function $V(){return{name:"URI VMess Parser",test:t=>/^vmess:\/\//.test(t),parse:t=>{t=t.split("vmess://")[1];let r=ft.decode(t.replace(/\?.*?$/,""));if(/=\s*vmess/.test(r)){let n=r.split(",").map(p=>p.trim()),i={};for(let p of n)if(p.indexOf("=")!==-1){let[g,m]=p.split("=");i[g.trim()]=m.trim()}let u={name:n[0].split("=")[0].trim(),type:"vmess",server:n[1],port:n[2],cipher:fr(n[3],"auto"),uuid:n[4].match(/^"(.*)"$/)[1],tls:i.obfs==="wss",udp:Jc(i["udp-relay"]),tfo:Jc(i["fast-open"]),"skip-cert-verify":Xc(i["tls-verification"])?!i["tls-verification"]:void 0};if(Xc(i.obfs))if(i.obfs==="ws"||i.obfs==="wss"){u.network="ws",u["ws-opts"].path=(fr(i["obfs-path"])||'"/"').match(/^"(.*)"$/)[1];let p=i["obfs-header"];p&&p.indexOf("Host")!==-1&&(p=p.match(/Host:\s*([a-zA-Z0-9-.]*)/)[1]),oa(p)&&(u["ws-opts"].headers={Host:p})}else throw new Error(`Unsupported obfs: ${i.obfs}`);return u}else{let n={};try{n=JSON.parse(r)}catch{let[m,A,y]=/(^[^?]+?)\/?\?(.*)$/.exec(t);r=ft.decode(A);for(let U of y.split("&")){let[nt,X]=U.split("="),j=X;j=decodeURIComponent(X),j.indexOf(",")===-1?n[nt]=j:n[nt]=j.split(",")}let[D,o,M,W,w]=/(^[^:]+?):([^:]+?)@(.*):(\d+)$/.exec(r);n.scy=o,n.id=M,n.port=w,n.add=W}let i=n.add,u=parseInt(Jc(n.port),10),p={name:n.ps??n.remarks??n.remark??`VMess ${i}:${u}`,type:"vmess",server:i,port:u,cipher:["auto","aes-128-gcm","chacha20-poly1305","none"].includes(n.scy)?n.scy:"auto",uuid:n.id,alterId:parseInt(Jc(n.aid??n.alterId,0),10),tls:["tls",!0,1,"1"].includes(n.tls),"skip-cert-verify":Xc(n.verify_cert)?!n.verify_cert:void 0};!p["skip-cert-verify"]&&Xc(n.allowInsecure)&&(p["skip-cert-verify"]=/(TRUE)|1/i.test(n.allowInsecure)),p.tls&&(n.sni&&n.sni!==""?p.sni=n.sni:n.peer&&n.peer!==""&&(p.sni=n.peer));let g=!1;if(n.net==="ws"||n.obfs==="websocket"?p.network="ws":["http"].includes(n.net)||["http"].includes(n.obfs)||["http"].includes(n.type)?p.network="http":["grpc","kcp","quic"].includes(n.net)?p.network=n.net:n.net==="httpupgrade"||p.network==="httpupgrade"?(p.network="ws",g=!0):(n.net==="h2"||p.network==="h2")&&(p.network="h2"),p.network){let m=n.host??n.obfsParam;try{let y=JSON.parse(m)?.Host;y&&(m=y)}catch{}let A=n.path;if(["ws"].includes(p.network)&&(A=A||"/"),p.network==="http"&&(m&&(m=m.split(",").map(y=>y.trim()),m=Array.isArray(m)?m[0]:m),A?A=Array.isArray(A)?A[0]:A:A="/"),A||m||["kcp","quic"].includes(p.network))if(["grpc"].includes(p.network))p[`${p.network}-opts`]={"grpc-service-name":fr(A),"_grpc-type":fr(n.type),"_grpc-authority":fr(n.authority)};else if(["kcp","quic"].includes(p.network))p[`${p.network}-opts`]={[`_${p.network}-type`]:fr(n.type),[`_${p.network}-host`]:fr(fr(m)),[`_${p.network}-path`]:fr(A)};else{let y={path:fr(A),headers:{Host:fr(m)}};g&&(y["v2ray-http-upgrade"]=!0,y["v2ray-http-upgrade-fast-open"]=!0),p[`${p.network}-opts`]=y}else delete p.network}return p["client-fingerprint"]=n.fp,p.alpn=n.alpn?n.alpn.split(","):void 0,p}}}}function pS(){return{name:"URI VLESS Parser",test:t=>/^vless:\/\//.test(t),parse:t=>{t=t.split("vless://")[1];let r,n=/^(.*?)@(.*?):(\d+)\/?(\?(.*?))?(?:#(.*?))?$/.exec(t);if(!n){let[W,w,U]=/^(.*?)(\?.*?$)/.exec(t);t=`${ft.decode(w)}${U}`,n=/^(.*?)@(.*?):(\d+)\/?(\?(.*?))?(?:#(.*?))?$/.exec(t),r=!0}let[i,u,p,g,m,A="",y]=n;r&&(u=u.replace(/^.*?:/g,"")),g=parseInt(`${g}`,10),u=decodeURIComponent(u),y!=null&&(y=decodeURIComponent(y));let D={type:"vless",name:y,server:p,port:g,uuid:u},o={};for(let W of A.split("&"))if(W){let[w,U]=W.split("="),nt=U;nt=decodeURIComponent(U),o[w]=nt}if(D.name=y??o.remarks??o.remark??`VLESS ${p}:${g}`,D.tls=o.security&&o.security!=="none",r&&/TRUE|1/i.test(o.tls)&&(D.tls=!0,o.security=o.security??"reality"),D.sni=o.sni||o.peer,D.flow=o.flow,!D.flow&&r&&o.xtls){let W=[void 0,"xtls-rprx-direct","xtls-rprx-vision"][o.xtls];W&&(D.flow=W)}if(D["client-fingerprint"]=o.fp,D.alpn=o.alpn?o.alpn.split(","):void 0,D["skip-cert-verify"]=/(TRUE)|1/i.test(o.allowInsecure),["reality"].includes(o.security)){let W={};o.pbk&&(W["public-key"]=o.pbk),o.sid&&(W["short-id"]=o.sid),o.spx&&(W["_spider-x"]=o.spx),Object.keys(W).length>0&&(D[`${o.security}-opts`]=W)}let M=!1;if(D.network=o.type,D.network==="tcp"&&o.headerType==="http"?D.network="http":D.network==="httpupgrade"&&(D.network="ws",M=!0),!D.network&&r&&o.obfs&&(D.network=o.obfs,["none"].includes(D.network)&&(D.network="tcp")),["websocket"].includes(D.network)&&(D.network="ws"),D.network&&!["tcp","none"].includes(D.network)){let W={},w=o.host??o.obfsParam;if(w)if(o.obfsParam)try{let U=JSON.parse(w);W.headers=U}catch{W.headers={Host:w}}else W.headers={Host:w};o.serviceName?(W[`${D.network}-service-name`]=o.serviceName,["grpc"].includes(D.network)&&o.authority&&(W["_grpc-authority"]=o.authority)):r&&o.path&&(["ws","http","h2"].includes(D.network)||(W[`${D.network}-service-name`]=o.path,delete o.path)),o.path&&(W.path=o.path),["grpc"].includes(D.network)&&(W["_grpc-type"]=o.mode||"gun"),M&&(W["v2ray-http-upgrade"]=!0,W["v2ray-http-upgrade-fast-open"]=!0),Object.keys(W).length>0&&(D[`${D.network}-opts`]=W),D.network==="kcp"&&(o.seed&&(D.seed=o.seed),D.headerType=o.headerType||"none"),o.mode&&(D._mode=o.mode),o.extra&&(D._extra=o.extra)}return D}}}function RV(){return{name:"URI AnyTLS Parser",test:t=>/^anytls:\/\//.test(t),parse:t=>{let r=pS().parse(t.replace("anytls","vless"));t=t.split(/anytls:\/\//)[1];let[n,i,u,p,g="",m]=/^(.*?)@(.*?)(?::(\d+))?\/?(?:\?(.*?))?(?:#(.*?))?$/.exec(t);i=decodeURIComponent(i),p=parseInt(`${p}`,10),isNaN(p)&&(p=443),i=decodeURIComponent(i),m!=null&&(m=decodeURIComponent(m)),m=m??`AnyTLS ${u}:${p}`;let A={...r,uuid:void 0,type:"anytls",name:m,server:u,port:p,password:i};for(let y of g.split("&"))if(y){let[D,o]=y.split("=");D=D.replace(/_/g,"-"),o=decodeURIComponent(o),["alpn"].includes(D)?A[D]=o?o.split(","):void 0:["insecure"].includes(D)?A["skip-cert-verify"]=/(TRUE)|1/i.test(o):["udp"].includes(D)?A[D]=/(TRUE)|1/i.test(o):Object.keys(A).includes(D)||(A[D]=o)}return["tcp"].includes(A.network)&&!A["reality-opts"]&&(delete A.network,delete A.security),A}}}function xV(){return{name:"URI Hysteria2 Parser",test:t=>/^(hysteria2|hy2):\/\//.test(t),parse:t=>{t=t.split(/(hysteria2|hy2):\/\//)[2];let r,[n,i,u,p,g,m,A,y,D,o,M="",W]=/^(.*?)@(.*?)(:((\d+(-\d+)?)([,;]\d+(-\d+)?)*))?\/?(\?(.*?))?(?:#(.*?))?$/.exec(t);/^\d+$/.test(g)?(g=parseInt(`${g}`,10),isNaN(g)&&(g=443)):g?(r=g,g=$f(r)):g=443,i=decodeURIComponent(i),W!=null&&(W=decodeURIComponent(W)),W=W??`Hysteria2 ${u}:${g}`;let w={type:"hysteria2",name:W,server:u,port:g,ports:r,password:i},U={};for(let j of M.split("&"))if(j){let[it,ot]=j.split("="),K=ot;K=decodeURIComponent(ot),U[it]=K}w.sni=U.sni,!w.sni&&U.peer&&(w.sni=U.peer),U.obfs&&U.obfs!=="none"&&(w.obfs=U.obfs),U.mport&&(w.ports=U.mport),w["obfs-password"]=U["obfs-password"],w["skip-cert-verify"]=/(TRUE)|1/i.test(U.insecure),w.tfo=/(TRUE)|1/i.test(U.fastopen),w["tls-fingerprint"]=U.pinSHA256;let nt=U["hop-interval"]||U.hop_interval;/^\d+$/.test(nt)&&(w["hop-interval"]=parseInt(`${nt}`,10));let X=U.keepalive;return/^\d+$/.test(X)&&(w.keepalive=parseInt(`${X}`,10)),w}}}function PV(){return{name:"URI Hysteria Parser",test:t=>/^(hysteria|hy):\/\//.test(t),parse:t=>{t=t.split(/(hysteria|hy):\/\//)[2];let[r,n,i,u,p,g="",m]=/^(.*?)(:(\d+))?\/?(\?(.*?))?(?:#(.*?))?$/.exec(t);u=parseInt(`${u}`,10),isNaN(u)&&(u=443),m!=null&&(m=decodeURIComponent(m)),m=m??`Hysteria ${n}:${u}`;let A={type:"hysteria",name:m,server:n,port:u},y={};for(let D of g.split("&"))if(D){let[o,M]=D.split("=");o=o.replace(/_/,"-"),M=decodeURIComponent(M),["alpn"].includes(o)?A[o]=M?M.split(","):void 0:["insecure"].includes(o)?A["skip-cert-verify"]=/(TRUE)|1/i.test(M):["auth"].includes(o)?A["auth-str"]=M:["mport"].includes(o)?A.ports=M:["obfsParam"].includes(o)?A.obfs=M:["upmbps"].includes(o)?A.up=M:["downmbps"].includes(o)?A.down=M:["obfs"].includes(o)?A._obfs=M||"":["fast-open","peer"].includes(o)?y[o]=M:Object.keys(A).includes(o)||(A[o]=M)}return!A.sni&&y.peer&&(A.sni=y.peer),!A["fast-open"]&&y.fastopen&&(A["fast-open"]=!0),A.protocol||(A.protocol="udp"),A}}}function OV(){return{name:"URI TUIC Parser",test:t=>/^tuic:\/\//.test(t),parse:t=>{t=t.split(/tuic:\/\//)[1];let[r,n,i,u,p="",g]=/^(.*?)@(.*?)(?::(\d+))?\/?(?:\?(.*?))?(?:#(.*?))?$/.exec(t);n=decodeURIComponent(n);let[m,...A]=n.split(":"),y=A.join(":");u=parseInt(`${u}`,10),isNaN(u)&&(u=443),y=decodeURIComponent(y),g!=null&&(g=decodeURIComponent(g)),g=g??`TUIC ${i}:${u}`;let D={type:"tuic",name:g,server:i,port:u,password:y,uuid:m};for(let o of p.split("&"))if(o){let[M,W]=o.split("=");M=M.replace(/_/g,"-"),W=decodeURIComponent(W),["alpn"].includes(M)?D[M]=W?W.split(","):void 0:["allow-insecure","insecure"].includes(M)?D["skip-cert-verify"]=/(TRUE)|1/i.test(W):["fast-open"].includes(M)?D.tfo=!0:["disable-sni","reduce-rtt"].includes(M)?D[M]=/(TRUE)|1/i.test(W):M==="congestion-control"?(D["congestion-controller"]=W,delete D[M]):Object.keys(D).includes(M)||(D[M]=W)}return D}}}function TV(){return{name:"URI WireGuard Parser",test:t=>/^(wireguard|wg):\/\//.test(t),parse:t=>{t=t.split(/(wireguard|wg):\/\//)[2];let[r,n,i,u,p,g,m,A="",y]=/^((.*?)@)?(.*?)(:(\d+))?\/?(\?(.*?))?(?:#(.*?))?$/.exec(t);g=parseInt(`${g}`,10),isNaN(g)&&(g=51820),i=decodeURIComponent(i),y!=null&&(y=decodeURIComponent(y)),y=y??`WireGuard ${u}:${g}`;let D={type:"wireguard",name:y,server:u,port:g,"private-key":i,udp:!0};for(let o of A.split("&"))if(o){let[M,W]=o.split("=");if(M=M.replace(/_/,"-"),W=decodeURIComponent(W),["reserved"].includes(M)){let w=W.split(",").map(U=>parseInt(U.trim(),10)).filter(U=>Number.isInteger(U));w.length===3&&(D[M]=w)}else if(["address","ip"].includes(M))W.split(",").map(w=>{let U=w.trim().replace(/\/\d+$/,"").replace(/^\[/,"").replace(/\]$/,"");Yr(U)?D.ip=U:Mr(U)&&(D.ipv6=U)});else if(["mtu"].includes(M)){let w=parseInt(W.trim(),10);Number.isInteger(w)&&(D[M]=w)}else/publickey/i.test(M)?D["public-key"]=W:/privatekey/i.test(M)?D["private-key"]=W:["udp"].includes(M)?D[M]=/(TRUE)|1/i.test(W):[...Object.keys(D),"flag"].includes(M)||(D[M]=W)}return D}}}function NV(){return{name:"URI Trojan Parser",test:t=>/^trojan:\/\//.test(t),parse:t=>{let r=/^(trojan:\/\/.*?@.*?)(:(\d+))?\/?(\?.*?)?$/.exec(t);r?.[2]||(t=t.replace(r[1],`${r[1]}:443`));let[n,i]=t.split(/#(.+)/,2),u=tw().parse(n);if(oa(i))try{u.name=decodeURIComponent(i)}catch{}return u}}}function kV(){return{name:"Clash Parser",test:t=>{let r;try{r=sw.default.parse(t)}catch{r=da.parse(t)}return!!r?.type},parse:t=>{let r;try{r=sw.default.parse(t)}catch{r=da.parse(t)}if(!["anytls","mieru","juicity","ss","ssr","vmess","socks5","http","snell","trojan","tuic","vless","hysteria","hysteria2","wireguard","ssh","direct"].includes(r.type))throw new Error(`Clash does not support proxy with type: ${r.type}`);return["vmess","vless"].includes(r.type)&&(r.sni=r.servername,delete r.servername),r["server-cert-fingerprint"]&&(r["tls-fingerprint"]=r["server-cert-fingerprint"]),r.fingerprint&&(r["tls-fingerprint"]=r.fingerprint),r["dialer-proxy"]&&(r["underlying-proxy"]=r["dialer-proxy"]),r["benchmark-url"]&&(r["test-url"]=r["benchmark-url"]),r["benchmark-timeout"]&&(r["test-timeout"]=r["benchmark-timeout"]),r}}}function LV(){return{name:"QX SS Parser",test:t=>/^shadowsocks\s*=/.test(t.split(",")[0].trim())&&t.indexOf("ssr-protocol")===-1,parse:t=>Su().parse(t)}}function UV(){return{name:"QX SSR Parser",test:t=>/^shadowsocks\s*=/.test(t.split(",")[0].trim())&&t.indexOf("ssr-protocol")!==-1,parse:t=>Su().parse(t)}}function jV(){return{name:"QX VMess Parser",test:t=>/^vmess\s*=/.test(t.split(",")[0].trim()),parse:t=>Su().parse(t)}}function HV(){return{name:"QX VLESS Parser",test:t=>/^vless\s*=/.test(t.split(",")[0].trim()),parse:t=>Su().parse(t)}}function MV(){return{name:"QX Trojan Parser",test:t=>/^trojan\s*=/.test(t.split(",")[0].trim()),parse:t=>Su().parse(t)}}function qV(){return{name:"QX HTTP Parser",test:t=>/^http\s*=/.test(t.split(",")[0].trim()),parse:t=>Su().parse(t)}}function VV(){return{name:"QX Socks5 Parser",test:t=>/^socks5\s*=/.test(t.split(",")[0].trim()),parse:t=>Su().parse(t)}}function KV(){return{name:"Loon SS Parser",test:t=>t.split(",")[0].split("=")[1].trim().toLowerCase()==="shadowsocks",parse:t=>Ta().parse(t)}}function zV(){return{name:"Loon SSR Parser",test:t=>t.split(",")[0].split("=")[1].trim().toLowerCase()==="shadowsocksr",parse:t=>Ta().parse(t)}}function GV(){return{name:"Loon VMess Parser",test:t=>/^.*=\s*vmess/i.test(t.split(",")[0])&&t.indexOf("username")===-1,parse:t=>Ta().parse(t)}}function YV(){return{name:"Loon Vless Parser",test:t=>/^.*=\s*vless/i.test(t.split(",")[0]),parse:t=>Ta().parse(t)}}function WV(){return{name:"Loon Trojan Parser",test:t=>/^.*=\s*trojan/i.test(t.split(",")[0]),parse:t=>Ta().parse(t)}}function XV(){return{name:"Loon Hysteria2 Parser",test:t=>/^.*=\s*Hysteria2/i.test(t.split(",")[0]),parse:t=>Ta().parse(t)}}function JV(){return{name:"Loon HTTP Parser",test:t=>/^.*=\s*http/i.test(t.split(",")[0]),parse:t=>Ta().parse(t)}}function ZV(){return{name:"Loon SOCKS5 Parser",test:t=>/^.*=\s*socks5/i.test(t.split(",")[0]),parse:t=>Ta().parse(t)}}function QV(){return{name:"Loon WireGuard Parser",test:t=>/^.*=\s*wireguard/i.test(t.split(",")[0]),parse:t=>{let r=t.match(/(^.*?)\s*?=\s*?wireguard\s*?,.+?\s*?=\s*?.+?/i)?.[1];t=t.replace(r,"").replace(/^\s*?=\s*?wireguard\s*/i,"");let n=t.match(/,\s*?peers\s*?=\s*?\[\s*?\{\s*?(.+?)\s*?\}\s*?\]/i)?.[1],i=n.match(/(,|^)\s*?endpoint\s*?=\s*?"?(.+?):(\d+)"?\s*?(,|$)/i),u=i?.[2],p=parseInt(i?.[3],10),g=t.match(/(,|^)\s*?mtu\s*?=\s*?"?(\d+?)"?\s*?(,|$)/i)?.[2];g&&(g=parseInt(g,10));let m=t.match(/(,|^)\s*?keepalive\s*?=\s*?"?(\d+?)"?\s*?(,|$)/i)?.[2];m&&(m=parseInt(m,10));let A=n.match(/(,|^)\s*?reserved\s*?=\s*?"?(\[\s*?.+?\s*?\])"?\s*?(,|$)/i)?.[2];A&&(A=JSON.parse(A));let y,D=t.match(/(,|^)\s*?dns\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],o=t.match(/(,|^)\s*?dnsv6\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2];(D||o)&&(y=[],D&&y.push(D),o&&y.push(o));let M=n.match(/(,|^)\s*?allowed-ips\s*?=\s*?"(.+?)"\s*?(,|$)/i)?.[2]?.split(",").map(j=>j.trim()),W=n.match(/(,|^)\s*?preshared-key\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],w=t.match(/(,|^)\s*?interface-ip\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],U=t.match(/(,|^)\s*?interface-ipv6\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],nt=n.match(/(,|^)\s*?public-key\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],X={type:"wireguard",name:r,server:u,port:p,ip:w,ipv6:U,"private-key":t.match(/(,|^)\s*?private-key\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],"public-key":nt,mtu:g,keepalive:m,reserved:A,"allowed-ips":M,"preshared-key":W,dns:y,udp:!0,peers:[{server:u,port:p,ip:w,ipv6:U,"public-key":nt,"pre-shared-key":W,"allowed-ips":M,reserved:A}]};return Array.isArray(X.dns)&&X.dns.length>0&&(X["remote-dns-resolve"]=!0),X}}}function eK(){return{name:"Surge Direct Parser",test:t=>/^.*=\s*direct/.test(t.split(",")[0]),parse:t=>is().parse(t)}}function tK(){return{name:"Surge SSH Parser",test:t=>/^.*=\s*ssh/.test(t.split(",")[0]),parse:t=>is().parse(t)}}function rK(){return{name:"Surge SS Parser",test:t=>/^.*=\s*ss/.test(t.split(",")[0]),parse:t=>is().parse(t)}}function nK(){return{name:"Surge VMess Parser",test:t=>/^.*=\s*vmess/.test(t.split(",")[0])&&t.indexOf("username")!==-1,parse:t=>is().parse(t)}}function iK(){return{name:"Surge Trojan Parser",test:t=>/^.*=\s*trojan/.test(t.split(",")[0]),parse:t=>is().parse(t)}}function sK(){return{name:"Surge HTTP Parser",test:t=>/^.*=\s*https?/.test(t.split(",")[0]),parse:t=>is().parse(t)}}function aK(){return{name:"Surge Socks5 Parser",test:t=>/^.*=\s*socks5(-tls)?/.test(t.split(",")[0]),parse:t=>is().parse(t)}}function uK(){return{name:"Surge External Parser",test:t=>/^.*=\s*external/.test(t.split(",")[0]),parse:t=>{let r=/^\s*(.*?)\s*?=\s*?external\s*?,\s*(.*?)\s*$/.exec(t),[n,i,u]=r;t=u;let p=/(,|^)\s*?exec\s*?=\s*"(.*?)"\s*?(,|$)/.exec(t)?.[2];p||(p=/(,|^)\s*?exec\s*?=\s*(.*?)\s*?(,|$)/.exec(t)?.[2]);let g=/(,|^)\s*?local-port\s*?=\s*"(.*?)"\s*?(,|$)/.exec(t)?.[2];g||(g=/(,|^)\s*?local-port\s*?=\s*(.*?)\s*?(,|$)/.exec(t)?.[2]);let m=/(,|^)\s*?args\s*?=\s*("(.*?)"|(.*?))(?=\s*?(,|$))/g,A,y=[];for(;(A=m.exec(t))!==null;)A[3]!=null?y.push(A[3]):A[4]!=null&&y.push(A[4]);let D=/(,|^)\s*?addresses\s*?=\s*("(.*?)"|(.*?))(?=\s*?(,|$))/g,o,M=[];for(;(o=D.exec(t))!==null;){let W;o[3]!=null?W=o[3]:o[4]!=null&&(W=o[4]),W!=null&&(W=`${W}`.trim().replace(/^\[/,"").replace(/\]$/,"")),hK(W)&&M.push(W)}return{type:"external",name:i,exec:p,"local-port":g,args:y,addresses:M}}}}function oK(){return{name:"Surge Snell Parser",test:t=>/^.*=\s*snell/.test(t.split(",")[0]),parse:t=>is().parse(t)}}function cK(){return{name:"Surge Tuic Parser",test:t=>/^.*=\s*tuic(-v5)?/.test(t.split(",")[0]),parse:t=>{let{port_hopping:r,line:n}=dS(t),i=is().parse(n);return i.ports=r,i}}}function lK(){return{name:"Surge WireGuard Parser",test:t=>/^.*=\s*wireguard/.test(t.split(",")[0]),parse:t=>is().parse(t)}}function fK(){return{name:"Surge Hysteria2 Parser",test:t=>/^.*=\s*hysteria2/.test(t.split(",")[0]),parse:t=>{let{port_hopping:r,line:n}=dS(t),i=is().parse(n);return i.ports=r,i}}}function hK(t){return Yr(t)||Mr(t)}var gS=[FV(),SV(),IV(),BV(),$V(),pS(),OV(),TV(),PV(),xV(),NV(),RV(),kV(),eK(),tK(),rK(),nK(),iK(),sK(),oK(),cK(),lK(),fK(),aK(),uK(),KV(),zV(),GV(),YV(),XV(),WV(),JV(),ZV(),QV(),LV(),UV(),jV(),HV(),MV(),qV(),VV()],Ds=class{constructor({token,key,syncPlatform}){let{isStash,isLoon,isShadowRocket,isQX}=hn(),{defaultProxy,defaultTimeout:timeout,githubProxy}=R.read(Kt),proxy=defaultProxy;R.env.isNode&&(proxy=proxy||eval("process.env.SUB_STORE_BACKEND_DEFAULT_PROXY")),syncPlatform==="gitlab"?(this.headers={"PRIVATE-TOKEN":`${token}`,"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.141 Safari/537.36"},this.http=xs({baseURL:"https://gitlab.com/api/v4",headers:{...this.headers,...isStash&&proxy?{"X-Stash-Selected-Proxy":encodeURIComponent(proxy)}:{},...isShadowRocket&&proxy?{"X-Surge-Policy":proxy}:{}},...proxy?{proxy}:{},...isLoon&&proxy?{node:proxy}:{},...isQX&&proxy?{opts:{policy:proxy}}:{},...proxy?ru(proxy):{},timeout:timeout||8e3,events:{onResponse:t=>{if(/^[45]/.test(String(t.statusCode))){let r=JSON.parse(t.body);return Promise.reject(`ERROR: ${r.message?.error??r.message}`)}else return t}}})):(this.headers={Authorization:`token ${token}`,"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.141 Safari/537.36"},this.http=xs({baseURL:`${githubProxy?`${githubProxy}/`:""}https://api.github.com`,headers:{...this.headers,...isStash&&proxy?{"X-Stash-Selected-Proxy":encodeURIComponent(proxy)}:{},...isShadowRocket&&proxy?{"X-Surge-Policy":proxy}:{}},...proxy?{proxy}:{},...isLoon&&proxy?{node:proxy}:{},...isQX&&proxy?{opts:{policy:proxy}}:{},...proxy?ru(proxy):{},timeout:timeout||8e3,events:{onResponse:t=>/^[45]/.test(String(t.statusCode))?Promise.reject(`ERROR: ${JSON.parse(t.body).message}`):t}})),this.key=key,this.syncPlatform=syncPlatform}async locate(){return this.syncPlatform==="gitlab"?this.http.get("/snippets").then(t=>{let r=JSON.parse(t.body);for(let n of r)if(n.title===this.key)return n}):this.http.get("/gists?per_page=100&page=1").then(t=>{let r=JSON.parse(t.body);R.info(`\u83B7\u53D6\u5230\u5F53\u524D GitHub \u7528\u6237\u7684 gist: ${r.length} \u4E2A`);for(let n of r)if(n.description===this.key)return n})}async upload(t){if(Object.keys(t).length===0)return Promise.reject("\u672A\u63D0\u4F9B\u9700\u4E0A\u4F20\u7684\u6587\u4EF6");let r=await this.locate(),n=t;if(r?.id){this.syncPlatform==="gitlab"&&(r.files=r.files.reduce((p,g)=>(p[g.path]=g,p),{}));let i=[],u={...r.files};return Object.keys(n).map(p=>{u[p]?n[p].content==null||n[p].content===""?(delete u[p],i.push({action:"delete",file_path:p})):(u[p]=n[p],i.push({action:"update",file_path:p,content:n[p].content})):n[p].content==null||n[p].content===""?(delete u[p],delete n[p]):(u[p]=n[p],i.push({action:"create",file_path:p,content:n[p].content}))}),this.syncPlatform==="gitlab"?Object.keys(u).length===0?Promise.reject("\u672C\u6B21\u64CD\u4F5C\u5C06\u5BFC\u81F4\u6240\u6709\u6587\u4EF6\u7684\u5185\u5BB9\u90FD\u4E3A\u7A7A, \u65E0\u6CD5\u66F4\u65B0 snippet"):Object.keys(u).length>10?Promise.reject("\u672C\u6B21\u64CD\u4F5C\u5C06\u5BFC\u81F4 snippet \u7684\u6587\u4EF6\u6570\u8D85\u8FC7 10, \u65E0\u6CD5\u66F4\u65B0 snippet"):(n=i,this.http.put({headers:{...this.headers,"Content-Type":"application/json"},url:`/snippets/${r.id}`,body:JSON.stringify({files:n})})):Object.keys(u).length===0?Promise.reject("\u672C\u6B21\u64CD\u4F5C\u5C06\u5BFC\u81F4\u6240\u6709\u6587\u4EF6\u7684\u5185\u5BB9\u90FD\u4E3A\u7A7A, \u65E0\u6CD5\u66F4\u65B0 gist"):this.http.patch({url:`/gists/${r.id}`,body:JSON.stringify({files:n})})}else return n=Object.entries(n).reduce((i,[u,p])=>(p.content!==null&&p.content!==""&&(i[u]=p),i),{}),this.syncPlatform==="gitlab"?Object.keys(n).length===0?Promise.reject("\u6240\u6709\u6587\u4EF6\u7684\u5185\u5BB9\u90FD\u4E3A\u7A7A, \u65E0\u6CD5\u521B\u5EFA snippet"):(n=Object.keys(n).map(i=>({file_path:i,content:n[i].content})),this.http.post({headers:{...this.headers,"Content-Type":"application/json"},url:"/snippets",body:JSON.stringify({title:this.key,visibility:"private",files:n})})):Object.keys(n).length===0?Promise.reject("\u6240\u6709\u6587\u4EF6\u7684\u5185\u5BB9\u90FD\u4E3A\u7A7A, \u65E0\u6CD5\u521B\u5EFA gist"):this.http.post({url:"/gists",body:JSON.stringify({description:this.key,public:!1,files:n})})}async download(t){let r=await this.locate();if(r?.id)try{let{files:n}=await this.http.get(`/gists/${r.id}`).then(u=>JSON.parse(u.body)),i=n[t].raw_url;return await this.http.get(i).then(u=>u.body)}catch(n){return Promise.reject(n)}else return Promise.reject(`\u627E\u4E0D\u5230 Sub-Store Gist (${this.key})`)}},ES=tn(iw());function dK(t){for(let r of V0)try{if(r.test(t))return R.info(`Pre-processor [${r.name}] activated`),r.parse(t)}catch(n){R.error(`Parser [${r.name}] failed
 Reason: ${n}`)}return t}function pK(t){t=dK(t);let r=t.split(`
`),n=[],i;for(let u of r){if(u=u.trim(),u.length===0)continue;let p=!1;if(i){let[g,m]=mS(i,u);m||(n.push(wS(g)),p=!0)}if(!p)for(let g of gS){let[m,A]=mS(g,u);if(!A){n.push(wS(m)),i=g,p=!0,R.info(`${g.name} is activated`);break}}p||R.error(`Failed to parse line: ${u}`)}return n.filter(u=>(["vless","vmess"].includes(u.type)&&(i0(u.uuid)||R.error(`UUID may be invalid: ${u.name} ${u.uuid}`)),!0))}async function gK(t,r=[],n,i,u){for(let p of r){if(p.disabled){R.log(`Skipping disabled operator: "${p.type}" with arguments:
 >>> ${JSON.stringify(p.args,null,2)||"None"}`);continue}let g,m={};if(p.type.indexOf("Script")!==-1){let{mode:y,content:D}=p.args;if(y==="link"){let o=D||"",M=o.split("#");if(M.length>1)try{m=JSON.parse(decodeURIComponent(M[1]))}catch{for(let w of M[1].split("&")){let U=w.split("=")[0],nt=w.split("=")[1];m[U]=nt==null||nt===""?!0:decodeURIComponent(nt)}}o=`${o.split("#")[0]}${M[2]?`#${M[2]}`:m?.noCache!=null||m?.insecure!=null?`#${M[1]}`:""}`;let W=o.split("#")[0].match(/^\/api\/(file|module)\/(.+)/);if(W){let w="";try{w=W?.[1];let U=W?.[2];if(U==null)throw new Error(`\u672C\u5730 ${w} URL \u65E0\u6548: ${o}`);U=decodeURIComponent(U);let nt=w==="module"?jn:Lt,X=ct(R.read(nt),U);if(!X)throw new Error(`\u627E\u4E0D\u5230 ${w}: ${U}`);w==="module"?g=X.content:g=await vn({type:"file",name:U})}catch(U){throw R.error(`Error when loading ${w}: ${p.args.content}.
 Reason: ${U}`),new Error(`\u65E0\u6CD5\u52A0\u8F7D ${w}: ${o}`)}}else if(o?.startsWith("/"))try{g=require("fs").readFileSync(o.split("#")[0],"utf8")}catch(w){throw R.error(`Error when reading local script: ${p.args.content}.
 Reason: ${w}`),new Error(`\u65E0\u6CD5\u4ECE\u8BE5\u8DEF\u5F84\u8BFB\u53D6\u811A\u672C\u6587\u4EF6: ${o}`)}else try{g=await un(o)}catch(w){throw R.error(`Error when downloading remote script: ${p.args.content}.
 Reason: ${w}`),new Error(`\u65E0\u6CD5\u4E0B\u8F7D\u811A\u672C: ${o}`)}}else g=D,m=p.args.arguments||{}}if(!q0[p.type]){R.error(`Unknown operator: "${p.type}"`);continue}R.log(`Applying "${p.type}" with arguments:
 >>> ${JSON.stringify(p.args,null,2)||"None"}`);let A;p.type.indexOf("Script")!==-1?A=q0[p.type](g,n,m,i,u):A=q0[p.type](p.args||{}),t=await uC(A,t)}return t}function mK(t,r,n,i={}){let u=Pp[r];if(!u)throw new Error(`Target platform: ${r} is not supported!`);let p=/Surge|SurgeMac|Shadowrocket/i.test(r);if(t=t.filter(g=>g.supported&&g.supported[r]===!1?!1:(["vless","vmess"].includes(g.type)&&(i0(g.uuid)||R.error(`UUID may be invalid: ${g.name} ${g.uuid}`)),!0)),t=t.map(g=>(g._resolved=g.resolved,oa(g.name)||(g.name=`${g.type} ${g.server}:${g.port}`),g["disable-sni"]&&(p?g.sni="off":["tuic"].includes(g.type)||(R.error(`Target platform ${r} does not support sni off. Proxy's fields (sni, tls-fingerprint and skip-cert-verify) will be modified.`),g.sni="",g["skip-cert-verify"]=!0,delete g["tls-fingerprint"])),g.ports&&(g.ports=String(g.ports),["ClashMeta"].includes(r)||(g.ports=g.ports.replace(/\//g,",")),g.port||(g.port=$f(g.ports))),g)),R.log(`Producing proxies for target: ${r}`),typeof u.type>"u"||u.type==="SINGLE"){let g=t.map(m=>{try{return u.produce(m,n,i)}catch(A){return R.error(`Cannot produce proxy: ${JSON.stringify(m,null,2)}
Reason: ${A}`),""}}).filter(m=>m.length>0);return g=n==="internal"?g:g.join(`
`),r.startsWith("Surge")&&t.length>0&&t.every(m=>m.type==="wireguard")&&(g=`#!name=${t[0]?._subName}
#!desc=${t[0]?._desc??""}
#!category=${t[0]?._category??""}
${g}`),g}else if(u.type==="ALL")return u.produce(t,n,i)}var Ot={parse:pK,process:gK,produce:mK,ipAddress:n0,getRandomPort:$f,isIPv4:Yr,isIPv6:Mr,isIP:aw,yaml:da,getFlag:El,removeFlag:Gf,getISO:k0,MMDB:N0,Gist:Ds,download:un,downloadFile:Kh,isValidUUID:i0,doh:yl,Buffer:Mp.Buffer,Base64:ft,JSON5:ES.default};function mS(t,r){if(!vK(t,r))return[null,new Error("Parser mismatch")];try{return[t.parse(r),null]}catch(n){return[null,n]}}function vK(t,r){try{return t.test(r)}catch{return!1}}function vS(t){if(typeof t=="string"||typeof t=="number"){if(t=String(t).trim(),t==="")return"/";if(!t.startsWith("/"))return"/"+t}return t}function wS(t){typeof t.cipher=="string"&&(t.cipher=t.cipher.toLowerCase()),typeof t.password=="number"&&(t.password=ty(t.password)),["ss"].includes(t.type)&&t.cipher==="none"&&!t.password&&(t.password=""),t.interface&&(t["interface-name"]=t.interface,delete t.interface),ey(t.port)&&(t.port=parseInt(t.port,10)),t.server&&(t.server=`${t.server}`.trim().replace(/^\[/,"").replace(/\]$/,"")),t.network==="ws"&&(!t["ws-opts"]&&(t["ws-path"]||t["ws-headers"])&&(t["ws-opts"]={},t["ws-path"]&&(t["ws-opts"].path=t["ws-path"]),t["ws-headers"]&&(t["ws-opts"].headers=t["ws-headers"])),delete t["ws-path"],delete t["ws-headers"]);let r=t[`${t.network}-opts`]?.path;if(Array.isArray(r)?t[`${t.network}-opts`].path=r.map(i=>vS(i)):r!=null&&(t[`${t.network}-opts`].path=vS(r)),t.type==="trojan"&&t.network==="tcp"&&delete t.network,["vless"].includes(t.type)&&(t.network||(t.network="tcp")),["trojan","tuic","hysteria","hysteria2","juicity","anytls"].includes(t.type)&&(t.tls=!0),t.network){let i=t[`${t.network}-opts`]?.headers?.Host,u=t[`${t.network}-opts`]?.headers?.host;t.network==="h2"?!u&&i&&(t[`${t.network}-opts`].headers.host=i,delete t[`${t.network}-opts`].headers.Host):u&&!i&&(t[`${t.network}-opts`].headers.Host=u,delete t[`${t.network}-opts`].headers.host)}if(t.network==="h2"){let i=t["h2-opts"]?.headers?.host,u=t["h2-opts"]?.path;i&&!Array.isArray(i)&&(t["h2-opts"].headers.host=[i]),Array.isArray(u)&&(t["h2-opts"].path=u[0])}if(!t.tls&&["ws","http"].includes(t.network)&&!t[`${t.network}-opts`]?.headers?.Host&&!aw(t.server)&&(t[`${t.network}-opts`]=t[`${t.network}-opts`]||{},t[`${t.network}-opts`].headers=t[`${t.network}-opts`].headers||{},t[`${t.network}-opts`].headers.Host=["vmess","vless"].includes(t.type)&&t.network==="http"?[t.server]:t.server),["vmess","vless"].includes(t.type)&&t.network==="http"){let i=t[`${t.network}-opts`]?.path,u=t[`${t.network}-opts`]?.headers?.Host;u&&!Array.isArray(u)&&(t[`${t.network}-opts`].headers.Host=[u]),i&&!Array.isArray(i)&&(t[`${t.network}-opts`].path=[i])}if(t.tls&&!t.sni&&(aw(t.server)||(t.sni=t.server),!t.sni&&t.network)){let i=t[`${t.network}-opts`]?.headers?.Host;i=Array.isArray(i)?i[0]:i,i&&(t.sni=i)}if(t.ports?t.ports=String(t.ports).replace(/\//g,","):delete t.ports,["hysteria2"].includes(t.type)&&t.obfs&&!["salamander"].includes(t.obfs)&&!t["obfs-password"]&&(t["obfs-password"]=t.obfs,t.obfs="salamander"),["hysteria2"].includes(t.type)&&!t["obfs-password"]&&t.obfs_password&&(t["obfs-password"]=t.obfs_password,delete t.obfs_password),["vless"].includes(t.type)&&(t["reality-opts"]&&Object.keys(t["reality-opts"]).length===0&&delete t["reality-opts"],t["grpc-opts"]&&Object.keys(t["grpc-opts"]).length===0&&delete t["grpc-opts"],!t["reality-opts"]&&!t.flow&&delete t.flow,["http"].includes(t.network)&&(t[`${t.network}-opts`]?.path||(t[`${t.network}-opts`]||(t[`${t.network}-opts`]={}),t[`${t.network}-opts`].path=["/"]))),typeof t.name!="string")if(/^\d+$/.test(t.name))t.name=`${t.name}`;else try{t.name?.data?t.name=Mp.Buffer.from(t.name.data).toString("utf8"):t.name=Mp.Buffer.from(t.name).toString("utf8")}catch(i){R.error(`proxy.name decode failed
Reason: ${i}`),t.name=`${t.type} ${t.server}:${t.port}`}["ws","http","h2"].includes(t.network)&&(["ws","h2"].includes(t.network)&&!t[`${t.network}-opts`]?.path?(t[`${t.network}-opts`]=t[`${t.network}-opts`]||{},t[`${t.network}-opts`].path="/"):t.network==="http"&&(!Array.isArray(t[`${t.network}-opts`]?.path)||t[`${t.network}-opts`]?.path.every(i=>!i))&&(t[`${t.network}-opts`]=t[`${t.network}-opts`]||{},t[`${t.network}-opts`].path=["/"])),["","off"].includes(t.sni)&&(t["disable-sni"]=!0);let n=t.ca_str;t["ca-str"]?n=t["ca-str"]:n&&(delete t.ca_str,t["ca-str"]=n);try{R.env.isNode&&!n&&t._ca&&(n=R.node.fs.readFileSync(t._ca,{encoding:"utf8"}))}catch(i){R.error(`Read ca file failed
Reason: ${i}`)}return!t["tls-fingerprint"]&&n&&(t["tls-fingerprint"]=Gy.generateFingerprint(n)),["ss"].includes(t.type)&&ue(t,"shadow-tls-password")&&(t.plugin="shadow-tls",t["plugin-opts"]={host:t["shadow-tls-sni"],password:t["shadow-tls-password"],version:t["shadow-tls-version"]},delete t["shadow-tls-sni"],delete t["shadow-tls-password"],delete t["shadow-tls-version"]),t}function aw(t){return Yr(t)||Mr(t)}function wK(){return{name:"HTML",test:t=>/^<!DOCTYPE html>/.test(t),parse:()=>""}}function EK(){return{name:"Clash Provider",test:t=>/^payload:/gm.exec(t).index>=0,parse:t=>t.replace("payload:","").replace(/^\s*-\s*/gm,"")}}var AS=[wK(),EK()];function AK(){return{type:"SINGLE",func:t=>["URL-REGEX","DEST-PORT","SRC-IP","IN-PORT","PROTOCOL","GEOSITE","GEOIP"].indexOf(t.type)!==-1?null:`${{"DOMAIN-KEYWORD":"HOST-KEYWORD","DOMAIN-SUFFIX":"HOST-SUFFIX",DOMAIN:"HOST","IP-CIDR6":"IP6-CIDR"}[t.type]||t.type},${t.content},SUB-STORE`}}function yS(){return{type:"SINGLE",func:t=>{if(["GEOSITE","GEOIP"].indexOf(t.type)!==-1)return null;let r=`${t.type},${t.content}`;return["IP-CIDR","IP-CIDR6"].includes(t.type)&&(r+=t.options?.length>0?`,${t.options.join(",")}`:""),r}}}function yK(){return{type:"SINGLE",func:t=>["SRC-IP","GEOSITE","GEOIP"].indexOf(t.type)!==-1?null:(["IP-CIDR","IP-CIDR6"].includes(t.type)&&t.options&&(t.options=t.options.filter(r=>["no-resolve"].includes(r))),yS().func(t))}}function bK(){return{type:"ALL",func:t=>{let r={"DEST-PORT":"DST-PORT","SRC-IP":"SRC-IP-CIDR","IN-PORT":"SRC-PORT"},n={payload:t.map(i=>{let u=`${r[i.type]||i.type},${i.content}`;return["IP-CIDR","IP-CIDR6","GEOIP"].includes(i.type)&&(i.options&&(i.options=i.options.filter(p=>["no-resolve"].includes(p))),u+=i.options?.length>0?`,${i.options.join(",")}`:""),u})};return da.dump(n)}}}var bS={QX:AK(),Surge:yS(),Loon:yK(),Clash:bK()},_K=[[/^(DOMAIN|host|HOST)$/,"DOMAIN"],[/^(DOMAIN-KEYWORD|host-keyword|HOST-KEYWORD)$/,"DOMAIN-KEYWORD"],[/^(DOMAIN-SUFFIX|host-suffix|HOST-SUFFIX)$/,"DOMAIN-SUFFIX"],[/^USER-AGENT$/i,"USER-AGENT"],[/^PROCESS-NAME$/,"PROCESS-NAME"],[/^(DEST-PORT|DST-PORT)$/,"DST-PORT"],[/^SRC-IP(-CIDR)?$/,"SRC-IP"],[/^(IN|SRC)-PORT$/,"IN-PORT"],[/^PROTOCOL$/,"PROTOCOL"],[/^IP-CIDR$/i,"IP-CIDR"],[/^(IP-CIDR6|ip6-cidr|IP6-CIDR)$/,"IP-CIDR6"],[/^GEOIP$/i,"GEOIP"],[/^GEOSITE$/i,"GEOSITE"]];function CK(){return{name:"Universal Rule Parser",test:()=>!0,parse:t=>{let r=t.split(`
`),n=[];for(let i of r)if(i=i.trim(),i.length!==0&&!/\s*#/.test(i))try{let u=i.split(",").map(m=>m.trim()),p=u[0],g=!1;for(let m of _K)if(m[0].test(p)){g=!0;let A={type:m[1],content:u[1]};["IP-CIDR","IP-CIDR6","GEOIP"].includes(A.type)&&(A.options=u.slice(2)),n.push(A)}if(!g)throw new Error("Invalid rule type: "+p)}catch{}return n}}}var _S=[CK()],Ec=(function(){function t(i){for(let u of AS)try{if(u.test(i))return R.info(`Pre-processor [${u.name}] activated`),u.parse(i)}catch(p){R.error(`Parser [${u.name}] failed
 Reason: ${p}`)}return i}function r(i){i=t(i);for(let u of _S){let p;try{p=u.test(i)}catch{p=!1}if(p)return R.info(`Rule parser [${u.name}] is activated!`),u.parse(i)}}function n(i,u){let p=bS[u];if(!p)throw new Error(`Target platform: ${u} is not supported!`);if(typeof p.type>"u"||p.type==="SINGLE")return i.map(g=>{try{return p.func(g)}catch{return""}}).filter(g=>g.length>0).join(`
`);if(p.type==="ALL")return p.func(i)}return{parse:r,produce:n}})();function uw(t){R.read(Bt)||R.write({},Bt),t.get("/api/artifacts/restore",DK),t.route("/api/artifacts").get(FK).post(BK).put(SK),t.route("/api/artifact/:name").get(IK).patch($K).delete(RK)}async function DK(t,r){R.info("\u5F00\u59CB\u6062\u590D\u8FDC\u7A0B\u914D\u7F6E...");try{let{gistToken:n,syncPlatform:i}=R.read(Kt);if(!n)return Promise.reject("\u672A\u8BBE\u7F6E GitHub Token\uFF01");let u=new Ds({token:n,key:Lo,syncPlatform:i});try{let p=await u.locate();if(!p?.files)throw new Error("\u627E\u4E0D\u5230 Sub-Store Gist \u6587\u4EF6\u5217\u8868");let g=R.read(Bt),m=[];Object.keys(p.files).map(A=>{let y=p.files[A]?.filename;if(y)if(encodeURIComponent(y)!==y)R.error(`\u6587\u4EF6\u540D ${y} \u672A\u7F16\u7801 \u4E0D\u4FDD\u5B58`),m.push(y);else{let D=ct(g,y);D?Os(g,y,{...D,url:p.files[A]?.raw_url.replace(/\/raw\/[^/]*\/(.*)/,"/raw/$1")}):g.push({name:`${y}`,url:p.files[A]?.raw_url.replace(/\/raw\/[^/]*\/(.*)/,"/raw/$1")})}}),R.write(g,Bt)}catch(p){throw R.error(`\u67E5\u627E Sub-Store Gist \u65F6\u53D1\u751F\u9519\u8BEF: ${p.message??p}`),p}je(r)}catch(n){R.error(`\u6062\u590D\u8FDC\u7A0B\u914D\u7F6E\u5931\u8D25\uFF0C\u539F\u56E0\uFF1A${n.message??n}`),Te(r,new pr("FAILED_TO_RESTORE_ARTIFACTS","Failed to restore artifacts",`Reason: ${n.message??n}`))}}function FK(t,r){let n=R.read(Bt);je(r,n)}function SK(t,r){let n=t.body;R.write(n,Bt),je(r)}async function IK(t,r){let{name:n}=t.params,i=R.read(Bt),u=ct(i,n);u?je(r,u):Te(r,new br("RESOURCE_NOT_FOUND",`Artifact ${n} does not exist!`),404)}function BK(t,r){let n=t.body;if(!CS(n.name)){Te(r,new jt("INVALID_ARTIFACT_NAME",`Artifact name ${n.name} is invalid.`));return}R.info(`\u6B63\u5728\u521B\u5EFA\u8FDC\u7A0B\u914D\u7F6E\uFF1A${n.name}`);let i=R.read(Bt);ct(i,n.name)?Te(r,new jt("DUPLICATE_KEY",`Artifact ${n.name} already exists.`)):(i.push(n),R.write(i,Bt),je(r,n,201))}function $K(t,r){let n=R.read(Bt),i=t.params.name,u=ct(n,i);if(u){R.info(`\u6B63\u5728\u66F4\u65B0\u8FDC\u7A0B\u914D\u7F6E\uFF1A${u.name}`);let p={...u,...t.body};if(!CS(p.name)){Te(r,new jt("INVALID_ARTIFACT_NAME",`Artifact name ${p.name} is invalid.`));return}Os(n,i,p),R.write(n,Bt),je(r,p)}else Te(r,new jt("DUPLICATE_KEY",`Artifact ${i} already exists.`))}async function RK(t,r){let{name:n}=t.params;R.info(`\u6B63\u5728\u5220\u9664\u8FDC\u7A0B\u914D\u7F6E\uFF1A${n}`);let i=R.read(Bt);try{let u=ct(i,n);if(!u)throw new Error(`\u8FDC\u7A0B\u914D\u7F6E\uFF1A${n}\u4E0D\u5B58\u5728\uFF01`);if(u.updated){let p={};p[encodeURIComponent(u.name)]={content:""},encodeURIComponent(u.name)!==u.name&&(p[u.name]={content:""});try{await qp(p)}catch(g){R.error(`Function syncToGist: ${n} : ${g}`)}}gs(i,n),R.write(i,Bt),je(r)}catch(u){R.error(`\u65E0\u6CD5\u5220\u9664\u8FDC\u7A0B\u914D\u7F6E\uFF1A${n}\uFF0C\u539F\u56E0\uFF1A${u}`),Te(r,new pr("FAILED_TO_DELETE_ARTIFACT",`Failed to delete artifact ${n}`,`Reason: ${u}`))}}function CS(t){return/^[a-zA-Z0-9._-]*$/.test(t)}async function qp(t){let{gistToken:r,syncPlatform:n}=R.read(Kt);if(!r)return Promise.reject("\u672A\u8BBE\u7F6E GitHub Token\uFF01");let i=await new Ds({token:r,key:Lo,syncPlatform:n}).upload(t),u={};try{u=JSON.parse(i.body)}catch{}let p=u?.html_url??u?.web_url,g=R.read(Kt);return p?(R.log(`\u540C\u6B65 Gist \u540E, \u627E\u5230 Sub-Store Gist: ${p}`),g.artifactStore=p,g.artifactStoreStatus="VALID"):(R.error("\u540C\u6B65 Gist \u540E, \u627E\u4E0D\u5230 Sub-Store Gist"),g.artifactStoreStatus="NOT FOUND"),R.write(g,Kt),i}function ow(t){R.read(Bt)||R.write({},Bt),t.get("/api/sync/artifacts",xK),t.get("/api/sync/artifact/:name",PK)}async function vn({type:t,name:r,platform:n,url:i,ua:u,content:p,mergeSources:g,ignoreFailedRemoteSub:m,ignoreFailedRemoteFile:A,produceType:y,produceOpts:D={},subscription:o,awaitCustomCache:M,$options:W,proxy:w,noCache:U,all:nt}){if(n=n||"JSON",["subscription","sub"].includes(t)){let X;if(r){let K=R.read(Jt);if(X=ct(K,r),!X)throw new Error(`\u627E\u4E0D\u5230\u8BA2\u9605 ${r}`)}else if(o)X=o;else throw new Error("\u672A\u63D0\u4F9B\u8BA2\u9605\u540D\u79F0\u6216\u8BA2\u9605\u6570\u636E");let j;if(p&&!["localFirst","remoteFirst"].includes(g))j=p;else if(i){let K={};j=await Promise.all(i.split(/[\r\n]+/).map(q=>q.trim()).filter(q=>q.length).map(async q=>{try{return await un(q,u||X.ua,void 0,w||X.proxy,void 0,M,U||X.noCache,!0)}catch(pt){return K[q]=pt,R.error(`\u8BA2\u9605 ${X.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${q} \u53D1\u751F\u9519\u8BEF: ${pt}`),""}}));let H=X.ignoreFailedRemoteSub;if(m!=null&&m!==""&&(H=m),Object.keys(K).length>0)if(H)H==="enabled"&&R.notify("\u{1F30D} Sub-Store \u5904\u7406\u8BA2\u9605\u5931\u8D25",`\u274C ${X.name}`,`\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(K).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u8BA2\u9605 ${X.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(K).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);g==="localFirst"?j.unshift(p):g==="remoteFirst"&&j.push(p)}else if(X.source==="local"&&!["localFirst","remoteFirst"].includes(X.mergeSources))j=X.content;else{let K={};j=await Promise.all(X.url.split(/[\r\n]+/).map(q=>q.trim()).filter(q=>q.length).map(async q=>{try{return await un(q,u||X.ua,void 0,w||X.proxy,void 0,M,U||X.noCache,!0)}catch(pt){return K[q]=pt,R.error(`\u8BA2\u9605 ${X.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${q} \u53D1\u751F\u9519\u8BEF: ${pt}`),""}}));let H=X.ignoreFailedRemoteSub;if(m!=null&&m!==""&&(H=m),Object.keys(K).length>0)if(H)H==="enabled"&&R.notify("\u{1F30D} Sub-Store \u5904\u7406\u8BA2\u9605\u5931\u8D25",`\u274C ${X.name}`,`\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(K).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u8BA2\u9605 ${X.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(K).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);X.mergeSources==="localFirst"?j.unshift(X.content):X.mergeSources==="remoteFirst"&&j.push(X.content)}if(y==="raw")return JSON.stringify((Array.isArray(j)?j:[j]).flat());let it=(Array.isArray(j)?j:[j]).map(K=>Ot.parse(K)).flat();if(it.forEach(K=>{K._subName=X.name,K._subDisplayName=X.displayName}),it=await Ot.process(it,X.process||[],n,{[X.name]:X},W),it.length===0)throw new Error(`\u8BA2\u9605 ${r} \u4E2D\u4E0D\u542B\u6709\u6548\u8282\u70B9`);let ot={};for(let K of it){if(ot[K.name]){R.notify("\u{1F30D} Sub-Store",`\u26A0\uFE0F \u8BA2\u9605 ${r} \u5305\u542B\u91CD\u590D\u8282\u70B9 ${K.name}\uFF01`,"\u8BF7\u4ED4\u7EC6\u68C0\u6D4B\u914D\u7F6E\uFF01",{"media-url":"https://cdn3.iconfinder.com/data/icons/seo-outline-1/512/25_code_program_programming_develop_bug_search_developer-512.png"});break}ot[K.name]=!0}return Ot.produce(it,n,y,D)}else if(["collection","col"].includes(t)){let X=R.read(Jt),j=R.read(Zt),it=ct(j,r);if(!it)throw new Error(`\u627E\u4E0D\u5230\u7EC4\u5408\u8BA2\u9605 ${r}`);let ot=[...it.subscriptions],K=it.subscriptionTags;Array.isArray(K)&&K.length>0&&X.forEach(vt=>{Array.isArray(vt.tag)&&vt.tag.length>0&&!ot.includes(vt.name)&&vt.tag.some(Ft=>K.includes(Ft))&&ot.push(vt.name)});let H={},q={},pt=0;await Promise.all(ot.map(async vt=>{let Ft=ct(X,vt),Xt=Ft.passThroughUA,ee=Ft.ua;Xt&&(R.info(`\u8BA2\u9605\u5F00\u542F\u4E86\u900F\u4F20 User-Agent, \u4F7F\u7528\u8BF7\u6C42\u7684 User-Agent: ${u}`),ee=u);try{R.info(`\u6B63\u5728\u5904\u7406\u5B50\u8BA2\u9605\uFF1A${Ft.name}...`);let ne;if(Ft.source==="local"&&!["localFirst","remoteFirst"].includes(Ft.mergeSources))ne=Ft.content;else{let Le={};if(ne=await await Promise.all(Ft.url.split(/[\r\n]+/).map(de=>de.trim()).filter(de=>de.length).map(async de=>{try{return await un(de,ee,void 0,w||Ft.proxy||it.proxy,void 0,void 0,U||Ft.noCache,!0)}catch(He){return Le[de]=He,R.error(`\u8BA2\u9605 ${Ft.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${de} \u53D1\u751F\u9519\u8BEF: ${He}`),""}})),Object.keys(Le).length>0)if(Ft.ignoreFailedRemoteSub)Ft.ignoreFailedRemoteSub==="enabled"&&R.notify("\u{1F30D} Sub-Store \u5904\u7406\u8BA2\u9605\u5931\u8D25",`\u274C ${Ft.name}`,`\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(Le).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u8BA2\u9605 ${Ft.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(Le).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);Ft.mergeSources==="localFirst"?ne.unshift(Ft.content):Ft.mergeSources==="remoteFirst"&&ne.push(Ft.content)}let ae=(Array.isArray(ne)?ne:[ne]).map(Le=>Ot.parse(Le)).flat();ae.forEach(Le=>{Le._subName=Ft.name,Le._subDisplayName=Ft.displayName,Le._collectionName=it.name,Le._collectionDisplayName=it.displayName}),ae=await Ot.process(ae,Ft.process||[],n,{[Ft.name]:Ft,_collection:it,$options:W}),H[vt]=ae,pt++,R.info(`\u2705 \u5B50\u8BA2\u9605\uFF1A${Ft.name}\u52A0\u8F7D\u6210\u529F\uFF0C\u8FDB\u5EA6--${100*(pt/ot.length).toFixed(1)}% `)}catch(ne){pt++,q[vt]=ne,R.error(`\u274C \u5904\u7406\u7EC4\u5408\u8BA2\u9605\u4E2D\u7684\u5B50\u8BA2\u9605: ${Ft.name}\u65F6\u51FA\u73B0\u9519\u8BEF\uFF1A${ne}\uFF01\u8FDB\u5EA6--${100*(pt/ot.length).toFixed(1)}%`)}}));let yt=it.ignoreFailedRemoteSub;if(m!=null&&m!==""&&(yt=m),Object.keys(q).length>0)if(yt)yt==="enabled"&&R.notify("\u{1F30D} Sub-Store \u5904\u7406\u7EC4\u5408\u8BA2\u9605\u5931\u8D25",`\u274C ${it.name}`,`\u5B50\u8BA2\u9605 ${Object.keys(q).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u7EC4\u5408\u8BA2\u9605 ${it.name} \u7684\u5B50\u8BA2\u9605 ${Object.keys(q).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);let Rt=Array.prototype.concat.apply([],ot.map(vt=>H[vt]||[]));if(Rt.forEach(vt=>{vt._collectionName=it.name,vt._collectionDisplayName=it.displayName}),Rt=await Ot.process(Rt,it.process||[],n,{_collection:it},W),Rt.length===0)throw new Error(`\u7EC4\u5408\u8BA2\u9605 ${r} \u4E2D\u4E0D\u542B\u6709\u6548\u8282\u70B9`);let Et={};for(let vt of Rt){if(Et[vt.name]){R.notify("\u{1F30D} Sub-Store",`\u26A0\uFE0F \u7EC4\u5408\u8BA2\u9605 ${r} \u5305\u542B\u91CD\u590D\u8282\u70B9 ${vt.name}\uFF01`,"\u8BF7\u4ED4\u7EC6\u68C0\u6D4B\u914D\u7F6E\uFF01",{"media-url":"https://cdn3.iconfinder.com/data/icons/seo-outline-1/512/25_code_program_programming_develop_bug_search_developer-512.png"});break}Et[vt.name]=!0}return Ot.produce(Rt,n,y,D)}else if(t==="rule"){let X=R.read(Df),j=ct(X,r);if(!j)throw new Error(`\u627E\u4E0D\u5230\u89C4\u5219 ${r}`);let it=[];for(let ot=0;ot<j.urls.length;ot++){let K=j.urls[ot];R.info(`\u6B63\u5728\u5904\u7406URL\uFF1A${K}\uFF0C\u8FDB\u5EA6--${100*((ot+1)/j.urls.length).toFixed(1)}% `);try{let{body:H}=await un(K),q=Ec.parse(H);it=it.concat(q)}catch(H){R.error(`\u5904\u7406\u5206\u6D41\u8BA2\u9605\u4E2D\u7684URL: ${K}\u65F6\u51FA\u73B0\u9519\u8BEF\uFF1A${H}! \u8BE5\u8BA2\u9605\u5DF2\u88AB\u8DF3\u8FC7\u3002`)}}return it=await Ec.process(it,[{type:"Remove Duplicate Filter"}]),Ec.produce(it,n)}else if(t==="file"){let X=R.read(Lt),j=ct(X,r);if(!j)throw new Error(`\u627E\u4E0D\u5230\u6587\u4EF6 ${r}`);let it="";if(j.type!=="mihomoProfile")if(p&&!["localFirst","remoteFirst"].includes(g))it=p;else if(i){let q={};it=await Promise.all(i.split(/[\r\n]+/).map(yt=>yt.trim()).filter(yt=>yt.length).map(async yt=>{try{return await un(yt,u||j.ua,void 0,j.proxy||w,void 0,void 0,U)}catch(Rt){return q[yt]=Rt,R.error(`\u6587\u4EF6 ${j.name} \u7684\u8FDC\u7A0B\u6587\u4EF6 ${yt} \u53D1\u751F\u9519\u8BEF: ${Rt}`),""}}));let pt=j.ignoreFailedRemoteFile;if(A!=null&&A!==""&&(pt=A),!pt&&Object.keys(q).length>0)throw new Error(`\u6587\u4EF6 ${j.name} \u7684\u8FDC\u7A0B\u6587\u4EF6 ${Object.keys(q).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);g==="localFirst"?it.unshift(p):g==="remoteFirst"&&it.push(p)}else if(j.source==="local"&&!["localFirst","remoteFirst"].includes(j.mergeSources))it=j.content;else{let q={};it=await Promise.all(j.url.split(/[\r\n]+/).map(yt=>yt.trim()).filter(yt=>yt.length).map(async yt=>{try{return await un(yt,u||j.ua,void 0,j.proxy||w,void 0,void 0,U)}catch(Rt){return q[yt]=Rt,R.error(`\u6587\u4EF6 ${j.name} \u7684\u8FDC\u7A0B\u6587\u4EF6 ${yt} \u53D1\u751F\u9519\u8BEF: ${Rt}`),""}}));let pt=j.ignoreFailedRemoteFile;if(A!=null&&A!==""&&(pt=A),Object.keys(q).length>0)if(pt)pt==="enabled"&&R.notify("\u{1F30D} Sub-Store \u5904\u7406\u6587\u4EF6\u5931\u8D25",`\u274C ${j.name}`,`\u8FDC\u7A0B\u6587\u4EF6 ${Object.keys(q).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u6587\u4EF6 ${j.name} \u7684\u8FDC\u7A0B\u6587\u4EF6 ${Object.keys(q).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);j.mergeSources==="localFirst"?it.unshift(j.content):j.mergeSources==="remoteFirst"&&it.push(j.content)}if(y==="raw")return JSON.stringify((Array.isArray(it)?it:[it]).flat());let ot=(Array.isArray(it)?it:[it]).flat(),K=ot.filter(q=>q!=null&&q!=="").join(`
`),H=Array.isArray(j.process)&&j.process.length>0?await Ot.process({$files:ot,$content:K,$options:W,$file:j},j.process):{$content:K,$files:ot,$options:W};return(nt?H:H?.$content)??""}}async function cw(){R.info("\u5F00\u59CB\u540C\u6B65\u6240\u6709\u8FDC\u7A0B\u914D\u7F6E...");let t=R.read(Bt),r={};try{let n=[],i=[],u=R.read(Jt),p=R.read(Zt),g=[],m=0;if(t.map(D=>{if(D.sync&&D.source){if(m++,D.type==="subscription"){let o=D.source,M=ct(u,o);M&&M.url&&!g.includes(o)&&g.push(o)}else if(D.type==="collection"){let o=ct(p,D.source);o&&Array.isArray(o.subscriptions)&&o.subscriptions.map(M=>{let W=ct(u,M);W&&W.url&&!g.includes(M)&&g.push(M)})}}}),m===0){R.info(`\u9700\u540C\u6B65\u7684\u914D\u7F6E: ${m}, \u603B\u6570: ${t.length}`);return}if(g.length>0&&await Promise.all(g.map(async D=>{try{await vn({type:"subscription",name:D,awaitCustomCache:!0})}catch{}})),await Promise.all(t.map(async D=>{try{if(D.sync&&D.source){R.info(`\u6B63\u5728\u540C\u6B65\u4E91\u914D\u7F6E\uFF1A${D.name}...`);let o=D.platform==="SurgeMac";o&&R.info("\u624B\u52A8\u6307\u5B9A\u4E86 target \u4E3A SurgeMac, \u5C06\u4F7F\u7528 Mihomo External");let M=await vn({type:D.type,name:D.source,platform:D.platform,produceOpts:{"include-unsupported-proxy":D.includeUnsupportedProxy,useMihomoExternal:o}});r[encodeURIComponent(D.name)]={content:M},n.push(D.name)}}catch(o){R.error(`\u751F\u6210\u540C\u6B65\u914D\u7F6E ${D.name} \u53D1\u751F\u9519\u8BEF: ${o.message??o}`),i.push(D.name)}})),R.info(`${n.length} \u4E2A\u540C\u6B65\u914D\u7F6E\u751F\u6210\u6210\u529F: ${n.join(", ")}`),R.info(`${i.length} \u4E2A\u540C\u6B65\u914D\u7F6E\u751F\u6210\u5931\u8D25: ${i.join(", ")}`),n.length===0)throw new Error(`\u540C\u6B65\u914D\u7F6E ${i.join(", ")} \u751F\u6210\u5931\u8D25 \u8BE6\u60C5\u8BF7\u67E5\u770B\u65E5\u5FD7`);let A=await qp(r),y=JSON.parse(A.body);delete y.history,delete y.forks,delete y.owner,Object.values(y.files).forEach(D=>{delete D.content}),R.info("\u4E0A\u4F20\u914D\u7F6E\u54CD\u5E94:"),R.info(JSON.stringify(y,null,2));for(let D of t)if(D.sync&&D.source&&n.includes(D.name)){D.updated=new Date().getTime();let o=y.files,M;Array.isArray(o)&&(M=!0,o=Object.fromEntries(o.map(U=>[U.path,U])));let W=o[encodeURIComponent(D.name)]?.raw_url,w=M?W:W?.replace(/\/raw\/[^/]*\/(.*)/,"/raw/$1");R.info(`\u4E0A\u4F20\u914D\u7F6E\u5B8C\u6210
\u6587\u4EF6\u5217\u8868: ${Object.keys(o).join(", ")}
\u5F53\u524D\u6587\u4EF6: ${encodeURIComponent(D.name)}
\u54CD\u5E94\u8FD4\u56DE\u7684\u539F\u59CB\u94FE\u63A5: ${W}
\u5904\u7406\u5B8C\u7684\u65B0\u94FE\u63A5: ${w}`),D.url=w}if(R.write(t,Bt),R.info("\u4E0A\u4F20\u914D\u7F6E\u6210\u529F"),i.length>0)throw new Error(`\u540C\u6B65\u914D\u7F6E\u6210\u529F ${n.length} \u4E2A, \u5931\u8D25 ${i.length} \u4E2A, \u8BE6\u60C5\u8BF7\u67E5\u770B\u65E5\u5FD7`);R.info(`\u540C\u6B65\u914D\u7F6E\u6210\u529F ${n.length} \u4E2A`)}catch(n){throw R.error(`\u540C\u6B65\u914D\u7F6E\u5931\u8D25\uFF0C\u539F\u56E0\uFF1A${n.message??n}`),n}}async function xK(t,r){R.info("\u5F00\u59CB\u540C\u6B65\u6240\u6709\u8FDC\u7A0B\u914D\u7F6E...");try{await cw(),je(r)}catch(n){R.error(`\u540C\u6B65\u914D\u7F6E\u5931\u8D25\uFF0C\u539F\u56E0\uFF1A${n.message??n}`),Te(r,new pr("FAILED_TO_SYNC_ARTIFACTS","Failed to sync all artifacts",`Reason: ${n.message??n}`))}}async function PK(t,r){let{name:n}=t.params;R.info(`\u5F00\u59CB\u540C\u6B65\u8FDC\u7A0B\u914D\u7F6E ${n}...`);let i=R.read(Bt),u=ct(i,n);if(!u){R.error(`\u627E\u4E0D\u5230\u8FDC\u7A0B\u914D\u7F6E ${n}`),Te(r,new br("RESOURCE_NOT_FOUND",`\u627E\u4E0D\u5230\u8FDC\u7A0B\u914D\u7F6E ${n}`),404);return}if(!u.source){R.error(`\u8FDC\u7A0B\u914D\u7F6E ${n} \u672A\u8BBE\u7F6E\u6765\u6E90`),Te(r,new br("RESOURCE_HAS_NO_SOURCE",`\u8FDC\u7A0B\u914D\u7F6E ${n} \u672A\u8BBE\u7F6E\u6765\u6E90`),404);return}try{let p=u.platform==="SurgeMac";p&&R.info("\u624B\u52A8\u6307\u5B9A\u4E86 target \u4E3A SurgeMac, \u5C06\u4F7F\u7528 Mihomo External");let g=await vn({type:u.type,name:u.source,platform:u.platform,produceOpts:{"include-unsupported-proxy":u.includeUnsupportedProxy,useMihomoExternal:p}});R.info(`\u6B63\u5728\u4E0A\u4F20\u914D\u7F6E\uFF1A${u.name}
>>>${JSON.stringify(u,null,2)}`);let m=await qp({[encodeURIComponent(u.name)]:{content:g}});u.updated=new Date().getTime();let A=JSON.parse(m.body);delete A.history,delete A.forks,delete A.owner,Object.values(A.files).forEach(W=>{delete W.content}),R.info("\u4E0A\u4F20\u914D\u7F6E\u54CD\u5E94:"),R.info(JSON.stringify(A,null,2));let y=A.files,D;Array.isArray(y)&&(D=!0,y=Object.fromEntries(y.map(W=>[W.path,W])));let o=y[encodeURIComponent(u.name)]?.raw_url,M=D?o:o?.replace(/\/raw\/[^/]*\/(.*)/,"/raw/$1");R.info(`\u4E0A\u4F20\u914D\u7F6E\u5B8C\u6210
\u6587\u4EF6\u5217\u8868: ${Object.keys(y).join(", ")}
\u5F53\u524D\u6587\u4EF6: ${encodeURIComponent(u.name)}
\u54CD\u5E94\u8FD4\u56DE\u7684\u539F\u59CB\u94FE\u63A5: ${o}
\u5904\u7406\u5B8C\u7684\u65B0\u94FE\u63A5: ${M}`),u.url=M,R.write(i,Bt),je(r,u)}catch(p){R.error(`\u8FDC\u7A0B\u914D\u7F6E ${u.name} \u53D1\u751F\u9519\u8BEF: ${p.message??p}`),Te(r,new pr("FAILED_TO_SYNC_ARTIFACT",`Failed to sync artifact ${n}`,`Reason: ${p}`))}}var DS=V0.find(t=>t.name==="Clash Pre-processor"),lw=new Map;async function un(rawUrl="",ua,timeout,customProxy,skipCustomCache,awaitCustomCache,noCache,preprocess){let $arguments={},url=rawUrl.replace(/#noFlow$/,""),rawArgs=url.split("#");if(url=url.split("#")[0],rawArgs.length>1)try{$arguments=JSON.parse(decodeURIComponent(rawArgs[1]))}catch{for(let t of rawArgs[1].split("&")){let r=t.split("=")[0],n=t.split("=")[1];$arguments[r]=n==null||n===""?!0:decodeURIComponent(n)}}let{isNode,isStash,isLoon,isShadowRocket,isQX}=hn(),{defaultProxy,defaultUserAgent,defaultTimeout,cacheThreshold:defaultCacheThreshold}=R.read(Kt),cacheThreshold=defaultCacheThreshold||1024,proxy=customProxy||defaultProxy;R.env.isNode&&(proxy=proxy||eval("process.env.SUB_STORE_BACKEND_DEFAULT_PROXY"));let userAgent=ua||defaultUserAgent||"clash.meta",requestTimeout=timeout||defaultTimeout||8e3,id=Gi(userAgent+url);$arguments?.cacheKey===!0&&(R.error("\u4F7F\u7528\u81EA\u5B9A\u4E49\u7F13\u5B58\u65F6 cacheKey \u7684\u503C\u4E0D\u80FD\u4E3A\u7A7A"),$arguments.cacheKey=void 0);let customCacheKey=$arguments?.cacheKey?`#sub-store-cached-custom-${$arguments?.cacheKey}`:void 0;if(customCacheKey&&!skipCustomCache){let t=R.read(customCacheKey),r=Wr.get(id);if(!noCache&&!$arguments?.noCache&&r)return R.info(`\u4E50\u89C2\u7F13\u5B58: URL ${url}
\u5B58\u5728\u6709\u6548\u7684\u5E38\u89C4\u7F13\u5B58
\u4F7F\u7528\u5E38\u89C4\u7F13\u5B58\u4EE5\u907F\u514D\u91CD\u590D\u8BF7\u6C42`),r;if(t){if(awaitCustomCache){R.info(`\u4E50\u89C2\u7F13\u5B58: URL ${url}
\u672C\u6B21\u8FDB\u884C\u8BF7\u6C42 \u5C1D\u8BD5\u66F4\u65B0\u7F13\u5B58`);try{await un(rawUrl.replace(/(\?|&)cacheKey=.*?(&|$)/,""),ua,timeout,proxy,!0,void 0,void 0,preprocess)}catch(n){R.error(`\u4E50\u89C2\u7F13\u5B58: URL ${url} \u66F4\u65B0\u7F13\u5B58\u53D1\u751F\u9519\u8BEF ${n.message??n}`),R.info("\u4F7F\u7528\u4E50\u89C2\u7F13\u5B58\u7684\u6570\u636E\u5237\u65B0\u7F13\u5B58, \u9632\u6B62\u540E\u7EED\u8BF7\u6C42"),Wr.set(id,t)}}else R.info(`\u4E50\u89C2\u7F13\u5B58: URL ${url}
\u672C\u6B21\u8FD4\u56DE\u81EA\u5B9A\u4E49\u7F13\u5B58 ${$arguments?.cacheKey}
\u5E76\u8FDB\u884C\u8BF7\u6C42 \u5C1D\u8BD5\u5F02\u6B65\u66F4\u65B0\u7F13\u5B58`),un(rawUrl.replace(/(\?|&)cacheKey=.*?(&|$)/,""),ua,timeout,proxy,!0,void 0,void 0,preprocess).catch(n=>{R.error(`\u4E50\u89C2\u7F13\u5B58: URL ${url} \u5F02\u6B65\u66F4\u65B0\u7F13\u5B58\u53D1\u751F\u9519\u8BEF ${n.message??n}`)});return t}}let downloadUrlMatch=url.split("#")[0].match(/^\/api\/(file|module)\/(.+)/);if(downloadUrlMatch){let t="";try{t=downloadUrlMatch?.[1];let r=downloadUrlMatch?.[2];if(r==null)throw new Error(`\u672C\u5730 ${t} URL \u65E0\u6548: ${url}`);r=decodeURIComponent(r);let n=t==="module"?jn:Lt,i=ct(R.read(n),r);if(!i)throw new Error(`\u627E\u4E0D\u5230 ${t}: ${r}`);return t==="module"?i.content:await vn({type:"file",name:r})}catch(r){throw R.error(`Error when loading ${t}: ${url.split("#")[0]}.
 Reason: ${r}`),new Error(`\u65E0\u6CD5\u52A0\u8F7D ${t}: ${url}`)}}else if(url?.startsWith("/"))try{return require("fs").readFileSync(url.split("#")[0],"utf8")}catch(t){throw R.error(`Error when reading local file: ${url.split("#")[0]}.
 Reason: ${t}`),new Error(`\u65E0\u6CD5\u4ECE\u8BE5\u8DEF\u5F84\u8BFB\u53D6\u6587\u672C\u5185\u5BB9: ${url}`)}if(!isNode&&lw.has(id))return lw.get(id);let http=xs({headers:{"User-Agent":userAgent,...isStash&&proxy?{"X-Stash-Selected-Proxy":encodeURIComponent(proxy)}:{},...isShadowRocket&&proxy?{"X-Surge-Policy":proxy}:{}},timeout:requestTimeout}),result,cached=Wr.get(id);if(!noCache&&!$arguments?.noCache&&cached)R.info(`\u4F7F\u7528\u7F13\u5B58: ${url}, ${userAgent}`),result=cached,customCacheKey&&(R.info(`URL ${url}
\u5199\u5165\u81EA\u5B9A\u4E49\u7F13\u5B58 ${$arguments?.cacheKey}`),R.write(cached,customCacheKey));else{let t=$arguments?.insecure?isNode?{strictSSL:!1}:{insecure:!0}:void 0;R.info(`Downloading...
User-Agent: ${userAgent}
Timeout: ${requestTimeout}
Proxy: ${proxy}
Insecure: ${!!t}
Preprocess: ${preprocess}
URL: ${url}`);try{let{body:r,headers:n,statusCode:i}=await http.get({url,...proxy?{proxy}:{},...isLoon&&proxy?{node:proxy}:{},...isQX&&proxy?{opts:{policy:proxy}}:{},...proxy?ru(proxy):{},...t||{}});if(R.info(`statusCode: ${i}`),i<200||i>=400)throw new Error(`statusCode: ${i}`);if(n){let p=Zc(n);p&&Vo.set(id,p)}if(r.replace(/\s/g,"").length===0)throw new Error(new Error("\u8FDC\u7A0B\u8D44\u6E90\u5185\u5BB9\u4E3A\u7A7A"));if(preprocess)try{DS.test(r)&&(r=DS.parse(r,!0))}catch(p){R.error(`Clash Pre-processor error: ${p}`)}let u=!0;if(cacheThreshold){let p=r.length/1024;p>cacheThreshold&&(R.info(`\u8D44\u6E90\u5927\u5C0F ${p.toFixed(2)} KB \u8D85\u8FC7\u4E86 ${cacheThreshold} KB, \u4E0D\u7F13\u5B58`),u=!1)}if(preprocess)try{let p=Ot.parse(r);(!Array.isArray(p)||p.length===0)&&(R.error(`URL ${url} \u4E0D\u5305\u542B\u6709\u6548\u8282\u70B9, \u4E0D\u7F13\u5B58`),u=!1)}catch(p){R.error(`URL ${url} \u5C1D\u8BD5\u89E3\u6790\u8282\u70B9\u5931\u8D25 ${p.message??p}, \u4E0D\u7F13\u5B58`),u=!1}u&&(Wr.set(id,r),customCacheKey&&(R.info(`URL ${url}
\u5199\u5165\u81EA\u5B9A\u4E49\u7F13\u5B58 ${$arguments?.cacheKey}`),R.write(r,customCacheKey))),result=r}catch(r){if(customCacheKey){let n=R.read(customCacheKey);if(n)return R.info(`\u65E0\u6CD5\u4E0B\u8F7D URL ${url}: ${r.message??r}
\u4F7F\u7528\u81EA\u5B9A\u4E49\u7F13\u5B58 ${$arguments?.cacheKey}`),n}throw new Error(`\u65E0\u6CD5\u4E0B\u8F7D URL ${url}: ${r.message??r}`)}}return $arguments?.validCheck&&await s0(Ko(await zn(url,$arguments.flowUserAgent,void 0,proxy,$arguments.flowUrl))),isNode||lw.set(id,result),result}async function Kh(t,r){let n=require("undici"),i=require("fs"),{pipeline:u}=require("stream/promises"),{Agent:p,interceptors:g,request:m}=n;R.info(`Downloading file...
URL: ${t}
File: ${r}`);let{body:A,statusCode:y}=await m(t,{dispatcher:new p().compose(g.redirect({maxRedirections:3,throwOnRedirect:!0}))});if(y!==200)throw new Error(`Failed to download file from ${t}`);let D=i.createWriteStream(r);return await u(A,D),R.info(`File downloaded from ${t} to ${r}`),r}var hw=tn(Sf());function fw(t){R.read(Kt)||R.write({},Kt),t.route("/api/settings").get(OK).patch(TK)}async function OK(t,r){try{let n=R.read(Kt);n||(n={},R.write(n,Kt)),n.avatarUrl||await Vp(),n.artifactStore||await Kp(),je(r,n)}catch(n){R.error(`Failed to get settings: ${n.message??n}`),Te(r,new pr("FAILED_TO_GET_SETTINGS","Failed to get settings",`Reason: ${n.message??n}`))}}async function TK(t,r){try{let n={...R.read(Kt),...t.body};R.write(n,Kt),(t.body.githubUser||t.body.gistToken||t.body.githubProxy||t.body.defaultProxy)&&(await Vp(),await Kp()),je(r,n)}catch(n){R.error(`Failed to update settings: ${n.message??n}`),Te(r,new pr("FAILED_TO_UPDATE_SETTINGS","Failed to update settings",`Reason: ${n.message??n}`))}}async function Vp(){let t=R.read(Kt),{githubUser:r,syncPlatform:n,githubProxy:i}=t;if(r)if(n==="gitlab")try{let u=await R.http.get({url:`https://gitlab.com/api/v4/users?username=${encodeURIComponent(r)}`,headers:{"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.141 Safari/537.36"}}).then(p=>JSON.parse(p.body));t.avatarUrl=u[0].avatar_url.replace(/(\?|&)s=\d+(&|$)/,"$1s=160$2"),R.write(t,Kt)}catch(u){R.error(`Failed to fetch GitLab avatar for User: ${r}. Reason: ${u.message??u}`)}else try{let u=await R.http.get({url:`${i?`${i}/`:""}https://api.github.com/users/${encodeURIComponent(r)}`,headers:{"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.141 Safari/537.36"}}).then(p=>JSON.parse(p.body));t.avatarUrl=u.avatar_url,R.write(t,Kt)}catch(u){R.error(`Failed to fetch GitHub avatar for User: ${r}. Reason: ${u.message??u}`)}}async function Kp(){R.log("Updating artifact store");let t=R.read(Kt),{gistToken:r,syncPlatform:n}=t;if(r){let i=new Ds({token:r,key:Lo,syncPlatform:n});try{let u=await i.locate(),p=u?.html_url??u?.web_url;p?(R.log(`\u627E\u5230 Sub-Store Gist: ${p}`),t.artifactStore=p,t.artifactStoreStatus="VALID"):(R.error(`\u627E\u4E0D\u5230 Sub-Store Gist (${Lo})`),t.artifactStoreStatus="NOT FOUND")}catch(u){R.error(`\u67E5\u627E Sub-Store Gist (${Lo}) \u65F6\u53D1\u751F\u9519\u8BEF: ${u.message??u}`),t.artifactStoreStatus="ERROR"}R.write(t,Kt)}}function dw(t){t.get("/api/utils/env",FS),t.get("/api/utils/backup",kK),t.get("/api/utils/refresh",NK),t.route("/api/storage").get((r,n)=>{n.set("content-type","application/json").set("content-disposition",`attachment; filename="${encodeURIComponent(`sub-store_data_${Gu(new Date)}.json`)}"`).send(R.env.isNode?JSON.stringify(R.cache):R.read("#sub-store"))}).post((r,n)=>{let{content:i}=r.body;try{if(i=JSON.parse(ft.decode(i)),Object.keys(i.settings).length===0)throw new Error("\u5907\u4EFD\u6587\u4EF6\u5E94\u8BE5\u81F3\u5C11\u5305\u542B settings \u5B57\u6BB5")}catch{try{if(i=JSON.parse(i),Object.keys(i.settings).length===0)throw new Error("\u5907\u4EFD\u6587\u4EF6\u5E94\u8BE5\u81F3\u5C11\u5305\u542B settings \u5B57\u6BB5")}catch(u){throw R.error(`\u5907\u4EFD\u6587\u4EF6\u6821\u9A8C\u5931\u8D25, \u65E0\u6CD5\u8FD8\u539F
Reason: ${u.message??u}`),new Error("\u5907\u4EFD\u6587\u4EF6\u6821\u9A8C\u5931\u8D25, \u65E0\u6CD5\u8FD8\u539F")}}R.write(JSON.stringify(i,null,"  "),"#sub-store"),R.env.isNode&&(R.cache=i,R.persistCache()),Ku(),je(n)}),hn().isNode?t.get("/",FS):t.get("/",async(r,n)=>{n.set("location","https://sub-store.vercel.app/").status(302).end()}),hn().isQX&&t.options("/",async(r,n)=>{n.status(200).end()}),t.all("/",(r,n)=>{n.send("Hello from sub-store, made with \u2764\uFE0F by Peng-YM")})}function FS(t,r){t.query.share&&(ba.feature.share=!0),r.set("Content-Type","application/json;charset=UTF-8").send(JSON.stringify({status:"success",data:{guide:"\u26A0\uFE0F\u26A0\uFE0F\u26A0\uFE0F \u60A8\u5F53\u524D\u770B\u5230\u7684\u662F\u540E\u7AEF\u7684\u54CD\u5E94. \u82E5\u60F3\u914D\u5408\u524D\u7AEF\u4F7F\u7528, \u53EF\u8BBF\u95EE\u5B98\u65B9\u524D\u7AEF https://sub-store.vercel.app \u540E\u81EA\u884C\u914D\u7F6E\u540E\u7AEF\u5730\u5740, \u6216\u4E00\u952E\u914D\u7F6E\u540E\u7AEF https://sub-store.vercel.app?api=https://a.com/xxx (\u5047\u8BBE https://a.com \u662F\u4F60\u540E\u7AEF\u7684\u57DF\u540D, /xxx \u662F\u81EA\u5B9A\u4E49\u8DEF\u5F84). \u9700\u6CE8\u610F HTTPS \u524D\u7AEF\u65E0\u6CD5\u8BF7\u6C42\u975E\u672C\u5730\u7684 HTTP \u540E\u7AEF(\u90E8\u5206\u6D4F\u89C8\u5668\u4E0A\u4E5F\u65E0\u6CD5\u8BBF\u95EE\u672C\u5730 HTTP \u540E\u7AEF). \u8BF7\u914D\u7F6E\u53CD\u4EE3\u6216\u5728\u5C40\u57DF\u7F51\u81EA\u5EFA HTTP \u524D\u7AEF. \u5982\u679C\u8FD8\u6709\u95EE\u9898, \u53EF\u67E5\u770B\u6B64\u6392\u67E5\u8BF4\u660E: https://t.me/zhetengsha/1068",...ba}},null,2))}async function NK(t,r){await Vp(),await Kp(),Wr.revokeAll(),zf.revokeAll(),Vo.revokeAll(),je(r)}async function zp(t,r,n){let{gistToken:i,syncPlatform:u}=R.read(Kt);if(!i)throw new Error("GitHub Token is required for backup!");let p=new Ds({token:i,key:UA,syncPlatform:u}),g=R.read("#sub-store");g=g?JSON.parse(g):{},R.env.isNode&&(g=JSON.parse(JSON.stringify(R.cache)));let m,A=R.read(Kt),y=A.syncTime,D=n||A.gistUpload||"base64";switch(R.info(`Gist backup action: ${t}, keep: ${r}, encode: ${n}, settings encode: ${A.gistUpload}, final encoding: ${D}`),t){case"upload":try{if(m=R.read("#sub-store"),m=m?JSON.parse(m):{},R.env.isNode&&(m=JSON.parse(JSON.stringify(R.cache))),D==="plaintext"?(m.settings.gistToken="\u6062\u590D\u540E\u8BF7\u91CD\u65B0\u8BBE\u7F6E GitHub Token",m=JSON.stringify(m,null,"  ")):m=ft.encode(JSON.stringify(m,null,"  ")),R.info("\u4E0B\u8F7D\u5907\u4EFD, \u4E0E\u672C\u5730\u5185\u5BB9\u5BF9\u6BD4..."),await p.download(Kd)===m){R.info("\u5185\u5BB9\u4E00\u81F4, \u65E0\u9700\u4E0A\u4F20\u5907\u4EFD");return}}catch(o){R.error(`${o.message??o}`)}A.syncTime=new Date().getTime(),R.write(A,Kt),m=R.read("#sub-store"),m=m?JSON.parse(m):{},R.env.isNode&&(m=JSON.parse(JSON.stringify(R.cache))),D==="plaintext"?(m.settings.gistToken="\u6062\u590D\u540E\u8BF7\u91CD\u65B0\u8BBE\u7F6E GitHub Token",m=JSON.stringify(m,null,"  ")):m=ft.encode(JSON.stringify(m,null,"  ")),R.info("\u4E0A\u4F20\u5907\u4EFD\u4E2D...");try{await p.upload({[Kd]:{content:m}}),R.info("\u4E0A\u4F20\u5907\u4EFD\u5B8C\u6210")}catch(o){throw A.syncTime=y,R.write(A,Kt),o}break;case"download":R.info("\u8FD8\u539F\u5907\u4EFD\u4E2D..."),m=await p.download(Kd);try{if(m=JSON.parse(ft.decode(m)),Object.keys(m.settings).length===0)throw new Error("\u5907\u4EFD\u6587\u4EF6\u5E94\u8BE5\u81F3\u5C11\u5305\u542B settings \u5B57\u6BB5")}catch{try{if(m=JSON.parse(m),Object.keys(m.settings).length===0)throw new Error("\u5907\u4EFD\u6587\u4EF6\u5E94\u8BE5\u81F3\u5C11\u5305\u542B settings \u5B57\u6BB5")}catch(o){throw R.error(`Gist \u5907\u4EFD\u6587\u4EF6\u6821\u9A8C\u5931\u8D25, \u65E0\u6CD5\u8FD8\u539F
Reason: ${o.message??o}`),new Error("Gist \u5907\u4EFD\u6587\u4EF6\u6821\u9A8C\u5931\u8D25, \u65E0\u6CD5\u8FD8\u539F")}}r&&(R.info(`\u4FDD\u7559\u539F\u6709\u8BBE\u7F6E ${r}`),r.split(",").forEach(o=>{hw.default.set(m,o,hw.default.get(g,o))})),R.write(JSON.stringify(m,null,"  "),"#sub-store"),R.env.isNode&&(R.cache=m,R.persistCache()),R.info("perform migration after restoring from gist..."),Ku(),R.info("migration completed"),R.info("\u8FD8\u539F\u5907\u4EFD\u5B8C\u6210");break}}async function kK(t,r){let{action:n,keep:i,encode:u}=t.query,{gistToken:p}=R.read(Kt);if(!p)Te(r,new jt("GIST_TOKEN_NOT_FOUND","GitHub Token is required for backup!"));else try{await zp(n,i,u),je(r)}catch(g){R.error(`Failed to ${n} gist data.
Reason: ${g.message??g}`),Te(r,new pr("BACKUP_FAILED",`Failed to ${n} gist data!`,`Reason: ${g.message??g}`))}}R.read(Jt)||R.write({},Jt);function pw(t){t.get("/api/sub/flow/:name",LK),t.route("/api/sub/:name").get(jK).patch(HK).delete(MK),t.route("/api/subs").get(qK).post(UK).put(VK)}async function LK(t,r){let{name:n}=t.params,{url:i}=t.query;i&&R.info(`\u6307\u5B9A\u8FDC\u7A0B\u8BA2\u9605 URL: ${i}`);let u=R.read(Jt),p=ct(u,n);if(!p){Te(r,new br("RESOURCE_NOT_FOUND",`Subscription ${n} does not exist!`),404);return}if(p.source==="local"&&!["localFirst","remoteFirst"].includes(p.mergeSources)){if(p.subUserinfo){let g;if(/^https?:\/\//.test(p.subUserinfo))try{g=await zn(void 0,void 0,void 0,p.proxy,p.subUserinfo)}catch(m){R.error(`\u8BA2\u9605 ${n} \u4F7F\u7528\u81EA\u5B9A\u4E49\u6D41\u91CF\u94FE\u63A5 ${p.subUserinfo} \u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u65F6\u53D1\u751F\u9519\u8BEF: ${JSON.stringify(m)}`)}else g=p.subUserinfo;try{je(r,{...Ko(g)})}catch(m){R.error(`Failed to parse flow info for local subscription ${n}: ${m.message??m}`),Te(r,new jt("NO_FLOW_INFO","N/A","Failed to parse flow info"))}}else Te(r,new jt("NO_FLOW_INFO","N/A",`Local subscription ${n} has no flow information!`));return}try{i=`${i||p.url}`.split(/[\r\n]+/).map(y=>y.trim()).filter(y=>y.length)?.[0]||"";let g={},m=i.split("#");if(i=i.split("#")[0],m.length>1)try{g=JSON.parse(decodeURIComponent(m[1]))}catch{for(let y of m[1].split("&")){let D=y.split("=")[0],o=y.split("=")[1];g[D]=o==null||o===""?!0:decodeURIComponent(o)}}if(g.noFlow||!/^https?/.test(i)){Te(r,new jt("NO_FLOW_INFO","N/A",`Subscription ${n}: noFlow`));return}let A=await zn(g?.insecure?`${i}#insecure`:i,g.flowUserAgent,void 0,p.proxy,g.flowUrl);if(!A&&!p.subUserinfo){Te(r,new pr("NO_FLOW_INFO","No flow info","Failed to fetch flow headers"));return}try{let y=a0({resetDay:g.resetDay,startDate:g.startDate,cycleDays:g.cycleDays}),D;if(/^https?:\/\//.test(p.subUserinfo))try{D=await zn(void 0,void 0,void 0,p.proxy,p.subUserinfo)}catch(M){R.error(`\u8BA2\u9605 ${n} \u4F7F\u7528\u81EA\u5B9A\u4E49\u6D41\u91CF\u94FE\u63A5 ${p.subUserinfo} \u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u65F6\u53D1\u751F\u9519\u8BEF: ${JSON.stringify(M)}`)}else D=p.subUserinfo;let o={...Ko([D,A].filter(M=>M).join("; "))};y!=null&&(o.remainingDays=y),je(r,o)}catch(y){R.error(`Failed to parse flow info for local subscription ${n}: ${y.message??y}`),Te(r,new jt("NO_FLOW_INFO","N/A","Failed to parse flow info"))}}catch{Te(r,new el("URL_NOT_ACCESSIBLE",`The URL for subscription ${n} is inaccessible.`))}}function UK(t,r){let n=t.body;if(delete n.subscriptions,R.info(`\u6B63\u5728\u521B\u5EFA\u8BA2\u9605\uFF1A ${n.name}`),/\//.test(n.name)){Te(r,new jt("INVALID_NAME",`Subscription ${n.name} is invalid`));return}let i=R.read(Jt);if(ct(i,n.name)){Te(r,new jt("DUPLICATE_KEY",`Subscription ${n.name} already exists.`));return}i.push(n),R.write(i,Jt),je(r,n,201)}function jK(t,r){let{name:n}=t.params,{raw:i}=t.query,u=R.read(Jt),p=ct(u,n);delete p.subscriptions,p?i?r.set("content-type","application/json").set("content-disposition",`attachment; filename="${encodeURIComponent(`sub-store_subscription_${n}_${Gu(new Date)}.json`)}"`).send(JSON.stringify(p)):je(r,p):Te(r,new br("SUBSCRIPTION_NOT_FOUND",`Subscription ${n} does not exist`,404))}function HK(t,r){let{name:n}=t.params,i=t.body;delete i.subscriptions;let u=R.read(Jt),p=ct(u,n);if(p){let g={...p,...i};if(R.info(`\u6B63\u5728\u66F4\u65B0\u8BA2\u9605\uFF1A ${n}`),n!==i.name){let m=R.read(Zt)||[];for(let D of m){let o=D.subscriptions.indexOf(n);o!==-1&&(D.subscriptions[o]=i.name)}let A=R.read(Bt)||[];for(let D of A)D.type==="subscription"&&D.source==n&&(D.source=i.name);let y=R.read(Lt)||[];for(let D of y)D.sourceType==="subscription"&&D.sourceName==n&&(D.sourceName=i.name);R.write(m,Zt),R.write(A,Bt),R.write(y,Lt)}Os(u,n,g),R.write(u,Jt),je(r,g)}else Te(r,new br("RESOURCE_NOT_FOUND",`Subscription ${n} does not exist!`),404)}function MK(t,r){let{name:n}=t.params;R.info(`\u5220\u9664\u8BA2\u9605\uFF1A${n}...`);let i=R.read(Jt);gs(i,n),R.write(i,Jt);let u=R.read(Zt);for(let p of u)p.subscriptions=p.subscriptions.filter(g=>g!==n);R.write(u,Zt),je(r)}function qK(t,r){let n=R.read(Jt);je(r,n)}function VK(t,r){let n=t.body;R.write(n,Jt),je(r)}function gw(t){R.read(Zt)||R.write({},Zt),t.route("/api/collection/:name").get(zK).patch(GK).delete(YK),t.route("/api/collections").get(WK).post(KK).put(XK)}function KK(t,r){let n=t.body;if(R.info(`\u6B63\u5728\u521B\u5EFA\u7EC4\u5408\u8BA2\u9605\uFF1A${n.name}`),/\//.test(n.name)){Te(r,new jt("INVALID_NAME",`Collection ${n.name} is invalid`));return}let i=R.read(Zt);if(ct(i,n.name)){Te(r,new jt("DUPLICATE_KEY",`Collection ${n.name} already exists.`));return}i.push(n),R.write(i,Zt),je(r,n,201)}function zK(t,r){let{name:n}=t.params,{raw:i}=t.query,u=R.read(Zt),p=ct(u,n);p?i?r.set("content-type","application/json").set("content-disposition",`attachment; filename="${encodeURIComponent(`sub-store_collection_${n}_${Gu(new Date)}.json`)}"`).send(JSON.stringify(p)):je(r,p):Te(r,new br("SUBSCRIPTION_NOT_FOUND",`Collection ${n} does not exist`,404))}function GK(t,r){let{name:n}=t.params,i=t.body,u=R.read(Zt),p=ct(u,n);if(p){let g={...p,...i};if(R.info(`\u6B63\u5728\u66F4\u65B0\u7EC4\u5408\u8BA2\u9605\uFF1A${n}...`),n!==g.name){let m=R.read(Bt)||[];for(let y of m)y.type==="collection"&&y.source===p.name&&(y.source=g.name);let A=R.read(Lt)||[];for(let y of A)y.sourceType==="collection"&&y.sourceName===p.name&&(y.sourceName=g.name);R.write(m,Bt),R.write(A,Lt)}Os(u,n,g),R.write(u,Zt),je(r,g)}else Te(r,new br("RESOURCE_NOT_FOUND",`Collection ${n} does not exist!`),404)}function YK(t,r){let{name:n}=t.params;R.info(`\u6B63\u5728\u5220\u9664\u7EC4\u5408\u8BA2\u9605\uFF1A${n}`);let i=R.read(Zt);gs(i,n),R.write(i,Zt),je(r)}function WK(t,r){let n=R.read(Zt);je(r,n)}function XK(t,r){let n=t.body;R.write(n,Zt),je(r)}function mw(t){R.read(Lt)||R.write([],Lt),t.get("/share/file/:name",SS),t.route("/api/file/:name").get(SS).patch(QK).delete(ez),t.route("/api/wholeFile/:name").get(ZK),t.route("/api/files").get(tz).post(JK).put(nz),t.route("/api/wholeFiles").get(rz)}function JK(t,r){let n=t.body;n.name=`${n.name??Date.now()}`,R.info(`\u6B63\u5728\u521B\u5EFA\u6587\u4EF6\uFF1A${n.name}`);let i=R.read(Lt);if(ct(i,n.name))return Te(r,new jt("DUPLICATE_KEY",t.body.name?`\u5DF2\u5B58\u5728 name \u4E3A ${n.name} \u7684\u6587\u4EF6`:"\u65E0\u6CD5\u540C\u65F6\u521B\u5EFA\u76F8\u540C\u7684\u6587\u4EF6 \u53EF\u7A0D\u540E\u91CD\u8BD5"));i.push(n),R.write(i,Lt),je(r,n,201)}async function SS(t,r){let{name:n}=t.params,i=t.headers["user-agent"]||t.headers["User-Agent"];R.info(`\u6B63\u5728\u4E0B\u8F7D\u6587\u4EF6\uFF1A${n}
\u8BF7\u6C42 User-Agent: ${i}`);let{url:u,subInfoUrl:p,subInfoUserAgent:g,ua:m,content:A,mergeSources:y,ignoreFailedRemoteFile:D,proxy:o,noCache:M,produceType:W}=t.query,w={_req:{method:t.method,url:t.url,path:t.path,query:t.query,params:t.params,headers:t.headers,body:t.body}};if(t.query.$options){try{w=JSON.parse(decodeURIComponent(t.query.$options))}catch{for(let X of t.query.$options.split("&")){let j=X.split("=")[0],it=X.split("=")[1];w[j]=it==null||it===""?!0:decodeURIComponent(it)}}R.info(`\u4F20\u5165 $options: ${JSON.stringify(w)}`)}u&&R.info(`\u6307\u5B9A\u8FDC\u7A0B\u6587\u4EF6 URL: ${u}`),o&&R.info(`\u6307\u5B9A\u8FDC\u7A0B\u8BA2\u9605\u4F7F\u7528\u4EE3\u7406/\u7B56\u7565 proxy: ${o}`),m&&R.info(`\u6307\u5B9A\u8FDC\u7A0B\u6587\u4EF6 User-Agent: ${m}`),p&&R.info(`\u6307\u5B9A\u83B7\u53D6\u6D41\u91CF\u7684 subInfoUrl: ${p}`),g&&R.info(`\u6307\u5B9A\u83B7\u53D6\u6D41\u91CF\u7684 subInfoUserAgent: ${g}`),A&&R.info(`\u6307\u5B9A\u672C\u5730\u6587\u4EF6: ${A}`),y&&R.info(`\u6307\u5B9A\u5408\u5E76\u6765\u6E90: ${y}`),D!=null&&D!==""&&R.info(`\u6307\u5B9A\u5FFD\u7565\u5931\u8D25\u7684\u8FDC\u7A0B\u6587\u4EF6: ${D}`),M&&R.info(`\u6307\u5B9A\u4E0D\u4F7F\u7528\u7F13\u5B58: ${M}`),W&&R.info(`\u6307\u5B9A\u751F\u4EA7\u7C7B\u578B: ${W}`);let U=R.read(Lt),nt=ct(U,n);if(nt)try{let X=await vn({type:"file",name:n,url:u,ua:m,content:A,mergeSources:y,ignoreFailedRemoteFile:D,$options:w,proxy:o,noCache:M,produceType:W,all:!0});try{if(p=p||nt.subInfoUrl,p){let j=await zn(p,g||nt.subInfoUserAgent,void 0,o||nt.proxy);j&&r.set("subscription-userinfo",Yu(j))}}catch(j){R.error(`\u6587\u4EF6 ${n} \u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u65F6\u53D1\u751F\u9519\u8BEF: ${JSON.stringify(j)}`)}nt.download&&r.set("Content-Disposition",`attachment; filename*=UTF-8''${encodeURIComponent(nt.displayName||nt.name)}`),r.set("Content-Type","text/plain; charset=utf-8"),X?.$options?._res?.headers&&Object.entries(X.$options._res.headers).forEach(([j,it])=>{r.set(j,it)}),X?.$options?._res?.status&&r.status(X.$options._res.status),r.send(X?.$content??"")}catch(X){R.notify("\u{1F30D} Sub-Store \u4E0B\u8F7D\u6587\u4EF6\u5931\u8D25",`\u274C \u65E0\u6CD5\u4E0B\u8F7D\u6587\u4EF6\uFF1A${n}\uFF01`,`\u{1F914} \u539F\u56E0\uFF1A${X.message??X}`),R.error(X.message??X),Te(r,new pr("INTERNAL_SERVER_ERROR",`Failed to download file: ${n}`,`Reason: ${X.message??X}`))}else R.error(`\u{1F30D} Sub-Store \u4E0B\u8F7D\u6587\u4EF6\u5931\u8D25
\u274C \u672A\u627E\u5230\u6587\u4EF6\uFF1A${n}\uFF01`),Te(r,new br("RESOURCE_NOT_FOUND",`File ${n} does not exist!`),404)}function ZK(t,r){let{name:n}=t.params,{raw:i}=t.query,u=R.read(Lt),p=ct(u,n);p?i?r.set("content-type","application/json").set("content-disposition",`attachment; filename="${encodeURIComponent(`sub-store_file_${n}_${Gu(new Date)}.json`)}"`).send(JSON.stringify(p)):je(r,p):Te(r,new br("FILE_NOT_FOUND",`File ${n} does not exist`,404))}function QK(t,r){let{name:n}=t.params,i=t.body,u=R.read(Lt),p=ct(u,n);if(p){let g={...p,...i};if(R.info(`\u6B63\u5728\u66F4\u65B0\u6587\u4EF6\uFF1A${n}...`),n!==g.name){let m=R.read(Bt)||[];for(let A of m)A.type==="file"&&A.source===p.name&&(A.source=g.name);R.write(m,Bt)}Os(u,n,g),R.write(u,Lt),je(r,g)}else Te(r,new br("RESOURCE_NOT_FOUND",`File ${n} does not exist!`),404)}function ez(t,r){let{name:n}=t.params;R.info(`\u6B63\u5728\u5220\u9664\u6587\u4EF6\uFF1A${n}`);let i=R.read(Lt);gs(i,n),R.write(i,Lt),je(r)}function tz(t,r){let n=R.read(Lt);je(r,n.map(({content:i,...u})=>u))}function rz(t,r){let n=R.read(Lt);je(r,n)}function nz(t,r){let n=t.body;R.write(n,Lt),je(r)}function vw(t){R.read(ui)||R.write([],ui),t.post("/api/token",az),t.route("/api/token/:token").delete(iz),t.route("/api/tokens").get(sz)}function iz(t,r){let{token:n}=t.params;R.info(`\u6B63\u5728\u5220\u9664\uFF1A${n}`);let i=R.read(ui);gs(i,n,"token"),R.write(i,ui),je(r)}function sz(t,r){let{type:n,name:i}=t.query,u=R.read(ui)||[];je(r,n||i?u.filter(p=>(n?p.type===n:!0)&&(i?p.name===i:!0)):u)}async function az(t,r){if(!hn().isNode)return Te(r,new jt("INVALID_ENV","This endpoint is only available in Node.js environment"));try{let{payload:n,options:i}=t.body,u=require("ms"),p=n?.type,g=n?.name;if(!p||!g)return Te(r,new jt("INVALID_PAYLOAD","payload type and name are required"));let m=n?.token;if(m!=null){if(typeof m!="string"||m.length<1)return Te(r,new jt("INVALID_CUSTOM_TOKEN",`Invalid custom token: ${m}`));if((R.read(ui)||[]).find(o=>o.token===m&&o.type===p&&o.name===g))return Te(r,new jt("DUPLICATE_TOKEN",`Token ${m} already exists`))}if(p==="col"){if(!(R.read(Zt)||[]).find(o=>o.name===g))return Te(r,new jt("INVALID_COLLECTION",`collection ${g} not found`))}else if(p==="file"){if(!(R.read(Lt)||[]).find(o=>o.name===g))return Te(r,new jt("INVALID_FILE",`file ${g} not found`))}else if(p==="sub"){if(!(R.read(Jt)||[]).find(o=>o.name===g))return Te(r,new jt("INVALID_SUB",`sub ${g} not found`))}else return Te(r,new jt("INVALID_TYPE",`type ${g} not supported`));let A=i?.expiresIn;if(i?.expiresIn!=null&&(A=u(i.expiresIn),A==null||isNaN(A)||A<=0))return Te(r,new jt("INVALID_EXPIRES_IN",`Invalid expiresIn option: ${i.expiresIn}`));let y=require("nanoid"),D=R.read(ui)||[];if(!m)do m=y.customAlphabet(y.urlAlphabet)();while(D.find(o=>o.token===m&&o.type===p&&o.name===g));return D.push({...n,token:m,createdAt:Date.now(),expiresIn:A>0?i?.expiresIn:void 0,exp:A>0?Date.now()+A:void 0}),R.write(D,ui),je(r,{token:m})}catch(n){return Te(r,new pr("TOKEN_SIGN_FAILED","Failed to sign token",`Reason: ${n.message??n}`))}}function ww(t){R.read(jn)||R.write([],jn),t.route("/api/module/:name").get(oz).patch(cz).delete(lz),t.route("/api/modules").get(fz).post(uz).put(hz)}function uz(t,r){let n=t.body;n.name=`${n.name??Gi(JSON.stringify(n))}`,R.info(`\u6B63\u5728\u521B\u5EFA\u6A21\u5757\uFF1A${n.name}`);let i=R.read(jn);if(ct(i,n.name))return Te(r,new jt("DUPLICATE_KEY",t.body.name?`\u5DF2\u5B58\u5728 name \u4E3A ${n.name} \u7684\u6A21\u5757`:"\u5DF2\u5B58\u5728\u76F8\u540C\u7684\u6A21\u5757 \u8BF7\u52FF\u91CD\u590D\u6DFB\u52A0"));i.push(n),R.write(i,jn),je(r,n,201)}function oz(t,r){let{name:n}=t.params,i=R.read(jn),u=ct(i,n);u?r.set("Content-Type","text/plain; charset=utf-8").send(u.content):Te(r,new br("MODULE_NOT_FOUND",`Module ${n} does not exist`,404))}function cz(t,r){let{name:n}=t.params,i=t.body,u=R.read(jn),p=ct(u,n);if(p){let g={...p,...i};R.info(`\u6B63\u5728\u66F4\u65B0\u6A21\u5757\uFF1A${n}...`),Os(u,n,g),R.write(u,jn),je(r,g)}else Te(r,new br("RESOURCE_NOT_FOUND",`Module ${n} does not exist!`),404)}function lz(t,r){let{name:n}=t.params;R.info(`\u6B63\u5728\u5220\u9664\u6A21\u5757\uFF1A${n}`);let i=R.read(jn);gs(i,n),R.write(i,jn),je(r)}function fz(t,r){let n=R.read(jn);je(r,n.map(({content:i,...u})=>u))}function hz(t,r){let n=t.body;R.write(n,jn),je(r)}var pee=tn(KS()),mee=tn(XS());function Uz(t){let r=Object.keys(t),n="",i="",u="";for(let p of r){let g=p.toLowerCase();g==="user-agent"?(n=t[p],i=n.toLowerCase()):g==="accept"&&(u=t[p])}return{UA:n,ua:i,accept:u}}function jz({ua:t,UA:r,accept:n}){return r.indexOf("Quantumult%20X")!==-1?"QX":t.indexOf("egern")!==-1?"Egern":r.indexOf("Surfboard")!==-1?"Surfboard":r.indexOf("Surge Mac")!==-1?"SurgeMac":r.indexOf("Surge")!==-1?"Surge":r.indexOf("Decar")!==-1||r.indexOf("Loon")!==-1?"Loon":r.indexOf("Shadowrocket")!==-1?"Shadowrocket":r.indexOf("Stash")!==-1?"Stash":t==="meta"||t.indexOf("clash")!==-1&&t.indexOf("meta")!==-1||t.indexOf("clash-verge")!==-1||t.indexOf("flclash")!==-1?"ClashMeta":t.indexOf("clash")!==-1?"Clash":t.indexOf("v2ray")!==-1?"V2Ray":t.indexOf("sing-box")!==-1||t.indexOf("singbox")!==-1?"sing-box":n.indexOf("application/json")===0?"JSON":"V2Ray"}function Dw(t){let{UA:r,ua:n,accept:i}=Uz(t);return jz({ua:n,UA:r,accept:i})}function Fw(t,r){return!1}function Sw(t){t.get("/share/col/:name/:target",async(r,n)=>{let{target:i}=r.params;i&&(r.query.target=i,R.info(`\u4F7F\u7528\u8DEF\u7531\u6307\u5B9A\u76EE\u6807: ${i}`)),await Ql(r,n)}),t.get("/share/col/:name",Ql),t.get("/share/sub/:name/:target",async(r,n)=>{let{target:i}=r.params;i&&(r.query.target=i,R.info(`\u4F7F\u7528\u8DEF\u7531\u6307\u5B9A\u76EE\u6807: ${i}`)),await Zl(r,n)}),t.get("/share/sub/:name",Zl),t.get("/download/collection/:name/:target",async(r,n)=>{let{target:i}=r.params;i&&(r.query.target=i,R.info(`\u4F7F\u7528\u8DEF\u7531\u6307\u5B9A\u76EE\u6807: ${i}`)),await Ql(r,n)}),t.get("/download/collection/:name",Ql),t.get("/download/:name/:target",async(r,n)=>{let{target:i}=r.params;i&&(r.query.target=i,R.info(`\u4F7F\u7528\u8DEF\u7531\u6307\u5B9A\u76EE\u6807: ${i}`)),await Zl(r,n)}),t.get("/download/:name",Zl),t.get("/download/collection/:name/api/v1/server/details",async(r,n)=>{r.query.platform="JSON",r.query.produceType="internal",r.query.resultFormat="nezha",await Ql(r,n)}),t.get("/download/:name/api/v1/server/details",async(r,n)=>{r.query.platform="JSON",r.query.produceType="internal",r.query.resultFormat="nezha",await Zl(r,n)}),t.get("/download/collection/:name/api/v1/monitor/:nezhaIndex",async(r,n)=>{r.query.platform="JSON",r.query.produceType="internal",r.query.resultFormat="nezha-monitor",await Ql(r,n)}),t.get("/download/:name/api/v1/monitor/:nezhaIndex",async(r,n)=>{r.query.platform="JSON",r.query.produceType="internal",r.query.resultFormat="nezha-monitor",await Zl(r,n)})}async function Zl(t,r){let{name:n,nezhaIndex:i}=t.params,u=t.query.target==="SurgeMac",p=t.query.target||Dw(t.headers)||"JSON",g=t.headers["user-agent"]||t.headers["User-Agent"];R.info(`\u6B63\u5728\u4E0B\u8F7D\u8BA2\u9605\uFF1A${n}
\u8BF7\u6C42 User-Agent: ${g}
\u8BF7\u6C42 target: ${t.query.target}
\u5B9E\u9645\u8F93\u51FA: ${p}`);let{url:m,ua:A,content:y,mergeSources:D,ignoreFailedRemoteSub:o,produceType:M,includeUnsupportedProxy:W,resultFormat:w,proxy:U,noCache:nt}=t.query,X={_req:{method:t.method,url:t.url,path:t.path,query:t.query,params:t.params,headers:t.headers,body:t.body}};if(t.query.$options){try{X=JSON.parse(decodeURIComponent(t.query.$options))}catch{for(let ot of t.query.$options.split("&")){let K=ot.split("=")[0],H=ot.split("=")[1];X[K]=H==null||H===""?!0:decodeURIComponent(H)}}R.info(`\u4F20\u5165 $options: ${JSON.stringify(X)}`)}m&&(R.info(`\u6307\u5B9A\u8FDC\u7A0B\u8BA2\u9605 URL: ${m}`),/^https?:\/\//.test(m)||(y=m,R.info("URL \u4E0D\u662F\u94FE\u63A5\uFF0C\u89C6\u4E3A\u672C\u5730\u8BA2\u9605"))),y&&R.info(`\u6307\u5B9A\u672C\u5730\u8BA2\u9605: ${y}`),U&&R.info(`\u6307\u5B9A\u8FDC\u7A0B\u8BA2\u9605\u4F7F\u7528\u4EE3\u7406/\u7B56\u7565 proxy: ${U}`),A&&R.info(`\u6307\u5B9A\u8FDC\u7A0B\u8BA2\u9605 User-Agent: ${A}`),D&&R.info(`\u6307\u5B9A\u5408\u5E76\u6765\u6E90: ${D}`),o!=null&&o!==""&&R.info(`\u6307\u5B9A\u5FFD\u7565\u5931\u8D25\u7684\u8FDC\u7A0B\u8BA2\u9605: ${o}`),M&&R.info(`\u6307\u5B9A\u751F\u4EA7\u7C7B\u578B: ${M}`),W&&R.info(`\u5305\u542B\u5B98\u65B9/\u5546\u5E97\u7248/\u672A\u7EED\u8D39\u8BA2\u9605\u4E0D\u652F\u6301\u7684\u534F\u8BAE: ${W}`),!W&&Fw(p,g)&&(W=!0,R.info(`\u5F53\u524D\u5BA2\u6237\u7AEF\u53EF\u5305\u542B\u5B98\u65B9/\u5546\u5E97\u7248/\u672A\u7EED\u8D39\u8BA2\u9605\u4E0D\u652F\u6301\u7684\u534F\u8BAE: ${W}`)),u&&R.info("\u624B\u52A8\u6307\u5B9A\u4E86 target \u4E3A SurgeMac, \u5C06\u4F7F\u7528 Mihomo External"),nt&&R.info(`\u6307\u5B9A\u4E0D\u4F7F\u7528\u7F13\u5B58: ${nt}`);let j=R.read(Jt),it=ct(j,n);if(it)try{it.passThroughUA&&(R.info(`\u8BA2\u9605\u5F00\u542F\u4E86\u900F\u4F20 User-Agent, \u4F7F\u7528\u8BF7\u6C42\u7684 User-Agent: ${g}`),A=g);let ot=await vn({type:"subscription",name:n,platform:p,url:m,ua:A,content:y,mergeSources:D,ignoreFailedRemoteSub:o,produceType:M,produceOpts:{"include-unsupported-proxy":W,useMihomoExternal:u},$options:X,proxy:U,noCache:nt}),K;if(it.source!=="local"||["localFirst","remoteFirst"].includes(it.mergeSources))try{m=`${m||it.url}`.split(/[\r\n]+/).map(pt=>pt.trim()).filter(pt=>pt.length)?.[0]||"";let H={},q=m.split("#");if(m=m.split("#")[0],q.length>1)try{H=JSON.parse(decodeURIComponent(q[1]))}catch{for(let pt of q[1].split("&")){let yt=pt.split("=")[0],Rt=pt.split("=")[1];H[yt]=Rt==null||Rt===""?!0:decodeURIComponent(Rt)}}!H.noFlow&&/^https?/.test(m)&&(K=await zn(H?.insecure?`${m}#insecure`:m,H.flowUserAgent,void 0,U||it.proxy,H.flowUrl),K&&r.set("subscription-userinfo",Yu(K)))}catch(H){R.error(`\u8BA2\u9605 ${n} \u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u65F6\u53D1\u751F\u9519\u8BEF: ${JSON.stringify(H)}`)}if(it.subUserinfo){let H;if(/^https?:\/\//.test(it.subUserinfo))try{H=await zn(void 0,void 0,void 0,U||it.proxy,it.subUserinfo)}catch(q){R.error(`\u8BA2\u9605 ${n} \u4F7F\u7528\u81EA\u5B9A\u4E49\u6D41\u91CF\u94FE\u63A5 ${it.subUserinfo} \u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u65F6\u53D1\u751F\u9519\u8BEF: ${JSON.stringify(q)}`)}else H=it.subUserinfo;r.set("subscription-userinfo",Yu([H,K].filter(q=>q).join(";")))}p==="JSON"?(w==="nezha"?ot=ZS(ot):w==="nezha-monitor"&&(i=/^\d+$/.test(i)?parseInt(i,10):ot.findIndex(H=>H.name===i),ot=await JS(ot[i],i,t.query)),r.set("Content-Type","application/json;charset=utf-8").send(ot)):r.send(ot)}catch(ot){R.notify("\u{1F30D} Sub-Store \u4E0B\u8F7D\u8BA2\u9605\u5931\u8D25",`\u274C \u65E0\u6CD5\u4E0B\u8F7D\u8BA2\u9605\uFF1A${n}\uFF01`,`\u{1F914} \u539F\u56E0\uFF1A${ot.message??ot}`),R.error(ot.message??ot),Te(r,new pr("INTERNAL_SERVER_ERROR",`Failed to download subscription: ${n}`,`Reason: ${ot.message??ot}`))}else R.error(`\u{1F30D} Sub-Store \u4E0B\u8F7D\u8BA2\u9605\u5931\u8D25
\u274C \u672A\u627E\u5230\u8BA2\u9605\uFF1A${n}\uFF01`),Te(r,new br("RESOURCE_NOT_FOUND",`Subscription ${n} does not exist!`),404)}async function Ql(t,r){let{name:n,nezhaIndex:i}=t.params,u=t.query.target==="SurgeMac",p=t.query.target||Dw(t.headers)||"JSON",g=R.read(Zt),m=ct(g,n),A=t.headers["user-agent"]||t.headers["User-Agent"];R.info(`\u6B63\u5728\u4E0B\u8F7D\u7EC4\u5408\u8BA2\u9605\uFF1A${n}
\u8BF7\u6C42 User-Agent: ${A}
\u8BF7\u6C42 target: ${t.query.target}
\u5B9E\u9645\u8F93\u51FA: ${p}`);let{ignoreFailedRemoteSub:y,produceType:D,includeUnsupportedProxy:o,resultFormat:M,proxy:W,noCache:w}=t.query,U={_req:{method:t.method,url:t.url,path:t.path,query:t.query,params:t.params,headers:t.headers,body:t.body}};if(t.query.$options){try{U=JSON.parse(decodeURIComponent(t.query.$options))}catch{for(let nt of t.query.$options.split("&")){let X=nt.split("=")[0],j=nt.split("=")[1];U[X]=j==null||j===""?!0:decodeURIComponent(j)}}R.info(`\u4F20\u5165 $options: ${JSON.stringify(U)}`)}if(W&&R.info(`\u6307\u5B9A\u8FDC\u7A0B\u8BA2\u9605\u4F7F\u7528\u4EE3\u7406/\u7B56\u7565 proxy: ${W}`),y!=null&&y!==""&&R.info(`\u6307\u5B9A\u5FFD\u7565\u5931\u8D25\u7684\u8FDC\u7A0B\u8BA2\u9605: ${y}`),D&&R.info(`\u6307\u5B9A\u751F\u4EA7\u7C7B\u578B: ${D}`),o&&R.info(`\u5305\u542B\u5B98\u65B9/\u5546\u5E97\u7248/\u672A\u7EED\u8D39\u8BA2\u9605\u4E0D\u652F\u6301\u7684\u534F\u8BAE: ${o}`),!o&&Fw(p,A)&&(o=!0,R.info(`\u5F53\u524D\u5BA2\u6237\u7AEF\u53EF\u5305\u542B\u5B98\u65B9/\u5546\u5E97\u7248/\u672A\u7EED\u8D39\u8BA2\u9605\u4E0D\u652F\u6301\u7684\u534F\u8BAE: ${o}`)),u&&R.info("\u624B\u52A8\u6307\u5B9A\u4E86 target \u4E3A SurgeMac, \u5C06\u4F7F\u7528 Mihomo External"),w&&R.info(`\u6307\u5B9A\u4E0D\u4F7F\u7528\u7F13\u5B58: ${w}`),m)try{let nt=await vn({type:"collection",name:n,platform:p,ignoreFailedRemoteSub:y,produceType:D,produceOpts:{"include-unsupported-proxy":o,useMihomoExternal:u},$options:U,proxy:W,noCache:w,ua:A}),X,j=R.read(Jt),it=m.subscriptions;if(it.length>0){let H=ct(j,it[0]);if(H.source!=="local"||["localFirst","remoteFirst"].includes(H.mergeSources))try{let q=`${H.url}`.split(/[\r\n]+/).map(Rt=>Rt.trim()).filter(Rt=>Rt.length)?.[0]||"",pt={},yt=q.split("#");if(q=q.split("#")[0],yt.length>1)try{pt=JSON.parse(decodeURIComponent(yt[1]))}catch{for(let Rt of yt[1].split("&")){let Et=Rt.split("=")[0],vt=Rt.split("=")[1];pt[Et]=vt==null||vt===""?!0:decodeURIComponent(vt)}}!pt.noFlow&&/^https?:/.test(q)&&(X=await zn(pt?.insecure?`${q}#insecure`:q,pt.flowUserAgent,void 0,W||H.proxy||m.proxy,pt.flowUrl))}catch(q){R.error(`\u7EC4\u5408\u8BA2\u9605 ${n} \u4E2D\u7684\u5B50\u8BA2\u9605 ${H.name} \u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u65F6\u53D1\u751F\u9519\u8BEF: ${q.message??q}`)}if(H.subUserinfo){let q;if(/^https?:\/\//.test(H.subUserinfo))try{q=await zn(void 0,void 0,void 0,W||H.proxy,H.subUserinfo)}catch(pt){R.error(`\u7EC4\u5408\u8BA2\u9605 ${n} \u4F7F\u7528\u81EA\u5B9A\u4E49\u6D41\u91CF\u94FE\u63A5 ${H.subUserinfo} \u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u65F6\u53D1\u751F\u9519\u8BEF: ${JSON.stringify(pt)}`)}else q=H.subUserinfo;X=[q,X].filter(pt=>pt).join("; ")}}R.info(`\u7EC4\u5408\u8BA2\u9605 ${n} \u900F\u4F20\u7684\u7684\u6D41\u91CF\u4FE1\u606F: ${X}`);let ot;if(/^https?:\/\//.test(m.subUserinfo))try{ot=await zn(void 0,void 0,void 0,W||m.proxy,m.subUserinfo)}catch(H){R.error(`\u7EC4\u5408\u8BA2\u9605 ${n} \u4F7F\u7528\u81EA\u5B9A\u4E49\u6D41\u91CF\u94FE\u63A5 ${m.subUserinfo} \u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u65F6\u53D1\u751F\u9519\u8BEF: ${JSON.stringify(H)}`)}else ot=m.subUserinfo;let K=[ot,X].filter(H=>H).join("; ");K&&r.set("subscription-userinfo",Yu(K)),p==="JSON"?(M==="nezha"?nt=ZS(nt):M==="nezha-monitor"&&(i=/^\d+$/.test(i)?parseInt(i,10):nt.findIndex(H=>H.name===i),nt=await JS(nt[i],i,t.query)),r.set("Content-Type","application/json;charset=utf-8").send(nt)):r.send(nt)}catch(nt){R.notify("\u{1F30D} Sub-Store \u4E0B\u8F7D\u7EC4\u5408\u8BA2\u9605\u5931\u8D25",`\u274C \u4E0B\u8F7D\u7EC4\u5408\u8BA2\u9605\u9519\u8BEF\uFF1A${n}\uFF01`,`\u{1F914} \u539F\u56E0\uFF1A${nt}`),Te(r,new pr("INTERNAL_SERVER_ERROR",`Failed to download collection: ${n}`,`Reason: ${nt.message??nt}`))}else R.error("\u{1F30D} Sub-Store \u4E0B\u8F7D\u7EC4\u5408\u8BA2\u9605\u5931\u8D25",`\u274C \u672A\u627E\u5230\u7EC4\u5408\u8BA2\u9605\uFF1A${n}\uFF01`),Te(r,new br("RESOURCE_NOT_FOUND",`Collection ${n} does not exist!`),404)}async function JS(t,r,n){let i={code:0,message:"success",result:[]};try{let{isLoon:u,isSurge:p}=R.env;if(!u&&!p)throw new Error("\u4EC5\u652F\u6301 Loon \u548C Surge(ability=http-client-policy)");let g=Ot.produce([t],u?"Loon":"Surge");if(!g)throw new Error("\u5F53\u524D\u5BA2\u6237\u7AEF\u4E0D\u517C\u5BB9\u6B64\u8282\u70B9");let m=t._monitors||[{name:"Cloudflare",url:"http://cp.cloudflare.com/generate_204",method:"HEAD",number:3,timeout:2e3},{name:"Google",url:"http://www.google.com/generate_204",method:"HEAD",number:3,timeout:2e3}],A=n.number||Math.max(...m.map(y=>y.number))||3;for(let y of m){let D={monitor_id:m.indexOf(y),server_id:r,monitor_name:y.name,server_name:t.name,created_at:[],avg_delay:[]};for(let o=0;o<A;o++){let M=Date.now();try{await R.http[(y.method||"HEAD").toLowerCase()]({timeout:y.timeout||2e3,url:y.url,"policy-descriptor":g,node:g});let W=Date.now()-M;R.info(`${y.name} latency: ${W}`),D.avg_delay.push(W)}catch(W){R.error(W),D.avg_delay.push(0)}D.created_at.push(Date.now()-6e5*(y.number-o-1))}i.result.push(D)}}catch(u){R.error(u),i.result.push({monitor_id:0,server_id:0,monitor_name:`\u274C ${u.message??u}`,server_name:t.name,created_at:[Date.now()],avg_delay:[0]})}return JSON.stringify(i,null,2)}function ZS(t){let r={code:0,message:"success",result:[]};return t.map((n,i)=>{let u=n._geo?.countryCode||n._geo?.country;if(/^[a-z]{2}$/i.test(u)||(u=k0(n.name)),/^[a-z]{2}$/i.test(u)){let p=Math.round(new Date().getTime()/1e3),g=n._unavailable?0:p,m=parseInt(n._uptime||0,10);r.result.push({id:i,name:n.name,tag:`${n._tag??""}`,last_active:g,valid_ip:n._IP||n.server,ipv4:n._IPv4||n.server,ipv6:n._IPv6||(Mr(n.server)?n.server:""),host:{Platform:"Sub-Store",PlatformVersion:ba.version,CPU:[],MemTotal:1024,DiskTotal:1024,SwapTotal:1024,Arch:"",Virtualization:"",BootTime:p-m,CountryCode:u,Version:"0.0.1"},status:{CPU:0,MemUsed:0,SwapUsed:0,DiskUsed:0,NetInTransfer:0,NetOutTransfer:0,NetInSpeed:0,NetOutSpeed:0,Uptime:m,Load1:0,Load5:0,Load15:0,TcpConnCount:0,UdpConnCount:0,ProcessCount:0}})}}),JSON.stringify(r,null,2)}function Iw(t){t.post("/api/preview/sub",Mz),t.post("/api/preview/collection",qz),t.post("/api/preview/file",Hz)}async function Hz(t,r){try{let n=t.body,i="";if(n.type!=="mihomoProfile")if(n.source==="local"&&!["localFirst","remoteFirst"].includes(n.mergeSources))i=n.content;else{let m={};if(i=await Promise.all(n.url.split(/[\r\n]+/).map(A=>A.trim()).filter(A=>A.length).map(async A=>{try{return await un(A,n.ua,void 0,n.proxy)}catch(y){return m[A]=y,R.error(`\u6587\u4EF6 ${n.name} \u7684\u8FDC\u7A0B\u6587\u4EF6 ${A} \u53D1\u751F\u9519\u8BEF: ${y}`),""}})),Object.keys(m).length>0)if(n.ignoreFailedRemoteFile)n.ignoreFailedRemoteFile==="enabled"&&R.notify("\u{1F30D} Sub-Store \u9884\u89C8\u6587\u4EF6\u5931\u8D25",`\u274C ${n.name}`,`\u8FDC\u7A0B\u6587\u4EF6 ${Object.keys(m).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u6587\u4EF6 ${n.name} \u7684\u8FDC\u7A0B\u6587\u4EF6 ${Object.keys(m).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);n.mergeSources==="localFirst"?i.unshift(n.content):n.mergeSources==="remoteFirst"&&i.push(n.content)}let u=(Array.isArray(i)?i:[i]).flat(),p=u.filter(m=>m!=null&&m!=="").join(`
`),g=Array.isArray(n.process)&&n.process.length>0?await Ot.process({$files:u,$content:p,$file:n},n.process):{$content:p,$files:u};je(r,{original:p,processed:g?.$content??""})}catch(n){R.error(n.message??n),Te(r,new pr("INTERNAL_SERVER_ERROR","Failed to preview file",`Reason: ${n.message??n}`))}}async function Mz(t,r){try{let n=t.body,i=t.query.target||"JSON",u;if(n.source==="local"&&!["localFirst","remoteFirst"].includes(n.mergeSources))u=n.content;else{let m={};if(u=await Promise.all(n.url.split(/[\r\n]+/).map(A=>A.trim()).filter(A=>A.length).map(async A=>{try{return await un(A,n.ua,void 0,n.proxy,void 0,void 0,void 0,!0)}catch(y){return m[A]=y,R.error(`\u8BA2\u9605 ${n.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${A} \u53D1\u751F\u9519\u8BEF: ${y}`),""}})),Object.keys(m).length>0)if(n.ignoreFailedRemoteSub)n.ignoreFailedRemoteSub==="enabled"&&R.notify("\u{1F30D} Sub-Store \u9884\u89C8\u8BA2\u9605\u5931\u8D25",`\u274C ${n.name}`,`\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(m).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u8BA2\u9605 ${n.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(m).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);n.mergeSources==="localFirst"?u.unshift(n.content):n.mergeSources==="remoteFirst"&&u.push(n.content)}let p=(Array.isArray(u)?u:[u]).map(m=>Ot.parse(m)).flat();p.forEach((m,A)=>{m.id=A,m._subName=n.name,m._subDisplayName=n.displayName});let g=await Ot.process(p,n.process||[],i,{[n.name]:n});je(r,{original:p,processed:g})}catch(n){R.error(n.message??n),Te(r,new pr("INTERNAL_SERVER_ERROR","Failed to preview subscription",`Reason: ${n.message??n}`))}}async function qz(t,r){try{let n=R.read(Jt),i=t.body,u=[...i.subscriptions],p=i.subscriptionTags;Array.isArray(p)&&p.length>0&&n.forEach(D=>{Array.isArray(D.tag)&&D.tag.length>0&&!u.includes(D.name)&&D.tag.some(o=>p.includes(o))&&u.push(D.name)});let g={},m={};if(await Promise.all(u.map(async D=>{let o=ct(n,D);try{let M;if(o.source==="local"&&!["localFirst","remoteFirst"].includes(o.mergeSources))M=o.content;else{let w={};if(M=await Promise.all(o.url.split(/[\r\n]+/).map(U=>U.trim()).filter(U=>U.length).map(async U=>{try{return await un(U,o.ua,void 0,o.proxy,void 0,void 0,void 0,!0)}catch(nt){return w[U]=nt,R.error(`\u8BA2\u9605 ${o.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${U} \u53D1\u751F\u9519\u8BEF: ${nt}`),""}})),Object.keys(w).length>0)if(o.ignoreFailedRemoteSub)o.ignoreFailedRemoteSub==="enabled"&&R.notify("\u{1F30D} Sub-Store \u9884\u89C8\u8BA2\u9605\u5931\u8D25",`\u274C ${o.name}`,`\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(w).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u8BA2\u9605 ${o.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(w).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);o.mergeSources==="localFirst"?M.unshift(o.content):o.mergeSources==="remoteFirst"&&M.push(o.content)}let W=(Array.isArray(M)?M:[M]).map(w=>Ot.parse(w)).flat();W.forEach(w=>{w._subName=o.name,w._subDisplayName=o.displayName,w._collectionName=i.name,w._collectionDisplayName=i.displayName}),W=await Ot.process(W,o.process||[],"JSON",{[o.name]:o,_collection:i}),g[D]=W}catch(M){m[D]=M,R.error(`\u274C \u5904\u7406\u7EC4\u5408\u8BA2\u9605 ${i.name} \u4E2D\u7684\u5B50\u8BA2\u9605: ${o.name} \u65F6\u51FA\u73B0\u9519\u8BEF\uFF1A${M}\uFF01`)}})),Object.keys(m).length>0)if(i.ignoreFailedRemoteSub)i.ignoreFailedRemoteSub==="enabled"&&R.notify("\u{1F30D} Sub-Store \u9884\u89C8\u7EC4\u5408\u8BA2\u9605\u5931\u8D25",`\u274C ${i.name}`,`\u5B50\u8BA2\u9605 ${Object.keys(m).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u7EC4\u5408\u8BA2\u9605 ${i.name} \u7684\u5B50\u8BA2\u9605 ${Object.keys(m).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);let A=Array.prototype.concat.apply([],u.map(D=>g[D]||[]));A.forEach((D,o)=>{D.id=o,D._collectionName=i.name,D._collectionDisplayName=i.displayName});let y=await Ot.process(A,i.process||[],"JSON",{_collection:i});je(r,{original:A,processed:y})}catch(n){R.error(n.message??n),Te(r,new pr("INTERNAL_SERVER_ERROR","Failed to preview collection",`Reason: ${n.message??n}`))}}function Bw(t){t.post("/api/sort/subs",Vz),t.post("/api/sort/collections",Kz),t.post("/api/sort/artifacts",zz),t.post("/api/sort/files",Gz)}function Vz(t,r){let n=t.body,i=R.read(Jt);i.sort((u,p)=>n.indexOf(u.name)-n.indexOf(p.name)),R.write(i,Jt),je(r,i)}function Kz(t,r){let n=t.body,i=R.read(Zt);i.sort((u,p)=>n.indexOf(u.name)-n.indexOf(p.name)),R.write(i,Zt),je(r,i)}function zz(t,r){let n=t.body,i=R.read(Bt);i.sort((u,p)=>n.indexOf(u.name)-n.indexOf(p.name)),R.write(i,Bt),je(r,i)}function Gz(t,r){let n=t.body,i=R.read(Lt);i.sort((u,p)=>n.indexOf(u.name)-n.indexOf(p.name)),R.write(i,Lt),je(r,i)}function $w(t){t.post("/api/utils/node-info",Yz)}async function Yz(t,r){let n=t.body,i=t.query.lang||"zh-CN",u;try{u=Pp.URI.produce(n)}catch{}try{let p=await xs().get({url:`http://ip-api.com/json/${encodeURIComponent(`${n.server}`.trim().replace(/^\[/,"").replace(/\]$/,""))}?lang=${i}`,headers:{"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 12_4) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Safari/605.1.15"}}).then(g=>{let m=JSON.parse(g.body);if(m.status!=="success")throw new Error(m.message);return delete m.status,m});je(r,{shareUrl:u,info:p})}catch(p){Te(r,new el("FAILED_TO_GET_NODE_INFO","Failed to get node info",`Reason: ${p}`))}}function Rw(t){t.route("/api/proxy/parse").post(Wz),t.route("/api/rule/parse").post(Xz)}function Wz(t,r){let{data:n,client:i,content:u,platform:p}=t.body;var g={};try{var m=Ot.parse(n??u),A=Ot.produce(m,i??p);g.par_res=A}catch(y){Te(r,y);return}je(r,g)}function Xz(t,r){let{data:n,client:i,content:u,platform:p}=t.body;var g={};try{let A=Ec.parse(n??u);var m=Ec.produce(A,i??p);g.par_res=m}catch(A){Te(r,A);return}je(r,g)}function xw(){let port,host;R.env.isNode&&(port=eval("process.env.SUB_STORE_BACKEND_API_PORT")||3e3,host=eval("process.env.SUB_STORE_BACKEND_API_HOST")||"::");let $app=Ag({substore:R,port,host});if(R.env.isNode){let be_merge=eval("process.env.SUB_STORE_BACKEND_MERGE"),be_prefix=eval("process.env.SUB_STORE_BACKEND_PREFIX"),fe_be_path=eval("process.env.SUB_STORE_FRONTEND_BACKEND_PATH"),fe_path=eval("process.env.SUB_STORE_FRONTEND_PATH");if(be_prefix||be_merge){if(!fe_be_path.startsWith("/"))throw new Error("SUB_STORE_FRONTEND_BACKEND_PATH should start with /");be_merge&&(R.info("[BACKEND] MERGE mode is [ON]."),R.info(`[BACKEND && FRONTEND] ${host}:${port}`)),R.info(`[BACKEND PREFIX] ${host}:${port}${fe_be_path}`),$app.use((t,r,n)=>{if(t.path.startsWith(fe_be_path)){t.url=t.url.replace(fe_be_path,"")||"/",be_merge&&t.url.startsWith("/api/")&&(t.query.share="true"),n();return}let i=decodeURIComponent(t._parsedUrl.pathname)||"/";if(be_merge&&t.path.startsWith("/share/")&&t.query.token){if(t.method.toLowerCase()!=="get"){r.status(405).send("Method not allowed");return}if((R.read(ui)||[]).find(u=>u.token===t.query.token&&`/share/${u.type}/${u.name}`===i&&(u.exp==null||u.exp>Date.now()))){n();return}}if(be_merge&&fe_path&&t.path.indexOf("/",1)==-1){t.path.indexOf(".")==-1&&(t.url="/index.html");let u=require("express"),p=require("mime-types"),g=require("path");u.static(fe_path,{setHeaders:(A,y)=>{let D=p.contentType(g.extname(y));D&&A.set("Content-Type",D)}})(t,r,n);return}r.status(404).end()})}}if(gw($app),pw($app),Sw($app),Iw($app),Bw($app),fw($app),uw($app),mw($app),vw($app),ww($app),ow($app),$w($app),dw($app),Rw($app),$app.start(),R.env.isNode){let backend_sync_cron=eval("process.env.SUB_STORE_BACKEND_SYNC_CRON");if(backend_sync_cron){R.info(`[SYNC CRON] ${backend_sync_cron} enabled`);let{CronJob:t}=require("cron");new t(backend_sync_cron,async function(){try{R.info(`[SYNC CRON] ${backend_sync_cron} started`),await cw(),R.info(`[SYNC CRON] ${backend_sync_cron} finished`)}catch(r){R.error(`[SYNC CRON] ${backend_sync_cron} error: ${r.message??r}`)}},null,!0)}else eval("process.env.SUB_STORE_BACKEND_CRON")&&R.error("[SYNC CRON] SUB_STORE_BACKEND_CRON \u5DF2\u5F03\u7528, \u8BF7\u4F7F\u7528 SUB_STORE_BACKEND_SYNC_CRON"),eval("process.env.SUB_STORE_CRON")&&R.error("[SYNC CRON] SUB_STORE_CRON \u5DF2\u5F03\u7528, \u8BF7\u4F7F\u7528 SUB_STORE_BACKEND_SYNC_CRON");let produce_cron=eval("process.env.SUB_STORE_PRODUCE_CRON");if(produce_cron){R.info(`[PRODUCE CRON] ${produce_cron} enabled`);let{CronJob:t}=require("cron");produce_cron.split(/\s*;\s*/).map(r=>{let[n,i,u]=r.split(/\s*,\s*/);new t(n.trim(),async function(){try{R.info(`[PRODUCE CRON] ${i} ${u} ${n} started`),await vn({type:i,name:u}),R.info(`[PRODUCE CRON] ${i} ${u} ${n} finished`)}catch(p){R.error(`[PRODUCE CRON] ${i} ${u} ${n} error: ${p.message??p}`)}},null,!0)})}let backend_download_cron=eval("process.env.SUB_STORE_BACKEND_DOWNLOAD_CRON");if(backend_download_cron){R.info(`[DOWNLOAD CRON] ${backend_download_cron} enabled`);let{CronJob:t}=require("cron");new t(backend_download_cron,async function(){try{R.info(`[DOWNLOAD CRON] ${backend_download_cron} started`),await zp("download"),R.info(`[DOWNLOAD CRON] ${backend_download_cron} finished`)}catch(r){R.error(`[DOWNLOAD CRON] ${backend_download_cron} error: ${r.message??r}`)}},null,!0)}let backend_upload_cron=eval("process.env.SUB_STORE_BACKEND_UPLOAD_CRON");if(backend_upload_cron){R.info(`[UPLOAD CRON] ${backend_upload_cron} enabled`);let{CronJob:t}=require("cron");new t(backend_upload_cron,async function(){try{R.info(`[UPLOAD CRON] ${backend_upload_cron} started`),await zp("upload"),R.info(`[UPLOAD CRON] ${backend_upload_cron} finished`)}catch(r){R.error(`[UPLOAD CRON] ${backend_upload_cron} error: ${r.message??r}`)}},null,!0)}let mmdb_cron=eval("process.env.SUB_STORE_MMDB_CRON"),countryFile=eval("process.env.SUB_STORE_MMDB_COUNTRY_PATH"),countryUrl=eval("process.env.SUB_STORE_MMDB_COUNTRY_URL"),asnFile=eval("process.env.SUB_STORE_MMDB_ASN_PATH"),asnUrl=eval("process.env.SUB_STORE_MMDB_ASN_URL");if(mmdb_cron&&(countryFile&&countryUrl||asnFile&&asnUrl)){R.info(`[MMDB CRON] ${mmdb_cron} enabled`);let{CronJob:t}=require("cron");new t(mmdb_cron,async function(){try{if(R.info(`[MMDB CRON] ${mmdb_cron} started`),countryFile&&countryUrl)try{R.info(`[MMDB CRON] downloading ${countryUrl} to ${countryFile}`),await Kh(countryUrl,countryFile)}catch(r){R.error(`[MMDB CRON] ${countryUrl} download failed: ${r.message??r}`)}if(asnFile&&asnUrl)try{R.info(`[MMDB CRON] downloading ${asnUrl} to ${asnFile}`),await Kh(asnUrl,asnFile)}catch(r){R.error(`[MMDB CRON] ${asnUrl} download failed: ${r.message??r}`)}R.info(`[MMDB CRON] ${mmdb_cron} finished`)}catch(r){R.error(`[MMDB CRON] ${mmdb_cron} error: ${r.message??r}`)}},null,!0)}let path=require("path"),fs=require("fs"),data_url=eval("process.env.SUB_STORE_DATA_URL"),data_url_post=eval("process.env.SUB_STORE_DATA_URL_POST"),fe_be_path=eval("process.env.SUB_STORE_FRONTEND_BACKEND_PATH"),fe_port=eval("process.env.SUB_STORE_FRONTEND_PORT")||3001,fe_host=eval("process.env.SUB_STORE_FRONTEND_HOST")||host||"::",fe_path=eval("process.env.SUB_STORE_FRONTEND_PATH"),fe_abs_path=path.resolve(fe_path||path.join(__dirname,"frontend")),be_merge=eval("process.env.SUB_STORE_BACKEND_MERGE");if(fe_path&&!be_merge){try{fs.accessSync(path.join(fe_abs_path,"index.html"))}catch(t){R.error(`[FRONTEND] index.html file not found in ${fe_abs_path}`)}let express_=require("express"),history=require("connect-history-api-fallback"),{createProxyMiddleware}=require("http-proxy-middleware"),app=express_(),staticFileMiddleware=express_.static(fe_path),be_api="/api/",be_download="/download/",be_share="/share/",be_download_rewrite="",be_api_rewrite="",be_share_rewrite=`${be_share}:type/:name`,prefix=eval("process.env.SUB_STORE_BACKEND_PREFIX")?fe_be_path:"";if(fe_be_path){if(!fe_be_path.startsWith("/"))throw new Error("SUB_STORE_FRONTEND_BACKEND_PATH should start with /");be_api_rewrite=`${fe_be_path==="/"?"":fe_be_path}${be_api}`,be_download_rewrite=`${fe_be_path==="/"?"":fe_be_path}${be_download}`,app.use(be_share_rewrite,createProxyMiddleware({target:`http://127.0.0.1:${port}${prefix}`,changeOrigin:!0,pathRewrite:async(t,r)=>{if(r.method.toLowerCase()!=="get")throw new Error("Method not allowed");if(!(R.read(ui)||[]).find(n=>n.token===r.query.token&&n.type===r.params.type&&n.name===r.params.name&&(n.exp==null||n.exp>Date.now())))throw new Error("Forbbiden");return r.originalUrl}})),app.use(be_api_rewrite,createProxyMiddleware({target:`http://127.0.0.1:${port}${prefix}${be_api}`,pathRewrite:async t=>t.includes("?")?`${t}&share=true`:`${t}?share=true`})),app.use(be_download_rewrite,createProxyMiddleware({target:`http://127.0.0.1:${port}${prefix}${be_download}`,changeOrigin:!0}))}app.use(staticFileMiddleware),app.use(history({disableDotRule:!0,verbose:!1})),app.use(staticFileMiddleware);let listener=app.listen(fe_port,fe_host,()=>{let{address:t,port:r}=listener.address();R.info(`[FRONTEND] ${t}:${r}`),fe_be_path&&(R.info(`[FRONTEND -> BACKEND] ${t}:${r}${be_api_rewrite} -> ${host}:${port}${prefix}${be_api}`),R.info(`[FRONTEND -> BACKEND] ${t}:${r}${be_download_rewrite} -> ${host}:${port}${prefix}${be_download}`),R.info(`[SHARE BACKEND] ${t}:${r}${be_share_rewrite}`))})}data_url&&(R.info(`[BACKEND] downloading data from ${data_url}`),un(data_url).then(async content=>{try{if(content=JSON.parse(ft.decode(content)),Object.keys(content.settings).length===0)throw new Error("\u5907\u4EFD\u6587\u4EF6\u5E94\u8BE5\u81F3\u5C11\u5305\u542B settings \u5B57\u6BB5")}catch(t){try{if(content=JSON.parse(content),Object.keys(content.settings).length===0)throw new Error("\u5907\u4EFD\u6587\u4EF6\u5E94\u8BE5\u81F3\u5C11\u5305\u542B settings \u5B57\u6BB5")}catch(r){throw R.error(`Gist \u5907\u4EFD\u6587\u4EF6\u6821\u9A8C\u5931\u8D25, \u65E0\u6CD5\u8FD8\u539F
Reason: ${r.message??r}`),new Error("Gist \u5907\u4EFD\u6587\u4EF6\u6821\u9A8C\u5931\u8D25, \u65E0\u6CD5\u8FD8\u539F")}}data_url_post&&(R.info("[BACKEND] executing post-processing script"),eval(data_url_post)),R.write(JSON.stringify(content,null,"  "),"#sub-store"),R.cache=content,R.persistCache(),Ku(),R.info(`[BACKEND] restored data from ${data_url}`)}).catch(t=>{throw R.error("[BACKEND] restore data failed"),t}))}}Ku(),xw()})();
