// 2026/1/19 05:22:21 https://raw.githubusercontent.com/ElementRef/AboutConfig/main/script/peng.ym.sub.store.js
(()=>{var a9=Object.create,yA=Object.defineProperty,u9=Object.getOwnPropertyDescriptor,o9=Object.getOwnPropertyNames,l9=Object.getPrototypeOf,c9=Object.prototype.hasOwnProperty,Lo=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,n)=>(typeof require<"u"?require:e)[n]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')}),ce=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),f9=(t,e,n,u)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of o9(e))!c9.call(t,s)&&s!==n&&yA(t,s,{get:()=>e[s],enumerable:!(u=u9(e,s))||u.enumerable});return t},qr=(t,e,n)=>(n=t!=null?a9(l9(t)):{},f9(e||!t||!t.__esModule?yA(n,"default",{value:t,enumerable:!0}):n,t)),CA=ce(t=>{"use strict";(function(e){function n(){}function u(){}var s=String.fromCharCode,p={}.toString,g=p.call(e.SharedArrayBuffer),y=p(),E=e.Uint8Array,m=E||Array,C=E?ArrayBuffer:m,a=C.isView||function(j){return j&&"length"in j},H=p.call(C.prototype);C=u.prototype;var X=e.TextEncoder,w=new(E?Uint16Array:m)(32);n.prototype.decode=function(j){if(!a(j)){var tt=p.call(j);if(tt!==H&&tt!==g&&tt!==y)throw TypeError("Failed to execute 'decode' on 'TextDecoder': The provided value is not of type '(ArrayBuffer or ArrayBufferView)'");j=E?new m(j):j||[]}for(var J=tt="",N=0,Q=j.length|0,at=Q-32|0,q,U,V=0,lt=0,It,Ot=0,yt=-1;N<Q;){for(q=N<=at?32:Q-N|0;Ot<q;N=N+1|0,Ot=Ot+1|0){switch(U=j[N]&255,U>>4){case 15:if(It=j[N=N+1|0]&255,It>>6!==2||247<U){N=N-1|0;break}V=(U&7)<<6|It&63,lt=5,U=256;case 14:It=j[N=N+1|0]&255,V<<=6,V|=(U&15)<<6|It&63,lt=It>>6===2?lt+4|0:24,U=U+256&768;case 13:case 12:It=j[N=N+1|0]&255,V<<=6,V|=(U&31)<<6|It&63,lt=lt+7|0,N<Q&&It>>6===2&&V>>lt&&1114112>V?(U=V,V=V-65536|0,0<=V&&(yt=(V>>10)+55296|0,U=(V&1023)+56320|0,31>Ot?(w[Ot]=yt,Ot=Ot+1|0,yt=-1):(It=yt,yt=U,U=It))):(U>>=8,N=N-U-1|0,U=65533),V=lt=0,q=N<=at?32:Q-N|0;default:w[Ot]=U;continue;case 11:case 10:case 9:case 8:}w[Ot]=65533}if(J+=s(w[0],w[1],w[2],w[3],w[4],w[5],w[6],w[7],w[8],w[9],w[10],w[11],w[12],w[13],w[14],w[15],w[16],w[17],w[18],w[19],w[20],w[21],w[22],w[23],w[24],w[25],w[26],w[27],w[28],w[29],w[30],w[31]),32>Ot&&(J=J.slice(0,Ot-32|0)),N<Q){if(w[0]=yt,Ot=~yt>>>31,yt=-1,J.length<tt.length)continue}else yt!==-1&&(J+=s(yt));tt+=J,J=""}return tt},C.encode=function(j){j=j===void 0?"":""+j;var tt=j.length|0,J=new m((tt<<1)+8|0),N,Q=0,at=!E;for(N=0;N<tt;N=N+1|0,Q=Q+1|0){var q=j.charCodeAt(N)|0;if(127>=q)J[Q]=q;else{if(2047>=q)J[Q]=192|q>>6;else{t:{if(55296<=q)if(56319>=q){var U=j.charCodeAt(N=N+1|0)|0;if(56320<=U&&57343>=U){if(q=(q<<10)+U-56613888|0,65535<q){J[Q]=240|q>>18,J[Q=Q+1|0]=128|q>>12&63,J[Q=Q+1|0]=128|q>>6&63,J[Q=Q+1|0]=128|q&63;continue}break t}q=65533}else 57343>=q&&(q=65533);!at&&N<<1<Q&&N<<1<(Q-7|0)&&(at=!0,U=new m(3*tt),U.set(J),J=U)}J[Q]=224|q>>12,J[Q=Q+1|0]=128|q>>6&63}J[Q=Q+1|0]=128|q&63}}return E?J.subarray(0,Q):J.slice(0,Q)},X||(e.TextDecoder=n,e.TextEncoder=u)})(typeof global>"u"?typeof self>"u"?t:self:global)}),Wl=ce((t,e)=>{(function(){var n,u="4.17.21",s=200,p="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",g="Expected a function",y="Invalid `variable` option passed into `_.template`",E="__lodash_hash_undefined__",m=500,C="__lodash_placeholder__",a=1,H=2,X=4,w=1,j=2,tt=1,J=2,N=4,Q=8,at=16,q=32,U=64,V=128,lt=256,It=512,Ot=30,yt="...",Et=800,vt=16,Yt=1,Xt=2,re=3,ae=1/0,He=9007199254740991,de=17976931348623157e292,pe=NaN,Ce=4294967295,Ie=Ce-1,Ve=Ce>>>1,We=[["ary",V],["bind",tt],["bindKey",J],["curry",Q],["curryRight",at],["flip",It],["partial",q],["partialRight",U],["rearg",lt]],we="[object Arguments]",Se="[object Array]",Qe="[object AsyncFunction]",Ke="[object Boolean]",Ze="[object Date]",vr="[object DOMException]",Pr="[object Error]",Cr="[object Function]",et="[object GeneratorFunction]",k="[object Map]",Z="[object Number]",se="[object Null]",Ee="[object Object]",rr="[object Promise]",fr="[object Proxy]",yr="[object RegExp]",ur="[object Set]",er="[object String]",Wr="[object Symbol]",Lr="[object Undefined]",Sr="[object WeakMap]",L="[object WeakSet]",f="[object ArrayBuffer]",S="[object DataView]",W="[object Float32Array]",Bt="[object Float64Array]",Nt="[object Int8Array]",nt="[object Int16Array]",zt="[object Int32Array]",Lt="[object Uint8Array]",Be="[object Uint8ClampedArray]",_t="[object Uint16Array]",gt="[object Uint32Array]",rt=/\b__p \+= '';/g,F=/\b(__p \+=) '' \+/g,st=/(__e\(.*?\)|\b__t\)) \+\n'';/g,wt=/&(?:amp|lt|gt|quot|#39);/g,Ct=/[&<>"']/g,Ut=RegExp(wt.source),Wt=RegExp(Ct.source),xe=/<%-([\s\S]+?)%>/g,te=/<%([\s\S]+?)%>/g,ve=/<%=([\s\S]+?)%>/g,Re=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,sr=/^\w*$/,O=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,le=/[\\^$.*+?()[\]{}|]/g,Kt=RegExp(le.source),he=/^\s+/,kt=/\s/,ne=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Oe=/\{\n\/\* \[wrapped with (.+)\] \*/,_e=/,? & /,Te=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ue=/[()=,{}\[\]\/\s]/,tr=/\\(\\)?/g,lr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ar=/\w*$/,Ar=/^[-+]0x[0-9a-f]+$/i,jr=/^0b[01]+$/i,ln=/^\[object .+?Constructor\]$/,cn=/^0o[0-7]+$/i,Mr=/^(?:0|[1-9]\d*)$/,mr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Nr=/($^)/,gn=/['\n\r\u2028\u2029\\]/g,Kn="\\ud800-\\udfff",tn="\\u0300-\\u036f",Wn="\\ufe20-\\ufe2f",Br="\\u20d0-\\u20ff",bn=tn+Wn+Br,as="\\u2700-\\u27bf",_n="a-z\\xdf-\\xf6\\xf8-\\xff",$s="\\xac\\xb1\\xd7\\xf7",Zr="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",_s="\\u2000-\\u206f",ks=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Xs="A-Z\\xc0-\\xd6\\xd8-\\xde",qs="\\ufe0e\\ufe0f",os=$s+Zr+_s+ks,In="['\u2019]",Si="["+Kn+"]",Xn="["+os+"]",ls="["+bn+"]",Vi="\\d+",Ki="["+as+"]",Bi="["+_n+"]",pu="[^"+Kn+os+Vi+as+_n+Xs+"]",Ei="\\ud83c[\\udffb-\\udfff]",zi="(?:"+ls+"|"+Ei+")",Ii="[^"+Kn+"]",oi="(?:\\ud83c[\\udde6-\\uddff]){2}",ns="[\\ud800-\\udbff][\\udc00-\\udfff]",Cn="["+Xs+"]",bt="\\u200d",Rt="(?:"+Bi+"|"+pu+")",Mt="(?:"+Cn+"|"+pu+")",ge="(?:"+In+"(?:d|ll|m|re|s|t|ve))?",Me="(?:"+In+"(?:D|LL|M|RE|S|T|VE))?",Ye=zi+"?",ir="["+qs+"]?",cr="(?:"+bt+"(?:"+[Ii,oi,ns].join("|")+")"+ir+Ye+")*",nn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",en="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Er=ir+Ye+cr,hs="(?:"+[Ki,oi,ns].join("|")+")"+Er,Ps="(?:"+[Ii+ls+"?",ls,oi,ns,Si].join("|")+")",Ri=RegExp(In,"g"),ws=RegExp(ls,"g"),ds=RegExp(Ei+"(?="+Ei+")|"+Ps+Er,"g"),$i=RegExp([Cn+"?"+Bi+"+"+ge+"(?="+[Xn,Cn,"$"].join("|")+")",Mt+"+"+Me+"(?="+[Xn,Cn+Rt,"$"].join("|")+")",Cn+"?"+Rt+"+"+ge,Cn+"+"+Me,en,nn,Vi,hs].join("|"),"g"),En=RegExp("["+bt+Kn+bn+qs+"]"),Gi=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,wa=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Fa=-1,Rn={};Rn[W]=Rn[Bt]=Rn[Nt]=Rn[nt]=Rn[zt]=Rn[Lt]=Rn[Be]=Rn[_t]=Rn[gt]=!0,Rn[we]=Rn[Se]=Rn[f]=Rn[Ke]=Rn[S]=Rn[Ze]=Rn[Pr]=Rn[Cr]=Rn[k]=Rn[Z]=Rn[Ee]=Rn[yr]=Rn[ur]=Rn[er]=Rn[Sr]=!1;var Sn={};Sn[we]=Sn[Se]=Sn[f]=Sn[S]=Sn[Ke]=Sn[Ze]=Sn[W]=Sn[Bt]=Sn[Nt]=Sn[nt]=Sn[zt]=Sn[k]=Sn[Z]=Sn[Ee]=Sn[yr]=Sn[ur]=Sn[er]=Sn[Wr]=Sn[Lt]=Sn[Be]=Sn[_t]=Sn[gt]=!0,Sn[Pr]=Sn[Cr]=Sn[Sr]=!1;var ba={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Ca={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Da={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},sn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},xa=parseFloat,_a=parseInt,Xu=typeof global=="object"&&global&&global.Object===Object&&global,Sa=typeof self=="object"&&self&&self.Object===Object&&self,Qn=Xu||Sa||Function("return this")(),Cu=typeof t=="object"&&t&&!t.nodeType&&t,vi=Cu&&typeof e=="object"&&e&&!e.nodeType&&e,Zu=vi&&vi.exports===Cu,Du=Zu&&Xu.process,Yn=(function(){try{var me=vi&&vi.require&&vi.require("util").types;return me||Du&&Du.binding&&Du.binding("util")}catch{}})(),Qu=Yn&&Yn.isArrayBuffer,ta=Yn&&Yn.isDate,ea=Yn&&Yn.isMap,ra=Yn&&Yn.isRegExp,sa=Yn&&Yn.isSet,ia=Yn&&Yn.isTypedArray;function Fs(me,Le,ke){switch(ke.length){case 0:return me.call(Le);case 1:return me.call(Le,ke[0]);case 2:return me.call(Le,ke[0],ke[1]);case 3:return me.call(Le,ke[0],ke[1],ke[2])}return me.apply(Le,ke)}function aa(me,Le,ke,pr){for(var Or=-1,un=me==null?0:me.length;++Or<un;){var Gn=me[Or];Le(pr,Gn,ke(Gn),me)}return pr}function Je(me,Le){for(var ke=-1,pr=me==null?0:me.length;++ke<pr&&Le(me[ke],ke,me)!==!1;);return me}function v(me,Le){for(var ke=me==null?0:me.length;ke--&&Le(me[ke],ke,me)!==!1;);return me}function xu(me,Le){for(var ke=-1,pr=me==null?0:me.length;++ke<pr;)if(!Le(me[ke],ke,me))return!1;return!0}function Zs(me,Le){for(var ke=-1,pr=me==null?0:me.length,Or=0,un=[];++ke<pr;){var Gn=me[ke];Le(Gn,ke,me)&&(un[Or++]=Gn)}return un}function Ai(me,Le){var ke=me==null?0:me.length;return!!ke&&Ji(me,Le,0)>-1}function cs(me,Le,ke){for(var pr=-1,Or=me==null?0:me.length;++pr<Or;)if(ke(Le,me[pr]))return!0;return!1}function Pn(me,Le){for(var ke=-1,pr=me==null?0:me.length,Or=Array(pr);++ke<pr;)Or[ke]=Le(me[ke],ke,me);return Or}function li(me,Le){for(var ke=-1,pr=Le.length,Or=me.length;++ke<pr;)me[Or+ke]=Le[ke];return me}function ct(me,Le,ke,pr){var Or=-1,un=me==null?0:me.length;for(pr&&un&&(ke=me[++Or]);++Or<un;)ke=Le(ke,me[Or],Or,me);return ke}function Rr(me,Le,ke,pr){var Or=me==null?0:me.length;for(pr&&Or&&(ke=me[--Or]);Or--;)ke=Le(ke,me[Or],Or,me);return ke}function Vs(me,Le){for(var ke=-1,pr=me==null?0:me.length;++ke<pr;)if(Le(me[ke],ke,me))return!0;return!1}var vn=Yi("length");function Dn(me){return me.split("")}function be(me){return me.match(Te)||[]}function gs(me,Le,ke){var pr;return ke(me,function(Or,un,Gn){if(Le(Or,un,Gn))return pr=un,!1}),pr}function hu(me,Le,ke,pr){for(var Or=me.length,un=ke+(pr?1:-1);pr?un--:++un<Or;)if(Le(me[un],un,me))return un;return-1}function Ji(me,Le,ke){return Le===Le?ha(me,Le,ke):hu(me,xr,ke)}function _u(me,Le,ke,pr){for(var Or=ke-1,un=me.length;++Or<un;)if(pr(me[Or],Le))return Or;return-1}function xr(me){return me!==me}function Ba(me,Le){var ke=me==null?0:me.length;return ke?Ru(me,Le)/ke:pe}function Yi(me){return function(Le){return Le==null?n:Le[me]}}function dr(me){return function(Le){return me==null?n:me[Le]}}function kn(me,Le,ke,pr,Or){return Or(me,function(un,Gn,An){ke=pr?(pr=!1,un):Le(ke,un,Gn,An)}),ke}function Bu(me,Le){var ke=me.length;for(me.sort(Le);ke--;)me[ke]=me[ke].value;return me}function Ru(me,Le){for(var ke,pr=-1,Or=me.length;++pr<Or;){var un=Le(me[pr]);un!==n&&(ke=ke===n?un:ke+un)}return ke}function ms(me,Le){for(var ke=-1,pr=Array(me);++ke<me;)pr[ke]=Le(ke);return pr}function $u(me,Le){return Pn(Le,function(ke){return[ke,me[ke]]})}function Oi(me){return me&&me.slice(0,Qi(me)+1).replace(he,"")}function Pe(me){return function(Le){return me(Le)}}function On(me,Le){return Pn(Le,function(ke){return me[ke]})}function Pi(me,Le){return me.has(Le)}function ku(me,Le){for(var ke=-1,pr=me.length;++ke<pr&&Ji(Le,me[ke],0)>-1;);return ke}function oa(me,Le){for(var ke=me.length;ke--&&Ji(Le,me[ke],0)>-1;);return ke}function Ou(me,Le){for(var ke=me.length,pr=0;ke--;)me[ke]===Le&&++pr;return pr}var ca=dr(ba),Pu=dr(Ca);function Nu(me){return"\\"+sn[me]}function Ia(me,Le){return me==null?n:me[Le]}function Qs(me){return En.test(me)}function fu(me){return Gi.test(me)}function Xi(me){for(var Le,ke=[];!(Le=me.next()).done;)ke.push(Le.value);return ke}function wi(me){var Le=-1,ke=Array(me.size);return me.forEach(function(pr,Or){ke[++Le]=[Or,pr]}),ke}function du(me,Le){return function(ke){return me(Le(ke))}}function Ss(me,Le){for(var ke=-1,pr=me.length,Or=0,un=[];++ke<pr;){var Gn=me[ke];(Gn===Le||Gn===C)&&(me[ke]=C,un[Or++]=ke)}return un}function Zi(me){var Le=-1,ke=Array(me.size);return me.forEach(function(pr){ke[++Le]=pr}),ke}function gu(me){var Le=-1,ke=Array(me.size);return me.forEach(function(pr){ke[++Le]=[pr,pr]}),ke}function ha(me,Le,ke){for(var pr=ke-1,Or=me.length;++pr<Or;)if(me[pr]===Le)return pr;return-1}function Tu(me,Le,ke){for(var pr=ke+1;pr--;)if(me[pr]===Le)return pr;return pr}function ti(me){return Qs(me)?Ni(me):vn(me)}function Nn(me){return Qs(me)?yu(me):Dn(me)}function Qi(me){for(var Le=me.length;Le--&&kt.test(me.charAt(Le)););return Le}var ei=dr(Da);function Ni(me){for(var Le=ds.lastIndex=0;ds.test(me);)++Le;return Le}function yu(me){return me.match(ds)||[]}function Ra(me){return me.match($i)||[]}var fa=function me(Le){Le=Le==null?Qn:zs.defaults(Qn.Object(),Le,zs.pick(Qn,wa));var ke=Le.Array,pr=Le.Date,Or=Le.Error,un=Le.Function,Gn=Le.Math,An=Le.Object,Fi=Le.RegExp,Fn=Le.String,je=Le.TypeError,Tr=ke.prototype,da=un.prototype,ri=An.prototype,eu=Le["__core-js_shared__"],Ti=da.toString,nr=ri.hasOwnProperty,$a=0,r=(function(){var i=/[^.]+$/.exec(eu&&eu.keys&&eu.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""})(),l=ri.toString,o=Ti.call(An),h=Qn._,b=Fi("^"+Ti.call(nr).replace(le,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),D=Zu?Le.Buffer:n,x=Le.Symbol,_=Le.Uint8Array,M=D?D.allocUnsafe:n,K=du(An.getPrototypeOf,An),ht=An.create,mt=ri.propertyIsEnumerable,P=Tr.splice,I=x?x.isConcatSpreadable:n,ut=x?x.iterator:n,T=x?x.toStringTag:n,ot=(function(){try{var i=Hu(An,"defineProperty");return i({},"",{}),i}catch{}})(),Y=Le.clearTimeout!==Qn.clearTimeout&&Le.clearTimeout,Ft=pr&&pr.now!==Qn.Date.now&&pr.now,Tt=Le.setTimeout!==Qn.setTimeout&&Le.setTimeout,Jt=Gn.ceil,Gt=Gn.floor,Ae=An.getOwnPropertySymbols,De=D?D.isBuffer:n,d=Le.isFinite,B=Tr.join,it=du(An.keys,An),z=Gn.max,St=Gn.min,qt=pr.now,ee=Le.parseInt,ie=Gn.random,ye=Tr.reverse,$e=Hu(Le,"DataView"),Fr=Hu(Le,"Map"),Dr=Hu(Le,"Promise"),wr=Hu(Le,"Set"),Kr=Hu(Le,"WeakMap"),Ur=Hu(An,"create"),xn=Kr&&new Kr,pn={},bi=Mu($e),Ns=Mu(Fr),Es=Mu(Dr),bs=Mu(wr),Bs=Mu(Kr),hn=x?x.prototype:n,Jn=hn?hn.valueOf:n,Tn=hn?hn.toString:n;function Pt(i){if(rs(i)&&!Hr(i)&&!(i instanceof zr)){if(i instanceof Un)return i;if(nr.call(i,"__wrapped__"))return Nc(i)}return new Un(i)}var ps=(function(){function i(){}return function(c){if(!Zn(c))return{};if(ht)return ht(c);i.prototype=c;var A=new i;return i.prototype=n,A}})();function yn(){}function Un(i,c){this.__wrapped__=i,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=n}Pt.templateSettings={escape:xe,evaluate:te,interpolate:ve,variable:"",imports:{_:Pt}},Pt.prototype=yn.prototype,Pt.prototype.constructor=Pt,Un.prototype=ps(yn.prototype),Un.prototype.constructor=Un;function zr(i){this.__wrapped__=i,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ce,this.__views__=[]}function ji(){var i=new zr(this.__wrapped__);return i.__actions__=Gs(this.__actions__),i.__dir__=this.__dir__,i.__filtered__=this.__filtered__,i.__iteratees__=Gs(this.__iteratees__),i.__takeCount__=this.__takeCount__,i.__views__=Gs(this.__views__),i}function Eo(){if(this.__filtered__){var i=new zr(this);i.__dir__=-1,i.__filtered__=!0}else i=this.clone(),i.__dir__*=-1;return i}function ci(){var i=this.__wrapped__.value(),c=this.__dir__,A=Hr(i),G=c<0,Dt=A?i.length:0,Vt=Qh(0,Dt,this.__views__),ue=Vt.start,fe=Vt.end,Fe=fe-ue,ze=G?fe:ue-1,Ge=this.__iteratees__,Xe=Ge.length,or=0,br=St(Fe,this.__takeCount__);if(!A||!G&&Dt==Fe&&br==Fe)return Yl(i,this.__actions__);var $r=[];t:for(;Fe--&&or<br;){ze+=c;for(var Yr=-1,kr=i[ze];++Yr<Xe;){var rn=Ge[Yr],fn=rn.iteratee,ii=rn.type,Ms=fn(kr);if(ii==Xt)kr=Ms;else if(!Ms){if(ii==Yt)continue t;break t}}$r[or++]=kr}return $r}zr.prototype=ps(yn.prototype),zr.prototype.constructor=zr;function js(i){var c=-1,A=i==null?0:i.length;for(this.clear();++c<A;){var G=i[c];this.set(G[0],G[1])}}function vo(){this.__data__=Ur?Ur(null):{},this.size=0}function Va(i){var c=this.has(i)&&delete this.__data__[i];return this.size-=c?1:0,c}function Ln(i){var c=this.__data__;if(Ur){var A=c[i];return A===E?n:A}return nr.call(c,i)?c[i]:n}function hi(i){var c=this.__data__;return Ur?c[i]!==n:nr.call(c,i)}function mn(i,c){var A=this.__data__;return this.size+=this.has(i)?0:1,A[i]=Ur&&c===n?E:c,this}js.prototype.clear=vo,js.prototype.delete=Va,js.prototype.get=Ln,js.prototype.has=hi,js.prototype.set=mn;function vs(i){var c=-1,A=i==null?0:i.length;for(this.clear();++c<A;){var G=i[c];this.set(G[0],G[1])}}function Bp(){this.__data__=[],this.size=0}function Ip(i){var c=this.__data__,A=Ka(c,i);if(A<0)return!1;var G=c.length-1;return A==G?c.pop():P.call(c,A,1),--this.size,!0}function Rp(i){var c=this.__data__,A=Ka(c,i);return A<0?n:c[A][1]}function $p(i){return Ka(this.__data__,i)>-1}function kp(i,c){var A=this.__data__,G=Ka(A,i);return G<0?(++this.size,A.push([i,c])):A[G][1]=c,this}vs.prototype.clear=Bp,vs.prototype.delete=Ip,vs.prototype.get=Rp,vs.prototype.has=$p,vs.prototype.set=kp;function nu(i){var c=-1,A=i==null?0:i.length;for(this.clear();++c<A;){var G=i[c];this.set(G[0],G[1])}}function Op(){this.size=0,this.__data__={hash:new js,map:new(Fr||vs),string:new js}}function Pp(i){var c=uo(this,i).delete(i);return this.size-=c?1:0,c}function Lp(i){return uo(this,i).get(i)}function zp(i){return uo(this,i).has(i)}function Gp(i,c){var A=uo(this,i),G=A.size;return A.set(i,c),this.size+=A.size==G?0:1,this}nu.prototype.clear=Op,nu.prototype.delete=Pp,nu.prototype.get=Lp,nu.prototype.has=zp,nu.prototype.set=Gp;function ju(i){var c=-1,A=i==null?0:i.length;for(this.__data__=new nu;++c<A;)this.add(i[c])}function Jp(i){return this.__data__.set(i,E),this}function Wp(i){return this.__data__.has(i)}ju.prototype.add=ju.prototype.push=Jp,ju.prototype.has=Wp;function Ci(i){var c=this.__data__=new vs(i);this.size=c.size}function Xp(){this.__data__=new vs,this.size=0}function Zp(i){var c=this.__data__,A=c.delete(i);return this.size=c.size,A}function Qp(i){return this.__data__.get(i)}function th(i){return this.__data__.has(i)}function nh(i,c){var A=this.__data__;if(A instanceof vs){var G=A.__data__;if(!Fr||G.length<s-1)return G.push([i,c]),this.size=++A.size,this;A=this.__data__=new nu(G)}return A.set(i,c),this.size=A.size,this}Ci.prototype.clear=Xp,Ci.prototype.delete=Zp,Ci.prototype.get=Qp,Ci.prototype.has=th,Ci.prototype.set=nh;function Cl(i,c){var A=Hr(i),G=!A&&Ju(i),Dt=!A&&!G&&bu(i),Vt=!A&&!G&&!Dt&&va(i),ue=A||G||Dt||Vt,fe=ue?ms(i.length,Fn):[],Fe=fe.length;for(var ze in i)(c||nr.call(i,ze))&&!(ue&&(ze=="length"||Dt&&(ze=="offset"||ze=="parent")||Vt&&(ze=="buffer"||ze=="byteLength"||ze=="byteOffset")||au(ze,Fe)))&&fe.push(ze);return fe}function Dl(i){var c=i.length;return c?i[Io(0,c-1)]:n}function sh(i,c){return ao(Gs(i),Uu(c,0,i.length))}function ih(i){return ao(Gs(i))}function Ao(i,c,A){(A!==n&&!Di(i[c],A)||A===n&&!(c in i))&&su(i,c,A)}function ka(i,c,A){var G=i[c];(!(nr.call(i,c)&&Di(G,A))||A===n&&!(c in i))&&su(i,c,A)}function Ka(i,c){for(var A=i.length;A--;)if(Di(i[A][0],c))return A;return-1}function uh(i,c,A,G){return mu(i,function(Dt,Vt,ue){c(G,Dt,A(Dt),ue)}),G}function xl(i,c){return i&&Hi(c,As(c),i)}function ah(i,c){return i&&Hi(c,Ws(c),i)}function su(i,c,A){c=="__proto__"&&ot?ot(i,c,{configurable:!0,enumerable:!0,value:A,writable:!0}):i[c]=A}function wo(i,c){for(var A=-1,G=c.length,Dt=ke(G),Vt=i==null;++A<G;)Dt[A]=Vt?n:hl(i,c[A]);return Dt}function Uu(i,c,A){return i===i&&(A!==n&&(i=i<=A?i:A),c!==n&&(i=i>=c?i:c)),i}function fi(i,c,A,G,Dt,Vt){var ue,fe=c&a,Fe=c&H,ze=c&X;if(A&&(ue=Dt?A(i,G,Dt,Vt):A(i)),ue!==n)return ue;if(!Zn(i))return i;var Ge=Hr(i);if(Ge){if(ue=e0(i),!fe)return Gs(i,ue)}else{var Xe=Is(i),or=Xe==Cr||Xe==et;if(bu(i))return nc(i,fe);if(Xe==Ee||Xe==we||or&&!Dt){if(ue=Fe||or?{}:xc(i),!fe)return Fe?Mh(i,ah(ue,i)):Hh(i,xl(ue,i))}else{if(!Sn[Xe])return Dt?i:{};ue=r0(i,Xe,fe)}}Vt||(Vt=new Ci);var br=Vt.get(i);if(br)return br;Vt.set(i,ue),ap(i)?i.forEach(function(kr){ue.add(fi(kr,c,A,kr,i,Vt))}):ep(i)&&i.forEach(function(kr,rn){ue.set(rn,fi(kr,c,A,rn,i,Vt))});var $r=ze?Fe?Jo:Go:Fe?Ws:As,Yr=Ge?n:$r(i);return Je(Yr||i,function(kr,rn){Yr&&(rn=kr,kr=i[rn]),ka(ue,rn,fi(kr,c,A,rn,i,Vt))}),ue}function oh(i){var c=As(i);return function(A){return _l(A,i,c)}}function _l(i,c,A){var G=A.length;if(i==null)return!G;for(i=An(i);G--;){var Dt=A[G],Vt=c[Dt],ue=i[Dt];if(ue===n&&!(Dt in i)||!Vt(ue))return!1}return!0}function Sl(i,c,A){if(typeof i!="function")throw new je(g);return Ma(function(){i.apply(n,A)},c)}function Pa(i,c,A,G){var Dt=-1,Vt=Ai,ue=!0,fe=i.length,Fe=[],ze=c.length;if(!fe)return Fe;A&&(c=Pn(c,Pe(A))),G?(Vt=cs,ue=!1):c.length>=s&&(Vt=Pi,ue=!1,c=new ju(c));t:for(;++Dt<fe;){var Ge=i[Dt],Xe=A==null?Ge:A(Ge);if(Ge=G||Ge!==0?Ge:0,ue&&Xe===Xe){for(var or=ze;or--;)if(c[or]===Xe)continue t;Fe.push(Ge)}else Vt(c,Xe,G)||Fe.push(Ge)}return Fe}var mu=oc(Ui),Bl=oc(bo,!0);function lh(i,c){var A=!0;return mu(i,function(G,Dt,Vt){return A=!!c(G,Dt,Vt),A}),A}function za(i,c,A){for(var G=-1,Dt=i.length;++G<Dt;){var Vt=i[G],ue=c(Vt);if(ue!=null&&(fe===n?ue===ue&&!si(ue):A(ue,fe)))var fe=ue,Fe=Vt}return Fe}function ch(i,c,A,G){var Dt=i.length;for(A=Gr(A),A<0&&(A=-A>Dt?0:Dt+A),G=G===n||G>Dt?Dt:Gr(G),G<0&&(G+=Dt),G=A>G?0:cp(G);A<G;)i[A++]=c;return i}function Il(i,c){var A=[];return mu(i,function(G,Dt,Vt){c(G,Dt,Vt)&&A.push(G)}),A}function Ds(i,c,A,G,Dt){var Vt=-1,ue=i.length;for(A||(A=i0),Dt||(Dt=[]);++Vt<ue;){var fe=i[Vt];c>0&&A(fe)?c>1?Ds(fe,c-1,A,G,Dt):li(Dt,fe):G||(Dt[Dt.length]=fe)}return Dt}var Fo=lc(),Rl=lc(!0);function Ui(i,c){return i&&Fo(i,c,As)}function bo(i,c){return i&&Rl(i,c,As)}function Ga(i,c){return Zs(c,function(A){return ou(i[A])})}function Lu(i,c){c=Au(c,i);for(var A=0,G=c.length;i!=null&&A<G;)i=i[Mi(c[A++])];return A&&A==G?i:n}function $l(i,c,A){var G=c(i);return Hr(i)?G:li(G,A(i))}function Ls(i){return i==null?i===n?Lr:se:T&&T in An(i)?Zh(i):h0(i)}function Co(i,c){return i>c}function ph(i,c){return i!=null&&nr.call(i,c)}function hh(i,c){return i!=null&&c in An(i)}function fh(i,c,A){return i>=St(c,A)&&i<z(c,A)}function Do(i,c,A){for(var G=A?cs:Ai,Dt=i[0].length,Vt=i.length,ue=Vt,fe=ke(Vt),Fe=1/0,ze=[];ue--;){var Ge=i[ue];ue&&c&&(Ge=Pn(Ge,Pe(c))),Fe=St(Ge.length,Fe),fe[ue]=!A&&(c||Dt>=120&&Ge.length>=120)?new ju(ue&&Ge):n}Ge=i[0];var Xe=-1,or=fe[0];t:for(;++Xe<Dt&&ze.length<Fe;){var br=Ge[Xe],$r=c?c(br):br;if(br=A||br!==0?br:0,!(or?Pi(or,$r):G(ze,$r,A))){for(ue=Vt;--ue;){var Yr=fe[ue];if(!(Yr?Pi(Yr,$r):G(i[ue],$r,A)))continue t}or&&or.push($r),ze.push(br)}}return ze}function dh(i,c,A,G){return Ui(i,function(Dt,Vt,ue){c(G,A(Dt),Vt,ue)}),G}function Na(i,c,A){c=Au(c,i),i=Rc(i,c);var G=i==null?i:i[Mi(yi(c))];return G==null?n:Fs(G,i,A)}function kl(i){return rs(i)&&Ls(i)==we}function gh(i){return rs(i)&&Ls(i)==f}function yh(i){return rs(i)&&Ls(i)==Ze}function ja(i,c,A,G,Dt){return i===c?!0:i==null||c==null||!rs(i)&&!rs(c)?i!==i&&c!==c:mh(i,c,A,G,ja,Dt)}function mh(i,c,A,G,Dt,Vt){var ue=Hr(i),fe=Hr(c),Fe=ue?Se:Is(i),ze=fe?Se:Is(c);Fe=Fe==we?Ee:Fe,ze=ze==we?Ee:ze;var Ge=Fe==Ee,Xe=ze==Ee,or=Fe==ze;if(or&&bu(i)){if(!bu(c))return!1;ue=!0,Ge=!1}if(or&&!Ge)return Vt||(Vt=new Ci),ue||va(i)?wc(i,c,A,G,Dt,Vt):Yh(i,c,Fe,A,G,Dt,Vt);if(!(A&w)){var br=Ge&&nr.call(i,"__wrapped__"),$r=Xe&&nr.call(c,"__wrapped__");if(br||$r){var Yr=br?i.value():i,kr=$r?c.value():c;return Vt||(Vt=new Ci),Dt(Yr,kr,A,G,Vt)}}return or?(Vt||(Vt=new Ci),Xh(i,c,A,G,Dt,Vt)):!1}function Eh(i){return rs(i)&&Is(i)==k}function xo(i,c,A,G){var Dt=A.length,Vt=Dt,ue=!G;if(i==null)return!Vt;for(i=An(i);Dt--;){var fe=A[Dt];if(ue&&fe[2]?fe[1]!==i[fe[0]]:!(fe[0]in i))return!1}for(;++Dt<Vt;){fe=A[Dt];var Fe=fe[0],ze=i[Fe],Ge=fe[1];if(ue&&fe[2]){if(ze===n&&!(Fe in i))return!1}else{var Xe=new Ci;if(G)var or=G(ze,Ge,Fe,i,c,Xe);if(!(or===n?ja(Ge,ze,w|j,G,Xe):or))return!1}}return!0}function Ol(i){if(!Zn(i)||a0(i))return!1;var c=ou(i)?b:ln;return c.test(Mu(i))}function vh(i){return rs(i)&&Ls(i)==yr}function Ah(i){return rs(i)&&Is(i)==ur}function wh(i){return rs(i)&&go(i.length)&&!!Rn[Ls(i)]}function Pl(i){return typeof i=="function"?i:i==null?Ys:typeof i=="object"?Hr(i)?jl(i[0],i[1]):Tl(i):wp(i)}function _o(i){if(!Ha(i))return it(i);var c=[];for(var A in An(i))nr.call(i,A)&&A!="constructor"&&c.push(A);return c}function Fh(i){if(!Zn(i))return p0(i);var c=Ha(i),A=[];for(var G in i)G=="constructor"&&(c||!nr.call(i,G))||A.push(G);return A}function So(i,c){return i<c}function Nl(i,c){var A=-1,G=Js(i)?ke(i.length):[];return mu(i,function(Dt,Vt,ue){G[++A]=c(Dt,Vt,ue)}),G}function Tl(i){var c=Yo(i);return c.length==1&&c[0][2]?Bc(c[0][0],c[0][1]):function(A){return A===i||xo(A,i,c)}}function jl(i,c){return tl(i)&&Sc(c)?Bc(Mi(i),c):function(A){var G=hl(A,i);return G===n&&G===c?fl(A,i):ja(c,G,w|j)}}function Ja(i,c,A,G,Dt){i!==c&&Fo(c,function(Vt,ue){if(Dt||(Dt=new Ci),Zn(Vt))bh(i,c,ue,A,Ja,G,Dt);else{var fe=G?G(rl(i,ue),Vt,ue+"",i,c,Dt):n;fe===n&&(fe=Vt),Ao(i,ue,fe)}},Ws)}function bh(i,c,A,G,Dt,Vt,ue){var fe=rl(i,A),Fe=rl(c,A),ze=ue.get(Fe);if(ze){Ao(i,A,ze);return}var Ge=Vt?Vt(fe,Fe,A+"",i,c,ue):n,Xe=Ge===n;if(Xe){var or=Hr(Fe),br=!or&&bu(Fe),$r=!or&&!br&&va(Fe);Ge=Fe,or||br||$r?Hr(fe)?Ge=fe:ss(fe)?Ge=Gs(fe):br?(Xe=!1,Ge=nc(Fe,!0)):$r?(Xe=!1,Ge=sc(Fe,!0)):Ge=[]:qa(Fe)||Ju(Fe)?(Ge=fe,Ju(fe)?Ge=pp(fe):(!Zn(fe)||ou(fe))&&(Ge=xc(Fe))):Xe=!1}Xe&&(ue.set(Fe,Ge),Dt(Ge,Fe,G,Vt,ue),ue.delete(Fe)),Ao(i,A,Ge)}function Ul(i,c){var A=i.length;if(A)return c+=c<0?A:0,au(c,A)?i[c]:n}function Ll(i,c,A){c.length?c=Pn(c,function(Vt){return Hr(Vt)?function(ue){return Lu(ue,Vt.length===1?Vt[0]:Vt)}:Vt}):c=[Ys];var G=-1;c=Pn(c,Pe(Ir()));var Dt=Nl(i,function(Vt,ue,fe){var Fe=Pn(c,function(ze){return ze(Vt)});return{criteria:Fe,index:++G,value:Vt}});return Bu(Dt,function(Vt,ue){return Uh(Vt,ue,A)})}function Ch(i,c){return Hl(i,c,function(A,G){return fl(i,G)})}function Hl(i,c,A){for(var G=-1,Dt=c.length,Vt={};++G<Dt;){var ue=c[G],fe=Lu(i,ue);A(fe,ue)&&Ua(Vt,Au(ue,i),fe)}return Vt}function Dh(i){return function(c){return Lu(c,i)}}function Bo(i,c,A,G){var Dt=G?_u:Ji,Vt=-1,ue=c.length,fe=i;for(i===c&&(c=Gs(c)),A&&(fe=Pn(i,Pe(A)));++Vt<ue;)for(var Fe=0,ze=c[Vt],Ge=A?A(ze):ze;(Fe=Dt(fe,Ge,Fe,G))>-1;)fe!==i&&P.call(fe,Fe,1),P.call(i,Fe,1);return i}function Ml(i,c){for(var A=i?c.length:0,G=A-1;A--;){var Dt=c[A];if(A==G||Dt!==Vt){var Vt=Dt;au(Dt)?P.call(i,Dt,1):ko(i,Dt)}}return i}function Io(i,c){return i+Gt(ie()*(c-i+1))}function xh(i,c,A,G){for(var Dt=-1,Vt=z(Jt((c-i)/(A||1)),0),ue=ke(Vt);Vt--;)ue[G?Vt:++Dt]=i,i+=A;return ue}function Ro(i,c){var A="";if(!i||c<1||c>He)return A;do c%2&&(A+=i),c=Gt(c/2),c&&(i+=i);while(c);return A}function Qr(i,c){return nl(Ic(i,c,Ys),i+"")}function _h(i){return Dl(Aa(i))}function Sh(i,c){var A=Aa(i);return ao(A,Uu(c,0,A.length))}function Ua(i,c,A,G){if(!Zn(i))return i;c=Au(c,i);for(var Dt=-1,Vt=c.length,ue=Vt-1,fe=i;fe!=null&&++Dt<Vt;){var Fe=Mi(c[Dt]),ze=A;if(Fe==="__proto__"||Fe==="constructor"||Fe==="prototype")return i;if(Dt!=ue){var Ge=fe[Fe];ze=G?G(Ge,Fe,fe):n,ze===n&&(ze=Zn(Ge)?Ge:au(c[Dt+1])?[]:{})}ka(fe,Fe,ze),fe=fe[Fe]}return i}var ql=xn?function(i,c){return xn.set(i,c),i}:Ys,Bh=ot?function(i,c){return ot(i,"toString",{configurable:!0,enumerable:!1,value:gl(c),writable:!0})}:Ys;function Ih(i){return ao(Aa(i))}function di(i,c,A){var G=-1,Dt=i.length;c<0&&(c=-c>Dt?0:Dt+c),A=A>Dt?Dt:A,A<0&&(A+=Dt),Dt=c>A?0:A-c>>>0,c>>>=0;for(var Vt=ke(Dt);++G<Dt;)Vt[G]=i[G+c];return Vt}function Rh(i,c){var A;return mu(i,function(G,Dt,Vt){return A=c(G,Dt,Vt),!A}),!!A}function Wa(i,c,A){var G=0,Dt=i==null?G:i.length;if(typeof c=="number"&&c===c&&Dt<=Ve){for(;G<Dt;){var Vt=G+Dt>>>1,ue=i[Vt];ue!==null&&!si(ue)&&(A?ue<=c:ue<c)?G=Vt+1:Dt=Vt}return Dt}return $o(i,c,Ys,A)}function $o(i,c,A,G){var Dt=0,Vt=i==null?0:i.length;if(Vt===0)return 0;c=A(c);for(var ue=c!==c,fe=c===null,Fe=si(c),ze=c===n;Dt<Vt;){var Ge=Gt((Dt+Vt)/2),Xe=A(i[Ge]),or=Xe!==n,br=Xe===null,$r=Xe===Xe,Yr=si(Xe);if(ue)var kr=G||$r;else ze?kr=$r&&(G||or):fe?kr=$r&&or&&(G||!br):Fe?kr=$r&&or&&!br&&(G||!Yr):br||Yr?kr=!1:kr=G?Xe<=c:Xe<c;kr?Dt=Ge+1:Vt=Ge}return St(Vt,Ie)}function Vl(i,c){for(var A=-1,G=i.length,Dt=0,Vt=[];++A<G;){var ue=i[A],fe=c?c(ue):ue;if(!A||!Di(fe,Fe)){var Fe=fe;Vt[Dt++]=ue===0?0:ue}}return Vt}function Kl(i){return typeof i=="number"?i:si(i)?pe:+i}function ni(i){if(typeof i=="string")return i;if(Hr(i))return Pn(i,ni)+"";if(si(i))return Tn?Tn.call(i):"";var c=i+"";return c=="0"&&1/i==-ae?"-0":c}function vu(i,c,A){var G=-1,Dt=Ai,Vt=i.length,ue=!0,fe=[],Fe=fe;if(A)ue=!1,Dt=cs;else if(Vt>=s){var ze=c?null:Jh(i);if(ze)return Zi(ze);ue=!1,Dt=Pi,Fe=new ju}else Fe=c?[]:fe;t:for(;++G<Vt;){var Ge=i[G],Xe=c?c(Ge):Ge;if(Ge=A||Ge!==0?Ge:0,ue&&Xe===Xe){for(var or=Fe.length;or--;)if(Fe[or]===Xe)continue t;c&&Fe.push(Xe),fe.push(Ge)}else Dt(Fe,Xe,A)||(Fe!==fe&&Fe.push(Xe),fe.push(Ge))}return fe}function ko(i,c){return c=Au(c,i),i=Rc(i,c),i==null||delete i[Mi(yi(c))]}function Jl(i,c,A,G){return Ua(i,c,A(Lu(i,c)),G)}function Ya(i,c,A,G){for(var Dt=i.length,Vt=G?Dt:-1;(G?Vt--:++Vt<Dt)&&c(i[Vt],Vt,i););return A?di(i,G?0:Vt,G?Vt+1:Dt):di(i,G?Vt+1:0,G?Dt:Vt)}function Yl(i,c){var A=i;return A instanceof zr&&(A=A.value()),ct(c,function(G,Dt){return Dt.func.apply(Dt.thisArg,li([G],Dt.args))},A)}function Oo(i,c,A){var G=i.length;if(G<2)return G?vu(i[0]):[];for(var Dt=-1,Vt=ke(G);++Dt<G;)for(var ue=i[Dt],fe=-1;++fe<G;)fe!=Dt&&(Vt[Dt]=Pa(Vt[Dt]||ue,i[fe],c,A));return vu(Ds(Vt,1),c,A)}function Xl(i,c,A){for(var G=-1,Dt=i.length,Vt=c.length,ue={};++G<Dt;){var fe=G<Vt?c[G]:n;A(ue,i[G],fe)}return ue}function Po(i){return ss(i)?i:[]}function No(i){return typeof i=="function"?i:Ys}function Au(i,c){return Hr(i)?i:tl(i,c)?[i]:Pc(Bn(i))}var Oh=Qr;function Fu(i,c,A){var G=i.length;return A=A===n?G:A,!c&&A>=G?i:di(i,c,A)}var Zl=Y||function(i){return Qn.clearTimeout(i)};function nc(i,c){if(c)return i.slice();var A=i.length,G=M?M(A):new i.constructor(A);return i.copy(G),G}function To(i){var c=new i.constructor(i.byteLength);return new _(c).set(new _(i)),c}function Ph(i,c){var A=c?To(i.buffer):i.buffer;return new i.constructor(A,i.byteOffset,i.byteLength)}function Th(i){var c=new i.constructor(i.source,ar.exec(i));return c.lastIndex=i.lastIndex,c}function jh(i){return Jn?An(Jn.call(i)):{}}function sc(i,c){var A=c?To(i.buffer):i.buffer;return new i.constructor(A,i.byteOffset,i.length)}function ic(i,c){if(i!==c){var A=i!==n,G=i===null,Dt=i===i,Vt=si(i),ue=c!==n,fe=c===null,Fe=c===c,ze=si(c);if(!fe&&!ze&&!Vt&&i>c||Vt&&ue&&Fe&&!fe&&!ze||G&&ue&&Fe||!A&&Fe||!Dt)return 1;if(!G&&!Vt&&!ze&&i<c||ze&&A&&Dt&&!G&&!Vt||fe&&A&&Dt||!ue&&Dt||!Fe)return-1}return 0}function Uh(i,c,A){for(var G=-1,Dt=i.criteria,Vt=c.criteria,ue=Dt.length,fe=A.length;++G<ue;){var Fe=ic(Dt[G],Vt[G]);if(Fe){if(G>=fe)return Fe;var ze=A[G];return Fe*(ze=="desc"?-1:1)}}return i.index-c.index}function uc(i,c,A,G){for(var Dt=-1,Vt=i.length,ue=A.length,fe=-1,Fe=c.length,ze=z(Vt-ue,0),Ge=ke(Fe+ze),Xe=!G;++fe<Fe;)Ge[fe]=c[fe];for(;++Dt<ue;)(Xe||Dt<Vt)&&(Ge[A[Dt]]=i[Dt]);for(;ze--;)Ge[fe++]=i[Dt++];return Ge}function ac(i,c,A,G){for(var Dt=-1,Vt=i.length,ue=-1,fe=A.length,Fe=-1,ze=c.length,Ge=z(Vt-fe,0),Xe=ke(Ge+ze),or=!G;++Dt<Ge;)Xe[Dt]=i[Dt];for(var br=Dt;++Fe<ze;)Xe[br+Fe]=c[Fe];for(;++ue<fe;)(or||Dt<Vt)&&(Xe[br+A[ue]]=i[Dt++]);return Xe}function Gs(i,c){var A=-1,G=i.length;for(c||(c=ke(G));++A<G;)c[A]=i[A];return c}function Hi(i,c,A,G){var Dt=!A;A||(A={});for(var Vt=-1,ue=c.length;++Vt<ue;){var fe=c[Vt],Fe=G?G(A[fe],i[fe],fe,A,i):n;Fe===n&&(Fe=i[fe]),Dt?su(A,fe,Fe):ka(A,fe,Fe)}return A}function Hh(i,c){return Hi(i,Xo(i),c)}function Mh(i,c){return Hi(i,Fc(i),c)}function Xa(i,c){return function(A,G){var Dt=Hr(A)?aa:uh,Vt=c?c():{};return Dt(A,i,Ir(G,2),Vt)}}function ga(i){return Qr(function(c,A){var G=-1,Dt=A.length,Vt=Dt>1?A[Dt-1]:n,ue=Dt>2?A[2]:n;for(Vt=i.length>3&&typeof Vt=="function"?(Dt--,Vt):n,ue&&Hs(A[0],A[1],ue)&&(Vt=Dt<3?n:Vt,Dt=1),c=An(c);++G<Dt;){var fe=A[G];fe&&i(c,fe,G,Vt)}return c})}function oc(i,c){return function(A,G){if(A==null)return A;if(!Js(A))return i(A,G);for(var Dt=A.length,Vt=c?Dt:-1,ue=An(A);(c?Vt--:++Vt<Dt)&&G(ue[Vt],Vt,ue)!==!1;);return A}}function lc(i){return function(c,A,G){for(var Dt=-1,Vt=An(c),ue=G(c),fe=ue.length;fe--;){var Fe=ue[i?fe:++Dt];if(A(Vt[Fe],Fe,Vt)===!1)break}return c}}function qh(i,c,A){var G=c&tt,Dt=La(i);function Vt(){var ue=this&&this!==Qn&&this instanceof Vt?Dt:i;return ue.apply(G?A:this,arguments)}return Vt}function cc(i){return function(c){c=Bn(c);var A=Qs(c)?Nn(c):n,G=A?A[0]:c.charAt(0),Dt=A?Fu(A,1).join(""):c.slice(1);return G[i]()+Dt}}function ma(i){return function(c){return ct(vp(Ep(c).replace(Ri,"")),i,"")}}function La(i){return function(){var c=arguments;switch(c.length){case 0:return new i;case 1:return new i(c[0]);case 2:return new i(c[0],c[1]);case 3:return new i(c[0],c[1],c[2]);case 4:return new i(c[0],c[1],c[2],c[3]);case 5:return new i(c[0],c[1],c[2],c[3],c[4]);case 6:return new i(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new i(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var A=ps(i.prototype),G=i.apply(A,c);return Zn(G)?G:A}}function Vh(i,c,A){var G=La(i);function Dt(){for(var Vt=arguments.length,ue=ke(Vt),fe=Vt,Fe=Ea(Dt);fe--;)ue[fe]=arguments[fe];var ze=Vt<3&&ue[0]!==Fe&&ue[Vt-1]!==Fe?[]:Ss(ue,Fe);if(Vt-=ze.length,Vt<A)return yc(i,c,Za,Dt.placeholder,n,ue,ze,n,n,A-Vt);var Ge=this&&this!==Qn&&this instanceof Dt?G:i;return Fs(Ge,this,ue)}return Dt}function hc(i){return function(c,A,G){var Dt=An(c);if(!Js(c)){var Vt=Ir(A,3);c=As(c),A=function(fe){return Vt(Dt[fe],fe,Dt)}}var ue=i(c,A,G);return ue>-1?Dt[Vt?c[ue]:ue]:n}}function fc(i){return uu(function(c){var A=c.length,G=A,Dt=Un.prototype.thru;for(i&&c.reverse();G--;){var Vt=c[G];if(typeof Vt!="function")throw new je(g);if(Dt&&!ue&&so(Vt)=="wrapper")var ue=new Un([],!0)}for(G=ue?G:A;++G<A;){Vt=c[G];var fe=so(Vt),Fe=fe=="wrapper"?Wo(Vt):n;Fe&&el(Fe[0])&&Fe[1]==(V|Q|q|lt)&&!Fe[4].length&&Fe[9]==1?ue=ue[so(Fe[0])].apply(ue,Fe[3]):ue=Vt.length==1&&el(Vt)?ue[fe]():ue.thru(Vt)}return function(){var ze=arguments,Ge=ze[0];if(ue&&ze.length==1&&Hr(Ge))return ue.plant(Ge).value();for(var Xe=0,or=A?c[Xe].apply(this,ze):Ge;++Xe<A;)or=c[Xe].call(this,or);return or}})}function Za(i,c,A,G,Dt,Vt,ue,fe,Fe,ze){var Ge=c&V,Xe=c&tt,or=c&J,br=c&(Q|at),$r=c&It,Yr=or?n:La(i);function kr(){for(var rn=arguments.length,fn=ke(rn),ii=rn;ii--;)fn[ii]=arguments[ii];if(br)var Ms=Ea(kr),ai=Ou(fn,Ms);if(G&&(fn=uc(fn,G,Dt,br)),Vt&&(fn=ac(fn,Vt,ue,br)),rn-=ai,br&&rn<ze){var us=Ss(fn,Ms);return yc(i,c,Za,kr.placeholder,A,fn,us,fe,Fe,ze-rn)}var xi=Xe?A:this,cu=or?xi[i]:i;return rn=fn.length,fe?fn=f0(fn,fe):$r&&rn>1&&fn.reverse(),Ge&&Fe<rn&&(fn.length=Fe),this&&this!==Qn&&this instanceof kr&&(cu=Yr||La(cu)),cu.apply(xi,fn)}return kr}function dc(i,c){return function(A,G){return dh(A,i,c(G),{})}}function to(i,c){return function(A,G){var Dt;if(A===n&&G===n)return c;if(A!==n&&(Dt=A),G!==n){if(Dt===n)return G;typeof A=="string"||typeof G=="string"?(A=ni(A),G=ni(G)):(A=Kl(A),G=Kl(G)),Dt=i(A,G)}return Dt}}function qo(i){return uu(function(c){return c=Pn(c,Pe(Ir())),Qr(function(A){var G=this;return i(c,function(Dt){return Fs(Dt,G,A)})})})}function eo(i,c){c=c===n?" ":ni(c);var A=c.length;if(A<2)return A?Ro(c,i):c;var G=Ro(c,Jt(i/ti(c)));return Qs(c)?Fu(Nn(G),0,i).join(""):G.slice(0,i)}function Gh(i,c,A,G){var Dt=c&tt,Vt=La(i);function ue(){for(var fe=-1,Fe=arguments.length,ze=-1,Ge=G.length,Xe=ke(Ge+Fe),or=this&&this!==Qn&&this instanceof ue?Vt:i;++ze<Ge;)Xe[ze]=G[ze];for(;Fe--;)Xe[ze++]=arguments[++fe];return Fs(or,Dt?A:this,Xe)}return ue}function gc(i){return function(c,A,G){return G&&typeof G!="number"&&Hs(c,A,G)&&(A=G=n),c=lu(c),A===n?(A=c,c=0):A=lu(A),G=G===n?c<A?1:-1:lu(G),xh(c,A,G,i)}}function no(i){return function(c,A){return typeof c=="string"&&typeof A=="string"||(c=mi(c),A=mi(A)),i(c,A)}}function yc(i,c,A,G,Dt,Vt,ue,fe,Fe,ze){var Ge=c&Q,Xe=Ge?ue:n,or=Ge?n:ue,br=Ge?Vt:n,$r=Ge?n:Vt;c|=Ge?q:U,c&=~(Ge?U:q),c&N||(c&=~(tt|J));var Yr=[i,c,Dt,br,Xe,$r,or,fe,Fe,ze],kr=A.apply(n,Yr);return el(i)&&$c(kr,Yr),kr.placeholder=G,kc(kr,i,c)}function Vo(i){var c=Gn[i];return function(A,G){if(A=mi(A),G=G==null?0:St(Gr(G),292),G&&d(A)){var Dt=(Bn(A)+"e").split("e"),Vt=c(Dt[0]+"e"+(+Dt[1]+G));return Dt=(Bn(Vt)+"e").split("e"),+(Dt[0]+"e"+(+Dt[1]-G))}return c(A)}}var Jh=wr&&1/Zi(new wr([,-0]))[1]==ae?function(i){return new wr(i)}:El;function Ec(i){return function(c){var A=Is(c);return A==k?wi(c):A==ur?gu(c):$u(c,i(c))}}function iu(i,c,A,G,Dt,Vt,ue,fe){var Fe=c&J;if(!Fe&&typeof i!="function")throw new je(g);var ze=G?G.length:0;if(ze||(c&=~(q|U),G=Dt=n),ue=ue===n?ue:z(Gr(ue),0),fe=fe===n?fe:Gr(fe),ze-=Dt?Dt.length:0,c&U){var Ge=G,Xe=Dt;G=Dt=n}var or=Fe?n:Wo(i),br=[i,c,A,G,Dt,Ge,Xe,Vt,ue,fe];if(or&&c0(br,or),i=br[0],c=br[1],A=br[2],G=br[3],Dt=br[4],fe=br[9]=br[9]===n?Fe?0:i.length:z(br[9]-ze,0),!fe&&c&(Q|at)&&(c&=~(Q|at)),!c||c==tt)var $r=qh(i,c,A);else c==Q||c==at?$r=Vh(i,c,fe):(c==q||c==(tt|q))&&!Dt.length?$r=Gh(i,c,A,G):$r=Za.apply(n,br);var Yr=or?ql:$c;return kc(Yr($r,br),i,c)}function vc(i,c,A,G){return i===n||Di(i,ri[A])&&!nr.call(G,A)?c:i}function Ac(i,c,A,G,Dt,Vt){return Zn(i)&&Zn(c)&&(Vt.set(c,i),Ja(i,c,n,Ac,Vt),Vt.delete(c)),i}function Wh(i){return qa(i)?n:i}function wc(i,c,A,G,Dt,Vt){var ue=A&w,fe=i.length,Fe=c.length;if(fe!=Fe&&!(ue&&Fe>fe))return!1;var ze=Vt.get(i),Ge=Vt.get(c);if(ze&&Ge)return ze==c&&Ge==i;var Xe=-1,or=!0,br=A&j?new ju:n;for(Vt.set(i,c),Vt.set(c,i);++Xe<fe;){var $r=i[Xe],Yr=c[Xe];if(G)var kr=ue?G(Yr,$r,Xe,c,i,Vt):G($r,Yr,Xe,i,c,Vt);if(kr!==n){if(kr)continue;or=!1;break}if(br){if(!Vs(c,function(rn,fn){if(!Pi(br,fn)&&($r===rn||Dt($r,rn,A,G,Vt)))return br.push(fn)})){or=!1;break}}else if(!($r===Yr||Dt($r,Yr,A,G,Vt))){or=!1;break}}return Vt.delete(i),Vt.delete(c),or}function Yh(i,c,A,G,Dt,Vt,ue){switch(A){case S:if(i.byteLength!=c.byteLength||i.byteOffset!=c.byteOffset)return!1;i=i.buffer,c=c.buffer;case f:return!(i.byteLength!=c.byteLength||!Vt(new _(i),new _(c)));case Ke:case Ze:case Z:return Di(+i,+c);case Pr:return i.name==c.name&&i.message==c.message;case yr:case er:return i==c+"";case k:var fe=wi;case ur:var Fe=G&w;if(fe||(fe=Zi),i.size!=c.size&&!Fe)return!1;var ze=ue.get(i);if(ze)return ze==c;G|=j,ue.set(i,c);var Ge=wc(fe(i),fe(c),G,Dt,Vt,ue);return ue.delete(i),Ge;case Wr:if(Jn)return Jn.call(i)==Jn.call(c)}return!1}function Xh(i,c,A,G,Dt,Vt){var ue=A&w,fe=Go(i),Fe=fe.length,ze=Go(c),Ge=ze.length;if(Fe!=Ge&&!ue)return!1;for(var Xe=Fe;Xe--;){var or=fe[Xe];if(!(ue?or in c:nr.call(c,or)))return!1}var br=Vt.get(i),$r=Vt.get(c);if(br&&$r)return br==c&&$r==i;var Yr=!0;Vt.set(i,c),Vt.set(c,i);for(var kr=ue;++Xe<Fe;){or=fe[Xe];var rn=i[or],fn=c[or];if(G)var ii=ue?G(fn,rn,or,c,i,Vt):G(rn,fn,or,i,c,Vt);if(!(ii===n?rn===fn||Dt(rn,fn,A,G,Vt):ii)){Yr=!1;break}kr||(kr=or=="constructor")}if(Yr&&!kr){var Ms=i.constructor,ai=c.constructor;Ms!=ai&&"constructor"in i&&"constructor"in c&&!(typeof Ms=="function"&&Ms instanceof Ms&&typeof ai=="function"&&ai instanceof ai)&&(Yr=!1)}return Vt.delete(i),Vt.delete(c),Yr}function uu(i){return nl(Ic(i,n,Uc),i+"")}function Go(i){return $l(i,As,Xo)}function Jo(i){return $l(i,Ws,Fc)}var Wo=xn?function(i){return xn.get(i)}:El;function so(i){for(var c=i.name+"",A=pn[c],G=nr.call(pn,c)?A.length:0;G--;){var Dt=A[G],Vt=Dt.func;if(Vt==null||Vt==i)return Dt.name}return c}function Ea(i){var c=nr.call(Pt,"placeholder")?Pt:i;return c.placeholder}function Ir(){var i=Pt.iteratee||yl;return i=i===yl?Pl:i,arguments.length?i(arguments[0],arguments[1]):i}function uo(i,c){var A=i.__data__;return u0(c)?A[typeof c=="string"?"string":"hash"]:A.map}function Yo(i){for(var c=As(i),A=c.length;A--;){var G=c[A],Dt=i[G];c[A]=[G,Dt,Sc(Dt)]}return c}function Hu(i,c){var A=Ia(i,c);return Ol(A)?A:n}function Zh(i){var c=nr.call(i,T),A=i[T];try{i[T]=n;var G=!0}catch{}var Dt=l.call(i);return G&&(c?i[T]=A:delete i[T]),Dt}var Xo=Ae?function(i){return i==null?[]:(i=An(i),Zs(Ae(i),function(c){return mt.call(i,c)}))}:vl,Fc=Ae?function(i){for(var c=[];i;)li(c,Xo(i)),i=K(i);return c}:vl,Is=Ls;($e&&Is(new $e(new ArrayBuffer(1)))!=S||Fr&&Is(new Fr)!=k||Dr&&Is(Dr.resolve())!=rr||wr&&Is(new wr)!=ur||Kr&&Is(new Kr)!=Sr)&&(Is=function(i){var c=Ls(i),A=c==Ee?i.constructor:n,G=A?Mu(A):"";if(G)switch(G){case bi:return S;case Ns:return k;case Es:return rr;case bs:return ur;case Bs:return Sr}return c});function Qh(i,c,A){for(var G=-1,Dt=A.length;++G<Dt;){var Vt=A[G],ue=Vt.size;switch(Vt.type){case"drop":i+=ue;break;case"dropRight":c-=ue;break;case"take":c=St(c,i+ue);break;case"takeRight":i=z(i,c-ue);break}}return{start:i,end:c}}function t0(i){var c=i.match(Oe);return c?c[1].split(_e):[]}function Dc(i,c,A){c=Au(c,i);for(var G=-1,Dt=c.length,Vt=!1;++G<Dt;){var ue=Mi(c[G]);if(!(Vt=i!=null&&A(i,ue)))break;i=i[ue]}return Vt||++G!=Dt?Vt:(Dt=i==null?0:i.length,!!Dt&&go(Dt)&&au(ue,Dt)&&(Hr(i)||Ju(i)))}function e0(i){var c=i.length,A=new i.constructor(c);return c&&typeof i[0]=="string"&&nr.call(i,"index")&&(A.index=i.index,A.input=i.input),A}function xc(i){return typeof i.constructor=="function"&&!Ha(i)?ps(K(i)):{}}function r0(i,c,A){var G=i.constructor;switch(c){case f:return To(i);case Ke:case Ze:return new G(+i);case S:return Ph(i,A);case W:case Bt:case Nt:case nt:case zt:case Lt:case Be:case _t:case gt:return sc(i,A);case k:return new G;case Z:case er:return new G(i);case yr:return Th(i);case ur:return new G;case Wr:return jh(i)}}function s0(i,c){var A=c.length;if(!A)return i;var G=A-1;return c[G]=(A>1?"& ":"")+c[G],c=c.join(A>2?", ":" "),i.replace(ne,`{
/* [wrapped with `+c+`] */
`)}function i0(i){return Hr(i)||Ju(i)||!!(I&&i&&i[I])}function au(i,c){var A=typeof i;return c=c??He,!!c&&(A=="number"||A!="symbol"&&Mr.test(i))&&i>-1&&i%1==0&&i<c}function Hs(i,c,A){if(!Zn(A))return!1;var G=typeof c;return(G=="number"?Js(A)&&au(c,A.length):G=="string"&&c in A)?Di(A[c],i):!1}function tl(i,c){if(Hr(i))return!1;var A=typeof i;return A=="number"||A=="symbol"||A=="boolean"||i==null||si(i)?!0:sr.test(i)||!Re.test(i)||c!=null&&i in An(c)}function u0(i){var c=typeof i;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?i!=="__proto__":i===null}function el(i){var c=so(i),A=Pt[c];if(typeof A!="function"||!(c in zr.prototype))return!1;if(i===A)return!0;var G=Wo(A);return!!G&&i===G[0]}function a0(i){return!!r&&r in i}var o0=eu?ou:wl;function Ha(i){var c=i&&i.constructor,A=typeof c=="function"&&c.prototype||ri;return i===A}function Sc(i){return i===i&&!Zn(i)}function Bc(i,c){return function(A){return A==null?!1:A[i]===c&&(c!==n||i in An(A))}}function l0(i){var c=ho(i,function(G){return A.size===m&&A.clear(),G}),A=c.cache;return c}function c0(i,c){var A=i[1],G=c[1],Dt=A|G,Vt=Dt<(tt|J|V),ue=G==V&&A==Q||G==V&&A==lt&&i[7].length<=c[8]||G==(V|lt)&&c[7].length<=c[8]&&A==Q;if(!(Vt||ue))return i;G&tt&&(i[2]=c[2],Dt|=A&tt?0:N);var fe=c[3];if(fe){var Fe=i[3];i[3]=Fe?uc(Fe,fe,c[4]):fe,i[4]=Fe?Ss(i[3],C):c[4]}return fe=c[5],fe&&(Fe=i[5],i[5]=Fe?ac(Fe,fe,c[6]):fe,i[6]=Fe?Ss(i[5],C):c[6]),fe=c[7],fe&&(i[7]=fe),G&V&&(i[8]=i[8]==null?c[8]:St(i[8],c[8])),i[9]==null&&(i[9]=c[9]),i[0]=c[0],i[1]=Dt,i}function p0(i){var c=[];if(i!=null)for(var A in An(i))c.push(A);return c}function h0(i){return l.call(i)}function Ic(i,c,A){return c=z(c===n?i.length-1:c,0),function(){for(var G=arguments,Dt=-1,Vt=z(G.length-c,0),ue=ke(Vt);++Dt<Vt;)ue[Dt]=G[c+Dt];Dt=-1;for(var fe=ke(c+1);++Dt<c;)fe[Dt]=G[Dt];return fe[c]=A(ue),Fs(i,this,fe)}}function Rc(i,c){return c.length<2?i:Lu(i,di(c,0,-1))}function f0(i,c){for(var A=i.length,G=St(c.length,A),Dt=Gs(i);G--;){var Vt=c[G];i[G]=au(Vt,A)?Dt[Vt]:n}return i}function rl(i,c){if(!(c==="constructor"&&typeof i[c]=="function")&&c!="__proto__")return i[c]}var $c=Oc(ql),Ma=Tt||function(i,c){return Qn.setTimeout(i,c)},nl=Oc(Bh);function kc(i,c,A){var G=c+"";return nl(i,s0(G,d0(t0(G),A)))}function Oc(i){var c=0,A=0;return function(){var G=qt(),Dt=vt-(G-A);if(A=G,Dt>0){if(++c>=Et)return arguments[0]}else c=0;return i.apply(n,arguments)}}function ao(i,c){var A=-1,G=i.length,Dt=G-1;for(c=c===n?G:c;++A<c;){var Vt=Io(A,Dt),ue=i[Vt];i[Vt]=i[A],i[A]=ue}return i.length=c,i}var Pc=l0(function(i){var c=[];return i.charCodeAt(0)===46&&c.push(""),i.replace(O,function(A,G,Dt,Vt){c.push(Dt?Vt.replace(tr,"$1"):G||A)}),c});function Mi(i){if(typeof i=="string"||si(i))return i;var c=i+"";return c=="0"&&1/i==-ae?"-0":c}function Mu(i){if(i!=null){try{return Ti.call(i)}catch{}try{return i+""}catch{}}return""}function d0(i,c){return Je(We,function(A){var G="_."+A[0];c&A[1]&&!Ai(i,G)&&i.push(G)}),i.sort()}function Nc(i){if(i instanceof zr)return i.clone();var c=new Un(i.__wrapped__,i.__chain__);return c.__actions__=Gs(i.__actions__),c.__index__=i.__index__,c.__values__=i.__values__,c}function g0(i,c,A){(A?Hs(i,c,A):c===n)?c=1:c=z(Gr(c),0);var G=i==null?0:i.length;if(!G||c<1)return[];for(var Dt=0,Vt=0,ue=ke(Jt(G/c));Dt<G;)ue[Vt++]=di(i,Dt,Dt+=c);return ue}function y0(i){for(var c=-1,A=i==null?0:i.length,G=0,Dt=[];++c<A;){var Vt=i[c];Vt&&(Dt[G++]=Vt)}return Dt}function m0(){var i=arguments.length;if(!i)return[];for(var c=ke(i-1),A=arguments[0],G=i;G--;)c[G-1]=arguments[G];return li(Hr(A)?Gs(A):[A],Ds(c,1))}var E0=Qr(function(i,c){return ss(i)?Pa(i,Ds(c,1,ss,!0)):[]}),v0=Qr(function(i,c){var A=yi(c);return ss(A)&&(A=n),ss(i)?Pa(i,Ds(c,1,ss,!0),Ir(A,2)):[]}),A0=Qr(function(i,c){var A=yi(c);return ss(A)&&(A=n),ss(i)?Pa(i,Ds(c,1,ss,!0),n,A):[]});function w0(i,c,A){var G=i==null?0:i.length;return G?(c=A||c===n?1:Gr(c),di(i,c<0?0:c,G)):[]}function F0(i,c,A){var G=i==null?0:i.length;return G?(c=A||c===n?1:Gr(c),c=G-c,di(i,0,c<0?0:c)):[]}function b0(i,c){return i&&i.length?Ya(i,Ir(c,3),!0,!0):[]}function C0(i,c){return i&&i.length?Ya(i,Ir(c,3),!0):[]}function D0(i,c,A,G){var Dt=i==null?0:i.length;return Dt?(A&&typeof A!="number"&&Hs(i,c,A)&&(A=0,G=Dt),ch(i,c,A,G)):[]}function Tc(i,c,A){var G=i==null?0:i.length;if(!G)return-1;var Dt=A==null?0:Gr(A);return Dt<0&&(Dt=z(G+Dt,0)),hu(i,Ir(c,3),Dt)}function jc(i,c,A){var G=i==null?0:i.length;if(!G)return-1;var Dt=G-1;return A!==n&&(Dt=Gr(A),Dt=A<0?z(G+Dt,0):St(Dt,G-1)),hu(i,Ir(c,3),Dt,!0)}function Uc(i){var c=i==null?0:i.length;return c?Ds(i,1):[]}function x0(i){var c=i==null?0:i.length;return c?Ds(i,ae):[]}function _0(i,c){var A=i==null?0:i.length;return A?(c=c===n?1:Gr(c),Ds(i,c)):[]}function S0(i){for(var c=-1,A=i==null?0:i.length,G={};++c<A;){var Dt=i[c];G[Dt[0]]=Dt[1]}return G}function Lc(i){return i&&i.length?i[0]:n}function I0(i,c,A){var G=i==null?0:i.length;if(!G)return-1;var Dt=A==null?0:Gr(A);return Dt<0&&(Dt=z(G+Dt,0)),Ji(i,c,Dt)}function N0(i){var c=i==null?0:i.length;return c?di(i,0,-1):[]}var T0=Qr(function(i){var c=Pn(i,Po);return c.length&&c[0]===i[0]?Do(c):[]}),j0=Qr(function(i){var c=yi(i),A=Pn(i,Po);return c===yi(A)?c=n:A.pop(),A.length&&A[0]===i[0]?Do(A,Ir(c,2)):[]}),U0=Qr(function(i){var c=yi(i),A=Pn(i,Po);return c=typeof c=="function"?c:n,c&&A.pop(),A.length&&A[0]===i[0]?Do(A,n,c):[]});function L0(i,c){return i==null?"":B.call(i,c)}function yi(i){var c=i==null?0:i.length;return c?i[c-1]:n}function z0(i,c,A){var G=i==null?0:i.length;if(!G)return-1;var Dt=G;return A!==n&&(Dt=Gr(A),Dt=Dt<0?z(G+Dt,0):St(Dt,G-1)),c===c?Tu(i,c,Dt):hu(i,xr,Dt,!0)}function G0(i,c){return i&&i.length?Ul(i,Gr(c)):n}var J0=Qr(Hc);function Hc(i,c){return i&&i.length&&c&&c.length?Bo(i,c):i}function W0(i,c,A){return i&&i.length&&c&&c.length?Bo(i,c,Ir(A,2)):i}function X0(i,c,A){return i&&i.length&&c&&c.length?Bo(i,c,n,A):i}var Z0=uu(function(i,c){var A=i==null?0:i.length,G=wo(i,c);return Ml(i,Pn(c,function(Dt){return au(Dt,A)?+Dt:Dt}).sort(ic)),G});function Q0(i,c){var A=[];if(!(i&&i.length))return A;var G=-1,Dt=[],Vt=i.length;for(c=Ir(c,3);++G<Vt;){var ue=i[G];c(ue,G,i)&&(A.push(ue),Dt.push(G))}return Ml(i,Dt),A}function il(i){return i==null?i:ye.call(i)}function rf(i,c,A){var G=i==null?0:i.length;return G?(A&&typeof A!="number"&&Hs(i,c,A)?(c=0,A=G):(c=c==null?0:Gr(c),A=A===n?G:Gr(A)),di(i,c,A)):[]}function nf(i,c){return Wa(i,c)}function sf(i,c,A){return $o(i,c,Ir(A,2))}function uf(i,c){var A=i==null?0:i.length;if(A){var G=Wa(i,c);if(G<A&&Di(i[G],c))return G}return-1}function af(i,c){return Wa(i,c,!0)}function of(i,c,A){return $o(i,c,Ir(A,2),!0)}function lf(i,c){var A=i==null?0:i.length;if(A){var G=Wa(i,c,!0)-1;if(Di(i[G],c))return G}return-1}function cf(i){return i&&i.length?Vl(i):[]}function pf(i,c){return i&&i.length?Vl(i,Ir(c,2)):[]}function hf(i){var c=i==null?0:i.length;return c?di(i,1,c):[]}function ff(i,c,A){return i&&i.length?(c=A||c===n?1:Gr(c),di(i,0,c<0?0:c)):[]}function df(i,c,A){var G=i==null?0:i.length;return G?(c=A||c===n?1:Gr(c),c=G-c,di(i,c<0?0:c,G)):[]}function gf(i,c){return i&&i.length?Ya(i,Ir(c,3),!1,!0):[]}function yf(i,c){return i&&i.length?Ya(i,Ir(c,3)):[]}var mf=Qr(function(i){return vu(Ds(i,1,ss,!0))}),Ef=Qr(function(i){var c=yi(i);return ss(c)&&(c=n),vu(Ds(i,1,ss,!0),Ir(c,2))}),vf=Qr(function(i){var c=yi(i);return c=typeof c=="function"?c:n,vu(Ds(i,1,ss,!0),n,c)});function Af(i){return i&&i.length?vu(i):[]}function wf(i,c){return i&&i.length?vu(i,Ir(c,2)):[]}function bf(i,c){return c=typeof c=="function"?c:n,i&&i.length?vu(i,n,c):[]}function ul(i){if(!(i&&i.length))return[];var c=0;return i=Zs(i,function(A){if(ss(A))return c=z(A.length,c),!0}),ms(c,function(A){return Pn(i,Yi(A))})}function Mc(i,c){if(!(i&&i.length))return[];var A=ul(i);return c==null?A:Pn(A,function(G){return Fs(c,n,G)})}var Cf=Qr(function(i,c){return ss(i)?Pa(i,c):[]}),Df=Qr(function(i){return Oo(Zs(i,ss))}),xf=Qr(function(i){var c=yi(i);return ss(c)&&(c=n),Oo(Zs(i,ss),Ir(c,2))}),_f=Qr(function(i){var c=yi(i);return c=typeof c=="function"?c:n,Oo(Zs(i,ss),n,c)}),If=Qr(ul);function $f(i,c){return Xl(i||[],c||[],ka)}function kf(i,c){return Xl(i||[],c||[],Ua)}var Of=Qr(function(i){var c=i.length,A=c>1?i[c-1]:n;return A=typeof A=="function"?(i.pop(),A):n,Mc(i,A)});function qc(i){var c=Pt(i);return c.__chain__=!0,c}function Nf(i,c){return c(i),i}function oo(i,c){return c(i)}var Tf=uu(function(i){var c=i.length,A=c?i[0]:0,G=this.__wrapped__,Dt=function(Vt){return wo(Vt,i)};return c>1||this.__actions__.length||!(G instanceof zr)||!au(A)?this.thru(Dt):(G=G.slice(A,+A+(c?1:0)),G.__actions__.push({func:oo,args:[Dt],thisArg:n}),new Un(G,this.__chain__).thru(function(Vt){return c&&!Vt.length&&Vt.push(n),Vt}))});function Uf(){return qc(this)}function Lf(){return new Un(this.value(),this.__chain__)}function Hf(){this.__values__===n&&(this.__values__=op(this.value()));var i=this.__index__>=this.__values__.length,c=i?n:this.__values__[this.__index__++];return{done:i,value:c}}function Mf(){return this}function qf(i){for(var c,A=this;A instanceof yn;){var G=Nc(A);G.__index__=0,G.__values__=n,c?Dt.__wrapped__=G:c=G;var Dt=G;A=A.__wrapped__}return Dt.__wrapped__=i,c}function Vf(){var i=this.__wrapped__;if(i instanceof zr){var c=i;return this.__actions__.length&&(c=new zr(this)),c=c.reverse(),c.__actions__.push({func:oo,args:[il],thisArg:n}),new Un(c,this.__chain__)}return this.thru(il)}function Jf(){return Yl(this.__wrapped__,this.__actions__)}var Wf=Xa(function(i,c,A){nr.call(i,A)?++i[A]:su(i,A,1)});function Zf(i,c,A){var G=Hr(i)?xu:lh;return A&&Hs(i,c,A)&&(c=n),G(i,Ir(c,3))}function Qf(i,c){var A=Hr(i)?Zs:Il;return A(i,Ir(c,3))}var td=hc(Tc),ed=hc(jc);function rd(i,c){return Ds(lo(i,c),1)}function nd(i,c){return Ds(lo(i,c),ae)}function sd(i,c,A){return A=A===n?1:Gr(A),Ds(lo(i,c),A)}function Vc(i,c){var A=Hr(i)?Je:mu;return A(i,Ir(c,3))}function Kc(i,c){var A=Hr(i)?v:Bl;return A(i,Ir(c,3))}var ud=Xa(function(i,c,A){nr.call(i,A)?i[A].push(c):su(i,A,[c])});function ad(i,c,A,G){i=Js(i)?i:Aa(i),A=A&&!G?Gr(A):0;var Dt=i.length;return A<0&&(A=z(Dt+A,0)),yo(i)?A<=Dt&&i.indexOf(c,A)>-1:!!Dt&&Ji(i,c,A)>-1}var od=Qr(function(i,c,A){var G=-1,Dt=typeof c=="function",Vt=Js(i)?ke(i.length):[];return mu(i,function(ue){Vt[++G]=Dt?Fs(c,ue,A):Na(ue,c,A)}),Vt}),ld=Xa(function(i,c,A){su(i,A,c)});function lo(i,c){var A=Hr(i)?Pn:Nl;return A(i,Ir(c,3))}function cd(i,c,A,G){return i==null?[]:(Hr(c)||(c=c==null?[]:[c]),A=G?n:A,Hr(A)||(A=A==null?[]:[A]),Ll(i,c,A))}var pd=Xa(function(i,c,A){i[A?0:1].push(c)},function(){return[[],[]]});function hd(i,c,A){var G=Hr(i)?ct:kn,Dt=arguments.length<3;return G(i,Ir(c,4),A,Dt,mu)}function fd(i,c,A){var G=Hr(i)?Rr:kn,Dt=arguments.length<3;return G(i,Ir(c,4),A,Dt,Bl)}function dd(i,c){var A=Hr(i)?Zs:Il;return A(i,fo(Ir(c,3)))}function gd(i){var c=Hr(i)?Dl:_h;return c(i)}function yd(i,c,A){(A?Hs(i,c,A):c===n)?c=1:c=Gr(c);var G=Hr(i)?sh:Sh;return G(i,c)}function md(i){var c=Hr(i)?ih:Ih;return c(i)}function Ed(i){if(i==null)return 0;if(Js(i))return yo(i)?ti(i):i.length;var c=Is(i);return c==k||c==ur?i.size:_o(i).length}function vd(i,c,A){var G=Hr(i)?Vs:Rh;return A&&Hs(i,c,A)&&(c=n),G(i,Ir(c,3))}var Ad=Qr(function(i,c){if(i==null)return[];var A=c.length;return A>1&&Hs(i,c[0],c[1])?c=[]:A>2&&Hs(c[0],c[1],c[2])&&(c=[c[0]]),Ll(i,Ds(c,1),[])}),co=Ft||function(){return Qn.Date.now()};function wd(i,c){if(typeof c!="function")throw new je(g);return i=Gr(i),function(){if(--i<1)return c.apply(this,arguments)}}function zc(i,c,A){return c=A?n:c,c=i&&c==null?i.length:c,iu(i,V,n,n,n,n,c)}function Gc(i,c){var A;if(typeof c!="function")throw new je(g);return i=Gr(i),function(){return--i>0&&(A=c.apply(this,arguments)),i<=1&&(c=n),A}}var ol=Qr(function(i,c,A){var G=tt;if(A.length){var Dt=Ss(A,Ea(ol));G|=q}return iu(i,G,c,A,Dt)}),Jc=Qr(function(i,c,A){var G=tt|J;if(A.length){var Dt=Ss(A,Ea(Jc));G|=q}return iu(c,G,i,A,Dt)});function Wc(i,c,A){c=A?n:c;var G=iu(i,Q,n,n,n,n,n,c);return G.placeholder=Wc.placeholder,G}function Yc(i,c,A){c=A?n:c;var G=iu(i,at,n,n,n,n,n,c);return G.placeholder=Yc.placeholder,G}function Zc(i,c,A){var G,Dt,Vt,ue,fe,Fe,ze=0,Ge=!1,Xe=!1,or=!0;if(typeof i!="function")throw new je(g);c=mi(c)||0,Zn(A)&&(Ge=!!A.leading,Xe="maxWait"in A,Vt=Xe?z(mi(A.maxWait)||0,c):Vt,or="trailing"in A?!!A.trailing:or);function br(us){var xi=G,cu=Dt;return G=Dt=n,ze=us,ue=i.apply(cu,xi),ue}function $r(us){return ze=us,fe=Ma(rn,c),Ge?br(us):ue}function Yr(us){var xi=us-Fe,cu=us-ze,Fp=c-xi;return Xe?St(Fp,Vt-cu):Fp}function kr(us){var xi=us-Fe,cu=us-ze;return Fe===n||xi>=c||xi<0||Xe&&cu>=Vt}function rn(){var us=co();if(kr(us))return fn(us);fe=Ma(rn,Yr(us))}function fn(us){return fe=n,or&&G?br(us):(G=Dt=n,ue)}function ii(){fe!==n&&Zl(fe),ze=0,G=Fe=Dt=fe=n}function Ms(){return fe===n?ue:fn(co())}function ai(){var us=co(),xi=kr(us);if(G=arguments,Dt=this,Fe=us,xi){if(fe===n)return $r(Fe);if(Xe)return Zl(fe),fe=Ma(rn,c),br(Fe)}return fe===n&&(fe=Ma(rn,c)),ue}return ai.cancel=ii,ai.flush=Ms,ai}var Fd=Qr(function(i,c){return Sl(i,1,c)}),bd=Qr(function(i,c,A){return Sl(i,mi(c)||0,A)});function Cd(i){return iu(i,It)}function ho(i,c){if(typeof i!="function"||c!=null&&typeof c!="function")throw new je(g);var A=function(){var G=arguments,Dt=c?c.apply(this,G):G[0],Vt=A.cache;if(Vt.has(Dt))return Vt.get(Dt);var ue=i.apply(this,G);return A.cache=Vt.set(Dt,ue)||Vt,ue};return A.cache=new(ho.Cache||nu),A}ho.Cache=nu;function fo(i){if(typeof i!="function")throw new je(g);return function(){var c=arguments;switch(c.length){case 0:return!i.call(this);case 1:return!i.call(this,c[0]);case 2:return!i.call(this,c[0],c[1]);case 3:return!i.call(this,c[0],c[1],c[2])}return!i.apply(this,c)}}function Dd(i){return Gc(2,i)}var xd=Oh(function(i,c){c=c.length==1&&Hr(c[0])?Pn(c[0],Pe(Ir())):Pn(Ds(c,1),Pe(Ir()));var A=c.length;return Qr(function(G){for(var Dt=-1,Vt=St(G.length,A);++Dt<Vt;)G[Dt]=c[Dt].call(this,G[Dt]);return Fs(i,this,G)})}),ll=Qr(function(i,c){var A=Ss(c,Ea(ll));return iu(i,q,n,c,A)}),Qc=Qr(function(i,c){var A=Ss(c,Ea(Qc));return iu(i,U,n,c,A)}),_d=uu(function(i,c){return iu(i,lt,n,n,n,c)});function Sd(i,c){if(typeof i!="function")throw new je(g);return c=c===n?c:Gr(c),Qr(i,c)}function Bd(i,c){if(typeof i!="function")throw new je(g);return c=c==null?0:z(Gr(c),0),Qr(function(A){var G=A[c],Dt=Fu(A,0,c);return G&&li(Dt,G),Fs(i,this,Dt)})}function Id(i,c,A){var G=!0,Dt=!0;if(typeof i!="function")throw new je(g);return Zn(A)&&(G="leading"in A?!!A.leading:G,Dt="trailing"in A?!!A.trailing:Dt),Zc(i,c,{leading:G,maxWait:c,trailing:Dt})}function Rd(i){return zc(i,1)}function $d(i,c){return ll(No(c),i)}function kd(){if(!arguments.length)return[];var i=arguments[0];return Hr(i)?i:[i]}function Od(i){return fi(i,X)}function Pd(i,c){return c=typeof c=="function"?c:n,fi(i,X,c)}function Nd(i){return fi(i,a|X)}function Td(i,c){return c=typeof c=="function"?c:n,fi(i,a|X,c)}function jd(i,c){return c==null||_l(i,c,As(c))}function Di(i,c){return i===c||i!==i&&c!==c}var Ud=no(Co),Ld=no(function(i,c){return i>=c}),Ju=kl((function(){return arguments})())?kl:function(i){return rs(i)&&nr.call(i,"callee")&&!mt.call(i,"callee")},Hr=ke.isArray,Jd=Qu?Pe(Qu):gh;function Js(i){return i!=null&&go(i.length)&&!ou(i)}function ss(i){return rs(i)&&Js(i)}function Yd(i){return i===!0||i===!1||rs(i)&&Ls(i)==Ke}var bu=De||wl,Xd=ta?Pe(ta):yh;function Zd(i){return rs(i)&&i.nodeType===1&&!qa(i)}function Qd(i){if(i==null)return!0;if(Js(i)&&(Hr(i)||typeof i=="string"||typeof i.splice=="function"||bu(i)||va(i)||Ju(i)))return!i.length;var c=Is(i);if(c==k||c==ur)return!i.size;if(Ha(i))return!_o(i).length;for(var A in i)if(nr.call(i,A))return!1;return!0}function t1(i,c){return ja(i,c)}function e1(i,c,A){A=typeof A=="function"?A:n;var G=A?A(i,c):n;return G===n?ja(i,c,n,A):!!G}function cl(i){if(!rs(i))return!1;var c=Ls(i);return c==Pr||c==vr||typeof i.message=="string"&&typeof i.name=="string"&&!qa(i)}function r1(i){return typeof i=="number"&&d(i)}function ou(i){if(!Zn(i))return!1;var c=Ls(i);return c==Cr||c==et||c==Qe||c==fr}function tp(i){return typeof i=="number"&&i==Gr(i)}function go(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=He}function Zn(i){var c=typeof i;return i!=null&&(c=="object"||c=="function")}function rs(i){return i!=null&&typeof i=="object"}var ep=ea?Pe(ea):Eh;function n1(i,c){return i===c||xo(i,c,Yo(c))}function s1(i,c,A){return A=typeof A=="function"?A:n,xo(i,c,Yo(c),A)}function i1(i){return up(i)&&i!=+i}function u1(i){if(o0(i))throw new Or(p);return Ol(i)}function a1(i){return i===null}function o1(i){return i==null}function up(i){return typeof i=="number"||rs(i)&&Ls(i)==Z}function qa(i){if(!rs(i)||Ls(i)!=Ee)return!1;var c=K(i);if(c===null)return!0;var A=nr.call(c,"constructor")&&c.constructor;return typeof A=="function"&&A instanceof A&&Ti.call(A)==o}var pl=ra?Pe(ra):vh;function l1(i){return tp(i)&&i>=-He&&i<=He}var ap=sa?Pe(sa):Ah;function yo(i){return typeof i=="string"||!Hr(i)&&rs(i)&&Ls(i)==er}function si(i){return typeof i=="symbol"||rs(i)&&Ls(i)==Wr}var va=ia?Pe(ia):wh;function c1(i){return i===n}function p1(i){return rs(i)&&Is(i)==Sr}function h1(i){return rs(i)&&Ls(i)==L}var f1=no(So),d1=no(function(i,c){return i<=c});function op(i){if(!i)return[];if(Js(i))return yo(i)?Nn(i):Gs(i);if(ut&&i[ut])return Xi(i[ut]());var c=Is(i),A=c==k?wi:c==ur?Zi:Aa;return A(i)}function lu(i){if(!i)return i===0?i:0;if(i=mi(i),i===ae||i===-ae){var c=i<0?-1:1;return c*de}return i===i?i:0}function Gr(i){var c=lu(i),A=c%1;return c===c?A?c-A:c:0}function cp(i){return i?Uu(Gr(i),0,Ce):0}function mi(i){if(typeof i=="number")return i;if(si(i))return pe;if(Zn(i)){var c=typeof i.valueOf=="function"?i.valueOf():i;i=Zn(c)?c+"":c}if(typeof i!="string")return i===0?i:+i;i=Oi(i);var A=jr.test(i);return A||cn.test(i)?_a(i.slice(2),A?2:8):Ar.test(i)?pe:+i}function pp(i){return Hi(i,Ws(i))}function g1(i){return i?Uu(Gr(i),-He,He):i===0?i:0}function Bn(i){return i==null?"":ni(i)}var y1=ga(function(i,c){if(Ha(c)||Js(c)){Hi(c,As(c),i);return}for(var A in c)nr.call(c,A)&&ka(i,A,c[A])}),hp=ga(function(i,c){Hi(c,Ws(c),i)}),mo=ga(function(i,c,A,G){Hi(c,Ws(c),i,G)}),m1=ga(function(i,c,A,G){Hi(c,As(c),i,G)}),E1=uu(wo);function v1(i,c){var A=ps(i);return c==null?A:xl(A,c)}var A1=Qr(function(i,c){i=An(i);var A=-1,G=c.length,Dt=G>2?c[2]:n;for(Dt&&Hs(c[0],c[1],Dt)&&(G=1);++A<G;)for(var Vt=c[A],ue=Ws(Vt),fe=-1,Fe=ue.length;++fe<Fe;){var ze=ue[fe],Ge=i[ze];(Ge===n||Di(Ge,ri[ze])&&!nr.call(i,ze))&&(i[ze]=Vt[ze])}return i}),w1=Qr(function(i){return i.push(n,Ac),Fs(fp,n,i)});function F1(i,c){return gs(i,Ir(c,3),Ui)}function b1(i,c){return gs(i,Ir(c,3),bo)}function C1(i,c){return i==null?i:Fo(i,Ir(c,3),Ws)}function D1(i,c){return i==null?i:Rl(i,Ir(c,3),Ws)}function x1(i,c){return i&&Ui(i,Ir(c,3))}function _1(i,c){return i&&bo(i,Ir(c,3))}function S1(i){return i==null?[]:Ga(i,As(i))}function B1(i){return i==null?[]:Ga(i,Ws(i))}function hl(i,c,A){var G=i==null?n:Lu(i,c);return G===n?A:G}function I1(i,c){return i!=null&&Dc(i,c,ph)}function fl(i,c){return i!=null&&Dc(i,c,hh)}var R1=dc(function(i,c,A){c!=null&&typeof c.toString!="function"&&(c=l.call(c)),i[c]=A},gl(Ys)),$1=dc(function(i,c,A){c!=null&&typeof c.toString!="function"&&(c=l.call(c)),nr.call(i,c)?i[c].push(A):i[c]=[A]},Ir),k1=Qr(Na);function As(i){return Js(i)?Cl(i):_o(i)}function Ws(i){return Js(i)?Cl(i,!0):Fh(i)}function O1(i,c){var A={};return c=Ir(c,3),Ui(i,function(G,Dt,Vt){su(A,c(G,Dt,Vt),G)}),A}function P1(i,c){var A={};return c=Ir(c,3),Ui(i,function(G,Dt,Vt){su(A,Dt,c(G,Dt,Vt))}),A}var N1=ga(function(i,c,A){Ja(i,c,A)}),fp=ga(function(i,c,A,G){Ja(i,c,A,G)}),T1=uu(function(i,c){var A={};if(i==null)return A;var G=!1;c=Pn(c,function(Vt){return Vt=Au(Vt,i),G||(G=Vt.length>1),Vt}),Hi(i,Jo(i),A),G&&(A=fi(A,a|H|X,Wh));for(var Dt=c.length;Dt--;)ko(A,c[Dt]);return A});function j1(i,c){return dp(i,fo(Ir(c)))}var U1=uu(function(i,c){return i==null?{}:Ch(i,c)});function dp(i,c){if(i==null)return{};var A=Pn(Jo(i),function(G){return[G]});return c=Ir(c),Hl(i,A,function(G,Dt){return c(G,Dt[0])})}function L1(i,c,A){c=Au(c,i);var G=-1,Dt=c.length;for(Dt||(Dt=1,i=n);++G<Dt;){var Vt=i==null?n:i[Mi(c[G])];Vt===n&&(G=Dt,Vt=A),i=ou(Vt)?Vt.call(i):Vt}return i}function H1(i,c,A){return i==null?i:Ua(i,c,A)}function M1(i,c,A,G){return G=typeof G=="function"?G:n,i==null?i:Ua(i,c,A,G)}var gp=Ec(As),yp=Ec(Ws);function q1(i,c,A){var G=Hr(i),Dt=G||bu(i)||va(i);if(c=Ir(c,4),A==null){var Vt=i&&i.constructor;Dt?A=G?new Vt:[]:Zn(i)?A=ou(Vt)?ps(K(i)):{}:A={}}return(Dt?Je:Ui)(i,function(ue,fe,Fe){return c(A,ue,fe,Fe)}),A}function V1(i,c){return i==null?!0:ko(i,c)}function K1(i,c,A){return i==null?i:Jl(i,c,No(A))}function z1(i,c,A,G){return G=typeof G=="function"?G:n,i==null?i:Jl(i,c,No(A),G)}function Aa(i){return i==null?[]:On(i,As(i))}function G1(i){return i==null?[]:On(i,Ws(i))}function J1(i,c,A){return A===n&&(A=c,c=n),A!==n&&(A=mi(A),A=A===A?A:0),c!==n&&(c=mi(c),c=c===c?c:0),Uu(mi(i),c,A)}function W1(i,c,A){return c=lu(c),A===n?(A=c,c=0):A=lu(A),i=mi(i),fh(i,c,A)}function Y1(i,c,A){if(A&&typeof A!="boolean"&&Hs(i,c,A)&&(c=A=n),A===n&&(typeof c=="boolean"?(A=c,c=n):typeof i=="boolean"&&(A=i,i=n)),i===n&&c===n?(i=0,c=1):(i=lu(i),c===n?(c=i,i=0):c=lu(c)),i>c){var G=i;i=c,c=G}if(A||i%1||c%1){var Dt=ie();return St(i+Dt*(c-i+xa("1e-"+((Dt+"").length-1))),c)}return Io(i,c)}var X1=ma(function(i,c,A){return c=c.toLowerCase(),i+(A?mp(c):c)});function mp(i){return dl(Bn(i).toLowerCase())}function Ep(i){return i=Bn(i),i&&i.replace(mr,ca).replace(ws,"")}function Z1(i,c,A){i=Bn(i),c=ni(c);var G=i.length;A=A===n?G:Uu(Gr(A),0,G);var Dt=A;return A-=c.length,A>=0&&i.slice(A,Dt)==c}function Q1(i){return i=Bn(i),i&&Wt.test(i)?i.replace(Ct,Pu):i}function tg(i){return i=Bn(i),i&&Kt.test(i)?i.replace(le,"\\$&"):i}var eg=ma(function(i,c,A){return i+(A?"-":"")+c.toLowerCase()}),rg=ma(function(i,c,A){return i+(A?" ":"")+c.toLowerCase()}),ng=cc("toLowerCase");function sg(i,c,A){i=Bn(i),c=Gr(c);var G=c?ti(i):0;if(!c||G>=c)return i;var Dt=(c-G)/2;return eo(Gt(Dt),A)+i+eo(Jt(Dt),A)}function ig(i,c,A){i=Bn(i),c=Gr(c);var G=c?ti(i):0;return c&&G<c?i+eo(c-G,A):i}function ug(i,c,A){i=Bn(i),c=Gr(c);var G=c?ti(i):0;return c&&G<c?eo(c-G,A)+i:i}function ag(i,c,A){return A||c==null?c=0:c&&(c=+c),ee(Bn(i).replace(he,""),c||0)}function og(i,c,A){return(A?Hs(i,c,A):c===n)?c=1:c=Gr(c),Ro(Bn(i),c)}function lg(){var i=arguments,c=Bn(i[0]);return i.length<3?c:c.replace(i[1],i[2])}var cg=ma(function(i,c,A){return i+(A?"_":"")+c.toLowerCase()});function hg(i,c,A){return A&&typeof A!="number"&&Hs(i,c,A)&&(c=A=n),A=A===n?Ce:A>>>0,A?(i=Bn(i),i&&(typeof c=="string"||c!=null&&!pl(c))&&(c=ni(c),!c&&Qs(i))?Fu(Nn(i),0,A):i.split(c,A)):[]}var fg=ma(function(i,c,A){return i+(A?" ":"")+dl(c)});function dg(i,c,A){return i=Bn(i),A=A==null?0:Uu(Gr(A),0,i.length),c=ni(c),i.slice(A,A+c.length)==c}function Dg(i,c,A){var G=Pt.templateSettings;A&&Hs(i,c,A)&&(c=n),i=Bn(i),c=mo({},c,G,vc);var Dt=mo({},c.imports,G.imports,vc),Vt=As(Dt),ue=On(Dt,Vt),fe,Fe,ze=0,Ge=c.interpolate||Nr,Xe="__p += '",or=Fi((c.escape||Nr).source+"|"+Ge.source+"|"+(Ge===ve?lr:Nr).source+"|"+(c.evaluate||Nr).source+"|$","g"),br="//# sourceURL="+(nr.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Fa+"]")+`
`;i.replace(or,function(kr,rn,fn,ii,Ms,ai){return fn||(fn=ii),Xe+=i.slice(ze,ai).replace(gn,Nu),rn&&(fe=!0,Xe+=`' +
__e(`+rn+`) +
'`),Ms&&(Fe=!0,Xe+=`';
`+Ms+`;
__p += '`),fn&&(Xe+=`' +
((__t = (`+fn+`)) == null ? '' : __t) +
'`),ze=ai+kr.length,kr}),Xe+=`';
`;var $r=nr.call(c,"variable")&&c.variable;if(!$r)Xe=`with (obj) {
`+Xe+`
}
`;else if(Ue.test($r))throw new Or(y);Xe=(Fe?Xe.replace(rt,""):Xe).replace(F,"$1").replace(st,"$1;"),Xe="function("+($r||"obj")+`) {
`+($r?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(fe?", __e = _.escape":"")+(Fe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Xe+`return __p
}`;var Yr=Ap(function(){return un(Vt,br+"return "+Xe).apply(n,ue)});if(Yr.source=Xe,cl(Yr))throw Yr;return Yr}function _g(i){return Bn(i).toLowerCase()}function Bg(i){return Bn(i).toUpperCase()}function Rg(i,c,A){if(i=Bn(i),i&&(A||c===n))return Oi(i);if(!i||!(c=ni(c)))return i;var G=Nn(i),Dt=Nn(c),Vt=ku(G,Dt),ue=oa(G,Dt)+1;return Fu(G,Vt,ue).join("")}function $g(i,c,A){if(i=Bn(i),i&&(A||c===n))return i.slice(0,Qi(i)+1);if(!i||!(c=ni(c)))return i;var G=Nn(i),Dt=oa(G,Nn(c))+1;return Fu(G,0,Dt).join("")}function kg(i,c,A){if(i=Bn(i),i&&(A||c===n))return i.replace(he,"");if(!i||!(c=ni(c)))return i;var G=Nn(i),Dt=ku(G,Nn(c));return Fu(G,Dt).join("")}function Ng(i,c){var A=Ot,G=yt;if(Zn(c)){var Dt="separator"in c?c.separator:Dt;A="length"in c?Gr(c.length):A,G="omission"in c?ni(c.omission):G}i=Bn(i);var Vt=i.length;if(Qs(i)){var ue=Nn(i);Vt=ue.length}if(A>=Vt)return i;var fe=A-ti(G);if(fe<1)return G;var Fe=ue?Fu(ue,0,fe).join(""):i.slice(0,fe);if(Dt===n)return Fe+G;if(ue&&(fe+=Fe.length-fe),pl(Dt)){if(i.slice(fe).search(Dt)){var ze,Ge=Fe;for(Dt.global||(Dt=Fi(Dt.source,Bn(ar.exec(Dt))+"g")),Dt.lastIndex=0;ze=Dt.exec(Ge);)var Xe=ze.index;Fe=Fe.slice(0,Xe===n?fe:Xe)}}else if(i.indexOf(ni(Dt),fe)!=fe){var or=Fe.lastIndexOf(Dt);or>-1&&(Fe=Fe.slice(0,or))}return Fe+G}function jg(i){return i=Bn(i),i&&Ut.test(i)?i.replace(wt,ei):i}var Ug=ma(function(i,c,A){return i+(A?" ":"")+c.toUpperCase()}),dl=cc("toUpperCase");function vp(i,c,A){return i=Bn(i),c=A?n:c,c===n?fu(i)?Ra(i):be(i):i.match(c)||[]}var Ap=Qr(function(i,c){try{return Fs(i,n,c)}catch(A){return cl(A)?A:new Or(A)}}),Lg=uu(function(i,c){return Je(c,function(A){A=Mi(A),su(i,A,ol(i[A],i))}),i});function Hg(i){var c=i==null?0:i.length,A=Ir();return i=c?Pn(i,function(G){if(typeof G[1]!="function")throw new je(g);return[A(G[0]),G[1]]}):[],Qr(function(G){for(var Dt=-1;++Dt<c;){var Vt=i[Dt];if(Fs(Vt[0],this,G))return Fs(Vt[1],this,G)}})}function Mg(i){return oh(fi(i,a))}function gl(i){return function(){return i}}function qg(i,c){return i==null||i!==i?c:i}var Vg=fc(),Kg=fc(!0);function Ys(i){return i}function yl(i){return Pl(typeof i=="function"?i:fi(i,a))}function zg(i){return Tl(fi(i,a))}function Gg(i,c){return jl(i,fi(c,a))}var Jg=Qr(function(i,c){return function(A){return Na(A,i,c)}}),Wg=Qr(function(i,c){return function(A){return Na(i,A,c)}});function ml(i,c,A){var G=As(c),Dt=Ga(c,G);A==null&&!(Zn(c)&&(Dt.length||!G.length))&&(A=c,c=i,i=this,Dt=Ga(c,As(c)));var Vt=!(Zn(A)&&"chain"in A)||!!A.chain,ue=ou(i);return Je(Dt,function(fe){var Fe=c[fe];i[fe]=Fe,ue&&(i.prototype[fe]=function(){var ze=this.__chain__;if(Vt||ze){var Ge=i(this.__wrapped__),Xe=Ge.__actions__=Gs(this.__actions__);return Xe.push({func:Fe,args:arguments,thisArg:i}),Ge.__chain__=ze,Ge}return Fe.apply(i,li([this.value()],arguments))})}),i}function Yg(){return Qn._===this&&(Qn._=h),this}function El(){}function Xg(i){return i=Gr(i),Qr(function(c){return Ul(c,i)})}var Zg=qo(Pn),Qg=qo(xu),t2=qo(Vs);function wp(i){return tl(i)?Yi(Mi(i)):Dh(i)}function e2(i){return function(c){return i==null?n:Lu(i,c)}}var r2=gc(),n2=gc(!0);function vl(){return[]}function wl(){return!1}function s2(){return{}}function i2(){return""}function a2(){return!0}function o2(i,c){if(i=Gr(i),i<1||i>He)return[];var A=Ce,G=St(i,Ce);c=Ir(c),i-=Ce;for(var Dt=ms(G,c);++A<i;)c(A);return Dt}function l2(i){return Hr(i)?Pn(i,Mi):si(i)?[i]:Gs(Pc(Bn(i)))}function c2(i){var c=++$a;return Bn(i)+c}var p2=to(function(i,c){return i+c},0),h2=Vo("ceil"),f2=to(function(i,c){return i/c},1),d2=Vo("floor");function g2(i){return i&&i.length?za(i,Ys,Co):n}function y2(i,c){return i&&i.length?za(i,Ir(c,2),Co):n}function m2(i){return Ba(i,Ys)}function E2(i,c){return Ba(i,Ir(c,2))}function v2(i){return i&&i.length?za(i,Ys,So):n}function A2(i,c){return i&&i.length?za(i,Ir(c,2),So):n}var w2=to(function(i,c){return i*c},1),F2=Vo("round"),b2=to(function(i,c){return i-c},0);function C2(i){return i&&i.length?Ru(i,Ys):0}function D2(i,c){return i&&i.length?Ru(i,Ir(c,2)):0}return Pt.after=wd,Pt.ary=zc,Pt.assign=y1,Pt.assignIn=hp,Pt.assignInWith=mo,Pt.assignWith=m1,Pt.at=E1,Pt.before=Gc,Pt.bind=ol,Pt.bindAll=Lg,Pt.bindKey=Jc,Pt.castArray=kd,Pt.chain=qc,Pt.chunk=g0,Pt.compact=y0,Pt.concat=m0,Pt.cond=Hg,Pt.conforms=Mg,Pt.constant=gl,Pt.countBy=Wf,Pt.create=v1,Pt.curry=Wc,Pt.curryRight=Yc,Pt.debounce=Zc,Pt.defaults=A1,Pt.defaultsDeep=w1,Pt.defer=Fd,Pt.delay=bd,Pt.difference=E0,Pt.differenceBy=v0,Pt.differenceWith=A0,Pt.drop=w0,Pt.dropRight=F0,Pt.dropRightWhile=b0,Pt.dropWhile=C0,Pt.fill=D0,Pt.filter=Qf,Pt.flatMap=rd,Pt.flatMapDeep=nd,Pt.flatMapDepth=sd,Pt.flatten=Uc,Pt.flattenDeep=x0,Pt.flattenDepth=_0,Pt.flip=Cd,Pt.flow=Vg,Pt.flowRight=Kg,Pt.fromPairs=S0,Pt.functions=S1,Pt.functionsIn=B1,Pt.groupBy=ud,Pt.initial=N0,Pt.intersection=T0,Pt.intersectionBy=j0,Pt.intersectionWith=U0,Pt.invert=R1,Pt.invertBy=$1,Pt.invokeMap=od,Pt.iteratee=yl,Pt.keyBy=ld,Pt.keys=As,Pt.keysIn=Ws,Pt.map=lo,Pt.mapKeys=O1,Pt.mapValues=P1,Pt.matches=zg,Pt.matchesProperty=Gg,Pt.memoize=ho,Pt.merge=N1,Pt.mergeWith=fp,Pt.method=Jg,Pt.methodOf=Wg,Pt.mixin=ml,Pt.negate=fo,Pt.nthArg=Xg,Pt.omit=T1,Pt.omitBy=j1,Pt.once=Dd,Pt.orderBy=cd,Pt.over=Zg,Pt.overArgs=xd,Pt.overEvery=Qg,Pt.overSome=t2,Pt.partial=ll,Pt.partialRight=Qc,Pt.partition=pd,Pt.pick=U1,Pt.pickBy=dp,Pt.property=wp,Pt.propertyOf=e2,Pt.pull=J0,Pt.pullAll=Hc,Pt.pullAllBy=W0,Pt.pullAllWith=X0,Pt.pullAt=Z0,Pt.range=r2,Pt.rangeRight=n2,Pt.rearg=_d,Pt.reject=dd,Pt.remove=Q0,Pt.rest=Sd,Pt.reverse=il,Pt.sampleSize=yd,Pt.set=H1,Pt.setWith=M1,Pt.shuffle=md,Pt.slice=rf,Pt.sortBy=Ad,Pt.sortedUniq=cf,Pt.sortedUniqBy=pf,Pt.split=hg,Pt.spread=Bd,Pt.tail=hf,Pt.take=ff,Pt.takeRight=df,Pt.takeRightWhile=gf,Pt.takeWhile=yf,Pt.tap=Nf,Pt.throttle=Id,Pt.thru=oo,Pt.toArray=op,Pt.toPairs=gp,Pt.toPairsIn=yp,Pt.toPath=l2,Pt.toPlainObject=pp,Pt.transform=q1,Pt.unary=Rd,Pt.union=mf,Pt.unionBy=Ef,Pt.unionWith=vf,Pt.uniq=Af,Pt.uniqBy=wf,Pt.uniqWith=bf,Pt.unset=V1,Pt.unzip=ul,Pt.unzipWith=Mc,Pt.update=K1,Pt.updateWith=z1,Pt.values=Aa,Pt.valuesIn=G1,Pt.without=Cf,Pt.words=vp,Pt.wrap=$d,Pt.xor=Df,Pt.xorBy=xf,Pt.xorWith=_f,Pt.zip=If,Pt.zipObject=$f,Pt.zipObjectDeep=kf,Pt.zipWith=Of,Pt.entries=gp,Pt.entriesIn=yp,Pt.extend=hp,Pt.extendWith=mo,ml(Pt,Pt),Pt.add=p2,Pt.attempt=Ap,Pt.camelCase=X1,Pt.capitalize=mp,Pt.ceil=h2,Pt.clamp=J1,Pt.clone=Od,Pt.cloneDeep=Nd,Pt.cloneDeepWith=Td,Pt.cloneWith=Pd,Pt.conformsTo=jd,Pt.deburr=Ep,Pt.defaultTo=qg,Pt.divide=f2,Pt.endsWith=Z1,Pt.eq=Di,Pt.escape=Q1,Pt.escapeRegExp=tg,Pt.every=Zf,Pt.find=td,Pt.findIndex=Tc,Pt.findKey=F1,Pt.findLast=ed,Pt.findLastIndex=jc,Pt.findLastKey=b1,Pt.floor=d2,Pt.forEach=Vc,Pt.forEachRight=Kc,Pt.forIn=C1,Pt.forInRight=D1,Pt.forOwn=x1,Pt.forOwnRight=_1,Pt.get=hl,Pt.gt=Ud,Pt.gte=Ld,Pt.has=I1,Pt.hasIn=fl,Pt.head=Lc,Pt.identity=Ys,Pt.includes=ad,Pt.indexOf=I0,Pt.inRange=W1,Pt.invoke=k1,Pt.isArguments=Ju,Pt.isArray=Hr,Pt.isArrayBuffer=Jd,Pt.isArrayLike=Js,Pt.isArrayLikeObject=ss,Pt.isBoolean=Yd,Pt.isBuffer=bu,Pt.isDate=Xd,Pt.isElement=Zd,Pt.isEmpty=Qd,Pt.isEqual=t1,Pt.isEqualWith=e1,Pt.isError=cl,Pt.isFinite=r1,Pt.isFunction=ou,Pt.isInteger=tp,Pt.isLength=go,Pt.isMap=ep,Pt.isMatch=n1,Pt.isMatchWith=s1,Pt.isNaN=i1,Pt.isNative=u1,Pt.isNil=o1,Pt.isNull=a1,Pt.isNumber=up,Pt.isObject=Zn,Pt.isObjectLike=rs,Pt.isPlainObject=qa,Pt.isRegExp=pl,Pt.isSafeInteger=l1,Pt.isSet=ap,Pt.isString=yo,Pt.isSymbol=si,Pt.isTypedArray=va,Pt.isUndefined=c1,Pt.isWeakMap=p1,Pt.isWeakSet=h1,Pt.join=L0,Pt.kebabCase=eg,Pt.last=yi,Pt.lastIndexOf=z0,Pt.lowerCase=rg,Pt.lowerFirst=ng,Pt.lt=f1,Pt.lte=d1,Pt.max=g2,Pt.maxBy=y2,Pt.mean=m2,Pt.meanBy=E2,Pt.min=v2,Pt.minBy=A2,Pt.stubArray=vl,Pt.stubFalse=wl,Pt.stubObject=s2,Pt.stubString=i2,Pt.stubTrue=a2,Pt.multiply=w2,Pt.nth=G0,Pt.noConflict=Yg,Pt.noop=El,Pt.now=co,Pt.pad=sg,Pt.padEnd=ig,Pt.padStart=ug,Pt.parseInt=ag,Pt.random=Y1,Pt.reduce=hd,Pt.reduceRight=fd,Pt.repeat=og,Pt.replace=lg,Pt.result=L1,Pt.round=F2,Pt.runInContext=me,Pt.sample=gd,Pt.size=Ed,Pt.snakeCase=cg,Pt.some=vd,Pt.sortedIndex=nf,Pt.sortedIndexBy=sf,Pt.sortedIndexOf=uf,Pt.sortedLastIndex=af,Pt.sortedLastIndexBy=of,Pt.sortedLastIndexOf=lf,Pt.startCase=fg,Pt.startsWith=dg,Pt.subtract=b2,Pt.sum=C2,Pt.sumBy=D2,Pt.template=Dg,Pt.times=o2,Pt.toFinite=lu,Pt.toInteger=Gr,Pt.toLength=cp,Pt.toLower=_g,Pt.toNumber=mi,Pt.toSafeInteger=g1,Pt.toString=Bn,Pt.toUpper=Bg,Pt.trim=Rg,Pt.trimEnd=$g,Pt.trimStart=kg,Pt.truncate=Ng,Pt.unescape=jg,Pt.uniqueId=c2,Pt.upperCase=Ug,Pt.upperFirst=dl,Pt.each=Vc,Pt.eachRight=Kc,Pt.first=Lc,ml(Pt,(function(){var i={};return Ui(Pt,function(c,A){nr.call(Pt.prototype,A)||(i[A]=c)}),i})(),{chain:!1}),Pt.VERSION=u,Je(["bind","bindKey","curry","curryRight","partial","partialRight"],function(i){Pt[i].placeholder=Pt}),Je(["drop","take"],function(i,c){zr.prototype[i]=function(A){A=A===n?1:z(Gr(A),0);var G=this.__filtered__&&!c?new zr(this):this.clone();return G.__filtered__?G.__takeCount__=St(A,G.__takeCount__):G.__views__.push({size:St(A,Ce),type:i+(G.__dir__<0?"Right":"")}),G},zr.prototype[i+"Right"]=function(A){return this.reverse()[i](A).reverse()}}),Je(["filter","map","takeWhile"],function(i,c){var A=c+1,G=A==Yt||A==re;zr.prototype[i]=function(Dt){var Vt=this.clone();return Vt.__iteratees__.push({iteratee:Ir(Dt,3),type:A}),Vt.__filtered__=Vt.__filtered__||G,Vt}}),Je(["head","last"],function(i,c){var A="take"+(c?"Right":"");zr.prototype[i]=function(){return this[A](1).value()[0]}}),Je(["initial","tail"],function(i,c){var A="drop"+(c?"":"Right");zr.prototype[i]=function(){return this.__filtered__?new zr(this):this[A](1)}}),zr.prototype.compact=function(){return this.filter(Ys)},zr.prototype.find=function(i){return this.filter(i).head()},zr.prototype.findLast=function(i){return this.reverse().find(i)},zr.prototype.invokeMap=Qr(function(i,c){return typeof i=="function"?new zr(this):this.map(function(A){return Na(A,i,c)})}),zr.prototype.reject=function(i){return this.filter(fo(Ir(i)))},zr.prototype.slice=function(i,c){i=Gr(i);var A=this;return A.__filtered__&&(i>0||c<0)?new zr(A):(i<0?A=A.takeRight(-i):i&&(A=A.drop(i)),c!==n&&(c=Gr(c),A=c<0?A.dropRight(-c):A.take(c-i)),A)},zr.prototype.takeRightWhile=function(i){return this.reverse().takeWhile(i).reverse()},zr.prototype.toArray=function(){return this.take(Ce)},Ui(zr.prototype,function(i,c){var A=/^(?:filter|find|map|reject)|While$/.test(c),G=/^(?:head|last)$/.test(c),Dt=Pt[G?"take"+(c=="last"?"Right":""):c],Vt=G||/^find/.test(c);Dt&&(Pt.prototype[c]=function(){var ue=this.__wrapped__,fe=G?[1]:arguments,Fe=ue instanceof zr,ze=fe[0],Ge=Fe||Hr(ue),Xe=function(rn){var fn=Dt.apply(Pt,li([rn],fe));return G&&or?fn[0]:fn};Ge&&A&&typeof ze=="function"&&ze.length!=1&&(Fe=Ge=!1);var or=this.__chain__,br=!!this.__actions__.length,$r=Vt&&!or,Yr=Fe&&!br;if(!Vt&&Ge){ue=Yr?ue:new zr(this);var kr=i.apply(ue,fe);return kr.__actions__.push({func:oo,args:[Xe],thisArg:n}),new Un(kr,or)}return $r&&Yr?i.apply(this,fe):(kr=this.thru(Xe),$r?G?kr.value()[0]:kr.value():kr)})}),Je(["pop","push","shift","sort","splice","unshift"],function(i){var c=Tr[i],A=/^(?:push|sort|unshift)$/.test(i)?"tap":"thru",G=/^(?:pop|shift)$/.test(i);Pt.prototype[i]=function(){var Dt=arguments;if(G&&!this.__chain__){var Vt=this.value();return c.apply(Hr(Vt)?Vt:[],Dt)}return this[A](function(ue){return c.apply(Hr(ue)?ue:[],Dt)})}}),Ui(zr.prototype,function(i,c){var A=Pt[c];if(A){var G=A.name+"";nr.call(pn,G)||(pn[G]=[]),pn[G].push({name:c,func:A})}}),pn[Za(n,J).name]=[{name:"wrapper",func:n}],zr.prototype.clone=ji,zr.prototype.reverse=Eo,zr.prototype.value=ci,Pt.prototype.at=Tf,Pt.prototype.chain=Uf,Pt.prototype.commit=Lf,Pt.prototype.next=Hf,Pt.prototype.plant=qf,Pt.prototype.reverse=Vf,Pt.prototype.toJSON=Pt.prototype.valueOf=Pt.prototype.value=Jf,Pt.prototype.first=Pt.prototype.head,ut&&(Pt.prototype[ut]=Mf),Pt},zs=fa();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Qn._=zs,define(function(){return zs})):vi?((vi.exports=zs)._=zs,Cu._=zs):Qn._=zs}).call(t)}),bg=ce(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCorrect=t.isInSubnet=void 0;function e(u){return this.subnetMask<u.subnetMask?!1:this.mask(u.subnetMask)===u.mask()}t.isInSubnet=e;function n(u){return function(){return this.addressMinusSuffix!==this.correctForm()?!1:this.subnetMask===u&&!this.parsedSubnet?!0:this.parsedSubnet===String(this.subnetMask)}}t.isCorrect=n}),yg=ce(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RE_SUBNET_STRING=t.RE_ADDRESS=t.GROUPS=t.BITS=void 0,t.BITS=32,t.GROUPS=4,t.RE_ADDRESS=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g,t.RE_SUBNET_STRING=/\/\d{1,2}$/}),Wd=ce(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddressError=void 0;var e=class extends Error{constructor(n,u){super(n),this.name="AddressError",u!==null&&(this.parseMessage=u)}};t.AddressError=e}),Cg=ce((t,e)=>{(function(){var n,u=0xdeadbeefcafe,s=(u&16777215)==15715070;function p(bt,Rt,Mt){bt!=null&&(typeof bt=="number"?this.fromNumber(bt,Rt,Mt):Rt==null&&typeof bt!="string"?this.fromString(bt,256):this.fromString(bt,Rt))}function g(){return new p(null)}function y(bt,Rt,Mt,ge,Me,Ye){for(;--Ye>=0;){var ir=Rt*this[bt++]+Mt[ge]+Me;Me=Math.floor(ir/67108864),Mt[ge++]=ir&67108863}return Me}function E(bt,Rt,Mt,ge,Me,Ye){for(var ir=Rt&32767,cr=Rt>>15;--Ye>=0;){var nn=this[bt]&32767,en=this[bt++]>>15,Er=cr*nn+en*ir;nn=ir*nn+((Er&32767)<<15)+Mt[ge]+(Me&1073741823),Me=(nn>>>30)+(Er>>>15)+cr*en+(Me>>>30),Mt[ge++]=nn&1073741823}return Me}function m(bt,Rt,Mt,ge,Me,Ye){for(var ir=Rt&16383,cr=Rt>>14;--Ye>=0;){var nn=this[bt]&16383,en=this[bt++]>>14,Er=cr*nn+en*ir;nn=ir*nn+((Er&16383)<<14)+Mt[ge]+Me,Me=(nn>>28)+(Er>>14)+cr*en,Mt[ge++]=nn&268435455}return Me}var C=typeof navigator<"u";C&&s&&navigator.appName=="Microsoft Internet Explorer"?(p.prototype.am=E,n=30):C&&s&&navigator.appName!="Netscape"?(p.prototype.am=y,n=26):(p.prototype.am=m,n=28),p.prototype.DB=n,p.prototype.DM=(1<<n)-1,p.prototype.DV=1<<n;var a=52;p.prototype.FV=Math.pow(2,a),p.prototype.F1=a-n,p.prototype.F2=2*n-a;var H="0123456789abcdefghijklmnopqrstuvwxyz",X=new Array,w,j;for(w=48,j=0;j<=9;++j)X[w++]=j;for(w=97,j=10;j<36;++j)X[w++]=j;for(w=65,j=10;j<36;++j)X[w++]=j;function tt(bt){return H.charAt(bt)}function J(bt,Rt){var Mt=X[bt.charCodeAt(Rt)];return Mt??-1}function N(bt){for(var Rt=this.t-1;Rt>=0;--Rt)bt[Rt]=this[Rt];bt.t=this.t,bt.s=this.s}function Q(bt){this.t=1,this.s=bt<0?-1:0,bt>0?this[0]=bt:bt<-1?this[0]=bt+this.DV:this.t=0}function at(bt){var Rt=g();return Rt.fromInt(bt),Rt}function q(bt,Rt){var Mt;if(Rt==16)Mt=4;else if(Rt==8)Mt=3;else if(Rt==256)Mt=8;else if(Rt==2)Mt=1;else if(Rt==32)Mt=5;else if(Rt==4)Mt=2;else{this.fromRadix(bt,Rt);return}this.t=0,this.s=0;for(var ge=bt.length,Me=!1,Ye=0;--ge>=0;){var ir=Mt==8?bt[ge]&255:J(bt,ge);if(ir<0){bt.charAt(ge)=="-"&&(Me=!0);continue}Me=!1,Ye==0?this[this.t++]=ir:Ye+Mt>this.DB?(this[this.t-1]|=(ir&(1<<this.DB-Ye)-1)<<Ye,this[this.t++]=ir>>this.DB-Ye):this[this.t-1]|=ir<<Ye,Ye+=Mt,Ye>=this.DB&&(Ye-=this.DB)}Mt==8&&bt[0]&128&&(this.s=-1,Ye>0&&(this[this.t-1]|=(1<<this.DB-Ye)-1<<Ye)),this.clamp(),Me&&p.ZERO.subTo(this,this)}function U(){for(var bt=this.s&this.DM;this.t>0&&this[this.t-1]==bt;)--this.t}function V(bt){if(this.s<0)return"-"+this.negate().toString(bt);var Rt;if(bt==16)Rt=4;else if(bt==8)Rt=3;else if(bt==2)Rt=1;else if(bt==32)Rt=5;else if(bt==4)Rt=2;else return this.toRadix(bt);var Mt=(1<<Rt)-1,ge,Me=!1,Ye="",ir=this.t,cr=this.DB-ir*this.DB%Rt;if(ir-- >0)for(cr<this.DB&&(ge=this[ir]>>cr)>0&&(Me=!0,Ye=tt(ge));ir>=0;)cr<Rt?(ge=(this[ir]&(1<<cr)-1)<<Rt-cr,ge|=this[--ir]>>(cr+=this.DB-Rt)):(ge=this[ir]>>(cr-=Rt)&Mt,cr<=0&&(cr+=this.DB,--ir)),ge>0&&(Me=!0),Me&&(Ye+=tt(ge));return Me?Ye:"0"}function lt(){var bt=g();return p.ZERO.subTo(this,bt),bt}function It(){return this.s<0?this.negate():this}function Ot(bt){var Rt=this.s-bt.s;if(Rt!=0)return Rt;var Mt=this.t;if(Rt=Mt-bt.t,Rt!=0)return this.s<0?-Rt:Rt;for(;--Mt>=0;)if((Rt=this[Mt]-bt[Mt])!=0)return Rt;return 0}function yt(bt){var Rt=1,Mt;return(Mt=bt>>>16)!=0&&(bt=Mt,Rt+=16),(Mt=bt>>8)!=0&&(bt=Mt,Rt+=8),(Mt=bt>>4)!=0&&(bt=Mt,Rt+=4),(Mt=bt>>2)!=0&&(bt=Mt,Rt+=2),(Mt=bt>>1)!=0&&(bt=Mt,Rt+=1),Rt}function Et(){return this.t<=0?0:this.DB*(this.t-1)+yt(this[this.t-1]^this.s&this.DM)}function vt(bt,Rt){var Mt;for(Mt=this.t-1;Mt>=0;--Mt)Rt[Mt+bt]=this[Mt];for(Mt=bt-1;Mt>=0;--Mt)Rt[Mt]=0;Rt.t=this.t+bt,Rt.s=this.s}function Yt(bt,Rt){for(var Mt=bt;Mt<this.t;++Mt)Rt[Mt-bt]=this[Mt];Rt.t=Math.max(this.t-bt,0),Rt.s=this.s}function Xt(bt,Rt){var Mt=bt%this.DB,ge=this.DB-Mt,Me=(1<<ge)-1,Ye=Math.floor(bt/this.DB),ir=this.s<<Mt&this.DM,cr;for(cr=this.t-1;cr>=0;--cr)Rt[cr+Ye+1]=this[cr]>>ge|ir,ir=(this[cr]&Me)<<Mt;for(cr=Ye-1;cr>=0;--cr)Rt[cr]=0;Rt[Ye]=ir,Rt.t=this.t+Ye+1,Rt.s=this.s,Rt.clamp()}function re(bt,Rt){Rt.s=this.s;var Mt=Math.floor(bt/this.DB);if(Mt>=this.t){Rt.t=0;return}var ge=bt%this.DB,Me=this.DB-ge,Ye=(1<<ge)-1;Rt[0]=this[Mt]>>ge;for(var ir=Mt+1;ir<this.t;++ir)Rt[ir-Mt-1]|=(this[ir]&Ye)<<Me,Rt[ir-Mt]=this[ir]>>ge;ge>0&&(Rt[this.t-Mt-1]|=(this.s&Ye)<<Me),Rt.t=this.t-Mt,Rt.clamp()}function ae(bt,Rt){for(var Mt=0,ge=0,Me=Math.min(bt.t,this.t);Mt<Me;)ge+=this[Mt]-bt[Mt],Rt[Mt++]=ge&this.DM,ge>>=this.DB;if(bt.t<this.t){for(ge-=bt.s;Mt<this.t;)ge+=this[Mt],Rt[Mt++]=ge&this.DM,ge>>=this.DB;ge+=this.s}else{for(ge+=this.s;Mt<bt.t;)ge-=bt[Mt],Rt[Mt++]=ge&this.DM,ge>>=this.DB;ge-=bt.s}Rt.s=ge<0?-1:0,ge<-1?Rt[Mt++]=this.DV+ge:ge>0&&(Rt[Mt++]=ge),Rt.t=Mt,Rt.clamp()}function He(bt,Rt){var Mt=this.abs(),ge=bt.abs(),Me=Mt.t;for(Rt.t=Me+ge.t;--Me>=0;)Rt[Me]=0;for(Me=0;Me<ge.t;++Me)Rt[Me+Mt.t]=Mt.am(0,ge[Me],Rt,Me,0,Mt.t);Rt.s=0,Rt.clamp(),this.s!=bt.s&&p.ZERO.subTo(Rt,Rt)}function de(bt){for(var Rt=this.abs(),Mt=bt.t=2*Rt.t;--Mt>=0;)bt[Mt]=0;for(Mt=0;Mt<Rt.t-1;++Mt){var ge=Rt.am(Mt,Rt[Mt],bt,2*Mt,0,1);(bt[Mt+Rt.t]+=Rt.am(Mt+1,2*Rt[Mt],bt,2*Mt+1,ge,Rt.t-Mt-1))>=Rt.DV&&(bt[Mt+Rt.t]-=Rt.DV,bt[Mt+Rt.t+1]=1)}bt.t>0&&(bt[bt.t-1]+=Rt.am(Mt,Rt[Mt],bt,2*Mt,0,1)),bt.s=0,bt.clamp()}function pe(bt,Rt,Mt){var ge=bt.abs();if(!(ge.t<=0)){var Me=this.abs();if(Me.t<ge.t){Rt?.fromInt(0),Mt!=null&&this.copyTo(Mt);return}Mt==null&&(Mt=g());var Ye=g(),ir=this.s,cr=bt.s,nn=this.DB-yt(ge[ge.t-1]);nn>0?(ge.lShiftTo(nn,Ye),Me.lShiftTo(nn,Mt)):(ge.copyTo(Ye),Me.copyTo(Mt));var en=Ye.t,Er=Ye[en-1];if(Er!=0){var hs=Er*(1<<this.F1)+(en>1?Ye[en-2]>>this.F2:0),Ps=this.FV/hs,Ri=(1<<this.F1)/hs,ws=1<<this.F2,ds=Mt.t,$i=ds-en,En=Rt??g();for(Ye.dlShiftTo($i,En),Mt.compareTo(En)>=0&&(Mt[Mt.t++]=1,Mt.subTo(En,Mt)),p.ONE.dlShiftTo(en,En),En.subTo(Ye,Ye);Ye.t<en;)Ye[Ye.t++]=0;for(;--$i>=0;){var Gi=Mt[--ds]==Er?this.DM:Math.floor(Mt[ds]*Ps+(Mt[ds-1]+ws)*Ri);if((Mt[ds]+=Ye.am(0,Gi,Mt,$i,0,en))<Gi)for(Ye.dlShiftTo($i,En),Mt.subTo(En,Mt);Mt[ds]<--Gi;)Mt.subTo(En,Mt)}Rt!=null&&(Mt.drShiftTo(en,Rt),ir!=cr&&p.ZERO.subTo(Rt,Rt)),Mt.t=en,Mt.clamp(),nn>0&&Mt.rShiftTo(nn,Mt),ir<0&&p.ZERO.subTo(Mt,Mt)}}}function Ce(bt){var Rt=g();return this.abs().divRemTo(bt,null,Rt),this.s<0&&Rt.compareTo(p.ZERO)>0&&bt.subTo(Rt,Rt),Rt}function Ie(bt){this.m=bt}function Ve(bt){return bt.s<0||bt.compareTo(this.m)>=0?bt.mod(this.m):bt}function We(bt){return bt}function we(bt){bt.divRemTo(this.m,null,bt)}function Se(bt,Rt,Mt){bt.multiplyTo(Rt,Mt),this.reduce(Mt)}function Qe(bt,Rt){bt.squareTo(Rt),this.reduce(Rt)}Ie.prototype.convert=Ve,Ie.prototype.revert=We,Ie.prototype.reduce=we,Ie.prototype.mulTo=Se,Ie.prototype.sqrTo=Qe;function Ke(){if(this.t<1)return 0;var bt=this[0];if(!(bt&1))return 0;var Rt=bt&3;return Rt=Rt*(2-(bt&15)*Rt)&15,Rt=Rt*(2-(bt&255)*Rt)&255,Rt=Rt*(2-((bt&65535)*Rt&65535))&65535,Rt=Rt*(2-bt*Rt%this.DV)%this.DV,Rt>0?this.DV-Rt:-Rt}function Ze(bt){this.m=bt,this.mp=bt.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<bt.DB-15)-1,this.mt2=2*bt.t}function vr(bt){var Rt=g();return bt.abs().dlShiftTo(this.m.t,Rt),Rt.divRemTo(this.m,null,Rt),bt.s<0&&Rt.compareTo(p.ZERO)>0&&this.m.subTo(Rt,Rt),Rt}function Pr(bt){var Rt=g();return bt.copyTo(Rt),this.reduce(Rt),Rt}function Cr(bt){for(;bt.t<=this.mt2;)bt[bt.t++]=0;for(var Rt=0;Rt<this.m.t;++Rt){var Mt=bt[Rt]&32767,ge=Mt*this.mpl+((Mt*this.mph+(bt[Rt]>>15)*this.mpl&this.um)<<15)&bt.DM;for(Mt=Rt+this.m.t,bt[Mt]+=this.m.am(0,ge,bt,Rt,0,this.m.t);bt[Mt]>=bt.DV;)bt[Mt]-=bt.DV,bt[++Mt]++}bt.clamp(),bt.drShiftTo(this.m.t,bt),bt.compareTo(this.m)>=0&&bt.subTo(this.m,bt)}function et(bt,Rt){bt.squareTo(Rt),this.reduce(Rt)}function k(bt,Rt,Mt){bt.multiplyTo(Rt,Mt),this.reduce(Mt)}Ze.prototype.convert=vr,Ze.prototype.revert=Pr,Ze.prototype.reduce=Cr,Ze.prototype.mulTo=k,Ze.prototype.sqrTo=et;function Z(){return(this.t>0?this[0]&1:this.s)==0}function se(bt,Rt){if(bt>4294967295||bt<1)return p.ONE;var Mt=g(),ge=g(),Me=Rt.convert(this),Ye=yt(bt)-1;for(Me.copyTo(Mt);--Ye>=0;)if(Rt.sqrTo(Mt,ge),(bt&1<<Ye)>0)Rt.mulTo(ge,Me,Mt);else{var ir=Mt;Mt=ge,ge=ir}return Rt.revert(Mt)}function Ee(bt,Rt){var Mt;return bt<256||Rt.isEven()?Mt=new Ie(Rt):Mt=new Ze(Rt),this.exp(bt,Mt)}p.prototype.copyTo=N,p.prototype.fromInt=Q,p.prototype.fromString=q,p.prototype.clamp=U,p.prototype.dlShiftTo=vt,p.prototype.drShiftTo=Yt,p.prototype.lShiftTo=Xt,p.prototype.rShiftTo=re,p.prototype.subTo=ae,p.prototype.multiplyTo=He,p.prototype.squareTo=de,p.prototype.divRemTo=pe,p.prototype.invDigit=Ke,p.prototype.isEven=Z,p.prototype.exp=se,p.prototype.toString=V,p.prototype.negate=lt,p.prototype.abs=It,p.prototype.compareTo=Ot,p.prototype.bitLength=Et,p.prototype.mod=Ce,p.prototype.modPowInt=Ee,p.ZERO=at(0),p.ONE=at(1);function rr(){var bt=g();return this.copyTo(bt),bt}function fr(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function yr(){return this.t==0?this.s:this[0]<<24>>24}function ur(){return this.t==0?this.s:this[0]<<16>>16}function er(bt){return Math.floor(Math.LN2*this.DB/Math.log(bt))}function Wr(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function Lr(bt){if(bt==null&&(bt=10),this.signum()==0||bt<2||bt>36)return"0";var Rt=this.chunkSize(bt),Mt=Math.pow(bt,Rt),ge=at(Mt),Me=g(),Ye=g(),ir="";for(this.divRemTo(ge,Me,Ye);Me.signum()>0;)ir=(Mt+Ye.intValue()).toString(bt).substr(1)+ir,Me.divRemTo(ge,Me,Ye);return Ye.intValue().toString(bt)+ir}function Sr(bt,Rt){this.fromInt(0),Rt==null&&(Rt=10);for(var Mt=this.chunkSize(Rt),ge=Math.pow(Rt,Mt),Me=!1,Ye=0,ir=0,cr=0;cr<bt.length;++cr){var nn=J(bt,cr);if(nn<0){bt.charAt(cr)=="-"&&this.signum()==0&&(Me=!0);continue}ir=Rt*ir+nn,++Ye>=Mt&&(this.dMultiply(ge),this.dAddOffset(ir,0),Ye=0,ir=0)}Ye>0&&(this.dMultiply(Math.pow(Rt,Ye)),this.dAddOffset(ir,0)),Me&&p.ZERO.subTo(this,this)}function L(bt,Rt,Mt){if(typeof Rt=="number")if(bt<2)this.fromInt(1);else for(this.fromNumber(bt,Mt),this.testBit(bt-1)||this.bitwiseTo(p.ONE.shiftLeft(bt-1),Lt,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(Rt);)this.dAddOffset(2,0),this.bitLength()>bt&&this.subTo(p.ONE.shiftLeft(bt-1),this);else{var ge=new Array,Me=bt&7;ge.length=(bt>>3)+1,Rt.nextBytes(ge),Me>0?ge[0]&=(1<<Me)-1:ge[0]=0,this.fromString(ge,256)}}function f(){var bt=this.t,Rt=new Array;Rt[0]=this.s;var Mt=this.DB-bt*this.DB%8,ge,Me=0;if(bt-- >0)for(Mt<this.DB&&(ge=this[bt]>>Mt)!=(this.s&this.DM)>>Mt&&(Rt[Me++]=ge|this.s<<this.DB-Mt);bt>=0;)Mt<8?(ge=(this[bt]&(1<<Mt)-1)<<8-Mt,ge|=this[--bt]>>(Mt+=this.DB-8)):(ge=this[bt]>>(Mt-=8)&255,Mt<=0&&(Mt+=this.DB,--bt)),ge&128&&(ge|=-256),Me==0&&(this.s&128)!=(ge&128)&&++Me,(Me>0||ge!=this.s)&&(Rt[Me++]=ge);return Rt}function S(bt){return this.compareTo(bt)==0}function W(bt){return this.compareTo(bt)<0?this:bt}function Bt(bt){return this.compareTo(bt)>0?this:bt}function Nt(bt,Rt,Mt){var ge,Me,Ye=Math.min(bt.t,this.t);for(ge=0;ge<Ye;++ge)Mt[ge]=Rt(this[ge],bt[ge]);if(bt.t<this.t){for(Me=bt.s&this.DM,ge=Ye;ge<this.t;++ge)Mt[ge]=Rt(this[ge],Me);Mt.t=this.t}else{for(Me=this.s&this.DM,ge=Ye;ge<bt.t;++ge)Mt[ge]=Rt(Me,bt[ge]);Mt.t=bt.t}Mt.s=Rt(this.s,bt.s),Mt.clamp()}function nt(bt,Rt){return bt&Rt}function zt(bt){var Rt=g();return this.bitwiseTo(bt,nt,Rt),Rt}function Lt(bt,Rt){return bt|Rt}function Be(bt){var Rt=g();return this.bitwiseTo(bt,Lt,Rt),Rt}function _t(bt,Rt){return bt^Rt}function gt(bt){var Rt=g();return this.bitwiseTo(bt,_t,Rt),Rt}function rt(bt,Rt){return bt&~Rt}function F(bt){var Rt=g();return this.bitwiseTo(bt,rt,Rt),Rt}function st(){for(var bt=g(),Rt=0;Rt<this.t;++Rt)bt[Rt]=this.DM&~this[Rt];return bt.t=this.t,bt.s=~this.s,bt}function wt(bt){var Rt=g();return bt<0?this.rShiftTo(-bt,Rt):this.lShiftTo(bt,Rt),Rt}function Ct(bt){var Rt=g();return bt<0?this.lShiftTo(-bt,Rt):this.rShiftTo(bt,Rt),Rt}function Ut(bt){if(bt==0)return-1;var Rt=0;return bt&65535||(bt>>=16,Rt+=16),bt&255||(bt>>=8,Rt+=8),bt&15||(bt>>=4,Rt+=4),bt&3||(bt>>=2,Rt+=2),bt&1||++Rt,Rt}function Wt(){for(var bt=0;bt<this.t;++bt)if(this[bt]!=0)return bt*this.DB+Ut(this[bt]);return this.s<0?this.t*this.DB:-1}function xe(bt){for(var Rt=0;bt!=0;)bt&=bt-1,++Rt;return Rt}function te(){for(var bt=0,Rt=this.s&this.DM,Mt=0;Mt<this.t;++Mt)bt+=xe(this[Mt]^Rt);return bt}function ve(bt){var Rt=Math.floor(bt/this.DB);return Rt>=this.t?this.s!=0:(this[Rt]&1<<bt%this.DB)!=0}function Re(bt,Rt){var Mt=p.ONE.shiftLeft(bt);return this.bitwiseTo(Mt,Rt,Mt),Mt}function sr(bt){return this.changeBit(bt,Lt)}function O(bt){return this.changeBit(bt,rt)}function le(bt){return this.changeBit(bt,_t)}function Kt(bt,Rt){for(var Mt=0,ge=0,Me=Math.min(bt.t,this.t);Mt<Me;)ge+=this[Mt]+bt[Mt],Rt[Mt++]=ge&this.DM,ge>>=this.DB;if(bt.t<this.t){for(ge+=bt.s;Mt<this.t;)ge+=this[Mt],Rt[Mt++]=ge&this.DM,ge>>=this.DB;ge+=this.s}else{for(ge+=this.s;Mt<bt.t;)ge+=bt[Mt],Rt[Mt++]=ge&this.DM,ge>>=this.DB;ge+=bt.s}Rt.s=ge<0?-1:0,ge>0?Rt[Mt++]=ge:ge<-1&&(Rt[Mt++]=this.DV+ge),Rt.t=Mt,Rt.clamp()}function he(bt){var Rt=g();return this.addTo(bt,Rt),Rt}function kt(bt){var Rt=g();return this.subTo(bt,Rt),Rt}function ne(bt){var Rt=g();return this.multiplyTo(bt,Rt),Rt}function Oe(){var bt=g();return this.squareTo(bt),bt}function _e(bt){var Rt=g();return this.divRemTo(bt,Rt,null),Rt}function Te(bt){var Rt=g();return this.divRemTo(bt,null,Rt),Rt}function Ue(bt){var Rt=g(),Mt=g();return this.divRemTo(bt,Rt,Mt),new Array(Rt,Mt)}function tr(bt){this[this.t]=this.am(0,bt-1,this,0,0,this.t),++this.t,this.clamp()}function lr(bt,Rt){if(bt!=0){for(;this.t<=Rt;)this[this.t++]=0;for(this[Rt]+=bt;this[Rt]>=this.DV;)this[Rt]-=this.DV,++Rt>=this.t&&(this[this.t++]=0),++this[Rt]}}function ar(){}function Ar(bt){return bt}function jr(bt,Rt,Mt){bt.multiplyTo(Rt,Mt)}function ln(bt,Rt){bt.squareTo(Rt)}ar.prototype.convert=Ar,ar.prototype.revert=Ar,ar.prototype.mulTo=jr,ar.prototype.sqrTo=ln;function cn(bt){return this.exp(bt,new ar)}function Mr(bt,Rt,Mt){var ge=Math.min(this.t+bt.t,Rt);for(Mt.s=0,Mt.t=ge;ge>0;)Mt[--ge]=0;var Me;for(Me=Mt.t-this.t;ge<Me;++ge)Mt[ge+this.t]=this.am(0,bt[ge],Mt,ge,0,this.t);for(Me=Math.min(bt.t,Rt);ge<Me;++ge)this.am(0,bt[ge],Mt,ge,0,Rt-ge);Mt.clamp()}function mr(bt,Rt,Mt){--Rt;var ge=Mt.t=this.t+bt.t-Rt;for(Mt.s=0;--ge>=0;)Mt[ge]=0;for(ge=Math.max(Rt-this.t,0);ge<bt.t;++ge)Mt[this.t+ge-Rt]=this.am(Rt-ge,bt[ge],Mt,0,0,this.t+ge-Rt);Mt.clamp(),Mt.drShiftTo(1,Mt)}function Nr(bt){this.r2=g(),this.q3=g(),p.ONE.dlShiftTo(2*bt.t,this.r2),this.mu=this.r2.divide(bt),this.m=bt}function gn(bt){if(bt.s<0||bt.t>2*this.m.t)return bt.mod(this.m);if(bt.compareTo(this.m)<0)return bt;var Rt=g();return bt.copyTo(Rt),this.reduce(Rt),Rt}function Kn(bt){return bt}function tn(bt){for(bt.drShiftTo(this.m.t-1,this.r2),bt.t>this.m.t+1&&(bt.t=this.m.t+1,bt.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);bt.compareTo(this.r2)<0;)bt.dAddOffset(1,this.m.t+1);for(bt.subTo(this.r2,bt);bt.compareTo(this.m)>=0;)bt.subTo(this.m,bt)}function Wn(bt,Rt){bt.squareTo(Rt),this.reduce(Rt)}function Br(bt,Rt,Mt){bt.multiplyTo(Rt,Mt),this.reduce(Mt)}Nr.prototype.convert=gn,Nr.prototype.revert=Kn,Nr.prototype.reduce=tn,Nr.prototype.mulTo=Br,Nr.prototype.sqrTo=Wn;function bn(bt,Rt){var Mt=bt.bitLength(),ge,Me=at(1),Ye;if(Mt<=0)return Me;Mt<18?ge=1:Mt<48?ge=3:Mt<144?ge=4:Mt<768?ge=5:ge=6,Mt<8?Ye=new Ie(Rt):Rt.isEven()?Ye=new Nr(Rt):Ye=new Ze(Rt);var ir=new Array,cr=3,nn=ge-1,en=(1<<ge)-1;if(ir[1]=Ye.convert(this),ge>1){var Er=g();for(Ye.sqrTo(ir[1],Er);cr<=en;)ir[cr]=g(),Ye.mulTo(Er,ir[cr-2],ir[cr]),cr+=2}var hs=bt.t-1,Ps,Ri=!0,ws=g(),ds;for(Mt=yt(bt[hs])-1;hs>=0;){for(Mt>=nn?Ps=bt[hs]>>Mt-nn&en:(Ps=(bt[hs]&(1<<Mt+1)-1)<<nn-Mt,hs>0&&(Ps|=bt[hs-1]>>this.DB+Mt-nn)),cr=ge;!(Ps&1);)Ps>>=1,--cr;if((Mt-=cr)<0&&(Mt+=this.DB,--hs),Ri)ir[Ps].copyTo(Me),Ri=!1;else{for(;cr>1;)Ye.sqrTo(Me,ws),Ye.sqrTo(ws,Me),cr-=2;cr>0?Ye.sqrTo(Me,ws):(ds=Me,Me=ws,ws=ds),Ye.mulTo(ws,ir[Ps],Me)}for(;hs>=0&&!(bt[hs]&1<<Mt);)Ye.sqrTo(Me,ws),ds=Me,Me=ws,ws=ds,--Mt<0&&(Mt=this.DB-1,--hs)}return Ye.revert(Me)}function as(bt){var Rt=this.s<0?this.negate():this.clone(),Mt=bt.s<0?bt.negate():bt.clone();if(Rt.compareTo(Mt)<0){var ge=Rt;Rt=Mt,Mt=ge}var Me=Rt.getLowestSetBit(),Ye=Mt.getLowestSetBit();if(Ye<0)return Rt;for(Me<Ye&&(Ye=Me),Ye>0&&(Rt.rShiftTo(Ye,Rt),Mt.rShiftTo(Ye,Mt));Rt.signum()>0;)(Me=Rt.getLowestSetBit())>0&&Rt.rShiftTo(Me,Rt),(Me=Mt.getLowestSetBit())>0&&Mt.rShiftTo(Me,Mt),Rt.compareTo(Mt)>=0?(Rt.subTo(Mt,Rt),Rt.rShiftTo(1,Rt)):(Mt.subTo(Rt,Mt),Mt.rShiftTo(1,Mt));return Ye>0&&Mt.lShiftTo(Ye,Mt),Mt}function _n(bt){if(bt<=0)return 0;var Rt=this.DV%bt,Mt=this.s<0?bt-1:0;if(this.t>0)if(Rt==0)Mt=this[0]%bt;else for(var ge=this.t-1;ge>=0;--ge)Mt=(Rt*Mt+this[ge])%bt;return Mt}function $s(bt){var Rt=bt.isEven();if(this.isEven()&&Rt||bt.signum()==0)return p.ZERO;for(var Mt=bt.clone(),ge=this.clone(),Me=at(1),Ye=at(0),ir=at(0),cr=at(1);Mt.signum()!=0;){for(;Mt.isEven();)Mt.rShiftTo(1,Mt),Rt?((!Me.isEven()||!Ye.isEven())&&(Me.addTo(this,Me),Ye.subTo(bt,Ye)),Me.rShiftTo(1,Me)):Ye.isEven()||Ye.subTo(bt,Ye),Ye.rShiftTo(1,Ye);for(;ge.isEven();)ge.rShiftTo(1,ge),Rt?((!ir.isEven()||!cr.isEven())&&(ir.addTo(this,ir),cr.subTo(bt,cr)),ir.rShiftTo(1,ir)):cr.isEven()||cr.subTo(bt,cr),cr.rShiftTo(1,cr);Mt.compareTo(ge)>=0?(Mt.subTo(ge,Mt),Rt&&Me.subTo(ir,Me),Ye.subTo(cr,Ye)):(ge.subTo(Mt,ge),Rt&&ir.subTo(Me,ir),cr.subTo(Ye,cr))}if(ge.compareTo(p.ONE)!=0)return p.ZERO;if(cr.compareTo(bt)>=0)return cr.subtract(bt);if(cr.signum()<0)cr.addTo(bt,cr);else return cr;return cr.signum()<0?cr.add(bt):cr}var Zr=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],_s=(1<<26)/Zr[Zr.length-1];function ks(bt){var Rt,Mt=this.abs();if(Mt.t==1&&Mt[0]<=Zr[Zr.length-1]){for(Rt=0;Rt<Zr.length;++Rt)if(Mt[0]==Zr[Rt])return!0;return!1}if(Mt.isEven())return!1;for(Rt=1;Rt<Zr.length;){for(var ge=Zr[Rt],Me=Rt+1;Me<Zr.length&&ge<_s;)ge*=Zr[Me++];for(ge=Mt.modInt(ge);Rt<Me;)if(ge%Zr[Rt++]==0)return!1}return Mt.millerRabin(bt)}function Xs(bt){var Rt=this.subtract(p.ONE),Mt=Rt.getLowestSetBit();if(Mt<=0)return!1;var ge=Rt.shiftRight(Mt);bt=bt+1>>1,bt>Zr.length&&(bt=Zr.length);for(var Me=g(),Ye=0;Ye<bt;++Ye){Me.fromInt(Zr[Math.floor(Math.random()*Zr.length)]);var ir=Me.modPow(ge,this);if(ir.compareTo(p.ONE)!=0&&ir.compareTo(Rt)!=0){for(var cr=1;cr++<Mt&&ir.compareTo(Rt)!=0;)if(ir=ir.modPowInt(2,this),ir.compareTo(p.ONE)==0)return!1;if(ir.compareTo(Rt)!=0)return!1}}return!0}p.prototype.chunkSize=er,p.prototype.toRadix=Lr,p.prototype.fromRadix=Sr,p.prototype.fromNumber=L,p.prototype.bitwiseTo=Nt,p.prototype.changeBit=Re,p.prototype.addTo=Kt,p.prototype.dMultiply=tr,p.prototype.dAddOffset=lr,p.prototype.multiplyLowerTo=Mr,p.prototype.multiplyUpperTo=mr,p.prototype.modInt=_n,p.prototype.millerRabin=Xs,p.prototype.clone=rr,p.prototype.intValue=fr,p.prototype.byteValue=yr,p.prototype.shortValue=ur,p.prototype.signum=Wr,p.prototype.toByteArray=f,p.prototype.equals=S,p.prototype.min=W,p.prototype.max=Bt,p.prototype.and=zt,p.prototype.or=Be,p.prototype.xor=gt,p.prototype.andNot=F,p.prototype.not=st,p.prototype.shiftLeft=wt,p.prototype.shiftRight=Ct,p.prototype.getLowestSetBit=Wt,p.prototype.bitCount=te,p.prototype.testBit=ve,p.prototype.setBit=sr,p.prototype.clearBit=O,p.prototype.flipBit=le,p.prototype.add=he,p.prototype.subtract=kt,p.prototype.multiply=ne,p.prototype.divide=_e,p.prototype.remainder=Te,p.prototype.divideAndRemainder=Ue,p.prototype.modPow=bn,p.prototype.modInverse=$s,p.prototype.pow=cn,p.prototype.gcd=as,p.prototype.isProbablePrime=ks,p.prototype.square=Oe,p.prototype.Barrett=Nr;var qs,os,In;function Si(bt){os[In++]^=bt&255,os[In++]^=bt>>8&255,os[In++]^=bt>>16&255,os[In++]^=bt>>24&255,In>=Cn&&(In-=Cn)}function Xn(){Si(new Date().getTime())}if(os==null){os=new Array,In=0;var ls;if(typeof window<"u"&&window.crypto){if(window.crypto.getRandomValues){var Vi=new Uint8Array(32);for(window.crypto.getRandomValues(Vi),ls=0;ls<32;++ls)os[In++]=Vi[ls]}else if(navigator.appName=="Netscape"&&navigator.appVersion<"5"){var Ki=window.crypto.random(32);for(ls=0;ls<Ki.length;++ls)os[In++]=Ki.charCodeAt(ls)&255}}for(;In<Cn;)ls=Math.floor(65536*Math.random()),os[In++]=ls>>>8,os[In++]=ls&255;In=0,Xn()}function Bi(){if(qs==null){for(Xn(),qs=ns(),qs.init(os),In=0;In<os.length;++In)os[In]=0;In=0}return qs.next()}function pu(bt){var Rt;for(Rt=0;Rt<bt.length;++Rt)bt[Rt]=Bi()}function Ei(){}Ei.prototype.nextBytes=pu;function zi(){this.i=0,this.j=0,this.S=new Array}function Ii(bt){var Rt,Mt,ge;for(Rt=0;Rt<256;++Rt)this.S[Rt]=Rt;for(Mt=0,Rt=0;Rt<256;++Rt)Mt=Mt+this.S[Rt]+bt[Rt%bt.length]&255,ge=this.S[Rt],this.S[Rt]=this.S[Mt],this.S[Mt]=ge;this.i=0,this.j=0}function oi(){var bt;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,bt=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=bt,this.S[bt+this.S[this.i]&255]}zi.prototype.init=Ii,zi.prototype.next=oi;function ns(){return new zi}var Cn=256;typeof t<"u"?t=e.exports={default:p,BigInteger:p,SecureRandom:Ei}:this.jsbn={BigInteger:p,SecureRandom:Ei}}).call(t)}),Bf=ce(t=>{(function(){"use strict";var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function n(y){return s(g(y),arguments)}function u(y,E){return n.apply(null,[y].concat(E||[]))}function s(y,E){var m=1,C=y.length,a,H="",X,w,j,tt,J,N,Q,at;for(X=0;X<C;X++)if(typeof y[X]=="string")H+=y[X];else if(typeof y[X]=="object"){if(j=y[X],j.keys)for(a=E[m],w=0;w<j.keys.length;w++){if(a==null)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',j.keys[w],j.keys[w-1]));a=a[j.keys[w]]}else j.param_no?a=E[j.param_no]:a=E[m++];if(e.not_type.test(j.type)&&e.not_primitive.test(j.type)&&a instanceof Function&&(a=a()),e.numeric_arg.test(j.type)&&typeof a!="number"&&isNaN(a))throw new TypeError(n("[sprintf] expecting number but found %T",a));switch(e.number.test(j.type)&&(Q=a>=0),j.type){case"b":a=parseInt(a,10).toString(2);break;case"c":a=String.fromCharCode(parseInt(a,10));break;case"d":case"i":a=parseInt(a,10);break;case"j":a=JSON.stringify(a,null,j.width?parseInt(j.width):0);break;case"e":a=j.precision?parseFloat(a).toExponential(j.precision):parseFloat(a).toExponential();break;case"f":a=j.precision?parseFloat(a).toFixed(j.precision):parseFloat(a);break;case"g":a=j.precision?String(Number(a.toPrecision(j.precision))):parseFloat(a);break;case"o":a=(parseInt(a,10)>>>0).toString(8);break;case"s":a=String(a),a=j.precision?a.substring(0,j.precision):a;break;case"t":a=String(!!a),a=j.precision?a.substring(0,j.precision):a;break;case"T":a=Object.prototype.toString.call(a).slice(8,-1).toLowerCase(),a=j.precision?a.substring(0,j.precision):a;break;case"u":a=parseInt(a,10)>>>0;break;case"v":a=a.valueOf(),a=j.precision?a.substring(0,j.precision):a;break;case"x":a=(parseInt(a,10)>>>0).toString(16);break;case"X":a=(parseInt(a,10)>>>0).toString(16).toUpperCase();break}e.json.test(j.type)?H+=a:(e.number.test(j.type)&&(!Q||j.sign)?(at=Q?"+":"-",a=a.toString().replace(e.sign,"")):at="",J=j.pad_char?j.pad_char==="0"?"0":j.pad_char.charAt(1):" ",N=j.width-(at+a).length,tt=j.width&&N>0?J.repeat(N):"",H+=j.align?at+a+tt:J==="0"?at+tt+a:tt+at+a)}return H}var p=Object.create(null);function g(y){if(p[y])return p[y];for(var E=y,m,C=[],a=0;E;){if((m=e.text.exec(E))!==null)C.push(m[0]);else if((m=e.modulo.exec(E))!==null)C.push("%");else if((m=e.placeholder.exec(E))!==null){if(m[2]){a|=1;var H=[],X=m[2],w=[];if((w=e.key.exec(X))!==null)for(H.push(w[1]);(X=X.substring(w[0].length))!=="";)if((w=e.key_access.exec(X))!==null)H.push(w[1]);else if((w=e.index_access.exec(X))!==null)H.push(w[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");m[2]=H}else a|=2;if(a===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");C.push({placeholder:m[0],param_no:m[1],keys:m[2],sign:m[3],pad_char:m[4],align:m[5],width:m[6],precision:m[7],type:m[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");E=E.substring(m[0].length)}return p[y]=C}typeof t<"u"&&(t.sprintf=n,t.vsprintf=u),typeof window<"u"&&(window.sprintf=n,window.vsprintf=u,typeof define=="function"&&define.amd&&define(function(){return{sprintf:n,vsprintf:u}}))})()}),Sg=ce(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(C,a,H,X){X===void 0&&(X=H);var w=Object.getOwnPropertyDescriptor(a,H);(!w||("get"in w?!a.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return a[H]}}),Object.defineProperty(C,X,w)}:function(C,a,H,X){X===void 0&&(X=H),C[X]=a[H]}),n=t&&t.__setModuleDefault||(Object.create?function(C,a){Object.defineProperty(C,"default",{enumerable:!0,value:a})}:function(C,a){C.default=a}),u=t&&t.__importStar||function(C){if(C&&C.__esModule)return C;var a={};if(C!=null)for(var H in C)H!=="default"&&Object.prototype.hasOwnProperty.call(C,H)&&e(a,C,H);return n(a,C),a};Object.defineProperty(t,"__esModule",{value:!0}),t.Address4=void 0;var s=u(bg()),p=u(yg()),g=Wd(),y=Cg(),E=Bf(),m=class _i{constructor(a){this.groups=p.GROUPS,this.parsedAddress=[],this.parsedSubnet="",this.subnet="/32",this.subnetMask=32,this.v4=!0,this.isCorrect=s.isCorrect(p.BITS),this.isInSubnet=s.isInSubnet,this.address=a;let H=p.RE_SUBNET_STRING.exec(a);if(H){if(this.parsedSubnet=H[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,this.subnetMask<0||this.subnetMask>p.BITS)throw new g.AddressError("Invalid subnet mask.");a=a.replace(p.RE_SUBNET_STRING,"")}this.addressMinusSuffix=a,this.parsedAddress=this.parse(a)}static isValid(a){try{return new _i(a),!0}catch{return!1}}parse(a){let H=a.split(".");if(!a.match(p.RE_ADDRESS))throw new g.AddressError("Invalid IPv4 address.");return H}correctForm(){return this.parsedAddress.map(a=>parseInt(a,10)).join(".")}static fromHex(a){let H=a.replace(/:/g,"").padStart(8,"0"),X=[],w;for(w=0;w<8;w+=2){let j=H.slice(w,w+2);X.push(parseInt(j,16))}return new _i(X.join("."))}static fromInteger(a){return _i.fromHex(a.toString(16))}static fromArpa(a){let H=a.replace(/(\.in-addr\.arpa)?\.$/,"").split(".").reverse().join(".");return new _i(H)}toHex(){return this.parsedAddress.map(a=>(0,E.sprintf)("%02x",parseInt(a,10))).join(":")}toArray(){return this.parsedAddress.map(a=>parseInt(a,10))}toGroup6(){let a=[],H;for(H=0;H<p.GROUPS;H+=2){let X=(0,E.sprintf)("%02x%02x",parseInt(this.parsedAddress[H],10),parseInt(this.parsedAddress[H+1],10));a.push((0,E.sprintf)("%x",parseInt(X,16)))}return a.join(":")}bigInteger(){return new y.BigInteger(this.parsedAddress.map(a=>(0,E.sprintf)("%02x",parseInt(a,10))).join(""),16)}_startAddress(){return new y.BigInteger(this.mask()+"0".repeat(p.BITS-this.subnetMask),2)}startAddress(){return _i.fromBigInteger(this._startAddress())}startAddressExclusive(){let a=new y.BigInteger("1");return _i.fromBigInteger(this._startAddress().add(a))}_endAddress(){return new y.BigInteger(this.mask()+"1".repeat(p.BITS-this.subnetMask),2)}endAddress(){return _i.fromBigInteger(this._endAddress())}endAddressExclusive(){let a=new y.BigInteger("1");return _i.fromBigInteger(this._endAddress().subtract(a))}static fromBigInteger(a){return _i.fromInteger(parseInt(a.toString(),10))}mask(a){return a===void 0&&(a=this.subnetMask),this.getBitsBase2(0,a)}getBitsBase2(a,H){return this.binaryZeroPad().slice(a,H)}reverseForm(a){a||(a={});let H=this.correctForm().split(".").reverse().join(".");return a.omitSuffix?H:(0,E.sprintf)("%s.in-addr.arpa.",H)}isMulticast(){return this.isInSubnet(new _i("224.0.0.0/4"))}binaryZeroPad(){return this.bigInteger().toString(2).padStart(p.BITS,"0")}groupForV6(){let a=this.parsedAddress;return this.address.replace(p.RE_ADDRESS,(0,E.sprintf)('<span class="hover-group group-v4 group-6">%s</span>.<span class="hover-group group-v4 group-7">%s</span>',a.slice(0,2).join("."),a.slice(2,4).join(".")))}};t.Address4=m}),Fg=ce(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RE_URL_WITH_PORT=t.RE_URL=t.RE_ZONE_STRING=t.RE_SUBNET_STRING=t.RE_BAD_ADDRESS=t.RE_BAD_CHARACTERS=t.TYPES=t.SCOPES=t.GROUPS=t.BITS=void 0,t.BITS=128,t.GROUPS=8,t.SCOPES={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"},t.TYPES={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"},t.RE_BAD_CHARACTERS=/([^0-9a-f:/%])/gi,t.RE_BAD_ADDRESS=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi,t.RE_SUBNET_STRING=/\/\d{1,3}(?=%|$)/,t.RE_ZONE_STRING=/%.*$/,t.RE_URL=new RegExp(/^\[{0,1}([0-9a-f:]+)\]{0,1}/),t.RE_URL_WITH_PORT=new RegExp(/\[([0-9a-f:]+)\]:([0-9]{1,5})/)}),Ig=ce(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.simpleGroup=t.spanLeadingZeroes=t.spanAll=t.spanAllZeroes=void 0;var e=Bf();function n(y){return y.replace(/(0+)/g,'<span class="zero">$1</span>')}t.spanAllZeroes=n;function u(y,E=0){return y.split("").map((m,C)=>(0,e.sprintf)('<span class="digit value-%s position-%d">%s</span>',m,C+E,n(m))).join("")}t.spanAll=u;function s(y){return y.replace(/^(0+)/,'<span class="zero">$1</span>')}function p(y){return y.split(":").map(E=>s(E)).join(":")}t.spanLeadingZeroes=p;function g(y,E=0){return y.split(":").map((m,C)=>/group-v4/.test(m)?m:(0,e.sprintf)('<span class="hover-group group-%d">%s</span>',C+E,s(m)))}t.simpleGroup=g}),eb=ce(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(C,a,H,X){X===void 0&&(X=H);var w=Object.getOwnPropertyDescriptor(a,H);(!w||("get"in w?!a.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return a[H]}}),Object.defineProperty(C,X,w)}:function(C,a,H,X){X===void 0&&(X=H),C[X]=a[H]}),n=t&&t.__setModuleDefault||(Object.create?function(C,a){Object.defineProperty(C,"default",{enumerable:!0,value:a})}:function(C,a){C.default=a}),u=t&&t.__importStar||function(C){if(C&&C.__esModule)return C;var a={};if(C!=null)for(var H in C)H!=="default"&&Object.prototype.hasOwnProperty.call(C,H)&&e(a,C,H);return n(a,C),a};Object.defineProperty(t,"__esModule",{value:!0}),t.possibleElisions=t.simpleRegularExpression=t.ADDRESS_BOUNDARY=t.padGroup=t.groupPossibilities=void 0;var s=u(Fg()),p=Bf();function g(C){return(0,p.sprintf)("(%s)",C.join("|"))}t.groupPossibilities=g;function y(C){return C.length<4?(0,p.sprintf)("0{0,%d}%s",4-C.length,C):C}t.padGroup=y,t.ADDRESS_BOUNDARY="[^A-Fa-f0-9:]";function E(C){let a=[];C.forEach((X,w)=>{parseInt(X,16)===0&&a.push(w)});let H=a.map(X=>C.map((w,j)=>{if(j===X){let tt=j===0||j===s.GROUPS-1?":":"";return g([y(w),tt])}return y(w)}).join(":"));return H.push(C.map(y).join(":")),g(H)}t.simpleRegularExpression=E;function m(C,a,H){let X=a?"":":",w=H?"":":",j=[];!a&&!H&&j.push("::"),a&&H&&j.push(""),(H&&!a||!H&&a)&&j.push(":"),j.push((0,p.sprintf)("%s(:0{1,4}){1,%d}",X,C-1)),j.push((0,p.sprintf)("(0{1,4}:){1,%d}%s",C-1,w)),j.push((0,p.sprintf)("(0{1,4}:){%d}0{1,4}",C-1));for(let tt=1;tt<C-1;tt++)for(let J=1;J<C-tt;J++)j.push((0,p.sprintf)("(0{1,4}:){%d}:(0{1,4}:){%d}0{1,4}",J,C-J-tt-1));return g(j)}t.possibleElisions=m}),ib=ce(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(at,q,U,V){V===void 0&&(V=U);var lt=Object.getOwnPropertyDescriptor(q,U);(!lt||("get"in lt?!q.__esModule:lt.writable||lt.configurable))&&(lt={enumerable:!0,get:function(){return q[U]}}),Object.defineProperty(at,V,lt)}:function(at,q,U,V){V===void 0&&(V=U),at[V]=q[U]}),n=t&&t.__setModuleDefault||(Object.create?function(at,q){Object.defineProperty(at,"default",{enumerable:!0,value:q})}:function(at,q){at.default=q}),u=t&&t.__importStar||function(at){if(at&&at.__esModule)return at;var q={};if(at!=null)for(var U in at)U!=="default"&&Object.prototype.hasOwnProperty.call(at,U)&&e(q,at,U);return n(q,at),q};Object.defineProperty(t,"__esModule",{value:!0}),t.Address6=void 0;var s=u(bg()),p=u(yg()),g=u(Fg()),y=u(Ig()),E=Sg(),m=eb(),C=Wd(),a=Cg(),H=Bf();function X(at){if(!at)throw new Error("Assertion failed.")}function w(at){let q=/(\d+)(\d{3})/;for(;q.test(at);)at=at.replace(q,"$1,$2");return at}function j(at){return at=at.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2'),at=at.replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2'),at}function tt(at,q){let U=[],V=[],lt;for(lt=0;lt<at.length;lt++)lt<q[0]?U.push(at[lt]):lt>q[1]&&V.push(at[lt]);return U.concat(["compact"]).concat(V)}function J(at){return(0,H.sprintf)("%04x",parseInt(at,16))}function N(at){return at&255}var Q=class xs{constructor(q,U){this.addressMinusSuffix="",this.parsedSubnet="",this.subnet="/128",this.subnetMask=128,this.v4=!1,this.zone="",this.isInSubnet=s.isInSubnet,this.isCorrect=s.isCorrect(g.BITS),U===void 0?this.groups=g.GROUPS:this.groups=U,this.address=q;let V=g.RE_SUBNET_STRING.exec(q);if(V){if(this.parsedSubnet=V[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,Number.isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>g.BITS)throw new C.AddressError("Invalid subnet mask.");q=q.replace(g.RE_SUBNET_STRING,"")}else if(/\//.test(q))throw new C.AddressError("Invalid subnet mask.");let lt=g.RE_ZONE_STRING.exec(q);lt&&(this.zone=lt[0],q=q.replace(g.RE_ZONE_STRING,"")),this.addressMinusSuffix=q,this.parsedAddress=this.parse(this.addressMinusSuffix)}static isValid(q){try{return new xs(q),!0}catch{return!1}}static fromBigInteger(q){let U=q.toString(16).padStart(32,"0"),V=[],lt;for(lt=0;lt<g.GROUPS;lt++)V.push(U.slice(lt*4,(lt+1)*4));return new xs(V.join(":"))}static fromURL(q){let U,V=null,lt;if(q.indexOf("[")!==-1&&q.indexOf("]:")!==-1){if(lt=g.RE_URL_WITH_PORT.exec(q),lt===null)return{error:"failed to parse address with port",address:null,port:null};U=lt[1],V=lt[2]}else if(q.indexOf("/")!==-1){if(q=q.replace(/^[a-z0-9]+:\/\//,""),lt=g.RE_URL.exec(q),lt===null)return{error:"failed to parse address from URL",address:null,port:null};U=lt[1]}else U=q;return V?(V=parseInt(V,10),(V<0||V>65536)&&(V=null)):V=null,{address:new xs(U),port:V}}static fromAddress4(q){let U=new E.Address4(q),V=g.BITS-(p.BITS-U.subnetMask);return new xs(`::ffff:${U.correctForm()}/${V}`)}static fromArpa(q){let U=q.replace(/(\.ip6\.arpa)?\.$/,""),V=7;if(U.length!==63)throw new C.AddressError("Invalid 'ip6.arpa' form.");let lt=U.split(".").reverse();for(let It=V;It>0;It--){let Ot=It*4;lt.splice(Ot,0,":")}return U=lt.join(""),new xs(U)}microsoftTranscription(){return(0,H.sprintf)("%s.ipv6-literal.net",this.correctForm().replace(/:/g,"-"))}mask(q=this.subnetMask){return this.getBitsBase2(0,q)}possibleSubnets(q=128){let U=g.BITS-this.subnetMask,V=Math.abs(q-g.BITS),lt=U-V;return lt<0?"0":w(new a.BigInteger("2",10).pow(lt).toString(10))}_startAddress(){return new a.BigInteger(this.mask()+"0".repeat(g.BITS-this.subnetMask),2)}startAddress(){return xs.fromBigInteger(this._startAddress())}startAddressExclusive(){let q=new a.BigInteger("1");return xs.fromBigInteger(this._startAddress().add(q))}_endAddress(){return new a.BigInteger(this.mask()+"1".repeat(g.BITS-this.subnetMask),2)}endAddress(){return xs.fromBigInteger(this._endAddress())}endAddressExclusive(){let q=new a.BigInteger("1");return xs.fromBigInteger(this._endAddress().subtract(q))}getScope(){let q=g.SCOPES[this.getBits(12,16).intValue()];return this.getType()==="Global unicast"&&q!=="Link local"&&(q="Global"),q||"Unknown"}getType(){for(let q of Object.keys(g.TYPES))if(this.isInSubnet(new xs(q)))return g.TYPES[q];return"Global unicast"}getBits(q,U){return new a.BigInteger(this.getBitsBase2(q,U),2)}getBitsBase2(q,U){return this.binaryZeroPad().slice(q,U)}getBitsBase16(q,U){let V=U-q;if(V%4!==0)throw new Error("Length of bits to retrieve must be divisible by four");return this.getBits(q,U).toString(16).padStart(V/4,"0")}getBitsPastSubnet(){return this.getBitsBase2(this.subnetMask,g.BITS)}reverseForm(q){q||(q={});let U=Math.floor(this.subnetMask/4),V=this.canonicalForm().replace(/:/g,"").split("").slice(0,U).reverse().join(".");return U>0?q.omitSuffix?V:(0,H.sprintf)("%s.ip6.arpa.",V):q.omitSuffix?"":"ip6.arpa."}correctForm(){let q,U=[],V=0,lt=[];for(q=0;q<this.parsedAddress.length;q++){let yt=parseInt(this.parsedAddress[q],16);yt===0&&V++,yt!==0&&V>0&&(V>1&&lt.push([q-V,q-1]),V=0)}V>1&&lt.push([this.parsedAddress.length-V,this.parsedAddress.length-1]);let It=lt.map(yt=>yt[1]-yt[0]+1);if(lt.length>0){let yt=It.indexOf(Math.max(...It));U=tt(this.parsedAddress,lt[yt])}else U=this.parsedAddress;for(q=0;q<U.length;q++)U[q]!=="compact"&&(U[q]=parseInt(U[q],16).toString(16));let Ot=U.join(":");return Ot=Ot.replace(/^compact$/,"::"),Ot=Ot.replace(/^compact|compact$/,":"),Ot=Ot.replace(/compact/,""),Ot}binaryZeroPad(){return this.bigInteger().toString(2).padStart(g.BITS,"0")}parse4in6(q){let U=q.split(":"),V=U.slice(-1)[0].match(p.RE_ADDRESS);if(V){this.parsedAddress4=V[0],this.address4=new E.Address4(this.parsedAddress4);for(let lt=0;lt<this.address4.groups;lt++)if(/^0[0-9]+/.test(this.address4.parsedAddress[lt]))throw new C.AddressError("IPv4 addresses can't have leading zeroes.",q.replace(p.RE_ADDRESS,this.address4.parsedAddress.map(j).join(".")));this.v4=!0,U[U.length-1]=this.address4.toGroup6(),q=U.join(":")}return q}parse(q){q=this.parse4in6(q);let U=q.match(g.RE_BAD_CHARACTERS);if(U)throw new C.AddressError((0,H.sprintf)("Bad character%s detected in address: %s",U.length>1?"s":"",U.join("")),q.replace(g.RE_BAD_CHARACTERS,'<span class="parse-error">$1</span>'));let V=q.match(g.RE_BAD_ADDRESS);if(V)throw new C.AddressError((0,H.sprintf)("Address failed regex: %s",V.join("")),q.replace(g.RE_BAD_ADDRESS,'<span class="parse-error">$1</span>'));let lt=[],It=q.split("::");if(It.length===2){let Ot=It[0].split(":"),yt=It[1].split(":");Ot.length===1&&Ot[0]===""&&(Ot=[]),yt.length===1&&yt[0]===""&&(yt=[]);let Et=this.groups-(Ot.length+yt.length);if(!Et)throw new C.AddressError("Error parsing groups");this.elidedGroups=Et,this.elisionBegin=Ot.length,this.elisionEnd=Ot.length+this.elidedGroups,lt=lt.concat(Ot);for(let vt=0;vt<Et;vt++)lt.push("0");lt=lt.concat(yt)}else if(It.length===1)lt=q.split(":"),this.elidedGroups=0;else throw new C.AddressError("Too many :: groups found");if(lt=lt.map(Ot=>(0,H.sprintf)("%x",parseInt(Ot,16))),lt.length!==this.groups)throw new C.AddressError("Incorrect number of groups found");return lt}canonicalForm(){return this.parsedAddress.map(J).join(":")}decimal(){return this.parsedAddress.map(q=>(0,H.sprintf)("%05d",parseInt(q,16))).join(":")}bigInteger(){return new a.BigInteger(this.parsedAddress.map(J).join(""),16)}to4(){let q=this.binaryZeroPad().split("");return E.Address4.fromHex(new a.BigInteger(q.slice(96,128).join(""),2).toString(16))}to4in6(){let q=this.to4(),U=new xs(this.parsedAddress.slice(0,6).join(":"),6).correctForm(),V="";return/:$/.test(U)||(V=":"),U+V+q.address}inspectTeredo(){let q=this.getBitsBase16(0,32),U=this.getBits(80,96).xor(new a.BigInteger("ffff",16)).toString(),V=E.Address4.fromHex(this.getBitsBase16(32,64)),lt=E.Address4.fromHex(this.getBits(96,128).xor(new a.BigInteger("ffffffff",16)).toString(16)),It=this.getBits(64,80),Ot=this.getBitsBase2(64,80),yt=It.testBit(15),Et=It.testBit(14),vt=It.testBit(8),Yt=It.testBit(9),Xt=new a.BigInteger(Ot.slice(2,6)+Ot.slice(8,16),2).toString(10);return{prefix:(0,H.sprintf)("%s:%s",q.slice(0,4),q.slice(4,8)),server4:V.address,client4:lt.address,flags:Ot,coneNat:yt,microsoft:{reserved:Et,universalLocal:Yt,groupIndividual:vt,nonce:Xt},udpPort:U}}inspect6to4(){let q=this.getBitsBase16(0,16),U=E.Address4.fromHex(this.getBitsBase16(16,48));return{prefix:(0,H.sprintf)("%s",q.slice(0,4)),gateway:U.address}}to6to4(){if(!this.is4())return null;let q=["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":");return new xs(q)}toByteArray(){let q=this.bigInteger().toByteArray();return q.length===17&&q[0]===0?q.slice(1):q}toUnsignedByteArray(){return this.toByteArray().map(N)}static fromByteArray(q){return this.fromUnsignedByteArray(q.map(N))}static fromUnsignedByteArray(q){let U=new a.BigInteger("256",10),V=new a.BigInteger("0",10),lt=new a.BigInteger("1",10);for(let It=q.length-1;It>=0;It--)V=V.add(lt.multiply(new a.BigInteger(q[It].toString(10),10))),lt=lt.multiply(U);return xs.fromBigInteger(V)}isCanonical(){return this.addressMinusSuffix===this.canonicalForm()}isLinkLocal(){return this.getBitsBase2(0,64)==="1111111010000000000000000000000000000000000000000000000000000000"}isMulticast(){return this.getType()==="Multicast"}is4(){return this.v4}isTeredo(){return this.isInSubnet(new xs("2001::/32"))}is6to4(){return this.isInSubnet(new xs("2002::/16"))}isLoopback(){return this.getType()==="Loopback"}href(q){return q===void 0?q="":q=(0,H.sprintf)(":%s",q),(0,H.sprintf)("http://[%s]%s/",this.correctForm(),q)}link(q){q||(q={}),q.className===void 0&&(q.className=""),q.prefix===void 0&&(q.prefix="/#address="),q.v4===void 0&&(q.v4=!1);let U=this.correctForm;return q.v4&&(U=this.to4in6),q.className?(0,H.sprintf)('<a href="%1$s%2$s" class="%3$s">%2$s</a>',q.prefix,U.call(this),q.className):(0,H.sprintf)('<a href="%1$s%2$s">%2$s</a>',q.prefix,U.call(this))}group(){if(this.elidedGroups===0)return y.simpleGroup(this.address).join(":");X(typeof this.elidedGroups=="number"),X(typeof this.elisionBegin=="number");let q=[],[U,V]=this.address.split("::");U.length?q.push(...y.simpleGroup(U)):q.push("");let lt=["hover-group"];for(let It=this.elisionBegin;It<this.elisionBegin+this.elidedGroups;It++)lt.push((0,H.sprintf)("group-%d",It));return q.push((0,H.sprintf)('<span class="%s"></span>',lt.join(" "))),V.length?q.push(...y.simpleGroup(V,this.elisionEnd)):q.push(""),this.is4()&&(X(this.address4 instanceof E.Address4),q.pop(),q.push(this.address4.groupForV6())),q.join(":")}regularExpressionString(q=!1){let U=[],V=new xs(this.correctForm());if(V.elidedGroups===0)U.push((0,m.simpleRegularExpression)(V.parsedAddress));else if(V.elidedGroups===g.GROUPS)U.push((0,m.possibleElisions)(g.GROUPS));else{let lt=V.address.split("::");lt[0].length&&U.push((0,m.simpleRegularExpression)(lt[0].split(":"))),X(typeof V.elidedGroups=="number"),U.push((0,m.possibleElisions)(V.elidedGroups,lt[0].length!==0,lt[1].length!==0)),lt[1].length&&U.push((0,m.simpleRegularExpression)(lt[1].split(":"))),U=[U.join(":")]}return q||(U=["(?=^|",m.ADDRESS_BOUNDARY,"|[^\\w\\:])(",...U,")(?=[^\\w\\:]|",m.ADDRESS_BOUNDARY,"|$)"]),U.join("")}regularExpression(q=!1){return new RegExp(this.regularExpressionString(q),"i")}};t.Address6=Q}),sb=ce(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(E,m,C,a){a===void 0&&(a=C);var H=Object.getOwnPropertyDescriptor(m,C);(!H||("get"in H?!m.__esModule:H.writable||H.configurable))&&(H={enumerable:!0,get:function(){return m[C]}}),Object.defineProperty(E,a,H)}:function(E,m,C,a){a===void 0&&(a=C),E[a]=m[C]}),n=t&&t.__setModuleDefault||(Object.create?function(E,m){Object.defineProperty(E,"default",{enumerable:!0,value:m})}:function(E,m){E.default=m}),u=t&&t.__importStar||function(E){if(E&&E.__esModule)return E;var m={};if(E!=null)for(var C in E)C!=="default"&&Object.prototype.hasOwnProperty.call(E,C)&&e(m,E,C);return n(m,E),m};Object.defineProperty(t,"__esModule",{value:!0}),t.v6=t.AddressError=t.Address6=t.Address4=void 0;var s=Sg();Object.defineProperty(t,"Address4",{enumerable:!0,get:function(){return s.Address4}});var p=ib();Object.defineProperty(t,"Address6",{enumerable:!0,get:function(){return p.Address6}});var g=Wd();Object.defineProperty(t,"AddressError",{enumerable:!0,get:function(){return g.AddressError}});var y=u(Ig());t.v6={helpers:y}}),fb=ce(t=>{"use strict";t.byteLength=E,t.toByteArray=C,t.fromByteArray=X;var e=[],n=[],u=typeof Uint8Array<"u"?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(p=0,g=s.length;p<g;++p)e[p]=s[p],n[s.charCodeAt(p)]=p;var p,g;n[45]=62,n[95]=63;function y(w){var j=w.length;if(j%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var tt=w.indexOf("=");tt===-1&&(tt=j);var J=tt===j?0:4-tt%4;return[tt,J]}function E(w){var j=y(w),tt=j[0],J=j[1];return(tt+J)*3/4-J}function m(w,j,tt){return(j+tt)*3/4-tt}function C(w){var j,tt=y(w),J=tt[0],N=tt[1],Q=new u(m(w,J,N)),at=0,q=N>0?J-4:J,U;for(U=0;U<q;U+=4)j=n[w.charCodeAt(U)]<<18|n[w.charCodeAt(U+1)]<<12|n[w.charCodeAt(U+2)]<<6|n[w.charCodeAt(U+3)],Q[at++]=j>>16&255,Q[at++]=j>>8&255,Q[at++]=j&255;return N===2&&(j=n[w.charCodeAt(U)]<<2|n[w.charCodeAt(U+1)]>>4,Q[at++]=j&255),N===1&&(j=n[w.charCodeAt(U)]<<10|n[w.charCodeAt(U+1)]<<4|n[w.charCodeAt(U+2)]>>2,Q[at++]=j>>8&255,Q[at++]=j&255),Q}function a(w){return e[w>>18&63]+e[w>>12&63]+e[w>>6&63]+e[w&63]}function H(w,j,tt){for(var J,N=[],Q=j;Q<tt;Q+=3)J=(w[Q]<<16&16711680)+(w[Q+1]<<8&65280)+(w[Q+2]&255),N.push(a(J));return N.join("")}function X(w){for(var j,tt=w.length,J=tt%3,N=[],Q=16383,at=0,q=tt-J;at<q;at+=Q)N.push(H(w,at,at+Q>q?q:at+Q));return J===1?(j=w[tt-1],N.push(e[j>>2]+e[j<<4&63]+"==")):J===2&&(j=(w[tt-2]<<8)+w[tt-1],N.push(e[j>>10]+e[j>>4&63]+e[j<<2&63]+"=")),N.join("")}}),hb=ce(t=>{t.read=function(e,n,u,s,p){var g,y,E=p*8-s-1,m=(1<<E)-1,C=m>>1,a=-7,H=u?p-1:0,X=u?-1:1,w=e[n+H];for(H+=X,g=w&(1<<-a)-1,w>>=-a,a+=E;a>0;g=g*256+e[n+H],H+=X,a-=8);for(y=g&(1<<-a)-1,g>>=-a,a+=s;a>0;y=y*256+e[n+H],H+=X,a-=8);if(g===0)g=1-C;else{if(g===m)return y?NaN:(w?-1:1)*(1/0);y=y+Math.pow(2,s),g=g-C}return(w?-1:1)*y*Math.pow(2,g-s)},t.write=function(e,n,u,s,p,g){var y,E,m,C=g*8-p-1,a=(1<<C)-1,H=a>>1,X=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=s?0:g-1,j=s?1:-1,tt=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(E=isNaN(n)?1:0,y=a):(y=Math.floor(Math.log(n)/Math.LN2),n*(m=Math.pow(2,-y))<1&&(y--,m*=2),y+H>=1?n+=X/m:n+=X*Math.pow(2,1-H),n*m>=2&&(y++,m/=2),y+H>=a?(E=0,y=a):y+H>=1?(E=(n*m-1)*Math.pow(2,p),y=y+H):(E=n*Math.pow(2,H-1)*Math.pow(2,p),y=0));p>=8;e[u+w]=E&255,w+=j,E/=256,p-=8);for(y=y<<p|E,C+=p;C>0;e[u+w]=y&255,w+=j,y/=256,C-=8);e[u+w-j]|=tt*128}}),lp=ce(t=>{"use strict";var e=fb(),n=hb(),u=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=y,t.SlowBuffer=N,t.INSPECT_MAX_BYTES=50;var s=2147483647;t.kMaxLength=s,y.TYPED_ARRAY_SUPPORT=p(),!y.TYPED_ARRAY_SUPPORT&&typeof console<"u";function p(){try{let f=new Uint8Array(1),S={foo:function(){return 42}};return Object.setPrototypeOf(S,Uint8Array.prototype),Object.setPrototypeOf(f,S),f.foo()===42}catch{return!1}}Object.defineProperty(y.prototype,"parent",{enumerable:!0,get:function(){if(y.isBuffer(this))return this.buffer}}),Object.defineProperty(y.prototype,"offset",{enumerable:!0,get:function(){if(y.isBuffer(this))return this.byteOffset}});function g(f){if(f>s)throw new RangeError('The value "'+f+'" is invalid for option "size"');let S=new Uint8Array(f);return Object.setPrototypeOf(S,y.prototype),S}function y(f,S,W){if(typeof f=="number"){if(typeof S=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return a(f)}return E(f,S,W)}y.poolSize=8192;function E(f,S,W){if(typeof f=="string")return H(f,S);if(ArrayBuffer.isView(f))return w(f);if(f==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(er(f,ArrayBuffer)||f&&er(f.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(er(f,SharedArrayBuffer)||f&&er(f.buffer,SharedArrayBuffer)))return j(f,S,W);if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let Bt=f.valueOf&&f.valueOf();if(Bt!=null&&Bt!==f)return y.from(Bt,S,W);let Nt=tt(f);if(Nt)return Nt;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof f[Symbol.toPrimitive]=="function")return y.from(f[Symbol.toPrimitive]("string"),S,W);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f)}y.from=function(f,S,W){return E(f,S,W)},Object.setPrototypeOf(y.prototype,Uint8Array.prototype),Object.setPrototypeOf(y,Uint8Array);function m(f){if(typeof f!="number")throw new TypeError('"size" argument must be of type number');if(f<0)throw new RangeError('The value "'+f+'" is invalid for option "size"')}function C(f,S,W){return m(f),f<=0?g(f):S!==void 0?typeof W=="string"?g(f).fill(S,W):g(f).fill(S):g(f)}y.alloc=function(f,S,W){return C(f,S,W)};function a(f){return m(f),g(f<0?0:J(f)|0)}y.allocUnsafe=function(f){return a(f)},y.allocUnsafeSlow=function(f){return a(f)};function H(f,S){if((typeof S!="string"||S==="")&&(S="utf8"),!y.isEncoding(S))throw new TypeError("Unknown encoding: "+S);let W=Q(f,S)|0,Bt=g(W),Nt=Bt.write(f,S);return Nt!==W&&(Bt=Bt.slice(0,Nt)),Bt}function X(f){let S=f.length<0?0:J(f.length)|0,W=g(S);for(let Bt=0;Bt<S;Bt+=1)W[Bt]=f[Bt]&255;return W}function w(f){if(er(f,Uint8Array)){let S=new Uint8Array(f);return j(S.buffer,S.byteOffset,S.byteLength)}return X(f)}function j(f,S,W){if(S<0||f.byteLength<S)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<S+(W||0))throw new RangeError('"length" is outside of buffer bounds');let Bt;return S===void 0&&W===void 0?Bt=new Uint8Array(f):W===void 0?Bt=new Uint8Array(f,S):Bt=new Uint8Array(f,S,W),Object.setPrototypeOf(Bt,y.prototype),Bt}function tt(f){if(y.isBuffer(f)){let S=J(f.length)|0,W=g(S);return W.length===0||f.copy(W,0,0,S),W}if(f.length!==void 0)return typeof f.length!="number"||Wr(f.length)?g(0):X(f);if(f.type==="Buffer"&&Array.isArray(f.data))return X(f.data)}function J(f){if(f>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return f|0}function N(f){return+f!=f&&(f=0),y.alloc(+f)}y.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==y.prototype},y.compare=function(f,S){if(er(f,Uint8Array)&&(f=y.from(f,f.offset,f.byteLength)),er(S,Uint8Array)&&(S=y.from(S,S.offset,S.byteLength)),!y.isBuffer(f)||!y.isBuffer(S))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===S)return 0;let W=f.length,Bt=S.length;for(let Nt=0,nt=Math.min(W,Bt);Nt<nt;++Nt)if(f[Nt]!==S[Nt]){W=f[Nt],Bt=S[Nt];break}return W<Bt?-1:Bt<W?1:0},y.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},y.concat=function(f,S){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return y.alloc(0);let W;if(S===void 0)for(S=0,W=0;W<f.length;++W)S+=f[W].length;let Bt=y.allocUnsafe(S),Nt=0;for(W=0;W<f.length;++W){let nt=f[W];if(er(nt,Uint8Array))Nt+nt.length>Bt.length?(y.isBuffer(nt)||(nt=y.from(nt)),nt.copy(Bt,Nt)):Uint8Array.prototype.set.call(Bt,nt,Nt);else if(y.isBuffer(nt))nt.copy(Bt,Nt);else throw new TypeError('"list" argument must be an Array of Buffers');Nt+=nt.length}return Bt};function Q(f,S){if(y.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||er(f,ArrayBuffer))return f.byteLength;if(typeof f!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);let W=f.length,Bt=arguments.length>2&&arguments[2]===!0;if(!Bt&&W===0)return 0;let Nt=!1;for(;;)switch(S){case"ascii":case"latin1":case"binary":return W;case"utf8":case"utf-8":return Ee(f).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W*2;case"hex":return W>>>1;case"base64":return yr(f).length;default:if(Nt)return Bt?-1:Ee(f).length;S=(""+S).toLowerCase(),Nt=!0}}y.byteLength=Q;function at(f,S,W){let Bt=!1;if((S===void 0||S<0)&&(S=0),S>this.length||((W===void 0||W>this.length)&&(W=this.length),W<=0)||(W>>>=0,S>>>=0,W<=S))return"";for(f||(f="utf8");;)switch(f){case"hex":return de(this,S,W);case"utf8":case"utf-8":return Yt(this,S,W);case"ascii":return ae(this,S,W);case"latin1":case"binary":return He(this,S,W);case"base64":return vt(this,S,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pe(this,S,W);default:if(Bt)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase(),Bt=!0}}y.prototype._isBuffer=!0;function q(f,S,W){let Bt=f[S];f[S]=f[W],f[W]=Bt}y.prototype.swap16=function(){let f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let S=0;S<f;S+=2)q(this,S,S+1);return this},y.prototype.swap32=function(){let f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let S=0;S<f;S+=4)q(this,S,S+3),q(this,S+1,S+2);return this},y.prototype.swap64=function(){let f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let S=0;S<f;S+=8)q(this,S,S+7),q(this,S+1,S+6),q(this,S+2,S+5),q(this,S+3,S+4);return this},y.prototype.toString=function(){let f=this.length;return f===0?"":arguments.length===0?Yt(this,0,f):at.apply(this,arguments)},y.prototype.toLocaleString=y.prototype.toString,y.prototype.equals=function(f){if(!y.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:y.compare(this,f)===0},y.prototype.inspect=function(){let f="",S=t.INSPECT_MAX_BYTES;return f=this.toString("hex",0,S).replace(/(.{2})/g,"$1 ").trim(),this.length>S&&(f+=" ... "),"<Buffer "+f+">"},u&&(y.prototype[u]=y.prototype.inspect),y.prototype.compare=function(f,S,W,Bt,Nt){if(er(f,Uint8Array)&&(f=y.from(f,f.offset,f.byteLength)),!y.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(S===void 0&&(S=0),W===void 0&&(W=f?f.length:0),Bt===void 0&&(Bt=0),Nt===void 0&&(Nt=this.length),S<0||W>f.length||Bt<0||Nt>this.length)throw new RangeError("out of range index");if(Bt>=Nt&&S>=W)return 0;if(Bt>=Nt)return-1;if(S>=W)return 1;if(S>>>=0,W>>>=0,Bt>>>=0,Nt>>>=0,this===f)return 0;let nt=Nt-Bt,zt=W-S,Lt=Math.min(nt,zt),Be=this.slice(Bt,Nt),_t=f.slice(S,W);for(let gt=0;gt<Lt;++gt)if(Be[gt]!==_t[gt]){nt=Be[gt],zt=_t[gt];break}return nt<zt?-1:zt<nt?1:0};function U(f,S,W,Bt,Nt){if(f.length===0)return-1;if(typeof W=="string"?(Bt=W,W=0):W>2147483647?W=2147483647:W<-2147483648&&(W=-2147483648),W=+W,Wr(W)&&(W=Nt?0:f.length-1),W<0&&(W=f.length+W),W>=f.length){if(Nt)return-1;W=f.length-1}else if(W<0)if(Nt)W=0;else return-1;if(typeof S=="string"&&(S=y.from(S,Bt)),y.isBuffer(S))return S.length===0?-1:V(f,S,W,Bt,Nt);if(typeof S=="number")return S=S&255,typeof Uint8Array.prototype.indexOf=="function"?Nt?Uint8Array.prototype.indexOf.call(f,S,W):Uint8Array.prototype.lastIndexOf.call(f,S,W):V(f,[S],W,Bt,Nt);throw new TypeError("val must be string, number or Buffer")}function V(f,S,W,Bt,Nt){let nt=1,zt=f.length,Lt=S.length;if(Bt!==void 0&&(Bt=String(Bt).toLowerCase(),Bt==="ucs2"||Bt==="ucs-2"||Bt==="utf16le"||Bt==="utf-16le")){if(f.length<2||S.length<2)return-1;nt=2,zt/=2,Lt/=2,W/=2}function Be(gt,rt){return nt===1?gt[rt]:gt.readUInt16BE(rt*nt)}let _t;if(Nt){let gt=-1;for(_t=W;_t<zt;_t++)if(Be(f,_t)===Be(S,gt===-1?0:_t-gt)){if(gt===-1&&(gt=_t),_t-gt+1===Lt)return gt*nt}else gt!==-1&&(_t-=_t-gt),gt=-1}else for(W+Lt>zt&&(W=zt-Lt),_t=W;_t>=0;_t--){let gt=!0;for(let rt=0;rt<Lt;rt++)if(Be(f,_t+rt)!==Be(S,rt)){gt=!1;break}if(gt)return _t}return-1}y.prototype.includes=function(f,S,W){return this.indexOf(f,S,W)!==-1},y.prototype.indexOf=function(f,S,W){return U(this,f,S,W,!0)},y.prototype.lastIndexOf=function(f,S,W){return U(this,f,S,W,!1)};function lt(f,S,W,Bt){W=Number(W)||0;let Nt=f.length-W;Bt?(Bt=Number(Bt),Bt>Nt&&(Bt=Nt)):Bt=Nt;let nt=S.length;Bt>nt/2&&(Bt=nt/2);let zt;for(zt=0;zt<Bt;++zt){let Lt=parseInt(S.substr(zt*2,2),16);if(Wr(Lt))return zt;f[W+zt]=Lt}return zt}function It(f,S,W,Bt){return ur(Ee(S,f.length-W),f,W,Bt)}function Ot(f,S,W,Bt){return ur(rr(S),f,W,Bt)}function yt(f,S,W,Bt){return ur(yr(S),f,W,Bt)}function Et(f,S,W,Bt){return ur(fr(S,f.length-W),f,W,Bt)}y.prototype.write=function(f,S,W,Bt){if(S===void 0)Bt="utf8",W=this.length,S=0;else if(W===void 0&&typeof S=="string")Bt=S,W=this.length,S=0;else if(isFinite(S))S=S>>>0,isFinite(W)?(W=W>>>0,Bt===void 0&&(Bt="utf8")):(Bt=W,W=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let Nt=this.length-S;if((W===void 0||W>Nt)&&(W=Nt),f.length>0&&(W<0||S<0)||S>this.length)throw new RangeError("Attempt to write outside buffer bounds");Bt||(Bt="utf8");let nt=!1;for(;;)switch(Bt){case"hex":return lt(this,f,S,W);case"utf8":case"utf-8":return It(this,f,S,W);case"ascii":case"latin1":case"binary":return Ot(this,f,S,W);case"base64":return yt(this,f,S,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Et(this,f,S,W);default:if(nt)throw new TypeError("Unknown encoding: "+Bt);Bt=(""+Bt).toLowerCase(),nt=!0}},y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function vt(f,S,W){return S===0&&W===f.length?e.fromByteArray(f):e.fromByteArray(f.slice(S,W))}function Yt(f,S,W){W=Math.min(f.length,W);let Bt=[],Nt=S;for(;Nt<W;){let nt=f[Nt],zt=null,Lt=nt>239?4:nt>223?3:nt>191?2:1;if(Nt+Lt<=W){let Be,_t,gt,rt;switch(Lt){case 1:nt<128&&(zt=nt);break;case 2:Be=f[Nt+1],(Be&192)===128&&(rt=(nt&31)<<6|Be&63,rt>127&&(zt=rt));break;case 3:Be=f[Nt+1],_t=f[Nt+2],(Be&192)===128&&(_t&192)===128&&(rt=(nt&15)<<12|(Be&63)<<6|_t&63,rt>2047&&(rt<55296||rt>57343)&&(zt=rt));break;case 4:Be=f[Nt+1],_t=f[Nt+2],gt=f[Nt+3],(Be&192)===128&&(_t&192)===128&&(gt&192)===128&&(rt=(nt&15)<<18|(Be&63)<<12|(_t&63)<<6|gt&63,rt>65535&&rt<1114112&&(zt=rt))}}zt===null?(zt=65533,Lt=1):zt>65535&&(zt-=65536,Bt.push(zt>>>10&1023|55296),zt=56320|zt&1023),Bt.push(zt),Nt+=Lt}return re(Bt)}var Xt=4096;function re(f){let S=f.length;if(S<=Xt)return String.fromCharCode.apply(String,f);let W="",Bt=0;for(;Bt<S;)W+=String.fromCharCode.apply(String,f.slice(Bt,Bt+=Xt));return W}function ae(f,S,W){let Bt="";W=Math.min(f.length,W);for(let Nt=S;Nt<W;++Nt)Bt+=String.fromCharCode(f[Nt]&127);return Bt}function He(f,S,W){let Bt="";W=Math.min(f.length,W);for(let Nt=S;Nt<W;++Nt)Bt+=String.fromCharCode(f[Nt]);return Bt}function de(f,S,W){let Bt=f.length;(!S||S<0)&&(S=0),(!W||W<0||W>Bt)&&(W=Bt);let Nt="";for(let nt=S;nt<W;++nt)Nt+=Lr[f[nt]];return Nt}function pe(f,S,W){let Bt=f.slice(S,W),Nt="";for(let nt=0;nt<Bt.length-1;nt+=2)Nt+=String.fromCharCode(Bt[nt]+Bt[nt+1]*256);return Nt}y.prototype.slice=function(f,S){let W=this.length;f=~~f,S=S===void 0?W:~~S,f<0?(f+=W,f<0&&(f=0)):f>W&&(f=W),S<0?(S+=W,S<0&&(S=0)):S>W&&(S=W),S<f&&(S=f);let Bt=this.subarray(f,S);return Object.setPrototypeOf(Bt,y.prototype),Bt};function Ce(f,S,W){if(f%1!==0||f<0)throw new RangeError("offset is not uint");if(f+S>W)throw new RangeError("Trying to access beyond buffer length")}y.prototype.readUintLE=y.prototype.readUIntLE=function(f,S,W){f=f>>>0,S=S>>>0,W||Ce(f,S,this.length);let Bt=this[f],Nt=1,nt=0;for(;++nt<S&&(Nt*=256);)Bt+=this[f+nt]*Nt;return Bt},y.prototype.readUintBE=y.prototype.readUIntBE=function(f,S,W){f=f>>>0,S=S>>>0,W||Ce(f,S,this.length);let Bt=this[f+--S],Nt=1;for(;S>0&&(Nt*=256);)Bt+=this[f+--S]*Nt;return Bt},y.prototype.readUint8=y.prototype.readUInt8=function(f,S){return f=f>>>0,S||Ce(f,1,this.length),this[f]},y.prototype.readUint16LE=y.prototype.readUInt16LE=function(f,S){return f=f>>>0,S||Ce(f,2,this.length),this[f]|this[f+1]<<8},y.prototype.readUint16BE=y.prototype.readUInt16BE=function(f,S){return f=f>>>0,S||Ce(f,2,this.length),this[f]<<8|this[f+1]},y.prototype.readUint32LE=y.prototype.readUInt32LE=function(f,S){return f=f>>>0,S||Ce(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},y.prototype.readUint32BE=y.prototype.readUInt32BE=function(f,S){return f=f>>>0,S||Ce(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},y.prototype.readBigUInt64LE=Sr(function(f){f=f>>>0,et(f,"offset");let S=this[f],W=this[f+7];(S===void 0||W===void 0)&&k(f,this.length-8);let Bt=S+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24,Nt=this[++f]+this[++f]*2**8+this[++f]*2**16+W*2**24;return BigInt(Bt)+(BigInt(Nt)<<BigInt(32))}),y.prototype.readBigUInt64BE=Sr(function(f){f=f>>>0,et(f,"offset");let S=this[f],W=this[f+7];(S===void 0||W===void 0)&&k(f,this.length-8);let Bt=S*2**24+this[++f]*2**16+this[++f]*2**8+this[++f],Nt=this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+W;return(BigInt(Bt)<<BigInt(32))+BigInt(Nt)}),y.prototype.readIntLE=function(f,S,W){f=f>>>0,S=S>>>0,W||Ce(f,S,this.length);let Bt=this[f],Nt=1,nt=0;for(;++nt<S&&(Nt*=256);)Bt+=this[f+nt]*Nt;return Nt*=128,Bt>=Nt&&(Bt-=Math.pow(2,8*S)),Bt},y.prototype.readIntBE=function(f,S,W){f=f>>>0,S=S>>>0,W||Ce(f,S,this.length);let Bt=S,Nt=1,nt=this[f+--Bt];for(;Bt>0&&(Nt*=256);)nt+=this[f+--Bt]*Nt;return Nt*=128,nt>=Nt&&(nt-=Math.pow(2,8*S)),nt},y.prototype.readInt8=function(f,S){return f=f>>>0,S||Ce(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},y.prototype.readInt16LE=function(f,S){f=f>>>0,S||Ce(f,2,this.length);let W=this[f]|this[f+1]<<8;return W&32768?W|4294901760:W},y.prototype.readInt16BE=function(f,S){f=f>>>0,S||Ce(f,2,this.length);let W=this[f+1]|this[f]<<8;return W&32768?W|4294901760:W},y.prototype.readInt32LE=function(f,S){return f=f>>>0,S||Ce(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},y.prototype.readInt32BE=function(f,S){return f=f>>>0,S||Ce(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},y.prototype.readBigInt64LE=Sr(function(f){f=f>>>0,et(f,"offset");let S=this[f],W=this[f+7];(S===void 0||W===void 0)&&k(f,this.length-8);let Bt=this[f+4]+this[f+5]*2**8+this[f+6]*2**16+(W<<24);return(BigInt(Bt)<<BigInt(32))+BigInt(S+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24)}),y.prototype.readBigInt64BE=Sr(function(f){f=f>>>0,et(f,"offset");let S=this[f],W=this[f+7];(S===void 0||W===void 0)&&k(f,this.length-8);let Bt=(S<<24)+this[++f]*2**16+this[++f]*2**8+this[++f];return(BigInt(Bt)<<BigInt(32))+BigInt(this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+W)}),y.prototype.readFloatLE=function(f,S){return f=f>>>0,S||Ce(f,4,this.length),n.read(this,f,!0,23,4)},y.prototype.readFloatBE=function(f,S){return f=f>>>0,S||Ce(f,4,this.length),n.read(this,f,!1,23,4)},y.prototype.readDoubleLE=function(f,S){return f=f>>>0,S||Ce(f,8,this.length),n.read(this,f,!0,52,8)},y.prototype.readDoubleBE=function(f,S){return f=f>>>0,S||Ce(f,8,this.length),n.read(this,f,!1,52,8)};function Ie(f,S,W,Bt,Nt,nt){if(!y.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(S>Nt||S<nt)throw new RangeError('"value" argument is out of bounds');if(W+Bt>f.length)throw new RangeError("Index out of range")}y.prototype.writeUintLE=y.prototype.writeUIntLE=function(f,S,W,Bt){if(f=+f,S=S>>>0,W=W>>>0,!Bt){let zt=Math.pow(2,8*W)-1;Ie(this,f,S,W,zt,0)}let Nt=1,nt=0;for(this[S]=f&255;++nt<W&&(Nt*=256);)this[S+nt]=f/Nt&255;return S+W},y.prototype.writeUintBE=y.prototype.writeUIntBE=function(f,S,W,Bt){if(f=+f,S=S>>>0,W=W>>>0,!Bt){let zt=Math.pow(2,8*W)-1;Ie(this,f,S,W,zt,0)}let Nt=W-1,nt=1;for(this[S+Nt]=f&255;--Nt>=0&&(nt*=256);)this[S+Nt]=f/nt&255;return S+W},y.prototype.writeUint8=y.prototype.writeUInt8=function(f,S,W){return f=+f,S=S>>>0,W||Ie(this,f,S,1,255,0),this[S]=f&255,S+1},y.prototype.writeUint16LE=y.prototype.writeUInt16LE=function(f,S,W){return f=+f,S=S>>>0,W||Ie(this,f,S,2,65535,0),this[S]=f&255,this[S+1]=f>>>8,S+2},y.prototype.writeUint16BE=y.prototype.writeUInt16BE=function(f,S,W){return f=+f,S=S>>>0,W||Ie(this,f,S,2,65535,0),this[S]=f>>>8,this[S+1]=f&255,S+2},y.prototype.writeUint32LE=y.prototype.writeUInt32LE=function(f,S,W){return f=+f,S=S>>>0,W||Ie(this,f,S,4,4294967295,0),this[S+3]=f>>>24,this[S+2]=f>>>16,this[S+1]=f>>>8,this[S]=f&255,S+4},y.prototype.writeUint32BE=y.prototype.writeUInt32BE=function(f,S,W){return f=+f,S=S>>>0,W||Ie(this,f,S,4,4294967295,0),this[S]=f>>>24,this[S+1]=f>>>16,this[S+2]=f>>>8,this[S+3]=f&255,S+4};function Ve(f,S,W,Bt,Nt){Cr(S,Bt,Nt,f,W,7);let nt=Number(S&BigInt(4294967295));f[W++]=nt,nt=nt>>8,f[W++]=nt,nt=nt>>8,f[W++]=nt,nt=nt>>8,f[W++]=nt;let zt=Number(S>>BigInt(32)&BigInt(4294967295));return f[W++]=zt,zt=zt>>8,f[W++]=zt,zt=zt>>8,f[W++]=zt,zt=zt>>8,f[W++]=zt,W}function We(f,S,W,Bt,Nt){Cr(S,Bt,Nt,f,W,7);let nt=Number(S&BigInt(4294967295));f[W+7]=nt,nt=nt>>8,f[W+6]=nt,nt=nt>>8,f[W+5]=nt,nt=nt>>8,f[W+4]=nt;let zt=Number(S>>BigInt(32)&BigInt(4294967295));return f[W+3]=zt,zt=zt>>8,f[W+2]=zt,zt=zt>>8,f[W+1]=zt,zt=zt>>8,f[W]=zt,W+8}y.prototype.writeBigUInt64LE=Sr(function(f,S=0){return Ve(this,f,S,BigInt(0),BigInt("0xffffffffffffffff"))}),y.prototype.writeBigUInt64BE=Sr(function(f,S=0){return We(this,f,S,BigInt(0),BigInt("0xffffffffffffffff"))}),y.prototype.writeIntLE=function(f,S,W,Bt){if(f=+f,S=S>>>0,!Bt){let Lt=Math.pow(2,8*W-1);Ie(this,f,S,W,Lt-1,-Lt)}let Nt=0,nt=1,zt=0;for(this[S]=f&255;++Nt<W&&(nt*=256);)f<0&&zt===0&&this[S+Nt-1]!==0&&(zt=1),this[S+Nt]=(f/nt>>0)-zt&255;return S+W},y.prototype.writeIntBE=function(f,S,W,Bt){if(f=+f,S=S>>>0,!Bt){let Lt=Math.pow(2,8*W-1);Ie(this,f,S,W,Lt-1,-Lt)}let Nt=W-1,nt=1,zt=0;for(this[S+Nt]=f&255;--Nt>=0&&(nt*=256);)f<0&&zt===0&&this[S+Nt+1]!==0&&(zt=1),this[S+Nt]=(f/nt>>0)-zt&255;return S+W},y.prototype.writeInt8=function(f,S,W){return f=+f,S=S>>>0,W||Ie(this,f,S,1,127,-128),f<0&&(f=255+f+1),this[S]=f&255,S+1},y.prototype.writeInt16LE=function(f,S,W){return f=+f,S=S>>>0,W||Ie(this,f,S,2,32767,-32768),this[S]=f&255,this[S+1]=f>>>8,S+2},y.prototype.writeInt16BE=function(f,S,W){return f=+f,S=S>>>0,W||Ie(this,f,S,2,32767,-32768),this[S]=f>>>8,this[S+1]=f&255,S+2},y.prototype.writeInt32LE=function(f,S,W){return f=+f,S=S>>>0,W||Ie(this,f,S,4,2147483647,-2147483648),this[S]=f&255,this[S+1]=f>>>8,this[S+2]=f>>>16,this[S+3]=f>>>24,S+4},y.prototype.writeInt32BE=function(f,S,W){return f=+f,S=S>>>0,W||Ie(this,f,S,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[S]=f>>>24,this[S+1]=f>>>16,this[S+2]=f>>>8,this[S+3]=f&255,S+4},y.prototype.writeBigInt64LE=Sr(function(f,S=0){return Ve(this,f,S,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),y.prototype.writeBigInt64BE=Sr(function(f,S=0){return We(this,f,S,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function we(f,S,W,Bt,Nt,nt){if(W+Bt>f.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("Index out of range")}function Se(f,S,W,Bt,Nt){return S=+S,W=W>>>0,Nt||we(f,S,W,4,34028234663852886e22,-34028234663852886e22),n.write(f,S,W,Bt,23,4),W+4}y.prototype.writeFloatLE=function(f,S,W){return Se(this,f,S,!0,W)},y.prototype.writeFloatBE=function(f,S,W){return Se(this,f,S,!1,W)};function Qe(f,S,W,Bt,Nt){return S=+S,W=W>>>0,Nt||we(f,S,W,8,17976931348623157e292,-17976931348623157e292),n.write(f,S,W,Bt,52,8),W+8}y.prototype.writeDoubleLE=function(f,S,W){return Qe(this,f,S,!0,W)},y.prototype.writeDoubleBE=function(f,S,W){return Qe(this,f,S,!1,W)},y.prototype.copy=function(f,S,W,Bt){if(!y.isBuffer(f))throw new TypeError("argument should be a Buffer");if(W||(W=0),!Bt&&Bt!==0&&(Bt=this.length),S>=f.length&&(S=f.length),S||(S=0),Bt>0&&Bt<W&&(Bt=W),Bt===W||f.length===0||this.length===0)return 0;if(S<0)throw new RangeError("targetStart out of bounds");if(W<0||W>=this.length)throw new RangeError("Index out of range");if(Bt<0)throw new RangeError("sourceEnd out of bounds");Bt>this.length&&(Bt=this.length),f.length-S<Bt-W&&(Bt=f.length-S+W);let Nt=Bt-W;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(S,W,Bt):Uint8Array.prototype.set.call(f,this.subarray(W,Bt),S),Nt},y.prototype.fill=function(f,S,W,Bt){if(typeof f=="string"){if(typeof S=="string"?(Bt=S,S=0,W=this.length):typeof W=="string"&&(Bt=W,W=this.length),Bt!==void 0&&typeof Bt!="string")throw new TypeError("encoding must be a string");if(typeof Bt=="string"&&!y.isEncoding(Bt))throw new TypeError("Unknown encoding: "+Bt);if(f.length===1){let nt=f.charCodeAt(0);(Bt==="utf8"&&nt<128||Bt==="latin1")&&(f=nt)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(S<0||this.length<S||this.length<W)throw new RangeError("Out of range index");if(W<=S)return this;S=S>>>0,W=W===void 0?this.length:W>>>0,f||(f=0);let Nt;if(typeof f=="number")for(Nt=S;Nt<W;++Nt)this[Nt]=f;else{let nt=y.isBuffer(f)?f:y.from(f,Bt),zt=nt.length;if(zt===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(Nt=0;Nt<W-S;++Nt)this[Nt+S]=nt[Nt%zt]}return this};var Ke={};function Ze(f,S,W){Ke[f]=class extends W{constructor(){super(),Object.defineProperty(this,"message",{value:S.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${f}]`,this.stack,delete this.name}get code(){return f}set code(Bt){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Bt,writable:!0})}toString(){return`${this.name} [${f}]: ${this.message}`}}}Ze("ERR_BUFFER_OUT_OF_BOUNDS",function(f){return f?`${f} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ze("ERR_INVALID_ARG_TYPE",function(f,S){return`The "${f}" argument must be of type number. Received type ${typeof S}`},TypeError),Ze("ERR_OUT_OF_RANGE",function(f,S,W){let Bt=`The value of "${f}" is out of range.`,Nt=W;return Number.isInteger(W)&&Math.abs(W)>2**32?Nt=vr(String(W)):typeof W=="bigint"&&(Nt=String(W),(W>BigInt(2)**BigInt(32)||W<-(BigInt(2)**BigInt(32)))&&(Nt=vr(Nt)),Nt+="n"),Bt+=` It must be ${S}. Received ${Nt}`,Bt},RangeError);function vr(f){let S="",W=f.length,Bt=f[0]==="-"?1:0;for(;W>=Bt+4;W-=3)S=`_${f.slice(W-3,W)}${S}`;return`${f.slice(0,W)}${S}`}function Pr(f,S,W){et(S,"offset"),(f[S]===void 0||f[S+W]===void 0)&&k(S,f.length-(W+1))}function Cr(f,S,W,Bt,Nt,nt){if(f>W||f<S){let zt=typeof S=="bigint"?"n":"",Lt;throw nt>3?S===0||S===BigInt(0)?Lt=`>= 0${zt} and < 2${zt} ** ${(nt+1)*8}${zt}`:Lt=`>= -(2${zt} ** ${(nt+1)*8-1}${zt}) and < 2 ** ${(nt+1)*8-1}${zt}`:Lt=`>= ${S}${zt} and <= ${W}${zt}`,new Ke.ERR_OUT_OF_RANGE("value",Lt,f)}Pr(Bt,Nt,nt)}function et(f,S){if(typeof f!="number")throw new Ke.ERR_INVALID_ARG_TYPE(S,"number",f)}function k(f,S,W){throw Math.floor(f)!==f?(et(f,W),new Ke.ERR_OUT_OF_RANGE(W||"offset","an integer",f)):S<0?new Ke.ERR_BUFFER_OUT_OF_BOUNDS:new Ke.ERR_OUT_OF_RANGE(W||"offset",`>= ${W?1:0} and <= ${S}`,f)}var Z=/[^+/0-9A-Za-z-_]/g;function se(f){if(f=f.split("=")[0],f=f.trim().replace(Z,""),f.length<2)return"";for(;f.length%4!==0;)f=f+"=";return f}function Ee(f,S){S=S||1/0;let W,Bt=f.length,Nt=null,nt=[];for(let zt=0;zt<Bt;++zt){if(W=f.charCodeAt(zt),W>55295&&W<57344){if(!Nt){if(W>56319){(S-=3)>-1&&nt.push(239,191,189);continue}else if(zt+1===Bt){(S-=3)>-1&&nt.push(239,191,189);continue}Nt=W;continue}if(W<56320){(S-=3)>-1&&nt.push(239,191,189),Nt=W;continue}W=(Nt-55296<<10|W-56320)+65536}else Nt&&(S-=3)>-1&&nt.push(239,191,189);if(Nt=null,W<128){if((S-=1)<0)break;nt.push(W)}else if(W<2048){if((S-=2)<0)break;nt.push(W>>6|192,W&63|128)}else if(W<65536){if((S-=3)<0)break;nt.push(W>>12|224,W>>6&63|128,W&63|128)}else if(W<1114112){if((S-=4)<0)break;nt.push(W>>18|240,W>>12&63|128,W>>6&63|128,W&63|128)}else throw new Error("Invalid code point")}return nt}function rr(f){let S=[];for(let W=0;W<f.length;++W)S.push(f.charCodeAt(W)&255);return S}function fr(f,S){let W,Bt,Nt,nt=[];for(let zt=0;zt<f.length&&!((S-=2)<0);++zt)W=f.charCodeAt(zt),Bt=W>>8,Nt=W%256,nt.push(Nt),nt.push(Bt);return nt}function yr(f){return e.toByteArray(se(f))}function ur(f,S,W,Bt){let Nt;for(Nt=0;Nt<Bt&&!(Nt+W>=S.length||Nt>=f.length);++Nt)S[Nt+W]=f[Nt];return Nt}function er(f,S){return f instanceof S||f!=null&&f.constructor!=null&&f.constructor.name!=null&&f.constructor.name===S.name}function Wr(f){return f!==f}var Lr=(function(){let f="0123456789abcdef",S=new Array(256);for(let W=0;W<16;++W){let Bt=W*16;for(let Nt=0;Nt<16;++Nt)S[Bt+Nt]=f[W]+f[Nt]}return S})();function Sr(f){return typeof BigInt>"u"?L:f}function L(){throw new Error("BigInt not supported")}}),Zb=ce(t=>{var e={};e.userAgent=!1;var n={},u="11.1.0",s="jsrsasign(all) 11.1.0 (2024-02-01) (c) 2010-2023 Kenji Urushima | kjur.github.io/jsrsasign/license",p=p||(function(r,l){var o={},h=o.lib={},b=h.Base=(function(){function I(){}return{extend:function(ut){I.prototype=this;var T=new I;return ut&&T.mixIn(ut),T.hasOwnProperty("init")||(T.init=function(){T.$super.init.apply(this,arguments)}),T.init.prototype=T,T.$super=this,T},create:function(){var ut=this.extend();return ut.init.apply(ut,arguments),ut},init:function(){},mixIn:function(ut){for(var T in ut)ut.hasOwnProperty(T)&&(this[T]=ut[T]);ut.hasOwnProperty("toString")&&(this.toString=ut.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),D=h.WordArray=b.extend({init:function(I,ut){I=this.words=I||[],ut!=l?this.sigBytes=ut:this.sigBytes=I.length*4},toString:function(I){return(I||_).stringify(this)},concat:function(I){var ut=this.words,T=I.words,ot=this.sigBytes,Y=I.sigBytes;if(this.clamp(),ot%4)for(var Ft=0;Ft<Y;Ft++){var Tt=T[Ft>>>2]>>>24-Ft%4*8&255;ut[ot+Ft>>>2]|=Tt<<24-(ot+Ft)%4*8}else for(var Ft=0;Ft<Y;Ft+=4)ut[ot+Ft>>>2]=T[Ft>>>2];return this.sigBytes+=Y,this},clamp:function(){var I=this.words,ut=this.sigBytes;I[ut>>>2]&=4294967295<<32-ut%4*8,I.length=r.ceil(ut/4)},clone:function(){var I=b.clone.call(this);return I.words=this.words.slice(0),I},random:function(I){for(var ut=[],T=0;T<I;T+=4)ut.push(r.random()*4294967296|0);return new D.init(ut,I)}}),x=o.enc={},_=x.Hex={stringify:function(I){for(var ut=I.words,T=I.sigBytes,ot=[],Y=0;Y<T;Y++){var Ft=ut[Y>>>2]>>>24-Y%4*8&255;ot.push((Ft>>>4).toString(16)),ot.push((Ft&15).toString(16))}return ot.join("")},parse:function(I){for(var ut=I.length,T=[],ot=0;ot<ut;ot+=2)T[ot>>>3]|=parseInt(I.substr(ot,2),16)<<24-ot%8*4;return new D.init(T,ut/2)}},M=x.Latin1={stringify:function(I){for(var ut=I.words,T=I.sigBytes,ot=[],Y=0;Y<T;Y++){var Ft=ut[Y>>>2]>>>24-Y%4*8&255;ot.push(String.fromCharCode(Ft))}return ot.join("")},parse:function(I){for(var ut=I.length,T=[],ot=0;ot<ut;ot++)T[ot>>>2]|=(I.charCodeAt(ot)&255)<<24-ot%4*8;return new D.init(T,ut)}},K=x.Utf8={stringify:function(I){try{return decodeURIComponent(escape(M.stringify(I)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(I){return M.parse(unescape(encodeURIComponent(I)))}},ht=h.BufferedBlockAlgorithm=b.extend({reset:function(){this._data=new D.init,this._nDataBytes=0},_append:function(I){typeof I=="string"&&(I=K.parse(I)),this._data.concat(I),this._nDataBytes+=I.sigBytes},_process:function(I){var ut=this._data,T=ut.words,ot=ut.sigBytes,Y=this.blockSize,Ft=Y*4,Tt=ot/Ft;I?Tt=r.ceil(Tt):Tt=r.max((Tt|0)-this._minBufferSize,0);var Jt=Tt*Y,Gt=r.min(Jt*4,ot);if(Jt){for(var Ae=0;Ae<Jt;Ae+=Y)this._doProcessBlock(T,Ae);var De=T.splice(0,Jt);ut.sigBytes-=Gt}return new D.init(De,Gt)},clone:function(){var I=b.clone.call(this);return I._data=this._data.clone(),I},_minBufferSize:0}),mt=h.Hasher=ht.extend({cfg:b.extend(),init:function(I){this.cfg=this.cfg.extend(I),this.reset()},reset:function(){ht.reset.call(this),this._doReset()},update:function(I){return this._append(I),this._process(),this},finalize:function(I){I&&this._append(I);var ut=this._doFinalize();return ut},blockSize:512/32,_createHelper:function(I){return function(ut,T){return new I.init(T).finalize(ut)}},_createHmacHelper:function(I){return function(ut,T){return new P.HMAC.init(I,T).finalize(ut)}}}),P=o.algo={};return o})(Math);(function(r){var b=p,l=b.lib,o=l.Base,h=l.WordArray,b=b.x64={};b.Word=o.extend({init:function(D,x){this.high=D,this.low=x}}),b.WordArray=o.extend({init:function(D,x){D=this.words=D||[],this.sigBytes=x!=r?x:8*D.length},toX32:function(){for(var D=this.words,x=D.length,_=[],M=0;M<x;M++){var K=D[M];_.push(K.high),_.push(K.low)}return h.create(_,this.sigBytes)},clone:function(){for(var D=o.clone.call(this),x=D.words=this.words.slice(0),_=x.length,M=0;M<_;M++)x[M]=x[M].clone();return D}})})(),p.lib.Cipher||(function(r){var I=p,l=I.lib,o=l.Base,h=l.WordArray,b=l.BufferedBlockAlgorithm,D=I.enc.Base64,x=I.algo.EvpKDF,_=l.Cipher=b.extend({cfg:o.extend(),createEncryptor:function(T,ot){return this.create(this._ENC_XFORM_MODE,T,ot)},createDecryptor:function(T,ot){return this.create(this._DEC_XFORM_MODE,T,ot)},init:function(T,ot,Y){this.cfg=this.cfg.extend(Y),this._xformMode=T,this._key=ot,this.reset()},reset:function(){b.reset.call(this),this._doReset()},process:function(T){return this._append(T),this._process()},finalize:function(T){return T&&this._append(T),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(T){return{encrypt:function(ot,Y,Ft){return(typeof Y=="string"?ut:P).encrypt(T,ot,Y,Ft)},decrypt:function(ot,Y,Ft){return(typeof Y=="string"?ut:P).decrypt(T,ot,Y,Ft)}}}});l.StreamCipher=_.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var mt=I.mode={},M=function(T,ot,Y){var Ft=this._iv;Ft?this._iv=r:Ft=this._prevBlock;for(var Tt=0;Tt<Y;Tt++)T[ot+Tt]^=Ft[Tt]},K=(l.BlockCipherMode=o.extend({createEncryptor:function(T,ot){return this.Encryptor.create(T,ot)},createDecryptor:function(T,ot){return this.Decryptor.create(T,ot)},init:function(T,ot){this._cipher=T,this._iv=ot}})).extend();K.Encryptor=K.extend({processBlock:function(T,ot){var Y=this._cipher,Ft=Y.blockSize;M.call(this,T,ot,Ft),Y.encryptBlock(T,ot),this._prevBlock=T.slice(ot,ot+Ft)}}),K.Decryptor=K.extend({processBlock:function(T,ot){var Y=this._cipher,Ft=Y.blockSize,Tt=T.slice(ot,ot+Ft);Y.decryptBlock(T,ot),M.call(this,T,ot,Ft),this._prevBlock=Tt}}),mt=mt.CBC=K,K=(I.pad={}).Pkcs7={pad:function(T,ot){for(var Y=4*ot,Y=Y-T.sigBytes%Y,Ft=Y<<24|Y<<16|Y<<8|Y,Tt=[],Jt=0;Jt<Y;Jt+=4)Tt.push(Ft);Y=h.create(Tt,Y),T.concat(Y)},unpad:function(T){T.sigBytes-=T.words[T.sigBytes-1>>>2]&255}},l.BlockCipher=_.extend({cfg:_.cfg.extend({mode:mt,padding:K}),reset:function(){_.reset.call(this);var ot=this.cfg,T=ot.iv,ot=ot.mode;if(this._xformMode==this._ENC_XFORM_MODE)var Y=ot.createEncryptor;else Y=ot.createDecryptor,this._minBufferSize=1;this._mode=Y.call(ot,this,T&&T.words)},_doProcessBlock:function(T,ot){this._mode.processBlock(T,ot)},_doFinalize:function(){var T=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){T.pad(this._data,this.blockSize);var ot=this._process(!0)}else ot=this._process(!0),T.unpad(ot);return ot},blockSize:4});var ht=l.CipherParams=o.extend({init:function(T){this.mixIn(T)},toString:function(T){return(T||this.formatter).stringify(this)}}),mt=(I.format={}).OpenSSL={stringify:function(T){var ot=T.ciphertext;return T=T.salt,(T?h.create([1398893684,1701076831]).concat(T).concat(ot):ot).toString(D)},parse:function(T){T=D.parse(T);var ot=T.words;if(ot[0]==1398893684&&ot[1]==1701076831){var Y=h.create(ot.slice(2,4));ot.splice(0,4),T.sigBytes-=16}return ht.create({ciphertext:T,salt:Y})}},P=l.SerializableCipher=o.extend({cfg:o.extend({format:mt}),encrypt:function(T,ot,Y,Ft){Ft=this.cfg.extend(Ft);var Tt=T.createEncryptor(Y,Ft);return ot=Tt.finalize(ot),Tt=Tt.cfg,ht.create({ciphertext:ot,key:Y,iv:Tt.iv,algorithm:T,mode:Tt.mode,padding:Tt.padding,blockSize:T.blockSize,formatter:Ft.format})},decrypt:function(T,ot,Y,Ft){return Ft=this.cfg.extend(Ft),ot=this._parse(ot,Ft.format),T.createDecryptor(Y,Ft).finalize(ot.ciphertext)},_parse:function(T,ot){return typeof T=="string"?ot.parse(T,this):T}}),I=(I.kdf={}).OpenSSL={execute:function(T,ot,Y,Ft){return Ft||(Ft=h.random(8)),T=x.create({keySize:ot+Y}).compute(T,Ft),Y=h.create(T.words.slice(ot),4*Y),T.sigBytes=4*ot,ht.create({key:T,iv:Y,salt:Ft})}},ut=l.PasswordBasedCipher=P.extend({cfg:P.cfg.extend({kdf:I}),encrypt:function(T,ot,Y,Ft){return Ft=this.cfg.extend(Ft),Y=Ft.kdf.execute(Y,T.keySize,T.ivSize),Ft.iv=Y.iv,T=P.encrypt.call(this,T,ot,Y.key,Ft),T.mixIn(Y),T},decrypt:function(T,ot,Y,Ft){return Ft=this.cfg.extend(Ft),ot=this._parse(ot,Ft.format),Y=Ft.kdf.execute(Y,T.keySize,T.ivSize,ot.salt),Ft.iv=Y.iv,P.decrypt.call(this,T,ot,Y.key,Ft)}})})(),(function(){for(var r=p,l=r.lib.BlockCipher,Ae=r.algo,o=[],h=[],b=[],D=[],x=[],_=[],M=[],K=[],ht=[],mt=[],P=[],I=0;256>I;I++)P[I]=128>I?I<<1:I<<1^283;for(var ut=0,T=0,I=0;256>I;I++){var ot=T^T<<1^T<<2^T<<3^T<<4,ot=ot>>>8^ot&255^99;o[ut]=ot,h[ot]=ut;var Y=P[ut],Ft=P[Y],Tt=P[Ft],Jt=257*P[ot]^16843008*ot;b[ut]=Jt<<24|Jt>>>8,D[ut]=Jt<<16|Jt>>>16,x[ut]=Jt<<8|Jt>>>24,_[ut]=Jt,Jt=16843009*Tt^65537*Ft^257*Y^16843008*ut,M[ot]=Jt<<24|Jt>>>8,K[ot]=Jt<<16|Jt>>>16,ht[ot]=Jt<<8|Jt>>>24,mt[ot]=Jt,ut?(ut=Y^P[P[P[Tt^Y]]],T^=P[P[T]]):ut=T=1}var Gt=[0,1,2,4,8,16,32,64,128,27,54],Ae=Ae.AES=l.extend({_doReset:function(){for(var B=this._key,De=B.words,d=B.sigBytes/4,B=4*((this._nRounds=d+6)+1),it=this._keySchedule=[],z=0;z<B;z++)if(z<d)it[z]=De[z];else{var St=it[z-1];z%d?6<d&&z%d==4&&(St=o[St>>>24]<<24|o[St>>>16&255]<<16|o[St>>>8&255]<<8|o[St&255]):(St=St<<8|St>>>24,St=o[St>>>24]<<24|o[St>>>16&255]<<16|o[St>>>8&255]<<8|o[St&255],St^=Gt[z/d|0]<<24),it[z]=it[z-d]^St}for(De=this._invKeySchedule=[],d=0;d<B;d++)z=B-d,St=d%4?it[z]:it[z-4],De[d]=4>d||4>=z?St:M[o[St>>>24]]^K[o[St>>>16&255]]^ht[o[St>>>8&255]]^mt[o[St&255]]},encryptBlock:function(De,d){this._doCryptBlock(De,d,this._keySchedule,b,D,x,_,o)},decryptBlock:function(De,d){var B=De[d+1];De[d+1]=De[d+3],De[d+3]=B,this._doCryptBlock(De,d,this._invKeySchedule,M,K,ht,mt,h),B=De[d+1],De[d+1]=De[d+3],De[d+3]=B},_doCryptBlock:function(De,d,B,it,z,St,qt,ee){for(var ie=this._nRounds,Ur=De[d]^B[0],xn=De[d+1]^B[1],pn=De[d+2]^B[2],Kr=De[d+3]^B[3],ye=4,$e=1;$e<ie;$e++)var Fr=it[Ur>>>24]^z[xn>>>16&255]^St[pn>>>8&255]^qt[Kr&255]^B[ye++],Dr=it[xn>>>24]^z[pn>>>16&255]^St[Kr>>>8&255]^qt[Ur&255]^B[ye++],wr=it[pn>>>24]^z[Kr>>>16&255]^St[Ur>>>8&255]^qt[xn&255]^B[ye++],Kr=it[Kr>>>24]^z[Ur>>>16&255]^St[xn>>>8&255]^qt[pn&255]^B[ye++],Ur=Fr,xn=Dr,pn=wr;Fr=(ee[Ur>>>24]<<24|ee[xn>>>16&255]<<16|ee[pn>>>8&255]<<8|ee[Kr&255])^B[ye++],Dr=(ee[xn>>>24]<<24|ee[pn>>>16&255]<<16|ee[Kr>>>8&255]<<8|ee[Ur&255])^B[ye++],wr=(ee[pn>>>24]<<24|ee[Kr>>>16&255]<<16|ee[Ur>>>8&255]<<8|ee[xn&255])^B[ye++],Kr=(ee[Kr>>>24]<<24|ee[Ur>>>16&255]<<16|ee[xn>>>8&255]<<8|ee[pn&255])^B[ye++],De[d]=Fr,De[d+1]=Dr,De[d+2]=wr,De[d+3]=Kr},keySize:8});r.AES=l._createHelper(Ae)})(),(function(){function r(P,I){var ut=(this._lBlock>>>P^this._rBlock)&I;this._rBlock^=ut,this._lBlock^=ut<<P}function l(P,I){var ut=(this._rBlock>>>P^this._lBlock)&I;this._lBlock^=ut,this._rBlock^=ut<<P}var o=p,b=o.lib,h=b.WordArray,b=b.BlockCipher,D=o.algo,x=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],_=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],M=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],K=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],ht=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],mt=D.DES=b.extend({_doReset:function(){for(var P=this._key.words,I=[],ut=0;56>ut;ut++){var T=x[ut]-1;I[ut]=P[T>>>5]>>>31-T%32&1}for(P=this._subKeys=[],T=0;16>T;T++){for(var ot=P[T]=[],Y=M[T],ut=0;24>ut;ut++)ot[ut/6|0]|=I[(_[ut]-1+Y)%28]<<31-ut%6,ot[4+(ut/6|0)]|=I[28+(_[ut+24]-1+Y)%28]<<31-ut%6;for(ot[0]=ot[0]<<1|ot[0]>>>31,ut=1;7>ut;ut++)ot[ut]>>>=4*(ut-1)+3;ot[7]=ot[7]<<5|ot[7]>>>27}for(I=this._invSubKeys=[],ut=0;16>ut;ut++)I[ut]=P[15-ut]},encryptBlock:function(P,I){this._doCryptBlock(P,I,this._subKeys)},decryptBlock:function(P,I){this._doCryptBlock(P,I,this._invSubKeys)},_doCryptBlock:function(P,I,ut){this._lBlock=P[I],this._rBlock=P[I+1],r.call(this,4,252645135),r.call(this,16,65535),l.call(this,2,858993459),l.call(this,8,16711935),r.call(this,1,1431655765);for(var T=0;16>T;T++){for(var ot=ut[T],Y=this._lBlock,Ft=this._rBlock,Tt=0,Jt=0;8>Jt;Jt++)Tt|=K[Jt][((Ft^ot[Jt])&ht[Jt])>>>0];this._lBlock=Ft,this._rBlock=Y^Tt}ut=this._lBlock,this._lBlock=this._rBlock,this._rBlock=ut,r.call(this,1,1431655765),l.call(this,8,16711935),l.call(this,2,858993459),r.call(this,16,65535),r.call(this,4,252645135),P[I]=this._lBlock,P[I+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});o.DES=b._createHelper(mt),D=D.TripleDES=b.extend({_doReset:function(){var P=this._key.words;this._des1=mt.createEncryptor(h.create(P.slice(0,2))),this._des2=mt.createEncryptor(h.create(P.slice(2,4))),this._des3=mt.createEncryptor(h.create(P.slice(4,6)))},encryptBlock:function(P,I){this._des1.encryptBlock(P,I),this._des2.decryptBlock(P,I),this._des3.encryptBlock(P,I)},decryptBlock:function(P,I){this._des3.decryptBlock(P,I),this._des2.encryptBlock(P,I),this._des1.decryptBlock(P,I)},keySize:6,ivSize:2,blockSize:2}),o.TripleDES=b._createHelper(D)})(),(function(){var r=p,l=r.lib.WordArray;r.enc.Base64={stringify:function(o){var h=o.words,b=o.sigBytes,D=this._map;o.clamp(),o=[];for(var x=0;x<b;x+=3)for(var _=(h[x>>>2]>>>24-8*(x%4)&255)<<16|(h[x+1>>>2]>>>24-8*((x+1)%4)&255)<<8|h[x+2>>>2]>>>24-8*((x+2)%4)&255,M=0;4>M&&x+.75*M<b;M++)o.push(D.charAt(_>>>6*(3-M)&63));if(h=D.charAt(64))for(;o.length%4;)o.push(h);return o.join("")},parse:function(o){var h=o.length,b=this._map,D=b.charAt(64);D&&(D=o.indexOf(D),D!=-1&&(h=D));for(var D=[],x=0,_=0;_<h;_++)if(_%4){var M=b.indexOf(o.charAt(_-1))<<2*(_%4),K=b.indexOf(o.charAt(_))>>>6-2*(_%4);D[x>>>2]|=(M|K)<<24-8*(x%4),x++}return l.create(D,x)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})(),(function(r){function l(mt,P,I,ut,T,ot,Y){return mt=mt+(P&I|~P&ut)+T+Y,(mt<<ot|mt>>>32-ot)+P}function o(mt,P,I,ut,T,ot,Y){return mt=mt+(P&ut|I&~ut)+T+Y,(mt<<ot|mt>>>32-ot)+P}function h(mt,P,I,ut,T,ot,Y){return mt=mt+(P^I^ut)+T+Y,(mt<<ot|mt>>>32-ot)+P}function b(mt,P,I,ut,T,ot,Y){return mt=mt+(I^(P|~ut))+T+Y,(mt<<ot|mt>>>32-ot)+P}for(var D=p,M=D.lib,x=M.WordArray,_=M.Hasher,M=D.algo,K=[],ht=0;64>ht;ht++)K[ht]=4294967296*r.abs(r.sin(ht+1))|0;M=M.MD5=_.extend({_doReset:function(){this._hash=new x.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(mt,P){for(var I=0;16>I;I++){var ut=P+I,T=mt[ut];mt[ut]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360}var I=this._hash.words,ut=mt[P+0],T=mt[P+1],ot=mt[P+2],Y=mt[P+3],Ft=mt[P+4],Tt=mt[P+5],Jt=mt[P+6],Gt=mt[P+7],Ae=mt[P+8],De=mt[P+9],d=mt[P+10],B=mt[P+11],it=mt[P+12],z=mt[P+13],St=mt[P+14],qt=mt[P+15],ee=I[0],$e=I[1],ye=I[2],ie=I[3],ee=l(ee,$e,ye,ie,ut,7,K[0]),ie=l(ie,ee,$e,ye,T,12,K[1]),ye=l(ye,ie,ee,$e,ot,17,K[2]),$e=l($e,ye,ie,ee,Y,22,K[3]),ee=l(ee,$e,ye,ie,Ft,7,K[4]),ie=l(ie,ee,$e,ye,Tt,12,K[5]),ye=l(ye,ie,ee,$e,Jt,17,K[6]),$e=l($e,ye,ie,ee,Gt,22,K[7]),ee=l(ee,$e,ye,ie,Ae,7,K[8]),ie=l(ie,ee,$e,ye,De,12,K[9]),ye=l(ye,ie,ee,$e,d,17,K[10]),$e=l($e,ye,ie,ee,B,22,K[11]),ee=l(ee,$e,ye,ie,it,7,K[12]),ie=l(ie,ee,$e,ye,z,12,K[13]),ye=l(ye,ie,ee,$e,St,17,K[14]),$e=l($e,ye,ie,ee,qt,22,K[15]),ee=o(ee,$e,ye,ie,T,5,K[16]),ie=o(ie,ee,$e,ye,Jt,9,K[17]),ye=o(ye,ie,ee,$e,B,14,K[18]),$e=o($e,ye,ie,ee,ut,20,K[19]),ee=o(ee,$e,ye,ie,Tt,5,K[20]),ie=o(ie,ee,$e,ye,d,9,K[21]),ye=o(ye,ie,ee,$e,qt,14,K[22]),$e=o($e,ye,ie,ee,Ft,20,K[23]),ee=o(ee,$e,ye,ie,De,5,K[24]),ie=o(ie,ee,$e,ye,St,9,K[25]),ye=o(ye,ie,ee,$e,Y,14,K[26]),$e=o($e,ye,ie,ee,Ae,20,K[27]),ee=o(ee,$e,ye,ie,z,5,K[28]),ie=o(ie,ee,$e,ye,ot,9,K[29]),ye=o(ye,ie,ee,$e,Gt,14,K[30]),$e=o($e,ye,ie,ee,it,20,K[31]),ee=h(ee,$e,ye,ie,Tt,4,K[32]),ie=h(ie,ee,$e,ye,Ae,11,K[33]),ye=h(ye,ie,ee,$e,B,16,K[34]),$e=h($e,ye,ie,ee,St,23,K[35]),ee=h(ee,$e,ye,ie,T,4,K[36]),ie=h(ie,ee,$e,ye,Ft,11,K[37]),ye=h(ye,ie,ee,$e,Gt,16,K[38]),$e=h($e,ye,ie,ee,d,23,K[39]),ee=h(ee,$e,ye,ie,z,4,K[40]),ie=h(ie,ee,$e,ye,ut,11,K[41]),ye=h(ye,ie,ee,$e,Y,16,K[42]),$e=h($e,ye,ie,ee,Jt,23,K[43]),ee=h(ee,$e,ye,ie,De,4,K[44]),ie=h(ie,ee,$e,ye,it,11,K[45]),ye=h(ye,ie,ee,$e,qt,16,K[46]),$e=h($e,ye,ie,ee,ot,23,K[47]),ee=b(ee,$e,ye,ie,ut,6,K[48]),ie=b(ie,ee,$e,ye,Gt,10,K[49]),ye=b(ye,ie,ee,$e,St,15,K[50]),$e=b($e,ye,ie,ee,Tt,21,K[51]),ee=b(ee,$e,ye,ie,it,6,K[52]),ie=b(ie,ee,$e,ye,Y,10,K[53]),ye=b(ye,ie,ee,$e,d,15,K[54]),$e=b($e,ye,ie,ee,T,21,K[55]),ee=b(ee,$e,ye,ie,Ae,6,K[56]),ie=b(ie,ee,$e,ye,qt,10,K[57]),ye=b(ye,ie,ee,$e,Jt,15,K[58]),$e=b($e,ye,ie,ee,z,21,K[59]),ee=b(ee,$e,ye,ie,Ft,6,K[60]),ie=b(ie,ee,$e,ye,B,10,K[61]),ye=b(ye,ie,ee,$e,ot,15,K[62]),$e=b($e,ye,ie,ee,De,21,K[63]);I[0]=I[0]+ee|0,I[1]=I[1]+$e|0,I[2]=I[2]+ye|0,I[3]=I[3]+ie|0},_doFinalize:function(){var mt=this._data,P=mt.words,I=8*this._nDataBytes,ut=8*mt.sigBytes;P[ut>>>5]|=128<<24-ut%32;var T=r.floor(I/4294967296);for(P[(ut+64>>>9<<4)+15]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,P[(ut+64>>>9<<4)+14]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,mt.sigBytes=4*(P.length+1),this._process(),mt=this._hash,P=mt.words,I=0;4>I;I++)ut=P[I],P[I]=(ut<<8|ut>>>24)&16711935|(ut<<24|ut>>>8)&4278255360;return mt},clone:function(){var mt=_.clone.call(this);return mt._hash=this._hash.clone(),mt}}),D.MD5=_._createHelper(M),D.HmacMD5=_._createHmacHelper(M)})(Math),(function(){var r=p,b=r.lib,l=b.WordArray,o=b.Hasher,h=[],b=r.algo.SHA1=o.extend({_doReset:function(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(D,x){for(var _=this._hash.words,M=_[0],K=_[1],ht=_[2],mt=_[3],P=_[4],I=0;80>I;I++){if(16>I)h[I]=D[x+I]|0;else{var ut=h[I-3]^h[I-8]^h[I-14]^h[I-16];h[I]=ut<<1|ut>>>31}ut=(M<<5|M>>>27)+P+h[I],ut=20>I?ut+((K&ht|~K&mt)+1518500249):40>I?ut+((K^ht^mt)+1859775393):60>I?ut+((K&ht|K&mt|ht&mt)-1894007588):ut+((K^ht^mt)-899497514),P=mt,mt=ht,ht=K<<30|K>>>2,K=M,M=ut}_[0]=_[0]+M|0,_[1]=_[1]+K|0,_[2]=_[2]+ht|0,_[3]=_[3]+mt|0,_[4]=_[4]+P|0},_doFinalize:function(){var D=this._data,x=D.words,_=8*this._nDataBytes,M=8*D.sigBytes;return x[M>>>5]|=128<<24-M%32,x[(M+64>>>9<<4)+14]=Math.floor(_/4294967296),x[(M+64>>>9<<4)+15]=_,D.sigBytes=4*x.length,this._process(),this._hash},clone:function(){var D=o.clone.call(this);return D._hash=this._hash.clone(),D}});r.SHA1=o._createHelper(b),r.HmacSHA1=o._createHmacHelper(b)})(),(function(r){for(var l=p,I=l.lib,o=I.WordArray,h=I.Hasher,I=l.algo,b=[],D=[],x=function(T){return 4294967296*(T-(T|0))|0},_=2,M=0;64>M;){var K;t:{K=_;for(var ht=r.sqrt(K),mt=2;mt<=ht;mt++)if(!(K%mt)){K=!1;break t}K=!0}K&&(8>M&&(b[M]=x(r.pow(_,.5))),D[M]=x(r.pow(_,1/3)),M++),_++}var P=[],I=I.SHA256=h.extend({_doReset:function(){this._hash=new o.init(b.slice(0))},_doProcessBlock:function(ut,T){for(var ot=this._hash.words,Y=ot[0],Ft=ot[1],Tt=ot[2],Jt=ot[3],Gt=ot[4],Ae=ot[5],De=ot[6],d=ot[7],B=0;64>B;B++){if(16>B)P[B]=ut[T+B]|0;else{var it=P[B-15],z=P[B-2];P[B]=((it<<25|it>>>7)^(it<<14|it>>>18)^it>>>3)+P[B-7]+((z<<15|z>>>17)^(z<<13|z>>>19)^z>>>10)+P[B-16]}it=d+((Gt<<26|Gt>>>6)^(Gt<<21|Gt>>>11)^(Gt<<7|Gt>>>25))+(Gt&Ae^~Gt&De)+D[B]+P[B],z=((Y<<30|Y>>>2)^(Y<<19|Y>>>13)^(Y<<10|Y>>>22))+(Y&Ft^Y&Tt^Ft&Tt),d=De,De=Ae,Ae=Gt,Gt=Jt+it|0,Jt=Tt,Tt=Ft,Ft=Y,Y=it+z|0}ot[0]=ot[0]+Y|0,ot[1]=ot[1]+Ft|0,ot[2]=ot[2]+Tt|0,ot[3]=ot[3]+Jt|0,ot[4]=ot[4]+Gt|0,ot[5]=ot[5]+Ae|0,ot[6]=ot[6]+De|0,ot[7]=ot[7]+d|0},_doFinalize:function(){var ut=this._data,T=ut.words,ot=8*this._nDataBytes,Y=8*ut.sigBytes;return T[Y>>>5]|=128<<24-Y%32,T[(Y+64>>>9<<4)+14]=r.floor(ot/4294967296),T[(Y+64>>>9<<4)+15]=ot,ut.sigBytes=4*T.length,this._process(),this._hash},clone:function(){var ut=h.clone.call(this);return ut._hash=this._hash.clone(),ut}});l.SHA256=h._createHelper(I),l.HmacSHA256=h._createHmacHelper(I)})(Math),(function(){var r=p,l=r.lib.WordArray,h=r.algo,o=h.SHA256,h=h.SHA224=o.extend({_doReset:function(){this._hash=new l.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var b=o._doFinalize.call(this);return b.sigBytes-=4,b}});r.SHA224=o._createHelper(h),r.HmacSHA224=o._createHmacHelper(h)})(),(function(){function r(){return h.create.apply(h,arguments)}for(var l=p,o=l.lib.Hasher,D=l.x64,h=D.Word,b=D.WordArray,D=l.algo,x=[r(1116352408,3609767458),r(1899447441,602891725),r(3049323471,3964484399),r(3921009573,2173295548),r(961987163,4081628472),r(1508970993,3053834265),r(2453635748,2937671579),r(2870763221,3664609560),r(3624381080,2734883394),r(310598401,1164996542),r(607225278,1323610764),r(1426881987,3590304994),r(1925078388,4068182383),r(2162078206,991336113),r(2614888103,633803317),r(3248222580,3479774868),r(3835390401,2666613458),r(4022224774,944711139),r(264347078,2341262773),r(604807628,2007800933),r(770255983,1495990901),r(1249150122,1856431235),r(1555081692,3175218132),r(1996064986,2198950837),r(2554220882,3999719339),r(2821834349,766784016),r(2952996808,2566594879),r(3210313671,3203337956),r(3336571891,1034457026),r(3584528711,2466948901),r(113926993,3758326383),r(338241895,168717936),r(666307205,1188179964),r(773529912,1546045734),r(1294757372,1522805485),r(1396182291,2643833823),r(1695183700,2343527390),r(1986661051,1014477480),r(2177026350,1206759142),r(2456956037,344077627),r(2730485921,1290863460),r(2820302411,3158454273),r(3259730800,3505952657),r(3345764771,106217008),r(3516065817,3606008344),r(3600352804,1432725776),r(4094571909,1467031594),r(275423344,851169720),r(430227734,3100823752),r(506948616,1363258195),r(659060556,3750685593),r(883997877,3785050280),r(958139571,3318307427),r(1322822218,3812723403),r(1537002063,2003034995),r(1747873779,3602036899),r(1955562222,1575990012),r(2024104815,1125592928),r(2227730452,2716904306),r(2361852424,442776044),r(2428436474,593698344),r(2756734187,3733110249),r(3204031479,2999351573),r(3329325298,3815920427),r(3391569614,3928383900),r(3515267271,566280711),r(3940187606,3454069534),r(4118630271,4000239992),r(116418474,1914138554),r(174292421,2731055270),r(289380356,3203993006),r(460393269,320620315),r(685471733,587496836),r(852142971,1086792851),r(1017036298,365543100),r(1126000580,2618297676),r(1288033470,3409855158),r(1501505948,4234509866),r(1607167915,987167468),r(1816402316,1246189591)],_=[],M=0;80>M;M++)_[M]=r();D=D.SHA512=o.extend({_doReset:function(){this._hash=new b.init([new h.init(1779033703,4089235720),new h.init(3144134277,2227873595),new h.init(1013904242,4271175723),new h.init(2773480762,1595750129),new h.init(1359893119,2917565137),new h.init(2600822924,725511199),new h.init(528734635,4215389547),new h.init(1541459225,327033209)])},_doProcessBlock:function(K,ht){for(var Ft=this._hash.words,mt=Ft[0],P=Ft[1],I=Ft[2],ut=Ft[3],T=Ft[4],ot=Ft[5],Y=Ft[6],Ft=Ft[7],Tt=mt.high,Jt=mt.low,Gt=P.high,Ae=P.low,De=I.high,d=I.low,B=ut.high,it=ut.low,z=T.high,St=T.low,qt=ot.high,ee=ot.low,ie=Y.high,ye=Y.low,$e=Ft.high,Fr=Ft.low,Dr=Tt,wr=Jt,Kr=Gt,Ur=Ae,xn=De,pn=d,bi=B,Ns=it,Es=z,bs=St,Bs=qt,hn=ee,Jn=ie,Tn=ye,Pt=$e,ps=Fr,yn=0;80>yn;yn++){var vs=_[yn];if(16>yn)var Un=vs.high=K[ht+2*yn]|0,mn=vs.low=K[ht+2*yn+1]|0;else{var Un=_[yn-15],mn=Un.high,ci=Un.low,Un=(mn>>>1|ci<<31)^(mn>>>8|ci<<24)^mn>>>7,ci=(ci>>>1|mn<<31)^(ci>>>8|mn<<24)^(ci>>>7|mn<<25),js=_[yn-2],mn=js.high,Ln=js.low,js=(mn>>>19|Ln<<13)^(mn<<3|Ln>>>29)^mn>>>6,Ln=(Ln>>>19|mn<<13)^(Ln<<3|mn>>>29)^(Ln>>>6|mn<<26),mn=_[yn-7],zr=mn.high,ji=_[yn-16],hi=ji.high,ji=ji.low,mn=ci+mn.low,Un=Un+zr+(mn>>>0<ci>>>0?1:0),mn=mn+Ln,Un=Un+js+(mn>>>0<Ln>>>0?1:0),mn=mn+ji,Un=Un+hi+(mn>>>0<ji>>>0?1:0);vs.high=Un,vs.low=mn}var zr=Es&Bs^~Es&Jn,ji=bs&hn^~bs&Tn,vs=Dr&Kr^Dr&xn^Kr&xn,Eo=wr&Ur^wr&pn^Ur&pn,ci=(Dr>>>28|wr<<4)^(Dr<<30|wr>>>2)^(Dr<<25|wr>>>7),js=(wr>>>28|Dr<<4)^(wr<<30|Dr>>>2)^(wr<<25|Dr>>>7),Ln=x[yn],vo=Ln.high,Va=Ln.low,Ln=ps+((bs>>>14|Es<<18)^(bs>>>18|Es<<14)^(bs<<23|Es>>>9)),hi=Pt+((Es>>>14|bs<<18)^(Es>>>18|bs<<14)^(Es<<23|bs>>>9))+(Ln>>>0<ps>>>0?1:0),Ln=Ln+ji,hi=hi+zr+(Ln>>>0<ji>>>0?1:0),Ln=Ln+Va,hi=hi+vo+(Ln>>>0<Va>>>0?1:0),Ln=Ln+mn,hi=hi+Un+(Ln>>>0<mn>>>0?1:0),mn=js+Eo,vs=ci+vs+(mn>>>0<js>>>0?1:0),Pt=Jn,ps=Tn,Jn=Bs,Tn=hn,Bs=Es,hn=bs,bs=Ns+Ln|0,Es=bi+hi+(bs>>>0<Ns>>>0?1:0)|0,bi=xn,Ns=pn,xn=Kr,pn=Ur,Kr=Dr,Ur=wr,wr=Ln+mn|0,Dr=hi+vs+(wr>>>0<Ln>>>0?1:0)|0}Jt=mt.low=Jt+wr,mt.high=Tt+Dr+(Jt>>>0<wr>>>0?1:0),Ae=P.low=Ae+Ur,P.high=Gt+Kr+(Ae>>>0<Ur>>>0?1:0),d=I.low=d+pn,I.high=De+xn+(d>>>0<pn>>>0?1:0),it=ut.low=it+Ns,ut.high=B+bi+(it>>>0<Ns>>>0?1:0),St=T.low=St+bs,T.high=z+Es+(St>>>0<bs>>>0?1:0),ee=ot.low=ee+hn,ot.high=qt+Bs+(ee>>>0<hn>>>0?1:0),ye=Y.low=ye+Tn,Y.high=ie+Jn+(ye>>>0<Tn>>>0?1:0),Fr=Ft.low=Fr+ps,Ft.high=$e+Pt+(Fr>>>0<ps>>>0?1:0)},_doFinalize:function(){var K=this._data,ht=K.words,mt=8*this._nDataBytes,P=8*K.sigBytes;return ht[P>>>5]|=128<<24-P%32,ht[(P+128>>>10<<5)+30]=Math.floor(mt/4294967296),ht[(P+128>>>10<<5)+31]=mt,K.sigBytes=4*ht.length,this._process(),this._hash.toX32()},clone:function(){var K=o.clone.call(this);return K._hash=this._hash.clone(),K},blockSize:32}),l.SHA512=o._createHelper(D),l.HmacSHA512=o._createHmacHelper(D)})(),(function(){var r=p,b=r.x64,l=b.Word,o=b.WordArray,b=r.algo,h=b.SHA512,b=b.SHA384=h.extend({_doReset:function(){this._hash=new o.init([new l.init(3418070365,3238371032),new l.init(1654270250,914150663),new l.init(2438529370,812702999),new l.init(355462360,4144912697),new l.init(1731405415,4290775857),new l.init(2394180231,1750603025),new l.init(3675008525,1694076839),new l.init(1203062813,3204075428)])},_doFinalize:function(){var D=h._doFinalize.call(this);return D.sigBytes-=16,D}});r.SHA384=h._createHelper(b),r.HmacSHA384=h._createHmacHelper(b)})(),(function(){var r=p,K=r.lib,l=K.WordArray,o=K.Hasher,K=r.algo,h=l.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),b=l.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),D=l.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),x=l.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),_=l.create([0,1518500249,1859775393,2400959708,2840853838]),M=l.create([1352829926,1548603684,1836072691,2053994217,0]),K=K.RIPEMD160=o.extend({_doReset:function(){this._hash=l.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(ht,mt){for(var P=0;16>P;P++){var I=mt+P,ut=ht[I];ht[I]=(ut<<8|ut>>>24)&16711935|(ut<<24|ut>>>8)&4278255360}var I=this._hash.words,ut=_.words,T=M.words,ot=h.words,Y=b.words,Ft=D.words,Tt=x.words,Jt,Gt,Ae,De,d,B,it,z,St,qt;B=Jt=I[0],it=Gt=I[1],z=Ae=I[2],St=De=I[3],qt=d=I[4];for(var ee,P=0;80>P;P+=1)ee=Jt+ht[mt+ot[P]]|0,ee=16>P?ee+((Gt^Ae^De)+ut[0]):32>P?ee+((Gt&Ae|~Gt&De)+ut[1]):48>P?ee+(((Gt|~Ae)^De)+ut[2]):64>P?ee+((Gt&De|Ae&~De)+ut[3]):ee+((Gt^(Ae|~De))+ut[4]),ee|=0,ee=ee<<Ft[P]|ee>>>32-Ft[P],ee=ee+d|0,Jt=d,d=De,De=Ae<<10|Ae>>>22,Ae=Gt,Gt=ee,ee=B+ht[mt+Y[P]]|0,ee=16>P?ee+((it^(z|~St))+T[0]):32>P?ee+((it&St|z&~St)+T[1]):48>P?ee+(((it|~z)^St)+T[2]):64>P?ee+((it&z|~it&St)+T[3]):ee+((it^z^St)+T[4]),ee|=0,ee=ee<<Tt[P]|ee>>>32-Tt[P],ee=ee+qt|0,B=qt,qt=St,St=z<<10|z>>>22,z=it,it=ee;ee=I[1]+Ae+St|0,I[1]=I[2]+De+qt|0,I[2]=I[3]+d+B|0,I[3]=I[4]+Jt+it|0,I[4]=I[0]+Gt+z|0,I[0]=ee},_doFinalize:function(){var ht=this._data,mt=ht.words,P=8*this._nDataBytes,I=8*ht.sigBytes;for(mt[I>>>5]|=128<<24-I%32,mt[(I+64>>>9<<4)+14]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,ht.sigBytes=4*(mt.length+1),this._process(),ht=this._hash,mt=ht.words,P=0;5>P;P++)I=mt[P],mt[P]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360;return ht},clone:function(){var ht=o.clone.call(this);return ht._hash=this._hash.clone(),ht}});r.RIPEMD160=o._createHelper(K),r.HmacRIPEMD160=o._createHmacHelper(K)})(Math),(function(){var r=p,l=r.enc.Utf8;r.algo.HMAC=r.lib.Base.extend({init:function(o,h){o=this._hasher=new o.init,typeof h=="string"&&(h=l.parse(h));var b=o.blockSize,D=4*b;h.sigBytes>D&&(h=o.finalize(h)),h.clamp();for(var x=this._oKey=h.clone(),_=this._iKey=h.clone(),M=x.words,K=_.words,ht=0;ht<b;ht++)M[ht]^=1549556828,K[ht]^=909522486;x.sigBytes=_.sigBytes=D,this.reset()},reset:function(){var o=this._hasher;o.reset(),o.update(this._iKey)},update:function(o){return this._hasher.update(o),this},finalize:function(o){var h=this._hasher;return o=h.finalize(o),h.reset(),h.finalize(this._oKey.clone().concat(o))}})})(),(function(){var r=p,h=r.lib,l=h.Base,o=h.WordArray,h=r.algo,b=h.HMAC,D=h.PBKDF2=l.extend({cfg:l.extend({keySize:4,hasher:h.SHA1,iterations:1}),init:function(x){this.cfg=this.cfg.extend(x)},compute:function(x,_){for(var ut=this.cfg,M=b.create(ut.hasher,x),K=o.create(),ht=o.create([1]),mt=K.words,P=ht.words,I=ut.keySize,ut=ut.iterations;mt.length<I;){var T=M.update(_).finalize(ht);M.reset();for(var ot=T.words,Y=ot.length,Ft=T,Tt=1;Tt<ut;Tt++){Ft=M.finalize(Ft),M.reset();for(var Jt=Ft.words,Gt=0;Gt<Y;Gt++)ot[Gt]^=Jt[Gt]}K.concat(T),P[0]++}return K.sigBytes=4*I,K}});r.PBKDF2=function(x,_,M){return D.create(M).compute(x,_)}})();var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y="=";function E(r){var l,o,h="";for(l=0;l+3<=r.length;l+=3)o=parseInt(r.substring(l,l+3),16),h+=g.charAt(o>>6)+g.charAt(o&63);if(l+1==r.length?(o=parseInt(r.substring(l,l+1),16),h+=g.charAt(o<<2)):l+2==r.length&&(o=parseInt(r.substring(l,l+2),16),h+=g.charAt(o>>2)+g.charAt((o&3)<<4)),y)for(;(h.length&3)>0;)h+=y;return h}function m(r){var l="",o,h=0,b,D;for(o=0;o<r.length&&r.charAt(o)!=y;++o)D=g.indexOf(r.charAt(o)),!(D<0)&&(h==0?(l+=lt(D>>2),b=D&3,h=1):h==1?(l+=lt(b<<2|D>>4),b=D&15,h=2):h==2?(l+=lt(b),l+=lt(D>>2),b=D&3,h=3):(l+=lt(b<<2|D>>4),l+=lt(D&15),h=0));return h==1&&(l+=lt(b<<2)),l}function C(r){var l=m(r),o,h=new Array;for(o=0;2*o<l.length;++o)h[o]=parseInt(l.substring(2*o,2*o+2),16);return h}var a,H=0xdeadbeefcafe,X=(H&16777215)==15715070;function w(r,l,o){r!=null&&(typeof r=="number"?this.fromNumber(r,l,o):l==null&&typeof r!="string"?this.fromString(r,256):this.fromString(r,l))}function j(){return new w(null)}function tt(r,l,o,h,b,D){for(;--D>=0;){var x=l*this[r++]+o[h]+b;b=Math.floor(x/67108864),o[h++]=x&67108863}return b}function J(r,l,o,h,b,D){for(var x=l&32767,_=l>>15;--D>=0;){var M=this[r]&32767,K=this[r++]>>15,ht=_*M+K*x;M=x*M+((ht&32767)<<15)+o[h]+(b&1073741823),b=(M>>>30)+(ht>>>15)+_*K+(b>>>30),o[h++]=M&1073741823}return b}function N(r,l,o,h,b,D){for(var x=l&16383,_=l>>14;--D>=0;){var M=this[r]&16383,K=this[r++]>>14,ht=_*M+K*x;M=x*M+((ht&16383)<<14)+o[h]+b,b=(M>>28)+(ht>>14)+_*K,o[h++]=M&268435455}return b}X&&e.appName=="Microsoft Internet Explorer"?(w.prototype.am=J,a=30):X&&e.appName!="Netscape"?(w.prototype.am=tt,a=26):(w.prototype.am=N,a=28),w.prototype.DB=a,w.prototype.DM=(1<<a)-1,w.prototype.DV=1<<a;var Q=52;w.prototype.FV=Math.pow(2,Q),w.prototype.F1=Q-a,w.prototype.F2=2*a-Q;var at="0123456789abcdefghijklmnopqrstuvwxyz",q=new Array,U,V;for(U=48,V=0;V<=9;++V)q[U++]=V;for(U=97,V=10;V<36;++V)q[U++]=V;for(U=65,V=10;V<36;++V)q[U++]=V;function lt(r){return at.charAt(r)}function It(r,l){var o=q[r.charCodeAt(l)];return o??-1}function Ot(r){for(var l=this.t-1;l>=0;--l)r[l]=this[l];r.t=this.t,r.s=this.s}function yt(r){this.t=1,this.s=r<0?-1:0,r>0?this[0]=r:r<-1?this[0]=r+this.DV:this.t=0}function Et(r){var l=j();return l.fromInt(r),l}function vt(r,l){var o;if(l==16)o=4;else if(l==8)o=3;else if(l==256)o=8;else if(l==2)o=1;else if(l==32)o=5;else if(l==4)o=2;else{this.fromRadix(r,l);return}this.t=0,this.s=0;for(var h=r.length,b=!1,D=0;--h>=0;){var x=o==8?r[h]&255:It(r,h);if(x<0){r.charAt(h)=="-"&&(b=!0);continue}b=!1,D==0?this[this.t++]=x:D+o>this.DB?(this[this.t-1]|=(x&(1<<this.DB-D)-1)<<D,this[this.t++]=x>>this.DB-D):this[this.t-1]|=x<<D,D+=o,D>=this.DB&&(D-=this.DB)}o==8&&r[0]&128&&(this.s=-1,D>0&&(this[this.t-1]|=(1<<this.DB-D)-1<<D)),this.clamp(),b&&w.ZERO.subTo(this,this)}function Yt(){for(var r=this.s&this.DM;this.t>0&&this[this.t-1]==r;)--this.t}function Xt(r){if(this.s<0)return"-"+this.negate().toString(r);var l;if(r==16)l=4;else if(r==8)l=3;else if(r==2)l=1;else if(r==32)l=5;else if(r==4)l=2;else return this.toRadix(r);var o=(1<<l)-1,h,b=!1,D="",x=this.t,_=this.DB-x*this.DB%l;if(x-- >0)for(_<this.DB&&(h=this[x]>>_)>0&&(b=!0,D=lt(h));x>=0;)_<l?(h=(this[x]&(1<<_)-1)<<l-_,h|=this[--x]>>(_+=this.DB-l)):(h=this[x]>>(_-=l)&o,_<=0&&(_+=this.DB,--x)),h>0&&(b=!0),b&&(D+=lt(h));return b?D:"0"}function re(){var r=j();return w.ZERO.subTo(this,r),r}function ae(){return this.s<0?this.negate():this}function He(r){var l=this.s-r.s;if(l!=0)return l;var o=this.t;if(l=o-r.t,l!=0)return this.s<0?-l:l;for(;--o>=0;)if((l=this[o]-r[o])!=0)return l;return 0}function de(r){var l=1,o;return(o=r>>>16)!=0&&(r=o,l+=16),(o=r>>8)!=0&&(r=o,l+=8),(o=r>>4)!=0&&(r=o,l+=4),(o=r>>2)!=0&&(r=o,l+=2),(o=r>>1)!=0&&(r=o,l+=1),l}function pe(){return this.t<=0?0:this.DB*(this.t-1)+de(this[this.t-1]^this.s&this.DM)}function Ce(r,l){var o;for(o=this.t-1;o>=0;--o)l[o+r]=this[o];for(o=r-1;o>=0;--o)l[o]=0;l.t=this.t+r,l.s=this.s}function Ie(r,l){for(var o=r;o<this.t;++o)l[o-r]=this[o];l.t=Math.max(this.t-r,0),l.s=this.s}function Ve(r,l){var o=r%this.DB,h=this.DB-o,b=(1<<h)-1,D=Math.floor(r/this.DB),x=this.s<<o&this.DM,_;for(_=this.t-1;_>=0;--_)l[_+D+1]=this[_]>>h|x,x=(this[_]&b)<<o;for(_=D-1;_>=0;--_)l[_]=0;l[D]=x,l.t=this.t+D+1,l.s=this.s,l.clamp()}function We(r,l){l.s=this.s;var o=Math.floor(r/this.DB);if(o>=this.t){l.t=0;return}var h=r%this.DB,b=this.DB-h,D=(1<<h)-1;l[0]=this[o]>>h;for(var x=o+1;x<this.t;++x)l[x-o-1]|=(this[x]&D)<<b,l[x-o]=this[x]>>h;h>0&&(l[this.t-o-1]|=(this.s&D)<<b),l.t=this.t-o,l.clamp()}function we(r,l){for(var o=0,h=0,b=Math.min(r.t,this.t);o<b;)h+=this[o]-r[o],l[o++]=h&this.DM,h>>=this.DB;if(r.t<this.t){for(h-=r.s;o<this.t;)h+=this[o],l[o++]=h&this.DM,h>>=this.DB;h+=this.s}else{for(h+=this.s;o<r.t;)h-=r[o],l[o++]=h&this.DM,h>>=this.DB;h-=r.s}l.s=h<0?-1:0,h<-1?l[o++]=this.DV+h:h>0&&(l[o++]=h),l.t=o,l.clamp()}function Se(r,l){var o=this.abs(),h=r.abs(),b=o.t;for(l.t=b+h.t;--b>=0;)l[b]=0;for(b=0;b<h.t;++b)l[b+o.t]=o.am(0,h[b],l,b,0,o.t);l.s=0,l.clamp(),this.s!=r.s&&w.ZERO.subTo(l,l)}function Qe(r){for(var l=this.abs(),o=r.t=2*l.t;--o>=0;)r[o]=0;for(o=0;o<l.t-1;++o){var h=l.am(o,l[o],r,2*o,0,1);(r[o+l.t]+=l.am(o+1,2*l[o],r,2*o+1,h,l.t-o-1))>=l.DV&&(r[o+l.t]-=l.DV,r[o+l.t+1]=1)}r.t>0&&(r[r.t-1]+=l.am(o,l[o],r,2*o,0,1)),r.s=0,r.clamp()}function Ke(r,l,o){var h=r.abs();if(!(h.t<=0)){var b=this.abs();if(b.t<h.t){l?.fromInt(0),o!=null&&this.copyTo(o);return}o==null&&(o=j());var D=j(),x=this.s,_=r.s,M=this.DB-de(h[h.t-1]);M>0?(h.lShiftTo(M,D),b.lShiftTo(M,o)):(h.copyTo(D),b.copyTo(o));var K=D.t,ht=D[K-1];if(ht!=0){var mt=ht*(1<<this.F1)+(K>1?D[K-2]>>this.F2:0),P=this.FV/mt,I=(1<<this.F1)/mt,ut=1<<this.F2,T=o.t,ot=T-K,Y=l??j();for(D.dlShiftTo(ot,Y),o.compareTo(Y)>=0&&(o[o.t++]=1,o.subTo(Y,o)),w.ONE.dlShiftTo(K,Y),Y.subTo(D,D);D.t<K;)D[D.t++]=0;for(;--ot>=0;){var Ft=o[--T]==ht?this.DM:Math.floor(o[T]*P+(o[T-1]+ut)*I);if((o[T]+=D.am(0,Ft,o,ot,0,K))<Ft)for(D.dlShiftTo(ot,Y),o.subTo(Y,o);o[T]<--Ft;)o.subTo(Y,o)}l!=null&&(o.drShiftTo(K,l),x!=_&&w.ZERO.subTo(l,l)),o.t=K,o.clamp(),M>0&&o.rShiftTo(M,o),x<0&&w.ZERO.subTo(o,o)}}}function Ze(r){var l=j();return this.abs().divRemTo(r,null,l),this.s<0&&l.compareTo(w.ZERO)>0&&r.subTo(l,l),l}function vr(r){this.m=r}function Pr(r){return r.s<0||r.compareTo(this.m)>=0?r.mod(this.m):r}function Cr(r){return r}function et(r){r.divRemTo(this.m,null,r)}function k(r,l,o){r.multiplyTo(l,o),this.reduce(o)}function Z(r,l){r.squareTo(l),this.reduce(l)}vr.prototype.convert=Pr,vr.prototype.revert=Cr,vr.prototype.reduce=et,vr.prototype.mulTo=k,vr.prototype.sqrTo=Z;function se(){if(this.t<1)return 0;var r=this[0];if(!(r&1))return 0;var l=r&3;return l=l*(2-(r&15)*l)&15,l=l*(2-(r&255)*l)&255,l=l*(2-((r&65535)*l&65535))&65535,l=l*(2-r*l%this.DV)%this.DV,l>0?this.DV-l:-l}function Ee(r){this.m=r,this.mp=r.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<r.DB-15)-1,this.mt2=2*r.t}function rr(r){var l=j();return r.abs().dlShiftTo(this.m.t,l),l.divRemTo(this.m,null,l),r.s<0&&l.compareTo(w.ZERO)>0&&this.m.subTo(l,l),l}function fr(r){var l=j();return r.copyTo(l),this.reduce(l),l}function yr(r){for(;r.t<=this.mt2;)r[r.t++]=0;for(var l=0;l<this.m.t;++l){var o=r[l]&32767,h=o*this.mpl+((o*this.mph+(r[l]>>15)*this.mpl&this.um)<<15)&r.DM;for(o=l+this.m.t,r[o]+=this.m.am(0,h,r,l,0,this.m.t);r[o]>=r.DV;)r[o]-=r.DV,r[++o]++}r.clamp(),r.drShiftTo(this.m.t,r),r.compareTo(this.m)>=0&&r.subTo(this.m,r)}function ur(r,l){r.squareTo(l),this.reduce(l)}function er(r,l,o){r.multiplyTo(l,o),this.reduce(o)}Ee.prototype.convert=rr,Ee.prototype.revert=fr,Ee.prototype.reduce=yr,Ee.prototype.mulTo=er,Ee.prototype.sqrTo=ur;function Wr(){return(this.t>0?this[0]&1:this.s)==0}function Lr(r,l){if(r>4294967295||r<1)return w.ONE;var o=j(),h=j(),b=l.convert(this),D=de(r)-1;for(b.copyTo(o);--D>=0;)if(l.sqrTo(o,h),(r&1<<D)>0)l.mulTo(h,b,o);else{var x=o;o=h,h=x}return l.revert(o)}function Sr(r,l){var o;return r<256||l.isEven()?o=new vr(l):o=new Ee(l),this.exp(r,o)}w.prototype.copyTo=Ot,w.prototype.fromInt=yt,w.prototype.fromString=vt,w.prototype.clamp=Yt,w.prototype.dlShiftTo=Ce,w.prototype.drShiftTo=Ie,w.prototype.lShiftTo=Ve,w.prototype.rShiftTo=We,w.prototype.subTo=we,w.prototype.multiplyTo=Se,w.prototype.squareTo=Qe,w.prototype.divRemTo=Ke,w.prototype.invDigit=se,w.prototype.isEven=Wr,w.prototype.exp=Lr,w.prototype.toString=Xt,w.prototype.negate=re,w.prototype.abs=ae,w.prototype.compareTo=He,w.prototype.bitLength=pe,w.prototype.mod=Ze,w.prototype.modPowInt=Sr,w.ZERO=Et(0),w.ONE=Et(1);function L(){var r=j();return this.copyTo(r),r}function f(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function S(){return this.t==0?this.s:this[0]<<24>>24}function W(){return this.t==0?this.s:this[0]<<16>>16}function Bt(r){return Math.floor(Math.LN2*this.DB/Math.log(r))}function Nt(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function nt(r){if(r==null&&(r=10),this.signum()==0||r<2||r>36)return"0";var l=this.chunkSize(r),o=Math.pow(r,l),h=Et(o),b=j(),D=j(),x="";for(this.divRemTo(h,b,D);b.signum()>0;)x=(o+D.intValue()).toString(r).substr(1)+x,b.divRemTo(h,b,D);return D.intValue().toString(r)+x}function zt(r,l){this.fromInt(0),l==null&&(l=10);for(var o=this.chunkSize(l),h=Math.pow(l,o),b=!1,D=0,x=0,_=0;_<r.length;++_){var M=It(r,_);if(M<0){r.charAt(_)=="-"&&this.signum()==0&&(b=!0);continue}x=l*x+M,++D>=o&&(this.dMultiply(h),this.dAddOffset(x,0),D=0,x=0)}D>0&&(this.dMultiply(Math.pow(l,D)),this.dAddOffset(x,0)),b&&w.ZERO.subTo(this,this)}function Lt(r,l,o){if(typeof l=="number")if(r<2)this.fromInt(1);else for(this.fromNumber(r,o),this.testBit(r-1)||this.bitwiseTo(w.ONE.shiftLeft(r-1),Ct,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(l);)this.dAddOffset(2,0),this.bitLength()>r&&this.subTo(w.ONE.shiftLeft(r-1),this);else{var h=new Array,b=r&7;h.length=(r>>3)+1,l.nextBytes(h),b>0?h[0]&=(1<<b)-1:h[0]=0,this.fromString(h,256)}}function Be(){var r=this.t,l=new Array;l[0]=this.s;var o=this.DB-r*this.DB%8,h,b=0;if(r-- >0)for(o<this.DB&&(h=this[r]>>o)!=(this.s&this.DM)>>o&&(l[b++]=h|this.s<<this.DB-o);r>=0;)o<8?(h=(this[r]&(1<<o)-1)<<8-o,h|=this[--r]>>(o+=this.DB-8)):(h=this[r]>>(o-=8)&255,o<=0&&(o+=this.DB,--r)),h&128&&(h|=-256),b==0&&(this.s&128)!=(h&128)&&++b,(b>0||h!=this.s)&&(l[b++]=h);return l}function _t(r){return this.compareTo(r)==0}function gt(r){return this.compareTo(r)<0?this:r}function rt(r){return this.compareTo(r)>0?this:r}function F(r,l,o){var h,b,D=Math.min(r.t,this.t);for(h=0;h<D;++h)o[h]=l(this[h],r[h]);if(r.t<this.t){for(b=r.s&this.DM,h=D;h<this.t;++h)o[h]=l(this[h],b);o.t=this.t}else{for(b=this.s&this.DM,h=D;h<r.t;++h)o[h]=l(b,r[h]);o.t=r.t}o.s=l(this.s,r.s),o.clamp()}function st(r,l){return r&l}function wt(r){var l=j();return this.bitwiseTo(r,st,l),l}function Ct(r,l){return r|l}function Ut(r){var l=j();return this.bitwiseTo(r,Ct,l),l}function Wt(r,l){return r^l}function xe(r){var l=j();return this.bitwiseTo(r,Wt,l),l}function te(r,l){return r&~l}function ve(r){var l=j();return this.bitwiseTo(r,te,l),l}function Re(){for(var r=j(),l=0;l<this.t;++l)r[l]=this.DM&~this[l];return r.t=this.t,r.s=~this.s,r}function sr(r){var l=j();return r<0?this.rShiftTo(-r,l):this.lShiftTo(r,l),l}function O(r){var l=j();return r<0?this.lShiftTo(-r,l):this.rShiftTo(r,l),l}function le(r){if(r==0)return-1;var l=0;return r&65535||(r>>=16,l+=16),r&255||(r>>=8,l+=8),r&15||(r>>=4,l+=4),r&3||(r>>=2,l+=2),r&1||++l,l}function Kt(){for(var r=0;r<this.t;++r)if(this[r]!=0)return r*this.DB+le(this[r]);return this.s<0?this.t*this.DB:-1}function he(r){for(var l=0;r!=0;)r&=r-1,++l;return l}function kt(){for(var r=0,l=this.s&this.DM,o=0;o<this.t;++o)r+=he(this[o]^l);return r}function ne(r){var l=Math.floor(r/this.DB);return l>=this.t?this.s!=0:(this[l]&1<<r%this.DB)!=0}function Oe(r,l){var o=w.ONE.shiftLeft(r);return this.bitwiseTo(o,l,o),o}function _e(r){return this.changeBit(r,Ct)}function Te(r){return this.changeBit(r,te)}function Ue(r){return this.changeBit(r,Wt)}function tr(r,l){for(var o=0,h=0,b=Math.min(r.t,this.t);o<b;)h+=this[o]+r[o],l[o++]=h&this.DM,h>>=this.DB;if(r.t<this.t){for(h+=r.s;o<this.t;)h+=this[o],l[o++]=h&this.DM,h>>=this.DB;h+=this.s}else{for(h+=this.s;o<r.t;)h+=r[o],l[o++]=h&this.DM,h>>=this.DB;h+=r.s}l.s=h<0?-1:0,h>0?l[o++]=h:h<-1&&(l[o++]=this.DV+h),l.t=o,l.clamp()}function lr(r){var l=j();return this.addTo(r,l),l}function ar(r){var l=j();return this.subTo(r,l),l}function Ar(r){var l=j();return this.multiplyTo(r,l),l}function jr(){var r=j();return this.squareTo(r),r}function ln(r){var l=j();return this.divRemTo(r,l,null),l}function cn(r){var l=j();return this.divRemTo(r,null,l),l}function Mr(r){var l=j(),o=j();return this.divRemTo(r,l,o),new Array(l,o)}function mr(r){this[this.t]=this.am(0,r-1,this,0,0,this.t),++this.t,this.clamp()}function Nr(r,l){if(r!=0){for(;this.t<=l;)this[this.t++]=0;for(this[l]+=r;this[l]>=this.DV;)this[l]-=this.DV,++l>=this.t&&(this[this.t++]=0),++this[l]}}function gn(){}function Kn(r){return r}function tn(r,l,o){r.multiplyTo(l,o)}function Wn(r,l){r.squareTo(l)}gn.prototype.convert=Kn,gn.prototype.revert=Kn,gn.prototype.mulTo=tn,gn.prototype.sqrTo=Wn;function Br(r){return this.exp(r,new gn)}function bn(r,l,o){var h=Math.min(this.t+r.t,l);for(o.s=0,o.t=h;h>0;)o[--h]=0;var b;for(b=o.t-this.t;h<b;++h)o[h+this.t]=this.am(0,r[h],o,h,0,this.t);for(b=Math.min(r.t,l);h<b;++h)this.am(0,r[h],o,h,0,l-h);o.clamp()}function as(r,l,o){--l;var h=o.t=this.t+r.t-l;for(o.s=0;--h>=0;)o[h]=0;for(h=Math.max(l-this.t,0);h<r.t;++h)o[this.t+h-l]=this.am(l-h,r[h],o,0,0,this.t+h-l);o.clamp(),o.drShiftTo(1,o)}function _n(r){this.r2=j(),this.q3=j(),w.ONE.dlShiftTo(2*r.t,this.r2),this.mu=this.r2.divide(r),this.m=r}function $s(r){if(r.s<0||r.t>2*this.m.t)return r.mod(this.m);if(r.compareTo(this.m)<0)return r;var l=j();return r.copyTo(l),this.reduce(l),l}function Zr(r){return r}function _s(r){for(r.drShiftTo(this.m.t-1,this.r2),r.t>this.m.t+1&&(r.t=this.m.t+1,r.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);r.compareTo(this.r2)<0;)r.dAddOffset(1,this.m.t+1);for(r.subTo(this.r2,r);r.compareTo(this.m)>=0;)r.subTo(this.m,r)}function ks(r,l){r.squareTo(l),this.reduce(l)}function Xs(r,l,o){r.multiplyTo(l,o),this.reduce(o)}_n.prototype.convert=$s,_n.prototype.revert=Zr,_n.prototype.reduce=_s,_n.prototype.mulTo=Xs,_n.prototype.sqrTo=ks;function qs(r,l){var o=r.bitLength(),h,b=Et(1),D;if(o<=0)return b;o<18?h=1:o<48?h=3:o<144?h=4:o<768?h=5:h=6,o<8?D=new vr(l):l.isEven()?D=new _n(l):D=new Ee(l);var x=new Array,_=3,M=h-1,K=(1<<h)-1;if(x[1]=D.convert(this),h>1){var ht=j();for(D.sqrTo(x[1],ht);_<=K;)x[_]=j(),D.mulTo(ht,x[_-2],x[_]),_+=2}var mt=r.t-1,P,I=!0,ut=j(),T;for(o=de(r[mt])-1;mt>=0;){for(o>=M?P=r[mt]>>o-M&K:(P=(r[mt]&(1<<o+1)-1)<<M-o,mt>0&&(P|=r[mt-1]>>this.DB+o-M)),_=h;!(P&1);)P>>=1,--_;if((o-=_)<0&&(o+=this.DB,--mt),I)x[P].copyTo(b),I=!1;else{for(;_>1;)D.sqrTo(b,ut),D.sqrTo(ut,b),_-=2;_>0?D.sqrTo(b,ut):(T=b,b=ut,ut=T),D.mulTo(ut,x[P],b)}for(;mt>=0&&!(r[mt]&1<<o);)D.sqrTo(b,ut),T=b,b=ut,ut=T,--o<0&&(o=this.DB-1,--mt)}return D.revert(b)}function os(r){var l=this.s<0?this.negate():this.clone(),o=r.s<0?r.negate():r.clone();if(l.compareTo(o)<0){var h=l;l=o,o=h}var b=l.getLowestSetBit(),D=o.getLowestSetBit();if(D<0)return l;for(b<D&&(D=b),D>0&&(l.rShiftTo(D,l),o.rShiftTo(D,o));l.signum()>0;)(b=l.getLowestSetBit())>0&&l.rShiftTo(b,l),(b=o.getLowestSetBit())>0&&o.rShiftTo(b,o),l.compareTo(o)>=0?(l.subTo(o,l),l.rShiftTo(1,l)):(o.subTo(l,o),o.rShiftTo(1,o));return D>0&&o.lShiftTo(D,o),o}function In(r){if(r<=0)return 0;var l=this.DV%r,o=this.s<0?r-1:0;if(this.t>0)if(l==0)o=this[0]%r;else for(var h=this.t-1;h>=0;--h)o=(l*o+this[h])%r;return o}function Si(r){var l=r.isEven();if(this.isEven()&&l||r.signum()==0)return w.ZERO;for(var o=r.clone(),h=this.clone(),b=Et(1),D=Et(0),x=Et(0),_=Et(1);o.signum()!=0;){for(;o.isEven();)o.rShiftTo(1,o),l?((!b.isEven()||!D.isEven())&&(b.addTo(this,b),D.subTo(r,D)),b.rShiftTo(1,b)):D.isEven()||D.subTo(r,D),D.rShiftTo(1,D);for(;h.isEven();)h.rShiftTo(1,h),l?((!x.isEven()||!_.isEven())&&(x.addTo(this,x),_.subTo(r,_)),x.rShiftTo(1,x)):_.isEven()||_.subTo(r,_),_.rShiftTo(1,_);o.compareTo(h)>=0?(o.subTo(h,o),l&&b.subTo(x,b),D.subTo(_,D)):(h.subTo(o,h),l&&x.subTo(b,x),_.subTo(D,_))}if(h.compareTo(w.ONE)!=0)return w.ZERO;if(_.compareTo(r)>=0)return _.subtract(r);if(_.signum()<0)_.addTo(r,_);else return _;return _.signum()<0?_.add(r):_}var Xn=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],ls=(1<<26)/Xn[Xn.length-1];function Vi(r){var l,o=this.abs();if(o.t==1&&o[0]<=Xn[Xn.length-1]){for(l=0;l<Xn.length;++l)if(o[0]==Xn[l])return!0;return!1}if(o.isEven())return!1;for(l=1;l<Xn.length;){for(var h=Xn[l],b=l+1;b<Xn.length&&h<ls;)h*=Xn[b++];for(h=o.modInt(h);l<b;)if(h%Xn[l++]==0)return!1}return o.millerRabin(r)}function Ki(r){var l=this.subtract(w.ONE),o=l.getLowestSetBit();if(o<=0)return!1;var h=l.shiftRight(o);r=r+1>>1,r>Xn.length&&(r=Xn.length);for(var b=j(),D=0;D<r;++D){b.fromInt(Xn[Math.floor(Math.random()*Xn.length)]);var x=b.modPow(h,this);if(x.compareTo(w.ONE)!=0&&x.compareTo(l)!=0){for(var _=1;_++<o&&x.compareTo(l)!=0;)if(x=x.modPowInt(2,this),x.compareTo(w.ONE)==0)return!1;if(x.compareTo(l)!=0)return!1}}return!0}w.prototype.chunkSize=Bt,w.prototype.toRadix=nt,w.prototype.fromRadix=zt,w.prototype.fromNumber=Lt,w.prototype.bitwiseTo=F,w.prototype.changeBit=Oe,w.prototype.addTo=tr,w.prototype.dMultiply=mr,w.prototype.dAddOffset=Nr,w.prototype.multiplyLowerTo=bn,w.prototype.multiplyUpperTo=as,w.prototype.modInt=In,w.prototype.millerRabin=Ki,w.prototype.clone=L,w.prototype.intValue=f,w.prototype.byteValue=S,w.prototype.shortValue=W,w.prototype.signum=Nt,w.prototype.toByteArray=Be,w.prototype.equals=_t,w.prototype.min=gt,w.prototype.max=rt,w.prototype.and=wt,w.prototype.or=Ut,w.prototype.xor=xe,w.prototype.andNot=ve,w.prototype.not=Re,w.prototype.shiftLeft=sr,w.prototype.shiftRight=O,w.prototype.getLowestSetBit=Kt,w.prototype.bitCount=kt,w.prototype.testBit=ne,w.prototype.setBit=_e,w.prototype.clearBit=Te,w.prototype.flipBit=Ue,w.prototype.add=lr,w.prototype.subtract=ar,w.prototype.multiply=Ar,w.prototype.divide=ln,w.prototype.remainder=cn,w.prototype.divideAndRemainder=Mr,w.prototype.modPow=qs,w.prototype.modInverse=Si,w.prototype.pow=Br,w.prototype.gcd=os,w.prototype.isProbablePrime=Vi,w.prototype.square=jr;function Bi(){this.i=0,this.j=0,this.S=new Array}function pu(r){var l,o,h;for(l=0;l<256;++l)this.S[l]=l;for(o=0,l=0;l<256;++l)o=o+this.S[l]+r[l%r.length]&255,h=this.S[l],this.S[l]=this.S[o],this.S[o]=h;this.i=0,this.j=0}function Ei(){var r;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,r=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=r,this.S[r+this.S[this.i]&255]}Bi.prototype.init=pu,Bi.prototype.next=Ei;function zi(){return new Bi}var Ii=256,oi,ns,Cn;function bt(r){ns[Cn++]^=r&255,ns[Cn++]^=r>>8&255,ns[Cn++]^=r>>16&255,ns[Cn++]^=r>>24&255,Cn>=Ii&&(Cn-=Ii)}function Rt(){bt(new Date().getTime())}if(ns==null){if(ns=new Array,Cn=0,n!==void 0&&(n.crypto!==void 0||n.msCrypto!==void 0)){if(ge=n.crypto||n.msCrypto,ge.getRandomValues)for(Me=new Uint8Array(32),ge.getRandomValues(Me),Mt=0;Mt<32;++Mt)ns[Cn++]=Me[Mt];else if(e.appName=="Netscape"&&e.appVersion<"5")for(Ye=n.crypto.random(32),Mt=0;Mt<Ye.length;++Mt)ns[Cn++]=Ye.charCodeAt(Mt)&255}for(;Cn<Ii;)Mt=Math.floor(65536*Math.random()),ns[Cn++]=Mt>>>8,ns[Cn++]=Mt&255;Cn=0,Rt()}var Mt,ge,Me,Ye;function ir(){if(oi==null){for(Rt(),oi=zi(),oi.init(ns),Cn=0;Cn<ns.length;++Cn)ns[Cn]=0;Cn=0}return oi.next()}function cr(r){var l;for(l=0;l<r.length;++l)r[l]=ir()}function nn(){}nn.prototype.nextBytes=cr;function en(r,l){return new w(r,l)}function Er(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function hs(r,l){if(this.isPublic=!0,this.isPrivate=!1,typeof r!="string")this.n=r,this.e=l;else if(r!=null&&l!=null&&r.length>0&&l.length>0)this.n=en(r,16),this.e=parseInt(l,16);else throw"Invalid RSA public key"}function Ps(r){return r.modPowInt(this.e,this.n)}Er.prototype.doPublic=Ps,Er.prototype.setPublic=hs,Er.prototype.type="RSA";function Ri(r,l,o){if(this.isPrivate=!0,typeof r!="string")this.n=r,this.e=l,this.d=o;else if(r!=null&&l!=null&&r.length>0&&l.length>0)this.n=en(r,16),this.e=parseInt(l,16),this.d=en(o,16);else throw"Invalid RSA private key"}function ws(r,l,o,h,b,D,x,_){if(this.isPrivate=!0,this.isPublic=!1,r==null)throw"RSASetPrivateEx N == null";if(l==null)throw"RSASetPrivateEx E == null";if(r.length==0)throw"RSASetPrivateEx N.length == 0";if(l.length==0)throw"RSASetPrivateEx E.length == 0";if(r!=null&&l!=null&&r.length>0&&l.length>0)this.n=en(r,16),this.e=parseInt(l,16),this.d=en(o,16),this.p=en(h,16),this.q=en(b,16),this.dmp1=en(D,16),this.dmq1=en(x,16),this.coeff=en(_,16);else throw"Invalid RSA private key in RSASetPrivateEx"}function ds(r,l){var o=new nn,h=r>>1;this.e=parseInt(l,16);for(var b=new w(l,16),D=r/2-100,x=w.ONE.shiftLeft(D);;){for(;this.p=new w(r-h,1,o),!(this.p.subtract(w.ONE).gcd(b).compareTo(w.ONE)==0&&this.p.isProbablePrime(10)););for(;this.q=new w(h,1,o),!(this.q.subtract(w.ONE).gcd(b).compareTo(w.ONE)==0&&this.q.isProbablePrime(10)););if(this.p.compareTo(this.q)<=0){var _=this.p;this.p=this.q,this.q=_}var M=this.q.subtract(this.p).abs();if(!(M.bitLength()<D||M.compareTo(x)<=0)){var K=this.p.subtract(w.ONE),ht=this.q.subtract(w.ONE),mt=K.multiply(ht);if(mt.gcd(b).compareTo(w.ONE)==0&&(this.n=this.p.multiply(this.q),this.n.bitLength()==r)){this.d=b.modInverse(mt),this.dmp1=this.d.mod(K),this.dmq1=this.d.mod(ht),this.coeff=this.q.modInverse(this.p);break}}}this.isPrivate=!0}function $i(r){if(this.p==null||this.q==null)return r.modPow(this.d,this.n);for(var l=r.mod(this.p).modPow(this.dmp1,this.p),o=r.mod(this.q).modPow(this.dmq1,this.q);l.compareTo(o)<0;)l=l.add(this.p);return l.subtract(o).multiply(this.coeff).mod(this.p).multiply(this.q).add(o)}Er.prototype.doPrivate=$i,Er.prototype.setPrivate=Ri,Er.prototype.setPrivateEx=ws,Er.prototype.generate=ds;function En(r,l){this.x=l,this.q=r}function Gi(r){return r==this?!0:this.q.equals(r.q)&&this.x.equals(r.x)}function wa(){return this.x}function Fa(){return new En(this.q,this.x.negate().mod(this.q))}function Rn(r){return new En(this.q,this.x.add(r.toBigInteger()).mod(this.q))}function Sn(r){return new En(this.q,this.x.subtract(r.toBigInteger()).mod(this.q))}function ba(r){return new En(this.q,this.x.multiply(r.toBigInteger()).mod(this.q))}function Ca(){return new En(this.q,this.x.square().mod(this.q))}function Da(r){return new En(this.q,this.x.multiply(r.toBigInteger().modInverse(this.q)).mod(this.q))}En.prototype.equals=Gi,En.prototype.toBigInteger=wa,En.prototype.negate=Fa,En.prototype.add=Rn,En.prototype.subtract=Sn,En.prototype.multiply=ba,En.prototype.square=Ca,En.prototype.divide=Da,En.prototype.sqrt=function(){return new En(this.q,this.x.sqrt().mod(this.q))};function sn(r,l,o,h){this.curve=r,this.x=l,this.y=o,h==null?this.z=w.ONE:this.z=h,this.zinv=null}function xa(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function _a(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function Xu(r){if(r==this)return!0;if(this.isInfinity())return r.isInfinity();if(r.isInfinity())return this.isInfinity();var l,o;return l=r.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(r.z)).mod(this.curve.q),l.equals(w.ZERO)?(o=r.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(r.z)).mod(this.curve.q),o.equals(w.ZERO)):!1}function Sa(){return this.x==null&&this.y==null?!0:this.z.equals(w.ZERO)&&!this.y.toBigInteger().equals(w.ZERO)}function Qn(){return new sn(this.curve,this.x,this.y.negate(),this.z)}function Cu(r){if(this.isInfinity())return r;if(r.isInfinity())return this;var l=r.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(r.z)).mod(this.curve.q),o=r.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(r.z)).mod(this.curve.q);if(w.ZERO.equals(o))return w.ZERO.equals(l)?this.twice():this.curve.getInfinity();var h=new w("3"),b=this.x.toBigInteger(),D=this.y.toBigInteger(),x=r.x.toBigInteger(),_=r.y.toBigInteger(),M=o.square(),K=M.multiply(o),ht=b.multiply(M),mt=l.square().multiply(this.z),P=mt.subtract(ht.shiftLeft(1)).multiply(r.z).subtract(K).multiply(o).mod(this.curve.q),I=ht.multiply(h).multiply(l).subtract(D.multiply(K)).subtract(mt.multiply(l)).multiply(r.z).add(l.multiply(K)).mod(this.curve.q),ut=K.multiply(this.z).multiply(r.z).mod(this.curve.q);return new sn(this.curve,this.curve.fromBigInteger(P),this.curve.fromBigInteger(I),ut)}function vi(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var r=new w("3"),l=this.x.toBigInteger(),o=this.y.toBigInteger(),h=o.multiply(this.z),b=h.multiply(o).mod(this.curve.q),D=this.curve.a.toBigInteger(),x=l.square().multiply(r);w.ZERO.equals(D)||(x=x.add(this.z.square().multiply(D))),x=x.mod(this.curve.q);var _=x.square().subtract(l.shiftLeft(3).multiply(b)).shiftLeft(1).multiply(h).mod(this.curve.q),M=x.multiply(r).multiply(l).subtract(b.shiftLeft(1)).shiftLeft(2).multiply(b).subtract(x.square().multiply(x)).mod(this.curve.q),K=h.square().multiply(h).shiftLeft(3).mod(this.curve.q);return new sn(this.curve,this.curve.fromBigInteger(_),this.curve.fromBigInteger(M),K)}function Zu(r){if(this.isInfinity())return this;if(r.signum()==0)return this.curve.getInfinity();var l=r,o=l.multiply(new w("3")),h=this.negate(),b=this,D=this.curve.q.subtract(r),x=D.multiply(new w("3")),_=new sn(this.curve,this.x,this.y),M=_.negate(),K;for(K=o.bitLength()-2;K>0;--K){b=b.twice();var ht=o.testBit(K),mt=l.testBit(K);ht!=mt&&(b=b.add(ht?this:h))}for(K=x.bitLength()-2;K>0;--K){_=_.twice();var P=x.testBit(K),I=D.testBit(K);P!=I&&(_=_.add(P?_:M))}return b}function Du(r,l,o){var h;r.bitLength()>o.bitLength()?h=r.bitLength()-1:h=o.bitLength()-1;for(var b=this.curve.getInfinity(),D=this.add(l);h>=0;)b=b.twice(),r.testBit(h)?o.testBit(h)?b=b.add(D):b=b.add(this):o.testBit(h)&&(b=b.add(l)),--h;return b}sn.prototype.getX=xa,sn.prototype.getY=_a,sn.prototype.equals=Xu,sn.prototype.isInfinity=Sa,sn.prototype.negate=Qn,sn.prototype.add=Cu,sn.prototype.twice=vi,sn.prototype.multiply=Zu,sn.prototype.multiplyTwo=Du;function Yn(r,l,o){this.q=r,this.a=this.fromBigInteger(l),this.b=this.fromBigInteger(o),this.infinity=new sn(this,null,null)}function Qu(){return this.q}function ta(){return this.a}function ea(){return this.b}function ra(r){return r==this?!0:this.q.equals(r.q)&&this.a.equals(r.a)&&this.b.equals(r.b)}function sa(){return this.infinity}function ia(r){return new En(this.q,r)}function Fs(r){switch(parseInt(r.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:var l=r.substr(0,2),o=r.substr(2),h=this.fromBigInteger(new w(K,16)),b=this.getA(),D=this.getB(),x=h.square().add(b).multiply(h).add(D),_=x.sqrt();return l=="03"&&(_=_.negate()),new sn(this,h,_);case 4:case 6:case 7:var M=(r.length-2)/2,K=r.substr(2,M),ht=r.substr(M+2,M);return new sn(this,this.fromBigInteger(new w(K,16)),this.fromBigInteger(new w(ht,16)));default:return null}}Yn.prototype.getQ=Qu,Yn.prototype.getA=ta,Yn.prototype.getB=ea,Yn.prototype.equals=ra,Yn.prototype.getInfinity=sa,Yn.prototype.fromBigInteger=ia,Yn.prototype.decodePointHex=Fs,En.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},sn.prototype.getEncoded=function(r){var l=function(D,x){var _=D.toByteArrayUnsigned();if(x<_.length)_=_.slice(_.length-x);else for(;x>_.length;)_.unshift(0);return _},o=this.getX().toBigInteger(),h=this.getY().toBigInteger(),b=l(o,32);return r?h.isEven()?b.unshift(2):b.unshift(3):(b.unshift(4),b=b.concat(l(h,32))),b},sn.decodeFrom=function(r,l){var o=l[0],h=l.length-1,b=l.slice(1,1+h/2),D=l.slice(1+h/2,1+h);b.unshift(0),D.unshift(0);var x=new w(b),_=new w(D);return new sn(r,r.fromBigInteger(x),r.fromBigInteger(_))},sn.decodeFromHex=function(r,l){var o=l.substr(0,2),h=l.length-2,b=l.substr(2,h/2),D=l.substr(2+h/2,h/2),x=new w(b,16),_=new w(D,16);return new sn(r,r.fromBigInteger(x),r.fromBigInteger(_))},sn.prototype.add2D=function(r){if(this.isInfinity())return r;if(r.isInfinity())return this;if(this.x.equals(r.x))return this.y.equals(r.y)?this.twice():this.curve.getInfinity();var l=r.x.subtract(this.x),o=r.y.subtract(this.y),h=o.divide(l),b=h.square().subtract(this.x).subtract(r.x),D=h.multiply(this.x.subtract(b)).subtract(this.y);return new sn(this.curve,b,D)},sn.prototype.twice2D=function(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var r=this.curve.fromBigInteger(w.valueOf(2)),l=this.curve.fromBigInteger(w.valueOf(3)),o=this.x.square().multiply(l).add(this.curve.a).divide(this.y.multiply(r)),h=o.square().subtract(this.x.multiply(r)),b=o.multiply(this.x.subtract(h)).subtract(this.y);return new sn(this.curve,h,b)},sn.prototype.multiply2D=function(r){if(this.isInfinity())return this;if(r.signum()==0)return this.curve.getInfinity();var l=r,o=l.multiply(new w("3")),h=this.negate(),b=this,D;for(D=o.bitLength()-2;D>0;--D){b=b.twice();var x=o.testBit(D),_=l.testBit(D);x!=_&&(b=b.add2D(x?this:h))}return b},sn.prototype.isOnCurve=function(){var r=this.getX().toBigInteger(),l=this.getY().toBigInteger(),o=this.curve.getA().toBigInteger(),h=this.curve.getB().toBigInteger(),b=this.curve.getQ(),D=l.multiply(l).mod(b),x=r.multiply(r).multiply(r).add(o.multiply(r)).add(h).mod(b);return D.equals(x)},sn.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},sn.prototype.validate=function(){var r=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var l=this.getX().toBigInteger(),o=this.getY().toBigInteger();if(l.compareTo(w.ONE)<0||l.compareTo(r.subtract(w.ONE))>0)throw new Error("x coordinate out of bounds");if(o.compareTo(w.ONE)<0||o.compareTo(r.subtract(w.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(r).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var aa=(function(){var r="(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)",l='(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))',o='(?:"'+l+'*")',h=new RegExp("(?:false|true|null|[\\{\\}\\[\\]]|"+r+"|"+o+")","g"),b=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),D={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function x(mt,P,I){return P?D[P]:String.fromCharCode(parseInt(I,16))}var _=new String(""),M="\\",K={"{":Object,"[":Array},ht=Object.hasOwnProperty;return function(mt,P){var I=mt.match(h),ut,T=I[0],ot=!1;T==="{"?ut={}:T==="["?ut=[]:(ut=[],ot=!0);for(var Y,Ft=[ut],Tt=1-ot,Jt=I.length;Tt<Jt;++Tt){T=I[Tt];var Gt;switch(T.charCodeAt(0)){default:Gt=Ft[0],Gt[Y||Gt.length]=+T,Y=void 0;break;case 34:if(T=T.substring(1,T.length-1),T.indexOf(M)!==-1&&(T=T.replace(b,x)),Gt=Ft[0],!Y)if(Gt instanceof Array)Y=Gt.length;else{Y=T||_;break}Gt[Y]=T,Y=void 0;break;case 91:Gt=Ft[0],Ft.unshift(Gt[Y||Gt.length]=[]),Y=void 0;break;case 93:Ft.shift();break;case 102:Gt=Ft[0],Gt[Y||Gt.length]=!1,Y=void 0;break;case 110:Gt=Ft[0],Gt[Y||Gt.length]=null,Y=void 0;break;case 116:Gt=Ft[0],Gt[Y||Gt.length]=!0,Y=void 0;break;case 123:Gt=Ft[0],Ft.unshift(Gt[Y||Gt.length]={}),Y=void 0;break;case 125:Ft.shift();break}}if(ot){if(Ft.length!==1)throw new Error;ut=ut[0]}else if(Ft.length)throw new Error;if(P){var Ae=function(De,d){var B=De[d];if(B&&typeof B=="object"){var it=null;for(var z in B)if(ht.call(B,z)&&B!==De){var St=Ae(B,z);St!==void 0?B[z]=St:(it||(it=[]),it.push(z))}if(it)for(var qt=it.length;--qt>=0;)delete B[it[qt]]}return P.call(De,d,B)};ut=Ae({"":ut},"")}return ut}})();(typeof v>"u"||!v)&&(v={}),(typeof v.asn1>"u"||!v.asn1)&&(v.asn1={}),v.asn1.ASN1Util=new function(){this.integerToByteHex=function(r){var l=r.toString(16);return l.length%2==1&&(l="0"+l),l},this.bigIntToMinTwosComplementsHex=function(r){return ke(r)},this.getPEMStringFromHex=function(r,l){return Pe(r,l)},this.newObject=function(r){var l=v,o=l.asn1,h=o.ASN1Object,b=o.DERBoolean,D=o.DERInteger,x=o.DERBitString,_=o.DEROctetString,M=o.DERNull,K=o.DERObjectIdentifier,ht=o.DEREnumerated,mt=o.DERUTF8String,P=o.DERNumericString,I=o.DERPrintableString,ut=o.DERTeletexString,T=o.DERIA5String,ot=o.DERUTCTime,Y=o.DERGeneralizedTime,Ft=o.DERVisibleString,Tt=o.DERBMPString,Jt=o.DERSequence,Gt=o.DERSet,Ae=o.DERTaggedObject,De=o.ASN1Util.newObject;if(r instanceof o.ASN1Object)return r;var d=Object.keys(r);if(d.length!=1)throw new Error("key of param shall be only one.");var B=d[0];if(":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+B+":")==-1)throw new Error("undefined key: "+B);if(B=="bool")return new b(r[B]);if(B=="int")return new D(r[B]);if(B=="bitstr")return new x(r[B]);if(B=="octstr")return new _(r[B]);if(B=="null")return new M(r[B]);if(B=="oid")return new K(r[B]);if(B=="enum")return new ht(r[B]);if(B=="utf8str")return new mt(r[B]);if(B=="numstr")return new P(r[B]);if(B=="prnstr")return new I(r[B]);if(B=="telstr")return new ut(r[B]);if(B=="ia5str")return new T(r[B]);if(B=="utctime")return new ot(r[B]);if(B=="gentime")return new Y(r[B]);if(B=="visstr")return new Ft(r[B]);if(B=="bmpstr")return new Tt(r[B]);if(B=="asn1")return new h(r[B]);if(B=="seq"){for(var it=r[B],z=[],St=0;St<it.length;St++){var qt=De(it[St]);z.push(qt)}return new Jt({array:z})}if(B=="set"){for(var it=r[B],z=[],St=0;St<it.length;St++){var qt=De(it[St]);z.push(qt)}return new Gt({array:z})}if(B=="tag"){var ee=r[B];if(Object.prototype.toString.call(ee)==="[object Array]"&&ee.length==3){var ie=De(ee[2]);return new Ae({tag:ee[0],explicit:ee[1],obj:ie})}else return new Ae(ee)}},this.jsonToASN1HEX=function(r){var l=this.newObject(r);return l.tohex()}},v.asn1.ASN1Util.oidHexToInt=function(r){for(var b="",l=parseInt(r.substr(0,2),16),o=Math.floor(l/40),h=l%40,b=o+"."+h,D="",x=2;x<r.length;x+=2){var _=parseInt(r.substr(x,2),16),M=("00000000"+_.toString(2)).slice(-8);if(D=D+M.substr(1,7),M.substr(0,1)=="0"){var K=new w(D,2);b=b+"."+K.toString(10),D=""}}return b},v.asn1.ASN1Util.oidIntToHex=function(r){var l=function(_){var M=_.toString(16);return M.length==1&&(M="0"+M),M},o=function(_){var M="",K=new w(_,10),ht=K.toString(2),mt=7-ht.length%7;mt==7&&(mt=0);for(var P="",I=0;I<mt;I++)P+="0";ht=P+ht;for(var I=0;I<ht.length-1;I+=7){var ut=ht.substr(I,7);I!=ht.length-7&&(ut="1"+ut),M+=l(parseInt(ut,2))}return M};if(!r.match(/^[0-9.]+$/))throw"malformed oid string: "+r;var h="",b=r.split("."),D=parseInt(b[0])*40+parseInt(b[1]);h+=l(D),b.splice(0,2);for(var x=0;x<b.length;x++)h+=o(b[x]);return h},v.asn1.ASN1Object=function(r){var l=!0,o=null,h="00",b="00",D="";this.params=null,this.getLengthHexFromValue=function(){if(typeof this.hV>"u"||this.hV==null)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+D.length+",v="+this.hV);var x=this.hV.length/2,_=x.toString(16);if(_.length%2==1&&(_="0"+_),x<128)return _;var M=_.length/2;if(M>15)throw new Error("ASN.1 length too long to represent by 8x: n = "+x.toString(16));var K=128+M;return K.toString(16)+_},this.tohex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.getValueHex=function(){return this.tohex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(x){this.params=x},r!=null&&r.tlv!=null&&(this.hTLV=r.tlv,this.isModified=!1)},v.asn1.DERAbstractString=function(r){v.asn1.DERAbstractString.superclass.constructor.call(this);var l=null,o=null;this.getString=function(){return this.s},this.setString=function(h){this.hTLV=null,this.isModified=!0,this.s=h,this.hV=_u(this.s).toLowerCase()},this.setStringHex=function(h){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=h},this.getFreshValueHex=function(){return this.hV},typeof r<"u"&&(typeof r=="string"?this.setString(r):typeof r.str<"u"?this.setString(r.str):typeof r.hex<"u"&&this.setStringHex(r.hex))},je(v.asn1.DERAbstractString,v.asn1.ASN1Object),v.asn1.DERAbstractTime=function(r){v.asn1.DERAbstractTime.superclass.constructor.call(this);var l=null,o=null;this.localDateToUTC=function(h){var b=h.getTime()+h.getTimezoneOffset()*6e4,D=new Date(b);return D},this.formatDate=function(h,b,D){var x=this.zeroPadding,_=this.localDateToUTC(h),M=String(_.getFullYear());b=="utc"&&(M=M.substr(2,2));var K=x(String(_.getMonth()+1),2),ht=x(String(_.getDate()),2),mt=x(String(_.getHours()),2),P=x(String(_.getMinutes()),2),I=x(String(_.getSeconds()),2),ut=M+K+ht+mt+P+I;if(D===!0){var T=_.getMilliseconds();if(T!=0){var ot=x(String(T),3);ot=ot.replace(/[0]+$/,""),ut=ut+"."+ot}}return ut+"Z"},this.zeroPadding=function(h,b){return h.length>=b?h:new Array(b-h.length+1).join("0")+h},this.setByParam=function(h){this.hV=null,this.hTLV=null,this.params=h},this.getString=function(){},this.setString=function(h){this.hTLV=null,this.isModified=!0,this.params==null&&(this.params={}),this.params.str=h},this.setByDate=function(h){this.hTLV=null,this.isModified=!0,this.params==null&&(this.params={}),this.params.date=h},this.setByDateValue=function(h,b,D,x,_,M){var K=new Date(Date.UTC(h,b-1,D,x,_,M,0));this.setByDate(K)},this.getFreshValueHex=function(){return this.hV}},je(v.asn1.DERAbstractTime,v.asn1.ASN1Object),v.asn1.DERAbstractStructured=function(r){v.asn1.DERAbstractString.superclass.constructor.call(this);var l=null;this.setByASN1ObjectArray=function(o){this.hTLV=null,this.isModified=!0,this.asn1Array=o},this.appendASN1Object=function(o){this.hTLV=null,this.isModified=!0,this.asn1Array.push(o)},this.asn1Array=new Array,typeof r<"u"&&typeof r.array<"u"&&(this.asn1Array=r.array)},je(v.asn1.DERAbstractStructured,v.asn1.ASN1Object),v.asn1.DERBoolean=function(r){v.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",r==!1?this.hTLV="010100":this.hTLV="0101ff"},je(v.asn1.DERBoolean,v.asn1.ASN1Object),v.asn1.DERInteger=function(r){v.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.params=null;var l=ke;this.setByBigInteger=function(o){this.isModified=!0,this.params={bigint:o}},this.setByInteger=function(o){this.isModified=!0,this.params=o},this.setValueHex=function(o){this.isModified=!0,this.params={hex:o}},this.getFreshValueHex=function(){var o=this.params,h=null;if(o==null)throw new Error("value not set");if(typeof o=="object"&&o.hex!=null)return this.hV=o.hex,this.hV;if(typeof o=="number")h=new w(String(o),10);else if(o.int!=null)h=new w(String(o.int),10);else if(o.bigint!=null)h=o.bigint;else throw new Error("wrong parameter");return this.hV=l(h),this.hV},r!=null&&(this.params=r)},je(v.asn1.DERInteger,v.asn1.ASN1Object),v.asn1.DERBitString=function(r){if(r!==void 0&&typeof r.obj<"u"){var l=v.asn1.ASN1Util.newObject(r.obj);r.hex="00"+l.tohex()}v.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(o){this.hTLV=null,this.isModified=!0,this.hV=o},this.setUnusedBitsAndHexValue=function(o,h){if(o<0||7<o)throw"unused bits shall be from 0 to 7: u = "+o;var b="0"+o;this.hTLV=null,this.isModified=!0,this.hV=b+h},this.setByBinaryString=function(o){o=o.replace(/0+$/,"");var h=8-o.length%8;h==8&&(h=0),o+="0000000".substr(0,h);for(var b="",D=0;D<o.length-1;D+=8){var x=o.substr(D,8),_=parseInt(x,2).toString(16);_.length==1&&(_="0"+_),b+=_}this.hTLV=null,this.isModified=!0,this.hV="0"+h+b},this.setByBooleanArray=function(o){for(var h="",b=0;b<o.length;b++)o[b]==!0?h+="1":h+="0";this.setByBinaryString(h)},this.newFalseArray=function(o){for(var h=new Array(o),b=0;b<o;b++)h[b]=!1;return h},this.getFreshValueHex=function(){return this.hV},typeof r<"u"&&(typeof r=="string"&&r.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(r):typeof r.hex<"u"?this.setHexValueIncludingUnusedBits(r.hex):typeof r.bin<"u"?this.setByBinaryString(r.bin):typeof r.array<"u"&&this.setByBooleanArray(r.array))},je(v.asn1.DERBitString,v.asn1.ASN1Object),v.asn1.DEROctetString=function(r){if(r!==void 0&&typeof r.obj<"u"){var l=v.asn1.ASN1Util.newObject(r.obj);r.hex=l.tohex()}v.asn1.DEROctetString.superclass.constructor.call(this,r),this.hT="04"},je(v.asn1.DEROctetString,v.asn1.DERAbstractString),v.asn1.DERNull=function(){v.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},je(v.asn1.DERNull,v.asn1.ASN1Object),v.asn1.DERObjectIdentifier=function(r){v.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(l){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=l},this.setValueOidString=function(l){var o=zs(l);if(o==null)throw new Error("malformed oid string: "+l);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=o},this.setValueName=function(l){var o=v.asn1.x509.OID.name2oid(l);if(o!=="")this.setValueOidString(o);else throw new Error("DERObjectIdentifier oidName undefined: "+l)},this.setValueNameOrOid=function(l){l.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(l):this.setValueName(l)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(l){typeof l=="string"?this.setValueNameOrOid(l):l.oid!==void 0?this.setValueNameOrOid(l.oid):l.name!==void 0?this.setValueNameOrOid(l.name):l.hex!==void 0&&this.setValueHex(l.hex)},r!==void 0&&this.setByParam(r)},je(v.asn1.DERObjectIdentifier,v.asn1.ASN1Object),v.asn1.DEREnumerated=function(r){v.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(l){this.hTLV=null,this.isModified=!0,this.hV=ke(l)},this.setByInteger=function(l){var o=new w(String(l),10);this.setByBigInteger(o)},this.setValueHex=function(l){this.hV=l},this.getFreshValueHex=function(){return this.hV},typeof r<"u"&&(typeof r.int<"u"?this.setByInteger(r.int):typeof r=="number"?this.setByInteger(r):typeof r.hex<"u"&&this.setValueHex(r.hex))},je(v.asn1.DEREnumerated,v.asn1.ASN1Object),v.asn1.DERUTF8String=function(r){v.asn1.DERUTF8String.superclass.constructor.call(this,r),this.hT="0c"},je(v.asn1.DERUTF8String,v.asn1.DERAbstractString),v.asn1.DERNumericString=function(r){v.asn1.DERNumericString.superclass.constructor.call(this,r),this.hT="12"},je(v.asn1.DERNumericString,v.asn1.DERAbstractString),v.asn1.DERPrintableString=function(r){v.asn1.DERPrintableString.superclass.constructor.call(this,r),this.hT="13"},je(v.asn1.DERPrintableString,v.asn1.DERAbstractString),v.asn1.DERTeletexString=function(r){v.asn1.DERTeletexString.superclass.constructor.call(this,r),this.hT="14"},je(v.asn1.DERTeletexString,v.asn1.DERAbstractString),v.asn1.DERIA5String=function(r){v.asn1.DERIA5String.superclass.constructor.call(this,r),this.hT="16"},je(v.asn1.DERIA5String,v.asn1.DERAbstractString),v.asn1.DERVisibleString=function(r){v.asn1.DERIA5String.superclass.constructor.call(this,r),this.hT="1a"},je(v.asn1.DERVisibleString,v.asn1.DERAbstractString),v.asn1.DERBMPString=function(r){v.asn1.DERBMPString.superclass.constructor.call(this,r),this.hT="1e"},je(v.asn1.DERBMPString,v.asn1.DERAbstractString),v.asn1.DERUTCTime=function(r){v.asn1.DERUTCTime.superclass.constructor.call(this,r),this.hT="17",this.params=void 0,this.getFreshValueHex=function(){var l=this.params;if(this.params==null&&(l={date:new Date}),typeof l=="string")if(l.match(/^[0-9]{12}Z$/)||l.match(/^[0-9]{12}\.[0-9]+Z$/))this.hV=cs(l);else throw new Error("malformed string for UTCTime: "+l);else if(l.str!=null)this.hV=cs(l.str);else if(l.date==null&&l.millis==!0){var o=new Date;this.hV=cs(this.formatDate(o,"utc",!0))}else if(l.date!=null&&l.date instanceof Date){var h=l.millis===!0;this.hV=cs(this.formatDate(l.date,"utc",h))}else l instanceof Date&&(this.hV=cs(this.formatDate(l,"utc")));if(this.hV==null)throw new Error("parameter not specified properly for UTCTime");return this.hV},r!=null&&this.setByParam(r)},je(v.asn1.DERUTCTime,v.asn1.DERAbstractTime),v.asn1.DERGeneralizedTime=function(r){v.asn1.DERGeneralizedTime.superclass.constructor.call(this,r),this.hT="18",this.params=r,this.getFreshValueHex=function(){var l=this.params;if(this.params==null&&(l={date:new Date}),typeof l=="string")if(l.match(/^[0-9]{14}Z$/)||l.match(/^[0-9]{14}\.[0-9]+Z$/))this.hV=cs(l);else throw new Error("malformed string for GeneralizedTime: "+l);else if(l.str!=null)this.hV=cs(l.str);else if(l.date==null&&l.millis==!0){var o=new Date;this.hV=cs(this.formatDate(o,"gen",!0))}else if(l.date!=null&&l.date instanceof Date){var h=l.millis===!0;this.hV=cs(this.formatDate(l.date,"gen",h))}else l instanceof Date&&(this.hV=cs(this.formatDate(l,"gen")));if(this.hV==null)throw new Error("parameter not specified properly for GeneralizedTime");return this.hV},r!=null&&this.setByParam(r)},je(v.asn1.DERGeneralizedTime,v.asn1.DERAbstractTime),v.asn1.DERSequence=function(r){v.asn1.DERSequence.superclass.constructor.call(this,r),this.hT="30",this.getFreshValueHex=function(){for(var l="",o=0;o<this.asn1Array.length;o++){var h=this.asn1Array[o];l+=h.tohex()}return this.hV=l,this.hV}},je(v.asn1.DERSequence,v.asn1.DERAbstractStructured),v.asn1.DERSet=function(r){v.asn1.DERSet.superclass.constructor.call(this,r),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var l=new Array,o=0;o<this.asn1Array.length;o++){var h=this.asn1Array[o];l.push(h.tohex())}return this.sortFlag==!0&&l.sort(),this.hV=l.join(""),this.hV},typeof r<"u"&&typeof r.sortflag<"u"&&r.sortflag==!1&&(this.sortFlag=!1)},je(v.asn1.DERSet,v.asn1.DERAbstractStructured),v.asn1.DERTaggedObject=function(r){v.asn1.DERTaggedObject.superclass.constructor.call(this);var l=v.asn1,o=Je,h=o.getV,b=o.isASN1HEX,D=l.ASN1Util.newObject;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.params={tag:"a0",explicit:!0},this.setASN1Object=function(x,_,M){this.params={tag:_,explicit:x,obj:M}},this.getFreshValueHex=function(){var x=this.params;if(x.explicit==null&&(x.explicit=!0),x.tage!=null&&(x.tag=x.tage,x.explicit=!0),x.tagi!=null&&(x.tag=x.tagi,x.explicit=!1),x.str!=null)this.hV=_u(x.str);else if(x.hex!=null)this.hV=x.hex;else if(x.obj!=null){var _;x.obj instanceof l.ASN1Object?_=x.obj.tohex():typeof x.obj=="object"&&(_=D(x.obj).tohex()),x.explicit?this.hV=_:this.hV=h(_,0)}else throw new Error("str, hex nor obj not specified");return x.tag==null&&(x.tag="a0"),this.hT=x.tag,this.hTLV=null,this.isModified=!0,this.hV},this.setByParam=function(x){this.params=x},r!==void 0&&this.setByParam(r)},je(v.asn1.DERTaggedObject,v.asn1.ASN1Object);var Je=new function(){};Je.getLblen=function(r,l){if(r.substr(l+2,1)!="8")return 1;var o=parseInt(r.substr(l+3,1));return o==0?-1:0<o&&o<10?o+1:-2},Je.getL=function(r,l){var o=Je.getLblen(r,l);return o<1?"":r.substr(l+2,o*2)},Je.getVblen=function(r,l){var o,h;return o=Je.getL(r,l),o==""?-1:(o.substr(0,1)==="8"?h=new w(o.substr(2),16):h=new w(o,16),h.intValue())},Je.getVidx=function(r,l){var o=Je.getLblen(r,l);return o<0?o:l+(o+1)*2},Je.getV=function(r,l){var o=Je.getVidx(r,l),h=Je.getVblen(r,l);return r.substr(o,h*2)},Je.getTLV=function(r,l){return r.substr(l,2)+Je.getL(r,l)+Je.getV(r,l)},Je.getTLVblen=function(r,l){return 2+Je.getLblen(r,l)*2+Je.getVblen(r,l)*2},Je.getNextSiblingIdx=function(r,l){var o=Je.getVidx(r,l),h=Je.getVblen(r,l);return o+h*2},Je.getChildIdx=function(r,l){var o=Je,h=[],b,D,x;b=o.getVidx(r,l),D=o.getVblen(r,l)*2,r.substr(l,2)=="03"&&(b+=2,D-=2),x=0;for(var _=b;x<=D;){var M=o.getTLVblen(r,_);if(x+=M,x<=D&&h.push(_),_+=M,x>=D)break}return h},Je.getNthChildIdx=function(r,l,o){var h=Je.getChildIdx(r,l);return h[o]},Je.getIdxbyList=function(r,l,o,h){var b=Je,D,x;return o.length==0?h!==void 0&&r.substr(l,2)!==h?-1:l:(D=o.shift(),x=b.getChildIdx(r,l),D>=x.length?-1:b.getIdxbyList(r,x[D],o,h))},Je.getIdxbyListEx=function(r,l,o,h){var b=Je,D,x;if(o.length==0)return h!==void 0&&r.substr(l,2)!==h?-1:l;D=o.shift(),x=b.getChildIdx(r,l);for(var _=0,M=0;M<x.length;M++){var K=r.substr(x[M],2);if(typeof D=="number"&&!b.isContextTag(K)&&_==D||typeof D=="string"&&b.isContextTag(K,D))return b.getIdxbyListEx(r,x[M],o,h);b.isContextTag(K)||_++}return-1},Je.getTLVbyList=function(r,l,o,h){var b=Je,D=b.getIdxbyList(r,l,o,h);return D==-1||D>=r.length?null:b.getTLV(r,D)},Je.getTLVbyListEx=function(r,l,o,h){var b=Je,D=b.getIdxbyListEx(r,l,o,h);return D==-1?null:b.getTLV(r,D)},Je.getVbyList=function(r,l,o,h,b){var D=Je,x,_;return x=D.getIdxbyList(r,l,o,h),x==-1||x>=r.length?null:(_=D.getV(r,x),b===!0&&(_=_.substr(2)),_)},Je.getVbyListEx=function(r,l,o,h,b){var D=Je,x,_,M;return x=D.getIdxbyListEx(r,l,o,h),x==-1?null:(M=D.getV(r,x),r.substr(x,2)=="03"&&b!==!1&&(M=M.substr(2)),M)},Je.getInt=function(r,l,o){o==null&&(o=-1);try{var h=r.substr(l,2);if(h!="02"&&h!="03")return o;var b=Je.getV(r,l);return h=="02"?parseInt(b,16):Or(b)}catch{return o}},Je.getOID=function(r,l,o){o==null&&(o=null);try{if(r.substr(l,2)!="06")return o;var h=Je.getV(r,l);return me(h)}catch{return o}},Je.getOIDName=function(r,l,o){o==null&&(o=null);try{var h=Je.getOID(r,l,o);if(h==o)return o;var b=v.asn1.x509.OID.oid2name(h);return b==""?h:b}catch{return o}},Je.getString=function(r,l,o){o==null&&(o=null);try{var h=Je.getV(r,l);return dr(h)}catch{return o}},Je.hextooidstr=function(r){var l=function(mt,P){return mt.length>=P?mt:new Array(P-mt.length+1).join("0")+mt},o=[],h=r.substr(0,2),b=parseInt(h,16);o[0]=new String(Math.floor(b/40)),o[1]=new String(b%40);for(var D=r.substr(2),x=[],_=0;_<D.length/2;_++)x.push(parseInt(D.substr(_*2,2),16));for(var M=[],K="",_=0;_<x.length;_++)x[_]&128?K=K+l((x[_]&127).toString(2),7):(K=K+l((x[_]&127).toString(2),7),M.push(new String(parseInt(K,2))),K="");var ht=o.join(".");return M.length>0&&(ht=ht+"."+M.join(".")),ht},Je.dump=function(r,l,o,h){var b=Je,D=b.getV,x=b.dump,_=b.getChildIdx,M=r;r instanceof v.asn1.ASN1Object&&(M=r.tohex());var K=function(De,d){if(De.length<=d*2)return De;var B=De.substr(0,d)+"..(total "+De.length/2+"bytes).."+De.substr(De.length-d,d);return B};l===void 0&&(l={ommit_long_octet:32}),o===void 0&&(o=0),h===void 0&&(h="");var ht=l.ommit_long_octet,Gt=M.substr(o,2);if(Gt=="01"){var mt=D(M,o);return mt=="00"?h+`BOOLEAN FALSE
`:h+`BOOLEAN TRUE
`}if(Gt=="02"){var mt=D(M,o);return h+"INTEGER "+K(mt,ht)+`
`}if(Gt=="03"){var mt=D(M,o);if(b.isASN1HEX(mt.substr(2))){var P=h+`BITSTRING, encapsulates
`;return P=P+x(mt.substr(2),l,0,h+"  "),P}else return h+"BITSTRING "+K(mt,ht)+`
`}if(Gt=="04"){var mt=D(M,o);if(b.isASN1HEX(mt)){var P=h+`OCTETSTRING, encapsulates
`;return P=P+x(mt,l,0,h+"  "),P}else return h+"OCTETSTRING "+K(mt,ht)+`
`}if(Gt=="05")return h+`NULL
`;if(Gt=="06"){var I=D(M,o),ut=v.asn1.ASN1Util.oidHexToInt(I),T=v.asn1.x509.OID.oid2name(ut),ot=ut.replace(/\./g," ");return T!=""?h+"ObjectIdentifier "+T+" ("+ot+`)
`:h+"ObjectIdentifier ("+ot+`)
`}if(Gt=="0a")return h+"ENUMERATED "+parseInt(D(M,o))+`
`;if(Gt=="0c")return h+"UTF8String '"+xr(D(M,o))+`'
`;if(Gt=="13")return h+"PrintableString '"+xr(D(M,o))+`'
`;if(Gt=="14")return h+"TeletexString '"+xr(D(M,o))+`'
`;if(Gt=="16")return h+"IA5String '"+xr(D(M,o))+`'
`;if(Gt=="17")return h+"UTCTime "+xr(D(M,o))+`
`;if(Gt=="18")return h+"GeneralizedTime "+xr(D(M,o))+`
`;if(Gt=="1a")return h+"VisualString '"+xr(D(M,o))+`'
`;if(Gt=="1e")return h+"BMPString '"+Tu(D(M,o))+`'
`;if(Gt=="30"){if(M.substr(o,4)=="3000")return h+`SEQUENCE {}
`;var P=h+`SEQUENCE
`,Y=_(M,o),Ft=l;if((Y.length==2||Y.length==3)&&M.substr(Y[0],2)=="06"&&M.substr(Y[Y.length-1],2)=="04"){var T=b.oidname(D(M,Y[0])),Tt=JSON.parse(JSON.stringify(l));Tt.x509ExtName=T,Ft=Tt}for(var Jt=0;Jt<Y.length;Jt++)P=P+x(M,Ft,Y[Jt],h+"  ");return P}if(Gt=="31"){for(var P=h+`SET
`,Y=_(M,o),Jt=0;Jt<Y.length;Jt++)P=P+x(M,l,Y[Jt],h+"  ");return P}var Gt=parseInt(Gt,16);if(Gt&128){var Ae=Gt&31;if(Gt&32){for(var P=h+"["+Ae+`]
`,Y=_(M,o),Jt=0;Jt<Y.length;Jt++)P=P+x(M,l,Y[Jt],h+"  ");return P}else{var mt=D(M,o);if(Je.isASN1HEX(mt)){var P=h+"["+Ae+`]
`;return P=P+x(mt,l,0,h+"  "),P}else(mt.substr(0,8)=="68747470"||l.x509ExtName==="subjectAltName"&&Ae==2)&&(mt=xr(mt));var P=h+"["+Ae+"] "+mt+`
`;return P}}return h+"UNKNOWN("+Gt+") "+D(M,o)+`
`},Je.parse=function(r){var l=Je,o=l.parse,h=l.isASN1HEX,b=l.getV,D=l.getTLV,x=l.getChildIdx,_=v.asn1,M=_.ASN1Util.oidHexToInt,K=_.x509.OID.oid2name,ht=xr,mt=Tu,P=Ba,I={"0c":"utf8str",12:"numstr",13:"prnstr",14:"telstr",16:"ia5str",17:"utctime",18:"gentime","1a":"visstr","1e":"bmpstr",30:"seq",31:"set"},ut=function(B){for(var it=[],z=x(B,0),St=0;St<z.length;St++){var qt=z[St],ee=D(B,qt),ie=o(ee);it.push(ie)}return it},T=r.substr(0,2),ot={},Y=b(r,0);if(T=="01")return r=="0101ff"?{bool:!0}:{bool:!1};if(T=="02")return{int:{hex:Y}};if(T=="03")try{if(Y.substr(0,2)!="00")throw"not encap";var Ft=Y.substr(2);if(!h(Ft))throw"not encap";return{bitstr:{obj:o(Ft)}}}catch{var Tt=null;return Y.length<=10&&(Tt=Gn(Y)),Tt==null?{bitstr:{hex:Y}}:{bitstr:{bin:Tt}}}else if(T=="04")try{if(!h(Y))throw"not encap";return{octstr:{obj:o(Y)}}}catch{return{octstr:{hex:Y}}}else{if(T=="05")return{null:""};if(T=="06"){var Jt=M(Y),Gt=K(Jt);return Gt==""?{oid:Jt}:{oid:Gt}}else{if(T=="0a")return Y.length>4?{enum:{hex:Y}}:{enum:parseInt(Y,16)};if(T=="30"||T=="31")return ot[I[T]]=ut(r),ot;if(T=="14"){var Ae=P(Y);return ot[I[T]]={str:Ae},ot}else if(T=="1e"){var Ae=mt(Y);return ot[I[T]]={str:Ae},ot}else if(":0c:12:13:16:17:18:1a:".indexOf(T)!=-1){var Ae=ht(Y);return ot[I[T]]={str:Ae},ot}else if(T.match(/^8[0-9]$/)){var Ae=ht(Y);return Ae==null|Ae==""?{tag:{tag:T,explicit:!1,hex:Y}}:Ae.match(/[\x00-\x1F\x7F-\x9F]/)!=null||Ae.match(/[\u0000-\u001F\u0080\u009F]/)!=null?{tag:{tag:T,explicit:!1,hex:Y}}:{tag:{tag:T,explicit:!1,str:Ae}}}else if(T.match(/^a[0-9]$/))try{if(!h(Y))throw new Error("not encap");return{tag:{tag:T,explicit:!0,obj:o(Y)}}}catch{return{tag:{tag:T,explicit:!0,hex:Y}}}else{var De=new v.asn1.ASN1Object;De.hV=Y;var d=De.getLengthHexFromValue();return{asn1:{tlv:T+d+Y}}}}}},Je.isContextTag=function(r,l){r=r.toLowerCase();var o,h;try{o=parseInt(r,16)}catch{return-1}if(l===void 0)return(o&192)==128;try{var b=l.match(/^\[[0-9]+\]$/);return b==null||(h=parseInt(l.substr(1,l.length-1),10),h>31)?!1:(o&192)==128&&(o&31)==h}catch{return!1}},Je.isASN1HEX=function(r){var l=Je;if(r.length%2==1)return!1;var o=l.getVblen(r,0),h=r.substr(0,2),b=l.getL(r,0),D=r.length-h.length-b.length;return D==o*2},Je.checkStrictDER=function(r,l,o,h,b){var D=Je;if(o===void 0){if(typeof r!="string")throw new Error("not hex string");if(r=r.toLowerCase(),!v.lang.String.isHex(r))throw new Error("not hex string");o=r.length,h=r.length/2,h<128?b=1:b=Math.ceil(h.toString(16))+1}var x=D.getL(r,l);if(x.length>b*2)throw new Error("L of TLV too long: idx="+l);var _=D.getVblen(r,l);if(_>h)throw new Error("value of L too long than hex: idx="+l);var M=D.getTLV(r,l),K=M.length-2-D.getL(r,l).length;if(K!==_*2)throw new Error("V string length and L's value not the same:"+K+"/"+_*2);if(l===0&&r.length!=M.length)throw new Error("total length and TLV length unmatch:"+r.length+"!="+M.length);var ht=r.substr(l,2);if(ht==="02"){var mt=D.getVidx(r,l);if(r.substr(mt,2)=="00"&&r.charCodeAt(mt+2)<56)throw new Error("not least zeros for DER INTEGER")}if(parseInt(ht,16)&32){for(var P=D.getVblen(r,l),I=0,ut=D.getChildIdx(r,l),T=0;T<ut.length;T++){var ot=D.getTLV(r,ut[T]);I+=ot.length,D.checkStrictDER(r,ut[T],o,h,b)}if(P*2!=I)throw new Error("sum of children's TLV length and L unmatch: "+P*2+"!="+I)}},Je.oidname=function(r){var l=v.asn1;v.lang.String.isHex(r)&&(r=l.ASN1Util.oidHexToInt(r));var o=l.x509.OID.oid2name(r);return o===""&&(o=r),o},(typeof v>"u"||!v)&&(v={}),(typeof v.asn1>"u"||!v.asn1)&&(v.asn1={}),(typeof v.asn1.x509>"u"||!v.asn1.x509)&&(v.asn1.x509={}),v.asn1.x509.Certificate=function(r){v.asn1.x509.Certificate.superclass.constructor.call(this);var l=v,o=l.asn1,h=o.DERBitString,b=o.DERSequence,D=o.x509,x=D.TBSCertificate,_=D.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(M){this.params=M},this.sign=function(){var M=this.params,K=M.sigalg;M.sigalg.name!=null&&(K=M.sigalg.name);var ht=M.tbsobj.tohex(),mt=new v.crypto.Signature({alg:K});mt.init(M.cakey),mt.updateHex(ht),M.sighex=mt.sign()},this.getPEM=function(){return Pe(this.tohex(),"CERTIFICATE")},this.tohex=function(){var M=this.params;if((M.tbsobj==null||M.tbsobj==null)&&(M.tbsobj=new x(M)),M.sighex==null&&M.cakey!=null&&this.sign(),M.sighex==null)throw new Error("sighex or cakey parameter not defined");var K=[];K.push(M.tbsobj),K.push(new _({name:M.sigalg})),K.push(new h({hex:"00"+M.sighex}));var ht=new b({array:K});return ht.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&(this.params=r)},je(v.asn1.x509.Certificate,v.asn1.ASN1Object),v.asn1.x509.TBSCertificate=function(r){v.asn1.x509.TBSCertificate.superclass.constructor.call(this);var l=v,o=l.asn1,h=o.x509,b=o.DERTaggedObject,D=o.DERInteger,x=o.DERSequence,_=h.AlgorithmIdentifier,M=h.Time,K=h.X500Name,ht=h.Extensions,mt=h.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(P){this.params=P},this.tohex=function(){var P=[],I=this.params;if(I.version!=null||I.version!=1){var ut=2;I.version!=null&&(ut=I.version-1);var T=new b({obj:new D({int:ut})});P.push(T)}P.push(new D(I.serial)),P.push(new _({name:I.sigalg})),P.push(new K(I.issuer)),P.push(new x({array:[new M(I.notbefore),new M(I.notafter)]})),P.push(new K(I.subject)),P.push(new mt(Tr.getKey(I.sbjpubkey))),I.ext!==void 0&&I.ext.length>0&&P.push(new b({tag:"a3",obj:new ht(I.ext)}));var ot=new v.asn1.DERSequence({array:P});return ot.tohex()},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&this.setByParam(r)},je(v.asn1.x509.TBSCertificate,v.asn1.ASN1Object),v.asn1.x509.Extensions=function(r){v.asn1.x509.Extensions.superclass.constructor.call(this);var l=v,o=l.asn1,h=o.DERSequence,b=o.x509;this.aParam=[],this.setByParam=function(D){this.aParam=D},this.tohex=function(){for(var D=[],x=0;x<this.aParam.length;x++){var _=this.aParam[x],M=_.extname,K=null;if(_.extn!=null)K=new b.PrivateExtension(_);else if(M=="subjectKeyIdentifier")K=new b.SubjectKeyIdentifier(_);else if(M=="keyUsage")K=new b.KeyUsage(_);else if(M=="subjectAltName")K=new b.SubjectAltName(_);else if(M=="issuerAltName")K=new b.IssuerAltName(_);else if(M=="basicConstraints")K=new b.BasicConstraints(_);else if(M=="nameConstraints")K=new b.NameConstraints(_);else if(M=="cRLDistributionPoints")K=new b.CRLDistributionPoints(_);else if(M=="certificatePolicies")K=new b.CertificatePolicies(_);else if(M=="policyMappings")K=new b.PolicyMappings(_);else if(M=="policyConstraints")K=new b.PolicyConstraints(_);else if(M=="inhibitAnyPolicy")K=new b.InhibitAnyPolicy(_);else if(M=="authorityKeyIdentifier")K=new b.AuthorityKeyIdentifier(_);else if(M=="extKeyUsage")K=new b.ExtKeyUsage(_);else if(M=="authorityInfoAccess")K=new b.AuthorityInfoAccess(_);else if(M=="cRLNumber")K=new b.CRLNumber(_);else if(M=="cRLReason")K=new b.CRLReason(_);else if(M=="ocspNonce")K=new b.OCSPNonce(_);else if(M=="ocspNoCheck")K=new b.OCSPNoCheck(_);else if(M=="adobeTimeStamp")K=new b.AdobeTimeStamp(_);else if(M=="subjectDirectoryAttributes")K=new b.SubjectDirectoryAttributes(_);else throw new Error("extension not supported:"+JSON.stringify(_));K!=null&&D.push(K)}var ht=new h({array:D});return ht.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},je(v.asn1.x509.Extensions,v.asn1.ASN1Object),v.asn1.x509.Extension=function(r){v.asn1.x509.Extension.superclass.constructor.call(this);var l=null,o=v,h=o.asn1,b=h.DERObjectIdentifier,D=h.DEROctetString,x=h.DERBitString,_=h.DERBoolean,M=h.DERSequence;this.tohex=function(){var K=new b({oid:this.oid}),ht=new D({hex:this.getExtnValueHex()}),mt=new Array;mt.push(K),this.critical&&mt.push(new _),mt.push(ht);var P=new M({array:mt});return P.tohex()},this.getEncodedHex=function(){return this.tohex()},this.critical=!1,r!==void 0&&r.critical!==void 0&&(this.critical=r.critical)},je(v.asn1.x509.Extension,v.asn1.ASN1Object),v.asn1.x509.KeyUsage=function(r){v.asn1.x509.KeyUsage.superclass.constructor.call(this,r);var l=Error,o={digitalSignature:0,nonRepudiation:1,keyEncipherment:2,dataEncipherment:3,keyAgreement:4,keyCertSign:5,cRLSign:6,encipherOnly:7,decipherOnly:8};this.getExtnValueHex=function(){var h=this.getBinValue();return this.asn1ExtnValue=new v.asn1.DERBitString({bin:h}),this.asn1ExtnValue.tohex()},this.getBinValue=function(){var h=this.params;if(typeof h!="object"||typeof h.names!="object"&&typeof h.bin!="string")throw new l("parameter not yet set");if(h.names!=null)return Fi(h.names,o);if(h.bin!=null)return h.bin;throw new l("parameter not set properly")},this.oid="2.5.29.15",r!==void 0&&(this.params=r)},je(v.asn1.x509.KeyUsage,v.asn1.x509.Extension),v.asn1.x509.BasicConstraints=function(r){v.asn1.x509.BasicConstraints.superclass.constructor.call(this,r);var l=v.asn1,o=l.DERBoolean,h=l.DERInteger,b=l.DERSequence,D=!1,x=-1;this.getExtnValueHex=function(){var _=new Array;this.cA&&_.push(new o),this.pathLen>-1&&_.push(new h({int:this.pathLen}));var M=new b({array:_});return this.asn1ExtnValue=M,this.asn1ExtnValue.tohex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,r!==void 0&&(r.cA!==void 0&&(this.cA=r.cA),r.pathLen!==void 0&&(this.pathLen=r.pathLen))},je(v.asn1.x509.BasicConstraints,v.asn1.x509.Extension),v.asn1.x509.CRLDistributionPoints=function(r){v.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,r);var l=v,o=l.asn1,h=o.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.setByDPArray=function(b){for(var D=[],x=0;x<b.length;x++)if(b[x]instanceof v.asn1.ASN1Object)D.push(b[x]);else{var _=new h.DistributionPoint(b[x]);D.push(_)}this.asn1ExtnValue=new o.DERSequence({array:D})},this.setByOneURI=function(b){var D=new h.DistributionPoint({fulluri:b});this.setByDPArray([D])},this.oid="2.5.29.31",r!==void 0&&(r.array!==void 0?this.setByDPArray(r.array):r.uri!==void 0&&this.setByOneURI(r.uri))},je(v.asn1.x509.CRLDistributionPoints,v.asn1.x509.Extension),v.asn1.x509.DistributionPoint=function(r){v.asn1.x509.DistributionPoint.superclass.constructor.call(this);var l=null,o=v,h=o.asn1,b=h.x509.DistributionPointName;this.tohex=function(){var D=new h.DERSequence;if(this.asn1DP!=null){var x=new h.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});D.appendASN1Object(x)}return this.hTLV=D.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&(r.dpobj!==void 0?this.asn1DP=r.dpobj:r.dpname!==void 0?this.asn1DP=new b(r.dpname):r.fulluri!==void 0&&(this.asn1DP=new b({full:[{uri:r.fulluri}]})))},je(v.asn1.x509.DistributionPoint,v.asn1.ASN1Object),v.asn1.x509.DistributionPointName=function(r){v.asn1.x509.DistributionPointName.superclass.constructor.call(this);var l=null,o=null,h=null,b=null,D=v,x=D.asn1,_=x.DERTaggedObject;if(this.tohex=function(){if(this.type!="full")throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new _({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},r!==void 0)if(x.x509.GeneralNames.prototype.isPrototypeOf(r))this.type="full",this.tag="a0",this.asn1V=r;else if(r.full!==void 0)this.type="full",this.tag="a0",this.asn1V=new x.x509.GeneralNames(r.full);else throw new Error("This class supports GeneralNames only as argument")},je(v.asn1.x509.DistributionPointName,v.asn1.ASN1Object),v.asn1.x509.CertificatePolicies=function(r){v.asn1.x509.CertificatePolicies.superclass.constructor.call(this,r);var l=v,o=l.asn1,h=o.x509,b=o.DERSequence,D=h.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var x=[],_=0;_<this.params.array.length;_++)x.push(new D(this.params.array[_]));var M=new b({array:x});return this.asn1ExtnValue=M,this.asn1ExtnValue.tohex()},this.oid="2.5.29.32",r!==void 0&&(this.params=r)},je(v.asn1.x509.CertificatePolicies,v.asn1.x509.Extension),v.asn1.x509.PolicyInformation=function(r){v.asn1.x509.PolicyInformation.superclass.constructor.call(this,r);var l=v.asn1,o=l.DERSequence,h=l.DERObjectIdentifier,b=l.x509.PolicyQualifierInfo;this.params=null,this.tohex=function(){if(this.params.policyoid===void 0&&this.params.array===void 0)throw new Error("parameter oid and array missing");var D=[new h(this.params.policyoid)];if(this.params.array!==void 0){for(var x=[],_=0;_<this.params.array.length;_++)x.push(new b(this.params.array[_]));x.length>0&&D.push(new o({array:x}))}var M=new o({array:D});return M.tohex()},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&(this.params=r)},je(v.asn1.x509.PolicyInformation,v.asn1.ASN1Object),v.asn1.x509.PolicyQualifierInfo=function(r){v.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,r);var l=v.asn1,o=l.DERSequence,h=l.DERIA5String,b=l.DERObjectIdentifier,D=l.x509.UserNotice;this.params=null,this.tohex=function(){if(this.params.cps!==void 0){var x=new o({array:[new b({oid:"1.3.6.1.5.5.7.2.1"}),new h({str:this.params.cps})]});return x.tohex()}if(this.params.unotice!=null){var x=new o({array:[new b({oid:"1.3.6.1.5.5.7.2.2"}),new D(this.params.unotice)]});return x.tohex()}},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&(this.params=r)},je(v.asn1.x509.PolicyQualifierInfo,v.asn1.ASN1Object),v.asn1.x509.UserNotice=function(r){v.asn1.x509.UserNotice.superclass.constructor.call(this,r);var l=v.asn1.DERSequence,o=v.asn1.DERInteger,h=v.asn1.x509.DisplayText,b=v.asn1.x509.NoticeReference;this.params=null,this.tohex=function(){var D=[];this.params.noticeref!==void 0&&D.push(new b(this.params.noticeref)),this.params.exptext!==void 0&&D.push(new h(this.params.exptext));var x=new l({array:D});return x.tohex()},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&(this.params=r)},je(v.asn1.x509.UserNotice,v.asn1.ASN1Object),v.asn1.x509.NoticeReference=function(r){v.asn1.x509.NoticeReference.superclass.constructor.call(this,r);var l=v.asn1.DERSequence,o=v.asn1.DERInteger,h=v.asn1.x509.DisplayText;this.params=null,this.tohex=function(){var b=[];if(this.params.org!==void 0&&b.push(new h(this.params.org)),this.params.noticenum!==void 0){for(var D=[],x=this.params.noticenum,_=0;_<x.length;_++)D.push(new o(x[_]));b.push(new l({array:D}))}if(b.length==0)throw new Error("parameter is empty");var M=new l({array:b});return M.tohex()},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&(this.params=r)},je(v.asn1.x509.NoticeReference,v.asn1.ASN1Object),v.asn1.x509.DisplayText=function(r){v.asn1.x509.DisplayText.superclass.constructor.call(this,r),this.hT="0c",r!==void 0&&(r.type==="ia5"?this.hT="16":r.type==="vis"?this.hT="1a":r.type==="bmp"&&(this.hT="1e"))},je(v.asn1.x509.DisplayText,v.asn1.DERAbstractString),v.asn1.x509.PolicyMappings=function(r){v.asn1.x509.PolicyMappings.superclass.constructor.call(this,r);var l=v,o=l.asn1,h=o.x509,b=o.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){for(var D=this.params,x=[],_=0;_<D.array.length;_++){var M=D.array[_];x.push({seq:[{oid:M[0]},{oid:M[1]}]})}return this.asn1ExtnValue=b({seq:x}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.33",r!==void 0&&(this.params=r)},je(v.asn1.x509.PolicyMappings,v.asn1.x509.Extension),v.asn1.x509.PolicyConstraints=function(r){v.asn1.x509.PolicyConstraints.superclass.constructor.call(this,r);var l=v,o=l.asn1,h=o.x509,b=o.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){var D=this.params,x=[];return D.reqexp!=null&&x.push({tag:{tagi:"80",obj:{int:D.reqexp}}}),D.inhibit!=null&&x.push({tag:{tagi:"81",obj:{int:D.inhibit}}}),this.asn1ExtnValue=b({seq:x}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.36",r!==void 0&&(this.params=r)},je(v.asn1.x509.PolicyConstraints,v.asn1.x509.Extension),v.asn1.x509.InhibitAnyPolicy=function(r){v.asn1.x509.InhibitAnyPolicy.superclass.constructor.call(this,r);var l=v,o=l.asn1,h=o.x509,b=o.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=b({int:this.params.skip}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.54",r!==void 0&&(this.params=r)},je(v.asn1.x509.InhibitAnyPolicy,v.asn1.x509.Extension),v.asn1.x509.NameConstraints=function(r){v.asn1.x509.NameConstraints.superclass.constructor.call(this,r);var l=v,o=l.asn1,h=o.x509,b=o.ASN1Util.newObject,D=h.GeneralSubtree;this.params=null,this.getExtnValueHex=function(){var x=this.params,_=[];if(x.permit!=null&&x.permit.length!=null){for(var M=[],K=0;K<x.permit.length;K++)M.push(new D(x.permit[K]));_.push({tag:{tagi:"a0",obj:{seq:M}}})}if(x.exclude!=null&&x.exclude.length!=null){for(var ht=[],K=0;K<x.exclude.length;K++)ht.push(new D(x.exclude[K]));_.push({tag:{tagi:"a1",obj:{seq:ht}}})}return this.asn1ExtnValue=b({seq:_}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.30",r!==void 0&&(this.params=r)},je(v.asn1.x509.NameConstraints,v.asn1.x509.Extension),v.asn1.x509.GeneralSubtree=function(r){v.asn1.x509.GeneralSubtree.superclass.constructor.call(this);var l=v.asn1,o=l.x509,h=o.GeneralName,b=l.ASN1Util.newObject;this.params=null,this.setByParam=function(D){this.params=D},this.tohex=function(){var D=this.params,x=[new h(D)];D.min!=null&&x.push({tag:{tagi:"80",obj:{int:D.min}}}),D.max!=null&&x.push({tag:{tagi:"81",obj:{int:D.max}}});var _=b({seq:x});return _.tohex()},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&this.setByParam(r)},je(v.asn1.x509.GeneralSubtree,v.asn1.ASN1Object),v.asn1.x509.ExtKeyUsage=function(r){v.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,r);var l=v,o=l.asn1;this.setPurposeArray=function(h){this.asn1ExtnValue=new o.DERSequence;for(var b=0;b<h.length;b++){var D=new o.DERObjectIdentifier(h[b]);this.asn1ExtnValue.appendASN1Object(D)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.37",r!==void 0&&r.array!==void 0&&this.setPurposeArray(r.array)},je(v.asn1.x509.ExtKeyUsage,v.asn1.x509.Extension),v.asn1.x509.AuthorityKeyIdentifier=function(r){v.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,r);var l=v,o=l.asn1,h=o.DERTaggedObject,b=o.x509.GeneralNames,D=l.crypto.Util.isKey;this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var x=new Array;this.asn1KID&&x.push(new h({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&x.push(new h({explicit:!1,tag:"a1",obj:new b([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&x.push(new h({explicit:!1,tag:"82",obj:this.asn1CertSN}));var _=new o.DERSequence({array:x});return this.asn1ExtnValue=_,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(x){if(x.str!==void 0||x.hex!==void 0)this.asn1KID=new v.asn1.DEROctetString(x);else if(typeof x=="object"&&v.crypto.Util.isKey(x)||typeof x=="string"&&x.indexOf("BEGIN ")!=-1){var _=x;typeof x=="string"&&(_=Tr.getKey(x));var M=Tr.getKeyID(_);this.asn1KID=new v.asn1.DEROctetString({hex:M})}},this.setCertIssuerByParam=function(x){x.str!==void 0||x.ldapstr!==void 0||x.hex!==void 0||x.certsubject!==void 0||x.certissuer!==void 0?this.asn1CertIssuer=new v.asn1.x509.X500Name(x):typeof x=="string"&&x.indexOf("BEGIN ")!=-1&&x.indexOf("CERTIFICATE")!=-1&&(this.asn1CertIssuer=new v.asn1.x509.X500Name({certissuer:x}))},this.setCertSNByParam=function(x){if(x.str!==void 0||x.bigint!==void 0||x.hex!==void 0)this.asn1CertSN=new v.asn1.DERInteger(x);else if(typeof x=="string"&&x.indexOf("BEGIN ")!=-1&&x.indexOf("CERTIFICATE")){var _=new nr;_.readCertPEM(x);var M=_.getSerialNumberHex();this.asn1CertSN=new v.asn1.DERInteger({hex:M})}},this.oid="2.5.29.35",r!==void 0&&(r.kid!==void 0&&this.setKIDByParam(r.kid),r.issuer!==void 0&&this.setCertIssuerByParam(r.issuer),r.sn!==void 0&&this.setCertSNByParam(r.sn),r.issuersn!==void 0&&typeof r.issuersn=="string"&&r.issuersn.indexOf("BEGIN ")!=-1&&r.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(r.issuersn),this.setCertIssuerByParam(r.issuersn)))},je(v.asn1.x509.AuthorityKeyIdentifier,v.asn1.x509.Extension),v.asn1.x509.SubjectKeyIdentifier=function(r){v.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,r);var l=v,o=l.asn1,h=o.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(b){if(b.str!==void 0||b.hex!==void 0)this.asn1KID=new h(b);else if(typeof b=="object"&&v.crypto.Util.isKey(b)||typeof b=="string"&&b.indexOf("BEGIN")!=-1){var D=b;typeof b=="string"&&(D=Tr.getKey(b));var x=Tr.getKeyID(D);this.asn1KID=new v.asn1.DEROctetString({hex:x})}},this.oid="2.5.29.14",r!==void 0&&r.kid!==void 0&&this.setKIDByParam(r.kid)},je(v.asn1.x509.SubjectKeyIdentifier,v.asn1.x509.Extension),v.asn1.x509.AuthorityInfoAccess=function(r){v.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,r),this.setAccessDescriptionArray=function(l){for(var o=new Array,h=v,b=h.asn1,D=b.DERSequence,x=b.DERObjectIdentifier,_=b.x509.GeneralName,M=0;M<l.length;M++){var K,ht=l[M];if(ht.ocsp!==void 0)K=new D({array:[new x({oid:"1.3.6.1.5.5.7.48.1"}),new _({uri:ht.ocsp})]});else if(ht.caissuer!==void 0)K=new D({array:[new x({oid:"1.3.6.1.5.5.7.48.2"}),new _({uri:ht.caissuer})]});else throw new Error("unknown AccessMethod parameter: "+JSON.stringify(ht));o.push(K)}this.asn1ExtnValue=new D({array:o})},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.1.1",r!==void 0&&r.array!==void 0&&this.setAccessDescriptionArray(r.array)},je(v.asn1.x509.AuthorityInfoAccess,v.asn1.x509.Extension),v.asn1.x509.SubjectAltName=function(r){v.asn1.x509.SubjectAltName.superclass.constructor.call(this,r),this.setNameArray=function(l){this.asn1ExtnValue=new v.asn1.x509.GeneralNames(l)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.17",r!==void 0&&r.array!==void 0&&this.setNameArray(r.array)},je(v.asn1.x509.SubjectAltName,v.asn1.x509.Extension),v.asn1.x509.IssuerAltName=function(r){v.asn1.x509.IssuerAltName.superclass.constructor.call(this,r),this.setNameArray=function(l){this.asn1ExtnValue=new v.asn1.x509.GeneralNames(l)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.18",r!==void 0&&r.array!==void 0&&this.setNameArray(r.array)},je(v.asn1.x509.IssuerAltName,v.asn1.x509.Extension),v.asn1.x509.SubjectDirectoryAttributes=function(r){v.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,r);var l=v.asn1,o=l.DERSequence,h=l.ASN1Util.newObject,b=l.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var D=[],x=0;x<this.params.array.length;x++){var _=this.params.array[x];if(_.attr!=null&&_.array!=null){var M={seq:[{oid:_.attr},{set:_.array}]};D.push(h(M));continue}var K={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if(_.attr=="dateOfBirth")K.seq[0].oid=b(_.attr),K.seq[1].set[0]={gentime:_.str};else if(_.attr=="placeOfBirth")K.seq[0].oid=b(_.attr),K.seq[1].set[0]={utf8str:_.str};else if(_.attr=="gender")K.seq[0].oid=b(_.attr),K.seq[1].set[0]={prnstr:_.str};else if(_.attr=="countryOfCitizenship")K.seq[0].oid=b(_.attr),K.seq[1].set[0]={prnstr:_.str};else if(_.attr=="countryOfResidence")K.seq[0].oid=b(_.attr),K.seq[1].set[0]={prnstr:_.str};else throw new Error("unsupported attribute: "+_.attr);D.push(new h(K))}var ht=new o({array:D});return this.asn1ExtnValue=ht,this.asn1ExtnValue.tohex()},this.oid="2.5.29.9",r!==void 0&&(this.params=r)},je(v.asn1.x509.SubjectDirectoryAttributes,v.asn1.x509.Extension),v.asn1.x509.PrivateExtension=function(r){v.asn1.x509.PrivateExtension.superclass.constructor.call(this,r);var l=v,o=l.lang.String.isHex,h=l.asn1,b=h.x509.OID.name2oid,D=h.ASN1Util.newObject;this.params=null,this.setByParam=function(x){this.oid=b(x.extname),this.params=x},this.getExtnValueHex=function(){if(this.params.extname==null||this.params.extn==null)throw new Error("extname or extnhex not specified");var x=this.params.extn;if(typeof x=="string"&&o(x))return x;if(typeof x=="object")try{return D(x).tohex()}catch{}throw new Error("unsupported extn value")},r!=null&&this.setByParam(r)},je(v.asn1.x509.PrivateExtension,v.asn1.x509.Extension),v.asn1.x509.CRL=function(r){v.asn1.x509.CRL.superclass.constructor.call(this);var l=v,o=l.asn1,h=o.DERSequence,b=o.DERBitString,D=o.x509,x=D.AlgorithmIdentifier,_=D.TBSCertList;this.params=void 0,this.setByParam=function(M){this.params=M},this.sign=function(){var M=new _(this.params).tohex(),K=new v.crypto.Signature({alg:this.params.sigalg});K.init(this.params.cakey),K.updateHex(M);var ht=K.sign();this.params.sighex=ht},this.getPEM=function(){return Pe(this.tohex(),"X509 CRL")},this.tohex=function(){var M=this.params;if(M.tbsobj==null&&(M.tbsobj=new _(M)),M.sighex==null&&M.cakey!=null&&this.sign(),M.sighex==null)throw new Error("sighex or cakey parameter not defined");var K=[];K.push(M.tbsobj),K.push(new x({name:M.sigalg})),K.push(new b({hex:"00"+M.sighex}));var ht=new h({array:K});return ht.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&(this.params=r)},je(v.asn1.x509.CRL,v.asn1.ASN1Object),v.asn1.x509.TBSCertList=function(r){v.asn1.x509.TBSCertList.superclass.constructor.call(this);var l=v,o=l.asn1,h=o.DERInteger,b=o.DERSequence,D=o.DERTaggedObject,x=o.DERObjectIdentifier,_=o.x509,M=_.AlgorithmIdentifier,K=_.Time,ht=_.Extensions,mt=_.X500Name;this.params=null,this.setByParam=function(P){this.params=P},this.getRevCertSequence=function(){for(var P=[],I=this.params.revcert,ut=0;ut<I.length;ut++){var T=[new h(I[ut].sn),new K(I[ut].date)];I[ut].ext!=null&&T.push(new ht(I[ut].ext)),P.push(new b({array:T}))}return new b({array:P})},this.tohex=function(){var P=[],I=this.params;if(I.version!=null){var ut=I.version-1,T=new h({int:ut});P.push(T)}if(P.push(new M({name:I.sigalg})),P.push(new mt(I.issuer)),P.push(new K(I.thisupdate)),I.nextupdate!=null&&P.push(new K(I.nextupdate)),I.revcert!=null&&P.push(this.getRevCertSequence()),I.ext!=null){var ot=new ht(I.ext);P.push(new D({tag:"a0",explicit:!0,obj:ot}))}var Y=new b({array:P});return Y.tohex()},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&this.setByParam(r)},je(v.asn1.x509.TBSCertList,v.asn1.ASN1Object),v.asn1.x509.CRLEntry=function(r){v.asn1.x509.CRLEntry.superclass.constructor.call(this);var l=null,o=null,h=v,b=h.asn1;this.setCertSerial=function(D){this.sn=new b.DERInteger(D)},this.setRevocationDate=function(D){this.time=new b.x509.Time(D)},this.tohex=function(){var D=new b.DERSequence({array:[this.sn,this.time]});return this.TLV=D.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&(r.time!==void 0&&this.setRevocationDate(r.time),r.sn!==void 0&&this.setCertSerial(r.sn))},je(v.asn1.x509.CRLEntry,v.asn1.ASN1Object),v.asn1.x509.CRLNumber=function(r){v.asn1.x509.CRLNumber.superclass.constructor.call(this,r),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new v.asn1.DERInteger(this.params.num),this.asn1ExtnValue.tohex()},this.oid="2.5.29.20",r!=null&&(this.params=r)},je(v.asn1.x509.CRLNumber,v.asn1.x509.Extension),v.asn1.x509.CRLReason=function(r){v.asn1.x509.CRLReason.superclass.constructor.call(this,r),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new v.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.tohex()},this.oid="2.5.29.21",r!=null&&(this.params=r)},je(v.asn1.x509.CRLReason,v.asn1.x509.Extension),v.asn1.x509.OCSPNonce=function(r){v.asn1.x509.OCSPNonce.superclass.constructor.call(this,r),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new v.asn1.DEROctetString(this.params),this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.2",r!=null&&(this.params=r)},je(v.asn1.x509.OCSPNonce,v.asn1.x509.Extension),v.asn1.x509.OCSPNoCheck=function(r){v.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,r),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new v.asn1.DERNull,this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.5",r!=null&&(this.params=r)},je(v.asn1.x509.OCSPNoCheck,v.asn1.x509.Extension),v.asn1.x509.AdobeTimeStamp=function(r){v.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,r);var l=v,o=l.asn1,h=o.DERInteger,b=o.DERBoolean,D=o.DERSequence,x=o.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var _=this.params,M=[new h(1)];return M.push(new x({uri:_.uri})),_.reqauth!=null&&M.push(new b(_.reqauth)),this.asn1ExtnValue=new D({array:M}),this.asn1ExtnValue.tohex()},this.oid="1.2.840.113583.1.1.9.1",r!==void 0&&this.setByParam(r)},je(v.asn1.x509.AdobeTimeStamp,v.asn1.x509.Extension),v.asn1.x509.X500Name=function(r){v.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var l=v,o=l.asn1,h=o.x509,b=h.RDN,D=On;this.setByString=function(x,_){_!==void 0&&(this.sRule=_);var M=x.split("/");M.shift();for(var K=[],ht=0;ht<M.length;ht++)if(M[ht].match(/^[^=]+=.+$/))K.push(M[ht]);else{var mt=K.length-1;K[mt]=K[mt]+"/"+M[ht]}for(var ht=0;ht<K.length;ht++)this.asn1Array.push(new b({str:K[ht],rule:this.sRule}))},this.setByLdapString=function(x,_){_!==void 0&&(this.sRule=_);var M=h.X500Name.ldapToCompat(x);this.setByString(M,_)},this.setByObject=function(x,_){_!==void 0&&(this.sRule=_);for(var M in x)if(x.hasOwnProperty(M)){var K=new b({str:M+"="+x[M],rule:this.sRule});this.asn1Array?this.asn1Array.push(K):this.asn1Array=[K]}},this.setByParam=function(x){if(x.rule!==void 0&&(this.sRule=x.rule),x.array!==void 0)this.paramArray=x.array;else if(x.str!==void 0)this.setByString(x.str);else if(x.ldapstr!==void 0)this.setByLdapString(x.ldapstr);else if(x.hex!==void 0)this.hTLV=x.hex;else if(x.certissuer!==void 0){var _=new nr;_.readCertPEM(x.certissuer),this.hTLV=_.getIssuerHex()}else if(x.certsubject!==void 0){var _=new nr;_.readCertPEM(x.certsubject),this.hTLV=_.getSubjectHex()}else typeof x=="object"&&x.certsubject===void 0&&x.certissuer===void 0&&this.setByObject(x)},this.tohex=function(){if(typeof this.hTLV=="string")return this.hTLV;if(this.asn1Array.length==0&&this.paramArray.length>0)for(var x=0;x<this.paramArray.length;x++){var _={array:this.paramArray[x]};this.sRule!="utf8"&&(_.rule=this.sRule);var M=new b(_);this.asn1Array.push(M)}var K=new o.DERSequence({array:this.asn1Array});return this.hTLV=K.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&this.setByParam(r)},je(v.asn1.x509.X500Name,v.asn1.ASN1Object),v.asn1.x509.X500Name.compatToLDAP=function(r){if(r.substr(0,1)!=="/")throw"malformed input";var l="";r=r.substr(1);var o=r.split("/");return o.reverse(),o=o.map(function(h){return h.replace(/,/,"\\,")}),o.join(",")},v.asn1.x509.X500Name.onelineToLDAP=function(r){return v.asn1.x509.X500Name.compatToLDAP(r)},v.asn1.x509.X500Name.ldapToCompat=function(r){for(var l=r.split(","),o=!1,h=[],b=0;l.length>0;b++){var D=l.shift();if(o===!0){var x=h.pop(),_=(x+","+D).replace(/\\,/g,",");h.push(_),o=!1}else h.push(D);D.substr(-1,1)==="\\"&&(o=!0)}return h=h.map(function(M){return M.replace("/","\\/")}),h.reverse(),"/"+h.join("/")},v.asn1.x509.X500Name.ldapToOneline=function(r){return v.asn1.x509.X500Name.ldapToCompat(r)},v.asn1.x509.RDN=function(r){v.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var l=v.asn1.x509.AttributeTypeAndValue;this.setByParam=function(o){o.rule!==void 0&&(this.sRule=o.rule),o.str!==void 0&&this.addByMultiValuedString(o.str),o.array!==void 0&&(this.paramArray=o.array)},this.addByString=function(o){this.asn1Array.push(new v.asn1.x509.AttributeTypeAndValue({str:o,rule:this.sRule}))},this.addByMultiValuedString=function(o){for(var h=v.asn1.x509.RDN.parseString(o),b=0;b<h.length;b++)this.addByString(h[b])},this.tohex=function(){if(this.asn1Array.length==0&&this.paramArray.length>0)for(var o=0;o<this.paramArray.length;o++){var h=this.paramArray[o];h.rule!==void 0&&this.sRule!="utf8"&&(h.rule=this.sRule);var b=new l(h);this.asn1Array.push(b)}var D=new v.asn1.DERSet({array:this.asn1Array});return this.TLV=D.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&this.setByParam(r)},je(v.asn1.x509.RDN,v.asn1.ASN1Object),v.asn1.x509.RDN.parseString=function(r){for(var l=r.split(/\+/),o=!1,h=[],b=0;l.length>0;b++){var D=l.shift();if(o===!0){var x=h.pop(),_=(x+"+"+D).replace(/\\\+/g,"+");h.push(_),o=!1}else h.push(D);D.substr(-1,1)==="\\"&&(o=!0)}for(var M=!1,K=[],b=0;h.length>0;b++){var D=h.shift();if(M===!0){var ht=K.pop();if(D.match(/"$/)){var _=(ht+"+"+D).replace(/^([^=]+)="(.*)"$/,"$1=$2");K.push(_),M=!1}else K.push(ht+"+"+D)}else K.push(D);D.match(/^[^=]+="/)&&(M=!0)}return K},v.asn1.x509.AttributeTypeAndValue=function(r){v.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var l=v,o=l.asn1,h=o.DERSequence,b=o.DERUTF8String,D=o.DERPrintableString,x=o.DERTeletexString,_=o.DERIA5String,M=o.DERVisibleString,K=o.DERBMPString,ht=l.lang.String.isMail,mt=l.lang.String.isPrintable;this.setByParam=function(P){if(P.rule!==void 0&&(this.sRule=P.rule),P.ds!==void 0&&(this.dsType=P.ds),P.value===void 0&&P.str!==void 0){var I=P.str,ut=I.match(/^([^=]+)=(.+)$/);if(ut)this.sType=ut[1],this.sValue=ut[2];else throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr)}else this.sType=P.type,this.sValue=P.value},this.setByString=function(P,I){I!==void 0&&(this.sRule=I);var ut=P.match(/^([^=]+)=(.+)$/);if(ut)this.setByAttrTypeAndValueStr(ut[1],ut[2]);else throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr)},this._getDsType=function(){var P=this.sType,I=this.sValue,ut=this.sRule;return ut==="prn"?P=="CN"&&ht(I)?"ia5":mt(I)?"prn":"utf8":ut==="utf8"?P=="CN"&&ht(I)?"ia5":P=="C"?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(P,I,ut){ut!==void 0&&(this.sRule=ut),this.sType=P,this.sValue=I},this.getValueObj=function(P,I){if(P=="utf8")return new b({str:I});if(P=="prn")return new D({str:I});if(P=="tel")return new x({str:I});if(P=="ia5")return new _({str:I});if(P=="vis")return new M({str:I});if(P=="bmp")return new K({str:I});throw new Error("unsupported directory string type: type="+P+" value="+I)},this.tohex=function(){this.dsType==null&&(this.dsType=this._getDsType());var P=v.asn1.x509.OID.atype2obj(this.sType),I=this.getValueObj(this.dsType,this.sValue),ut=new h({array:[P,I]});return this.TLV=ut.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&this.setByParam(r)},je(v.asn1.x509.AttributeTypeAndValue,v.asn1.ASN1Object),v.asn1.x509.SubjectPublicKeyInfo=function(r){v.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var l=null,o=null,h=v,b=h.asn1,D=b.DERInteger,x=b.DERBitString,_=b.DERObjectIdentifier,M=b.DERSequence,K=b.ASN1Util.newObject,ht=b.x509,mt=ht.AlgorithmIdentifier,P=h.crypto,I=P.ECDSA,ut=P.DSA;this.getASN1Object=function(){if(this.asn1AlgId==null||this.asn1SubjPKey==null)throw"algId and/or subjPubKey not set";var T=new M({array:[this.asn1AlgId,this.asn1SubjPKey]});return T},this.tohex=function(){var T=this.getASN1Object();return this.hTLV=T.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.setPubKey=function(T){try{if(T instanceof Er){var ot=K({seq:[{int:{bigint:T.n}},{int:{int:T.e}}]}),Y=ot.tohex();this.asn1AlgId=new mt({name:"rsaEncryption"}),this.asn1SubjPKey=new x({hex:"00"+Y})}}catch{}try{if(T instanceof v.crypto.ECDSA){var Ft=new _({name:T.curveName});this.asn1AlgId=new mt({name:"ecPublicKey",asn1params:Ft}),this.asn1SubjPKey=new x({hex:"00"+T.pubKeyHex})}}catch{}try{if(T instanceof v.crypto.DSA){var Ft=new K({seq:[{int:{bigint:T.p}},{int:{bigint:T.q}},{int:{bigint:T.g}}]});this.asn1AlgId=new mt({name:"dsa",asn1params:Ft});var Tt=new D({bigint:T.y});this.asn1SubjPKey=new x({hex:"00"+Tt.tohex()})}}catch{}},r!==void 0&&this.setPubKey(r)},je(v.asn1.x509.SubjectPublicKeyInfo,v.asn1.ASN1Object),v.asn1.x509.Time=function(r){v.asn1.x509.Time.superclass.constructor.call(this);var l=null,o=null,h=v,b=h.asn1,D=b.DERUTCTime,x=b.DERGeneralizedTime;this.params=null,this.type=null,this.setTimeParams=function(_){this.timeParams=_},this.setByParam=function(_){this.params=_},this.getType=function(_){return _.match(/^[0-9]{12}Z$/)?"utc":_.match(/^[0-9]{14}Z$/)?"gen":_.match(/^[0-9]{12}\.[0-9]+Z$/)?"utc":_.match(/^[0-9]{14}\.[0-9]+Z$/)?"gen":null},this.tohex=function(){var _=this.params,M=null;if(typeof _=="string"&&(_={str:_}),_!=null&&_.str&&(_.type==null||_.type==null)&&(_.type=this.getType(_.str)),_!=null&&_.str?(_.type=="utc"&&(M=new D(_.str)),_.type=="gen"&&(M=new x(_.str))):this.type=="gen"?M=new x:M=new D,M==null)throw new Error("wrong setting for Time");return this.TLV=M.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},v.asn1.x509.Time_bak=function(r){v.asn1.x509.Time_bak.superclass.constructor.call(this);var l=null,o=null,h=v,b=h.asn1,D=b.DERUTCTime,x=b.DERGeneralizedTime;this.setTimeParams=function(_){this.timeParams=_},this.tohex=function(){var _=null;return this.timeParams!=null?this.type=="utc"?_=new D(this.timeParams):_=new x(this.timeParams):this.type=="utc"?_=new D:_=new x,this.TLV=_.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},this.type="utc",r!==void 0&&(r.type!==void 0?this.type=r.type:r.str!==void 0&&(r.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),r.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=r)},je(v.asn1.x509.Time,v.asn1.ASN1Object),v.asn1.x509.AlgorithmIdentifier=function(r){v.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var l=v,o=l.asn1,h=o.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.tohex=function(){if(this.nameAlg===null&&this.asn1Alg===null)throw new Error("algorithm not specified");if(this.nameAlg!==null){var D=null;for(var x in h)x===this.nameAlg&&(D=h[x]);if(D!==null)return this.hTLV=D,this.hTLV}this.nameAlg!==null&&this.asn1Alg===null&&(this.asn1Alg=o.x509.OID.name2obj(this.nameAlg));var _=[this.asn1Alg];this.asn1Params!==null&&_.push(this.asn1Params);var M=new o.DERSequence({array:_});return this.hTLV=M.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&(r.name!==void 0&&(this.nameAlg=r.name),r.asn1params!==void 0&&(this.asn1Params=r.asn1params),r.paramempty!==void 0&&(this.paramEmpty=r.paramempty)),this.asn1Params===null&&this.paramEmpty===!1&&this.nameAlg!==null){this.nameAlg.name!==void 0&&(this.nameAlg=this.nameAlg.name);var b=this.nameAlg.toLowerCase();b.substr(-7,7)!=="withdsa"&&b.substr(-9,9)!=="withecdsa"&&(this.asn1Params=new o.DERNull)}},je(v.asn1.x509.AlgorithmIdentifier,v.asn1.ASN1Object),v.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"},v.asn1.x509.GeneralName=function(r){v.asn1.x509.GeneralName.superclass.constructor.call(this);var l={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87",otherName:"a0"},o=v,h=o.asn1,b=h.x509,D=b.X500Name,x=b.OtherName,_=h.DERIA5String,M=h.DERPrintableString,K=h.DEROctetString,ht=h.DERTaggedObject,mt=h.ASN1Object,P=Error;this.params=null,this.setByParam=function(I){this.params=I},this.tohex=function(){var I=this.params,ut,ot,T,ot=!1;if(I.other!==void 0)ut="a0",T=new x(I.other);else if(I.rfc822!==void 0)ut="81",T=new _({str:I.rfc822});else if(I.dns!==void 0)ut="82",T=new _({str:I.dns});else if(I.dn!==void 0)ut="a4",ot=!0,typeof I.dn=="string"?T=new D({str:I.dn}):I.dn instanceof v.asn1.x509.X500Name?T=I.dn:T=new D(I.dn);else if(I.ldapdn!==void 0)ut="a4",ot=!0,T=new D({ldapstr:I.ldapdn});else if(I.certissuer!==void 0||I.certsubj!==void 0){ut="a4",ot=!0;var Y,Ft,Tt=null;if(I.certsubj!==void 0?(Y=!1,Ft=I.certsubj):(Y=!0,Ft=I.certissuer),Ft.match(/^[0-9A-Fa-f]+$/)&&Tt==Ft,Ft.indexOf("-----BEGIN ")!=-1&&(Tt=On(Ft)),Tt==null)throw new Error("certsubj/certissuer not cert");var Jt=new nr;Jt.hex=Tt;var Gt;Y?Gt=Jt.getIssuerHex():Gt=Jt.getSubjectHex(),T=new mt,T.hTLV=Gt}else if(I.uri!==void 0)ut="86",T=new _({str:I.uri});else if(I.ip!==void 0){ut="87";var Ae,De=I.ip;try{if(De.match(/^[0-9a-f]+$/)){var d=De.length;if(d==8||d==16||d==32||d==64)Ae=De;else throw"err"}else Ae=gu(De)}catch(it){throw new P("malformed IP address: "+I.ip+":"+it.message)}T=new K({hex:Ae})}else throw new P("improper params");var B=new ht({tag:ut,explicit:ot,obj:T});return B.tohex()},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&this.setByParam(r)},je(v.asn1.x509.GeneralName,v.asn1.ASN1Object),v.asn1.x509.GeneralNames=function(r){v.asn1.x509.GeneralNames.superclass.constructor.call(this);var l=null,o=v,h=o.asn1;this.setByParamArray=function(b){for(var D=0;D<b.length;D++){var x=new h.x509.GeneralName(b[D]);this.asn1Array.push(x)}},this.tohex=function(){var b=new h.DERSequence({array:this.asn1Array});return b.tohex()},this.getEncodedHex=function(){return this.tohex()},this.asn1Array=new Array,typeof r<"u"&&this.setByParamArray(r)},je(v.asn1.x509.GeneralNames,v.asn1.ASN1Object),v.asn1.x509.OtherName=function(r){v.asn1.x509.OtherName.superclass.constructor.call(this);var l=null,o=null,h=v,b=h.asn1,D=b.DERObjectIdentifier,x=b.DERSequence,_=b.ASN1Util.newObject;this.params=null,this.setByParam=function(M){this.params=M},this.tohex=function(){var M=this.params;if(M.oid==null||M.value==null)throw new Error("oid or value not specified");var K=new D({oid:M.oid}),ht=_({tag:{tag:"a0",explicit:!0,obj:M.value}}),mt=new x({array:[K,ht]});return mt.tohex()},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&this.setByParam(r)},je(v.asn1.x509.OtherName,v.asn1.ASN1Object),v.asn1.x509.OID=new function(){var r=v.asn1.DERObjectIdentifier;this.name2oidList={"aes128-CBC":"2.16.840.1.101.3.4.1.2","aes256-CBC":"2.16.840.1.101.3.4.1.42",sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",hmacWithSHA1:"1.2.840.113549.2.7",hmacWithSHA224:"1.2.840.113549.2.8",hmacWithSHA256:"1.2.840.113549.2.9",hmacWithSHA384:"1.2.840.113549.2.10",hmacWithSHA512:"1.2.840.113549.2.11",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",policyMappings:"2.5.29.33",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",inhibitAnyPolicy:"2.5.29.54",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",smtpUTF8Mailbox:"1.3.6.1.5.5.7.8.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",secp521r1:"1.3.132.0.35",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1",smimeMailboxLegacy:"2.23.140.1.5.1.1",smimeMailboxMulti:"2.23.140.1.5.1.2",smimeMailboxStrict:"2.23.140.1.5.1.3",smimeOrganizationLegacy:"2.23.140.1.5.2.1",smimeOrganizationMulti:"2.23.140.1.5.2.2",smimeOrganizationStrict:"2.23.140.1.5.2.3",smimeSponsorLegacy:"2.23.140.1.5.3.1",smimeSponsorMulti:"2.23.140.1.5.3.2",smimeSponsorStrict:"2.23.140.1.5.3.3",smimeIndividualLegacy:"2.23.140.1.5.4.1",smimeIndividualMulti:"2.23.140.1.5.4.2",smimeIndividualStrict:"2.23.140.1.5.4.3"},this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",GN:"2.5.4.42",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.objCache={},this.name2obj=function(l){if(typeof this.objCache[l]<"u")return this.objCache[l];if(typeof this.name2oidList[l]>"u")throw"Name of ObjectIdentifier not defined: "+l;var o=this.name2oidList[l],h=new r({oid:o});return this.objCache[l]=h,h},this.atype2obj=function(l){if(this.objCache[l]!==void 0)return this.objCache[l];var o;if(l.match(/^\d+\.\d+\.[0-9.]+$/))o=l;else if(this.atype2oidList[l]!==void 0)o=this.atype2oidList[l];else if(this.name2oidList[l]!==void 0)o=this.name2oidList[l];else throw new Error("AttributeType name undefined: "+l);var h=new r({oid:o});return this.objCache[l]=h,h},this.registerOIDs=function(l){if(this.checkOIDs(l))for(var o in l)this.name2oidList[o]=l[o]},this.checkOIDs=function(l){try{var o=Object.keys(l);return o.length==0?!1:(o.map(function(h,b,D){var x=this[h];if(!x.match(/^[0-2]\.[0-9.]+$/))throw new Error("value is not OID")},l),!0)}catch{return!1}}},v.asn1.x509.OID.oid2name=function(r){var l=v.asn1.x509.OID.name2oidList;for(var o in l)if(l[o]==r)return o;return""},v.asn1.x509.OID.oid2atype=function(r){var l=v.asn1.x509.OID.atype2oidList;for(var o in l)if(l[o]==r)return o;return r},v.asn1.x509.OID.name2oid=function(r){if(r.match(/^[0-9.]+$/))return r;var l=v.asn1.x509.OID.name2oidList;return l[r]===void 0?"":l[r]},v.asn1.x509.X509Util={},v.asn1.x509.X509Util.newCertPEM=function(r){var l=v.asn1.x509,o=l.TBSCertificate,h=l.Certificate,b=new h(r);return b.getPEM()},(typeof v>"u"||!v)&&(v={}),(typeof v.asn1>"u"||!v.asn1)&&(v.asn1={}),(typeof v.asn1.cms>"u"||!v.asn1.cms)&&(v.asn1.cms={}),v.asn1.cms.Attribute=function(r){var l=Error,o=v,h=o.asn1,b=h.DERSequence,D=h.DERSet,x=h.DERObjectIdentifier;this.params=null,this.typeOid=null,this.setByParam=function(_){this.params=_},this.getValueArray=function(){throw new l("not yet implemented abstract")},this.tohex=function(){var _=new x({oid:this.typeOid}),M=new D({array:this.getValueArray()}),K=new b({array:[_,M]});return K.tohex()},this.getEncodedHex=function(){return this.tohex()}},je(v.asn1.cms.Attribute,v.asn1.ASN1Object),v.asn1.cms.ContentType=function(r){var l=v,o=l.asn1;o.cms.ContentType.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.3",this.getValueArray=function(){var h=new o.DERObjectIdentifier(this.params.type);return[h]},r!=null&&this.setByParam(r)},je(v.asn1.cms.ContentType,v.asn1.cms.Attribute),v.asn1.cms.MessageDigest=function(r){var l=v,o=l.asn1,h=o.DEROctetString,b=o.cms;b.MessageDigest.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.4",this.getValueArray=function(){var D=new h(this.params);return[D]},r!=null&&this.setByParam(r)},je(v.asn1.cms.MessageDigest,v.asn1.cms.Attribute),v.asn1.cms.SigningTime=function(r){var l=v,o=l.asn1;o.cms.SigningTime.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.5",this.getValueArray=function(){var h=new o.x509.Time(this.params);return[h]},r!=null&&this.setByParam(r)},je(v.asn1.cms.SigningTime,v.asn1.cms.Attribute),v.asn1.cms.SigningCertificate=function(r){var l=Error,o=v,h=o.asn1,b=h.DERSequence,D=h.cms,x=D.ESSCertID,_=o.crypto;D.SigningCertificate.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.12",this.getValueArray=function(){if(this.params==null||this.params==null||this.params.array==null)throw new l("parameter 'array' not specified");for(var M=this.params.array,K=[],ht=0;ht<M.length;ht++){var mt=M[ht];r.hasis==!1&&typeof mt=="string"&&(mt.indexOf("-----BEGIN")!=-1||Je.isASN1HEX(mt))&&(mt={cert:mt}),mt.hasis!=!1&&r.hasis==!1&&(mt.hasis=!1),K.push(new x(mt))}var P=new b({array:K}),I=new b({array:[P]});return[I]},r!=null&&this.setByParam(r)},je(v.asn1.cms.SigningCertificate,v.asn1.cms.Attribute),v.asn1.cms.ESSCertID=function(r){v.asn1.cms.ESSCertID.superclass.constructor.call(this);var l=Error,o=v,h=o.asn1,b=h.DEROctetString,D=h.DERSequence,x=h.cms.IssuerSerial;this.params=null,this.getCertHash=function(_,M){if(_.hash!=null)return _.hash;if(typeof _=="string"&&_.indexOf("-----BEGIN")==-1&&!Je.isASN1HEX(_))return _;var K;if(typeof _=="string")K=_;else if(_.cert!=null)K=_.cert;else throw new l("hash nor cert unspecified");var ht;K.indexOf("-----BEGIN")!=-1?ht=On(K):ht=K,typeof _=="string"&&(_.indexOf("-----BEGIN")!=-1?ht=On(_):Je.isASN1HEX(_)&&(ht=_));var mt;if(_.alg!=null)mt=_.alg;else if(M!=null)mt=M;else throw new l("hash alg unspecified");return o.crypto.Util.hashHex(ht,mt)},this.tohex=function(){var _=this.params,M=this.getCertHash(_,"sha1"),K=[];K.push(new b({hex:M})),(typeof _=="string"&&_.indexOf("-----BEGIN")!=-1||_.cert!=null&&_.hasis!=!1||_.issuer!=null&&_.serial!=null)&&K.push(new x(_));var ht=new D({array:K});return ht.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},je(v.asn1.cms.ESSCertID,v.asn1.ASN1Object),v.asn1.cms.SigningCertificateV2=function(r){var l=Error,o=v,h=o.asn1,b=h.DERSequence,D=h.x509,x=h.cms,_=x.ESSCertIDv2,M=o.crypto;x.SigningCertificateV2.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.47",this.getValueArray=function(){if(this.params==null||this.params==null||this.params.array==null)throw new l("parameter 'array' not specified");for(var K=this.params.array,ht=[],mt=0;mt<K.length;mt++){var P=K[mt];(r.alg!=null||r.hasis==!1)&&typeof P=="string"&&(P.indexOf("-----BEGIN")!=-1||Je.isASN1HEX(P))&&(P={cert:P}),P.alg==null&&r.alg!=null&&(P.alg=r.alg),P.hasis!=!1&&r.hasis==!1&&(P.hasis=!1),ht.push(new _(P))}var I=new b({array:ht}),ut=new b({array:[I]});return[ut]},r!=null&&this.setByParam(r)},je(v.asn1.cms.SigningCertificateV2,v.asn1.cms.Attribute),v.asn1.cms.ESSCertIDv2=function(r){v.asn1.cms.ESSCertIDv2.superclass.constructor.call(this);var l=Error,o=v,h=o.asn1,b=h.DEROctetString,D=h.DERSequence,x=h.cms.IssuerSerial,_=h.x509.AlgorithmIdentifier;this.params=null,this.tohex=function(){var M=this.params,K=this.getCertHash(M,"sha256"),ht=[];M.alg!=null&&M.alg!="sha256"&&ht.push(new _({name:M.alg})),ht.push(new b({hex:K})),(typeof M=="string"&&M.indexOf("-----BEGIN")!=-1||M.cert!=null&&M.hasis!=!1||M.issuer!=null&&M.serial!=null)&&ht.push(new x(M));var mt=new D({array:ht});return mt.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},je(v.asn1.cms.ESSCertIDv2,v.asn1.cms.ESSCertID),v.asn1.cms.IssuerSerial=function(r){var l=Error,o=v,h=o.asn1,b=h.DERInteger,D=h.DERSequence,x=h.cms,_=h.x509,M=_.GeneralNames,K=nr;x.IssuerSerial.superclass.constructor.call(this),this.setByParam=function(ht){this.params=ht},this.tohex=function(){var ht=this.params,mt,P;if(typeof ht=="string"&&ht.indexOf("-----BEGIN")!=-1||ht.cert!=null){var I;ht.cert!=null?I=ht.cert:I=ht;var ut=new K;ut.readCertPEM(I),mt=ut.getIssuer(),P={hex:ut.getSerialNumberHex()}}else if(ht.issuer!=null&&ht.serial)mt=ht.issuer,P=ht.serial;else throw new l("cert or issuer and serial parameter not specified");var T=new M([{dn:mt}]),ot=new b(P),Y=new D({array:[T,ot]});return Y.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},je(v.asn1.cms.IssuerSerial,v.asn1.ASN1Object),v.asn1.cms.SignerIdentifier=function(r){var l=v,o=l.asn1,h=o.DERInteger,b=o.DERSequence,D=o.cms,x=D.IssuerAndSerialNumber,_=D.SubjectKeyIdentifier,M=o.x509,K=M.X500Name,ht=nr,mt=Error;D.SignerIdentifier.superclass.constructor.call(this),this.params=null,this.tohex=function(){var P=this.params;if(P.type=="isssn"){var I=new x(P);return I.tohex()}else if(P.type=="skid"){var ut=new _(P);return ut.tohex()}else throw new Error("wrong property for isssn or skid")},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},je(v.asn1.cms.SignerIdentifier,v.asn1.ASN1Object),v.asn1.cms.IssuerAndSerialNumber=function(r){var l=v,o=l.asn1,h=o.DERInteger,b=o.DERSequence,D=o.cms,x=o.x509,_=x.X500Name,M=nr,K=Error;D.IssuerAndSerialNumber.superclass.constructor.call(this),this.params=null,this.tohex=function(){var ht=this.params,mt,P;if(typeof ht=="string"&&ht.indexOf("-----BEGIN")!=-1||ht.cert!=null){var I;ht.cert!=null?I=ht.cert:I=ht;var ut=new M;ut.readCertPEM(I),mt=ut.getIssuer(),P={hex:ut.getSerialNumberHex()}}else if(ht.issuer!=null&&ht.serial)mt=ht.issuer,P=ht.serial;else throw new K("cert or issuer and serial parameter not specified");var T=new _(mt),ot=new h(P),Y=new b({array:[T,ot]});return Y.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(ht){this.params=ht},r!=null&&this.setByParam(r)},je(v.asn1.cms.IssuerAndSerialNumber,v.asn1.ASN1Object),v.asn1.cms.SubjectKeyIdentifier=function(r){var l=v,o=l.asn1,h=o.DERInteger,b=o.DERSequence,D=o.ASN1Util.newObject,x=o.cms,_=x.IssuerAndSerialName,M=x.SubjectKeyIdentifier,K=o.x509,ht=K.X500Name,mt=nr,P=Error;x.SubjectKeyIdentifier.superclass.constructor.call(this),this.tohex=function(){var I=this.params;if(I.cert==null&&I.skid==null)throw new P("property cert nor skid undefined");var ut;if(I.cert!=null){var T=new mt(I.cert),ot=T.getExtSubjectKeyIdentifier();ut=ot.kid.hex}else I.skid!=null&&(ut=I.skid);var Y=D({tag:{tage:"a0",obj:{octstr:{hex:ut}}}});return Y.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},je(v.asn1.cms.SubjectKeyIdentifier,v.asn1.ASN1Object),v.asn1.cms.AttributeList=function(r){var l=Error,o=v,h=o.asn1,b=h.DERSet,D=h.cms;D.AttributeList.superclass.constructor.call(this),this.params=null,this.hTLV=null,this.setByParam=function(x){this.params=x},this.tohex=function(){var x=this.params;if(this.hTLV!=null)return this.hTLV;var _=!0;x.sortflag!=null&&(_=x.sortflag);for(var M=x.array,K=[],ht=0;ht<M.length;ht++){var mt=M[ht],P=mt.attr;if(P=="contentType")K.push(new D.ContentType(mt));else if(P=="messageDigest")K.push(new D.MessageDigest(mt));else if(P=="signingTime")K.push(new D.SigningTime(mt));else if(P=="signingCertificate")K.push(new D.SigningCertificate(mt));else if(P=="signingCertificateV2")K.push(new D.SigningCertificateV2(mt));else if(P=="signaturePolicyIdentifier")K.push(new v.asn1.cades.SignaturePolicyIdentifier(mt));else if(P=="signatureTimeStamp"||P=="timeStampToken")K.push(new v.asn1.cades.SignatureTimeStamp(mt));else throw new l("unknown attr: "+P)}var I=new b({array:K,sortflag:_});return this.hTLV=I.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},je(v.asn1.cms.AttributeList,v.asn1.ASN1Object),v.asn1.cms.SignerInfo=function(r){var l=Error,o=v,h=o.asn1,b=h.DERInteger,D=h.DEROctetString,x=h.DERSequence,_=h.DERTaggedObject,M=h.cms,K=M.SignerIdentifier,ht=M.AttributeList,mt=M.ContentType,P=M.EncapsulatedContentInfo,I=M.MessageDigest,ut=M.SignedData,T=h.x509,ot=T.AlgorithmIdentifier,Y=o.crypto,Ft=Tr;M.SignerInfo.superclass.constructor.call(this),this.params=null,this.sign=function(){var Tt=this.params,Jt=Tt.sigalg,Gt=new ht(Tt.sattrs).tohex(),Ae=Ft.getKey(Tt.signkey),De=new Y.Signature({alg:Jt});De.init(Ae),De.updateHex(Gt);var d=De.sign();Tt.sighex=d},this.tohex=function(){var Tt=this.params,Jt=[];if(Jt.push(new b({int:Tt.version})),Jt.push(new K(Tt.id)),Jt.push(new ot({name:Tt.hashalg})),Tt.sattrs!=null){var Gt=new ht(Tt.sattrs);try{Jt.push(new _({tag:"a0",explicit:!1,obj:Gt}))}catch(De){throw new l("si sattr error: "+De)}}if(Tt.sigalgfield!=null?Jt.push(new ot({name:Tt.sigalgfield})):Jt.push(new ot({name:Tt.sigalg})),Tt.sighex==null&&Tt.signkey!=null&&this.sign(),Jt.push(new D({hex:Tt.sighex})),Tt.uattrs!=null){var Gt=new ht(Tt.uattrs);try{Jt.push(new _({tag:"a1",explicit:!1,obj:Gt}))}catch(d){throw new l("si uattr error: "+d)}}var Ae=new x({array:Jt});return Ae.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},je(v.asn1.cms.SignerInfo,v.asn1.ASN1Object),v.asn1.cms.EncapsulatedContentInfo=function(r){var l=v,o=l.asn1,h=o.DERTaggedObject,b=o.DERSequence,D=o.DERObjectIdentifier,x=o.DEROctetString,_=o.cms;_.EncapsulatedContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var M=this.params,K=[];if(K.push(new D(M.type)),M.content!=null&&(M.content.hex!=null||M.content.str!=null)&&M.isDetached!=!0){var ht=new x(M.content),mt=new h({tag:"a0",explicit:!0,obj:ht});K.push(mt)}var P=new b({array:K});return P.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(M){this.params=M},r!=null&&this.setByParam(r)},je(v.asn1.cms.EncapsulatedContentInfo,v.asn1.ASN1Object),v.asn1.cms.ContentInfo=function(r){var l=v,o=l.asn1,h=o.DERTaggedObject,b=o.DERSequence,D=o.DERObjectIdentifier,x=o.x509,_=x.OID.name2obj;v.asn1.cms.ContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var M=this.params,K=[];K.push(new D(M.type));var ht=new h({tag:"a0",explicit:!0,obj:M.obj});K.push(ht);var mt=new b({array:K});return mt.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(M){this.params=M},r!=null&&this.setByParam(r)},je(v.asn1.cms.ContentInfo,v.asn1.ASN1Object),v.asn1.cms.SignedData=function(r){var l=Error,o=v,h=o.asn1,b=h.ASN1Object,D=h.DERInteger,x=h.DERSet,_=h.DERSequence,M=h.DERTaggedObject,K=h.cms,ht=K.EncapsulatedContentInfo,mt=K.SignerInfo,P=K.ContentInfo,I=K.CertificateSet,ut=K.RevocationInfoChoices,T=h.x509,ot=T.AlgorithmIdentifier;v.asn1.cms.SignedData.superclass.constructor.call(this),this.params=null,this.checkAndFixParam=function(){var Y=this.params;this._setDigestAlgs(Y),this._setContentTypeByEContent(Y),this._setMessageDigestByEContent(Y),this._setSignerInfoVersion(Y),this._setSignedDataVersion(Y)},this._setDigestAlgs=function(Y){for(var Ft={},Tt=Y.sinfos,Jt=0;Jt<Tt.length;Jt++){var Gt=Tt[Jt];Ft[Gt.hashalg]=1}Y.hashalgs=Object.keys(Ft).sort()},this._setContentTypeByEContent=function(Y){for(var Ft=Y.econtent.type,Tt=Y.sinfos,Jt=0;Jt<Tt.length;Jt++){var Gt=Tt[Jt],Ae=this._getAttrParamByName(Gt,"contentType");Ae.type=Ft}},this._setMessageDigestByEContent=function(Y){var Ft=Y.econtent,Tt=Y.econtent.type,Jt=Ft.content.hex;Jt==null&&Ft.type=="data"&&Ft.content.str!=null&&(Jt=kn(Ft.content.str));for(var Gt=Y.sinfos,Ae=0;Ae<Gt.length;Ae++){var De=Gt[Ae],d=De.hashalg,B=this._getAttrParamByName(De,"messageDigest"),it=v.crypto.Util.hashHex(Jt,d);B.hex=it}},this._getAttrParamByName=function(Y,Ft){for(var Tt=Y.sattrs.array,Jt=0;Jt<Tt.length;Jt++)if(Tt[Jt].attr==Ft)return Tt[Jt]},this._setSignerInfoVersion=function(Y){for(var Ft=Y.sinfos,Tt=0;Tt<Ft.length;Tt++){var Jt=Ft[Tt],Gt=1;Jt.id.type=="skid"&&(Gt=3),Jt.version=Gt}},this._setSignedDataVersion=function(Y){var Ft=this._getSignedDataVersion(Y);Y.version=Ft},this._getSignedDataVersion=function(Y){if(Y.revinfos!=null)for(var Ft=Y.revinfos,Tt=0;Tt<Ft.length;Tt++){var Jt=Ft[Tt];if(Jt.ocsp!=null)return 5}for(var Gt=Y.sinfos,Tt=0;Tt<Gt.length;Tt++){var Ae=Y.sinfos[Tt];if(Ae.version==3)return 3}return Y.econtent.type!="data"?3:1},this.tohex=function(){var Y=this.params;this.getEncodedHexPrepare!=null&&this.getEncodedHexPrepare(),Y.fixed!=!0&&this.checkAndFixParam();var Ft=[];Ft.push(new D({int:Y.version}));for(var Tt=[],Jt=0;Jt<Y.hashalgs.length;Jt++){var Gt=Y.hashalgs[Jt];Tt.push(new ot({name:Gt}))}Ft.push(new x({array:Tt})),Ft.push(new ht(Y.econtent)),Y.certs!=null&&Ft.push(new I(Y.certs)),Y.revinfos!=null&&Ft.push(new ut(Y.revinfos));for(var Ae=[],Jt=0;Jt<Y.sinfos.length;Jt++){var De=Y.sinfos[Jt];Ae.push(new mt(De))}Ft.push(new x({array:Ae}));var d=new _({array:Ft});return d.tohex()},this.getEncodedHex=function(){return this.tohex()},this.getContentInfo=function(){var Y=new P({type:"signed-data",obj:this});return Y},this.getContentInfoEncodedHex=function(){return this.getContentInfo().tohex()},r!=null&&this.setByParam(r)},je(v.asn1.cms.SignedData,v.asn1.ASN1Object),v.asn1.cms.CertificateSet=function(r){v.asn1.cms.CertificateSet.superclass.constructor.call(this);var l=Error,o=v.asn1,h=o.DERTaggedObject,b=o.DERSet,D=o.ASN1Object;this.params=null,this.tohex=function(){var x=this.params,_=[],M;if(x instanceof Array)M=x;else if(x.array!=null)M=x.array;else throw new l("cert array not specified");for(var K=0;K<M.length;K++){var ht=M[K],mt=On(ht),P=new D;P.hTLV=mt,_.push(P)}var I={array:_};x.sortflag==!1&&(I.sortflag=!1);var ut=new b(I),T=new h({tag:"a0",explicit:!1,obj:ut});return T.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},je(v.asn1.cms.CertificateSet,v.asn1.ASN1Object),v.asn1.cms.RevocationInfoChoices=function(r){v.asn1.cms.RevocationInfoChoices.superclass.constructor.call(this),this.params=null,this.tohex=function(){var l=this.params;if(!l instanceof Array)throw new Error("params is not array");for(var o=[],h=0;h<l.length;h++)o.push(new v.asn1.cms.RevocationInfoChoice(l[h]));var b=v.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:{set:o}}});return b.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},je(v.asn1.cms.RevocationInfoChoices,v.asn1.ASN1Object),v.asn1.cms.RevocationInfoChoice=function(r){v.asn1.cms.RevocationInfoChoice.superclass.constructor.call(this),this.params=null,this.tohex=function(){var l=this.params;if(l.crl!=null&&typeof l.crl=="string"){var o=l.crl;return l.crl.indexOf("-----BEGIN")!=-1&&(o=On(l.crl)),o}else if(l.ocsp!=null){var h=v.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:new v.asn1.cms.OtherRevocationFormat(l)}});return h.tohex()}else throw new Error("property crl or ocsp undefined")},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},je(v.asn1.cms.RevocationInfoChoice,v.asn1.ASN1Object),v.asn1.cms.OtherRevocationFormat=function(r){v.asn1.cms.OtherRevocationFormat.superclass.constructor.call(this);var l=Error,o=v,h=o.asn1,b=h.ASN1Util.newObject,D=o.lang.String.isHex;this.params=null,this.tohex=function(){var x=this.params;if(x.ocsp==null)throw new l("property ocsp not specified");if(!D(x.ocsp)||!Je.isASN1HEX(x.ocsp))throw new l("ocsp value not ASN.1 hex string");var _=b({seq:[{oid:"1.3.6.1.5.5.7.16.2"},{asn1:{tlv:x.ocsp}}]});return _.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},je(v.asn1.cms.OtherRevocationFormat,v.asn1.ASN1Object),v.asn1.cms.CMSUtil=new function(){},v.asn1.cms.CMSUtil.newSignedData=function(r){return new v.asn1.cms.SignedData(r)},v.asn1.cms.CMSUtil.verifySignedData=function(r){var l=v,o=l.asn1,h=o.cms,b=h.SignerInfo,D=h.SignedData,x=h.SigningTime,_=h.SigningCertificate,M=h.SigningCertificateV2,K=o.cades,ht=K.SignaturePolicyIdentifier,mt=l.lang.String.isHex,P=Je,I=P.getVbyList,ut=P.getTLVbyList,T=P.getIdxbyList,ot=P.getChildIdx,Y=P.getTLV,Ft=P.oidname,Tt=l.crypto.Util.hashHex;r.cms===void 0&&mt(r.cms);var Jt=r.cms,Gt=function(ie,ye){for(var $e,Fr=3;Fr<6;Fr++)if($e=T(ie,0,[1,0,Fr]),$e!==void 0){var Dr=ie.substr($e,2);Dr==="a0"&&(ye.certsIdx=$e),Dr==="a1"&&(ye.revinfosIdx=$e),Dr==="31"&&(ye.signerinfosIdx=$e)}},Ae=function(ie,ye){var $e=ye.signerinfosIdx;if($e!==void 0){var Fr=ot(ie,$e);ye.signerInfoIdxList=Fr;for(var Dr=0;Dr<Fr.length;Dr++){var wr=Fr[Dr],Kr={idx:wr};De(ie,Kr),ye.signerInfos.push(Kr)}}},De=function(ie,ye){var $e=ye.idx;ye.signerid_issuer1=ut(ie,$e,[1,0],"30"),ye.signerid_serial1=I(ie,$e,[1,1],"02"),ye.hashalg=Ft(I(ie,$e,[2,0],"06"));var Fr=T(ie,$e,[3],"a0");ye.idxSignedAttrs=Fr,d(ie,ye,Fr);var Dr=ot(ie,$e),wr=Dr.length;if(wr<6)throw"malformed SignerInfo";ye.sigalg=Ft(I(ie,$e,[wr-2,0],"06")),ye.sigval=I(ie,$e,[wr-1],"04")},d=function(ie,ye,$e){var Fr=ot(ie,$e);ye.signedAttrIdxList=Fr;for(var Dr=0;Dr<Fr.length;Dr++){var wr=Fr[Dr],Kr=I(ie,wr,[0],"06"),Ur;Kr==="2a864886f70d010905"?(Ur=xr(I(ie,wr,[1,0])),ye.saSigningTime=Ur):Kr==="2a864886f70d010904"&&(Ur=I(ie,wr,[1,0],"04"),ye.saMessageDigest=Ur)}},B=function(ie,ye){if(I(ie,0,[0],"06")!=="2a864886f70d010702")return ye;ye.cmsType="signedData",ye.econtent=I(ie,0,[1,0,2,1,0]),Gt(ie,ye),ye.signerInfos=[],Ae(ie,ye)},it=function(ie,ye){for(var $e=ye.parse.signerInfos,Fr=$e.length,Dr=!0,wr=0;wr<Fr;wr++){var Kr=$e[wr];St(ie,ye,Kr,wr),Kr.isValid||(Dr=!1)}ye.isValid=Dr},z=function(ie,ye,$e,Fr){var Dr=ye.parse.certsIdx,wr;if(ye.certs===void 0){wr=[],ye.certkeys=[];for(var Kr=ot(ie,Dr),Ur=0;Ur<Kr.length;Ur++){var xn=Y(ie,Kr[Ur]),pn=new nr;pn.readCertHex(xn),wr[Ur]=pn,ye.certkeys[Ur]=pn.getPublicKey()}ye.certs=wr}else wr=ye.certs;ye.cccc=wr.length,ye.cccci=Kr.length;for(var Ur=0;Ur<wr.length;Ur++){var bi=pn.getIssuerHex(),Ns=pn.getSerialNumberHex();$e.signerid_issuer1===bi&&$e.signerid_serial1===Ns&&($e.certkey_idx=Ur)}},St=function(ie,ye,$e,Fr){$e.verifyDetail={};var Dr=$e.verifyDetail,wr=ye.parse.econtent,Kr=$e.hashalg,Ur=$e.saMessageDigest;Dr.validMessageDigest=!1,Tt(wr,Kr)===Ur&&(Dr.validMessageDigest=!0),z(ie,ye,$e,Fr),Dr.validSignatureValue=!1;var xn=$e.sigalg,pn="31"+Y(ie,$e.idxSignedAttrs).substr(2);$e.signedattrshex=pn;var bi=ye.certs[$e.certkey_idx].getPublicKey(),Ns=new v.crypto.Signature({alg:xn});Ns.init(bi),Ns.updateHex(pn);var Es=Ns.verify($e.sigval);Dr.validSignatureValue_isValid=Es,Es===!0&&(Dr.validSignatureValue=!0),$e.isValid=!1,Dr.validMessageDigest&&Dr.validSignatureValue&&($e.isValid=!0)},qt=function(){},ee={isValid:!1,parse:{}};return B(Jt,ee.parse),it(Jt,ee),ee},v.asn1.cms.CMSParser=function(){var r=Error,l=nr,o=new l,h=Je,b=h.getV,D=h.getTLV,x=h.getIdxbyList,_=h.getTLVbyList,M=h.getTLVbyListEx,K=h.getVbyList,ht=h.getVbyListEx,mt=h.getChildIdx;this.getCMSSignedData=function(P){var I=_(P,0,[1,0]),ut=this.getSignedData(I);return ut},this.getSignedData=function(P){var I=mt(P,0),ut={},T=b(P,I[0]),ot=parseInt(T,16);ut.version=ot;var Y=D(P,I[1]);ut.hashalgs=this.getHashAlgArray(Y);var Ft=D(P,I[2]);ut.econtent=this.getEContent(Ft);var Tt=M(P,0,["[0]"]);Tt!=null&&(ut.certs=this.getCertificateSet(Tt));var Jt=M(P,0,["[1]"]);Jt!=null;var Gt=M(P,0,[3]);return ut.sinfos=this.getSignerInfos(Gt),ut},this.getHashAlgArray=function(P){for(var I=mt(P,0),ut=new l,T=[],ot=0;ot<I.length;ot++){var Y=D(P,I[ot]),Ft=ut.getAlgorithmIdentifierName(Y);T.push(Ft)}return T},this.getEContent=function(P){var I={},ut=K(P,0,[0]),T=K(P,0,[1,0]);return I.type=v.asn1.x509.OID.oid2name(Je.hextooidstr(ut)),I.content={hex:T},I},this.getSignerInfos=function(P){for(var I=[],ut=mt(P,0),T=0;T<ut.length;T++){var ot=D(P,ut[T]),Y=this.getSignerInfo(ot);I.push(Y)}return I},this.getSignerInfo=function(P){var I={},ut=mt(P,0),T=h.getInt(P,ut[0],-1);T!=-1&&(I.version=T);var ot=D(P,ut[1]),Y=this.getIssuerAndSerialNumber(ot);I.id=Y;var Ft=D(P,ut[2]),Tt=o.getAlgorithmIdentifierName(Ft);I.hashalg=Tt;var Jt=M(P,0,["[0]"]);if(Jt!=null){var Gt=this.getAttributeList(Jt);I.sattrs=Gt}var Ae=M(P,0,[3]),De=o.getAlgorithmIdentifierName(Ae);I.sigalg=De;var d=ht(P,0,[4]);I.sighex=d;var B=M(P,0,["[1]"]);if(B!=null){var it=this.getAttributeList(B);I.uattrs=it}return I},this.getSignerIdentifier=function(P){if(P.substr(0,2)=="30")return this.getIssuerAndSerialNumber(P);throw new Error("SKID of signerIdentifier not supported")},this.getIssuerAndSerialNumber=function(P){var I={type:"isssn"},ut=mt(P,0),T=D(P,ut[0]);I.issuer=o.getX500Name(T);var ot=b(P,ut[1]);return I.serial={hex:ot},I},this.getAttributeList=function(P){for(var I=[],ut=mt(P,0),T=0;T<ut.length;T++){var ot=D(P,ut[T]),Y=this.getAttribute(ot);I.push(Y)}return{array:I}},this.getAttribute=function(P){var I={},ut=mt(P,0),T=h.getOID(P,ut[0]),ot=v.asn1.x509.OID.oid2name(T);I.attr=ot;var Y=D(P,ut[1]),Ft=mt(Y,0);if(Ft.length==1)I.valhex=D(Y,Ft[0]);else{for(var Tt=[],Jt=0;Jt<Ft.length;Jt++)Tt.push(D(Y,Ft[Jt]));I.valhex=Tt}return ot=="contentType"?this.setContentType(I):ot=="messageDigest"?this.setMessageDigest(I):ot=="signingTime"?this.setSigningTime(I):ot=="signingCertificate"?this.setSigningCertificate(I):ot=="signingCertificateV2"?this.setSigningCertificateV2(I):ot=="signaturePolicyIdentifier"&&this.setSignaturePolicyIdentifier(I),I},this.setContentType=function(P){var I=h.getOIDName(P.valhex,0,null);I!=null&&(P.type=I,delete P.valhex)},this.setSigningTime=function(P){var I=b(P.valhex,0),ut=xr(I);P.str=ut,delete P.valhex},this.setMessageDigest=function(P){var I=b(P.valhex,0);P.hex=I,delete P.valhex},this.setSigningCertificate=function(P){var I=mt(P.valhex,0);if(I.length>0){for(var ut=D(P.valhex,I[0]),T=mt(ut,0),ot=[],Y=0;Y<T.length;Y++){var Ft=D(ut,T[Y]),Tt=this.getESSCertID(Ft);ot.push(Tt)}P.array=ot}if(I.length>1){var Jt=D(P.valhex,I[1]);P.polhex=Jt}delete P.valhex},this.setSignaturePolicyIdentifier=function(P){var I=mt(P.valhex,0);if(I.length>0){var ut=h.getOID(P.valhex,I[0]);P.oid=ut}if(I.length>1){var T=new l,ot=mt(P.valhex,I[1]),Y=D(P.valhex,ot[0]),Ft=T.getAlgorithmIdentifierName(Y);P.alg=Ft;var Tt=b(P.valhex,ot[1]);P.hash=Tt}delete P.valhex},this.setSigningCertificateV2=function(P){var I=mt(P.valhex,0);if(I.length>0){for(var ut=D(P.valhex,I[0]),T=mt(ut,0),ot=[],Y=0;Y<T.length;Y++){var Ft=D(ut,T[Y]),Tt=this.getESSCertIDv2(Ft);ot.push(Tt)}P.array=ot}if(I.length>1){var Jt=D(P.valhex,I[1]);P.polhex=Jt}delete P.valhex},this.getESSCertID=function(P){var I={},ut=mt(P,0);if(ut.length>0){var T=b(P,ut[0]);I.hash=T}if(ut.length>1){var ot=D(P,ut[1]),Y=this.getIssuerSerial(ot);Y.serial!=null&&(I.serial=Y.serial),Y.issuer!=null&&(I.issuer=Y.issuer)}return I},this.getESSCertIDv2=function(P){var I={},ut=mt(P,0);if(ut.length<1||3<ut.length)throw new r("wrong number of elements");var T=0;if(P.substr(ut[0],2)=="30"){var ot=D(P,ut[0]);I.alg=o.getAlgorithmIdentifierName(ot),T++}else I.alg="sha256";var Y=b(P,ut[T]);if(I.hash=Y,ut.length>T+1){var Ft=D(P,ut[T+1]),Tt=this.getIssuerSerial(Ft);I.issuer=Tt.issuer,I.serial=Tt.serial}return I},this.getIssuerSerial=function(P){var I={},ut=mt(P,0),T=D(P,ut[0]),ot=o.getGeneralNames(T),Y=ot[0].dn;I.issuer=Y;var Ft=b(P,ut[1]);return I.serial={hex:Ft},I},this.getCertificateSet=function(P){for(var I=mt(P,0),ut=[],T=0;T<I.length;T++){var ot=D(P,I[T]);if(ot.substr(0,2)=="30"){var Y=Pe(ot,"CERTIFICATE");ut.push(Y)}}return{array:ut,sortflag:!1}}},(typeof v>"u"||!v)&&(v={}),(typeof v.asn1>"u"||!v.asn1)&&(v.asn1={}),(typeof v.asn1.tsp>"u"||!v.asn1.tsp)&&(v.asn1.tsp={}),v.asn1.tsp.TimeStampToken=function(r){var l=v,o=l.asn1,h=o.tsp;h.TimeStampToken.superclass.constructor.call(this),this.params=null,this.getEncodedHexPrepare=function(){var b=new h.TSTInfo(this.params.econtent.content);this.params.econtent.content.hex=b.tohex()},r!=null&&this.setByParam(r)},je(v.asn1.tsp.TimeStampToken,v.asn1.cms.SignedData),v.asn1.tsp.TSTInfo=function(r){var l=Error,o=v,h=o.asn1,b=h.DERSequence,D=h.DERInteger,x=h.DERBoolean,_=h.DERGeneralizedTime,M=h.DERObjectIdentifier,K=h.DERTaggedObject,ht=h.tsp,mt=ht.MessageImprint,P=ht.Accuracy,I=h.x509.X500Name,ut=h.x509.GeneralName;if(ht.TSTInfo.superclass.constructor.call(this),this.dVersion=new D({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerial=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.tohex=function(){var T=[this.dVersion];if(this.dPolicy==null)throw new Error("policy shall be specified.");if(T.push(this.dPolicy),this.dMessageImprint==null)throw new Error("messageImprint shall be specified.");if(T.push(this.dMessageImprint),this.dSerial==null)throw new Error("serialNumber shall be specified.");if(T.push(this.dSerial),this.dGenTime==null)throw new Error("genTime shall be specified.");T.push(this.dGenTime),this.dAccuracy!=null&&T.push(this.dAccuracy),this.dOrdering!=null&&T.push(this.dOrdering),this.dNonce!=null&&T.push(this.dNonce),this.dTsa!=null&&T.push(this.dTsa);var ot=new b({array:T});return this.hTLV=ot.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},r!==void 0){if(typeof r.policy=="string"){if(!r.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new M({oid:r.policy})}r.messageImprint!==void 0&&(this.dMessageImprint=new mt(r.messageImprint)),r.serial!==void 0&&(this.dSerial=new D(r.serial)),r.genTime!==void 0&&(this.dGenTime=new _(r.genTime)),r.accuracy!==void 0&&(this.dAccuracy=new P(r.accuracy)),r.ordering!==void 0&&r.ordering==!0&&(this.dOrdering=new x),r.nonce!==void 0&&(this.dNonce=new D(r.nonce)),r.tsa!==void 0&&(this.dTsa=new K({tag:"a0",explicit:!0,obj:new ut({dn:r.tsa})}))}},je(v.asn1.tsp.TSTInfo,v.asn1.ASN1Object),v.asn1.tsp.Accuracy=function(r){var l=v,o=l.asn1,h=o.ASN1Util.newObject;o.tsp.Accuracy.superclass.constructor.call(this),this.params=null,this.tohex=function(){var b=this.params,D=[];return b.seconds!=null&&typeof b.seconds=="number"&&D.push({int:b.seconds}),b.millis!=null&&typeof b.millis=="number"&&D.push({tag:{tagi:"80",obj:{int:b.millis}}}),b.micros!=null&&typeof b.micros=="number"&&D.push({tag:{tagi:"81",obj:{int:b.micros}}}),h({seq:D}).tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},je(v.asn1.tsp.Accuracy,v.asn1.ASN1Object),v.asn1.tsp.MessageImprint=function(r){var l=v,o=l.asn1,h=o.DERSequence,b=o.DEROctetString,D=o.x509,x=D.AlgorithmIdentifier;o.tsp.MessageImprint.superclass.constructor.call(this),this.params=null,this.tohex=function(){var _=this.params,M=new x({name:_.alg}),K=new b({hex:_.hash}),ht=new h({array:[M,K]});return ht.tohex()},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&this.setByParam(r)},je(v.asn1.tsp.MessageImprint,v.asn1.ASN1Object),v.asn1.tsp.TimeStampReq=function(r){var l=v,o=l.asn1,h=o.DERSequence,b=o.DERInteger,D=o.DERBoolean,x=o.ASN1Object,_=o.DERObjectIdentifier,M=o.tsp,K=M.MessageImprint;M.TimeStampReq.superclass.constructor.call(this),this.params=null,this.tohex=function(){var ht=this.params,mt=[];mt.push(new b({int:1})),ht.messageImprint instanceof v.asn1.ASN1Object?mt.push(ht.messageImprint):mt.push(new K(ht.messageImprint)),ht.policy!=null&&mt.push(new _(ht.policy)),ht.nonce!=null&&mt.push(new b(ht.nonce)),ht.certreq==!0&&mt.push(new D);var P=new h({array:mt});return P.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},je(v.asn1.tsp.TimeStampReq,v.asn1.ASN1Object),v.asn1.tsp.TimeStampResp=function(r){var l=v,o=l.asn1,h=o.DERSequence,b=o.ASN1Object,D=o.tsp,x=D.PKIStatusInfo;D.TimeStampResp.superclass.constructor.call(this),this.params=null,this.tohex=function(){var _=this.params,M=[];if(_.econtent!=null||_.tst!=null)if(_.statusinfo!=null?M.push(new x(_.statusinfo)):M.push(new x("granted")),_.econtent!=null)M.push(new D.TimeStampToken(_).getContentInfo());else if(_.tst instanceof o.ASN1Object)M.push(_.tst);else throw new Error("improper member tst value");else if(_.statusinfo!=null)M.push(new x(_.statusinfo));else throw new Error("parameter for token nor statusinfo not specified");var K=new h({array:M});return K.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},je(v.asn1.tsp.TimeStampResp,v.asn1.ASN1Object),v.asn1.tsp.PKIStatusInfo=function(r){var l=Error,o=v,h=o.asn1,b=h.DERSequence,D=h.tsp,x=D.PKIStatus,_=D.PKIFreeText,M=D.PKIFailureInfo;D.PKIStatusInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var K=this.params,ht=[];if(typeof K=="string")ht.push(new x(K));else{if(K.status==null)throw new l("property 'status' unspecified");ht.push(new x(K.status)),K.statusstr!=null&&ht.push(new _(K.statusstr)),K.failinfo!=null&&ht.push(new M(K.failinfo))}var mt=new b({array:ht});return mt.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},je(v.asn1.tsp.PKIStatusInfo,v.asn1.ASN1Object),v.asn1.tsp.PKIStatus=function(r){var l=Error,o=v,h=o.asn1,b=h.DERInteger,D=h.tsp;D.PKIStatus.superclass.constructor.call(this);var x={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5};this.params=null,this.tohex=function(){var _=this.params,M,K;if(typeof _=="string")try{K=x[_]}catch{throw new l("undefined name: "+_)}else if(typeof _=="number")K=_;else throw new l("unsupported params");return new b({int:K}).tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},je(v.asn1.tsp.PKIStatus,v.asn1.ASN1Object),v.asn1.tsp.PKIFreeText=function(r){var l=Error,o=v,h=o.asn1,b=h.DERSequence,D=h.DERUTF8String,x=h.tsp;x.PKIFreeText.superclass.constructor.call(this),this.params=null,this.tohex=function(){var _=this.params;if(!_ instanceof Array)throw new l("wrong params: not array");for(var M=[],K=0;K<_.length;K++)M.push(new D({str:_[K]}));var ht=new b({array:M});return ht.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},je(v.asn1.tsp.PKIFreeText,v.asn1.ASN1Object),v.asn1.tsp.PKIFailureInfo=function(r){var l=Error,o=v,h=o.asn1,b=h.DERBitString,D=h.tsp,x=D.PKIFailureInfo,_={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25};x.superclass.constructor.call(this),this.params=null,this.getBinValue=function(){var M=this.params,K=0;if(typeof M=="number"&&0<=M&&M<=25){K|=1<<M;for(var ht=K.toString(2),mt="",P=ht.length-1;P>=0;P--)mt+=ht[P];return mt}else{if(typeof M=="string"&&_[M]!=null)return Fi([M],_);if(typeof M=="object"&&M.length!=null)return Fi(M,_);throw new l("wrong params")}},this.tohex=function(){var M=this.params,K=this.getBinValue();return new b({bin:K}).tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},je(v.asn1.tsp.PKIFailureInfo,v.asn1.ASN1Object),v.asn1.tsp.AbstractTSAAdapter=function(r){this.getTSTHex=function(l,o){throw"not implemented yet"}},v.asn1.tsp.SimpleTSAAdapter=function(r){var l=v,o=l.asn1,h=o.tsp,b=l.crypto.Util.hashHex;h.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(D,x){var _=b(D,x);this.params.econtent.content.messageImprint={alg:x,hash:_},this.params.econtent.content.serial={int:this.serial++};var M=Math.floor(Math.random()*1e9);this.params.econtent.content.nonce={int:M};var K=new h.TimeStampToken(this.params);return K.getContentInfoEncodedHex()},r!==void 0&&(this.params=r)},je(v.asn1.tsp.SimpleTSAAdapter,v.asn1.tsp.AbstractTSAAdapter),v.asn1.tsp.FixedTSAAdapter=function(r){var l=v,o=l.asn1,h=o.tsp,b=l.crypto.Util.hashHex;h.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(D,x){var _=b(D,x);this.params.econtent.content.messageImprint={alg:x,hash:_};var M=new h.TimeStampToken(this.params);return M.getContentInfoEncodedHex()},r!==void 0&&(this.params=r)},je(v.asn1.tsp.FixedTSAAdapter,v.asn1.tsp.AbstractTSAAdapter),v.asn1.tsp.TSPUtil=new function(){},v.asn1.tsp.TSPUtil.newTimeStampToken=function(r){return new v.asn1.tsp.TimeStampToken(r)},v.asn1.tsp.TSPUtil.parseTimeStampReq=function(r){var l=new v.asn1.tsp.TSPParser;return l.getTimeStampReq(r)},v.asn1.tsp.TSPUtil.parseMessageImprint=function(r){var l=new v.asn1.tsp.TSPParser;return l.getMessageImprint(r)},v.asn1.tsp.TSPParser=function(){var r=Error,l=nr,o=new l,h=Je,b=h.getV,D=h.getTLV,x=h.getIdxbyList,_=h.getTLVbyListEx,M=h.getChildIdx,K=["granted","grantedWithMods","rejection","waiting","revocationWarning","revocationNotification"],ht={0:"badAlg",2:"badRequest",5:"badDataFormat",14:"timeNotAvailable",15:"unacceptedPolicy",16:"unacceptedExtension",17:"addInfoNotAvailable",25:"systemFailure"};this.getResponse=function(mt){var P=M(mt,0);if(P.length==1)return this.getPKIStatusInfo(D(mt,P[0]));if(P.length>1){var I=this.getPKIStatusInfo(D(mt,P[0])),ut=D(mt,P[1]),T=this.getToken(ut);return T.statusinfo=I,T}},this.getToken=function(mt){var P=new v.asn1.cms.CMSParser,I=P.getCMSSignedData(mt);return this.setTSTInfo(I),I},this.setTSTInfo=function(mt){var P=mt.econtent;if(P.type=="tstinfo"){var I=P.content.hex,ut=this.getTSTInfo(I);P.content=ut}},this.getTSTInfo=function(mt){var P={},I=M(mt,0),ut=b(mt,I[1]);P.policy=me(ut);var T=D(mt,I[2]);P.messageImprint=this.getMessageImprint(T);var ot=b(mt,I[3]);P.serial={hex:ot};var Y=b(mt,I[4]);P.genTime={str:xr(Y)};var Ft=0;if(I.length>5&&mt.substr(I[5],2)=="30"){var Tt=D(mt,I[5]);P.accuracy=this.getAccuracy(Tt),Ft++}if(I.length>5+Ft&&mt.substr(I[5+Ft],2)=="01"){var Jt=b(mt,I[5+Ft]);Jt=="ff"&&(P.ordering=!0),Ft++}if(I.length>5+Ft&&mt.substr(I[5+Ft],2)=="02"){var Gt=b(mt,I[5+Ft]);P.nonce={hex:Gt},Ft++}if(I.length>5+Ft&&mt.substr(I[5+Ft],2)=="a0"){var Ae=D(mt,I[5+Ft]);Ae="30"+Ae.substr(2),pGeneralNames=o.getGeneralNames(Ae);var De=pGeneralNames[0].dn;P.tsa=De,Ft++}if(I.length>5+Ft&&mt.substr(I[5+Ft],2)=="a1"){var d=D(mt,I[5+Ft]);d="30"+d.substr(2);var B=o.getExtParamArray(d);P.ext=B,Ft++}return P},this.getAccuracy=function(mt){for(var P={},I=M(mt,0),ut=0;ut<I.length;ut++){var T=mt.substr(I[ut],2),ot=b(mt,I[ut]),Y=parseInt(ot,16);T=="02"?P.seconds=Y:T=="80"?P.millis=Y:T=="81"&&(P.micros=Y)}return P},this.getMessageImprint=function(mt){if(mt.substr(0,2)!="30")throw new Error("head of messageImprint hex shall be x30");var P={},I=M(mt,0),ut=x(mt,0,[0,0]),T=b(mt,ut),ot=h.hextooidstr(T),Y=v.asn1.x509.OID.oid2name(ot);if(Y=="")throw new Error("hashAlg name undefined: "+ot);var Ft=Y,Tt=x(mt,0,[1]);return P.alg=Ft,P.hash=b(mt,Tt),P},this.getPKIStatusInfo=function(mt){var P={},I=M(mt,0),ut=0;try{var T=b(mt,I[0]),ot=parseInt(T,16);P.status=K[ot]}catch{}if(I.length>1&&mt.substr(I[1],2)=="30"){var Y=D(mt,I[1]);P.statusstr=this.getPKIFreeText(Y),ut++}if(I.length>ut&&mt.substr(I[1+ut],2)=="03"){var Ft=D(mt,I[1+ut]);P.failinfo=this.getPKIFailureInfo(Ft)}return P},this.getPKIFreeText=function(mt){for(var P=[],I=M(mt,0),ut=0;ut<I.length;ut++)P.push(h.getString(mt,I[ut]));return P},this.getPKIFailureInfo=function(mt){var P=h.getInt(mt,0);return ht[P]!=null?ht[P]:P},this.getTimeStampReq=function(mt){var P={};P.certreq=!1;var I=M(mt,0);if(I.length<2)throw new Error("TimeStampReq must have at least 2 items");var ut=D(mt,I[1]);P.messageImprint=v.asn1.tsp.TSPUtil.parseMessageImprint(ut);for(var T=2;T<I.length;T++){var ot=I[T],Y=mt.substr(ot,2);if(Y=="06"){var Ft=b(mt,ot);P.policy=h.hextooidstr(Ft)}Y=="02"&&(P.nonce=b(mt,ot)),Y=="01"&&(P.certreq=!0)}return P}},(typeof v>"u"||!v)&&(v={}),(typeof v.asn1>"u"||!v.asn1)&&(v.asn1={}),(typeof v.asn1.cades>"u"||!v.asn1.cades)&&(v.asn1.cades={}),v.asn1.cades.SignaturePolicyIdentifier=function(r){var l=v,o=l.asn1,h=o.cades,b=h.SignaturePolicyId;h.SignaturePolicyIdentifier.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.15",this.params=null,this.getValueArray=function(){return[new b(this.params)]},this.setByParam=function(D){this.params=D},r!=null&&this.setByParam(r)},je(v.asn1.cades.SignaturePolicyIdentifier,v.asn1.cms.Attribute),v.asn1.cades.SignaturePolicyId=function(r){var l=v,o=l.asn1,h=o.DERSequence,b=o.DERObjectIdentifier,D=o.x509,x=D.AlgorithmIdentifier,_=o.cades,M=_.SignaturePolicyId,K=_.OtherHashAlgAndValue;M.superclass.constructor.call(this),this.params=null,this.tohex=function(){var ht=this.params,mt=[];mt.push(new b(ht.oid)),mt.push(new K(ht));var P=new h({array:mt});return P.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(ht){this.params=ht},r!=null&&this.setByParam(r)},je(v.asn1.cades.SignaturePolicyId,v.asn1.ASN1Object),v.asn1.cades.OtherHashAlgAndValue=function(r){var l=Error,o=v,h=o.asn1,b=h.DERSequence,D=h.DEROctetString,x=h.x509,_=x.AlgorithmIdentifier,M=h.cades,K=M.OtherHashAlgAndValue;K.superclass.constructor.call(this),this.params=null,this.tohex=function(){var ht=this.params;if(ht.alg==null)throw new l("property 'alg' not specified");if(ht.hash==null&&ht.cert==null)throw new l("property 'hash' nor 'cert' not specified");var mt=null;if(ht.hash!=null)mt=ht.hash;else if(ht.cert!=null){if(typeof ht.cert!="string")throw new l("cert not string");var P=ht.cert;ht.cert.indexOf("-----BEGIN")!=-1&&(P=On(ht.cert)),mt=v.crypto.Util.hashHex(P,ht.alg)}var I=[];I.push(new _({name:ht.alg})),I.push(new D({hex:mt}));var ut=new b({array:I});return ut.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},je(v.asn1.cades.OtherHashAlgAndValue,v.asn1.ASN1Object),v.asn1.cades.OtherHashValue=function(r){v.asn1.cades.OtherHashValue.superclass.constructor.call(this);var l=Error,o=v,h=o.lang.String.isHex,b=o.asn1,D=b.DEROctetString,x=o.crypto.Util.hashHex;this.params=null,this.tohex=function(){var _=this.params;if(_.hash==null&&_.cert==null)throw new l("hash or cert not specified");var M=null;if(_.hash!=null)M=_.hash;else if(_.cert!=null){if(typeof _.cert!="string")throw new l("cert not string");var K=_.cert;_.cert.indexOf("-----BEGIN")!=-1&&(K=On(_.cert)),M=v.crypto.Util.hashHex(K,"sha1")}return new D({hex:M}).tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},je(v.asn1.cades.OtherHashValue,v.asn1.ASN1Object),v.asn1.cades.SignatureTimeStamp=function(r){var l=Error,o=v,h=o.lang.String.isHex,b=o.asn1,D=b.ASN1Object,x=b.x509,_=b.cades;_.SignatureTimeStamp.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.14",this.params=null,this.getValueArray=function(){var M=this.params;if(M.tst!=null)if(h(M.tst)){var K=new D;return K.hTLV=M.tst,[K]}else{if(M.tst instanceof D)return[M.tst];throw new l("params.tst has wrong value")}else if(M.res!=null){var ht=M.res;if(ht instanceof D&&(ht=ht.tohex()),typeof ht!="string"||!h(ht))throw new l("params.res has wrong value");var mt=Je.getTLVbyList(ht,0,[1]),K=new D;return K.hTLV=M.tst,[K]}},r!=null&&this.setByParam(r)},je(v.asn1.cades.SignatureTimeStamp,v.asn1.cms.Attribute),v.asn1.cades.CompleteCertificateRefs=function(r){var l=Error,o=v,h=o.asn1,b=h.DERSequence,D=h.cades,x=D.OtherCertID,_=o.lang.String.isHex;D.CompleteCertificateRefs.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.21",this.params=null,this.getValueArray=function(){for(var M=this.params,K=[],ht=0;ht<M.array.length;ht++){var mt=M.array[ht];if(typeof mt=="string")if(mt.indexOf("-----BEGIN")!=-1)mt={cert:mt};else if(_(mt))mt={hash:mt};else throw new l("unsupported value: "+mt);M.alg!=null&&mt.alg==null&&(mt.alg=M.alg),M.hasis!=null&&mt.hasis==null&&(mt.hasis=M.hasis);var P=new x(mt);K.push(P)}var I=new b({array:K});return[I]},r!=null&&this.setByParam(r)},je(v.asn1.cades.CompleteCertificateRefs,v.asn1.cms.Attribute),v.asn1.cades.OtherCertID=function(r){var l=v,o=l.asn1,h=o.DERSequence,b=o.cms,D=b.IssuerSerial,x=o.cades,_=x.OtherHashValue,M=x.OtherHashAlgAndValue;x.OtherCertID.superclass.constructor.call(this),this.params=r,this.tohex=function(){var K=this.params;typeof K=="string"&&(K.indexOf("-----BEGIN")!=-1?K={cert:K}:_isHex(K)&&(K={hash:K}));var ht=[],mt=null;if(K.alg!=null?mt=new M(K):mt=new _(K),ht.push(mt),K.cert!=null&&K.hasis==!0||K.issuer!=null&&K.serial!=null){var P=new D(K);ht.push(P)}var I=new h({array:ht});return I.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},je(v.asn1.cades.OtherCertID,v.asn1.ASN1Object),v.asn1.cades.OtherHash=function(r){var l=Error,o=v,h=o.asn1,b=h.cms,D=h.cades,x=D.OtherHashAlgAndValue,_=D.OtherHashValue,M=o.crypto.Util.hashHex,K=o.lang.String.isHex;D.OtherHash.superclass.constructor.call(this),this.params=null,this.tohex=function(){var ht=this.params;typeof ht=="string"&&(ht.indexOf("-----BEGIN")!=-1?ht={cert:ht}:K(ht)&&(ht={hash:ht}));var mt=null;return ht.alg!=null?mt=new x(ht):mt=new _(ht),mt.tohex()},this.getEncodedHex=function(){return this.tohex()},r!=null&&this.setByParam(r)},je(v.asn1.cades.OtherHash,v.asn1.ASN1Object),v.asn1.cades.CAdESUtil=new function(){},v.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(r){var l=new v.asn1.cms.CMSParser,o=l.getCMSSignedData(r);return o},v.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(r,l,o){var h=Je,b=h.getChildIdx,D=h.getTLV,x=h.getV,_=v,M=_.asn1,K=M.ASN1Object,ht=M.cms,mt=ht.AttributeList,P=ht.SignerInfo,I={},ut=b(r,l);if(ut.length!=6)throw"not supported items for SignerInfo (!=6)";var T=ut.shift();I.version=D(r,T);var ot=ut.shift();I.si=D(r,ot);var Y=ut.shift();I.digalg=D(r,Y);var Ft=ut.shift();I.sattrs=D(r,Ft);var Tt=ut.shift();I.sigalg=D(r,Tt);var Jt=ut.shift();I.sig=D(r,Jt),I.sigval=x(r,Jt);var Gt=null;return I.obj=new P,Gt=new K,Gt.hTLV=I.version,I.obj.dCMSVersion=Gt,Gt=new K,Gt.hTLV=I.si,I.obj.dSignerIdentifier=Gt,Gt=new K,Gt.hTLV=I.digalg,I.obj.dDigestAlgorithm=Gt,Gt=new K,Gt.hTLV=I.sattrs,I.obj.dSignedAttrs=Gt,Gt=new K,Gt.hTLV=I.sigalg,I.obj.dSigAlg=Gt,Gt=new K,Gt.hTLV=I.sig,I.obj.dSig=Gt,I.obj.dUnsignedAttrs=new mt,I},(typeof v.asn1.csr>"u"||!v.asn1.csr)&&(v.asn1.csr={}),v.asn1.csr.CertificationRequest=function(r){var l=v,o=l.asn1,h=o.DERBitString,b=o.DERSequence,D=o.csr,x=o.x509,_=D.CertificationRequestInfo;D.CertificationRequest.superclass.constructor.call(this),this.setByParam=function(M){this.params=M},this.sign=function(){var M=new _(this.params).tohex(),K=new v.crypto.Signature({alg:this.params.sigalg});K.init(this.params.sbjprvkey),K.updateHex(M);var ht=K.sign();this.params.sighex=ht},this.getPEM=function(){return Pe(this.tohex(),"CERTIFICATE REQUEST")},this.tohex=function(){var M=this.params,K=new v.asn1.csr.CertificationRequestInfo(this.params),ht=new v.asn1.x509.AlgorithmIdentifier({name:M.sigalg});if(M.sighex==null&&M.sbjprvkey!=null&&this.sign(),M.sighex==null)throw new Error("sighex or sbjprvkey parameter not defined");var mt=new h({hex:"00"+M.sighex}),P=new b({array:[K,ht,mt]});return P.tohex()},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&this.setByParam(r)},je(v.asn1.csr.CertificationRequest,v.asn1.ASN1Object),v.asn1.csr.CertificationRequestInfo=function(r){var l=v,o=l.asn1,h=o.DERBitString,b=o.DERSequence,D=o.DERInteger,x=o.DERUTF8String,_=o.DERTaggedObject,M=o.ASN1Util.newObject,K=o.csr,ht=o.x509,mt=ht.X500Name,P=ht.Extensions,I=ht.SubjectPublicKeyInfo,ut=K.AttributeList;K.CertificationRequestInfo.superclass.constructor.call(this),this.params=null,this.setByParam=function(ot){ot!=null&&(this.params=ot)},this.tohex=function(){var ot=this.params,Y=[];if(Y.push(new D({int:0})),Y.push(new mt(ot.subject)),Y.push(new I(Tr.getKey(ot.sbjpubkey))),ot.attrs!=null){var Ft=T(ot.attrs),Tt=M({tag:{tage:"a0",obj:Ft}});Y.push(Tt)}else if(ot.extreq!=null){var Jt=new P(ot.extreq),Tt=M({tag:{tage:"a0",obj:{seq:[{oid:"1.2.840.113549.1.9.14"},{set:[Jt]}]}}});Y.push(Tt)}else Y.push(new _({tag:"a0",explicit:!1,obj:new x({str:""})}));var Gt=new b({array:Y});return Gt.tohex()},this.getEncodedHex=function(){return this.tohex()};function T(ot){for(var Y=Error,Ft=v.asn1.x509.Extensions,Tt=[],Jt=0;Jt<ot.length;Jt++){var Gt=ot[Jt],Ae=Gt.attr;if(Ae=="extensionRequest"){var De=new Ft(Gt.ext),d={seq:[{oid:"1.2.840.113549.1.9.14"},{set:[De]}]};Tt.push(d)}else if(Ae=="unstructuredName"){var d={seq:[{oid:"1.2.840.113549.1.9.2"},{set:Gt.names}]};Tt.push(d)}else if(Ae=="challengePassword"){var d={seq:[{oid:"1.2.840.113549.1.9.7"},{set:[{utf8str:Gt.password}]}]};Tt.push(d)}else throw new Y("unknown CSR attribute")}return{set:Tt}}r!=null&&this.setByParam(r)},je(v.asn1.csr.CertificationRequestInfo,v.asn1.ASN1Object),v.asn1.csr.AttributeList=function(r){function l(o){}},je(v.asn1.csr.AttributeList,v.asn1.ASN1Object),v.asn1.csr.CSRUtil=new function(){},v.asn1.csr.CSRUtil.newCSRPEM=function(r){var l=Tr,o=v.asn1.csr,h=new o.CertificationRequest(r),b=h.getPEM();return b},v.asn1.csr.CSRUtil.getParam=function(r,l){var o=Je,h=o.getV,b=o.getIdxbyList,D=o.getTLVbyList,x=o.getTLVbyListEx,_=o.getVbyListEx,M=function(Ft){var Tt=b(Ft,0,[0,3,0,0],"06");return h(Ft,Tt)!="2a864886f70d01090e"?null:D(Ft,0,[0,3,0,1,0],"30")},K={};if(r.indexOf("-----BEGIN CERTIFICATE REQUEST")==-1)throw new Error("argument is not PEM file");var ht=On(r,"CERTIFICATE REQUEST");l&&(K.tbs=D(ht,0,[0]));try{var mt=x(ht,0,[0,1]);if(mt=="3000")K.subject={};else{var T=new nr;K.subject=T.getX500Name(mt)}}catch{}var P=x(ht,0,[0,2]),I=Tr.getKey(P,null,"pkcs8pub");K.sbjpubkey=Tr.getPEM(I,"PKCS8PUB");var ut=M(ht),T=new nr;ut!=null&&(K.extreq=T.getExtParamArray(ut));try{var ot=x(ht,0,[1],"30"),T=new nr;K.sigalg=T.getAlgorithmIdentifierName(ot)}catch{}try{var Y=_(ht,0,[2]);K.sighex=Y}catch{}return K},v.asn1.csr.CSRUtil.verifySignature=function(r){try{var l=null;if(typeof r=="string"&&r.indexOf("-----BEGIN CERTIFICATE REQUEST")!=-1?l=v.asn1.csr.CSRUtil.getParam(r,!0):typeof r=="object"&&r.sbjpubkey!=null&&r.sigalg!=null&&r.sighex!=null&&r.tbs!=null&&(l=r),l==null)return!1;var o=new v.crypto.Signature({alg:l.sigalg});return o.init(l.sbjpubkey),o.updateHex(l.tbs),o.verify(l.sighex)}catch(h){return alert(h),!1}},(typeof v>"u"||!v)&&(v={}),(typeof v.asn1>"u"||!v.asn1)&&(v.asn1={}),(typeof v.asn1.ocsp>"u"||!v.asn1.ocsp)&&(v.asn1.ocsp={}),v.asn1.ocsp.DEFAULT_HASH="sha1",v.asn1.ocsp.OCSPResponse=function(r){v.asn1.ocsp.OCSPResponse.superclass.constructor.call(this);var l=v.asn1.DEREnumerated,o=v.asn1.ASN1Util.newObject,h=v.asn1.ocsp.ResponseBytes,b=["successful","malformedRequest","internalError","tryLater","_not_used_","sigRequired","unauthorized"];this.params=null,this._getStatusCode=function(){var D=this.params.resstatus;return typeof D=="number"?D:typeof D!="string"?-1:b.indexOf(D)},this.setByParam=function(D){this.params=D},this.tohex=function(){var D=this.params,x=this._getStatusCode();if(x==-1)throw new Error("responseStatus not supported: "+D.resstatus);if(x!=0)return o({seq:[{enum:{int:x}}]}).tohex();var _=new h(D);return o({seq:[{enum:{int:0}},{tag:{tag:"a0",explicit:!0,obj:_}}]}).tohex()},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&this.setByParam(r)},je(v.asn1.ocsp.OCSPResponse,v.asn1.ASN1Object),v.asn1.ocsp.ResponseBytes=function(r){v.asn1.ocsp.ResponseBytes.superclass.constructor.call(this);var l=v.asn1,o=l.DERSequence,h=l.DERObjectIdentifier,b=l.DEROctetString,D=l.ocsp.BasicOCSPResponse;this.params=null,this.setByParam=function(x){this.params=x},this.tohex=function(){var x=this.params;if(x.restype!="ocspBasic")throw new Error("not supported responseType: "+x.restype);var _=new D(x),M=[];M.push(new h({name:"ocspBasic"})),M.push(new b({hex:_.tohex()}));var K=new o({array:M});return K.tohex()},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&this.setByParam(r)},je(v.asn1.ocsp.ResponseBytes,v.asn1.ASN1Object),v.asn1.ocsp.BasicOCSPResponse=function(r){v.asn1.ocsp.BasicOCSPResponse.superclass.constructor.call(this);var l=Error,o=v.asn1,h=o.ASN1Object,b=o.DERSequence,D=o.DERGeneralizedTime,x=o.DERTaggedObject,_=o.DERBitString,M=o.x509.Extensions,K=o.x509.AlgorithmIdentifier,ht=o.ocsp,mt=ht.ResponderID;_SingleResponseList=ht.SingleResponseList,_ResponseData=ht.ResponseData,this.params=null,this.setByParam=function(P){this.params=P},this.sign=function(){var P=this.params,I=P.tbsresp.tohex(),ut=new v.crypto.Signature({alg:P.sigalg});ut.init(P.reskey),ut.updateHex(I),P.sighex=ut.sign()},this.tohex=function(){var P=this.params;P.tbsresp==null&&(P.tbsresp=new _ResponseData(P)),P.sighex==null&&P.reskey!=null&&this.sign();var I=[];if(I.push(P.tbsresp),I.push(new K({name:P.sigalg})),I.push(new _({hex:"00"+P.sighex})),P.certs!=null&&P.certs.length!=null){for(var ut=[],T=0;T<P.certs.length;T++){var ot=P.certs[T],Y=null;if(Je.isASN1HEX(ot))Y=ot;else if(ot.match(/-----BEGIN/))Y=On(ot);else throw new l("certs["+T+"] not hex or PEM");ut.push(new h({tlv:Y}))}var Ft=new b({array:ut});I.push(new x({tag:"a0",explicit:!0,obj:Ft}))}var Tt=new b({array:I});return Tt.tohex()},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&this.setByParam(r)},je(v.asn1.ocsp.BasicOCSPResponse,v.asn1.ASN1Object),v.asn1.ocsp.ResponseData=function(r){v.asn1.ocsp.ResponseData.superclass.constructor.call(this);var l=Error,o=v.asn1,h=o.DERSequence,b=o.DERGeneralizedTime,D=o.DERTaggedObject,x=o.x509.Extensions,_=o.ocsp,M=_.ResponderID;_SingleResponseList=_.SingleResponseList,this.params=null,this.tohex=function(){var K=this.params;K.respid!=null&&new l("respid not specified"),K.prodat!=null&&new l("prodat not specified"),K.array!=null&&new l("array not specified");var ht=[];if(ht.push(new M(K.respid)),ht.push(new b(K.prodat)),ht.push(new _SingleResponseList(K.array)),K.ext!=null){var mt=new x(K.ext);ht.push(new D({tag:"a1",explicit:!0,obj:mt}))}var P=new h({array:ht});return P.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(K){this.params=K},r!==void 0&&this.setByParam(r)},je(v.asn1.ocsp.ResponseData,v.asn1.ASN1Object),v.asn1.ocsp.ResponderID=function(r){v.asn1.ocsp.ResponderID.superclass.constructor.call(this);var l=v,o=l.asn1,h=o.ASN1Util.newObject,b=o.x509.X500Name,D=l.lang.String.isHex,x=Error;this.params=null,this.tohex=function(){var _=this.params;if(_.key!=null){var M=null;if(typeof _.key=="string"){if(D(_.key)&&(M=_.key),_.key.match(/-----BEGIN CERTIFICATE/)){var K=new nr(_.key),ht=K.getExtSubjectKeyIdentifier();ht!=null&&(M=ht.kid.hex)}}else if(_.key instanceof nr){var ht=_.key.getExtSubjectKeyIdentifier();ht!=null&&(M=ht.kid.hex)}if(M==null)throw new x("wrong key member value");var mt=h({tag:{tag:"a2",explicit:!0,obj:{octstr:{hex:M}}}});return mt.tohex()}else if(_.name!=null){var P=null;if(typeof _.name=="string"&&_.name.match(/-----BEGIN CERTIFICATE/)){var K=new nr(_.name);P=K.getSubject()}else _.name instanceof nr?P=_.name.getSubject():typeof _.name=="object"&&(_.name.array!=null||_.name.str!=null)&&(P=_.name);if(P==null)throw new x("wrong name member value");var mt=h({tag:{tag:"a1",explicit:!0,obj:new b(P)}});return mt.tohex()}throw new x("key or name not specified")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(_){this.params=_},r!==void 0&&this.setByParam(r)},je(v.asn1.ocsp.ResponderID,v.asn1.ASN1Object),v.asn1.ocsp.SingleResponseList=function(r){v.asn1.ocsp.SingleResponseList.superclass.constructor.call(this);var l=v.asn1,o=l.DERSequence,h=l.ocsp.SingleResponse;this.params=null,this.tohex=function(){var b=this.params;if(typeof b!="object"||b.length==null)throw new Error("params not specified properly");for(var D=[],x=0;x<b.length;x++)D.push(new h(b[x]));var _=new o({array:D});return _.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(b){this.params=b},r!==void 0&&this.setByParam(r)},je(v.asn1.ocsp.SingleResponseList,v.asn1.ASN1Object),v.asn1.ocsp.SingleResponse=function(r){var l=Error,o=v,h=o.asn1,b=h.DERSequence,D=h.DERGeneralizedTime,x=h.DERTaggedObject,_=h.ocsp,M=_.CertID,K=_.CertStatus,ht=h.x509,mt=ht.Extensions;_.SingleResponse.superclass.constructor.call(this),this.params=null,this.tohex=function(){var P=this.params,I=[];if(P.certid==null)throw new l("certid unspecified");if(P.status==null)throw new l("status unspecified");if(P.thisupdate==null)throw new l("thisupdate unspecified");if(I.push(new M(P.certid)),I.push(new K(P.status)),I.push(new D(P.thisupdate)),P.nextupdate!=null){var ut=new D(P.nextupdate);I.push(new x({tag:"a0",explicit:!0,obj:ut}))}if(P.ext!=null){var T=new mt(P.ext);I.push(new x({tag:"a1",explicit:!0,obj:T}))}var ot=new b({array:I});return ot.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(P){this.params=P},r!==void 0&&this.setByParam(r)},je(v.asn1.ocsp.SingleResponse,v.asn1.ASN1Object),v.asn1.ocsp.CertID=function(r){var l=v,o=l.asn1,h=o.DEROctetString,b=o.DERInteger,D=o.DERSequence,x=o.x509,_=x.AlgorithmIdentifier,M=o.ocsp,K=M.DEFAULT_HASH,ht=l.crypto,mt=ht.Util.hashHex,P=nr,I=Je,ut=I.getVbyList;M.CertID.superclass.constructor.call(this),this.DEFAULT_HASH="sha1",this.params=null,this.setByValue=function(T,ot,Y,Ft){Ft==null&&(Ft=this.DEFAULT_HASH),this.params={alg:Ft,issname:T,isskey:ot,sbjsn:Y}},this.setByCert=function(T,ot,Y){Y==null&&(Y=this.DEFAULT_HASH),this.params={alg:Y,issuerCert:T,subjectCert:ot}},this.getParamByCerts=function(T,ot,Y){Y==null&&(Y=this.DEFAULT_HASH);var Ft=new P(T),Tt=new P(ot),Jt=mt(Ft.getSubjectHex(),Y),Gt=Ft.getPublicKeyHex(),Ae=mt(ut(Gt,0,[1],"03",!0),Y),De=Tt.getSerialNumberHex(),d={alg:Y,issname:Jt,isskey:Ae,sbjsn:De};return d},this.tohex=function(){if(typeof this.params!="object")throw new Error("params not set");var T=this.params,ot,Y,Ft,Tt;if(T.alg==null?Tt=this.DEFAULT_HASH:Tt=T.alg,T.issuerCert!=null&&T.subjectCert!=null){var Jt=this.getParamByCerts(T.issuerCert,T.subjectCert,Tt);ot=Jt.issname,Y=Jt.isskey,Ft=Jt.sbjsn}else if(T.issname!=null&&T.isskey!=null&&T.sbjsn!=null)ot=T.issname,Y=T.isskey,Ft=T.sbjsn;else throw new Error("required param members not defined");var Gt=new _({name:Tt}),Ae=new h({hex:ot}),De=new h({hex:Y}),d=new b({hex:Ft}),B=new D({array:[Gt,Ae,De,d]});return this.hTLV=B.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&this.setByParam(r)},je(v.asn1.ocsp.CertID,v.asn1.ASN1Object),v.asn1.ocsp.CertStatus=function(r){v.asn1.ocsp.CertStatus.superclass.constructor.call(this),this.params=null,this.tohex=function(){var l=this.params;if(l.status=="good")return"8000";if(l.status=="unknown")return"8200";if(l.status=="revoked"){var o=[{gentime:{str:l.time}}];l.reason!=null&&o.push({tag:{tag:"a0",explicit:!0,obj:{enum:{int:l.reason}}}});var h={tag:"a1",explicit:!1,obj:{seq:o}};return v.asn1.ASN1Util.newObject({tag:h}).tohex()}throw new Error("bad status")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(l){this.params=l},r!==void 0&&this.setByParam(r)},je(v.asn1.ocsp.CertStatus,v.asn1.ASN1Object),v.asn1.ocsp.Request=function(r){var l=v,o=l.asn1,h=o.DERSequence,b=o.ocsp;if(b.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.tohex=function(){var x=[];if(this.dReqCert===null)throw"reqCert not set";x.push(this.dReqCert);var _=new h({array:x});return this.hTLV=_.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},typeof r<"u"){var D=new b.CertID(r);this.dReqCert=D}},je(v.asn1.ocsp.Request,v.asn1.ASN1Object),v.asn1.ocsp.TBSRequest=function(r){var l=v,o=l.asn1,h=o.DERSequence,b=o.ocsp;b.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(D){for(var x=[],_=0;_<D.length;_++){var M=new b.Request(D[0]);x.push(M)}this.dRequestList=x},this.tohex=function(){var D=[];if(this.version!==0)throw"not supported version: "+this.version;if(this.dRequestorName!==null)throw"requestorName not supported";var x=new h({array:this.dRequestList});if(D.push(x),this.dRequestExt!==null)throw"requestExtensions not supported";var _=new h({array:D});return this.hTLV=_.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&r.reqList!==void 0&&this.setRequestListByParam(r.reqList)},je(v.asn1.ocsp.TBSRequest,v.asn1.ASN1Object),v.asn1.ocsp.OCSPRequest=function(r){var l=v,o=l.asn1,h=o.DERSequence,b=o.ocsp;if(b.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.tohex=function(){var x=[];if(this.dTbsRequest!==null)x.push(this.dTbsRequest);else throw"tbsRequest not set";if(this.dOptionalSignature!==null)throw"optionalSignature not supported";var _=new h({array:x});return this.hTLV=_.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},r!==void 0&&r.reqList!==void 0){var D=new b.TBSRequest(r);this.dTbsRequest=D}},je(v.asn1.ocsp.OCSPRequest,v.asn1.ASN1Object),v.asn1.ocsp.OCSPUtil={},v.asn1.ocsp.OCSPUtil.getRequestHex=function(r,l,o){var h=v,b=h.asn1,D=b.ocsp;o===void 0&&(o=D.DEFAULT_HASH);var x={alg:o,issuerCert:r,subjectCert:l},_=new D.OCSPRequest({reqList:[x]});return _.tohex()},v.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(r){var l=Je,o=l.getVbyList,h=l.getVbyListEx,b=l.getIdxbyList,D=l.getIdxbyListEx,x=l.getV,_={};try{var M=h(r,0,[0],"0a");_.responseStatus=parseInt(M,16)}catch{}if(_.responseStatus!==0)return _;try{var K=b(r,0,[1,0,1,0,0,2,0,1]);r.substr(K,2)==="80"?_.certStatus="good":r.substr(K,2)==="a1"?(_.certStatus="revoked",_.revocationTime=xr(o(r,K,[0]))):r.substr(K,2)==="82"&&(_.certStatus="unknown")}catch{}try{var ht=b(r,0,[1,0,1,0,0,2,0,2]);_.thisUpdate=xr(x(r,ht))}catch{}try{var mt=b(r,0,[1,0,1,0,0,2,0,3]);r.substr(mt,2)==="a0"&&(_.nextUpdate=xr(o(r,mt,[0])))}catch{}return _},v.asn1.ocsp.OCSPParser=function(){var r=Error,l=nr,o=new l,h=Je,b=h.getV,D=h.getTLV,x=h.getIdxbyList,_=h.getVbyList,M=h.getTLVbyList,K=h.getVbyListEx,ht=h.getTLVbyListEx,mt=h.getChildIdx;this.getOCSPRequest=function(P){var I=mt(P,0);if(I.length!=1&&I.length!=2)throw new r("wrong number elements: "+I.length);var ut=this.getTBSRequest(D(P,I[0]));return ut},this.getTBSRequest=function(P){var I={},ut=ht(P,0,[0],"30");I.array=this.getRequestList(ut);var T=ht(P,0,["[2]",0],"30");return T!=null&&(I.ext=o.getExtParamArray(T)),I},this.getRequestList=function(P){for(var I=[],ut=mt(P,0),T=0;T<ut.length;T++){var P=D(P,ut[T]);I.push(this.getRequest(P))}return I},this.getRequest=function(P){var I=mt(P,0);if(I.length!=1&&I.length!=2)throw new r("wrong number elements: "+I.length);var ut=this.getCertID(D(P,I[0]));if(I.length==2){var T=x(P,0,[1,0]);ut.ext=o.getExtParamArray(D(P,T))}return ut},this.getCertID=function(P){var I=mt(P,0);if(I.length!=4)throw new r("wrong number elements: "+I.length);var ut=new l,T={};return T.alg=ut.getAlgorithmIdentifierName(D(P,I[0])),T.issname=b(P,I[1]),T.isskey=b(P,I[2]),T.sbjsn=b(P,I[3]),T},this.getOCSPResponse=function(P){var I=mt(P,0),ut,T=b(P,I[0]),ot=parseInt(T);if(I.length==1)return{resstatus:ot};var Y=M(P,0,[1,0]);return ut=this.getResponseBytes(Y),ut.resstatus=ot,ut},this.getResponseBytes=function(P){var I=mt(P,0),ut,T=M(P,0,[1,0]);ut=this.getBasicOCSPResponse(T);var ot=b(P,I[0]);return ut.restype=v.asn1.x509.OID.oid2name(me(ot)),ut},this.getBasicOCSPResponse=function(P){var I=mt(P,0),ut;ut=this.getResponseData(D(P,I[0]));var T=new nr;ut.alg=T.getAlgorithmIdentifierName(D(P,I[1]));var ot=b(P,I[2]);ut.sighex=ot.substr(2);var Y=K(P,0,["[0]"]);if(Y!=null){for(var Ft=mt(Y,0),Tt=[],Jt=0;Jt<Ft.length;Jt++){var Gt=D(Y,Ft[Jt]);Tt.push(Gt)}ut.certs=Tt}return ut},this.getResponseData=function(P){var I=mt(P,0),ut=I.length,T={},ot=0;P.substr(I[0],2)=="a0"&&ot++,T.respid=this.getResponderID(D(P,I[ot++]));var Y=b(P,I[ot++]);if(T.prodat=xr(Y),T.array=this.getSingleResponseList(D(P,I[ot++])),P.substr(I[ut-1],2)=="a1"){var Ft=M(P,I[ut-1],[0]),Tt=new nr;T.ext=Tt.getExtParamArray(Ft)}return T},this.getResponderID=function(P){var I={};if(P.substr(0,2)=="a2"){var ut=_(P,0,[0]);I.key=ut}if(P.substr(0,2)=="a1"){var T=M(P,0,[0]),ot=new nr;I.name=ot.getX500Name(T)}return I},this.getSingleResponseList=function(P){for(var I=mt(P,0),ut=[],T=0;T<I.length;T++){var ot=this.getSingleResponse(D(P,I[T]));ut.push(ot)}return ut},this.getSingleResponse=function(P){var I=mt(P,0),ut={},T=this.getCertID(D(P,I[0]));ut.certid=T;var ot=this.getCertStatus(D(P,I[1]));if(ut.status=ot,P.substr(I[2],2)=="18"){var Y=b(P,I[2]);ut.thisupdate=xr(Y)}for(var Ft=3;Ft<I.length;Ft++){if(P.substr(I[Ft],2)=="a0"){var Tt=_(P,I[Ft],[0],"18");ut.nextupdate=xr(Tt)}if(P.substr(I[Ft],2)=="a1"){var Jt=new nr,Gt=M(P,0,[Ft,0]);ut.ext=Jt.getExtParamArray(Gt)}}return ut},this.getCertStatus=function(P){var I={};if(P=="8000")return{status:"good"};if(P=="8200")return{status:"unknown"};if(P.substr(0,2)=="a1"){I.status="revoked";var ut=_(P,0,[0]),T=xr(ut);I.time=T}return I}};var v;(typeof v>"u"||!v)&&(v={}),(typeof v.lang>"u"||!v.lang)&&(v.lang={}),v.lang.String=function(){};function xu(r){for(var l=new Array,o=0;o<r.length;o++)l[o]=r.charCodeAt(o);return l}function Zs(r){for(var l="",o=0;o<r.length;o++)l=l+String.fromCharCode(r[o]);return l}function Ai(r){for(var l="",o=0;o<r.length;o++){var h=r[o].toString(16);h.length==1&&(h="0"+h),l=l+h}return l}function cs(r){return Ai(xu(r))}function Pn(r){return E(cs(r))}function li(r){return Rr(E(cs(r)))}function ct(r){return Zs(C(Vs(r)))}function Rr(r){return r=r.replace(/\=/g,""),r=r.replace(/\+/g,"-"),r=r.replace(/\//g,"_"),r}function Vs(r){return r.length%4==2?r=r+"==":r.length%4==3&&(r=r+"="),r=r.replace(/-/g,"+"),r=r.replace(/_/g,"/"),r}function vn(r){return r.length%2==1&&(r="0"+r),Rr(E(r))}function Dn(r){return m(Vs(r))}var be,gs;typeof Buffer=="function"?(be=function(r){return Rr(Buffer.from(r,"utf8").toString("base64"))},gs=function(r){return Buffer.from(Vs(r),"base64").toString("utf8")}):(be=function(r){return vn(fu(ti(r)))},gs=function(r){return decodeURIComponent(Xi(Dn(r)))});function hu(r){return E(fu(ti(r)))}function Ji(r){return decodeURIComponent(Xi(m(r)))}function _u(r){return fu(ti(r)).toLowerCase()}function xr(r){try{return decodeURIComponent(Xi(r))}catch{return null}}function Ba(r){return xr(Yi(r))}function Yi(r){for(var l=r.match(/.{1,2}/g),o=[],h=0;h<l.length;h++){var b=parseInt(l[h],16);161<=b&&b<=191?(o.push("c2"),o.push(l[h])):192<=b&&b<=255?(o.push("c3"),o.push((b-64).toString(16))):o.push(l[h])}return o.join("")}function dr(r){for(var l="",o=0;o<r.length-1;o+=2)l+=String.fromCharCode(parseInt(r.substr(o,2),16));return l}function kn(r){for(var l="",o=0;o<r.length;o++)l+=("0"+r.charCodeAt(o).toString(16)).slice(-2);return l}function Bu(r){return E(r)}function Ru(r){return ms(Bu(r),64)}function ms(r,l){return r=r.replace(new RegExp("(.{"+l+"})","g"),`$1\r
`),r=r.replace(/\s+$/,""),r}function $u(r){var l=r.replace(/[^0-9A-Za-z\/+=]*/g,""),o=m(l);return o}function Oi(r,l){return"-----BEGIN "+l+`-----\r
`+ms(r,64)+`\r
-----END `+l+`-----\r
`}function Pe(r,l){return"-----BEGIN "+l+`-----\r
`+ms(Bu(r),64)+`\r
-----END `+l+`-----\r
`}function On(r,l){if(r.indexOf("-----BEGIN ")==-1)throw new Error("can't find PEM header");return l!==void 0?(r=r.replace(new RegExp("^[^]*-----BEGIN "+l+"-----"),""),r=r.replace(new RegExp("-----END "+l+"-----[^]*$"),"")):(r=r.replace(/^[^]*-----BEGIN [^-]+-----/,""),r=r.replace(/-----END [^-]+-----[^]*$/,"")),$u(r)}function Pi(r){return r.indexOf("-----BEGIN ")==-1||r.indexOf("-----END ")==-1?null:(r=r.replace(/^[\s\S]*?-----BEGIN [^-]+-----/m,""),r=r.replace(/-----END [\s\S]+$/m,""),r=r.replace(/\s+/g,""),r.match(/^[0-9a-zA-Z+/=]+$/)?r:null)}function ku(r){if(r.length%2!=0)throw"input is not even length";if(r.match(/^[0-9A-Fa-f]+$/)==null)throw"input is not hexadecimal";for(var l=new ArrayBuffer(r.length/2),o=new DataView(l),h=0;h<r.length/2;h++)o.setUint8(h,parseInt(r.substr(h*2,2),16));return l}function oa(r){for(var l="",o=new DataView(r),h=0;h<r.byteLength;h++)l+=("00"+o.getUint8(h).toString(16)).slice(-2);return l}function Ou(r){var l,o,h,b,D,x,_,M,K,ht,mt,P;if(r=Qs(r),P=r.match(/^(\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/),P)return l=parseInt(P[1]),o=parseInt(P[2])-1,h=parseInt(P[3]),b=parseInt(P[4]),D=parseInt(P[5]),x=parseInt(P[6]),_=0,ht=P[7],ht!==""&&(mt=(ht.substr(1)+"00").substr(0,3),_=parseInt(mt)),Date.UTC(l,o,h,b,D,x,_);throw new Error("unsupported zulu format: "+r)}function ca(r){var l=new Date(r),o=("0000"+l.getUTCFullYear()).slice(-4),h=("00"+(l.getUTCMonth()+1)).slice(-2),b=("00"+l.getUTCDate()).slice(-2),D=("00"+l.getUTCHours()).slice(-2),x=("00"+l.getUTCMinutes()).slice(-2),_=("00"+l.getUTCSeconds()).slice(-2),M=("000"+l.getUTCMilliseconds()).slice(-3);return M=M.replace(/0+$/,""),M=M!=""?"."+M:M,o+h+b+D+x+_+M+"Z"}function Pu(r){return Math.round(Ou(r)/1e3)}function Nu(r){return new Date(Ou(r))}function Ia(r,l,o){var h,b=r.getUTCFullYear();if(l){if(b<1950||2049<b)throw"not proper year for UTCTime: "+b;h=(""+b).slice(-2)}else h=("000"+b).slice(-4);if(h+=("0"+(r.getUTCMonth()+1)).slice(-2),h+=("0"+r.getUTCDate()).slice(-2),h+=("0"+r.getUTCHours()).slice(-2),h+=("0"+r.getUTCMinutes()).slice(-2),h+=("0"+r.getUTCSeconds()).slice(-2),o){var D=r.getUTCMilliseconds();D!==0&&(D=("00"+D).slice(-3),D=D.replace(/0+$/g,""),h+="."+D)}return h+="Z",h}function Qs(r){return r.match(/^[0-9]{12}Z$/)||r.match(/^[0-9]{12}[.][0-9]*Z$/)?r.match(/^[0-4]/)?"20"+r:"19"+r:r}function fu(r){return r.replace(/%/g,"")}function Xi(r){return r.replace(/(..)/g,"%$1")}function wi(r){var l="malformed IPv6 address";if(!r.match(/^[0-9A-Fa-f:]+$/))throw l;r=r.toLowerCase();var o=r.split(":").length-1;if(o<2)throw l;var h=":".repeat(7-o+2);r=r.replace("::",h);var b=r.split(":");if(b.length!=8)throw l;for(var D=0;D<8;D++)b[D]=("0000"+b[D]).slice(-4);return b.join("")}function du(r){if(!r.match(/^[0-9A-Fa-f]{32}$/))throw new Error("malformed IPv6 address: "+r);r=r.toLowerCase();var l=r.match(/.{1,4}/g);l=l.map(function(b){return b.replace(/^0+/,"")}),l=l.map(function(b){return b==""?"0":b}),r=":"+l.join(":")+":";var o=r.match(/:(0:){2,}/g);if(o==null)return r.slice(1,-1);var h=o.sort().slice(-1)[0];return r=r.replace(h.substr(0,h.length-1),":"),r.substr(0,2)!="::"&&(r=r.substr(1)),r.substr(-2,2)!="::"&&(r=r.substr(0,r.length-1)),r}function Ss(r){var l=new Error("malformed hex value");if(!r.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw l;if(r.length==8){var o;try{return o=parseInt(r.substr(0,2),16)+"."+parseInt(r.substr(2,2),16)+"."+parseInt(r.substr(4,2),16)+"."+parseInt(r.substr(6,2),16),o}catch{throw l}}else if(r.length==16)try{return Ss(r.substr(0,8))+"/"+Zi(r.substr(8))}catch{throw l}else{if(r.length==32)return du(r);if(r.length==64){try{return du(r.substr(0,32))+"/"+Zi(r.substr(32))}catch{throw l}return}else return r}}function Zi(r){var l=new Error("malformed mask"),o;try{o=new w(r,16).toString(2)}catch{throw l}if(!o.match(/^1*0*$/))throw l;return o.replace(/0+$/,"").length}function gu(r){var l=new Error("malformed IP address");if(r=r.toLowerCase(r),!r.match(/^[0-9a-f.:/]+$/))throw l;if(r.match(/^[0-9.]+$/)){var o=r.split(".");if(o.length!==4)throw l;var h="";try{for(var b=0;b<4;b++){var D=parseInt(o[b]);h+=("0"+D.toString(16)).slice(-2)}return h}catch{throw l}}else if(r.match(/^[0-9.]+\/[0-9]+$/)){var x=r.split("/");return gu(x[0])+ha(parseInt(x[1]),32)}else{if(r.match(/^[0-9a-f:]+$/)&&r.indexOf(":")!==-1)return wi(r);if(r.match(/^[0-9a-f:]+\/[0-9]+$/)&&r.indexOf(":")!==-1){var x=r.split("/");return wi(x[0])+ha(parseInt(x[1]),128)}else throw l}}function ha(r,l){if(l==32&&r==0)return"00000000";if(l==128&&r==0)return"00000000000000000000000000000000";var o=Array(r+1).join("1")+Array(l-r+1).join("0");return new w(o,2).toString(16)}function Tu(r){function l(b){var D=parseInt(b.substr(0,2),16),x=parseInt(b.substr(2),16);if(D==0&x<128)return String.fromCharCode(x);if(D<8){var _=192|(D&7)<<3|(x&192)>>6,M=128|x&63;return xr(_.toString(16)+M.toString(16))}var _=224|(D&240)>>4,M=128|(D&15)<<2|(x&192)>>6,K=128|x&63;return xr(_.toString(16)+M.toString(16)+K.toString(16))}var o=r.match(/.{4}/g),h=o.map(l);return h.join("")}function ti(r){for(var l=encodeURIComponent(r),o="",h=0;h<l.length;h++)l[h]=="%"?(o=o+l.substr(h,3),h=h+2):o=o+"%"+cs(l[h]);return o}function Nn(r){return r=r.replace(/\r\n/mg,`
`),r}function Qi(r){return r=r.replace(/\r\n/mg,`
`),r=r.replace(/\n/mg,`\r
`),r}v.lang.String.isInteger=function(r){return r.match(/^[0-9]+$/)?!0:!!r.match(/^-[0-9]+$/)},v.lang.String.isHex=function(r){return ei(r)};function ei(r){return!!(r.length%2==0&&(r.match(/^[0-9a-f]+$/)||r.match(/^[0-9A-F]+$/)))}v.lang.String.isBase64=function(r){return r=r.replace(/\s+/g,""),!!(r.match(/^[0-9A-Za-z+\/]+={0,3}$/)&&r.length%4==0)},v.lang.String.isBase64URL=function(r){return r.match(/[+/=]/)?!1:(r=Vs(r),v.lang.String.isBase64(r))};function Ni(r){return!!r.match(/^[0-9A-Za-z-_.]+$/)}v.lang.String.isIntegerArray=function(r){return r=r.replace(/\s+/g,""),!!r.match(/^\[[0-9,]+\]$/)},v.lang.String.isPrintable=function(r){return r.match(/^[0-9A-Za-z '()+,-./:=?]*$/)!==null},v.lang.String.isIA5=function(r){return r.match(/^[\x20-\x21\x23-\x7f]*$/)!==null},v.lang.String.isMail=function(r){return r.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};function yu(r){return r.length%2==1?"0"+r:r.substr(0,1)>"7"?"00"+r:r}function Ra(r){r=r.replace(/^\s*\[\s*/,""),r=r.replace(/\s*\]\s*$/,""),r=r.replace(/\s*/g,"");try{var l=r.split(/,/).map(function(o,h,b){var D=parseInt(o);if(D<0||255<D)throw"integer not in range 0-255";var x=("00"+D.toString(16)).slice(-2);return x}).join("");return l}catch(o){throw"malformed integer array string: "+o}}var fa=function(r,l){var o=r.length;r.length>l.length&&(o=l.length);for(var h=0;h<o;h++)if(r.charCodeAt(h)!=l.charCodeAt(h))return h;return r.length!=l.length?o:-1};function zs(r){var l=function(_){var M=_.toString(16);return M.length==1&&(M="0"+M),M},o=function(_){var M="",K=parseInt(_,10),ht=K.toString(2),mt=7-ht.length%7;mt==7&&(mt=0);for(var P="",I=0;I<mt;I++)P+="0";ht=P+ht;for(var I=0;I<ht.length-1;I+=7){var ut=ht.substr(I,7);I!=ht.length-7&&(ut="1"+ut),M+=l(parseInt(ut,2))}return M};try{if(!r.match(/^[0-9.]+$/))return null;var h="",b=r.split("."),D=parseInt(b[0],10)*40+parseInt(b[1],10);h+=l(D),b.splice(0,2);for(var x=0;x<b.length;x++)h+=o(b[x]);return h}catch{return null}}function me(r){if(!ei(r))return null;try{var l=[],o=r.substr(0,2),h=parseInt(o,16);l[0]=new String(Math.floor(h/40)),l[1]=new String(h%40);for(var b=r.substr(2),D=[],x=0;x<b.length/2;x++)D.push(parseInt(b.substr(x*2,2),16));for(var _=[],M="",x=0;x<D.length;x++)D[x]&128?M=M+pr((D[x]&127).toString(2),7):(M=M+pr((D[x]&127).toString(2),7),_.push(new String(parseInt(M,2))),M="");var K=l.join(".");return _.length>0&&(K=K+"."+_.join(".")),K}catch{return null}}function Le(r){var l=new w(String(r),10);return ke(l)}function ke(r){var l=r.toString(16);if(l.substr(0,1)!="-")return l.length%2==1?l="0"+l:l.match(/^[0-7]/)||(l="00"+l),l;var o=l.substr(1),h=o.length;h%2==1?h+=1:l.match(/^[0-7]/)||(h+=2);for(var b="",D=0;D<h;D++)b+="f";var x=new w(b,16),_=x.xor(r).add(w.ONE);return l=_.toString(16).replace(/^-/,""),l}var pr=function(r,l,o){return o==null&&(o="0"),r.length>=l?r:new Array(l-r.length+1).join(o)+r};function Or(r){if(r.length%2!=0||(r=r.toLowerCase(),r.match(/^[0-9a-f]+$/)==null))return-1;try{var l=r.substr(0,2);if(l=="00")return parseInt(r.substr(2),16);var o=parseInt(l,16);if(o>7)return-1;var h=r.substr(2),b=parseInt(h,16).toString(2);b=="0"&&(b="00000000"),b=b.slice(0,0-o);var D=parseInt(b,2);return D==NaN?-1:D}catch{return-1}}function un(r){if(typeof r!="number"||r<0)return null;var l=Number(r).toString(2),o=8-l.length%8;o==8&&(o=0),l=l+pr("",o,"0");var h=parseInt(l,2).toString(16);h.length%2==1&&(h="0"+h);var b="0"+o;return b+h}function Gn(r){if(typeof r!="string"||r.length%2!=0||!r.match(/^[0-9a-f]+$/))return null;try{var l=parseInt(r.substr(0,2),16);if(l<0||7<l)return null;for(var o=r.substr(2),h="",b=0;b<o.length;b+=2){var D=o.substr(b,2),x=parseInt(D,16).toString(2);x=("0000000"+x).slice(-8),h+=x}return h.substr(0,h.length-l)}catch{return null}}function An(r){if(typeof r!="string"||r.match(/^[01]+$/)==null)return null;try{var l=parseInt(r,2);return un(l)}catch{return null}}function Fi(r,l){for(var o=0,h=0;h<r.length;h++)o|=1<<l[r[h]];for(var b=o.toString(2),D="",h=b.length-1;h>=0;h--)D+=b[h];return D}function Fn(r,l,o){if(typeof r=="object"){for(var l=String(l).split("."),h=0;h<l.length&&r;h++){var b=l[h];b.match(/^[0-9]+$/)&&(b=parseInt(b)),r=r[b]}return r||r===!1?r:o}}function je(r,l){var o=function(){};o.prototype=l.prototype,r.prototype=new o,r.prototype.constructor=r,r.superclass=l.prototype,l.prototype.constructor==Object.prototype.constructor&&(l.prototype.constructor=l)}(typeof v>"u"||!v)&&(v={}),(typeof v.crypto>"u"||!v.crypto)&&(v.crypto={}),v.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:p.algo.MD5,sha1:p.algo.SHA1,sha224:p.algo.SHA224,sha256:p.algo.SHA256,sha384:p.algo.SHA384,sha512:p.algo.SHA512,ripemd160:p.algo.RIPEMD160},this.getDigestInfoHex=function(r,l){if(typeof this.DIGESTINFOHEAD[l]>"u")throw"alg not supported in Util.DIGESTINFOHEAD: "+l;return this.DIGESTINFOHEAD[l]+r},this.getPaddedDigestInfoHex=function(r,l,o){var h=this.getDigestInfoHex(r,l),b=o/4;if(h.length+22>b)throw"key is too short for SigAlg: keylen="+o+","+l;for(var D="0001",x="00"+h,_="",M=b-D.length-x.length,K=0;K<M;K+=2)_+="ff";var ht=D+_+x;return ht},this.hashString=function(r,l){var o=new v.crypto.MessageDigest({alg:l});return o.digestString(r)},this.hashHex=function(r,l){var o=new v.crypto.MessageDigest({alg:l});return o.digestHex(r)},this.sha1=function(r){return this.hashString(r,"sha1")},this.sha256=function(r){return this.hashString(r,"sha256")},this.sha256Hex=function(r){return this.hashHex(r,"sha256")},this.sha512=function(r){return this.hashString(r,"sha512")},this.sha512Hex=function(r){return this.hashHex(r,"sha512")},this.isKey=function(r){return r instanceof Er||r instanceof v.crypto.DSA||r instanceof v.crypto.ECDSA}},v.crypto.Util.md5=function(r){var l=new v.crypto.MessageDigest({alg:"md5",prov:"cryptojs"});return l.digestString(r)},v.crypto.Util.ripemd160=function(r){var l=new v.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"});return l.digestString(r)},v.crypto.Util.SECURERANDOMGEN=new nn,v.crypto.Util.getRandomHexOfNbytes=function(r){var l=new Array(r);return v.crypto.Util.SECURERANDOMGEN.nextBytes(l),Ai(l)},v.crypto.Util.getRandomBigIntegerOfNbytes=function(r){return new w(v.crypto.Util.getRandomHexOfNbytes(r),16)},v.crypto.Util.getRandomHexOfNbits=function(r){var l=r%8,o=(r-l)/8,h=new Array(o+1);return v.crypto.Util.SECURERANDOMGEN.nextBytes(h),h[0]=(255<<l&255^255)&h[0],Ai(h)},v.crypto.Util.getRandomBigIntegerOfNbits=function(r){return new w(v.crypto.Util.getRandomHexOfNbits(r),16)},v.crypto.Util.getRandomBigIntegerZeroToMax=function(r){for(var l=r.bitLength();;){var o=v.crypto.Util.getRandomBigIntegerOfNbits(l);if(r.compareTo(o)!=-1)return o}},v.crypto.Util.getRandomBigIntegerMinToMax=function(r,l){var o=r.compareTo(l);if(o==1)throw"biMin is greater than biMax";if(o==0)return r;var h=l.subtract(r),b=v.crypto.Util.getRandomBigIntegerZeroToMax(h);return b.add(r)},v.crypto.MessageDigest=function(r){var l=null,o=null,h=null;this.setAlgAndProvider=function(b,D){if(b=v.crypto.MessageDigest.getCanonicalAlgName(b),b!==null&&D===void 0&&(D=v.crypto.Util.DEFAULTPROVIDER[b]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(b)!=-1&&D=="cryptojs"){try{this.md=v.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[b].create()}catch(x){throw"setAlgAndProvider hash alg set fail alg="+b+"/"+x}this.updateString=function(x){this.md.update(x)},this.updateHex=function(x){var _=p.enc.Hex.parse(x);this.md.update(_)},this.digest=function(){var x=this.md.finalize();return x.toString(p.enc.Hex)},this.digestString=function(x){return this.updateString(x),this.digest()},this.digestHex=function(x){return this.updateHex(x),this.digest()}}if(":sha256:".indexOf(b)!=-1&&D=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(x){throw"setAlgAndProvider hash alg set fail alg="+b+"/"+x}this.updateString=function(x){this.md.update(x)},this.updateHex=function(x){var _=sjcl.codec.hex.toBits(x);this.md.update(_)},this.digest=function(){var x=this.md.finalize();return sjcl.codec.hex.fromBits(x)},this.digestString=function(x){return this.updateString(x),this.digest()},this.digestHex=function(x){return this.updateHex(x),this.digest()}}},this.updateString=function(b){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(b){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(b){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(b){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},r!==void 0&&r.alg!==void 0&&(this.algName=r.alg,r.prov===void 0&&(this.provName=v.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},v.crypto.MessageDigest.getCanonicalAlgName=function(r){return typeof r=="string"&&(r=r.toLowerCase(),r=r.replace(/-/,"")),r},v.crypto.MessageDigest.getHashLength=function(r){var l=v.crypto.MessageDigest,o=l.getCanonicalAlgName(r);if(l.HASHLENGTH[o]===void 0)throw"not supported algorithm: "+r;return l.HASHLENGTH[o]},v.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},v.crypto.Mac=function(r){var l=null,o=null,h=null,b=null,D=null;this.setAlgAndProvider=function(x,_){if(x=x.toLowerCase(),x==null&&(x="hmacsha1"),x=x.toLowerCase(),x.substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+x;_===void 0&&(_=v.crypto.Util.DEFAULTPROVIDER[x]),this.algProv=x+"/"+_;var M=x.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(M)!=-1&&_=="cryptojs"){try{var K=v.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[M];this.mac=p.algo.HMAC.create(K,this.pass)}catch(ht){throw"setAlgAndProvider hash alg set fail hashAlg="+M+"/"+ht}this.updateString=function(ht){this.mac.update(ht)},this.updateHex=function(ht){var mt=p.enc.Hex.parse(ht);this.mac.update(mt)},this.doFinal=function(){var ht=this.mac.finalize();return ht.toString(p.enc.Hex)},this.doFinalString=function(ht){return this.updateString(ht),this.doFinal()},this.doFinalHex=function(ht){return this.updateHex(ht),this.doFinal()}}},this.updateString=function(x){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(x){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(x){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(x){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(x){if(typeof x=="string"){var _=x;(x.length%2==1||!x.match(/^[0-9A-Fa-f]+$/))&&(_=kn(x)),this.pass=p.enc.Hex.parse(_);return}if(typeof x!="object")throw"KJUR.crypto.Mac unsupported password type: "+x;var _=null;if(x.hex!==void 0){if(x.hex.length%2!=0||!x.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+x.hex;_=x.hex}if(x.utf8!==void 0&&(_=_u(x.utf8)),x.rstr!==void 0&&(_=kn(x.rstr)),x.b64!==void 0&&(_=m(x.b64)),x.b64u!==void 0&&(_=Dn(x.b64u)),_==null)throw"KJUR.crypto.Mac unsupported password type: "+x;this.pass=p.enc.Hex.parse(_)},r!==void 0&&(r.pass!==void 0&&this.setPassword(r.pass),r.alg!==void 0&&(this.algName=r.alg,r.prov===void 0&&(this.provName=v.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},v.crypto.Signature=function(r){var l=null,o=null,h=null,b=null,D=null,x=null,_=null,M=null,K=null,ht=null,mt=-1,P=null,I=null,ut=null,T=null,ot=null;if(this._setAlgNames=function(){var Y=this.algName.match(/^(.+)with(.+)$/);Y&&(this.mdAlgName=Y[1].toLowerCase(),this.pubkeyAlgName=Y[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(Y,Ft){for(var Tt="",Jt=Ft/4-Y.length,Gt=0;Gt<Jt;Gt++)Tt=Tt+"0";return Tt+Y},this.setAlgAndProvider=function(Y,Ft){if(this._setAlgNames(),Ft!="cryptojs/jsrsa")throw new Error("provider not supported: "+Ft);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new v.crypto.MessageDigest({alg:this.mdAlgName})}catch(Tt){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+Tt)}this.init=function(Tt,Jt){var Gt=null;try{Jt===void 0?Gt=Tr.getKey(Tt):Gt=Tr.getKey(Tt,Jt)}catch(Ae){throw"init failed:"+Ae}if(Gt.isPrivate===!0)this.prvKey=Gt,this.state="SIGN";else if(Gt.isPublic===!0)this.pubKey=Gt,this.state="VERIFY";else throw"init failed.:"+Gt},this.updateString=function(Tt){this.md.updateString(Tt)},this.updateHex=function(Tt){this.md.updateHex(Tt)},this.sign=function(){if(this.sHashHex=this.md.digest(),this.prvKey===void 0&&this.ecprvhex!==void 0&&this.eccurvename!==void 0&&v.crypto.ECDSA!==void 0&&(this.prvKey=new v.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof Er&&this.pubkeyAlgName==="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof Er&&this.pubkeyAlgName==="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof v.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else if(this.prvKey instanceof v.crypto.DSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;return this.hSign},this.signString=function(Tt){return this.updateString(Tt),this.sign()},this.signHex=function(Tt){return this.updateHex(Tt),this.sign()},this.verify=function(Tt){if(this.sHashHex=this.md.digest(),this.pubKey===void 0&&this.ecpubhex!==void 0&&this.eccurvename!==void 0&&v.crypto.ECDSA!==void 0&&(this.pubKey=new v.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof Er&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,Tt,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof Er&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,Tt);if(v.crypto.ECDSA!==void 0&&this.pubKey instanceof v.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,Tt);if(v.crypto.DSA!==void 0&&this.pubKey instanceof v.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,Tt);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(Y,Ft){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(Y){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(Y){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(Y){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(Y){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(Y){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=r,r!==void 0&&(r.alg!==void 0&&(this.algName=r.alg,r.prov===void 0?this.provName=v.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=r.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),r.psssaltlen!==void 0&&(this.pssSaltLen=r.psssaltlen),r.prvkeypem!==void 0)){if(r.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{var l=Tr.getKey(r.prvkeypem);this.init(l)}catch(Y){throw"fatal error to load pem private key: "+Y}}},v.crypto.Cipher=function(r){},v.crypto.Cipher.encrypt=function(r,l,o,h){if(Fn(h,"enclag")!=null&&(o=h.encalg),typeof o=="string"&&o.substr(-4)=="-CBC"){var b=l,D=r;Fn(h,"key")!=null&&(b=h.key),Fn(h,"enc")!=null&&(hEnc=h.enc);var x=p.enc.Hex.parse(b),_=p.enc.Hex.parse(D),M=p.enc.Hex.parse(h.iv),K;if(o=="des-EDE3-CBC")K=p.TripleDES.encrypt(_,x,{iv:M});else if(o=="aes128-CBC"||o=="aes256-CBC")K=p.AES.encrypt(_,x,{iv:M});else throw new Error("unsupported algorithm: "+o);return K+""}else throw new Error("Cipher.encrypt: unsupported key or algorithm")},v.crypto.Cipher.decrypt=function(r,l,o,h){if(Fn(h,"enclag")!=null&&(o=h.encalg),typeof o=="string"&&o.substr(-4)=="-CBC"){var b=l,D=r;Fn(h,"key")!=null&&(b=h.key),Fn(h,"enc")!=null&&(D=h.enc);var x=p.enc.Hex.parse(b),_=p.enc.Hex.parse(D),M=p.enc.Hex.parse(h.iv),K;if(o=="des-EDE3-CBC")K=p.TripleDES.decrypt({ciphertext:_},x,{iv:M});else if(o=="aes128-CBC"||o=="aes256-CBC")K=p.AES.decrypt({ciphertext:_},x,{iv:M});else throw new Error("unsupported algorithm: "+o);return p.enc.Hex.stringify(K)}else throw new Error("Cipher.decrypt: unsupported key or algorithm")},v.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040022":"secp384r1","2b81040023":"secp521r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},(typeof v>"u"||!v)&&(v={}),(typeof v.crypto>"u"||!v.crypto)&&(v.crypto={}),v.crypto.ECDSA=function(r){var l="secp256r1",o=null,h=null,b=null,D=Error,x=w,_=sn,M=v.crypto.ECDSA,K=v.crypto.ECParameterDB,ht=M.getName,mt=Je,P=mt.getVbyListEx,I=mt.isASN1HEX,ut=new nn,T=null;this.type="EC",this.isPrivate=!1,this.isPublic=!1;function ot(Y,Ft,Tt,Jt){for(var Gt=Math.max(Ft.bitLength(),Jt.bitLength()),Ae=Y.add2D(Tt),De=Y.curve.getInfinity(),d=Gt-1;d>=0;--d)De=De.twice2D(),De.z=x.ONE,Ft.testBit(d)?Jt.testBit(d)?De=De.add2D(Ae):De=De.add2D(Y):Jt.testBit(d)&&(De=De.add2D(Tt));return De}this.getBigRandom=function(Y){return new x(Y.bitLength(),ut).mod(Y.subtract(x.ONE)).add(x.ONE)},this.setNamedCurve=function(Y){this.ecparams=K.getByName(Y),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=Y},this.setPrivateKeyHex=function(Y){this.isPrivate=!0,this.prvKeyHex=Y},this.setPublicKeyHex=function(Y){this.isPublic=!0,this.pubKeyHex=Y},this.getPublicKeyXYHex=function(){var Y=this.pubKeyHex;if(Y.substr(0,2)!=="04")throw"this method supports uncompressed format(04) only";var Ft=this.ecparams.keycharlen;if(Y.length!==2+Ft*2)throw"malformed public key hex length";var Tt={};return Tt.x=Y.substr(2,Ft),Tt.y=Y.substr(2+Ft),Tt},this.getShortNISTPCurveName=function(){var Y=this.curveName;return Y==="secp256r1"||Y==="NIST P-256"||Y==="P-256"||Y==="prime256v1"?"P-256":Y==="secp384r1"||Y==="NIST P-384"||Y==="P-384"?"P-384":Y==="secp521r1"||Y==="NIST P-521"||Y==="P-521"?"P-521":null},this.generateKeyPairHex=function(){var Y=this.ecparams.n,Ft=this.getBigRandom(Y),Tt=this.ecparams.keycharlen,Jt=("0000000000"+Ft.toString(16)).slice(-Tt);this.setPrivateKeyHex(Jt);var Gt=this.generatePublicKeyHex();return{ecprvhex:Jt,ecpubhex:Gt}},this.generatePublicKeyHex=function(){var Y=new x(this.prvKeyHex,16),Ft=this.ecparams.G.multiply(Y),Tt=Ft.getX().toBigInteger(),Jt=Ft.getY().toBigInteger(),Gt=this.ecparams.keycharlen,Ae=("0000000000"+Tt.toString(16)).slice(-Gt),De=("0000000000"+Jt.toString(16)).slice(-Gt),d="04"+Ae+De;return this.setPublicKeyHex(d),d},this.signWithMessageHash=function(Y){return this.signHex(Y,this.prvKeyHex)},this.signHex=function(Y,Ft){var Tt=new x(Ft,16),Jt=this.ecparams.n,Gt=new x(Y.substring(0,this.ecparams.keycharlen),16);do var Ae=this.getBigRandom(Jt),De=this.ecparams.G,d=De.multiply(Ae),B=d.getX().toBigInteger().mod(Jt);while(B.compareTo(x.ZERO)<=0);var it=Ae.modInverse(Jt).multiply(Gt.add(Tt.multiply(B))).mod(Jt);return M.biRSSigToASN1Sig(B,it)},this.sign=function(Y,Ft){var Tt=Ft,Jt=this.ecparams.n,Gt=x.fromByteArrayUnsigned(Y);do var Ae=this.getBigRandom(Jt),De=this.ecparams.G,d=De.multiply(Ae),B=d.getX().toBigInteger().mod(Jt);while(B.compareTo(w.ZERO)<=0);var it=Ae.modInverse(Jt).multiply(Gt.add(Tt.multiply(B))).mod(Jt);return this.serializeSig(B,it)},this.verifyWithMessageHash=function(Y,Ft){return this.verifyHex(Y,Ft,this.pubKeyHex)},this.verifyHex=function(Y,Ft,Tt){try{var Jt,Gt,Ae=M.parseSigHex(Ft);Jt=Ae.r,Gt=Ae.s;var De=_.decodeFromHex(this.ecparams.curve,Tt),d=new x(Y.substring(0,this.ecparams.keycharlen),16);return this.verifyRaw(d,Jt,Gt,De)}catch{return!1}},this.verify=function(Y,Ft,Tt){var Jt,Gt;if(Bitcoin.Util.isArray(Ft)){var Ae=this.parseSig(Ft);Jt=Ae.r,Gt=Ae.s}else if(typeof Ft=="object"&&Ft.r&&Ft.s)Jt=Ft.r,Gt=Ft.s;else throw"Invalid value for signature";var De;if(Tt instanceof sn)De=Tt;else if(Bitcoin.Util.isArray(Tt))De=_.decodeFrom(this.ecparams.curve,Tt);else throw"Invalid format for pubkey value, must be byte array or ECPointFp";var d=x.fromByteArrayUnsigned(Y);return this.verifyRaw(d,Jt,Gt,De)},this.verifyRaw=function(Y,Ft,Tt,Jt){var Gt=this.ecparams.n,Ae=this.ecparams.G;if(Ft.compareTo(x.ONE)<0||Ft.compareTo(Gt)>=0||Tt.compareTo(x.ONE)<0||Tt.compareTo(Gt)>=0)return!1;var De=Tt.modInverse(Gt),d=Y.multiply(De).mod(Gt),B=Ft.multiply(De).mod(Gt),it=Ae.multiply(d).add(Jt.multiply(B)),z=it.getX().toBigInteger().mod(Gt);return z.equals(Ft)},this.serializeSig=function(Y,Ft){var Tt=Y.toByteArraySigned(),Jt=Ft.toByteArraySigned(),Gt=[];return Gt.push(2),Gt.push(Tt.length),Gt=Gt.concat(Tt),Gt.push(2),Gt.push(Jt.length),Gt=Gt.concat(Jt),Gt.unshift(Gt.length),Gt.unshift(48),Gt},this.parseSig=function(Y){var Ft;if(Y[0]!=48)throw new Error("Signature not a valid DERSequence");if(Ft=2,Y[Ft]!=2)throw new Error("First element in signature must be a DERInteger");var Tt=Y.slice(Ft+2,Ft+2+Y[Ft+1]);if(Ft+=2+Y[Ft+1],Y[Ft]!=2)throw new Error("Second element in signature must be a DERInteger");var Jt=Y.slice(Ft+2,Ft+2+Y[Ft+1]);Ft+=2+Y[Ft+1];var Gt=x.fromByteArrayUnsigned(Tt),Ae=x.fromByteArrayUnsigned(Jt);return{r:Gt,s:Ae}},this.parseSigCompact=function(Y){if(Y.length!==65)throw"Signature has the wrong length";var Ft=Y[0]-27;if(Ft<0||Ft>7)throw"Invalid signature type";var Tt=this.ecparams.n,Jt=x.fromByteArrayUnsigned(Y.slice(1,33)).mod(Tt),Gt=x.fromByteArrayUnsigned(Y.slice(33,65)).mod(Tt);return{r:Jt,s:Gt,i:Ft}},this.readPKCS5PrvKeyHex=function(Y){if(I(Y)===!1)throw new Error("not ASN.1 hex string");var Ft,Tt,Jt;try{Ft=P(Y,0,["[0]",0],"06"),Tt=P(Y,0,[1],"04");try{Jt=P(Y,0,["[1]",0],"03")}catch{}}catch{throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=ht(Ft),this.curveName===void 0)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(Jt),this.setPrivateKeyHex(Tt),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(Y){if(I(Y)===!1)throw new D("not ASN.1 hex string");var Ft,Tt,Jt,Gt;try{Ft=P(Y,0,[1,0],"06"),Tt=P(Y,0,[1,1],"06"),Jt=P(Y,0,[2,0,1],"04");try{Gt=P(Y,0,[2,0,"[1]",0],"03")}catch{}}catch{throw new D("malformed PKCS#8 plain ECC private key")}if(this.curveName=ht(Tt),this.curveName===void 0)throw new D("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(Gt),this.setPrivateKeyHex(Jt),this.isPublic=!1},this.readPKCS8PubKeyHex=function(Y){if(I(Y)===!1)throw new D("not ASN.1 hex string");var Ft,Tt,Jt;try{Ft=P(Y,0,[0,0],"06"),Tt=P(Y,0,[0,1],"06"),Jt=P(Y,0,[1],"03")}catch{throw new D("malformed PKCS#8 ECC public key")}if(this.curveName=ht(Tt),this.curveName===null)throw new D("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(Jt)},this.readCertPubKeyHex=function(Y,Ft){if(I(Y)===!1)throw new D("not ASN.1 hex string");var Tt,Jt;try{Tt=P(Y,0,[0,5,0,1],"06"),Jt=P(Y,0,[0,5,1],"03")}catch{throw new D("malformed X.509 certificate ECC public key")}if(this.curveName=ht(Tt),this.curveName===null)throw new D("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(Jt)},r!==void 0&&r.curve!==void 0&&(this.curveName=r.curve),this.curveName===void 0&&(this.curveName=l),this.setNamedCurve(this.curveName),r!==void 0&&(r.prv!==void 0&&this.setPrivateKeyHex(r.prv),r.pub!==void 0&&this.setPublicKeyHex(r.pub))},v.crypto.ECDSA.parseSigHex=function(r){var l=v.crypto.ECDSA.parseSigHexInHexRS(r),o=new w(l.r,16),h=new w(l.s,16);return{r:o,s:h}},v.crypto.ECDSA.parseSigHexInHexRS=function(r){var l=Je,o=l.getChildIdx,h=l.getV;if(l.checkStrictDER(r,0),r.substr(0,2)!="30")throw new Error("signature is not a ASN.1 sequence");var b=o(r,0);if(b.length!=2)throw new Error("signature shall have two elements");var D=b[0],x=b[1];if(r.substr(D,2)!="02")throw new Error("1st item not ASN.1 integer");if(r.substr(x,2)!="02")throw new Error("2nd item not ASN.1 integer");var _=h(r,D),M=h(r,x);return{r:_,s:M}},v.crypto.ECDSA.asn1SigToConcatSig=function(r){var l=v.crypto.ECDSA.parseSigHexInHexRS(r),o=l.r,h=l.s;if(o.length>=130&&o.length<=134){if(o.length%2!=0)throw Error("unknown ECDSA sig r length error");if(h.length%2!=0)throw Error("unknown ECDSA sig s length error");o.substr(0,2)=="00"&&(o=o.substr(2)),h.substr(0,2)=="00"&&(h=h.substr(2));var b=Math.max(o.length,h.length);return o=("000000"+o).slice(-b),h=("000000"+h).slice(-b),o+h}if(o.substr(0,2)=="00"&&o.length%32==2&&(o=o.substr(2)),h.substr(0,2)=="00"&&h.length%32==2&&(h=h.substr(2)),o.length%32==30&&(o="00"+o),h.length%32==30&&(h="00"+h),o.length%32!=0)throw Error("unknown ECDSA sig r length error");if(h.length%32!=0)throw Error("unknown ECDSA sig s length error");return o+h},v.crypto.ECDSA.concatSigToASN1Sig=function(r){if(r.length%4!=0)throw Error("unknown ECDSA concatinated r-s sig length error");var l=r.substr(0,r.length/2),o=r.substr(r.length/2);return v.crypto.ECDSA.hexRSSigToASN1Sig(l,o)},v.crypto.ECDSA.hexRSSigToASN1Sig=function(r,l){var o=new w(r,16),h=new w(l,16);return v.crypto.ECDSA.biRSSigToASN1Sig(o,h)},v.crypto.ECDSA.biRSSigToASN1Sig=function(r,l){var o=v.asn1,h=new o.DERInteger({bigint:r}),b=new o.DERInteger({bigint:l}),D=new o.DERSequence({array:[h,b]});return D.tohex()},v.crypto.ECDSA.getName=function(r){return r==="2b8104001f"?"secp192k1":r==="2a8648ce3d030107"?"secp256r1":r==="2b8104000a"?"secp256k1":r==="2b81040021"?"secp224r1":r==="2b81040022"?"secp384r1":r==="2b81040023"?"secp521r1":"|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(r)!==-1?"secp256r1":"|secp256k1|".indexOf(r)!==-1?"secp256k1":"|secp224r1|NIST P-224|P-224|".indexOf(r)!==-1?"secp224r1":"|secp384r1|NIST P-384|P-384|".indexOf(r)!==-1?"secp384r1":"|secp521r1|NIST P-521|P-521|".indexOf(r)!==-1?"secp521r1":null},(typeof v>"u"||!v)&&(v={}),(typeof v.crypto>"u"||!v.crypto)&&(v.crypto={}),v.crypto.ECParameterDB=new function(){var r={},l={};function o(h){return new w(h,16)}this.getByName=function(h){var b=h;if(typeof l[b]<"u"&&(b=l[h]),typeof r[b]<"u")return r[b];throw"unregistered EC curve name: "+b},this.regist=function(h,b,D,x,_,M,K,ht,mt,P,I,ut){r[h]={};var T=o(D),ot=o(x),Y=o(_),Ft=o(M),Tt=o(K),Jt=new Yn(T,ot,Y),Gt=Jt.decodePointHex("04"+ht+mt);r[h].name=h,r[h].keylen=b,r[h].keycharlen=Math.ceil(b/8)*2,r[h].curve=Jt,r[h].G=Gt,r[h].n=Ft,r[h].h=Tt,r[h].oid=I,r[h].info=ut;for(var Ae=0;Ae<P.length;Ae++)l[P[Ae]]=h}},v.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),v.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),v.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),v.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),v.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),v.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),v.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),v.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),v.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),v.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","00C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]),(typeof v>"u"||!v)&&(v={}),(typeof v.crypto>"u"||!v.crypto)&&(v.crypto={}),v.crypto.DSA=function(){var r=Je,l=r.getVbyList,o=r.getVbyListEx,h=r.isASN1HEX,b=w;this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(D,x,_,M,K){this.isPrivate=!0,this.p=D,this.q=x,this.g=_,this.y=M,this.x=K},this.setPrivateHex=function(D,x,_,M,K){var ht,mt,P,I,ut;ht=new w(D,16),mt=new w(x,16),P=new w(_,16),typeof M=="string"&&M.length>1?I=new w(M,16):I=null,ut=new w(K,16),this.setPrivate(ht,mt,P,I,ut)},this.setPublic=function(D,x,_,M){this.isPublic=!0,this.p=D,this.q=x,this.g=_,this.y=M,this.x=null},this.setPublicHex=function(D,x,_,M){var K,ht,mt,P;K=new w(D,16),ht=new w(x,16),mt=new w(_,16),P=new w(M,16),this.setPublic(K,ht,mt,P)},this.signWithMessageHash=function(D){var x=this.p,_=this.q,M=this.g,K=this.y,ht=this.x,mt=v.crypto.Util.getRandomBigIntegerMinToMax(w.ONE.add(w.ONE),_.subtract(w.ONE)),P=D.substr(0,_.bitLength()/4),I=new w(P,16),ut=M.modPow(mt,x).mod(_),T=mt.modInverse(_).multiply(I.add(ht.multiply(ut))).mod(_),ot=v.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:ut}},{int:{bigint:T}}]});return ot},this.verifyWithMessageHash=function(D,x){var _=this.p,M=this.q,K=this.g,ht=this.y,mt=this.parseASN1Signature(x),P=mt[0],I=mt[1],ut=D.substr(0,M.bitLength()/4),T=new w(ut,16);if(w.ZERO.compareTo(P)>0||P.compareTo(M)>0||w.ZERO.compareTo(I)>=0||I.compareTo(M)>0)throw"invalid DSA signature";var ot=I.modInverse(M),Y=T.multiply(ot).mod(M),Ft=P.multiply(ot).mod(M),Tt=K.modPow(Y,_).multiply(ht.modPow(Ft,_)).mod(_).mod(M);return Tt.compareTo(P)==0},this.parseASN1Signature=function(D){try{var x=new b(o(D,0,[0],"02"),16),_=new b(o(D,0,[1],"02"),16);return[x,_]}catch{throw new Error("malformed ASN.1 DSA signature")}},this.readPKCS5PrvKeyHex=function(D){var x,_,M,K,ht;if(h(D)===!1)throw new Error("not ASN.1 hex string");try{x=o(D,0,[1],"02"),_=o(D,0,[2],"02"),M=o(D,0,[3],"02"),K=o(D,0,[4],"02"),ht=o(D,0,[5],"02")}catch{throw new Error("malformed PKCS#1/5 plain DSA private key")}this.setPrivateHex(x,_,M,K,ht)},this.readPKCS8PrvKeyHex=function(D){var x,_,M,K;if(h(D)===!1)throw new Error("not ASN.1 hex string");try{x=o(D,0,[1,1,0],"02"),_=o(D,0,[1,1,1],"02"),M=o(D,0,[1,1,2],"02"),K=o(D,0,[2,0],"02")}catch{throw new Error("malformed PKCS#8 plain DSA private key")}this.setPrivateHex(x,_,M,null,K)},this.readPKCS8PubKeyHex=function(D){var x,_,M,K;if(h(D)===!1)throw new Error("not ASN.1 hex string");try{x=o(D,0,[0,1,0],"02"),_=o(D,0,[0,1,1],"02"),M=o(D,0,[0,1,2],"02"),K=o(D,0,[1,0],"02")}catch{throw new Error("malformed PKCS#8 DSA public key")}this.setPublicHex(x,_,M,K)},this.readCertPubKeyHex=function(D,x){var _,M,K,ht;if(h(D)===!1)throw new Error("not ASN.1 hex string");try{_=o(D,0,[0,5,0,1,0],"02"),M=o(D,0,[0,5,0,1,1],"02"),K=o(D,0,[0,5,0,1,2],"02"),ht=o(D,0,[0,5,1,0],"02")}catch{throw new Error("malformed X.509 certificate DSA public key")}this.setPublicHex(_,M,K,ht)}};var Tr=(function(){var r=function(T,ot,Y){return h(p.AES,T,ot,Y)},l=function(T,ot,Y){return h(p.TripleDES,T,ot,Y)},o=function(T,ot,Y){return h(p.DES,T,ot,Y)},h=function(T,ot,Y,Ft){var Tt=p.enc.Hex.parse(ot),Jt=p.enc.Hex.parse(Y),Gt=p.enc.Hex.parse(Ft),Ae={};Ae.key=Jt,Ae.iv=Gt,Ae.ciphertext=Tt;var De=T.decrypt(Ae,Jt,{iv:Gt});return p.enc.Hex.stringify(De)},b=function(T,ot,Y){return _(p.AES,T,ot,Y)},D=function(T,ot,Y){return _(p.TripleDES,T,ot,Y)},x=function(T,ot,Y){return _(p.DES,T,ot,Y)},_=function(T,ot,Y,Ft){var Tt=p.enc.Hex.parse(ot),Jt=p.enc.Hex.parse(Y),Gt=p.enc.Hex.parse(Ft),Ae=T.encrypt(Tt,Jt,{iv:Gt}),De=p.enc.Hex.parse(Ae.toString()),d=p.enc.Base64.stringify(De);return d},M={"AES-256-CBC":{proc:r,eproc:b,keylen:32,ivlen:16},"AES-192-CBC":{proc:r,eproc:b,keylen:24,ivlen:16},"AES-128-CBC":{proc:r,eproc:b,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:l,eproc:D,keylen:24,ivlen:8},"DES-CBC":{proc:o,eproc:x,keylen:8,ivlen:8}},K=function(T){return M[T].proc},ht=function(T){var ot=p.lib.WordArray.random(T),Y=p.enc.Hex.stringify(ot);return Y},mt=function(T){var ot={},Y=T.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));Y&&(ot.cipher=Y[1],ot.ivsalt=Y[2]);var Ft=T.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));Ft&&(ot.type=Ft[1]);var Tt=-1,Jt=0;T.indexOf(`\r
\r
`)!=-1&&(Tt=T.indexOf(`\r
\r
`),Jt=2),T.indexOf(`

`)!=-1&&(Tt=T.indexOf(`

`),Jt=1);var Gt=T.indexOf("-----END");if(Tt!=-1&&Gt!=-1){var Ae=T.substring(Tt+Jt*2,Gt-Jt);Ae=Ae.replace(/\s+/g,""),ot.data=Ae}return ot},P=function(T,ot,Y){for(var Ft=Y.substring(0,16),Tt=p.enc.Hex.parse(Ft),Jt=p.enc.Utf8.parse(ot),Gt=M[T].keylen+M[T].ivlen,Ae="",De=null;;){var d=p.algo.MD5.create();if(De!=null&&d.update(De),d.update(Jt),d.update(Tt),De=d.finalize(),Ae=Ae+p.enc.Hex.stringify(De),Ae.length>=Gt*2)break}var B={};return B.keyhex=Ae.substr(0,M[T].keylen*2),B.ivhex=Ae.substr(M[T].keylen*2,M[T].ivlen*2),B},I=function(T,ot,Y,Ft){var Tt=p.enc.Base64.parse(T),Jt=p.enc.Hex.stringify(Tt),Gt=M[ot].proc,Ae=Gt(Jt,Y,Ft);return Ae},ut=function(T,ot,Y,Ft){var Tt=M[ot].eproc,Jt=Tt(T,Y,Ft);return Jt};return{version:"1.0.0",parsePKCS5PEM:function(T){return mt(T)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(T,ot,Y){return P(T,ot,Y)},decryptKeyB64:function(T,ot,Y,Ft){return I(T,ot,Y,Ft)},getDecryptedKeyHex:function(T,ot){var Y=mt(T),Ft=Y.type,Tt=Y.cipher,Jt=Y.ivsalt,Gt=Y.data,Ae=P(Tt,ot,Jt),De=Ae.keyhex,d=I(Gt,Tt,De,Jt);return d},getEncryptedPKCS5PEMFromPrvKeyHex:function(T,ot,Y,Ft,Tt){var it="";if((typeof Ft>"u"||Ft==null)&&(Ft="AES-256-CBC"),typeof M[Ft]>"u")throw new Error("KEYUTIL unsupported algorithm: "+Ft);if(typeof Tt>"u"||Tt==null){var Jt=M[Ft].ivlen,Gt=ht(Jt);Tt=Gt.toUpperCase()}var Ae=P(Ft,Y,Tt),De=Ae.keyhex,d=ut(ot,Ft,De,Tt),B=d.replace(/(.{64})/g,`$1\r
`),it="-----BEGIN "+T+` PRIVATE KEY-----\r
`;return it+=`Proc-Type: 4,ENCRYPTED\r
`,it+="DEK-Info: "+Ft+","+Tt+`\r
`,it+=`\r
`,it+=B,it+=`\r
-----END `+T+` PRIVATE KEY-----\r
`,it},getEncryptedPKCS8PEM:function(T,ot,Y){var Ft=this.getEncryptedPKCS8Hex(T,ot,Y);return Pe(Ft,"ENCRYPTED PRIVATE KEY")},getEncryptedPKCS8Hex:function(T,ot,Y){var Ft;Y==null||Y==null?Ft={}:Ft=JSON.parse(JSON.stringify(Y)),Ft.plain=T,this.initPBES2Param(Ft),this.encryptPBES2Param(Ft,ot);var Tt=this.generatePBES2ASN1Param(Ft);return v.asn1.ASN1Util.newObject(Tt).tohex()},initPBES2Param:function(T){if(Fn(T,"encalg")==null&&(T.encalg="aes256-CBC"),Fn(T,"iter")==null&&(T.iter=2048),Fn(T,"prf")==null&&(T.prf="hmacWithSHA256"),Fn(T,"salt")==null&&(T.salt=p.enc.Hex.stringify(p.lib.WordArray.random(8))),Fn(T,"enciv")==null){var ot;T.encalg=="des-EDE3-CBC"&&(ot=8),T.encalg=="aes128-CBC"&&(ot=16),T.encalg=="aes256-CBC"&&(ot=16),T.enciv=p.enc.Hex.stringify(p.lib.WordArray.random(ot))}},encryptPBES2Param:function(T,ot){var Y=Tr.getDKFromPBES2Param(T,ot);try{var Ft=v.crypto.Cipher.encrypt(T.plain,Y,T.encalg,{iv:T.enciv})}catch{throw new Error("encrypt error: "+T.plain+" "+Y+" "+T.encalg+" "+T.enciv)}T.enc=Ft},generatePBES2ASN1Param:function(T){var ot={seq:[{seq:[{oid:"pkcs5PBES2"},{seq:[{seq:[{oid:"pkcs5PBKDF2"},{seq:[{octstr:{hex:T.salt}},{int:{hex:Le(T.iter)}}]}]},{seq:[{oid:T.encalg},{octstr:{hex:T.enciv}}]}]}]},{octstr:{hex:T.enc}}]};return T.prf!="hmacWithSHA1"&&ot.seq[0].seq[1].seq[0].seq[1].seq.push({seq:[{oid:T.prf},{null:""}]}),ot},parseHexOfEncryptedPKCS8:function(T){var ot=Je,Y=ot.getChildIdx,Ft=ot.getV,Tt={},Jt=Y(T,0);if(Jt.length!=2)throw new Error("malformed format: SEQUENCE(0).items != 2: "+Jt.length);Tt.ciphertext=Ft(T,Jt[1]);var Gt=Y(T,Jt[0]);if(Gt.length!=2)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+Gt.length);if(Ft(T,Gt[0])!="2a864886f70d01050d")throw new Error("this only supports pkcs5PBES2");var Ae=Y(T,Gt[1]);if(Gt.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+Ae.length);var De=Y(T,Ae[1]);if(De.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+De.length);if(Ft(T,De[0])!="2a864886f70d0307")throw"this only supports TripleDES";Tt.encryptionSchemeAlg="TripleDES",Tt.encryptionSchemeIV=Ft(T,De[1]);var d=Y(T,Ae[0]);if(d.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+d.length);if(Ft(T,d[0])!="2a864886f70d01050c")throw new Error("this only supports pkcs5PBKDF2");var B=Y(T,d[1]);if(B.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+B.length);Tt.pbkdf2Salt=Ft(T,B[0]);var it=Ft(T,B[1]);try{Tt.pbkdf2Iter=parseInt(it,16)}catch{throw new Error("malformed format pbkdf2Iter: "+it)}return Tt},getPBKDF2KeyHexFromParam:function(T,ot){var Y=p.enc.Hex.parse(T.pbkdf2Salt),Ft=T.pbkdf2Iter,Tt=p.PBKDF2(ot,Y,{keySize:192/32,iterations:Ft}),Jt=p.enc.Hex.stringify(Tt);return Jt},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(T,ot){var Y=On(T,"ENCRYPTED PRIVATE KEY"),Ft=this.parseHexOfEncryptedPKCS8(Y),Tt=Tr.getPBKDF2KeyHexFromParam(Ft,ot),Jt={};Jt.ciphertext=p.enc.Hex.parse(Ft.ciphertext);var Gt=p.enc.Hex.parse(Tt),Ae=p.enc.Hex.parse(Ft.encryptionSchemeIV),De=p.TripleDES.decrypt(Jt,Gt,{iv:Ae}),d=p.enc.Hex.stringify(De);return d},parsePBES2:function(T){var ot=Je.parse(T);if(Fn(ot,"seq.0.seq.0.oid")!="pkcs5PBES2"||Fn(ot,"seq.0.seq.1.seq.0.seq.0.oid")!="pkcs5PBKDF2")throw new Error("not pkcs5PBES2 and pkcs5PBKDF2 used");var Y=Fn(ot,"seq.0.seq.1.seq.0.seq.1.seq");if(Y==null)throw new Error("PBKDF2 parameter not found");var Ft=Fn(Y,"0.octstr.hex"),Tt=Fn(Y,"1.int.hex"),Jt=Fn(Y,"2.seq.0.oid","hmacWithSHA1"),Gt=-1;try{Gt=parseInt(Tt,16)}catch{throw new Error("iter not proper value")}var Ae=Fn(ot,"seq.0.seq.1.seq.1.seq.0.oid"),De=Fn(ot,"seq.0.seq.1.seq.1.seq.1.octstr.hex"),d=Fn(ot,"seq.1.octstr.hex");if(Ae==null||De==null||d==null)throw new Error("encalg, enciv or enc is undefined");var B={salt:Ft,iter:Gt,prf:Jt,encalg:Ae,enciv:De,enc:d};return B},getDKFromPBES2Param:function(T,ot){var Y={hmacWithSHA1:p.algo.SHA1,hmacWithSHA224:p.algo.SHA224,hmacWithSHA256:p.algo.SHA256,hmacWithSHA384:p.algo.SHA384,hmacWithSHA512:p.algo.SHA512},Ft={"des-EDE3-CBC":192/32,"aes128-CBC":128/32,"aes256-CBC":256/32},Tt=Y[T.prf];if(Tt==null)throw new Error("unsupported prf");var Jt=Ft[T.encalg];if(Jt==null)throw new Error("unsupported encalg");var Gt=p.enc.Hex.parse(T.salt),Ae=T.iter;try{var De=p.PBKDF2(ot,Gt,{keySize:Jt,iterations:Ae,hasher:Tt});return p.enc.Hex.stringify(De)}catch(d){throw new Error("PBKDF2 error: "+d+" "+JSON.stringify(T)+" "+ot)}},getPlainHexFromEncryptedPKCS8PEM:function(T,ot){if(T.indexOf("BEGIN ENCRYPTED PRIVATE KEY")==-1)throw new Error("not Encrypted PKCS#8 PEM string");var Y=On(T),Ft;try{Ft=Tr.parsePBES2(Y)}catch(Jt){throw new Error("malformed PBES2 format: "+Jt.message)}var Tt=Tr.getDKFromPBES2Param(Ft,ot);return v.crypto.Cipher.decrypt(Ft.enc,Tt,Ft.encalg,{iv:Ft.enciv})},getKeyFromEncryptedPKCS8PEM:function(T,ot){var Y=this.getPlainHexFromEncryptedPKCS8PEM(T,ot),Ft=this.getKeyFromPlainPrivatePKCS8Hex(Y);return Ft},parsePlainPrivatePKCS8Hex:function(T){var ot=Je,Y=ot.getChildIdx,Ft=ot.getV,Tt={};if(Tt.algparam=null,T.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var Jt=Y(T,0);if(Jt.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(T.substr(Jt[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var Gt=Y(T,Jt[1]);if(Gt.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(T.substr(Gt[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if(Tt.algoid=Ft(T,Gt[0]),T.substr(Gt[1],2)=="06"&&(Tt.algparam=Ft(T,Gt[1])),T.substr(Jt[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return Tt.keyidx=ot.getVidx(T,Jt[2]),Tt},getKeyFromPlainPrivatePKCS8PEM:function(T){var ot=On(T,"PRIVATE KEY"),Y=this.getKeyFromPlainPrivatePKCS8Hex(ot);return Y},getKeyFromPlainPrivatePKCS8Hex:function(T){var ot=this.parsePlainPrivatePKCS8Hex(T),Y;if(ot.algoid=="2a864886f70d010101")Y=new Er;else if(ot.algoid=="2a8648ce380401")Y=new v.crypto.DSA;else if(ot.algoid=="2a8648ce3d0201")Y=new v.crypto.ECDSA;else throw new Error("unsupported private key algorithm");return Y.readPKCS8PrvKeyHex(T),Y},_getKeyFromPublicPKCS8Hex:function(T){var ot,Y=Je.getVbyList(T,0,[0,0],"06");if(Y==="2a864886f70d010101")ot=new Er;else if(Y==="2a8648ce380401")ot=new v.crypto.DSA;else if(Y==="2a8648ce3d0201")ot=new v.crypto.ECDSA;else throw new Error("unsupported PKCS#8 public key hex");return ot.readPKCS8PubKeyHex(T),ot},parsePublicRawRSAKeyHex:function(T){var ot=Je,Y=ot.getChildIdx,Ft=ot.getV,Tt={};if(T.substr(0,2)!="30")throw new Error("malformed RSA key(code:001)");var Jt=Y(T,0);if(Jt.length!=2)throw new Error("malformed RSA key(code:002)");if(T.substr(Jt[0],2)!="02")throw new Error("malformed RSA key(code:003)");if(Tt.n=Ft(T,Jt[0]),T.substr(Jt[1],2)!="02")throw new Error("malformed RSA key(code:004)");return Tt.e=Ft(T,Jt[1]),Tt},parsePublicPKCS8Hex:function(T){var ot=Je,Y=ot.getChildIdx,Ft=ot.getV,Tt={};Tt.algparam=null;var Jt=Y(T,0);if(Jt.length!=2)throw new Error("outer DERSequence shall have 2 elements: "+Jt.length);var Gt=Jt[0];if(T.substr(Gt,2)!="30")throw new Error("malformed PKCS8 public key(code:001)");var Ae=Y(T,Gt);if(Ae.length!=2)throw new Error("malformed PKCS8 public key(code:002)");if(T.substr(Ae[0],2)!="06")throw new Error("malformed PKCS8 public key(code:003)");if(Tt.algoid=Ft(T,Ae[0]),T.substr(Ae[1],2)=="06"?Tt.algparam=Ft(T,Ae[1]):T.substr(Ae[1],2)=="30"&&(Tt.algparam={},Tt.algparam.p=ot.getVbyList(T,Ae[1],[0],"02"),Tt.algparam.q=ot.getVbyList(T,Ae[1],[1],"02"),Tt.algparam.g=ot.getVbyList(T,Ae[1],[2],"02")),T.substr(Jt[1],2)!="03")throw new Error("malformed PKCS8 public key(code:004)");return Tt.key=Ft(T,Jt[1]).substr(2),Tt}}})();Tr.getKey=function(r,l,o){var h=Je,b=h.getChildIdx,D=h.getV,x=h.getVbyList,_=v.crypto,M=_.ECDSA,K=_.DSA,ht=Er,mt=On,P=Tr;if(typeof ht<"u"&&r instanceof ht||typeof M<"u"&&r instanceof M||typeof K<"u"&&r instanceof K)return r;if(r.curve!==void 0&&r.xy!==void 0&&r.d===void 0)return new M({pub:r.xy,curve:r.curve});if(r.curve!==void 0&&r.d!==void 0)return new M({prv:r.d,curve:r.curve});if(r.kty===void 0&&r.n!==void 0&&r.e!==void 0&&r.d===void 0){var I=new ht;return I.setPublic(r.n,r.e),I}if(r.kty===void 0&&r.n!==void 0&&r.e!==void 0&&r.d!==void 0&&r.p!==void 0&&r.q!==void 0&&r.dp!==void 0&&r.dq!==void 0&&r.co!==void 0&&r.qi===void 0){var I=new ht;return I.setPrivateEx(r.n,r.e,r.d,r.p,r.q,r.dp,r.dq,r.co),I}if(r.kty===void 0&&r.n!==void 0&&r.e!==void 0&&r.d!==void 0&&r.p===void 0){var I=new ht;return I.setPrivate(r.n,r.e,r.d),I}if(r.p!==void 0&&r.q!==void 0&&r.g!==void 0&&r.y!==void 0&&r.x===void 0){var I=new K;return I.setPublic(r.p,r.q,r.g,r.y),I}if(r.p!==void 0&&r.q!==void 0&&r.g!==void 0&&r.y!==void 0&&r.x!==void 0){var I=new K;return I.setPrivate(r.p,r.q,r.g,r.y,r.x),I}if(r.kty==="RSA"&&r.n!==void 0&&r.e!==void 0&&r.d===void 0){var I=new ht;return I.setPublic(Dn(r.n),Dn(r.e)),I}if(r.kty==="RSA"&&r.n!==void 0&&r.e!==void 0&&r.d!==void 0&&r.p!==void 0&&r.q!==void 0&&r.dp!==void 0&&r.dq!==void 0&&r.qi!==void 0){var I=new ht;return I.setPrivateEx(Dn(r.n),Dn(r.e),Dn(r.d),Dn(r.p),Dn(r.q),Dn(r.dp),Dn(r.dq),Dn(r.qi)),I}if(r.kty==="RSA"&&r.n!==void 0&&r.e!==void 0&&r.d!==void 0){var I=new ht;return I.setPrivate(Dn(r.n),Dn(r.e),Dn(r.d)),I}if(r.kty==="EC"&&r.crv!==void 0&&r.x!==void 0&&r.y!==void 0&&r.d===void 0){var ut=new M({curve:r.crv}),T=ut.ecparams.keycharlen,ot=("0000000000"+Dn(r.x)).slice(-T),Y=("0000000000"+Dn(r.y)).slice(-T),Ft="04"+ot+Y;return ut.setPublicKeyHex(Ft),ut}if(r.kty==="EC"&&r.crv!==void 0&&r.x!==void 0&&r.y!==void 0&&r.d!==void 0){var ut=new M({curve:r.crv}),T=ut.ecparams.keycharlen,ot=("0000000000"+Dn(r.x)).slice(-T),Y=("0000000000"+Dn(r.y)).slice(-T),Ft="04"+ot+Y,Tt=("0000000000"+Dn(r.d)).slice(-T);return ut.setPublicKeyHex(Ft),ut.setPrivateKeyHex(Tt),ut}if(o==="pkcs5prv"){var Jt=r,h=Je,Gt,I;if(Gt=b(Jt,0),Gt.length===9)I=new ht,I.readPKCS5PrvKeyHex(Jt);else if(Gt.length===6)I=new K,I.readPKCS5PrvKeyHex(Jt);else if(Gt.length>2&&Jt.substr(Gt[1],2)==="04")I=new M,I.readPKCS5PrvKeyHex(Jt);else throw new Error("unsupported PKCS#1/5 hexadecimal key");return I}if(o==="pkcs8prv"){var I=P.getKeyFromPlainPrivatePKCS8Hex(r);return I}if(o==="pkcs8pub")return P._getKeyFromPublicPKCS8Hex(r);if(o==="x509pub")return nr.getPublicKeyFromCertHex(r);if(r.indexOf("-END CERTIFICATE-",0)!=-1||r.indexOf("-END X509 CERTIFICATE-",0)!=-1||r.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return nr.getPublicKeyFromCertPEM(r);if(r.indexOf("-END PUBLIC KEY-")!=-1){var Ae=On(r,"PUBLIC KEY");return P._getKeyFromPublicPKCS8Hex(Ae)}if(r.indexOf("-END RSA PRIVATE KEY-")!=-1&&r.indexOf("4,ENCRYPTED")==-1){var De=mt(r,"RSA PRIVATE KEY");return P.getKey(De,null,"pkcs5prv")}if(r.indexOf("-END DSA PRIVATE KEY-")!=-1&&r.indexOf("4,ENCRYPTED")==-1){var d=mt(r,"DSA PRIVATE KEY"),B=x(d,0,[1],"02"),it=x(d,0,[2],"02"),z=x(d,0,[3],"02"),St=x(d,0,[4],"02"),qt=x(d,0,[5],"02"),I=new K;return I.setPrivate(new w(B,16),new w(it,16),new w(z,16),new w(St,16),new w(qt,16)),I}if(r.indexOf("-END EC PRIVATE KEY-")!=-1&&r.indexOf("4,ENCRYPTED")==-1){var De=mt(r,"EC PRIVATE KEY");return P.getKey(De,null,"pkcs5prv")}if(r.indexOf("-END PRIVATE KEY-")!=-1)return P.getKeyFromPlainPrivatePKCS8PEM(r);if(r.indexOf("-END RSA PRIVATE KEY-")!=-1&&r.indexOf("4,ENCRYPTED")!=-1){var ee=P.getDecryptedKeyHex(r,l),ie=new Er;return ie.readPKCS5PrvKeyHex(ee),ie}if(r.indexOf("-END EC PRIVATE KEY-")!=-1&&r.indexOf("4,ENCRYPTED")!=-1){var d=P.getDecryptedKeyHex(r,l),I=x(d,0,[1],"04"),ye=x(d,0,[2,0],"06"),$e=x(d,0,[3,0],"03").substr(2),Fr="";if(v.crypto.OID.oidhex2name[ye]!==void 0)Fr=v.crypto.OID.oidhex2name[ye];else throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+ye);var ut=new M({curve:Fr});return ut.setPublicKeyHex($e),ut.setPrivateKeyHex(I),ut.isPublic=!1,ut}if(r.indexOf("-END DSA PRIVATE KEY-")!=-1&&r.indexOf("4,ENCRYPTED")!=-1){var d=P.getDecryptedKeyHex(r,l),B=x(d,0,[1],"02"),it=x(d,0,[2],"02"),z=x(d,0,[3],"02"),St=x(d,0,[4],"02"),qt=x(d,0,[5],"02"),I=new K;return I.setPrivate(new w(B,16),new w(it,16),new w(z,16),new w(St,16),new w(qt,16)),I}if(r.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return P.getKeyFromEncryptedPKCS8PEM(r,l);throw new Error("not supported argument")},Tr.generateKeypair=function(r,l){if(r=="RSA"){var o=l,h=new Er;h.generate(o,"10001"),h.isPrivate=!0,h.isPublic=!0;var b=new Er,D=h.n.toString(16),x=h.e.toString(16);b.setPublic(D,x),b.isPrivate=!1,b.isPublic=!0;var _={};return _.prvKeyObj=h,_.pubKeyObj=b,_}else if(r=="EC"){var M=l,K=new v.crypto.ECDSA({curve:M}),ht=K.generateKeyPairHex(),h=new v.crypto.ECDSA({curve:M});h.setPublicKeyHex(ht.ecpubhex),h.setPrivateKeyHex(ht.ecprvhex),h.isPrivate=!0,h.isPublic=!1;var b=new v.crypto.ECDSA({curve:M});b.setPublicKeyHex(ht.ecpubhex),b.isPrivate=!1,b.isPublic=!0;var _={};return _.prvKeyObj=h,_.pubKeyObj=b,_}else throw new Error("unknown algorithm: "+r)},Tr.getPEM=function(r,l,o,h,b,D){var x=v,_=x.asn1,M=_.DERObjectIdentifier,K=_.DERInteger,ht=_.ASN1Util.newObject,mt=_.x509,P=mt.SubjectPublicKeyInfo,I=x.crypto,ut=I.DSA,T=I.ECDSA,ot=Er;function Y(ie){var ye=ht({seq:[{int:0},{int:{bigint:ie.n}},{int:ie.e},{int:{bigint:ie.d}},{int:{bigint:ie.p}},{int:{bigint:ie.q}},{int:{bigint:ie.dmp1}},{int:{bigint:ie.dmq1}},{int:{bigint:ie.coeff}}]});return ye}function Ft(ie){var ye=ht({seq:[{int:1},{octstr:{hex:ie.prvKeyHex}},{tag:["a0",!0,{oid:{name:ie.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+ie.pubKeyHex}}]}]});return ye}function Tt(ie){var ye=ht({seq:[{int:0},{int:{bigint:ie.p}},{int:{bigint:ie.q}},{int:{bigint:ie.g}},{int:{bigint:ie.y}},{int:{bigint:ie.x}}]});return ye}if((ot!==void 0&&r instanceof ot||ut!==void 0&&r instanceof ut||T!==void 0&&r instanceof T)&&r.isPublic==!0&&(l===void 0||l=="PKCS8PUB")){var Jt=new P(r),Gt=Jt.tohex();return Pe(Gt,"PUBLIC KEY")}if(l=="PKCS1PRV"&&ot!==void 0&&r instanceof ot&&(o===void 0||o==null)&&r.isPrivate==!0){var Jt=Y(r),Gt=Jt.tohex();return Pe(Gt,"RSA PRIVATE KEY")}if(l=="PKCS1PRV"&&T!==void 0&&r instanceof T&&(o===void 0||o==null)&&r.isPrivate==!0){var Ae=new M({name:r.curveName}),De=Ae.tohex(),d=Ft(r),B=d.tohex(),it="";return it+=Pe(De,"EC PARAMETERS"),it+=Pe(B,"EC PRIVATE KEY"),it}if(l=="PKCS1PRV"&&ut!==void 0&&r instanceof ut&&(o===void 0||o==null)&&r.isPrivate==!0){var Jt=Tt(r),Gt=Jt.tohex();return Pe(Gt,"DSA PRIVATE KEY")}if(l=="PKCS5PRV"&&ot!==void 0&&r instanceof ot&&o!==void 0&&o!=null&&r.isPrivate==!0){var Jt=Y(r),Gt=Jt.tohex();return h===void 0&&(h="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",Gt,o,h,D)}if(l=="PKCS5PRV"&&T!==void 0&&r instanceof T&&o!==void 0&&o!=null&&r.isPrivate==!0){var Jt=Ft(r),Gt=Jt.tohex();return h===void 0&&(h="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",Gt,o,h,D)}if(l=="PKCS5PRV"&&ut!==void 0&&r instanceof ut&&o!==void 0&&o!=null&&r.isPrivate==!0){var Jt=Tt(r),Gt=Jt.tohex();return h===void 0&&(h="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",Gt,o,h,D)}var z=function(ie,ye){if(typeof ye=="string")return Tr.getEncryptedPKCS8PEM(ie,ye);if(typeof ye=="object"&&Fn(ye,"passcode")!=null){var $e=JSON.parse(JSON.stringify(ye)),Fr=$e.passcode;return delete $e.passcode,Tr.getEncryptedPKCS8PEM(ie,Fr,$e)}};if(l=="PKCS8PRV"&&ot!=null&&r instanceof ot&&r.isPrivate==!0){var St=Y(r),qt=St.tohex(),Jt=ht({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:qt}}]}),Gt=Jt.tohex();return o===void 0||o==null?Pe(Gt,"PRIVATE KEY"):z(Gt,o)}if(l=="PKCS8PRV"&&T!==void 0&&r instanceof T&&r.isPrivate==!0){var ee={seq:[{int:1},{octstr:{hex:r.prvKeyHex}}]};typeof r.pubKeyHex=="string"&&ee.seq.push({tag:["a1",!0,{bitstr:{hex:"00"+r.pubKeyHex}}]});var St=new ht(ee),qt=St.tohex(),Jt=ht({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:r.curveName}}]},{octstr:{hex:qt}}]}),Gt=Jt.tohex();return o===void 0||o==null?Pe(Gt,"PRIVATE KEY"):z(Gt,o)}if(l=="PKCS8PRV"&&ut!==void 0&&r instanceof ut&&r.isPrivate==!0){var St=new K({bigint:r.x}),qt=St.tohex(),Jt=ht({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:r.p}},{int:{bigint:r.q}},{int:{bigint:r.g}}]}]},{octstr:{hex:qt}}]}),Gt=Jt.tohex();return o===void 0||o==null?Pe(Gt,"PRIVATE KEY"):z(Gt,o)}throw new Error("unsupported object nor format")},Tr.getKeyFromCSRPEM=function(r){var l=On(r,"CERTIFICATE REQUEST"),o=Tr.getKeyFromCSRHex(l);return o},Tr.getKeyFromCSRHex=function(r){var l=Tr.parseCSRHex(r),o=Tr.getKey(l.p8pubkeyhex,null,"pkcs8pub");return o},Tr.parseCSRHex=function(r){var l=Je,o=l.getChildIdx,h=l.getTLV,b={},D=r;if(D.substr(0,2)!="30")throw new Error("malformed CSR(code:001)");var x=o(D,0);if(x.length<1)throw new Error("malformed CSR(code:002)");if(D.substr(x[0],2)!="30")throw new Error("malformed CSR(code:003)");var _=o(D,x[0]);if(_.length<3)throw new Error("malformed CSR(code:004)");return b.p8pubkeyhex=h(D,_[2]),b},Tr.getKeyID=function(r){var l=Tr,o=Je;typeof r=="string"&&r.indexOf("BEGIN ")!=-1&&(r=l.getKey(r));var h=On(l.getPEM(r)),b=o.getIdxbyList(h,0,[1]),D=o.getV(h,b).substring(2);return v.crypto.Util.hashHex(D,"sha1")},Tr.getJWK=function(r,l,o,h,b){var D,x={},_,M=v.crypto.Util.hashHex;if(typeof r=="string")D=Tr.getKey(r),r.indexOf("CERTIFICATE")!=-1&&(_=On(r));else if(typeof r=="object")r instanceof nr?(D=r.getPublicKey(),_=r.hex):D=r;else throw new Error("unsupported keyinfo type");if(D instanceof Er&&D.isPrivate)x.kty="RSA",x.n=vn(D.n.toString(16)),x.e=vn(D.e.toString(16)),x.d=vn(D.d.toString(16)),x.p=vn(D.p.toString(16)),x.q=vn(D.q.toString(16)),x.dp=vn(D.dmp1.toString(16)),x.dq=vn(D.dmq1.toString(16)),x.qi=vn(D.coeff.toString(16));else if(D instanceof Er&&D.isPublic)x.kty="RSA",x.n=vn(D.n.toString(16)),x.e=vn(D.e.toString(16));else if(D instanceof v.crypto.ECDSA&&D.isPrivate){var K=D.getShortNISTPCurveName();if(K!=="P-256"&&K!=="P-384"&&K!=="P-521")throw new Error("unsupported curve name for JWT: "+K);var ht=D.getPublicKeyXYHex();x.kty="EC",x.crv=K,x.x=vn(ht.x),x.y=vn(ht.y),x.d=vn(D.prvKeyHex)}else if(D instanceof v.crypto.ECDSA&&D.isPublic){var K=D.getShortNISTPCurveName();if(K!=="P-256"&&K!=="P-384"&&K!=="P-521")throw new Error("unsupported curve name for JWT: "+K);var ht=D.getPublicKeyXYHex();x.kty="EC",x.crv=K,x.x=vn(ht.x),x.y=vn(ht.y)}if(x.kty==null)throw new Error("unsupported keyinfo");return!D.isPrivate&&l!=!0&&(x.kid=v.jws.JWS.getJWKthumbprint(x)),_!=null&&o!=!0&&(x.x5c=[E(_)]),_!=null&&h!=!0&&(x.x5t=Rr(E(M(_,"sha1")))),_!=null&&b!=!0&&(x["x5t#S256"]=Rr(E(M(_,"sha256")))),x},Tr.getJWKFromKey=function(r){return Tr.getJWK(r,!0,!0,!0,!0)},Er.getPosArrayOfChildrenFromHex=function(r){return Je.getChildIdx(r,0)},Er.getHexValueArrayOfChildrenFromHex=function(r){var l=Je,o=l.getV,P=Er.getPosArrayOfChildrenFromHex(r),h=o(r,P[0]),b=o(r,P[1]),D=o(r,P[2]),x=o(r,P[3]),_=o(r,P[4]),M=o(r,P[5]),K=o(r,P[6]),ht=o(r,P[7]),mt=o(r,P[8]),P=new Array;return P.push(h,b,D,x,_,M,K,ht,mt),P},Er.prototype.readPrivateKeyFromPEMString=function(r){var l=On(r),o=Er.getHexValueArrayOfChildrenFromHex(l);this.setPrivateEx(o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8])},Er.prototype.readPKCS5PrvKeyHex=function(r){var l=Er.getHexValueArrayOfChildrenFromHex(r);this.setPrivateEx(l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8])},Er.prototype.readPKCS8PrvKeyHex=function(r){var l,o,h,b,D,x,_,M,K=Je,ht=K.getVbyListEx;if(K.isASN1HEX(r)===!1)throw new Error("not ASN.1 hex string");try{l=ht(r,0,[2,0,1],"02"),o=ht(r,0,[2,0,2],"02"),h=ht(r,0,[2,0,3],"02"),b=ht(r,0,[2,0,4],"02"),D=ht(r,0,[2,0,5],"02"),x=ht(r,0,[2,0,6],"02"),_=ht(r,0,[2,0,7],"02"),M=ht(r,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(l,o,h,b,D,x,_,M)},Er.prototype.readPKCS5PubKeyHex=function(r){var l=Je,o=l.getV;if(l.isASN1HEX(r)===!1)throw new Error("keyHex is not ASN.1 hex string");var h=l.getChildIdx(r,0);if(h.length!==2||r.substr(h[0],2)!=="02"||r.substr(h[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var b=o(r,h[0]),D=o(r,h[1]);this.setPublic(b,D)},Er.prototype.readPKCS8PubKeyHex=function(r){var l=Je;if(l.isASN1HEX(r)===!1)throw new Error("not ASN.1 hex string");if(l.getTLVbyListEx(r,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var o=l.getTLVbyListEx(r,0,[1,0]);this.readPKCS5PubKeyHex(o)},Er.prototype.readCertPubKeyHex=function(r,l){var o,h;o=new nr,o.readCertHex(r),h=o.getPublicKeyHex(),this.readPKCS8PubKeyHex(h)};var da=new RegExp("[^0-9a-f]","gi");function ri(r,l){for(var o="",h=l/4-r.length,b=0;b<h;b++)o=o+"0";return o+r}Er.prototype.sign=function(r,l){var o=function(b){return v.crypto.Util.hashString(b,l)},h=o(r);return this.signWithMessageHash(h,l)},Er.prototype.signWithMessageHash=function(r,l){var o=v.crypto.Util.getPaddedDigestInfoHex(r,l,this.n.bitLength()),h=en(o,16),b=this.doPrivate(h),D=b.toString(16);return ri(D,this.n.bitLength())};function eu(r,l,o){for(var h="",b=0;h.length<l;)h+=dr(o(kn(r+String.fromCharCode.apply(String,[(b&4278190080)>>24,(b&16711680)>>16,(b&65280)>>8,b&255])))),b+=1;return h}Er.prototype.signPSS=function(r,l,o){var h=function(D){return v.crypto.Util.hashHex(D,l)},b=h(kn(r));return o===void 0&&(o=-1),this.signWithMessageHashPSS(b,l,o)},Er.prototype.signWithMessageHashPSS=function(r,l,o){var h=dr(r),b=h.length,D=this.n.bitLength()-1,x=Math.ceil(D/8),_,M=function(ot){return v.crypto.Util.hashHex(ot,l)};if(o===-1||o===void 0)o=b;else if(o===-2)o=x-b-2;else if(o<-2)throw new Error("invalid salt length");if(x<b+o+2)throw new Error("data too long");var K="";o>0&&(K=new Array(o),new nn().nextBytes(K),K=String.fromCharCode.apply(String,K));var ht=dr(M(kn("\0\0\0\0\0\0\0\0"+h+K))),mt=[];for(_=0;_<x-o-b-2;_+=1)mt[_]=0;var P=String.fromCharCode.apply(String,mt)+""+K,I=eu(ht,P.length,M),ut=[];for(_=0;_<P.length;_+=1)ut[_]=P.charCodeAt(_)^I.charCodeAt(_);var T=65280>>8*x-D&255;for(ut[0]&=~T,_=0;_<b;_++)ut.push(ht.charCodeAt(_));return ut.push(188),ri(this.doPrivate(new w(ut)).toString(16),this.n.bitLength())};function Ti(r){for(var l in v.crypto.Util.DIGESTINFOHEAD){var o=v.crypto.Util.DIGESTINFOHEAD[l],h=o.length;if(r.substring(0,h)==o){var b=[l,r.substring(h)];return b}}return[]}Er.prototype.verify=function(r,l){if(l=l.toLowerCase(),l.match(/^[0-9a-f]+$/)==null)return!1;var o=en(l,16),h=this.n.bitLength();if(o.bitLength()>h)return!1;var b=this.doPublic(o),D=b.toString(16);if(D.length+3!=h/4)return!1;var x=D.replace(/^1f+00/,""),_=Ti(x);if(_.length==0)return!1;var M=_[0],K=_[1],ht=function(P){return v.crypto.Util.hashString(P,M)},mt=ht(r);return K==mt},Er.prototype.verifyWithMessageHash=function(r,l){if(l.length!=Math.ceil(this.n.bitLength()/4))return!1;var o=en(l,16);if(o.bitLength()>this.n.bitLength())return 0;var h=this.doPublic(o),b=h.toString(16).replace(/^1f+00/,""),D=Ti(b);if(D.length==0)return!1;var x=D[0],_=D[1];return _==r},Er.prototype.verifyPSS=function(r,l,o,h){var b=function(x){return v.crypto.Util.hashHex(x,o)},D=b(kn(r));return h===void 0&&(h=-1),this.verifyWithMessageHashPSS(D,l,o,h)},Er.prototype.verifyWithMessageHashPSS=function(r,l,o,h){if(l.length!=Math.ceil(this.n.bitLength()/4))return!1;var b=new w(l,16),D=function(Ft){return v.crypto.Util.hashHex(Ft,o)},x=dr(r),_=x.length,M=this.n.bitLength()-1,K=Math.ceil(M/8),ht;if(h===-1||h===void 0)h=_;else if(h===-2)h=K-_-2;else if(h<-2)throw new Error("invalid salt length");if(K<_+h+2)throw new Error("data too long");var mt=this.doPublic(b).toByteArray();for(ht=0;ht<mt.length;ht+=1)mt[ht]&=255;for(;mt.length<K;)mt.unshift(0);if(mt[K-1]!==188)throw new Error("encoded message does not end in 0xbc");mt=String.fromCharCode.apply(String,mt);var P=mt.substr(0,K-_-1),I=mt.substr(P.length,_),ut=65280>>8*K-M&255;if(P.charCodeAt(0)&ut)throw new Error("bits beyond keysize not zero");var T=eu(I,P.length,D),ot=[];for(ht=0;ht<P.length;ht+=1)ot[ht]=P.charCodeAt(ht)^T.charCodeAt(ht);ot[0]&=~ut;var Y=K-_-h-2;for(ht=0;ht<Y;ht+=1)if(ot[ht]!==0)throw new Error("leftmost octets not zero");if(ot[Y]!==1)throw new Error("0x01 marker not found");return I===dr(D(kn("\0\0\0\0\0\0\0\0"+x+String.fromCharCode.apply(String,ot.slice(-h)))))},Er.SALT_LEN_HLEN=-1,Er.SALT_LEN_MAX=-2,Er.SALT_LEN_RECOVER=-2;function nr(r){var l=Je,o=l.getChildIdx,h=l.getV,b=l.dump,D=l.parse,x=l.getTLV,_=l.getVbyList,M=l.getVbyListEx,K=l.getTLVbyList,ht=l.getTLVbyListEx,mt=l.getIdxbyList,P=l.getIdxbyListEx,I=l.getVidx,ut=l.getInt,T=l.oidname,ot=l.hextooidstr,Y=nr,Ft=On,Tt,Jt=Error;try{Tt=v.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var d=K(this.hex,0,[0,0]);if(d.substr(0,2)=="a0"){var B=K(d,0,[0]),it=ut(B,0);if(it<0||2<it)throw new Error("malformed version field");return this.version=it+1,this.version}else return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return M(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var d=ht(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(d)},this.getAlgorithmIdentifierName=function(d){for(var B in Tt)if(d===Tt[B])return B;return T(M(d,0,[0],"06"))},this.getIssuer=function(d,B){return this.getX500Name(this.getIssuerHex(),d,B)},this.getIssuerHex=function(){return K(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){var d=this.getIssuer();return d.str},this.getSubject=function(d,B){return this.getX500Name(this.getSubjectHex(),d,B)},this.getSubjectHex=function(){return K(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){var d=this.getSubject();return d.str},this.getNotBefore=function(){var d=_(this.hex,0,[0,4+this.foffset,0]);return d=d.replace(/(..)/g,"%$1"),d=decodeURIComponent(d),d},this.getNotAfter=function(){var d=_(this.hex,0,[0,4+this.foffset,1]);return d=d.replace(/(..)/g,"%$1"),d=decodeURIComponent(d),d},this.getPublicKeyHex=function(){return this.getSPKI()},this.getSPKI=function(){return K(this.hex,0,[0,6+this.foffset],"30")},this.getSPKIValue=function(){var d=this.getSPKI();return d==null?null:_(d,0,[1],"03",!0)},this.getPublicKeyIdx=function(){return mt(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var d=this.getPublicKeyIdx();return mt(this.hex,d,[1,0],"30")},this.getPublicKey=function(){return Tr.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var d=K(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(d)},this.getSignatureValueHex=function(){return _(this.hex,0,[2],"03",!0)},this.verifySignature=function(d){var B=this.getSignatureAlgorithmField(),it=this.getSignatureValueHex(),z=K(this.hex,0,[0],"30"),St=new v.crypto.Signature({alg:B});return St.init(d),St.updateHex(z),St.verify(it)},this.parseExt=function(d){var B,it,z;if(d===void 0){if(z=this.hex,this.version!==3)return-1;B=mt(z,0,[0,7,0],"30"),it=o(z,B)}else{z=On(d);var St=mt(z,0,[0,3,0,0],"06");if(h(z,St)!="2a864886f70d01090e"){this.aExtInfo=new Array;return}B=mt(z,0,[0,3,0,1,0],"30"),it=o(z,B),this.hex=z}this.aExtInfo=new Array;for(var qt=0;qt<it.length;qt++){var ee={};ee.critical=!1;var ie=o(z,it[qt]),ye=0;ie.length===3&&(ee.critical=!0,ye=1),ee.oid=l.hextooidstr(_(z,it[qt],[0],"06"));var $e=mt(z,it[qt],[1+ye]);ee.vidx=I(z,$e),this.aExtInfo.push(ee)}},this.getExtInfo=function(d){var B=this.aExtInfo,it=d;if(d.match(/^[0-9.]+$/)||(it=v.asn1.x509.OID.name2oid(d)),it!==""){for(var z=0;z<B.length;z++)if(B[z].oid===it)return B[z]}},this.getCriticalExtV=function(d,B,it){if(B!=null)return[B,it];var z=this.getExtInfo(d);return z==null?[null,null]:[x(this.hex,z.vidx),z.critical]},this.getExtBasicConstraints=function(d,B){if(d===void 0&&B===void 0){var it=this.getExtInfo("basicConstraints");if(it===void 0)return;d=x(this.hex,it.vidx),B=it.critical}var z={extname:"basicConstraints"};if(B&&(z.critical=!0),d==="3000")return z;if(d==="30030101ff")return z.cA=!0,z;if(d.substr(0,12)==="30060101ff02"){var St=h(d,10),qt=parseInt(St,16);return z.cA=!0,z.pathLen=qt,z}throw new Error("hExtV parse error: "+d)},this.getExtNameConstraints=function(d,B){var it=this.getCriticalExtV("nameConstraints",d,B);if(d=it[0],B=it[1],d!=null){var z={extname:"nameConstraints"};B&&(z.critical=!0);for(var St=o(d,0),qt=0;qt<St.length;qt++){for(var ee=[],ie=o(d,St[qt]),ye=0;ye<ie.length;ye++){var $e=x(d,ie[ye]),Fr=this.getGeneralSubtree($e);ee.push(Fr)}var Dr=d.substr(St[qt],2);Dr=="a0"?z.permit=ee:Dr=="a1"&&(z.exclude=ee)}return z}},this.getGeneralSubtree=function(d){var B=o(d,0),it=B.length;if(it<1||2<it)throw new Error("wrong num elements");for(var z=this.getGeneralName(x(d,B[0])),St=1;St<it;St++){var qt=d.substr(B[St],2),ee=h(d,B[St]),ie=parseInt(ee,16);qt=="80"&&(z.min=ie),qt=="81"&&(z.max=ie)}return z},this.getExtKeyUsage=function(d,B){var it=this.getCriticalExtV("keyUsage",d,B);if(d=it[0],B=it[1],d!=null){var z={extname:"keyUsage"};return B&&(z.critical=!0),z.names=this.getExtKeyUsageString(d).split(","),z}},this.getExtKeyUsageBin=function(d){if(d===void 0){var B=this.getExtInfo("keyUsage");if(B===void 0)return"";d=x(this.hex,B.vidx)}if(d.length!=8&&d.length!=10)throw new Error("malformed key usage value: "+d);var it="000000000000000"+parseInt(d.substr(6),16).toString(2);return d.length==8&&(it=it.slice(-8)),d.length==10&&(it=it.slice(-16)),it=it.replace(/0+$/,""),it==""&&(it="0"),it},this.getExtKeyUsageString=function(d){for(var B=this.getExtKeyUsageBin(d),it=new Array,z=0;z<B.length;z++)B.substr(z,1)=="1"&&it.push(nr.KEYUSAGE_NAME[z]);return it.join(",")},this.getExtSubjectKeyIdentifier=function(d,B){if(d===void 0&&B===void 0){var it=this.getExtInfo("subjectKeyIdentifier");if(it===void 0)return;d=x(this.hex,it.vidx),B=it.critical}var z={extname:"subjectKeyIdentifier"};B&&(z.critical=!0);var St=h(d,0);return z.kid={hex:St},z},this.getExtAuthorityKeyIdentifier=function(d,B){if(d===void 0&&B===void 0){var it=this.getExtInfo("authorityKeyIdentifier");if(it===void 0)return;d=x(this.hex,it.vidx),B=it.critical}var z={extname:"authorityKeyIdentifier"};B&&(z.critical=!0);for(var St=o(d,0),qt=0;qt<St.length;qt++){var ee=d.substr(St[qt],2);if(ee==="80"&&(z.kid={hex:h(d,St[qt])}),ee==="a1"){var ie=x(d,St[qt]),ye=this.getGeneralNames(ie);z.issuer=ye[0].dn}ee==="82"&&(z.sn={hex:h(d,St[qt])})}return z},this.getExtExtKeyUsage=function(d,B){if(d===void 0&&B===void 0){var it=this.getExtInfo("extKeyUsage");if(it===void 0)return;d=x(this.hex,it.vidx),B=it.critical}var z={extname:"extKeyUsage",array:[]};B&&(z.critical=!0);for(var St=o(d,0),qt=0;qt<St.length;qt++)z.array.push(T(h(d,St[qt])));return z},this.getExtExtKeyUsageName=function(){var d=this.getExtInfo("extKeyUsage");if(d===void 0)return d;var B=new Array,it=x(this.hex,d.vidx);if(it==="")return B;for(var z=o(it,0),St=0;St<z.length;St++)B.push(T(h(it,z[St])));return B},this.getExtSubjectAltName=function(d,B){if(d===void 0&&B===void 0){var it=this.getExtInfo("subjectAltName");if(it===void 0)return;d=x(this.hex,it.vidx),B=it.critical}var z={extname:"subjectAltName",array:[]};return B&&(z.critical=!0),z.array=this.getGeneralNames(d),z},this.getExtIssuerAltName=function(d,B){if(d===void 0&&B===void 0){var it=this.getExtInfo("issuerAltName");if(it===void 0)return;d=x(this.hex,it.vidx),B=it.critical}var z={extname:"issuerAltName",array:[]};return B&&(z.critical=!0),z.array=this.getGeneralNames(d),z},this.getGeneralNames=function(d){for(var B=o(d,0),it=[],z=0;z<B.length;z++){var St=this.getGeneralName(x(d,B[z]));St!==void 0&&it.push(St)}return it},this.getGeneralName=function(d){var B=d.substr(0,2),it=h(d,0),z=dr(it);if(B=="81")return{rfc822:z};if(B=="82")return{dns:z};if(B=="86")return{uri:z};if(B=="87")return{ip:Ss(it)};if(B=="a4")return{dn:this.getX500Name(it)};if(B=="a0")return{other:this.getOtherName(d)}},this.getExtSubjectAltName2=function(){var d,B,it,z=this.getExtInfo("subjectAltName");if(z===void 0)return z;for(var St=new Array,qt=x(this.hex,z.vidx),ee=o(qt,0),ie=0;ie<ee.length;ie++)it=qt.substr(ee[ie],2),d=h(qt,ee[ie]),it==="81"&&(B=xr(d),St.push(["MAIL",B])),it==="82"&&(B=xr(d),St.push(["DNS",B])),it==="84"&&(B=nr.hex2dn(d,0),St.push(["DN",B])),it==="86"&&(B=xr(d),St.push(["URI",B])),it==="87"&&(B=Ss(d),St.push(["IP",B]));return St},this.getExtCRLDistributionPoints=function(d,B){if(d===void 0&&B===void 0){var it=this.getExtInfo("cRLDistributionPoints");if(it===void 0)return;d=x(this.hex,it.vidx),B=it.critical}var z={extname:"cRLDistributionPoints",array:[]};B&&(z.critical=!0);for(var St=o(d,0),qt=0;qt<St.length;qt++){var ee=x(d,St[qt]);z.array.push(this.getDistributionPoint(ee))}return z},this.getDistributionPoint=function(d){for(var B={},it=o(d,0),z=0;z<it.length;z++){var St=d.substr(it[z],2),qt=x(d,it[z]);St=="a0"&&(B.dpname=this.getDistributionPointName(qt))}return B},this.getDistributionPointName=function(d){for(var B={},it=o(d,0),z=0;z<it.length;z++){var St=d.substr(it[z],2),qt=x(d,it[z]);St=="a0"&&(B.full=this.getGeneralNames(qt))}return B},this.getExtCRLDistributionPointsURI=function(){var d=this.getExtCRLDistributionPoints();if(d==null)return d;for(var B=d.array,it=[],z=0;z<B.length;z++)try{B[z].dpname.full[0].uri!=null&&it.push(B[z].dpname.full[0].uri)}catch{}return it},this.getExtAIAInfo=function(){var d=this.getExtInfo("authorityInfoAccess");if(d===void 0)return d;for(var B={ocsp:[],caissuer:[]},it=o(this.hex,d.vidx),z=0;z<it.length;z++){var St=_(this.hex,it[z],[0],"06"),qt=_(this.hex,it[z],[1],"86");St==="2b06010505073001"&&B.ocsp.push(xr(qt)),St==="2b06010505073002"&&B.caissuer.push(xr(qt))}return B},this.getExtAuthorityInfoAccess=function(d,B){if(d===void 0&&B===void 0){var it=this.getExtInfo("authorityInfoAccess");if(it===void 0)return;d=x(this.hex,it.vidx),B=it.critical}var z={extname:"authorityInfoAccess",array:[]};B&&(z.critical=!0);for(var St=o(d,0),qt=0;qt<St.length;qt++){var ee=M(d,St[qt],[0],"06"),ie=_(d,St[qt],[1],"86"),ye=xr(ie);if(ee=="2b06010505073001")z.array.push({ocsp:ye});else if(ee=="2b06010505073002")z.array.push({caissuer:ye});else throw new Error("unknown method: "+ee)}return z},this.getExtCertificatePolicies=function(d,B){if(d===void 0&&B===void 0){var it=this.getExtInfo("certificatePolicies");if(it===void 0)return;d=x(this.hex,it.vidx),B=it.critical}var z={extname:"certificatePolicies",array:[]};B&&(z.critical=!0);for(var St=o(d,0),qt=0;qt<St.length;qt++){var ee=x(d,St[qt]),ie=this.getPolicyInformation(ee);z.array.push(ie)}return z},this.getPolicyInformation=function(d){var B={},it=_(d,0,[0],"06");B.policyoid=T(it);var z=P(d,0,[1],"30");if(z!=-1){B.array=[];for(var St=o(d,z),qt=0;qt<St.length;qt++){var ee=x(d,St[qt]),ie=this.getPolicyQualifierInfo(ee);B.array.push(ie)}}return B},this.getOtherName=function(d){var B={},it=o(d,0),z=_(d,it[0],[],"06"),St=_(d,it[1],[]);return B.oid=T(z),B.value=D(St),B},this.getPolicyQualifierInfo=function(d){var B={},it=_(d,0,[0],"06");if(it==="2b06010505070201"){var z=M(d,0,[1],"16");B.cps=dr(z)}else if(it==="2b06010505070202"){var St=K(d,0,[1],"30");B.unotice=this.getUserNotice(St)}return B},this.getUserNotice=function(d){var B=null,it={};try{B=l.parse(d);var z=this._asn1ToUnotice(B);return z}catch{return}},this._asn1ToUnotice=function(d){try{for(var B={},it=Fn(d,"seq"),z=0;z<it.length;z++){var St=this._asn1ToNoticeRef(it[z]);St!=null&&(B.noticeref=St);var qt=this.asn1ToDisplayText(it[z]);qt!=null&&(B.exptext=qt)}return Object.keys(B).length>0?B:void 0}catch{return}},this._asn1ToNoticeRef=function(d){try{for(var B={},it=Fn(d,"seq"),z=0;z<it.length;z++){var St=this._asn1ToNoticeNum(it[z]);St!=null&&(B.noticenum=St);var qt=this.asn1ToDisplayText(it[z]);qt!=null&&(B.org=qt)}return Object.keys(B).length>0?B:void 0}catch{return}},this._asn1ToNoticeNum=function(d){try{for(var B=Fn(d,"seq"),it=[],z=0;z<B.length;z++){var St=B[z];it.push(parseInt(Fn(St,"int.hex"),16))}return it}catch{return}},this.getDisplayText=function(d){var B={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"},it={};return it.type=B[d.substr(0,2)],it.str=dr(h(d,0)),it},this.asn1ToDisplayText=function(d){if(d.utf8str!=null)return{type:"utf8",str:d.utf8str.str};if(d.ia5str!=null)return{type:"ia5",str:d.ia5str.str};if(d.visstr!=null)return{type:"vis",str:d.visstr.str};if(d.bmpstr!=null)return{type:"bmp",str:d.bmpstr.str};if(d.prnstr!=null)return{type:"prn",str:d.prnstr.str}},this.getExtPolicyMappings=function(d,B){var it=this.getCriticalExtV("policyMappings",d,B);if(d=it[0],B=it[1],d!=null){var z={extname:"policyMappings"};B&&(z.critical=!0);try{for(var St=D(d),qt=St.seq,ee=[],ie=0;ie<qt.length;ie++){var ye=qt[ie].seq;ee.push([ye[0].oid,ye[1].oid])}z.array=ee}catch{throw new Jt("malformed policyMappings")}return z}},this.getExtPolicyConstraints=function(d,B){var it=this.getCriticalExtV("policyConstraints",d,B);if(d=it[0],B=it[1],d!=null){var z={extname:"policyConstraints"};B&&(z.critical=!0);var St=D(d);try{for(var qt=St.seq,ee=0;ee<qt.length;ee++){var ie=qt[ee].tag;ie.explicit==!1&&(ie.tag=="80"&&(z.reqexp=parseInt(ie.hex,16)),ie.tag=="81"&&(z.inhibit=parseInt(ie.hex,16)))}}catch{return new Jt("malformed policyConstraints value")}return z}},this.getExtInhibitAnyPolicy=function(d,B){var it=this.getCriticalExtV("inhibitAnyPolicy",d,B);if(d=it[0],B=it[1],d!=null){var z={extname:"inhibitAnyPolicy"};B&&(z.critical=!0);var St=ut(d,0);return St==-1?new Jt("wrong value"):(z.skip=St,z)}},this.getExtCRLNumber=function(d,B){var it={extname:"cRLNumber"};if(B&&(it.critical=!0),d.substr(0,2)=="02")return it.num={hex:h(d,0)},it;throw new Jt("hExtV parse error: "+d)},this.getExtCRLReason=function(d,B){var it={extname:"cRLReason"};if(B&&(it.critical=!0),d.substr(0,2)=="0a")return it.code=parseInt(h(d,0),16),it;throw new Error("hExtV parse error: "+d)},this.getExtOcspNonce=function(d,B){var it={extname:"ocspNonce"};B&&(it.critical=!0);var z=h(d,0);return it.hex=z,it},this.getExtOcspNoCheck=function(d,B){var it={extname:"ocspNoCheck"};return B&&(it.critical=!0),it},this.getExtAdobeTimeStamp=function(d,B){if(d===void 0&&B===void 0){var it=this.getExtInfo("adobeTimeStamp");if(it===void 0)return;d=x(this.hex,it.vidx),B=it.critical}var z={extname:"adobeTimeStamp"};B&&(z.critical=!0);var St=o(d,0);if(St.length>1){var qt=x(d,St[1]),ee=this.getGeneralName(qt);ee.uri!=null&&(z.uri=ee.uri)}if(St.length>2){var ie=x(d,St[2]);ie=="0101ff"&&(z.reqauth=!0),ie=="010100"&&(z.reqauth=!1)}return z},this.getExtSubjectDirectoryAttributes=function(d,B){if(d===void 0&&B===void 0){var it=this.getExtInfo("subjectDirectoryAttributes");if(it===void 0)return;d=x(this.hex,it.vidx),B=it.critical}var z={extname:"subjectDirectoryAttributes"};B&&(z.critical=!0);try{for(var St=D(d),qt=[],ee=0;ee<St.seq.length;ee++){var ie=St.seq[ee],ye=Fn(ie,"seq.0.oid"),$e=Fn(ie,"seq.1.set");if(ye==null||$e==null)throw"error";qt.push({attr:ye,array:$e})}return z.array=qt,z}catch{throw new Error("malformed subjectDirectoryAttributes extension value")}};var Gt=function(d){var B={};try{var it=d.seq[0].oid,z=v.asn1.x509.OID.name2oid(it);B.type=v.asn1.x509.OID.oid2atype(z);var St=d.seq[1];if(St.utf8str!=null)B.ds="utf8",B.value=St.utf8str.str;else if(St.numstr!=null)B.ds="num",B.value=St.numstr.str;else if(St.telstr!=null)B.ds="tel",B.value=St.telstr.str;else if(St.prnstr!=null)B.ds="prn",B.value=St.prnstr.str;else if(St.ia5str!=null)B.ds="ia5",B.value=St.ia5str.str;else if(St.visstr!=null)B.ds="vis",B.value=St.visstr.str;else if(St.bmpstr!=null)B.ds="bmp",B.value=St.bmpstr.str;else throw"error";return B}catch{throw new Erorr("improper ASN.1 parsed AttrTypeAndValue")}},Ae=function(d){try{return d.set.map(function(B){return Gt(B)})}catch(B){throw new Error("improper ASN.1 parsed RDN: "+B)}},De=function(d){try{return d.seq.map(function(B){return Ae(B)})}catch(B){throw new Error("improper ASN.1 parsed X500Name: "+B)}};this.getX500NameRule=function(d){for(var B=!0,it=!0,z=!1,St="",qt="",ee=null,ie=[],ye=0;ye<d.length;ye++)for(var $e=d[ye],Fr=0;Fr<$e.length;Fr++)ie.push($e[Fr]);for(var ye=0;ye<ie.length;ye++){var Dr=ie[ye],wr=Dr.ds,Kr=Dr.value,Ur=Dr.type;if(St+=":"+wr,wr!="prn"&&wr!="utf8"&&wr!="ia5")return"mixed";if(wr=="ia5"){if(Ur!="CN")return"mixed";if(v.lang.String.isMail(Kr))continue;return"mixed"}if(Ur=="C"){if(wr=="prn")continue;return"mixed"}if(qt+=":"+wr,ee==null)ee=wr;else if(ee!==wr)return"mixed"}return ee??"prn"},this.getAttrTypeAndValue=function(d){var B=D(d);return Gt(B)},this.getRDN=function(d){var B=D(d);return Ae(B)},this.getX500NameArray=function(d){var B=D(d);return De(B)},this.getX500Name=function(d,B,it){var z=this.getX500NameArray(d),St=this.dnarraytostr(z),qt={str:St};return qt.array=z,it==!0&&(qt.hex=d),B==!0&&(qt.canon=this.c14nRDNArray(z)),qt},this.readCertPEM=function(d){this.readCertHex(Ft(d))},this.readCertHex=function(d){this.hex=d,this.getVersion();try{mt(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(d){var B={};return d==null&&(d={}),B.version=this.getVersion(),B.serial={hex:this.getSerialNumberHex()},B.sigalg=this.getSignatureAlgorithmField(),B.issuer=this.getIssuer(d.dncanon,d.dnhex),B.notbefore=this.getNotBefore(),B.notafter=this.getNotAfter(),B.subject=this.getSubject(d.dncanon,d.dnhex),B.sbjpubkey=Pe(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo!=null&&this.aExtInfo.length>0&&(B.ext=this.getExtParamArray()),B.sighex=this.getSignatureValueHex(),d.tbshex==!0&&(B.tbshex=K(this.hex,0,[0])),d.nodnarray==!0&&(delete B.issuer.array,delete B.subject.array),B},this.getExtParamArray=function(d){if(d==null){var B=P(this.hex,0,[0,"[3]"]);B!=-1&&(d=ht(this.hex,0,[0,"[3]",0],"30"))}for(var it=[],z=o(d,0),St=0;St<z.length;St++){var qt=x(d,z[St]),ee=this.getExtParam(qt);ee!=null&&it.push(ee)}return it},this.getExtParam=function(d){var B={},it=o(d,0),z=it.length;if(z!=2&&z!=3)throw new Error("wrong number elements in Extension: "+z+" "+d);var St=ot(_(d,0,[0],"06")),qt=!1;z==3&&K(d,0,[1])=="0101ff"&&(qt=!0);var ee=K(d,0,[z-1,0]),ie=void 0;if(St=="2.5.29.14"?ie=this.getExtSubjectKeyIdentifier(ee,qt):St=="2.5.29.15"?ie=this.getExtKeyUsage(ee,qt):St=="2.5.29.17"?ie=this.getExtSubjectAltName(ee,qt):St=="2.5.29.18"?ie=this.getExtIssuerAltName(ee,qt):St=="2.5.29.19"?ie=this.getExtBasicConstraints(ee,qt):St=="2.5.29.30"?ie=this.getExtNameConstraints(ee,qt):St=="2.5.29.31"?ie=this.getExtCRLDistributionPoints(ee,qt):St=="2.5.29.32"?ie=this.getExtCertificatePolicies(ee,qt):St=="2.5.29.33"?ie=this.getExtPolicyMappings(ee,qt):St=="2.5.29.35"?ie=this.getExtAuthorityKeyIdentifier(ee,qt):St=="2.5.29.36"?ie=this.getExtPolicyConstraints(ee,qt):St=="2.5.29.37"?ie=this.getExtExtKeyUsage(ee,qt):St=="2.5.29.54"?ie=this.getExtInhibitAnyPolicy(ee,qt):St=="1.3.6.1.5.5.7.1.1"?ie=this.getExtAuthorityInfoAccess(ee,qt):St=="2.5.29.20"?ie=this.getExtCRLNumber(ee,qt):St=="2.5.29.21"?ie=this.getExtCRLReason(ee,qt):St=="2.5.29.9"?ie=this.getExtSubjectDirectoryAttributes(ee,qt):St=="1.3.6.1.5.5.7.48.1.2"?ie=this.getExtOcspNonce(ee,qt):St=="1.3.6.1.5.5.7.48.1.5"?ie=this.getExtOcspNoCheck(ee,qt):St=="1.2.840.113583.1.1.9.1"?ie=this.getExtAdobeTimeStamp(ee,qt):nr.EXT_PARSER[St]!=null&&(ie=nr.EXT_PARSER[St](St,qt,ee)),ie!=null)return ie;var ye={extname:St,extn:ee};try{ye.extn=D(ee)}catch{}return qt&&(ye.critical=!0),ye},this.findExt=function(d,B){for(var it=0;it<d.length;it++)if(d[it].extname==B)return d[it];return null},this.updateExtCDPFullURI=function(d,B){var it=this.findExt(d,"cRLDistributionPoints");if(it!=null&&it.array!=null){for(var z=it.array,St=0;St<z.length;St++)if(z[St].dpname!=null&&z[St].dpname.full!=null)for(var qt=z[St].dpname.full,ee=0;ee<qt.length;ee++){var ie=qt[St];ie.uri!=null&&(ie.uri=B)}}},this.updateExtAIAOCSP=function(d,B){var it=this.findExt(d,"authorityInfoAccess");if(it!=null&&it.array!=null)for(var z=it.array,St=0;St<z.length;St++)z[St].ocsp!=null&&(z[St].ocsp=B)},this.updateExtAIACAIssuer=function(d,B){var it=this.findExt(d,"authorityInfoAccess");if(it!=null&&it.array!=null)for(var z=it.array,St=0;St<z.length;St++)z[St].caissuer!=null&&(z[St].caissuer=B)},this.dnarraytostr=function(d){function B(z){return z.map(function(St){return it(St).replace(/\+/,"\\+")}).join("+")}function it(z){return z.type+"="+z.value}return"/"+d.map(function(z){return B(z).replace(/\//,"\\/")}).join("/")},this.setCanonicalizedDN=function(d){var B;if(d.str!=null&&d.array==null){var it=new v.asn1.x509.X500Name({str:d.str}),z=it.tohex();B=this.getX500NameArray(z)}else B=d.array;d.canon==null&&(d.canon=this.c14nRDNArray(B))},this.c14nRDNArray=function(d){for(var B=[],it=0;it<d.length;it++){for(var z=d[it],St=[],qt=0;qt<z.length;qt++){var ee=z[qt],ie=ee.value;ie=ie.replace(/^\s*/,""),ie=ie.replace(/\s*$/,""),ie=ie.replace(/\s+/g," "),ie=ie.toLowerCase(),St.push(ee.type.toLowerCase()+"="+ie)}B.push(St.join("+"))}return"/"+B.join("/")},this.getInfo=function(){var d=function(Bs){for(var hn="",Jn="    ",Tn=`
`,Pt=Bs.array,ps=0;ps<Pt.length;ps++){var yn=Pt[ps];if(yn.dn!=null&&(hn+=Jn+"dn: "+yn.dn.str+Tn),yn.ip!=null&&(hn+=Jn+"ip: "+yn.ip+Tn),yn.rfc822!=null&&(hn+=Jn+"rfc822: "+yn.rfc822+Tn),yn.dns!=null&&(hn+=Jn+"dns: "+yn.dns+Tn),yn.uri!=null&&(hn+=Jn+"uri: "+yn.uri+Tn),yn.other!=null){var Un=yn.other.oid,zr=JSON.stringify(yn.other.value).replace(/\"/g,"");hn+=Jn+"other: "+Un+"="+zr+Tn}}return hn=hn.replace(/\n$/,""),hn},B=function(Bs){for(var hn="",Jn=Bs.array,Tn=0;Tn<Jn.length;Tn++){var Pt=Jn[Tn];if(hn+="    policy oid: "+Pt.policyoid+`
`,Pt.array!==void 0)for(var ps=0;ps<Pt.array.length;ps++){var yn=Pt.array[ps];yn.cps!==void 0&&(hn+="    cps: "+yn.cps+`
`)}}return hn},it=function(Bs){for(var hn="",Jn=Bs.array,Tn=0;Tn<Jn.length;Tn++){var Pt=Jn[Tn];try{Pt.dpname.full[0].uri!==void 0&&(hn+="    "+Pt.dpname.full[0].uri+`
`)}catch{}try{Pt.dname.full[0].dn.hex!==void 0&&(hn+="    "+nr.hex2dn(Pt.dpname.full[0].dn.hex)+`
`)}catch{}}return hn},z=function(Bs){for(var hn="",Jn=Bs.array,Tn=0;Tn<Jn.length;Tn++){var Pt=Jn[Tn];Pt.caissuer!==void 0&&(hn+="    caissuer: "+Pt.caissuer+`
`),Pt.ocsp!==void 0&&(hn+="    ocsp: "+Pt.ocsp+`
`)}return hn},St=nr,qt,ee,ie;if(qt=`Basic Fields
`,qt+="  serial number: "+this.getSerialNumberHex()+`
`,qt+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,qt+="  issuer: "+this.getIssuerString()+`
`,qt+="  notBefore: "+this.getNotBefore()+`
`,qt+="  notAfter: "+this.getNotAfter()+`
`,qt+="  subject: "+this.getSubjectString()+`
`,qt+=`  subject public key info: 
`,ee=this.getPublicKey(),qt+="    key algorithm: "+ee.type+`
`,ee.type==="RSA"&&(qt+="    n="+yu(ee.n.toString(16)).substr(0,16)+`...
`,qt+="    e="+yu(ee.e.toString(16))+`
`),ie=this.aExtInfo,ie!=null){qt+=`X509v3 Extensions:
`;for(var ye=0;ye<ie.length;ye++){var $e=ie[ye],Fr=v.asn1.x509.OID.oid2name($e.oid);Fr===""&&(Fr=$e.oid);var Dr="";if($e.critical===!0&&(Dr="CRITICAL"),qt+="  "+Fr+" "+Dr+`:
`,Fr==="basicConstraints"){var wr=this.getExtBasicConstraints();wr.cA===void 0?qt+=`    {}
`:(qt+="    cA=true",wr.pathLen!==void 0&&(qt+=", pathLen="+wr.pathLen),qt+=`
`)}else if(Fr=="policyMappings"){var Kr=this.getExtPolicyMappings().array,Ur=Kr.map(function(Bs){var hn=Bs;return hn[0]+":"+hn[1]}).join(", ");qt+="    "+Ur+`
`}else if(Fr=="policyConstraints"){var xn=this.getExtPolicyConstraints();qt+="    ",xn.reqexp!=null&&(qt+=" reqexp="+xn.reqexp),xn.inhibit!=null&&(qt+=" inhibit="+xn.inhibit),qt+=`
`}else if(Fr=="inhibitAnyPolicy"){var xn=this.getExtInhibitAnyPolicy();qt+="    skip="+xn.skip+`
`}else if(Fr=="keyUsage")qt+="    "+this.getExtKeyUsageString()+`
`;else if(Fr=="subjectKeyIdentifier")qt+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(Fr=="authorityKeyIdentifier"){var pn=this.getExtAuthorityKeyIdentifier();pn.kid!==void 0&&(qt+="    kid="+pn.kid.hex+`
`)}else if(Fr=="extKeyUsage"){var bi=this.getExtExtKeyUsage().array;qt+="    "+bi.join(", ")+`
`}else if(Fr=="subjectAltName"){var Ns=d(this.getExtSubjectAltName());qt+=Ns+`
`}else if(Fr=="cRLDistributionPoints"){var Es=this.getExtCRLDistributionPoints();qt+=it(Es)}else if(Fr=="authorityInfoAccess"){var bs=this.getExtAuthorityInfoAccess();qt+=z(bs)}else Fr=="certificatePolicies"&&(qt+=B(this.getExtCertificatePolicies()))}}return qt+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,qt+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`,qt},typeof r=="string"&&(r.indexOf("-----BEGIN")!=-1?this.readCertPEM(r):v.lang.String.isHex(r)&&this.readCertHex(r))}nr.EXT_PARSER={},nr.registExtParser=function(r,l){nr.EXT_PARSER[r]=l},nr.hex2dn=function(r,l){l===void 0&&(l=0);var o=new nr,h=Je.getTLV(r,l),b=o.getX500Name(r);return b.str},nr.hex2rdn=function(r,l){if(l===void 0&&(l=0),r.substr(l,2)!=="31")throw new Error("malformed RDN");for(var o=new Array,h=Je.getChildIdx(r,l),b=0;b<h.length;b++)o.push(nr.hex2attrTypeValue(r,h[b]));return o=o.map(function(D){return D.replace("+","\\+")}),o.join("+")},nr.hex2attrTypeValue=function(r,l){var o=Je,h=o.getV;if(l===void 0&&(l=0),r.substr(l,2)!=="30")throw new Error("malformed attribute type and value");var b=o.getChildIdx(r,l);b.length!==2||r.substr(b[0],2);var D=h(r,b[0]),x=v.asn1.ASN1Util.oidHexToInt(D),_=v.asn1.x509.OID.oid2atype(x),M=h(r,b[1]),K=dr(M);return _+"="+K},nr.getPublicKeyFromCertHex=function(r){var l=new nr;return l.readCertHex(r),l.getPublicKey()},nr.getPublicKeyFromCertPEM=function(r){var l=new nr;return l.readCertPEM(r),l.getPublicKey()},nr.getPublicKeyInfoPropOfCertPEM=function(r){var l=Je,o=l.getVbyList,h={},b,D,x;return h.algparam=null,b=new nr,b.readCertPEM(r),D=b.getPublicKeyHex(),h.keyhex=o(D,0,[1],"03").substr(2),h.algoid=o(D,0,[0,0],"06"),h.algoid==="2a8648ce3d0201"&&(h.algparam=o(D,0,[0,1],"06")),h},nr.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"];var $a=function(r){var l=v,o=l.lang.String.isHex,h=Je,b=h.getV,D=h.getTLV,x=h.getVbyList,_=h.getTLVbyList,M=h.getTLVbyListEx,K=h.getIdxbyList,ht=h.getIdxbyListEx,mt=h.getChildIdx,P=new nr;this.hex=null,this.posSigAlg=null,this.posRevCert=null,this.parsed=null,this._setPos=function(){var I=K(this.hex,0,[0,0]),ut=this.hex.substr(I,2);if(ut=="02")this.posSigAlg=1;else if(ut=="30")this.posSigAlg=0;else throw new Error("malformed 1st item of TBSCertList: "+ut);var T=K(this.hex,0,[0,this.posSigAlg+3]),ot=this.hex.substr(T,2);if(ot=="17"||ot=="18"){var Y,Ft;Y=K(this.hex,0,[0,this.posSigAlg+4]),this.posRevCert=null,Y!=-1&&(Ft=this.hex.substr(Y,2),Ft=="30"&&(this.posRevCert=this.posSigAlg+4))}else if(ot=="30")this.posRevCert=this.posSigAlg+3;else if(ot=="a0")this.posRevCert=null;else throw new Error("malformed nextUpdate or revCert tag: "+ot)},this.getVersion=function(){return this.posSigAlg==0?null:parseInt(x(this.hex,0,[0,0],"02"),16)+1},this.getSignatureAlgorithmField=function(){var I=_(this.hex,0,[0,this.posSigAlg],"30");return P.getAlgorithmIdentifierName(I)},this.getIssuer=function(){return P.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return _(this.hex,0,[0,this.posSigAlg+1],"30")},this.getThisUpdate=function(){var I=x(this.hex,0,[0,this.posSigAlg+2]);return result=dr(I)},this.getNextUpdate=function(){var I=K(this.hex,0,[0,this.posSigAlg+3]),ut=this.hex.substr(I,2);return ut!="17"&&ut!="18"?null:dr(b(this.hex,I))},this.getRevCertArray=function(){if(this.posRevCert==null)return null;for(var I=[],ut=K(this.hex,0,[0,this.posRevCert]),T=mt(this.hex,ut),ot=0;ot<T.length;ot++){var Y=D(this.hex,T[ot]);I.push(this.getRevCert(Y))}return I},this.getRevCert=function(I){var ut={},T=mt(I,0);return ut.sn={hex:x(I,0,[0],"02")},ut.date=dr(x(I,0,[1])),T.length==3&&(ut.ext=P.getExtParamArray(_(I,0,[2]))),ut},this.findRevCert=function(I){var ut=new nr(I),T=ut.getSerialNumberHex();return this.findRevCertBySN(T)},this.findRevCertBySN=function(I){if(this.parsed==null&&this.getParam(),this.parsed.revcert==null)return null;for(var ut=this.parsed.revcert,T=0;T<ut.length;T++)if(I==ut[T].sn.hex)return ut[T];return null},this.getSignatureValueHex=function(){return x(this.hex,0,[2],"03",!0)},this.verifySignature=function(I){var ut=this.getSignatureAlgorithmField(),T=this.getSignatureValueHex(),ot=_(this.hex,0,[0],"30"),Y=new v.crypto.Signature({alg:ut});return Y.init(I),Y.updateHex(ot),Y.verify(T)},this.getParam=function(I){var ut={},T=this.getVersion();T!=null&&(ut.version=T),ut.sigalg=this.getSignatureAlgorithmField(),ut.issuer=this.getIssuer(),ut.thisupdate=this.getThisUpdate();var ot=this.getNextUpdate();ot!=null&&(ut.nextupdate=ot);var Y=this.getRevCertArray();Y!=null&&(ut.revcert=Y);var Ft=ht(this.hex,0,[0,"[0]"]);if(Ft!=-1){var Tt=M(this.hex,0,[0,"[0]",0]);ut.ext=P.getExtParamArray(Tt)}return ut.sighex=this.getSignatureValueHex(),this.parsed=ut,typeof I=="object"&&(I.tbshex==!0&&(ut.tbshex=_(this.hex,0,[0])),I.nodnarray==!0&&delete ut.issuer.array),ut},typeof r=="string"&&(o(r)?this.hex=r:r.match(/-----BEGIN X509 CRL/)&&(this.hex=On(r)),this._setPos())};(typeof v>"u"||!v)&&(v={}),(typeof v.jws>"u"||!v.jws)&&(v.jws={}),v.jws.JWS=function(){var r=v,l=r.jws.JWS,o=l.isSafeJSONString;this.parseJWS=function(h,b){if(!(this.parsedJWS!==void 0&&(b||this.parsedJWS.sigvalH!==void 0))){var D=h.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(D==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var x=D[1],_=D[2],M=D[3],K=x+"."+_;if(this.parsedJWS={},this.parsedJWS.headB64U=x,this.parsedJWS.payloadB64U=_,this.parsedJWS.sigvalB64U=M,this.parsedJWS.si=K,!b){var ht=Dn(M),mt=en(ht,16);this.parsedJWS.sigvalH=ht,this.parsedJWS.sigvalBI=mt}var P=gs(x),I=gs(_);if(this.parsedJWS.headS=P,this.parsedJWS.payloadS=I,!o(P,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+P}}},v.jws.JWS.sign=function(r,l,o,h,b){var D=v,x=D.jws,_=x.JWS,M=_.readSafeJSONString,K=_.isSafeJSONString,ht=D.crypto,mt=ht.ECDSA,P=ht.Mac,I=ht.Signature,ut=JSON,T,ot,Y;if(typeof l!="string"&&typeof l!="object")throw"spHeader must be JSON string or object: "+l;if(typeof l=="object"&&(ot=l,T=ut.stringify(ot)),typeof l=="string"){if(T=l,!K(T))throw"JWS Head is not safe JSON string: "+T;ot=M(T)}if(Y=o,typeof o=="object"&&(Y=ut.stringify(o)),(r==""||r==null)&&ot.alg!==void 0&&(r=ot.alg),r!=""&&r!=null&&ot.alg===void 0&&(ot.alg=r,T=ut.stringify(ot)),r!==ot.alg)throw"alg and sHeader.alg doesn't match: "+r+"!="+ot.alg;var Ft=null;if(_.jwsalg2sigalg[r]===void 0)throw"unsupported alg name: "+r;Ft=_.jwsalg2sigalg[r];var Tt=be(T),Jt=be(Y),Gt=Tt+"."+Jt,Ae="";if(Ft.substr(0,4)=="Hmac"){if(h===void 0)throw"mac key shall be specified for HS* alg";var De=new P({alg:Ft,prov:"cryptojs",pass:h});De.updateString(Gt),Ae=De.doFinal()}else if(Ft.indexOf("withECDSA")!=-1){var d=new I({alg:Ft});d.init(h,b),d.updateString(Gt);var B=d.sign();Ae=v.crypto.ECDSA.asn1SigToConcatSig(B)}else if(Ft!="none"){var d=new I({alg:Ft});d.init(h,b),d.updateString(Gt),Ae=d.sign()}var it=vn(Ae);return Gt+"."+it},v.jws.JWS.verify=function(r,l,o){var h=v,b=h.jws,D=b.JWS,x=D.readSafeJSONString,_=h.crypto,M=_.ECDSA,K=_.Mac,ht=_.Signature,mt;if(typeof Er!==void 0&&(mt=Er),!Ni(r))return!1;var P=r.split(".");if(P.length!==3)return!1;var I=P[0],ut=P[1],T=I+"."+ut,ot=Dn(P[2]),Y=x(gs(P[0])),Ft=null,Tt=null;if(Y.alg===void 0)throw"algorithm not specified in header";if(Ft=Y.alg,Tt=Ft.substr(0,2),o!=null&&Object.prototype.toString.call(o)==="[object Array]"&&o.length>0){var Jt=":"+o.join(":")+":";if(Jt.indexOf(":"+Ft+":")==-1)throw"algorithm '"+Ft+"' not accepted in the list"}if(Ft!="none"&&l===null)throw"key shall be specified to verify.";if(typeof l=="string"&&l.indexOf("-----BEGIN ")!=-1&&(l=Tr.getKey(l)),(Tt=="RS"||Tt=="PS")&&!(l instanceof mt))throw"key shall be a RSAKey obj for RS* and PS* algs";if(Tt=="ES"&&!(l instanceof M))throw"key shall be a ECDSA obj for ES* algs";Ft=="none";var Gt=null;if(D.jwsalg2sigalg[Y.alg]===void 0)throw"unsupported alg name: "+Ft;if(Gt=D.jwsalg2sigalg[Ft],Gt=="none")throw"not supported";if(Gt.substr(0,4)=="Hmac"){var Ae=null;if(l===void 0)throw"hexadecimal key shall be specified for HMAC";var De=new K({alg:Gt,pass:l});return De.updateString(T),Ae=De.doFinal(),ot==Ae}else if(Gt.indexOf("withECDSA")!=-1){var d=null;try{d=M.concatSigToASN1Sig(ot)}catch{return!1}var B=new ht({alg:Gt});return B.init(l),B.updateString(T),B.verify(d)}else{var B=new ht({alg:Gt});return B.init(l),B.updateString(T),B.verify(ot)}},v.jws.JWS.parse=function(r){var l=r.split("."),o={},h,b,D;if(l.length!=2&&l.length!=3)throw"malformed sJWS: wrong number of '.' splitted elements";return h=l[0],b=l[1],l.length==3&&(D=l[2]),o.headerObj=v.jws.JWS.readSafeJSONString(gs(h)),o.payloadObj=v.jws.JWS.readSafeJSONString(gs(b)),o.headerPP=JSON.stringify(o.headerObj,null,"  "),o.payloadObj==null?o.payloadPP=gs(b):o.payloadPP=JSON.stringify(o.payloadObj,null,"  "),D!==void 0&&(o.sigHex=Dn(D)),o},v.jws.JWS.verifyJWT=function(r,l,o){var h=v,b=h.jws,D=b.JWS,x=D.readSafeJSONString,_=D.inArray,M=D.includedArray;if(!Ni(r))return!1;var K=r.split(".");if(K.length!=3)return!1;var ht=K[0],mt=K[1],P=ht+"."+mt,I=Dn(K[2]),ut=x(gs(ht)),T=x(gs(mt));if(ut.alg===void 0)return!1;if(o.alg===void 0)throw"acceptField.alg shall be specified";if(!_(ut.alg,o.alg)||T.iss!==void 0&&typeof o.iss=="object"&&!_(T.iss,o.iss)||T.sub!==void 0&&typeof o.sub=="object"&&!_(T.sub,o.sub))return!1;if(T.aud!==void 0&&typeof o.aud=="object"){if(typeof T.aud=="string"){if(!_(T.aud,o.aud))return!1}else if(typeof T.aud=="object"&&!M(T.aud,o.aud))return!1}var ot=b.IntDate.getNow();return o.verifyAt!==void 0&&typeof o.verifyAt=="number"&&(ot=o.verifyAt),(o.gracePeriod===void 0||typeof o.gracePeriod!="number")&&(o.gracePeriod=0),!(T.exp!==void 0&&typeof T.exp=="number"&&T.exp+o.gracePeriod<ot||T.nbf!==void 0&&typeof T.nbf=="number"&&ot<T.nbf-o.gracePeriod||T.iat!==void 0&&typeof T.iat=="number"&&ot<T.iat-o.gracePeriod||T.jti!==void 0&&o.jti!==void 0&&T.jti!==o.jti||!D.verify(r,l,o.alg))},v.jws.JWS.includedArray=function(r,l){var o=v.jws.JWS.inArray;if(r===null||typeof r!="object"||typeof r.length!="number")return!1;for(var h=0;h<r.length;h++)if(!o(r[h],l))return!1;return!0},v.jws.JWS.inArray=function(r,l){if(l===null||typeof l!="object"||typeof l.length!="number")return!1;for(var o=0;o<l.length;o++)if(l[o]==r)return!0;return!1},v.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",ES512:"SHA512withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},v.jws.JWS.isSafeJSONString=function(r,l,o){var h=null;try{return h=aa(r),typeof h!="object"||h.constructor===Array?0:(l&&(l[o]=h),1)}catch{return 0}},v.jws.JWS.readSafeJSONString=function(r){var l=null;try{return l=aa(r),typeof l!="object"||l.constructor===Array?null:l}catch{return null}},v.jws.JWS.getEncodedSignatureValueFromJWS=function(r){var l=r.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(l==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return l[1]},v.jws.JWS.getJWKthumbprint=function(r){if(r.kty!=="RSA"&&r.kty!=="EC"&&r.kty!=="oct")throw"unsupported algorithm for JWK Thumprint";var l="{";if(r.kty==="RSA"){if(typeof r.n!="string"||typeof r.e!="string")throw"wrong n and e value for RSA key";l+='"e":"'+r.e+'",',l+='"kty":"'+r.kty+'",',l+='"n":"'+r.n+'"}'}else if(r.kty==="EC"){if(typeof r.crv!="string"||typeof r.x!="string"||typeof r.y!="string")throw"wrong crv, x and y value for EC key";l+='"crv":"'+r.crv+'",',l+='"kty":"'+r.kty+'",',l+='"x":"'+r.x+'",',l+='"y":"'+r.y+'"}'}else if(r.kty==="oct"){if(typeof r.k!="string")throw"wrong k value for oct(symmetric) key";l+='"kty":"'+r.kty+'",',l+='"k":"'+r.k+'"}'}var o=kn(l),h=v.crypto.Util.hashHex(o,"sha256"),b=vn(h);return b},v.jws.IntDate={},v.jws.IntDate.get=function(r){var l=v.jws.IntDate,o=l.getNow,h=l.getZulu;if(r=="now")return o();if(r=="now + 1hour")return o()+3600;if(r=="now + 1day")return o()+3600*24;if(r=="now + 1month")return o()+3600*24*30;if(r=="now + 1year")return o()+3600*24*365;if(r.match(/Z$/))return h(r);if(r.match(/^[0-9]+$/))return parseInt(r);throw"unsupported format: "+r},v.jws.IntDate.getZulu=function(r){return Pu(r)},v.jws.IntDate.getNow=function(){var r=~~(new Date/1e3);return r},v.jws.IntDate.intDate2UTCString=function(r){var l=new Date(r*1e3);return l.toUTCString()},v.jws.IntDate.intDate2Zulu=function(r){var l=new Date(r*1e3),o=("0000"+l.getUTCFullYear()).slice(-4),h=("00"+(l.getUTCMonth()+1)).slice(-2),b=("00"+l.getUTCDate()).slice(-2),D=("00"+l.getUTCHours()).slice(-2),x=("00"+l.getUTCMinutes()).slice(-2),_=("00"+l.getUTCSeconds()).slice(-2);return o+h+b+D+x+_+"Z"},(typeof v>"u"||!v)&&(v={}),(typeof v.jws>"u"||!v.jws)&&(v.jws={}),v.jws.JWSJS=function(){var r=v,l=r.jws,o=l.JWS,h=o.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(b){this.init();var D=b.split(".");if(D.length!=3)throw"malformed input JWS";this.aHeader.push(D[0]),this.sPayload=D[1],this.aSignature.push(D[2])},this.addSignature=function(b,D,x,_){if(this.sPayload===void 0||this.sPayload===null)throw"there's no JSON-JS signature to add.";var M=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var K=v.jws.JWS.sign(b,D,this.sPayload,x,_),ht=K.split("."),mt=ht[0],P=ht[2];this.aHeader.push(ht[0]),this.aSignature.push(ht[2])}catch(I){throw this.aHeader.length>M&&this.aHeader.pop(),this.aSignature.length>M&&this.aSignature.pop(),"addSignature failed: "+I}},this.verifyAll=function(b){if(this.aHeader.length!==b.length||this.aSignature.length!==b.length)return!1;for(var D=0;D<b.length;D++){var x=b[D];if(x.length!==2)return!1;var _=this.verifyNth(D,x[0],x[1]);if(_===!1)return!1}return!0},this.verifyNth=function(b,D,x){if(this.aHeader.length<=b||this.aSignature.length<=b)return!1;var _=this.aHeader[b],M=this.aSignature[b],K=_+"."+this.sPayload+"."+M,ht=!1;try{ht=o.verify(K,D,x)}catch{return!1}return ht},this.readJWSJS=function(b){if(typeof b=="string"){var D=h(b);if(D==null)throw"argument is not safe JSON object string";this.aHeader=D.headers,this.sPayload=D.payload,this.aSignature=D.signatures}else try{if(b.headers.length>0)this.aHeader=b.headers;else throw"malformed header";if(typeof b.payload=="string")this.sPayload=b.payload;else throw"malformed signatures";if(b.signatures.length>0)this.aSignature=b.signatures;else throw"malformed signatures"}catch(x){throw"malformed JWS-JS JSON object: "+x}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return this.aHeader.length==0?1:0}},t.SecureRandom=nn,t.rng_seed_time=Rt,t.BigInteger=w,t.RSAKey=Er,t.ECDSA=v.crypto.ECDSA,t.DSA=v.crypto.DSA,t.Signature=v.crypto.Signature,t.MessageDigest=v.crypto.MessageDigest,t.Mac=v.crypto.Mac,t.KEYUTIL=Tr,t.ASN1HEX=Je,t.X509=nr,t.X509CRL=$a,t.CryptoJS=p,t.b64tohex=m,t.b64toBA=C,t.ECFieldElementFp=En,t.ECPointFp=sn,t.ECCurveFp=Yn,t.stoBA=xu,t.BAtos=Zs,t.BAtohex=Ai,t.stohex=cs,t.stob64=Pn,t.stob64u=li,t.b64utos=ct,t.b64tob64u=Rr,t.b64utob64=Vs,t.hex2b64=E,t.hextob64u=vn,t.b64utohex=Dn,t.utf8tob64u=be,t.b64utoutf8=gs,t.utf8tob64=hu,t.b64toutf8=Ji,t.utf8tohex=_u,t.hextoutf8=xr,t.hextorstr=dr,t.rstrtohex=kn,t.hextob64=Bu,t.hextob64nl=Ru,t.b64nltohex=$u,t.hextopem=Pe,t.pemtohex=On,t.hextoArrayBuffer=ku,t.ArrayBuffertohex=oa,t.zulutomsec=Ou,t.msectozulu=ca,t.zulutosec=Pu,t.zulutodate=Nu,t.datetozulu=Ia,t.uricmptohex=fu,t.hextouricmp=Xi,t.ipv6tohex=wi,t.hextoipv6=du,t.hextoip=Ss,t.iptohex=gu,t.ucs2hextoutf8=Tu,t.encodeURIComponentAll=ti,t.newline_toUnix=Nn,t.newline_toDos=Qi,t.hextoposhex=yu,t.intarystrtohex=Ra,t.strdiffidx=fa,t.oidtohex=zs,t.hextooid=me,t.strpad=pr,t.bitstrtoint=Or,t.inttobitstr=un,t.bitstrtobinstr=Gn,t.binstrtobitstr=An,t.isBase64URLDot=Ni,t.namearraytobinstr=Fi,t.extendClass=je,t.foldnl=ms,t.b64topem=Oi,t.pemtob64=Pi,t.timeogen=Qs,t.aryval=Fn,t.inttohex=Le,t.twoscompl=ke,t.KJUR=v,t.crypto=v.crypto,t.asn1=v.asn1,t.jws=v.jws,t.lang=v.lang,t.VERSION=u,t.VERSION_FULL=s}),Zo=ce((t,e)=>{"use strict";function n(E){return typeof E>"u"||E===null}function u(E){return typeof E=="object"&&E!==null}function s(E){return Array.isArray(E)?E:n(E)?[]:[E]}function p(E,m){var C,a,H,X;if(m)for(X=Object.keys(m),C=0,a=X.length;C<a;C+=1)H=X[C],E[H]=m[H];return E}function g(E,m){var C="",a;for(a=0;a<m;a+=1)C+=E;return C}function y(E){return E===0&&Number.NEGATIVE_INFINITY===1/E}e.exports.isNothing=n,e.exports.isObject=u,e.exports.toArray=s,e.exports.repeat=g,e.exports.isNegativeZero=y,e.exports.extend=p}),pc=ce((t,e)=>{"use strict";function n(u,s){Error.call(this),this.name="YAMLException",this.reason=u,this.mark=s,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n.prototype.toString=function(u){var s=this.name+": ";return s+=this.reason||"(unknown reason)",!u&&this.mark&&(s+=" "+this.mark.toString()),s},e.exports=n}),iy=ce((t,e)=>{"use strict";var n=Zo();function u(s,p,g,y,E){this.name=s,this.buffer=p,this.position=g,this.line=y,this.column=E}u.prototype.getSnippet=function(s,p){var g,y,E,m,C;if(!this.buffer)return null;for(s=s||4,p=p||75,g="",y=this.position;y>0&&`\0\r
\x85\u2028\u2029`.indexOf(this.buffer.charAt(y-1))===-1;)if(y-=1,this.position-y>p/2-1){g=" ... ",y+=5;break}for(E="",m=this.position;m<this.buffer.length&&`\0\r
\x85\u2028\u2029`.indexOf(this.buffer.charAt(m))===-1;)if(m+=1,m-this.position>p/2-1){E=" ... ",m-=5;break}return C=this.buffer.slice(y,m),n.repeat(" ",s)+g+C+E+`
`+n.repeat(" ",s+this.position-y+g.length)+"^"},u.prototype.toString=function(s){var p,g="";return this.name&&(g+='in "'+this.name+'" '),g+="at line "+(this.line+1)+", column "+(this.column+1),s||(p=this.getSnippet(),p&&(g+=`:
`+p)),g},e.exports=u}),an=ce((t,e)=>{"use strict";var n=pc(),u=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],s=["scalar","sequence","mapping"];function p(y){var E={};return y!==null&&Object.keys(y).forEach(function(m){y[m].forEach(function(C){E[String(C)]=m})}),E}function g(y,E){if(E=E||{},Object.keys(E).forEach(function(m){if(u.indexOf(m)===-1)throw new n('Unknown option "'+m+'" is met in definition of "'+y+'" YAML type.')}),this.tag=y,this.kind=E.kind||null,this.resolve=E.resolve||function(){return!0},this.construct=E.construct||function(m){return m},this.instanceOf=E.instanceOf||null,this.predicate=E.predicate||null,this.represent=E.represent||null,this.defaultStyle=E.defaultStyle||null,this.styleAliases=p(E.styleAliases||null),s.indexOf(this.kind)===-1)throw new n('Unknown kind "'+this.kind+'" is specified for "'+y+'" YAML type.')}e.exports=g}),Qo=ce((t,e)=>{"use strict";var n=Zo(),u=pc(),s=an();function p(E,m,C){var a=[];return E.include.forEach(function(H){C=p(H,m,C)}),E[m].forEach(function(H){C.forEach(function(X,w){X.tag===H.tag&&X.kind===H.kind&&a.push(w)}),C.push(H)}),C.filter(function(H,X){return a.indexOf(X)===-1})}function g(){var E={scalar:{},sequence:{},mapping:{},fallback:{}},m,C;function a(H){E[H.kind][H.tag]=E.fallback[H.tag]=H}for(m=0,C=arguments.length;m<C;m+=1)arguments[m].forEach(a);return E}function y(E){this.include=E.include||[],this.implicit=E.implicit||[],this.explicit=E.explicit||[],this.implicit.forEach(function(m){if(m.loadKind&&m.loadKind!=="scalar")throw new u("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=p(this,"implicit",[]),this.compiledExplicit=p(this,"explicit",[]),this.compiledTypeMap=g(this.compiledImplicit,this.compiledExplicit)}y.DEFAULT=null,y.create=function(){var E,m;switch(arguments.length){case 1:E=y.DEFAULT,m=arguments[0];break;case 2:E=arguments[0],m=arguments[1];break;default:throw new u("Wrong number of arguments for Schema.create function")}if(E=n.toArray(E),m=n.toArray(m),!E.every(function(C){return C instanceof y}))throw new u("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!m.every(function(C){return C instanceof s}))throw new u("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new y({include:E,explicit:m})},e.exports=y}),cy=ce((t,e)=>{"use strict";var n=an();e.exports=new n("tag:yaml.org,2002:str",{kind:"scalar",construct:function(u){return u!==null?u:""}})}),hy=ce((t,e)=>{"use strict";var n=an();e.exports=new n("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(u){return u!==null?u:[]}})}),py=ce((t,e)=>{"use strict";var n=an();e.exports=new n("tag:yaml.org,2002:map",{kind:"mapping",construct:function(u){return u!==null?u:{}}})}),Cp=ce((t,e)=>{"use strict";var n=Qo();e.exports=new n({explicit:[cy(),hy(),py()]})}),vy=ce((t,e)=>{"use strict";var n=an();function u(g){if(g===null)return!0;var y=g.length;return y===1&&g==="~"||y===4&&(g==="null"||g==="Null"||g==="NULL")}function s(){return null}function p(g){return g===null}e.exports=new n("tag:yaml.org,2002:null",{kind:"scalar",resolve:u,construct:s,predicate:p,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})}),Ey=ce((t,e)=>{"use strict";var n=an();function u(g){if(g===null)return!1;var y=g.length;return y===4&&(g==="true"||g==="True"||g==="TRUE")||y===5&&(g==="false"||g==="False"||g==="FALSE")}function s(g){return g==="true"||g==="True"||g==="TRUE"}function p(g){return Object.prototype.toString.call(g)==="[object Boolean]"}e.exports=new n("tag:yaml.org,2002:bool",{kind:"scalar",resolve:u,construct:s,predicate:p,represent:{lowercase:function(g){return g?"true":"false"},uppercase:function(g){return g?"TRUE":"FALSE"},camelcase:function(g){return g?"True":"False"}},defaultStyle:"lowercase"})}),by=ce((t,e)=>{"use strict";var n=Zo(),u=an();function s(C){return 48<=C&&C<=57||65<=C&&C<=70||97<=C&&C<=102}function p(C){return 48<=C&&C<=55}function g(C){return 48<=C&&C<=57}function y(C){if(C===null)return!1;var a=C.length,H=0,X=!1,w;if(!a)return!1;if(w=C[H],(w==="-"||w==="+")&&(w=C[++H]),w==="0"){if(H+1===a)return!0;if(w=C[++H],w==="b"){for(H++;H<a;H++)if(w=C[H],w!=="_"){if(w!=="0"&&w!=="1")return!1;X=!0}return X&&w!=="_"}if(w==="x"){for(H++;H<a;H++)if(w=C[H],w!=="_"){if(!s(C.charCodeAt(H)))return!1;X=!0}return X&&w!=="_"}for(;H<a;H++)if(w=C[H],w!=="_"){if(!p(C.charCodeAt(H)))return!1;X=!0}return X&&w!=="_"}if(w==="_")return!1;for(;H<a;H++)if(w=C[H],w!=="_"){if(w===":")break;if(!g(C.charCodeAt(H)))return!1;X=!0}return!X||w==="_"?!1:w!==":"?!0:/^(:[0-5]?[0-9])+$/.test(C.slice(H))}function E(C){var a=C,H=1,X,w,j=[];return a.indexOf("_")!==-1&&(a=a.replace(/_/g,"")),X=a[0],(X==="-"||X==="+")&&(X==="-"&&(H=-1),a=a.slice(1),X=a[0]),a==="0"?0:X==="0"?a[1]==="b"?H*parseInt(a.slice(2),2):a[1]==="x"?H*parseInt(a,16):H*parseInt(a,8):a.indexOf(":")!==-1?(a.split(":").forEach(function(tt){j.unshift(parseInt(tt,10))}),a=0,w=1,j.forEach(function(tt){a+=tt*w,w*=60}),H*a):H*parseInt(a,10)}function m(C){return Object.prototype.toString.call(C)==="[object Number]"&&C%1===0&&!n.isNegativeZero(C)}e.exports=new u("tag:yaml.org,2002:int",{kind:"scalar",resolve:y,construct:E,predicate:m,represent:{binary:function(C){return C>=0?"0b"+C.toString(2):"-0b"+C.toString(2).slice(1)},octal:function(C){return C>=0?"0"+C.toString(8):"-0"+C.toString(8).slice(1)},decimal:function(C){return C.toString(10)},hexadecimal:function(C){return C>=0?"0x"+C.toString(16).toUpperCase():"-0x"+C.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})}),Cy=ce((t,e)=>{"use strict";var n=Zo(),u=an(),s=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function p(C){return!(C===null||!s.test(C)||C[C.length-1]==="_")}function g(C){var a,H,X,w;return a=C.replace(/_/g,"").toLowerCase(),H=a[0]==="-"?-1:1,w=[],"+-".indexOf(a[0])>=0&&(a=a.slice(1)),a===".inf"?H===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:a===".nan"?NaN:a.indexOf(":")>=0?(a.split(":").forEach(function(j){w.unshift(parseFloat(j,10))}),a=0,X=1,w.forEach(function(j){a+=j*X,X*=60}),H*a):H*parseFloat(a,10)}var y=/^[-+]?[0-9]+e/;function E(C,a){var H;if(isNaN(C))switch(a){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===C)switch(a){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===C)switch(a){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(n.isNegativeZero(C))return"-0.0";return H=C.toString(10),y.test(H)?H.replace("e",".e"):H}function m(C){return Object.prototype.toString.call(C)==="[object Number]"&&(C%1!==0||n.isNegativeZero(C))}e.exports=new u("tag:yaml.org,2002:float",{kind:"scalar",resolve:p,construct:g,predicate:m,represent:E,defaultStyle:"lowercase"})}),hm=ce((t,e)=>{"use strict";var n=Qo();e.exports=new n({include:[Cp()],implicit:[vy(),Ey(),by(),Cy()]})}),dm=ce((t,e)=>{"use strict";var n=Qo();e.exports=new n({include:[hm()]})}),$y=ce((t,e)=>{"use strict";var n=an(),u=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),s=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function p(E){return E===null?!1:u.exec(E)!==null||s.exec(E)!==null}function g(E){var m,C,a,H,X,w,j,tt=0,J=null,N,Q,at;if(m=u.exec(E),m===null&&(m=s.exec(E)),m===null)throw new Error("Date resolve error");if(C=+m[1],a=+m[2]-1,H=+m[3],!m[4])return new Date(Date.UTC(C,a,H));if(X=+m[4],w=+m[5],j=+m[6],m[7]){for(tt=m[7].slice(0,3);tt.length<3;)tt+="0";tt=+tt}return m[9]&&(N=+m[10],Q=+(m[11]||0),J=(N*60+Q)*6e4,m[9]==="-"&&(J=-J)),at=new Date(Date.UTC(C,a,H,X,w,j,tt)),J&&at.setTime(at.getTime()-J),at}function y(E){return E.toISOString()}e.exports=new n("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:p,construct:g,instanceOf:Date,represent:y})}),Py=ce((t,e)=>{"use strict";var n=an();function u(s){return s==="<<"||s===null}e.exports=new n("tag:yaml.org,2002:merge",{kind:"scalar",resolve:u})}),xy=ce((t,e)=>{"use strict";var n;try{u=Lo,n=u("buffer").Buffer}catch{}var u,s=an(),p=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function g(C){if(C===null)return!1;var a,H,X=0,w=C.length,j=p;for(H=0;H<w;H++)if(a=j.indexOf(C.charAt(H)),!(a>64)){if(a<0)return!1;X+=6}return X%8===0}function y(C){var a,H,X=C.replace(/[\r\n=]/g,""),w=X.length,j=p,tt=0,J=[];for(a=0;a<w;a++)a%4===0&&a&&(J.push(tt>>16&255),J.push(tt>>8&255),J.push(tt&255)),tt=tt<<6|j.indexOf(X.charAt(a));return H=w%4*6,H===0?(J.push(tt>>16&255),J.push(tt>>8&255),J.push(tt&255)):H===18?(J.push(tt>>10&255),J.push(tt>>2&255)):H===12&&J.push(tt>>4&255),n?n.from?n.from(J):new n(J):J}function E(C){var a="",H=0,X,w,j=C.length,tt=p;for(X=0;X<j;X++)X%3===0&&X&&(a+=tt[H>>18&63],a+=tt[H>>12&63],a+=tt[H>>6&63],a+=tt[H&63]),H=(H<<8)+C[X];return w=j%3,w===0?(a+=tt[H>>18&63],a+=tt[H>>12&63],a+=tt[H>>6&63],a+=tt[H&63]):w===2?(a+=tt[H>>10&63],a+=tt[H>>4&63],a+=tt[H<<2&63],a+=tt[64]):w===1&&(a+=tt[H>>2&63],a+=tt[H<<4&63],a+=tt[64],a+=tt[64]),a}function m(C){return n&&n.isBuffer(C)}e.exports=new s("tag:yaml.org,2002:binary",{kind:"scalar",resolve:g,construct:y,predicate:m,represent:E})}),ky=ce((t,e)=>{"use strict";var n=an(),u=Object.prototype.hasOwnProperty,s=Object.prototype.toString;function p(y){if(y===null)return!0;var E=[],m,C,a,H,X,w=y;for(m=0,C=w.length;m<C;m+=1){if(a=w[m],X=!1,s.call(a)!=="[object Object]")return!1;for(H in a)if(u.call(a,H))if(!X)X=!0;else return!1;if(!X)return!1;if(E.indexOf(H)===-1)E.push(H);else return!1}return!0}function g(y){return y!==null?y:[]}e.exports=new n("tag:yaml.org,2002:omap",{kind:"sequence",resolve:p,construct:g})}),Uy=ce((t,e)=>{"use strict";var n=an(),u=Object.prototype.toString;function s(g){if(g===null)return!0;var y,E,m,C,a,H=g;for(a=new Array(H.length),y=0,E=H.length;y<E;y+=1){if(m=H[y],u.call(m)!=="[object Object]"||(C=Object.keys(m),C.length!==1))return!1;a[y]=[C[0],m[C[0]]]}return!0}function p(g){if(g===null)return[];var y,E,m,C,a,H=g;for(a=new Array(H.length),y=0,E=H.length;y<E;y+=1)m=H[y],C=Object.keys(m),a[y]=[C[0],m[C[0]]];return a}e.exports=new n("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:s,construct:p})}),Hy=ce((t,e)=>{"use strict";var n=an(),u=Object.prototype.hasOwnProperty;function s(g){if(g===null)return!0;var y,E=g;for(y in E)if(u.call(E,y)&&E[y]!==null)return!1;return!0}function p(g){return g!==null?g:{}}e.exports=new n("tag:yaml.org,2002:set",{kind:"mapping",resolve:s,construct:p})}),mc=ce((t,e)=>{"use strict";var n=Qo();e.exports=new n({include:[dm()],implicit:[$y(),Py()],explicit:[xy(),ky(),Uy(),Hy()]})}),Vy=ce((t,e)=>{"use strict";var n=an();function u(){return!0}function s(){}function p(){return""}function g(y){return typeof y>"u"}e.exports=new n("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:u,construct:s,predicate:g,represent:p})}),zy=ce((t,e)=>{"use strict";var n=an();function u(y){if(y===null||y.length===0)return!1;var E=y,m=/\/([gim]*)$/.exec(y),C="";return!(E[0]==="/"&&(m&&(C=m[1]),C.length>3||E[E.length-C.length-1]!=="/"))}function s(y){var E=y,m=/\/([gim]*)$/.exec(y),C="";return E[0]==="/"&&(m&&(C=m[1]),E=E.slice(1,E.length-C.length-1)),new RegExp(E,C)}function p(y){var E="/"+y.source+"/";return y.global&&(E+="g"),y.multiline&&(E+="m"),y.ignoreCase&&(E+="i"),E}function g(y){return Object.prototype.toString.call(y)==="[object RegExp]"}e.exports=new n("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:u,construct:s,predicate:g,represent:p})}),Wy=ce((t,e)=>{"use strict";var n;try{u=Lo,n=u("esprima")}catch{typeof window<"u"&&(n=window.esprima)}var u,s=an();function p(m){if(m===null)return!1;try{var C="("+m+")",a=n.parse(C,{range:!0});return!(a.type!=="Program"||a.body.length!==1||a.body[0].type!=="ExpressionStatement"||a.body[0].expression.type!=="ArrowFunctionExpression"&&a.body[0].expression.type!=="FunctionExpression")}catch{return!1}}function g(m){var C="("+m+")",a=n.parse(C,{range:!0}),H=[],X;if(a.type!=="Program"||a.body.length!==1||a.body[0].type!=="ExpressionStatement"||a.body[0].expression.type!=="ArrowFunctionExpression"&&a.body[0].expression.type!=="FunctionExpression")throw new Error("Failed to resolve function");return a.body[0].expression.params.forEach(function(w){H.push(w.name)}),X=a.body[0].expression.body.range,a.body[0].expression.body.type==="BlockStatement"?new Function(H,C.slice(X[0]+1,X[1]-1)):new Function(H,"return "+C.slice(X[0],X[1]))}function y(m){return m.toString()}function E(m){return Object.prototype.toString.call(m)==="[object Function]"}e.exports=new s("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:p,construct:g,predicate:E,represent:y})}),jf=ce((t,e)=>{"use strict";var n=Qo();e.exports=n.DEFAULT=new n({include:[mc()],explicit:[Vy(),zy(),Wy()]})}),m_=ce((t,e)=>{"use strict";var n=Zo(),u=pc(),s=iy(),p=mc(),g=jf(),y=Object.prototype.hasOwnProperty,E=1,m=2,C=3,a=4,H=1,X=2,w=3,j=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,tt=/[\x85\u2028\u2029]/,J=/[,\[\]\{\}]/,N=/^(?:!|!!|![a-z\-]+!)$/i,Q=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function at(L){return Object.prototype.toString.call(L)}function q(L){return L===10||L===13}function U(L){return L===9||L===32}function V(L){return L===9||L===32||L===10||L===13}function lt(L){return L===44||L===91||L===93||L===123||L===125}function It(L){var f;return 48<=L&&L<=57?L-48:(f=L|32,97<=f&&f<=102?f-97+10:-1)}function Ot(L){return L===120?2:L===117?4:L===85?8:0}function yt(L){return 48<=L&&L<=57?L-48:-1}function Et(L){return L===48?"\0":L===97?"\x07":L===98?"\b":L===116||L===9?"	":L===110?`
`:L===118?"\v":L===102?"\f":L===114?"\r":L===101?"\x1B":L===32?" ":L===34?'"':L===47?"/":L===92?"\\":L===78?"\x85":L===95?"\xA0":L===76?"\u2028":L===80?"\u2029":""}function vt(L){return L<=65535?String.fromCharCode(L):String.fromCharCode((L-65536>>10)+55296,(L-65536&1023)+56320)}var Yt=new Array(256),Xt=new Array(256);for(re=0;re<256;re++)Yt[re]=Et(re)?1:0,Xt[re]=Et(re);var re;function ae(L,f){this.input=L,this.filename=f.filename||null,this.schema=f.schema||g,this.onWarning=f.onWarning||null,this.legacy=f.legacy||!1,this.json=f.json||!1,this.listener=f.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=L.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function He(L,f){return new u(f,new s(L.filename,L.input,L.position,L.line,L.position-L.lineStart))}function de(L,f){throw He(L,f)}function pe(L,f){L.onWarning&&L.onWarning.call(null,He(L,f))}var Ce={YAML:function(L,f,S){var W,Bt,Nt;L.version!==null&&de(L,"duplication of %YAML directive"),S.length!==1&&de(L,"YAML directive accepts exactly one argument"),W=/^([0-9]+)\.([0-9]+)$/.exec(S[0]),W===null&&de(L,"ill-formed argument of the YAML directive"),Bt=parseInt(W[1],10),Nt=parseInt(W[2],10),Bt!==1&&de(L,"unacceptable YAML version of the document"),L.version=S[0],L.checkLineBreaks=Nt<2,Nt!==1&&Nt!==2&&pe(L,"unsupported YAML version of the document")},TAG:function(L,f,S){var W,Bt;S.length!==2&&de(L,"TAG directive accepts exactly two arguments"),W=S[0],Bt=S[1],N.test(W)||de(L,"ill-formed tag handle (first argument) of the TAG directive"),y.call(L.tagMap,W)&&de(L,'there is a previously declared suffix for "'+W+'" tag handle'),Q.test(Bt)||de(L,"ill-formed tag prefix (second argument) of the TAG directive"),L.tagMap[W]=Bt}};function Ie(L,f,S,W){var Bt,Nt,nt,zt;if(f<S){if(zt=L.input.slice(f,S),W)for(Bt=0,Nt=zt.length;Bt<Nt;Bt+=1)nt=zt.charCodeAt(Bt),nt===9||32<=nt&&nt<=1114111||de(L,"expected valid JSON character");else j.test(zt)&&de(L,"the stream contains non-printable characters");L.result+=zt}}function Ve(L,f,S,W){var Bt,Nt,nt,zt;for(n.isObject(S)||de(L,"cannot merge mappings; the provided source object is unacceptable"),Bt=Object.keys(S),nt=0,zt=Bt.length;nt<zt;nt+=1)Nt=Bt[nt],y.call(f,Nt)||(f[Nt]=S[Nt],W[Nt]=!0)}function We(L,f,S,W,Bt,Nt,nt,zt){var Lt,Be;if(Array.isArray(Bt))for(Bt=Array.prototype.slice.call(Bt),Lt=0,Be=Bt.length;Lt<Be;Lt+=1)Array.isArray(Bt[Lt])&&de(L,"nested arrays are not supported inside keys"),typeof Bt=="object"&&at(Bt[Lt])==="[object Object]"&&(Bt[Lt]="[object Object]");if(typeof Bt=="object"&&at(Bt)==="[object Object]"&&(Bt="[object Object]"),Bt=String(Bt),f===null&&(f={}),W==="tag:yaml.org,2002:merge")if(Array.isArray(Nt))for(Lt=0,Be=Nt.length;Lt<Be;Lt+=1)Ve(L,f,Nt[Lt],S);else Ve(L,f,Nt,S);else!L.json&&!y.call(S,Bt)&&y.call(f,Bt)&&(L.line=nt||L.line,L.position=zt||L.position,de(L,"duplicated mapping key")),f[Bt]=Nt,delete S[Bt];return f}function we(L){var f;f=L.input.charCodeAt(L.position),f===10?L.position++:f===13?(L.position++,L.input.charCodeAt(L.position)===10&&L.position++):de(L,"a line break is expected"),L.line+=1,L.lineStart=L.position}function Se(L,f,S){for(var W=0,Bt=L.input.charCodeAt(L.position);Bt!==0;){for(;U(Bt);)Bt=L.input.charCodeAt(++L.position);if(f&&Bt===35)do Bt=L.input.charCodeAt(++L.position);while(Bt!==10&&Bt!==13&&Bt!==0);if(q(Bt))for(we(L),Bt=L.input.charCodeAt(L.position),W++,L.lineIndent=0;Bt===32;)L.lineIndent++,Bt=L.input.charCodeAt(++L.position);else break}return S!==-1&&W!==0&&L.lineIndent<S&&pe(L,"deficient indentation"),W}function Qe(L){var f=L.position,S;return S=L.input.charCodeAt(f),!!((S===45||S===46)&&S===L.input.charCodeAt(f+1)&&S===L.input.charCodeAt(f+2)&&(f+=3,S=L.input.charCodeAt(f),S===0||V(S)))}function Ke(L,f){f===1?L.result+=" ":f>1&&(L.result+=n.repeat(`
`,f-1))}function Ze(L,f,S){var W,Bt,Nt,nt,zt,Lt,Be,_t,gt=L.kind,rt=L.result,F;if(F=L.input.charCodeAt(L.position),V(F)||lt(F)||F===35||F===38||F===42||F===33||F===124||F===62||F===39||F===34||F===37||F===64||F===96||(F===63||F===45)&&(Bt=L.input.charCodeAt(L.position+1),V(Bt)||S&&lt(Bt)))return!1;for(L.kind="scalar",L.result="",Nt=nt=L.position,zt=!1;F!==0;){if(F===58){if(Bt=L.input.charCodeAt(L.position+1),V(Bt)||S&&lt(Bt))break}else if(F===35){if(W=L.input.charCodeAt(L.position-1),V(W))break}else{if(L.position===L.lineStart&&Qe(L)||S&&lt(F))break;if(q(F))if(Lt=L.line,Be=L.lineStart,_t=L.lineIndent,Se(L,!1,-1),L.lineIndent>=f){zt=!0,F=L.input.charCodeAt(L.position);continue}else{L.position=nt,L.line=Lt,L.lineStart=Be,L.lineIndent=_t;break}}zt&&(Ie(L,Nt,nt,!1),Ke(L,L.line-Lt),Nt=nt=L.position,zt=!1),U(F)||(nt=L.position+1),F=L.input.charCodeAt(++L.position)}return Ie(L,Nt,nt,!1),L.result?!0:(L.kind=gt,L.result=rt,!1)}function vr(L,f){var S,W,Bt;if(S=L.input.charCodeAt(L.position),S!==39)return!1;for(L.kind="scalar",L.result="",L.position++,W=Bt=L.position;(S=L.input.charCodeAt(L.position))!==0;)if(S===39)if(Ie(L,W,L.position,!0),S=L.input.charCodeAt(++L.position),S===39)W=L.position,L.position++,Bt=L.position;else return!0;else q(S)?(Ie(L,W,Bt,!0),Ke(L,Se(L,!1,f)),W=Bt=L.position):L.position===L.lineStart&&Qe(L)?de(L,"unexpected end of the document within a single quoted scalar"):(L.position++,Bt=L.position);de(L,"unexpected end of the stream within a single quoted scalar")}function Pr(L,f){var S,W,Bt,Nt,nt,zt;if(zt=L.input.charCodeAt(L.position),zt!==34)return!1;for(L.kind="scalar",L.result="",L.position++,S=W=L.position;(zt=L.input.charCodeAt(L.position))!==0;){if(zt===34)return Ie(L,S,L.position,!0),L.position++,!0;if(zt===92){if(Ie(L,S,L.position,!0),zt=L.input.charCodeAt(++L.position),q(zt))Se(L,!1,f);else if(zt<256&&Yt[zt])L.result+=Xt[zt],L.position++;else if((nt=Ot(zt))>0){for(Bt=nt,Nt=0;Bt>0;Bt--)zt=L.input.charCodeAt(++L.position),(nt=It(zt))>=0?Nt=(Nt<<4)+nt:de(L,"expected hexadecimal character");L.result+=vt(Nt),L.position++}else de(L,"unknown escape sequence");S=W=L.position}else q(zt)?(Ie(L,S,W,!0),Ke(L,Se(L,!1,f)),S=W=L.position):L.position===L.lineStart&&Qe(L)?de(L,"unexpected end of the document within a double quoted scalar"):(L.position++,W=L.position)}de(L,"unexpected end of the stream within a double quoted scalar")}function Cr(L,f){var S=!0,W,Bt=L.tag,Nt,nt=L.anchor,zt,Lt,Be,_t,gt,rt={},F,st,wt,Ct;if(Ct=L.input.charCodeAt(L.position),Ct===91)Lt=93,gt=!1,Nt=[];else if(Ct===123)Lt=125,gt=!0,Nt={};else return!1;for(L.anchor!==null&&(L.anchorMap[L.anchor]=Nt),Ct=L.input.charCodeAt(++L.position);Ct!==0;){if(Se(L,!0,f),Ct=L.input.charCodeAt(L.position),Ct===Lt)return L.position++,L.tag=Bt,L.anchor=nt,L.kind=gt?"mapping":"sequence",L.result=Nt,!0;S||de(L,"missed comma between flow collection entries"),st=F=wt=null,Be=_t=!1,Ct===63&&(zt=L.input.charCodeAt(L.position+1),V(zt)&&(Be=_t=!0,L.position++,Se(L,!0,f))),W=L.line,fr(L,f,E,!1,!0),st=L.tag,F=L.result,Se(L,!0,f),Ct=L.input.charCodeAt(L.position),(_t||L.line===W)&&Ct===58&&(Be=!0,Ct=L.input.charCodeAt(++L.position),Se(L,!0,f),fr(L,f,E,!1,!0),wt=L.result),gt?We(L,Nt,rt,st,F,wt):Be?Nt.push(We(L,null,rt,st,F,wt)):Nt.push(F),Se(L,!0,f),Ct=L.input.charCodeAt(L.position),Ct===44?(S=!0,Ct=L.input.charCodeAt(++L.position)):S=!1}de(L,"unexpected end of the stream within a flow collection")}function et(L,f){var S,W,Bt=H,Nt=!1,nt=!1,zt=f,Lt=0,Be=!1,_t,gt;if(gt=L.input.charCodeAt(L.position),gt===124)W=!1;else if(gt===62)W=!0;else return!1;for(L.kind="scalar",L.result="";gt!==0;)if(gt=L.input.charCodeAt(++L.position),gt===43||gt===45)H===Bt?Bt=gt===43?w:X:de(L,"repeat of a chomping mode identifier");else if((_t=yt(gt))>=0)_t===0?de(L,"bad explicit indentation width of a block scalar; it cannot be less than one"):nt?de(L,"repeat of an indentation width identifier"):(zt=f+_t-1,nt=!0);else break;if(U(gt)){do gt=L.input.charCodeAt(++L.position);while(U(gt));if(gt===35)do gt=L.input.charCodeAt(++L.position);while(!q(gt)&&gt!==0)}for(;gt!==0;){for(we(L),L.lineIndent=0,gt=L.input.charCodeAt(L.position);(!nt||L.lineIndent<zt)&&gt===32;)L.lineIndent++,gt=L.input.charCodeAt(++L.position);if(!nt&&L.lineIndent>zt&&(zt=L.lineIndent),q(gt)){Lt++;continue}if(L.lineIndent<zt){Bt===w?L.result+=n.repeat(`
`,Nt?1+Lt:Lt):Bt===H&&Nt&&(L.result+=`
`);break}for(W?U(gt)?(Be=!0,L.result+=n.repeat(`
`,Nt?1+Lt:Lt)):Be?(Be=!1,L.result+=n.repeat(`
`,Lt+1)):Lt===0?Nt&&(L.result+=" "):L.result+=n.repeat(`
`,Lt):L.result+=n.repeat(`
`,Nt?1+Lt:Lt),Nt=!0,nt=!0,Lt=0,S=L.position;!q(gt)&&gt!==0;)gt=L.input.charCodeAt(++L.position);Ie(L,S,L.position,!1)}return!0}function k(L,f){var S,W=L.tag,Bt=L.anchor,Nt=[],nt,zt=!1,Lt;for(L.anchor!==null&&(L.anchorMap[L.anchor]=Nt),Lt=L.input.charCodeAt(L.position);Lt!==0&&!(Lt!==45||(nt=L.input.charCodeAt(L.position+1),!V(nt)));){if(zt=!0,L.position++,Se(L,!0,-1)&&L.lineIndent<=f){Nt.push(null),Lt=L.input.charCodeAt(L.position);continue}if(S=L.line,fr(L,f,C,!1,!0),Nt.push(L.result),Se(L,!0,-1),Lt=L.input.charCodeAt(L.position),(L.line===S||L.lineIndent>f)&&Lt!==0)de(L,"bad indentation of a sequence entry");else if(L.lineIndent<f)break}return zt?(L.tag=W,L.anchor=Bt,L.kind="sequence",L.result=Nt,!0):!1}function Z(L,f,S){var W,Bt,Nt,nt,zt=L.tag,Lt=L.anchor,Be={},_t={},gt=null,rt=null,F=null,st=!1,wt=!1,Ct;for(L.anchor!==null&&(L.anchorMap[L.anchor]=Be),Ct=L.input.charCodeAt(L.position);Ct!==0;){if(W=L.input.charCodeAt(L.position+1),Nt=L.line,nt=L.position,(Ct===63||Ct===58)&&V(W))Ct===63?(st&&(We(L,Be,_t,gt,rt,null),gt=rt=F=null),wt=!0,st=!0,Bt=!0):st?(st=!1,Bt=!0):de(L,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),L.position+=1,Ct=W;else if(fr(L,S,m,!1,!0))if(L.line===Nt){for(Ct=L.input.charCodeAt(L.position);U(Ct);)Ct=L.input.charCodeAt(++L.position);if(Ct===58)Ct=L.input.charCodeAt(++L.position),V(Ct)||de(L,"a whitespace character is expected after the key-value separator within a block mapping"),st&&(We(L,Be,_t,gt,rt,null),gt=rt=F=null),wt=!0,st=!1,Bt=!1,gt=L.tag,rt=L.result;else if(wt)de(L,"can not read an implicit mapping pair; a colon is missed");else return L.tag=zt,L.anchor=Lt,!0}else if(wt)de(L,"can not read a block mapping entry; a multiline key may not be an implicit key");else return L.tag=zt,L.anchor=Lt,!0;else break;if((L.line===Nt||L.lineIndent>f)&&(fr(L,f,a,!0,Bt)&&(st?rt=L.result:F=L.result),st||(We(L,Be,_t,gt,rt,F,Nt,nt),gt=rt=F=null),Se(L,!0,-1),Ct=L.input.charCodeAt(L.position)),L.lineIndent>f&&Ct!==0)de(L,"bad indentation of a mapping entry");else if(L.lineIndent<f)break}return st&&We(L,Be,_t,gt,rt,null),wt&&(L.tag=zt,L.anchor=Lt,L.kind="mapping",L.result=Be),wt}function se(L){var f,S=!1,W=!1,Bt,Nt,nt;if(nt=L.input.charCodeAt(L.position),nt!==33)return!1;if(L.tag!==null&&de(L,"duplication of a tag property"),nt=L.input.charCodeAt(++L.position),nt===60?(S=!0,nt=L.input.charCodeAt(++L.position)):nt===33?(W=!0,Bt="!!",nt=L.input.charCodeAt(++L.position)):Bt="!",f=L.position,S){do nt=L.input.charCodeAt(++L.position);while(nt!==0&&nt!==62);L.position<L.length?(Nt=L.input.slice(f,L.position),nt=L.input.charCodeAt(++L.position)):de(L,"unexpected end of the stream within a verbatim tag")}else{for(;nt!==0&&!V(nt);)nt===33&&(W?de(L,"tag suffix cannot contain exclamation marks"):(Bt=L.input.slice(f-1,L.position+1),N.test(Bt)||de(L,"named tag handle cannot contain such characters"),W=!0,f=L.position+1)),nt=L.input.charCodeAt(++L.position);Nt=L.input.slice(f,L.position),J.test(Nt)&&de(L,"tag suffix cannot contain flow indicator characters")}return Nt&&!Q.test(Nt)&&de(L,"tag name cannot contain such characters: "+Nt),S?L.tag=Nt:y.call(L.tagMap,Bt)?L.tag=L.tagMap[Bt]+Nt:Bt==="!"?L.tag="!"+Nt:Bt==="!!"?L.tag="tag:yaml.org,2002:"+Nt:de(L,'undeclared tag handle "'+Bt+'"'),!0}function Ee(L){var f,S;if(S=L.input.charCodeAt(L.position),S!==38)return!1;for(L.anchor!==null&&de(L,"duplication of an anchor property"),S=L.input.charCodeAt(++L.position),f=L.position;S!==0&&!V(S)&&!lt(S);)S=L.input.charCodeAt(++L.position);return L.position===f&&de(L,"name of an anchor node must contain at least one character"),L.anchor=L.input.slice(f,L.position),!0}function rr(L){var f,S,W;if(W=L.input.charCodeAt(L.position),W!==42)return!1;for(W=L.input.charCodeAt(++L.position),f=L.position;W!==0&&!V(W)&&!lt(W);)W=L.input.charCodeAt(++L.position);return L.position===f&&de(L,"name of an alias node must contain at least one character"),S=L.input.slice(f,L.position),y.call(L.anchorMap,S)||de(L,'unidentified alias "'+S+'"'),L.result=L.anchorMap[S],Se(L,!0,-1),!0}function fr(L,f,S,W,Bt){var Nt,nt,zt,Lt=1,Be=!1,_t=!1,gt,rt,F,st,wt;if(L.listener!==null&&L.listener("open",L),L.tag=null,L.anchor=null,L.kind=null,L.result=null,Nt=nt=zt=a===S||C===S,W&&Se(L,!0,-1)&&(Be=!0,L.lineIndent>f?Lt=1:L.lineIndent===f?Lt=0:L.lineIndent<f&&(Lt=-1)),Lt===1)for(;se(L)||Ee(L);)Se(L,!0,-1)?(Be=!0,zt=Nt,L.lineIndent>f?Lt=1:L.lineIndent===f?Lt=0:L.lineIndent<f&&(Lt=-1)):zt=!1;if(zt&&(zt=Be||Bt),(Lt===1||a===S)&&(E===S||m===S?st=f:st=f+1,wt=L.position-L.lineStart,Lt===1?zt&&(k(L,wt)||Z(L,wt,st))||Cr(L,st)?_t=!0:(nt&&et(L,st)||vr(L,st)||Pr(L,st)?_t=!0:rr(L)?(_t=!0,(L.tag!==null||L.anchor!==null)&&de(L,"alias node should not have any properties")):Ze(L,st,E===S)&&(_t=!0,L.tag===null&&(L.tag="?")),L.anchor!==null&&(L.anchorMap[L.anchor]=L.result)):Lt===0&&(_t=zt&&k(L,wt))),L.tag!==null&&L.tag!=="!")if(L.tag==="?"){for(L.result!==null&&L.kind!=="scalar"&&de(L,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+L.kind+'"'),gt=0,rt=L.implicitTypes.length;gt<rt;gt+=1)if(F=L.implicitTypes[gt],F.resolve(L.result)){L.result=F.construct(L.result),L.tag=F.tag,L.anchor!==null&&(L.anchorMap[L.anchor]=L.result);break}}else y.call(L.typeMap[L.kind||"fallback"],L.tag)?(F=L.typeMap[L.kind||"fallback"][L.tag],L.result!==null&&F.kind!==L.kind&&de(L,"unacceptable node kind for !<"+L.tag+'> tag; it should be "'+F.kind+'", not "'+L.kind+'"'),F.resolve(L.result)?(L.result=F.construct(L.result),L.anchor!==null&&(L.anchorMap[L.anchor]=L.result)):de(L,"cannot resolve a node with !<"+L.tag+"> explicit tag")):de(L,"unknown tag !<"+L.tag+">");return L.listener!==null&&L.listener("close",L),L.tag!==null||L.anchor!==null||_t}function yr(L){var f=L.position,S,W,Bt,Nt=!1,nt;for(L.version=null,L.checkLineBreaks=L.legacy,L.tagMap={},L.anchorMap={};(nt=L.input.charCodeAt(L.position))!==0&&(Se(L,!0,-1),nt=L.input.charCodeAt(L.position),!(L.lineIndent>0||nt!==37));){for(Nt=!0,nt=L.input.charCodeAt(++L.position),S=L.position;nt!==0&&!V(nt);)nt=L.input.charCodeAt(++L.position);for(W=L.input.slice(S,L.position),Bt=[],W.length<1&&de(L,"directive name must not be less than one character in length");nt!==0;){for(;U(nt);)nt=L.input.charCodeAt(++L.position);if(nt===35){do nt=L.input.charCodeAt(++L.position);while(nt!==0&&!q(nt));break}if(q(nt))break;for(S=L.position;nt!==0&&!V(nt);)nt=L.input.charCodeAt(++L.position);Bt.push(L.input.slice(S,L.position))}nt!==0&&we(L),y.call(Ce,W)?Ce[W](L,W,Bt):pe(L,'unknown document directive "'+W+'"')}if(Se(L,!0,-1),L.lineIndent===0&&L.input.charCodeAt(L.position)===45&&L.input.charCodeAt(L.position+1)===45&&L.input.charCodeAt(L.position+2)===45?(L.position+=3,Se(L,!0,-1)):Nt&&de(L,"directives end mark is expected"),fr(L,L.lineIndent-1,a,!1,!0),Se(L,!0,-1),L.checkLineBreaks&&tt.test(L.input.slice(f,L.position))&&pe(L,"non-ASCII line breaks are interpreted as content"),L.documents.push(L.result),L.position===L.lineStart&&Qe(L)){L.input.charCodeAt(L.position)===46&&(L.position+=3,Se(L,!0,-1));return}if(L.position<L.length-1)de(L,"end of the stream or a document separator is expected");else return}function ur(L,f){L=String(L),f=f||{},L.length!==0&&(L.charCodeAt(L.length-1)!==10&&L.charCodeAt(L.length-1)!==13&&(L+=`
`),L.charCodeAt(0)===65279&&(L=L.slice(1)));var S=new ae(L,f),W=L.indexOf("\0");for(W!==-1&&(S.position=W,de(S,"null byte is not allowed in input")),S.input+="\0";S.input.charCodeAt(S.position)===32;)S.lineIndent+=1,S.position+=1;for(;S.position<S.length-1;)yr(S);return S.documents}function er(L,f,S){f!==null&&typeof f=="object"&&typeof S>"u"&&(S=f,f=null);var W=ur(L,S);if(typeof f!="function")return W;for(var Bt=0,Nt=W.length;Bt<Nt;Bt+=1)f(W[Bt])}function Wr(L,f){var S=ur(L,f);if(S.length!==0){if(S.length===1)return S[0];throw new u("expected a single document in the stream, but found more")}}function Lr(L,f,S){return typeof f=="object"&&f!==null&&typeof S>"u"&&(S=f,f=null),er(L,f,n.extend({schema:p},S))}function Sr(L,f){return Wr(L,n.extend({schema:p},f))}e.exports.loadAll=er,e.exports.load=Wr,e.exports.safeLoadAll=Lr,e.exports.safeLoad=Sr}),U_=ce((t,e)=>{"use strict";var n=Zo(),u=pc(),s=jf(),p=mc(),g=Object.prototype.toString,y=Object.prototype.hasOwnProperty,E=9,m=10,C=13,a=32,H=33,X=34,w=35,j=37,tt=38,J=39,N=42,Q=44,at=45,q=58,U=61,V=62,lt=63,It=64,Ot=91,yt=93,Et=96,vt=123,Yt=124,Xt=125,re={};re[0]="\\0",re[7]="\\a",re[8]="\\b",re[9]="\\t",re[10]="\\n",re[11]="\\v",re[12]="\\f",re[13]="\\r",re[27]="\\e",re[34]='\\"',re[92]="\\\\",re[133]="\\N",re[160]="\\_",re[8232]="\\L",re[8233]="\\P";var ae=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function He(nt,zt){var Lt,Be,_t,gt,rt,F,st;if(zt===null)return{};for(Lt={},Be=Object.keys(zt),_t=0,gt=Be.length;_t<gt;_t+=1)rt=Be[_t],F=String(zt[rt]),rt.slice(0,2)==="!!"&&(rt="tag:yaml.org,2002:"+rt.slice(2)),st=nt.compiledTypeMap.fallback[rt],st&&y.call(st.styleAliases,F)&&(F=st.styleAliases[F]),Lt[rt]=F;return Lt}function de(nt){var zt,Lt,Be;if(zt=nt.toString(16).toUpperCase(),nt<=255)Lt="x",Be=2;else if(nt<=65535)Lt="u",Be=4;else if(nt<=4294967295)Lt="U",Be=8;else throw new u("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+Lt+n.repeat("0",Be-zt.length)+zt}function pe(nt){this.schema=nt.schema||s,this.indent=Math.max(1,nt.indent||2),this.noArrayIndent=nt.noArrayIndent||!1,this.skipInvalid=nt.skipInvalid||!1,this.flowLevel=n.isNothing(nt.flowLevel)?-1:nt.flowLevel,this.styleMap=He(this.schema,nt.styles||null),this.sortKeys=nt.sortKeys||!1,this.lineWidth=nt.lineWidth||80,this.noRefs=nt.noRefs||!1,this.noCompatMode=nt.noCompatMode||!1,this.condenseFlow=nt.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Ce(nt,zt){for(var Lt=n.repeat(" ",zt),Be=0,_t=-1,gt="",rt,F=nt.length;Be<F;)_t=nt.indexOf(`
`,Be),_t===-1?(rt=nt.slice(Be),Be=F):(rt=nt.slice(Be,_t+1),Be=_t+1),rt.length&&rt!==`
`&&(gt+=Lt),gt+=rt;return gt}function Ie(nt,zt){return`
`+n.repeat(" ",nt.indent*zt)}function Ve(nt,zt){var Lt,Be,_t;for(Lt=0,Be=nt.implicitTypes.length;Lt<Be;Lt+=1)if(_t=nt.implicitTypes[Lt],_t.resolve(zt))return!0;return!1}function We(nt){return nt===a||nt===E}function we(nt){return 32<=nt&&nt<=126||161<=nt&&nt<=55295&&nt!==8232&&nt!==8233||57344<=nt&&nt<=65533&&nt!==65279||65536<=nt&&nt<=1114111}function Se(nt){return we(nt)&&!We(nt)&&nt!==65279&&nt!==C&&nt!==m}function Qe(nt,zt){return we(nt)&&nt!==65279&&nt!==Q&&nt!==Ot&&nt!==yt&&nt!==vt&&nt!==Xt&&nt!==q&&(nt!==w||zt&&Se(zt))}function Ke(nt){return we(nt)&&nt!==65279&&!We(nt)&&nt!==at&&nt!==lt&&nt!==q&&nt!==Q&&nt!==Ot&&nt!==yt&&nt!==vt&&nt!==Xt&&nt!==w&&nt!==tt&&nt!==N&&nt!==H&&nt!==Yt&&nt!==U&&nt!==V&&nt!==J&&nt!==X&&nt!==j&&nt!==It&&nt!==Et}function Ze(nt){var zt=/^\n* /;return zt.test(nt)}var vr=1,Pr=2,Cr=3,et=4,k=5;function Z(nt,zt,Lt,Be,_t){var gt,rt,F,st=!1,wt=!1,Ct=Be!==-1,Ut=-1,Wt=Ke(nt.charCodeAt(0))&&!We(nt.charCodeAt(nt.length-1));if(zt)for(gt=0;gt<nt.length;gt++){if(rt=nt.charCodeAt(gt),!we(rt))return k;F=gt>0?nt.charCodeAt(gt-1):null,Wt=Wt&&Qe(rt,F)}else{for(gt=0;gt<nt.length;gt++){if(rt=nt.charCodeAt(gt),rt===m)st=!0,Ct&&(wt=wt||gt-Ut-1>Be&&nt[Ut+1]!==" ",Ut=gt);else if(!we(rt))return k;F=gt>0?nt.charCodeAt(gt-1):null,Wt=Wt&&Qe(rt,F)}wt=wt||Ct&&gt-Ut-1>Be&&nt[Ut+1]!==" "}return!st&&!wt?Wt&&!_t(nt)?vr:Pr:Lt>9&&Ze(nt)?k:wt?et:Cr}function se(nt,zt,Lt,Be){nt.dump=(function(){if(zt.length===0)return"''";if(!nt.noCompatMode&&ae.indexOf(zt)!==-1)return"'"+zt+"'";var _t=nt.indent*Math.max(1,Lt),gt=nt.lineWidth===-1?-1:Math.max(Math.min(nt.lineWidth,40),nt.lineWidth-_t),rt=Be||nt.flowLevel>-1&&Lt>=nt.flowLevel;function F(st){return Ve(nt,st)}switch(Z(zt,rt,nt.indent,gt,F)){case vr:return zt;case Pr:return"'"+zt.replace(/'/g,"''")+"'";case Cr:return"|"+Ee(zt,nt.indent)+rr(Ce(zt,_t));case et:return">"+Ee(zt,nt.indent)+rr(Ce(fr(zt,gt),_t));case k:return'"'+ur(zt,gt)+'"';default:throw new u("impossible error: invalid scalar style")}})()}function Ee(nt,zt){var Lt=Ze(nt)?String(zt):"",Be=nt[nt.length-1]===`
`,_t=Be&&(nt[nt.length-2]===`
`||nt===`
`),gt=_t?"+":Be?"":"-";return Lt+gt+`
`}function rr(nt){return nt[nt.length-1]===`
`?nt.slice(0,-1):nt}function fr(nt,zt){for(var Lt=/(\n+)([^\n]*)/g,Be=(function(){var wt=nt.indexOf(`
`);return wt=wt!==-1?wt:nt.length,Lt.lastIndex=wt,yr(nt.slice(0,wt),zt)})(),_t=nt[0]===`
`||nt[0]===" ",gt,rt;rt=Lt.exec(nt);){var F=rt[1],st=rt[2];gt=st[0]===" ",Be+=F+(!_t&&!gt&&st!==""?`
`:"")+yr(st,zt),_t=gt}return Be}function yr(nt,zt){if(nt===""||nt[0]===" ")return nt;for(var Lt=/ [^ ]/g,Be,_t=0,gt,rt=0,F=0,st="";Be=Lt.exec(nt);)F=Be.index,F-_t>zt&&(gt=rt>_t?rt:F,st+=`
`+nt.slice(_t,gt),_t=gt+1),rt=F;return st+=`
`,nt.length-_t>zt&&rt>_t?st+=nt.slice(_t,rt)+`
`+nt.slice(rt+1):st+=nt.slice(_t),st.slice(1)}function ur(nt){for(var zt="",Lt,Be,_t,gt=0;gt<nt.length;gt++){if(Lt=nt.charCodeAt(gt),Lt>=55296&&Lt<=56319&&(Be=nt.charCodeAt(gt+1),Be>=56320&&Be<=57343)){zt+=de((Lt-55296)*1024+Be-56320+65536),gt++;continue}_t=re[Lt],zt+=!_t&&we(Lt)?nt[gt]:_t||de(Lt)}return zt}function er(nt,zt,Lt){var Be="",_t=nt.tag,gt,rt;for(gt=0,rt=Lt.length;gt<rt;gt+=1)f(nt,zt,Lt[gt],!1,!1)&&(gt!==0&&(Be+=","+(nt.condenseFlow?"":" ")),Be+=nt.dump);nt.tag=_t,nt.dump="["+Be+"]"}function Wr(nt,zt,Lt,Be){var _t="",gt=nt.tag,rt,F;for(rt=0,F=Lt.length;rt<F;rt+=1)f(nt,zt+1,Lt[rt],!0,!0)&&((!Be||rt!==0)&&(_t+=Ie(nt,zt)),nt.dump&&m===nt.dump.charCodeAt(0)?_t+="-":_t+="- ",_t+=nt.dump);nt.tag=gt,nt.dump=_t||"[]"}function Lr(nt,zt,Lt){var Be="",_t=nt.tag,gt=Object.keys(Lt),rt,F,st,wt,Ct;for(rt=0,F=gt.length;rt<F;rt+=1)Ct="",rt!==0&&(Ct+=", "),nt.condenseFlow&&(Ct+='"'),st=gt[rt],wt=Lt[st],f(nt,zt,st,!1,!1)&&(nt.dump.length>1024&&(Ct+="? "),Ct+=nt.dump+(nt.condenseFlow?'"':"")+":"+(nt.condenseFlow?"":" "),f(nt,zt,wt,!1,!1)&&(Ct+=nt.dump,Be+=Ct));nt.tag=_t,nt.dump="{"+Be+"}"}function Sr(nt,zt,Lt,Be){var _t="",gt=nt.tag,rt=Object.keys(Lt),F,st,wt,Ct,Ut,Wt;if(nt.sortKeys===!0)rt.sort();else if(typeof nt.sortKeys=="function")rt.sort(nt.sortKeys);else if(nt.sortKeys)throw new u("sortKeys must be a boolean or a function");for(F=0,st=rt.length;F<st;F+=1)Wt="",(!Be||F!==0)&&(Wt+=Ie(nt,zt)),wt=rt[F],Ct=Lt[wt],f(nt,zt+1,wt,!0,!0,!0)&&(Ut=nt.tag!==null&&nt.tag!=="?"||nt.dump&&nt.dump.length>1024,Ut&&(nt.dump&&m===nt.dump.charCodeAt(0)?Wt+="?":Wt+="? "),Wt+=nt.dump,Ut&&(Wt+=Ie(nt,zt)),f(nt,zt+1,Ct,!0,Ut)&&(nt.dump&&m===nt.dump.charCodeAt(0)?Wt+=":":Wt+=": ",Wt+=nt.dump,_t+=Wt));nt.tag=gt,nt.dump=_t||"{}"}function L(nt,zt,Lt){var Be,_t,gt,rt,F,st;for(_t=Lt?nt.explicitTypes:nt.implicitTypes,gt=0,rt=_t.length;gt<rt;gt+=1)if(F=_t[gt],(F.instanceOf||F.predicate)&&(!F.instanceOf||typeof zt=="object"&&zt instanceof F.instanceOf)&&(!F.predicate||F.predicate(zt))){if(nt.tag=Lt?F.tag:"?",F.represent){if(st=nt.styleMap[F.tag]||F.defaultStyle,g.call(F.represent)==="[object Function]")Be=F.represent(zt,st);else if(y.call(F.represent,st))Be=F.represent[st](zt,st);else throw new u("!<"+F.tag+'> tag resolver accepts not "'+st+'" style');nt.dump=Be}return!0}return!1}function f(nt,zt,Lt,Be,_t,gt){nt.tag=null,nt.dump=Lt,L(nt,Lt,!1)||L(nt,Lt,!0);var rt=g.call(nt.dump);Be&&(Be=nt.flowLevel<0||nt.flowLevel>zt);var F=rt==="[object Object]"||rt==="[object Array]",st,wt;if(F&&(st=nt.duplicates.indexOf(Lt),wt=st!==-1),(nt.tag!==null&&nt.tag!=="?"||wt||nt.indent!==2&&zt>0)&&(_t=!1),wt&&nt.usedDuplicates[st])nt.dump="*ref_"+st;else{if(F&&wt&&!nt.usedDuplicates[st]&&(nt.usedDuplicates[st]=!0),rt==="[object Object]")Be&&Object.keys(nt.dump).length!==0?(Sr(nt,zt,nt.dump,_t),wt&&(nt.dump="&ref_"+st+nt.dump)):(Lr(nt,zt,nt.dump),wt&&(nt.dump="&ref_"+st+" "+nt.dump));else if(rt==="[object Array]"){var Ct=nt.noArrayIndent&&zt>0?zt-1:zt;Be&&nt.dump.length!==0?(Wr(nt,Ct,nt.dump,_t),wt&&(nt.dump="&ref_"+st+nt.dump)):(er(nt,Ct,nt.dump),wt&&(nt.dump="&ref_"+st+" "+nt.dump))}else if(rt==="[object String]")nt.tag!=="?"&&se(nt,nt.dump,zt,gt);else{if(nt.skipInvalid)return!1;throw new u("unacceptable kind of an object to dump "+rt)}nt.tag!==null&&nt.tag!=="?"&&(nt.dump="!<"+nt.tag+"> "+nt.dump)}return!0}function S(nt,zt){var Lt=[],Be=[],_t,gt;for(W(nt,Lt,Be),_t=0,gt=Be.length;_t<gt;_t+=1)zt.duplicates.push(Lt[Be[_t]]);zt.usedDuplicates=new Array(gt)}function W(nt,zt,Lt){var Be,_t,gt;if(nt!==null&&typeof nt=="object")if(_t=zt.indexOf(nt),_t!==-1)Lt.indexOf(_t)===-1&&Lt.push(_t);else if(zt.push(nt),Array.isArray(nt))for(_t=0,gt=nt.length;_t<gt;_t+=1)W(nt[_t],zt,Lt);else for(Be=Object.keys(nt),_t=0,gt=Be.length;_t<gt;_t+=1)W(nt[Be[_t]],zt,Lt)}function Bt(nt,zt){zt=zt||{};var Lt=new pe(zt);return Lt.noRefs||S(nt,Lt),f(Lt,0,nt,!0,!0)?Lt.dump+`
`:""}function Nt(nt,zt){return Bt(nt,n.extend({schema:p},zt))}e.exports.dump=Bt,e.exports.safeDump=Nt}),H_=ce((t,e)=>{"use strict";var n=m_(),u=U_();function s(p){return function(){throw new Error("Function "+p+" is deprecated and cannot be used.")}}e.exports.Type=an(),e.exports.Schema=Qo(),e.exports.FAILSAFE_SCHEMA=Cp(),e.exports.JSON_SCHEMA=hm(),e.exports.CORE_SCHEMA=dm(),e.exports.DEFAULT_SAFE_SCHEMA=mc(),e.exports.DEFAULT_FULL_SCHEMA=jf(),e.exports.load=n.load,e.exports.loadAll=n.loadAll,e.exports.safeLoad=n.safeLoad,e.exports.safeLoadAll=n.safeLoadAll,e.exports.dump=u.dump,e.exports.safeDump=u.safeDump,e.exports.YAMLException=pc(),e.exports.MINIMAL_SCHEMA=Cp(),e.exports.SAFE_SCHEMA=mc(),e.exports.DEFAULT_SCHEMA=jf(),e.exports.scan=s("scan"),e.exports.parse=s("parse"),e.exports.compose=s("compose"),e.exports.addConstructor=s("addConstructor")}),q_=ce((t,e)=>{"use strict";var n=H_();e.exports=n}),K_=ce((t,e)=>{"use strict";var n=q_();e.exports={safeLoad:n.safeLoad,load:n.load,safeDump:n.safeDump,dump:n.dump}}),W_=ce(t=>{"use strict";t.toString=function(e){switch(e){case 1:return"A";case 10:return"NULL";case 28:return"AAAA";case 18:return"AFSDB";case 42:return"APL";case 257:return"CAA";case 60:return"CDNSKEY";case 59:return"CDS";case 37:return"CERT";case 5:return"CNAME";case 49:return"DHCID";case 32769:return"DLV";case 39:return"DNAME";case 48:return"DNSKEY";case 43:return"DS";case 55:return"HIP";case 13:return"HINFO";case 45:return"IPSECKEY";case 25:return"KEY";case 36:return"KX";case 29:return"LOC";case 15:return"MX";case 35:return"NAPTR";case 2:return"NS";case 47:return"NSEC";case 50:return"NSEC3";case 51:return"NSEC3PARAM";case 12:return"PTR";case 46:return"RRSIG";case 17:return"RP";case 24:return"SIG";case 6:return"SOA";case 99:return"SPF";case 33:return"SRV";case 44:return"SSHFP";case 32768:return"TA";case 249:return"TKEY";case 52:return"TLSA";case 250:return"TSIG";case 16:return"TXT";case 252:return"AXFR";case 251:return"IXFR";case 41:return"OPT";case 255:return"ANY"}return"UNKNOWN_"+e},t.toType=function(e){switch(e.toUpperCase()){case"A":return 1;case"NULL":return 10;case"AAAA":return 28;case"AFSDB":return 18;case"APL":return 42;case"CAA":return 257;case"CDNSKEY":return 60;case"CDS":return 59;case"CERT":return 37;case"CNAME":return 5;case"DHCID":return 49;case"DLV":return 32769;case"DNAME":return 39;case"DNSKEY":return 48;case"DS":return 43;case"HIP":return 55;case"HINFO":return 13;case"IPSECKEY":return 45;case"KEY":return 25;case"KX":return 36;case"LOC":return 29;case"MX":return 15;case"NAPTR":return 35;case"NS":return 2;case"NSEC":return 47;case"NSEC3":return 50;case"NSEC3PARAM":return 51;case"PTR":return 12;case"RRSIG":return 46;case"RP":return 17;case"SIG":return 24;case"SOA":return 6;case"SPF":return 99;case"SRV":return 33;case"SSHFP":return 44;case"TA":return 32768;case"TKEY":return 249;case"TLSA":return 52;case"TSIG":return 250;case"TXT":return 16;case"AXFR":return 252;case"IXFR":return 251;case"OPT":return 41;case"ANY":return 255;case"*":return 255}return e.toUpperCase().startsWith("UNKNOWN_")?parseInt(e.slice(8)):0}}),X_=ce(t=>{"use strict";t.toString=function(e){switch(e){case 0:return"NOERROR";case 1:return"FORMERR";case 2:return"SERVFAIL";case 3:return"NXDOMAIN";case 4:return"NOTIMP";case 5:return"REFUSED";case 6:return"YXDOMAIN";case 7:return"YXRRSET";case 8:return"NXRRSET";case 9:return"NOTAUTH";case 10:return"NOTZONE";case 11:return"RCODE_11";case 12:return"RCODE_12";case 13:return"RCODE_13";case 14:return"RCODE_14";case 15:return"RCODE_15"}return"RCODE_"+e},t.toRcode=function(e){switch(e.toUpperCase()){case"NOERROR":return 0;case"FORMERR":return 1;case"SERVFAIL":return 2;case"NXDOMAIN":return 3;case"NOTIMP":return 4;case"REFUSED":return 5;case"YXDOMAIN":return 6;case"YXRRSET":return 7;case"NXRRSET":return 8;case"NOTAUTH":return 9;case"NOTZONE":return 10;case"RCODE_11":return 11;case"RCODE_12":return 12;case"RCODE_13":return 13;case"RCODE_14":return 14;case"RCODE_15":return 15}return 0}}),J_=ce(t=>{"use strict";t.toString=function(e){switch(e){case 0:return"QUERY";case 1:return"IQUERY";case 2:return"STATUS";case 3:return"OPCODE_3";case 4:return"NOTIFY";case 5:return"UPDATE";case 6:return"OPCODE_6";case 7:return"OPCODE_7";case 8:return"OPCODE_8";case 9:return"OPCODE_9";case 10:return"OPCODE_10";case 11:return"OPCODE_11";case 12:return"OPCODE_12";case 13:return"OPCODE_13";case 14:return"OPCODE_14";case 15:return"OPCODE_15"}return"OPCODE_"+e},t.toOpcode=function(e){switch(e.toUpperCase()){case"QUERY":return 0;case"IQUERY":return 1;case"STATUS":return 2;case"OPCODE_3":return 3;case"NOTIFY":return 4;case"UPDATE":return 5;case"OPCODE_6":return 6;case"OPCODE_7":return 7;case"OPCODE_8":return 8;case"OPCODE_9":return 9;case"OPCODE_10":return 10;case"OPCODE_11":return 11;case"OPCODE_12":return 12;case"OPCODE_13":return 13;case"OPCODE_14":return 14;case"OPCODE_15":return 15}return 0}}),Z_=ce(t=>{"use strict";t.toString=function(e){switch(e){case 1:return"IN";case 2:return"CS";case 3:return"CH";case 4:return"HS";case 255:return"ANY"}return"UNKNOWN_"+e},t.toClass=function(e){switch(e.toUpperCase()){case"IN":return 1;case"CS":return 2;case"CH":return 3;case"HS":return 4;case"ANY":return 255}return 0}}),Q_=ce(t=>{"use strict";t.toString=function(e){switch(e){case 1:return"LLQ";case 2:return"UL";case 3:return"NSID";case 5:return"DAU";case 6:return"DHU";case 7:return"N3U";case 8:return"CLIENT_SUBNET";case 9:return"EXPIRE";case 10:return"COOKIE";case 11:return"TCP_KEEPALIVE";case 12:return"PADDING";case 13:return"CHAIN";case 14:return"KEY_TAG";case 26946:return"DEVICEID"}return e<0?null:`OPTION_${e}`},t.toCode=function(e){if(typeof e=="number")return e;if(!e)return-1;switch(e.toUpperCase()){case"OPTION_0":return 0;case"LLQ":return 1;case"UL":return 2;case"NSID":return 3;case"OPTION_4":return 4;case"DAU":return 5;case"DHU":return 6;case"N3U":return 7;case"CLIENT_SUBNET":return 8;case"EXPIRE":return 9;case"COOKIE":return 10;case"TCP_KEEPALIVE":return 11;case"PADDING":return 12;case"CHAIN":return 13;case"KEY_TAG":return 14;case"DEVICEID":return 26946;case"OPTION_65535":return 65535}let n=e.match(/_(\d+)$/);return n?parseInt(n[1],10):-1}}),rC=ce((t,e)=>{var n=(function(u){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.decode=w,u.encode=X,u.familyOf=H,u.name=void 0,u.sizeOf=a,u.v6=u.v4=void 0;let s=/^(\d{1,3}\.){3,3}\d{1,3}$/,p=4,g=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i,y=16,E={name:"v4",size:p,isFormat:j=>s.test(j),encode(j,tt,J){J=~~J,tt=tt||new Uint8Array(J+p);let N=j.length,Q=0;for(let at=0;at<N;){let q=j.charCodeAt(at++);q===46?(tt[J++]=Q,Q=0):Q=Q*10+(q-48)}return tt[J]=Q,tt},decode(j,tt){return tt=~~tt,`${j[tt++]}.${j[tt++]}.${j[tt++]}.${j[tt]}`}};u.v4=E;let m={name:"v6",size:y,isFormat:j=>j.length>0&&g.test(j),encode(j,tt,J){J=~~J;let N=J+y,Q=-1,at=0,q=0,U=!0,V=!1;tt=tt||new Uint8Array(J+y);for(let lt=0;lt<j.length;lt++){let It=j.charCodeAt(lt);It===58?(U?Q!==-1?(J<N&&(tt[J]=0),J<N-1&&(tt[J+1]=0),J+=2):J<N&&(Q=J):(V===!0?(J<N&&(tt[J]=q),J++):(J<N&&(tt[J]=at>>8),J<N-1&&(tt[J+1]=at&255),J+=2),at=0,q=0),U=!0,V=!1):It===46?(J<N&&(tt[J]=q),J++,q=0,at=0,U=!1,V=!0):(U=!1,It>=97?It-=87:It>=65?It-=55:(It-=48,q=q*10+It),at=(at<<4)+It)}if(U===!1)V===!0?(J<N&&(tt[J]=q),J++):(J<N&&(tt[J]=at>>8),J<N-1&&(tt[J+1]=at&255),J+=2);else if(Q===0)J<N&&(tt[J]=0),J<N-1&&(tt[J+1]=0),J+=2;else if(Q!==-1){J+=2;for(let lt=Math.min(J-1,N-1);lt>=Q+2;lt--)tt[lt]=tt[lt-2];tt[Q]=0,tt[Q+1]=0,Q=J}if(Q!==J&&Q!==-1)for(J>N-2&&(J=N-2);N>Q;)tt[--N]=J<N&&J>Q?tt[--J]:0;else for(;J<N;)tt[J++]=0;return tt},decode(j,tt){tt=~~tt;let J="";for(let N=0;N<y;N+=2)N!==0&&(J+=":"),J+=(j[tt+N]<<8|j[tt+N+1]).toString(16);return J.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}};u.v6=m;let C="ip";u.name=C;function a(j){if(E.isFormat(j))return E.size;if(m.isFormat(j))return m.size;throw Error(`Invalid ip address: ${j}`)}function H(j){return a(j)===E.size?1:2}function X(j,tt,J){J=~~J;let N=a(j);return typeof tt=="function"&&(tt=tt(J+N)),N===E.size?E.encode(j,tt,J):m.encode(j,tt,J)}function w(j,tt,J){if(tt=~~tt,J=J||j.length-tt,J===E.size)return E.decode(j,tt,J);if(J===m.size)return m.decode(j,tt,J);throw Error(`Invalid buffer size needs to be ${E.size} for v4 or ${m.size} for v6.`)}return"default"in u?u.default:u})({});typeof define=="function"&&define.amd?define([],function(){return n}):typeof e=="object"&&typeof t=="object"&&(e.exports=n)}),sC=ce(t=>{"use strict";var e=lp().Buffer,n=W_(),u=X_(),s=J_(),p=Z_(),g=Q_(),y=rC(),E=0,m=32768,C=32768,a=~C,H=32768,X=~H,w=t.name={};w.encode=function(et,k,Z,{mail:se=!1}={}){k||(k=e.alloc(w.encodingLength(et))),Z||(Z=0);let Ee=Z,rr=et.replace(/^\.|\.$/gm,"");if(rr.length){let fr=[];if(se){let yr="";rr.split(".").forEach(ur=>{ur.endsWith("\\")?yr+=(yr.length?".":"")+ur.slice(0,-1):fr.length===0&&yr.length?fr.push(yr+"."+ur):fr.push(ur)})}else fr=rr.split(".");for(let yr=0;yr<fr.length;yr++){let ur=k.write(fr[yr],Z+1);k[Z]=ur,Z+=ur+1}}return k[Z++]=0,w.encode.bytes=Z-Ee,k},w.encode.bytes=0,w.decode=function(et,k,{mail:Z=!1}={}){k||(k=0);let se=[],Ee=k,rr=0,fr=0,yr=!1;for(;;){if(k>=et.length)throw new Error("Cannot decode name (buffer overflow)");let ur=et[k++];if(fr+=yr?0:1,ur===0)break;if(ur&192)if((ur&192)===192){if(k+1>et.length)throw new Error("Cannot decode name (buffer overflow)");let er=et.readUInt16BE(k-1)-49152;if(er>=Ee)throw new Error("Cannot decode name (bad pointer)");k=er,Ee=er,fr+=yr?0:1,yr=!0}else throw new Error("Cannot decode name (bad label)");else{if(k+ur>et.length)throw new Error("Cannot decode name (buffer overflow)");if(rr+=ur+1,rr>254)throw new Error("Cannot decode name (name too long)");let er=et.toString("utf-8",k,k+ur);Z&&(er=er.replace(/\./g,"\\.")),se.push(er),k+=ur,fr+=yr?0:ur}}return w.decode.bytes=fr,se.length===0?".":se.join(".")},w.decode.bytes=0,w.encodingLength=function(et){return et==="."||et===".."?1:e.byteLength(et.replace(/^\.|\.$/gm,""))+2};var j={};j.encode=function(et,k,Z){k||(k=e.alloc(j.encodingLength(et))),Z||(Z=0);let se=k.write(et,Z+1);return k[Z]=se,j.encode.bytes=se+1,k},j.encode.bytes=0,j.decode=function(et,k){k||(k=0);let Z=et[k],se=et.toString("utf-8",k+1,k+1+Z);return j.decode.bytes=Z+1,se},j.decode.bytes=0,j.encodingLength=function(et){return e.byteLength(et)+1};var tt={};tt.encode=function(et,k,Z){k||(k=tt.encodingLength(et)),Z||(Z=0);let se=(et.flags||0)&32767,Ee=et.type==="response"?m:E;return k.writeUInt16BE(et.id||0,Z),k.writeUInt16BE(se|Ee,Z+2),k.writeUInt16BE(et.questions.length,Z+4),k.writeUInt16BE(et.answers.length,Z+6),k.writeUInt16BE(et.authorities.length,Z+8),k.writeUInt16BE(et.additionals.length,Z+10),k},tt.encode.bytes=12,tt.decode=function(et,k){if(k||(k=0),et.length<12)throw new Error("Header must be 12 bytes");let Z=et.readUInt16BE(k+2);return{id:et.readUInt16BE(k),type:Z&m?"response":"query",flags:Z&32767,flag_qr:(Z>>15&1)===1,opcode:s.toString(Z>>11&15),flag_aa:(Z>>10&1)===1,flag_tc:(Z>>9&1)===1,flag_rd:(Z>>8&1)===1,flag_ra:(Z>>7&1)===1,flag_z:(Z>>6&1)===1,flag_ad:(Z>>5&1)===1,flag_cd:(Z>>4&1)===1,rcode:u.toString(Z&15),questions:new Array(et.readUInt16BE(k+4)),answers:new Array(et.readUInt16BE(k+6)),authorities:new Array(et.readUInt16BE(k+8)),additionals:new Array(et.readUInt16BE(k+10))}},tt.decode.bytes=12,tt.encodingLength=function(){return 12};var J=t.unknown={};J.encode=function(et,k,Z){return k||(k=e.alloc(J.encodingLength(et))),Z||(Z=0),k.writeUInt16BE(et.length,Z),et.copy(k,Z+2),J.encode.bytes=et.length+2,k},J.encode.bytes=0,J.decode=function(et,k){k||(k=0);let Z=et.readUInt16BE(k),se=et.slice(k+2,k+2+Z);return J.decode.bytes=Z+2,se},J.decode.bytes=0,J.encodingLength=function(et){return et.length+2};var N=t.ns={};N.encode=function(et,k,Z){return k||(k=e.alloc(N.encodingLength(et))),Z||(Z=0),w.encode(et,k,Z+2),k.writeUInt16BE(w.encode.bytes,Z),N.encode.bytes=w.encode.bytes+2,k},N.encode.bytes=0,N.decode=function(et,k){k||(k=0);let Z=et.readUInt16BE(k),se=w.decode(et,k+2);return N.decode.bytes=Z+2,se},N.decode.bytes=0,N.encodingLength=function(et){return w.encodingLength(et)+2};var Q=t.soa={};Q.encode=function(et,k,Z){k||(k=e.alloc(Q.encodingLength(et))),Z||(Z=0);let se=Z;return Z+=2,w.encode(et.mname,k,Z),Z+=w.encode.bytes,w.encode(et.rname,k,Z,{mail:!0}),Z+=w.encode.bytes,k.writeUInt32BE(et.serial||0,Z),Z+=4,k.writeUInt32BE(et.refresh||0,Z),Z+=4,k.writeUInt32BE(et.retry||0,Z),Z+=4,k.writeUInt32BE(et.expire||0,Z),Z+=4,k.writeUInt32BE(et.minimum||0,Z),Z+=4,k.writeUInt16BE(Z-se-2,se),Q.encode.bytes=Z-se,k},Q.encode.bytes=0,Q.decode=function(et,k){k||(k=0);let Z=k,se={};return k+=2,se.mname=w.decode(et,k),k+=w.decode.bytes,se.rname=w.decode(et,k,{mail:!0}),k+=w.decode.bytes,se.serial=et.readUInt32BE(k),k+=4,se.refresh=et.readUInt32BE(k),k+=4,se.retry=et.readUInt32BE(k),k+=4,se.expire=et.readUInt32BE(k),k+=4,se.minimum=et.readUInt32BE(k),k+=4,Q.decode.bytes=k-Z,se},Q.decode.bytes=0,Q.encodingLength=function(et){return 22+w.encodingLength(et.mname)+w.encodingLength(et.rname)};var at=t.txt={};at.encode=function(et,k,Z){Array.isArray(et)||(et=[et]);for(let Ee=0;Ee<et.length;Ee++)if(typeof et[Ee]=="string"&&(et[Ee]=e.from(et[Ee])),!e.isBuffer(et[Ee]))throw new Error("Must be a Buffer");k||(k=e.alloc(at.encodingLength(et))),Z||(Z=0);let se=Z;return Z+=2,et.forEach(function(Ee){k[Z++]=Ee.length,Ee.copy(k,Z,0,Ee.length),Z+=Ee.length}),k.writeUInt16BE(Z-se-2,se),at.encode.bytes=Z-se,k},at.encode.bytes=0,at.decode=function(et,k){k||(k=0);let Z=k,se=et.readUInt16BE(k);k+=2;let Ee=[];for(;se>0;){let rr=et[k++];if(--se,se<rr)throw new Error("Buffer overflow");Ee.push(et.slice(k,k+rr)),k+=rr,se-=rr}return at.decode.bytes=k-Z,Ee},at.decode.bytes=0,at.encodingLength=function(et){Array.isArray(et)||(et=[et]);let k=2;return et.forEach(function(Z){typeof Z=="string"?k+=e.byteLength(Z)+1:k+=Z.length+1}),k};var q=t.null={};q.encode=function(et,k,Z){k||(k=e.alloc(q.encodingLength(et))),Z||(Z=0),typeof et=="string"&&(et=e.from(et)),et||(et=e.alloc(0));let se=Z;Z+=2;let Ee=et.length;return et.copy(k,Z,0,Ee),Z+=Ee,k.writeUInt16BE(Z-se-2,se),q.encode.bytes=Z-se,k},q.encode.bytes=0,q.decode=function(et,k){k||(k=0);let Z=k,se=et.readUInt16BE(k);k+=2;let Ee=et.slice(k,k+se);return k+=se,q.decode.bytes=k-Z,Ee},q.decode.bytes=0,q.encodingLength=function(et){return et?(e.isBuffer(et)?et.length:e.byteLength(et))+2:2};var U=t.hinfo={};U.encode=function(et,k,Z){k||(k=e.alloc(U.encodingLength(et))),Z||(Z=0);let se=Z;return Z+=2,j.encode(et.cpu,k,Z),Z+=j.encode.bytes,j.encode(et.os,k,Z),Z+=j.encode.bytes,k.writeUInt16BE(Z-se-2,se),U.encode.bytes=Z-se,k},U.encode.bytes=0,U.decode=function(et,k){k||(k=0);let Z=k,se={};return k+=2,se.cpu=j.decode(et,k),k+=j.decode.bytes,se.os=j.decode(et,k),k+=j.decode.bytes,U.decode.bytes=k-Z,se},U.decode.bytes=0,U.encodingLength=function(et){return j.encodingLength(et.cpu)+j.encodingLength(et.os)+2};var V=t.ptr={},lt=t.cname=V,It=t.dname=V;V.encode=function(et,k,Z){return k||(k=e.alloc(V.encodingLength(et))),Z||(Z=0),w.encode(et,k,Z+2),k.writeUInt16BE(w.encode.bytes,Z),V.encode.bytes=w.encode.bytes+2,k},V.encode.bytes=0,V.decode=function(et,k){k||(k=0);let Z=w.decode(et,k+2);return V.decode.bytes=w.decode.bytes+2,Z},V.decode.bytes=0,V.encodingLength=function(et){return w.encodingLength(et)+2};var Ot=t.srv={};Ot.encode=function(et,k,Z){k||(k=e.alloc(Ot.encodingLength(et))),Z||(Z=0),k.writeUInt16BE(et.priority||0,Z+2),k.writeUInt16BE(et.weight||0,Z+4),k.writeUInt16BE(et.port||0,Z+6),w.encode(et.target,k,Z+8);let se=w.encode.bytes+6;return k.writeUInt16BE(se,Z),Ot.encode.bytes=se+2,k},Ot.encode.bytes=0,Ot.decode=function(et,k){k||(k=0);let Z=et.readUInt16BE(k),se={};return se.priority=et.readUInt16BE(k+2),se.weight=et.readUInt16BE(k+4),se.port=et.readUInt16BE(k+6),se.target=w.decode(et,k+8),Ot.decode.bytes=Z+2,se},Ot.decode.bytes=0,Ot.encodingLength=function(et){return 8+w.encodingLength(et.target)};var yt=t.caa={};yt.ISSUER_CRITICAL=128,yt.encode=function(et,k,Z){let se=yt.encodingLength(et);return k||(k=e.alloc(yt.encodingLength(et))),Z||(Z=0),et.issuerCritical&&(et.flags=yt.ISSUER_CRITICAL),k.writeUInt16BE(se-2,Z),Z+=2,k.writeUInt8(et.flags||0,Z),Z+=1,j.encode(et.tag,k,Z),Z+=j.encode.bytes,k.write(et.value,Z),Z+=e.byteLength(et.value),yt.encode.bytes=se,k},yt.encode.bytes=0,yt.decode=function(et,k){k||(k=0);let Z=et.readUInt16BE(k);k+=2;let se=k,Ee={};return Ee.flags=et.readUInt8(k),k+=1,Ee.tag=j.decode(et,k),k+=j.decode.bytes,Ee.value=et.toString("utf-8",k,se+Z),Ee.issuerCritical=!!(Ee.flags&yt.ISSUER_CRITICAL),yt.decode.bytes=Z+2,Ee},yt.decode.bytes=0,yt.encodingLength=function(et){return j.encodingLength(et.tag)+j.encodingLength(et.value)+2};var Et=t.mx={};Et.encode=function(et,k,Z){k||(k=e.alloc(Et.encodingLength(et))),Z||(Z=0);let se=Z;return Z+=2,k.writeUInt16BE(et.preference||0,Z),Z+=2,w.encode(et.exchange,k,Z),Z+=w.encode.bytes,k.writeUInt16BE(Z-se-2,se),Et.encode.bytes=Z-se,k},Et.encode.bytes=0,Et.decode=function(et,k){k||(k=0);let Z=k,se={};return k+=2,se.preference=et.readUInt16BE(k),k+=2,se.exchange=w.decode(et,k),k+=w.decode.bytes,Et.decode.bytes=k-Z,se},Et.encodingLength=function(et){return 4+w.encodingLength(et.exchange)};var vt=t.a={};vt.encode=function(et,k,Z){return k||(k=e.alloc(vt.encodingLength(et))),Z||(Z=0),k.writeUInt16BE(4,Z),Z+=2,y.v4.encode(et,k,Z),vt.encode.bytes=6,k},vt.encode.bytes=0,vt.decode=function(et,k){k||(k=0),k+=2;let Z=y.v4.decode(et,k);return vt.decode.bytes=6,Z},vt.decode.bytes=0,vt.encodingLength=function(){return 6};var Yt=t.aaaa={};Yt.encode=function(et,k,Z){return k||(k=e.alloc(Yt.encodingLength(et))),Z||(Z=0),k.writeUInt16BE(16,Z),Z+=2,y.v6.encode(et,k,Z),Yt.encode.bytes=18,k},Yt.encode.bytes=0,Yt.decode=function(et,k){k||(k=0),k+=2;let Z=y.v6.decode(et,k);return Yt.decode.bytes=18,Z},Yt.decode.bytes=0,Yt.encodingLength=function(){return 18};var Xt=t.option={};Xt.encode=function(et,k,Z){k||(k=e.alloc(Xt.encodingLength(et))),Z||(Z=0);let se=Z,Ee=g.toCode(et.code);if(k.writeUInt16BE(Ee,Z),Z+=2,et.data)k.writeUInt16BE(et.data.length,Z),Z+=2,et.data.copy(k,Z),Z+=et.data.length;else switch(Ee){case 8:let rr=et.sourcePrefixLength||0,fr=et.family||y.familyOf(et.ip),yr=y.encode(et.ip,e.alloc),ur=Math.ceil(rr/8);k.writeUInt16BE(ur+4,Z),Z+=2,k.writeUInt16BE(fr,Z),Z+=2,k.writeUInt8(rr,Z++),k.writeUInt8(et.scopePrefixLength||0,Z++),yr.copy(k,Z,0,ur),Z+=ur;break;case 11:et.timeout?(k.writeUInt16BE(2,Z),Z+=2,k.writeUInt16BE(et.timeout,Z),Z+=2):(k.writeUInt16BE(0,Z),Z+=2);break;case 12:let er=et.length||0;k.writeUInt16BE(er,Z),Z+=2,k.fill(0,Z,Z+er),Z+=er;break;case 14:let Wr=et.tags.length*2;k.writeUInt16BE(Wr,Z),Z+=2;for(let Lr of et.tags)k.writeUInt16BE(Lr,Z),Z+=2;break;default:throw new Error(`Unknown roption code: ${et.code}`)}return Xt.encode.bytes=Z-se,k},Xt.encode.bytes=0,Xt.decode=function(et,k){k||(k=0);let Z={};Z.code=et.readUInt16BE(k),Z.type=g.toString(Z.code),k+=2;let se=et.readUInt16BE(k);switch(k+=2,Z.data=et.slice(k,k+se),Z.code){case 8:Z.family=et.readUInt16BE(k),k+=2,Z.sourcePrefixLength=et.readUInt8(k++),Z.scopePrefixLength=et.readUInt8(k++);let Ee=e.alloc(Z.family===1?4:16);et.copy(Ee,0,k,k+se-4),Z.ip=y.decode(Ee);break;case 11:se>0&&(Z.timeout=et.readUInt16BE(k),k+=2);break;case 14:Z.tags=[];for(let rr=0;rr<se;rr+=2)Z.tags.push(et.readUInt16BE(k)),k+=2}return Xt.decode.bytes=se+4,Z},Xt.decode.bytes=0,Xt.encodingLength=function(et){if(et.data)return et.data.length+4;switch(g.toCode(et.code)){case 8:let k=et.sourcePrefixLength||0;return Math.ceil(k/8)+8;case 11:return typeof et.timeout=="number"?6:4;case 12:return et.length+4;case 14:return 4+et.tags.length*2}throw new Error(`Unknown roption code: ${et.code}`)};var re=t.opt={};re.encode=function(et,k,Z){k||(k=e.alloc(re.encodingLength(et))),Z||(Z=0);let se=Z,Ee=vr(et,Xt);return k.writeUInt16BE(Ee,Z),Z=Pr(et,Xt,k,Z+2),re.encode.bytes=Z-se,k},re.encode.bytes=0,re.decode=function(et,k){k||(k=0);let Z=k,se=[],Ee=et.readUInt16BE(k);k+=2;let rr=0;for(;Ee>0;)se[rr++]=Xt.decode(et,k),k+=Xt.decode.bytes,Ee-=Xt.decode.bytes;return re.decode.bytes=k-Z,se},re.decode.bytes=0,re.encodingLength=function(et){return 2+vr(et||[],Xt)};var ae=t.dnskey={};ae.PROTOCOL_DNSSEC=3,ae.ZONE_KEY=128,ae.SECURE_ENTRYPOINT=32768,ae.encode=function(et,k,Z){k||(k=e.alloc(ae.encodingLength(et))),Z||(Z=0);let se=Z,Ee=et.key;if(!e.isBuffer(Ee))throw new Error("Key must be a Buffer");return Z+=2,k.writeUInt16BE(et.flags,Z),Z+=2,k.writeUInt8(ae.PROTOCOL_DNSSEC,Z),Z+=1,k.writeUInt8(et.algorithm,Z),Z+=1,Ee.copy(k,Z,0,Ee.length),Z+=Ee.length,ae.encode.bytes=Z-se,k.writeUInt16BE(ae.encode.bytes-2,se),k},ae.encode.bytes=0,ae.decode=function(et,k){k||(k=0);let Z=k;var se={},Ee=et.readUInt16BE(k);if(k+=2,se.flags=et.readUInt16BE(k),k+=2,et.readUInt8(k)!==ae.PROTOCOL_DNSSEC)throw new Error("Protocol must be 3");return k+=1,se.algorithm=et.readUInt8(k),k+=1,se.key=et.slice(k,Z+Ee+2),k+=se.key.length,ae.decode.bytes=k-Z,se},ae.decode.bytes=0,ae.encodingLength=function(et){return 6+e.byteLength(et.key)};var He=t.rrsig={};He.encode=function(et,k,Z){k||(k=e.alloc(He.encodingLength(et))),Z||(Z=0);let se=Z,Ee=et.signature;if(!e.isBuffer(Ee))throw new Error("Signature must be a Buffer");return Z+=2,k.writeUInt16BE(n.toType(et.typeCovered),Z),Z+=2,k.writeUInt8(et.algorithm,Z),Z+=1,k.writeUInt8(et.labels,Z),Z+=1,k.writeUInt32BE(et.originalTTL,Z),Z+=4,k.writeUInt32BE(et.expiration,Z),Z+=4,k.writeUInt32BE(et.inception,Z),Z+=4,k.writeUInt16BE(et.keyTag,Z),Z+=2,w.encode(et.signersName,k,Z),Z+=w.encode.bytes,Ee.copy(k,Z,0,Ee.length),Z+=Ee.length,He.encode.bytes=Z-se,k.writeUInt16BE(He.encode.bytes-2,se),k},He.encode.bytes=0,He.decode=function(et,k){k||(k=0);let Z=k;var se={},Ee=et.readUInt16BE(k);return k+=2,se.typeCovered=n.toString(et.readUInt16BE(k)),k+=2,se.algorithm=et.readUInt8(k),k+=1,se.labels=et.readUInt8(k),k+=1,se.originalTTL=et.readUInt32BE(k),k+=4,se.expiration=et.readUInt32BE(k),k+=4,se.inception=et.readUInt32BE(k),k+=4,se.keyTag=et.readUInt16BE(k),k+=2,se.signersName=w.decode(et,k),k+=w.decode.bytes,se.signature=et.slice(k,Z+Ee+2),k+=se.signature.length,He.decode.bytes=k-Z,se},He.decode.bytes=0,He.encodingLength=function(et){return 20+w.encodingLength(et.signersName)+e.byteLength(et.signature)};var de=t.rp={};de.encode=function(et,k,Z){k||(k=e.alloc(de.encodingLength(et))),Z||(Z=0);let se=Z;return Z+=2,w.encode(et.mbox||".",k,Z,{mail:!0}),Z+=w.encode.bytes,w.encode(et.txt||".",k,Z),Z+=w.encode.bytes,de.encode.bytes=Z-se,k.writeUInt16BE(de.encode.bytes-2,se),k},de.encode.bytes=0,de.decode=function(et,k){k||(k=0);let Z=k,se={};return k+=2,se.mbox=w.decode(et,k,{mail:!0})||".",k+=w.decode.bytes,se.txt=w.decode(et,k)||".",k+=w.decode.bytes,de.decode.bytes=k-Z,se},de.decode.bytes=0,de.encodingLength=function(et){return 2+w.encodingLength(et.mbox||".")+w.encodingLength(et.txt||".")};var pe={};pe.encode=function(et,k,Z){k||(k=e.alloc(pe.encodingLength(et))),Z||(Z=0);let se=Z;for(var Ee=[],rr=0;rr<et.length;rr++){var fr=n.toType(et[rr]);Ee[fr>>8]===void 0&&(Ee[fr>>8]=[]),Ee[fr>>8][fr>>3&31]|=1<<7-(fr&7)}for(rr=0;rr<Ee.length;rr++)if(Ee[rr]!==void 0){var yr=e.from(Ee[rr]);k.writeUInt8(rr,Z),Z+=1,k.writeUInt8(yr.length,Z),Z+=1,yr.copy(k,Z),Z+=yr.length}return pe.encode.bytes=Z-se,k},pe.encode.bytes=0,pe.decode=function(et,k,Z){k||(k=0);let se=k;for(var Ee=[];k-se<Z;){var rr=et.readUInt8(k);k+=1;var fr=et.readUInt8(k);k+=1;for(var yr=0;yr<fr;yr++)for(var ur=et.readUInt8(k+yr),er=0;er<8;er++)if(ur&1<<7-er){var Wr=n.toString(rr<<8|yr<<3|er);Ee.push(Wr)}k+=fr}return pe.decode.bytes=k-se,Ee},pe.decode.bytes=0,pe.encodingLength=function(et){for(var k=[],Z=0;Z<et.length;Z++){var se=n.toType(et[Z]);k[se>>8]=Math.max(k[se>>8]||0,se&255)}var Ee=0;for(Z=0;Z<k.length;Z++)k[Z]!==void 0&&(Ee+=2+Math.ceil((k[Z]+1)/8));return Ee};var Ce=t.nsec={};Ce.encode=function(et,k,Z){k||(k=e.alloc(Ce.encodingLength(et))),Z||(Z=0);let se=Z;return Z+=2,w.encode(et.nextDomain,k,Z),Z+=w.encode.bytes,pe.encode(et.rrtypes,k,Z),Z+=pe.encode.bytes,Ce.encode.bytes=Z-se,k.writeUInt16BE(Ce.encode.bytes-2,se),k},Ce.encode.bytes=0,Ce.decode=function(et,k){k||(k=0);let Z=k;var se={},Ee=et.readUInt16BE(k);return k+=2,se.nextDomain=w.decode(et,k),k+=w.decode.bytes,se.rrtypes=pe.decode(et,k,Ee-(k-Z)),k+=pe.decode.bytes,Ce.decode.bytes=k-Z,se},Ce.decode.bytes=0,Ce.encodingLength=function(et){return 2+w.encodingLength(et.nextDomain)+pe.encodingLength(et.rrtypes)};var Ie=t.nsec3={};Ie.encode=function(et,k,Z){k||(k=e.alloc(Ie.encodingLength(et))),Z||(Z=0);let se=Z,Ee=et.salt;if(!e.isBuffer(Ee))throw new Error("salt must be a Buffer");let rr=et.nextDomain;if(!e.isBuffer(rr))throw new Error("nextDomain must be a Buffer");return Z+=2,k.writeUInt8(et.algorithm,Z),Z+=1,k.writeUInt8(et.flags,Z),Z+=1,k.writeUInt16BE(et.iterations,Z),Z+=2,k.writeUInt8(Ee.length,Z),Z+=1,Ee.copy(k,Z,0,Ee.length),Z+=Ee.length,k.writeUInt8(rr.length,Z),Z+=1,rr.copy(k,Z,0,rr.length),Z+=rr.length,pe.encode(et.rrtypes,k,Z),Z+=pe.encode.bytes,Ie.encode.bytes=Z-se,k.writeUInt16BE(Ie.encode.bytes-2,se),k},Ie.encode.bytes=0,Ie.decode=function(et,k){k||(k=0);let Z=k;var se={},Ee=et.readUInt16BE(k);k+=2,se.algorithm=et.readUInt8(k),k+=1,se.flags=et.readUInt8(k),k+=1,se.iterations=et.readUInt16BE(k),k+=2;let rr=et.readUInt8(k);k+=1,se.salt=et.slice(k,k+rr),k+=rr;let fr=et.readUInt8(k);return k+=1,se.nextDomain=et.slice(k,k+fr),k+=fr,se.rrtypes=pe.decode(et,k,Ee-(k-Z)),k+=pe.decode.bytes,Ie.decode.bytes=k-Z,se},Ie.decode.bytes=0,Ie.encodingLength=function(et){return 8+et.salt.length+et.nextDomain.length+pe.encodingLength(et.rrtypes)};var Ve=t.ds={};Ve.encode=function(et,k,Z){k||(k=e.alloc(Ve.encodingLength(et))),Z||(Z=0);let se=Z,Ee=et.digest;if(!e.isBuffer(Ee))throw new Error("Digest must be a Buffer");return Z+=2,k.writeUInt16BE(et.keyTag,Z),Z+=2,k.writeUInt8(et.algorithm,Z),Z+=1,k.writeUInt8(et.digestType,Z),Z+=1,Ee.copy(k,Z,0,Ee.length),Z+=Ee.length,Ve.encode.bytes=Z-se,k.writeUInt16BE(Ve.encode.bytes-2,se),k},Ve.encode.bytes=0,Ve.decode=function(et,k){k||(k=0);let Z=k;var se={},Ee=et.readUInt16BE(k);return k+=2,se.keyTag=et.readUInt16BE(k),k+=2,se.algorithm=et.readUInt8(k),k+=1,se.digestType=et.readUInt8(k),k+=1,se.digest=et.slice(k,Z+Ee+2),k+=se.digest.length,Ve.decode.bytes=k-Z,se},Ve.decode.bytes=0,Ve.encodingLength=function(et){return 6+e.byteLength(et.digest)};var We=t.sshfp={};We.getFingerprintLengthForHashType=function(et){switch(et){case 1:return 20;case 2:return 32}},We.encode=function(et,k,Z){k||(k=e.alloc(We.encodingLength(et))),Z||(Z=0);let se=Z;Z+=2,k[Z]=et.algorithm,Z+=1,k[Z]=et.hash,Z+=1;let Ee=e.from(et.fingerprint.toUpperCase(),"hex");if(Ee.length!==We.getFingerprintLengthForHashType(et.hash))throw new Error("Invalid fingerprint length");return Ee.copy(k,Z),Z+=Ee.byteLength,We.encode.bytes=Z-se,k.writeUInt16BE(We.encode.bytes-2,se),k},We.encode.bytes=0,We.decode=function(et,k){k||(k=0);let Z=k,se={};k+=2,se.algorithm=et[k],k+=1,se.hash=et[k],k+=1;let Ee=We.getFingerprintLengthForHashType(se.hash);return se.fingerprint=et.slice(k,k+Ee).toString("hex").toUpperCase(),k+=Ee,We.decode.bytes=k-Z,se},We.decode.bytes=0,We.encodingLength=function(et){return 4+e.from(et.fingerprint,"hex").byteLength};var we=t.naptr={};we.encode=function(et,k,Z){k||(k=e.alloc(we.encodingLength(et))),Z||(Z=0);let se=Z;return Z+=2,k.writeUInt16BE(et.order||0,Z),Z+=2,k.writeUInt16BE(et.preference||0,Z),Z+=2,j.encode(et.flags,k,Z),Z+=j.encode.bytes,j.encode(et.services,k,Z),Z+=j.encode.bytes,j.encode(et.regexp,k,Z),Z+=j.encode.bytes,w.encode(et.replacement,k,Z),Z+=w.encode.bytes,we.encode.bytes=Z-se,k.writeUInt16BE(we.encode.bytes-2,se),k},we.encode.bytes=0,we.decode=function(et,k){k||(k=0);let Z=k,se={};return k+=2,se.order=et.readUInt16BE(k),k+=2,se.preference=et.readUInt16BE(k),k+=2,se.flags=j.decode(et,k),k+=j.decode.bytes,se.services=j.decode(et,k),k+=j.decode.bytes,se.regexp=j.decode(et,k),k+=j.decode.bytes,se.replacement=w.decode(et,k),k+=w.decode.bytes,we.decode.bytes=k-Z,se},we.decode.bytes=0,we.encodingLength=function(et){return j.encodingLength(et.flags)+j.encodingLength(et.services)+j.encodingLength(et.regexp)+w.encodingLength(et.replacement)+6};var Se=t.tlsa={};Se.encode=function(et,k,Z){k||(k=e.alloc(Se.encodingLength(et))),Z||(Z=0);let se=Z,Ee=et.certificate;if(!e.isBuffer(Ee))throw new Error("Certificate must be a Buffer");return Z+=2,k.writeUInt8(et.usage,Z),Z+=1,k.writeUInt8(et.selector,Z),Z+=1,k.writeUInt8(et.matchingType,Z),Z+=1,Ee.copy(k,Z,0,Ee.length),Z+=Ee.length,Se.encode.bytes=Z-se,k.writeUInt16BE(Se.encode.bytes-2,se),k},Se.encode.bytes=0,Se.decode=function(et,k){k||(k=0);let Z=k,se={},Ee=et.readUInt16BE(k);return k+=2,se.usage=et.readUInt8(k),k+=1,se.selector=et.readUInt8(k),k+=1,se.matchingType=et.readUInt8(k),k+=1,se.certificate=et.slice(k,Z+Ee+2),k+=se.certificate.length,Se.decode.bytes=k-Z,se},Se.decode.bytes=0,Se.encodingLength=function(et){return 5+e.byteLength(et.certificate)};var Qe=t.record=function(et){switch(et.toUpperCase()){case"A":return vt;case"PTR":return V;case"CNAME":return lt;case"DNAME":return It;case"TXT":return at;case"NULL":return q;case"AAAA":return Yt;case"SRV":return Ot;case"HINFO":return U;case"CAA":return yt;case"NS":return N;case"SOA":return Q;case"MX":return Et;case"OPT":return re;case"DNSKEY":return ae;case"RRSIG":return He;case"RP":return de;case"NSEC":return Ce;case"NSEC3":return Ie;case"SSHFP":return We;case"DS":return Ve;case"NAPTR":return we;case"TLSA":return Se}return J},Ke=t.answer={};Ke.encode=function(et,k,Z){k||(k=e.alloc(Ke.encodingLength(et))),Z||(Z=0);let se=Z;if(w.encode(et.name,k,Z),Z+=w.encode.bytes,k.writeUInt16BE(n.toType(et.type),Z),et.type.toUpperCase()==="OPT"){if(et.name!==".")throw new Error("OPT name must be root.");k.writeUInt16BE(et.udpPayloadSize||4096,Z+2),k.writeUInt8(et.extendedRcode||0,Z+4),k.writeUInt8(et.ednsVersion||0,Z+5),k.writeUInt16BE(et.flags||0,Z+6),Z+=8,re.encode(et.options||[],k,Z),Z+=re.encode.bytes}else{let Ee=p.toClass(et.class===void 0?"IN":et.class);et.flush&&(Ee|=C),k.writeUInt16BE(Ee,Z+2),k.writeUInt32BE(et.ttl||0,Z+4),Z+=8;let rr=Qe(et.type);rr.encode(et.data,k,Z),Z+=rr.encode.bytes}return Ke.encode.bytes=Z-se,k},Ke.encode.bytes=0,Ke.decode=function(et,k){k||(k=0);let Z={},se=k;if(Z.name=w.decode(et,k),k+=w.decode.bytes,Z.type=n.toString(et.readUInt16BE(k)),Z.type==="OPT")Z.udpPayloadSize=et.readUInt16BE(k+2),Z.extendedRcode=et.readUInt8(k+4),Z.ednsVersion=et.readUInt8(k+5),Z.flags=et.readUInt16BE(k+6),Z.flag_do=(Z.flags>>15&1)===1,Z.options=re.decode(et,k+8),k+=8+re.decode.bytes;else{let Ee=et.readUInt16BE(k+2);Z.ttl=et.readUInt32BE(k+4),Z.class=p.toString(Ee&a),Z.flush=!!(Ee&C);let rr=Qe(Z.type);Z.data=rr.decode(et,k+8),k+=8+rr.decode.bytes}return Ke.decode.bytes=k-se,Z},Ke.decode.bytes=0,Ke.encodingLength=function(et){let k=et.data!==null&&et.data!==void 0?et.data:et.options;return w.encodingLength(et.name)+8+Qe(et.type).encodingLength(k)};var Ze=t.question={};Ze.encode=function(et,k,Z){k||(k=e.alloc(Ze.encodingLength(et))),Z||(Z=0);let se=Z;return w.encode(et.name,k,Z),Z+=w.encode.bytes,k.writeUInt16BE(n.toType(et.type),Z),Z+=2,k.writeUInt16BE(p.toClass(et.class===void 0?"IN":et.class),Z),Z+=2,Ze.encode.bytes=Z-se,et},Ze.encode.bytes=0,Ze.decode=function(et,k){k||(k=0);let Z=k,se={};return se.name=w.decode(et,k),k+=w.decode.bytes,se.type=n.toString(et.readUInt16BE(k)),k+=2,se.class=p.toString(et.readUInt16BE(k)),k+=2,se.class&H&&(se.class&=X),Ze.decode.bytes=k-Z,se},Ze.decode.bytes=0,Ze.encodingLength=function(et){return w.encodingLength(et.name)+4},t.AUTHORITATIVE_ANSWER=1024,t.TRUNCATED_RESPONSE=512,t.RECURSION_DESIRED=256,t.RECURSION_AVAILABLE=128,t.AUTHENTIC_DATA=32,t.CHECKING_DISABLED=16,t.DNSSEC_OK=32768,t.encode=function(et,k,Z){let se=!k;se&&(k=e.alloc(t.encodingLength(et))),Z||(Z=0);let Ee=Z;return et.questions||(et.questions=[]),et.answers||(et.answers=[]),et.authorities||(et.authorities=[]),et.additionals||(et.additionals=[]),tt.encode(et,k,Z),Z+=tt.encode.bytes,Z=Pr(et.questions,Ze,k,Z),Z=Pr(et.answers,Ke,k,Z),Z=Pr(et.authorities,Ke,k,Z),Z=Pr(et.additionals,Ke,k,Z),t.encode.bytes=Z-Ee,se&&t.encode.bytes!==k.length?k.slice(0,t.encode.bytes):k},t.encode.bytes=0,t.decode=function(et,k){k||(k=0);let Z=k,se=tt.decode(et,k);return k+=tt.decode.bytes,k=Cr(se.questions,Ze,et,k),k=Cr(se.answers,Ke,et,k),k=Cr(se.authorities,Ke,et,k),k=Cr(se.additionals,Ke,et,k),t.decode.bytes=k-Z,se},t.decode.bytes=0,t.encodingLength=function(et){return tt.encodingLength(et)+vr(et.questions||[],Ze)+vr(et.answers||[],Ke)+vr(et.authorities||[],Ke)+vr(et.additionals||[],Ke)},t.streamEncode=function(et){let k=t.encode(et),Z=e.alloc(2);Z.writeUInt16BE(k.byteLength);let se=e.concat([Z,k]);return t.streamEncode.bytes=se.byteLength,se},t.streamEncode.bytes=0,t.streamDecode=function(et){let k=et.readUInt16BE(0);if(et.byteLength<k+2)return null;let Z=t.decode(et.slice(2));return t.streamDecode.bytes=t.decode.bytes,Z},t.streamDecode.bytes=0;function vr(et,k){let Z=0;for(let se=0;se<et.length;se++)Z+=k.encodingLength(et[se]);return Z}function Pr(et,k,Z,se){for(let Ee=0;Ee<et.length;Ee++)k.encode(et[Ee],Z,se),se+=k.encode.bytes;return se}function Cr(et,k,Z,se){for(let Ee=0;Ee<et.length;Ee++)et[Ee]=k.decode(Z,se),se+=k.decode.bytes;return se}}),Km=ce((t,e)=>{var n=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);n?(u=new Uint8Array(16),e.exports=function(){return n(u),u}):(s=new Array(16),e.exports=function(){for(var p=0,g;p<16;p++)p&3||(g=Math.random()*4294967296),s[p]=g>>>((p&3)<<3)&255;return s});var u,s}),zm=ce((t,e)=>{var n=[];for(u=0;u<256;++u)n[u]=(u+256).toString(16).substr(1);var u;function s(p,g){var y=g||0,E=n;return[E[p[y++]],E[p[y++]],E[p[y++]],E[p[y++]],"-",E[p[y++]],E[p[y++]],"-",E[p[y++]],E[p[y++]],"-",E[p[y++]],E[p[y++]],"-",E[p[y++]],E[p[y++]],E[p[y++]],E[p[y++]],E[p[y++]],E[p[y++]]].join("")}e.exports=s}),CC=ce((t,e)=>{var n=Km(),u=zm(),s,p,g=0,y=0;function E(m,C,a){var H=C&&a||0,X=C||[];m=m||{};var w=m.node||s,j=m.clockseq!==void 0?m.clockseq:p;if(w==null||j==null){var tt=n();w==null&&(w=s=[tt[0]|1,tt[1],tt[2],tt[3],tt[4],tt[5]]),j==null&&(j=p=(tt[6]<<8|tt[7])&16383)}var J=m.msecs!==void 0?m.msecs:new Date().getTime(),N=m.nsecs!==void 0?m.nsecs:y+1,Q=J-g+(N-y)/1e4;if(Q<0&&m.clockseq===void 0&&(j=j+1&16383),(Q<0||J>g)&&m.nsecs===void 0&&(N=0),N>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");g=J,y=N,p=j,J+=122192928e5;var at=((J&268435455)*1e4+N)%4294967296;X[H++]=at>>>24&255,X[H++]=at>>>16&255,X[H++]=at>>>8&255,X[H++]=at&255;var q=J/4294967296*1e4&268435455;X[H++]=q>>>8&255,X[H++]=q&255,X[H++]=q>>>24&15|16,X[H++]=q>>>16&255,X[H++]=j>>>8|128,X[H++]=j&255;for(var U=0;U<6;++U)X[H+U]=w[U];return C||u(X)}e.exports=E}),SC=ce((t,e)=>{var n=Km(),u=zm();function s(p,g,y){var E=g&&y||0;typeof p=="string"&&(g=p==="binary"?new Array(16):null,p=null),p=p||{};var m=p.random||(p.rng||n)();if(m[6]=m[6]&15|64,m[8]=m[8]&63|128,g)for(var C=0;C<16;++C)g[E+C]=m[C];return g||u(m)}e.exports=s}),BC=ce((t,e)=>{var n=CC(),u=SC(),s=u;s.v1=n,s.v4=u,e.exports=s}),Kp=ce((t,e)=>{var{v4:n}=BC();function u(){return n().replace(/-/g,"")}var s=u;function p(){return s()}p.setFactory=g=>{s=g},p.reset=()=>{s=u},e.exports=p}),Eu=ce((t,e)=>{var n=Symbol("_options"),u=Symbol("_cache"),s=Symbol("_state"),p=Symbol("_objectId"),g=Symbol("_conflicts"),y=Symbol("_change"),E=Symbol("_elemIds");e.exports={OPTIONS:n,CACHE:u,STATE:s,OBJECT_ID:p,CONFLICTS:g,CHANGE:y,ELEM_IDS:E}}),Us=ce((t,e)=>{function n(y){return typeof y=="object"&&y!==null}function u(y){if(!n(y))return{};let E={};for(let m of Object.keys(y))E[m]=y[m];return E}function s(y){let E=/^(\d+)@(.*)$/.exec(y||"");if(!E)throw new RangeError(`Not a valid opId: ${y}`);return{counter:parseInt(E[1],10),actorId:E[2]}}function p(y,E){if(!(y instanceof Uint8Array)||!(E instanceof Uint8Array))throw new TypeError("equalBytes can only compare Uint8Arrays");if(y.byteLength!==E.byteLength)return!1;for(let m=0;m<y.byteLength;m++)if(y[m]!==E[m])return!1;return!0}function g(y){let E=new Array(y);for(let m=0;m<y;m++)E[m]=null;return E}e.exports={isObject:n,copyObject:u,parseOpId:s,equalBytes:p,createArrayOfNulls:g}}),eh=ce((t,e)=>{var{OBJECT_ID:n}=Eu(),{isObject:u}=Us(),s=class{constructor(g){if(typeof g=="string"){let y=[...g].map(E=>({value:E}));return p(void 0,y)}else if(Array.isArray(g)){let y=g.map(E=>({value:E}));return p(void 0,y)}else{if(g===void 0)return p(void 0,[]);throw new TypeError(`Unsupported initial value for Text: ${g}`)}}get length(){return this.elems.length}get(g){let y=this.elems[g].value;if(this.context&&u(y)){let E=y[n],m=this.path.concat([{key:g,objectId:E}]);return this.context.instantiateObject(m,E)}else return y}getElemId(g){return this.elems[g].elemId}[Symbol.iterator](){let g=this.elems,y=-1;return{next(){return y+=1,y<g.length?{done:!1,value:g[y].value}:{done:!0}}}}toString(){let g="";for(let y of this.elems)typeof y.value=="string"&&(g+=y.value);return g}toSpans(){let g=[],y="";for(let E of this.elems)typeof E.value=="string"?y+=E.value:(y.length>0&&(g.push(y),y=""),g.push(E.value));return y.length>0&&g.push(y),g}toJSON(){return this.toString()}getWriteable(g,y){if(!this[n])throw new RangeError("getWriteable() requires the objectId to be set");let E=p(this[n],this.elems);return E.context=g,E.path=y,E}set(g,y){if(this.context)this.context.setListIndex(this.path,g,y);else if(!this[n])this.elems[g].value=y;else throw new TypeError("Automerge.Text object cannot be modified outside of a change block");return this}insertAt(g,...y){if(this.context)this.context.splice(this.path,g,0,y);else if(!this[n])this.elems.splice(g,0,...y.map(E=>({value:E})));else throw new TypeError("Automerge.Text object cannot be modified outside of a change block");return this}deleteAt(g,y=1){if(this.context)this.context.splice(this.path,g,y,[]);else if(!this[n])this.elems.splice(g,y);else throw new TypeError("Automerge.Text object cannot be modified outside of a change block");return this}};for(let g of["concat","every","filter","find","findIndex","forEach","includes","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toLocaleString"])s.prototype[g]=function(...y){return[...this][g](...y)};function p(g,y){let E=Object.create(s.prototype);return E[n]=g,E.elems=y,E}e.exports={Text:s,instantiateText:p}}),rh=ce((t,e)=>{var{OBJECT_ID:n,CONFLICTS:u}=Eu(),{isObject:s,copyObject:p}=Us();function g(C,a,H){for(let X of C)if(a[X]!==H[X]){if(typeof a[X]=="number"&&typeof H[X]=="number")return a[X]-H[X];{let w=""+a[X],j=""+H[X];if(w===j)continue;return w<j?-1:1}}return 0}var y=class{constructor(){this.entries=Object.freeze({}),this.opIds=Object.freeze({}),Object.freeze(this)}byId(C){return this.entries[C]}get ids(){return Object.keys(this.entries).filter(C=>{let a=this.entries[C];return s(a)&&a.id===C})}get count(){return this.ids.length}get rows(){return this.ids.map(C=>this.byId(C))}filter(C,a){return this.rows.filter(C,a)}find(C,a){return this.rows.find(C,a)}map(C,a){return this.rows.map(C,a)}sort(C){if(typeof C=="function")return this.rows.sort(C);if(typeof C=="string")return this.rows.sort((a,H)=>g([C],a,H));if(Array.isArray(C))return this.rows.sort((a,H)=>g(C,a,H));if(C===void 0)return this.rows.sort((a,H)=>g(["id"],a,H));throw new TypeError(`Unsupported sorting argument: ${C}`)}[Symbol.iterator](){let C=this.rows,a=-1;return{next(){return a+=1,a<C.length?{done:!1,value:C[a]}:{done:!0}}}}_clone(){if(!this[n])throw new RangeError("clone() requires the objectId to be set");return m(this[n],p(this.entries),p(this.opIds))}_set(C,a,H){if(Object.isFrozen(this.entries))throw new Error("A table can only be modified in a change function");s(a)&&!Array.isArray(a)&&Object.defineProperty(a,"id",{value:C,enumerable:!0}),this.entries[C]=a,this.opIds[C]=H}remove(C){if(Object.isFrozen(this.entries))throw new Error("A table can only be modified in a change function");delete this.entries[C],delete this.opIds[C]}_freeze(){Object.freeze(this.entries),Object.freeze(this.opIds),Object.freeze(this)}getWriteable(C,a){if(!this[n])throw new RangeError("getWriteable() requires the objectId to be set");let H=Object.create(E.prototype);return H[n]=this[n],H.context=C,H.entries=this.entries,H.opIds=this.opIds,H.path=a,H}toJSON(){let C={};for(let a of this.ids)C[a]=this.byId(a);return C}},E=class extends y{byId(C){if(s(this.entries[C])&&this.entries[C].id===C){let a=this.entries[C][n],H=this.path.concat([{key:C,objectId:a}]);return this.context.instantiateObject(H,a,["id"])}}add(C){return this.context.addTableRow(this.path,C)}remove(C){if(s(this.entries[C])&&this.entries[C].id===C)this.context.deleteTableRow(this.path,C,this.opIds[C]);else throw new RangeError(`There is no row with ID ${C} in this table`)}};function m(C,a,H){let X=Object.create(y.prototype);if(!C)throw new RangeError("instantiateTable requires an objectId to be given");return X[n]=C,X[u]=Object.freeze({}),X.entries=a||{},X.opIds=H||{},X}e.exports={Table:y,instantiateTable:m}}),Yp=ce((t,e)=>{var n=class{constructor(p){this.value=p||0,Object.freeze(this)}valueOf(){return this.value}toString(){return this.valueOf().toString()}toJSON(){return this.value}},u=class extends n{increment(p){return p=typeof p=="number"?p:1,this.context.increment(this.path,this.key,p),this.value+=p,this.value}decrement(p){return this.increment(typeof p=="number"?-p:-1)}};function s(p,g,y,E,m){let C=Object.create(u.prototype);return C.value=p,C.context=g,C.path=y,C.objectId=E,C.key=m,C}e.exports={Counter:n,getWriteableCounter:s}}),rv=ce((t,e)=>{var{isObject:n,copyObject:u,parseOpId:s}=Us(),{OBJECT_ID:p,CONFLICTS:g,ELEM_IDS:y}=Eu(),{instantiateText:E}=eh(),{instantiateTable:m}=rh(),{Counter:C}=Yp();function a(U,V,lt){return U.objectId?(V&&V[p]!==U.objectId&&(V=void 0),at(U,V,lt)):U.datatype==="timestamp"?new Date(U.value):U.datatype==="counter"?new C(U.value):U.value}function H(U,V){let lt=/^(\d+)@(.*)$/,It=lt.test(U)?s(U):{counter:0,actorId:U},Ot=lt.test(V)?s(V):{counter:0,actorId:V};return It.counter<Ot.counter?-1:It.counter>Ot.counter?1:It.actorId<Ot.actorId?-1:It.actorId>Ot.actorId?1:0}function X(U,V,lt,It){if(U)for(let Ot of Object.keys(U)){let yt={},Et=Object.keys(U[Ot]).sort(H).reverse();for(let vt of Et){let Yt=U[Ot][vt];lt[Ot]&&lt[Ot][vt]?yt[vt]=a(Yt,lt[Ot][vt],It):yt[vt]=a(Yt,void 0,It)}Et.length===0?(delete V[Ot],delete lt[Ot]):(V[Ot]=yt[Et[0]],lt[Ot]=yt)}}function w(U,V){let lt=u(U),It=u(U?U[g]:void 0);return Object.defineProperty(lt,p,{value:V}),Object.defineProperty(lt,g,{value:It}),lt}function j(U,V,lt){let It=U.objectId;lt[It]||(lt[It]=w(V,It));let Ot=lt[It];return X(U.props,Ot,Ot[g],lt),Ot}function tt(U,V,lt){let It=U.objectId;lt[It]||(lt[It]=V?V._clone():m(It));let Ot=lt[It];for(let yt of Object.keys(U.props||{})){let Et=Object.keys(U.props[yt]);if(Et.length===0)Ot.remove(yt);else if(Et.length===1){let vt=U.props[yt][Et[0]];Ot._set(yt,a(vt,Ot.byId(yt),lt),Et[0])}else throw new RangeError("Conflicts are not supported on properties of a table")}return Ot}function J(U,V){let lt=U?U.slice():[],It=U&&U[g]?U[g].slice():[],Ot=U&&U[y]?U[y].slice():[];return Object.defineProperty(lt,p,{value:V}),Object.defineProperty(lt,g,{value:It}),Object.defineProperty(lt,y,{value:Ot}),lt}function N(U,V,lt){let It=U.objectId;lt[It]||(lt[It]=J(V,It));let Ot=lt[It],yt=Ot[g],Et=Ot[y];for(let vt=0;vt<U.edits.length;vt++){let Yt=U.edits[vt];if(Yt.action==="insert"||Yt.action==="update"){let Xt=yt[Yt.index]&&yt[Yt.index][Yt.opId],re=a(Yt.value,Xt,lt),ae={[Yt.opId]:re};for(;vt<U.edits.length-1&&U.edits[vt+1].index===Yt.index&&U.edits[vt+1].action==="update";){vt++;let He=U.edits[vt],de=yt[He.index]&&yt[He.index][He.opId];re=a(He.value,de,lt),ae[He.opId]=re}Yt.action==="insert"?(Ot.splice(Yt.index,0,re),yt.splice(Yt.index,0,ae),Et.splice(Yt.index,0,Yt.elemId)):(Ot[Yt.index]=re,yt[Yt.index]=ae)}else if(Yt.action==="multi-insert"){let Xt=s(Yt.elemId),re=[],ae=[],He=[],de=Yt.datatype;Yt.values.forEach((pe,Ce)=>{let Ie=`${Xt.counter+Ce}@${Xt.actorId}`;pe=a({value:pe,datatype:de},void 0,lt),ae.push(pe),He.push({[Ie]:{value:pe,datatype:de,type:"value"}}),re.push(Ie)}),Ot.splice(Yt.index,0,...ae),yt.splice(Yt.index,0,...He),Et.splice(Yt.index,0,...re)}else Yt.action==="remove"&&(Ot.splice(Yt.index,Yt.count),yt.splice(Yt.index,Yt.count),Et.splice(Yt.index,Yt.count))}return Ot}function Q(U,V,lt){let It=U.objectId,Ot;lt[It]?Ot=lt[It].elems:V?Ot=V.elems.slice():Ot=[];for(let yt of U.edits)if(yt.action==="insert"){let Et=a(yt.value,void 0,lt),vt={elemId:yt.elemId,pred:[yt.opId],value:Et};Ot.splice(yt.index,0,vt)}else if(yt.action==="multi-insert"){let Et=s(yt.elemId),vt=yt.datatype,Yt=yt.values.map((Xt,re)=>{Xt=a({datatype:vt,value:Xt},void 0,lt);let ae=`${Et.counter+re}@${Et.actorId}`;return{elemId:ae,pred:[ae],value:Xt}});Ot.splice(yt.index,0,...Yt)}else if(yt.action==="update"){let Et=Ot[yt.index].elemId,vt=a(yt.value,Ot[yt.index].value,lt);Ot[yt.index]={elemId:Et,pred:[yt.opId],value:vt}}else yt.action==="remove"&&Ot.splice(yt.index,yt.count);return lt[It]=E(It,Ot),lt[It]}function at(U,V,lt){if(n(V)&&(!U.props||Object.keys(U.props).length===0)&&(!U.edits||U.edits.length===0)&&!lt[U.objectId])return V;if(U.type==="map")return j(U,V,lt);if(U.type==="table")return tt(U,V,lt);if(U.type==="list")return N(U,V,lt);if(U.type==="text")return Q(U,V,lt);throw new TypeError(`Unknown object type: ${U.type}`)}function q(U){if(U[p]!=="_root")throw new RangeError(`Not the root object: ${U[p]}`);return w(U,"_root")}e.exports={interpretPatch:at,cloneRootObject:q}}),zC=ce((t,e)=>{var{OBJECT_ID:n,CHANGE:u,STATE:s}=Eu(),{createArrayOfNulls:p}=Us(),{Text:g}=eh(),{Table:y}=rh();function E(tt){if(typeof tt=="string"&&/^[0-9]+$/.test(tt)&&(tt=parseInt(tt,10)),typeof tt!="number")throw new TypeError("A list index must be a number, but you passed "+JSON.stringify(tt));if(tt<0||isNaN(tt)||tt===1/0||tt===-1/0)throw new RangeError("A list index must be positive, but you passed "+tt);return tt}function m(tt,J,N){let Q={deleteAt(at,q){return tt.splice(N,E(at),q||1,[]),this},fill(at,q,U){let V=tt.getObject(J);for(let lt=E(q||0);lt<E(U||V.length);lt++)tt.setListIndex(N,lt,at);return this},indexOf(at,q=0){let U=at[n];if(U){let V=tt.getObject(J);for(let lt=q;lt<V.length;lt++)if(V[lt][n]===U)return lt;return-1}else return tt.getObject(J).indexOf(at,q)},insertAt(at,...q){return tt.splice(N,E(at),0,q),this},pop(){let at=tt.getObject(J);if(at.length==0)return;let q=tt.getObjectField(N,J,at.length-1);return tt.splice(N,at.length-1,1,[]),q},push(...at){let q=tt.getObject(J);return tt.splice(N,q.length,0,at),tt.getObject(J).length},shift(){if(tt.getObject(J).length==0)return;let at=tt.getObjectField(N,J,0);return tt.splice(N,0,1,[]),at},splice(at,q,...U){let V=tt.getObject(J);at=E(at),(q===void 0||q>V.length-at)&&(q=V.length-at);let lt=[];for(let It=0;It<q;It++)lt.push(tt.getObjectField(N,J,at+It));return tt.splice(N,at,q,U),lt},unshift(...at){return tt.splice(N,0,0,at),tt.getObject(J).length}};for(let at of["entries","keys","values"]){let q=tt.getObject(J);Q[at]=()=>q[at]()}for(let at of["concat","every","filter","find","findIndex","forEach","includes","join","lastIndexOf","map","reduce","reduceRight","slice","some","toLocaleString","toString"])Q[at]=(...q)=>tt.getObject(J).map((U,V)=>tt.getObjectField(N,J,V))[at](...q);return Q}var C={get(tt,J){let{context:N,objectId:Q,path:at}=tt;return J===n?Q:J===u?N:J===s?{actorId:N.actorId}:N.getObjectField(at,Q,J)},set(tt,J,N){let{context:Q,path:at,readonly:q}=tt;if(Array.isArray(q)&&q.indexOf(J)>=0)throw new RangeError(`Object property "${J}" cannot be modified`);return Q.setMapKey(at,J,N),!0},deleteProperty(tt,J){let{context:N,path:Q,readonly:at}=tt;if(Array.isArray(at)&&at.indexOf(J)>=0)throw new RangeError(`Object property "${J}" cannot be modified`);return N.deleteMapKey(Q,J),!0},has(tt,J){let{context:N,objectId:Q}=tt;return[n,u].includes(J)||J in N.getObject(Q)},getOwnPropertyDescriptor(tt,J){let{context:N,objectId:Q}=tt,at=N.getObject(Q);if(J in at)return{configurable:!0,enumerable:!0,value:N.getObjectField(Q,J)}},ownKeys(tt){let{context:J,objectId:N}=tt;return Object.keys(J.getObject(N))}},a={get(tt,J){let[N,Q,at]=tt;return J===Symbol.iterator?N.getObject(Q)[Symbol.iterator]:J===n?Q:J===u?N:J==="length"?N.getObject(Q).length:typeof J=="string"&&/^[0-9]+$/.test(J)?N.getObjectField(at,Q,E(J)):m(N,Q,at)[J]},set(tt,J,N){let[Q,at,q]=tt;if(J==="length"){if(typeof N!="number")throw new RangeError("Invalid array length");let U=Q.getObject(at).length;U>N?Q.splice(q,N,U-N,[]):Q.splice(q,U,0,p(N-U))}else Q.setListIndex(q,E(J),N);return!0},deleteProperty(tt,J){let[N,,Q]=tt;return N.splice(Q,E(J),1,[]),!0},has(tt,J){let[N,Q]=tt;return typeof J=="string"&&/^[0-9]+$/.test(J)?E(J)<N.getObject(Q).length:["length",n,u].includes(J)},getOwnPropertyDescriptor(tt,J){let[N,Q]=tt,at=N.getObject(Q);if(J==="length")return{writable:!0,value:at.length};if(J===n)return{configurable:!1,enumerable:!1,value:Q};if(typeof J=="string"&&/^[0-9]+$/.test(J)){let q=E(J);if(q<at.length)return{configurable:!0,enumerable:!0,value:N.getObjectField(Q,q)}}},ownKeys(tt){let[J,N]=tt,Q=J.getObject(N),at=["length"];for(let q of Object.keys(Q))at.push(q);return at}};function H(tt,J,N,Q){return new Proxy({context:tt,objectId:J,path:N,readonly:Q},C)}function X(tt,J,N){return new Proxy([tt,J,N],a)}function w(tt,J,N){let Q=this.getObject(J);return Array.isArray(Q)?X(this,J,tt):Q instanceof g||Q instanceof y?Q.getWriteable(this,tt):H(this,J,tt,N)}function j(tt){return tt.instantiateObject=w,H(tt,"_root",[])}e.exports={rootObjectProxy:j}}),av=ce((t,e)=>{var n=class{constructor(p){if(!(Number.isInteger(p)&&p<=Number.MAX_SAFE_INTEGER&&p>=Number.MIN_SAFE_INTEGER))throw new RangeError(`Value ${p} cannot be a uint`);this.value=p,Object.freeze(this)}},u=class{constructor(p){if(!(Number.isInteger(p)&&p<=Number.MAX_SAFE_INTEGER&&p>=0))throw new RangeError(`Value ${p} cannot be a uint`);this.value=p,Object.freeze(this)}},s=class{constructor(p){if(typeof p!="number")throw new RangeError(`Value ${p} cannot be a float64`);this.value=p||0,Object.freeze(this)}};e.exports={Int:n,Uint:u,Float64:s}}),JC=ce((t,e)=>{var{CACHE:n,OBJECT_ID:u,CONFLICTS:s,ELEM_IDS:p,STATE:g}=Eu(),{interpretPatch:y}=rv(),{Text:E}=eh(),{Table:m}=rh(),{Counter:C,getWriteableCounter:a}=Yp(),{Int:H,Uint:X,Float64:w}=av(),{isObject:j,parseOpId:tt,createArrayOfNulls:J}=Us(),N=Kp(),Q=class{constructor(U,V,lt){this.actorId=V,this.nextOpNum=U[g].maxOp+1,this.cache=U[n],this.updated={},this.ops=[],this.applyPatch=lt||y}addOp(U){this.ops.push(U),U.action==="set"&&U.values?this.nextOpNum+=U.values.length:U.action==="del"&&U.multiOp?this.nextOpNum+=U.multiOp:this.nextOpNum+=1}nextOpId(){return`${this.nextOpNum}@${this.actorId}`}getValueDescription(U){if(!["object","boolean","number","string"].includes(typeof U))throw new TypeError(`Unsupported type of value: ${typeof U}`);if(j(U)){if(U instanceof Date)return{type:"value",value:U.getTime(),datatype:"timestamp"};if(U instanceof H)return{type:"value",value:U.value,datatype:"int"};if(U instanceof X)return{type:"value",value:U.value,datatype:"uint"};if(U instanceof w)return{type:"value",value:U.value,datatype:"float64"};if(U instanceof C)return{type:"value",value:U.value,datatype:"counter"};{let V=U[u],lt=this.getObjectType(V);if(!V)throw new RangeError(`Object ${JSON.stringify(U)} has no objectId`);return lt==="list"||lt==="text"?{objectId:V,type:lt,edits:[]}:{objectId:V,type:lt,props:{}}}}else return typeof U=="number"?Number.isInteger(U)&&U<=Number.MAX_SAFE_INTEGER&&U>=Number.MIN_SAFE_INTEGER?{type:"value",value:U,datatype:"int"}:{type:"value",value:U,datatype:"float64"}:{type:"value",value:U}}getValuesDescriptions(U,V,lt){if(V instanceof m){let It=V.byId(lt),Ot=V.opIds[lt];return It?{[Ot]:this.getValueDescription(It)}:{}}else if(V instanceof E){let It=V.get(lt),Ot=V.getElemId(lt);return It?{[Ot]:this.getValueDescription(It)}:{}}else{let It=V[s][lt],Ot={};if(!It)throw new RangeError(`No children at key ${lt} of path ${JSON.stringify(U)}`);for(let yt of Object.keys(It))Ot[yt]=this.getValueDescription(It[yt]);return Ot}}getPropertyValue(U,V,lt){return U instanceof m?U.byId(V):U instanceof E?U.get(V):U[s][V][lt]}getSubpatch(U,V){if(V.length==0)return U;let lt=U,It=this.getObject("_root");for(let Ot of V){let yt=this.getValuesDescriptions(V,It,Ot.key);if(lt.props)lt.props[Ot.key]||(lt.props[Ot.key]=yt);else if(lt.edits)for(let vt of Object.keys(yt))lt.edits.push({action:"update",index:Ot.key,opId:vt,value:yt[vt]});let Et=null;for(let vt of Object.keys(yt))yt[vt].objectId===Ot.objectId&&(Et=vt);if(!Et)throw new RangeError(`Cannot find path object with objectId ${Ot.objectId}`);lt=yt[Et],It=this.getPropertyValue(It,Ot.key,Et)}return lt}getObject(U){let V=this.updated[U]||this.cache[U];if(!V)throw new RangeError(`Target object does not exist: ${U}`);return V}getObjectType(U){if(U==="_root")return"map";let V=this.getObject(U);return V instanceof E?"text":V instanceof m?"table":Array.isArray(V)?"list":"map"}getObjectField(U,V,lt){if(!["string","number"].includes(typeof lt))return;let It=this.getObject(V);if(It[lt]instanceof C)return a(It[lt].value,this,U,V,lt);if(j(It[lt])){let Ot=It[lt][u],yt=U.concat([{key:lt,objectId:Ot}]);return this.instantiateObject(yt,Ot)}else return It[lt]}createNestedObjects(U,V,lt,It,Ot,yt){if(lt[u])throw new RangeError("Cannot create a reference to an existing document object");let Et=this.nextOpId();if(lt instanceof E){this.addOp(yt?{action:"makeText",obj:U,elemId:yt,insert:It,pred:Ot}:{action:"makeText",obj:U,key:V,insert:It,pred:Ot});let vt={objectId:Et,type:"text",edits:[]};return this.insertListItems(vt,0,[...lt],!0),vt}else if(lt instanceof m){if(lt.count>0)throw new RangeError("Assigning a non-empty Table object is not supported");return this.addOp(yt?{action:"makeTable",obj:U,elemId:yt,insert:It,pred:Ot}:{action:"makeTable",obj:U,key:V,insert:It,pred:Ot}),{objectId:Et,type:"table",props:{}}}else if(Array.isArray(lt)){this.addOp(yt?{action:"makeList",obj:U,elemId:yt,insert:It,pred:Ot}:{action:"makeList",obj:U,key:V,insert:It,pred:Ot});let vt={objectId:Et,type:"list",edits:[]};return this.insertListItems(vt,0,lt,!0),vt}else{this.addOp(yt?{action:"makeMap",obj:U,elemId:yt,insert:It,pred:Ot}:{action:"makeMap",obj:U,key:V,insert:It,pred:Ot});let vt={};for(let Yt of Object.keys(lt).sort()){let Xt=this.nextOpId(),re=this.setValue(Et,Yt,lt[Yt],!1,[]);vt[Yt]={[Xt]:re}}return{objectId:Et,type:"map",props:vt}}}setValue(U,V,lt,It,Ot,yt){if(!U)throw new RangeError("setValue needs an objectId");if(V==="")throw new RangeError("The key of a map entry must not be an empty string");if(j(lt)&&!(lt instanceof Date)&&!(lt instanceof C)&&!(lt instanceof H)&&!(lt instanceof X)&&!(lt instanceof w))return this.createNestedObjects(U,V,lt,It,Ot,yt);{let Et=this.getValueDescription(lt),vt={action:"set",obj:U,insert:It,value:Et.value,pred:Ot};return yt?vt.elemId=yt:vt.key=V,Et.datatype&&(vt.datatype=Et.datatype),this.addOp(vt),Et}}applyAtPath(U,V){let lt={objectId:"_root",type:"map",props:{}};V(this.getSubpatch(lt,U)),this.applyPatch(lt,this.cache._root,this.updated)}setMapKey(U,V,lt){if(typeof V!="string")throw new RangeError(`The key of a map entry must be a string, not ${typeof V}`);let It=U.length===0?"_root":U[U.length-1].objectId,Ot=this.getObject(It);if(Ot[V]instanceof C)throw new RangeError("Cannot overwrite a Counter object; use .increment() or .decrement() to change its value.");(Ot[V]!==lt||Object.keys(Ot[s][V]||{}).length>1||lt===void 0)&&this.applyAtPath(U,yt=>{let Et=at(Ot,V),vt=this.nextOpId(),Yt=this.setValue(It,V,lt,!1,Et);yt.props[V]={[vt]:Yt}})}deleteMapKey(U,V){let lt=U.length===0?"_root":U[U.length-1].objectId,It=this.getObject(lt);if(It[V]!==void 0){let Ot=at(It,V);this.addOp({action:"del",obj:lt,key:V,insert:!1,pred:Ot}),this.applyAtPath(U,yt=>{yt.props[V]={}})}}insertListItems(U,V,lt,It){let Ot=It?[]:this.getObject(U.objectId);if(V<0||V>Ot.length)throw new RangeError(`List index ${V} is out of bounds for list of length ${Ot.length}`);if(lt.length===0)return;let yt=q(Ot,V,!0),Et=lt.every(Xt=>typeof Xt=="string"||typeof Xt=="number"||typeof Xt=="boolean"||Xt===null||j(Xt)&&(Xt instanceof Date||Xt instanceof C||Xt instanceof H||Xt instanceof X||Xt instanceof w)),vt=Et?lt.map(Xt=>this.getValueDescription(Xt)):[],Yt=vt.every(Xt=>Xt.datatype===vt[0].datatype);if(Et&&Yt&&lt.length>1){let Xt=this.nextOpId(),re=vt[0].datatype,ae=vt.map(pe=>pe.value),He={action:"set",obj:U.objectId,elemId:yt,insert:!0,values:ae,pred:[]},de={action:"multi-insert",elemId:Xt,index:V,values:ae};re&&(He.datatype=re,de.datatype=re),this.addOp(He),U.edits.push(de)}else for(let Xt=0;Xt<lt.length;Xt++){let re=this.nextOpId(),ae=this.setValue(U.objectId,V+Xt,lt[Xt],!0,[],yt);yt=re,U.edits.push({action:"insert",index:V+Xt,elemId:yt,opId:yt,value:ae})}}setListIndex(U,V,lt){let It=U.length===0?"_root":U[U.length-1].objectId,Ot=this.getObject(It);if(V>=Ot.length){let yt=J(V-Ot.length);return yt.push(lt),this.splice(U,Ot.length,0,yt)}if(Ot[V]instanceof C)throw new RangeError("Cannot overwrite a Counter object; use .increment() or .decrement() to change its value.");(Ot[V]!==lt||Object.keys(Ot[s][V]||{}).length>1||lt===void 0)&&this.applyAtPath(U,yt=>{let Et=at(Ot,V),vt=this.nextOpId(),Yt=this.setValue(It,V,lt,!1,Et,q(Ot,V));yt.edits.push({action:"update",index:V,opId:vt,value:Yt})})}splice(U,V,lt,It){let Ot=U.length===0?"_root":U[U.length-1].objectId,yt=this.getObject(Ot);if(V<0||lt<0||V>yt.length-lt)throw new RangeError(`${lt} deletions starting at index ${V} are out of bounds for list of length ${yt.length}`);if(lt===0&&It.length===0)return;let Et={diffs:{objectId:"_root",type:"map",props:{}}},vt=this.getSubpatch(Et.diffs,U);if(lt>0){let Yt,Xt,re;for(let ae=0;ae<lt;ae++){if(this.getObjectField(U,Ot,V+ae)instanceof C)throw new TypeError("Unsupported operation: deleting a counter from a list");let He=q(yt,V+ae),de=tt(He),pe=at(yt,V+ae),Ce=pe.length===1?tt(pe[0]):void 0;Yt&&Xt&&re&&Ce&&Xt.actorId===de.actorId&&Xt.counter+1===de.counter&&re.actorId===Ce.actorId&&re.counter+1===Ce.counter?Yt.multiOp=(Yt.multiOp||1)+1:(Yt&&this.addOp(Yt),Yt={action:"del",obj:Ot,elemId:He,insert:!1,pred:pe}),Xt=de,re=Ce}this.addOp(Yt),vt.edits.push({action:"remove",index:V,count:lt})}It.length>0&&this.insertListItems(vt,V,It,!1),this.applyPatch(Et.diffs,this.cache._root,this.updated)}addTableRow(U,V){if(!j(V)||Array.isArray(V))throw new TypeError("A table row must be an object");if(V[u])throw new TypeError("Cannot reuse an existing object as table row");if(V.id)throw new TypeError('A table row must not have an "id" property; it is generated automatically');let lt=N(),It=this.setValue(U[U.length-1].objectId,lt,V,!1,[]);return this.applyAtPath(U,Ot=>{Ot.props[lt]={[It.objectId]:It}}),lt}deleteTableRow(U,V,lt){let It=U[U.length-1].objectId;this.getObject(It).byId(V)&&(this.addOp({action:"del",obj:It,key:V,insert:!1,pred:[lt]}),this.applyAtPath(U,Ot=>{Ot.props[V]={}}))}increment(U,V,lt){let It=U.length===0?"_root":U[U.length-1].objectId,Ot=this.getObject(It);if(!(Ot[V]instanceof C))throw new TypeError("Only counter values can be incremented");let yt=this.getObjectType(It),Et=Ot[V].value+lt,vt=this.nextOpId(),Yt=at(Ot,V);if(yt==="list"||yt==="text"){let Xt=q(Ot,V,!1);this.addOp({action:"inc",obj:It,elemId:Xt,value:lt,insert:!1,pred:Yt})}else this.addOp({action:"inc",obj:It,key:V,value:lt,insert:!1,pred:Yt});this.applyAtPath(U,Xt=>{yt==="list"||yt==="text"?Xt.edits.push({action:"update",index:V,opId:vt,value:{value:Et,datatype:"counter"}}):Xt.props[V]={[vt]:{value:Et,datatype:"counter"}}})}};function at(U,V){return U instanceof m?[U.opIds[V]]:U instanceof E?U.elems[V].pred:U[s]?U[s][V]?Object.keys(U[s][V]):[]:[]}function q(U,V,lt=!1){if(lt){if(V===0)return"_head";V-=1}if(U[p])return U[p][V];if(U.getElemId)return U.getElemId(V);throw new RangeError(`Cannot find elemId at list index ${V}`)}e.exports={Context:Q}}),QC=ce((t,e)=>{var{OBJECT_ID:n,CONFLICTS:u}=Eu(),s=class{constructor(){this.observers={}}patchCallback(p,g,y,E,m){this._objectUpdate(p.diffs,g,y,E,m)}_objectUpdate(p,g,y,E,m){if(p.objectId){if(this.observers[p.objectId])for(let C of this.observers[p.objectId])C(p,g,y,E,m);if(p.type==="map"&&p.props)for(let C of Object.keys(p.props))for(let a of Object.keys(p.props[C]))this._objectUpdate(p.props[C][a],g&&g[u]&&g[u][C]&&g[u][C][a],y&&y[u]&&y[u][C]&&y[u][C][a],E,m);else if(p.type==="table"&&p.props)for(let C of Object.keys(p.props))for(let a of Object.keys(p.props[C]))this._objectUpdate(p.props[C][a],g&&g.byId(C),y&&y.byId(C),E,m);else if(p.type==="list"&&p.edits){let C=0;for(let a of p.edits)a.action==="insert"?(C-=1,this._objectUpdate(a.value,void 0,y&&y[u]&&y[u][a.index]&&y[u][a.index][a.elemId],E,m)):a.action==="multi-insert"?C-=a.values.length:a.action==="update"?this._objectUpdate(a.value,g&&g[u]&&g[u][a.index+C]&&g[u][a.index+C][a.opId],y&&y[u]&&y[u][a.index]&&y[u][a.index][a.opId],E,m):a.action==="remove"&&(C+=a.count)}else if(p.type==="text"&&p.edits){let C=0;for(let a of p.edits)a.action==="insert"?(C-=1,this._objectUpdate(a.value,void 0,y&&y.get(a.index),E,m)):a.action==="multi-insert"?C-=a.values.length:a.action==="update"?this._objectUpdate(a.value,g&&g.get(a.index+C),y&&y.get(a.index),E,m):a.action==="remove"&&(C+=a.count)}}}observe(p,g){let y=p[n];if(!y)throw new TypeError("The observed object must be part of an Automerge document");this.observers[y]||(this.observers[y]=[]),this.observers[y].push(g)}};e.exports={Observable:s}}),oD=ce((t,e)=>{var{OPTIONS:n,CACHE:u,STATE:s,OBJECT_ID:p,CONFLICTS:g,CHANGE:y,ELEM_IDS:E}=Eu(),{isObject:m,copyObject:C}=Us(),a=Kp(),{interpretPatch:H,cloneRootObject:X}=rv(),{rootObjectProxy:w}=zC(),{Context:j}=JC(),{Text:tt}=eh(),{Table:J}=rh(),{Counter:N}=Yp(),{Float64:Q,Int:at,Uint:q}=av(),{Observable:U}=QC();function V(we){if(typeof we!="string")throw new TypeError(`Unsupported type of actorId: ${typeof we}`);if(!/^[0-9a-f]+$/.test(we))throw new RangeError("actorId must consist only of lowercase hex digits");if(we.length%2!==0)throw new RangeError("actorId must consist of an even number of digits")}function lt(we,Se,Qe){let Ke=Se._root;if(Ke||(Ke=X(we[u]._root),Se._root=Ke),Object.defineProperty(Ke,n,{value:we[n]}),Object.defineProperty(Ke,u,{value:Se}),Object.defineProperty(Ke,s,{value:Qe}),we[n].freeze)for(let Ze of Object.keys(Se))Se[Ze]instanceof J?Se[Ze]._freeze():Se[Ze]instanceof tt?(Object.freeze(Se[Ze].elems),Object.freeze(Se[Ze])):(Object.freeze(Se[Ze]),Object.freeze(Se[Ze][g]));for(let Ze of Object.keys(we[u]))Se[Ze]||(Se[Ze]=we[u][Ze]);return we[n].freeze&&Object.freeze(Se),Ke}function It(we,Se,Qe){let Ke=pe(we);if(!Ke)throw new Error("Actor ID must be initialized with setActorId() before making a change");let Ze=C(we[s]);Ze.seq+=1;let vr={actor:Ke,seq:Ze.seq,startOp:Ze.maxOp+1,deps:Ze.deps,time:Qe&&typeof Qe.time=="number"?Qe.time:Math.round(new Date().getTime()/1e3),message:Qe&&typeof Qe.message=="string"?Qe.message:"",ops:Se.ops};if(we[n].backend){let[Pr,Cr,et]=we[n].backend.applyLocalChange(Ze.backendState,vr);Ze.backendState=Pr,Ze.lastLocalChange=et;let k=Et(we,Cr,Ze,!0),Z=Qe&&Qe.patchCallback||we[n].patchCallback;return Z&&Z(Cr,we,k,!0,[et]),[k,vr]}else{let Pr={actor:Ke,seq:vr.seq,before:we};return Ze.requests=Ze.requests.concat([Pr]),Ze.maxOp=Ze.maxOp+Ot(vr.ops),Ze.deps=[],[lt(we,Se?Se.updated:{},Ze),vr]}}function Ot(we){let Se=0;for(let Qe of we)Qe.action==="set"&&Qe.values?Se+=Qe.values.length:Se+=1;return Se}function yt(we){return we[s]&&we[s].lastLocalChange?we[s].lastLocalChange:null}function Et(we,Se,Qe,Ke){let Ze=pe(we),vr={};if(H(Se.diffs,we,vr),Ke){if(!Se.clock)throw new RangeError("patch is missing clock field");Se.clock[Ze]&&Se.clock[Ze]>Qe.seq&&(Qe.seq=Se.clock[Ze]),Qe.clock=Se.clock,Qe.deps=Se.deps,Qe.maxOp=Math.max(Qe.maxOp,Se.maxOp)}return lt(we,vr,Qe)}function vt(we){if(typeof we=="string")we={actorId:we};else if(typeof we>"u")we={};else if(!m(we))throw new TypeError(`Unsupported value for init() options: ${we}`);if(we.deferActorId||(we.actorId===void 0&&(we.actorId=a()),V(we.actorId)),we.observable){let Ze=we.patchCallback,vr=we.observable;we.patchCallback=(Pr,Cr,et,k,Z)=>{Ze&&Ze(Pr,Cr,et,k,Z),vr.patchCallback(Pr,Cr,et,k,Z)}}let Se={},Qe={_root:Se},Ke={seq:0,maxOp:0,requests:[],clock:{},deps:[]};return we.backend&&(Ke.backendState=we.backend.init(),Ke.lastLocalChange=null),Object.defineProperty(Se,p,{value:"_root"}),Object.defineProperty(Se,n,{value:Object.freeze(we)}),Object.defineProperty(Se,g,{value:Object.freeze({})}),Object.defineProperty(Se,u,{value:Object.freeze(Qe)}),Object.defineProperty(Se,s,{value:Object.freeze(Ke)}),Object.freeze(Se)}function Yt(we,Se){return Xt(vt(Se),"Initialization",Qe=>Object.assign(Qe,we))}function Xt(we,Se,Qe){if(we[p]!=="_root")throw new TypeError("The first argument to Automerge.change must be the document root");if(we[y])throw new TypeError("Calls to Automerge.change cannot be nested");if(typeof Se=="function"&&Qe===void 0&&([Se,Qe]=[Qe,Se]),typeof Se=="string"&&(Se={message:Se}),Se!==void 0&&!m(Se))throw new TypeError("Unsupported type of options");let Ke=pe(we);if(!Ke)throw new Error("Actor ID must be initialized with setActorId() before making a change");let Ze=new j(we,Ke);return Qe(w(Ze)),Object.keys(Ze.updated).length===0?[we,null]:It(we,Ze,Se)}function re(we,Se){if(we[p]!=="_root")throw new TypeError("The first argument to Automerge.emptyChange must be the document root");if(typeof Se=="string"&&(Se={message:Se}),Se!==void 0&&!m(Se))throw new TypeError("Unsupported type of options");let Qe=pe(we);if(!Qe)throw new Error("Actor ID must be initialized with setActorId() before making a change");return It(we,new j(we,Qe),Se)}function ae(we,Se,Qe=void 0){if(we[p]!=="_root")throw new TypeError("The first argument to Frontend.applyPatch must be the document root");let Ke=C(we[s]);if(we[n].backend){if(!Qe)throw new RangeError("applyPatch must be called with the updated backend state");return Ke.backendState=Qe,Et(we,Se,Ke,!0)}let Ze;if(Ke.requests.length>0)if(Ze=Ke.requests[0].before,Se.actor===pe(we)){if(Ke.requests[0].seq!==Se.seq)throw new RangeError(`Mismatched sequence number: patch ${Se.seq} does not match next request ${Ke.requests[0].seq}`);Ke.requests=Ke.requests.slice(1)}else Ke.requests=Ke.requests.slice();else Ze=we,Ke.requests=[];let vr=Et(Ze,Se,Ke,!0);return Ke.requests.length===0?vr:(Ke.requests[0]=C(Ke.requests[0]),Ke.requests[0].before=vr,lt(we,{},Ke))}function He(we){return we[p]}function de(we,Se){if(we[y])throw new TypeError("Cannot use getObjectById in a change callback");return we[u][Se]}function pe(we){return we[s].actorId||we[n].actorId}function Ce(we,Se){V(Se);let Qe=Object.assign({},we[s],{actorId:Se});return lt(we,{},Qe)}function Ie(we,Se){if(we[g]&&we[g][Se]&&Object.keys(we[g][Se]).length>1)return we[g][Se]}function Ve(we,Se=null,Qe="first"){if(we[p]!=="_root"){let Ke=Array.isArray(we)?". Note: Automerge.applyChanges now returns an array.":"";throw Se?new TypeError(`The ${Qe} argument to Automerge.${Se} must be the document root${Ke}`):new TypeError(`Argument is not an Automerge document root${Ke}`)}return we[s].backendState}function We(we){return we instanceof tt?we.elems.map(Se=>Se.elemId):we[E]}e.exports={init:vt,from:Yt,change:Xt,emptyChange:re,applyPatch:ae,getObjectId:He,getObjectById:de,getActorId:pe,setActorId:Ce,getConflicts:Ie,getLastLocalChange:yt,getBackendState:Ve,getElementIds:We,Text:tt,Table:J,Counter:N,Observable:U,Float64:Q,Int:at,Uint:q}}),BD=ce((t,e)=>{"use strict";function n(f){let S=f.length;for(;--S>=0;)f[S]=0}var u=0,s=1,p=2,g=3,y=258,E=29,m=256,C=m+1+E,a=30,H=19,X=2*C+1,w=15,j=16,tt=7,J=256,N=16,Q=17,at=18,q=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),U=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),V=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),lt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),It=512,Ot=new Array((C+2)*2);n(Ot);var yt=new Array(a*2);n(yt);var Et=new Array(It);n(Et);var vt=new Array(y-g+1);n(vt);var Yt=new Array(E);n(Yt);var Xt=new Array(a);n(Xt);function re(f,S,W,Bt,Nt){this.static_tree=f,this.extra_bits=S,this.extra_base=W,this.elems=Bt,this.max_length=Nt,this.has_stree=f&&f.length}var ae,He,de;function pe(f,S){this.dyn_tree=f,this.max_code=0,this.stat_desc=S}var Ce=f=>f<256?Et[f]:Et[256+(f>>>7)],Ie=(f,S)=>{f.pending_buf[f.pending++]=S&255,f.pending_buf[f.pending++]=S>>>8&255},Ve=(f,S,W)=>{f.bi_valid>j-W?(f.bi_buf|=S<<f.bi_valid&65535,Ie(f,f.bi_buf),f.bi_buf=S>>j-f.bi_valid,f.bi_valid+=W-j):(f.bi_buf|=S<<f.bi_valid&65535,f.bi_valid+=W)},We=(f,S,W)=>{Ve(f,W[S*2],W[S*2+1])},we=(f,S)=>{let W=0;do W|=f&1,f>>>=1,W<<=1;while(--S>0);return W>>>1},Se=f=>{f.bi_valid===16?(Ie(f,f.bi_buf),f.bi_buf=0,f.bi_valid=0):f.bi_valid>=8&&(f.pending_buf[f.pending++]=f.bi_buf&255,f.bi_buf>>=8,f.bi_valid-=8)},Qe=(f,S)=>{let W=S.dyn_tree,Bt=S.max_code,Nt=S.stat_desc.static_tree,nt=S.stat_desc.has_stree,zt=S.stat_desc.extra_bits,Lt=S.stat_desc.extra_base,Be=S.stat_desc.max_length,_t,gt,rt,F,st,wt,Ct=0;for(F=0;F<=w;F++)f.bl_count[F]=0;for(W[f.heap[f.heap_max]*2+1]=0,_t=f.heap_max+1;_t<X;_t++)gt=f.heap[_t],F=W[W[gt*2+1]*2+1]+1,F>Be&&(F=Be,Ct++),W[gt*2+1]=F,!(gt>Bt)&&(f.bl_count[F]++,st=0,gt>=Lt&&(st=zt[gt-Lt]),wt=W[gt*2],f.opt_len+=wt*(F+st),nt&&(f.static_len+=wt*(Nt[gt*2+1]+st)));if(Ct!==0){do{for(F=Be-1;f.bl_count[F]===0;)F--;f.bl_count[F]--,f.bl_count[F+1]+=2,f.bl_count[Be]--,Ct-=2}while(Ct>0);for(F=Be;F!==0;F--)for(gt=f.bl_count[F];gt!==0;)rt=f.heap[--_t],!(rt>Bt)&&(W[rt*2+1]!==F&&(f.opt_len+=(F-W[rt*2+1])*W[rt*2],W[rt*2+1]=F),gt--)}},Ke=(f,S,W)=>{let Bt=new Array(w+1),Nt=0,nt,zt;for(nt=1;nt<=w;nt++)Nt=Nt+W[nt-1]<<1,Bt[nt]=Nt;for(zt=0;zt<=S;zt++){let Lt=f[zt*2+1];Lt!==0&&(f[zt*2]=we(Bt[Lt]++,Lt))}},Ze=()=>{let f,S,W,Bt,Nt,nt=new Array(w+1);for(W=0,Bt=0;Bt<E-1;Bt++)for(Yt[Bt]=W,f=0;f<1<<q[Bt];f++)vt[W++]=Bt;for(vt[W-1]=Bt,Nt=0,Bt=0;Bt<16;Bt++)for(Xt[Bt]=Nt,f=0;f<1<<U[Bt];f++)Et[Nt++]=Bt;for(Nt>>=7;Bt<a;Bt++)for(Xt[Bt]=Nt<<7,f=0;f<1<<U[Bt]-7;f++)Et[256+Nt++]=Bt;for(S=0;S<=w;S++)nt[S]=0;for(f=0;f<=143;)Ot[f*2+1]=8,f++,nt[8]++;for(;f<=255;)Ot[f*2+1]=9,f++,nt[9]++;for(;f<=279;)Ot[f*2+1]=7,f++,nt[7]++;for(;f<=287;)Ot[f*2+1]=8,f++,nt[8]++;for(Ke(Ot,C+1,nt),f=0;f<a;f++)yt[f*2+1]=5,yt[f*2]=we(f,5);ae=new re(Ot,q,m+1,C,w),He=new re(yt,U,0,a,w),de=new re(new Array(0),V,0,H,tt)},vr=f=>{let S;for(S=0;S<C;S++)f.dyn_ltree[S*2]=0;for(S=0;S<a;S++)f.dyn_dtree[S*2]=0;for(S=0;S<H;S++)f.bl_tree[S*2]=0;f.dyn_ltree[J*2]=1,f.opt_len=f.static_len=0,f.sym_next=f.matches=0},Pr=f=>{f.bi_valid>8?Ie(f,f.bi_buf):f.bi_valid>0&&(f.pending_buf[f.pending++]=f.bi_buf),f.bi_buf=0,f.bi_valid=0},Cr=(f,S,W,Bt)=>{let Nt=S*2,nt=W*2;return f[Nt]<f[nt]||f[Nt]===f[nt]&&Bt[S]<=Bt[W]},et=(f,S,W)=>{let Bt=f.heap[W],Nt=W<<1;for(;Nt<=f.heap_len&&(Nt<f.heap_len&&Cr(S,f.heap[Nt+1],f.heap[Nt],f.depth)&&Nt++,!Cr(S,Bt,f.heap[Nt],f.depth));)f.heap[W]=f.heap[Nt],W=Nt,Nt<<=1;f.heap[W]=Bt},k=(f,S,W)=>{let Bt,Nt,nt=0,zt,Lt;if(f.sym_next!==0)do Bt=f.pending_buf[f.sym_buf+nt++]&255,Bt+=(f.pending_buf[f.sym_buf+nt++]&255)<<8,Nt=f.pending_buf[f.sym_buf+nt++],Bt===0?We(f,Nt,S):(zt=vt[Nt],We(f,zt+m+1,S),Lt=q[zt],Lt!==0&&(Nt-=Yt[zt],Ve(f,Nt,Lt)),Bt--,zt=Ce(Bt),We(f,zt,W),Lt=U[zt],Lt!==0&&(Bt-=Xt[zt],Ve(f,Bt,Lt)));while(nt<f.sym_next);We(f,J,S)},Z=(f,S)=>{let W=S.dyn_tree,Bt=S.stat_desc.static_tree,Nt=S.stat_desc.has_stree,nt=S.stat_desc.elems,zt,Lt,Be=-1,_t;for(f.heap_len=0,f.heap_max=X,zt=0;zt<nt;zt++)W[zt*2]!==0?(f.heap[++f.heap_len]=Be=zt,f.depth[zt]=0):W[zt*2+1]=0;for(;f.heap_len<2;)_t=f.heap[++f.heap_len]=Be<2?++Be:0,W[_t*2]=1,f.depth[_t]=0,f.opt_len--,Nt&&(f.static_len-=Bt[_t*2+1]);for(S.max_code=Be,zt=f.heap_len>>1;zt>=1;zt--)et(f,W,zt);_t=nt;do zt=f.heap[1],f.heap[1]=f.heap[f.heap_len--],et(f,W,1),Lt=f.heap[1],f.heap[--f.heap_max]=zt,f.heap[--f.heap_max]=Lt,W[_t*2]=W[zt*2]+W[Lt*2],f.depth[_t]=(f.depth[zt]>=f.depth[Lt]?f.depth[zt]:f.depth[Lt])+1,W[zt*2+1]=W[Lt*2+1]=_t,f.heap[1]=_t++,et(f,W,1);while(f.heap_len>=2);f.heap[--f.heap_max]=f.heap[1],Qe(f,S),Ke(W,Be,f.bl_count)},se=(f,S,W)=>{let Bt,Nt=-1,nt,zt=S[1],Lt=0,Be=7,_t=4;for(zt===0&&(Be=138,_t=3),S[(W+1)*2+1]=65535,Bt=0;Bt<=W;Bt++)nt=zt,zt=S[(Bt+1)*2+1],!(++Lt<Be&&nt===zt)&&(Lt<_t?f.bl_tree[nt*2]+=Lt:nt!==0?(nt!==Nt&&f.bl_tree[nt*2]++,f.bl_tree[N*2]++):Lt<=10?f.bl_tree[Q*2]++:f.bl_tree[at*2]++,Lt=0,Nt=nt,zt===0?(Be=138,_t=3):nt===zt?(Be=6,_t=3):(Be=7,_t=4))},Ee=(f,S,W)=>{let Bt,Nt=-1,nt,zt=S[1],Lt=0,Be=7,_t=4;for(zt===0&&(Be=138,_t=3),Bt=0;Bt<=W;Bt++)if(nt=zt,zt=S[(Bt+1)*2+1],!(++Lt<Be&&nt===zt)){if(Lt<_t)do We(f,nt,f.bl_tree);while(--Lt!==0);else nt!==0?(nt!==Nt&&(We(f,nt,f.bl_tree),Lt--),We(f,N,f.bl_tree),Ve(f,Lt-3,2)):Lt<=10?(We(f,Q,f.bl_tree),Ve(f,Lt-3,3)):(We(f,at,f.bl_tree),Ve(f,Lt-11,7));Lt=0,Nt=nt,zt===0?(Be=138,_t=3):nt===zt?(Be=6,_t=3):(Be=7,_t=4)}},rr=f=>{let S;for(se(f,f.dyn_ltree,f.l_desc.max_code),se(f,f.dyn_dtree,f.d_desc.max_code),Z(f,f.bl_desc),S=H-1;S>=3&&f.bl_tree[lt[S]*2+1]===0;S--);return f.opt_len+=3*(S+1)+5+5+4,S},fr=(f,S,W,Bt)=>{let Nt;for(Ve(f,S-257,5),Ve(f,W-1,5),Ve(f,Bt-4,4),Nt=0;Nt<Bt;Nt++)Ve(f,f.bl_tree[lt[Nt]*2+1],3);Ee(f,f.dyn_ltree,S-1),Ee(f,f.dyn_dtree,W-1)},yr=f=>{let S=4093624447,W;for(W=0;W<=31;W++,S>>>=1)if(S&1&&f.dyn_ltree[W*2]!==0)return 0;if(f.dyn_ltree[18]!==0||f.dyn_ltree[20]!==0||f.dyn_ltree[26]!==0)return 1;for(W=32;W<m;W++)if(f.dyn_ltree[W*2]!==0)return 1;return 0},ur=!1,er=f=>{ur||(Ze(),ur=!0),f.l_desc=new pe(f.dyn_ltree,ae),f.d_desc=new pe(f.dyn_dtree,He),f.bl_desc=new pe(f.bl_tree,de),f.bi_buf=0,f.bi_valid=0,vr(f)},Wr=(f,S,W,Bt)=>{Ve(f,(u<<1)+(Bt?1:0),3),Pr(f),Ie(f,W),Ie(f,~W),W&&f.pending_buf.set(f.window.subarray(S,S+W),f.pending),f.pending+=W},Lr=f=>{Ve(f,s<<1,3),We(f,J,Ot),Se(f)},Sr=(f,S,W,Bt)=>{let Nt,nt,zt=0;f.level>0?(f.strm.data_type===2&&(f.strm.data_type=yr(f)),Z(f,f.l_desc),Z(f,f.d_desc),zt=rr(f),Nt=f.opt_len+3+7>>>3,nt=f.static_len+3+7>>>3,nt<=Nt&&(Nt=nt)):Nt=nt=W+5,W+4<=Nt&&S!==-1?Wr(f,S,W,Bt):f.strategy===4||nt===Nt?(Ve(f,(s<<1)+(Bt?1:0),3),k(f,Ot,yt)):(Ve(f,(p<<1)+(Bt?1:0),3),fr(f,f.l_desc.max_code+1,f.d_desc.max_code+1,zt+1),k(f,f.dyn_ltree,f.dyn_dtree)),vr(f),Bt&&Pr(f)},L=(f,S,W)=>(f.pending_buf[f.sym_buf+f.sym_next++]=S,f.pending_buf[f.sym_buf+f.sym_next++]=S>>8,f.pending_buf[f.sym_buf+f.sym_next++]=W,S===0?f.dyn_ltree[W*2]++:(f.matches++,S--,f.dyn_ltree[(vt[W]+m+1)*2]++,f.dyn_dtree[Ce(S)*2]++),f.sym_next===f.sym_end);e.exports._tr_init=er,e.exports._tr_stored_block=Wr,e.exports._tr_flush_block=Sr,e.exports._tr_tally=L,e.exports._tr_align=Lr}),Sv=ce((t,e)=>{"use strict";var n=(u,s,p,g)=>{let y=u&65535|0,E=u>>>16&65535|0,m=0;for(;p!==0;){m=p>2e3?2e3:p,p-=m;do y=y+s[g++]|0,E=E+y|0;while(--m);y%=65521,E%=65521}return y|E<<16|0};e.exports=n}),Fv=ce((t,e)=>{"use strict";var n=()=>{let p,g=[];for(var y=0;y<256;y++){p=y;for(var E=0;E<8;E++)p=p&1?3988292384^p>>>1:p>>>1;g[y]=p}return g},u=new Uint32Array(n()),s=(p,g,y,E)=>{let m=u,C=E+y;p^=-1;for(let a=E;a<C;a++)p=p>>>8^m[(p^g[a])&255];return p^-1};e.exports=s}),n0=ce((t,e)=>{"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}}),io=ce((t,e)=>{"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}}),qD=ce((t,e)=>{"use strict";var{_tr_init:n,_tr_stored_block:u,_tr_flush_block:s,_tr_tally:p,_tr_align:g}=BD(),y=Sv(),E=Fv(),m=n0(),{Z_NO_FLUSH:C,Z_PARTIAL_FLUSH:a,Z_FULL_FLUSH:H,Z_FINISH:X,Z_BLOCK:w,Z_OK:j,Z_STREAM_END:tt,Z_STREAM_ERROR:J,Z_DATA_ERROR:N,Z_BUF_ERROR:Q,Z_DEFAULT_COMPRESSION:at,Z_FILTERED:q,Z_HUFFMAN_ONLY:U,Z_RLE:V,Z_FIXED:lt,Z_DEFAULT_STRATEGY:It,Z_UNKNOWN:Ot,Z_DEFLATED:yt}=io(),Et=9,vt=15,Yt=8,Xt=29,re=256,ae=re+1+Xt,He=30,de=19,pe=2*ae+1,Ce=15,Ie=3,Ve=258,We=Ve+Ie+1,we=32,Se=42,Qe=57,Ke=69,Ze=73,vr=91,Pr=103,Cr=113,et=666,k=1,Z=2,se=3,Ee=4,rr=3,fr=(O,le)=>(O.msg=m[le],le),yr=O=>O*2-(O>4?9:0),ur=O=>{let le=O.length;for(;--le>=0;)O[le]=0},er=O=>{let le,Kt,he,kt=O.w_size;le=O.hash_size,he=le;do Kt=O.head[--he],O.head[he]=Kt>=kt?Kt-kt:0;while(--le);le=kt,he=le;do Kt=O.prev[--he],O.prev[he]=Kt>=kt?Kt-kt:0;while(--le)},Wr=(O,le,Kt)=>(le<<O.hash_shift^Kt)&O.hash_mask,Lr=Wr,Sr=O=>{let le=O.state,Kt=le.pending;Kt>O.avail_out&&(Kt=O.avail_out),Kt!==0&&(O.output.set(le.pending_buf.subarray(le.pending_out,le.pending_out+Kt),O.next_out),O.next_out+=Kt,le.pending_out+=Kt,O.total_out+=Kt,O.avail_out-=Kt,le.pending-=Kt,le.pending===0&&(le.pending_out=0))},L=(O,le)=>{s(O,O.block_start>=0?O.block_start:-1,O.strstart-O.block_start,le),O.block_start=O.strstart,Sr(O.strm)},f=(O,le)=>{O.pending_buf[O.pending++]=le},S=(O,le)=>{O.pending_buf[O.pending++]=le>>>8&255,O.pending_buf[O.pending++]=le&255},W=(O,le,Kt,he)=>{let kt=O.avail_in;return kt>he&&(kt=he),kt===0?0:(O.avail_in-=kt,le.set(O.input.subarray(O.next_in,O.next_in+kt),Kt),O.state.wrap===1?O.adler=y(O.adler,le,kt,Kt):O.state.wrap===2&&(O.adler=E(O.adler,le,kt,Kt)),O.next_in+=kt,O.total_in+=kt,kt)},Bt=(O,le)=>{let Kt=O.max_chain_length,he=O.strstart,kt,ne,Oe=O.prev_length,_e=O.nice_match,Te=O.strstart>O.w_size-We?O.strstart-(O.w_size-We):0,Ue=O.window,tr=O.w_mask,lr=O.prev,ar=O.strstart+Ve,Ar=Ue[he+Oe-1],jr=Ue[he+Oe];O.prev_length>=O.good_match&&(Kt>>=2),_e>O.lookahead&&(_e=O.lookahead);do if(kt=le,!(Ue[kt+Oe]!==jr||Ue[kt+Oe-1]!==Ar||Ue[kt]!==Ue[he]||Ue[++kt]!==Ue[he+1])){he+=2,kt++;do;while(Ue[++he]===Ue[++kt]&&Ue[++he]===Ue[++kt]&&Ue[++he]===Ue[++kt]&&Ue[++he]===Ue[++kt]&&Ue[++he]===Ue[++kt]&&Ue[++he]===Ue[++kt]&&Ue[++he]===Ue[++kt]&&Ue[++he]===Ue[++kt]&&he<ar);if(ne=Ve-(ar-he),he=ar-Ve,ne>Oe){if(O.match_start=le,Oe=ne,ne>=_e)break;Ar=Ue[he+Oe-1],jr=Ue[he+Oe]}}while((le=lr[le&tr])>Te&&--Kt!==0);return Oe<=O.lookahead?Oe:O.lookahead},Nt=O=>{let le=O.w_size,Kt,he,kt;do{if(he=O.window_size-O.lookahead-O.strstart,O.strstart>=le+(le-We)&&(O.window.set(O.window.subarray(le,le+le-he),0),O.match_start-=le,O.strstart-=le,O.block_start-=le,O.insert>O.strstart&&(O.insert=O.strstart),er(O),he+=le),O.strm.avail_in===0)break;if(Kt=W(O.strm,O.window,O.strstart+O.lookahead,he),O.lookahead+=Kt,O.lookahead+O.insert>=Ie)for(kt=O.strstart-O.insert,O.ins_h=O.window[kt],O.ins_h=Lr(O,O.ins_h,O.window[kt+1]);O.insert&&(O.ins_h=Lr(O,O.ins_h,O.window[kt+Ie-1]),O.prev[kt&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=kt,kt++,O.insert--,!(O.lookahead+O.insert<Ie)););}while(O.lookahead<We&&O.strm.avail_in!==0)},nt=(O,le)=>{let Kt=O.pending_buf_size-5>O.w_size?O.w_size:O.pending_buf_size-5,he,kt,ne,Oe=0,_e=O.strm.avail_in;do{if(he=65535,ne=O.bi_valid+42>>3,O.strm.avail_out<ne||(ne=O.strm.avail_out-ne,kt=O.strstart-O.block_start,he>kt+O.strm.avail_in&&(he=kt+O.strm.avail_in),he>ne&&(he=ne),he<Kt&&(he===0&&le!==X||le===C||he!==kt+O.strm.avail_in)))break;Oe=le===X&&he===kt+O.strm.avail_in?1:0,u(O,0,0,Oe),O.pending_buf[O.pending-4]=he,O.pending_buf[O.pending-3]=he>>8,O.pending_buf[O.pending-2]=~he,O.pending_buf[O.pending-1]=~he>>8,Sr(O.strm),kt&&(kt>he&&(kt=he),O.strm.output.set(O.window.subarray(O.block_start,O.block_start+kt),O.strm.next_out),O.strm.next_out+=kt,O.strm.avail_out-=kt,O.strm.total_out+=kt,O.block_start+=kt,he-=kt),he&&(W(O.strm,O.strm.output,O.strm.next_out,he),O.strm.next_out+=he,O.strm.avail_out-=he,O.strm.total_out+=he)}while(Oe===0);return _e-=O.strm.avail_in,_e&&(_e>=O.w_size?(O.matches=2,O.window.set(O.strm.input.subarray(O.strm.next_in-O.w_size,O.strm.next_in),0),O.strstart=O.w_size,O.insert=O.strstart):(O.window_size-O.strstart<=_e&&(O.strstart-=O.w_size,O.window.set(O.window.subarray(O.w_size,O.w_size+O.strstart),0),O.matches<2&&O.matches++,O.insert>O.strstart&&(O.insert=O.strstart)),O.window.set(O.strm.input.subarray(O.strm.next_in-_e,O.strm.next_in),O.strstart),O.strstart+=_e,O.insert+=_e>O.w_size-O.insert?O.w_size-O.insert:_e),O.block_start=O.strstart),O.high_water<O.strstart&&(O.high_water=O.strstart),Oe?Ee:le!==C&&le!==X&&O.strm.avail_in===0&&O.strstart===O.block_start?Z:(ne=O.window_size-O.strstart,O.strm.avail_in>ne&&O.block_start>=O.w_size&&(O.block_start-=O.w_size,O.strstart-=O.w_size,O.window.set(O.window.subarray(O.w_size,O.w_size+O.strstart),0),O.matches<2&&O.matches++,ne+=O.w_size,O.insert>O.strstart&&(O.insert=O.strstart)),ne>O.strm.avail_in&&(ne=O.strm.avail_in),ne&&(W(O.strm,O.window,O.strstart,ne),O.strstart+=ne,O.insert+=ne>O.w_size-O.insert?O.w_size-O.insert:ne),O.high_water<O.strstart&&(O.high_water=O.strstart),ne=O.bi_valid+42>>3,ne=O.pending_buf_size-ne>65535?65535:O.pending_buf_size-ne,Kt=ne>O.w_size?O.w_size:ne,kt=O.strstart-O.block_start,(kt>=Kt||(kt||le===X)&&le!==C&&O.strm.avail_in===0&&kt<=ne)&&(he=kt>ne?ne:kt,Oe=le===X&&O.strm.avail_in===0&&he===kt?1:0,u(O,O.block_start,he,Oe),O.block_start+=he,Sr(O.strm)),Oe?se:k)},zt=(O,le)=>{let Kt,he;for(;;){if(O.lookahead<We){if(Nt(O),O.lookahead<We&&le===C)return k;if(O.lookahead===0)break}if(Kt=0,O.lookahead>=Ie&&(O.ins_h=Lr(O,O.ins_h,O.window[O.strstart+Ie-1]),Kt=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),Kt!==0&&O.strstart-Kt<=O.w_size-We&&(O.match_length=Bt(O,Kt)),O.match_length>=Ie)if(he=p(O,O.strstart-O.match_start,O.match_length-Ie),O.lookahead-=O.match_length,O.match_length<=O.max_lazy_match&&O.lookahead>=Ie){O.match_length--;do O.strstart++,O.ins_h=Lr(O,O.ins_h,O.window[O.strstart+Ie-1]),Kt=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart;while(--O.match_length!==0);O.strstart++}else O.strstart+=O.match_length,O.match_length=0,O.ins_h=O.window[O.strstart],O.ins_h=Lr(O,O.ins_h,O.window[O.strstart+1]);else he=p(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++;if(he&&(L(O,!1),O.strm.avail_out===0))return k}return O.insert=O.strstart<Ie-1?O.strstart:Ie-1,le===X?(L(O,!0),O.strm.avail_out===0?se:Ee):O.sym_next&&(L(O,!1),O.strm.avail_out===0)?k:Z},Lt=(O,le)=>{let Kt,he,kt;for(;;){if(O.lookahead<We){if(Nt(O),O.lookahead<We&&le===C)return k;if(O.lookahead===0)break}if(Kt=0,O.lookahead>=Ie&&(O.ins_h=Lr(O,O.ins_h,O.window[O.strstart+Ie-1]),Kt=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),O.prev_length=O.match_length,O.prev_match=O.match_start,O.match_length=Ie-1,Kt!==0&&O.prev_length<O.max_lazy_match&&O.strstart-Kt<=O.w_size-We&&(O.match_length=Bt(O,Kt),O.match_length<=5&&(O.strategy===q||O.match_length===Ie&&O.strstart-O.match_start>4096)&&(O.match_length=Ie-1)),O.prev_length>=Ie&&O.match_length<=O.prev_length){kt=O.strstart+O.lookahead-Ie,he=p(O,O.strstart-1-O.prev_match,O.prev_length-Ie),O.lookahead-=O.prev_length-1,O.prev_length-=2;do++O.strstart<=kt&&(O.ins_h=Lr(O,O.ins_h,O.window[O.strstart+Ie-1]),Kt=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart);while(--O.prev_length!==0);if(O.match_available=0,O.match_length=Ie-1,O.strstart++,he&&(L(O,!1),O.strm.avail_out===0))return k}else if(O.match_available){if(he=p(O,0,O.window[O.strstart-1]),he&&L(O,!1),O.strstart++,O.lookahead--,O.strm.avail_out===0)return k}else O.match_available=1,O.strstart++,O.lookahead--}return O.match_available&&(he=p(O,0,O.window[O.strstart-1]),O.match_available=0),O.insert=O.strstart<Ie-1?O.strstart:Ie-1,le===X?(L(O,!0),O.strm.avail_out===0?se:Ee):O.sym_next&&(L(O,!1),O.strm.avail_out===0)?k:Z},Be=(O,le)=>{let Kt,he,kt,ne,Oe=O.window;for(;;){if(O.lookahead<=Ve){if(Nt(O),O.lookahead<=Ve&&le===C)return k;if(O.lookahead===0)break}if(O.match_length=0,O.lookahead>=Ie&&O.strstart>0&&(kt=O.strstart-1,he=Oe[kt],he===Oe[++kt]&&he===Oe[++kt]&&he===Oe[++kt])){ne=O.strstart+Ve;do;while(he===Oe[++kt]&&he===Oe[++kt]&&he===Oe[++kt]&&he===Oe[++kt]&&he===Oe[++kt]&&he===Oe[++kt]&&he===Oe[++kt]&&he===Oe[++kt]&&kt<ne);O.match_length=Ve-(ne-kt),O.match_length>O.lookahead&&(O.match_length=O.lookahead)}if(O.match_length>=Ie?(Kt=p(O,1,O.match_length-Ie),O.lookahead-=O.match_length,O.strstart+=O.match_length,O.match_length=0):(Kt=p(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++),Kt&&(L(O,!1),O.strm.avail_out===0))return k}return O.insert=0,le===X?(L(O,!0),O.strm.avail_out===0?se:Ee):O.sym_next&&(L(O,!1),O.strm.avail_out===0)?k:Z},_t=(O,le)=>{let Kt;for(;;){if(O.lookahead===0&&(Nt(O),O.lookahead===0)){if(le===C)return k;break}if(O.match_length=0,Kt=p(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++,Kt&&(L(O,!1),O.strm.avail_out===0))return k}return O.insert=0,le===X?(L(O,!0),O.strm.avail_out===0?se:Ee):O.sym_next&&(L(O,!1),O.strm.avail_out===0)?k:Z};function gt(O,le,Kt,he,kt){this.good_length=O,this.max_lazy=le,this.nice_length=Kt,this.max_chain=he,this.func=kt}var rt=[new gt(0,0,0,0,nt),new gt(4,4,8,4,zt),new gt(4,5,16,8,zt),new gt(4,6,32,32,zt),new gt(4,4,16,16,Lt),new gt(8,16,32,32,Lt),new gt(8,16,128,128,Lt),new gt(8,32,128,256,Lt),new gt(32,128,258,1024,Lt),new gt(32,258,258,4096,Lt)],F=O=>{O.window_size=2*O.w_size,ur(O.head),O.max_lazy_match=rt[O.level].max_lazy,O.good_match=rt[O.level].good_length,O.nice_match=rt[O.level].nice_length,O.max_chain_length=rt[O.level].max_chain,O.strstart=0,O.block_start=0,O.lookahead=0,O.insert=0,O.match_length=O.prev_length=Ie-1,O.match_available=0,O.ins_h=0};function st(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=yt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(pe*2),this.dyn_dtree=new Uint16Array((2*He+1)*2),this.bl_tree=new Uint16Array((2*de+1)*2),ur(this.dyn_ltree),ur(this.dyn_dtree),ur(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Ce+1),this.heap=new Uint16Array(2*ae+1),ur(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*ae+1),ur(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var wt=O=>{if(!O)return 1;let le=O.state;return!le||le.strm!==O||le.status!==Se&&le.status!==Qe&&le.status!==Ke&&le.status!==Ze&&le.status!==vr&&le.status!==Pr&&le.status!==Cr&&le.status!==et?1:0},Ct=O=>{if(wt(O))return fr(O,J);O.total_in=O.total_out=0,O.data_type=Ot;let le=O.state;return le.pending=0,le.pending_out=0,le.wrap<0&&(le.wrap=-le.wrap),le.status=le.wrap===2?Qe:le.wrap?Se:Cr,O.adler=le.wrap===2?0:1,le.last_flush=-2,n(le),j},Ut=O=>{let le=Ct(O);return le===j&&F(O.state),le},Wt=(O,le)=>wt(O)||O.state.wrap!==2?J:(O.state.gzhead=le,j),xe=(O,le,Kt,he,kt,ne)=>{if(!O)return J;let Oe=1;if(le===at&&(le=6),he<0?(Oe=0,he=-he):he>15&&(Oe=2,he-=16),kt<1||kt>Et||Kt!==yt||he<8||he>15||le<0||le>9||ne<0||ne>lt||he===8&&Oe!==1)return fr(O,J);he===8&&(he=9);let _e=new st;return O.state=_e,_e.strm=O,_e.status=Se,_e.wrap=Oe,_e.gzhead=null,_e.w_bits=he,_e.w_size=1<<_e.w_bits,_e.w_mask=_e.w_size-1,_e.hash_bits=kt+7,_e.hash_size=1<<_e.hash_bits,_e.hash_mask=_e.hash_size-1,_e.hash_shift=~~((_e.hash_bits+Ie-1)/Ie),_e.window=new Uint8Array(_e.w_size*2),_e.head=new Uint16Array(_e.hash_size),_e.prev=new Uint16Array(_e.w_size),_e.lit_bufsize=1<<kt+6,_e.pending_buf_size=_e.lit_bufsize*4,_e.pending_buf=new Uint8Array(_e.pending_buf_size),_e.sym_buf=_e.lit_bufsize,_e.sym_end=(_e.lit_bufsize-1)*3,_e.level=le,_e.strategy=ne,_e.method=Kt,Ut(O)},te=(O,le)=>xe(O,le,yt,vt,Yt,It),ve=(O,le)=>{if(wt(O)||le>w||le<0)return O?fr(O,J):J;let Kt=O.state;if(!O.output||O.avail_in!==0&&!O.input||Kt.status===et&&le!==X)return fr(O,O.avail_out===0?Q:J);let he=Kt.last_flush;if(Kt.last_flush=le,Kt.pending!==0){if(Sr(O),O.avail_out===0)return Kt.last_flush=-1,j}else if(O.avail_in===0&&yr(le)<=yr(he)&&le!==X)return fr(O,Q);if(Kt.status===et&&O.avail_in!==0)return fr(O,Q);if(Kt.status===Se&&Kt.wrap===0&&(Kt.status=Cr),Kt.status===Se){let kt=yt+(Kt.w_bits-8<<4)<<8,ne=-1;if(Kt.strategy>=U||Kt.level<2?ne=0:Kt.level<6?ne=1:Kt.level===6?ne=2:ne=3,kt|=ne<<6,Kt.strstart!==0&&(kt|=we),kt+=31-kt%31,S(Kt,kt),Kt.strstart!==0&&(S(Kt,O.adler>>>16),S(Kt,O.adler&65535)),O.adler=1,Kt.status=Cr,Sr(O),Kt.pending!==0)return Kt.last_flush=-1,j}if(Kt.status===Qe){if(O.adler=0,f(Kt,31),f(Kt,139),f(Kt,8),Kt.gzhead)f(Kt,(Kt.gzhead.text?1:0)+(Kt.gzhead.hcrc?2:0)+(Kt.gzhead.extra?4:0)+(Kt.gzhead.name?8:0)+(Kt.gzhead.comment?16:0)),f(Kt,Kt.gzhead.time&255),f(Kt,Kt.gzhead.time>>8&255),f(Kt,Kt.gzhead.time>>16&255),f(Kt,Kt.gzhead.time>>24&255),f(Kt,Kt.level===9?2:Kt.strategy>=U||Kt.level<2?4:0),f(Kt,Kt.gzhead.os&255),Kt.gzhead.extra&&Kt.gzhead.extra.length&&(f(Kt,Kt.gzhead.extra.length&255),f(Kt,Kt.gzhead.extra.length>>8&255)),Kt.gzhead.hcrc&&(O.adler=E(O.adler,Kt.pending_buf,Kt.pending,0)),Kt.gzindex=0,Kt.status=Ke;else if(f(Kt,0),f(Kt,0),f(Kt,0),f(Kt,0),f(Kt,0),f(Kt,Kt.level===9?2:Kt.strategy>=U||Kt.level<2?4:0),f(Kt,rr),Kt.status=Cr,Sr(O),Kt.pending!==0)return Kt.last_flush=-1,j}if(Kt.status===Ke){if(Kt.gzhead.extra){let kt=Kt.pending,ne=(Kt.gzhead.extra.length&65535)-Kt.gzindex;for(;Kt.pending+ne>Kt.pending_buf_size;){let _e=Kt.pending_buf_size-Kt.pending;if(Kt.pending_buf.set(Kt.gzhead.extra.subarray(Kt.gzindex,Kt.gzindex+_e),Kt.pending),Kt.pending=Kt.pending_buf_size,Kt.gzhead.hcrc&&Kt.pending>kt&&(O.adler=E(O.adler,Kt.pending_buf,Kt.pending-kt,kt)),Kt.gzindex+=_e,Sr(O),Kt.pending!==0)return Kt.last_flush=-1,j;kt=0,ne-=_e}let Oe=new Uint8Array(Kt.gzhead.extra);Kt.pending_buf.set(Oe.subarray(Kt.gzindex,Kt.gzindex+ne),Kt.pending),Kt.pending+=ne,Kt.gzhead.hcrc&&Kt.pending>kt&&(O.adler=E(O.adler,Kt.pending_buf,Kt.pending-kt,kt)),Kt.gzindex=0}Kt.status=Ze}if(Kt.status===Ze){if(Kt.gzhead.name){let kt=Kt.pending,ne;do{if(Kt.pending===Kt.pending_buf_size){if(Kt.gzhead.hcrc&&Kt.pending>kt&&(O.adler=E(O.adler,Kt.pending_buf,Kt.pending-kt,kt)),Sr(O),Kt.pending!==0)return Kt.last_flush=-1,j;kt=0}Kt.gzindex<Kt.gzhead.name.length?ne=Kt.gzhead.name.charCodeAt(Kt.gzindex++)&255:ne=0,f(Kt,ne)}while(ne!==0);Kt.gzhead.hcrc&&Kt.pending>kt&&(O.adler=E(O.adler,Kt.pending_buf,Kt.pending-kt,kt)),Kt.gzindex=0}Kt.status=vr}if(Kt.status===vr){if(Kt.gzhead.comment){let kt=Kt.pending,ne;do{if(Kt.pending===Kt.pending_buf_size){if(Kt.gzhead.hcrc&&Kt.pending>kt&&(O.adler=E(O.adler,Kt.pending_buf,Kt.pending-kt,kt)),Sr(O),Kt.pending!==0)return Kt.last_flush=-1,j;kt=0}Kt.gzindex<Kt.gzhead.comment.length?ne=Kt.gzhead.comment.charCodeAt(Kt.gzindex++)&255:ne=0,f(Kt,ne)}while(ne!==0);Kt.gzhead.hcrc&&Kt.pending>kt&&(O.adler=E(O.adler,Kt.pending_buf,Kt.pending-kt,kt))}Kt.status=Pr}if(Kt.status===Pr){if(Kt.gzhead.hcrc){if(Kt.pending+2>Kt.pending_buf_size&&(Sr(O),Kt.pending!==0))return Kt.last_flush=-1,j;f(Kt,O.adler&255),f(Kt,O.adler>>8&255),O.adler=0}if(Kt.status=Cr,Sr(O),Kt.pending!==0)return Kt.last_flush=-1,j}if(O.avail_in!==0||Kt.lookahead!==0||le!==C&&Kt.status!==et){let kt=Kt.level===0?nt(Kt,le):Kt.strategy===U?_t(Kt,le):Kt.strategy===V?Be(Kt,le):rt[Kt.level].func(Kt,le);if((kt===se||kt===Ee)&&(Kt.status=et),kt===k||kt===se)return O.avail_out===0&&(Kt.last_flush=-1),j;if(kt===Z&&(le===a?g(Kt):le!==w&&(u(Kt,0,0,!1),le===H&&(ur(Kt.head),Kt.lookahead===0&&(Kt.strstart=0,Kt.block_start=0,Kt.insert=0))),Sr(O),O.avail_out===0))return Kt.last_flush=-1,j}return le!==X?j:Kt.wrap<=0?tt:(Kt.wrap===2?(f(Kt,O.adler&255),f(Kt,O.adler>>8&255),f(Kt,O.adler>>16&255),f(Kt,O.adler>>24&255),f(Kt,O.total_in&255),f(Kt,O.total_in>>8&255),f(Kt,O.total_in>>16&255),f(Kt,O.total_in>>24&255)):(S(Kt,O.adler>>>16),S(Kt,O.adler&65535)),Sr(O),Kt.wrap>0&&(Kt.wrap=-Kt.wrap),Kt.pending!==0?j:tt)},Re=O=>{if(wt(O))return J;let le=O.state.status;return O.state=null,le===Cr?fr(O,N):j},sr=(O,le)=>{let Kt=le.length;if(wt(O))return J;let he=O.state,kt=he.wrap;if(kt===2||kt===1&&he.status!==Se||he.lookahead)return J;if(kt===1&&(O.adler=y(O.adler,le,Kt,0)),he.wrap=0,Kt>=he.w_size){kt===0&&(ur(he.head),he.strstart=0,he.block_start=0,he.insert=0);let Te=new Uint8Array(he.w_size);Te.set(le.subarray(Kt-he.w_size,Kt),0),le=Te,Kt=he.w_size}let ne=O.avail_in,Oe=O.next_in,_e=O.input;for(O.avail_in=Kt,O.next_in=0,O.input=le,Nt(he);he.lookahead>=Ie;){let Te=he.strstart,Ue=he.lookahead-(Ie-1);do he.ins_h=Lr(he,he.ins_h,he.window[Te+Ie-1]),he.prev[Te&he.w_mask]=he.head[he.ins_h],he.head[he.ins_h]=Te,Te++;while(--Ue);he.strstart=Te,he.lookahead=Ie-1,Nt(he)}return he.strstart+=he.lookahead,he.block_start=he.strstart,he.insert=he.lookahead,he.lookahead=0,he.match_length=he.prev_length=Ie-1,he.match_available=0,O.next_in=Oe,O.input=_e,O.avail_in=ne,he.wrap=kt,j};e.exports.deflateInit=te,e.exports.deflateInit2=xe,e.exports.deflateReset=Ut,e.exports.deflateResetKeep=Ct,e.exports.deflateSetHeader=Wt,e.exports.deflate=ve,e.exports.deflateEnd=Re,e.exports.deflateSetDictionary=sr,e.exports.deflateInfo="pako deflate (from Nodeca project)"}),Uv=ce((t,e)=>{"use strict";var n=(u,s)=>Object.prototype.hasOwnProperty.call(u,s);e.exports.assign=function(u){let s=Array.prototype.slice.call(arguments,1);for(;s.length;){let p=s.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(let g in p)n(p,g)&&(u[g]=p[g])}}return u},e.exports.flattenChunks=u=>{let s=0;for(let g=0,y=u.length;g<y;g++)s+=u[g].length;let p=new Uint8Array(s);for(let g=0,y=0,E=u.length;g<E;g++){let m=u[g];p.set(m,y),y+=m.length}return p}}),jv=ce((t,e)=>{"use strict";var n=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}var u=new Uint8Array(256);for(let p=0;p<256;p++)u[p]=p>=252?6:p>=248?5:p>=240?4:p>=224?3:p>=192?2:1;u[254]=u[254]=1,e.exports.string2buf=p=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(p);let g,y,E,m,C,a=p.length,H=0;for(m=0;m<a;m++)y=p.charCodeAt(m),(y&64512)===55296&&m+1<a&&(E=p.charCodeAt(m+1),(E&64512)===56320&&(y=65536+(y-55296<<10)+(E-56320),m++)),H+=y<128?1:y<2048?2:y<65536?3:4;for(g=new Uint8Array(H),C=0,m=0;C<H;m++)y=p.charCodeAt(m),(y&64512)===55296&&m+1<a&&(E=p.charCodeAt(m+1),(E&64512)===56320&&(y=65536+(y-55296<<10)+(E-56320),m++)),y<128?g[C++]=y:y<2048?(g[C++]=192|y>>>6,g[C++]=128|y&63):y<65536?(g[C++]=224|y>>>12,g[C++]=128|y>>>6&63,g[C++]=128|y&63):(g[C++]=240|y>>>18,g[C++]=128|y>>>12&63,g[C++]=128|y>>>6&63,g[C++]=128|y&63);return g};var s=(p,g)=>{if(g<65534&&p.subarray&&n)return String.fromCharCode.apply(null,p.length===g?p:p.subarray(0,g));let y="";for(let E=0;E<g;E++)y+=String.fromCharCode(p[E]);return y};e.exports.buf2string=(p,g)=>{let y=g||p.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(p.subarray(0,g));let E,m,C=new Array(y*2);for(m=0,E=0;E<y;){let a=p[E++];if(a<128){C[m++]=a;continue}let H=u[a];if(H>4){C[m++]=65533,E+=H-1;continue}for(a&=H===2?31:H===3?15:7;H>1&&E<y;)a=a<<6|p[E++]&63,H--;if(H>1){C[m++]=65533;continue}a<65536?C[m++]=a:(a-=65536,C[m++]=55296|a>>10&1023,C[m++]=56320|a&1023)}return s(C,m)},e.exports.utf8border=(p,g)=>{g=g||p.length,g>p.length&&(g=p.length);let y=g-1;for(;y>=0&&(p[y]&192)===128;)y--;return y<0||y===0?g:y+u[p[y]]>g?y:g}}),Hv=ce((t,e)=>{"use strict";function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=n}),WD=ce((t,e)=>{"use strict";var n=qD(),u=Uv(),s=jv(),p=n0(),g=Hv(),y=Object.prototype.toString,{Z_NO_FLUSH:E,Z_SYNC_FLUSH:m,Z_FULL_FLUSH:C,Z_FINISH:a,Z_OK:H,Z_STREAM_END:X,Z_DEFAULT_COMPRESSION:w,Z_DEFAULT_STRATEGY:j,Z_DEFLATED:tt}=io();function J(q){this.options=u.assign({level:w,method:tt,chunkSize:16384,windowBits:15,memLevel:8,strategy:j},q||{});let U=this.options;U.raw&&U.windowBits>0?U.windowBits=-U.windowBits:U.gzip&&U.windowBits>0&&U.windowBits<16&&(U.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new g,this.strm.avail_out=0;let V=n.deflateInit2(this.strm,U.level,U.method,U.windowBits,U.memLevel,U.strategy);if(V!==H)throw new Error(p[V]);if(U.header&&n.deflateSetHeader(this.strm,U.header),U.dictionary){let lt;if(typeof U.dictionary=="string"?lt=s.string2buf(U.dictionary):y.call(U.dictionary)==="[object ArrayBuffer]"?lt=new Uint8Array(U.dictionary):lt=U.dictionary,V=n.deflateSetDictionary(this.strm,lt),V!==H)throw new Error(p[V]);this._dict_set=!0}}J.prototype.push=function(q,U){let V=this.strm,lt=this.options.chunkSize,It,Ot;if(this.ended)return!1;for(U===~~U?Ot=U:Ot=U===!0?a:E,typeof q=="string"?V.input=s.string2buf(q):y.call(q)==="[object ArrayBuffer]"?V.input=new Uint8Array(q):V.input=q,V.next_in=0,V.avail_in=V.input.length;;){if(V.avail_out===0&&(V.output=new Uint8Array(lt),V.next_out=0,V.avail_out=lt),(Ot===m||Ot===C)&&V.avail_out<=6){this.onData(V.output.subarray(0,V.next_out)),V.avail_out=0;continue}if(It=n.deflate(V,Ot),It===X)return V.next_out>0&&this.onData(V.output.subarray(0,V.next_out)),It=n.deflateEnd(this.strm),this.onEnd(It),this.ended=!0,It===H;if(V.avail_out===0){this.onData(V.output);continue}if(Ot>0&&V.next_out>0){this.onData(V.output.subarray(0,V.next_out)),V.avail_out=0;continue}if(V.avail_in===0)break}return!0},J.prototype.onData=function(q){this.chunks.push(q)},J.prototype.onEnd=function(q){q===H&&(this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=q,this.msg=this.strm.msg};function N(q,U){let V=new J(U);if(V.push(q,!0),V.err)throw V.msg||p[V.err];return V.result}function Q(q,U){return U=U||{},U.raw=!0,N(q,U)}function at(q,U){return U=U||{},U.gzip=!0,N(q,U)}e.exports.Deflate=J,e.exports.deflate=N,e.exports.deflateRaw=Q,e.exports.gzip=at,e.exports.constants=io()}),JD=ce((t,e)=>{"use strict";e.exports=function(n,u){let s,p,g,y,E,m,C,a,H,X,w,j,tt,J,N,Q,at,q,U,V,lt,It,Ot,yt,Et=n.state;s=n.next_in,Ot=n.input,p=s+(n.avail_in-5),g=n.next_out,yt=n.output,y=g-(u-n.avail_out),E=g+(n.avail_out-257),m=Et.dmax,C=Et.wsize,a=Et.whave,H=Et.wnext,X=Et.window,w=Et.hold,j=Et.bits,tt=Et.lencode,J=Et.distcode,N=(1<<Et.lenbits)-1,Q=(1<<Et.distbits)-1;t:do{j<15&&(w+=Ot[s++]<<j,j+=8,w+=Ot[s++]<<j,j+=8),at=tt[w&N];e:for(;;){if(q=at>>>24,w>>>=q,j-=q,q=at>>>16&255,q===0)yt[g++]=at&65535;else if(q&16){U=at&65535,q&=15,q&&(j<q&&(w+=Ot[s++]<<j,j+=8),U+=w&(1<<q)-1,w>>>=q,j-=q),j<15&&(w+=Ot[s++]<<j,j+=8,w+=Ot[s++]<<j,j+=8),at=J[w&Q];r:for(;;){if(q=at>>>24,w>>>=q,j-=q,q=at>>>16&255,q&16){if(V=at&65535,q&=15,j<q&&(w+=Ot[s++]<<j,j+=8,j<q&&(w+=Ot[s++]<<j,j+=8)),V+=w&(1<<q)-1,V>m){n.msg="invalid distance too far back",Et.mode=16209;break t}if(w>>>=q,j-=q,q=g-y,V>q){if(q=V-q,q>a&&Et.sane){n.msg="invalid distance too far back",Et.mode=16209;break t}if(lt=0,It=X,H===0){if(lt+=C-q,q<U){U-=q;do yt[g++]=X[lt++];while(--q);lt=g-V,It=yt}}else if(H<q){if(lt+=C+H-q,q-=H,q<U){U-=q;do yt[g++]=X[lt++];while(--q);if(lt=0,H<U){q=H,U-=q;do yt[g++]=X[lt++];while(--q);lt=g-V,It=yt}}}else if(lt+=H-q,q<U){U-=q;do yt[g++]=X[lt++];while(--q);lt=g-V,It=yt}for(;U>2;)yt[g++]=It[lt++],yt[g++]=It[lt++],yt[g++]=It[lt++],U-=3;U&&(yt[g++]=It[lt++],U>1&&(yt[g++]=It[lt++]))}else{lt=g-V;do yt[g++]=yt[lt++],yt[g++]=yt[lt++],yt[g++]=yt[lt++],U-=3;while(U>2);U&&(yt[g++]=yt[lt++],U>1&&(yt[g++]=yt[lt++]))}}else if(q&64){n.msg="invalid distance code",Et.mode=16209;break t}else{at=J[(at&65535)+(w&(1<<q)-1)];continue r}break}}else if(q&64)if(q&32){Et.mode=16191;break t}else{n.msg="invalid literal/length code",Et.mode=16209;break t}else{at=tt[(at&65535)+(w&(1<<q)-1)];continue e}break}}while(s<p&&g<E);U=j>>3,s-=U,j-=U<<3,w&=(1<<j)-1,n.next_in=s,n.next_out=g,n.avail_in=s<p?5+(p-s):5-(s-p),n.avail_out=g<E?257+(E-g):257-(g-E),Et.hold=w,Et.bits=j}}),QD=ce((t,e)=>{"use strict";var n=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),u=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),s=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),p=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),g=(y,E,m,C,a,H,X,w)=>{let j=w.bits,tt=0,J=0,N=0,Q=0,at=0,q=0,U=0,V=0,lt=0,It=0,Ot,yt,Et,vt,Yt,Xt=null,re,ae=new Uint16Array(16),He=new Uint16Array(16),de=null,pe,Ce,Ie;for(tt=0;tt<=15;tt++)ae[tt]=0;for(J=0;J<C;J++)ae[E[m+J]]++;for(at=j,Q=15;Q>=1&&ae[Q]===0;Q--);if(at>Q&&(at=Q),Q===0)return a[H++]=1<<24|64<<16|0,a[H++]=1<<24|64<<16|0,w.bits=1,0;for(N=1;N<Q&&ae[N]===0;N++);for(at<N&&(at=N),V=1,tt=1;tt<=15;tt++)if(V<<=1,V-=ae[tt],V<0)return-1;if(V>0&&(y===0||Q!==1))return-1;for(He[1]=0,tt=1;tt<15;tt++)He[tt+1]=He[tt]+ae[tt];for(J=0;J<C;J++)E[m+J]!==0&&(X[He[E[m+J]]++]=J);if(y===0?(Xt=de=X,re=20):y===1?(Xt=n,de=u,re=257):(Xt=s,de=p,re=0),It=0,J=0,tt=N,Yt=H,q=at,U=0,Et=-1,lt=1<<at,vt=lt-1,y===1&&lt>852||y===2&&lt>592)return 1;for(;;){pe=tt-U,X[J]+1<re?(Ce=0,Ie=X[J]):X[J]>=re?(Ce=de[X[J]-re],Ie=Xt[X[J]-re]):(Ce=96,Ie=0),Ot=1<<tt-U,yt=1<<q,N=yt;do yt-=Ot,a[Yt+(It>>U)+yt]=pe<<24|Ce<<16|Ie|0;while(yt!==0);for(Ot=1<<tt-1;It&Ot;)Ot>>=1;if(Ot!==0?(It&=Ot-1,It+=Ot):It=0,J++,--ae[tt]===0){if(tt===Q)break;tt=E[m+X[J]]}if(tt>at&&(It&vt)!==Et){for(U===0&&(U=at),Yt+=N,q=tt-U,V=1<<q;q+U<Q&&(V-=ae[q+U],!(V<=0));)q++,V<<=1;if(lt+=1<<q,y===1&&lt>852||y===2&&lt>592)return 1;Et=It&vt,a[Et]=at<<24|q<<16|Yt-H|0}}return It!==0&&(a[Yt+It]=tt-U<<24|64<<16|0),w.bits=at,0};e.exports=g}),T4=ce((t,e)=>{"use strict";var n=Sv(),u=Fv(),s=JD(),p=QD(),g=0,y=1,E=2,{Z_FINISH:m,Z_BLOCK:C,Z_TREES:a,Z_OK:H,Z_STREAM_END:X,Z_NEED_DICT:w,Z_STREAM_ERROR:j,Z_DATA_ERROR:tt,Z_MEM_ERROR:J,Z_BUF_ERROR:N,Z_DEFLATED:Q}=io(),at=16180,q=16181,U=16182,V=16183,lt=16184,It=16185,Ot=16186,yt=16187,Et=16188,vt=16189,Yt=16190,Xt=16191,re=16192,ae=16193,He=16194,de=16195,pe=16196,Ce=16197,Ie=16198,Ve=16199,We=16200,we=16201,Se=16202,Qe=16203,Ke=16204,Ze=16205,vr=16206,Pr=16207,Cr=16208,et=16209,k=16210,Z=16211,se=852,Ee=592,rr=15,fr=rr,yr=gt=>(gt>>>24&255)+(gt>>>8&65280)+((gt&65280)<<8)+((gt&255)<<24);function ur(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var er=gt=>{if(!gt)return 1;let rt=gt.state;return!rt||rt.strm!==gt||rt.mode<at||rt.mode>Z?1:0},Wr=gt=>{if(er(gt))return j;let rt=gt.state;return gt.total_in=gt.total_out=rt.total=0,gt.msg="",rt.wrap&&(gt.adler=rt.wrap&1),rt.mode=at,rt.last=0,rt.havedict=0,rt.flags=-1,rt.dmax=32768,rt.head=null,rt.hold=0,rt.bits=0,rt.lencode=rt.lendyn=new Int32Array(se),rt.distcode=rt.distdyn=new Int32Array(Ee),rt.sane=1,rt.back=-1,H},Lr=gt=>{if(er(gt))return j;let rt=gt.state;return rt.wsize=0,rt.whave=0,rt.wnext=0,Wr(gt)},Sr=(gt,rt)=>{let F;if(er(gt))return j;let st=gt.state;return rt<0?(F=0,rt=-rt):(F=(rt>>4)+5,rt<48&&(rt&=15)),rt&&(rt<8||rt>15)?j:(st.window!==null&&st.wbits!==rt&&(st.window=null),st.wrap=F,st.wbits=rt,Lr(gt))},L=(gt,rt)=>{if(!gt)return j;let F=new ur;gt.state=F,F.strm=gt,F.window=null,F.mode=at;let st=Sr(gt,rt);return st!==H&&(gt.state=null),st},f=gt=>L(gt,fr),S=!0,W,Bt,Nt=gt=>{if(S){W=new Int32Array(512),Bt=new Int32Array(32);let rt=0;for(;rt<144;)gt.lens[rt++]=8;for(;rt<256;)gt.lens[rt++]=9;for(;rt<280;)gt.lens[rt++]=7;for(;rt<288;)gt.lens[rt++]=8;for(p(y,gt.lens,0,288,W,0,gt.work,{bits:9}),rt=0;rt<32;)gt.lens[rt++]=5;p(E,gt.lens,0,32,Bt,0,gt.work,{bits:5}),S=!1}gt.lencode=W,gt.lenbits=9,gt.distcode=Bt,gt.distbits=5},nt=(gt,rt,F,st)=>{let wt,Ct=gt.state;return Ct.window===null&&(Ct.wsize=1<<Ct.wbits,Ct.wnext=0,Ct.whave=0,Ct.window=new Uint8Array(Ct.wsize)),st>=Ct.wsize?(Ct.window.set(rt.subarray(F-Ct.wsize,F),0),Ct.wnext=0,Ct.whave=Ct.wsize):(wt=Ct.wsize-Ct.wnext,wt>st&&(wt=st),Ct.window.set(rt.subarray(F-st,F-st+wt),Ct.wnext),st-=wt,st?(Ct.window.set(rt.subarray(F-st,F),0),Ct.wnext=st,Ct.whave=Ct.wsize):(Ct.wnext+=wt,Ct.wnext===Ct.wsize&&(Ct.wnext=0),Ct.whave<Ct.wsize&&(Ct.whave+=wt))),0},zt=(gt,rt)=>{let F,st,wt,Ct,Ut,Wt,xe,te,ve,Re,sr,O,le,Kt,he=0,kt,ne,Oe,_e,Te,Ue,tr,lr,ar=new Uint8Array(4),Ar,jr,ln=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(er(gt)||!gt.output||!gt.input&&gt.avail_in!==0)return j;F=gt.state,F.mode===Xt&&(F.mode=re),Ut=gt.next_out,wt=gt.output,xe=gt.avail_out,Ct=gt.next_in,st=gt.input,Wt=gt.avail_in,te=F.hold,ve=F.bits,Re=Wt,sr=xe,lr=H;t:for(;;)switch(F.mode){case at:if(F.wrap===0){F.mode=re;break}for(;ve<16;){if(Wt===0)break t;Wt--,te+=st[Ct++]<<ve,ve+=8}if(F.wrap&2&&te===35615){F.wbits===0&&(F.wbits=15),F.check=0,ar[0]=te&255,ar[1]=te>>>8&255,F.check=u(F.check,ar,2,0),te=0,ve=0,F.mode=q;break}if(F.head&&(F.head.done=!1),!(F.wrap&1)||(((te&255)<<8)+(te>>8))%31){gt.msg="incorrect header check",F.mode=et;break}if((te&15)!==Q){gt.msg="unknown compression method",F.mode=et;break}if(te>>>=4,ve-=4,tr=(te&15)+8,F.wbits===0&&(F.wbits=tr),tr>15||tr>F.wbits){gt.msg="invalid window size",F.mode=et;break}F.dmax=1<<F.wbits,F.flags=0,gt.adler=F.check=1,F.mode=te&512?vt:Xt,te=0,ve=0;break;case q:for(;ve<16;){if(Wt===0)break t;Wt--,te+=st[Ct++]<<ve,ve+=8}if(F.flags=te,(F.flags&255)!==Q){gt.msg="unknown compression method",F.mode=et;break}if(F.flags&57344){gt.msg="unknown header flags set",F.mode=et;break}F.head&&(F.head.text=te>>8&1),F.flags&512&&F.wrap&4&&(ar[0]=te&255,ar[1]=te>>>8&255,F.check=u(F.check,ar,2,0)),te=0,ve=0,F.mode=U;case U:for(;ve<32;){if(Wt===0)break t;Wt--,te+=st[Ct++]<<ve,ve+=8}F.head&&(F.head.time=te),F.flags&512&&F.wrap&4&&(ar[0]=te&255,ar[1]=te>>>8&255,ar[2]=te>>>16&255,ar[3]=te>>>24&255,F.check=u(F.check,ar,4,0)),te=0,ve=0,F.mode=V;case V:for(;ve<16;){if(Wt===0)break t;Wt--,te+=st[Ct++]<<ve,ve+=8}F.head&&(F.head.xflags=te&255,F.head.os=te>>8),F.flags&512&&F.wrap&4&&(ar[0]=te&255,ar[1]=te>>>8&255,F.check=u(F.check,ar,2,0)),te=0,ve=0,F.mode=lt;case lt:if(F.flags&1024){for(;ve<16;){if(Wt===0)break t;Wt--,te+=st[Ct++]<<ve,ve+=8}F.length=te,F.head&&(F.head.extra_len=te),F.flags&512&&F.wrap&4&&(ar[0]=te&255,ar[1]=te>>>8&255,F.check=u(F.check,ar,2,0)),te=0,ve=0}else F.head&&(F.head.extra=null);F.mode=It;case It:if(F.flags&1024&&(O=F.length,O>Wt&&(O=Wt),O&&(F.head&&(tr=F.head.extra_len-F.length,F.head.extra||(F.head.extra=new Uint8Array(F.head.extra_len)),F.head.extra.set(st.subarray(Ct,Ct+O),tr)),F.flags&512&&F.wrap&4&&(F.check=u(F.check,st,O,Ct)),Wt-=O,Ct+=O,F.length-=O),F.length))break t;F.length=0,F.mode=Ot;case Ot:if(F.flags&2048){if(Wt===0)break t;O=0;do tr=st[Ct+O++],F.head&&tr&&F.length<65536&&(F.head.name+=String.fromCharCode(tr));while(tr&&O<Wt);if(F.flags&512&&F.wrap&4&&(F.check=u(F.check,st,O,Ct)),Wt-=O,Ct+=O,tr)break t}else F.head&&(F.head.name=null);F.length=0,F.mode=yt;case yt:if(F.flags&4096){if(Wt===0)break t;O=0;do tr=st[Ct+O++],F.head&&tr&&F.length<65536&&(F.head.comment+=String.fromCharCode(tr));while(tr&&O<Wt);if(F.flags&512&&F.wrap&4&&(F.check=u(F.check,st,O,Ct)),Wt-=O,Ct+=O,tr)break t}else F.head&&(F.head.comment=null);F.mode=Et;case Et:if(F.flags&512){for(;ve<16;){if(Wt===0)break t;Wt--,te+=st[Ct++]<<ve,ve+=8}if(F.wrap&4&&te!==(F.check&65535)){gt.msg="header crc mismatch",F.mode=et;break}te=0,ve=0}F.head&&(F.head.hcrc=F.flags>>9&1,F.head.done=!0),gt.adler=F.check=0,F.mode=Xt;break;case vt:for(;ve<32;){if(Wt===0)break t;Wt--,te+=st[Ct++]<<ve,ve+=8}gt.adler=F.check=yr(te),te=0,ve=0,F.mode=Yt;case Yt:if(F.havedict===0)return gt.next_out=Ut,gt.avail_out=xe,gt.next_in=Ct,gt.avail_in=Wt,F.hold=te,F.bits=ve,w;gt.adler=F.check=1,F.mode=Xt;case Xt:if(rt===C||rt===a)break t;case re:if(F.last){te>>>=ve&7,ve-=ve&7,F.mode=vr;break}for(;ve<3;){if(Wt===0)break t;Wt--,te+=st[Ct++]<<ve,ve+=8}switch(F.last=te&1,te>>>=1,ve-=1,te&3){case 0:F.mode=ae;break;case 1:if(Nt(F),F.mode=Ve,rt===a){te>>>=2,ve-=2;break t}break;case 2:F.mode=pe;break;case 3:gt.msg="invalid block type",F.mode=et}te>>>=2,ve-=2;break;case ae:for(te>>>=ve&7,ve-=ve&7;ve<32;){if(Wt===0)break t;Wt--,te+=st[Ct++]<<ve,ve+=8}if((te&65535)!==(te>>>16^65535)){gt.msg="invalid stored block lengths",F.mode=et;break}if(F.length=te&65535,te=0,ve=0,F.mode=He,rt===a)break t;case He:F.mode=de;case de:if(O=F.length,O){if(O>Wt&&(O=Wt),O>xe&&(O=xe),O===0)break t;wt.set(st.subarray(Ct,Ct+O),Ut),Wt-=O,Ct+=O,xe-=O,Ut+=O,F.length-=O;break}F.mode=Xt;break;case pe:for(;ve<14;){if(Wt===0)break t;Wt--,te+=st[Ct++]<<ve,ve+=8}if(F.nlen=(te&31)+257,te>>>=5,ve-=5,F.ndist=(te&31)+1,te>>>=5,ve-=5,F.ncode=(te&15)+4,te>>>=4,ve-=4,F.nlen>286||F.ndist>30){gt.msg="too many length or distance symbols",F.mode=et;break}F.have=0,F.mode=Ce;case Ce:for(;F.have<F.ncode;){for(;ve<3;){if(Wt===0)break t;Wt--,te+=st[Ct++]<<ve,ve+=8}F.lens[ln[F.have++]]=te&7,te>>>=3,ve-=3}for(;F.have<19;)F.lens[ln[F.have++]]=0;if(F.lencode=F.lendyn,F.lenbits=7,Ar={bits:F.lenbits},lr=p(g,F.lens,0,19,F.lencode,0,F.work,Ar),F.lenbits=Ar.bits,lr){gt.msg="invalid code lengths set",F.mode=et;break}F.have=0,F.mode=Ie;case Ie:for(;F.have<F.nlen+F.ndist;){for(;he=F.lencode[te&(1<<F.lenbits)-1],kt=he>>>24,ne=he>>>16&255,Oe=he&65535,!(kt<=ve);){if(Wt===0)break t;Wt--,te+=st[Ct++]<<ve,ve+=8}if(Oe<16)te>>>=kt,ve-=kt,F.lens[F.have++]=Oe;else{if(Oe===16){for(jr=kt+2;ve<jr;){if(Wt===0)break t;Wt--,te+=st[Ct++]<<ve,ve+=8}if(te>>>=kt,ve-=kt,F.have===0){gt.msg="invalid bit length repeat",F.mode=et;break}tr=F.lens[F.have-1],O=3+(te&3),te>>>=2,ve-=2}else if(Oe===17){for(jr=kt+3;ve<jr;){if(Wt===0)break t;Wt--,te+=st[Ct++]<<ve,ve+=8}te>>>=kt,ve-=kt,tr=0,O=3+(te&7),te>>>=3,ve-=3}else{for(jr=kt+7;ve<jr;){if(Wt===0)break t;Wt--,te+=st[Ct++]<<ve,ve+=8}te>>>=kt,ve-=kt,tr=0,O=11+(te&127),te>>>=7,ve-=7}if(F.have+O>F.nlen+F.ndist){gt.msg="invalid bit length repeat",F.mode=et;break}for(;O--;)F.lens[F.have++]=tr}}if(F.mode===et)break;if(F.lens[256]===0){gt.msg="invalid code -- missing end-of-block",F.mode=et;break}if(F.lenbits=9,Ar={bits:F.lenbits},lr=p(y,F.lens,0,F.nlen,F.lencode,0,F.work,Ar),F.lenbits=Ar.bits,lr){gt.msg="invalid literal/lengths set",F.mode=et;break}if(F.distbits=6,F.distcode=F.distdyn,Ar={bits:F.distbits},lr=p(E,F.lens,F.nlen,F.ndist,F.distcode,0,F.work,Ar),F.distbits=Ar.bits,lr){gt.msg="invalid distances set",F.mode=et;break}if(F.mode=Ve,rt===a)break t;case Ve:F.mode=We;case We:if(Wt>=6&&xe>=258){gt.next_out=Ut,gt.avail_out=xe,gt.next_in=Ct,gt.avail_in=Wt,F.hold=te,F.bits=ve,s(gt,sr),Ut=gt.next_out,wt=gt.output,xe=gt.avail_out,Ct=gt.next_in,st=gt.input,Wt=gt.avail_in,te=F.hold,ve=F.bits,F.mode===Xt&&(F.back=-1);break}for(F.back=0;he=F.lencode[te&(1<<F.lenbits)-1],kt=he>>>24,ne=he>>>16&255,Oe=he&65535,!(kt<=ve);){if(Wt===0)break t;Wt--,te+=st[Ct++]<<ve,ve+=8}if(ne&&!(ne&240)){for(_e=kt,Te=ne,Ue=Oe;he=F.lencode[Ue+((te&(1<<_e+Te)-1)>>_e)],kt=he>>>24,ne=he>>>16&255,Oe=he&65535,!(_e+kt<=ve);){if(Wt===0)break t;Wt--,te+=st[Ct++]<<ve,ve+=8}te>>>=_e,ve-=_e,F.back+=_e}if(te>>>=kt,ve-=kt,F.back+=kt,F.length=Oe,ne===0){F.mode=Ze;break}if(ne&32){F.back=-1,F.mode=Xt;break}if(ne&64){gt.msg="invalid literal/length code",F.mode=et;break}F.extra=ne&15,F.mode=we;case we:if(F.extra){for(jr=F.extra;ve<jr;){if(Wt===0)break t;Wt--,te+=st[Ct++]<<ve,ve+=8}F.length+=te&(1<<F.extra)-1,te>>>=F.extra,ve-=F.extra,F.back+=F.extra}F.was=F.length,F.mode=Se;case Se:for(;he=F.distcode[te&(1<<F.distbits)-1],kt=he>>>24,ne=he>>>16&255,Oe=he&65535,!(kt<=ve);){if(Wt===0)break t;Wt--,te+=st[Ct++]<<ve,ve+=8}if(!(ne&240)){for(_e=kt,Te=ne,Ue=Oe;he=F.distcode[Ue+((te&(1<<_e+Te)-1)>>_e)],kt=he>>>24,ne=he>>>16&255,Oe=he&65535,!(_e+kt<=ve);){if(Wt===0)break t;Wt--,te+=st[Ct++]<<ve,ve+=8}te>>>=_e,ve-=_e,F.back+=_e}if(te>>>=kt,ve-=kt,F.back+=kt,ne&64){gt.msg="invalid distance code",F.mode=et;break}F.offset=Oe,F.extra=ne&15,F.mode=Qe;case Qe:if(F.extra){for(jr=F.extra;ve<jr;){if(Wt===0)break t;Wt--,te+=st[Ct++]<<ve,ve+=8}F.offset+=te&(1<<F.extra)-1,te>>>=F.extra,ve-=F.extra,F.back+=F.extra}if(F.offset>F.dmax){gt.msg="invalid distance too far back",F.mode=et;break}F.mode=Ke;case Ke:if(xe===0)break t;if(O=sr-xe,F.offset>O){if(O=F.offset-O,O>F.whave&&F.sane){gt.msg="invalid distance too far back",F.mode=et;break}O>F.wnext?(O-=F.wnext,le=F.wsize-O):le=F.wnext-O,O>F.length&&(O=F.length),Kt=F.window}else Kt=wt,le=Ut-F.offset,O=F.length;O>xe&&(O=xe),xe-=O,F.length-=O;do wt[Ut++]=Kt[le++];while(--O);F.length===0&&(F.mode=We);break;case Ze:if(xe===0)break t;wt[Ut++]=F.length,xe--,F.mode=We;break;case vr:if(F.wrap){for(;ve<32;){if(Wt===0)break t;Wt--,te|=st[Ct++]<<ve,ve+=8}if(sr-=xe,gt.total_out+=sr,F.total+=sr,F.wrap&4&&sr&&(gt.adler=F.check=F.flags?u(F.check,wt,sr,Ut-sr):n(F.check,wt,sr,Ut-sr)),sr=xe,F.wrap&4&&(F.flags?te:yr(te))!==F.check){gt.msg="incorrect data check",F.mode=et;break}te=0,ve=0}F.mode=Pr;case Pr:if(F.wrap&&F.flags){for(;ve<32;){if(Wt===0)break t;Wt--,te+=st[Ct++]<<ve,ve+=8}if(F.wrap&4&&te!==(F.total&4294967295)){gt.msg="incorrect length check",F.mode=et;break}te=0,ve=0}F.mode=Cr;case Cr:lr=X;break t;case et:lr=tt;break t;case k:return J;case Z:default:return j}return gt.next_out=Ut,gt.avail_out=xe,gt.next_in=Ct,gt.avail_in=Wt,F.hold=te,F.bits=ve,(F.wsize||sr!==gt.avail_out&&F.mode<et&&(F.mode<vr||rt!==m))&&nt(gt,gt.output,gt.next_out,sr-gt.avail_out)?(F.mode=k,J):(Re-=gt.avail_in,sr-=gt.avail_out,gt.total_in+=Re,gt.total_out+=sr,F.total+=sr,F.wrap&4&&sr&&(gt.adler=F.check=F.flags?u(F.check,wt,sr,gt.next_out-sr):n(F.check,wt,sr,gt.next_out-sr)),gt.data_type=F.bits+(F.last?64:0)+(F.mode===Xt?128:0)+(F.mode===Ve||F.mode===He?256:0),(Re===0&&sr===0||rt===m)&&lr===H&&(lr=N),lr)},Lt=gt=>{if(er(gt))return j;let rt=gt.state;return rt.window&&(rt.window=null),gt.state=null,H},Be=(gt,rt)=>{if(er(gt))return j;let F=gt.state;return F.wrap&2?(F.head=rt,rt.done=!1,H):j},_t=(gt,rt)=>{let F=rt.length,st,wt,Ct;return er(gt)||(st=gt.state,st.wrap!==0&&st.mode!==Yt)?j:st.mode===Yt&&(wt=1,wt=n(wt,rt,F,0),wt!==st.check)?tt:(Ct=nt(gt,rt,F,F),Ct?(st.mode=k,J):(st.havedict=1,H))};e.exports.inflateReset=Lr,e.exports.inflateReset2=Sr,e.exports.inflateResetKeep=Wr,e.exports.inflateInit=f,e.exports.inflateInit2=L,e.exports.inflate=zt,e.exports.inflateEnd=Lt,e.exports.inflateGetHeader=Be,e.exports.inflateSetDictionary=_t,e.exports.inflateInfo="pako inflate (from Nodeca project)"}),N4=ce((t,e)=>{"use strict";function n(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=n}),j4=ce((t,e)=>{"use strict";var n=T4(),u=Uv(),s=jv(),p=n0(),g=Hv(),y=N4(),E=Object.prototype.toString,{Z_NO_FLUSH:m,Z_FINISH:C,Z_OK:a,Z_STREAM_END:H,Z_NEED_DICT:X,Z_STREAM_ERROR:w,Z_DATA_ERROR:j,Z_MEM_ERROR:tt}=io();function J(at){this.options=u.assign({chunkSize:1024*64,windowBits:15,to:""},at||{});let q=this.options;q.raw&&q.windowBits>=0&&q.windowBits<16&&(q.windowBits=-q.windowBits,q.windowBits===0&&(q.windowBits=-15)),q.windowBits>=0&&q.windowBits<16&&!(at&&at.windowBits)&&(q.windowBits+=32),q.windowBits>15&&q.windowBits<48&&(q.windowBits&15||(q.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new g,this.strm.avail_out=0;let U=n.inflateInit2(this.strm,q.windowBits);if(U!==a)throw new Error(p[U]);if(this.header=new y,n.inflateGetHeader(this.strm,this.header),q.dictionary&&(typeof q.dictionary=="string"?q.dictionary=s.string2buf(q.dictionary):E.call(q.dictionary)==="[object ArrayBuffer]"&&(q.dictionary=new Uint8Array(q.dictionary)),q.raw&&(U=n.inflateSetDictionary(this.strm,q.dictionary),U!==a)))throw new Error(p[U])}J.prototype.push=function(at,q){let U=this.strm,V=this.options.chunkSize,lt=this.options.dictionary,It,Ot,yt;if(this.ended)return!1;for(q===~~q?Ot=q:Ot=q===!0?C:m,E.call(at)==="[object ArrayBuffer]"?U.input=new Uint8Array(at):U.input=at,U.next_in=0,U.avail_in=U.input.length;;){for(U.avail_out===0&&(U.output=new Uint8Array(V),U.next_out=0,U.avail_out=V),It=n.inflate(U,Ot),It===X&&lt&&(It=n.inflateSetDictionary(U,lt),It===a?It=n.inflate(U,Ot):It===j&&(It=X));U.avail_in>0&&It===H&&U.state.wrap>0&&at[U.next_in]!==0;)n.inflateReset(U),It=n.inflate(U,Ot);switch(It){case w:case j:case X:case tt:return this.onEnd(It),this.ended=!0,!1}if(yt=U.avail_out,U.next_out&&(U.avail_out===0||It===H))if(this.options.to==="string"){let Et=s.utf8border(U.output,U.next_out),vt=U.next_out-Et,Yt=s.buf2string(U.output,Et);U.next_out=vt,U.avail_out=V-vt,vt&&U.output.set(U.output.subarray(Et,Et+vt),0),this.onData(Yt)}else this.onData(U.output.length===U.next_out?U.output:U.output.subarray(0,U.next_out));if(!(It===a&&yt===0)){if(It===H)return It=n.inflateEnd(this.strm),this.onEnd(It),this.ended=!0,!0;if(U.avail_in===0)break}}return!0},J.prototype.onData=function(at){this.chunks.push(at)},J.prototype.onEnd=function(at){at===a&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=at,this.msg=this.strm.msg};function N(at,q){let U=new J(q);if(U.push(at),U.err)throw U.msg||p[U.err];return U.result}function Q(at,q){return q=q||{},q.raw=!0,N(at,q)}e.exports.Inflate=J,e.exports.inflate=N,e.exports.inflateRaw=Q,e.exports.ungzip=N,e.exports.constants=io()}),H4=ce((t,e)=>{"use strict";var{Deflate:n,deflate:u,deflateRaw:s,gzip:p}=WD(),{Inflate:g,inflate:y,inflateRaw:E,ungzip:m}=j4(),C=io();e.exports.Deflate=n,e.exports.deflate=u,e.exports.deflateRaw=s,e.exports.gzip=p,e.exports.Inflate=g,e.exports.inflate=y,e.exports.inflateRaw=E,e.exports.ungzip=m,e.exports.constants=C}),u2=ce((t,e)=>{var n=new TextEncoder,u=new TextDecoder("utf-8");function s(N){return n.encode(N)}function p(N){return u.decode(N)}function g(N){if(typeof N!="string")throw new TypeError("value is not a string");if(!/^([0-9a-f][0-9a-f])*$/.test(N))throw new RangeError("value is not hexadecimal");return N===""?new Uint8Array(0):new Uint8Array(N.match(/../g).map(Q=>parseInt(Q,16)))}var y=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],E=new Array(256);for(let N=0;N<256;N++)E[N]=`${y[N>>>4&15]}${y[N&15]}`;function m(N){let Q="",at=N.byteLength;for(let q=0;q<at;q++)Q+=E[N[q]];return Q}var C=class{constructor(){this.buf=new Uint8Array(16),this.offset=0}get buffer(){return this.finish(),this.buf.subarray(0,this.offset)}grow(N=0){let Q=this.buf.byteLength*4;for(;Q<N;)Q*=2;let at=new Uint8Array(Q);return at.set(this.buf,0),this.buf=at,this}appendByte(N){this.offset>=this.buf.byteLength&&this.grow(),this.buf[this.offset]=N,this.offset+=1}appendUint32(N){if(!Number.isInteger(N))throw new RangeError("value is not an integer");if(N<0||N>4294967295)throw new RangeError("number out of range");let Q=Math.max(1,Math.ceil((32-Math.clz32(N))/7));this.offset+Q>this.buf.byteLength&&this.grow();for(let at=0;at<Q;at++)this.buf[this.offset+at]=N&127|(at===Q-1?0:128),N>>>=7;return this.offset+=Q,Q}appendInt32(N){if(!Number.isInteger(N))throw new RangeError("value is not an integer");if(N<-2147483648||N>2147483647)throw new RangeError("number out of range");let Q=Math.ceil((33-Math.clz32(N>=0?N:-N-1))/7);this.offset+Q>this.buf.byteLength&&this.grow();for(let at=0;at<Q;at++)this.buf[this.offset+at]=N&127|(at===Q-1?0:128),N>>=7;return this.offset+=Q,Q}appendUint53(N){if(!Number.isInteger(N))throw new RangeError("value is not an integer");if(N<0||N>Number.MAX_SAFE_INTEGER)throw new RangeError("number out of range");let Q=Math.floor(N/4294967296),at=(N&4294967295)>>>0;return this.appendUint64(Q,at)}appendInt53(N){if(!Number.isInteger(N))throw new RangeError("value is not an integer");if(N<Number.MIN_SAFE_INTEGER||N>Number.MAX_SAFE_INTEGER)throw new RangeError("number out of range");let Q=Math.floor(N/4294967296),at=(N&4294967295)>>>0;return this.appendInt64(Q,at)}appendUint64(N,Q){if(!Number.isInteger(N)||!Number.isInteger(Q))throw new RangeError("value is not an integer");if(N<0||N>4294967295||Q<0||Q>4294967295)throw new RangeError("number out of range");if(N===0)return this.appendUint32(Q);let at=Math.ceil((64-Math.clz32(N))/7);this.offset+at>this.buf.byteLength&&this.grow();for(let q=0;q<4;q++)this.buf[this.offset+q]=Q&127|128,Q>>>=7;this.buf[this.offset+4]=Q&15|(N&7)<<4|(at===5?0:128),N>>>=3;for(let q=5;q<at;q++)this.buf[this.offset+q]=N&127|(q===at-1?0:128),N>>>=7;return this.offset+=at,at}appendInt64(N,Q){if(!Number.isInteger(N)||!Number.isInteger(Q))throw new RangeError("value is not an integer");if(N<-2147483648||N>2147483647||Q<-2147483648||Q>4294967295)throw new RangeError("number out of range");if(Q>>>=0,N===0&&Q<=2147483647)return this.appendInt32(Q);if(N===-1&&Q>=2147483648)return this.appendInt32(Q-4294967296);let at=Math.ceil((65-Math.clz32(N>=0?N:-N-1))/7);this.offset+at>this.buf.byteLength&&this.grow();for(let q=0;q<4;q++)this.buf[this.offset+q]=Q&127|128,Q>>>=7;this.buf[this.offset+4]=Q&15|(N&7)<<4|(at===5?0:128),N>>=3;for(let q=5;q<at;q++)this.buf[this.offset+q]=N&127|(q===at-1?0:128),N>>=7;return this.offset+=at,at}appendRawBytes(N){return this.offset+N.byteLength>this.buf.byteLength&&this.grow(this.offset+N.byteLength),this.buf.set(N,this.offset),this.offset+=N.byteLength,N.byteLength}appendRawString(N){if(typeof N!="string")throw new TypeError("value is not a string");return this.appendRawBytes(s(N))}appendPrefixedBytes(N){return this.appendUint53(N.byteLength),this.appendRawBytes(N),this}appendPrefixedString(N){if(typeof N!="string")throw new TypeError("value is not a string");return this.appendPrefixedBytes(s(N)),this}appendHexString(N){return this.appendPrefixedBytes(g(N)),this}finish(){}},a=class{constructor(N){if(!(N instanceof Uint8Array))throw new TypeError(`Not a byte array: ${N}`);this.buf=N,this.offset=0}get done(){return this.offset===this.buf.byteLength}reset(){this.offset=0}skip(N){if(this.offset+N>this.buf.byteLength)throw new RangeError("cannot skip beyond end of buffer");this.offset+=N}readByte(){return this.offset+=1,this.buf[this.offset-1]}readUint32(){let N=0,Q=0;for(;this.offset<this.buf.byteLength;){let at=this.buf[this.offset];if(Q===28&&at&240)throw new RangeError("number out of range");if(N=(N|(at&127)<<Q)>>>0,Q+=7,this.offset++,!(at&128))return N}throw new RangeError("buffer ended with incomplete number")}readInt32(){let N=0,Q=0;for(;this.offset<this.buf.byteLength;){let at=this.buf[this.offset];if(Q===28&&at&128||Q===28&&!(at&64)&&at&56||Q===28&&at&64&&(at&56)!==56)throw new RangeError("number out of range");if(N|=(at&127)<<Q,Q+=7,this.offset++,!(at&128))return!(at&64)||Q>28?N:N|-1<<Q}throw new RangeError("buffer ended with incomplete number")}readUint53(){let{low32:N,high32:Q}=this.readUint64();if(Q<0||Q>2097151)throw new RangeError("number out of range");return Q*4294967296+N}readInt53(){let{low32:N,high32:Q}=this.readInt64();if(Q<-2097152||Q===-2097152&&N===0||Q>2097151)throw new RangeError("number out of range");return Q*4294967296+N}readUint64(){let N=0,Q=0,at=0;for(;this.offset<this.buf.byteLength&&at<=28;){let q=this.buf[this.offset];if(N=(N|(q&127)<<at)>>>0,at===28&&(Q=(q&112)>>>4),at+=7,this.offset++,!(q&128))return{high32:Q,low32:N}}for(at=3;this.offset<this.buf.byteLength;){let q=this.buf[this.offset];if(at===31&&q&254)throw new RangeError("number out of range");if(Q=(Q|(q&127)<<at)>>>0,at+=7,this.offset++,!(q&128))return{high32:Q,low32:N}}throw new RangeError("buffer ended with incomplete number")}readInt64(){let N=0,Q=0,at=0;for(;this.offset<this.buf.byteLength&&at<=28;){let q=this.buf[this.offset];if(N=(N|(q&127)<<at)>>>0,at===28&&(Q=(q&112)>>>4),at+=7,this.offset++,!(q&128))return q&64&&(at<32&&(N=(N|-1<<at)>>>0),Q|=-1<<Math.max(at-32,0)),{high32:Q,low32:N}}for(at=3;this.offset<this.buf.byteLength;){let q=this.buf[this.offset];if(at===31&&q!==0&&q!==127)throw new RangeError("number out of range");if(Q|=(q&127)<<at,at+=7,this.offset++,!(q&128))return q&64&&at<32&&(Q|=-1<<at),{high32:Q,low32:N}}throw new RangeError("buffer ended with incomplete number")}readRawBytes(N){let Q=this.offset;if(Q+N>this.buf.byteLength)throw new RangeError("subarray exceeds buffer size");return this.offset+=N,this.buf.subarray(Q,this.offset)}readRawString(N){return p(this.readRawBytes(N))}readPrefixedBytes(){return this.readRawBytes(this.readUint53())}readPrefixedString(){return p(this.readPrefixedBytes())}readHexString(){return m(this.readPrefixedBytes())}},H=class extends C{constructor(N){super(),this.type=N,this.state="empty",this.lastValue=void 0,this.count=0,this.literal=[]}appendValue(N,Q=1){this._appendValue(N,Q)}_appendValue(N,Q=1){Q<=0||(this.state==="empty"?(this.state=N===null?"nulls":Q===1?"loneValue":"repetition",this.lastValue=N,this.count=Q):this.state==="loneValue"?N===null?(this.flush(),this.state="nulls",this.count=Q):N===this.lastValue?(this.state="repetition",this.count=1+Q):Q>1?(this.flush(),this.state="repetition",this.count=Q,this.lastValue=N):(this.state="literal",this.literal=[this.lastValue],this.lastValue=N):this.state==="repetition"?N===null?(this.flush(),this.state="nulls",this.count=Q):N===this.lastValue?this.count+=Q:Q>1?(this.flush(),this.state="repetition",this.count=Q,this.lastValue=N):(this.flush(),this.state="loneValue",this.lastValue=N):this.state==="literal"?N===null?(this.literal.push(this.lastValue),this.flush(),this.state="nulls",this.count=Q):N===this.lastValue?(this.flush(),this.state="repetition",this.count=1+Q):Q>1?(this.literal.push(this.lastValue),this.flush(),this.state="repetition",this.count=Q,this.lastValue=N):(this.literal.push(this.lastValue),this.lastValue=N):this.state==="nulls"&&(N===null?this.count+=Q:Q>1?(this.flush(),this.state="repetition",this.count=Q,this.lastValue=N):(this.flush(),this.state="loneValue",this.lastValue=N)))}copyFrom(N,Q={}){let{count:at,sumValues:q,sumShift:U}=Q;if(!(N instanceof X)||N.type!==this.type)throw new TypeError("incompatible type of decoder");let V=typeof at=="number"?at:Number.MAX_SAFE_INTEGER,lt=0,It=0;if(at&&V>0&&N.done)throw new RangeError(`cannot copy ${at} values`);if(V===0||N.done)return q?{nonNullValues:lt,sum:It}:{nonNullValues:lt};let Ot=N.readValue();if(Ot===null){let Et=Math.min(N.count+1,V);if(V-=Et,N.count-=Et-1,this.appendValue(null,Et),at&&V>0&&N.done)throw new RangeError(`cannot copy ${at} values`);if(V===0||N.done)return q?{nonNullValues:lt,sum:It}:{nonNullValues:lt};if(Ot=N.readValue(),Ot===null)throw new RangeError("null run must be followed by non-null value")}if(this.appendValue(Ot),V--,lt++,q&&(It+=U?Ot>>>U:Ot),at&&V>0&&N.done)throw new RangeError(`cannot copy ${at} values`);if(V===0||N.done)return q?{nonNullValues:lt,sum:It}:{nonNullValues:lt};let yt=N.count>0;for(;V>0&&!N.done;){yt||N.readRecord();let Et=Math.min(N.count,V);if(N.count-=Et,N.state==="literal"){lt+=Et;for(let vt=0;vt<Et;vt++){if(N.done)throw new RangeError("incomplete literal");let Yt=N.readRawValue();if(Yt===N.lastValue)throw new RangeError("Repetition of values is not allowed in literal");N.lastValue=Yt,this._appendValue(Yt),q&&(It+=U?Yt>>>U:Yt)}}else if(N.state==="repetition"){lt+=Et,q&&(It+=Et*(U?N.lastValue>>>U:N.lastValue));let vt=N.lastValue;if(this._appendValue(vt),Et>1){if(this._appendValue(vt),this.state!=="repetition")throw new RangeError(`Unexpected state ${this.state}`);this.count+=Et-2}}else if(N.state==="nulls"){if(this._appendValue(null),this.state!=="nulls")throw new RangeError(`Unexpected state ${this.state}`);this.count+=Et-1}yt=!1,V-=Et}if(at&&V>0&&N.done)throw new RangeError(`cannot copy ${at} values`);return q?{nonNullValues:lt,sum:It}:{nonNullValues:lt}}flush(){if(this.state==="loneValue")this.appendInt32(-1),this.appendRawValue(this.lastValue);else if(this.state==="repetition")this.appendInt53(this.count),this.appendRawValue(this.lastValue);else if(this.state==="literal"){this.appendInt53(-this.literal.length);for(let N of this.literal)this.appendRawValue(N)}else this.state==="nulls"&&(this.appendInt32(0),this.appendUint53(this.count));this.state="empty"}appendRawValue(N){if(this.type==="int")this.appendInt53(N);else if(this.type==="uint")this.appendUint53(N);else if(this.type==="utf8")this.appendPrefixedString(N);else throw new RangeError(`Unknown RLEEncoder datatype: ${this.type}`)}finish(){this.state==="literal"&&this.literal.push(this.lastValue),(this.state!=="nulls"||this.offset>0)&&this.flush()}},X=class extends a{constructor(N,Q){super(Q),this.type=N,this.lastValue=void 0,this.count=0,this.state=void 0}get done(){return this.count===0&&this.offset===this.buf.byteLength}reset(){this.offset=0,this.lastValue=void 0,this.count=0,this.state=void 0}readValue(){if(this.done)return null;if(this.count===0&&this.readRecord(),this.count-=1,this.state==="literal"){let N=this.readRawValue();if(N===this.lastValue)throw new RangeError("Repetition of values is not allowed in literal");return this.lastValue=N,N}else return this.lastValue}skipValues(N){for(;N>0&&!this.done;){this.count===0&&(this.count=this.readInt53(),this.count>0?(this.lastValue=this.count<=N?this.skipRawValues(1):this.readRawValue(),this.state="repetition"):this.count<0?(this.count=-this.count,this.state="literal"):(this.count=this.readUint53(),this.lastValue=null,this.state="nulls"));let Q=Math.min(N,this.count);this.state==="literal"&&this.skipRawValues(Q),N-=Q,this.count-=Q}}readRecord(){if(this.count=this.readInt53(),this.count>1){let N=this.readRawValue();if((this.state==="repetition"||this.state==="literal")&&this.lastValue===N)throw new RangeError("Successive repetitions with the same value are not allowed");this.state="repetition",this.lastValue=N}else{if(this.count===1)throw new RangeError("Repetition count of 1 is not allowed, use a literal instead");if(this.count<0){if(this.count=-this.count,this.state==="literal")throw new RangeError("Successive literals are not allowed");this.state="literal"}else{if(this.state==="nulls")throw new RangeError("Successive null runs are not allowed");if(this.count=this.readUint53(),this.count===0)throw new RangeError("Zero-length null runs are not allowed");this.lastValue=null,this.state="nulls"}}}readRawValue(){if(this.type==="int")return this.readInt53();if(this.type==="uint")return this.readUint53();if(this.type==="utf8")return this.readPrefixedString();throw new RangeError(`Unknown RLEDecoder datatype: ${this.type}`)}skipRawValues(N){if(this.type==="utf8")for(let Q=0;Q<N;Q++)this.skip(this.readUint53());else{for(;N>0&&this.offset<this.buf.byteLength;)this.buf[this.offset]&128||N--,this.offset++;if(N>0)throw new RangeError("cannot skip beyond end of buffer")}}},w=class extends H{constructor(){super("int"),this.absoluteValue=0}appendValue(N,Q=1){Q<=0||(typeof N=="number"?(super.appendValue(N-this.absoluteValue,1),this.absoluteValue=N,Q>1&&super.appendValue(0,Q-1)):super.appendValue(N,Q))}copyFrom(N,Q={}){if(Q.sumValues)throw new RangeError("unsupported options for DeltaEncoder.copyFrom()");if(!(N instanceof j))throw new TypeError("incompatible type of decoder");let at=Q.count;if(at>0&&N.done)throw new RangeError(`cannot copy ${at} values`);if(at===0||N.done)return;let q=N.readValue(),U=0;if(this.appendValue(q),q===null){if(U=N.count+1,at!==void 0&&at<U&&(U=at),N.count-=U-1,this.count+=U-1,at>U&&N.done)throw new RangeError(`cannot copy ${at} values`);if(at===U||N.done)return;N.count===0&&this.appendValue(N.readValue())}at!==void 0&&(at-=U+1);let{nonNullValues:V,sum:lt}=super.copyFrom(N,{count:at,sumValues:!0});V>0&&(this.absoluteValue=lt,N.absoluteValue=lt)}},j=class extends X{constructor(N){super("int",N),this.absoluteValue=0}reset(){this.offset=0,this.lastValue=void 0,this.count=0,this.state=void 0,this.absoluteValue=0}readValue(){let N=super.readValue();return N===null?null:(this.absoluteValue+=N,this.absoluteValue)}skipValues(N){for(;N>0&&!this.done;){this.count===0&&this.readRecord();let Q=Math.min(N,this.count);if(this.state==="literal")for(let at=0;at<Q;at++)this.lastValue=this.readRawValue(),this.absoluteValue+=this.lastValue;else this.state==="repetition"&&(this.absoluteValue+=Q*this.lastValue);N-=Q,this.count-=Q}}},tt=class extends C{constructor(){super(),this.lastValue=!1,this.count=0}appendValue(N,Q=1){if(N!==!1&&N!==!0)throw new RangeError(`Unsupported value for BooleanEncoder: ${N}`);Q<=0||(this.lastValue===N?this.count+=Q:(this.appendUint53(this.count),this.lastValue=N,this.count=Q))}copyFrom(N,Q={}){if(!(N instanceof J))throw new TypeError("incompatible type of decoder");let{count:at}=Q,q=typeof at=="number"?at:Number.MAX_SAFE_INTEGER;if(at&&q>0&&N.done)throw new RangeError(`cannot copy ${at} values`);if(q===0||N.done)return;this.appendValue(N.readValue()),q--;let U=Math.min(N.count,q);for(this.count+=U,N.count-=U,q-=U;q>0&&!N.done;){if(N.count=N.readUint53(),N.count===0)throw new RangeError("Zero-length runs are not allowed");N.lastValue=!N.lastValue,this.appendUint53(this.count);let V=Math.min(N.count,q);this.count=V,this.lastValue=N.lastValue,N.count-=V,q-=V}if(at&&q>0&&N.done)throw new RangeError(`cannot copy ${at} values`)}finish(){this.count>0&&(this.appendUint53(this.count),this.count=0)}},J=class extends a{constructor(N){super(N),this.lastValue=!0,this.firstRun=!0,this.count=0}get done(){return this.count===0&&this.offset===this.buf.byteLength}reset(){this.offset=0,this.lastValue=!0,this.firstRun=!0,this.count=0}readValue(){if(this.done)return!1;for(;this.count===0;){if(this.count=this.readUint53(),this.lastValue=!this.lastValue,this.count===0&&!this.firstRun)throw new RangeError("Zero-length runs are not allowed");this.firstRun=!1}return this.count-=1,this.lastValue}skipValues(N){for(;N>0&&!this.done;){if(this.count===0){if(this.count=this.readUint53(),this.lastValue=!this.lastValue,this.count===0&&!this.firstRun)throw new RangeError("Zero-length runs are not allowed");this.firstRun=!1}this.count<N?(N-=this.count,this.count=0):(this.count-=N,N=0)}}};e.exports={stringToUtf8:s,utf8ToString:p,hexStringToBytes:g,bytesToHexString:m,Encoder:C,Decoder:a,RLEEncoder:H,RLEDecoder:X,DeltaEncoder:w,DeltaDecoder:j,BooleanEncoder:tt,BooleanDecoder:J}}),Y4=ce((t,e)=>{(function(n,u){var s={};u(s);var p=s.default;for(var g in s)p[g]=s[g];typeof e=="object"&&typeof e.exports=="object"?e.exports=p:typeof define=="function"&&define.amd?define(function(){return p}):n.sha256=p})(t,function(n){"use strict";n.__esModule=!0,n.digestLength=32,n.blockSize=64;var u=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(X,w,j,tt,J){for(var N,Q,at,q,U,V,lt,It,Ot,yt,Et,vt,Yt;J>=64;){for(N=w[0],Q=w[1],at=w[2],q=w[3],U=w[4],V=w[5],lt=w[6],It=w[7],yt=0;yt<16;yt++)Et=tt+yt*4,X[yt]=(j[Et]&255)<<24|(j[Et+1]&255)<<16|(j[Et+2]&255)<<8|j[Et+3]&255;for(yt=16;yt<64;yt++)Ot=X[yt-2],vt=(Ot>>>17|Ot<<15)^(Ot>>>19|Ot<<13)^Ot>>>10,Ot=X[yt-15],Yt=(Ot>>>7|Ot<<25)^(Ot>>>18|Ot<<14)^Ot>>>3,X[yt]=(vt+X[yt-7]|0)+(Yt+X[yt-16]|0);for(yt=0;yt<64;yt++)vt=(((U>>>6|U<<26)^(U>>>11|U<<21)^(U>>>25|U<<7))+(U&V^~U&lt)|0)+(It+(u[yt]+X[yt]|0)|0)|0,Yt=((N>>>2|N<<30)^(N>>>13|N<<19)^(N>>>22|N<<10))+(N&Q^N&at^Q&at)|0,It=lt,lt=V,V=U,U=q+vt|0,q=at,at=Q,Q=N,N=vt+Yt|0;w[0]+=N,w[1]+=Q,w[2]+=at,w[3]+=q,w[4]+=U,w[5]+=V,w[6]+=lt,w[7]+=It,tt+=64,J-=64}return tt}var p=(function(){function X(){this.digestLength=n.digestLength,this.blockSize=n.blockSize,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return X.prototype.reset=function(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},X.prototype.clean=function(){for(var w=0;w<this.buffer.length;w++)this.buffer[w]=0;for(var w=0;w<this.temp.length;w++)this.temp[w]=0;this.reset()},X.prototype.update=function(w,j){if(j===void 0&&(j=w.length),this.finished)throw new Error("SHA256: can't update because hash was finished.");var tt=0;if(this.bytesHashed+=j,this.bufferLength>0){for(;this.bufferLength<64&&j>0;)this.buffer[this.bufferLength++]=w[tt++],j--;this.bufferLength===64&&(s(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(j>=64&&(tt=s(this.temp,this.state,w,tt,j),j%=64);j>0;)this.buffer[this.bufferLength++]=w[tt++],j--;return this},X.prototype.finish=function(w){if(!this.finished){var j=this.bytesHashed,tt=this.bufferLength,J=j/536870912|0,N=j<<3,Q=j%64<56?64:128;this.buffer[tt]=128;for(var at=tt+1;at<Q-8;at++)this.buffer[at]=0;this.buffer[Q-8]=J>>>24&255,this.buffer[Q-7]=J>>>16&255,this.buffer[Q-6]=J>>>8&255,this.buffer[Q-5]=J>>>0&255,this.buffer[Q-4]=N>>>24&255,this.buffer[Q-3]=N>>>16&255,this.buffer[Q-2]=N>>>8&255,this.buffer[Q-1]=N>>>0&255,s(this.temp,this.state,this.buffer,0,Q),this.finished=!0}for(var at=0;at<8;at++)w[at*4+0]=this.state[at]>>>24&255,w[at*4+1]=this.state[at]>>>16&255,w[at*4+2]=this.state[at]>>>8&255,w[at*4+3]=this.state[at]>>>0&255;return this},X.prototype.digest=function(){var w=new Uint8Array(this.digestLength);return this.finish(w),w},X.prototype._saveState=function(w){for(var j=0;j<this.state.length;j++)w[j]=this.state[j]},X.prototype._restoreState=function(w,j){for(var tt=0;tt<this.state.length;tt++)this.state[tt]=w[tt];this.bytesHashed=j,this.finished=!1,this.bufferLength=0},X})();n.Hash=p;var g=(function(){function X(w){this.inner=new p,this.outer=new p,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;var j=new Uint8Array(this.blockSize);if(w.length>this.blockSize)new p().update(w).finish(j).clean();else for(var tt=0;tt<w.length;tt++)j[tt]=w[tt];for(var tt=0;tt<j.length;tt++)j[tt]^=54;this.inner.update(j);for(var tt=0;tt<j.length;tt++)j[tt]^=106;this.outer.update(j),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate);for(var tt=0;tt<j.length;tt++)j[tt]=0}return X.prototype.reset=function(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this},X.prototype.clean=function(){for(var w=0;w<this.istate.length;w++)this.ostate[w]=this.istate[w]=0;this.inner.clean(),this.outer.clean()},X.prototype.update=function(w){return this.inner.update(w),this},X.prototype.finish=function(w){return this.outer.finished?this.outer.finish(w):(this.inner.finish(w),this.outer.update(w,this.digestLength).finish(w)),this},X.prototype.digest=function(){var w=new Uint8Array(this.digestLength);return this.finish(w),w},X})();n.HMAC=g;function y(X){var w=new p().update(X),j=w.digest();return w.clean(),j}n.hash=y,n.default=y;function E(X,w){var j=new g(X).update(w),tt=j.digest();return j.clean(),tt}n.hmac=E;function m(X,w,j,tt){var J=tt[0];if(J===0)throw new Error("hkdf: cannot expand more");w.reset(),J>1&&w.update(X),j&&w.update(j),w.update(tt),w.finish(X),tt[0]++}var C=new Uint8Array(n.digestLength);function a(X,w,j,tt){w===void 0&&(w=C),tt===void 0&&(tt=32);for(var J=new Uint8Array([1]),N=E(w,X),Q=new g(N),at=new Uint8Array(Q.digestLength),q=at.length,U=new Uint8Array(tt),V=0;V<tt;V++)q===at.length&&(m(at,Q,j,J),q=0),U[V]=at[q++];return Q.clean(),at.fill(0),J.fill(0),U}n.hkdf=a;function H(X,w,j,tt){for(var J=new g(X),N=J.digestLength,Q=new Uint8Array(4),at=new Uint8Array(N),q=new Uint8Array(N),U=new Uint8Array(tt),V=0;V*N<tt;V++){var lt=V+1;Q[0]=lt>>>24&255,Q[1]=lt>>>16&255,Q[2]=lt>>>8&255,Q[3]=lt>>>0&255,J.reset(),J.update(w),J.update(Q),J.finish(q);for(var It=0;It<N;It++)at[It]=q[It];for(var It=2;It<=j;It++){J.reset(),J.update(q).finish(q);for(var Ot=0;Ot<N;Ot++)at[Ot]^=q[Ot]}for(var It=0;It<N&&V*N+It<tt;It++)U[V*N+It]=at[It]}for(var V=0;V<N;V++)at[V]=q[V]=0;for(var V=0;V<4;V++)Q[V]=0;return J.clean(),U}n.pbkdf2=H})}),$h=ce((t,e)=>{var n=H4(),{copyObject:u,parseOpId:s,equalBytes:p}=Us(),{utf8ToString:g,hexStringToBytes:y,bytesToHexString:E,Encoder:m,Decoder:C,RLEEncoder:a,RLEDecoder:H,DeltaEncoder:X,DeltaDecoder:w,BooleanEncoder:j,BooleanDecoder:tt}=u2(),{Hash:J}=Y4(),N=new Uint8Array([133,111,74,131]),Q=0,at=1,q=2,U=256,V={GROUP_CARD:0,ACTOR_ID:1,INT_RLE:2,INT_DELTA:3,BOOLEAN:4,STRING_RLE:5,VALUE_LEN:6,VALUE_RAW:7},lt=8,It={NULL:0,FALSE:1,TRUE:2,LEB128_UINT:3,LEB128_INT:4,IEEE754:5,UTF8:6,BYTES:7,COUNTER:8,TIMESTAMP:9,MIN_UNKNOWN:10,MAX_UNKNOWN:15},Ot=["makeMap","set","makeList","del","makeText","inc","makeTable","link"],yt={makeMap:"map",makeList:"list",makeText:"text",makeTable:"table"},Et=[{columnName:"objActor",columnId:0|V.ACTOR_ID},{columnName:"objCtr",columnId:0|V.INT_RLE},{columnName:"keyActor",columnId:16|V.ACTOR_ID},{columnName:"keyCtr",columnId:16|V.INT_DELTA},{columnName:"keyStr",columnId:16|V.STRING_RLE},{columnName:"idActor",columnId:32|V.ACTOR_ID},{columnName:"idCtr",columnId:32|V.INT_DELTA},{columnName:"insert",columnId:48|V.BOOLEAN},{columnName:"action",columnId:64|V.INT_RLE},{columnName:"valLen",columnId:80|V.VALUE_LEN},{columnName:"valRaw",columnId:80|V.VALUE_RAW},{columnName:"chldActor",columnId:96|V.ACTOR_ID},{columnName:"chldCtr",columnId:96|V.INT_DELTA}],vt=Et.concat([{columnName:"predNum",columnId:112|V.GROUP_CARD},{columnName:"predActor",columnId:112|V.ACTOR_ID},{columnName:"predCtr",columnId:112|V.INT_DELTA}]),Yt=Et.concat([{columnName:"succNum",columnId:128|V.GROUP_CARD},{columnName:"succActor",columnId:128|V.ACTOR_ID},{columnName:"succCtr",columnId:128|V.INT_DELTA}]),Xt=[{columnName:"actor",columnId:0|V.ACTOR_ID},{columnName:"seq",columnId:0|V.INT_DELTA},{columnName:"maxOp",columnId:16|V.INT_DELTA},{columnName:"time",columnId:32|V.INT_DELTA},{columnName:"message",columnId:48|V.STRING_RLE},{columnName:"depsNum",columnId:64|V.GROUP_CARD},{columnName:"depsIndex",columnId:64|V.INT_DELTA},{columnName:"extraLen",columnId:80|V.VALUE_LEN},{columnName:"extraRaw",columnId:80|V.VALUE_RAW}];function re(_t,gt){if(!_t||!_t.actorId)return _t;let rt=_t.counter,F=gt.indexOf(_t.actorId);if(F<0)throw new RangeError("missing actorId");return{counter:rt,actorNum:F,actorId:_t.actorId}}function ae(_t,gt){return _t.counter<gt.counter?-1:_t.counter>gt.counter?1:_t.actorId<gt.actorId?-1:_t.actorId>gt.actorId?1:0}function He(_t,gt){let rt={},F=[];for(let wt of _t)wt=u(wt),rt[wt.actor]=!0,wt.ops=Ke(wt.ops,wt.startOp,wt.actor),wt.ops=wt.ops.map(Ct=>{Ct=u(Ct),Ct.obj!=="_root"&&(Ct.obj=s(Ct.obj)),Ct.elemId&&Ct.elemId!=="_head"&&(Ct.elemId=s(Ct.elemId)),Ct.child&&(Ct.child=s(Ct.child)),Ct.pred&&(Ct.pred=Ct.pred.map(s)),Ct.obj.actorId&&(rt[Ct.obj.actorId]=!0),Ct.elemId&&Ct.elemId.actorId&&(rt[Ct.elemId.actorId]=!0),Ct.child&&Ct.child.actorId&&(rt[Ct.child.actorId]=!0);for(let Ut of Ct.pred)rt[Ut.actorId]=!0;return Ct}),F.push(wt);let st=Object.keys(rt).sort();gt&&(st=[_t[0].actor].concat(st.filter(wt=>wt!==_t[0].actor)));for(let wt of F){wt.actorNum=st.indexOf(wt.actor);for(let Ct=0;Ct<wt.ops.length;Ct++){let Ut=wt.ops[Ct];Ut.id={counter:wt.startOp+Ct,actorNum:wt.actorNum,actorId:wt.actor},Ut.obj=re(Ut.obj,st),Ut.elemId=re(Ut.elemId,st),Ut.child=re(Ut.child,st),Ut.pred=Ut.pred.map(Wt=>re(Wt,st))}}return{changes:F,actorIds:st}}function de(_t,gt){if(_t.obj==="_root")gt.objActor.appendValue(null),gt.objCtr.appendValue(null);else if(_t.obj.actorNum>=0&&_t.obj.counter>0)gt.objActor.appendValue(_t.obj.actorNum),gt.objCtr.appendValue(_t.obj.counter);else throw new RangeError(`Unexpected objectId reference: ${JSON.stringify(_t.obj)}`)}function pe(_t,gt){if(_t.key)gt.keyActor.appendValue(null),gt.keyCtr.appendValue(null),gt.keyStr.appendValue(_t.key);else if(_t.elemId==="_head"&&_t.insert)gt.keyActor.appendValue(null),gt.keyCtr.appendValue(0),gt.keyStr.appendValue(null);else if(_t.elemId&&_t.elemId.actorNum>=0&&_t.elemId.counter>0)gt.keyActor.appendValue(_t.elemId.actorNum),gt.keyCtr.appendValue(_t.elemId.counter),gt.keyStr.appendValue(null);else throw new RangeError(`Unexpected operation key: ${JSON.stringify(_t)}`)}function Ce(_t,gt){let rt=Ot.indexOf(_t.action);if(rt>=0)gt.action.appendValue(rt);else if(typeof _t.action=="number")gt.action.appendValue(_t.action);else throw new RangeError(`Unexpected operation action: ${_t.action}`)}function Ie(_t){switch(_t.datatype){case"counter":return[It.COUNTER,_t.value];case"timestamp":return[It.TIMESTAMP,_t.value];case"uint":return[It.LEB128_UINT,_t.value];case"int":return[It.LEB128_INT,_t.value];case"float64":{let gt=new ArrayBuffer(8);return new DataView(gt).setFloat64(0,_t.value,!0),[It.IEEE754,new Uint8Array(gt)]}default:if(Number.isInteger(_t.value)&&_t.value<=Number.MAX_SAFE_INTEGER&&_t.value>=Number.MIN_SAFE_INTEGER)return[It.LEB128_INT,_t.value];{let gt=new ArrayBuffer(8);return new DataView(gt).setFloat64(0,_t.value,!0),[It.IEEE754,new Uint8Array(gt)]}}}function Ve(_t,gt){if(_t.action!=="set"&&_t.action!=="inc"||_t.value===null)gt.valLen.appendValue(It.NULL);else if(_t.value===!1)gt.valLen.appendValue(It.FALSE);else if(_t.value===!0)gt.valLen.appendValue(It.TRUE);else if(typeof _t.value=="string"){let rt=gt.valRaw.appendRawString(_t.value);gt.valLen.appendValue(rt<<4|It.UTF8)}else if(ArrayBuffer.isView(_t.value)){let rt=gt.valRaw.appendRawBytes(new Uint8Array(_t.value.buffer));gt.valLen.appendValue(rt<<4|It.BYTES)}else if(typeof _t.value=="number"){let[rt,F]=Ie(_t),st;rt===It.LEB128_UINT?st=gt.valRaw.appendUint53(F):rt===It.IEEE754?st=gt.valRaw.appendRawBytes(F):st=gt.valRaw.appendInt53(F),gt.valLen.appendValue(st<<4|rt)}else if(typeof _t.datatype=="number"&&_t.datatype>=It.MIN_UNKNOWN&&_t.datatype<=It.MAX_UNKNOWN&&_t.value instanceof Uint8Array){let rt=gt.valRaw.appendRawBytes(_t.value);gt.valLen.appendValue(rt<<4|_t.datatype)}else throw _t.datatype?new RangeError(`Unknown datatype ${_t.datatype} for value ${_t.value}`):new RangeError(`Unsupported value in operation: ${_t.value}`)}function We(_t,gt){if(_t===It.NULL)return{value:null};if(_t===It.FALSE)return{value:!1};if(_t===It.TRUE)return{value:!0};if(_t%16===It.UTF8)return{value:g(gt)};if(_t%16===It.LEB128_UINT)return{value:new C(gt).readUint53(),datatype:"uint"};if(_t%16===It.LEB128_INT)return{value:new C(gt).readInt53(),datatype:"int"};if(_t%16===It.IEEE754){let rt=new DataView(gt.buffer,gt.byteOffset,gt.byteLength);if(gt.byteLength===8)return{value:rt.getFloat64(0,!0),datatype:"float64"};throw new RangeError(`Invalid length for floating point number: ${gt.byteLength}`)}else return _t%16===It.COUNTER?{value:new C(gt).readInt53(),datatype:"counter"}:_t%16===It.TIMESTAMP?{value:new C(gt).readInt53(),datatype:"timestamp"}:{value:gt,datatype:_t%16}}function we(_t,gt,rt,F){let{columnId:st,columnName:wt,decoder:Ct}=_t[gt];if(st%8===V.VALUE_LEN&&gt+1<_t.length&&_t[gt+1].columnId===st+1){let Ut=Ct.readValue(),Wt=_t[gt+1].decoder.readRawBytes(Ut>>4),{value:xe,datatype:te}=We(Ut,Wt);return F[wt]=xe,te&&(F[wt+"_datatype"]=te),2}else if(st%8===V.ACTOR_ID){let Ut=Ct.readValue();if(Ut===null)F[wt]=null;else{if(!rt[Ut])throw new RangeError(`No actor index ${Ut}`);F[wt]=rt[Ut]}}else F[wt]=Ct.readValue();return 1}function Se(_t,gt){let rt={objActor:new a("uint"),objCtr:new a("uint"),keyActor:new a("uint"),keyCtr:new X,keyStr:new a("utf8"),insert:new j,action:new a("uint"),valLen:new a("uint"),valRaw:new m,chldActor:new a("uint"),chldCtr:new X};gt?(rt.idActor=new a("uint"),rt.idCtr=new X,rt.succNum=new a("uint"),rt.succActor=new a("uint"),rt.succCtr=new X):(rt.predNum=new a("uint"),rt.predCtr=new X,rt.predActor=new a("uint"));for(let st of _t)if(de(st,rt),pe(st,rt),rt.insert.appendValue(!!st.insert),Ce(st,rt),Ve(st,rt),st.child&&st.child.counter?(rt.chldActor.appendValue(st.child.actorNum),rt.chldCtr.appendValue(st.child.counter)):(rt.chldActor.appendValue(null),rt.chldCtr.appendValue(null)),gt){rt.idActor.appendValue(st.id.actorNum),rt.idCtr.appendValue(st.id.counter),rt.succNum.appendValue(st.succ.length),st.succ.sort(ae);for(let wt=0;wt<st.succ.length;wt++)rt.succActor.appendValue(st.succ[wt].actorNum),rt.succCtr.appendValue(st.succ[wt].counter)}else{rt.predNum.appendValue(st.pred.length),st.pred.sort(ae);for(let wt=0;wt<st.pred.length;wt++)rt.predActor.appendValue(st.pred[wt].actorNum),rt.predCtr.appendValue(st.pred[wt].counter)}let F=[];for(let{columnName:st,columnId:wt}of gt?Yt:vt)rt[st]&&F.push({columnId:wt,columnName:st,encoder:rt[st]});return F.sort((st,wt)=>st.columnId-wt.columnId)}function Qe(_t,gt){return gt===void 0?typeof _t=="string"||typeof _t=="boolean"||_t===null:typeof _t=="number"}function Ke(_t,gt,rt){let F=gt,st=[];for(let wt of _t)if(wt.action==="set"&&wt.values&&wt.insert){if(wt.pred.length!==0)throw new RangeError("multi-insert pred must be empty");let Ct=wt.elemId,Ut=wt.datatype;for(let Wt of wt.values){if(!Qe(Wt,Ut))throw new RangeError(`Decode failed: bad value/datatype association (${Wt},${Ut})`);st.push({action:"set",obj:wt.obj,elemId:Ct,datatype:Ut,value:Wt,pred:[],insert:!0}),Ct=`${F}@${rt}`,F+=1}}else if(wt.action==="del"&&wt.multiOp>1){if(wt.pred.length!==1)throw new RangeError("multiOp deletion must have exactly one pred");let Ct=s(wt.elemId),Ut=s(wt.pred[0]);for(let Wt=0;Wt<wt.multiOp;Wt++){let xe=`${Ct.counter+Wt}@${Ct.actorId}`,te=[`${Ut.counter+Wt}@${Ut.actorId}`];st.push({action:"del",obj:wt.obj,elemId:xe,pred:te}),F+=1}}else st.push(wt),F+=1;return st}function Ze(_t,gt){let rt=[];for(let F of _t){let st=F.objCtr===null?"_root":`${F.objCtr}@${F.objActor}`,wt=F.keyStr?void 0:F.keyCtr===0?"_head":`${F.keyCtr}@${F.keyActor}`,Ct=Ot[F.action]||F.action,Ut=wt?{obj:st,elemId:wt,action:Ct}:{obj:st,key:F.keyStr,action:Ct};if(Ut.insert=!!F.insert,(Ot[F.action]==="set"||Ot[F.action]==="inc")&&(Ut.value=F.valLen,F.valLen_datatype&&(Ut.datatype=F.valLen_datatype)),!!F.chldCtr!=!!F.chldActor)throw new RangeError(`Mismatched child columns: ${F.chldCtr} and ${F.chldActor}`);F.chldCtr!==null&&(Ut.child=`${F.chldCtr}@${F.chldActor}`),gt?(Ut.id=`${F.idCtr}@${F.idActor}`,Ut.succ=F.succNum.map(Wt=>`${Wt.succCtr}@${Wt.succActor}`),vr(F.succNum.map(Wt=>({counter:Wt.succCtr,actorId:Wt.succActor})))):(Ut.pred=F.predNum.map(Wt=>`${Wt.predCtr}@${Wt.predActor}`),vr(F.predNum.map(Wt=>({counter:Wt.predCtr,actorId:Wt.predActor})))),rt.push(Ut)}return rt}function vr(_t){let gt=null;for(let rt of _t){if(gt&&ae(gt,rt)!==-1)throw new RangeError("operation IDs are not in ascending order");gt=rt}}function Pr(_t){return(_t&7)===V.INT_DELTA?new X:(_t&7)===V.BOOLEAN?new j:(_t&7)===V.STRING_RLE?new a("utf8"):(_t&7)===V.VALUE_RAW?new m:new a("uint")}function Cr(_t,gt){return(_t&7)===V.INT_DELTA?new w(gt):(_t&7)===V.BOOLEAN?new tt(gt):(_t&7)===V.STRING_RLE?new H("utf8",gt):(_t&7)===V.VALUE_RAW?new C(gt):new H("uint",gt)}function et(_t,gt){let rt=new Uint8Array(0),F=[],st=0,wt=0;for(;st<_t.length||wt<gt.length;)if(st===_t.length||wt<gt.length&&gt[wt].columnId<_t[st].columnId){let{columnId:Ct,columnName:Ut}=gt[wt];F.push({columnId:Ct,columnName:Ut,decoder:Cr(Ct,rt)}),wt++}else if(wt===gt.length||_t[st].columnId<gt[wt].columnId){let{columnId:Ct,buffer:Ut}=_t[st];F.push({columnId:Ct,decoder:Cr(Ct,Ut)}),st++}else{let{columnId:Ct,buffer:Ut}=_t[st],{columnName:Wt}=gt[wt];F.push({columnId:Ct,columnName:Wt,decoder:Cr(Ct,Ut)}),st++,wt++}return F}function k(_t,gt,rt){_t=et(_t,rt);let F=[];for(;_t.some(st=>!st.decoder.done);){let st={},wt=0;for(;wt<_t.length;){let Ct=_t[wt].columnId,Ut=Ct>>4,Wt=1;for(;wt+Wt<_t.length&&_t[wt+Wt].columnId>>4===Ut;)Wt++;if(Ct%8===V.GROUP_CARD){let xe=[],te=_t[wt].decoder.readValue();for(let ve=0;ve<te;ve++){let Re={};for(let sr=1;sr<Wt;sr++)we(_t,wt+sr,gt,Re);xe.push(Re)}st[_t[wt].columnName]=xe,wt+=Wt}else wt+=we(_t,wt,gt,st)}F.push(st)}return F}function Z(_t){let gt=(-1^lt)>>>0,rt=-1,F=[],st=_t.readUint53();for(let wt=0;wt<st;wt++){let Ct=_t.readUint53(),Ut=_t.readUint53();if((Ct&gt)<=(rt&gt))throw new RangeError("Columns must be in ascending order");rt=Ct,F.push({columnId:Ct,bufferLen:Ut})}return F}function se(_t,gt){let rt=gt.filter(F=>F.encoder.buffer.byteLength>0);_t.appendUint53(rt.length);for(let F of rt)_t.appendUint53(F.columnId),_t.appendUint53(F.encoder.buffer.byteLength)}function Ee(_t){let gt=_t.readUint53(),rt=[];for(let Ct=0;Ct<gt;Ct++)rt.push(E(_t.readRawBytes(32)));let F={actor:_t.readHexString(),seq:_t.readUint53(),startOp:_t.readUint53(),time:_t.readInt53(),message:_t.readPrefixedString(),deps:rt},st=[F.actor],wt=_t.readUint53();for(let Ct=0;Ct<wt;Ct++)st.push(_t.readHexString());return F.actorIds=st,F}function rr(_t,gt){let rt=N.byteLength+4+1+5,F=new m;F.appendRawBytes(new Uint8Array(rt)),gt(F);let st=F.buffer,wt=new m;wt.appendByte(_t),wt.appendUint53(st.byteLength-rt);let Ct=wt.buffer,Ut=new J;Ut.update(Ct),Ut.update(st.subarray(rt));let Wt=Ut.digest(),xe=Wt.subarray(0,4);return st.set(N,rt-Ct.byteLength-4-N.byteLength),st.set(xe,rt-Ct.byteLength-4),st.set(Ct,rt-Ct.byteLength),{hash:Wt,bytes:st.subarray(rt-Ct.byteLength-4-N.byteLength)}}function fr(_t,gt){if(!p(_t.readRawBytes(N.byteLength),N))throw new RangeError("Data does not begin with magic bytes 85 6f 4a 83");let rt=_t.readRawBytes(4),F=_t.offset,st=_t.readByte(),wt=_t.readUint53(),Ct={chunkType:st,chunkLength:wt,chunkData:_t.readRawBytes(wt)};if(gt){let Ut=new J;Ut.update(_t.buf.subarray(F,_t.offset));let Wt=Ut.digest();if(!p(Wt.subarray(0,4),rt))throw new RangeError("checksum does not match data");Ct.hash=E(Wt)}return Ct}function yr(_t){let{changes:gt,actorIds:rt}=He([_t],!0),F=gt[0],{hash:st,bytes:wt}=rr(at,Ut=>{if(!Array.isArray(F.deps))throw new TypeError("deps is not an array");Ut.appendUint53(F.deps.length);for(let xe of F.deps.slice().sort())Ut.appendRawBytes(y(xe));Ut.appendHexString(F.actor),Ut.appendUint53(F.seq),Ut.appendUint53(F.startOp),Ut.appendInt53(F.time),Ut.appendPrefixedString(F.message||""),Ut.appendUint53(rt.length-1);for(let xe of rt.slice(1))Ut.appendHexString(xe);let Wt=Se(F.ops,!1);se(Ut,Wt);for(let xe of Wt)Ut.appendRawBytes(xe.encoder.buffer);F.extraBytes&&Ut.appendRawBytes(F.extraBytes)}),Ct=E(st);if(_t.hash&&_t.hash!==Ct)throw new RangeError(`Change hash does not match encoding: ${_t.hash} != ${Ct}`);return wt.byteLength>=U?Lr(wt):wt}function ur(_t){_t[8]===q&&(_t=Sr(_t));let gt=new C(_t),rt=fr(gt,!0),F=new C(rt.chunkData);if(!gt.done)throw new RangeError("Encoded change has trailing data");if(rt.chunkType!==at)throw new RangeError(`Unexpected chunk type: ${rt.chunkType}`);let st=Ee(F),wt=Z(F);for(let Ct=0;Ct<wt.length;Ct++){if(wt[Ct].columnId&lt)throw new RangeError("change must not contain deflated columns");wt[Ct].buffer=F.readRawBytes(wt[Ct].bufferLen)}if(!F.done){let Ct=F.buf.byteLength-F.offset;st.extraBytes=F.readRawBytes(Ct)}return st.columns=wt,st.hash=rt.hash,st}function er(_t){let gt=ur(_t);return gt.ops=Ze(k(gt.columns,gt.actorIds,vt),!1),delete gt.actorIds,delete gt.columns,gt}function Wr(_t,gt){_t[8]===q&&(_t=Sr(_t));let rt=fr(new C(_t),gt);if(rt.chunkType!==at)throw new RangeError("Buffer chunk type is not a change");let F=Ee(new C(rt.chunkData));return F.change=_t,gt&&(F.hash=rt.hash),F}function Lr(_t){let gt=fr(new C(_t),!1);if(gt.chunkType!==at)throw new RangeError(`Unexpected chunk type: ${gt.chunkType}`);let rt=n.deflateRaw(gt.chunkData),F=new m;return F.appendRawBytes(_t.subarray(0,8)),F.appendByte(q),F.appendUint53(rt.byteLength),F.appendRawBytes(rt),F.buffer}function Sr(_t){let gt=fr(new C(_t),!1);if(gt.chunkType!==q)throw new RangeError(`Unexpected chunk type: ${gt.chunkType}`);let rt=n.inflateRaw(gt.chunkData),F=new m;return F.appendRawBytes(_t.subarray(0,8)),F.appendByte(at),F.appendUint53(rt.byteLength),F.appendRawBytes(rt),F.buffer}function L(_t){let gt=new C(_t),rt=[],F=0;for(;!gt.done;)fr(gt,!1),rt.push(_t.subarray(F,gt.offset)),F=gt.offset;return rt}function f(_t){let gt=[];for(let rt of _t)for(let F of L(rt))F[8]===Q?gt=gt.concat(zt(F)):(F[8]===at||F[8]===q)&&gt.push(er(F));return gt}function S(_t,gt){if(_t===gt)return 0;if(_t==="_root")return-1;if(gt==="_root")return 1;let rt=s(_t),F=s(gt);return rt.counter<F.counter?-1:rt.counter>F.counter?1:rt.actorId<F.actorId?-1:rt.actorId>F.actorId?1:0}function W(_t,gt){let rt={};for(let st of _t){if(st.ops=[],rt[st.actor]||(rt[st.actor]=[]),st.seq!==rt[st.actor].length+1)throw new RangeError(`Expected seq = ${rt[st.actor].length+1}, got ${st.seq}`);if(st.seq>1&&rt[st.actor][st.seq-2].maxOp>st.maxOp)throw new RangeError("maxOp must increase monotonically per actor");rt[st.actor].push(st)}let F={};for(let st of gt){if(st.action==="del")throw new RangeError("document should not contain del operations");st.pred=F[st.id]?F[st.id].pred:[],F[st.id]=st;for(let wt of st.succ){if(!F[wt])if(st.elemId){let Ct=st.insert?st.id:st.elemId;F[wt]={id:wt,action:"del",obj:st.obj,elemId:Ct,pred:[]}}else F[wt]={id:wt,action:"del",obj:st.obj,key:st.key,pred:[]};F[wt].pred.push(st.id)}delete st.succ}for(let st of Object.values(F))st.action==="del"&&gt.push(st);for(let st of gt){let{counter:wt,actorId:Ct}=s(st.id),Ut=rt[Ct],Wt=0,xe=Ut.length;for(;Wt<xe;){let te=Math.floor((Wt+xe)/2);Ut[te].maxOp<wt?Wt=te+1:xe=te}if(Wt>=Ut.length)throw new RangeError(`Operation ID ${st.id} outside of allowed range`);Ut[Wt].ops.push(st)}for(let st of _t){st.ops.sort((wt,Ct)=>S(wt.id,Ct.id)),st.startOp=st.maxOp-st.ops.length+1,delete st.maxOp;for(let wt=0;wt<st.ops.length;wt++){let Ct=st.ops[wt],Ut=`${st.startOp+wt}@${st.actor}`;if(Ct.id!==Ut)throw new RangeError(`Expected opId ${Ut}, got ${Ct.id}`);delete Ct.id}}}function Bt(_t,gt){let rt={};for(let Ct=0;Ct<_t.length;Ct++){let Ut=_t[Ct];Ut.deps=[];for(let Wt of Ut.depsNum.map(xe=>xe.depsIndex)){if(!_t[Wt]||!_t[Wt].hash)throw new RangeError(`No hash for index ${Wt} while processing index ${Ct}`);let xe=_t[Wt].hash;Ut.deps.push(xe),rt[xe]&&delete rt[xe]}if(Ut.deps.sort(),delete Ut.depsNum,Ut.extraLen_datatype!==It.BYTES)throw new RangeError(`Bad datatype for extra bytes: ${It.BYTES}`);Ut.extraBytes=Ut.extraLen,delete Ut.extraLen_datatype,_t[Ct]=er(yr(Ut)),rt[_t[Ct].hash]=!0}let F=Object.keys(rt).sort(),st=F.length===gt.length,wt=0;for(;st&&wt<F.length;)st=F[wt]===gt[wt],wt++;if(!st)throw new RangeError(`Mismatched heads hashes: expected ${gt.join(", ")}, got ${F.join(", ")}`)}function Nt(_t){let{changesColumns:gt,opsColumns:rt,actorIds:F,heads:st,headsIndexes:wt,extraBytes:Ct}=_t;for(let Ut of gt)Lt(Ut);for(let Ut of rt)Lt(Ut);return rr(Q,Ut=>{Ut.appendUint53(F.length);for(let Wt of F)Ut.appendHexString(Wt);Ut.appendUint53(st.length);for(let Wt of st.sort())Ut.appendRawBytes(y(Wt));se(Ut,gt),se(Ut,rt);for(let Wt of gt)Ut.appendRawBytes(Wt.encoder.buffer);for(let Wt of rt)Ut.appendRawBytes(Wt.encoder.buffer);for(let Wt of wt)Ut.appendUint53(Wt);Ct&&Ut.appendRawBytes(Ct)}).bytes}function nt(_t){let gt=new C(_t),rt=fr(gt,!0),F=new C(rt.chunkData);if(!gt.done)throw new RangeError("Encoded document has trailing data");if(rt.chunkType!==Q)throw new RangeError(`Unexpected chunk type: ${rt.chunkType}`);let st=[],wt=F.readUint53();for(let Re=0;Re<wt;Re++)st.push(F.readHexString());let Ct=[],Ut=[],Wt=F.readUint53();for(let Re=0;Re<Wt;Re++)Ct.push(E(F.readRawBytes(32)));let xe=Z(F),te=Z(F);for(let Re=0;Re<xe.length;Re++)xe[Re].buffer=F.readRawBytes(xe[Re].bufferLen),Be(xe[Re]);for(let Re=0;Re<te.length;Re++)te[Re].buffer=F.readRawBytes(te[Re].bufferLen),Be(te[Re]);if(!F.done)for(let Re=0;Re<Wt;Re++)Ut.push(F.readUint53());let ve=F.readRawBytes(F.buf.byteLength-F.offset);return{changesColumns:xe,opsColumns:te,actorIds:st,heads:Ct,headsIndexes:Ut,extraBytes:ve}}function zt(_t){let{changesColumns:gt,opsColumns:rt,actorIds:F,heads:st}=nt(_t),wt=k(gt,F,Xt),Ct=Ze(k(rt,F,Yt),!0);return W(wt,Ct),Bt(wt,st),wt}function Lt(_t){_t.encoder.buffer.byteLength>=U&&(_t.encoder={buffer:n.deflateRaw(_t.encoder.buffer)},_t.columnId|=lt)}function Be(_t){_t.columnId&lt&&(_t.buffer=n.inflateRaw(_t.buffer),_t.columnId^=lt)}e.exports={COLUMN_TYPE:V,VALUE_TYPE:It,ACTIONS:Ot,OBJECT_TYPE:yt,DOC_OPS_COLUMNS:Yt,CHANGE_COLUMNS:vt,DOCUMENT_COLUMNS:Xt,encoderByColumnId:Pr,decoderByColumnId:Cr,makeDecoders:et,decodeValue:We,splitContainers:L,encodeChange:yr,decodeChangeColumns:ur,decodeChange:er,decodeChangeMeta:Wr,decodeChanges:f,encodeDocumentHeader:Nt,decodeDocumentHeader:nt,decodeDocument:zt}}),N6=ce((t,e)=>{var{parseOpId:n,copyObject:u}=Us(),{COLUMN_TYPE:s,VALUE_TYPE:p,ACTIONS:g,OBJECT_TYPE:y,DOC_OPS_COLUMNS:E,CHANGE_COLUMNS:m,DOCUMENT_COLUMNS:C,encoderByColumnId:a,decoderByColumnId:H,makeDecoders:X,decodeValue:w,encodeChange:j,decodeChangeColumns:tt,decodeChangeMeta:J,decodeChanges:N,decodeDocumentHeader:Q,encodeDocumentHeader:at}=$h(),q=600,U=10,V=7,lt=Math.floor(U*q/8),It=0,Ot=1,yt=2,Et=3,vt=4,Yt=5,Xt=6,re=7,ae=8,He=9,de=10,pe=13,Ce=14,Ie=15,Ve=13,We=14,we=15,Se=m.filter(rt=>["predNum","predActor","predCtr"].includes(rt.columnName)).map(rt=>rt.columnId);function Qe(rt,F,st){if(F.length===1)rt[F[0]]=st;else{let wt=Object.assign({},rt[F[0]]);Qe(wt,F.slice(1),st),rt[F[0]]=wt}}function Ke(rt,F,st,wt){for(let mr of F)mr.decoder.reset();let{objActor:Ct,objCtr:Ut,keyActor:Wt,keyCtr:xe,keyStr:te,idActor:ve,idCtr:Re,insert:sr}=rt,[O,le,,,Kt,he,kt,ne,Oe,,,,,_e]=F.map(mr=>mr.decoder),Te=0,Ue=0,tr=!1,lr=null,ar=null,Ar=null,jr=null,ln=null,cn=null,Mr=0;if(Ut!==null&&!wt)for(;(!le.done||!O.done||!Oe.done)&&(ar=le.readValue(),lr=st[O.readValue()],Oe.skipValues(1),ar===null||!lr||ar<Ut||ar===Ut&&lr<Ct);)Te+=1;if((ar!==Ut||lr!==Ct)&&!wt)return{found:!0,skipCount:Te,visibleCount:Ue};if(te!==null){for(Kt.skipValues(Te);!Kt.done;){let mr=O.readValue();if(lr=mr===null?null:st[mr],ar=le.readValue(),ln=Kt.readValue(),ln!==null&&ln<te&&ar===Ut&&lr===Ct)Te+=1;else break}return{found:!0,skipCount:Te,visibleCount:Ue}}if(kt.skipValues(Te),he.skipValues(Te),ne.skipValues(Te),_e.skipValues(Te),jr=kt.readValue(),Ar=st[he.readValue()],cn=ne.readValue(),Mr=_e.readValue(),sr){if(!wt&&xe!==null&&xe>0&&Wt!==null){for(Te+=1;!kt.done&&!he.done&&(jr!==xe||Ar!==Wt)&&(cn&&(tr=!1),Mr===0&&!tr&&(Ue+=1,tr=!0),jr=kt.readValue(),Ar=st[he.readValue()],ar=le.readValue(),lr=st[O.readValue()],cn=ne.readValue(),Mr=_e.readValue(),ar===Ut&&lr===Ct);)Te+=1;if(ar!==Ut||lr!==Ct||jr!==xe||Ar!==Wt||!cn)return{found:!1,skipCount:Te,visibleCount:Ue};if(cn&&(tr=!1),Mr===0&&!tr&&(Ue+=1,tr=!0),kt.done||he.done)return{found:!0,skipCount:Te,visibleCount:Ue};jr=kt.readValue(),Ar=st[he.readValue()],ar=le.readValue(),lr=st[O.readValue()],cn=ne.readValue(),Mr=_e.readValue()}for(;(!cn||jr>Re||jr===Re&&Ar>ve)&&ar===Ut&&lr===Ct&&(Te+=1,cn&&(tr=!1),Mr===0&&!tr&&(Ue+=1,tr=!0),!kt.done&&!he.done);)jr=kt.readValue(),Ar=st[he.readValue()],ar=le.readValue(),lr=st[O.readValue()],cn=ne.readValue(),Mr=_e.readValue()}else if(xe!==null&&xe>0&&Wt!==null){for(;(!cn||jr!==xe||Ar!==Wt)&&ar===Ut&&lr===Ct&&(Te+=1,cn&&(tr=!1),Mr===0&&!tr&&(Ue+=1,tr=!0),!kt.done&&!he.done);)jr=kt.readValue(),Ar=st[he.readValue()],ar=le.readValue(),lr=st[O.readValue()],cn=ne.readValue(),Mr=_e.readValue();if(ar!==Ut||lr!==Ct||jr!==xe||Ar!==Wt||!cn)return{found:!1,skipCount:Te,visibleCount:Ue}}return{found:!0,skipCount:Te,visibleCount:Ue}}function Ze(rt,F,st,wt){let Ct=rt.blocks[F],Ut=rt.blocks[F+1];return Ct.lastObjectActor!==st||Ct.lastObjectCtr!==wt||Ct.numVisible===void 0?0:Ct.lastVisibleActor===Ut.firstVisibleActor&&Ct.lastVisibleActor!==void 0&&Ct.lastVisibleCtr===Ut.firstVisibleCtr&&Ct.lastVisibleCtr!==void 0?Ct.numVisible-1:Ct.numVisible}function vr(rt,F){let{objActor:st,objActorNum:wt,objCtr:Ct,keyActor:Ut,keyCtr:Wt,keyStr:xe}=F,te=0,ve=0;if(Ct!==null)for(;te<rt.blocks.length-1;){let Re=rt.blocks[te].lastObjectActor===void 0?void 0:rt.actorIds[rt.blocks[te].lastObjectActor],sr=rt.blocks[te].lastObjectCtr;if(sr===null||sr<Ct||sr===Ct&&Re<st)te++;else break}if(xe!==null){for(;te<rt.blocks.length-1;){let{lastObjectActor:sr,lastObjectCtr:O,lastKey:le}=rt.blocks[te];if(Ct===O&&wt===sr&&le!==void 0&&le<xe)te++;else break}let{skipCount:Re}=Ke(F,rt.blocks[te].columns,rt.actorIds,!1);return{blockIndex:te,skipCount:Re,visibleCount:0}}else{let Re=Wt===null||Wt===0||Ut===null,sr=Ut===null?null:rt.actorIds.indexOf(Ut),O=!1;for(;;){if(!Re&&!O)for(;te<rt.blocks.length-1&&rt.blocks[te].lastObjectActor===wt&&rt.blocks[te].lastObjectCtr===Ct&&!Cr(rt.blocks[te].bloom,sr,Wt);){if(rt.blocks[te].lastObjectCtr>Ct)throw new RangeError(`Reference element not found: ${Wt}@${Ut}`);ve+=Ze(rt,te,wt,Ct),te++}let{found:le,skipCount:Kt,visibleCount:he}=Ke(F,rt.blocks[te].columns,rt.actorIds,O);if(te===rt.blocks.length-1||rt.blocks[te].lastObjectActor!==wt||rt.blocks[te].lastObjectCtr!==Ct){if(le)return{blockIndex:te,skipCount:Kt,visibleCount:ve+he};throw new RangeError(`Reference element not found: ${Wt}@${Ut}`)}else if(le&&Kt<rt.blocks[te].numOps)return{blockIndex:te,skipCount:Kt,visibleCount:ve+he};O=le&&F.insert,ve+=Ze(rt,te,wt,Ct),te++}}}function Pr(rt,F,st){let wt=8*rt.byteLength,Ct=st%wt,Ut=F%wt,Wt=((st^F)*16777619>>>0)%wt;for(let xe=0;xe<V;xe++)rt[Ct>>>3]|=1<<(Ct&7),Ct=(Ct+Ut)%wt,Ut=(Ut+Wt)%wt}function Cr(rt,F,st){let wt=8*rt.byteLength,Ct=st%wt,Ut=F%wt,Wt=((st^F)*16777619>>>0)%wt;for(let xe=0;xe<V;xe++){if(!(rt[Ct>>>3]&1<<(Ct&7)))return!1;Ct=(Ct+Ut)%wt,Ut=(Ut+Wt)%wt}return!0}function et(rt){rt.bloom=new Uint8Array(lt),rt.numOps=0,rt.lastKey=void 0,rt.numVisible=void 0,rt.lastObjectActor=void 0,rt.lastObjectCtr=void 0,rt.firstVisibleActor=void 0,rt.firstVisibleCtr=void 0,rt.lastVisibleActor=void 0,rt.lastVisibleCtr=void 0;for(let Re of rt.columns)Re.decoder.reset();let[F,st,wt,Ct,Ut,Wt,xe,te,,,,,,ve]=rt.columns.map(Re=>Re.decoder);for(;!xe.done;){rt.numOps+=1;let Re=F.readValue(),sr=st.readValue(),O=wt.readValue(),le=Ct.readValue(),Kt=Ut.readValue(),he=Wt.readValue(),kt=xe.readValue(),ne=te.readValue(),Oe=ve.readValue();if((rt.lastObjectActor!==Re||rt.lastObjectCtr!==sr)&&(rt.numVisible=0,rt.lastObjectActor=Re,rt.lastObjectCtr=sr),Kt!==null)rt.lastKey=Kt;else if(ne||le!==null){rt.lastKey=void 0;let _e=ne?he:O,Te=ne?kt:le;Pr(rt.bloom,_e,Te),Oe===0&&(rt.firstVisibleActor===void 0&&(rt.firstVisibleActor=_e),rt.firstVisibleCtr===void 0&&(rt.firstVisibleCtr=Te),(rt.lastVisibleActor!==_e||rt.lastVisibleCtr!==Te)&&(rt.numVisible+=1,rt.lastVisibleActor=_e,rt.lastVisibleCtr=Te))}}}function k(rt,F,st,wt){if(F[vt]!==null)rt.lastObjectCtr===F[Ot]&&rt.lastObjectActor===F[It]&&(rt.lastKey===void 0||rt.lastKey<F[vt])&&(rt.lastKey=F[vt]);else{let Ct=F[re]?F[Yt]:F[yt],Ut=F[re]?F[Xt]:F[Et];Pr(rt.bloom,Ct,Ut),(F[Ve]===0||wt)&&(rt.firstVisibleActor===void 0&&(rt.firstVisibleActor=Ct),rt.firstVisibleCtr===void 0&&(rt.firstVisibleCtr=Ut),rt.lastVisibleActor=Ct,rt.lastVisibleCtr=Ut)}(rt.lastObjectCtr===void 0||F[It]!==null&&F[Ot]!==null&&(rt.lastObjectCtr===null||rt.lastObjectCtr<F[Ot]||rt.lastObjectCtr===F[Ot]&&st[rt.lastObjectActor]<st[F[It]]))&&(rt.lastObjectActor=F[It],rt.lastObjectCtr=F[Ot],rt.lastKey=F[vt]!==null?F[vt]:void 0,rt.numVisible=0)}function Z(rt){for(let Ct of rt.columns)Ct.decoder.reset();let F=Math.ceil(rt.numOps/(.8*q)),st=[],wt=0;for(let Ct=1;Ct<=F;Ct++){let Ut=Math.ceil(Ct*rt.numOps/F)-wt,Wt=rt.columns.map(te=>({columnId:te.columnId,encoder:a(te.columnId)}));Ee(Wt,rt.columns,Ut);let xe={columns:Wt.map(te=>{let ve=H(te.columnId,te.encoder.buffer);return{columnId:te.columnId,decoder:ve}})};et(xe),st.push(xe),wt+=Ut}return st}function se(rt){let F=rt[0].columns.map(st=>({columnId:st.columnId,encoder:a(st.columnId)}));for(let st of rt){for(let wt of st.columns)wt.decoder.reset();Ee(F,st.columns,st.numOps)}return F}function Ee(rt,F,st){if(st===0)return;let wt=0,Ct=-1,Ut=0,Wt=-1,xe=0;for(let te of rt){for(;wt<F.length&&F[wt].columnId<te.columnId;)wt++;let ve=null;wt<F.length&&F[wt].columnId===te.columnId&&F[wt].decoder.buf.byteLength>0&&(ve=F[wt].decoder);let Re=te.columnId>>4===Ct?Ut:st;if(te.columnId%8===s.GROUP_CARD)Ct=te.columnId>>4,ve?Ut=te.encoder.copyFrom(ve,{count:st,sumValues:!0}).sum:(te.encoder.appendValue(0,st),Ut=0);else if(te.columnId%8===s.VALUE_LEN)if(ve){if(wt+1===F.length||F[wt+1].columnId!==te.columnId+1)throw new RangeError("VALUE_LEN column without accompanying VALUE_RAW column");Wt=te.columnId+1,xe=te.encoder.copyFrom(ve,{count:Re,sumValues:!0,sumShift:4}).sum}else te.encoder.appendValue(null,Re),Wt=te.columnId+1,xe=0;else if(te.columnId%8===s.VALUE_RAW){if(te.columnId!==Wt)throw new RangeError("VALUE_RAW column without accompanying VALUE_LEN column");xe>0&&te.encoder.appendRawBytes(ve.readRawBytes(xe))}else if(ve)te.encoder.copyFrom(ve,{count:Re});else{let sr=te.columnId%8===s.BOOLEAN?!1:null;te.encoder.appendValue(sr,Re)}}}function rr(rt,F){let st=[],wt,Ct=-1,Ut=0,Wt=-1,xe=0;for(let te of rt){if(te.columnId%8===s.VALUE_RAW){if(te.columnId!==Wt)throw new RangeError("unexpected VALUE_RAW column");wt=te.decoder.readRawBytes(xe)}else if(te.columnId%8===s.GROUP_CARD)Ct=te.columnId>>4,Ut=te.decoder.readValue()||0,wt=Ut;else if(te.columnId>>4===Ct){wt=[],te.columnId%8===s.VALUE_LEN&&(Wt=te.columnId+1,xe=0);for(let ve=0;ve<Ut;ve++){let Re=te.decoder.readValue();te.columnId%8===s.ACTOR_ID&&F&&typeof Re=="number"&&(Re=F[Re]),te.columnId%8===s.VALUE_LEN&&(xe+=wt>>>4),wt.push(Re)}}else wt=te.decoder.readValue(),te.columnId%8===s.ACTOR_ID&&F&&typeof wt=="number"&&(wt=F[wt]),te.columnId%8===s.VALUE_LEN&&(Wt=te.columnId+1,xe=wt>>>4);st.push(wt)}return st}function fr(rt,F,st){let wt=0,Ct=-1,Ut=0;for(let Wt of rt){for(;wt<F.length&&F[wt].columnId<Wt.columnId;)wt++;if(wt<F.length&&F[wt].columnId===Wt.columnId){let xe=st[wt];if(Wt.columnId%8===s.GROUP_CARD)Ct=Wt.columnId>>4,Ut=xe,Wt.encoder.appendValue(xe);else if(Wt.columnId>>4===Ct){if(!Array.isArray(xe)||xe.length!==Ut)throw new RangeError("bad group value");for(let te of xe)Wt.encoder.appendValue(te)}else Wt.columnId%8===s.VALUE_RAW?xe&&Wt.encoder.appendRawBytes(xe):Wt.encoder.appendValue(xe)}else if(Wt.columnId%8===s.GROUP_CARD)Ct=Wt.columnId>>4,Ut=0,Wt.encoder.appendValue(0);else if(Wt.columnId%8!==s.VALUE_RAW){let xe=Wt.columnId>>4===Ct?Ut:1,te=null;Wt.columnId%8===s.BOOLEAN&&(te=!1),Wt.columnId%8===s.VALUE_LEN&&(te=0),Wt.encoder.appendValue(te,xe)}}}function yr(rt,F){let st=rt.blocks[F];if(st.columns[ae].decoder.done){if(F===rt.blocks.length-1)return{docOp:null,blockIndex:F};F+=1,st=rt.blocks[F];for(let wt of st.columns)wt.decoder.reset();return{docOp:rr(st.columns),blockIndex:F}}else return{docOp:rr(st.columns),blockIndex:F}}function ur(rt,F){for(;F.changeIndex<F.changes.length-1&&(!F.columns||F.columns[ae].decoder.done);){F.changeIndex+=1;let wt=F.changes[F.changeIndex];F.columns=X(wt.columns,m),F.opCtr=wt.startOp,F.columns[ae].decoder.done&&(wt.maxOp=wt.startOp-1),Bt(rt,F.columns);let{actorIds:Ct,actorTable:Ut}=Nt(rt.actorIds,wt);rt.actorIds=Ct,F.actorTable=Ut,F.actorIndex=rt.actorIds.indexOf(wt.actorIds[0])}if(F.columns[ae].decoder.done){F.done=!0,F.nextOp=null;return}F.nextOp=rr(F.columns,F.actorTable),F.nextOp[Yt]=F.actorIndex,F.nextOp[Xt]=F.opCtr,F.changes[F.changeIndex].maxOp=F.opCtr,F.opCtr>rt.maxOp&&(rt.maxOp=F.opCtr),F.opCtr+=1;let st=F.nextOp;if(st[Ot]===null&&st[It]!==null||st[Ot]!==null&&st[It]===null)throw new RangeError(`Mismatched object reference: (${st[Ot]}, ${st[It]})`);if(st[Et]===null&&st[yt]!==null||st[Et]===0&&st[yt]!==null||st[Et]>0&&st[yt]===null)throw new RangeError(`Mismatched operation key: (${st[Et]}, ${st[yt]})`)}function er(rt,F){return F==="list"||F==="text"?{objectId:rt,type:F,edits:[]}:{objectId:rt,type:F,props:{}}}function Wr(rt,F,st=1){let wt=n(rt),Ct=n(F);return wt.actorId===Ct.actorId&&wt.counter+st===Ct.counter}function Lr(rt,F){if(rt.length===0){rt.push(F);return}let st=rt[rt.length-1];st.action==="insert"&&F.action==="insert"&&st.index===F.index-1&&st.value.type==="value"&&F.value.type==="value"&&st.elemId===st.opId&&F.elemId===F.opId&&Wr(st.elemId,F.elemId,1)&&st.value.datatype===F.value.datatype&&typeof st.value.value==typeof F.value.value?(st.action="multi-insert",F.value.datatype&&(st.datatype=F.value.datatype),st.values=[st.value.value,F.value.value],delete st.value,delete st.opId):st.action==="multi-insert"&&F.action==="insert"&&st.index+st.values.length===F.index&&F.value.type==="value"&&F.elemId===F.opId&&Wr(st.elemId,F.elemId,st.values.length)&&st.datatype===F.value.datatype&&typeof st.values[0]==typeof F.value.value?st.values.push(F.value.value):st.action==="remove"&&F.action==="remove"&&st.index===F.index?st.count+=F.count:rt.push(F)}function Sr(rt,F,st,wt,Ct,Ut){let Wt=!1;if(Ut)for(;!Wt&&rt.length>0;){let xe=rt[rt.length-1];if((xe.action==="insert"||xe.action==="update")&&xe.index===F)rt.pop(),Wt=xe.action==="insert";else if(xe.action==="multi-insert"&&xe.index+xe.values.length-1===F)xe.values.pop(),Wt=!0;else break}Wt?Lr(rt,{action:"insert",index:F,elemId:st,opId:wt,value:Ct}):Lr(rt,{action:"update",index:F,opId:wt,value:Ct})}function L(rt,F,st){let wt=[];for(;rt.length>0;){let Ut=rt[rt.length-1];if(Ut.action==="insert"){if(Ut.index!==F)throw new RangeError("last edit has unexpected index");wt.unshift(rt.pop());break}else if(Ut.action==="update"){if(Ut.index!==F)throw new RangeError("last edit has unexpected index");wt.unshift(rt.pop())}else throw new RangeError("last edit has unexpected action")}let Ct=!0;for(let Ut of wt)Sr(rt,F,st,Ut.opId,Ut.value,Ct),Ct=!1}function f(rt,F,st,wt,Ct,Ut,Wt,xe){let te=!F,ve=wt[ae]<g.length?y[g[wt[ae]]]:null,Re=`${wt[Xt]}@${Ct.actorIds[wt[Yt]]}`,sr=wt[re]?wt[Yt]:wt[yt],O=wt[re]?wt[Xt]:wt[Et],le=wt[vt]?wt[vt]:`${O}@${Ct.actorIds[sr]}`;wt[ae]%2===0&&!Ct.objectMeta[Re]&&(Ct.objectMeta[Re]={parentObj:st,parentKey:le,opId:Re,type:ve,children:{}},Qe(Ct.objectMeta,[st,"children",le,Re],{objectId:Re,type:ve,props:{}}));let Kt=!Ut[le];Ut[le]||(Ut[le]={visibleOps:[],hasChild:!1});let he=xe!==void 0&&wt[Ve]>0;he||(Ut[le].visibleOps.push(wt),Ut[le].hasChild=Ut[le].hasChild||wt[ae]%2===0);let kt=Ct.objectMeta[st].children[le];if(Ut[le].hasChild||kt&&Object.keys(kt).length>0){let Te={};for(let Ue of Ut[le].visibleOps){let tr=`${Ue[Xt]}@${Ct.actorIds[Ue[Yt]]}`;if(g[Ue[ae]]==="set")Te[tr]=Object.assign({type:"value"},w(Ue[He],Ue[de]));else if(Ue[ae]%2===0){let lr=Ue[ae]<g.length?y[g[Ue[ae]]]:null;Te[tr]=er(tr,lr)}}Qe(Ct.objectMeta,[st,"children",le],Te)}let ne,Oe;if(he&&g[wt[ae]]==="set"&&(wt[He]&15)===p.COUNTER){Ut[le]||(Ut[le]={visibleOps:[],hasChild:!1}),Ut[le].counterStates||(Ut[le].counterStates={});let Te=Ut[le].counterStates,Ue={opId:Re,value:w(wt[He],wt[de]).value,succs:{}};for(let tr=0;tr<wt[Ve];tr++){let lr=`${wt[we][tr]}@${Ct.actorIds[wt[We][tr]]}`;Te[lr]=Ue,Ue.succs[lr]=!0}}else if(g[wt[ae]]==="inc"){if(!Ut[le]||!Ut[le].counterStates||!Ut[le].counterStates[Re])throw new RangeError(`increment operation ${Re} for unknown counter`);let Te=Ut[le].counterStates[Re];Te.value+=w(wt[He],wt[de]).value,delete Te.succs[Re],Object.keys(Te.succs).length===0&&(ne=Te.opId,Oe={type:"value",datatype:"counter",value:Te.value})}else he||(g[wt[ae]]==="set"?(ne=Re,Oe=Object.assign({type:"value"},w(wt[He],wt[de]))):wt[ae]%2===0&&(rt[Re]||(rt[Re]=er(Re,ve)),ne=Re,Oe=rt[Re]));rt[st]||(rt[st]=er(st,Ct.objectMeta[st].type));let _e=rt[st];if(wt[vt]===null)if(xe===0&&!te&&Ut[le].action==="insert"&&(Ut[le].action="update",L(_e.edits,Wt,le),F&&F.lastObjectActor===wt[It]&&F.lastObjectCtr===wt[Ot]&&(F.numVisible-=1)),Oe)if(!Ut[le].action&&(xe===void 0||te))Ut[le].action="insert",Lr(_e.edits,{action:"insert",index:Wt,elemId:le,opId:ne,value:Oe}),F&&F.lastObjectActor===wt[It]&&F.lastObjectCtr===wt[Ot]&&(F.numVisible+=1);else if(Ut[le].action==="remove"){let Te=_e.edits[_e.edits.length-1];if(Te.action!=="remove")throw new RangeError("last edit has unexpected type");Te.count>1?Te.count-=1:_e.edits.pop(),Ut[le].action="update",Sr(_e.edits,Wt,le,ne,Oe,!0),F&&F.lastObjectActor===wt[It]&&F.lastObjectCtr===wt[Ot]&&(F.numVisible+=1)}else Sr(_e.edits,Wt,le,ne,Oe,!Ut[le].action),Ut[le].action||(Ut[le].action="update");else xe===0&&!Ut[le].action&&(Ut[le].action="remove",Lr(_e.edits,{action:"remove",index:Wt,count:1}),F&&F.lastObjectActor===wt[It]&&F.lastObjectCtr===wt[Ot]&&(F.numVisible-=1));else(Oe||!te)&&((Kt||!_e.props[wt[vt]])&&(_e.props[wt[vt]]={}),Oe&&(_e.props[wt[vt]][ne]=Oe))}function S(rt,F,st,wt,Ct,Ut,Wt){let xe=wt.nextOp,te=xe[re],ve=xe[It],Re=xe[Ot],sr=ve===null?"_root":`${Re}@${Ct.actorIds[ve]}`,O=wt.actorIndex,le=Ct.actorIds[O],Kt=!1,he=!1,kt={},ne;({docOp:ne,blockIndex:Wt}=yr(Ct,Wt));let Oe=ne===null?0:1,_e=ne===null?0:ne[Ve],Te=null,Ue=[],tr=[],lr=[],ar=null;for(wt.objectIds.add(sr);;){if(Ue.length===0){Kt=!1;let mr=wt.nextOp;for(;!wt.done&&mr[Yt]===O&&mr[re]===te&&mr[It]===xe[It]&&mr[Ot]===xe[Ot];){let Nr=Ue.length>0?Ue[Ue.length-1]:null,gn=!1;for(let Kn=0;Kn<mr[pe];Kn++)for(let tn of Ue)mr[Ce][Kn]===tn[Yt]&&mr[Ie][Kn]===tn[Xt]&&(gn=!0);if(mr!==xe&&!(te&&Nr!==null&&mr[vt]===null&&mr[yt]===Nr[Yt]&&mr[Et]===Nr[Xt])&&!(!te&&Nr!==null&&mr[vt]!==null&&mr[vt]===Nr[vt]&&!gn)&&!(!te&&Nr!==null&&mr[vt]===null&&Nr[vt]===null&&mr[yt]===Nr[yt]&&mr[Et]===Nr[Et]&&!gn)&&!(!te&&Nr===null&&mr[vt]===null&&ne&&ne[re]&&ne[vt]===null&&ne[Yt]===mr[yt]&&ne[Xt]===mr[Et])&&!(!te&&Nr===null&&mr[vt]!==null&&ar!==null&&ar<mr[vt]))break;ar=mr!==null?mr[vt]:null,Ue.push(wt.nextOp),tr.push(wt.columns),lr.push(new Array(wt.nextOp[pe])),ur(Ct,wt),mr=wt.nextOp}}Ue.length>0&&(Te=Ue[0]);let Ar=ne&&ne[It]===Te[It]&&ne[Ot]===Te[Ot],jr=ne&&ne[vt]!==null&&ne[vt]===Te[vt],ln=ne&&ne[vt]===null&&Te[vt]===null&&(!ne[re]&&ne[yt]===Te[yt]&&ne[Et]===Te[Et]||ne[re]&&ne[Yt]===Te[yt]&&ne[Xt]===Te[Et]);if(Ue.length===0&&!(Ar&&(jr||ln)))break;let cn=!1,Mr=0;if(te||!Ar||ne[vt]===null&&Te[vt]!==null||ne[vt]!==null&&Te[vt]!==null&&Te[vt]<ne[vt]){if(Mr=Ue.length,!Ar&&!Kt&&Te[vt]===null&&!Te[re])throw new RangeError(`could not find list element with ID: ${Te[Et]}@${Ct.actorIds[Te[yt]]}`)}else if(jr||ln||Kt){for(let mr=0;mr<Ue.length;mr++){let Nr=Ue[mr];for(let gn=0;gn<Nr[pe];gn++)if(Nr[Ce][gn]===ne[Yt]&&Nr[Ie][gn]===ne[Xt]){let Kn=0;for(;Kn<ne[Ve]&&(ne[we][Kn]<Nr[Xt]||ne[we][Kn]===Nr[Xt]&&Ct.actorIds[ne[We][Kn]]<le);)Kn++;ne[we].splice(Kn,0,Nr[Xt]),ne[We].splice(Kn,0,O),ne[Ve]++,lr[mr][gn]=!0;break}}if(ln&&(Kt=!0),Kt&&!ln)Mr=Ue.length;else if(Ue.length===0||ne[Xt]<Te[Xt]||ne[Xt]===Te[Xt]&&Ct.actorIds[ne[Yt]]<le){cn=!0,f(rt,F,sr,ne,Ct,kt,Ut,_e);for(let mr=Ue.length-1;mr>=0;mr--){let Nr=!0;for(let gn=0;gn<Ue[mr][pe];gn++)lr[mr][gn]||(Nr=!1);g[Ue[mr][ae]]==="del"&&Nr&&(Ue.splice(mr,1),tr.splice(mr,1),lr.splice(mr,1))}}else{if(ne[Xt]===Te[Xt]&&Ct.actorIds[ne[Yt]]===le)throw new RangeError(`duplicate operation ID: ${Te[Xt]}@${le}`);Mr=1}}else cn=!0;if(cn&&(fr(st,Ct.blocks[Wt].columns,ne),k(F,ne,Ct.actorIds,!1),ne[re]&&he&&(he=!1,Ut++),ne[Ve]===0&&(he=!0),F.numOps++,{docOp:ne,blockIndex:Wt}=yr(Ct,Wt),ne!==null&&(Oe++,_e=ne[Ve])),Mr>0){for(let mr=0;mr<Mr;mr++){let Nr=Ue[mr];for(let gn=0;gn<Nr[pe];gn++)if(!lr[mr][gn])throw new RangeError(`no matching operation for pred: ${Nr[Ie][gn]}@${Ct.actorIds[Nr[Ce][gn]]}`);fr(st,tr[mr],Nr),k(F,Nr,Ct.actorIds,!0),f(rt,F,sr,Nr,Ct,kt,Ut),Nr[re]?(he=!1,Ut++):he=!0}Mr===Ue.length?(Ue.length=0,tr.length=0,lr.length=0):(Ue.splice(0,Mr),tr.splice(0,Mr),lr.splice(0,Mr)),F.numOps+=Mr}}return ne&&(fr(st,Ct.blocks[Wt].columns,ne),F.numOps++,k(F,ne,Ct.actorIds,!1)),{docOpsConsumed:Oe,blockIndex:Wt}}function W(rt,F,st){let[wt,Ct,Ut,Wt,xe,te,ve,Re]=F.nextOp,sr=wt===null?null:st.actorIds[wt],O=Ut===null?null:st.actorIds[Ut],le={objActor:sr,objActorNum:wt,objCtr:Ct,keyActor:O,keyActorNum:Ut,keyCtr:Wt,keyStr:xe,idActor:st.actorIds[te],idCtr:ve,insert:Re,objId:sr===null?"_root":`${Ct}@${sr}`},{blockIndex:Kt,skipCount:he,visibleCount:kt}=vr(st,le),ne=st.blocks[Kt];for(let Ar of ne.columns)Ar.decoder.reset();let Oe=he===0||ne.firstVisibleActor===void 0||!Re&&ne.firstVisibleActor===Ut&&ne.firstVisibleCtr===Wt,_e={columns:void 0,bloom:new Uint8Array(ne.bloom),numOps:he,lastKey:ne.lastKey,numVisible:ne.numVisible,lastObjectActor:ne.lastObjectActor,lastObjectCtr:ne.lastObjectCtr,firstVisibleActor:Oe?void 0:ne.firstVisibleActor,firstVisibleCtr:Oe?void 0:ne.firstVisibleCtr,lastVisibleActor:void 0,lastVisibleCtr:void 0},Te=ne.columns.map(Ar=>({columnId:Ar.columnId,encoder:a(Ar.columnId)}));Ee(Te,ne.columns,he);let{blockIndex:Ue,docOpsConsumed:tr}=S(rt,_e,Te,F,st,kt,Kt),lr=st.blocks[Ue],ar=-he-tr;for(let Ar=Kt;Ar<=Ue;Ar++)ar+=st.blocks[Ar].numOps;Ee(Te,lr.columns,ar),_e.numOps+=ar;for(let Ar of lr.columns)if(!Ar.decoder.done)throw new RangeError(`excess ops in column ${Ar.columnId}`);if(_e.columns=Te.map(Ar=>{let jr=H(Ar.columnId,Ar.encoder.buffer);return{columnId:Ar.columnId,decoder:jr}}),Kt===Ue&&_e.numOps<=q)ar>0&&ne.lastVisibleActor!==void 0&&ne.lastVisibleCtr!==void 0&&(_e.lastVisibleActor=ne.lastVisibleActor,_e.lastVisibleCtr=ne.lastVisibleCtr),st.blocks[Kt]=_e;else{let Ar=Z(_e);st.blocks.splice(Kt,Ue-Kt+1,...Ar)}}function Bt(rt,F){if(F[It].columnId!==m[It].columnId||m[It].columnName!=="objActor"||F[Ot].columnId!==m[Ot].columnId||m[Ot].columnName!=="objCtr"||F[yt].columnId!==m[yt].columnId||m[yt].columnName!=="keyActor"||F[Et].columnId!==m[Et].columnId||m[Et].columnName!=="keyCtr"||F[vt].columnId!==m[vt].columnId||m[vt].columnName!=="keyStr"||F[Yt].columnId!==m[Yt].columnId||m[Yt].columnName!=="idActor"||F[Xt].columnId!==m[Xt].columnId||m[Xt].columnName!=="idCtr"||F[re].columnId!==m[re].columnId||m[re].columnName!=="insert"||F[ae].columnId!==m[ae].columnId||m[ae].columnName!=="action"||F[He].columnId!==m[He].columnId||m[He].columnName!=="valLen"||F[de].columnId!==m[de].columnId||m[de].columnName!=="valRaw"||F[pe].columnId!==m[pe].columnId||m[pe].columnName!=="predNum"||F[Ce].columnId!==m[Ce].columnId||m[Ce].columnName!=="predActor"||F[Ie].columnId!==m[Ie].columnId||m[Ie].columnName!=="predCtr")throw new RangeError("unexpected columnId");let st=rt.blocks[0].columns;if(!F.every(wt=>Se.includes(wt.columnId)||st.find(Ct=>Ct.columnId===wt.columnId))){let wt=st.map(Ct=>({columnId:Ct.columnId}));for(let Ct of F){let{columnId:Ut}=Ct;!Se.includes(Ut)&&!st.find(Wt=>Wt.columnId===Ut)&&wt.push({columnId:Ut})}wt.sort((Ct,Ut)=>Ct.columnId-Ut.columnId);for(let Ct=0;Ct<rt.blocks.length;Ct++){let Ut=u(rt.blocks[Ct]);Ut.columns=X(Ut.columns.map(Wt=>({columnId:Wt.columnId,buffer:Wt.decoder.buf})),wt),rt.blocks[Ct]=Ut}}}function Nt(rt,F){if(rt.indexOf(F.actorIds[0])<0){if(F.seq!==1)throw new RangeError(`Seq ${F.seq} is the first change for actor ${F.actorIds[0]}`);rt=rt.concat([F.actorIds[0]])}let st=[];for(let wt of F.actorIds){let Ct=rt.indexOf(wt);if(Ct<0)throw new RangeError(`actorId ${wt} is not known to document`);st.push(Ct)}return{actorIds:rt,actorTable:st}}function nt(rt,F,st){for(let wt of F){let Ct=st.objectMeta[wt],Ut=null,Wt=!1;for(;;){let xe=Ut&&Object.keys(Ct.children[Ut.parentKey]).length>0;if(rt[wt]||(rt[wt]=er(wt,Ct.type)),Ut&&xe)if(Ct.type==="list"||Ct.type==="text"){for(let te of rt[wt].edits)te.opId&&Ct.children[Ut.parentKey][te.opId]&&(Wt=!0);if(!Wt){let te=n(wt),ve=n(Ut.parentKey),Re={objActor:te.actorId,objCtr:te.counter,keyActor:ve.actorId,keyCtr:ve.counter,objActorNum:st.actorIds.indexOf(te.actorId),keyActorNum:st.actorIds.indexOf(ve.actorId),keyStr:null,insert:!1,objId:wt},{visibleCount:sr}=vr(st,Re);for(let[O,le]of Object.entries(Ct.children[Ut.parentKey])){let Kt=le;le.objectId&&(rt[le.objectId]||(rt[le.objectId]=er(le.objectId,le.type)),Kt=rt[le.objectId]);let he={action:"update",index:sr,opId:O,value:Kt};Lr(rt[wt].edits,he)}}}else{rt[wt].props[Ut.parentKey]||(rt[wt].props[Ut.parentKey]={});let te=rt[wt].props[Ut.parentKey];for(let[ve,Re]of Object.entries(Ct.children[Ut.parentKey]))te[ve]?Wt=!0:Re.objectId?(rt[Re.objectId]||(rt[Re.objectId]=er(Re.objectId,Re.type)),te[ve]=rt[Re.objectId]):te[ve]=Re}if(Wt||!Ct.parentObj||Ut&&!xe)break;Ut=Ct,wt=Ct.parentObj,Ct=st.objectMeta[wt]}}return rt}function zt(rt,F,st,wt,Ct){let Ut=new Set(st.heads),Wt=new Set,xe=u(st.clock),te=[],ve=[];for(let Re of F){if(st.changeIndexByHash[Re.hash]!==void 0||Wt.has(Re.hash))continue;let sr=(xe[Re.actor]||0)+1,O=!0;for(let le of Re.deps){let Kt=st.changeIndexByHash[le];(Kt===void 0||Kt===-1)&&!Wt.has(le)&&(O=!1)}if(!O)ve.push(Re);else if(Re.seq<sr){if(Ct)throw new RangeError(`Reuse of sequence number ${Re.seq} for actor ${Re.actor}`);return[[],F]}else{if(Re.seq>sr)throw new RangeError(`Skipped sequence number ${sr} for actor ${Re.actor}`);xe[Re.actor]=Re.seq,Wt.add(Re.hash);for(let le of Re.deps)Ut.delete(le);Ut.add(Re.hash),te.push(Re)}}if(te.length>0){let Re={changes:te,changeIndex:-1,objectIds:wt};for(ur(st,Re);!Re.done;)W(rt,Re,st);st.heads=[...Ut].sort(),st.clock=xe}return[te,ve]}function Lt(rt){for(let Re of rt.blocks[0].columns)Re.decoder.reset();let F={},st=null,wt=0,Ct={_root:{objectId:"_root",type:"map",props:{}}},Ut=null,Wt=null,xe="_root",te=!1,ve=0;for(;{docOp:st,blockIndex:wt}=yr(rt,wt),st!==null;){(st[It]!==Ut||st[Ot]!==Wt)&&(xe=`${st[Ot]}@${rt.actorIds[st[It]]}`,Ut=st[It],Wt=st[Ot],F={},ve=0,te=!1),st[re]&&te&&(te=!1,ve++),st[Ve]===0&&(te=!0),st[Xt]>rt.maxOp&&(rt.maxOp=st[Xt]);for(let Re=0;Re<st[Ve];Re++)st[we][Re]>rt.maxOp&&(rt.maxOp=st[we][Re]);f(Ct,null,xe,st,rt,F,ve,st[Ve])}return Ct._root}function Be(rt){let F=X(rt.changesColumns,C),st=F[0].decoder,wt=F[1].decoder,Ct=F[5].decoder,Ut=F[6].decoder;if(F[0].columnId!==C[0].columnId||C[0].columnName!=="actor"||F[1].columnId!==C[1].columnId||C[1].columnName!=="seq"||F[5].columnId!==C[5].columnId||C[5].columnName!=="depsNum"||F[6].columnId!==C[6].columnId||C[6].columnName!=="depsIndex")throw new RangeError("unexpected columnId");let Wt=0,xe={},te=[],ve=new Set;for(;!st.done;){let O=st.readValue(),le=wt.readValue(),Kt=Ct.readValue(),he=rt.actorIds[O];if(le!==1&&le!==xe[he]+1)throw new RangeError(`Expected seq ${xe[he]+1}, got ${le} for actor ${he}`);te.push(O),xe[he]=le,ve.add(Wt);for(let kt=0;kt<Kt;kt++)ve.delete(Ut.readValue());Wt++}let Re=[...ve].map(O=>rt.actorIds[te[O]]).sort();for(let O of F)O.decoder.reset();let sr=F.map(O=>({columnId:O.columnId,encoder:a(O.columnId)}));return Ee(sr,F,Wt),{clock:xe,headActors:Re,encoders:sr,numChanges:Wt}}function _t(rt,F,st,wt){fr(rt,C,[st.indexOf(F.actor),F.seq,F.maxOp,F.time,F.message,F.deps.length,F.deps.map(Ct=>wt[Ct]),F.extraBytes?F.extraBytes.byteLength<<4|p.BYTES:p.BYTES,F.extraBytes])}var gt=class bp{constructor(F){if(this.maxOp=0,this.haveHashGraph=!1,this.changes=[],this.changeIndexByHash={},this.dependenciesByHash={},this.dependentsByHash={},this.hashesByActor={},this.actorIds=[],this.heads=[],this.clock={},this.queue=[],this.objectMeta={_root:{parentObj:null,parentKey:null,opId:null,type:"map",children:{}}},F){let st=Q(F),{clock:wt,headActors:Ct,encoders:Ut,numChanges:Wt}=Be(st);if(this.binaryDoc=F,this.changes=new Array(Wt),this.actorIds=st.actorIds,this.heads=st.heads,this.clock=wt,this.changesEncoders=Ut,this.extraBytes=st.extraBytes,st.heads.length===1&&Ct.length===1&&(this.hashesByActor[Ct[0]]=[],this.hashesByActor[Ct[0]][wt[Ct[0]]-1]=st.heads[0]),st.heads.length===st.headsIndexes.length)for(let te=0;te<st.heads.length;te++)this.changeIndexByHash[st.heads[te]]=st.headsIndexes[te];else if(st.heads.length===1)this.changeIndexByHash[st.heads[0]]=Wt-1;else for(let te of st.heads)this.changeIndexByHash[te]=-1;this.blocks=[{columns:X(st.opsColumns,E)}],et(this.blocks[0]),this.blocks[0].numOps>q&&(this.blocks=Z(this.blocks[0]));let xe={blocks:this.blocks,actorIds:this.actorIds,objectMeta:this.objectMeta,maxOp:0};this.initPatch=Lt(xe),this.maxOp=xe.maxOp}else this.haveHashGraph=!0,this.changesEncoders=C.map(st=>({columnId:st.columnId,encoder:a(st.columnId)})),this.blocks=[{columns:X([],E),bloom:new Uint8Array(lt),numOps:0,lastKey:void 0,numVisible:void 0,lastObjectActor:void 0,lastObjectCtr:void 0,firstVisibleActor:void 0,firstVisibleCtr:void 0,lastVisibleActor:void 0,lastVisibleCtr:void 0}]}clone(){let F=new bp;return F.maxOp=this.maxOp,F.haveHashGraph=this.haveHashGraph,F.changes=this.changes.slice(),F.changeIndexByHash=u(this.changeIndexByHash),F.dependenciesByHash=u(this.dependenciesByHash),F.dependentsByHash=Object.entries(this.dependentsByHash).reduce((st,[wt,Ct])=>(st[wt]=Ct.slice(),st),{}),F.hashesByActor=Object.entries(this.hashesByActor).reduce((st,[wt,Ct])=>(st[wt]=Ct.slice(),st),{}),F.actorIds=this.actorIds,F.heads=this.heads,F.clock=this.clock,F.blocks=this.blocks,F.objectMeta=this.objectMeta,F.queue=this.queue,F}applyChanges(F,st=!1){let wt=F.map(Re=>{let sr=tt(Re);return sr.buffer=Re,sr}),Ct={_root:{objectId:"_root",type:"map",props:{}}},Ut={maxOp:this.maxOp,changeIndexByHash:this.changeIndexByHash,actorIds:this.actorIds,heads:this.heads,clock:this.clock,blocks:this.blocks.slice(),objectMeta:Object.assign({},this.objectMeta)},Wt=this.queue.length===0?wt:wt.concat(this.queue),xe=[],te=new Set;for(;;){let[Re,sr]=zt(Ct,Wt,Ut,te,this.haveHashGraph);Wt=sr;for(let O=0;O<Re.length;O++)Ut.changeIndexByHash[Re[O].hash]=this.changes.length+xe.length+O;if(Re.length>0&&(xe=xe.concat(Re)),Wt.length===0)break;if(Re.length===0){if(this.haveHashGraph)break;this.computeHashGraph(),Ut.changeIndexByHash=this.changeIndexByHash}}nt(Ct,te,Ut);for(let Re of xe){this.changes.push(Re.buffer),this.hashesByActor[Re.actor]||(this.hashesByActor[Re.actor]=[]),this.hashesByActor[Re.actor][Re.seq-1]=Re.hash,this.changeIndexByHash[Re.hash]=this.changes.length-1,this.dependenciesByHash[Re.hash]=Re.deps,this.dependentsByHash[Re.hash]=[];for(let sr of Re.deps)this.dependentsByHash[sr]||(this.dependentsByHash[sr]=[]),this.dependentsByHash[sr].push(Re.hash);_t(this.changesEncoders,Re,Ut.actorIds,this.changeIndexByHash)}this.maxOp=Ut.maxOp,this.actorIds=Ut.actorIds,this.heads=Ut.heads,this.clock=Ut.clock,this.blocks=Ut.blocks,this.objectMeta=Ut.objectMeta,this.queue=Wt,this.binaryDoc=null,this.initPatch=null;let ve={maxOp:this.maxOp,clock:this.clock,deps:this.heads,pendingChanges:this.queue.length,diffs:Ct._root};return st&&wt.length===1&&(ve.actor=wt[0].actor,ve.seq=wt[0].seq),ve}computeHashGraph(){let F=this.save();this.haveHashGraph=!0,this.changes=[],this.changeIndexByHash={},this.dependenciesByHash={},this.dependentsByHash={},this.hashesByActor={},this.clock={};for(let st of N([F])){let wt=j(st);this.changes.push(wt),this.changeIndexByHash[st.hash]=this.changes.length-1,this.dependenciesByHash[st.hash]=st.deps,this.dependentsByHash[st.hash]=[];for(let Ut of st.deps)this.dependentsByHash[Ut].push(st.hash);st.seq===1&&(this.hashesByActor[st.actor]=[]),this.hashesByActor[st.actor].push(st.hash);let Ct=(this.clock[st.actor]||0)+1;if(st.seq!==Ct)throw new RangeError(`Expected seq ${Ct}, got seq ${st.seq} from actor ${st.actor}`);this.clock[st.actor]=st.seq}}getChanges(F){if(this.haveHashGraph||this.computeHashGraph(),F.length===0)return this.changes.slice();let st=[],wt={},Ct=[];for(let Ut of F){wt[Ut]=!0;let Wt=this.dependentsByHash[Ut];if(!Wt)throw new RangeError(`hash not found: ${Ut}`);st.push(...Wt)}for(;st.length>0;){let Ut=st.pop();if(wt[Ut]=!0,Ct.push(Ut),!this.dependenciesByHash[Ut].every(Wt=>wt[Wt]))break;st.push(...this.dependentsByHash[Ut])}if(st.length===0&&this.heads.every(Ut=>wt[Ut]))return Ct.map(Ut=>this.changes[this.changeIndexByHash[Ut]]);for(st=F.slice(),wt={};st.length>0;){let Ut=st.pop();if(!wt[Ut]){let Wt=this.dependenciesByHash[Ut];if(!Wt)throw new RangeError(`hash not found: ${Ut}`);st.push(...Wt),wt[Ut]=!0}}return this.changes.filter(Ut=>!wt[J(Ut,!0).hash])}getChangesAdded(F){this.haveHashGraph||this.computeHashGraph();let st=this.heads.slice(),wt={},Ct=[];for(;st.length>0;){let Ut=st.pop();!wt[Ut]&&F.changeIndexByHash[Ut]===void 0&&(wt[Ut]=!0,Ct.push(Ut),st.push(...this.dependenciesByHash[Ut]))}return Ct.reverse().map(Ut=>this.changes[this.changeIndexByHash[Ut]])}getChangeByHash(F){return this.haveHashGraph||this.computeHashGraph(),this.changes[this.changeIndexByHash[F]]}getMissingDeps(F=[]){this.haveHashGraph||this.computeHashGraph();let st=new Set(F),wt=new Set;for(let Ut of this.queue){wt.add(Ut.hash);for(let Wt of Ut.deps)st.add(Wt)}let Ct=[];for(let Ut of st)this.changeIndexByHash[Ut]===void 0&&!wt.has(Ut)&&Ct.push(Ut);return Ct.sort()}save(){if(this.binaryDoc)return this.binaryDoc;let F=this.changesEncoders.map(wt=>({columnId:wt.columnId,encoder:a(wt.columnId)})),st=this.changesEncoders.map(wt=>{let Ct=H(wt.columnId,wt.encoder.buffer);return{columnId:wt.columnId,decoder:Ct}});return Ee(F,st,this.changes.length),this.binaryDoc=at({changesColumns:this.changesEncoders,opsColumns:se(this.blocks),actorIds:this.actorIds,heads:this.heads,headsIndexes:this.heads.map(wt=>this.changeIndexByHash[wt]),extraBytes:this.extraBytes}),this.changesEncoders=F,this.binaryDoc}getPatch(){let F={_root:{parentObj:null,parentKey:null,opId:null,type:"map",children:{}}},st={blocks:this.blocks,actorIds:this.actorIds,objectMeta:F,maxOp:0},wt=this.initPatch?this.initPatch:Lt(st);return{maxOp:this.maxOp,clock:this.clock,deps:this.heads,pendingChanges:this.queue.length,diffs:wt}}};e.exports={MAX_BLOCK_SIZE:q,BackendDoc:gt,bloomFilterContains:Cr}}),L6=ce((t,e)=>{function n(u){if(u.frozen)throw new Error("Attempting to use an outdated Automerge document that has already been updated. Please use the latest document state, or call Automerge.clone() if you really need to use this old document state.");return u.state}e.exports={backendState:n}}),S2=ce((t,e)=>{var{encodeChange:n}=$h(),{BackendDoc:u}=N6(),{backendState:s}=L6();function p(){return{state:new u,heads:[]}}function g(q){return{state:s(q).clone(),heads:q.heads}}function y(q){q.state=null,q.frozen=!0}function E(q,U){let V=s(q),lt=V.applyChanges(U);return q.frozen=!0,[{state:V,heads:V.heads},lt]}function m(q,U,V){if(q.hashesByActor[U]&&q.hashesByActor[U][V]||!q.haveHashGraph&&(q.computeHashGraph(),q.hashesByActor[U]&&q.hashesByActor[U][V]))return q.hashesByActor[U][V];throw new RangeError(`Unknown change: actorId = ${U}, seq = ${V+1}`)}function C(q,U){let V=s(q);if(U.seq<=V.clock[U.actor])throw new RangeError("Change request has already been applied");if(U.seq>1){let yt=m(V,U.actor,U.seq-2);if(!yt)throw new RangeError(`Cannot find hash of localChange before seq=${U.seq}`);let Et={[yt]:!0};for(let vt of U.deps)Et[vt]=!0;U.deps=Object.keys(Et).sort()}let lt=n(U),It=V.applyChanges([lt],!0);q.frozen=!0;let Ot=m(V,U.actor,U.seq-1);return It.deps=It.deps.filter(yt=>yt!==Ot),[{state:V,heads:V.heads},It,lt]}function a(q){return s(q).save()}function H(q){let U=new u(q);return{state:U,heads:U.heads}}function X(q,U){let V=s(q);return V.applyChanges(U),q.frozen=!0,{state:V,heads:V.heads}}function w(q){return s(q).getPatch()}function j(q){return q.heads}function tt(q){return J(q,[])}function J(q,U){if(!Array.isArray(U))throw new TypeError("Pass an array of hashes to Backend.getChanges()");return s(q).getChanges(U)}function N(q,U){return s(U).getChangesAdded(s(q))}function Q(q,U){return s(q).getChangeByHash(U)}function at(q,U=[]){return s(q).getMissingDeps(U)}e.exports={init:p,clone:g,free:y,applyChanges:E,applyLocalChange:C,save:a,load:H,loadChanges:X,getPatch:w,getHeads:j,getAllChanges:tt,getChanges:J,getChangesAdded:N,getChangeByHash:Q,getMissingDeps:at}}),X6=ce((t,e)=>{var n=S2(),{hexStringToBytes:u,bytesToHexString:s,Encoder:p,Decoder:g}=u2(),{decodeChangeMeta:y}=$h(),{copyObject:E}=Us(),m=32,C=66,a=67,H=10,X=7,w=class{constructor(Et){if(Array.isArray(Et)){this.numEntries=Et.length,this.numBitsPerEntry=H,this.numProbes=X,this.bits=new Uint8Array(Math.ceil(this.numEntries*this.numBitsPerEntry/8));for(let vt of Et)this.addHash(vt)}else if(Et instanceof Uint8Array)if(Et.byteLength===0)this.numEntries=0,this.numBitsPerEntry=0,this.numProbes=0,this.bits=Et;else{let vt=new g(Et);this.numEntries=vt.readUint32(),this.numBitsPerEntry=vt.readUint32(),this.numProbes=vt.readUint32(),this.bits=vt.readRawBytes(Math.ceil(this.numEntries*this.numBitsPerEntry/8))}else throw new TypeError("invalid argument")}get bytes(){if(this.numEntries===0)return new Uint8Array(0);let Et=new p;return Et.appendUint32(this.numEntries),Et.appendUint32(this.numBitsPerEntry),Et.appendUint32(this.numProbes),Et.appendRawBytes(this.bits),Et.buffer}getProbes(Et){let vt=u(Et),Yt=8*this.bits.byteLength;if(vt.byteLength!==32)throw new RangeError(`Not a 256-bit hash: ${Et}`);let Xt=((vt[0]|vt[1]<<8|vt[2]<<16|vt[3]<<24)>>>0)%Yt,re=((vt[4]|vt[5]<<8|vt[6]<<16|vt[7]<<24)>>>0)%Yt,ae=((vt[8]|vt[9]<<8|vt[10]<<16|vt[11]<<24)>>>0)%Yt,He=[Xt];for(let de=1;de<this.numProbes;de++)Xt=(Xt+re)%Yt,re=(re+ae)%Yt,He.push(Xt);return He}addHash(Et){for(let vt of this.getProbes(Et))this.bits[vt>>>3]|=1<<(vt&7)}containsHash(Et){if(this.numEntries===0)return!1;for(let vt of this.getProbes(Et))if(!(this.bits[vt>>>3]&1<<(vt&7)))return!1;return!0}};function j(Et,vt){if(!Array.isArray(vt))throw new TypeError("hashes must be an array");Et.appendUint32(vt.length);for(let Yt=0;Yt<vt.length;Yt++){if(Yt>0&&vt[Yt-1]>=vt[Yt])throw new RangeError("hashes must be sorted");let Xt=u(vt[Yt]);if(Xt.byteLength!==m)throw new TypeError("heads hashes must be 256 bits");Et.appendRawBytes(Xt)}}function tt(Et){let vt=Et.readUint32(),Yt=[];for(let Xt=0;Xt<vt;Xt++)Yt.push(s(Et.readRawBytes(m)));return Yt}function J(Et){let vt=new p;vt.appendByte(C),j(vt,Et.heads),j(vt,Et.need),vt.appendUint32(Et.have.length);for(let Yt of Et.have)j(vt,Yt.lastSync),vt.appendPrefixedBytes(Yt.bloom);vt.appendUint32(Et.changes.length);for(let Yt of Et.changes)vt.appendPrefixedBytes(Yt);return vt.buffer}function N(Et){let vt=new g(Et),Yt=vt.readByte();if(Yt!==C)throw new RangeError(`Unexpected message type: ${Yt}`);let Xt=tt(vt),re=tt(vt),ae=vt.readUint32(),He={heads:Xt,need:re,have:[],changes:[]};for(let pe=0;pe<ae;pe++){let Ce=tt(vt),Ie=vt.readPrefixedBytes(vt);He.have.push({lastSync:Ce,bloom:Ie})}let de=vt.readUint32();for(let pe=0;pe<de;pe++){let Ce=vt.readPrefixedBytes();He.changes.push(Ce)}return He}function Q(Et){let vt=new p;return vt.appendByte(a),j(vt,Et.sharedHeads),vt.buffer}function at(Et){let vt=new g(Et),Yt=vt.readByte();if(Yt!==a)throw new RangeError(`Unexpected record type: ${Yt}`);let Xt=tt(vt);return Object.assign(V(),{sharedHeads:Xt})}function q(Et,vt){let Yt=n.getChanges(Et,vt).map(Xt=>y(Xt,!0).hash);return{lastSync:vt,bloom:new w(Yt).bytes}}function U(Et,vt,Yt){if(vt.length===0)return Yt.map(Ve=>n.getChangeByHash(Et,Ve)).filter(Ve=>Ve!==void 0);let Xt={},re=[];for(let Ve of vt){for(let We of Ve.lastSync)Xt[We]=!0;re.push(new w(Ve.bloom))}let ae=n.getChanges(Et,Object.keys(Xt)).map(Ve=>y(Ve,!0)),He={},de={},pe={};for(let Ve of ae){He[Ve.hash]=!0;for(let We of Ve.deps)de[We]||(de[We]=[]),de[We].push(Ve.hash);re.every(We=>!We.containsHash(Ve.hash))&&(pe[Ve.hash]=!0)}let Ce=Object.keys(pe);for(;Ce.length>0;){let Ve=Ce.pop();if(de[Ve])for(let We of de[Ve])pe[We]||(pe[We]=!0,Ce.push(We))}let Ie=[];for(let Ve of Yt)if(pe[Ve]=!0,!He[Ve]){let We=n.getChangeByHash(Et,Ve);We&&Ie.push(We)}for(let Ve of ae)pe[Ve.hash]&&Ie.push(Ve.change);return Ie}function V(){return{sharedHeads:[],lastSentHeads:[],theirHeads:null,theirNeed:null,theirHave:null,sentHashes:{}}}function lt(Et,vt){return Et.length===vt.length&&Et.every((Yt,Xt)=>Yt===vt[Xt])}function It(Et,vt){if(!Et)throw new Error("generateSyncMessage called with no Automerge document");if(!vt)throw new Error("generateSyncMessage requires a syncState, which can be created with initSyncState()");let{sharedHeads:Yt,lastSentHeads:Xt,theirHeads:re,theirNeed:ae,theirHave:He,sentHashes:de}=vt,pe=n.getHeads(Et),Ce=n.getMissingDeps(Et,re||[]),Ie=[];if((!re||Ce.every(Qe=>re.includes(Qe)))&&(Ie=[q(Et,Yt)]),He&&He.length>0&&!He[0].lastSync.every(Qe=>n.getChangeByHash(Et,Qe))){let Qe={heads:pe,need:[],have:[{lastSync:[],bloom:new Uint8Array(0)}],changes:[]};return[vt,J(Qe)]}let Ve=Array.isArray(He)&&Array.isArray(ae)?U(Et,He,ae):[],We=Array.isArray(Xt)&&lt(pe,Xt),we=Array.isArray(re)&&lt(pe,re);if(We&&we&&Ve.length===0)return[vt,null];Ve=Ve.filter(Qe=>!de[y(Qe,!0).hash]);let Se={heads:pe,have:Ie,need:Ce,changes:Ve};if(Ve.length>0){de=E(de);for(let Qe of Ve)de[y(Qe,!0).hash]=!0}return vt=Object.assign({},vt,{lastSentHeads:pe,sentHashes:de}),[vt,J(Se)]}function Ot(Et,vt,Yt){let Xt=vt.filter(ae=>!Et.includes(ae)),re=Yt.filter(ae=>vt.includes(ae));return[...new Set([...Xt,...re])].sort()}function yt(Et,vt,Yt){if(!Et)throw new Error("generateSyncMessage called with no Automerge document");if(!vt)throw new Error("generateSyncMessage requires a syncState, which can be created with initSyncState()");let{sharedHeads:Xt,lastSentHeads:re,sentHashes:ae}=vt,He=null,de=N(Yt),pe=n.getHeads(Et);de.changes.length>0&&([Et,He]=n.applyChanges(Et,de.changes),Xt=Ot(pe,n.getHeads(Et),Xt)),de.changes.length===0&&lt(de.heads,pe)&&(re=de.heads);let Ce=de.heads.filter(Ve=>n.getChangeByHash(Et,Ve));Ce.length===de.heads.length?(Xt=de.heads,de.heads.length===0&&(re=[],ae=[])):Xt=[...new Set(Ce.concat(Xt))].sort();let Ie={sharedHeads:Xt,lastSentHeads:re,theirHave:de.have,theirHeads:de.heads,theirNeed:de.need,sentHashes:ae};return[Et,Ie,He]}e.exports={receiveSyncMessage:yt,generateSyncMessage:It,encodeSyncMessage:J,decodeSyncMessage:N,initSyncState:V,encodeSyncState:Q,decodeSyncState:at,BloomFilter:w}}),Z6=ce((t,e)=>{var{init:n,clone:u,free:s,applyChanges:p,applyLocalChange:g,save:y,load:E,loadChanges:m,getPatch:C,getHeads:a,getAllChanges:H,getChanges:X,getChangesAdded:w,getChangeByHash:j,getMissingDeps:tt}=S2(),{receiveSyncMessage:J,generateSyncMessage:N,encodeSyncMessage:Q,decodeSyncMessage:at,encodeSyncState:q,decodeSyncState:U,initSyncState:V}=X6();e.exports={init:n,clone:u,free:s,applyChanges:p,applyLocalChange:g,save:y,load:E,loadChanges:m,getPatch:C,getHeads:a,getAllChanges:H,getChanges:X,getChangesAdded:w,getChangeByHash:j,getMissingDeps:tt,receiveSyncMessage:J,generateSyncMessage:N,encodeSyncMessage:Q,decodeSyncMessage:at,encodeSyncState:q,decodeSyncState:U,initSyncState:V}}),sS=ce((t,e)=>{var n=Kp(),u=oD(),{OPTIONS:s}=Eu(),{encodeChange:p,decodeChange:g}=$h(),{isObject:y}=Us(),E=Z6();function m(Et){if(typeof Et=="string")Et={actorId:Et};else if(typeof Et>"u")Et={};else if(!y(Et))throw new TypeError(`Unsupported options for init(): ${Et}`);return u.init(Object.assign({backend:E},Et))}function C(Et,vt){let Yt={message:"Initialization"};return a(m(vt),Yt,Xt=>Object.assign(Xt,Et))}function a(Et,vt,Yt){let[Xt]=u.change(Et,vt,Yt);return Xt}function H(Et,vt){let[Yt]=u.emptyChange(Et,vt);return Yt}function X(Et,vt={}){let Yt=E.clone(u.getBackendState(Et,"clone"));return at(m(vt),E.getPatch(Yt),Yt,[],vt)}function w(Et){E.free(u.getBackendState(Et,"free"))}function j(Et,vt={}){let Yt=E.load(Et);return at(m(vt),E.getPatch(Yt),Yt,[Et],vt)}function tt(Et){return E.save(u.getBackendState(Et,"save"))}function J(Et,vt){let Yt=u.getBackendState(Et,"merge"),Xt=u.getBackendState(vt,"merge","second"),re=E.getChangesAdded(Yt,Xt),[ae]=q(Et,re);return ae}function N(Et,vt){let Yt=u.getBackendState(Et,"getChanges"),Xt=u.getBackendState(vt,"getChanges","second");return E.getChanges(Xt,E.getHeads(Yt))}function Q(Et){return E.getAllChanges(u.getBackendState(Et,"getAllChanges"))}function at(Et,vt,Yt,Xt,re){let ae=u.applyPatch(Et,vt,Yt),He=re.patchCallback||Et[s].patchCallback;return He&&He(vt,Et,ae,!1,Xt),ae}function q(Et,vt,Yt={}){let Xt=u.getBackendState(Et,"applyChanges"),[re,ae]=E.applyChanges(Xt,vt);return[at(Et,ae,re,vt,Yt),ae]}function U(Et,vt){if(!y(Et)||!y(vt))return Et===vt;let Yt=Object.keys(Et).sort(),Xt=Object.keys(vt).sort();if(Yt.length!==Xt.length)return!1;for(let re=0;re<Yt.length;re++)if(Yt[re]!==Xt[re]||!U(Et[Yt[re]],vt[Xt[re]]))return!1;return!0}function V(Et){let vt=u.getActorId(Et),Yt=Q(Et);return Yt.map((Xt,re)=>({get change(){return g(Xt)},get snapshot(){let ae=E.loadChanges(E.init(),Yt.slice(0,re+1));return u.applyPatch(m(vt),E.getPatch(ae),ae)}}))}function lt(Et,vt){let Yt=u.getBackendState(Et,"generateSyncMessage");return E.generateSyncMessage(Yt,vt)}function It(Et,vt,Yt){let Xt=u.getBackendState(Et,"receiveSyncMessage"),[re,ae,He]=E.receiveSyncMessage(Xt,vt,Yt);if(!He)return[Et,ae,He];let de=null;return Et[s].patchCallback&&(de=E.decodeSyncMessage(Yt).changes),[at(Et,He,re,de,{}),ae,He]}function Ot(){return E.initSyncState()}function yt(Et){E=Et}e.exports={init:m,from:C,change:a,emptyChange:H,clone:X,free:w,load:j,save:tt,merge:J,getChanges:N,getAllChanges:Q,applyChanges:q,encodeChange:p,decodeChange:g,equals:U,getHistory:V,uuid:n,Frontend:u,setDefaultBackend:yt,generateSyncMessage:lt,receiveSyncMessage:It,initSyncState:Ot,get Backend(){return E}};for(let Et of["getObjectId","getObjectById","getActorId","setActorId","getConflicts","getLastLocalChange","Text","Table","Counter","Observable","Int","Uint","Float64"])e.exports[Et]=u[Et]}),O0=ce((t,e)=>{"use strict";var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,p){s.__proto__=p}||function(s,p){for(let g in p)Object.prototype.hasOwnProperty.call(p,g)&&(s[g]=p[g])},u=class Dp extends Error{constructor(p,g,y){super(p),n(this,Dp.prototype),this.name="GrammarError",this.location=g,y===void 0&&(y=[]),this.diagnostics=y,this.stage=null,this.problems=[["error",p,g,y]]}toString(){let p=super.toString();this.location&&(p+=`
 at `,this.location.source!==void 0&&this.location.source!==null&&(p+=`${this.location.source}:`),p+=`${this.location.start.line}:${this.location.start.column}`);for(let g of this.diagnostics)p+=`
 from `,g.location.source!==void 0&&g.location.source!==null&&(p+=`${g.location.source}:`),p+=`${g.location.start.line}:${g.location.start.column}: ${g.message}`;return p}format(p){let g=p.map(({source:m,text:C})=>({source:m,text:C.split(/\r\n|\n|\r/g)}));function y(m,C,a=""){let H="",X=g.find(({source:j})=>j===m.source),w=m.start;if(X){let j=m.end,tt=X.text[w.line-1],J=(w.line===j.line?j.column:tt.length+1)-w.column||1;a&&(H+=`
note: ${a}`),H+=`
 --> ${m.source}:${w.line}:${w.column}
${"".padEnd(C)} |
${w.line.toString().padStart(C)} | ${tt}
${"".padEnd(C)} | ${"".padEnd(w.column-1)}${"".padEnd(J,"^")}`}else H+=`
 at ${m.source}:${w.line}:${w.column}`,a&&(H+=`: ${a}`);return H}function E(m,C,a,H=[]){let X;a?X=H.reduce((j,{location:tt})=>Math.max(j,tt.start.line),a.start.line):X=Math.max.apply(null,H.map(j=>j.location.start.line)),X=X.toString().length;let w=`${m}: ${C}`;a&&(w+=y(a,X));for(let j of H)w+=y(j.location,X,j.message);return w}return this.problems.filter(m=>m[0]!=="info").map(m=>E(...m)).join(`

`)}};e.exports=u}),ys=ce((t,e)=>{"use strict";var n={build(u){function s(m,...C){return u[m.type](m,...C)}function p(){}function g(m,...C){return s(m.expression,...C)}function y(m){return function(C,...a){C[m].forEach(H=>s(H,...a))}}let E={grammar(m,...C){m.topLevelInitializer&&s(m.topLevelInitializer,...C),m.initializer&&s(m.initializer,...C),m.rules.forEach(a=>s(a,...C))},top_level_initializer:p,initializer:p,rule:g,named:g,choice:y("alternatives"),action:g,sequence:y("elements"),labeled:g,text:g,simple_and:g,simple_not:g,optional:g,zero_or_more:g,one_or_more:g,group:g,semantic_and:p,semantic_not:p,rule_ref:p,literal:p,class:p,any:p};return Object.keys(E).forEach(m=>{Object.prototype.hasOwnProperty.call(u,m)||(u[m]=E[m])}),s}};e.exports=n}),po=ce((t,e)=>{"use strict";var n=ys(),u={findRule(s,p){for(let g=0;g<s.rules.length;g++)if(s.rules[g].name===p)return s.rules[g]},indexOfRule(s,p){for(let g=0;g<s.rules.length;g++)if(s.rules[g].name===p)return g;return-1},alwaysConsumesOnSuccess(s,p){function g(){return!0}function y(){return!1}let E=n.build({choice(m){return m.alternatives.every(E)},sequence(m){return m.elements.some(E)},simple_and:y,simple_not:y,optional:y,zero_or_more:y,semantic_and:y,semantic_not:y,rule_ref(m){let C=u.findRule(s,m.name);return C?E(C):void 0},literal(m){return m.value!==""},class:g,any:g});return E(p)}};e.exports=u}),k2=ce((t,e)=>{"use strict";var n={PUSH:0,PUSH_EMPTY_STRING:35,PUSH_UNDEFINED:1,PUSH_NULL:2,PUSH_FAILED:3,PUSH_EMPTY_ARRAY:4,PUSH_CURR_POS:5,POP:6,POP_CURR_POS:7,POP_N:8,NIP:9,APPEND:10,WRAP:11,TEXT:12,PLUCK:36,IF:13,IF_ERROR:14,IF_NOT_ERROR:15,WHILE_NOT_ERROR:16,MATCH_ANY:17,MATCH_STRING:18,MATCH_STRING_IC:19,MATCH_CHAR_CLASS:20,MATCH_REGEXP:20,ACCEPT_N:21,ACCEPT_STRING:22,FAIL:23,LOAD_SAVED_POS:24,UPDATE_SAVED_POS:25,CALL:26,RULE:27,SILENT_FAILS_ON:28,SILENT_FAILS_OFF:29};e.exports=n}),L2=ce((t,e)=>{"use strict";var n=ys(),u=po(),s=O0(),p=1,g=0,y=-1;function E(m){function C(j){return j.match=g}function a(j){return w(j.expression),j.match=p}function H(j){return j.match=w(j.expression)}function X(j,tt){let J=j.length,N=0,Q=0;for(let at=0;at<J;++at){let q=w(j[at]);q===p&&++N,q===y&&++Q}return N===J?p:tt?Q===J?y:g:Q>0?y:g}let w=n.build({rule(j){let tt,J=0;if(typeof j.match>"u"){j.match=g;do if(tt=j.match,j.match=w(j.expression),++J>6)throw new s("Infinity cycle detected when trying to evaluate node match result",j.location);while(tt!==j.match)}return j.match},named:H,choice(j){return j.match=X(j.alternatives,!0)},action:H,sequence(j){return j.match=X(j.elements,!1)},labeled:H,text:H,simple_and:H,simple_not(j){return j.match=-w(j.expression)},optional:a,zero_or_more:a,one_or_more:H,group:H,semantic_and:C,semantic_not:C,rule_ref(j){let tt=u.findRule(m,j.name);return j.match=w(tt)},literal(j){let tt=j.value.length===0?p:g;return j.match=tt},class(j){let tt=j.parts.length===0?y:g;return j.match=tt},any:C});w(m)}E.ALWAYS_MATCH=p,E.SOMETIMES_MATCH=g,E.NEVER_MATCH=y,e.exports=E}),ES=ce((t,e)=>{"use strict";var n=po(),u=k2(),s=ys(),{ALWAYS_MATCH:p,SOMETIMES_MATCH:g,NEVER_MATCH:y}=L2();function E(m){let C=[],a=[],H=[],X=[];function w(yt){let Et=C.indexOf(yt);return Et===-1?C.push(yt)-1:Et}function j(yt){let Et={value:yt.parts,inverted:yt.inverted,ignoreCase:yt.ignoreCase},vt=JSON.stringify(Et),Yt=a.findIndex(Xt=>JSON.stringify(Xt)===vt);return Yt===-1?a.push(Et)-1:Yt}function tt(yt){let Et=JSON.stringify(yt),vt=H.findIndex(Yt=>JSON.stringify(Yt)===Et);return vt===-1?H.push(yt)-1:vt}function J(yt,Et,vt){let Yt={predicate:yt,params:Et,body:vt.code,location:vt.codeLocation},Xt=JSON.stringify(Yt),re=X.findIndex(ae=>JSON.stringify(ae)===Xt);return re===-1?X.push(Yt)-1:re}function N(yt){let Et={};return Object.keys(yt).forEach(vt=>{Et[vt]=yt[vt]}),Et}function Q(yt,...Et){return yt.concat(...Et)}function at(yt,Et,vt,Yt){return yt===p?vt:yt===y?Yt:Et.concat([vt.length,Yt.length],vt,Yt)}function q(yt,Et){return yt.concat([Et.length],Et)}function U(yt,Et,vt,Yt){let Xt=Object.keys(vt).map(re=>Yt-vt[re]);return[u.CALL,yt,Et,Xt.length].concat(Xt)}function V(yt,Et,vt){let Yt=yt.match|0;return Q([u.PUSH_CURR_POS],[u.SILENT_FAILS_ON],Ot(yt,{sp:vt.sp+1,env:N(vt.env),action:null}),[u.SILENT_FAILS_OFF],at(Et?-Yt:Yt,[Et?u.IF_ERROR:u.IF_NOT_ERROR],Q([u.POP],[Et?u.POP:u.POP_CURR_POS],[u.PUSH_UNDEFINED]),Q([u.POP],[Et?u.POP_CURR_POS:u.POP],[u.PUSH_FAILED])))}function lt(yt,Et,vt){let Yt=J(!0,Object.keys(vt.env),yt);return Q([u.UPDATE_SAVED_POS],U(Yt,0,vt.env,vt.sp),at(yt.match|0,[u.IF],Q([u.POP],Et?[u.PUSH_FAILED]:[u.PUSH_UNDEFINED]),Q([u.POP],Et?[u.PUSH_UNDEFINED]:[u.PUSH_FAILED])))}function It(yt){return q([u.WHILE_NOT_ERROR],Q([u.APPEND],yt))}let Ot=s.build({grammar(yt){yt.rules.forEach(Ot),yt.literals=C,yt.classes=a,yt.expectations=H,yt.functions=X},rule(yt){yt.bytecode=Ot(yt.expression,{sp:-1,env:{},pluck:[],action:null})},named(yt,Et){let vt=yt.match|0,Yt=vt===y?null:tt({type:"rule",value:yt.name});return Q([u.SILENT_FAILS_ON],Ot(yt.expression,Et),[u.SILENT_FAILS_OFF],at(vt,[u.IF_ERROR],[u.FAIL,Yt],[]))},choice(yt,Et){function vt(Yt,Xt){let re=Yt[0].match|0,ae=Ot(Yt[0],{sp:Xt.sp,env:N(Xt.env),action:null});return re===p?ae:Q(ae,Yt.length>1?at(g,[u.IF_ERROR],Q([u.POP],vt(Yt.slice(1),Xt)),[]):[])}return vt(yt.alternatives,Et)},action(yt,Et){let vt=N(Et.env),Yt=yt.expression.type!=="sequence"||yt.expression.elements.length===0,Xt=Ot(yt.expression,{sp:Et.sp+(Yt?1:0),env:vt,action:yt}),re=yt.expression.match|0,ae=Yt&&re!==y?J(!1,Object.keys(vt),yt):null;return Yt?Q([u.PUSH_CURR_POS],Xt,at(re,[u.IF_NOT_ERROR],Q([u.LOAD_SAVED_POS,1],U(ae,1,vt,Et.sp+2)),[]),[u.NIP]):Xt},sequence(yt,Et){function vt(Yt,Xt){if(Yt.length>0){let re=yt.elements.length-Yt.length+1;return Q(Ot(Yt[0],{sp:Xt.sp,env:Xt.env,pluck:Xt.pluck,action:null}),at(Yt[0].match|0,[u.IF_NOT_ERROR],vt(Yt.slice(1),{sp:Xt.sp+1,env:Xt.env,pluck:Xt.pluck,action:Xt.action}),Q(re>1?[u.POP_N,re]:[u.POP],[u.POP_CURR_POS],[u.PUSH_FAILED])))}else{if(Xt.pluck.length>0)return Q([u.PLUCK,yt.elements.length+1,Xt.pluck.length],Xt.pluck.map(re=>Xt.sp-re));if(Xt.action){let re=J(!1,Object.keys(Xt.env),Xt.action);return Q([u.LOAD_SAVED_POS,yt.elements.length],U(re,yt.elements.length+1,Xt.env,Xt.sp))}else return Q([u.WRAP,yt.elements.length],[u.NIP])}}return Q([u.PUSH_CURR_POS],vt(yt.elements,{sp:Et.sp+1,env:Et.env,pluck:[],action:Et.action}))},labeled(yt,Et){let vt=Et.env,Yt=yt.label,Xt=Et.sp+1;return Yt&&(vt=N(Et.env),Et.env[yt.label]=Xt),yt.pick&&Et.pluck.push(Xt),Ot(yt.expression,{sp:Et.sp,env:vt,action:null})},text(yt,Et){return Q([u.PUSH_CURR_POS],Ot(yt.expression,{sp:Et.sp+1,env:N(Et.env),action:null}),at(yt.match|0,[u.IF_NOT_ERROR],Q([u.POP],[u.TEXT]),[u.NIP]))},simple_and(yt,Et){return V(yt.expression,!1,Et)},simple_not(yt,Et){return V(yt.expression,!0,Et)},optional(yt,Et){return Q(Ot(yt.expression,{sp:Et.sp,env:N(Et.env),action:null}),at(-(yt.expression.match|0),[u.IF_ERROR],Q([u.POP],[u.PUSH_NULL]),[]))},zero_or_more(yt,Et){let vt=Ot(yt.expression,{sp:Et.sp+1,env:N(Et.env),action:null});return Q([u.PUSH_EMPTY_ARRAY],vt,It(vt),[u.POP])},one_or_more(yt,Et){let vt=Ot(yt.expression,{sp:Et.sp+1,env:N(Et.env),action:null});return Q([u.PUSH_EMPTY_ARRAY],vt,at(yt.expression.match|0,[u.IF_NOT_ERROR],Q(It(vt),[u.POP]),Q([u.POP],[u.POP],[u.PUSH_FAILED])))},group(yt,Et){return Ot(yt.expression,{sp:Et.sp,env:N(Et.env),action:null})},semantic_and(yt,Et){return lt(yt,!1,Et)},semantic_not(yt,Et){return lt(yt,!0,Et)},rule_ref(yt){return[u.RULE,n.indexOfRule(m,yt.name)]},literal(yt){if(yt.value.length>0){let Et=yt.match|0,vt=Et===g||Et===p&&!yt.ignoreCase?w(yt.ignoreCase?yt.value.toLowerCase():yt.value):null,Yt=Et!==p?tt({type:"literal",value:yt.value,ignoreCase:yt.ignoreCase}):null;return at(Et,yt.ignoreCase?[u.MATCH_STRING_IC,vt]:[u.MATCH_STRING,vt],yt.ignoreCase?[u.ACCEPT_N,yt.value.length]:[u.ACCEPT_STRING,vt],[u.FAIL,Yt])}return[u.PUSH_EMPTY_STRING]},class(yt){let Et=yt.match|0,vt=Et===g?j(yt):null,Yt=Et!==p?tt({type:"class",value:yt.parts,inverted:yt.inverted,ignoreCase:yt.ignoreCase}):null;return at(Et,[u.MATCH_CHAR_CLASS,vt],[u.ACCEPT_N,1],[u.FAIL,Yt])},any(yt){let Et=yt.match|0,vt=Et!==p?tt({type:"any"}):null;return at(Et,[u.MATCH_ANY],[u.ACCEPT_N,1],[u.FAIL,vt])}});Ot(m)}e.exports=E}),bS=ce((t,e)=>{"use strict";var n=class{constructor(u,s,p){this.sp=-1,this.maxSp=-1,this.varName=s,this.ruleName=u,this.type=p}name(u){if(u<0)throw new RangeError(`Rule '${this.ruleName}': The variable stack underflow: attempt to use a variable '${this.varName}<x>' at an index ${u}`);return this.varName+u}push(u){let s=this.name(++this.sp)+" = "+u+";";return this.sp>this.maxSp&&(this.maxSp=this.sp),s}pop(u){return u!==void 0?(this.sp-=u,Array.from({length:u},(s,p)=>this.name(this.sp+1+p))):this.name(this.sp--)}top(){return this.name(this.sp)}index(u){if(u<0)throw new RangeError(`Rule '${this.ruleName}': The variable stack overflow: attempt to get a variable at a negative index ${u}`);return this.name(this.sp-u)}result(){if(this.maxSp<0)throw new RangeError(`Rule '${this.ruleName}': The variable stack is empty, can't get the result'`);return this.name(0)}defines(){return this.maxSp<0?"":this.type+" "+Array.from({length:this.maxSp+1},(u,s)=>this.name(s)).join(", ")+";"}checkedIf(u,s,p){let g=this.sp;if(s(),p){let y=this.sp;if(this.sp=g,p(),y!==this.sp)throw new Error("Rule '"+this.ruleName+"', position "+u+": Branches of a condition can't move the stack pointer differently (before: "+g+", after then: "+y+", after else: "+this.sp+").")}}checkedLoop(u,s){let p=this.sp;if(s(),p!==this.sp)throw new Error("Rule '"+this.ruleName+"', position "+u+": Body of a loop can't move the stack pointer (before: "+p+", after: "+this.sp+").")}};e.exports=n}),M2=ce((t,e)=>{"use strict";e.exports="2.0.1"}),_S=ce(t=>{"use strict";function e(s){return s.charCodeAt(0).toString(16).toUpperCase()}t.hex=e;function n(s){return s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\v").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,p=>"\\x0"+e(p)).replace(/[\x10-\x1F\x7F-\xFF]/g,p=>"\\x"+e(p)).replace(/[\u0100-\u0FFF]/g,p=>"\\u0"+e(p)).replace(/[\u1000-\uFFFF]/g,p=>"\\u"+e(p))}t.stringEscape=n;function u(s){return s.replace(/\\/g,"\\\\").replace(/\//g,"\\/").replace(/]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\v").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,p=>"\\x0"+e(p)).replace(/[\x10-\x1F\x7F-\xFF]/g,p=>"\\x"+e(p)).replace(/[\u0100-\u0FFF]/g,p=>"\\u0"+e(p)).replace(/[\u1000-\uFFFF]/g,p=>"\\u"+e(p))}t.regexpClassEscape=u}),SS=ce(t=>{var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");t.encode=function(n){if(0<=n&&n<e.length)return e[n];throw new TypeError("Must be between 0 and 63: "+n)}}),$S=ce(t=>{var e=SS(),n=5,u=1<<n,s=u-1,p=u;function g(y){return y<0?(-y<<1)+1:(y<<1)+0}t.encode=function(y){let E="",m,C=g(y);do m=C&s,C>>>=n,C>0&&(m|=p),E+=e.encode(m);while(C>0);return E}}),k0=ce(t=>{function e(V,lt,It){if(lt in V)return V[lt];if(arguments.length===3)return It;throw new Error('"'+lt+'" is a required argument.')}t.getArg=e;var n=(function(){return!("__proto__"in Object.create(null))})();function u(V){return V}function s(V){return g(V)?"$"+V:V}t.toSetString=n?u:s;function p(V){return g(V)?V.slice(1):V}t.fromSetString=n?u:p;function g(V){if(!V)return!1;let lt=V.length;if(lt<9||V.charCodeAt(lt-1)!==95||V.charCodeAt(lt-2)!==95||V.charCodeAt(lt-3)!==111||V.charCodeAt(lt-4)!==116||V.charCodeAt(lt-5)!==111||V.charCodeAt(lt-6)!==114||V.charCodeAt(lt-7)!==112||V.charCodeAt(lt-8)!==95||V.charCodeAt(lt-9)!==95)return!1;for(let It=lt-10;It>=0;It--)if(V.charCodeAt(It)!==36)return!1;return!0}function y(V,lt){return V===lt?0:V===null?1:lt===null?-1:V>lt?1:-1}function E(V,lt){let It=V.generatedLine-lt.generatedLine;return It!==0||(It=V.generatedColumn-lt.generatedColumn,It!==0)||(It=y(V.source,lt.source),It!==0)||(It=V.originalLine-lt.originalLine,It!==0)||(It=V.originalColumn-lt.originalColumn,It!==0)?It:y(V.name,lt.name)}t.compareByGeneratedPositionsInflated=E;var m="http:",C=`${m}//host`;function a(V){return lt=>{let It=tt(lt),Ot=w(lt),yt=new URL(lt,Ot);V(yt);let Et=yt.toString();return It==="absolute"?Et:It==="scheme-relative"?Et.slice(m.length):It==="path-absolute"?Et.slice(C.length):J(Ot,Et)}}function H(V,lt){return new URL(V,lt).toString()}function X(V,lt){let It=0;do{let Ot=V+It++;if(lt.indexOf(Ot)===-1)return Ot}while(!0)}function w(V){let lt=V.split("..").length-1,It=X("p",V),Ot=`${C}/`;for(let yt=0;yt<lt;yt++)Ot+=`${It}/`;return Ot}var j=/^[A-Za-z0-9\+\-\.]+:/;function tt(V){return V[0]==="/"?V[1]==="/"?"scheme-relative":"path-absolute":j.test(V)?"absolute":"path-relative"}function J(V,lt){typeof V=="string"&&(V=new URL(V)),typeof lt=="string"&&(lt=new URL(lt));let It=lt.pathname.split("/"),Ot=V.pathname.split("/");for(Ot.length>0&&!Ot[Ot.length-1]&&Ot.pop();It.length>0&&Ot.length>0&&It[0]===Ot[0];)It.shift(),Ot.shift();return Ot.map(()=>"..").concat(It).join("/")+lt.search+lt.hash}var N=a(V=>{V.pathname=V.pathname.replace(/\/?$/,"/")}),Q=a(V=>{});t.normalize=Q;function at(V,lt){let It=tt(lt),Ot=tt(V);if(V=N(V),It==="absolute")return H(lt,void 0);if(Ot==="absolute")return H(lt,V);if(It==="scheme-relative")return Q(lt);if(Ot==="scheme-relative")return H(lt,H(V,C)).slice(m.length);if(It==="path-absolute")return Q(lt);if(Ot==="path-absolute")return H(lt,H(V,C)).slice(C.length);let yt=w(lt+V),Et=H(lt,H(V,yt));return J(yt,Et)}t.join=at;function q(V,lt){let It=U(V,lt);return typeof It=="string"?It:Q(lt)}t.relative=q;function U(V,lt){if(tt(V)!==tt(lt))return null;let It=w(V+lt),Ot=new URL(V,It),yt=new URL(lt,It);try{new URL("",yt.toString())}catch{return null}return yt.protocol!==Ot.protocol||yt.user!==Ot.user||yt.password!==Ot.password||yt.hostname!==Ot.hostname||yt.port!==Ot.port?null:J(Ot,yt)}}),kS=ce(t=>{var e=class _p{constructor(){this._array=[],this._set=new Map}static fromArray(u,s){let p=new _p;for(let g=0,y=u.length;g<y;g++)p.add(u[g],s);return p}size(){return this._set.size}add(u,s){let p=this.has(u),g=this._array.length;(!p||s)&&this._array.push(u),p||this._set.set(u,g)}has(u){return this._set.has(u)}indexOf(u){let s=this._set.get(u);if(s>=0)return s;throw new Error('"'+u+'" is not in the set.')}at(u){if(u>=0&&u<this._array.length)return this._array[u];throw new Error("No element indexed by "+u)}toArray(){return this._array.slice()}};t.ArraySet=e}),jS=ce(t=>{var e=k0();function n(s,p){let g=s.generatedLine,y=p.generatedLine,E=s.generatedColumn,m=p.generatedColumn;return y>g||y==g&&m>=E||e.compareByGeneratedPositionsInflated(s,p)<=0}var u=class{constructor(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}unsortedForEach(s,p){this._array.forEach(s,p)}add(s){n(this._last,s)?(this._last=s,this._array.push(s)):(this._sorted=!1,this._array.push(s))}toArray(){return this._sorted||(this._array.sort(e.compareByGeneratedPositionsInflated),this._sorted=!0),this._array}};t.MappingList=u}),Y2=ce(t=>{var e=$S(),n=k0(),u=kS().ArraySet,s=jS().MappingList,p=class Sp{constructor(y){y||(y={}),this._file=n.getArg(y,"file",null),this._sourceRoot=n.getArg(y,"sourceRoot",null),this._skipValidation=n.getArg(y,"skipValidation",!1),this._sources=new u,this._names=new u,this._mappings=new s,this._sourcesContents=null}static fromSourceMap(y){let E=y.sourceRoot,m=new Sp({file:y.file,sourceRoot:E});return y.eachMapping(function(C){let a={generated:{line:C.generatedLine,column:C.generatedColumn}};C.source!=null&&(a.source=C.source,E!=null&&(a.source=n.relative(E,a.source)),a.original={line:C.originalLine,column:C.originalColumn},C.name!=null&&(a.name=C.name)),m.addMapping(a)}),y.sources.forEach(function(C){let a=C;E!=null&&(a=n.relative(E,C)),m._sources.has(a)||m._sources.add(a);let H=y.sourceContentFor(C);H!=null&&m.setSourceContent(C,H)}),m}addMapping(y){let E=n.getArg(y,"generated"),m=n.getArg(y,"original",null),C=n.getArg(y,"source",null),a=n.getArg(y,"name",null);this._skipValidation||this._validateMapping(E,m,C,a),C!=null&&(C=String(C),this._sources.has(C)||this._sources.add(C)),a!=null&&(a=String(a),this._names.has(a)||this._names.add(a)),this._mappings.add({generatedLine:E.line,generatedColumn:E.column,originalLine:m&&m.line,originalColumn:m&&m.column,source:C,name:a})}setSourceContent(y,E){let m=y;this._sourceRoot!=null&&(m=n.relative(this._sourceRoot,m)),E!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[n.toSetString(m)]=E):this._sourcesContents&&(delete this._sourcesContents[n.toSetString(m)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))}applySourceMap(y,E,m){let C=E;if(E==null){if(y.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);C=y.file}let a=this._sourceRoot;a!=null&&(C=n.relative(a,C));let H=this._mappings.toArray().length>0?new u:this._sources,X=new u;this._mappings.unsortedForEach(function(w){if(w.source===C&&w.originalLine!=null){let J=y.originalPositionFor({line:w.originalLine,column:w.originalColumn});J.source!=null&&(w.source=J.source,m!=null&&(w.source=n.join(m,w.source)),a!=null&&(w.source=n.relative(a,w.source)),w.originalLine=J.line,w.originalColumn=J.column,J.name!=null&&(w.name=J.name))}let j=w.source;j!=null&&!H.has(j)&&H.add(j);let tt=w.name;tt!=null&&!X.has(tt)&&X.add(tt)},this),this._sources=H,this._names=X,y.sources.forEach(function(w){let j=y.sourceContentFor(w);j!=null&&(m!=null&&(w=n.join(m,w)),a!=null&&(w=n.relative(a,w)),this.setSourceContent(w,j))},this)}_validateMapping(y,E,m,C){if(E&&typeof E.line!="number"&&typeof E.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(y&&"line"in y&&"column"in y&&y.line>0&&y.column>=0&&!E&&!m&&!C)&&!(y&&"line"in y&&"column"in y&&E&&"line"in E&&"column"in E&&y.line>0&&y.column>=0&&E.line>0&&E.column>=0&&m))throw new Error("Invalid mapping: "+JSON.stringify({generated:y,source:m,original:E,name:C}))}_serializeMappings(){let y=0,E=1,m=0,C=0,a=0,H=0,X="",w,j,tt,J,N=this._mappings.toArray();for(let Q=0,at=N.length;Q<at;Q++){if(j=N[Q],w="",j.generatedLine!==E)for(y=0;j.generatedLine!==E;)w+=";",E++;else if(Q>0){if(!n.compareByGeneratedPositionsInflated(j,N[Q-1]))continue;w+=","}w+=e.encode(j.generatedColumn-y),y=j.generatedColumn,j.source!=null&&(J=this._sources.indexOf(j.source),w+=e.encode(J-H),H=J,w+=e.encode(j.originalLine-1-C),C=j.originalLine-1,w+=e.encode(j.originalColumn-m),m=j.originalColumn,j.name!=null&&(tt=this._names.indexOf(j.name),w+=e.encode(tt-a),a=tt)),X+=w}return X}_generateSourcesContent(y,E){return y.map(function(m){if(!this._sourcesContents)return null;E!=null&&(m=n.relative(E,m));let C=n.toSetString(m);return Object.prototype.hasOwnProperty.call(this._sourcesContents,C)?this._sourcesContents[C]:null},this)}toJSON(){let y={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(y.file=this._file),this._sourceRoot!=null&&(y.sourceRoot=this._sourceRoot),this._sourcesContents&&(y.sourcesContent=this._generateSourcesContent(y.sources,y.sourceRoot)),y}toString(){return JSON.stringify(this.toJSON())}};p.prototype._version=3,t.SourceMapGenerator=p}),qS=ce(t=>{var e=Y2().SourceMapGenerator,n=k0(),u=/(\r?\n)/,s=10,p="$$$isSourceNode$$$",g=class Fl{constructor(E,m,C,a,H){this.children=[],this.sourceContents={},this.line=E??null,this.column=m??null,this.source=C??null,this.name=H??null,this[p]=!0,a!=null&&this.add(a)}static fromStringWithSourceMap(E,m,C){let a=new Fl,H=E.split(u),X=0,w=function(){let at=U(),q=U()||"";return at+q;function U(){return X<H.length?H[X++]:void 0}},j=1,tt=0,J=null,N;return m.eachMapping(function(at){if(J!==null)if(j<at.generatedLine)Q(J,w()),j++,tt=0;else{N=H[X]||"";let q=N.substr(0,at.generatedColumn-tt);H[X]=N.substr(at.generatedColumn-tt),tt=at.generatedColumn,Q(J,q),J=at;return}for(;j<at.generatedLine;)a.add(w()),j++;tt<at.generatedColumn&&(N=H[X]||"",a.add(N.substr(0,at.generatedColumn)),H[X]=N.substr(at.generatedColumn),tt=at.generatedColumn),J=at},this),X<H.length&&(J&&Q(J,w()),a.add(H.splice(X).join(""))),m.sources.forEach(function(at){let q=m.sourceContentFor(at);q!=null&&(C!=null&&(at=n.join(C,at)),a.setSourceContent(at,q))}),a;function Q(at,q){if(at===null||at.source===void 0)a.add(q);else{let U=C?n.join(C,at.source):at.source;a.add(new Fl(at.originalLine,at.originalColumn,U,q,at.name))}}}add(E){if(Array.isArray(E))E.forEach(function(m){this.add(m)},this);else if(E[p]||typeof E=="string")E&&this.children.push(E);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+E);return this}prepend(E){if(Array.isArray(E))for(let m=E.length-1;m>=0;m--)this.prepend(E[m]);else if(E[p]||typeof E=="string")this.children.unshift(E);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+E);return this}walk(E){let m;for(let C=0,a=this.children.length;C<a;C++)m=this.children[C],m[p]?m.walk(E):m!==""&&E(m,{source:this.source,line:this.line,column:this.column,name:this.name})}join(E){let m,C,a=this.children.length;if(a>0){for(m=[],C=0;C<a-1;C++)m.push(this.children[C]),m.push(E);m.push(this.children[C]),this.children=m}return this}replaceRight(E,m){let C=this.children[this.children.length-1];return C[p]?C.replaceRight(E,m):typeof C=="string"?this.children[this.children.length-1]=C.replace(E,m):this.children.push("".replace(E,m)),this}setSourceContent(E,m){this.sourceContents[n.toSetString(E)]=m}walkSourceContents(E){for(let C=0,a=this.children.length;C<a;C++)this.children[C][p]&&this.children[C].walkSourceContents(E);let m=Object.keys(this.sourceContents);for(let C=0,a=m.length;C<a;C++)E(n.fromSetString(m[C]),this.sourceContents[m[C]])}toString(){let E="";return this.walk(function(m){E+=m}),E}toStringWithSourceMap(E){let m={code:"",line:1,column:0},C=new e(E),a=!1,H=null,X=null,w=null,j=null;return this.walk(function(tt,J){m.code+=tt,J.source!==null&&J.line!==null&&J.column!==null?((H!==J.source||X!==J.line||w!==J.column||j!==J.name)&&C.addMapping({source:J.source,original:{line:J.line,column:J.column},generated:{line:m.line,column:m.column},name:J.name}),H=J.source,X=J.line,w=J.column,j=J.name,a=!0):a&&(C.addMapping({generated:{line:m.line,column:m.column}}),H=null,a=!1);for(let N=0,Q=tt.length;N<Q;N++)tt.charCodeAt(N)===s?(m.line++,m.column=0,N+1===Q?(H=null,a=!1):a&&C.addMapping({source:J.source,original:{line:J.line,column:J.column},generated:{line:m.line,column:m.column},name:J.name})):m.column++}),this.walkSourceContents(function(tt,J){C.setSourceContent(tt,J)}),{code:m.code,map:C}}};t.SourceNode=g}),VS=ce(t=>{t.SourceMapGenerator=Y2().SourceMapGenerator,t.SourceNode=qS().SourceNode}),YS=ce((t,e)=>{"use strict";var n=po(),u=k2(),s=bS(),p=M2(),{stringEscape:g,regexpClassEscape:y}=_S(),{SourceNode:E}=VS();function m(H,X,w){let j=X.start.line,tt=X.start.column-1,J=H.split(`
`);return J.length===1?new E(j,tt,X.source,H,w):new E(null,null,X.source,J.map((N,Q)=>new E(j+Q,Q===0?tt:0,X.source,Q===J.length-1?N:[N,`
`],w)))}function C(H,X,w,j,tt){return w?new E(null,null,w.source,[H,m(X,w,tt),new E(w.end.line,w.end.column-1,w.source,j)]):new E(null,null,null,[H,X,j])}function a(H,X){function w(yt){return yt instanceof E?yt:yt.replace(/^(.+)$/gm,"  $1")}function j(yt){return"peg$c"+yt}function tt(yt){return"peg$r"+yt}function J(yt){return"peg$e"+yt}function N(yt){return"peg$f"+yt}function Q(yt){return"peg$parse"+yt}function at(){function yt(Xt){return'"'+g(Xt)+'"'}function Et(Xt){return"/^["+(Xt.inverted?"^":"")+Xt.value.map(re=>Array.isArray(re)?y(re[0])+"-"+y(re[1]):y(re)).join("")+"]/"+(Xt.ignoreCase?"i":"")}function vt(Xt){switch(Xt.type){case"rule":return'peg$otherExpectation("'+g(Xt.value)+'")';case"literal":return'peg$literalExpectation("'+g(Xt.value)+'", '+Xt.ignoreCase+")";case"class":return"peg$classExpectation(["+Xt.value.map(re=>Array.isArray(re)?'["'+g(re[0])+'", "'+g(re[1])+'"]':'"'+g(re)+'"').join(", ")+"], "+Xt.inverted+", "+Xt.ignoreCase+")";case"any":return"peg$anyExpectation()";default:throw new Error("Unknown expectation type ("+JSON.stringify(Xt)+")")}}function Yt(Xt,re){return C(`
  var ${N(re)} = function(${Xt.params.join(", ")}) {`,Xt.body,Xt.location,"};")}return new E(null,null,X.grammarSource,[H.literals.map((Xt,re)=>"  var "+j(re)+" = "+yt(Xt)+";").concat("",H.classes.map((Xt,re)=>"  var "+tt(re)+" = "+Et(Xt)+";")).concat("",H.expectations.map((Xt,re)=>"  var "+J(re)+" = "+vt(Xt)+";")).concat("").join(`
`),H.functions.map(Yt)])}function q(yt,Et){let vt=[];return vt.push(""),X.trace&&vt.push("peg$tracer.trace({",'  type: "rule.enter",',"  rule: "+yt+",","  location: peg$computeLocation(startPos, startPos)","});",""),X.cache&&(vt.push("var key = peg$currPos * "+H.rules.length+" + "+Et+";","var cached = peg$resultsCache[key];","","if (cached) {","  peg$currPos = cached.nextPos;",""),X.trace&&vt.push("if (cached.result !== peg$FAILED) {","  peg$tracer.trace({",'    type: "rule.match",',"    rule: "+yt+",","    result: cached.result,","    location: peg$computeLocation(startPos, peg$currPos)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+yt+",","    location: peg$computeLocation(startPos, startPos)","  });","}",""),vt.push("  return cached.result;","}","")),vt}function U(yt,Et){let vt=[];return X.cache&&vt.push("","peg$resultsCache[key] = { nextPos: peg$currPos, result: "+Et+" };"),X.trace&&vt.push("","if ("+Et+" !== peg$FAILED) {","  peg$tracer.trace({",'    type: "rule.match",',"    rule: "+yt+",","    result: "+Et+",","    location: peg$computeLocation(startPos, peg$currPos)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+yt+",","    location: peg$computeLocation(startPos, startPos)","  });","}"),vt.push("","return "+Et+";"),vt}function V(yt){let Et=[],vt=new s(yt.name,"s","var");function Yt(re){let ae=0,He=re.length,de=[],pe;function Ce(We,we){let Se=we+3,Qe=re[ae+Se-2],Ke=re[ae+Se-1],Ze,vr;vt.checkedIf(ae,()=>{ae+=Se,Ze=Yt(re.slice(ae,ae+Qe)),ae+=Qe},Ke>0?()=>{vr=Yt(re.slice(ae,ae+Ke)),ae+=Ke}:null),de.push("if ("+We+") {"),de.push(...Ze.map(w)),Ke>0&&(de.push("} else {"),de.push(...vr.map(w))),de.push("}")}function Ie(We){let we=re[ae+2-1],Se;vt.checkedLoop(ae,()=>{ae+=2,Se=Yt(re.slice(ae,ae+we)),ae+=we}),de.push("while ("+We+") {"),de.push(...Se.map(w)),de.push("}")}function Ve(){let We=re[ae+4-1],we=N(re[ae+1])+"("+re.slice(ae+4,ae+4+We).map(Se=>vt.index(Se)).join(", ")+")";vt.pop(re[ae+2]),de.push(vt.push(we)),ae+=4+We}for(;ae<He;)switch(re[ae]){case u.PUSH_EMPTY_STRING:de.push(vt.push("''")),ae++;break;case u.PUSH_CURR_POS:de.push(vt.push("peg$currPos")),ae++;break;case u.PUSH_UNDEFINED:de.push(vt.push("undefined")),ae++;break;case u.PUSH_NULL:de.push(vt.push("null")),ae++;break;case u.PUSH_FAILED:de.push(vt.push("peg$FAILED")),ae++;break;case u.PUSH_EMPTY_ARRAY:de.push(vt.push("[]")),ae++;break;case u.POP:vt.pop(),ae++;break;case u.POP_CURR_POS:de.push("peg$currPos = "+vt.pop()+";"),ae++;break;case u.POP_N:vt.pop(re[ae+1]),ae+=2;break;case u.NIP:pe=vt.pop(),vt.pop(),de.push(vt.push(pe)),ae++;break;case u.APPEND:pe=vt.pop(),de.push(vt.top()+".push("+pe+");"),ae++;break;case u.WRAP:de.push(vt.push("["+vt.pop(re[ae+1]).join(", ")+"]")),ae+=2;break;case u.TEXT:de.push(vt.push("input.substring("+vt.pop()+", peg$currPos)")),ae++;break;case u.PLUCK:{let We=re[ae+3-1],we=3+We;pe=re.slice(ae+3,ae+we),pe=We===1?vt.index(pe[0]):`[ ${pe.map(Se=>vt.index(Se)).join(", ")} ]`,vt.pop(re[ae+1]),de.push(vt.push(pe)),ae+=we;break}case u.IF:Ce(vt.top(),0);break;case u.IF_ERROR:Ce(vt.top()+" === peg$FAILED",0);break;case u.IF_NOT_ERROR:Ce(vt.top()+" !== peg$FAILED",0);break;case u.WHILE_NOT_ERROR:Ie(vt.top()+" !== peg$FAILED");break;case u.MATCH_ANY:Ce("input.length > peg$currPos",0);break;case u.MATCH_STRING:Ce(H.literals[re[ae+1]].length>1?"input.substr(peg$currPos, "+H.literals[re[ae+1]].length+") === "+j(re[ae+1]):"input.charCodeAt(peg$currPos) === "+H.literals[re[ae+1]].charCodeAt(0),1);break;case u.MATCH_STRING_IC:Ce("input.substr(peg$currPos, "+H.literals[re[ae+1]].length+").toLowerCase() === "+j(re[ae+1]),1);break;case u.MATCH_CHAR_CLASS:Ce(tt(re[ae+1])+".test(input.charAt(peg$currPos))",1);break;case u.ACCEPT_N:de.push(vt.push(re[ae+1]>1?"input.substr(peg$currPos, "+re[ae+1]+")":"input.charAt(peg$currPos)")),de.push(re[ae+1]>1?"peg$currPos += "+re[ae+1]+";":"peg$currPos++;"),ae+=2;break;case u.ACCEPT_STRING:de.push(vt.push(j(re[ae+1]))),de.push(H.literals[re[ae+1]].length>1?"peg$currPos += "+H.literals[re[ae+1]].length+";":"peg$currPos++;"),ae+=2;break;case u.FAIL:de.push(vt.push("peg$FAILED")),de.push("if (peg$silentFails === 0) { peg$fail("+J(re[ae+1])+"); }"),ae+=2;break;case u.LOAD_SAVED_POS:de.push("peg$savedPos = "+vt.index(re[ae+1])+";"),ae+=2;break;case u.UPDATE_SAVED_POS:de.push("peg$savedPos = peg$currPos;"),ae++;break;case u.CALL:Ve();break;case u.RULE:de.push(vt.push(Q(H.rules[re[ae+1]].name)+"()")),ae+=2;break;case u.SILENT_FAILS_ON:de.push("peg$silentFails++;"),ae++;break;case u.SILENT_FAILS_OFF:de.push("peg$silentFails--;"),ae++;break;default:throw new Error("Invalid opcode: "+re[ae]+".")}return de}let Xt=Yt(yt.bytecode);return Et.push(C("  function ",Q(yt.name),yt.nameLocation,`() {
`,yt.name)),X.trace&&Et.push("  var startPos = peg$currPos;"),Et.push(w(vt.defines())),Et.push(...q('"'+g(yt.name)+'"',n.indexOfRule(H,yt.name)).map(w)),Et.push(...Xt.map(w)),Et.push(...U('"'+g(yt.name)+'"',vt.result()).map(w)),Et.push("}"),Et}function lt(yt){return yt.codeLocation?m(yt.code,yt.codeLocation,"$"+yt.type):yt.code}function It(){let yt=[];H.topLevelInitializer&&(yt.push(lt(H.topLevelInitializer)),yt.push("")),yt.push("function peg$subclass(child, parent) {","  function C() { this.constructor = child; }","  C.prototype = parent.prototype;","  child.prototype = new C();","}","","function peg$SyntaxError(message, expected, found, location) {","  var self = Error.call(this, message);","  // istanbul ignore next Check is a necessary evil to support older environments","  if (Object.setPrototypeOf) {","    Object.setPrototypeOf(self, peg$SyntaxError.prototype);","  }","  self.expected = expected;","  self.found = found;","  self.location = location;",'  self.name = "SyntaxError";',"  return self;","}","","peg$subclass(peg$SyntaxError, Error);","","function peg$padEnd(str, targetLength, padString) {",'  padString = padString || " ";',"  if (str.length > targetLength) { return str; }","  targetLength -= str.length;","  padString += padString.repeat(targetLength);","  return str + padString.slice(0, targetLength);","}","","peg$SyntaxError.prototype.format = function(sources) {",'  var str = "Error: " + this.message;',"  if (this.location) {","    var src = null;","    var k;","    for (k = 0; k < sources.length; k++) {","      if (sources[k].source === this.location.source) {","        src = sources[k].text.split(/\\r\\n|\\n|\\r/g);","        break;","      }","    }","    var s = this.location.start;",'    var loc = this.location.source + ":" + s.line + ":" + s.column;',"    if (src) {","      var e = this.location.end;",`      var filler = peg$padEnd("", s.line.toString().length, ' ');`,"      var line = src[s.line - 1];","      var last = s.line === e.line ? e.column : line.length + 1;","      var hatLen = (last - s.column) || 1;",'      str += "\\n --> " + loc + "\\n"','          + filler + " |\\n"','          + s.line + " | " + line + "\\n"',`          + filler + " | " + peg$padEnd("", s.column - 1, ' ')`,'          + peg$padEnd("", hatLen, "^");',"    } else {",'      str += "\\n at " + loc;',"    }","  }","  return str;","};","","peg$SyntaxError.buildMessage = function(expected, found) {","  var DESCRIBE_EXPECTATION_FNS = {","    literal: function(expectation) {",'      return "\\"" + literalEscape(expectation.text) + "\\"";',"    },","","    class: function(expectation) {","      var escapedParts = expectation.parts.map(function(part) {","        return Array.isArray(part)",'          ? classEscape(part[0]) + "-" + classEscape(part[1])',"          : classEscape(part);","      });","",'      return "[" + (expectation.inverted ? "^" : "") + escapedParts.join("") + "]";',"    },","","    any: function() {",'      return "any character";',"    },","","    end: function() {",'      return "end of input";',"    },","","    other: function(expectation) {","      return expectation.description;","    }","  };","","  function hex(ch) {","    return ch.charCodeAt(0).toString(16).toUpperCase();","  }","","  function literalEscape(s) {","    return s",'      .replace(/\\\\/g, "\\\\\\\\")','      .replace(/"/g,  "\\\\\\"")','      .replace(/\\0/g, "\\\\0")','      .replace(/\\t/g, "\\\\t")','      .replace(/\\n/g, "\\\\n")','      .replace(/\\r/g, "\\\\r")','      .replace(/[\\x00-\\x0F]/g,          function(ch) { return "\\\\x0" + hex(ch); })','      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return "\\\\x"  + hex(ch); });',"  }","","  function classEscape(s) {","    return s",'      .replace(/\\\\/g, "\\\\\\\\")','      .replace(/\\]/g, "\\\\]")','      .replace(/\\^/g, "\\\\^")','      .replace(/-/g,  "\\\\-")','      .replace(/\\0/g, "\\\\0")','      .replace(/\\t/g, "\\\\t")','      .replace(/\\n/g, "\\\\n")','      .replace(/\\r/g, "\\\\r")','      .replace(/[\\x00-\\x0F]/g,          function(ch) { return "\\\\x0" + hex(ch); })','      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return "\\\\x"  + hex(ch); });',"  }","","  function describeExpectation(expectation) {","    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);","  }","","  function describeExpected(expected) {","    var descriptions = expected.map(describeExpectation);","    var i, j;","","    descriptions.sort();","","    if (descriptions.length > 0) {","      for (i = 1, j = 1; i < descriptions.length; i++) {","        if (descriptions[i - 1] !== descriptions[i]) {","          descriptions[j] = descriptions[i];","          j++;","        }","      }","      descriptions.length = j;","    }","","    switch (descriptions.length) {","      case 1:","        return descriptions[0];","","      case 2:",'        return descriptions[0] + " or " + descriptions[1];',"","      default:",'        return descriptions.slice(0, -1).join(", ")','          + ", or "',"          + descriptions[descriptions.length - 1];","    }","  }","","  function describeFound(found) {",'    return found ? "\\"" + literalEscape(found) + "\\"" : "end of input";',"  }","",'  return "Expected " + describeExpected(expected) + " but " + describeFound(found) + " found.";',"};",""),X.trace&&yt.push("function peg$DefaultTracer() {","  this.indentLevel = 0;","}","","peg$DefaultTracer.prototype.trace = function(event) {","  var that = this;","","  function log(event) {","    function repeat(string, n) {",'       var result = "", i;',"","       for (i = 0; i < n; i++) {","         result += string;","       }","","       return result;","    }","","    function pad(string, length) {",'      return string + repeat(" ", length - string.length);',"    }","",'    if (typeof console === "object") {',"      console.log(",'        event.location.start.line + ":" + event.location.start.column + "-"','          + event.location.end.line + ":" + event.location.end.column + " "','          + pad(event.type, 10) + " "','          + repeat("  ", that.indentLevel) + event.rule',"      );","    }","  }","","  switch (event.type) {",'    case "rule.enter":',"      log(event);","      this.indentLevel++;","      break;","",'    case "rule.match":',"      this.indentLevel--;","      log(event);","      break;","",'    case "rule.fail":',"      this.indentLevel--;","      log(event);","      break;","","    default:",'      throw new Error("Invalid event type: " + event.type + ".");',"  }","};","");let Et="{ "+X.allowedStartRules.map(Yt=>Yt+": "+Q(Yt)).join(", ")+" }",vt=Q(X.allowedStartRules[0]);return yt.push("function peg$parse(input, options) {","  options = options !== undefined ? options : {};","","  var peg$FAILED = {};","  var peg$source = options.grammarSource;","","  var peg$startRuleFunctions = "+Et+";","  var peg$startRuleFunction = "+vt+";","",at(),"","  var peg$currPos = 0;","  var peg$savedPos = 0;","  var peg$posDetailsCache = [{ line: 1, column: 1 }];","  var peg$maxFailPos = 0;","  var peg$maxFailExpected = [];","  var peg$silentFails = 0;",""),X.cache&&yt.push("  var peg$resultsCache = {};",""),X.trace&&yt.push('  var peg$tracer = "tracer" in options ? options.tracer : new peg$DefaultTracer();',""),yt.push("  var peg$result;","",'  if ("startRule" in options) {',"    if (!(options.startRule in peg$startRuleFunctions)) {",`      throw new Error("Can't start parsing from rule \\"" + options.startRule + "\\".");`,"    }","","    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];","  }","","  function text() {","    return input.substring(peg$savedPos, peg$currPos);","  }","","  function offset() {","    return peg$savedPos;","  }","","  function range() {","    return {","      source: peg$source,","      start: peg$savedPos,","      end: peg$currPos","    };","  }","","  function location() {","    return peg$computeLocation(peg$savedPos, peg$currPos);","  }","","  function expected(description, location) {","    location = location !== undefined","      ? location","      : peg$computeLocation(peg$savedPos, peg$currPos);","","    throw peg$buildStructuredError(","      [peg$otherExpectation(description)],","      input.substring(peg$savedPos, peg$currPos),","      location","    );","  }","","  function error(message, location) {","    location = location !== undefined","      ? location","      : peg$computeLocation(peg$savedPos, peg$currPos);","","    throw peg$buildSimpleError(message, location);","  }","","  function peg$literalExpectation(text, ignoreCase) {",'    return { type: "literal", text: text, ignoreCase: ignoreCase };',"  }","","  function peg$classExpectation(parts, inverted, ignoreCase) {",'    return { type: "class", parts: parts, inverted: inverted, ignoreCase: ignoreCase };',"  }","","  function peg$anyExpectation() {",'    return { type: "any" };',"  }","","  function peg$endExpectation() {",'    return { type: "end" };',"  }","","  function peg$otherExpectation(description) {",'    return { type: "other", description: description };',"  }","","  function peg$computePosDetails(pos) {","    var details = peg$posDetailsCache[pos];","    var p;","","    if (details) {","      return details;","    } else {","      p = pos - 1;","      while (!peg$posDetailsCache[p]) {","        p--;","      }","","      details = peg$posDetailsCache[p];","      details = {","        line: details.line,","        column: details.column","      };","","      while (p < pos) {","        if (input.charCodeAt(p) === 10) {","          details.line++;","          details.column = 1;","        } else {","          details.column++;","        }","","        p++;","      }","","      peg$posDetailsCache[pos] = details;","","      return details;","    }","  }","","  function peg$computeLocation(startPos, endPos) {","    var startPosDetails = peg$computePosDetails(startPos);","    var endPosDetails = peg$computePosDetails(endPos);","","    return {","      source: peg$source,","      start: {","        offset: startPos,","        line: startPosDetails.line,","        column: startPosDetails.column","      },","      end: {","        offset: endPos,","        line: endPosDetails.line,","        column: endPosDetails.column","      }","    };","  }","","  function peg$fail(expected) {","    if (peg$currPos < peg$maxFailPos) { return; }","","    if (peg$currPos > peg$maxFailPos) {","      peg$maxFailPos = peg$currPos;","      peg$maxFailExpected = [];","    }","","    peg$maxFailExpected.push(expected);","  }","","  function peg$buildSimpleError(message, location) {","    return new peg$SyntaxError(message, null, null, location);","  }","","  function peg$buildStructuredError(expected, found, location) {","    return new peg$SyntaxError(","      peg$SyntaxError.buildMessage(expected, found),","      expected,","      found,","      location","    );","  }",""),H.rules.forEach(Yt=>{yt.push(...V(Yt).map(w)),yt.push("")}),H.initializer&&(yt.push(lt(H.initializer)),yt.push("")),yt.push("  peg$result = peg$startRuleFunction();","","  if (peg$result !== peg$FAILED && peg$currPos === input.length) {","    return peg$result;","  } else {","    if (peg$result !== peg$FAILED && peg$currPos < input.length) {","      peg$fail(peg$endExpectation());","    }","","    throw peg$buildStructuredError(","      peg$maxFailExpected,","      peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,","      peg$maxFailPos < input.length","        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)","        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)","    );","  }","}"),new E(null,null,X.grammarSource,yt.map(Yt=>Yt instanceof E?Yt:Yt+`
`))}function Ot(yt){function Et(){return[`// Generated by Peggy ${p}.`,"//","// https://peggyjs.org/"]}function vt(){return X.trace?["{","  SyntaxError: peg$SyntaxError,","  DefaultTracer: peg$DefaultTracer,","  parse: peg$parse","}"].join(`
`):["{","  SyntaxError: peg$SyntaxError,","  parse: peg$parse","}"].join(`
`)}let Yt={bare(){return[...Et(),"(function() {",'  "use strict";',"",yt,"",w("return "+vt()+";"),"})()"]},commonjs(){let Xt=Object.keys(X.dependencies),re=Et();return re.push("",'"use strict";',""),Xt.length>0&&(Xt.forEach(ae=>{re.push("var "+ae+' = require("'+g(X.dependencies[ae])+'");')}),re.push("")),re.push(yt,"","module.exports = "+vt()+";"),re},es(){let Xt=Object.keys(X.dependencies),re=Et();return re.push(""),Xt.length>0&&(Xt.forEach(ae=>{re.push("import "+ae+' from "'+g(X.dependencies[ae])+'";')}),re.push("")),re.push(yt,"","export {","  peg$SyntaxError as SyntaxError,",X.trace?"  peg$DefaultTracer as DefaultTracer,":"","  peg$parse as parse","};"),re},amd(){let Xt=Object.keys(X.dependencies),re="["+Xt.map(He=>X.dependencies[He]).map(He=>'"'+g(He)+'"').join(", ")+"]",ae=Xt.join(", ");return[...Et(),"define("+re+", function("+ae+") {",'  "use strict";',"",yt,"",w("return "+vt()+";"),"});"]},globals(){return[...Et(),"(function(root) {",'  "use strict";',"",yt,"",w("root."+X.exportVar+" = "+vt()+";"),"})(this);"]},umd(){let Xt=Object.keys(X.dependencies),re=Xt.map(Ce=>X.dependencies[Ce]),ae="["+re.map(Ce=>'"'+g(Ce)+'"').join(", ")+"]",He=re.map(Ce=>'require("'+g(Ce)+'")').join(", "),de=Xt.join(", "),pe=Et();return pe.push("(function(root, factory) {",'  if (typeof define === "function" && define.amd) {',"    define("+ae+", factory);",'  } else if (typeof module === "object" && module.exports) {',"    module.exports = factory("+He+");"),X.exportVar!==null&&pe.push("  } else {","    root."+X.exportVar+" = factory();"),pe.push("  }","})(this, function("+de+") {",'  "use strict";',"",yt,"",w("return "+vt()+";"),"});"),pe}}[X.format]();return new E(null,null,X.grammarSource,Yt.map(Xt=>Xt instanceof E?Xt:Xt+`
`))}H.code=Ot(It())}e.exports=a}),XS=ce((t,e)=>{"use strict";var n=po(),u=ys();function s(p,g,y){function E(a){return a.type==="rule"&&a.expression.type==="rule_ref"}function m(a,H,X){u.build({rule_ref(w){w.name===H&&(w.name=X,y.info(`Proxy rule "${H}" replaced by the rule "${X}"`,w.location,[{message:"This rule will be used",location:n.findRule(a,X).nameLocation}]))}})(a)}let C=[];p.rules.forEach((a,H)=>{E(a)&&(m(p,a.name,a.expression.name),g.allowedStartRules.indexOf(a.name)===-1&&C.push(H))}),C.reverse(),C.forEach(a=>{p.rules.splice(a,1)})}e.exports=s}),ZS=ce((t,e)=>{"use strict";var n=ys();function u(s,p,g){function y(C){let a={};return Object.keys(C).forEach(H=>{a[H]=C[H]}),a}function E(C,a){m(C.expression,y(a))}let m=n.build({rule(C){m(C.expression,{})},choice(C,a){C.alternatives.forEach(H=>{m(H,y(a))})},action:E,labeled(C,a){let H=C.label;H&&Object.prototype.hasOwnProperty.call(a,H)&&g.error(`Label "${C.label}" is already defined`,C.labelLocation,[{message:"Original label location",location:a[H]}]),m(C.expression,a),a[C.label]=C.labelLocation},text:E,simple_and:E,simple_not:E,optional:E,zero_or_more:E,one_or_more:E,group:E});m(s)}e.exports=u}),eF=ce((t,e)=>{"use strict";var n=ys();function u(s,p,g){let y={};n.build({rule(E){if(Object.prototype.hasOwnProperty.call(y,E.name)){g.error(`Rule "${E.name}" is already defined`,E.nameLocation,[{message:"Original rule location",location:y[E.name]}]);return}y[E.name]=E.nameLocation}})(s)}e.exports=u}),nF=ce((t,e)=>{"use strict";var n=po(),u=ys();function s(p,g,y){let E=[],m=[],C=u.build({rule(a){E.push(a.name),C(a.expression),E.pop()},sequence(a){a.elements.every(H=>(C(H),!n.alwaysConsumesOnSuccess(p,H)))},rule_ref(a){m.push(a);let H=n.findRule(p,a.name);if(E.indexOf(a.name)!==-1){E.push(a.name),y.error("Possible infinite loop when parsing (left recursion: "+E.join(" -> ")+")",H.nameLocation,m.map((X,w,j)=>({message:w+1!==j.length?`Step ${w+1}: call of the rule "${X.name}" without input consumption`:`Step ${w+1}: call itself without input consumption - left recursion`,location:X.location})));return}H&&C(H),m.pop()}});C(p)}e.exports=s}),aF=ce((t,e)=>{"use strict";var n=po(),u=ys();function s(p,g,y){u.build({zero_or_more(E){n.alwaysConsumesOnSuccess(p,E.expression)||y.error("Possible infinite loop when parsing (repetition used with an expression that may not consume any input)",E.location)},one_or_more(E){n.alwaysConsumesOnSuccess(p,E.expression)||y.error("Possible infinite loop when parsing (repetition used with an expression that may not consume any input)",E.location)}})(p)}e.exports=s}),oF=ce((t,e)=>{"use strict";var n=po(),u=ys();function s(p,g,y){u.build({rule_ref(E){n.findRule(p,E.name)||y.error(`Rule "${E.name}" is not defined`,E.location)}})(p)}e.exports=s}),cF=ce((t,e)=>{"use strict";var n=ys();function u(s,p,g){let y=n.build({action(E){y(E.expression,E)},labeled(E,m){E.pick&&m&&g.error('"@" cannot be used with an action block',E.labelLocation,[{message:"Action block location",location:m.codeLocation}]),y(E.expression)}});y(s)}e.exports=u}),hF=ce((t,e)=>{"use strict";var n=O0(),u=class{constructor(p){p=typeof p<"u"?p:{},typeof p.error=="function"&&(this.error=p.error),typeof p.warning=="function"&&(this.warning=p.warning),typeof p.info=="function"&&(this.info=p.info)}error(){}warning(){}info(){}},s=class{constructor(p){this._callbacks=new u(p),this._firstError=null,this.errors=0,this.problems=[],this.stage=null}error(...p){++this.errors,this._firstError===null&&(this._firstError=new n(...p),this._firstError.stage=this.stage,this._firstError.problems=this.problems),this.problems.push(["error",...p]),this._callbacks.error(this.stage,...p)}warning(...p){this.problems.push(["warning",...p]),this._callbacks.warning(this.stage,...p)}info(...p){this.problems.push(["info",...p]),this._callbacks.info(this.stage,...p)}checkErrors(){if(this.errors!==0)throw this._firstError}};e.exports=s}),dF=ce((exports,module)=>{"use strict";var generateBytecode=ES(),generateJS=YS(),inferenceMatchResult=L2(),removeProxyRules=XS(),reportDuplicateLabels=ZS(),reportDuplicateRules=eF(),reportInfiniteRecursion=nF(),reportInfiniteRepetition=aF(),reportUndefinedRules=oF(),reportIncorrectPlucking=cF(),Session=hF(),visitor=ys();function processOptions(t,e){let n={};return Object.keys(t).forEach(u=>{n[u]=t[u]}),Object.keys(e).forEach(u=>{Object.prototype.hasOwnProperty.call(n,u)||(n[u]=e[u])}),n}var compiler={visitor,passes:{check:[reportUndefinedRules,reportDuplicateRules,reportDuplicateLabels,reportInfiniteRecursion,reportInfiniteRepetition,reportIncorrectPlucking],transform:[removeProxyRules,inferenceMatchResult],generate:[generateBytecode,generateJS]},compile(ast,passes,options){if(options=options!==void 0?options:{},options=processOptions(options,{allowedStartRules:[ast.rules[0].name],cache:!1,dependencies:{},exportVar:null,format:"bare",output:"parser",trace:!1}),!Array.isArray(options.allowedStartRules))throw new Error("allowedStartRules must be an array");if(options.allowedStartRules.length===0)throw new Error("Must have at least one start rule");let allRules=ast.rules.map(t=>t.name);for(let t of options.allowedStartRules)if(allRules.indexOf(t)===-1)throw new Error(`Unknown start rule "${t}"`);let session=new Session(options);switch(Object.keys(passes).forEach(t=>{session.stage=t,session.info(`Process stage ${t}`),passes[t].forEach(e=>{session.info(`Process pass ${t}.${e.name}`),e(ast,options,session)}),session.checkErrors()}),options.output){case"parser":return eval(ast.code.toString());case"source":return ast.code.toString();case"source-and-map":return ast.code;default:throw new Error("Invalid output format: "+options.output+".")}}};module.exports=compiler}),gF=ce((t,e)=>{"use strict";var n={$:"text","&":"simple_and","!":"simple_not"},u={"?":"optional","*":"zero_or_more","+":"one_or_more"},s={"&":"semantic_and","!":"semantic_not"};function p(m,C){function a(){this.constructor=m}a.prototype=C.prototype,m.prototype=new a}function g(m,C,a,H){var X=Error.call(this,m);return Object.setPrototypeOf&&Object.setPrototypeOf(X,g.prototype),X.expected=C,X.found=a,X.location=H,X.name="SyntaxError",X}p(g,Error);function y(m,C,a){return a=a||" ",m.length>C?m:(C-=m.length,a+=a.repeat(C),m+a.slice(0,C))}g.prototype.format=function(m){var C="Error: "+this.message;if(this.location){var a=null,H;for(H=0;H<m.length;H++)if(m[H].source===this.location.source){a=m[H].text.split(/\r\n|\n|\r/g);break}var X=this.location.start,w=this.location.source+":"+X.line+":"+X.column;if(a){var j=this.location.end,tt=y("",X.line.toString().length," "),J=a[X.line-1],N=X.line===j.line?j.column:J.length+1,Q=N-X.column||1;C+=`
 --> `+w+`
`+tt+` |
`+X.line+" | "+J+`
`+tt+" | "+y("",X.column-1," ")+y("",Q,"^")}else C+=`
 at `+w}return C},g.buildMessage=function(m,C){var a={literal:function(N){return'"'+X(N.text)+'"'},class:function(N){var Q=N.parts.map(function(at){return Array.isArray(at)?w(at[0])+"-"+w(at[1]):w(at)});return"["+(N.inverted?"^":"")+Q.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(N){return N.description}};function H(N){return N.charCodeAt(0).toString(16).toUpperCase()}function X(N){return N.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(Q){return"\\x0"+H(Q)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(Q){return"\\x"+H(Q)})}function w(N){return N.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(Q){return"\\x0"+H(Q)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(Q){return"\\x"+H(Q)})}function j(N){return a[N.type](N)}function tt(N){var Q=N.map(j),at,q;if(Q.sort(),Q.length>0){for(at=1,q=1;at<Q.length;at++)Q[at-1]!==Q[at]&&(Q[q]=Q[at],q++);Q.length=q}switch(Q.length){case 1:return Q[0];case 2:return Q[0]+" or "+Q[1];default:return Q.slice(0,-1).join(", ")+", or "+Q[Q.length-1]}}function J(N){return N?'"'+X(N)+'"':"end of input"}return"Expected "+tt(m)+" but "+J(C)+" found."};function E(m,C){C=C!==void 0?C:{};var a={},H=C.grammarSource,X={Grammar:ku},w=ku,j="{",tt="}",J="=",N="/",Q="@",at=":",q="$",U="&",V="!",lt="?",It="*",Ot="+",yt="(",Et=")",vt="	",Yt="\v",Xt="\f",re=" ",ae="\xA0",He="\uFEFF",de=`
`,pe=`\r
`,Ce="\r",Ie="\u2028",Ve="\u2029",We="/*",we="*/",Se="//",Qe="_",Ke="\\",Ze="\u200C",vr="\u200D",Pr="i",Cr='"',et="'",k="[",Z="^",se="]",Ee="-",rr="0",fr="b",yr="f",ur="n",er="r",Wr="t",Lr="v",Sr="x",L="u",f=".",S=";",W=/^[\n\r\u2028\u2029]/,Bt=/^[0-9]/,Nt=/^[0-9a-f]/i,nt=/^[{}]/,zt=/^[a-z\xB5\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137-\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148-\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C-\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA-\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9-\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC-\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF-\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F-\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02AF\u0371\u0373\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D0-\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB-\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE-\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0561-\u0587\u13F8-\u13FD\u1D00-\u1D2B\u1D6B-\u1D77\u1D79-\u1D9A\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6-\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FC7\u1FD0-\u1FD3\u1FD6-\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6-\u1FF7\u210A\u210E-\u210F\u2113\u212F\u2134\u2139\u213C-\u213D\u2146-\u2149\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65-\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73-\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3-\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7B5\uA7B7\uA7FA\uAB30-\uAB5A\uAB60-\uAB65\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A]/,Lt=/^[\u02B0-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0374\u037A\u0559\u0640\u06E5-\u06E6\u07F4-\u07F5\u07FA\u081A\u0824\u0828\u0971\u0E46\u0EC6\u10FC\u17D7\u1843\u1AA7\u1C78-\u1C7D\u1D2C-\u1D6A\u1D78\u1D9B-\u1DBF\u2071\u207F\u2090-\u209C\u2C7C-\u2C7D\u2D6F\u2E2F\u3005\u3031-\u3035\u303B\u309D-\u309E\u30FC-\u30FE\uA015\uA4F8-\uA4FD\uA60C\uA67F\uA69C-\uA69D\uA717-\uA71F\uA770\uA788\uA7F8-\uA7F9\uA9CF\uA9E6\uAA70\uAADD\uAAF3-\uAAF4\uAB5C-\uAB5F\uFF70\uFF9E-\uFF9F]/,Be=/^[\xAA\xBA\u01BB\u01C0-\u01C3\u0294\u05D0-\u05EA\u05F0-\u05F2\u0620-\u063F\u0641-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u0800-\u0815\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0972-\u0980\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60-\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E45\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065-\u1066\u106E-\u1070\u1075-\u1081\u108E\u10D0-\u10FA\u10FD-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17DC\u1820-\u1842\u1844-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE-\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C77\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5-\u1CF6\u2135-\u2138\u2D30-\u2D67\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3006\u303C\u3041-\u3096\u309F\u30A1-\u30FA\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA014\uA016-\uA48C\uA4D0-\uA4F7\uA500-\uA60B\uA610-\uA61F\uA62A-\uA62B\uA66E\uA6A0-\uA6E5\uA78F\uA7F7\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9E0-\uA9E4\uA9E7-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA6F\uAA71-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADC\uAAE0-\uAAEA\uAAF2\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF66-\uFF6F\uFF71-\uFF9D\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,_t=/^[\u01C5\u01C8\u01CB\u01F2\u1F88-\u1F8F\u1F98-\u1F9F\u1FA8-\u1FAF\u1FBC\u1FCC\u1FFC]/,gt=/^[A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178-\u0179\u017B\u017D\u0181-\u0182\u0184\u0186-\u0187\u0189-\u018B\u018E-\u0191\u0193-\u0194\u0196-\u0198\u019C-\u019D\u019F-\u01A0\u01A2\u01A4\u01A6-\u01A7\u01A9\u01AC\u01AE-\u01AF\u01B1-\u01B3\u01B5\u01B7-\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A-\u023B\u023D-\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E-\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9-\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0-\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E-\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D-\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AD\uA7B0-\uA7B4\uA7B6\uFF21-\uFF3A]/,rt=/^[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E-\u094F\u0982-\u0983\u09BE-\u09C0\u09C7-\u09C8\u09CB-\u09CC\u09D7\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB-\u0ACC\u0B02-\u0B03\u0B3E\u0B40\u0B47-\u0B48\u0B4B-\u0B4C\u0B57\u0BBE-\u0BBF\u0BC1-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD7\u0C01-\u0C03\u0C41-\u0C44\u0C82-\u0C83\u0CBE\u0CC0-\u0CC4\u0CC7-\u0CC8\u0CCA-\u0CCB\u0CD5-\u0CD6\u0D02-\u0D03\u0D3E-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D57\u0D82-\u0D83\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DF2-\u0DF3\u0F3E-\u0F3F\u0F7F\u102B-\u102C\u1031\u1038\u103B-\u103C\u1056-\u1057\u1062-\u1064\u1067-\u106D\u1083-\u1084\u1087-\u108C\u108F\u109A-\u109C\u17B6\u17BE-\u17C5\u17C7-\u17C8\u1923-\u1926\u1929-\u192B\u1930-\u1931\u1933-\u1938\u1A19-\u1A1A\u1A55\u1A57\u1A61\u1A63-\u1A64\u1A6D-\u1A72\u1B04\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B44\u1B82\u1BA1\u1BA6-\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2-\u1BF3\u1C24-\u1C2B\u1C34-\u1C35\u1CE1\u1CF2-\u1CF3\u302E-\u302F\uA823-\uA824\uA827\uA880-\uA881\uA8B4-\uA8C3\uA952-\uA953\uA983\uA9B4-\uA9B5\uA9BA-\uA9BB\uA9BD-\uA9C0\uAA2F-\uAA30\uAA33-\uAA34\uAA4D\uAA7B\uAA7D\uAAEB\uAAEE-\uAAEF\uAAF5\uABE3-\uABE4\uABE6-\uABE7\uABE9-\uABEA\uABEC]/,F=/^[\u0300-\u036F\u0483-\u0487\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B62-\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC-\u0CCD\u0CE2-\u0CE3\u0D01\u0D41-\u0D44\u0D4D\u0D62-\u0D63\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099-\u309A\uA66F\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/,st=/^[0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]/,wt=/^[\u16EE-\u16F0\u2160-\u2182\u2185-\u2188\u3007\u3021-\u3029\u3038-\u303A\uA6E6-\uA6EF]/,Ct=/^[_\u203F-\u2040\u2054\uFE33-\uFE34\uFE4D-\uFE4F\uFF3F]/,Ut=/^[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,Wt=dr("{",!1),xe=dr("}",!1),te=dr("=",!1),ve=dr("/",!1),Re=dr("@",!1),sr=dr(":",!1),O=dr("$",!1),le=dr("&",!1),Kt=dr("!",!1),he=dr("?",!1),kt=dr("*",!1),ne=dr("+",!1),Oe=dr("(",!1),_e=dr(")",!1),Te=Bu(),Ue=ms("whitespace"),tr=dr("	",!1),lr=dr("\v",!1),ar=dr("\f",!1),Ar=dr(" ",!1),jr=dr("\xA0",!1),ln=dr("\uFEFF",!1),cn=kn([`
`,"\r","\u2028","\u2029"],!1,!1),Mr=ms("end of line"),mr=dr(`
`,!1),Nr=dr(`\r
`,!1),gn=dr("\r",!1),Kn=dr("\u2028",!1),tn=dr("\u2029",!1),Wn=ms("comment"),Br=dr("/*",!1),bn=dr("*/",!1),as=dr("//",!1),_n=ms("identifier"),$s=dr("_",!1),Zr=dr("\\",!1),_s=dr("\u200C",!1),ks=dr("\u200D",!1),Xs=ms("literal"),qs=dr("i",!1),os=ms("string"),In=dr('"',!1),Si=dr("'",!1),Xn=ms("character class"),ls=dr("[",!1),Vi=dr("^",!1),Ki=dr("]",!1),Bi=dr("-",!1),pu=dr("0",!1),Ei=dr("b",!1),zi=dr("f",!1),Ii=dr("n",!1),oi=dr("r",!1),ns=dr("t",!1),Cn=dr("v",!1),bt=dr("x",!1),Rt=dr("u",!1),Mt=kn([["0","9"]],!1,!1),ge=kn([["0","9"],["a","f"]],!1,!0),Me=dr(".",!1),Ye=ms("code block"),ir=kn(["{","}"],!1,!1),cr=kn([["a","z"],"\xB5",["\xDF","\xF6"],["\xF8","\xFF"],"\u0101","\u0103","\u0105","\u0107","\u0109","\u010B","\u010D","\u010F","\u0111","\u0113","\u0115","\u0117","\u0119","\u011B","\u011D","\u011F","\u0121","\u0123","\u0125","\u0127","\u0129","\u012B","\u012D","\u012F","\u0131","\u0133","\u0135",["\u0137","\u0138"],"\u013A","\u013C","\u013E","\u0140","\u0142","\u0144","\u0146",["\u0148","\u0149"],"\u014B","\u014D","\u014F","\u0151","\u0153","\u0155","\u0157","\u0159","\u015B","\u015D","\u015F","\u0161","\u0163","\u0165","\u0167","\u0169","\u016B","\u016D","\u016F","\u0171","\u0173","\u0175","\u0177","\u017A","\u017C",["\u017E","\u0180"],"\u0183","\u0185","\u0188",["\u018C","\u018D"],"\u0192","\u0195",["\u0199","\u019B"],"\u019E","\u01A1","\u01A3","\u01A5","\u01A8",["\u01AA","\u01AB"],"\u01AD","\u01B0","\u01B4","\u01B6",["\u01B9","\u01BA"],["\u01BD","\u01BF"],"\u01C6","\u01C9","\u01CC","\u01CE","\u01D0","\u01D2","\u01D4","\u01D6","\u01D8","\u01DA",["\u01DC","\u01DD"],"\u01DF","\u01E1","\u01E3","\u01E5","\u01E7","\u01E9","\u01EB","\u01ED",["\u01EF","\u01F0"],"\u01F3","\u01F5","\u01F9","\u01FB","\u01FD","\u01FF","\u0201","\u0203","\u0205","\u0207","\u0209","\u020B","\u020D","\u020F","\u0211","\u0213","\u0215","\u0217","\u0219","\u021B","\u021D","\u021F","\u0221","\u0223","\u0225","\u0227","\u0229","\u022B","\u022D","\u022F","\u0231",["\u0233","\u0239"],"\u023C",["\u023F","\u0240"],"\u0242","\u0247","\u0249","\u024B","\u024D",["\u024F","\u0293"],["\u0295","\u02AF"],"\u0371","\u0373","\u0377",["\u037B","\u037D"],"\u0390",["\u03AC","\u03CE"],["\u03D0","\u03D1"],["\u03D5","\u03D7"],"\u03D9","\u03DB","\u03DD","\u03DF","\u03E1","\u03E3","\u03E5","\u03E7","\u03E9","\u03EB","\u03ED",["\u03EF","\u03F3"],"\u03F5","\u03F8",["\u03FB","\u03FC"],["\u0430","\u045F"],"\u0461","\u0463","\u0465","\u0467","\u0469","\u046B","\u046D","\u046F","\u0471","\u0473","\u0475","\u0477","\u0479","\u047B","\u047D","\u047F","\u0481","\u048B","\u048D","\u048F","\u0491","\u0493","\u0495","\u0497","\u0499","\u049B","\u049D","\u049F","\u04A1","\u04A3","\u04A5","\u04A7","\u04A9","\u04AB","\u04AD","\u04AF","\u04B1","\u04B3","\u04B5","\u04B7","\u04B9","\u04BB","\u04BD","\u04BF","\u04C2","\u04C4","\u04C6","\u04C8","\u04CA","\u04CC",["\u04CE","\u04CF"],"\u04D1","\u04D3","\u04D5","\u04D7","\u04D9","\u04DB","\u04DD","\u04DF","\u04E1","\u04E3","\u04E5","\u04E7","\u04E9","\u04EB","\u04ED","\u04EF","\u04F1","\u04F3","\u04F5","\u04F7","\u04F9","\u04FB","\u04FD","\u04FF","\u0501","\u0503","\u0505","\u0507","\u0509","\u050B","\u050D","\u050F","\u0511","\u0513","\u0515","\u0517","\u0519","\u051B","\u051D","\u051F","\u0521","\u0523","\u0525","\u0527","\u0529","\u052B","\u052D","\u052F",["\u0561","\u0587"],["\u13F8","\u13FD"],["\u1D00","\u1D2B"],["\u1D6B","\u1D77"],["\u1D79","\u1D9A"],"\u1E01","\u1E03","\u1E05","\u1E07","\u1E09","\u1E0B","\u1E0D","\u1E0F","\u1E11","\u1E13","\u1E15","\u1E17","\u1E19","\u1E1B","\u1E1D","\u1E1F","\u1E21","\u1E23","\u1E25","\u1E27","\u1E29","\u1E2B","\u1E2D","\u1E2F","\u1E31","\u1E33","\u1E35","\u1E37","\u1E39","\u1E3B","\u1E3D","\u1E3F","\u1E41","\u1E43","\u1E45","\u1E47","\u1E49","\u1E4B","\u1E4D","\u1E4F","\u1E51","\u1E53","\u1E55","\u1E57","\u1E59","\u1E5B","\u1E5D","\u1E5F","\u1E61","\u1E63","\u1E65","\u1E67","\u1E69","\u1E6B","\u1E6D","\u1E6F","\u1E71","\u1E73","\u1E75","\u1E77","\u1E79","\u1E7B","\u1E7D","\u1E7F","\u1E81","\u1E83","\u1E85","\u1E87","\u1E89","\u1E8B","\u1E8D","\u1E8F","\u1E91","\u1E93",["\u1E95","\u1E9D"],"\u1E9F","\u1EA1","\u1EA3","\u1EA5","\u1EA7","\u1EA9","\u1EAB","\u1EAD","\u1EAF","\u1EB1","\u1EB3","\u1EB5","\u1EB7","\u1EB9","\u1EBB","\u1EBD","\u1EBF","\u1EC1","\u1EC3","\u1EC5","\u1EC7","\u1EC9","\u1ECB","\u1ECD","\u1ECF","\u1ED1","\u1ED3","\u1ED5","\u1ED7","\u1ED9","\u1EDB","\u1EDD","\u1EDF","\u1EE1","\u1EE3","\u1EE5","\u1EE7","\u1EE9","\u1EEB","\u1EED","\u1EEF","\u1EF1","\u1EF3","\u1EF5","\u1EF7","\u1EF9","\u1EFB","\u1EFD",["\u1EFF","\u1F07"],["\u1F10","\u1F15"],["\u1F20","\u1F27"],["\u1F30","\u1F37"],["\u1F40","\u1F45"],["\u1F50","\u1F57"],["\u1F60","\u1F67"],["\u1F70","\u1F7D"],["\u1F80","\u1F87"],["\u1F90","\u1F97"],["\u1FA0","\u1FA7"],["\u1FB0","\u1FB4"],["\u1FB6","\u1FB7"],"\u1FBE",["\u1FC2","\u1FC4"],["\u1FC6","\u1FC7"],["\u1FD0","\u1FD3"],["\u1FD6","\u1FD7"],["\u1FE0","\u1FE7"],["\u1FF2","\u1FF4"],["\u1FF6","\u1FF7"],"\u210A",["\u210E","\u210F"],"\u2113","\u212F","\u2134","\u2139",["\u213C","\u213D"],["\u2146","\u2149"],"\u214E","\u2184",["\u2C30","\u2C5E"],"\u2C61",["\u2C65","\u2C66"],"\u2C68","\u2C6A","\u2C6C","\u2C71",["\u2C73","\u2C74"],["\u2C76","\u2C7B"],"\u2C81","\u2C83","\u2C85","\u2C87","\u2C89","\u2C8B","\u2C8D","\u2C8F","\u2C91","\u2C93","\u2C95","\u2C97","\u2C99","\u2C9B","\u2C9D","\u2C9F","\u2CA1","\u2CA3","\u2CA5","\u2CA7","\u2CA9","\u2CAB","\u2CAD","\u2CAF","\u2CB1","\u2CB3","\u2CB5","\u2CB7","\u2CB9","\u2CBB","\u2CBD","\u2CBF","\u2CC1","\u2CC3","\u2CC5","\u2CC7","\u2CC9","\u2CCB","\u2CCD","\u2CCF","\u2CD1","\u2CD3","\u2CD5","\u2CD7","\u2CD9","\u2CDB","\u2CDD","\u2CDF","\u2CE1",["\u2CE3","\u2CE4"],"\u2CEC","\u2CEE","\u2CF3",["\u2D00","\u2D25"],"\u2D27","\u2D2D","\uA641","\uA643","\uA645","\uA647","\uA649","\uA64B","\uA64D","\uA64F","\uA651","\uA653","\uA655","\uA657","\uA659","\uA65B","\uA65D","\uA65F","\uA661","\uA663","\uA665","\uA667","\uA669","\uA66B","\uA66D","\uA681","\uA683","\uA685","\uA687","\uA689","\uA68B","\uA68D","\uA68F","\uA691","\uA693","\uA695","\uA697","\uA699","\uA69B","\uA723","\uA725","\uA727","\uA729","\uA72B","\uA72D",["\uA72F","\uA731"],"\uA733","\uA735","\uA737","\uA739","\uA73B","\uA73D","\uA73F","\uA741","\uA743","\uA745","\uA747","\uA749","\uA74B","\uA74D","\uA74F","\uA751","\uA753","\uA755","\uA757","\uA759","\uA75B","\uA75D","\uA75F","\uA761","\uA763","\uA765","\uA767","\uA769","\uA76B","\uA76D","\uA76F",["\uA771","\uA778"],"\uA77A","\uA77C","\uA77F","\uA781","\uA783","\uA785","\uA787","\uA78C","\uA78E","\uA791",["\uA793","\uA795"],"\uA797","\uA799","\uA79B","\uA79D","\uA79F","\uA7A1","\uA7A3","\uA7A5","\uA7A7","\uA7A9","\uA7B5","\uA7B7","\uA7FA",["\uAB30","\uAB5A"],["\uAB60","\uAB65"],["\uAB70","\uABBF"],["\uFB00","\uFB06"],["\uFB13","\uFB17"],["\uFF41","\uFF5A"]],!1,!1),nn=kn([["\u02B0","\u02C1"],["\u02C6","\u02D1"],["\u02E0","\u02E4"],"\u02EC","\u02EE","\u0374","\u037A","\u0559","\u0640",["\u06E5","\u06E6"],["\u07F4","\u07F5"],"\u07FA","\u081A","\u0824","\u0828","\u0971","\u0E46","\u0EC6","\u10FC","\u17D7","\u1843","\u1AA7",["\u1C78","\u1C7D"],["\u1D2C","\u1D6A"],"\u1D78",["\u1D9B","\u1DBF"],"\u2071","\u207F",["\u2090","\u209C"],["\u2C7C","\u2C7D"],"\u2D6F","\u2E2F","\u3005",["\u3031","\u3035"],"\u303B",["\u309D","\u309E"],["\u30FC","\u30FE"],"\uA015",["\uA4F8","\uA4FD"],"\uA60C","\uA67F",["\uA69C","\uA69D"],["\uA717","\uA71F"],"\uA770","\uA788",["\uA7F8","\uA7F9"],"\uA9CF","\uA9E6","\uAA70","\uAADD",["\uAAF3","\uAAF4"],["\uAB5C","\uAB5F"],"\uFF70",["\uFF9E","\uFF9F"]],!1,!1),en=kn(["\xAA","\xBA","\u01BB",["\u01C0","\u01C3"],"\u0294",["\u05D0","\u05EA"],["\u05F0","\u05F2"],["\u0620","\u063F"],["\u0641","\u064A"],["\u066E","\u066F"],["\u0671","\u06D3"],"\u06D5",["\u06EE","\u06EF"],["\u06FA","\u06FC"],"\u06FF","\u0710",["\u0712","\u072F"],["\u074D","\u07A5"],"\u07B1",["\u07CA","\u07EA"],["\u0800","\u0815"],["\u0840","\u0858"],["\u08A0","\u08B4"],["\u0904","\u0939"],"\u093D","\u0950",["\u0958","\u0961"],["\u0972","\u0980"],["\u0985","\u098C"],["\u098F","\u0990"],["\u0993","\u09A8"],["\u09AA","\u09B0"],"\u09B2",["\u09B6","\u09B9"],"\u09BD","\u09CE",["\u09DC","\u09DD"],["\u09DF","\u09E1"],["\u09F0","\u09F1"],["\u0A05","\u0A0A"],["\u0A0F","\u0A10"],["\u0A13","\u0A28"],["\u0A2A","\u0A30"],["\u0A32","\u0A33"],["\u0A35","\u0A36"],["\u0A38","\u0A39"],["\u0A59","\u0A5C"],"\u0A5E",["\u0A72","\u0A74"],["\u0A85","\u0A8D"],["\u0A8F","\u0A91"],["\u0A93","\u0AA8"],["\u0AAA","\u0AB0"],["\u0AB2","\u0AB3"],["\u0AB5","\u0AB9"],"\u0ABD","\u0AD0",["\u0AE0","\u0AE1"],"\u0AF9",["\u0B05","\u0B0C"],["\u0B0F","\u0B10"],["\u0B13","\u0B28"],["\u0B2A","\u0B30"],["\u0B32","\u0B33"],["\u0B35","\u0B39"],"\u0B3D",["\u0B5C","\u0B5D"],["\u0B5F","\u0B61"],"\u0B71","\u0B83",["\u0B85","\u0B8A"],["\u0B8E","\u0B90"],["\u0B92","\u0B95"],["\u0B99","\u0B9A"],"\u0B9C",["\u0B9E","\u0B9F"],["\u0BA3","\u0BA4"],["\u0BA8","\u0BAA"],["\u0BAE","\u0BB9"],"\u0BD0",["\u0C05","\u0C0C"],["\u0C0E","\u0C10"],["\u0C12","\u0C28"],["\u0C2A","\u0C39"],"\u0C3D",["\u0C58","\u0C5A"],["\u0C60","\u0C61"],["\u0C85","\u0C8C"],["\u0C8E","\u0C90"],["\u0C92","\u0CA8"],["\u0CAA","\u0CB3"],["\u0CB5","\u0CB9"],"\u0CBD","\u0CDE",["\u0CE0","\u0CE1"],["\u0CF1","\u0CF2"],["\u0D05","\u0D0C"],["\u0D0E","\u0D10"],["\u0D12","\u0D3A"],"\u0D3D","\u0D4E",["\u0D5F","\u0D61"],["\u0D7A","\u0D7F"],["\u0D85","\u0D96"],["\u0D9A","\u0DB1"],["\u0DB3","\u0DBB"],"\u0DBD",["\u0DC0","\u0DC6"],["\u0E01","\u0E30"],["\u0E32","\u0E33"],["\u0E40","\u0E45"],["\u0E81","\u0E82"],"\u0E84",["\u0E87","\u0E88"],"\u0E8A","\u0E8D",["\u0E94","\u0E97"],["\u0E99","\u0E9F"],["\u0EA1","\u0EA3"],"\u0EA5","\u0EA7",["\u0EAA","\u0EAB"],["\u0EAD","\u0EB0"],["\u0EB2","\u0EB3"],"\u0EBD",["\u0EC0","\u0EC4"],["\u0EDC","\u0EDF"],"\u0F00",["\u0F40","\u0F47"],["\u0F49","\u0F6C"],["\u0F88","\u0F8C"],["\u1000","\u102A"],"\u103F",["\u1050","\u1055"],["\u105A","\u105D"],"\u1061",["\u1065","\u1066"],["\u106E","\u1070"],["\u1075","\u1081"],"\u108E",["\u10D0","\u10FA"],["\u10FD","\u1248"],["\u124A","\u124D"],["\u1250","\u1256"],"\u1258",["\u125A","\u125D"],["\u1260","\u1288"],["\u128A","\u128D"],["\u1290","\u12B0"],["\u12B2","\u12B5"],["\u12B8","\u12BE"],"\u12C0",["\u12C2","\u12C5"],["\u12C8","\u12D6"],["\u12D8","\u1310"],["\u1312","\u1315"],["\u1318","\u135A"],["\u1380","\u138F"],["\u1401","\u166C"],["\u166F","\u167F"],["\u1681","\u169A"],["\u16A0","\u16EA"],["\u16F1","\u16F8"],["\u1700","\u170C"],["\u170E","\u1711"],["\u1720","\u1731"],["\u1740","\u1751"],["\u1760","\u176C"],["\u176E","\u1770"],["\u1780","\u17B3"],"\u17DC",["\u1820","\u1842"],["\u1844","\u1877"],["\u1880","\u18A8"],"\u18AA",["\u18B0","\u18F5"],["\u1900","\u191E"],["\u1950","\u196D"],["\u1970","\u1974"],["\u1980","\u19AB"],["\u19B0","\u19C9"],["\u1A00","\u1A16"],["\u1A20","\u1A54"],["\u1B05","\u1B33"],["\u1B45","\u1B4B"],["\u1B83","\u1BA0"],["\u1BAE","\u1BAF"],["\u1BBA","\u1BE5"],["\u1C00","\u1C23"],["\u1C4D","\u1C4F"],["\u1C5A","\u1C77"],["\u1CE9","\u1CEC"],["\u1CEE","\u1CF1"],["\u1CF5","\u1CF6"],["\u2135","\u2138"],["\u2D30","\u2D67"],["\u2D80","\u2D96"],["\u2DA0","\u2DA6"],["\u2DA8","\u2DAE"],["\u2DB0","\u2DB6"],["\u2DB8","\u2DBE"],["\u2DC0","\u2DC6"],["\u2DC8","\u2DCE"],["\u2DD0","\u2DD6"],["\u2DD8","\u2DDE"],"\u3006","\u303C",["\u3041","\u3096"],"\u309F",["\u30A1","\u30FA"],"\u30FF",["\u3105","\u312D"],["\u3131","\u318E"],["\u31A0","\u31BA"],["\u31F0","\u31FF"],["\u3400","\u4DB5"],["\u4E00","\u9FD5"],["\uA000","\uA014"],["\uA016","\uA48C"],["\uA4D0","\uA4F7"],["\uA500","\uA60B"],["\uA610","\uA61F"],["\uA62A","\uA62B"],"\uA66E",["\uA6A0","\uA6E5"],"\uA78F","\uA7F7",["\uA7FB","\uA801"],["\uA803","\uA805"],["\uA807","\uA80A"],["\uA80C","\uA822"],["\uA840","\uA873"],["\uA882","\uA8B3"],["\uA8F2","\uA8F7"],"\uA8FB","\uA8FD",["\uA90A","\uA925"],["\uA930","\uA946"],["\uA960","\uA97C"],["\uA984","\uA9B2"],["\uA9E0","\uA9E4"],["\uA9E7","\uA9EF"],["\uA9FA","\uA9FE"],["\uAA00","\uAA28"],["\uAA40","\uAA42"],["\uAA44","\uAA4B"],["\uAA60","\uAA6F"],["\uAA71","\uAA76"],"\uAA7A",["\uAA7E","\uAAAF"],"\uAAB1",["\uAAB5","\uAAB6"],["\uAAB9","\uAABD"],"\uAAC0","\uAAC2",["\uAADB","\uAADC"],["\uAAE0","\uAAEA"],"\uAAF2",["\uAB01","\uAB06"],["\uAB09","\uAB0E"],["\uAB11","\uAB16"],["\uAB20","\uAB26"],["\uAB28","\uAB2E"],["\uABC0","\uABE2"],["\uAC00","\uD7A3"],["\uD7B0","\uD7C6"],["\uD7CB","\uD7FB"],["\uF900","\uFA6D"],["\uFA70","\uFAD9"],"\uFB1D",["\uFB1F","\uFB28"],["\uFB2A","\uFB36"],["\uFB38","\uFB3C"],"\uFB3E",["\uFB40","\uFB41"],["\uFB43","\uFB44"],["\uFB46","\uFBB1"],["\uFBD3","\uFD3D"],["\uFD50","\uFD8F"],["\uFD92","\uFDC7"],["\uFDF0","\uFDFB"],["\uFE70","\uFE74"],["\uFE76","\uFEFC"],["\uFF66","\uFF6F"],["\uFF71","\uFF9D"],["\uFFA0","\uFFBE"],["\uFFC2","\uFFC7"],["\uFFCA","\uFFCF"],["\uFFD2","\uFFD7"],["\uFFDA","\uFFDC"]],!1,!1),Er=kn(["\u01C5","\u01C8","\u01CB","\u01F2",["\u1F88","\u1F8F"],["\u1F98","\u1F9F"],["\u1FA8","\u1FAF"],"\u1FBC","\u1FCC","\u1FFC"],!1,!1),hs=kn([["A","Z"],["\xC0","\xD6"],["\xD8","\xDE"],"\u0100","\u0102","\u0104","\u0106","\u0108","\u010A","\u010C","\u010E","\u0110","\u0112","\u0114","\u0116","\u0118","\u011A","\u011C","\u011E","\u0120","\u0122","\u0124","\u0126","\u0128","\u012A","\u012C","\u012E","\u0130","\u0132","\u0134","\u0136","\u0139","\u013B","\u013D","\u013F","\u0141","\u0143","\u0145","\u0147","\u014A","\u014C","\u014E","\u0150","\u0152","\u0154","\u0156","\u0158","\u015A","\u015C","\u015E","\u0160","\u0162","\u0164","\u0166","\u0168","\u016A","\u016C","\u016E","\u0170","\u0172","\u0174","\u0176",["\u0178","\u0179"],"\u017B","\u017D",["\u0181","\u0182"],"\u0184",["\u0186","\u0187"],["\u0189","\u018B"],["\u018E","\u0191"],["\u0193","\u0194"],["\u0196","\u0198"],["\u019C","\u019D"],["\u019F","\u01A0"],"\u01A2","\u01A4",["\u01A6","\u01A7"],"\u01A9","\u01AC",["\u01AE","\u01AF"],["\u01B1","\u01B3"],"\u01B5",["\u01B7","\u01B8"],"\u01BC","\u01C4","\u01C7","\u01CA","\u01CD","\u01CF","\u01D1","\u01D3","\u01D5","\u01D7","\u01D9","\u01DB","\u01DE","\u01E0","\u01E2","\u01E4","\u01E6","\u01E8","\u01EA","\u01EC","\u01EE","\u01F1","\u01F4",["\u01F6","\u01F8"],"\u01FA","\u01FC","\u01FE","\u0200","\u0202","\u0204","\u0206","\u0208","\u020A","\u020C","\u020E","\u0210","\u0212","\u0214","\u0216","\u0218","\u021A","\u021C","\u021E","\u0220","\u0222","\u0224","\u0226","\u0228","\u022A","\u022C","\u022E","\u0230","\u0232",["\u023A","\u023B"],["\u023D","\u023E"],"\u0241",["\u0243","\u0246"],"\u0248","\u024A","\u024C","\u024E","\u0370","\u0372","\u0376","\u037F","\u0386",["\u0388","\u038A"],"\u038C",["\u038E","\u038F"],["\u0391","\u03A1"],["\u03A3","\u03AB"],"\u03CF",["\u03D2","\u03D4"],"\u03D8","\u03DA","\u03DC","\u03DE","\u03E0","\u03E2","\u03E4","\u03E6","\u03E8","\u03EA","\u03EC","\u03EE","\u03F4","\u03F7",["\u03F9","\u03FA"],["\u03FD","\u042F"],"\u0460","\u0462","\u0464","\u0466","\u0468","\u046A","\u046C","\u046E","\u0470","\u0472","\u0474","\u0476","\u0478","\u047A","\u047C","\u047E","\u0480","\u048A","\u048C","\u048E","\u0490","\u0492","\u0494","\u0496","\u0498","\u049A","\u049C","\u049E","\u04A0","\u04A2","\u04A4","\u04A6","\u04A8","\u04AA","\u04AC","\u04AE","\u04B0","\u04B2","\u04B4","\u04B6","\u04B8","\u04BA","\u04BC","\u04BE",["\u04C0","\u04C1"],"\u04C3","\u04C5","\u04C7","\u04C9","\u04CB","\u04CD","\u04D0","\u04D2","\u04D4","\u04D6","\u04D8","\u04DA","\u04DC","\u04DE","\u04E0","\u04E2","\u04E4","\u04E6","\u04E8","\u04EA","\u04EC","\u04EE","\u04F0","\u04F2","\u04F4","\u04F6","\u04F8","\u04FA","\u04FC","\u04FE","\u0500","\u0502","\u0504","\u0506","\u0508","\u050A","\u050C","\u050E","\u0510","\u0512","\u0514","\u0516","\u0518","\u051A","\u051C","\u051E","\u0520","\u0522","\u0524","\u0526","\u0528","\u052A","\u052C","\u052E",["\u0531","\u0556"],["\u10A0","\u10C5"],"\u10C7","\u10CD",["\u13A0","\u13F5"],"\u1E00","\u1E02","\u1E04","\u1E06","\u1E08","\u1E0A","\u1E0C","\u1E0E","\u1E10","\u1E12","\u1E14","\u1E16","\u1E18","\u1E1A","\u1E1C","\u1E1E","\u1E20","\u1E22","\u1E24","\u1E26","\u1E28","\u1E2A","\u1E2C","\u1E2E","\u1E30","\u1E32","\u1E34","\u1E36","\u1E38","\u1E3A","\u1E3C","\u1E3E","\u1E40","\u1E42","\u1E44","\u1E46","\u1E48","\u1E4A","\u1E4C","\u1E4E","\u1E50","\u1E52","\u1E54","\u1E56","\u1E58","\u1E5A","\u1E5C","\u1E5E","\u1E60","\u1E62","\u1E64","\u1E66","\u1E68","\u1E6A","\u1E6C","\u1E6E","\u1E70","\u1E72","\u1E74","\u1E76","\u1E78","\u1E7A","\u1E7C","\u1E7E","\u1E80","\u1E82","\u1E84","\u1E86","\u1E88","\u1E8A","\u1E8C","\u1E8E","\u1E90","\u1E92","\u1E94","\u1E9E","\u1EA0","\u1EA2","\u1EA4","\u1EA6","\u1EA8","\u1EAA","\u1EAC","\u1EAE","\u1EB0","\u1EB2","\u1EB4","\u1EB6","\u1EB8","\u1EBA","\u1EBC","\u1EBE","\u1EC0","\u1EC2","\u1EC4","\u1EC6","\u1EC8","\u1ECA","\u1ECC","\u1ECE","\u1ED0","\u1ED2","\u1ED4","\u1ED6","\u1ED8","\u1EDA","\u1EDC","\u1EDE","\u1EE0","\u1EE2","\u1EE4","\u1EE6","\u1EE8","\u1EEA","\u1EEC","\u1EEE","\u1EF0","\u1EF2","\u1EF4","\u1EF6","\u1EF8","\u1EFA","\u1EFC","\u1EFE",["\u1F08","\u1F0F"],["\u1F18","\u1F1D"],["\u1F28","\u1F2F"],["\u1F38","\u1F3F"],["\u1F48","\u1F4D"],"\u1F59","\u1F5B","\u1F5D","\u1F5F",["\u1F68","\u1F6F"],["\u1FB8","\u1FBB"],["\u1FC8","\u1FCB"],["\u1FD8","\u1FDB"],["\u1FE8","\u1FEC"],["\u1FF8","\u1FFB"],"\u2102","\u2107",["\u210B","\u210D"],["\u2110","\u2112"],"\u2115",["\u2119","\u211D"],"\u2124","\u2126","\u2128",["\u212A","\u212D"],["\u2130","\u2133"],["\u213E","\u213F"],"\u2145","\u2183",["\u2C00","\u2C2E"],"\u2C60",["\u2C62","\u2C64"],"\u2C67","\u2C69","\u2C6B",["\u2C6D","\u2C70"],"\u2C72","\u2C75",["\u2C7E","\u2C80"],"\u2C82","\u2C84","\u2C86","\u2C88","\u2C8A","\u2C8C","\u2C8E","\u2C90","\u2C92","\u2C94","\u2C96","\u2C98","\u2C9A","\u2C9C","\u2C9E","\u2CA0","\u2CA2","\u2CA4","\u2CA6","\u2CA8","\u2CAA","\u2CAC","\u2CAE","\u2CB0","\u2CB2","\u2CB4","\u2CB6","\u2CB8","\u2CBA","\u2CBC","\u2CBE","\u2CC0","\u2CC2","\u2CC4","\u2CC6","\u2CC8","\u2CCA","\u2CCC","\u2CCE","\u2CD0","\u2CD2","\u2CD4","\u2CD6","\u2CD8","\u2CDA","\u2CDC","\u2CDE","\u2CE0","\u2CE2","\u2CEB","\u2CED","\u2CF2","\uA640","\uA642","\uA644","\uA646","\uA648","\uA64A","\uA64C","\uA64E","\uA650","\uA652","\uA654","\uA656","\uA658","\uA65A","\uA65C","\uA65E","\uA660","\uA662","\uA664","\uA666","\uA668","\uA66A","\uA66C","\uA680","\uA682","\uA684","\uA686","\uA688","\uA68A","\uA68C","\uA68E","\uA690","\uA692","\uA694","\uA696","\uA698","\uA69A","\uA722","\uA724","\uA726","\uA728","\uA72A","\uA72C","\uA72E","\uA732","\uA734","\uA736","\uA738","\uA73A","\uA73C","\uA73E","\uA740","\uA742","\uA744","\uA746","\uA748","\uA74A","\uA74C","\uA74E","\uA750","\uA752","\uA754","\uA756","\uA758","\uA75A","\uA75C","\uA75E","\uA760","\uA762","\uA764","\uA766","\uA768","\uA76A","\uA76C","\uA76E","\uA779","\uA77B",["\uA77D","\uA77E"],"\uA780","\uA782","\uA784","\uA786","\uA78B","\uA78D","\uA790","\uA792","\uA796","\uA798","\uA79A","\uA79C","\uA79E","\uA7A0","\uA7A2","\uA7A4","\uA7A6","\uA7A8",["\uA7AA","\uA7AD"],["\uA7B0","\uA7B4"],"\uA7B6",["\uFF21","\uFF3A"]],!1,!1),Ps=kn(["\u0903","\u093B",["\u093E","\u0940"],["\u0949","\u094C"],["\u094E","\u094F"],["\u0982","\u0983"],["\u09BE","\u09C0"],["\u09C7","\u09C8"],["\u09CB","\u09CC"],"\u09D7","\u0A03",["\u0A3E","\u0A40"],"\u0A83",["\u0ABE","\u0AC0"],"\u0AC9",["\u0ACB","\u0ACC"],["\u0B02","\u0B03"],"\u0B3E","\u0B40",["\u0B47","\u0B48"],["\u0B4B","\u0B4C"],"\u0B57",["\u0BBE","\u0BBF"],["\u0BC1","\u0BC2"],["\u0BC6","\u0BC8"],["\u0BCA","\u0BCC"],"\u0BD7",["\u0C01","\u0C03"],["\u0C41","\u0C44"],["\u0C82","\u0C83"],"\u0CBE",["\u0CC0","\u0CC4"],["\u0CC7","\u0CC8"],["\u0CCA","\u0CCB"],["\u0CD5","\u0CD6"],["\u0D02","\u0D03"],["\u0D3E","\u0D40"],["\u0D46","\u0D48"],["\u0D4A","\u0D4C"],"\u0D57",["\u0D82","\u0D83"],["\u0DCF","\u0DD1"],["\u0DD8","\u0DDF"],["\u0DF2","\u0DF3"],["\u0F3E","\u0F3F"],"\u0F7F",["\u102B","\u102C"],"\u1031","\u1038",["\u103B","\u103C"],["\u1056","\u1057"],["\u1062","\u1064"],["\u1067","\u106D"],["\u1083","\u1084"],["\u1087","\u108C"],"\u108F",["\u109A","\u109C"],"\u17B6",["\u17BE","\u17C5"],["\u17C7","\u17C8"],["\u1923","\u1926"],["\u1929","\u192B"],["\u1930","\u1931"],["\u1933","\u1938"],["\u1A19","\u1A1A"],"\u1A55","\u1A57","\u1A61",["\u1A63","\u1A64"],["\u1A6D","\u1A72"],"\u1B04","\u1B35","\u1B3B",["\u1B3D","\u1B41"],["\u1B43","\u1B44"],"\u1B82","\u1BA1",["\u1BA6","\u1BA7"],"\u1BAA","\u1BE7",["\u1BEA","\u1BEC"],"\u1BEE",["\u1BF2","\u1BF3"],["\u1C24","\u1C2B"],["\u1C34","\u1C35"],"\u1CE1",["\u1CF2","\u1CF3"],["\u302E","\u302F"],["\uA823","\uA824"],"\uA827",["\uA880","\uA881"],["\uA8B4","\uA8C3"],["\uA952","\uA953"],"\uA983",["\uA9B4","\uA9B5"],["\uA9BA","\uA9BB"],["\uA9BD","\uA9C0"],["\uAA2F","\uAA30"],["\uAA33","\uAA34"],"\uAA4D","\uAA7B","\uAA7D","\uAAEB",["\uAAEE","\uAAEF"],"\uAAF5",["\uABE3","\uABE4"],["\uABE6","\uABE7"],["\uABE9","\uABEA"],"\uABEC"],!1,!1),Ri=kn([["\u0300","\u036F"],["\u0483","\u0487"],["\u0591","\u05BD"],"\u05BF",["\u05C1","\u05C2"],["\u05C4","\u05C5"],"\u05C7",["\u0610","\u061A"],["\u064B","\u065F"],"\u0670",["\u06D6","\u06DC"],["\u06DF","\u06E4"],["\u06E7","\u06E8"],["\u06EA","\u06ED"],"\u0711",["\u0730","\u074A"],["\u07A6","\u07B0"],["\u07EB","\u07F3"],["\u0816","\u0819"],["\u081B","\u0823"],["\u0825","\u0827"],["\u0829","\u082D"],["\u0859","\u085B"],["\u08E3","\u0902"],"\u093A","\u093C",["\u0941","\u0948"],"\u094D",["\u0951","\u0957"],["\u0962","\u0963"],"\u0981","\u09BC",["\u09C1","\u09C4"],"\u09CD",["\u09E2","\u09E3"],["\u0A01","\u0A02"],"\u0A3C",["\u0A41","\u0A42"],["\u0A47","\u0A48"],["\u0A4B","\u0A4D"],"\u0A51",["\u0A70","\u0A71"],"\u0A75",["\u0A81","\u0A82"],"\u0ABC",["\u0AC1","\u0AC5"],["\u0AC7","\u0AC8"],"\u0ACD",["\u0AE2","\u0AE3"],"\u0B01","\u0B3C","\u0B3F",["\u0B41","\u0B44"],"\u0B4D","\u0B56",["\u0B62","\u0B63"],"\u0B82","\u0BC0","\u0BCD","\u0C00",["\u0C3E","\u0C40"],["\u0C46","\u0C48"],["\u0C4A","\u0C4D"],["\u0C55","\u0C56"],["\u0C62","\u0C63"],"\u0C81","\u0CBC","\u0CBF","\u0CC6",["\u0CCC","\u0CCD"],["\u0CE2","\u0CE3"],"\u0D01",["\u0D41","\u0D44"],"\u0D4D",["\u0D62","\u0D63"],"\u0DCA",["\u0DD2","\u0DD4"],"\u0DD6","\u0E31",["\u0E34","\u0E3A"],["\u0E47","\u0E4E"],"\u0EB1",["\u0EB4","\u0EB9"],["\u0EBB","\u0EBC"],["\u0EC8","\u0ECD"],["\u0F18","\u0F19"],"\u0F35","\u0F37","\u0F39",["\u0F71","\u0F7E"],["\u0F80","\u0F84"],["\u0F86","\u0F87"],["\u0F8D","\u0F97"],["\u0F99","\u0FBC"],"\u0FC6",["\u102D","\u1030"],["\u1032","\u1037"],["\u1039","\u103A"],["\u103D","\u103E"],["\u1058","\u1059"],["\u105E","\u1060"],["\u1071","\u1074"],"\u1082",["\u1085","\u1086"],"\u108D","\u109D",["\u135D","\u135F"],["\u1712","\u1714"],["\u1732","\u1734"],["\u1752","\u1753"],["\u1772","\u1773"],["\u17B4","\u17B5"],["\u17B7","\u17BD"],"\u17C6",["\u17C9","\u17D3"],"\u17DD",["\u180B","\u180D"],"\u18A9",["\u1920","\u1922"],["\u1927","\u1928"],"\u1932",["\u1939","\u193B"],["\u1A17","\u1A18"],"\u1A1B","\u1A56",["\u1A58","\u1A5E"],"\u1A60","\u1A62",["\u1A65","\u1A6C"],["\u1A73","\u1A7C"],"\u1A7F",["\u1AB0","\u1ABD"],["\u1B00","\u1B03"],"\u1B34",["\u1B36","\u1B3A"],"\u1B3C","\u1B42",["\u1B6B","\u1B73"],["\u1B80","\u1B81"],["\u1BA2","\u1BA5"],["\u1BA8","\u1BA9"],["\u1BAB","\u1BAD"],"\u1BE6",["\u1BE8","\u1BE9"],"\u1BED",["\u1BEF","\u1BF1"],["\u1C2C","\u1C33"],["\u1C36","\u1C37"],["\u1CD0","\u1CD2"],["\u1CD4","\u1CE0"],["\u1CE2","\u1CE8"],"\u1CED","\u1CF4",["\u1CF8","\u1CF9"],["\u1DC0","\u1DF5"],["\u1DFC","\u1DFF"],["\u20D0","\u20DC"],"\u20E1",["\u20E5","\u20F0"],["\u2CEF","\u2CF1"],"\u2D7F",["\u2DE0","\u2DFF"],["\u302A","\u302D"],["\u3099","\u309A"],"\uA66F",["\uA674","\uA67D"],["\uA69E","\uA69F"],["\uA6F0","\uA6F1"],"\uA802","\uA806","\uA80B",["\uA825","\uA826"],"\uA8C4",["\uA8E0","\uA8F1"],["\uA926","\uA92D"],["\uA947","\uA951"],["\uA980","\uA982"],"\uA9B3",["\uA9B6","\uA9B9"],"\uA9BC","\uA9E5",["\uAA29","\uAA2E"],["\uAA31","\uAA32"],["\uAA35","\uAA36"],"\uAA43","\uAA4C","\uAA7C","\uAAB0",["\uAAB2","\uAAB4"],["\uAAB7","\uAAB8"],["\uAABE","\uAABF"],"\uAAC1",["\uAAEC","\uAAED"],"\uAAF6","\uABE5","\uABE8","\uABED","\uFB1E",["\uFE00","\uFE0F"],["\uFE20","\uFE2F"]],!1,!1),ws=kn([["0","9"],["\u0660","\u0669"],["\u06F0","\u06F9"],["\u07C0","\u07C9"],["\u0966","\u096F"],["\u09E6","\u09EF"],["\u0A66","\u0A6F"],["\u0AE6","\u0AEF"],["\u0B66","\u0B6F"],["\u0BE6","\u0BEF"],["\u0C66","\u0C6F"],["\u0CE6","\u0CEF"],["\u0D66","\u0D6F"],["\u0DE6","\u0DEF"],["\u0E50","\u0E59"],["\u0ED0","\u0ED9"],["\u0F20","\u0F29"],["\u1040","\u1049"],["\u1090","\u1099"],["\u17E0","\u17E9"],["\u1810","\u1819"],["\u1946","\u194F"],["\u19D0","\u19D9"],["\u1A80","\u1A89"],["\u1A90","\u1A99"],["\u1B50","\u1B59"],["\u1BB0","\u1BB9"],["\u1C40","\u1C49"],["\u1C50","\u1C59"],["\uA620","\uA629"],["\uA8D0","\uA8D9"],["\uA900","\uA909"],["\uA9D0","\uA9D9"],["\uA9F0","\uA9F9"],["\uAA50","\uAA59"],["\uABF0","\uABF9"],["\uFF10","\uFF19"]],!1,!1),ds=kn([["\u16EE","\u16F0"],["\u2160","\u2182"],["\u2185","\u2188"],"\u3007",["\u3021","\u3029"],["\u3038","\u303A"],["\uA6E6","\uA6EF"]],!1,!1),$i=kn(["_",["\u203F","\u2040"],"\u2054",["\uFE33","\uFE34"],["\uFE4D","\uFE4F"],"\uFF3F"],!1,!1),En=kn([" ","\xA0","\u1680",["\u2000","\u200A"],"\u202F","\u205F","\u3000"],!1,!1),Gi=dr(";",!1),wa=function(d,B,it){return{type:"grammar",topLevelInitializer:d,initializer:B,rules:it,location:xr()}},Fa=function(d){return{type:"top_level_initializer",code:d[0],codeLocation:d[1],location:xr()}},Rn=function(d){return{type:"initializer",code:d[0],codeLocation:d[1],location:xr()}},Sn=function(d,B,it){return{type:"rule",name:d[0],nameLocation:d[1],expression:B!==null?{type:"named",name:B,expression:it,location:xr()}:it,location:xr()}},ba=function(d,B){return B.length>0?{type:"choice",alternatives:[d].concat(B),location:xr()}:d},Ca=function(d,B){return B!==null?{type:"action",expression:d,code:B[0],codeLocation:B[1],location:xr()}:d},Da=function(d,B){return B.length>0||d.type==="labeled"&&d.pick?{type:"sequence",elements:[d].concat(B),location:xr()}:d},sn=function(d,B,it){return it.type.startsWith("semantic_")&&Yi('"@" cannot be used on a semantic predicate',d),{type:"labeled",label:B!==null?B[0]:null,labelLocation:B!==null?B[1]:d,pick:!0,expression:it,location:xr()}},xa=function(d,B){return{type:"labeled",label:d[0],labelLocation:d[1],expression:B,location:xr()}},_a=function(){return xr()},Xu=function(d){return De.indexOf(d[0])>=0&&Yi(`Label can't be a reserved word "${d[0]}"`,d[1]),d},Sa=function(d,B){return{type:n[d],expression:B,location:xr()}},Qn=function(d,B){return{type:u[B],expression:d,location:xr()}},Cu=function(d){return d.type==="labeled"||d.type==="sequence"?{type:"group",expression:d,location:xr()}:d},vi=function(d){return{type:"rule_ref",name:d[0],location:xr()}},Zu=function(d,B){return{type:s[d],code:B[0],codeLocation:B[1],location:xr()}},Du=function(d,B){return[d+B.join(""),xr()]},Yn=function(d,B){return{type:"literal",value:d,ignoreCase:B!==null,location:xr()}},Qu=function(d){return d.join("")},ta=function(d){return d.join("")},ea=function(d,B,it){return{type:"class",parts:B.filter(z=>z!==""),inverted:d!==null,ignoreCase:it!==null,location:xr()}},ra=function(d,B){return d.charCodeAt(0)>B.charCodeAt(0)&&Yi("Invalid character range: "+hu()+"."),[d,B]},sa=function(){return""},ia=function(){return"\0"},Fs=function(){return"\b"},aa=function(){return"\f"},Je=function(){return`
`},v=function(){return"\r"},xu=function(){return"	"},Zs=function(){return"\v"},Ai=function(d){return String.fromCharCode(parseInt(d,16))},cs=function(d){return String.fromCharCode(parseInt(d,16))},Pn=function(){return{type:"any",location:xr()}},li=function(d){return[d,xr()]},ct=0,Rr=0,Vs=[{line:1,column:1}],vn=0,Dn=[],be=0,gs;if("startRule"in C){if(!(C.startRule in X))throw new Error(`Can't start parsing from rule "`+C.startRule+'".');w=X[C.startRule]}function hu(){return m.substring(Rr,ct)}function Ji(){return Rr}function _u(){return{source:H,start:Rr,end:ct}}function xr(){return Oi(Rr,ct)}function Ba(d,B){throw B=B!==void 0?B:Oi(Rr,ct),Pi([ms(d)],m.substring(Rr,ct),B)}function Yi(d,B){throw B=B!==void 0?B:Oi(Rr,ct),On(d,B)}function dr(d,B){return{type:"literal",text:d,ignoreCase:B}}function kn(d,B,it){return{type:"class",parts:d,inverted:B,ignoreCase:it}}function Bu(){return{type:"any"}}function Ru(){return{type:"end"}}function ms(d){return{type:"other",description:d}}function $u(d){var B=Vs[d],it;if(B)return B;for(it=d-1;!Vs[it];)it--;for(B=Vs[it],B={line:B.line,column:B.column};it<d;)m.charCodeAt(it)===10?(B.line++,B.column=1):B.column++,it++;return Vs[d]=B,B}function Oi(d,B){var it=$u(d),z=$u(B);return{source:H,start:{offset:d,line:it.line,column:it.column},end:{offset:B,line:z.line,column:z.column}}}function Pe(d){ct<vn||(ct>vn&&(vn=ct,Dn=[]),Dn.push(d))}function On(d,B){return new g(d,null,null,B)}function Pi(d,B,it){return new g(g.buildMessage(d,B),d,B,it)}function ku(){var d,B,it,z,St,qt,ee,ie;if(d=ct,B=Tt(),it=ct,z=oa(),z!==a?(St=Tt(),it=z):(ct=it,it=a),it===a&&(it=null),z=ct,St=Ou(),St!==a?(qt=Tt(),z=St):(ct=z,z=a),z===a&&(z=null),St=[],qt=ct,ee=ca(),ee!==a?(ie=Tt(),qt=ee):(ct=qt,qt=a),qt!==a)for(;qt!==a;)St.push(qt),qt=ct,ee=ca(),ee!==a?(ie=Tt(),qt=ee):(ct=qt,qt=a);else St=a;return St!==a?(Rr=d,d=wa(it,z,St)):(ct=d,d=a),d}function oa(){var d,B,it,z,St;return d=ct,m.charCodeAt(ct)===123?(B=j,ct++):(B=a,be===0&&Pe(Wt)),B!==a?(it=D(),it!==a?(m.charCodeAt(ct)===125?(z=tt,ct++):(z=a,be===0&&Pe(xe)),z!==a?(St=Gt(),St!==a?(Rr=d,d=Fa(it)):(ct=d,d=a)):(ct=d,d=a)):(ct=d,d=a)):(ct=d,d=a),d}function Ou(){var d,B,it;return d=ct,B=D(),B!==a?(it=Gt(),it!==a?(Rr=d,d=Rn(B)):(ct=d,d=a)):(ct=d,d=a),d}function ca(){var d,B,it,z,St,qt,ee,ie;return d=ct,B=me(),B!==a?(it=Tt(),z=ct,St=Gn(),St!==a?(qt=Tt(),z=St):(ct=z,z=a),z===a&&(z=null),m.charCodeAt(ct)===61?(St=J,ct++):(St=a,be===0&&Pe(te)),St!==a?(qt=Tt(),ee=Pu(),ee!==a?(ie=Gt(),ie!==a?(Rr=d,d=Sn(B,z,ee)):(ct=d,d=a)):(ct=d,d=a)):(ct=d,d=a)):(ct=d,d=a),d}function Pu(){var d,B,it,z,St,qt,ee,ie;if(d=ct,B=Nu(),B!==a){for(it=[],z=ct,St=Tt(),m.charCodeAt(ct)===47?(qt=N,ct++):(qt=a,be===0&&Pe(ve)),qt!==a?(ee=Tt(),ie=Nu(),ie!==a?z=ie:(ct=z,z=a)):(ct=z,z=a);z!==a;)it.push(z),z=ct,St=Tt(),m.charCodeAt(ct)===47?(qt=N,ct++):(qt=a,be===0&&Pe(ve)),qt!==a?(ee=Tt(),ie=Nu(),ie!==a?z=ie:(ct=z,z=a)):(ct=z,z=a);Rr=d,d=ba(B,it)}else ct=d,d=a;return d}function Nu(){var d,B,it,z,St;return d=ct,B=Ia(),B!==a?(it=ct,z=Tt(),St=D(),St!==a?it=St:(ct=it,it=a),it===a&&(it=null),Rr=d,d=Ca(B,it)):(ct=d,d=a),d}function Ia(){var d,B,it,z,St,qt;if(d=ct,B=Qs(),B!==a){for(it=[],z=ct,St=Tt(),qt=Qs(),qt!==a?z=qt:(ct=z,z=a);z!==a;)it.push(z),z=ct,St=Tt(),qt=Qs(),qt!==a?z=qt:(ct=z,z=a);Rr=d,d=Da(B,it)}else ct=d,d=a;return d}function Qs(){var d,B,it,z;return d=ct,B=fu(),B!==a?(it=Xi(),it===a&&(it=null),z=wi(),z!==a?(Rr=d,d=sn(B,it,z)):(ct=d,d=a)):(ct=d,d=a),d===a&&(d=ct,B=Xi(),B!==a?(it=Tt(),z=wi(),z!==a?(Rr=d,d=xa(B,z)):(ct=d,d=a)):(ct=d,d=a),d===a&&(d=wi())),d}function fu(){var d,B;return d=ct,m.charCodeAt(ct)===64?(B=Q,ct++):(B=a,be===0&&Pe(Re)),B!==a&&(Rr=d,B=_a()),d=B,d}function Xi(){var d,B,it,z;return d=ct,B=me(),B!==a?(it=Tt(),m.charCodeAt(ct)===58?(z=at,ct++):(z=a,be===0&&Pe(sr)),z!==a?(Rr=d,d=Xu(B)):(ct=d,d=a)):(ct=d,d=a),d}function wi(){var d,B,it,z;return d=ct,B=du(),B!==a?(it=Tt(),z=Ss(),z!==a?(Rr=d,d=Sa(B,z)):(ct=d,d=a)):(ct=d,d=a),d===a&&(d=Ss()),d}function du(){var d;return m.charCodeAt(ct)===36?(d=q,ct++):(d=a,be===0&&Pe(O)),d===a&&(m.charCodeAt(ct)===38?(d=U,ct++):(d=a,be===0&&Pe(le)),d===a&&(m.charCodeAt(ct)===33?(d=V,ct++):(d=a,be===0&&Pe(Kt)))),d}function Ss(){var d,B,it,z;return d=ct,B=gu(),B!==a?(it=Tt(),z=Zi(),z!==a?(Rr=d,d=Qn(B,z)):(ct=d,d=a)):(ct=d,d=a),d===a&&(d=gu()),d}function Zi(){var d;return m.charCodeAt(ct)===63?(d=lt,ct++):(d=a,be===0&&Pe(he)),d===a&&(m.charCodeAt(ct)===42?(d=It,ct++):(d=a,be===0&&Pe(kt)),d===a&&(m.charCodeAt(ct)===43?(d=Ot,ct++):(d=a,be===0&&Pe(ne)))),d}function gu(){var d,B,it,z,St,qt;return d=un(),d===a&&(d=Fn(),d===a&&(d=b(),d===a&&(d=ha(),d===a&&(d=Tu(),d===a&&(d=ct,m.charCodeAt(ct)===40?(B=yt,ct++):(B=a,be===0&&Pe(Oe)),B!==a?(it=Tt(),z=Pu(),z!==a?(St=Tt(),m.charCodeAt(ct)===41?(qt=Et,ct++):(qt=a,be===0&&Pe(_e)),qt!==a?(Rr=d,d=Cu(z)):(ct=d,d=a)):(ct=d,d=a)):(ct=d,d=a)))))),d}function ha(){var d,B,it,z,St,qt,ee,ie;return d=ct,B=me(),B!==a?(it=ct,be++,z=ct,St=Tt(),qt=ct,ee=Gn(),ee!==a?(ie=Tt(),ee=[ee,ie],qt=ee):(ct=qt,qt=a),qt===a&&(qt=null),m.charCodeAt(ct)===61?(ee=J,ct++):(ee=a,be===0&&Pe(te)),ee!==a?(St=[St,qt,ee],z=St):(ct=z,z=a),be--,z===a?it=void 0:(ct=it,it=a),it!==a?(Rr=d,d=vi(B)):(ct=d,d=a)):(ct=d,d=a),d}function Tu(){var d,B,it,z;return d=ct,B=ti(),B!==a?(it=Tt(),z=D(),z!==a?(Rr=d,d=Zu(B,z)):(ct=d,d=a)):(ct=d,d=a),d}function ti(){var d;return m.charCodeAt(ct)===38?(d=U,ct++):(d=a,be===0&&Pe(le)),d===a&&(m.charCodeAt(ct)===33?(d=V,ct++):(d=a,be===0&&Pe(Kt))),d}function Nn(){var d;return m.length>ct?(d=m.charAt(ct),ct++):(d=a,be===0&&Pe(Te)),d}function Qi(){var d,B;return be++,m.charCodeAt(ct)===9?(d=vt,ct++):(d=a,be===0&&Pe(tr)),d===a&&(m.charCodeAt(ct)===11?(d=Yt,ct++):(d=a,be===0&&Pe(lr)),d===a&&(m.charCodeAt(ct)===12?(d=Xt,ct++):(d=a,be===0&&Pe(ar)),d===a&&(m.charCodeAt(ct)===32?(d=re,ct++):(d=a,be===0&&Pe(Ar)),d===a&&(m.charCodeAt(ct)===160?(d=ae,ct++):(d=a,be===0&&Pe(jr)),d===a&&(m.charCodeAt(ct)===65279?(d=He,ct++):(d=a,be===0&&Pe(ln)),d===a&&(d=Ft())))))),be--,d===a&&(B=a,be===0&&Pe(Ue)),d}function ei(){var d;return W.test(m.charAt(ct))?(d=m.charAt(ct),ct++):(d=a,be===0&&Pe(cn)),d}function Ni(){var d,B;return be++,m.charCodeAt(ct)===10?(d=de,ct++):(d=a,be===0&&Pe(mr)),d===a&&(m.substr(ct,2)===pe?(d=pe,ct+=2):(d=a,be===0&&Pe(Nr)),d===a&&(m.charCodeAt(ct)===13?(d=Ce,ct++):(d=a,be===0&&Pe(gn)),d===a&&(m.charCodeAt(ct)===8232?(d=Ie,ct++):(d=a,be===0&&Pe(Kn)),d===a&&(m.charCodeAt(ct)===8233?(d=Ve,ct++):(d=a,be===0&&Pe(tn)))))),be--,d===a&&(B=a,be===0&&Pe(Mr)),d}function yu(){var d,B;return be++,d=Ra(),d===a&&(d=zs()),be--,d===a&&(B=a,be===0&&Pe(Wn)),d}function Ra(){var d,B,it,z,St,qt;if(d=ct,m.substr(ct,2)===We?(B=We,ct+=2):(B=a,be===0&&Pe(Br)),B!==a){for(it=[],z=ct,St=ct,be++,m.substr(ct,2)===we?(qt=we,ct+=2):(qt=a,be===0&&Pe(bn)),be--,qt===a?St=void 0:(ct=St,St=a),St!==a?(qt=Nn(),qt!==a?(St=[St,qt],z=St):(ct=z,z=a)):(ct=z,z=a);z!==a;)it.push(z),z=ct,St=ct,be++,m.substr(ct,2)===we?(qt=we,ct+=2):(qt=a,be===0&&Pe(bn)),be--,qt===a?St=void 0:(ct=St,St=a),St!==a?(qt=Nn(),qt!==a?(St=[St,qt],z=St):(ct=z,z=a)):(ct=z,z=a);m.substr(ct,2)===we?(z=we,ct+=2):(z=a,be===0&&Pe(bn)),z!==a?(B=[B,it,z],d=B):(ct=d,d=a)}else ct=d,d=a;return d}function fa(){var d,B,it,z,St,qt;if(d=ct,m.substr(ct,2)===We?(B=We,ct+=2):(B=a,be===0&&Pe(Br)),B!==a){for(it=[],z=ct,St=ct,be++,m.substr(ct,2)===we?(qt=we,ct+=2):(qt=a,be===0&&Pe(bn)),qt===a&&(qt=ei()),be--,qt===a?St=void 0:(ct=St,St=a),St!==a?(qt=Nn(),qt!==a?(St=[St,qt],z=St):(ct=z,z=a)):(ct=z,z=a);z!==a;)it.push(z),z=ct,St=ct,be++,m.substr(ct,2)===we?(qt=we,ct+=2):(qt=a,be===0&&Pe(bn)),qt===a&&(qt=ei()),be--,qt===a?St=void 0:(ct=St,St=a),St!==a?(qt=Nn(),qt!==a?(St=[St,qt],z=St):(ct=z,z=a)):(ct=z,z=a);m.substr(ct,2)===we?(z=we,ct+=2):(z=a,be===0&&Pe(bn)),z!==a?(B=[B,it,z],d=B):(ct=d,d=a)}else ct=d,d=a;return d}function zs(){var d,B,it,z,St,qt;if(d=ct,m.substr(ct,2)===Se?(B=Se,ct+=2):(B=a,be===0&&Pe(as)),B!==a){for(it=[],z=ct,St=ct,be++,qt=ei(),be--,qt===a?St=void 0:(ct=St,St=a),St!==a?(qt=Nn(),qt!==a?(St=[St,qt],z=St):(ct=z,z=a)):(ct=z,z=a);z!==a;)it.push(z),z=ct,St=ct,be++,qt=ei(),be--,qt===a?St=void 0:(ct=St,St=a),St!==a?(qt=Nn(),qt!==a?(St=[St,qt],z=St):(ct=z,z=a)):(ct=z,z=a);B=[B,it],d=B}else ct=d,d=a;return d}function me(){var d,B,it,z;if(be++,d=ct,B=Le(),B!==a){for(it=[],z=ke();z!==a;)it.push(z),z=ke();Rr=d,d=Du(B,it)}else ct=d,d=a;return be--,d===a&&(B=a,be===0&&Pe(_n)),d}function Le(){var d,B,it;return d=pr(),d===a&&(m.charCodeAt(ct)===36?(d=q,ct++):(d=a,be===0&&Pe(O)),d===a&&(m.charCodeAt(ct)===95?(d=Qe,ct++):(d=a,be===0&&Pe($s)),d===a&&(d=ct,m.charCodeAt(ct)===92?(B=Ke,ct++):(B=a,be===0&&Pe(Zr)),B!==a?(it=l(),it!==a?d=it:(ct=d,d=a)):(ct=d,d=a)))),d}function ke(){var d;return d=Le(),d===a&&(d=Or(),d===a&&(d=T(),d===a&&(d=Y(),d===a&&(m.charCodeAt(ct)===8204?(d=Ze,ct++):(d=a,be===0&&Pe(_s)),d===a&&(m.charCodeAt(ct)===8205?(d=vr,ct++):(d=a,be===0&&Pe(ks))))))),d}function pr(){var d;return d=P(),d===a&&(d=M(),d===a&&(d=mt(),d===a&&(d=K(),d===a&&(d=ht(),d===a&&(d=ot()))))),d}function Or(){var d;return d=ut(),d===a&&(d=I()),d}function un(){var d,B,it;return be++,d=ct,B=Gn(),B!==a?(m.charCodeAt(ct)===105?(it=Pr,ct++):(it=a,be===0&&Pe(qs)),it===a&&(it=null),Rr=d,d=Yn(B,it)):(ct=d,d=a),be--,d===a&&(B=a,be===0&&Pe(Xs)),d}function Gn(){var d,B,it,z;if(be++,d=ct,m.charCodeAt(ct)===34?(B=Cr,ct++):(B=a,be===0&&Pe(In)),B!==a){for(it=[],z=An();z!==a;)it.push(z),z=An();m.charCodeAt(ct)===34?(z=Cr,ct++):(z=a,be===0&&Pe(In)),z!==a?(Rr=d,d=Qu(it)):(ct=d,d=a)}else ct=d,d=a;if(d===a)if(d=ct,m.charCodeAt(ct)===39?(B=et,ct++):(B=a,be===0&&Pe(Si)),B!==a){for(it=[],z=Fi();z!==a;)it.push(z),z=Fi();m.charCodeAt(ct)===39?(z=et,ct++):(z=a,be===0&&Pe(Si)),z!==a?(Rr=d,d=ta(it)):(ct=d,d=a)}else ct=d,d=a;return be--,d===a&&(B=a,be===0&&Pe(os)),d}function An(){var d,B,it,z;return d=ct,B=ct,it=ct,be++,m.charCodeAt(ct)===34?(z=Cr,ct++):(z=a,be===0&&Pe(In)),z===a&&(m.charCodeAt(ct)===92?(z=Ke,ct++):(z=a,be===0&&Pe(Zr)),z===a&&(z=ei())),be--,z===a?it=void 0:(ct=it,it=a),it!==a?(z=Nn(),z!==a?(it=[it,z],B=it):(ct=B,B=a)):(ct=B,B=a),B!==a?d=m.substring(d,ct):d=B,d===a&&(d=ct,m.charCodeAt(ct)===92?(B=Ke,ct++):(B=a,be===0&&Pe(Zr)),B!==a?(it=ri(),it!==a?d=it:(ct=d,d=a)):(ct=d,d=a),d===a&&(d=da())),d}function Fi(){var d,B,it,z;return d=ct,B=ct,it=ct,be++,m.charCodeAt(ct)===39?(z=et,ct++):(z=a,be===0&&Pe(Si)),z===a&&(m.charCodeAt(ct)===92?(z=Ke,ct++):(z=a,be===0&&Pe(Zr)),z===a&&(z=ei())),be--,z===a?it=void 0:(ct=it,it=a),it!==a?(z=Nn(),z!==a?(it=[it,z],B=it):(ct=B,B=a)):(ct=B,B=a),B!==a?d=m.substring(d,ct):d=B,d===a&&(d=ct,m.charCodeAt(ct)===92?(B=Ke,ct++):(B=a,be===0&&Pe(Zr)),B!==a?(it=ri(),it!==a?d=it:(ct=d,d=a)):(ct=d,d=a),d===a&&(d=da())),d}function Fn(){var d,B,it,z,St,qt;if(be++,d=ct,m.charCodeAt(ct)===91?(B=k,ct++):(B=a,be===0&&Pe(ls)),B!==a){for(m.charCodeAt(ct)===94?(it=Z,ct++):(it=a,be===0&&Pe(Vi)),it===a&&(it=null),z=[],St=je(),St===a&&(St=Tr());St!==a;)z.push(St),St=je(),St===a&&(St=Tr());m.charCodeAt(ct)===93?(St=se,ct++):(St=a,be===0&&Pe(Ki)),St!==a?(m.charCodeAt(ct)===105?(qt=Pr,ct++):(qt=a,be===0&&Pe(qs)),qt===a&&(qt=null),Rr=d,d=ea(it,z,qt)):(ct=d,d=a)}else ct=d,d=a;return be--,d===a&&(B=a,be===0&&Pe(Xn)),d}function je(){var d,B,it,z;return d=ct,B=Tr(),B!==a?(m.charCodeAt(ct)===45?(it=Ee,ct++):(it=a,be===0&&Pe(Bi)),it!==a?(z=Tr(),z!==a?(Rr=d,d=ra(B,z)):(ct=d,d=a)):(ct=d,d=a)):(ct=d,d=a),d}function Tr(){var d,B,it,z;return d=ct,B=ct,it=ct,be++,m.charCodeAt(ct)===93?(z=se,ct++):(z=a,be===0&&Pe(Ki)),z===a&&(m.charCodeAt(ct)===92?(z=Ke,ct++):(z=a,be===0&&Pe(Zr)),z===a&&(z=ei())),be--,z===a?it=void 0:(ct=it,it=a),it!==a?(z=Nn(),z!==a?(it=[it,z],B=it):(ct=B,B=a)):(ct=B,B=a),B!==a?d=m.substring(d,ct):d=B,d===a&&(d=ct,m.charCodeAt(ct)===92?(B=Ke,ct++):(B=a,be===0&&Pe(Zr)),B!==a?(it=ri(),it!==a?d=it:(ct=d,d=a)):(ct=d,d=a),d===a&&(d=da())),d}function da(){var d,B,it;return d=ct,m.charCodeAt(ct)===92?(B=Ke,ct++):(B=a,be===0&&Pe(Zr)),B!==a?(it=Ni(),it!==a?(Rr=d,d=sa()):(ct=d,d=a)):(ct=d,d=a),d}function ri(){var d,B,it,z;return d=eu(),d===a&&(d=ct,m.charCodeAt(ct)===48?(B=rr,ct++):(B=a,be===0&&Pe(pu)),B!==a?(it=ct,be++,z=o(),be--,z===a?it=void 0:(ct=it,it=a),it!==a?(Rr=d,d=ia()):(ct=d,d=a)):(ct=d,d=a),d===a&&(d=r(),d===a&&(d=l()))),d}function eu(){var d;return d=Ti(),d===a&&(d=nr()),d}function Ti(){var d,B;return m.charCodeAt(ct)===39?(d=et,ct++):(d=a,be===0&&Pe(Si)),d===a&&(m.charCodeAt(ct)===34?(d=Cr,ct++):(d=a,be===0&&Pe(In)),d===a&&(m.charCodeAt(ct)===92?(d=Ke,ct++):(d=a,be===0&&Pe(Zr)),d===a&&(d=ct,m.charCodeAt(ct)===98?(B=fr,ct++):(B=a,be===0&&Pe(Ei)),B!==a&&(Rr=d,B=Fs()),d=B,d===a&&(d=ct,m.charCodeAt(ct)===102?(B=yr,ct++):(B=a,be===0&&Pe(zi)),B!==a&&(Rr=d,B=aa()),d=B,d===a&&(d=ct,m.charCodeAt(ct)===110?(B=ur,ct++):(B=a,be===0&&Pe(Ii)),B!==a&&(Rr=d,B=Je()),d=B,d===a&&(d=ct,m.charCodeAt(ct)===114?(B=er,ct++):(B=a,be===0&&Pe(oi)),B!==a&&(Rr=d,B=v()),d=B,d===a&&(d=ct,m.charCodeAt(ct)===116?(B=Wr,ct++):(B=a,be===0&&Pe(ns)),B!==a&&(Rr=d,B=xu()),d=B,d===a&&(d=ct,m.charCodeAt(ct)===118?(B=Lr,ct++):(B=a,be===0&&Pe(Cn)),B!==a&&(Rr=d,B=Zs()),d=B)))))))),d}function nr(){var d,B,it,z;return d=ct,B=ct,it=ct,be++,z=$a(),z===a&&(z=ei()),be--,z===a?it=void 0:(ct=it,it=a),it!==a?(z=Nn(),z!==a?(it=[it,z],B=it):(ct=B,B=a)):(ct=B,B=a),B!==a?d=m.substring(d,ct):d=B,d}function $a(){var d;return d=Ti(),d===a&&(d=o(),d===a&&(m.charCodeAt(ct)===120?(d=Sr,ct++):(d=a,be===0&&Pe(bt)),d===a&&(m.charCodeAt(ct)===117?(d=L,ct++):(d=a,be===0&&Pe(Rt))))),d}function r(){var d,B,it,z,St,qt;return d=ct,m.charCodeAt(ct)===120?(B=Sr,ct++):(B=a,be===0&&Pe(bt)),B!==a?(it=ct,z=ct,St=h(),St!==a?(qt=h(),qt!==a?(St=[St,qt],z=St):(ct=z,z=a)):(ct=z,z=a),z!==a?it=m.substring(it,ct):it=z,it!==a?(Rr=d,d=Ai(it)):(ct=d,d=a)):(ct=d,d=a),d}function l(){var d,B,it,z,St,qt,ee,ie;return d=ct,m.charCodeAt(ct)===117?(B=L,ct++):(B=a,be===0&&Pe(Rt)),B!==a?(it=ct,z=ct,St=h(),St!==a?(qt=h(),qt!==a?(ee=h(),ee!==a?(ie=h(),ie!==a?(St=[St,qt,ee,ie],z=St):(ct=z,z=a)):(ct=z,z=a)):(ct=z,z=a)):(ct=z,z=a),z!==a?it=m.substring(it,ct):it=z,it!==a?(Rr=d,d=cs(it)):(ct=d,d=a)):(ct=d,d=a),d}function o(){var d;return Bt.test(m.charAt(ct))?(d=m.charAt(ct),ct++):(d=a,be===0&&Pe(Mt)),d}function h(){var d;return Nt.test(m.charAt(ct))?(d=m.charAt(ct),ct++):(d=a,be===0&&Pe(ge)),d}function b(){var d,B;return d=ct,m.charCodeAt(ct)===46?(B=f,ct++):(B=a,be===0&&Pe(Me)),B!==a&&(Rr=d,B=Pn()),d=B,d}function D(){var d,B,it,z;return be++,d=ct,m.charCodeAt(ct)===123?(B=j,ct++):(B=a,be===0&&Pe(Wt)),B!==a?(it=x(),m.charCodeAt(ct)===125?(z=tt,ct++):(z=a,be===0&&Pe(xe)),z!==a?d=it:(ct=d,d=a)):(ct=d,d=a),be--,d===a&&(B=a,be===0&&Pe(Ye)),d}function x(){var d,B;return d=ct,B=_(),Rr=d,B=li(B),d=B,d}function _(){var d,B,it,z,St,qt;if(d=ct,B=[],it=[],z=ct,St=ct,be++,nt.test(m.charAt(ct))?(qt=m.charAt(ct),ct++):(qt=a,be===0&&Pe(ir)),be--,qt===a?St=void 0:(ct=St,St=a),St!==a?(qt=Nn(),qt!==a?(St=[St,qt],z=St):(ct=z,z=a)):(ct=z,z=a),z!==a)for(;z!==a;)it.push(z),z=ct,St=ct,be++,nt.test(m.charAt(ct))?(qt=m.charAt(ct),ct++):(qt=a,be===0&&Pe(ir)),be--,qt===a?St=void 0:(ct=St,St=a),St!==a?(qt=Nn(),qt!==a?(St=[St,qt],z=St):(ct=z,z=a)):(ct=z,z=a);else it=a;for(it===a&&(it=ct,m.charCodeAt(ct)===123?(z=j,ct++):(z=a,be===0&&Pe(Wt)),z!==a?(St=_(),m.charCodeAt(ct)===125?(qt=tt,ct++):(qt=a,be===0&&Pe(xe)),qt!==a?(z=[z,St,qt],it=z):(ct=it,it=a)):(ct=it,it=a));it!==a;){if(B.push(it),it=[],z=ct,St=ct,be++,nt.test(m.charAt(ct))?(qt=m.charAt(ct),ct++):(qt=a,be===0&&Pe(ir)),be--,qt===a?St=void 0:(ct=St,St=a),St!==a?(qt=Nn(),qt!==a?(St=[St,qt],z=St):(ct=z,z=a)):(ct=z,z=a),z!==a)for(;z!==a;)it.push(z),z=ct,St=ct,be++,nt.test(m.charAt(ct))?(qt=m.charAt(ct),ct++):(qt=a,be===0&&Pe(ir)),be--,qt===a?St=void 0:(ct=St,St=a),St!==a?(qt=Nn(),qt!==a?(St=[St,qt],z=St):(ct=z,z=a)):(ct=z,z=a);else it=a;it===a&&(it=ct,m.charCodeAt(ct)===123?(z=j,ct++):(z=a,be===0&&Pe(Wt)),z!==a?(St=_(),m.charCodeAt(ct)===125?(qt=tt,ct++):(qt=a,be===0&&Pe(xe)),qt!==a?(z=[z,St,qt],it=z):(ct=it,it=a)):(ct=it,it=a))}return d=m.substring(d,ct),d}function M(){var d;return zt.test(m.charAt(ct))?(d=m.charAt(ct),ct++):(d=a,be===0&&Pe(cr)),d}function K(){var d;return Lt.test(m.charAt(ct))?(d=m.charAt(ct),ct++):(d=a,be===0&&Pe(nn)),d}function ht(){var d;return Be.test(m.charAt(ct))?(d=m.charAt(ct),ct++):(d=a,be===0&&Pe(en)),d}function mt(){var d;return _t.test(m.charAt(ct))?(d=m.charAt(ct),ct++):(d=a,be===0&&Pe(Er)),d}function P(){var d;return gt.test(m.charAt(ct))?(d=m.charAt(ct),ct++):(d=a,be===0&&Pe(hs)),d}function I(){var d;return rt.test(m.charAt(ct))?(d=m.charAt(ct),ct++):(d=a,be===0&&Pe(Ps)),d}function ut(){var d;return F.test(m.charAt(ct))?(d=m.charAt(ct),ct++):(d=a,be===0&&Pe(Ri)),d}function T(){var d;return st.test(m.charAt(ct))?(d=m.charAt(ct),ct++):(d=a,be===0&&Pe(ws)),d}function ot(){var d;return wt.test(m.charAt(ct))?(d=m.charAt(ct),ct++):(d=a,be===0&&Pe(ds)),d}function Y(){var d;return Ct.test(m.charAt(ct))?(d=m.charAt(ct),ct++):(d=a,be===0&&Pe($i)),d}function Ft(){var d;return Ut.test(m.charAt(ct))?(d=m.charAt(ct),ct++):(d=a,be===0&&Pe(En)),d}function Tt(){var d,B;for(d=[],B=Qi(),B===a&&(B=Ni(),B===a&&(B=yu()));B!==a;)d.push(B),B=Qi(),B===a&&(B=Ni(),B===a&&(B=yu()));return d}function Jt(){var d,B;for(d=[],B=Qi(),B===a&&(B=fa());B!==a;)d.push(B),B=Qi(),B===a&&(B=fa());return d}function Gt(){var d,B,it,z;return d=ct,B=Tt(),m.charCodeAt(ct)===59?(it=S,ct++):(it=a,be===0&&Pe(Gi)),it!==a?(B=[B,it],d=B):(ct=d,d=a),d===a&&(d=ct,B=Jt(),it=zs(),it===a&&(it=null),z=Ni(),z!==a?(B=[B,it,z],d=B):(ct=d,d=a),d===a&&(d=ct,B=Tt(),it=Ae(),it!==a?(B=[B,it],d=B):(ct=d,d=a))),d}function Ae(){var d,B;return d=ct,be++,m.length>ct?(B=m.charAt(ct),ct++):(B=a,be===0&&Pe(Te)),be--,B===a?d=void 0:(ct=d,d=a),d}let De=C.reservedWords||[];if(gs=w(),gs!==a&&ct===m.length)return gs;throw gs!==a&&ct<m.length&&Pe(Ru()),Pi(Dn,vn<m.length?m.charAt(vn):null,vn<m.length?Oi(vn,vn+1):Oi(vn,vn))}e.exports={SyntaxError:g,parse:E}}),Kh=ce((t,e)=>{"use strict";var n=O0(),u=dF(),s=gF(),p=M2(),g=["break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","new","return","super","switch","this","throw","try","typeof","var","void","while","with","null","true","false","enum","implements","interface","let","package","private","protected","public","static","yield","await"],y={VERSION:p,RESERVED_WORDS:g,GrammarError:n,parser:s,compiler:u,generate(E,m){m=m!==void 0?m:{};function C(X){let w={};return Object.keys(X).forEach(j=>{w[j]=X[j].slice()}),w}let a="plugins"in m?m.plugins:[],H={parser:y.parser,passes:C(y.compiler.passes),reservedWords:y.RESERVED_WORDS.slice()};return a.forEach(X=>{X.use(H,m)}),y.compiler.compile(H.parser.parse(E,{grammarSource:m.grammarSource,reservedWords:H.reservedWords}),H.passes,m)}};e.exports=y}),ow=ce((t,e)=>{(function(n,u){typeof t=="object"&&typeof e<"u"?e.exports=u():typeof define=="function"&&define.amd?define(u):n.JSON5=u()})(t,function(){"use strict";function n(kt,ne){return ne={exports:{}},kt(ne,ne.exports),ne.exports}var u=n(function(kt){var ne=kt.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=ne)}),s=n(function(kt){var ne=kt.exports={version:"2.6.5"};typeof __e=="number"&&(__e=ne)}),p=s.version,g=function(kt){return typeof kt=="object"?kt!==null:typeof kt=="function"},y=function(kt){if(!g(kt))throw TypeError(kt+" is not an object!");return kt},E=function(kt){try{return!!kt()}catch{return!0}},m=!E(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}),C=u.document,a=g(C)&&g(C.createElement),H=function(kt){return a?C.createElement(kt):{}},X=!m&&!E(function(){return Object.defineProperty(H("div"),"a",{get:function(){return 7}}).a!=7}),w=function(kt,ne){if(!g(kt))return kt;var Oe,_e;if(ne&&typeof(Oe=kt.toString)=="function"&&!g(_e=Oe.call(kt))||typeof(Oe=kt.valueOf)=="function"&&!g(_e=Oe.call(kt))||!ne&&typeof(Oe=kt.toString)=="function"&&!g(_e=Oe.call(kt)))return _e;throw TypeError("Can't convert object to primitive value")},j=Object.defineProperty,tt=m?Object.defineProperty:function(kt,ne,Oe){if(y(kt),ne=w(ne,!0),y(Oe),X)try{return j(kt,ne,Oe)}catch{}if("get"in Oe||"set"in Oe)throw TypeError("Accessors not supported!");return"value"in Oe&&(kt[ne]=Oe.value),kt},J={f:tt},N=function(kt,ne){return{enumerable:!(kt&1),configurable:!(kt&2),writable:!(kt&4),value:ne}},Q=m?function(kt,ne,Oe){return J.f(kt,ne,N(1,Oe))}:function(kt,ne,Oe){return kt[ne]=Oe,kt},at={}.hasOwnProperty,q=function(kt,ne){return at.call(kt,ne)},U=0,V=Math.random(),lt=function(kt){return"Symbol(".concat(kt===void 0?"":kt,")_",(++U+V).toString(36))},It=!1,Ot=n(function(kt){var ne="__core-js_shared__",Oe=u[ne]||(u[ne]={});(kt.exports=function(_e,Te){return Oe[_e]||(Oe[_e]=Te!==void 0?Te:{})})("versions",[]).push({version:s.version,mode:It?"pure":"global",copyright:"\xA9 2019 Denis Pushkarev (zloirock.ru)"})}),yt=Ot("native-function-to-string",Function.toString),Et=n(function(kt){var ne=lt("src"),Oe="toString",_e=(""+yt).split(Oe);s.inspectSource=function(Te){return yt.call(Te)},(kt.exports=function(Te,Ue,tr,lr){var ar=typeof tr=="function";ar&&(q(tr,"name")||Q(tr,"name",Ue)),Te[Ue]!==tr&&(ar&&(q(tr,ne)||Q(tr,ne,Te[Ue]?""+Te[Ue]:_e.join(String(Ue)))),Te===u?Te[Ue]=tr:lr?Te[Ue]?Te[Ue]=tr:Q(Te,Ue,tr):(delete Te[Ue],Q(Te,Ue,tr)))})(Function.prototype,Oe,function(){return typeof this=="function"&&this[ne]||yt.call(this)})}),vt=function(kt){if(typeof kt!="function")throw TypeError(kt+" is not a function!");return kt},Yt=function(kt,ne,Oe){if(vt(kt),ne===void 0)return kt;switch(Oe){case 1:return function(_e){return kt.call(ne,_e)};case 2:return function(_e,Te){return kt.call(ne,_e,Te)};case 3:return function(_e,Te,Ue){return kt.call(ne,_e,Te,Ue)}}return function(){return kt.apply(ne,arguments)}},Xt="prototype",re=function(kt,ne,Oe){var _e=kt&re.F,Te=kt&re.G,Ue=kt&re.S,tr=kt&re.P,lr=kt&re.B,ar=Te?u:Ue?u[ne]||(u[ne]={}):(u[ne]||{})[Xt],Ar=Te?s:s[ne]||(s[ne]={}),jr=Ar[Xt]||(Ar[Xt]={}),ln,cn,Mr,mr;Te&&(Oe=ne);for(ln in Oe)cn=!_e&&ar&&ar[ln]!==void 0,Mr=(cn?ar:Oe)[ln],mr=lr&&cn?Yt(Mr,u):tr&&typeof Mr=="function"?Yt(Function.call,Mr):Mr,ar&&Et(ar,ln,Mr,kt&re.U),Ar[ln]!=Mr&&Q(Ar,ln,mr),tr&&jr[ln]!=Mr&&(jr[ln]=Mr)};u.core=s,re.F=1,re.G=2,re.S=4,re.P=8,re.B=16,re.W=32,re.U=64,re.R=128;var ae=re,He=Math.ceil,de=Math.floor,pe=function(kt){return isNaN(kt=+kt)?0:(kt>0?de:He)(kt)},Ce=function(kt){if(kt==null)throw TypeError("Can't call method on  "+kt);return kt},Ie=function(kt){return function(ne,Oe){var _e=String(Ce(ne)),Te=pe(Oe),Ue=_e.length,tr,lr;return Te<0||Te>=Ue?kt?"":void 0:(tr=_e.charCodeAt(Te),tr<55296||tr>56319||Te+1===Ue||(lr=_e.charCodeAt(Te+1))<56320||lr>57343?kt?_e.charAt(Te):tr:kt?_e.slice(Te,Te+2):(tr-55296<<10)+(lr-56320)+65536)}},Ve=Ie(!1);ae(ae.P,"String",{codePointAt:function(kt){return Ve(this,kt)}});var We=s.String.codePointAt,we=Math.max,Se=Math.min,Qe=function(kt,ne){return kt=pe(kt),kt<0?we(kt+ne,0):Se(kt,ne)},Ke=String.fromCharCode,Ze=String.fromCodePoint;ae(ae.S+ae.F*(!!Ze&&Ze.length!=1),"String",{fromCodePoint:function(kt){for(var ne=arguments,Oe=[],_e=arguments.length,Te=0,Ue;_e>Te;){if(Ue=+ne[Te++],Qe(Ue,1114111)!==Ue)throw RangeError(Ue+" is not a valid code point");Oe.push(Ue<65536?Ke(Ue):Ke(((Ue-=65536)>>10)+55296,Ue%1024+56320))}return Oe.join("")}});var vr=s.String.fromCodePoint,Pr=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,Cr=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,et=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,k={Space_Separator:Pr,ID_Start:Cr,ID_Continue:et},Z={isSpaceSeparator:function(kt){return typeof kt=="string"&&k.Space_Separator.test(kt)},isIdStartChar:function(kt){return typeof kt=="string"&&(kt>="a"&&kt<="z"||kt>="A"&&kt<="Z"||kt==="$"||kt==="_"||k.ID_Start.test(kt))},isIdContinueChar:function(kt){return typeof kt=="string"&&(kt>="a"&&kt<="z"||kt>="A"&&kt<="Z"||kt>="0"&&kt<="9"||kt==="$"||kt==="_"||kt==="\u200C"||kt==="\u200D"||k.ID_Continue.test(kt))},isDigit:function(kt){return typeof kt=="string"&&/[0-9]/.test(kt)},isHexDigit:function(kt){return typeof kt=="string"&&/[0-9A-Fa-f]/.test(kt)}},se,Ee,rr,fr,yr,ur,er,Wr,Lr,Sr=function(kt,ne){se=String(kt),Ee="start",rr=[],fr=0,yr=1,ur=0,er=void 0,Wr=void 0,Lr=void 0;do er=nt(),wt[Ee]();while(er.type!=="eof");return typeof ne=="function"?L({"":Lr},"",ne):Lr};function L(kt,ne,Oe){var _e=kt[ne];if(_e!=null&&typeof _e=="object")if(Array.isArray(_e))for(var Te=0;Te<_e.length;Te++){var Ue=String(Te),tr=L(_e,Ue,Oe);tr===void 0?delete _e[Ue]:Object.defineProperty(_e,Ue,{value:tr,writable:!0,enumerable:!0,configurable:!0})}else for(var lr in _e){var ar=L(_e,lr,Oe);ar===void 0?delete _e[lr]:Object.defineProperty(_e,lr,{value:ar,writable:!0,enumerable:!0,configurable:!0})}return Oe.call(kt,ne,_e)}var f,S,W,Bt,Nt;function nt(){for(f="default",S="",W=!1,Bt=1;;){Nt=zt();var kt=Be[f]();if(kt)return kt}}function zt(){if(se[fr])return String.fromCodePoint(se.codePointAt(fr))}function Lt(){var kt=zt();return kt===`
`?(yr++,ur=0):kt?ur+=kt.length:ur++,kt&&(fr+=kt.length),kt}var Be={default:function(){switch(Nt){case"	":case"\v":case"\f":case" ":case"\xA0":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":Lt();return;case"/":Lt(),f="comment";return;case void 0:return Lt(),_t("eof")}if(Z.isSpaceSeparator(Nt)){Lt();return}return Be[Ee]()},comment:function(){switch(Nt){case"*":Lt(),f="multiLineComment";return;case"/":Lt(),f="singleLineComment";return}throw Wt(Lt())},multiLineComment:function(){switch(Nt){case"*":Lt(),f="multiLineCommentAsterisk";return;case void 0:throw Wt(Lt())}Lt()},multiLineCommentAsterisk:function(){switch(Nt){case"*":Lt();return;case"/":Lt(),f="default";return;case void 0:throw Wt(Lt())}Lt(),f="multiLineComment"},singleLineComment:function(){switch(Nt){case`
`:case"\r":case"\u2028":case"\u2029":Lt(),f="default";return;case void 0:return Lt(),_t("eof")}Lt()},value:function(){switch(Nt){case"{":case"[":return _t("punctuator",Lt());case"n":return Lt(),gt("ull"),_t("null",null);case"t":return Lt(),gt("rue"),_t("boolean",!0);case"f":return Lt(),gt("alse"),_t("boolean",!1);case"-":case"+":Lt()==="-"&&(Bt=-1),f="sign";return;case".":S=Lt(),f="decimalPointLeading";return;case"0":S=Lt(),f="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":S=Lt(),f="decimalInteger";return;case"I":return Lt(),gt("nfinity"),_t("numeric",1/0);case"N":return Lt(),gt("aN"),_t("numeric",NaN);case'"':case"'":W=Lt()==='"',S="",f="string";return}throw Wt(Lt())},identifierNameStartEscape:function(){if(Nt!=="u")throw Wt(Lt());Lt();var kt=st();switch(kt){case"$":case"_":break;default:if(!Z.isIdStartChar(kt))throw te();break}S+=kt,f="identifierName"},identifierName:function(){switch(Nt){case"$":case"_":case"\u200C":case"\u200D":S+=Lt();return;case"\\":Lt(),f="identifierNameEscape";return}if(Z.isIdContinueChar(Nt)){S+=Lt();return}return _t("identifier",S)},identifierNameEscape:function(){if(Nt!=="u")throw Wt(Lt());Lt();var kt=st();switch(kt){case"$":case"_":case"\u200C":case"\u200D":break;default:if(!Z.isIdContinueChar(kt))throw te();break}S+=kt,f="identifierName"},sign:function(){switch(Nt){case".":S=Lt(),f="decimalPointLeading";return;case"0":S=Lt(),f="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":S=Lt(),f="decimalInteger";return;case"I":return Lt(),gt("nfinity"),_t("numeric",Bt*(1/0));case"N":return Lt(),gt("aN"),_t("numeric",NaN)}throw Wt(Lt())},zero:function(){switch(Nt){case".":S+=Lt(),f="decimalPoint";return;case"e":case"E":S+=Lt(),f="decimalExponent";return;case"x":case"X":S+=Lt(),f="hexadecimal";return}return _t("numeric",Bt*0)},decimalInteger:function(){switch(Nt){case".":S+=Lt(),f="decimalPoint";return;case"e":case"E":S+=Lt(),f="decimalExponent";return}if(Z.isDigit(Nt)){S+=Lt();return}return _t("numeric",Bt*Number(S))},decimalPointLeading:function(){if(Z.isDigit(Nt)){S+=Lt(),f="decimalFraction";return}throw Wt(Lt())},decimalPoint:function(){switch(Nt){case"e":case"E":S+=Lt(),f="decimalExponent";return}if(Z.isDigit(Nt)){S+=Lt(),f="decimalFraction";return}return _t("numeric",Bt*Number(S))},decimalFraction:function(){switch(Nt){case"e":case"E":S+=Lt(),f="decimalExponent";return}if(Z.isDigit(Nt)){S+=Lt();return}return _t("numeric",Bt*Number(S))},decimalExponent:function(){switch(Nt){case"+":case"-":S+=Lt(),f="decimalExponentSign";return}if(Z.isDigit(Nt)){S+=Lt(),f="decimalExponentInteger";return}throw Wt(Lt())},decimalExponentSign:function(){if(Z.isDigit(Nt)){S+=Lt(),f="decimalExponentInteger";return}throw Wt(Lt())},decimalExponentInteger:function(){if(Z.isDigit(Nt)){S+=Lt();return}return _t("numeric",Bt*Number(S))},hexadecimal:function(){if(Z.isHexDigit(Nt)){S+=Lt(),f="hexadecimalInteger";return}throw Wt(Lt())},hexadecimalInteger:function(){if(Z.isHexDigit(Nt)){S+=Lt();return}return _t("numeric",Bt*Number(S))},string:function(){switch(Nt){case"\\":Lt(),S+=rt();return;case'"':if(W)return Lt(),_t("string",S);S+=Lt();return;case"'":if(!W)return Lt(),_t("string",S);S+=Lt();return;case`
`:case"\r":throw Wt(Lt());case"\u2028":case"\u2029":break;case void 0:throw Wt(Lt())}S+=Lt()},start:function(){switch(Nt){case"{":case"[":return _t("punctuator",Lt())}f="value"},beforePropertyName:function(){switch(Nt){case"$":case"_":S=Lt(),f="identifierName";return;case"\\":Lt(),f="identifierNameStartEscape";return;case"}":return _t("punctuator",Lt());case'"':case"'":W=Lt()==='"',f="string";return}if(Z.isIdStartChar(Nt)){S+=Lt(),f="identifierName";return}throw Wt(Lt())},afterPropertyName:function(){if(Nt===":")return _t("punctuator",Lt());throw Wt(Lt())},beforePropertyValue:function(){f="value"},afterPropertyValue:function(){switch(Nt){case",":case"}":return _t("punctuator",Lt())}throw Wt(Lt())},beforeArrayValue:function(){if(Nt==="]")return _t("punctuator",Lt());f="value"},afterArrayValue:function(){switch(Nt){case",":case"]":return _t("punctuator",Lt())}throw Wt(Lt())},end:function(){throw Wt(Lt())}};function _t(kt,ne){return{type:kt,value:ne,line:yr,column:ur}}function gt(kt){for(var ne=0,Oe=kt;ne<Oe.length;ne+=1){var _e=Oe[ne],Te=zt();if(Te!==_e)throw Wt(Lt());Lt()}}function rt(){var kt=zt();switch(kt){case"b":return Lt(),"\b";case"f":return Lt(),"\f";case"n":return Lt(),`
`;case"r":return Lt(),"\r";case"t":return Lt(),"	";case"v":return Lt(),"\v";case"0":if(Lt(),Z.isDigit(zt()))throw Wt(Lt());return"\0";case"x":return Lt(),F();case"u":return Lt(),st();case`
`:case"\u2028":case"\u2029":return Lt(),"";case"\r":return Lt(),zt()===`
`&&Lt(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw Wt(Lt());case void 0:throw Wt(Lt())}return Lt()}function F(){var kt="",ne=zt();if(!Z.isHexDigit(ne)||(kt+=Lt(),ne=zt(),!Z.isHexDigit(ne)))throw Wt(Lt());return kt+=Lt(),String.fromCodePoint(parseInt(kt,16))}function st(){for(var kt="",ne=4;ne-- >0;){var Oe=zt();if(!Z.isHexDigit(Oe))throw Wt(Lt());kt+=Lt()}return String.fromCodePoint(parseInt(kt,16))}var wt={start:function(){if(er.type==="eof")throw xe();Ct()},beforePropertyName:function(){switch(er.type){case"identifier":case"string":Wr=er.value,Ee="afterPropertyName";return;case"punctuator":Ut();return;case"eof":throw xe()}},afterPropertyName:function(){if(er.type==="eof")throw xe();Ee="beforePropertyValue"},beforePropertyValue:function(){if(er.type==="eof")throw xe();Ct()},beforeArrayValue:function(){if(er.type==="eof")throw xe();if(er.type==="punctuator"&&er.value==="]"){Ut();return}Ct()},afterPropertyValue:function(){if(er.type==="eof")throw xe();switch(er.value){case",":Ee="beforePropertyName";return;case"}":Ut()}},afterArrayValue:function(){if(er.type==="eof")throw xe();switch(er.value){case",":Ee="beforeArrayValue";return;case"]":Ut()}},end:function(){}};function Ct(){var kt;switch(er.type){case"punctuator":switch(er.value){case"{":kt={};break;case"[":kt=[];break}break;case"null":case"boolean":case"numeric":case"string":kt=er.value;break}if(Lr===void 0)Lr=kt;else{var ne=rr[rr.length-1];Array.isArray(ne)?ne.push(kt):Object.defineProperty(ne,Wr,{value:kt,writable:!0,enumerable:!0,configurable:!0})}if(kt!==null&&typeof kt=="object")rr.push(kt),Array.isArray(kt)?Ee="beforeArrayValue":Ee="beforePropertyName";else{var Oe=rr[rr.length-1];Oe==null?Ee="end":Array.isArray(Oe)?Ee="afterArrayValue":Ee="afterPropertyValue"}}function Ut(){rr.pop();var kt=rr[rr.length-1];kt==null?Ee="end":Array.isArray(kt)?Ee="afterArrayValue":Ee="afterPropertyValue"}function Wt(kt){return sr(kt===void 0?"JSON5: invalid end of input at "+yr+":"+ur:"JSON5: invalid character '"+Re(kt)+"' at "+yr+":"+ur)}function xe(){return sr("JSON5: invalid end of input at "+yr+":"+ur)}function te(){return ur-=5,sr("JSON5: invalid identifier character at "+yr+":"+ur)}function ve(kt){}function Re(kt){var ne={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(ne[kt])return ne[kt];if(kt<" "){var Oe=kt.charCodeAt(0).toString(16);return"\\x"+("00"+Oe).substring(Oe.length)}return kt}function sr(kt){var ne=new SyntaxError(kt);return ne.lineNumber=yr,ne.columnNumber=ur,ne}var O=function(kt,ne,Oe){var _e=[],Te="",Ue,tr,lr="",ar;if(ne!=null&&typeof ne=="object"&&!Array.isArray(ne)&&(Oe=ne.space,ar=ne.quote,ne=ne.replacer),typeof ne=="function")tr=ne;else if(Array.isArray(ne)){Ue=[];for(var Ar=0,jr=ne;Ar<jr.length;Ar+=1){var ln=jr[Ar],cn=void 0;typeof ln=="string"?cn=ln:(typeof ln=="number"||ln instanceof String||ln instanceof Number)&&(cn=String(ln)),cn!==void 0&&Ue.indexOf(cn)<0&&Ue.push(cn)}}return Oe instanceof Number?Oe=Number(Oe):Oe instanceof String&&(Oe=String(Oe)),typeof Oe=="number"?Oe>0&&(Oe=Math.min(10,Math.floor(Oe)),lr="          ".substr(0,Oe)):typeof Oe=="string"&&(lr=Oe.substr(0,10)),Mr("",{"":kt});function Mr(tn,Wn){var Br=Wn[tn];switch(Br!=null&&(typeof Br.toJSON5=="function"?Br=Br.toJSON5(tn):typeof Br.toJSON=="function"&&(Br=Br.toJSON(tn))),tr&&(Br=tr.call(Wn,tn,Br)),Br instanceof Number?Br=Number(Br):Br instanceof String?Br=String(Br):Br instanceof Boolean&&(Br=Br.valueOf()),Br){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof Br=="string")return mr(Br,!1);if(typeof Br=="number")return String(Br);if(typeof Br=="object")return Array.isArray(Br)?Kn(Br):Nr(Br)}function mr(tn){for(var Wn={"'":.1,'"':.2},Br={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},bn="",as=0;as<tn.length;as++){var _n=tn[as];switch(_n){case"'":case'"':Wn[_n]++,bn+=_n;continue;case"\0":if(Z.isDigit(tn[as+1])){bn+="\\x00";continue}}if(Br[_n]){bn+=Br[_n];continue}if(_n<" "){var $s=_n.charCodeAt(0).toString(16);bn+="\\x"+("00"+$s).substring($s.length);continue}bn+=_n}var Zr=ar||Object.keys(Wn).reduce(function(_s,ks){return Wn[_s]<Wn[ks]?_s:ks});return bn=bn.replace(new RegExp(Zr,"g"),Br[Zr]),Zr+bn+Zr}function Nr(tn){if(_e.indexOf(tn)>=0)throw TypeError("Converting circular structure to JSON5");_e.push(tn);var Wn=Te;Te=Te+lr;for(var Br=Ue||Object.keys(tn),bn=[],as=0,_n=Br;as<_n.length;as+=1){var $s=_n[as],Zr=Mr($s,tn);if(Zr!==void 0){var _s=gn($s)+":";lr!==""&&(_s+=" "),_s+=Zr,bn.push(_s)}}var ks;if(bn.length===0)ks="{}";else{var Xs;if(lr==="")Xs=bn.join(","),ks="{"+Xs+"}";else{var qs=`,
`+Te;Xs=bn.join(qs),ks=`{
`+Te+Xs+`,
`+Wn+"}"}}return _e.pop(),Te=Wn,ks}function gn(tn){if(tn.length===0)return mr(tn,!0);var Wn=String.fromCodePoint(tn.codePointAt(0));if(!Z.isIdStartChar(Wn))return mr(tn,!0);for(var Br=Wn.length;Br<tn.length;Br++)if(!Z.isIdContinueChar(String.fromCodePoint(tn.codePointAt(Br))))return mr(tn,!0);return tn}function Kn(tn){if(_e.indexOf(tn)>=0)throw TypeError("Converting circular structure to JSON5");_e.push(tn);var Wn=Te;Te=Te+lr;for(var Br=[],bn=0;bn<tn.length;bn++){var as=Mr(String(bn),tn);Br.push(as!==void 0?as:"null")}var _n;if(Br.length===0)_n="[]";else if(lr===""){var $s=Br.join(",");_n="["+$s+"]"}else{var Zr=`,
`+Te,_s=Br.join(Zr);_n=`[
`+Te+_s+`,
`+Wn+"]"}return _e.pop(),Te=Wn,_n}},le={parse:Sr,stringify:O},Kt=le,he=Kt;return he})}),_w=ce((t,e)=>{var n=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...u)=>{}:()=>{};e.exports=n}),Cw=ce((t,e)=>{var n="2.0.0",u=Number.MAX_SAFE_INTEGER||9007199254740991,s=16,p=250,g=["major","premajor","minor","preminor","patch","prepatch","prerelease"];e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:s,MAX_SAFE_BUILD_LENGTH:p,MAX_SAFE_INTEGER:u,RELEASE_TYPES:g,SEMVER_SPEC_VERSION:n,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}}),Fw=ce((t,e)=>{var{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:u,MAX_LENGTH:s}=Cw(),p=_w();t=e.exports={};var g=t.re=[],y=t.safeRe=[],E=t.src=[],m=t.t={},C=0,a="[a-zA-Z0-9-]",H=[["\\s",1],["\\d",s],[a,u]],X=j=>{for(let[tt,J]of H)j=j.split(`${tt}*`).join(`${tt}{0,${J}}`).split(`${tt}+`).join(`${tt}{1,${J}}`);return j},w=(j,tt,J)=>{let N=X(tt),Q=C++;p(j,Q,tt),m[j]=Q,E[Q]=tt,g[Q]=new RegExp(tt,J?"g":void 0),y[Q]=new RegExp(N,J?"g":void 0)};w("NUMERICIDENTIFIER","0|[1-9]\\d*"),w("NUMERICIDENTIFIERLOOSE","\\d+"),w("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${a}*`),w("MAINVERSION",`(${E[m.NUMERICIDENTIFIER]})\\.(${E[m.NUMERICIDENTIFIER]})\\.(${E[m.NUMERICIDENTIFIER]})`),w("MAINVERSIONLOOSE",`(${E[m.NUMERICIDENTIFIERLOOSE]})\\.(${E[m.NUMERICIDENTIFIERLOOSE]})\\.(${E[m.NUMERICIDENTIFIERLOOSE]})`),w("PRERELEASEIDENTIFIER",`(?:${E[m.NUMERICIDENTIFIER]}|${E[m.NONNUMERICIDENTIFIER]})`),w("PRERELEASEIDENTIFIERLOOSE",`(?:${E[m.NUMERICIDENTIFIERLOOSE]}|${E[m.NONNUMERICIDENTIFIER]})`),w("PRERELEASE",`(?:-(${E[m.PRERELEASEIDENTIFIER]}(?:\\.${E[m.PRERELEASEIDENTIFIER]})*))`),w("PRERELEASELOOSE",`(?:-?(${E[m.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${E[m.PRERELEASEIDENTIFIERLOOSE]})*))`),w("BUILDIDENTIFIER",`${a}+`),w("BUILD",`(?:\\+(${E[m.BUILDIDENTIFIER]}(?:\\.${E[m.BUILDIDENTIFIER]})*))`),w("FULLPLAIN",`v?${E[m.MAINVERSION]}${E[m.PRERELEASE]}?${E[m.BUILD]}?`),w("FULL",`^${E[m.FULLPLAIN]}$`),w("LOOSEPLAIN",`[v=\\s]*${E[m.MAINVERSIONLOOSE]}${E[m.PRERELEASELOOSE]}?${E[m.BUILD]}?`),w("LOOSE",`^${E[m.LOOSEPLAIN]}$`),w("GTLT","((?:<|>)?=?)"),w("XRANGEIDENTIFIERLOOSE",`${E[m.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),w("XRANGEIDENTIFIER",`${E[m.NUMERICIDENTIFIER]}|x|X|\\*`),w("XRANGEPLAIN",`[v=\\s]*(${E[m.XRANGEIDENTIFIER]})(?:\\.(${E[m.XRANGEIDENTIFIER]})(?:\\.(${E[m.XRANGEIDENTIFIER]})(?:${E[m.PRERELEASE]})?${E[m.BUILD]}?)?)?`),w("XRANGEPLAINLOOSE",`[v=\\s]*(${E[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${E[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${E[m.XRANGEIDENTIFIERLOOSE]})(?:${E[m.PRERELEASELOOSE]})?${E[m.BUILD]}?)?)?`),w("XRANGE",`^${E[m.GTLT]}\\s*${E[m.XRANGEPLAIN]}$`),w("XRANGELOOSE",`^${E[m.GTLT]}\\s*${E[m.XRANGEPLAINLOOSE]}$`),w("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),w("COERCE",`${E[m.COERCEPLAIN]}(?:$|[^\\d])`),w("COERCEFULL",E[m.COERCEPLAIN]+`(?:${E[m.PRERELEASE]})?(?:${E[m.BUILD]})?(?:$|[^\\d])`),w("COERCERTL",E[m.COERCE],!0),w("COERCERTLFULL",E[m.COERCEFULL],!0),w("LONETILDE","(?:~>?)"),w("TILDETRIM",`(\\s*)${E[m.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",w("TILDE",`^${E[m.LONETILDE]}${E[m.XRANGEPLAIN]}$`),w("TILDELOOSE",`^${E[m.LONETILDE]}${E[m.XRANGEPLAINLOOSE]}$`),w("LONECARET","(?:\\^)"),w("CARETTRIM",`(\\s*)${E[m.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",w("CARET",`^${E[m.LONECARET]}${E[m.XRANGEPLAIN]}$`),w("CARETLOOSE",`^${E[m.LONECARET]}${E[m.XRANGEPLAINLOOSE]}$`),w("COMPARATORLOOSE",`^${E[m.GTLT]}\\s*(${E[m.LOOSEPLAIN]})$|^$`),w("COMPARATOR",`^${E[m.GTLT]}\\s*(${E[m.FULLPLAIN]})$|^$`),w("COMPARATORTRIM",`(\\s*)${E[m.GTLT]}\\s*(${E[m.LOOSEPLAIN]}|${E[m.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",w("HYPHENRANGE",`^\\s*(${E[m.XRANGEPLAIN]})\\s+-\\s+(${E[m.XRANGEPLAIN]})\\s*$`),w("HYPHENRANGELOOSE",`^\\s*(${E[m.XRANGEPLAINLOOSE]})\\s+-\\s+(${E[m.XRANGEPLAINLOOSE]})\\s*$`),w("STAR","(<|>)?=?\\s*\\*"),w("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),w("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}),jF=ce((t,e)=>{var n=Object.freeze({loose:!0}),u=Object.freeze({}),s=p=>p?typeof p!="object"?n:p:u;e.exports=s}),VF=ce((t,e)=>{var n=/^[0-9]+$/,u=(p,g)=>{let y=n.test(p),E=n.test(g);return y&&E&&(p=+p,g=+g),p===g?0:y&&!E?-1:E&&!y?1:p<g?-1:1},s=(p,g)=>u(g,p);e.exports={compareIdentifiers:u,rcompareIdentifiers:s}}),Y0=ce((t,e)=>{var n=_w(),{MAX_LENGTH:u,MAX_SAFE_INTEGER:s}=Cw(),{safeRe:p,t:g}=Fw(),y=jF(),{compareIdentifiers:E}=VF(),m=class qi{constructor(a,H){if(H=y(H),a instanceof qi){if(a.loose===!!H.loose&&a.includePrerelease===!!H.includePrerelease)return a;a=a.version}else if(typeof a!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof a}".`);if(a.length>u)throw new TypeError(`version is longer than ${u} characters`);n("SemVer",a,H),this.options=H,this.loose=!!H.loose,this.includePrerelease=!!H.includePrerelease;let X=a.trim().match(H.loose?p[g.LOOSE]:p[g.FULL]);if(!X)throw new TypeError(`Invalid Version: ${a}`);if(this.raw=a,this.major=+X[1],this.minor=+X[2],this.patch=+X[3],this.major>s||this.major<0)throw new TypeError("Invalid major version");if(this.minor>s||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>s||this.patch<0)throw new TypeError("Invalid patch version");X[4]?this.prerelease=X[4].split(".").map(w=>{if(/^[0-9]+$/.test(w)){let j=+w;if(j>=0&&j<s)return j}return w}):this.prerelease=[],this.build=X[5]?X[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(a){if(n("SemVer.compare",this.version,this.options,a),!(a instanceof qi)){if(typeof a=="string"&&a===this.version)return 0;a=new qi(a,this.options)}return a.version===this.version?0:this.compareMain(a)||this.comparePre(a)}compareMain(a){return a instanceof qi||(a=new qi(a,this.options)),E(this.major,a.major)||E(this.minor,a.minor)||E(this.patch,a.patch)}comparePre(a){if(a instanceof qi||(a=new qi(a,this.options)),this.prerelease.length&&!a.prerelease.length)return-1;if(!this.prerelease.length&&a.prerelease.length)return 1;if(!this.prerelease.length&&!a.prerelease.length)return 0;let H=0;do{let X=this.prerelease[H],w=a.prerelease[H];if(n("prerelease compare",H,X,w),X===void 0&&w===void 0)return 0;if(w===void 0)return 1;if(X===void 0)return-1;if(X!==w)return E(X,w)}while(++H)}compareBuild(a){a instanceof qi||(a=new qi(a,this.options));let H=0;do{let X=this.build[H],w=a.build[H];if(n("build compare",H,X,w),X===void 0&&w===void 0)return 0;if(w===void 0)return 1;if(X===void 0)return-1;if(X!==w)return E(X,w)}while(++H)}inc(a,H,X){switch(a){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",H,X);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",H,X);break;case"prepatch":this.prerelease.length=0,this.inc("patch",H,X),this.inc("pre",H,X);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",H,X),this.inc("pre",H,X);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let w=Number(X)?1:0;if(!H&&X===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[w];else{let j=this.prerelease.length;for(;--j>=0;)typeof this.prerelease[j]=="number"&&(this.prerelease[j]++,j=-2);if(j===-1){if(H===this.prerelease.join(".")&&X===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(w)}}if(H){let j=[H,w];X===!1&&(j=[H]),E(this.prerelease[0],H)===0?isNaN(this.prerelease[1])&&(this.prerelease=j):this.prerelease=j}break}default:throw new Error(`invalid increment argument: ${a}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};e.exports=m}),JF=ce((t,e)=>{var n=Y0(),u=(s,p,g)=>new n(s,g).compare(new n(p,g));e.exports=u}),QF=ce((t,e)=>{var n=JF(),u=(s,p,g)=>n(s,p,g)>=0;e.exports=u}),r3=ce((t,e)=>{var n=Y0(),u=(s,p,g=!1)=>{if(s instanceof n)return s;try{return new n(s,p)}catch(y){if(!g)return null;throw y}};e.exports=u}),i3=ce((t,e)=>{var n=Y0(),u=r3(),{safeRe:s,t:p}=Fw(),g=(y,E)=>{if(y instanceof n)return y;if(typeof y=="number"&&(y=String(y)),typeof y!="string")return null;E=E||{};let m=null;if(!E.rtl)m=y.match(E.includePrerelease?s[p.COERCEFULL]:s[p.COERCE]);else{let j=E.includePrerelease?s[p.COERCERTLFULL]:s[p.COERCERTL],tt;for(;(tt=j.exec(y))&&(!m||m.index+m[0].length!==y.length);)(!m||tt.index+tt[0].length!==m.index+m[0].length)&&(m=tt),j.lastIndex=tt.index+tt[1].length+tt[2].length;j.lastIndex=-1}if(m===null)return null;let C=m[2],a=m[3]||"0",H=m[4]||"0",X=E.includePrerelease&&m[5]?`-${m[5]}`:"",w=E.includePrerelease&&m[6]?`+${m[6]}`:"";return u(`${C}.${a}.${H}${X}${w}`,E)};e.exports=g}),Hd="2.21.7",gG=qr(CA()),$A="3.7.7",d9=$A,Gl=typeof Buffer=="function",DA=typeof TextDecoder=="function"?new TextDecoder:void 0,SA=typeof TextEncoder=="function"?new TextEncoder:void 0,p9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Sf=Array.prototype.slice.call(p9),Md=(t=>{let e={};return t.forEach((n,u)=>e[n]=u),e})(Sf),g9=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,$n=String.fromCharCode.bind(String),FA=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),RA=t=>t.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),PA=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),OA=t=>{let e,n,u,s,p="",g=t.length%3;for(let y=0;y<t.length;){if((n=t.charCodeAt(y++))>255||(u=t.charCodeAt(y++))>255||(s=t.charCodeAt(y++))>255)throw new TypeError("invalid character found");e=n<<16|u<<8|s,p+=Sf[e>>18&63]+Sf[e>>12&63]+Sf[e>>6&63]+Sf[e&63]}return g?p.slice(0,g-3)+"===".substring(g):p},mg=typeof btoa=="function"?t=>btoa(t):Gl?t=>Buffer.from(t,"binary").toString("base64"):OA,pg=Gl?t=>Buffer.from(t).toString("base64"):t=>{let e=[];for(let n=0,u=t.length;n<u;n+=4096)e.push($n.apply(null,t.subarray(n,n+4096)));return mg(e.join(""))},qd=(t,e=!1)=>e?RA(pg(t)):pg(t),m9=t=>{if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?$n(192|e>>>6)+$n(128|e&63):$n(224|e>>>12&15)+$n(128|e>>>6&63)+$n(128|e&63)}else{var e=65536+(t.charCodeAt(0)-55296)*1024+(t.charCodeAt(1)-56320);return $n(240|e>>>18&7)+$n(128|e>>>12&63)+$n(128|e>>>6&63)+$n(128|e&63)}},v9=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,TA=t=>t.replace(v9,m9),IA=Gl?t=>Buffer.from(t,"utf8").toString("base64"):SA?t=>pg(SA.encode(t)):t=>mg(TA(t)),zl=(t,e=!1)=>e?RA(IA(t)):IA(t),BA=t=>zl(t,!0),w9=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,E9=t=>{switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),n=e-65536;return $n((n>>>10)+55296)+$n((n&1023)+56320);case 3:return $n((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return $n((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},xA=t=>t.replace(w9,E9),NA=t=>{if(t=t.replace(/\s+/g,""),!g9.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,n="",u,s;for(let p=0;p<t.length;)e=Md[t.charAt(p++)]<<18|Md[t.charAt(p++)]<<12|(u=Md[t.charAt(p++)])<<6|(s=Md[t.charAt(p++)]),n+=u===64?$n(e>>16&255):s===64?$n(e>>16&255,e>>8&255):$n(e>>16&255,e>>8&255,e&255);return n},vg=typeof atob=="function"?t=>atob(PA(t)):Gl?t=>Buffer.from(t,"base64").toString("binary"):NA,kA=Gl?t=>FA(Buffer.from(t,"base64")):t=>FA(vg(t).split("").map(e=>e.charCodeAt(0))),LA=t=>kA(UA(t)),A9=Gl?t=>Buffer.from(t,"base64").toString("utf8"):DA?t=>DA.decode(kA(t)):t=>xA(vg(t)),UA=t=>PA(t.replace(/[-_]/g,e=>e=="-"?"+":"/")),gg=t=>A9(UA(t)),b9=t=>{if(typeof t!="string")return!1;let e=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},jA=t=>({value:t,enumerable:!1,writable:!0,configurable:!0}),HA=function(){let t=(e,n)=>Object.defineProperty(String.prototype,e,jA(n));t("fromBase64",function(){return gg(this)}),t("toBase64",function(e){return zl(this,e)}),t("toBase64URI",function(){return zl(this,!0)}),t("toBase64URL",function(){return zl(this,!0)}),t("toUint8Array",function(){return LA(this)})},MA=function(){let t=(e,n)=>Object.defineProperty(Uint8Array.prototype,e,jA(n));t("toBase64",function(e){return qd(this,e)}),t("toBase64URI",function(){return qd(this,!0)}),t("toBase64URL",function(){return qd(this,!0)})},y9=()=>{HA(),MA()},dt={version:$A,VERSION:d9,atob:vg,atobPolyfill:NA,btoa:mg,btoaPolyfill:OA,fromBase64:gg,toBase64:zl,encode:zl,encodeURI:BA,encodeURL:BA,utob:TA,btou:xA,decode:gg,isValid:b9,fromUint8Array:qd,toUint8Array:LA,extendString:HA,extendUint8Array:MA,extendBuiltins:y9},qu=typeof $task<"u",Qa=typeof $loon<"u",Vu=typeof $httpClient<"u"&&!Qa,na=eval('typeof process !== "undefined"'),qA=typeof $environment<"u"&&$environment["stash-version"],VA=typeof $rocket<"u",_9=typeof egern=="object",C9=typeof $native<"u",Ku=typeof $Plugins<"u";function Vd(t){return t!==null&&typeof t=="object"&&[null,Object.prototype].includes(Object.getPrototypeOf(t))}function D9(t){let[e,n,u,s,p,g,y]=t.match(/^socks5:\/\/(?:(.*?):(.*?)@)?(.*?)(?::(\d+?))?(\?.*?)?(?:#(.*?))?$/);if(p)p=parseInt(p,10);else throw $.error(`port is not present in line: ${t}`),new Error(`port is not present in line: ${t}`);return{type:5,host:s,port:p,userId:n!=null?decodeURIComponent(n):void 0,password:u!=null?decodeURIComponent(u):void 0}}var Kd=class{constructor(t="untitled",e=!1){this.name=t,this.debug=e,this.http=Rs(),this.env=dn(),na&&require("dotenv").config(),this.node=na?{fs:require("fs")}:null,this.initCache();let n=(u,s)=>new Promise(function(p){setTimeout(p.bind(null,s),u)});Promise.prototype.delay=async function(u){let s=await this;return await n(u,s)}}initCache(){if(qu&&(this.cache=JSON.parse($prefs.valueForKey(this.name)||"{}")),(Qa||Vu)&&(this.cache=JSON.parse($persistentStore.read(this.name)||"{}")),Ku&&(this.cache=JSON.parse($Plugins.SubStoreCache.get(this.name)||"{}")),na){let basePath=eval("process.env.SUB_STORE_DATA_BASE_PATH")||".",rootPath=`${basePath}/root.json`,backupRootPath=`${basePath}/root_${Date.now()}.json`;if(this.log(`Root path: ${rootPath}`),this.node.fs.existsSync(rootPath))try{this.root=JSON.parse(this.node.fs.readFileSync(`${rootPath}`))}catch(t){this.node.fs.copyFileSync(rootPath,backupRootPath),this.error(`Failed to parse ${rootPath}: ${t.message}. Backup created at ${backupRootPath}`)}Vd(this.root)||(this.node.fs.writeFileSync(rootPath,JSON.stringify({}),{flag:"w"}),this.root={});let fpath=`${basePath}/${this.name}.json`,backupPath=`${basePath}/${this.name}_${Date.now()}.json`;if(this.log(`Data path: ${fpath}`),this.node.fs.existsSync(fpath))try{if(this.cache=JSON.parse(this.node.fs.readFileSync(`${fpath}`,"utf-8")),!Vd(this.cache))throw new Error("Invalid Data")}catch{try{let t=dt.decode(this.node.fs.readFileSync(`${fpath}`,"utf-8"));if(this.cache=JSON.parse(t),this.node.fs.writeFileSync(fpath,t,{flag:"w"}),!Vd(this.cache))throw new Error("Invalid Data")}catch(t){this.node.fs.copyFileSync(fpath,backupPath),this.error(`Failed to parse ${fpath}: ${t.message}. Backup created at ${backupPath}`)}}Vd(this.cache)||(this.node.fs.writeFileSync(fpath,JSON.stringify({}),{flag:"w"}),this.cache={})}}persistCache(){let data=JSON.stringify(this.cache,null,2);if(qu&&$prefs.setValueForKey(data,this.name),(Qa||Vu)&&$persistentStore.write(data,this.name),Ku&&$Plugins.SubStoreCache.set(this.name,data),na){let basePath=eval("process.env.SUB_STORE_DATA_BASE_PATH")||".";this.node.fs.writeFileSync(`${basePath}/${this.name}.json`,data,{flag:"w"},t=>{}),this.node.fs.writeFileSync(`${basePath}/root.json`,JSON.stringify(this.root,null,2),{flag:"w"},t=>{})}}write(t,e){if(this.log(`SET ${e}`),e.indexOf("#")!==-1){if(e=e.substr(1),Vu||Qa)return $persistentStore.write(t,e);if(qu)return $prefs.setValueForKey(t,e);if(na&&(this.root[e]=t),Ku)return $Plugins.SubStoreCache.set(e,t)}else this.cache[e]=t;this.persistCache()}read(t){if(this.log(`READ ${t}`),t.indexOf("#")!==-1){if(t=t.substr(1),Vu||Qa)return $persistentStore.read(t);if(qu)return $prefs.valueForKey(t);if(na)return this.root[t];if(Ku)return $Plugins.SubStoreCache.get(t)}else return this.cache[t]}delete(t){if(this.log(`DELETE ${t}`),t.indexOf("#")!==-1){if(t=t.substr(1),Vu||Qa)return $persistentStore.write(null,t);if(qu)return $prefs.removeValueForKey(t);if(na&&delete this.root[t],Ku)return $Plugins.SubStoreCache.remove(t)}else delete this.cache[t];this.persistCache()}notify(title,subtitle="",content="",options={}){let openURL=options["open-url"],mediaURL=options["media-url"];if(qu&&$notify(title,subtitle,content,options),Vu&&$notification.post(title,subtitle,content+`${mediaURL?`
\u591A\u5A92\u4F53:`+mediaURL:""}`,{url:openURL}),Qa){let t={};openURL&&(t.openUrl=openURL),mediaURL&&(t.mediaUrl=mediaURL),JSON.stringify(t)==="{}"?$notification.post(title,subtitle,content):$notification.post(title,subtitle,content,t)}if(na){let content_=content+(openURL?`
\u70B9\u51FB\u8DF3\u8F6C: ${openURL}`:"")+(mediaURL?`
\u591A\u5A92\u4F53: ${mediaURL}`:""),push=eval("process.env.SUB_STORE_PUSH_SERVICE");if(push)if(/^https?:\/\//.test(push)){let t=push.replace("[\u63A8\u9001\u6807\u9898]",encodeURIComponent(title||"Sub-Store")).replace("[\u63A8\u9001\u5185\u5BB9]",encodeURIComponent([subtitle,content_].map(e=>e).join(`
`)));Rs().get({url:t}).then(e=>{}).catch(e=>{})}else{let{execFile:t}=require("child_process");t("shoutrrr",["send","--url",push,"--message",`${title}
${subtitle}
${content_}`],(e,n,u)=>{})}}Ku&&$Plugins.Notify(title,subtitle+`
`+content)}log(t){this.debug}info(t){}error(t){}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){qu||Qa||Vu||Ku?$done(t):na&&typeof $context<"u"&&($context.headers=t.headers,$context.statusCode=t.statusCode,$context.body=t.body)}};function dn(){return{isQX:qu,isLoon:Qa,isSurge:Vu,isNode:na,isStash:qA,isShadowRocket:VA,isEgern:_9,isLanceX:C9,isGUIforCores:Ku}}function Rs(defaultOptions={baseURL:""}){let{isQX,isLoon,isSurge,isNode,isGUIforCores}=dn(),methods=["GET","POST","PUT","DELETE","HEAD","OPTIONS","PATCH"],URL_REGEX=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/;function send(method,options){options=typeof options=="string"?{url:options}:options;let baseURL=defaultOptions.baseURL;baseURL&&!URL_REGEX.test(options.url||"")&&(options.url=baseURL?baseURL+options.url:options.url),options={...defaultOptions,...options};let timeout=options.timeout,events={onRequest:()=>{},onResponse:t=>t,onTimeout:()=>{},...options.events};if(events.onRequest(method,options),options.node&&isSurge){let t=$environment["surge-build"];t&&parseInt(t)>=2407&&(options["policy-descriptor"]=options.node,delete options.node)}let worker;isQX?worker=$task.fetch({method,url:options.url,headers:options.headers,body:options.body,opts:options.opts}):isLoon||isSurge||isNode?worker=new Promise(async(resolve,reject)=>{let body=options.body,opts=JSON.parse(JSON.stringify(options));if(opts.body=body,opts.timeout=opts.timeout||8e3,opts.timeout&&(opts.timeout++,isNaN(opts.timeout)&&(opts.timeout=8e3),!isNode)){let t="ms";(isSurge||qA||VA)&&(opts.timeout=Math.ceil(opts.timeout/1e3),t="s")}if(isNode){let undici=require("undici"),{socksDispatcher}=require("fetch-socks"),{ProxyAgent,EnvHttpProxyAgent,request,interceptors}=undici,agentOpts={connect:{rejectUnauthorized:!(opts.strictSSL===!1||opts.insecure===!0||opts.rejectUnauthorized===!1)},bodyTimeout:opts.timeout,headersTimeout:opts.timeout,maxHeaderSize:eval("process.env.SUB_STORE_MAX_HEADER_SIZE")||32*1024},tlsOptions={rejectUnauthorized:agentOpts.connect.rejectUnauthorized};opts.tls={...opts.tls||{},...tlsOptions};try{let url=new URL(opts.url);(url.username||url.password)&&(opts.headers={...opts.headers||{},Authorization:`Basic ${Buffer.from(`${url.username||""}:${url.password||""}`).toString("base64")}`});let dispatcher;if(!opts.proxy){let allProxy=eval("process.env.all_proxy")||eval("process.env.ALL_PROXY");allProxy&&/^socks5:\/\//.test(allProxy)&&(opts.proxy=allProxy)}opts.proxy?/^socks5:\/\//.test(opts.proxy)?dispatcher=socksDispatcher(D9(opts.proxy),{...agentOpts,requestTls:tlsOptions}):dispatcher=new ProxyAgent({...agentOpts,uri:opts.proxy,requestTls:tlsOptions}):dispatcher=new EnvHttpProxyAgent({...agentOpts,requestTls:tlsOptions});let response=await request(opts.url,{...opts,method:method.toUpperCase(),dispatcher:dispatcher.compose(interceptors.redirect({maxRedirections:3,throwOnMaxRedirects:!0}))});resolve({statusCode:response.statusCode,headers:response.headers,body:opts.encoding===null?await response.body.arrayBuffer():await response.body.text()})}catch(t){reject(t)}}else $httpClient[method.toLowerCase()](opts,(t,e,n)=>{t?reject(t):resolve({statusCode:e.status||e.statusCode,headers:e.headers,body:n})})}):isGUIforCores&&(worker=new Promise(async(t,e)=>{try{let n=await $Plugins.Requests({method,url:options.url,headers:options.headers,body:options.body,autoTransformBody:!1,options:{Proxy:options.proxy,Timeout:options.timeout?options.timeout/1e3:15}});t({statusCode:n.status,headers:n.headers,body:n.body})}catch(n){e(n)}}));let timeoutid,timer=timeout?new Promise((t,e)=>{timeoutid=setTimeout(()=>(events.onTimeout(),e(`${method} URL: ${options.url} exceeds the timeout ${timeout} ms`)),timeout)}):null;return(timer?Promise.race([timer,worker]).then(t=>(typeof clearTimeout<"u"&&clearTimeout(timeoutid),t)):worker).then(t=>events.onResponse(t))}let http={};return methods.forEach(t=>http[t.toLowerCase()]=e=>send(t,e)),http}var S9=new Kd("sub-store"),R=S9,wg="schemaVersion",At="settings",Zt="subs",Qt="collections",jt="files",jn="modules",$t="artifacts",Ff="rules",ui="tokens",KA="Auto Generated Sub-Store Backup",zd="Sub-Store",Uo="Sub-Store Artifacts Repository",jo="#sub-store-cached-resource",Ho="#sub-store-cached-headers-resource",Mo="#sub-store-cached-script-resource";function zu(){F9()}function F9(){let t=R.read(wg);t||I9(),t!=="2.0"&&R.write("2.0",wg)}function I9(){R.info("Start migrating...");let t=R.read(Zt)||{},e=Object.values(t).map(w=>(w.source=w.source||"remote",H(w),X(w),w));R.write(e,Zt);let n=R.read(Qt)||{},u=Object.values(n).map(w=>(delete w.ua,H(w),X(w),w));R.write(u,Qt);let s=R.read($t)||{},p=Object.values(s);R.write(p,$t);let g=R.read(Ff)||{},y=Object.values(g);R.write(y,Ff);let E=R.read(jt)||{},m=Object.values(E);R.write(m,jt);let C=R.read(ui)||{},a=Object.values(C);R.write(a,ui),delete R.cache.builtin,R.info("Migration complete!");function H(w){let j=w["display-name"];j&&(w.displayName=j,delete w["display-name"])}function X(w){let j=w.process;if(!j||j.length===0)return;let tt=[],J={type:"Quick Setting Operator",args:{udp:"DEFAULT",tfo:"DEFAULT",scert:"DEFAULT","vmess aead":"DEFAULT",useless:"DEFAULT"}};for(let N of j)if(N.type){if(N.type==="Useless Filter")J.args.useless="ENABLED";else if(N.type==="Set Property Operator"){let{key:Q,value:at}=N.args;switch(Q){case"udp":J.args.udp=at?"ENABLED":"DISABLED";break;case"tfo":J.args.tfo=at?"ENABLED":"DISABLED";break;case"skip-cert-verify":J.args.scert=at?"ENABLED":"DISABLED";break;case"aead":J.args["vmess aead"]=at?"ENABLED":"DISABLED";break}}else if(N.type.indexOf("Keyword")===-1)if(N.type==="Flag Operator"){let Q=typeof N.args>"u"?!0:N.args;N.args={mode:Q?"add":"remove"},tt.push(N)}else tt.push(N)}tt.unshift(J),w.process=tt}}var oG=qr(Wl());function Eg({substore:$,port,host}){let{isNode}=dn(),DEFAULT_HEADERS={"Content-Type":"text/plain;charset=UTF-8","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST,GET,OPTIONS,PATCH,PUT,DELETE","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept","X-Powered-By":isNode&&eval("process.env.SUB_STORE_X_POWERED_BY")||"Sub-Store"};if(isNode){let express_=require("express"),bodyParser=require("body-parser"),app=express_(),limit=eval("process.env.SUB_STORE_BODY_JSON_LIMIT")||"1mb";return $.info(`[BACKEND] body JSON limit: ${limit}`),app.use(bodyParser.json({verify:rawBodySaver,limit})),app.use(bodyParser.urlencoded({verify:rawBodySaver,extended:!0})),app.use(bodyParser.raw({verify:rawBodySaver,type:"*/*"})),app.use((t,e,n)=>{e.set(DEFAULT_HEADERS),n()}),app.start=()=>{app.get("*",function(e,n){n.status(404).end()});let t=app.listen(port,host,()=>{let{address:e,port:n}=t.address();$.info(`[BACKEND] listening on ${e}:${n}`)})},app}let handlers=[],METHODS_NAMES=["GET","POST","PUT","DELETE","PATCH","OPTIONS","HEAD'","ALL"],dispatch=(t,e=0)=>{let{method:n,url:u,headers:s,body:p}=t;s=B9(s),/json/i.test(s["content-type"])&&(p=JSON.parse(p)),n=n.toUpperCase();let{path:g,query:y}=R9(u),E=null,m,C=0;for(m=e;m<handlers.length;m++)if(handlers[m].method==="ALL"||n===handlers[m].method){let{pattern:a}=handlers[m];$9(a,g)&&a.split("/").length>C&&(E=handlers[m],C=a.split("/").length)}if(E){let a=()=>{dispatch(n,u,m)},H={method:n,url:u,path:g,query:y,params:zA(E.pattern,g),headers:s,body:p},X=Response(),w=E.callback,j=tt=>{X.status(500).json({status:"failed",message:`Internal Server Error: ${tt}`})};if(w.constructor.name==="AsyncFunction")w(H,X,a).catch(j);else try{w(H,X,a)}catch(tt){j(tt)}}else Response().status(404).json({status:"failed",message:"ERROR: 404 not found"})},app={};return METHODS_NAMES.forEach(t=>{app[t.toLowerCase()]=(e,n)=>{handlers.push({method:t,pattern:e,callback:n})}}),app.route=t=>{let e={};return METHODS_NAMES.forEach(n=>{e[n.toLowerCase()]=u=>(handlers.push({method:n,pattern:t,callback:u}),e)}),e},app.start=()=>{dispatch($request)},app;function rawBodySaver(t,e,n,u){n&&n.length&&(t.rawBody=n.toString(u||"utf8"))}function Response(){let t=200,{isQX:e,isLoon:n,isSurge:u,isGUIforCores:s}=dn(),p=DEFAULT_HEADERS,g={200:"HTTP/1.1 200 OK",201:"HTTP/1.1 201 Created",302:"HTTP/1.1 302 Found",307:"HTTP/1.1 307 Temporary Redirect",308:"HTTP/1.1 308 Permanent Redirect",404:"HTTP/1.1 404 Not Found",500:"HTTP/1.1 500 Internal Server Error"};return new class{status(y){return t=y,this}send(y=""){let E={status:e?g[t]:t,body:y,headers:p};e||s?$done(E):(n||u)&&$done({response:E})}end(){this.send()}html(y){this.set("Content-Type","text/html;charset=UTF-8"),this.send(y)}json(y){this.set("Content-Type","application/json;charset=UTF-8"),this.send(JSON.stringify(y))}set(y,E){return p[y]=E,this}removeHeader(y){return delete p[y],this}}}}function B9(t){let e={};for(let n of Object.keys(t))e[n.toLowerCase()]=t[n];return e}function $9(t,e){if(t instanceof RegExp&&t.test(e)||t==="/")return!0;if(t.indexOf(":")===-1){let n=e.split("/"),u=t.split("/");for(let s=0;s<u.length;s++)if(n[s]!==u[s])return!1;return!0}else if(zA(t,e))return!0;return!1}function R9(t){let e=(t.match(/https?:\/\/[^/]+(\/[^?]*)/)||[])[1]||"/",n=t.indexOf("?"),u={};if(n!==-1){let s=t.slice(t.indexOf("?")+1).split("&");for(let p=0;p<s.length;p++){let g=s[p].split("=");u[g[0]]=decodeURIComponent(g[1])}}return{path:e,query:u}}function zA(t,e){if(t.indexOf(":")===-1)return null;{let n={};for(let u=0,s=0;u<t.length;u++,s++)if(t[u]===":"){let p=[],g=[];for(;t[++u]!=="/"&&u<t.length;)p.push(t[u]);for(;e[s]!=="/"&&s<e.length;)g.push(e[s++]);n[p.join("")]=decodeURIComponent(g.join(""))}else if(t[u]!==e[s])return null;return n}}var Ag=0;function Wi(t){return O9(P9(T9(t)))}function P9(t){return N9(k9(x9(t),t.length*8))}function O9(t){for(var e=Ag?"0123456789ABCDEF":"0123456789abcdef",n="",u,s=0;s<t.length;s++)u=t.charCodeAt(s),n+=e.charAt(u>>>4&15)+e.charAt(u&15);return n}function T9(t){for(var e="",n=-1,u,s;++n<t.length;)u=t.charCodeAt(n),s=n+1<t.length?t.charCodeAt(n+1):0,55296<=u&&u<=56319&&56320<=s&&s<=57343&&(u=65536+((u&1023)<<10)+(s&1023),n++),u<=127?e+=String.fromCharCode(u):u<=2047?e+=String.fromCharCode(192|u>>>6&31,128|u&63):u<=65535?e+=String.fromCharCode(224|u>>>12&15,128|u>>>6&63,128|u&63):u<=2097151&&(e+=String.fromCharCode(240|u>>>18&7,128|u>>>12&63,128|u>>>6&63,128|u&63));return e}function x9(t){for(var e=Array(t.length>>2),n=0;n<e.length;n++)e[n]=0;for(var n=0;n<t.length*8;n+=8)e[n>>5]|=(t.charCodeAt(n/8)&255)<<n%32;return e}function N9(t){for(var e="",n=0;n<t.length*32;n+=8)e+=String.fromCharCode(t[n>>5]>>>n%32&255);return e}function k9(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var n=1732584193,u=-271733879,s=-1732584194,p=271733878,g=0;g<t.length;g+=16){var y=n,E=u,m=s,C=p;n=Hn(n,u,s,p,t[g+0],7,-680876936),p=Hn(p,n,u,s,t[g+1],12,-389564586),s=Hn(s,p,n,u,t[g+2],17,606105819),u=Hn(u,s,p,n,t[g+3],22,-1044525330),n=Hn(n,u,s,p,t[g+4],7,-176418897),p=Hn(p,n,u,s,t[g+5],12,1200080426),s=Hn(s,p,n,u,t[g+6],17,-1473231341),u=Hn(u,s,p,n,t[g+7],22,-45705983),n=Hn(n,u,s,p,t[g+8],7,1770035416),p=Hn(p,n,u,s,t[g+9],12,-1958414417),s=Hn(s,p,n,u,t[g+10],17,-42063),u=Hn(u,s,p,n,t[g+11],22,-1990404162),n=Hn(n,u,s,p,t[g+12],7,1804603682),p=Hn(p,n,u,s,t[g+13],12,-40341101),s=Hn(s,p,n,u,t[g+14],17,-1502002290),u=Hn(u,s,p,n,t[g+15],22,1236535329),n=Mn(n,u,s,p,t[g+1],5,-165796510),p=Mn(p,n,u,s,t[g+6],9,-1069501632),s=Mn(s,p,n,u,t[g+11],14,643717713),u=Mn(u,s,p,n,t[g+0],20,-373897302),n=Mn(n,u,s,p,t[g+5],5,-701558691),p=Mn(p,n,u,s,t[g+10],9,38016083),s=Mn(s,p,n,u,t[g+15],14,-660478335),u=Mn(u,s,p,n,t[g+4],20,-405537848),n=Mn(n,u,s,p,t[g+9],5,568446438),p=Mn(p,n,u,s,t[g+14],9,-1019803690),s=Mn(s,p,n,u,t[g+3],14,-187363961),u=Mn(u,s,p,n,t[g+8],20,1163531501),n=Mn(n,u,s,p,t[g+13],5,-1444681467),p=Mn(p,n,u,s,t[g+2],9,-51403784),s=Mn(s,p,n,u,t[g+7],14,1735328473),u=Mn(u,s,p,n,t[g+12],20,-1926607734),n=qn(n,u,s,p,t[g+5],4,-378558),p=qn(p,n,u,s,t[g+8],11,-2022574463),s=qn(s,p,n,u,t[g+11],16,1839030562),u=qn(u,s,p,n,t[g+14],23,-35309556),n=qn(n,u,s,p,t[g+1],4,-1530992060),p=qn(p,n,u,s,t[g+4],11,1272893353),s=qn(s,p,n,u,t[g+7],16,-155497632),u=qn(u,s,p,n,t[g+10],23,-1094730640),n=qn(n,u,s,p,t[g+13],4,681279174),p=qn(p,n,u,s,t[g+0],11,-358537222),s=qn(s,p,n,u,t[g+3],16,-722521979),u=qn(u,s,p,n,t[g+6],23,76029189),n=qn(n,u,s,p,t[g+9],4,-640364487),p=qn(p,n,u,s,t[g+12],11,-421815835),s=qn(s,p,n,u,t[g+15],16,530742520),u=qn(u,s,p,n,t[g+2],23,-995338651),n=Vn(n,u,s,p,t[g+0],6,-198630844),p=Vn(p,n,u,s,t[g+7],10,1126891415),s=Vn(s,p,n,u,t[g+14],15,-1416354905),u=Vn(u,s,p,n,t[g+5],21,-57434055),n=Vn(n,u,s,p,t[g+12],6,1700485571),p=Vn(p,n,u,s,t[g+3],10,-1894986606),s=Vn(s,p,n,u,t[g+10],15,-1051523),u=Vn(u,s,p,n,t[g+1],21,-2054922799),n=Vn(n,u,s,p,t[g+8],6,1873313359),p=Vn(p,n,u,s,t[g+15],10,-30611744),s=Vn(s,p,n,u,t[g+6],15,-1560198380),u=Vn(u,s,p,n,t[g+13],21,1309151649),n=Vn(n,u,s,p,t[g+4],6,-145523070),p=Vn(p,n,u,s,t[g+11],10,-1120210379),s=Vn(s,p,n,u,t[g+2],15,718787259),u=Vn(u,s,p,n,t[g+9],21,-343485551),n=Gu(n,y),u=Gu(u,E),s=Gu(s,m),p=Gu(p,C)}return Array(n,u,s,p)}function Gd(t,e,n,u,s,p){return Gu(L9(Gu(Gu(e,t),Gu(u,p)),s),n)}function Hn(t,e,n,u,s,p,g){return Gd(e&n|~e&u,t,e,s,p,g)}function Mn(t,e,n,u,s,p,g){return Gd(e&u|n&~u,t,e,s,p,g)}function qn(t,e,n,u,s,p,g){return Gd(e^n^u,t,e,s,p,g)}function Vn(t,e,n,u,s,p,g){return Gd(n^(e|~u),t,e,s,p,g)}function Gu(t,e){var n=(t&65535)+(e&65535),u=(t>>16)+(e>>16)+(n>>16);return u<<16|n&65535}function L9(t,e){return t<<e|t>>>32-e}var rp=qr(sb()),cR=/^((25[0-5]|(2[0-4]|1\d|[1-9]|)\d)(\.(?!$)|$)){4}$/,fR=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/;function Xr(t){return cR.test(t)}function Vr(t){return fR.test(t)}function ab(t){return/^((6553[0-5])|(655[0-2][0-9])|(65[0-4][0-9]{2})|(6[0-4][0-9]{3})|([1-5][0-9]{4})|([0-5]{0,5})|([0-9]{1,4}))$/.test(t)}function la(t){return typeof t=="string"&&t.trim().length>0}function hr(t,e){return la(t)?t:e}function Ql(t){return typeof t<"u"&&t!==null}function ec(t,e){return Ql(t)?t:e}function tu(t){return t?/^.+?\s*?=\s*?.+?\s*?,.+?/.test(t)?{"policy-descriptor":t}:{policy:t}:{}}function hR(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}function Rf(t){let e=t.split(/,|\//),n=e[Math.floor(Math.random()*e.length)];if(n.includes("-")){let[u,s]=n.split("-").map(Number);return hR(u,s)}else return Number(n)}function ub(t){return Number.isSafeInteger(t)?String(t):BigInt(t).toString()}function np(t){return typeof t=="string"&&/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(t)}function Yu(t,e="YYYY-MM-DD_HH-mm-ss"){let n=t instanceof Date?t:new Date(t);if(isNaN(n.getTime()))return"";let u=p=>String(p).padStart(2,"0"),s={YYYY:n.getFullYear(),MM:u(n.getMonth()+1),DD:u(n.getDate()),HH:u(n.getHours()),mm:u(n.getMinutes()),ss:u(n.getSeconds())};return e.replace(/YYYY|MM|DD|HH|mm|ss/g,p=>s[p])}var Og=class{constructor(){R.read(jo)||R.write("{}",jo);try{this.resourceCache=JSON.parse(R.read(jo))}catch(t){R.error(`\u89E3\u6790\u6301\u4E45\u5316\u7F13\u5B58\u4E2D\u7684 ${jo} \u5931\u8D25, \u91CD\u7F6E\u4E3A {}, \u9519\u8BEF: ${t?.message??t}`),this.resourceCache={},R.write("{}",jo)}this._cleanup()}_cleanup(t,e){let n=Pg(e)??0,u=!1,s=Date.now();Object.entries(this.resourceCache).forEach(p=>{let[g,y]=p;(!y.time||y.time<s+n)&&(!t||g.startsWith(t))&&(delete this.resourceCache[g],u=!0)}),u&&this._persist()}revokeAll(){this.resourceCache={},this._persist()}_persist(){R.write(JSON.stringify(this.resourceCache),jo)}gettime(t){let e=this.resourceCache[t]&&this.resourceCache[t].time;return e&&new Date().getTime()<=e?this.resourceCache[t].time:null}get(t,e,n){let u=Pg(e)??0,s=this.resourceCache[t],p=s&&s.time;if(p){if(Date.now()+u<=p)return s.data;n&&(delete this.resourceCache[t],this._persist())}return null}set(t,e,n){let u=Pg(n)??pR();this.resourceCache[t]={time:Date.now()+u,data:e},this._persist()}};function Pg(t){let e=Number(t);return isFinite(e)&&e>0?e:null}function pR(){let t=R.read(At)?.resourceCacheTtl;return t&&(t=Number(t),isFinite(t)&&t>0)?t*1e3:36e5}var Jr=new Og,xg=class{constructor(){R.read(Ho)||R.write("{}",Ho);try{this.resourceCache=JSON.parse(R.read(Ho))}catch(t){R.error(`\u89E3\u6790\u6301\u4E45\u5316\u7F13\u5B58\u4E2D\u7684 ${Ho} \u5931\u8D25, \u91CD\u7F6E\u4E3A {}, \u9519\u8BEF: ${t?.message??t}`),this.resourceCache={},R.write("{}",Ho)}this._cleanup()}_cleanup(t,e){let n=Tg(e)??0,u=!1,s=Date.now();Object.entries(this.resourceCache).forEach(p=>{let[g,y]=p;(!y.time||y.time<s+n)&&(!t||g.startsWith(t))&&(delete this.resourceCache[g],u=!0)}),u&&this._persist()}revokeAll(){this.resourceCache={},this._persist()}_persist(){R.write(JSON.stringify(this.resourceCache),Ho)}gettime(t){let e=this.resourceCache[t]&&this.resourceCache[t].time;return e&&new Date().getTime()<=e?this.resourceCache[t].time:null}get(t,e,n){let u=Tg(e)??0,s=this.resourceCache[t],p=s&&s.time;if(p){if(Date.now()+u<=p)return s.data;n&&(delete this.resourceCache[t],this._persist())}return null}set(t,e,n){let u=Tg(n)??mR();this.resourceCache[t]={time:Date.now()+u,data:e},this._persist()}};function Tg(t){let e=Number(t);return isFinite(e)&&e>0?e:null}function mR(){let t=R.read(At)?.headersCacheTtl;return t&&(t=Number(t),isFinite(t)&&t>0)?t*1e3:6e4}var Ko=new xg;function zo(t){let e=Object.keys(t),n="",u="",s="";for(let p of e){let g=p.toLowerCase();g==="subscription-userinfo"?n=t[p]:g==="profile-web-page-url"?u=t[p]:g==="plan-name"&&(s=t[p])}return`${n||""}${u?`; app_url=${encodeURIComponent(u)}`:""}${s?`; plan_name=${encodeURIComponent(s)}`:""}`}async function zn(rawUrl,ua,timeout,customProxy,flowUrl){let url=flowUrl||rawUrl||"",$arguments={},rawArgs=url.split("#");if(url=url.split("#")[0],rawArgs.length>1)try{$arguments=JSON.parse(decodeURIComponent(rawArgs[1]))}catch{for(let t of rawArgs[1].split("&")){let e=t.split("=")[0],n=t.split("=")[1];$arguments[e]=n==null||n===""?!0:decodeURIComponent(n)}}if($arguments?.noFlow||!/^https?/.test(url))return;let{isStash,isLoon,isShadowRocket,isQX}=dn(),insecure=$arguments?.insecure?R.env.isNode?{strictSSL:!1}:{insecure:!0}:void 0,{defaultProxy,defaultFlowUserAgent,defaultTimeout}=R.read(At),proxy=customProxy||defaultProxy;R.env.isNode&&(proxy=proxy||eval("process.env.SUB_STORE_BACKEND_DEFAULT_PROXY"));let userAgent=ua||defaultFlowUserAgent||"clash.meta/v1.19.16",requestTimeout=timeout||defaultTimeout||8e3,id=Wi(userAgent+url),cached=Ko.get(id),flowInfo;if(!$arguments?.noCache&&cached)R.info(`\u4F7F\u7528\u7F13\u5B58\u7684\u6D41\u91CF\u4FE1\u606F: ${url}, ${userAgent}`),flowInfo=cached;else{let t=Rs();if(flowUrl){let e;try{R.info(`\u4F7F\u7528 GET \u65B9\u6CD5\u4ECE\u54CD\u5E94\u4F53\u83B7\u53D6\u6D41\u91CF\u4FE1\u606F: ${flowUrl}, User-Agent: ${userAgent||""}, Insecure: ${!!insecure}, Proxy: ${proxy}`);let{headers:n,body:u,statusCode:s}=await t.get({url:flowUrl,headers:{"User-Agent":userAgent},timeout:requestTimeout,...proxy?{proxy}:{},...isLoon&&proxy?{node:proxy}:{},...isQX&&proxy?{opts:{policy:proxy}}:{},...proxy?tu(proxy):{},...insecure||{}});if(s<200||s>=400)throw new Error(`statusCode: ${s}`);e=n;let p=ru(u);if(p?.total&&p?.usage?.download&&p?.usage?.upload)flowInfo=u;else throw new Error("\u54CD\u5E94\u4F53\u4E2D\u672A\u5305\u542B\u5408\u6CD5\u7684\u6D41\u91CF\u4FE1\u606F")}catch(n){if(R.error(`\u4F7F\u7528 GET \u65B9\u6CD5\u4ECE\u54CD\u5E94\u4F53\u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u5931\u8D25: ${flowUrl}, User-Agent: ${userAgent||""}, Insecure: ${!!insecure}, Proxy: ${proxy}: ${n.message??n}`),e)try{let u=zo(e),s=ru(u);if(s?.total&&s?.usage?.download&&s?.usage?.upload)R.info(`\u4F7F\u7528 GET \u65B9\u6CD5\u4ECE\u54CD\u5E94\u5934\u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u6210\u529F: ${flowUrl}, User-Agent: ${userAgent||""}, Insecure: ${!!insecure}, Proxy: ${proxy}`),flowInfo=u;else throw new Error("\u54CD\u5E94\u4F53\u4E2D\u672A\u5305\u542B\u5408\u6CD5\u7684\u6D41\u91CF\u4FE1\u606F")}catch(u){R.error(`\u4F7F\u7528 GET \u65B9\u6CD5\u4ECE\u54CD\u5E94\u5934\u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u5931\u8D25: ${flowUrl}, User-Agent: ${userAgent||""}, Insecure: ${!!insecure}, Proxy: ${proxy}: ${u.message??u}`)}}}else{try{R.info(`\u4F7F\u7528 HEAD \u65B9\u6CD5\u4ECE\u54CD\u5E94\u5934\u83B7\u53D6\u6D41\u91CF\u4FE1\u606F: ${url}, User-Agent: ${userAgent||""}, Insecure: ${!!insecure}, Proxy: ${proxy}`);let{headers:e}=await t.head({url:url.split(/[\r\n]+/).map(n=>n.trim()).filter(n=>n.length)[0],headers:{"User-Agent":userAgent,...isStash&&proxy?{"X-Stash-Selected-Proxy":encodeURIComponent(proxy)}:{},...isShadowRocket&&proxy?{"X-Surge-Policy":proxy}:{}},timeout:requestTimeout,...proxy?{proxy}:{},...isLoon&&proxy?{node:proxy}:{},...isQX&&proxy?{opts:{policy:proxy}}:{},...proxy?tu(proxy):{},...insecure||{}});flowInfo=zo(e)}catch(e){R.error(`\u4F7F\u7528 HEAD \u65B9\u6CD5\u4ECE\u54CD\u5E94\u5934\u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u5931\u8D25: ${url}, User-Agent: ${userAgent||""}, Insecure: ${!!insecure}, Proxy: ${proxy}: ${e.message??e}`)}if(!flowInfo){R.info(`\u4F7F\u7528 GET \u65B9\u6CD5\u83B7\u53D6\u6D41\u91CF\u4FE1\u606F: ${url}, User-Agent: ${userAgent||""}, Insecure: ${!!insecure}, Proxy: ${proxy}`);let{headers:e}=await t.get({url:url.split(/[\r\n]+/).map(n=>n.trim()).filter(n=>n.length)[0],headers:{"User-Agent":userAgent,...isStash&&proxy?{"X-Stash-Selected-Proxy":encodeURIComponent(proxy)}:{},...isShadowRocket&&proxy?{"X-Surge-Policy":proxy}:{}},timeout:requestTimeout,...proxy?{proxy}:{},...isLoon&&proxy?{node:proxy}:{},...isQX&&proxy?{opts:{policy:proxy}}:{},...proxy?tu(proxy):{},...insecure||{}});flowInfo=zo(e)}}flowInfo&&(flowInfo=flowInfo.trim()),flowInfo&&Ko.set(id,flowInfo)}return flowInfo}function ru(t){if(!t)return;let e=t.match(/upload=([-+]?)([0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)/),n=e==null?0:Number(e[1]+e[2]),u=t.match(/download=([-+]?)([0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)/),s=Number(u[1]+u[2]),p=t.match(/total=([-+]?)([0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)/),g=Number(p[1]+p[2]),y=t.match(/expire=([-+]?)([0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)/),E=y?Number(y[1]+y[2]):void 0,m=t.match(/reset_day=([0-9]+)/),C=m?Number(m[1]):void 0,a=t.match(/app_url=(.*?)\s*?(;|$)/),H=a?decodeURIComponent(a[1]):void 0,X=t.match(/plan_name=(.*?)\s*?(;|$)/),w=X?decodeURIComponent(X[1]):void 0;return{expires:E,total:g,usage:{upload:n,download:s},remainingDays:C,appUrl:H,planName:w}}function Pf(t,e="B"){let n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],u=n.indexOf(e);return t<1024||u===n.length-1?{value:(Math.round(t*100)/100).toString(),unit:e}:Pf(t/1024,n[++u])}function ip(t){if(!t)throw new Error("\u6CA1\u6709\u6D41\u91CF\u4FE1\u606F");if(t?.expires&&t.expires*1e3<Date.now()){let e=new Date(t.expires*1e3).toLocaleDateString();throw new Error(`\u8BA2\u9605\u5DF2\u8FC7\u671F: ${e}`)}if(t?.total){let e=t.usage?.upload||0,n=t.usage?.download||0;if(t.total-e-n<0){let u=e+n,s=Pf(Math.abs(u));s.value=u<0?"-"+s.value:s.value;let p=Pf(t.total);throw new Error(`\u6D41\u91CF\u5DF2\u7528\u5B8C: ${s.value} ${s.unit} / ${p.value} ${p.unit}`)}}}function sp(t={}){try{let{resetDay:e,startDate:n,cycleDays:u}=t;if(["string","number"].includes(typeof t)&&(e=t),n&&u){if(u=parseInt(u),isNaN(u)||u<=0)throw new Error("\u91CD\u7F6E\u5468\u671F\u5E94\u4E3A\u6B63\u6574\u6570");if(!n||!Date.parse(n))throw new Error("\u5F00\u59CB\u65E5\u671F\u4E0D\u5408\u6CD5");let s=new Date(n),p=new Date;if(s.setHours(0,0,0,0),p.setHours(0,0,0,0),s.getTime()>p.getTime())throw new Error("\u5F00\u59CB\u65E5\u671F\u5E94\u65E9\u4E8E\u73B0\u5728");let g=new Date(n);for(g.setDate(g.getDate()+u);g<p;)g.setDate(g.getDate()+u);g.setHours(0,0,0,0);let y=g.getTime()-p.getTime();return Math.ceil(y/(1e3*3600*24))}else{if(!e)return;if(e=parseInt(e),isNaN(e)||e<=0||e>31)throw new Error("\u6708\u91CD\u7F6E\u65E5\u5E94\u4E3A 1-31 \u4E4B\u95F4\u7684\u6574\u6570");let s=new Date,p=s.getDate(),g=s.getMonth(),y=s.getFullYear(),E;return e>p?E=0:E=new Date(y,g+1,0).getDate(),E-p+e}}catch(e){R.error(`getRmainingDays failed: ${e.message??e}`)}}function Wu(t,e){try{let n=new Map;t.split(";").map(p=>p.trim()).filter(Boolean).forEach(p=>{let g=p.indexOf("=");if(g===-1)return;let y=p.slice(0,g).trim(),E=p.slice(g+1).trim();if(!n.has(y))try{let m=decodeURIComponent(E);if(["upload","download","total","expire","reset_day"].includes(y))try{m=Number(m),["expire","reset_day"].includes(y)&&(m<=0||!Number.isFinite(m))?m="":["upload","download","total"].includes(y)&&!Number.isFinite(m)?m=0:m=m.toFixed(0)}catch(C){R.error(`Failed to convert value for key "${y}=${E}": ${C.message??C}`)}n.set(y,m)}catch{n.set(y,E)}});let u={},s={"subscription-userinfo":"","profile-web-page-url":"","plan-name":""};return n.forEach((p,g)=>{e&&g==="app_url"?s["profile-web-page-url"]=p:e&&g==="plan_name"?s["plan-name"]=p:u[g]=p}),Object.keys(u).length>0&&(s["subscription-userinfo"]=Object.entries(u).map(([p,g])=>`${p}=${encodeURIComponent(g)}`).join("; ")),e?s:s["subscription-userinfo"]}catch(n){return R.error(`normalizeFlowHeader failed: ${n.message??n}`),t}}function ft(t,e,n="name"){return t.find(u=>u[n]===e)}function ob(t,e,n="name"){return t.findIndex(u=>u[n]===e)}function Os(t,e,n="name"){let u=ob(t,e,n);t.splice(u,1)}function Ts(t,e,n,u="name"){let s=ob(t,e,u);t[s]=n}function qe(t,e,n){t.status(n||200).json({status:"success",data:e})}function Ne(t,e,n){t.status(n||500).json({status:"failed",error:{code:e.code,type:e.type,message:e.message,details:t.req?.route?.path?.startsWith("/share/")?"\u8BE6\u60C5\u8BF7\u67E5\u770B\u65E5\u5FD7":e.details}})}var tc=class{constructor(t,e,n){this.code=t,this.message=e,this.details=n}},gr=class extends tc{constructor(t,e,n){super(t,e,n),this.type="InternalServerError"}},Ht=class extends tc{constructor(t,e,n){super(t,e,n),this.type="RequestInvalidError"}},_r=class extends tc{constructor(t,e,n){super(t,e,n),this.type="ResourceNotFoundError"}},rc=class extends tc{constructor(t,e,n){super(t,e,n),this.type="NetworkError"}},H0=qr(lp()),lm=qr(Zb());function HO(t){let e=lm.default.pemtohex(t);return lm.default.KJUR.crypto.Util.hashHex(e,"sha256").match(/.{2}/g).join(":").toUpperCase()}var Qb={generateFingerprint:HO},zf=qr(K_());function G_(t,e,...n){try{return t(e,...n)}catch{return t(Y_(t(e.replace(/!<str>\s*/g,"__SubStoreJSYAMLString__"),...n)).replace(/__SubStoreJSYAMLString__/g,""),...n)}}function Kf(t,...e){return G_(zf.default.safeLoad,JSON.parse(JSON.stringify(t)),...e)}function wN(t,...e){return G_(zf.default.load,JSON.parse(JSON.stringify(t)),...e)}function z_(t,...e){return zf.default.safeDump(JSON.parse(JSON.stringify(t)),...e)}function Y_(t,...e){return zf.default.dump(JSON.parse(JSON.stringify(t)),...e)}var pa={safeLoad:Kf,load:wN,safeDump:z_,dump:Y_,parse:Kf,stringify:z_},_m=class{constructor(){R.read(Mo)||R.write("{}",Mo);try{this.resourceCache=JSON.parse(R.read(Mo))}catch(t){R.error(`\u89E3\u6790\u6301\u4E45\u5316\u7F13\u5B58\u4E2D\u7684 ${Mo} \u5931\u8D25, \u91CD\u7F6E\u4E3A {}, \u9519\u8BEF: ${t?.message??t}`),this.resourceCache={},R.write("{}",Mo)}this._cleanup()}_cleanup(t,e){let n=ym(e)??0,u=!1,s=Date.now();Object.entries(this.resourceCache).forEach(p=>{let[g,y]=p;(!y.time||y.time<s+n)&&(!t||g.startsWith(t))&&(delete this.resourceCache[g],u=!0)}),u&&this._persist()}revokeAll(){this.resourceCache={},this._persist()}_persist(){R.write(JSON.stringify(this.resourceCache),Mo)}gettime(t){let e=this.resourceCache[t]&&this.resourceCache[t].time;return e&&new Date().getTime()<=e?this.resourceCache[t].time:null}get(t,e,n){let u=ym(e)??0,s=this.resourceCache[t],p=s&&s.time;if(p){if(Date.now()+u<=p)return s.data;n&&(delete this.resourceCache[t],this._persist())}return null}set(t,e,n){let u=ym(n)??AN();this.resourceCache[t]={time:Date.now()+u,data:e},this._persist()}};function ym(t){let e=Number(t);return isFinite(e)&&e>0?e:null}function AN(){let t=R.read(At)?.scriptCacheTtl;return t&&(t=Number(t),isFinite(t)&&t>0)?t*1e3:1728e5}var Gf=new _m;function Tp(t,e){return[...Array(t).keys()].map(()=>e)}var Cm={"\u{1F3F3}\uFE0F\u200D\u{1F308}":["EXP","BAND"],"\u{1F1F8}\u{1F1F1}":["TEST","SOS"],"\u{1F1F2}\u{1F1F5}":["MP","MNP"],"\u{1F1F8}\u{1F1F4}":["SO","SOM"],"\u{1F1E6}\u{1F1F6}":["AQ","ATA"],"\u{1F1E6}\u{1F1EC}":["AG","ATG"],"\u{1F1EC}\u{1F1F1}":["GL","GRL"],"\u{1F1FF}\u{1F1FC}":["ZW","ZWE"],"\u{1F1E6}\u{1F1FC}":["AW","ABW"],"\u{1F1F2}\u{1F1F1}":["ML","MLI"],"\u{1F1E6}\u{1F1E9}":["AD","AND"],"\u{1F1E6}\u{1F1EA}":["AE","ARE"],"\u{1F1E6}\u{1F1EB}":["AF","AFG"],"\u{1F1E6}\u{1F1F1}":["AL","ALB"],"\u{1F1E6}\u{1F1F2}":["AM","ARM"],"\u{1F1E6}\u{1F1F7}":["AR","ARG"],"\u{1F1E6}\u{1F1F9}":["AT","AUT"],"\u{1F1E6}\u{1F1FA}":["AU","AUS"],"\u{1F1E6}\u{1F1FF}":["AZ","AZE"],"\u{1F1E7}\u{1F1E6}":["BA","BIH"],"\u{1F1E7}\u{1F1E9}":["BD","BGD"],"\u{1F1E7}\u{1F1EA}":["BE","BEL"],"\u{1F1E7}\u{1F1EC}":["BG","BGR"],"\u{1F1E7}\u{1F1ED}":["BH","BHR"],"\u{1F1E7}\u{1F1F4}":["BO","BOL"],"\u{1F1E7}\u{1F1F3}":["BN","BRN"],"\u{1F1E7}\u{1F1F7}":["BR","BRA"],"\u{1F1E7}\u{1F1F9}":["BT","BTN"],"\u{1F1E7}\u{1F1FE}":["BY","BLR"],"\u{1F1E8}\u{1F1E6}":["CA","CAN"],"\u{1F1E8}\u{1F1ED}":["CH","CHE"],"\u{1F1E8}\u{1F1F1}":["CL","CHL"],"\u{1F1E8}\u{1F1F4}":["CO","COL"],"\u{1F1E8}\u{1F1F7}":["CR","CRI"],"\u{1F1E8}\u{1F1FE}":["CY","CYP"],"\u{1F1E8}\u{1F1FF}":["CZ","CZE"],"\u{1F1E9}\u{1F1EA}":["DE","DEU"],"\u{1F1E9}\u{1F1F0}":["DK","DNK"],"\u{1F1E9}\u{1F1FF}":["DZ","DZA"],"\u{1F1EA}\u{1F1E8}":["EC","ECU"],"\u{1F1EA}\u{1F1EA}":["EE","EST"],"\u{1F1EA}\u{1F1EC}":["EG","EGY"],"\u{1F1EA}\u{1F1F8}":["ES","ESP"],"\u{1F1EA}\u{1F1FA}":["EU"],"\u{1F1EB}\u{1F1EE}":["FI","FIN"],"\u{1F1EB}\u{1F1F7}":["FR","FRA"],"\u{1F1EC}\u{1F1E7}":["GB","GBR","UK"],"\u{1F1EC}\u{1F1EA}":["GE","GEO"],"\u{1F1EC}\u{1F1F7}":["GR","GRC"],"\u{1F1EC}\u{1F1F9}":["GT","GTM"],"\u{1F1EC}\u{1F1FA}":["GU","GUM"],"\u{1F1ED}\u{1F1F0}":["HK","HKG","HKT","HKBN","HGC","WTT","CMI"],"\u{1F1ED}\u{1F1F7}":["HR","HRV"],"\u{1F1ED}\u{1F1FA}":["HU","HUN"],"\u{1F1EE}\u{1F1F6}":["IQ","IRQ"],"\u{1F1EF}\u{1F1F4}":["JO","JOR"],"\u{1F1EF}\u{1F1F5}":["JP","JPN","TYO"],"\u{1F1F0}\u{1F1EA}":["KE","KEN"],"\u{1F1F0}\u{1F1EC}":["KG","KGZ"],"\u{1F1F0}\u{1F1ED}":["KH","KGZ"],"\u{1F1F0}\u{1F1F5}":["KP","PRK"],"\u{1F1F0}\u{1F1F7}":["KR","KOR","SEL"],"\u{1F1F0}\u{1F1FF}":["KZ","KAZ"],"\u{1F1EE}\u{1F1E9}":["ID","IDN"],"\u{1F1EE}\u{1F1EA}":["IE","IRL"],"\u{1F1EE}\u{1F1F1}":["IL","ISR"],"\u{1F1EE}\u{1F1F2}":["IM","IMN"],"\u{1F1EE}\u{1F1F3}":["IN","IND"],"\u{1F1EE}\u{1F1F7}":["IR","IRN"],"\u{1F1EE}\u{1F1F8}":["IS","ISL"],"\u{1F1EE}\u{1F1F9}":["IT","ITA"],"\u{1F1F1}\u{1F1E6}":["LA","LAO"],"\u{1F1F1}\u{1F1F0}":["LK","LKA"],"\u{1F1F1}\u{1F1F9}":["LT","LTU"],"\u{1F1F1}\u{1F1FA}":["LU","LUX"],"\u{1F1F1}\u{1F1FB}":["LV","LVA"],"\u{1F1F2}\u{1F1E6}":["MA","MAR"],"\u{1F1F2}\u{1F1E9}":["MD","MDA"],"\u{1F1F3}\u{1F1EC}":["NG","NGA"],"\u{1F1F2}\u{1F1F2}":["MM","MMR"],"\u{1F1F2}\u{1F1F0}":["MK","MKD"],"\u{1F1F2}\u{1F1F3}":["MN","MNG"],"\u{1F1F2}\u{1F1F4}":["MO","MAC","CTM"],"\u{1F1F2}\u{1F1F9}":["MT","MLT"],"\u{1F1F2}\u{1F1FD}":["MX","MEX"],"\u{1F1F2}\u{1F1FE}":["MY","MYS"],"\u{1F1F3}\u{1F1F1}":["NL","NLD","AMS"],"\u{1F1F3}\u{1F1F4}":["NO","NOR"],"\u{1F1F3}\u{1F1F5}":["NP","NPL"],"\u{1F1F3}\u{1F1FF}":["NZ","NZL"],"\u{1F1F4}\u{1F1F2}":["OM","OMN"],"\u{1F1F5}\u{1F1E6}":["PA","PAN"],"\u{1F1F5}\u{1F1EA}":["PE","PER"],"\u{1F1F5}\u{1F1ED}":["PH","PHL"],"\u{1F1F5}\u{1F1F0}":["PK","PAK"],"\u{1F1F5}\u{1F1F1}":["PL","POL"],"\u{1F1F5}\u{1F1F7}":["PR","PRI"],"\u{1F1F5}\u{1F1F9}":["PT","PRT"],"\u{1F1F5}\u{1F1FE}":["PY","PRY"],"\u{1F1F5}\u{1F1EC}":["PG","PNG"],"\u{1F1F6}\u{1F1E6}":["QA","QAT"],"\u{1F1F7}\u{1F1F4}":["RO","ROU"],"\u{1F1F7}\u{1F1F8}":["RS","SRB"],"\u{1F1F7}\u{1F1EA}":["RE","REU"],"\u{1F1F7}\u{1F1FA}":["RU","RUS"],"\u{1F1F8}\u{1F1E6}":["SA","SAU"],"\u{1F1FC}\u{1F1F8}":["WS","WSM"],"\u{1F1F8}\u{1F1EA}":["SE","SWE"],"\u{1F1F8}\u{1F1EC}":["SG","SGP"],"\u{1F1F8}\u{1F1EE}":["SI","SVN"],"\u{1F1F8}\u{1F1F0}":["SK","SVK"],"\u{1F1F9}\u{1F1EC}":["TG","TGO"],"\u{1F1F9}\u{1F1ED}":["TH","THA"],"\u{1F1F9}\u{1F1F3}":["TN","TUN"],"\u{1F1F9}\u{1F1F7}":["TR","TUR"],"\u{1F1F9}\u{1F1FC}":["TW","TWN","CHT","HINET","ROC"],"\u{1F1FA}\u{1F1E6}":["UA","UKR"],"\u{1F1FA}\u{1F1F8}":["US","USA","LAX","SFO","SJC"],"\u{1F1FA}\u{1F1FE}":["UY","URY"],"\u{1F1FB}\u{1F1E6}":["VA","VAT"],"\u{1F1FB}\u{1F1EA}":["VE","VEN"],"\u{1F1FB}\u{1F1F3}":["VN","VNM"],"\u{1F1FF}\u{1F1E6}":["ZA","ZAF","JNB"],"\u{1F1E8}\u{1F1F3}":["CN","CHN","BACK"]};function bc(t){let e={"\u{1F3F3}\uFE0F\u200D\u{1F308}":["\u6D41\u91CF","\u65F6\u95F4","\u8FC7\u671F","Bandwidth","Expire"],"\u{1F1F8}\u{1F1F1}":["\u5E94\u6025","\u6D4B\u8BD5\u8282\u70B9"],"\u{1F1F2}\u{1F1F5}":["\u5317\u9A6C\u91CC\u4E9A\u7EB3","Northern Mariana Islands","Saipan","\u585E\u73ED"],"\u{1F1F8}\u{1F1F4}":["Somalia","\u7D22\u9A6C\u91CC","\u6469\u52A0\u8FEA\u6C99","Mogadishu"],"\u{1F1E6}\u{1F1F6}":["Antarctica","\u5357\u6781\u6D32","\u5357\u6781"],"\u{1F1E6}\u{1F1EC}":["Antigua and Barbuda","\u5B89\u63D0\u74DC\u548C\u5DF4\u5E03\u8FBE"],"\u{1F1EC}\u{1F1F1}":["Greenland","\u683C\u9675\u5170\u5C9B","\u683C\u9675\u5170"],"\u{1F1FF}\u{1F1FC}":["Zimbabwe","\u6D25\u5DF4\u5E03\u97E6"],"\u{1F1E6}\u{1F1FC}":["Aruba","\u963F\u9C81\u5DF4"],"\u{1F1F2}\u{1F1F1}":["Mali","\u9A6C\u91CC"],"\u{1F1E6}\u{1F1E9}":["Andorra","\u5B89\u9053\u5C14"],"\u{1F1E6}\u{1F1EA}":["United Arab Emirates","\u963F\u8054\u914B","\u8FEA\u62DC","Dubai"],"\u{1F1E6}\u{1F1EB}":["Afghanistan","\u963F\u5BCC\u6C57"],"\u{1F1E6}\u{1F1F1}":["Albania","\u963F\u5C14\u5DF4\u5C3C\u4E9A","\u963F\u723E\u5DF4\u5C3C\u4E9E"],"\u{1F1E6}\u{1F1F2}":["Armenia","\u4E9A\u7F8E\u5C3C\u4E9A"],"\u{1F1E6}\u{1F1F7}":["Argentina","\u963F\u6839\u5EF7"],"\u{1F1E6}\u{1F1F9}":["Austria","\u5965\u5730\u5229","\u5967\u5730\u5229","\u7EF4\u4E5F\u7EB3"],"\u{1F1FC}\u{1F1F8}":["Samoa","\u8428\u6469\u4E9A","\u85A9\u6469\u4E9E"],"\u{1F1E6}\u{1F1FA}":["Australia","\u6FB3\u5927\u5229\u4E9A","\u6FB3\u6D32","\u58A8\u5C14\u672C","\u6089\u5C3C","\u571F\u6FB3","\u4EAC\u6FB3","\u5EE3\u6FB3","\u6EEC\u6FB3","\u6CAA\u6FB3","\u5E7F\u6FB3","Sydney"],"\u{1F1E6}\u{1F1FF}":["Azerbaijan","\u963F\u585E\u62DC\u7586"],"\u{1F1E7}\u{1F1E6}":["Bosnia and Herzegovina","\u6CE2\u9ED1\u5171\u548C\u56FD","\u6CE2\u9ED1"],"\u{1F1E7}\u{1F1E9}":["Bangladesh","\u5B5F\u52A0\u62C9\u56FD","\u5B5F\u52A0\u62C9"],"\u{1F1E7}\u{1F1EA}":["Belgium","\u6BD4\u5229\u65F6","\u6BD4\u5229\u6642"],"\u{1F1E7}\u{1F1EC}":["Bulgaria","\u4FDD\u52A0\u5229\u4E9A","\u4FDD\u52A0\u5229\u4E9E"],"\u{1F1E7}\u{1F1ED}":["Bahrain","\u5DF4\u6797"],"\u{1F1E7}\u{1F1F7}":["Brazil","\u5DF4\u897F","\u5723\u4FDD\u7F57"],"\u{1F1E7}\u{1F1F3}":["Brunei","\u6587\u83B1","\u6C76\u840A"],"\u{1F1E7}\u{1F1FE}":["Belarus","\u767D\u4FC4\u7F57\u65AF","\u767D\u4FC4"],"\u{1F1E7}\u{1F1F4}":["Bolivia","\u73BB\u5229\u7EF4\u4E9A"],"\u{1F1E7}\u{1F1F9}":["Bhutan","\u4E0D\u4E39","\u4E0D\u4E39\u738B\u56FD"],"\u{1F1E8}\u{1F1E6}":["Canada","\u52A0\u62FF\u5927","\u8499\u7279\u5229\u5C14","\u6E29\u54E5\u534E","\u6953\u8449","\u67AB\u53F6","\u6ED1\u94C1\u5362","\u591A\u4F26\u591A","Waterloo","Toronto"],"\u{1F1E8}\u{1F1ED}":["Switzerland","\u745E\u58EB","\u82CF\u9ECE\u4E16","Zurich"],"\u{1F1E8}\u{1F1F1}":["Chile","\u667A\u5229"],"\u{1F1E8}\u{1F1F4}":["Colombia","\u54E5\u4F26\u6BD4\u4E9A"],"\u{1F1E8}\u{1F1F7}":["Costa Rica","\u54E5\u65AF\u8FBE\u9ECE\u52A0"],"\u{1F1E8}\u{1F1FE}":["Cyprus","\u585E\u6D66\u8DEF\u65AF"],"\u{1F1E8}\u{1F1FF}":["Czechia","\u6377\u514B","Czech","Czech Republic"],"\u{1F1E9}\u{1F1EA}":["German","\u5FB7\u56FD","\u5FB7\u570B","\u4EAC\u5FB7","\u6EEC\u5FB7","\u5EE3\u5FB7","\u6CAA\u5FB7","\u5E7F\u5FB7","\u6CD5\u5170\u514B\u798F","Frankfurt","\u5FB7\u610F\u5FD7"],"\u{1F1E9}\u{1F1F0}":["Denmark","\u4E39\u9EA6","\u4E39\u9EA5"],"\u{1F1E9}\u{1F1FF}":["Algeria","\u963F\u5C14\u53CA\u5229\u4E9A","\u963F\u723E\u53CA\u5229\u4E9E"],"\u{1F1EA}\u{1F1E8}":["Ecuador","\u5384\u74DC\u591A\u5C14"],"\u{1F1EA}\u{1F1EA}":["Estonia","\u7231\u6C99\u5C3C\u4E9A"],"\u{1F1EA}\u{1F1EC}":["Egypt","\u57C3\u53CA"],"\u{1F1EA}\u{1F1F8}":["Spain","\u897F\u73ED\u7259"],"\u{1F1EA}\u{1F1FA}":["European Union","\u6B27\u76DF","\u6B27\u7F57\u5DF4"],"\u{1F1EB}\u{1F1EE}":["Finland","\u82AC\u5170","\u82AC\u862D","\u8D6B\u5C14\u8F9B\u57FA"],"\u{1F1EB}\u{1F1F7}":["France","\u6CD5\u56FD","\u6CD5\u570B","\u5DF4\u9ECE"],"\u{1F1EC}\u{1F1E7}":["Great Britain","\u82F1\u56FD","England","United Kingdom","\u4F26\u6566","\u82F1","London"],"\u{1F1EC}\u{1F1EA}":["Georgia","\u683C\u9C81\u5409\u4E9A","\u683C\u9B6F\u5409\u4E9E"],"\u{1F1EC}\u{1F1F7}":["Greece","\u5E0C\u814A","\u5E0C\u81D8"],"\u{1F1EC}\u{1F1FA}":["Guam","\u5173\u5C9B","\u95DC\u5CF6"],"\u{1F1EC}\u{1F1F9}":["Guatemala","\u5371\u5730\u9A6C\u62C9"],"\u{1F1ED}\u{1F1F0}":["Hongkong","\u9999\u6E2F","Hong Kong","HongKong","HONG KONG","\u6DF1\u6E2F","\u6CAA\u6E2F","\u547C\u6E2F","\u7A57\u6E2F","\u4EAC\u6E2F","\u6E2F"],"\u{1F1ED}\u{1F1F7}":["Croatia","\u514B\u7F57\u5730\u4E9A","\u514B\u7F85\u5730\u4E9E"],"\u{1F1ED}\u{1F1FA}":["Hungary","\u5308\u7259\u5229"],"\u{1F1EE}\u{1F1F6}":["Iraq","\u4F0A\u62C9\u514B","\u5DF4\u683C\u8FBE","Baghdad"],"\u{1F1EF}\u{1F1F4}":["Jordan","\u7EA6\u65E6"],"\u{1F1EF}\u{1F1F5}":["Japan","\u65E5\u672C","\u4E1C\u4EAC","\u5927\u962A","\u57FC\u7389","\u6CAA\u65E5","\u7A57\u65E5","\u5DDD\u65E5","\u4E2D\u65E5","\u6CC9\u65E5","\u676D\u65E5","\u6DF1\u65E5","\u8FBD\u65E5","\u5E7F\u65E5","\u5927\u5742","Osaka","Tokyo"],"\u{1F1F0}\u{1F1EA}":["Kenya","\u80AF\u5C3C\u4E9A"],"\u{1F1F0}\u{1F1EC}":["Kyrgyzstan","\u5409\u5C14\u5409\u65AF\u65AF\u5766"],"\u{1F1F0}\u{1F1ED}":["Cambodia","\u67EC\u57D4\u5BE8"],"\u{1F1F0}\u{1F1F5}":["North Korea","\u671D\u9C9C"],"\u{1F1F0}\u{1F1F7}":["Korea","\u97E9\u56FD","\u97D3\u570B","\u97E9","\u97D3","\u9996\u5C14","\u6625\u5DDD","Chuncheon","Seoul"],"\u{1F1F0}\u{1F1FF}":["Kazakhstan","\u54C8\u8428\u514B\u65AF\u5766","\u54C8\u8428\u514B"],"\u{1F1EE}\u{1F1E9}":["Indonesia","\u5370\u5C3C","\u5370\u5EA6\u5C3C\u897F\u4E9A","\u96C5\u52A0\u8FBE"],"\u{1F1EE}\u{1F1EA}":["Ireland","\u7231\u5C14\u5170","\u611B\u723E\u862D","\u90FD\u67CF\u6797"],"\u{1F1EE}\u{1F1F1}":["Israel","\u4EE5\u8272\u5217"],"\u{1F1EE}\u{1F1F2}":["Isle of Man","\u9A6C\u6069\u5C9B","\u99AC\u6069\u5CF6"],"\u{1F1EE}\u{1F1F3}":["India","\u5370\u5EA6","\u5B5F\u4E70","MFumbai","Mumbai"],"\u{1F1EE}\u{1F1F7}":["Iran","\u4F0A\u6717"],"\u{1F1EE}\u{1F1F8}":["Iceland","\u51B0\u5C9B","\u51B0\u5CF6"],"\u{1F1EE}\u{1F1F9}":["Italy","\u610F\u5927\u5229","\u7FA9\u5927\u5229","\u7C73\u5170","Nachash"],"\u{1F1F1}\u{1F1F0}":["Sri Lanka","\u65AF\u91CC\u5170\u5361","\u65AF\u91CC\u862D\u5361"],"\u{1F1F1}\u{1F1E6}":["Laos","\u8001\u631D","\u8001\u64BE"],"\u{1F1F1}\u{1F1F9}":["Lithuania","\u7ACB\u9676\u5B9B"],"\u{1F1F1}\u{1F1FA}":["Luxembourg","\u5362\u68EE\u5821"],"\u{1F1F1}\u{1F1FB}":["Latvia","\u62C9\u8131\u7EF4\u4E9A","Latvija"],"\u{1F1F2}\u{1F1E6}":["Morocco","\u6469\u6D1B\u54E5"],"\u{1F1F2}\u{1F1E9}":["Moldova","\u6469\u5C14\u591A\u74E6","\u6469\u723E\u591A\u74E6"],"\u{1F1F2}\u{1F1F2}":["Myanmar","\u7F05\u7538","\u7DEC\u7538"],"\u{1F1F3}\u{1F1EC}":["Nigeria","\u5C3C\u65E5\u5229\u4E9A","\u5C3C\u65E5\u5229\u4E9E"],"\u{1F1F2}\u{1F1F0}":["Macedonia","\u9A6C\u5176\u987F","\u99AC\u5176\u9813"],"\u{1F1F2}\u{1F1F3}":["Mongolia","\u8499\u53E4"],"\u{1F1F2}\u{1F1F4}":["Macao","\u6FB3\u95E8","\u6FB3\u9580","CTM"],"\u{1F1F2}\u{1F1F9}":["Malta","\u9A6C\u8033\u4ED6"],"\u{1F1F2}\u{1F1FD}":["Mexico","\u58A8\u897F\u54E5"],"\u{1F1F2}\u{1F1FE}":["Malaysia","\u9A6C\u6765","\u99AC\u4F86","\u5409\u9686\u5761","\u5927\u99AC"],"\u{1F1F3}\u{1F1F1}":["Netherlands","\u8377\u5170","\u8377\u862D","\u5C3C\u5FB7\u862D","\u963F\u59C6\u65AF\u7279\u4E39","Amsterdam"],"\u{1F1F3}\u{1F1F4}":["Norway","\u632A\u5A01"],"\u{1F1F3}\u{1F1F5}":["Nepal","\u5C3C\u6CCA\u5C14"],"\u{1F1F3}\u{1F1FF}":["New Zealand","\u65B0\u897F\u5170","\u65B0\u897F\u862D"],"\u{1F1F4}\u{1F1F2}":["Oman","\u963F\u66FC","\u9A6C\u65AF\u5580\u7279"],"\u{1F1F5}\u{1F1E6}":["Panama","\u5DF4\u62FF\u9A6C"],"\u{1F1F5}\u{1F1EA}":["Peru","\u79D8\u9C81","\u7955\u9B6F"],"\u{1F1F5}\u{1F1ED}":["Philippines","\u83F2\u5F8B\u5BBE","\u83F2\u5F8B\u8CD3"],"\u{1F1F5}\u{1F1F0}":["Pakistan","\u5DF4\u57FA\u65AF\u5766"],"\u{1F1F5}\u{1F1F1}":["Poland","\u6CE2\u5170","\u6CE2\u862D","\u534E\u6C99","Warsaw"],"\u{1F1F5}\u{1F1F7}":["Puerto Rico","\u6CE2\u591A\u9ECE\u5404"],"\u{1F1F5}\u{1F1F9}":["Portugal","\u8461\u8404\u7259"],"\u{1F1F5}\u{1F1EC}":["Papua New Guinea","\u5DF4\u5E03\u4E9A\u65B0\u51E0\u5185\u4E9A"],"\u{1F1F5}\u{1F1FE}":["Paraguay","\u5DF4\u62C9\u572D"],"\u{1F1F6}\u{1F1E6}":["Qatar","\u5361\u5854\u5C14","\u5361\u5854\u723E"],"\u{1F1F7}\u{1F1F4}":["Romania","\u7F57\u9A6C\u5C3C\u4E9A"],"\u{1F1F7}\u{1F1F8}":["Serbia","\u585E\u5C14\u7EF4\u4E9A"],"\u{1F1F7}\u{1F1EA}":["R\xE9union","\u7559\u5C3C\u6C6A","\u6CD5\u5C5E\u7559\u5C3C\u6C6A"],"\u{1F1F7}\u{1F1FA}":["Russia","\u4FC4\u7F57\u65AF","\u4FC4\u56FD","\u4FC4\u7F85\u65AF","\u4F2F\u529B","\u83AB\u65AF\u79D1","\u5723\u5F7C\u5F97\u5821","\u897F\u4F2F\u5229\u4E9A","\u4EAC\u4FC4","\u676D\u4FC4","\u5EE3\u4FC4","\u6EEC\u4FC4","\u5E7F\u4FC4","\u6CAA\u4FC4","Moscow"],"\u{1F1F8}\u{1F1E6}":["Saudi","\u6C99\u7279\u963F\u62C9\u4F2F","\u6C99\u7279","Riyadh","\u5229\u96C5\u5F97"],"\u{1F1F8}\u{1F1EA}":["Sweden","\u745E\u5178","\u65AF\u5FB7\u54E5\u5C14\u6469","Stockholm"],"\u{1F1F8}\u{1F1EC}":["Singapore","\u65B0\u52A0\u5761","\u72EE\u57CE","\u6CAA\u65B0","\u4EAC\u65B0","\u4E2D\u65B0","\u6CC9\u65B0","\u7A57\u65B0","\u6DF1\u65B0","\u676D\u65B0","\u5E7F\u65B0","\u5EE3\u65B0","\u6EEC\u65B0"],"\u{1F1F8}\u{1F1EE}":["Slovenia","\u65AF\u6D1B\u6587\u5C3C\u4E9A"],"\u{1F1F8}\u{1F1F0}":["Slovakia","\u65AF\u6D1B\u4F10\u514B"],"\u{1F1F9}\u{1F1EC}":["Togo","\u591A\u54E5","\u6D1B\u7F8E","Lom\xE9","Lome"],"\u{1F1F9}\u{1F1ED}":["Thailand","\u6CF0\u56FD","\u6CF0\u570B","\u66FC\u8C37"],"\u{1F1F9}\u{1F1F3}":["Tunisia","\u7A81\u5C3C\u65AF"],"\u{1F1F9}\u{1F1F7}":["Turkey","\u571F\u8033\u5176","\u4F0A\u65AF\u5766\u5E03\u5C14","Istanbul"],"\u{1F1F9}\u{1F1FC}":["Taiwan","\u53F0\u6E7E","\u81FA\u7063","\u53F0\u7063","\u4E2D\u83EF\u6C11\u570B","\u4E2D\u534E\u6C11\u56FD","\u53F0\u5317","\u53F0\u4E2D","\u65B0\u5317","\u5F70\u5316","\u53F0","\u81FA","Taipei","Tai Wan"],"\u{1F1FA}\u{1F1E6}":["Ukraine","\u4E4C\u514B\u5170","\u70CF\u514B\u862D"],"\u{1F1FA}\u{1F1F8}":["United States","\u7F8E\u56FD","America","\u7F8E","\u4EAC\u7F8E","\u6CE2\u7279\u5170","\u8FBE\u62C9\u65AF","\u4FC4\u52D2\u5188","Oregon","\u51E4\u51F0\u57CE","\u8D39\u5229\u8499","\u7845\u8C37","\u77FD\u8C37","\u62C9\u65AF\u7EF4\u52A0\u65AF","\u6D1B\u6749\u77F6","\u5723\u4F55\u585E","\u5723\u514B\u62C9\u62C9","\u897F\u96C5\u56FE","\u829D\u52A0\u54E5","\u6CAA\u7F8E","\u54E5\u4F26\u5E03","\u7EBD\u7EA6","New York","Los Angeles","San Jose","Sillicon Valley","Michigan","\u4FC4\u4EA5\u4FC4","Ohio","\u9A6C\u7EB3\u8428\u65AF","Manassas","\u5F17\u5409\u5C3C\u4E9A","Virginia"],"\u{1F1FA}\u{1F1FE}":["Uruguay","\u4E4C\u62C9\u572D"],"\u{1F1FB}\u{1F1E6}":["Vatican","Vatican City","Holy See","\u68B5\u8482\u5188","\u68B5\u8482\u5CA1"],"\u{1F1FB}\u{1F1EA}":["Venezuela","\u59D4\u5185\u745E\u62C9"],"\u{1F1FB}\u{1F1F3}":["Vietnam","\u8D8A\u5357","\u80E1\u5FD7\u660E"],"\u{1F1FF}\u{1F1E6}":["South Africa","\u5357\u975E"],"\u{1F1E8}\u{1F1F3}":["China","\u4E2D\u56FD","\u4E2D\u570B","\u56DE\u56FD","\u56DE\u570B","\u56FD\u5185","\u570B\u5167","\u534E\u4E1C","\u534E\u897F","\u534E\u5357","\u534E\u5317","\u534E\u4E2D","\u6C5F\u82CF","\u5317\u4EAC","\u4E0A\u6D77","\u5E7F\u5DDE","\u6DF1\u5733","\u676D\u5DDE","\u5F90\u5DDE","\u9752\u5C9B","\u5B81\u6CE2","\u9547\u6C5F"]},n=t.match(/[\uD83C][\uDDE6-\uDDFF][\uD83C][\uDDE6-\uDDFF]/)?.[0]||"\u{1F3F4}\u200D\u2620\uFE0F";for(let u of Object.keys(e))if(e[u].some(s=>RegExp(`${s}`,"i").test(t)))return//.test(t)&&["\u{1F1F2}\u{1F1F3}"].includes(u)?n="\u{1F1E8}\u{1F1F3}":n=u;for(let u of Object.keys(Cm))if(Cm[u].some(s=>RegExp(`(^|[^a-zA-Z])${s}([^a-zA-Z]|$)`).test(t))&&!(u=="\u{1F1E8}\u{1F1F3}"&&RegExp("(^|[^a-zA-Z])CN2([^a-zA-Z]|$)").test(t)))return n=u;return n}function Np(t){return Cm[bc(t)]?.[0]}function Yf(t){return t.replace(/[\uD83C][\uDDE6-\uDDFF][\uD83C][\uDDE6-\uDDFF]||/g,"").trim()}var xp=class{constructor({country,asn}={}){if(R.env.isNode){let Reader=require("@maxmind/geoip2-node").Reader,fs=require("fs"),countryFile=country||eval("process.env.SUB_STORE_MMDB_COUNTRY_PATH"),asnFile=asn||eval("process.env.SUB_STORE_MMDB_ASN_PATH");if(countryFile&&(this.countryReader=Reader.openBuffer(fs.readFileSync(countryFile))),asnFile){if(!fs.existsSync(asnFile))throw new Error("GeoLite2 ASN MMDB does not exist");this.asnReader=Reader.openBuffer(fs.readFileSync(asnFile))}}}geoip(t){return this.countryReader?.country(t)?.country?.isoCode}ipaso(t){return this.asnReader?.asn(t)?.autonomousSystemOrganization}ipasn(t){return this.asnReader?.asn(t)?.autonomousSystemNumber}},Up=qr(sC()),Tm=qr(lp());async function _c({url:t,domain:e,type:n="A",timeout:u,edns:s}){let p=Up.default.encode({type:"query",id:0,flags:Up.default.RECURSION_DESIRED,questions:[{type:n,name:e}],additionals:[{type:"OPT",name:".",udpPayloadSize:4096,flags:0,options:[{code:"CLIENT_SUBNET",ip:s,sourcePrefixLength:Xr(s)?24:56,scopePrefixLength:0}]}]}),g=Tm.Buffer.from(p).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),y=await R.http.get({url:`${t}?dns=${encodeURIComponent(g)}`,headers:{Accept:"application/dns-message"},"binary-mode":!0,encoding:null,timeout:u});return Up.default.decode(Tm.Buffer.from(R.env.isQX?y.bodyBytes:y.body))}var Nm=qr(Wl()),{isNode:aC,isQX:IN,isLoon:BN,isSurge:$N,isStash:RN,isShadowRocket:PN,isLanceX:ON,isEgern:TN,isGUIforCores:xN}=dn(),ya="Node";aC&&(ya="Node"),IN&&(ya="QX"),BN&&(ya="Loon"),$N&&(ya="Surge"),RN&&(ya="Stash"),PN&&(ya="Shadowrocket"),TN&&(ya="Egern"),ON&&(ya="LanceX"),xN&&(ya="GUI.for.Cores");var sl={},NN={};try{if(typeof $environment<"u"&&(sl.env=$environment),typeof $loon<"u"&&(sl.loon=$loon),typeof $script<"u"&&(sl.script=$script),typeof $Plugin<"u"&&(sl.plugin=$Plugin),aC){sl.node={version:eval("process.version"),argv:eval("process.argv"),filename:eval("__filename"),dirname:eval("__dirname"),env:{}};let env=eval("process.env");for(let t in env)/^SUB_STORE_/.test(t)&&(sl.node.env[t]=env[t])}}catch(t){}var ro={backend:ya,version:Hd,feature:NN,meta:sl};function kN(t){return t&&typeof t=="object"&&!Array.isArray(t)}function Xf(t){return t.startsWith("<")&&t.endsWith(">")?t.slice(1,-1):t}function oC(t,e){let n=typeof e=="string"?JSON.parse(e):e;for(let u in n)if(kN(n[u]))if(u.endsWith("!")){let s=Xf(u.slice(0,-1));t[s]=n[u]}else{let s=Xf(u);t[s]||Object.assign(t,{[s]:{}}),oC(t[s],n[s])}else if(Array.isArray(n[u]))if(u.startsWith("+")){let s=Xf(u.slice(1));t[s]||Object.assign(t,{[s]:[]}),t[s]=[...n[u],...t[s]]}else if(u.endsWith("+")){let s=Xf(u.slice(0,-1));t[s]||Object.assign(t,{[s]:[]}),t[s]=[...t[s],...n[u]]}else{let s=Xf(u);Object.assign(t,{[s]:n[u]})}else Object.assign(t,{[u]:n[u]});return t}function LN({rule:t}){return{name:"Conditional Filter",func:e=>e.map(n=>jp(t,n))}}function jp(t,e){if(!t.operator)switch(t.proposition){case"IN":return t.value.indexOf(e[t.attr])!==-1;case"CONTAINS":return typeof e[t.attr]!="string"?!1:e[t.attr].indexOf(t.value)!==-1;case"EQUALS":return e[t.attr]===t.value;case"EXISTS":return e[t.attr]!==null||typeof e[t.attr]<"u";default:throw new Error(`Unknown proposition: ${t.proposition}`)}switch(t.operator){case"AND":return t.child.every(n=>jp(n,e));case"OR":return t.child.some(n=>jp(n,e));case"NOT":return!jp(t.child,e);default:throw new Error(`Unknown operator: ${t.operator}`)}}function UN(t){return{name:"Quick Setting Operator",func:n=>{if(e(t.useless)){let u=hC().func(n);n=n.filter((s,p)=>u[p]&&s.port>0&&s.port<=65535)}return n.map(u=>(u.udp=e(t.udp,u.udp),u.tfo=e(t.tfo,u.tfo),u["fast-open"]=e(t.tfo,u["fast-open"]),u["skip-cert-verify"]=e(t.scert,u["skip-cert-verify"]),u.type==="vmess"&&(u.aead=e(t["vmess aead"],u.aead)),u))}};function e(n,u){switch(n){case"ENABLED":return!0;case"DISABLED":return!1;default:return u}}}function jN({mode:t,tw:e}){return{name:"Flag Operator",func:n=>n.map(u=>{if(t==="remove")u.name=Yf(u.name);else{let s=bc(u.name);u.name=Yf(u.name),u.name=s+" "+u.name,e=="ws"?u.name=u.name.replace(//g,"\u{1F1FC}\u{1F1F8}"):e=="tw"||(u.name=u.name.replace(//g,"\u{1F1E8}\u{1F1F3}"))}return u})}}function HN(t){let{action:e,template:n,link:u,position:s}={action:"rename",template:"0 1 2 3 4 5 6 7 8 9",link:"-",position:"back",...t};return{name:"Handle Duplicate Operator",func:p=>{if(e==="delete"){let g={};return p.filter(y=>g[y.name]?!1:(g[y.name]=!0,!0))}else if(e==="rename"){let g=n.split(" "),y={},E=0;p.forEach(C=>{typeof y[C.name]>"u"?y[C.name]=1:y[C.name]++,E=Math.max(y[C.name].toString().length,E)});let m={};return p.map(C=>{if(y[C.name]>1){typeof m[C.name]>"u"&&(m[C.name]=1);let a="",H=m[C.name]++,X=0;for(;H>0;)a=g[H%10]+a,H=parseInt(H/10),X++;for(;X++<E;)a=g[0]+a;s==="front"?C.name=a+u+C.name:s==="back"&&(C.name=C.name+u+a)}return C})}}}}function MN(t="asc"){return{name:"Sort Operator",func:e=>{switch(t){case"asc":case"desc":return e.sort((n,u)=>{let s=n.name>u.name?1:-1;return s*=t==="desc"?-1:1,s});case"random":return QN(e);default:throw new Error("Unknown sort option: "+t)}}}}function qN(t){let e=t.order||"asc",n=t.expressions;return Array.isArray(t)&&(n=t),Array.isArray(n)||(n=[]),{name:"Regex Sort Operator",func:u=>(n=n.map(s=>km(s)),u.sort((s,p)=>{let g=uC(n,s.name),y=uC(n,p.name);return g&&!y?-1:y&&!g?1:g&&y?g<y?-1:1:e==="original"?0:e==="desc"?s.name<p.name?1:-1:s.name<p.name?-1:1}))}}function uC(t,e){let n=null;for(let u=0;u<t.length;u++)if(t[u].test(e)){n=u+1;break}return n}function lC(t){return{name:"Regex Rename Operator",func:e=>e.map(n=>{for(let{expr:u,now:s}of t)n.name=n.name.replace(km(u,"g"),s).trim();return n})}}function VN(t){let e=t.map(n=>({expr:n,now:""}));return{name:"Regex Delete Operator",func:lC(e).func}}function KN(t,e,n,u,s,p){return p.source=u,p.env=ro,{name:"Script Operator",func:async g=>{let y=g;if(y?.$file?.type==="mihomoProfile")try{let E=pa.safeLoad(t),m;if(y?.$content)try{m=pa.safeLoad(y?.$content)}catch(C){R.error(C.message??C)}if(typeof E!="object")throw new Error("patch is not an object");return y.$content=xt.yaml.safeDump(oC(m||(y?.$file?.sourceType==="none"?{}:{proxies:await wn({type:y?.$file?.sourceType||"collection",name:y?.$file?.sourceName,platform:"mihomo",produceType:"internal",produceOpts:{"delete-underscore-fields":!0}})}),E)),y}catch{}return await(async function(){y=Hp("operator",t,n,s)(g,e,p)})(),y},nodeFunc:async g=>{let y=g;return await(async function(){y=Hp("operator",`async function operator(input = [], targetPlatform, context) {
                        if (input && (input.$files || input.$content)) {
                            let { $content, $files, $options, $file } = input
                            if($file.type === 'mihomoProfile') {
                                ${t}
                                if(typeof main === 'function') {
                                    let config;
                                    if ($content) {
                                        try {
                                            config = ProxyUtils.yaml.safeLoad($content);
                                        } catch (e) {
                                            console.log(e.message ?? e);
                                        }
                                    }
                                    $content = ProxyUtils.yaml.safeDump(await main(config || ($file.sourceType === 'none' ? {} : {
                                        proxies: await produceArtifact({
                                            type: $file.sourceType || 'collection',
                                            name: $file.sourceName,
                                            platform: 'mihomo',
                                            produceType: 'internal',
                                            produceOpts: {
                                                'delete-underscore-fields': true
                                            }
                                        }),
                                    })))
                                }
                            } else {
                                ${t}
                            }
                            return { $content, $files, $options, $file }
                        } else {
                            let proxies = input
                            let list = []
                            for await (let $server of proxies) {
                                ${t}
                                list.push($server)
                            }
                            return list
                        }
                      }`,n,s)(g,e,p)})(),y}}}function zN(t){let e,n;try{let u=t.split(":");n=parseInt(u[2],16);let s=parseInt(u[3],16),p=parseInt(u[4],16),g=s>>8,y=s&255,E=p>>8,m=p&255;if(e=`${g}.${y}.${E}.${m}`,n<=0||n>65535)throw new Error(`Invalid port number: ${n}`);if(!Xr(e))throw new Error(`Invalid IP address: ${e}`)}catch(u){R.error(`IP4P \u89E3\u6790\u5931\u8D25: ${u}`)}return{server:e,port:n}}var cC={Custom:async function(t,e,n,u,s,p){let g=Wi(`CUSTOM:${p}:${t}:${e}`),y=Jr.get(g);if(!n&&y)return y;let E=e==="IPv6"?"AAAA":"A",m=await _c({url:p,domain:t,type:E,timeout:u,edns:s}),{answers:C}=m;if(!Array.isArray(C)||C.length===0)throw new Error("No answers");let a=C.filter(H=>H?.type===E).map(H=>H?.data).filter(H=>H);if(a.length===0)throw new Error("No answers");return Jr.set(g,a),a},Google:async function(t,e,n,u,s){let p=Wi(`GOOGLE:${t}:${e}`),g=Jr.get(p);if(!n&&g)return g;let y=e==="IPv6"?"AAAA":"A",E=await _c({url:"https://8.8.4.4/dns-query",domain:t,type:y,timeout:u,edns:s}),{answers:m}=E;if(!Array.isArray(m)||m.length===0)throw new Error("No answers");let C=m.filter(a=>a?.type===y).map(a=>a?.data).filter(a=>a);if(C.length===0)throw new Error("No answers");return Jr.set(p,C),C},"IP-API":async function(t,e,n,u){if(["IPv6"].includes(e))throw new Error(`\u57DF\u540D\u89E3\u6790\u670D\u52A1\u63D0\u4F9B\u65B9 IP-API \u4E0D\u652F\u6301 ${e}`);let s=Wi(`IP-API:${t}`),p=Jr.get(s);if(!n&&p)return p;let g=await R.http.get({url:`http://ip-api.com/json/${encodeURIComponent(t)}?lang=zh-CN`,timeout:u}),y=JSON.parse(g.body);if(y.status!=="success")throw new Error(`Status is ${y.status}`);if(!y.query||y.query===0)throw new Error("No answers");let E=[y.query];if(E.length===0)throw new Error("No answers");return Jr.set(s,E),E},Cloudflare:async function(t,e,n,u,s){let p=Wi(`CLOUDFLARE:${t}:${e}`),g=Jr.get(p);if(!n&&g)return g;let y=e==="IPv6"?"AAAA":"A",E=await _c({url:"https://1.0.0.1/dns-query",domain:t,type:y,timeout:u,edns:s}),{answers:m}=E;if(!Array.isArray(m)||m.length===0)throw new Error("No answers");let C=m.filter(a=>a?.type===y).map(a=>a?.data).filter(a=>a);if(C.length===0)throw new Error("No answers");return Jr.set(p,C),C},Ali:async function(t,e,n,u,s){let p=Wi(`ALI:${t}:${e}`),g=Jr.get(p);if(!n&&g)return g;let y=await R.http.get({url:`http://223.6.6.6/resolve?edns_client_subnet=${s}/${Xr(s)?24:56}&name=${encodeURIComponent(t)}&type=${e==="IPv6"?"AAAA":"A"}&short=1`,headers:{accept:"application/dns-json"},timeout:u}),E=JSON.parse(y.body);if(!Array.isArray(E)||E.length===0)throw new Error("No answers");let m=E;if(m.length===0)throw new Error("No answers");return Jr.set(p,m),m},Tencent:async function(t,e,n,u,s){let p=Wi(`TENCENT:${t}:${e}`),g=Jr.get(p);if(!n&&g)return g;let y=(await R.http.get({url:`http://119.28.28.28/d?ip=${s}&type=${e==="IPv6"?"AAAA":"A"}&dn=${encodeURIComponent(t)}`,headers:{accept:"application/dns-json"},timeout:u})).body.split(";").map(m=>m.split(",")[0]);if(y.length===0||String(y)==="0")throw new Error("No answers");let E=y;if(E.length===0)throw new Error("No answers");return Jr.set(p,E),E}};function fC({provider:t,type:e,filter:n,cache:u,url:s,timeout:p,edns:g}){if(["IPv6","IP4P"].includes(e)&&["IP-API"].includes(t))throw new Error(`\u57DF\u540D\u89E3\u6790\u670D\u52A1\u63D0\u4F9B\u65B9 ${t} \u4E0D\u652F\u6301 ${e}`);let{defaultTimeout:y}=R.read(At),E=p||y||8e3,m=["IPv6","IP4P"].includes(e)?"IPv6":"IPv4",C=cC[t];if(!C)throw new Error(`\u627E\u4E0D\u5230\u57DF\u540D\u89E3\u6790\u670D\u52A1\u63D0\u4F9B\u65B9: ${t}`);let a=g||"223.6.6.6";if(!al(a))throw new Error("\u57DF\u540D\u89E3\u6790 EDNS \u5E94\u4E3A IP");return R.info(`Domain Resolver: [${e}] ${t} ${a||""} ${s||""}`),{name:"Resolve Domain Operator",func:async H=>{H.forEach((J,N)=>{!J["_no-resolve"]&&J["no-resolve"]&&(H[N]["_no-resolve"]=J["no-resolve"])});let X={},w=15,j=[...new Set(H.filter(J=>!al(J.server)&&!J["_no-resolve"]).map(J=>J.server))],tt=Math.ceil(j.length/w);for(let J=0;J<tt;J++){let N=[];for(let Q of j.splice(0,w))N.push(C(Q,m,u==="disabled",E,a,s).then(at=>{X[Q]=at,R.info(`Successfully resolved domain: ${Q} \u279F ${at}`)}).catch(at=>{R.error(`Failed to resolve domain: ${Q} with resolver [${t}]: ${at}`)}));await Promise.all(N)}return H.forEach(J=>{if(!J["_no-resolve"])if(X[J.server]){J._resolved_ips=X[J.server];let N=Array.isArray(X[J.server])?X[J.server][Math.floor(Math.random()*X[J.server].length)]:X[J.server];if(m==="IPv6"&&Vr(N)){try{N=new rp.Address6(N).correctForm()}catch(Q){R.error(`Failed to parse IPv6 address: ${N}: ${Q}`)}if(/^2001::[^:]+:[^:]+:[^:]+$/.test(N)){J._IP4P=N;let{server:Q,port:at}=zN(N);Q&&at?(J._domain=J.server,J.server=Q,J.port=at,J.resolved=!0,J._IPv4=J.server,al(J._IP)||(J._IP=J.server)):J.resolved||(J.resolved=!1)}else J._domain=J.server,J.server=N,J.resolved=!0,J[`_${m}`]=J.server,al(J._IP)||(J._IP=J.server)}else J._domain=J.server,J.server=N,J.resolved=!0,J[`_${m}`]=J.server,al(J._IP)||(J._IP=J.server)}else J.resolved||(J.resolved=!1)}),H.filter(J=>n==="removeFailed"?al(J.server)||J["_no-resolve"]||J.resolved:n==="IPOnly"?al(J.server):n==="IPv4Only"?Xr(J.server):n==="IPv6Only"?Vr(J.server):!0)}}}function al(t){return Xr(t)||Vr(t)}fC.resolver=cC;function xm(t){var e=/^[\x00-\x7F]+$/;return e.test(t)}function hC(){return{name:"Useless Filter",func:t=>t.map(e=>{if(e.cipher&&!xm(e.cipher)||e.password&&!xm(e.password))return!1;if(e.network){let n=e[`${e.network}-opts`]?.headers?.Host||e[`${e.network}-opts`]?.headers?.host;if(n=Array.isArray(n)?n:[n],n.some(u=>u&&!xm(u)))return!1}return!/|||||Bandwidth|expire/.test(e.name)})}}function GN(t){let e=t?.value||t;Array.isArray(e)||(e=[]);let n=t?.keep??!0,u={HK:"\u{1F1ED}\u{1F1F0}",TW:"\u{1F1F9}\u{1F1FC}",US:"\u{1F1FA}\u{1F1F8}",SG:"\u{1F1F8}\u{1F1EC}",JP:"\u{1F1EF}\u{1F1F5}",UK:"\u{1F1EC}\u{1F1E7}",DE:"\u{1F1E9}\u{1F1EA}",KR:"\u{1F1F0}\u{1F1F7}"};return{name:"Region Filter",func:s=>s.map(p=>{let g=bc(p.name),y=e.some(E=>u[E]===g);return n?y:!y})}}function YN({regex:t=[],keep:e=!0}){return{name:"Regex Filter",func:n=>n.map(u=>{let s=t.some(p=>km(p).test(u.name));return e?s:!s})}}function km(t,...e){return e=e.join(""),t.startsWith("(?i)")?(t=t.substring(4),new RegExp(t,"i"+e)):new RegExp(t,e)}function WN(t){let e=t?.value||t;Array.isArray(e)||(e=[]);let n=t?.keep??!0;return{name:"Type Filter",func:u=>u.map(s=>{let p=e.some(g=>s.type===g);return n?p:!p})}}function XN(t,e,n,u,s,p){return p.source=u,p.env=ro,{name:"Script Filter",func:async g=>{let y=Tp(g.length,!0);return await(async function(){y=Hp("filter",t,n,s)(g,e,p)})(),y},nodeFunc:async g=>{let y=Tp(g.length,!0);return await(async function(){y=Hp("filter",`async function filter(input = [], targetPlatform, context) {
                        let proxies = input
                        let list = []
                        const fn = async ($server) => {
                            ${t}
                        }
                        for await (let $server of proxies) {
                            list.push(await fn($server))
                        }
                        return list
                      }`,n,s)(g,e,p)})(),y}}}var Mp={"Useless Filter":hC,"Region Filter":GN,"Regex Filter":YN,"Type Filter":WN,"Script Filter":XN,"Conditional Filter":LN,"Quick Setting Operator":UN,"Flag Operator":jN,"Sort Operator":MN,"Regex Sort Operator":qN,"Regex Rename Operator":lC,"Regex Delete Operator":VN,"Script Operator":KN,"Handle Duplicate Operator":HN,"Resolve Domain Operator":fC};async function JN(t,e){let n=Tp(e.length,!0);try{n=await t.func(e)}catch(u){let s="",p=`${u.message??u}`;p.includes("$server is not defined")?s="":(R.error(`Cannot apply filter ${t.name}(function filter)! Reason: ${u}`),s=`\u6267\u884C function filter \u5931\u8D25 ${p}; `);try{n=await t.nodeFunc(e)}catch(g){R.error(`Cannot apply filter ${t.name}(shortcut script)! Reason: ${g}`);let y="",E=`${g.message??g}`;throw s&&E===p?(y="",s=`\u6267\u884C\u5931\u8D25 ${p}`):y=`\u6267\u884C\u5FEB\u6377\u8FC7\u6EE4\u811A\u672C \u5931\u8D25 ${E}`,new Error(`\u811A\u672C\u8FC7\u6EE4 ${s}${y}`)}}return e.filter((u,s)=>n[s])}async function ZN(t,e){let n=ek(e);try{let u=await t.func(n);u&&(n=u)}catch(u){let s="",p=`${u.message??u}`;p.includes("$server is not defined")||p.includes("$content is not defined")||p.includes("$files is not defined")||n?.$files||n?.$content?s="":(R.error(`Cannot apply operator ${t.name}(function operator)! Reason: ${u}`),s=`\u6267\u884C function operator \u5931\u8D25 ${p}; `);try{let g=await t.nodeFunc(n);g&&(n=g)}catch(g){R.error(`Cannot apply operator ${t.name}(shortcut script)! Reason: ${g}`);let y="",E=`${g.message??g}`;throw s&&E===p?(y="",s=`\u6267\u884C\u5931\u8D25 ${p}`):y=`\u6267\u884C\u5FEB\u6377\u811A\u672C \u5931\u8D25 ${E}`,new Error(`\u811A\u672C\u64CD\u4F5C ${s}${y}`)}}return n}async function dC(t,e){if(t.name.indexOf("Filter")!==-1)return JN(t,e);if(t.name.indexOf("Operator")!==-1)return ZN(t,e)}function QN(t){let e=t.length,n,u;for(;e!==0;)u=Math.floor(Math.random()*e),e-=1,n=t[e],t[e]=t[u],t[u]=n;return t}function ek(t){return JSON.parse(JSON.stringify(t))}function Hp(name,script,$arguments,$options){let flowUtils={getFlowField:zo,getFlowHeaders:zn,parseFlowHeaders:ru,flowTransfer:Pf,validCheck:ip,getRmainingDays:sp,normalizeFlowHeader:Wu};return R.env.isLoon?new Function("$arguments","$options","$substore","lodash","$persistentStore","$httpClient","$notification","ProxyUtils","yaml","Buffer","b64d","b64e","scriptResourceCache","flowUtils","produceArtifact","require",`${script}
 return ${name}`)($arguments,$options,R,Nm.default,$persistentStore,$httpClient,$notification,xt,xt.yaml,xt.Buffer,xt.Base64.decode,xt.Base64.encode,Gf,flowUtils,wn,eval('typeof require !== "undefined"')?Lo:void 0):new Function("$arguments","$options","$substore","lodash","ProxyUtils","yaml","Buffer","b64d","b64e","scriptResourceCache","flowUtils","produceArtifact","require",`${script}
 return ${name}`)($arguments,$options,R,Nm.default,xt,xt.yaml,xt.Buffer,xt.Base64.decode,xt.Base64.encode,Gf,flowUtils,wn,eval('typeof require !== "undefined"')?Lo:void 0)}function tk(){return{name:"HTML",test:t=>/^<!DOCTYPE html>/.test(t),parse:()=>""}}function rk(){let t="Base64 Pre-processor",e=["dm1lc3M","c3NyOi8v","c29ja3M6Ly","dHJvamFu","c3M6Ly","c3NkOi8v","c2hhZG93","aHR0c","dmxlc3M=","aHlzdGVyaWEy","aHkyOi8v","d2lyZWd1YXJkOi8v","d2c6Ly8=","dHVpYzovLw=="];return{name:t,test:function(n){return!/^\w+:\/\/\w+/im.test(n)&&e.some(u=>n.indexOf(u)!==-1)},parse:function(n){let u=dt.decode(n);return/^\w+(:\/\/|\s*?=\s*?)\w+/m.test(u)?u:(R.error("Base64 Pre-processor error: decoded line does not start with protocol"),n)}}}function nk(){return{name:"Fallback Base64 Pre-processor",test:function(t){return!0},parse:function(t){let e=dt.decode(t);return/^\w+(:\/\/|\s*?=\s*?)\w+/m.test(e)?e:(R.error("Fallback Base64 Pre-processor error: decoded line does not start with protocol"),t)}}}function ik(){return{name:"Clash Pre-processor",test:function(t){if(!/proxies/.test(t))return!1;let e=Kf(t);return e.proxies&&Array.isArray(e.proxies)},parse:function(t,e){let n=t.replace(/short-id:([ \t]*[^#\n,}]*)/g,(p,g)=>{let y=g.trim();return!y||y===""?'short-id: ""':/^(['"]).*\1$/.test(y)?`short-id: ${y}`:["null"].includes(y)?`short-id: ${y}`:`short-id: "${y}"`}),{proxies:u,"global-client-fingerprint":s}=Kf(n);return(e?`proxies:
`:"")+u.map(p=>(s&&["trojan","vmess","vless"].includes(p.type)&&!p["client-fingerprint"]&&(p["client-fingerprint"]=s),`${e?"  - ":""}${JSON.stringify(p)}
`)).join("")}}}function sk(){return{name:"SSD Pre-processor",test:function(t){return t.indexOf("ssd://")===0},parse:function(t){let e=[],n=JSON.parse(dt.decode(t.split("ssd://")[1])),u=n.port,s=n.encryption,p=n.password,g=n.servers;for(let y=0;y<g.length;y++){let E=g[y];s=E.encryption?E.encryption:s,p=E.password?E.password:p;let m=dt.encode(s+":"+p),C=E.server;u=E.port?E.port:u;let a=E.remarks?E.remarks:y,H=E.plugin_options?"/?plugin="+encodeURIComponent(E.plugin+";"+E.plugin_options):"";e[y]="ss://"+m+"@"+C+":"+u+H+"#"+a}return e.join(`
`)}}}function ak(){return{name:"Full Config Preprocessor",test:function(t){return/^(\[server_local\]|\[Proxy\])/gm.test(t)},parse:function(t){return t.match(/^\[server_local|Proxy\]([\s\S]+?)^\[.+?\](\r?\n|$)/im)?.[1]||t}}}var qp=[tk(),ik(),rk(),sk(),ak(),nk()],pC=qr(Wl()),pt=class{constructor(t){this.proxy=t,this.output=[]}append(t){if(typeof t>"u")throw new Error("required field is missing");this.output.push(t)}appendIfPresent(t,e){oe(this.proxy,e)&&this.append(t)}toString(){return this.output.join("")}};function oe(t,e){let n=pC.default.get(t,e);return typeof n<"u"&&n!==null}var Lm="Surge",es={dual:"dual",ipv4:"v4-only",ipv6:"v6-only","ipv4-prefer":"prefer-v4","ipv6-prefer":"prefer-v6"};function Cc(){return{produce:(t,e,n={})=>{if(["ws"].includes(t.network)&&t["ws-opts"]?.["v2ray-http-upgrade"])throw new Error(`Platform ${Lm} does not support network ${t.network} with http upgrade`);switch(t.name=t.name.replace(/=|,/g,""),t.ports&&(t.ports=String(t.ports)),t.type){case"ss":return uk(t);case"trojan":return ok(t);case"vmess":return ck(t,n["include-unsupported-proxy"]);case"http":return hk(t);case"direct":return dk(t);case"socks5":return pk(t);case"snell":return gk(t);case"tuic":return mk(t);case"wireguard-surge":return wk(t);case"hysteria2":return Ek(t,n["include-unsupported-proxy"]);case"ssh":return fk(t)}if(n["include-unsupported-proxy"]&&t.type==="wireguard")return vk(t);if(n["include-unsupported-proxy"]&&t.type==="anytls"){if(t.network&&(!["tcp"].includes(t.network)||["tcp"].includes(t.network)&&t["reality-opts"]))throw new Error(`Platform ${Lm} does not support proxy type ${t.type} with network or reality`);return lk(t)}throw new Error(`Platform ${Lm} does not support proxy type: ${t.type}`)}}}function uk(t){let e=new pt(t);if(e.append(`${t.name}=${t.type},${t.server},${t.port}`),t.cipher||(t.cipher="none"),!["aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","rc4","rc4-md5","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","cast5-cfb","des-cfb","idea-cfb","rc2-cfb","seed-cfb","salsa20","chacha20","chacha20-ietf","none","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(t.cipher))throw new Error(`cipher ${t.cipher} is not supported`);e.append(`,encrypt-method=${t.cipher}`),e.appendIfPresent(`,password="${t.password}"`,"password");let n=es[t["ip-version"]]||t["ip-version"];if(e.appendIfPresent(`,ip-version=${n}`,"ip-version"),e.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),oe(t,"plugin")){if(t.plugin==="obfs")e.append(`,obfs=${t["plugin-opts"].mode}`),e.appendIfPresent(`,obfs-host=${t["plugin-opts"].host}`,"plugin-opts.host"),e.appendIfPresent(`,obfs-uri=${t["plugin-opts"].path}`,"plugin-opts.path");else if(!["shadow-tls"].includes(t.plugin))throw new Error(`plugin ${t.plugin} is not supported`)}if(e.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),e.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),e.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),e.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),e.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),e.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),e.appendIfPresent(`,tos=${t.tos}`,"tos"),e.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),e.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),e.appendIfPresent(`,interface=${t.interface}`,"interface"),oe(t,"shadow-tls-password"))e.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),e.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),e.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni"),e.appendIfPresent(`,udp-port=${t["udp-port"]}`,"udp-port");else if(["shadow-tls"].includes(t.plugin)&&t["plugin-opts"]){let u=t["plugin-opts"].password,s=t["plugin-opts"].host,p=t["plugin-opts"].version;if(u){if(e.append(`,shadow-tls-password=${u}`),s&&e.append(`,shadow-tls-sni=${s}`),p){if(p<2)throw new Error(`shadow-tls version ${p} is not supported`);e.append(`,shadow-tls-version=${p}`)}e.appendIfPresent(`,udp-port=${t["udp-port"]}`,"udp-port")}}return e.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),e.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),e.toString()}function ok(t){let e=new pt(t);e.append(`${t.name}=${t.type},${t.server},${t.port}`),e.appendIfPresent(`,password="${t.password}"`,"password");let n=es[t["ip-version"]]||t["ip-version"];return e.appendIfPresent(`,ip-version=${n}`,"ip-version"),e.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),gC(e,t),e.appendIfPresent(`,tls=${t.tls}`,"tls"),e.appendIfPresent(`,server-cert-fingerprint-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),e.appendIfPresent(`,sni=${t.sni}`,"sni"),e.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),e.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),e.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),e.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),e.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),e.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),e.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),e.appendIfPresent(`,tos=${t.tos}`,"tos"),e.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),e.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),e.appendIfPresent(`,interface=${t.interface}`,"interface"),oe(t,"shadow-tls-password")&&(e.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),e.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),e.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),e.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),e.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),e.toString()}function lk(t){let e=new pt(t);e.append(`${t.name}=${t.type},${t.server},${t.port}`),e.appendIfPresent(`,password="${t.password}"`,"password");let n=es[t["ip-version"]]||t["ip-version"];return e.appendIfPresent(`,ip-version=${n}`,"ip-version"),e.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),e.appendIfPresent(`,server-cert-fingerprint-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),e.appendIfPresent(`,sni=${t.sni}`,"sni"),e.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),e.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),e.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),e.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),e.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),e.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),e.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),e.appendIfPresent(`,tos=${t.tos}`,"tos"),e.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),e.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),e.appendIfPresent(`,interface=${t.interface}`,"interface"),e.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),e.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),e.appendIfPresent(`,reuse=${t.reuse}`,"reuse"),e.toString()}function ck(t,e){let n=new pt(t);n.append(`${t.name}=${t.type},${t.server},${t.port}`),n.appendIfPresent(`,username=${t.uuid}`,"uuid");let u=es[t["ip-version"]]||t["ip-version"];return n.appendIfPresent(`,ip-version=${u}`,"ip-version"),n.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),gC(n,t,e),oe(t,"aead")?n.append(`,vmess-aead=${t.aead}`):n.append(`,vmess-aead=${t.alterId===0}`),n.appendIfPresent(`,server-cert-fingerprint-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),n.appendIfPresent(`,tls=${t.tls}`,"tls"),n.appendIfPresent(`,sni=${t.sni}`,"sni"),n.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),n.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),n.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),n.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),n.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),n.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),n.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),n.appendIfPresent(`,tos=${t.tos}`,"tos"),n.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),n.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),n.appendIfPresent(`,interface=${t.interface}`,"interface"),oe(t,"shadow-tls-password")&&(n.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),n.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),n.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),n.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),n.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),n.toString()}function fk(t){let e=new pt(t);e.append(`${t.name}=ssh,${t.server},${t.port}`),e.appendIfPresent(`,username="${t.username}"`,"username"),e.appendIfPresent(`,password="${t.password}"`,"password"),e.appendIfPresent(`,private-key=${t["keystore-private-key"]}`,"keystore-private-key"),e.appendIfPresent(`,idle-timeout=${t["idle-timeout"]}`,"idle-timeout"),e.appendIfPresent(`,server-fingerprint="${t["server-fingerprint"]}"`,"server-fingerprint");let n=es[t["ip-version"]]||t["ip-version"];return e.appendIfPresent(`,ip-version=${n}`,"ip-version"),e.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),e.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),e.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),e.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),e.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),e.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),e.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),e.appendIfPresent(`,tos=${t.tos}`,"tos"),e.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),e.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),e.appendIfPresent(`,interface=${t.interface}`,"interface"),e.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),e.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),e.toString()}function hk(t){if(t.headers&&Object.keys(t.headers).length>0)throw new Error("headers is unsupported");let e=new pt(t),n=t.tls?"https":"http";e.append(`${t.name}=${n},${t.server},${t.port}`),e.appendIfPresent(`,username="${t.username}"`,"username"),e.appendIfPresent(`,password="${t.password}"`,"password");let u=es[t["ip-version"]]||t["ip-version"];return e.appendIfPresent(`,ip-version=${u}`,"ip-version"),e.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),e.appendIfPresent(`,server-cert-fingerprint-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),e.appendIfPresent(`,sni=${t.sni}`,"sni"),e.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),e.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),e.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),e.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),e.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),e.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),e.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),e.appendIfPresent(`,tos=${t.tos}`,"tos"),e.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),e.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),e.appendIfPresent(`,interface=${t.interface}`,"interface"),oe(t,"shadow-tls-password")&&(e.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),e.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),e.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),e.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),e.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),e.toString()}function dk(t){let e=new pt(t);e.append(`${t.name}=direct`);let n=es[t["ip-version"]]||t["ip-version"];return e.appendIfPresent(`,ip-version=${n}`,"ip-version"),e.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),e.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),e.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),e.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),e.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),e.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),e.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),e.appendIfPresent(`,tos=${t.tos}`,"tos"),e.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),e.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),e.appendIfPresent(`,interface=${t.interface}`,"interface"),e.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),e.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),e.toString()}function pk(t){let e=new pt(t),n=t.tls?"socks5-tls":"socks5";e.append(`${t.name}=${n},${t.server},${t.port}`),e.appendIfPresent(`,username="${t.username}"`,"username"),e.appendIfPresent(`,password="${t.password}"`,"password");let u=es[t["ip-version"]]||t["ip-version"];return e.appendIfPresent(`,ip-version=${u}`,"ip-version"),e.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),e.appendIfPresent(`,server-cert-fingerprint-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),e.appendIfPresent(`,sni=${t.sni}`,"sni"),e.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),t.tfo&&R.info("Option tfo is not supported by Surge, thus omitted"),e.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),e.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),e.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),e.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),e.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),e.appendIfPresent(`,tos=${t.tos}`,"tos"),e.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),e.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),e.appendIfPresent(`,interface=${t.interface}`,"interface"),oe(t,"shadow-tls-password")&&(e.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),e.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),e.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),e.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),e.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),e.toString()}function gk(t){let e=new pt(t);e.append(`${t.name}=${t.type},${t.server},${t.port}`),e.appendIfPresent(`,version=${t.version}`,"version"),e.appendIfPresent(`,psk=${t.psk}`,"psk");let n=es[t["ip-version"]]||t["ip-version"];return e.appendIfPresent(`,ip-version=${n}`,"ip-version"),e.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),e.appendIfPresent(`,obfs=${t["obfs-opts"]?.mode}`,"obfs-opts.mode"),e.appendIfPresent(`,obfs-host=${t["obfs-opts"]?.host}`,"obfs-opts.host"),e.appendIfPresent(`,obfs-uri=${t["obfs-opts"]?.path}`,"obfs-opts.path"),e.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),e.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),e.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),e.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),e.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),e.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),e.appendIfPresent(`,tos=${t.tos}`,"tos"),e.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),e.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),e.appendIfPresent(`,interface=${t.interface}`,"interface"),oe(t,"shadow-tls-password")&&(e.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),e.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),e.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),e.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),e.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),e.appendIfPresent(`,reuse=${t.reuse}`,"reuse"),e.toString()}function mk(t){let e=new pt(t),n=t.type;(!t.token||t.token.length===0)&&(n="tuic-v5"),e.append(`${t.name}=${n},${t.server},${t.port}`),e.appendIfPresent(`,uuid=${t.uuid}`,"uuid"),e.appendIfPresent(`,password="${t.password}"`,"password"),e.appendIfPresent(`,token=${t.token}`,"token"),e.appendIfPresent(`,alpn=${Array.isArray(t.alpn)?t.alpn[0]:t.alpn}`,"alpn"),oe(t,"ports")&&e.append(`,port-hopping="${t.ports.replace(/,/g,";")}"`),e.appendIfPresent(`,port-hopping-interval=${t["hop-interval"]}`,"hop-interval");let u=es[t["ip-version"]]||t["ip-version"];return e.appendIfPresent(`,ip-version=${u}`,"ip-version"),e.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),e.appendIfPresent(`,sni=${t.sni}`,"sni"),e.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),e.appendIfPresent(`,server-cert-fingerprint-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),oe(t,"tfo")?e.append(`,tfo=${t.tfo}`):oe(t,"fast-open")&&e.append(`,tfo=${t["fast-open"]}`),e.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),e.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),e.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),e.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),e.appendIfPresent(`,tos=${t.tos}`,"tos"),e.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),e.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),e.appendIfPresent(`,interface=${t.interface}`,"interface"),oe(t,"shadow-tls-password")&&(e.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),e.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),e.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),e.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),e.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),e.appendIfPresent(`,ecn=${t.ecn}`,"ecn"),e.toString()}function vk(t){Array.isArray(t.peers)&&t.peers.length>0&&(t.server=t.peers[0].server,t.port=t.peers[0].port,t.ip=t.peers[0].ip,t.ipv6=t.peers[0].ipv6,t["public-key"]=t.peers[0]["public-key"],t["preshared-key"]=t.peers[0]["pre-shared-key"],t["allowed-ips"]=t.peers[0]["allowed-ips"],t.reserved=t.peers[0].reserved);let e=new pt(t);e.append(`# > WireGuard Proxy ${t.name}
# ${t.name}=wireguard`),t["section-name"]=hr(t["section-name"],t.name),e.appendIfPresent(`,section-name=${t["section-name"]}`,"section-name"),e.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert");let n=es[t["ip-version"]]||t["ip-version"];e.appendIfPresent(`,ip-version=${n}`,"ip-version"),e.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),e.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),e.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),e.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),e.appendIfPresent(`,tos=${t.tos}`,"tos"),e.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),e.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),e.appendIfPresent(`,interface=${t.interface}`,"interface"),oe(t,"shadow-tls-password")&&(e.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),e.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),e.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),e.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),e.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),e.append(`
# > WireGuard Section ${t.name}
[WireGuard ${t["section-name"]}]
private-key = ${t["private-key"]}`),e.appendIfPresent(`
self-ip = ${t.ip}`,"ip"),e.appendIfPresent(`
self-ip-v6 = ${t.ipv6}`,"ipv6"),t.dns&&(Array.isArray(t.dns)&&(t.dns=t.dns.join(", ")),e.append(`
dns-server = ${t.dns}`)),e.appendIfPresent(`
mtu = ${t.mtu}`,"mtu"),n==="prefer-v6"&&e.append(`
prefer-ipv6 = true`);let u=Array.isArray(t["allowed-ips"])?t["allowed-ips"].join(","):t["allowed-ips"],s=Array.isArray(t.reserved)?t.reserved.join("/"):t.reserved,p=t["preshared-key"]??t["pre-shared-key"],g={"public-key":t["public-key"],"allowed-ips":u?`"${u}"`:void 0,endpoint:`${t.server}:${t.port}`,keepalive:t["persistent-keepalive"]||t.keepalive,"client-id":s,"preshared-key":p};return e.append(`
peer = (${Object.keys(g).filter(y=>g[y]!=null).map(y=>`${y} = ${g[y]}`).join(", ")})`),e.toString()}function wk(t){let e=new pt(t);e.append(`${t.name}=wireguard`),e.appendIfPresent(`,section-name=${t["section-name"]}`,"section-name"),e.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert");let n=es[t["ip-version"]]||t["ip-version"];return e.appendIfPresent(`,ip-version=${n}`,"ip-version"),e.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),e.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),e.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),e.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),e.appendIfPresent(`,tos=${t.tos}`,"tos"),e.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),e.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),e.appendIfPresent(`,interface=${t.interface}`,"interface"),oe(t,"shadow-tls-password")&&(e.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),e.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),e.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),e.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),e.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),e.toString()}function Ek(t,e){if(e){if(t["obfs-password"]&&t.obfs!="salamander")throw new Error("only salamander obfs is supported")}else if(t.obfs||t["obfs-password"])throw new Error("obfs is unsupported");let n=new pt(t);n.append(`${t.name}=hysteria2,${t.server},${t.port}`),n.appendIfPresent(`,password="${t.password}"`,"password"),oe(t,"ports")&&n.append(`,port-hopping="${t.ports.replace(/,/g,";")}"`),n.appendIfPresent(`,port-hopping-interval=${t["hop-interval"]}`,"hop-interval"),t["obfs-password"]&&t.obfs=="salamander"&&n.append(`,salamander-password="${t["obfs-password"]}"`);let u=es[t["ip-version"]]||t["ip-version"];return n.appendIfPresent(`,ip-version=${u}`,"ip-version"),n.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),n.appendIfPresent(`,sni=${t.sni}`,"sni"),n.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),n.appendIfPresent(`,server-cert-fingerprint-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),oe(t,"tfo")?n.append(`,tfo=${t.tfo}`):oe(t,"fast-open")&&n.append(`,tfo=${t["fast-open"]}`),n.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),n.appendIfPresent(`,test-timeout=${t["test-timeout"]}`,"test-timeout"),n.appendIfPresent(`,test-udp=${t["test-udp"]}`,"test-udp"),n.appendIfPresent(`,hybrid=${t.hybrid}`,"hybrid"),n.appendIfPresent(`,tos=${t.tos}`,"tos"),n.appendIfPresent(`,allow-other-interface=${t["allow-other-interface"]}`,"allow-other-interface"),n.appendIfPresent(`,interface=${t["interface-name"]}`,"interface-name"),n.appendIfPresent(`,interface=${t.interface}`,"interface"),oe(t,"shadow-tls-password")&&(n.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),n.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),n.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni")),n.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),n.appendIfPresent(`,underlying-proxy=${t["underlying-proxy"]}`,"underlying-proxy"),n.appendIfPresent(`,download-bandwidth=${`${t.down}`.match(/\d+/)?.[0]||0}`,"down"),n.appendIfPresent(`,ecn=${t.ecn}`,"ecn"),n.toString()}function gC(t,e,n){if(oe(e,"network"))if(e.network==="ws"){if(t.append(",ws=true"),oe(e,"ws-opts")&&(t.appendIfPresent(`,ws-path=${e["ws-opts"].path}`,"ws-opts.path"),oe(e,"ws-opts.headers"))){let u=e["ws-opts"].headers,s=Object.keys(u).map(p=>{let g=u[p];return g=`"${g}"`,`${p}:${g}`}).join("|");la(s)&&t.append(`,ws-headers=${s}`)}}else if(n&&["http"].includes(e.network))R.info(`Include Unsupported Proxy: network ${e.network} -> tcp`);else{if(["tcp"].includes(e.network)&&e["reality-opts"])throw new Error("reality is unsupported");if(!["tcp"].includes(e.network))throw new Error(`network ${e.network} is unsupported`)}}var Ak={dual:"dual","v4-only":"ipv4","v6-only":"ipv6","prefer-v4":"ipv4-prefer","prefer-v6":"ipv6-prefer"};function ts(){return{type:"ALL",produce:(t,e,n={})=>{let u=t.filter(s=>n["include-unsupported-proxy"]?!0:s.type==="snell"&&s.version>=4||["juicity","naive"].includes(s.type)||["ss"].includes(s.type)&&!["aes-128-ctr","aes-192-ctr","aes-256-ctr","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-gcm","aes-192-gcm","aes-256-gcm","aes-128-ccm","aes-192-ccm","aes-256-ccm","aes-128-gcm-siv","aes-256-gcm-siv","chacha20-ietf","chacha20","xchacha20","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","chacha8-ietf-poly1305","xchacha8-ietf-poly1305","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm","2022-blake3-chacha20-poly1305","lea-128-gcm","lea-192-gcm","lea-256-gcm","rabbit128-poly1305","aegis-128l","aegis-256","aez-384","deoxys-ii-256-128","rc4-md5","none"].includes(s.cipher)||["anytls"].includes(s.type)&&s.network&&(!["tcp"].includes(s.network)||["tcp"].includes(s.network)&&s["reality-opts"])?!1:!["xhttp"].includes(s.network)).map(s=>{if(["trojan","vmess","vless"].includes(s.type)&&(s["client-fingerprint"]=s["client-fingerprint"]||"chrome"),s.type==="vmess"?(oe(s,"aead")&&(s.aead&&(s.alterId=0),delete s.aead),oe(s,"sni")&&(s.servername=s.sni,delete s.sni),oe(s,"cipher")&&!["auto","none","zero","aes-128-gcm","chacha20-poly1305"].includes(s.cipher)&&(s.cipher="auto")):s.type==="tuic"?(oe(s,"alpn")&&(s.alpn=Array.isArray(s.alpn)?s.alpn:[s.alpn]),oe(s,"tfo")&&!oe(s,"fast-open")&&(s["fast-open"]=s.tfo),(!s.token||s.token.length===0)&&!oe(s,"version")&&(s.version=5)):s.type==="hysteria"?(oe(s,"auth_str")&&!oe(s,"auth-str")&&(s["auth-str"]=s.auth_str),oe(s,"alpn")&&(s.alpn=Array.isArray(s.alpn)?s.alpn:[s.alpn]),oe(s,"tfo")&&!oe(s,"fast-open")&&(s["fast-open"]=s.tfo)):s.type==="wireguard"?(s.keepalive=s.keepalive??s["persistent-keepalive"],s["persistent-keepalive"]=s.keepalive,s["preshared-key"]=s["preshared-key"]??s["pre-shared-key"],s["pre-shared-key"]=s["preshared-key"]):s.type==="snell"&&s.version<3?delete s.udp:s.type==="vless"?oe(s,"sni")&&(s.servername=s.sni,delete s.sni):s.type==="ss"&&oe(s,"shadow-tls-password")&&!oe(s,"plugin")&&(s.plugin="shadow-tls",s["plugin-opts"]={host:s["shadow-tls-sni"],password:s["shadow-tls-password"],version:s["shadow-tls-version"]},delete s["shadow-tls-password"],delete s["shadow-tls-sni"],delete s["shadow-tls-version"]),["vmess","vless"].includes(s.type)&&s.network==="http"){let p=s["http-opts"]?.path;oe(s,"http-opts.path")&&!Array.isArray(p)&&(s["http-opts"].path=[p]);let g=s["http-opts"]?.headers?.Host;oe(s,"http-opts.headers.Host")&&!Array.isArray(g)&&(s["http-opts"].headers.Host=[g])}if(["vmess","vless"].includes(s.type)&&s.network==="h2"){let p=s["h2-opts"]?.path;oe(s,"h2-opts.path")&&Array.isArray(p)&&(s["h2-opts"].path=p[0]);let g=s["h2-opts"]?.headers?.host;oe(s,"h2-opts.headers.Host")&&!Array.isArray(g)&&(s["h2-opts"].headers.host=[g])}if(["ws"].includes(s.network)){let p=s[`${s.network}-opts`]?.path;if(p){let g=/^(.*?)(?:\?ed=(\d+))?$/,[y,E="",m=""]=g.exec(p);s[`${s.network}-opts`].path=E,m!==""&&(s["ws-opts"]["early-data-header-name"]="Sec-WebSocket-Protocol",s["ws-opts"]["max-early-data"]=parseInt(m,10))}else s[`${s.network}-opts`]=s[`${s.network}-opts`]||{},s[`${s.network}-opts`].path="/"}if(s["plugin-opts"]?.tls&&oe(s,"skip-cert-verify")&&(s["plugin-opts"]["skip-cert-verify"]=s["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2","juicity","anytls","naive"].includes(s.type)&&delete s.tls,s["tls-fingerprint"]&&(s.fingerprint=s["tls-fingerprint"]),delete s["tls-fingerprint"],s["underlying-proxy"]&&(s["dialer-proxy"]=s["underlying-proxy"]),delete s["underlying-proxy"],oe(s,"tls")&&typeof s.tls!="boolean"&&delete s.tls,delete s.subName,delete s.collectionName,delete s.id,delete s.resolved,delete s["no-resolve"],e!=="internal"||n["delete-underscore-fields"])for(let p in s)(s[p]==null||/^_/i.test(p))&&delete s[p];return["grpc"].includes(s.network)&&s[`${s.network}-opts`]&&(delete s[`${s.network}-opts`]["_grpc-type"],delete s[`${s.network}-opts`]["_grpc-authority"]),s["ip-version"]&&(s["ip-version"]=Ak[s["ip-version"]]||s["ip-version"]),s});return e==="internal"?u:`proxies:
`+u.map(s=>"  - "+JSON.stringify(s)+`
`).join("")}}}var mC="SurgeMac",bk=Cc();function Um(){return{produce:(t,e,n={})=>{switch(t.type){case"external":return vC(t);default:try{return bk.produce(t,e,n)}catch{if(n.useMihomoExternal)return R.log(`${t.name} is not supported on ${mC}, try to use Mihomo(SurgeMac - External Proxy Program) instead`),yk(t,e,n);throw new Error("Surge for macOS \u53EF\u624B\u52A8\u6307\u5B9A\u94FE\u63A5\u53C2\u6570 target=SurgeMac \u6216\u5728 \u540C\u6B65\u914D\u7F6E \u4E2D\u6307\u5B9A SurgeMac \u6765\u542F\u7528 mihomo \u652F\u63F4 Surge \u672C\u8EAB\u4E0D\u652F\u6301\u7684\u534F\u8BAE")}}}}}function vC(t){let e=new pt(t);if(!t.exec||!t["local-port"])throw new Error(`${t.type}: exec and local-port are required`);return e.append(`${t.name}=external,exec="${t.exec}",local-port=${t["local-port"]}`),Array.isArray(t.args)&&t.args.map(n=>{e.append(`,args="${n}"`)}),Array.isArray(t.addresses)&&t.addresses.map(n=>{e.append(`,addresses=${n}`)}),e.appendIfPresent(`,no-error-alert=${t["no-error-alert"]}`,"no-error-alert"),e.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),oe(t,"tfo")?e.append(`,tfo=${t.tfo}`):oe(t,"fast-open")&&e.append(`,tfo=${t["fast-open"]}`),e.appendIfPresent(`,test-url=${t["test-url"]}`,"test-url"),e.appendIfPresent(`,block-quic=${t["block-quic"]}`,"block-quic"),e.toString()}function yk(t,e,n){let u=ts().produce([t],"internal")?.[0];if(u){let s=n?.localPort||t._localPort||65535,p=!["ipv4","v4-only"].includes(t["ip-version"]),g={name:t.name,type:"external",udp:!0,exec:t._exec||"/usr/local/bin/mihomo","local-port":s,args:["-config",dt.encode(JSON.stringify({"mixed-port":s,ipv6:p,mode:"global",dns:{enable:!0,ipv6:p,"default-nameserver":n?.defaultNameserver||t._defaultNameserver||["180.76.76.76","52.80.52.52","119.28.28.28","223.6.6.6"],nameserver:n?.nameserver||t._nameserver||["https://doh.pub/dns-query","https://dns.alidns.com/dns-query","https://doh-pure.onedns.net/dns-query"]},proxies:[{...u,name:"proxy"}],"proxy-groups":[{name:"GLOBAL",type:"select",proxies:["proxy"]}]}))],addresses:[]};return _k(t.server)?g.addresses.push(t.server):R.log(`Platform ${mC}, proxy type ${t.type}: addresses should be an IP address, but got ${t.server}`),n.localPort=s-1,vC(g)}}function _k(t){return Xr(t)||Vr(t)}function jm(){return{type:"ALL",produce:(t,e,n={})=>{let u=t.filter(s=>n["include-unsupported-proxy"]?!0:!["ss","ssr","vmess","vless","socks5","http","snell","trojan","wireguard"].includes(s.type)||s.type==="ss"&&!["aes-128-gcm","aes-192-gcm","aes-256-gcm","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","rc4-md5","chacha20-ietf","xchacha20","chacha20-ietf-poly1305","xchacha20-ietf-poly1305"].includes(s.cipher)||s.type==="snell"&&s.version>=4||s.type==="vless"&&(typeof s.flow<"u"||s["reality-opts"])||["ws"].includes(s.network)&&s["ws-opts"]?.["v2ray-http-upgrade"]?!1:s["underlying-proxy"]||s["dialer-proxy"]?(R.error(`Clash \u4E0D\u652F\u6301\u524D\u7F6E\u4EE3\u7406\u5B57\u6BB5. \u5DF2\u8FC7\u6EE4\u8282\u70B9 ${s.name}`),!1):!0).map(s=>{if(s.type==="vmess"?(oe(s,"aead")&&(s.aead&&(s.alterId=0),delete s.aead),oe(s,"sni")&&(s.servername=s.sni,delete s.sni),oe(s,"cipher")&&!["auto","aes-128-gcm","chacha20-poly1305","none"].includes(s.cipher)&&(s.cipher="auto")):s.type==="wireguard"?(s.keepalive=s.keepalive??s["persistent-keepalive"],s["persistent-keepalive"]=s.keepalive,s["preshared-key"]=s["preshared-key"]??s["pre-shared-key"],s["pre-shared-key"]=s["preshared-key"]):s.type==="snell"&&s.version<3?delete s.udp:s.type==="vless"&&oe(s,"sni")&&(s.servername=s.sni,delete s.sni),["vmess","vless"].includes(s.type)&&s.network==="http"){let p=s["http-opts"]?.path;oe(s,"http-opts.path")&&!Array.isArray(p)&&(s["http-opts"].path=[p]);let g=s["http-opts"]?.headers?.Host;oe(s,"http-opts.headers.Host")&&!Array.isArray(g)&&(s["http-opts"].headers.Host=[g])}if(["vmess","vless"].includes(s.type)&&s.network==="h2"){let p=s["h2-opts"]?.path;oe(s,"h2-opts.path")&&Array.isArray(p)&&(s["h2-opts"].path=p[0]);let g=s["h2-opts"]?.headers?.host;oe(s,"h2-opts.headers.Host")&&!Array.isArray(g)&&(s["h2-opts"].headers.host=[g])}if(["ws"].includes(s.network)){let p=s[`${s.network}-opts`]?.path;if(p){let g=/^(.*?)(?:\?ed=(\d+))?$/,[y,E="",m=""]=g.exec(p);s[`${s.network}-opts`].path=E,m!==""&&(s["ws-opts"]["early-data-header-name"]="Sec-WebSocket-Protocol",s["ws-opts"]["max-early-data"]=parseInt(m,10))}else s[`${s.network}-opts`]=s[`${s.network}-opts`]||{},s[`${s.network}-opts`].path="/"}if(s["plugin-opts"]?.tls&&oe(s,"skip-cert-verify")&&(s["plugin-opts"]["skip-cert-verify"]=s["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2","juicity","anytls","naive"].includes(s.type)&&delete s.tls,s["tls-fingerprint"]&&(s.fingerprint=s["tls-fingerprint"]),delete s["tls-fingerprint"],oe(s,"tls")&&typeof s.tls!="boolean"&&delete s.tls,delete s.subName,delete s.collectionName,delete s.id,delete s.resolved,delete s["no-resolve"],e!=="internal")for(let p in s)(s[p]==null||/^_/i.test(p))&&delete s[p];return["grpc"].includes(s.network)&&s[`${s.network}-opts`]&&(delete s[`${s.network}-opts`]["_grpc-type"],delete s[`${s.network}-opts`]["_grpc-authority"]),s});return e==="internal"?u:`proxies:
`+u.map(s=>"  - "+JSON.stringify(s)+`
`).join("")}}}function Vp(){return{type:"ALL",produce:(t,e,n={})=>{let u=t.filter(s=>!["ss","ssr","vmess","socks5","http","snell","trojan","tuic","vless","wireguard","hysteria","hysteria2","ssh","juicity","anytls"].includes(s.type)||s.type==="ss"&&!["aes-128-gcm","aes-192-gcm","aes-256-gcm","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","rc4-md5","chacha20-ietf","xchacha20","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(s.cipher)||s.type==="snell"&&s.version>=4||s.type==="vless"&&s["reality-opts"]&&!["xtls-rprx-vision"].includes(s.flow)?!1:s["underlying-proxy"]||s["dialer-proxy"]?(R.error(`Stash \u6682\u4E0D\u652F\u6301\u524D\u7F6E\u4EE3\u7406\u5B57\u6BB5. \u5DF2\u8FC7\u6EE4\u8282\u70B9 ${s.name}. \u8BF7\u4F7F\u7528 \u4EE3\u7406\u7684\u8F6C\u53D1\u94FE https://stash.wiki/proxy-protocols/proxy-groups#relay`),!1):["anytls"].includes(s.type)&&!n["include-unsupported-proxy"]||["anytls"].includes(s.type)&&s.network&&(!["tcp"].includes(s.network)||["tcp"].includes(s.network)&&s["reality-opts"])||["xhttp"].includes(s.network)||s.encryption&&s.encryption!=="none"&&["vless"].includes(s.type)?!1:!(["ws"].includes(s.network)&&s["ws-opts"]?.["v2ray-http-upgrade"])).map(s=>{if(s.type==="vmess"?(oe(s,"aead")&&(s.aead&&(s.alterId=0),delete s.aead),oe(s,"sni")&&(s.servername=s.sni,delete s.sni),oe(s,"cipher")&&!["auto","aes-128-gcm","chacha20-poly1305","none"].includes(s.cipher)&&(s.cipher="auto")):s.type==="tuic"?(oe(s,"alpn")?s.alpn=Array.isArray(s.alpn)?s.alpn:[s.alpn]:s.alpn=["h3"],oe(s,"tfo")&&!oe(s,"fast-open")&&(s["fast-open"]=s.tfo,delete s.tfo),(!s.token||s.token.length===0)&&!oe(s,"version")&&(s.version=5)):s.type==="hysteria"?(oe(s,"auth_str")&&!oe(s,"auth-str")&&(s["auth-str"]=s.auth_str),oe(s,"alpn")&&(s.alpn=Array.isArray(s.alpn)?s.alpn:[s.alpn]),oe(s,"tfo")&&!oe(s,"fast-open")&&(s["fast-open"]=s.tfo,delete s.tfo),oe(s,"down")&&!oe(s,"down-speed")&&(s["down-speed"]=s.down,delete s.down),oe(s,"up")&&!oe(s,"up-speed")&&(s["up-speed"]=s.up,delete s.up),oe(s,"down-speed")&&(s["down-speed"]=`${s["down-speed"]}`.match(/\d+/)?.[0]||0),oe(s,"up-speed")&&(s["up-speed"]=`${s["up-speed"]}`.match(/\d+/)?.[0]||0)):s.type==="hysteria2"?(oe(s,"password")&&!oe(s,"auth")&&(s.auth=s.password,delete s.password),oe(s,"tfo")&&!oe(s,"fast-open")&&(s["fast-open"]=s.tfo,delete s.tfo),oe(s,"down")&&!oe(s,"down-speed")&&(s["down-speed"]=s.down,delete s.down),oe(s,"up")&&!oe(s,"up-speed")&&(s["up-speed"]=s.up,delete s.up),oe(s,"down-speed")&&(s["down-speed"]=`${s["down-speed"]}`.match(/\d+/)?.[0]||0),oe(s,"up-speed")&&(s["up-speed"]=`${s["up-speed"]}`.match(/\d+/)?.[0]||0)):s.type==="wireguard"?(s.keepalive=s.keepalive??s["persistent-keepalive"],s["persistent-keepalive"]=s.keepalive,s["preshared-key"]=s["preshared-key"]??s["pre-shared-key"],s["pre-shared-key"]=s["preshared-key"]):s.type==="snell"&&s.version<3?delete s.udp:s.type==="vless"&&oe(s,"sni")&&(s.servername=s.sni,delete s.sni),["vmess","vless"].includes(s.type)&&s.network==="http"){let p=s["http-opts"]?.path;oe(s,"http-opts.path")&&!Array.isArray(p)&&(s["http-opts"].path=[p]);let g=s["http-opts"]?.headers?.Host;oe(s,"http-opts.headers.Host")&&!Array.isArray(g)&&(s["http-opts"].headers.Host=[g])}if(["vmess","vless"].includes(s.type)&&s.network==="h2"){let p=s["h2-opts"]?.path;oe(s,"h2-opts.path")&&Array.isArray(p)&&(s["h2-opts"].path=p[0]);let g=s["h2-opts"]?.headers?.host;oe(s,"h2-opts.headers.Host")&&!Array.isArray(g)&&(s["h2-opts"].headers.host=[g])}if(["ws"].includes(s.network)){let p=s[`${s.network}-opts`]?.path;if(p){let g=/^(.*?)(?:\?ed=(\d+))?$/,[y,E="",m=""]=g.exec(p);s[`${s.network}-opts`].path=E,m!==""&&(s["ws-opts"]["early-data-header-name"]="Sec-WebSocket-Protocol",s["ws-opts"]["max-early-data"]=parseInt(m,10))}else s[`${s.network}-opts`]=s[`${s.network}-opts`]||{},s[`${s.network}-opts`].path="/"}if(s["plugin-opts"]?.tls&&oe(s,"skip-cert-verify")&&(s["plugin-opts"]["skip-cert-verify"]=s["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2","juicity","anytls","naive"].includes(s.type)&&delete s.tls,s["tls-fingerprint"]&&(s["server-cert-fingerprint"]=s["tls-fingerprint"]),delete s["tls-fingerprint"],oe(s,"tls")&&typeof s.tls!="boolean"&&delete s.tls,s["test-url"]&&(s["benchmark-url"]=s["test-url"],delete s["test-url"]),s["test-timeout"]&&(s["benchmark-timeout"]=s["test-timeout"],delete s["test-timeout"]),delete s.subName,delete s.collectionName,delete s.id,delete s.resolved,delete s["no-resolve"],e!=="internal")for(let p in s)(s[p]==null||/^_/i.test(p))&&delete s[p];return["grpc"].includes(s.network)&&s[`${s.network}-opts`]&&(delete s[`${s.network}-opts`]["_grpc-type"],delete s[`${s.network}-opts`]["_grpc-authority"]),s});return e==="internal"?u:`proxies:
`+u.map(s=>"  - "+JSON.stringify(s)+`
`).join("")}}}var wC="Loon",wu={dual:"dual",ipv4:"v4-only",ipv6:"v6-only","ipv4-prefer":"prefer-v4","ipv6-prefer":"prefer-v6"};function Hm(){return{produce:(t,e,n={})=>{if(["ws"].includes(t.network)&&t["ws-opts"]?.["v2ray-http-upgrade"])throw new Error(`Platform ${wC} does not support network ${t.network} with http upgrade`);switch(t.type){case"ss":return Ck(t);case"ssr":return Dk(t);case"trojan":return Sk(t);case"vmess":return Fk(t,n["include-unsupported-proxy"]);case"vless":return Ik(t,n["include-unsupported-proxy"]);case"http":return Bk(t);case"socks5":return $k(t);case"wireguard":return Rk(t);case"hysteria2":return Pk(t)}throw new Error(`Platform ${wC} does not support proxy type: ${t.type}`)}}}function Ck(t){let e=new pt(t);if(!["rc4","rc4-md5","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","salsa20","chacha20","chacha20-ietf","aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(t.cipher))throw new Error(`cipher ${t.cipher} is not supported`);if(e.append(`${t.name}=shadowsocks,${t.server},${t.port},${t.cipher},"${t.password}"`),oe(t,"plugin")){if(t.plugin==="obfs"){if(t["plugin-opts"]?.mode&&t.cipher.startsWith("2022-"))throw new Error(`${t.cipher} ${t.plugin} is not supported`);e.append(`,obfs-name=${t["plugin-opts"].mode}`),e.appendIfPresent(`,obfs-host=${t["plugin-opts"].host}`,"plugin-opts.host"),e.appendIfPresent(`,obfs-uri=${t["plugin-opts"].path}`,"plugin-opts.path")}else if(!["shadow-tls"].includes(t.plugin))throw new Error(`plugin ${t.plugin} is not supported`)}if(oe(t,"shadow-tls-password"))e.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),e.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),e.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni"),e.appendIfPresent(`,udp-port=${t["udp-port"]}`,"udp-port");else if(["shadow-tls"].includes(t.plugin)&&t["plugin-opts"]){let u=t["plugin-opts"].password,s=t["plugin-opts"].host,p=t["plugin-opts"].version;if(u){if(e.append(`,shadow-tls-password=${u}`),s&&e.append(`,shadow-tls-sni=${s}`),p){if(p<2)throw new Error(`shadow-tls version ${p} is not supported`);e.append(`,shadow-tls-version=${p}`)}e.appendIfPresent(`,udp-port=${t["udp-port"]}`,"udp-port")}}e.appendIfPresent(`,fast-open=${t.tfo}`,"tfo"),t["block-quic"]==="on"?e.append(",block-quic=true"):t["block-quic"]==="off"&&e.append(",block-quic=false"),t.udp&&e.append(",udp=true");let n=wu[t["ip-version"]]||t["ip-version"];return e.appendIfPresent(`,ip-mode=${n}`,"ip-version"),e.toString()}function Dk(t){let e=new pt(t);if(e.append(`${t.name}=shadowsocksr,${t.server},${t.port},${t.cipher},"${t.password}"`),e.append(`,protocol=${t.protocol}`),e.appendIfPresent(`,protocol-param=${t["protocol-param"]}`,"protocol-param"),e.appendIfPresent(`,obfs=${t.obfs}`,"obfs"),e.appendIfPresent(`,obfs-param=${t["obfs-param"]}`,"obfs-param"),oe(t,"shadow-tls-password"))e.append(`,shadow-tls-password=${t["shadow-tls-password"]}`),e.appendIfPresent(`,shadow-tls-version=${t["shadow-tls-version"]}`,"shadow-tls-version"),e.appendIfPresent(`,shadow-tls-sni=${t["shadow-tls-sni"]}`,"shadow-tls-sni"),e.appendIfPresent(`,udp-port=${t["udp-port"]}`,"udp-port");else if(["shadow-tls"].includes(t.plugin)&&t["plugin-opts"]){let u=t["plugin-opts"].password,s=t["plugin-opts"].host,p=t["plugin-opts"].version;if(u){if(e.append(`,shadow-tls-password=${u}`),s&&e.append(`,shadow-tls-sni=${s}`),p){if(p<2)throw new Error(`shadow-tls version ${p} is not supported`);e.append(`,shadow-tls-version=${p}`)}e.appendIfPresent(`,udp-port=${t["udp-port"]}`,"udp-port")}}e.appendIfPresent(`,fast-open=${t.tfo}`,"tfo"),t["block-quic"]==="on"?e.append(",block-quic=true"):t["block-quic"]==="off"&&e.append(",block-quic=false"),t.udp&&e.append(",udp=true");let n=wu[t["ip-version"]]||t["ip-version"];return e.appendIfPresent(`,ip-mode=${n}`,"ip-version"),e.toString()}function Sk(t){let e=new pt(t);if(e.append(`${t.name}=trojan,${t.server},${t.port},"${t.password}"`),t.network==="tcp"&&delete t.network,oe(t,"network"))if(t.network==="ws")e.append(",transport=ws"),e.appendIfPresent(`,path=${t["ws-opts"]?.path}`,"ws-opts.path"),e.appendIfPresent(`,host=${t["ws-opts"]?.headers?.Host}`,"ws-opts.headers.Host");else throw new Error(`network ${t.network} is unsupported`);e.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),e.appendIfPresent(`,tls-name=${t.sni}`,"sni"),e.appendIfPresent(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),e.appendIfPresent(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),e.appendIfPresent(`,fast-open=${t.tfo}`,"tfo"),t["block-quic"]==="on"?e.append(",block-quic=true"):t["block-quic"]==="off"&&e.append(",block-quic=false"),t.udp&&e.append(",udp=true");let n=wu[t["ip-version"]]||t["ip-version"];return e.appendIfPresent(`,ip-mode=${n}`,"ip-version"),e.toString()}function Fk(t){let e=!!t["reality-opts"],n=new pt(t);if(n.append(`${t.name}=vmess,${t.server},${t.port},${t.cipher},"${t.uuid}"`),t.network==="tcp"&&delete t.network,oe(t,"network"))if(t.network==="ws")n.append(",transport=ws"),n.appendIfPresent(`,path=${t["ws-opts"]?.path}`,"ws-opts.path"),n.appendIfPresent(`,host=${t["ws-opts"]?.headers?.Host}`,"ws-opts.headers.Host");else if(t.network==="http"){n.append(",transport=http");let s=t["http-opts"]?.path,p=t["http-opts"]?.headers?.Host;n.appendIfPresent(`,path=${Array.isArray(s)?s[0]:s}`,"http-opts.path"),n.appendIfPresent(`,host=${Array.isArray(p)?p[0]:p}`,"http-opts.headers.Host")}else throw new Error(`network ${t.network} is unsupported`);else n.append(",transport=tcp");n.appendIfPresent(`,over-tls=${t.tls}`,"tls"),n.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),e?(n.appendIfPresent(`,sni=${t.sni}`,"sni"),n.appendIfPresent(`,public-key="${t["reality-opts"]["public-key"]}"`,"reality-opts.public-key"),n.appendIfPresent(`,short-id=${t["reality-opts"]["short-id"]}`,"reality-opts.short-id")):(n.appendIfPresent(`,tls-name=${t.sni}`,"sni"),n.appendIfPresent(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),n.appendIfPresent(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256")),oe(t,"aead")?n.append(`,alterId=${t.aead?0:1}`):n.append(`,alterId=${t.alterId}`),n.appendIfPresent(`,fast-open=${t.tfo}`,"tfo"),t["block-quic"]==="on"?n.append(",block-quic=true"):t["block-quic"]==="off"&&n.append(",block-quic=false"),t.udp&&n.append(",udp=true");let u=wu[t["ip-version"]]||t["ip-version"];return n.appendIfPresent(`,ip-mode=${u}`,"ip-version"),n.toString()}function Ik(t){if(t.encryption&&t.encryption!=="none")throw new Error("VLESS encryption is not supported");let e=!1,n=!!t["reality-opts"];if(typeof t.flow<"u")if(["xtls-rprx-vision"].includes(t.flow))e=!0;else throw new Error(`VLESS flow(${t.flow}) is not supported`);let u=new pt(t);if(u.append(`${t.name}=vless,${t.server},${t.port},"${t.uuid}"`),t.network==="tcp"&&delete t.network,oe(t,"network"))if(t.network==="ws")u.append(",transport=ws"),u.appendIfPresent(`,path=${t["ws-opts"]?.path}`,"ws-opts.path"),u.appendIfPresent(`,host=${t["ws-opts"]?.headers?.Host}`,"ws-opts.headers.Host");else if(t.network==="http"){u.append(",transport=http");let p=t["http-opts"]?.path,g=t["http-opts"]?.headers?.Host;u.appendIfPresent(`,path=${Array.isArray(p)?p[0]:p}`,"http-opts.path"),u.appendIfPresent(`,host=${Array.isArray(g)?g[0]:g}`,"http-opts.headers.Host")}else throw new Error(`network ${t.network} is unsupported`);else u.append(",transport=tcp");u.appendIfPresent(`,over-tls=${t.tls}`,"tls"),u.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),e&&u.appendIfPresent(`,flow=${t.flow}`,"flow"),n?(u.appendIfPresent(`,sni=${t.sni}`,"sni"),u.appendIfPresent(`,public-key="${t["reality-opts"]["public-key"]}"`,"reality-opts.public-key"),u.appendIfPresent(`,short-id=${t["reality-opts"]["short-id"]}`,"reality-opts.short-id")):(u.appendIfPresent(`,tls-name=${t.sni}`,"sni"),u.appendIfPresent(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),u.appendIfPresent(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256")),u.appendIfPresent(`,fast-open=${t.tfo}`,"tfo"),t["block-quic"]==="on"?u.append(",block-quic=true"):t["block-quic"]==="off"&&u.append(",block-quic=false"),t.udp&&u.append(",udp=true");let s=wu[t["ip-version"]]||t["ip-version"];return u.appendIfPresent(`,ip-mode=${s}`,"ip-version"),u.toString()}function Bk(t){let e=new pt(t),n=t.tls?"https":"http";e.append(`${t.name}=${n},${t.server},${t.port}`),e.appendIfPresent(`,${t.username}`,"username"),e.appendIfPresent(`,"${t.password}"`,"password"),e.appendIfPresent(`,sni=${t.sni}`,"sni"),e.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),e.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),t["block-quic"]==="on"?e.append(",block-quic=true"):t["block-quic"]==="off"&&e.append(",block-quic=false");let u=wu[t["ip-version"]]||t["ip-version"];return e.appendIfPresent(`,ip-mode=${u}`,"ip-version"),e.toString()}function $k(t){let e=new pt(t);e.append(`${t.name}=socks5,${t.server},${t.port}`),e.appendIfPresent(`,${t.username}`,"username"),e.appendIfPresent(`,"${t.password}"`,"password"),e.appendIfPresent(`,over-tls=${t.tls}`,"tls"),e.appendIfPresent(`,sni=${t.sni}`,"sni"),e.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),e.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),t["block-quic"]==="on"?e.append(",block-quic=true"):t["block-quic"]==="off"&&e.append(",block-quic=false"),t.udp&&e.append(",udp=true");let n=wu[t["ip-version"]]||t["ip-version"];return e.appendIfPresent(`,ip-mode=${n}`,"ip-version"),e.toString()}function Rk(t){Array.isArray(t.peers)&&t.peers.length>0&&(t.server=t.peers[0].server,t.port=t.peers[0].port,t.ip=t.peers[0].ip,t.ipv6=t.peers[0].ipv6,t["public-key"]=t.peers[0]["public-key"],t["preshared-key"]=t.peers[0]["pre-shared-key"],t["allowed-ips"]=t.peers[0]["allowed-ips"],t.reserved=t.peers[0].reserved);let e=new pt(t);if(e.append(`${t.name}=wireguard`),e.appendIfPresent(`,interface-ip=${t.ip}`,"ip"),e.appendIfPresent(`,interface-ipv6=${t.ipv6}`,"ipv6"),e.appendIfPresent(`,private-key="${t["private-key"]}"`,"private-key"),e.appendIfPresent(`,mtu=${t.mtu}`,"mtu"),t.dns&&Array.isArray(t.dns)){t.dnsv6=t.dns.find(y=>Vr(y));let g=t.dns.find(y=>Xr(y));g||(g=t.dns.find(y=>!Xr(y)&&!Vr(y))),t.dns=g}e.appendIfPresent(`,dns=${t.dns}`,"dns"),e.appendIfPresent(`,dnsv6=${t.dnsv6}`,"dnsv6"),e.appendIfPresent(`,keepalive=${t["persistent-keepalive"]}`,"persistent-keepalive"),e.appendIfPresent(`,keepalive=${t.keepalive}`,"keepalive");let n=Array.isArray(t["allowed-ips"])?t["allowed-ips"].join(","):t["allowed-ips"],u=Array.isArray(t.reserved)?t.reserved.join(","):t.reserved;u&&(u=`,reserved=[${u}]`);let s=t["preshared-key"]??t["pre-shared-key"];s&&(s=`,preshared-key="${s}"`),e.append(`,peers=[{public-key="${t["public-key"]}",allowed-ips="${n??"0.0.0.0/0,::/0"}",endpoint=${t.server}:${t.port}${u??""}${s??""}}]`);let p=wu[t["ip-version"]]||t["ip-version"];return e.appendIfPresent(`,ip-mode=${p}`,"ip-version"),t["block-quic"]==="on"?e.append(",block-quic=true"):t["block-quic"]==="off"&&e.append(",block-quic=false"),e.toString()}function Pk(t){if(t["obfs-password"]&&t.obfs!="salamander")throw new Error("only salamander obfs is supported");let e=new pt(t);e.append(`${t.name}=Hysteria2,${t.server},${t.port}`),e.appendIfPresent(`,"${t.password}"`,"password"),e.appendIfPresent(`,tls-name=${t.sni}`,"sni"),e.appendIfPresent(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),e.appendIfPresent(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),e.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),t["obfs-password"]&&t.obfs=="salamander"&&e.append(`,salamander-password=${t["obfs-password"]}`),e.appendIfPresent(`,fast-open=${t.tfo}`,"tfo"),t["block-quic"]==="on"?e.append(",block-quic=true"):t["block-quic"]==="off"&&e.append(",block-quic=false"),t.udp&&e.append(",udp=true"),e.appendIfPresent(`,download-bandwidth=${`${t.down}`.match(/\d+/)?.[0]||0}`,"down"),e.appendIfPresent(`,ecn=${t.ecn}`,"ecn");let n=wu[t["ip-version"]]||t["ip-version"];return e.appendIfPresent(`,ip-mode=${n}`,"ip-version"),e.toString()}var NX=qr(sS());function aS(t){let e="none",n=t["reality-opts"],u="",s="",p="";if(n){e="reality";let at=t["reality-opts"]?.["public-key"];at&&(s=`&pbk=${encodeURIComponent(at)}`);let q=t["reality-opts"]?.["short-id"];q&&(u=`&sid=${encodeURIComponent(q)}`);let U=t["reality-opts"]?.["_spider-x"];U&&(p=`&spx=${encodeURIComponent(U)}`)}else t.tls&&(e="tls");let g="";t.alpn&&(g=`&alpn=${encodeURIComponent(Array.isArray(t.alpn)?t.alpn:t.alpn.join(","))}`);let y="";t["skip-cert-verify"]&&(y="&allowInsecure=1");let E="";t.sni&&(E=`&sni=${encodeURIComponent(t.sni)}`);let m="";t["client-fingerprint"]&&(m=`&fp=${encodeURIComponent(t["client-fingerprint"])}`);let C="";t.flow&&(C=`&flow=${encodeURIComponent(t.flow)}`);let a="";t._extra&&(a=`&extra=${encodeURIComponent(t._extra)}`);let H="";t._mode&&(H=`&mode=${encodeURIComponent(t._mode)}`);let X="";t._pqv&&(X=`&pqv=${encodeURIComponent(t._pqv)}`);let w="";t.encryption&&(w=`&encryption=${encodeURIComponent(t.encryption)}`);let j=t.network;t.network==="ws"&&t["ws-opts"]?.["v2ray-http-upgrade"]&&(j="httpupgrade");let tt=`&type=${encodeURIComponent(j)}`;if(["grpc"].includes(t.network)){tt+=`&mode=${encodeURIComponent(t[`${t.network}-opts`]?.["_grpc-type"]||"gun")}`;let at=t[`${t.network}-opts`]?.["_grpc-authority"];at&&(tt+=`&authority=${encodeURIComponent(at)}`)}let J=t[`${t.network}-opts`]?.[`${t.network}-service-name`],N=t[`${t.network}-opts`]?.path,Q=t[`${t.network}-opts`]?.headers?.Host;return N&&(tt+=`&path=${encodeURIComponent(Array.isArray(N)?N[0]:N)}`),Q&&(tt+=`&host=${encodeURIComponent(Array.isArray(Q)?Q[0]:Q)}`),J&&(tt+=`&serviceName=${encodeURIComponent(J)}`),t.network==="kcp"&&(t.seed&&(tt+=`&seed=${encodeURIComponent(t.seed)}`),t.headerType&&(tt+=`&headerType=${encodeURIComponent(t.headerType)}`)),`vless://${t.uuid}@${t.server}:${t.port}?security=${encodeURIComponent(e)}${tt}${g}${y}${E}${m}${C}${u}${p}${s}${H}${a}${X}${w}#${encodeURIComponent(t.name)}`}function Xc(){return{type:"SINGLE",produce:t=>{let e="";delete t.subName,delete t.collectionName,delete t.id,delete t.resolved,delete t["no-resolve"];for(let n in t)t[n]==null&&delete t[n];switch(["trojan","tuic","hysteria","hysteria2","juicity","anytls"].includes(t.type)&&delete t.tls,!["vmess"].includes(t.type)&&t.server&&Vr(t.server)&&(t.server=`[${t.server}]`),t.type){case"socks5":e=`socks://${encodeURIComponent(dt.encode(`${t.username??""}:${t.password??""}`))}@${t.server}:${t.port}#${t.name}`;break;case"ss":let n=`${t.cipher}:${t.password}`;e=`ss://${t.cipher?.startsWith("2022-blake3-")?`${encodeURIComponent(t.cipher)}:${encodeURIComponent(t.password)}`:dt.encode(n)}@${t.server}:${t.port}${t.plugin?"/":""}`;let u="";if(t.plugin){u+="&plugin=";let pe=t["plugin-opts"];switch(t.plugin){case"obfs":u+=encodeURIComponent(`simple-obfs;obfs=${pe.mode}${pe.host?";obfs-host="+pe.host:""}`);break;case"v2ray-plugin":u+=encodeURIComponent(`v2ray-plugin;obfs=${pe.mode}${pe.host?";obfs-host"+pe.host:""}${pe.tls?";tls":""}`);break;case"shadow-tls":u+=encodeURIComponent(`shadow-tls;host=${pe.host};password=${pe.password};version=${pe.version}`);break;default:throw new Error(`Unsupported plugin option: ${t.plugin}`)}}t["udp-over-tcp"]&&(u+="&uot=1"),t.tfo&&(u+="&tfo=1");let s="";if(t.network){let pe=t.network;if(t.network==="ws"&&t["ws-opts"]?.["v2ray-http-upgrade"]&&(pe="httpupgrade"),s=`&type=${encodeURIComponent(pe)}`,["grpc"].includes(t.network)){let Ve=t[`${t.network}-opts`]?.[`${t.network}-service-name`],We=t[`${t.network}-opts`]?.["_grpc-authority"];Ve&&(s+=`&serviceName=${encodeURIComponent(Ve)}`),We&&(s+=`&authority=${encodeURIComponent(We)}`),s+=`&mode=${encodeURIComponent(t[`${t.network}-opts`]?.["_grpc-type"]||"gun")}`}let Ce=t[`${t.network}-opts`]?.path,Ie=t[`${t.network}-opts`]?.headers?.Host;Ce&&(s+=`&path=${encodeURIComponent(Array.isArray(Ce)?Ce[0]:Ce)}`),Ie&&(s+=`&host=${encodeURIComponent(Array.isArray(Ie)?Ie[0]:Ie)}`)}let p="";t["client-fingerprint"]&&(p=`&fp=${encodeURIComponent(t["client-fingerprint"])}`);let g="";t.alpn&&(g=`&alpn=${encodeURIComponent(Array.isArray(t.alpn)?t.alpn:t.alpn.join(","))}`);let y=t["reality-opts"],E="",m="",C="",a=t.tls?"&security=tls":"",H="",X="";if(y){a="&security=reality";let pe=t["reality-opts"]?.["public-key"];pe&&(m=`&pbk=${encodeURIComponent(pe)}`);let Ce=t["reality-opts"]?.["short-id"];Ce&&(E=`&sid=${encodeURIComponent(Ce)}`);let Ie=t["reality-opts"]?.["_spider-x"];Ie&&(C=`&spx=${encodeURIComponent(Ie)}`),t._extra&&(X=`&extra=${encodeURIComponent(t._extra)}`),t._mode&&(H=`&mode=${encodeURIComponent(t._mode)}`)}t.tls&&(u+=`&sni=${encodeURIComponent(t.sni||t.server)}${t["skip-cert-verify"]?"&allowInsecure=1":""}`),u+=`${s}${g}${p}${a}${E}${m}${C}${H}${X}#${encodeURIComponent(t.name)}`,e+=u.replace(/^&/,"?");break;case"ssr":e=`${t.server}:${t.port}:${t.protocol}:${t.cipher}:${t.obfs}:${dt.encode(t.password)}/`,e+=`?remarks=${dt.encode(t.name)}${t["obfs-param"]?"&obfsparam="+dt.encode(t["obfs-param"]):""}${t["protocol-param"]?"&protocolparam="+dt.encode(t["protocol-param"]):""}`,e="ssr://"+dt.encode(e);break;case"vmess":let w="",j=t.network||"tcp";if(t.network==="http"?(j="tcp",w="http"):t.network==="ws"&&t["ws-opts"]?.["v2ray-http-upgrade"]&&(j="httpupgrade"),e={v:"2",ps:t.name,add:t.server,port:`${t.port}`,id:t.uuid,aid:`${t.alterId||0}`,scy:t.cipher,net:j,type:w,tls:t.tls?"tls":"",alpn:Array.isArray(t.alpn)?t.alpn.join(","):t.alpn,fp:t["client-fingerprint"]},t.tls&&t.sni&&(e.sni=t.sni),t.network){let pe=t[`${t.network}-opts`]?.path,Ce=t[`${t.network}-opts`]?.headers?.Host;["grpc"].includes(t.network)?(e.path=t[`${t.network}-opts`]?.["grpc-service-name"],e.type=t[`${t.network}-opts`]?.["_grpc-type"]||"gun",e.host=t[`${t.network}-opts`]?.["_grpc-authority"]):["kcp","quic"].includes(t.network)?(e.type=t[`${t.network}-opts`]?.[`_${t.network}-type`]||"none",e.host=t[`${t.network}-opts`]?.[`_${t.network}-host`],e.path=t[`${t.network}-opts`]?.[`_${t.network}-path`]):(pe&&(e.path=Array.isArray(pe)?pe[0]:pe),Ce&&(e.host=Array.isArray(Ce)?Ce[0]:Ce))}e="vmess://"+dt.encode(JSON.stringify(e));break;case"vless":e=aS(t);break;case"trojan":let tt="";if(t.network){let pe=t.network;if(t.network==="ws"&&t["ws-opts"]?.["v2ray-http-upgrade"]&&(pe="httpupgrade"),tt=`&type=${encodeURIComponent(pe)}`,["grpc"].includes(t.network)){let Ve=t[`${t.network}-opts`]?.[`${t.network}-service-name`],We=t[`${t.network}-opts`]?.["_grpc-authority"];Ve&&(tt+=`&serviceName=${encodeURIComponent(Ve)}`),We&&(tt+=`&authority=${encodeURIComponent(We)}`),tt+=`&mode=${encodeURIComponent(t[`${t.network}-opts`]?.["_grpc-type"]||"gun")}`}let Ce=t[`${t.network}-opts`]?.path,Ie=t[`${t.network}-opts`]?.headers?.Host;Ce&&(tt+=`&path=${encodeURIComponent(Array.isArray(Ce)?Ce[0]:Ce)}`),Ie&&(tt+=`&host=${encodeURIComponent(Array.isArray(Ie)?Ie[0]:Ie)}`)}let J="";t["client-fingerprint"]&&(J=`&fp=${encodeURIComponent(t["client-fingerprint"])}`);let N="";t.alpn&&(N=`&alpn=${encodeURIComponent(Array.isArray(t.alpn)?t.alpn:t.alpn.join(","))}`);let Q=t["reality-opts"],at="",q="",U="",V="",lt="",It="";if(Q){V="&security=reality";let pe=t["reality-opts"]?.["public-key"];pe&&(q=`&pbk=${encodeURIComponent(pe)}`);let Ce=t["reality-opts"]?.["short-id"];Ce&&(at=`&sid=${encodeURIComponent(Ce)}`);let Ie=t["reality-opts"]?.["_spider-x"];Ie&&(U=`&spx=${encodeURIComponent(Ie)}`),t._extra&&(It=`&extra=${encodeURIComponent(t._extra)}`),t._mode&&(lt=`&mode=${encodeURIComponent(t._mode)}`)}e=`trojan://${t.password}@${t.server}:${t.port}?sni=${encodeURIComponent(t.sni||t.server)}${t["skip-cert-verify"]?"&allowInsecure=1":""}${tt}${N}${J}${V}${at}${q}${U}${lt}${It}#${encodeURIComponent(t.name)}`;break;case"hysteria2":let Ot=[];t["hop-interval"]&&Ot.push(`hop-interval=${t["hop-interval"]}`),t.keepalive&&Ot.push(`keepalive=${t.keepalive}`),t["skip-cert-verify"]&&Ot.push("insecure=1"),t.obfs&&(Ot.push(`obfs=${encodeURIComponent(t.obfs)}`),t["obfs-password"]&&Ot.push(`obfs-password=${encodeURIComponent(t["obfs-password"])}`)),t.sni&&Ot.push(`sni=${encodeURIComponent(t.sni)}`),t.ports&&Ot.push(`mport=${t.ports}`),t["tls-fingerprint"]&&Ot.push(`pinSHA256=${encodeURIComponent(t["tls-fingerprint"])}`),t.tfo&&Ot.push("fastopen=1"),e=`hysteria2://${encodeURIComponent(t.password)}@${t.server}:${t.port}?${Ot.join("&")}#${encodeURIComponent(t.name)}`;break;case"hysteria":let yt=[];Object.keys(t).forEach(pe=>{if(!["name","type","server","port"].includes(pe)){let Ce=pe.replace(/-/,"_");["alpn"].includes(pe)?t[pe]&&yt.push(`${Ce}=${encodeURIComponent(Array.isArray(t[pe])?t[pe][0]:t[pe])}`):["skip-cert-verify"].includes(pe)?t[pe]&&yt.push("insecure=1"):["tfo","fast-open"].includes(pe)?t[pe]&&!yt.includes("fastopen=1")&&yt.push("fastopen=1"):["ports"].includes(pe)?yt.push(`mport=${t[pe]}`):["auth-str"].includes(pe)?yt.push(`auth=${t[pe]}`):["up"].includes(pe)?yt.push(`upmbps=${t[pe]}`):["down"].includes(pe)?yt.push(`downmbps=${t[pe]}`):["_obfs"].includes(pe)?yt.push(`obfs=${t[pe]}`):["obfs"].includes(pe)?yt.push(`obfsParam=${t[pe]}`):["sni"].includes(pe)?yt.push(`peer=${t[pe]}`):t[pe]&&!/^_/i.test(pe)&&yt.push(`${Ce}=${encodeURIComponent(t[pe])}`)}}),e=`hysteria://${t.server}:${t.port}?${yt.join("&")}#${encodeURIComponent(t.name)}`;break;case"tuic":if(!t.token||t.token.length===0){let pe=[];Object.keys(t).forEach(Ce=>{if(!["name","type","uuid","password","server","port","tls"].includes(Ce)){let Ie=Ce.replace(/-/,"_");["alpn"].includes(Ce)?t[Ce]&&pe.push(`${Ie}=${encodeURIComponent(Array.isArray(t[Ce])?t[Ce][0]:t[Ce])}`):["skip-cert-verify"].includes(Ce)?t[Ce]&&pe.push("allow_insecure=1"):["tfo","fast-open"].includes(Ce)?t[Ce]&&!pe.includes("fast_open=1")&&pe.push("fast_open=1"):["disable-sni","reduce-rtt"].includes(Ce)&&t[Ce]?pe.push(`${Ie.replace(/-/g,"_")}=1`):["congestion-controller"].includes(Ce)?pe.push(`congestion_control=${t[Ce]}`):t[Ce]&&!/^_/i.test(Ce)&&pe.push(`${Ie.replace(/-/g,"_")}=${encodeURIComponent(t[Ce])}`)}}),e=`tuic://${encodeURIComponent(t.uuid)}:${encodeURIComponent(t.password)}@${t.server}:${t.port}?${pe.join("&")}#${encodeURIComponent(t.name)}`}break;case"anytls":e=aS({...t,uuid:t.password,network:t.network||"tcp"}).replace("vless","anytls");let Et=[];Object.keys(t).forEach(pe=>{if(!["name","type","password","server","port","tls"].includes(pe)){let Ce=pe.replace(/-/,"_");["alpn"].includes(pe)?t[pe]&&Et.push(`${Ce}=${encodeURIComponent(Array.isArray(t[pe])?t[pe][0]:t[pe])}`):["skip-cert-verify"].includes(pe)?t[pe]&&Et.push("insecure=1"):["udp"].includes(pe)?t[pe]&&Et.push("udp=1"):t[pe]&&!/^_|client-fingerprint/i.test(pe)&&["number","string","boolean"].includes(typeof t[pe])&&Et.push(`${Ce.replace(/-/g,"_")}=${encodeURIComponent(t[pe])}`)}});let vt=e.split("?"),Yt=vt[0],Xt={};vt.length>1&&vt[1].split("#")[0].split("&").forEach(pe=>{let[Ce,Ie]=pe.split("=");Ce&&(Xt[Ce]=Ie)}),Et.forEach(pe=>{let[Ce,Ie]=pe.split("=");Ce&&(Xt[Ce]=Ie)});let re=Object.keys(Xt).map(pe=>`${pe}=${Xt[pe]}`).join("&"),ae=e.match(/#(.*)$/),He=ae?`#${ae[1]}`:"";e=`${Yt}?${re}${He}`;break;case"wireguard":let de=[];Object.keys(t).forEach(pe=>{["name","type","server","port","ip","ipv6","private-key"].includes(pe)||(["public-key"].includes(pe)?de.push(`publickey=${t[pe]}`):["udp"].includes(pe)?t[pe]&&de.push(`${pe}=1`):t[pe]&&!/^_/i.test(pe)&&de.push(`${pe}=${encodeURIComponent(t[pe])}`))}),t.ip&&t.ipv6?de.push(`address=${t.ip}/32,${t.ipv6}/128`):t.ip?de.push(`address=${t.ip}/32`):t.ipv6&&de.push(`address=${t.ipv6}/128`),e=`wireguard://${encodeURIComponent(t["private-key"])}@${t.server}:${t.port}/?${de.join("&")}#${encodeURIComponent(t.name)}`;break}return e}}}var WM=Xc();function Nh(){return{type:"ALL",produce:t=>{let e=[];return t.map(n=>{try{e.push(WM.produce(n))}catch(u){R.error(`Cannot produce proxy: ${JSON.stringify(n,null,2)}
Reason: ${u}`)}}),dt.encode(e.join(`
`))}}}var O2="QX";function kh(){let t=(e,n,u={})=>{if(["ws"].includes(e.network)&&e["ws-opts"]?.["v2ray-http-upgrade"])throw new Error(`Platform ${O2} does not support network ${e.network} with http upgrade`);switch(e.type){case"ss":return XM(e);case"ssr":return JM(e);case"trojan":return ZM(e);case"vmess":return QM(e);case"http":return tq(e);case"socks5":return rq(e);case"vless":return eq(e)}throw new Error(`Platform ${O2} does not support proxy type: ${e.type}`)};return{produce:(e,n,u={})=>{let s=t(e,n,u);if(e.flow&&e.flow!=="xtls-rprx-vision")throw new Error(`Platform ${O2} does not support flow ${e.flow}`);return e["reality-opts"]&&(e["reality-opts"]["public-key"]&&(s=`${s},reality-base64-pubkey=${e["reality-opts"]["public-key"]}`),e["reality-opts"]["short-id"]&&(s=`${s},reality-hex-shortid=${e["reality-opts"]["short-id"]}`)),s}}}function XM(t){let e=new pt(t),n=e.append.bind(e),u=e.appendIfPresent.bind(e);if(t.cipher||(t.cipher="none"),!["none","rc4-md5","rc4-md5-6","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","cast5-cfb","des-cfb","rc2-cfb","salsa20","chacha20","chacha20-ietf","aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(t.cipher))throw new Error(`cipher ${t.cipher} is not supported`);if(n(`shadowsocks=${t.server}:${t.port}`),n(`,method=${t.cipher}`),n(`,password=${t.password}`),is(t)&&(t.tls=!0),oe(t,"plugin")){if(t.plugin==="obfs"){let s=t["plugin-opts"];n(`,obfs=${s.mode}`)}else if(t.plugin==="v2ray-plugin"&&t["plugin-opts"].mode==="websocket")t["plugin-opts"].tls?n(",obfs=wss"):n(",obfs=ws");else throw new Error("plugin is not supported");u(`,obfs-host=${t["plugin-opts"].host}`,"plugin-opts.host"),u(`,obfs-uri=${t["plugin-opts"].path}`,"plugin-opts.path")}return is(t)&&(u(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),u(`,tls-alpn=${t["tls-alpn"]}`,"tls-alpn"),u(`,tls-no-session-ticket=${t["tls-no-session-ticket"]}`,"tls-no-session-ticket"),u(`,tls-no-session-reuse=${t["tls-no-session-reuse"]}`,"tls-no-session-reuse"),u(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),u(`,tls-verification=${!t["skip-cert-verify"]}`,"skip-cert-verify"),u(`,tls-host=${t.sni}`,"sni")),u(`,fast-open=${t.tfo}`,"tfo"),u(`,udp-relay=${t.udp}`,"udp"),t._ssr_python_uot?n(",udp-over-tcp=true"):t["udp-over-tcp"]&&(!t["udp-over-tcp-version"]||t["udp-over-tcp-version"]===1?n(",udp-over-tcp=sp.v1"):t["udp-over-tcp-version"]===2&&n(",udp-over-tcp=sp.v2")),e.appendIfPresent(`,server_check_url=${t["test-url"]}`,"test-url"),n(`,tag=${t.name}`),e.toString()}function JM(t){let e=new pt(t),n=e.append.bind(e),u=e.appendIfPresent.bind(e);return n(`shadowsocks=${t.server}:${t.port}`),n(`,method=${t.cipher}`),n(`,password=${t.password}`),n(`,ssr-protocol=${t.protocol}`),u(`,ssr-protocol-param=${t["protocol-param"]}`,"protocol-param"),u(`,obfs=${t.obfs}`,"obfs"),u(`,obfs-host=${t["obfs-param"]}`,"obfs-param"),u(`,fast-open=${t.tfo}`,"tfo"),u(`,udp-relay=${t.udp}`,"udp"),e.appendIfPresent(`,server_check_url=${t["test-url"]}`,"test-url"),n(`,tag=${t.name}`),e.toString()}function ZM(t){let e=new pt(t),n=e.append.bind(e),u=e.appendIfPresent.bind(e);if(n(`trojan=${t.server}:${t.port}`),n(`,password=${t.password}`),oe(t,"network")){if(t.network==="ws")is(t)?n(",obfs=wss"):n(",obfs=ws"),u(`,obfs-uri=${t["ws-opts"]?.path}`,"ws-opts.path"),u(`,obfs-host=${t["ws-opts"]?.headers?.Host}`,"ws-opts.headers.Host");else if(!["tcp"].includes(t.network))throw new Error(`network ${t.network} is unsupported`)}return t.network!=="ws"&&is(t)&&n(",over-tls=true"),is(t)&&(u(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),u(`,tls-alpn=${t["tls-alpn"]}`,"tls-alpn"),u(`,tls-no-session-ticket=${t["tls-no-session-ticket"]}`,"tls-no-session-ticket"),u(`,tls-no-session-reuse=${t["tls-no-session-reuse"]}`,"tls-no-session-reuse"),u(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),u(`,tls-verification=${!t["skip-cert-verify"]}`,"skip-cert-verify"),u(`,tls-host=${t.sni}`,"sni")),u(`,fast-open=${t.tfo}`,"tfo"),u(`,udp-relay=${t.udp}`,"udp"),e.appendIfPresent(`,server_check_url=${t["test-url"]}`,"test-url"),n(`,tag=${t.name}`),e.toString()}function QM(t){let e=new pt(t),n=e.append.bind(e),u=e.appendIfPresent.bind(e);n(`vmess=${t.server}:${t.port}`);let s;if(t.cipher==="auto"?s="chacha20-ietf-poly1305":s=t.cipher,n(`,method=${s}`),n(`,password=${t.uuid}`),is(t)&&(t.tls=!0),oe(t,"network")){if(t.network==="ws")t.tls?n(",obfs=wss"):n(",obfs=ws");else if(t.network==="http")n(",obfs=http");else if(!["tcp"].includes(t.network))throw new Error(`network ${t.network} is unsupported`);let p=t[`${t.network}-opts`]?.path,g=t[`${t.network}-opts`]?.headers?.Host;u(`,obfs-uri=${Array.isArray(p)?p[0]:p}`,`${t.network}-opts.path`),u(`,obfs-host=${Array.isArray(g)?g[0]:g}`,`${t.network}-opts.headers.Host`)}else t.tls&&n(",obfs=over-tls");return is(t)&&(u(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),u(`,tls-alpn=${t["tls-alpn"]}`,"tls-alpn"),u(`,tls-no-session-ticket=${t["tls-no-session-ticket"]}`,"tls-no-session-ticket"),u(`,tls-no-session-reuse=${t["tls-no-session-reuse"]}`,"tls-no-session-reuse"),u(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),u(`,tls-verification=${!t["skip-cert-verify"]}`,"skip-cert-verify"),u(`,tls-host=${t.sni}`,"sni")),oe(t,"aead")?n(`,aead=${t.aead}`):n(`,aead=${t.alterId===0}`),u(`,fast-open=${t.tfo}`,"tfo"),u(`,udp-relay=${t.udp}`,"udp"),e.appendIfPresent(`,server_check_url=${t["test-url"]}`,"test-url"),n(`,tag=${t.name}`),e.toString()}function eq(t){if(t.encryption&&t.encryption!=="none")throw new Error("VLESS encryption is not supported");let e=new pt(t),n=e.append.bind(e),u=e.appendIfPresent.bind(e);if(n(`vless=${t.server}:${t.port}`),n(",method=none"),n(`,password=${t.uuid}`),is(t)&&(t.tls=!0),oe(t,"network")){if(t.network==="ws")t.tls?n(",obfs=wss"):n(",obfs=ws");else if(t.network==="http")n(",obfs=http");else if(["tcp"].includes(t.network))t.tls&&n(",obfs=over-tls");else if(!["tcp"].includes(t.network))throw new Error(`network ${t.network} is unsupported`);let s=t[`${t.network}-opts`]?.path,p=t[`${t.network}-opts`]?.headers?.Host;u(`,obfs-uri=${Array.isArray(s)?s[0]:s}`,`${t.network}-opts.path`),u(`,obfs-host=${Array.isArray(p)?p[0]:p}`,`${t.network}-opts.headers.Host`)}else t.tls&&n(",obfs=over-tls");return is(t)&&(u(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),u(`,tls-alpn=${t["tls-alpn"]}`,"tls-alpn"),u(`,tls-no-session-ticket=${t["tls-no-session-ticket"]}`,"tls-no-session-ticket"),u(`,tls-no-session-reuse=${t["tls-no-session-reuse"]}`,"tls-no-session-reuse"),u(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),u(`,tls-verification=${!t["skip-cert-verify"]}`,"skip-cert-verify"),u(`,tls-host=${t.sni}`,"sni")),u(`,vless-flow=${t.flow}`,"flow"),u(`,fast-open=${t.tfo}`,"tfo"),u(`,udp-relay=${t.udp}`,"udp"),e.appendIfPresent(`,server_check_url=${t["test-url"]}`,"test-url"),n(`,tag=${t.name}`),e.toString()}function tq(t){let e=new pt(t),n=e.append.bind(e),u=e.appendIfPresent.bind(e);return n(`http=${t.server}:${t.port}`),u(`,username=${t.username}`,"username"),u(`,password=${t.password}`,"password"),is(t)&&(t.tls=!0),u(`,over-tls=${t.tls}`,"tls"),is(t)&&(u(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),u(`,tls-alpn=${t["tls-alpn"]}`,"tls-alpn"),u(`,tls-no-session-ticket=${t["tls-no-session-ticket"]}`,"tls-no-session-ticket"),u(`,tls-no-session-reuse=${t["tls-no-session-reuse"]}`,"tls-no-session-reuse"),u(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),u(`,tls-verification=${!t["skip-cert-verify"]}`,"skip-cert-verify"),u(`,tls-host=${t.sni}`,"sni")),u(`,fast-open=${t.tfo}`,"tfo"),u(`,udp-relay=${t.udp}`,"udp"),e.appendIfPresent(`,server_check_url=${t["test-url"]}`,"test-url"),n(`,tag=${t.name}`),e.toString()}function rq(t){let e=new pt(t),n=e.append.bind(e),u=e.appendIfPresent.bind(e);return n(`socks5=${t.server}:${t.port}`),u(`,username=${t.username}`,"username"),u(`,password=${t.password}`,"password"),is(t)&&(t.tls=!0),u(`,over-tls=${t.tls}`,"tls"),is(t)&&(u(`,tls-pubkey-sha256=${t["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),u(`,tls-alpn=${t["tls-alpn"]}`,"tls-alpn"),u(`,tls-no-session-ticket=${t["tls-no-session-ticket"]}`,"tls-no-session-ticket"),u(`,tls-no-session-reuse=${t["tls-no-session-reuse"]}`,"tls-no-session-reuse"),u(`,tls-cert-sha256=${t["tls-fingerprint"]}`,"tls-fingerprint"),u(`,tls-verification=${!t["skip-cert-verify"]}`,"skip-cert-verify"),u(`,tls-host=${t.sni}`,"sni")),u(`,fast-open=${t.tfo}`,"tfo"),u(`,udp-relay=${t.udp}`,"udp"),e.appendIfPresent(`,server_check_url=${t["test-url"]}`,"test-url"),n(`,tag=${t.name}`),e.toString()}function is(t){return t.tls}function Lh(){return{type:"ALL",produce:(t,e,n={})=>{let u=t.filter(s=>n["include-unsupported-proxy"]?!0:s.type==="snell"&&s.version>=4||["mieru","sudoku","naive"].includes(s.type)||s.encryption&&s.encryption!=="none"&&["vless"].includes(s.type)||["anytls"].includes(s.type)&&s.network&&(!["tcp"].includes(s.network)||["tcp"].includes(s.network)&&s["reality-opts"])?!1:!["xhttp"].includes(s.network)).map(s=>{if(s.type==="vmess"?(oe(s,"aead")&&(s.aead&&(s.alterId=0),delete s.aead),oe(s,"sni")&&(s.servername=s.sni,delete s.sni),oe(s,"cipher")&&!["auto","none","zero","aes-128-gcm","chacha20-poly1305"].includes(s.cipher)&&(s.cipher="auto")):s.type==="tuic"?(oe(s,"alpn")&&(s.alpn=Array.isArray(s.alpn)?s.alpn:[s.alpn]),oe(s,"tfo")&&!oe(s,"fast-open")&&(s["fast-open"]=s.tfo),(!s.token||s.token.length===0)&&!oe(s,"version")&&(s.version=5)):s.type==="hysteria"?(oe(s,"auth_str")&&!oe(s,"auth-str")&&(s["auth-str"]=s.auth_str),oe(s,"alpn")&&(s.alpn=Array.isArray(s.alpn)?s.alpn:[s.alpn]),oe(s,"tfo")&&!oe(s,"fast-open")&&(s["fast-open"]=s.tfo)):s.type==="hysteria2"?(oe(s,"alpn")&&(s.alpn=Array.isArray(s.alpn)?s.alpn:[s.alpn]),oe(s,"tfo")&&!oe(s,"fast-open")&&(s["fast-open"]=s.tfo)):s.type==="wireguard"?(s.keepalive=s.keepalive??s["persistent-keepalive"],s["persistent-keepalive"]=s.keepalive,s["preshared-key"]=s["preshared-key"]??s["pre-shared-key"],s["pre-shared-key"]=s["preshared-key"]):s.type==="snell"&&s.version<3?delete s.udp:s.type==="vless"?oe(s,"sni")&&(s.servername=s.sni,delete s.sni):s.type==="ss"&&oe(s,"shadow-tls-password")&&!oe(s,"plugin")&&(s.plugin="shadow-tls",s["plugin-opts"]={host:s["shadow-tls-sni"],password:s["shadow-tls-password"],version:s["shadow-tls-version"]},delete s["shadow-tls-password"],delete s["shadow-tls-sni"],delete s["shadow-tls-version"]),["vmess","vless"].includes(s.type)&&s.network==="http"){let p=s["http-opts"]?.path;oe(s,"http-opts.path")&&!Array.isArray(p)&&(s["http-opts"].path=[p]);let g=s["http-opts"]?.headers?.Host;oe(s,"http-opts.headers.Host")&&!Array.isArray(g)&&(s["http-opts"].headers.Host=[g])}if(["vmess","vless"].includes(s.type)&&s.network==="h2"){let p=s["h2-opts"]?.path;oe(s,"h2-opts.path")&&Array.isArray(p)&&(s["h2-opts"].path=p[0]);let g=s["h2-opts"]?.headers?.host;oe(s,"h2-opts.headers.Host")&&!Array.isArray(g)&&(s["h2-opts"].headers.host=[g])}if(["ws"].includes(s.network)){let p=s[`${s.network}-opts`]?.path;if(p){let g=/^(.*?)(?:\?ed=(\d+))?$/,[y,E="",m=""]=g.exec(p);s[`${s.network}-opts`].path=E,m!==""&&(s["ws-opts"]["early-data-header-name"]="Sec-WebSocket-Protocol",s["ws-opts"]["max-early-data"]=parseInt(m,10))}else s[`${s.network}-opts`]=s[`${s.network}-opts`]||{},s[`${s.network}-opts`].path="/"}if(s["plugin-opts"]?.tls&&oe(s,"skip-cert-verify")&&(s["plugin-opts"]["skip-cert-verify"]=s["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2","juicity","anytls","naive"].includes(s.type)&&delete s.tls,s["tls-fingerprint"]&&(s.fingerprint=s["tls-fingerprint"]),delete s["tls-fingerprint"],s["underlying-proxy"]&&(s["dialer-proxy"]=s["underlying-proxy"]),delete s["underlying-proxy"],oe(s,"tls")&&typeof s.tls!="boolean"&&delete s.tls,delete s.subName,delete s.collectionName,delete s.id,delete s.resolved,delete s["no-resolve"],e!=="internal")for(let p in s)(s[p]==null||/^_/i.test(p))&&delete s[p];return["grpc"].includes(s.network)&&s[`${s.network}-opts`]&&(delete s[`${s.network}-opts`]["_grpc-type"],delete s[`${s.network}-opts`]["_grpc-authority"]),s});return e==="internal"?u:`proxies:
`+u.map(s=>"  - "+JSON.stringify(s)+`
`).join("")}}}var uS="Surfboard";function B0(){return{produce:t=>{if(["ws"].includes(t.network)&&t["ws-opts"]?.["v2ray-http-upgrade"])throw new Error(`Platform ${uS} does not support network ${t.network} with http upgrade`);switch(t.name=t.name.replace(/=|,/g,""),t.type){case"ss":return nq(t);case"trojan":return iq(t);case"vmess":return sq(t);case"http":return aq(t);case"socks5":return uq(t);case"wireguard-surge":return oq(t)}throw new Error(`Platform ${uS} does not support proxy type: ${t.type}`)}}}function nq(t){let e=new pt(t);if(e.append(`${t.name}=${t.type},${t.server},${t.port}`),!["aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","rc4","rc4-md5","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","salsa20","chacha20","chacha20-ietf"].includes(t.cipher))throw new Error(`cipher ${t.cipher} is not supported`);if(e.append(`,encrypt-method=${t.cipher}`),e.appendIfPresent(`,password=${t.password}`,"password"),oe(t,"plugin"))if(t.plugin==="obfs")e.append(`,obfs=${t["plugin-opts"].mode}`),e.appendIfPresent(`,obfs-host=${t["plugin-opts"].host}`,"plugin-opts.host"),e.appendIfPresent(`,obfs-uri=${t["plugin-opts"].path}`,"plugin-opts.path");else throw new Error(`plugin ${t.plugin} is not supported`);return e.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),e.toString()}function iq(t){let e=new pt(t);return e.append(`${t.name}=${t.type},${t.server},${t.port}`),e.appendIfPresent(`,password=${t.password}`,"password"),oS(e,t),e.appendIfPresent(`,tls=${t.tls}`,"tls"),e.appendIfPresent(`,sni=${t.sni}`,"sni"),e.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),e.appendIfPresent(`,tfo=${t.tfo}`,"tfo"),e.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),e.toString()}function sq(t){let e=new pt(t);return e.append(`${t.name}=${t.type},${t.server},${t.port}`),e.appendIfPresent(`,username=${t.uuid}`,"uuid"),oS(e,t),oe(t,"aead")?e.append(`,vmess-aead=${t.aead}`):e.append(`,vmess-aead=${t.alterId===0}`),e.appendIfPresent(`,tls=${t.tls}`,"tls"),e.appendIfPresent(`,sni=${t.sni}`,"sni"),e.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),e.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),e.toString()}function aq(t){let e=new pt(t),n=t.tls?"https":"http";return e.append(`${t.name}=${n},${t.server},${t.port}`),e.appendIfPresent(`,${t.username}`,"username"),e.appendIfPresent(`,${t.password}`,"password"),e.appendIfPresent(`,sni=${t.sni}`,"sni"),e.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),e.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),e.toString()}function uq(t){let e=new pt(t),n=t.tls?"socks5-tls":"socks5";return e.append(`${t.name}=${n},${t.server},${t.port}`),e.appendIfPresent(`,${t.username}`,"username"),e.appendIfPresent(`,${t.password}`,"password"),e.appendIfPresent(`,sni=${t.sni}`,"sni"),e.appendIfPresent(`,skip-cert-verify=${t["skip-cert-verify"]}`,"skip-cert-verify"),e.appendIfPresent(`,udp-relay=${t.udp}`,"udp"),e.toString()}function oq(t){let e=new pt(t);return e.append(`${t.name}=wireguard`),e.appendIfPresent(`,section-name=${t["section-name"]}`,"section-name"),e.toString()}function oS(t,e){if(oe(e,"network"))if(e.network==="ws"){if(t.append(",ws=true"),oe(e,"ws-opts")&&(t.appendIfPresent(`,ws-path=${e["ws-opts"].path}`,"ws-opts.path"),oe(e,"ws-opts.headers"))){let n=e["ws-opts"].headers,u=Object.keys(n).map(s=>{let p=n[s];return["Host"].includes(s)&&(p=`"${p}"`),`${s}:${p}`}).join("|");la(u)&&t.append(`,ws-headers=${u}`)}}else{if(["tcp"].includes(e.network)&&e["reality-opts"])throw new Error("reality is unsupported");if(!["tcp"].includes(e.network))throw new Error(`network ${e.network} is unsupported`)}}var lq={ipv4:"ipv4_only",ipv6:"ipv6_only","v4-only":"ipv4_only","v6-only":"ipv6_only","ipv4-prefer":"prefer_ipv4","ipv6-prefer":"prefer_ipv6","prefer-v4":"prefer_ipv4","prefer-v6":"prefer_ipv6"},pi=(t,e)=>{let n=lq[t["ip-version"]];t._dns_server&&n&&(e.domain_resolver={server:t._dns_server,strategy:n})},gi=(t,e)=>{e.detour=t["dialer-proxy"]||t.detour},Oa=(t,e)=>{["tcp","udp"].includes(t._network)&&(e.network=t._network)},ki=(t,e)=>{e.tcp_fast_open=!1,t.tfo&&(e.tcp_fast_open=!0),t.tcp_fast_open&&(e.tcp_fast_open=!0),t["tcp-fast-open"]&&(e.tcp_fast_open=!0),e.tcp_fast_open||delete e.tcp_fast_open},Ks=(t,e)=>{!t||!t.enabled||(e.multiplex={enabled:!0},e.multiplex.protocol=t.protocol,t["max-connections"]&&(e.multiplex.max_connections=parseInt(`${t["max-connections"]}`,10)),t["max-streams"]&&(e.multiplex.max_streams=parseInt(`${t["max-streams"]}`,10)),t["min-streams"]&&(e.multiplex.min_streams=parseInt(`${t["min-streams"]}`,10)),t.padding&&(e.multiplex.padding=!0),(t["brutal-opts"]?.up||t["brutal-opts"]?.down)&&(e.multiplex.brutal={enabled:!0},t["brutal-opts"]?.up&&(e.multiplex.brutal.up_mbps=parseInt(`${t["brutal-opts"]?.up}`,10)),t["brutal-opts"]?.down&&(e.multiplex.brutal.down_mbps=parseInt(`${t["brutal-opts"]?.down}`,10))))},T2=(t,e)=>{let n={type:"ws",headers:{}};if(t["ws-opts"]){let{path:u="",headers:s={},"max-early-data":p,"early-data-header-name":g}=t["ws-opts"];if(n.early_data_header_name=g,n.max_early_data=p?parseInt(p,10):void 0,u!==""&&(n.path=`${u}`),Object.keys(s).length>0){let y={};for(let m of Object.keys(s)){let C=s[m];C!==""&&(Array.isArray(C)||(C=[`${C}`]),C.length>0&&(y[m]=C))}let{Host:E}=y;if(E.length===1)for(let m of`Host:${E[0]}`.split(`
`)){let[C,a]=m.split(":");a.trim()!==""&&(y[C.trim()]=a.trim().split(","))}n.headers=y}}if(t["ws-headers"]){let u={};for(let p of Object.keys(t["ws-headers"])){let g=t["ws-headers"][p];g!==""&&(Array.isArray(g)||(g=[`${g}`]),g.length>0&&(u[p]=g))}let{Host:s}=u;if(s.length===1)for(let p of`Host:${s[0]}`.split(`
`)){let[g,y]=p.split(":");y.trim()!==""&&(u[g.trim()]=y.trim().split(","))}for(let p of Object.keys(u))n.headers[p]=u[p]}if(t["ws-path"]&&t["ws-path"]!==""&&(n.path=`${t["ws-path"]}`),n.path){let u=/^(.*?)(?:\?ed=(\d+))?$/,[s,p="",g=""]=u.exec(n.path);n.path=p,g!==""&&(n.early_data_header_name="Sec-WebSocket-Protocol",n.max_early_data=parseInt(g,10))}e.tls.insecure&&(e.tls.server_name=n.headers.Host[0]),t["ws-opts"]&&t["ws-opts"]["v2ray-http-upgrade"]&&(n.type="httpupgrade",n.headers.Host&&(n.host=n.headers.Host[0],delete n.headers.Host),n.max_early_data&&delete n.max_early_data,n.early_data_header_name&&delete n.early_data_header_name);for(let u of Object.keys(n.headers)){let s=n.headers[u];s.length===1&&(n.headers[u]=s[0])}e.transport=n},lS=(t,e)=>{let n={type:"http",headers:{}};if(t["http-opts"]){let{method:u="",path:s="",headers:p={}}=t["http-opts"];u!==""&&(n.method=u),Array.isArray(s)?n.path=`${s[0]}`:s!==""&&(n.path=`${s}`);for(let g of Object.keys(p)){let y=p[g];if(y!==""){if(g.toLowerCase()==="host"){let E=y;Array.isArray(E)||(E=`${E}`.split(",").map(m=>m.trim())),E.length>0&&(n.host=E);continue}Array.isArray(y)||(y=`${y}`.split(",").map(E=>E.trim())),y.length>0&&(n.headers[g]=y)}}}if(t["http-host"]&&t["http-host"]!==""){let u=t["http-host"];Array.isArray(u)||(u=`${u}`.split(",").map(s=>s.trim())),u.length>0&&(n.host=u)}if(t["http-path"]&&t["http-path"]!==""){let u=t["http-path"];Array.isArray(u)?n.path=`${u[0]}`:u!==""&&(n.path=`${u}`)}e.tls.insecure&&(e.tls.server_name=n.host[0]),n.host?.length===1&&(n.host=n.host[0]);for(let u of Object.keys(n.headers)){let s=n.headers[u];s.length===1&&(n.headers[u]=s[0])}e.transport=n},cS=(t,e)=>{let n={type:"http"};if(t["h2-opts"]){let{host:u="",path:s=""}=t["h2-opts"];s!==""&&(n.path=`${s}`),u!==""&&(Array.isArray(u)||(u=`${u}`.split(",").map(p=>p.trim())),u.length>0&&(n.host=u))}if(t["h2-host"]&&t["h2-host"]!==""){let u=t["h2-host"];Array.isArray(u)||(u=`${u}`.split(",").map(s=>s.trim())),u.length>0&&(n.host=u)}t["h2-path"]&&t["h2-path"]!==""&&(n.path=`${t["h2-path"]}`),e.tls.enabled=!0,e.tls.insecure&&(e.tls.server_name=n.host[0]),n.host.length===1&&(n.host=n.host[0]),e.transport=n},x2=(t,e)=>{let n={type:"grpc"};if(t["grpc-opts"]){let u=t["grpc-opts"]["grpc-service-name"];u!=null&&u!==""&&(n.service_name=`${u}`)}e.transport=n},Su=(t,e)=>{t.tls&&(e.tls.enabled=!0),t.servername&&t.servername!==""&&(e.tls.server_name=t.servername),t.peer&&t.peer!==""&&(e.tls.server_name=t.peer),t.sni&&t.sni!==""&&(e.tls.server_name=t.sni),t["skip-cert-verify"]&&(e.tls.insecure=!0),t.insecure&&(e.tls.insecure=!0),t["disable-sni"]&&(e.tls.disable_sni=!0),typeof t.alpn=="string"?e.tls.alpn=[t.alpn]:Array.isArray(t.alpn)&&(e.tls.alpn=t.alpn),t.ca&&(e.tls.certificate_path=`${t.ca}`),t.ca_str&&(e.tls.certificate=[t.ca_str]),t["ca-str"]&&(e.tls.certificate=[t["ca-str"]]),t["reality-opts"]&&(e.tls.reality={enabled:!0},t["reality-opts"]["public-key"]&&(e.tls.reality.public_key=t["reality-opts"]["public-key"]),t["reality-opts"]["short-id"]&&(e.tls.reality.short_id=t["reality-opts"]["short-id"]),e.tls.utls={enabled:!0}),!["hysteria","hysteria2","tuic"].includes(t.type)&&t["client-fingerprint"]&&t["client-fingerprint"]!==""&&(e.tls.utls={enabled:!0,fingerprint:t["client-fingerprint"]}),t._fragment&&(e.tls.fragment=!!t._fragment),t._fragment_fallback_delay&&(e.tls.fragment_fallback_delay=t._fragment_fallback_delay),t._record_fragment&&(e.tls.record_fragment=!!t._record_fragment),t._certificate&&(e.tls.certificate=t._certificate),t._certificate_path&&(e.tls.certificate_path=t._certificate_path),t._certificate_public_key_sha256&&(e.tls.certificate_public_key_sha256=t._certificate_public_key_sha256),t._client_certificate&&(e.tls.client_certificate=t._client_certificate),t._client_certificate_path&&(e.tls.client_certificate_path=t._client_certificate_path),t._client_key&&(e.tls.client_key=t._client_key),t._client_key_path&&(e.tls.client_key_path=t._client_key_path),e.tls.enabled||delete e.tls},cq=(t={})=>{let e={tag:t.name,type:"ssh",server:t.server,server_port:parseInt(`${t.port}`,10)};if(e.server_port<0||e.server_port>65535)throw"invalid port";return t.username&&(e.user=t.username),t.password&&(e.password=t.password),t.privateKey&&(e.private_key_path=t.privateKey),t["private-key"]&&(e.private_key_path=t["private-key"]),t["private-key-passphrase"]&&(e.private_key_passphrase=t["private-key-passphrase"]),t["server-fingerprint"]&&(e.host_key=[t["server-fingerprint"]],e.host_key_algorithms=[t["server-fingerprint"].split(" ")[0]]),t["host-key"]&&(e.host_key=t["host-key"]),t["host-key-algorithms"]&&(e.host_key_algorithms=t["host-key-algorithms"]),t["fast-open"]&&(e.udp_fragment=!0),ki(t,e),gi(t,e),pi(t,e),e},fq=(t={})=>{let e={tag:t.name,type:"http",server:t.server,server_port:parseInt(`${t.port}`,10),tls:{enabled:!1,server_name:t.server,insecure:!1}};if(e.server_port<0||e.server_port>65535)throw"invalid port";if(t.username&&(e.username=t.username),t.password&&(e.password=t.password),t.headers){e.headers={};for(let n of Object.keys(t.headers))e.headers[n]=`${t.headers[n]}`;Object.keys(e.headers).length===0&&delete e.headers}return t["fast-open"]&&(e.udp_fragment=!0),ki(t,e),gi(t,e),Su(t,e),pi(t,e),e},hq=(t={})=>{let e={tag:t.name,type:"socks",server:t.server,server_port:parseInt(`${t.port}`,10),version:"5"};if(e.server_port<0||e.server_port>65535)throw"invalid port";return t.username&&(e.username=t.username),t.password&&(e.password=t.password),t.uot&&(e.udp_over_tcp=!0),t["udp-over-tcp"]&&(e.udp_over_tcp={enabled:!0,version:!t["udp-over-tcp-version"]||t["udp-over-tcp-version"]===1?1:2}),t["fast-open"]&&(e.udp_fragment=!0),Oa(t,e),ki(t,e),gi(t,e),pi(t,e),e},dq=(t={})=>{let e={tag:t.name,type:"shadowsocks",method:t.cipher,password:t.password,detour:`${t.name}_shadowtls`};t.uot&&(e.udp_over_tcp=!0),t["udp-over-tcp"]&&(e.udp_over_tcp={enabled:!0,version:!t["udp-over-tcp-version"]||t["udp-over-tcp-version"]===1?1:2});let n={tag:`${t.name}_shadowtls`,type:"shadowtls",server:t.server,server_port:parseInt(`${t.port}`,10),version:t["plugin-opts"].version,password:t["plugin-opts"].password,tls:{enabled:!0,server_name:t["plugin-opts"].host,utls:{enabled:!0,fingerprint:t["client-fingerprint"]}}};if(n.server_port<0||n.server_port>65535)throw"\u7AEF\u53E3\u503C\u975E\u6CD5";return t["fast-open"]===!0&&(n.udp_fragment=!0),ki(t,n),gi(t,n),Ks(t.smux,e),pi(t,n),{type:"ss-with-st",ssPart:e,stPart:n}},pq=(t={})=>{let e={tag:t.name,type:"shadowsocks",server:t.server,server_port:parseInt(`${t.port}`,10),method:t.cipher,password:t.password};if(e.server_port<0||e.server_port>65535)throw"invalid port";if(t.uot&&(e.udp_over_tcp=!0),t["udp-over-tcp"]&&(e.udp_over_tcp={enabled:!0,version:!t["udp-over-tcp-version"]||t["udp-over-tcp-version"]===1?1:2}),t["fast-open"]&&(e.udp_fragment=!0),Oa(t,e),ki(t,e),gi(t,e),Ks(t.smux,e),pi(t,e),t.plugin){let n=[];t.plugin==="obfs"&&(e.plugin="obfs-local",e.plugin_opts="",t["obfs-host"]&&(t["plugin-opts"].host=t["obfs-host"]),Object.keys(t["plugin-opts"]).forEach(u=>{switch(u){case"mode":n.push(`obfs=${t["plugin-opts"].mode}`);break;case"host":n.push(`obfs-host=${t["plugin-opts"].host}`);break;default:n.push(`${u}=${t["plugin-opts"][u]}`);break}})),t.plugin==="v2ray-plugin"&&(e.plugin="v2ray-plugin",t["ws-host"]&&(t["plugin-opts"].host=t["ws-host"]),t["ws-path"]&&(t["plugin-opts"].path=t["ws-path"]),Object.keys(t["plugin-opts"]).forEach(u=>{switch(u){case"tls":t["plugin-opts"].tls&&n.push("tls");break;case"host":n.push(`host=${t["plugin-opts"].host}`);break;case"path":n.push(`path=${t["plugin-opts"].path}`);break;case"headers":n.push(`headers=${JSON.stringify(t["plugin-opts"].headers)}`);break;case"mux":t["plugin-opts"].mux&&(e.multiplex={enabled:!0});break;default:n.push(`${u}=${t["plugin-opts"][u]}`)}})),e.plugin_opts=n.join(";")}return e},gq=(t={})=>{let e={tag:t.name,type:"shadowsocksr",server:t.server,server_port:parseInt(`${t.port}`,10),method:t.cipher,password:t.password,obfs:t.obfs,protocol:t.protocol};if(e.server_port<0||e.server_port>65535)throw"invalid port";return t["obfs-param"]&&(e.obfs_param=t["obfs-param"]),t["protocol-param"]&&t["protocol-param"]!==""&&(e.protocol_param=t["protocol-param"]),t["fast-open"]&&(e.udp_fragment=!0),ki(t,e),gi(t,e),Ks(t.smux,e),pi(t,e),e},mq=(t={})=>{let e={tag:t.name,type:"vmess",server:t.server,server_port:parseInt(`${t.port}`,10),uuid:t.uuid,security:t.cipher,alter_id:parseInt(`${t.alterId}`,10),tls:{enabled:!1,server_name:t.server,insecure:!1}};if(["auto","none","zero","aes-128-gcm","chacha20-poly1305","aes-128-ctr"].indexOf(e.security)===-1&&(e.security="auto"),e.server_port<0||e.server_port>65535)throw"invalid port";return t.xudp&&(e.packet_encoding="xudp"),t["fast-open"]&&(e.udp_fragment=!0),t.network==="ws"&&T2(t,e),t.network==="h2"&&cS(t,e),t.network==="http"&&lS(t,e),t.network==="grpc"&&x2(t,e),Oa(t,e),ki(t,e),gi(t,e),Su(t,e),Ks(t.smux,e),pi(t,e),e},vq=(t={})=>{let e={tag:t.name,type:"vless",server:t.server,server_port:parseInt(`${t.port}`,10),uuid:t.uuid,tls:{enabled:!1,server_name:t.server,insecure:!1}};if(e.server_port<0||e.server_port>65535)throw"invalid port";return t.xudp&&(e.packet_encoding="xudp"),t["fast-open"]&&(e.udp_fragment=!0),t.flow!=null&&(e.flow=t.flow),t.network==="ws"&&T2(t,e),t.network==="h2"&&cS(t,e),t.network==="http"&&lS(t,e),t.network==="grpc"&&x2(t,e),Oa(t,e),ki(t,e),gi(t,e),Ks(t.smux,e),Su(t,e),pi(t,e),e},wq=(t={})=>{let e={tag:t.name,type:"trojan",server:t.server,server_port:parseInt(`${t.port}`,10),password:t.password,tls:{enabled:!0,server_name:t.server,insecure:!1}};if(e.server_port<0||e.server_port>65535)throw"invalid port";return t["fast-open"]&&(e.udp_fragment=!0),t.network==="grpc"&&x2(t,e),t.network==="ws"&&T2(t,e),Oa(t,e),ki(t,e),gi(t,e),Su(t,e),Ks(t.smux,e),pi(t,e),e},Eq=(t={})=>{let e={tag:t.name,type:"naive",server:t.server,server_port:parseInt(`${t.port}`,10),tls:{enabled:!0,server_name:t.server,insecure:!1}};if(e.server_port<0||e.server_port>65535)throw"invalid port";t.username&&(e.username=t.username),t.password&&(e.password=t.password),t.uot&&(e.udp_over_tcp=!0),t["udp-over-tcp"]&&(e.udp_over_tcp={enabled:!0,version:!t["udp-over-tcp-version"]||t["udp-over-tcp-version"]===1?1:2});let n=parseInt(`${t["insecure-concurrency"]}`,10);return Number.isInteger(n)&&n>=0&&(e.insecure_concurrency=n),t["extra-headers"]&&(e.extra_headers=t["extra-headers"]),t.quic&&(e.quic=!!t.quic),t["quic-congestion-control"]&&(e.quic_congestion_control=t["quic-congestion-control"]),t["fast-open"]&&(e.udp_fragment=!0),ki(t,e),gi(t,e),Su(t,e),Ks(t.smux,e),pi(t,e),e.tls?.insecure&&(R.info("Platform sing-box: insecure is not supported on naive outbound"),delete e.tls.insecure),e},Aq=(t={})=>{let e={tag:t.name,type:"hysteria",server:t.server,server_port:parseInt(`${t.port}`,10),disable_mtu_discovery:!1,tls:{enabled:!0,server_name:t.server,insecure:!1}};if(e.server_port<0||e.server_port>65535)throw"invalid port";t["hop-interval"]&&(e.hop_interval=/^\d+$/.test(t["hop-interval"])?`${t["hop-interval"]}s`:t["hop-interval"]),t.ports&&(e.server_ports=t.ports.split(/\s*,\s*/).map(u=>{let s=u.replace(/\s*-\s*/g,":");return s.includes(":")?s:`${s}:${s}`})),t.auth_str&&(e.auth_str=`${t.auth_str}`),t["auth-str"]&&(e.auth_str=`${t["auth-str"]}`),t["fast-open"]&&(e.udp_fragment=!0);let n=new RegExp("^[0-9]+[ 	]*[KMGT]*[Bb]ps$");return n.test(`${t.up}`)&&!`${t.up}`.endsWith("Mbps")?e.up=`${t.up}`:e.up_mbps=parseInt(`${t.up}`,10),n.test(`${t.down}`)&&!`${t.down}`.endsWith("Mbps")?e.down=`${t.down}`:e.down_mbps=parseInt(`${t.down}`,10),t.obfs&&(e.obfs=t.obfs),t.recv_window_conn&&(e.recv_window_conn=t.recv_window_conn),t["recv-window-conn"]&&(e.recv_window_conn=t["recv-window-conn"]),t.recv_window&&(e.recv_window=t.recv_window),t["recv-window"]&&(e.recv_window=t["recv-window"]),t.disable_mtu_discovery&&(typeof t.disable_mtu_discovery=="boolean"?e.disable_mtu_discovery=t.disable_mtu_discovery:t.disable_mtu_discovery===1&&(e.disable_mtu_discovery=!0)),Oa(t,e),Su(t,e),gi(t,e),ki(t,e),Ks(t.smux,e),pi(t,e),e},bq=(t={})=>{let e={tag:t.name,type:"hysteria2",server:t.server,server_port:parseInt(`${t.port}`,10),password:t.password,obfs:{},tls:{enabled:!0,server_name:t.server,insecure:!1}};if(e.server_port<0||e.server_port>65535)throw"invalid port";return t["hop-interval"]&&(e.hop_interval=/^\d+$/.test(t["hop-interval"])?`${t["hop-interval"]}s`:t["hop-interval"]),t.ports&&(e.server_ports=t.ports.split(/\s*,\s*/).map(n=>{let u=n.replace(/\s*-\s*/g,":");return u.includes(":")?u:`${u}:${u}`})),t.up&&(e.up_mbps=parseInt(`${t.up}`,10)),t.down&&(e.down_mbps=parseInt(`${t.down}`,10)),t.obfs==="salamander"&&(e.obfs.type="salamander"),t["obfs-password"]&&(e.obfs.password=t["obfs-password"]),e.obfs.type||delete e.obfs,Oa(t,e),Su(t,e),ki(t,e),gi(t,e),Ks(t.smux,e),pi(t,e),e},yq=(t={})=>{let e={tag:t.name,type:"tuic",server:t.server,server_port:parseInt(`${t.port}`,10),uuid:t.uuid,password:t.password,tls:{enabled:!0,server_name:t.server,insecure:!1}};if(e.server_port<0||e.server_port>65535)throw"invalid port";return t["fast-open"]&&(e.udp_fragment=!0),t["congestion-controller"]&&t["congestion-controller"]!=="cubic"&&(e.congestion_control=t["congestion-controller"]),t["udp-relay-mode"]&&t["udp-relay-mode"]!=="native"&&(e.udp_relay_mode=t["udp-relay-mode"]),t["reduce-rtt"]&&(e.zero_rtt_handshake=!0),t["udp-over-stream"]&&(e.udp_over_stream=!0),t["heartbeat-interval"]&&(e.heartbeat=`${t["heartbeat-interval"]}ms`),Oa(t,e),ki(t,e),gi(t,e),Su(t,e),Ks(t.smux,e),pi(t,e),e},_q=(t={})=>{let e={tag:t.name,type:"anytls",server:t.server,server_port:parseInt(`${t.port}`,10),password:t.password,tls:{enabled:!0,server_name:t.server,insecure:!1}};return/^\d+$/.test(t["idle-session-check-interval"])&&(e.idle_session_check_interval=`${t["idle-session-check-interval"]}s`),/^\d+$/.test(t["idle-session-timeout"])&&(e.idle_session_timeout=`${t["idle-session-timeout"]}s`),/^\d+$/.test(t["min-idle-session"])&&(e.min_idle_session=parseInt(`${t["min-idle-session"]}`,10)),Oa(t,e),gi(t,e),Su(t,e),pi(t,e),e},Cq=(t={})=>{let e=["ip","ipv6"].map(u=>t[u]).map(u=>{if(Xr(u))return`${u}/32`;if(Vr(u))return`${u}/128`}).filter(u=>u),n={tag:t.name,type:"wireguard",server:t.server,server_port:parseInt(`${t.port}`,10),local_address:e,private_key:t["private-key"],peer_public_key:t["public-key"],pre_shared_key:t["pre-shared-key"],reserved:[]};if(n.server_port<0||n.server_port>65535)throw"invalid port";if(t["fast-open"]&&(n.udp_fragment=!0),typeof t.reserved=="string")n.reserved=t.reserved;else if(Array.isArray(t.reserved))for(let u of t.reserved)n.reserved.push(u);else delete n.reserved;if(t.peers&&t.peers.length>0){n.peers=[];for(let u of t.peers){let s={server:u.server,server_port:parseInt(`${u.port}`,10),public_key:u["public-key"],allowed_ips:u["allowed-ips"]||u.allowed_ips,reserved:[]};if(typeof u.reserved=="string")s.reserved.push(u.reserved);else if(Array.isArray(u.reserved))for(let p of u.reserved)s.reserved.push(p);else delete s.reserved;u["pre-shared-key"]&&(s.pre_shared_key=u["pre-shared-key"]),n.peers.push(s)}}return Oa(t,n),ki(t,n),gi(t,n),Ks(t.smux,n),pi(t,n),n};function $0(){return{type:"ALL",produce:(t,e,n={})=>{let u=[];return ts().produce(t,"internal",{"include-unsupported-proxy":!0}).map(s=>{try{switch(s.type){case"ssh":u.push(cq(s));break;case"http":u.push(fq(s));break;case"socks5":if(s.tls)throw new Error(`Platform sing-box does not support proxy type: ${s.type} with tls`);u.push(hq(s));break;case"ss":if(s.plugin==="shadow-tls"){let{ssPart:p,stPart:g}=dq(s);u.push(p),u.push(g)}else u.push(pq(s));break;case"ssr":if(n["include-unsupported-proxy"])u.push(gq(s));else throw new Error(`Platform sing-box does not support proxy type: ${s.type}`);break;case"vmess":if(!s.network||["tcp","ws","grpc","h2","http"].includes(s.network))u.push(mq(s));else throw new Error(`Platform sing-box does not support proxy type: ${s.type} with network ${s.network}`);break;case"vless":if(s.encryption&&s.encryption!=="none")throw new Error("VLESS encryption is not supported");if(!s.flow||["xtls-rprx-vision"].includes(s.flow))u.push(vq(s));else throw new Error(`Platform sing-box does not support proxy type: ${s.type} with flow ${s.flow}`);break;case"trojan":if(!s.flow)u.push(wq(s));else throw new Error(`Platform sing-box does not support proxy type: ${s.type} with flow ${s.flow}`);break;case"naive":u.push(Eq(s));break;case"hysteria":u.push(Aq(s));break;case"hysteria2":u.push(bq(s,n["include-unsupported-proxy"]));break;case"tuic":if(!s.token||s.token.length===0)u.push(yq(s));else throw new Error("Platform sing-box does not support proxy type: TUIC v4");break;case"wireguard":u.push(Cq(s));break;case"anytls":u.push(_q(s));break;default:throw new Error(`Platform sing-box does not support proxy type: ${s.type}`)}}catch(p){R.error(p.message??p)}}),e==="internal"?u:JSON.stringify({outbounds:u},null,2)}}}function R0(){return{type:"ALL",produce:(t,e,n={})=>{let u=t.filter(s=>!["http","https","socks5","ss","trojan","hysteria2","vless","vmess","tuic",...n["include-unsupported-proxy"]?["wireguard"]:[]].includes(s.type)||s.type==="ss"&&(s.plugin==="obfs"&&!["http","tls"].includes(s["plugin-opts"]?.mode)||!["chacha20-ietf-poly1305","chacha20-poly1305","aes-256-gcm","aes-128-gcm","none","tbale","rc4","rc4-md5","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","cast5-cfb","des-cfb","idea-cfb","rc2-cfb","seed-cfb","salsa20","chacha20","chacha20-ietf","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(s.cipher))||s.type==="vmess"&&!["http","ws","tcp"].includes(s.network)&&s.network||s.type==="trojan"&&!["http","ws","tcp"].includes(s.network)&&s.network||s.type==="vless"&&!["http","ws","tcp"].includes(s.network)&&s.network||s.type==="tuic"&&s.token&&s.token.length!==0?!1:!(["ws"].includes(s.network)&&s["ws-opts"]?.["v2ray-http-upgrade"])).map(s=>{let p={...s},g;s.tls&&!s.sni&&(s.sni=s.server);let y=s.prev_hop||s["underlying-proxy"]||s["dialer-proxy"]||s.detour;if(s.type==="http")s={type:s.tls?"https":"http",name:s.name,server:s.server,port:s.port,username:s.username,password:s.password,tfo:s.tfo||s["fast-open"],next_hop:s.next_hop,...s.tls?{sni:s.sni,skip_tls_verify:s["skip-cert-verify"]}:{}};else if(s.type==="socks5")s={type:"socks5",name:s.name,server:s.server,port:s.port,username:s.username,password:s.password,tfo:s.tfo||s["fast-open"],udp_relay:s.udp||s.udp_relay||s.udp_relay,next_hop:s.next_hop};else if(s.type==="ss")s={type:"shadowsocks",name:s.name,method:s.cipher==="chacha20-ietf-poly1305"?"chacha20-poly1305":s.cipher,server:s.server,port:s.port,password:s.password,tfo:s.tfo||s["fast-open"],udp_relay:s.udp||s.udp_relay||s.udp_relay,next_hop:s.next_hop},p.plugin==="obfs"&&(s.obfs=p["plugin-opts"].mode,s.obfs_host=p["plugin-opts"].host,s.obfs_uri=p["plugin-opts"].path);else if(s.type==="hysteria2")s={type:"hysteria2",name:s.name,server:s.server,port:s.port,auth:s.password,tfo:s.tfo||s["fast-open"],udp_relay:s.udp||s.udp_relay||s.udp_relay,next_hop:s.next_hop,sni:s.sni,skip_tls_verify:s["skip-cert-verify"],port_hopping:s.ports,port_hopping_interval:s["hop-interval"]},p["obfs-password"]&&p.obfs=="salamander"&&(s.obfs="salamander",s.obfs_password=p["obfs-password"]);else if(s.type==="tuic")s={type:"tuic",name:s.name,server:s.server,port:s.port,uuid:s.uuid,password:s.password,next_hop:s.next_hop,sni:s.sni,alpn:Array.isArray(s.alpn)?s.alpn:[s.alpn||"h3"],skip_tls_verify:s["skip-cert-verify"],port_hopping:s.ports,port_hopping_interval:s["hop-interval"]};else if(s.type==="trojan")s.network==="ws"&&(s.websocket={path:s["ws-opts"]?.path,host:s["ws-opts"]?.headers?.Host}),s={type:"trojan",name:s.name,server:s.server,port:s.port,password:s.password,tfo:s.tfo||s["fast-open"],udp_relay:s.udp||s.udp_relay||s.udp_relay,next_hop:s.next_hop,sni:s.sni,skip_tls_verify:s["skip-cert-verify"],websocket:s.websocket};else if(s.type==="vmess"){let E=s.cipher;E&&!["auto","none","zero","aes-128-gcm","chacha20-poly1305"].includes(E)&&(E="auto"),s.network==="ws"?s.transport={[s.tls?"wss":"ws"]:{path:s["ws-opts"]?.path,headers:{Host:s["ws-opts"]?.headers?.Host},sni:s.tls?s.sni:void 0,skip_tls_verify:s.tls?s["skip-cert-verify"]:void 0}}:s.network==="http"?s.transport={http1:{method:s["http-opts"]?.method,path:Array.isArray(s["http-opts"]?.path)?s["http-opts"]?.path[0]:s["http-opts"]?.path,headers:{Host:Array.isArray(s["http-opts"]?.headers?.Host)?s["http-opts"]?.headers?.Host[0]:s["http-opts"]?.headers?.Host},skip_tls_verify:s["skip-cert-verify"]}}:s.network==="h2"?s.transport={http2:{method:s["h2-opts"]?.method,path:Array.isArray(s["h2-opts"]?.path)?s["h2-opts"]?.path[0]:s["h2-opts"]?.path,headers:{Host:Array.isArray(s["h2-opts"]?.headers?.Host)?s["h2-opts"]?.headers?.Host[0]:s["h2-opts"]?.headers?.Host},skip_tls_verify:s["skip-cert-verify"]}}:(s.network==="tcp"||!s.network)&&s.tls&&(s.transport={tls:{sni:s.tls?s.sni:void 0,skip_tls_verify:s.tls?s["skip-cert-verify"]:void 0}});let m;(oe(s,"aead")&&!s.aead||s.alterId!==0)&&(m=!0),s={type:"vmess",name:s.name,server:s.server,port:s.port,user_id:s.uuid,security:E,tfo:s.tfo||s["fast-open"],legacy:m,udp_relay:s.udp||s.udp_relay||s.udp_relay,next_hop:s.next_hop,transport:s.transport}}else if(s.type==="vless"){if(s.encryption&&s.encryption!=="none")throw new Error("VLESS encryption is not supported");if(s.network==="ws")s.transport={[s.tls?"wss":"ws"]:{path:s["ws-opts"]?.path,headers:{Host:s["ws-opts"]?.headers?.Host},sni:s.tls?s.sni:void 0,skip_tls_verify:s.tls?s["skip-cert-verify"]:void 0}};else if(s.network==="http")s.transport={http:{method:s["http-opts"]?.method,path:Array.isArray(s["http-opts"]?.path)?s["http-opts"]?.path[0]:s["http-opts"]?.path,headers:{Host:Array.isArray(s["http-opts"]?.headers?.Host)?s["http-opts"]?.headers?.Host[0]:s["http-opts"]?.headers?.Host},skip_tls_verify:s["skip-cert-verify"]}};else if(s.network==="tcp"||!s.network){let E;if((s["reality-opts"]?.["short-id"]||s["reality-opts"]?.["public-key"])&&(E={short_id:s["reality-opts"]["short-id"],public_key:s["reality-opts"]["public-key"]}),s.transport={[s.tls?"tls":"tcp"]:{sni:s.tls?s.sni:void 0,skip_tls_verify:s.tls?s["skip-cert-verify"]:void 0,reality:E}},typeof s.flow<"u"&&!["xtls-rprx-vision"].includes(s.flow))throw new Error(`VLESS flow(${s.flow}) is not supported`);g=s.flow}s={type:"vless",name:s.name,server:s.server,port:s.port,user_id:s.uuid,security:s.cipher,tfo:s.tfo||s["fast-open"],udp_relay:s.udp||s.udp_relay||s.udp_relay,next_hop:s.next_hop,transport:s.transport,flow:g}}else s.type==="wireguard"&&(Array.isArray(s.peers)&&s.peers.length>0&&(s.server=s.peers[0].server,s.port=s.peers[0].port,s.ip=s.peers[0].ip,s.ipv6=s.peers[0].ipv6,s["public-key"]=s.peers[0]["public-key"],s["preshared-key"]=s.peers[0]["pre-shared-key"],s["allowed-ips"]=s.peers[0]["allowed-ips"],s.reserved=s.peers[0].reserved),s={type:"wireguard",name:s.name,local_ipv4:s.ip,local_ipv6:s.ipv6,server:s.server,port:s.port,private_key:s["private-key"],peer_public_key:s["public-key"],preshared_key:s["preshared-key"],reserved:s.reserved?Array.isArray(s.reserved)?s.reserved:s.reserved.split(/\s*\/\s*/).map(E=>E.trim()).filter(E=>E.length>0):void 0,dns_servers:s.dns?Array.isArray(s.dns)?s.dns:s.dns.split(/\s*,\s*/).map(E=>E.trim()).filter(E=>E.length>0):void 0,mtu:s.mtu,keepalive:s.keepalive});if(["http","https","socks5","ss","trojan","vless","vmess"].includes(p.type)){if(oe(p,"shadow-tls-password")){if(p["shadow-tls-version"]!=3)throw new Error(`shadow-tls version ${p["shadow-tls-version"]} is not supported`);s.shadow_tls={password:p["shadow-tls-password"],sni:p["shadow-tls-sni"]}}else if(["shadow-tls"].includes(p.plugin)&&p["plugin-opts"]){if(p["plugin-opts"].version!=3)throw new Error(`shadow-tls version ${p["plugin-opts"].version} is not supported`);s.shadow_tls={password:p["plugin-opts"].password,sni:p["plugin-opts"].host}}}if(["socks5","ss","trojan","vless","vmess","wireguard","tuic","hysteria2"].includes(p.type)&&(["on","true",!0,"1",1].includes(p["block-quic"])?s.block_quic=!0:["off","false",!1,"0",0].includes(p["block-quic"])&&(s.block_quic=!1)),["ss"].includes(p.type)&&s.shadow_tls&&p["udp-port"]>0&&p["udp-port"]<=65535&&(s.udp_port=p["udp-port"]),delete s.subName,delete s.collectionName,delete s.id,delete s.resolved,delete s["no-resolve"],s.transport){for(let E in s.transport)(Object.keys(s.transport[E]).length===0||Object.values(s.transport[E]).every(m=>m==null))&&delete s.transport[E];Object.keys(s.transport).length===0&&delete s.transport}if(e!=="internal")for(let E in s)(s[E]==null||/^_/i.test(E))&&delete s[E];return{[s.type]:{...s,type:void 0,prev_hop:y}}});return e==="internal"?u:`proxies:
`+u.map(s=>"  - "+JSON.stringify(s)+`
`).join("")}}}function fS(){return{type:"ALL",produce:(t,e)=>e==="internal"?t:JSON.stringify(t,null,2)}}var P0={qx:kh(),QX:kh(),QuantumultX:kh(),surge:Cc(),Surge:Cc(),SurgeMac:Um(),Loon:Hm(),Clash:jm(),meta:ts(),clashmeta:ts(),"clash.meta":ts(),"Clash.Meta":ts(),ClashMeta:ts(),mihomo:ts(),Mihomo:ts(),uri:Xc(),URI:Xc(),v2:Nh(),v2ray:Nh(),V2Ray:Nh(),json:fS(),JSON:fS(),stash:Vp(),Stash:Vp(),shadowrocket:Lh(),Shadowrocket:Lh(),ShadowRocket:Lh(),surfboard:B0(),Surfboard:B0(),singbox:$0(),"sing-box":$0(),egern:R0(),Egern:R0()},vF=qr(Kh()),OV=String.raw`
// global initializer
{{
    function $set(obj, path, value) {
      if (Object(obj) !== obj) return obj;
      if (!Array.isArray(path)) path = path.toString().match(/[^.[\]]+/g) || [];
      path
        .slice(0, -1)
        .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[
        path[path.length - 1]
      ] = value;
      return obj;
    }
}}

// per-parser initializer
{
    const proxy = {};
    const obfs = {};
    const $ = {};

    function handleWebsocket() {
        if (obfs.type === "ws") {
            proxy.network = "ws";
            $set(proxy, "ws-opts.path", obfs.path);
            $set(proxy, "ws-opts.headers", obfs['ws-headers']);
            if (proxy['ws-opts'] && proxy['ws-opts']['headers'] && proxy['ws-opts']['headers'].Host) {
                proxy['ws-opts']['headers'].Host = proxy['ws-opts']['headers'].Host.replace(/^"(.*)"$/, '$1')
            }
        }
    }
    function handleShadowTLS() {
        if (proxy['shadow-tls-password'] && !proxy['shadow-tls-version']) {
            proxy['shadow-tls-version'] = 2;
        }
    }
}

start = (anytls/shadowsocks/vmess/trojan/https/http/snell/socks5/socks5_tls/tuic/tuic_v5/wireguard/hysteria2/ssh/direct) {
    return proxy;
}

shadowsocks = tag equals "ss" address (method/passwordk/obfs/obfs_host/obfs_uri/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/udp_relay/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/udp_port/others)* {
    proxy.type = "ss";
    // handle obfs
    if (obfs.type == "http" || obfs.type === "tls") {
        proxy.plugin = "obfs";
        $set(proxy, "plugin-opts.mode", obfs.type);
        $set(proxy, "plugin-opts.host", obfs.host);
        $set(proxy, "plugin-opts.path", obfs.path);
    }
    handleShadowTLS();
}
vmess = tag equals "vmess" address (vmess_uuid/vmess_aead/ws/ws_path/ws_headers/method/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls/sni/tls_fingerprint/tls_verification/fast_open/tfo/udp_relay/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "vmess";
    proxy.cipher = proxy.cipher || "none";
    // Surfboard  Surge ,  Surfboard https://getsurfboard.com/docs/profile-format/proxy/external-proxy/vmess
    if (proxy.aead) {
        proxy.alterId = 0;
    } else {
        proxy.alterId = 1;
    }
    handleWebsocket();
    handleShadowTLS();
}
trojan = tag equals "trojan" address (passwordk/ws/ws_path/ws_headers/tls/sni/tls_fingerprint/tls_verification/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/udp_relay/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "trojan";
    handleWebsocket();
    handleShadowTLS();
}
https = tag equals "https" address (username password)? (usernamek passwordk)? (sni/tls_fingerprint/tls_verification/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "http";
    proxy.tls = true;
    handleShadowTLS();
}
http = tag equals "http" address (username password)? (usernamek passwordk)? (ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "http";
    handleShadowTLS();
}
ssh = tag equals "ssh" address (username password)? (usernamek passwordk)? (server_fingerprint/idle_timeout/private_key/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "ssh";
    handleShadowTLS();
}
snell = tag equals "snell" address (snell_version/snell_psk/obfs/obfs_host/obfs_uri/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/udp_relay/reuse/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "snell";
    // handle obfs
    if (obfs.type == "http" || obfs.type === "tls") {
        $set(proxy, "obfs-opts.mode", obfs.type);
        $set(proxy, "obfs-opts.host", obfs.host);
        $set(proxy, "obfs-opts.path", obfs.path);
    }
    handleShadowTLS();
}
tuic = tag equals "tuic" address (alpn/token/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls_fingerprint/tls_verification/sni/fast_open/tfo/ecn/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/port_hopping_interval/others)* {
    proxy.type = "tuic";
    handleShadowTLS();
}
tuic_v5 = tag equals "tuic-v5" address (alpn/passwordk/uuidk/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls_fingerprint/tls_verification/sni/fast_open/tfo/ecn/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/port_hopping_interval/others)* {
    proxy.type = "tuic";
    proxy.version = 5;
    handleShadowTLS();
}
wireguard = tag equals "wireguard" (section_name/no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "wireguard-surge";
    handleShadowTLS();
}
hysteria2 = tag equals "hysteria2" address (no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/sni/tls_verification/passwordk/tls_fingerprint/download_bandwidth/ecn/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/port_hopping_interval/salamander_password/others)* {
    proxy.type = "hysteria2";
    handleShadowTLS();
}
socks5 = tag equals "socks5" address (username password)? (usernamek passwordk)? (udp_relay/no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "socks5";
    handleShadowTLS();
}
socks5_tls = tag equals "socks5-tls" address (username password)? (usernamek passwordk)? (udp_relay/no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/sni/tls_fingerprint/tls_verification/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "socks5";
    proxy.tls = true;
    handleShadowTLS();
}
anytls = tag equals "anytls" address (passwordk/reuse/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls_fingerprint/tls_verification/sni/fast_open/tfo/block_quic/others)* {
    proxy.type = "anytls";
    proxy.tls = true;
}
direct = tag equals "direct" (udp_relay/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/block_quic/others)* {
    proxy.type = "direct";
}
address = comma server:server comma port:port {
    proxy.server = server;
    proxy.port = port;
}

server = ip/domain

ip = & {
    const start = peg$currPos;
    let j = start;
    while (j < input.length) {
        if (input[j] === ",") break;
        j++;
    }
    peg$currPos = j;
    $.ip = input.substring(start, j).trim();
    return true;
} { return $.ip; }

domain = match:[0-9a-zA-z-_.]+ { 
    const domain = match.join(""); 
    if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {
        return domain;
    }
}

port = digits:[0-9]+ { 
    const port = parseInt(digits.join(""), 10); 
    if (port >= 0 && port <= 65535) {
    	return port;
    }
}

port_hopping_interval = comma "port-hopping-interval" equals match:$[0-9]+ { proxy["hop-interval"] = parseInt(match.trim()); }

username = & {
    let j = peg$currPos; 
    let start, end;
    let first = true;
    while (j < input.length) {
        if (input[j] === ',') {
            if (first) {
                start = j + 1;
                first = false;
            } else {
                end = j;
                break;
            }
        }
        j++;
    }
    const match = input.substring(start, end);
    if (match.indexOf("=") === -1) {
        $.username = match;
        peg$currPos = end;
        return true;
    }
} { proxy.username = $.username.trim().replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }
password = comma match:[^,]+ { proxy.password = match.join("").replace(/^"(.*)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }

tls = comma "tls" equals flag:bool { proxy.tls = flag; }
sni = comma "sni" equals sni:("off"/domain) { 
    if (sni === "off") {
        proxy["disable-sni"] = true;
    } else {
        proxy.sni = sni;
    }
}
tls_verification = comma "skip-cert-verify" equals flag:bool { proxy["skip-cert-verify"] = flag; }
tls_fingerprint = comma "server-cert-fingerprint-sha256" equals tls_fingerprint:$[^,]+ { proxy["tls-fingerprint"] = tls_fingerprint.trim(); }

snell_psk = comma "psk" equals match:[^,]+ { proxy.psk = match.join(""); }
snell_version = comma "version" equals match:$[0-9]+ { proxy.version = parseInt(match.trim()); }

usernamek = comma "username" equals match:[^,]+ { proxy.username = match.join("").replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }
passwordk = comma "password" equals match:[^,]+ { proxy.password = match.join("").replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }
vmess_uuid = comma "username" equals match:[^,]+ { proxy.uuid = match.join(""); }
vmess_aead = comma "vmess-aead" equals flag:bool { proxy.aead = flag; }

method = comma "encrypt-method" equals cipher:cipher {
    proxy.cipher = cipher;
}
cipher = ("aes-128-cfb"/"aes-128-ctr"/"aes-128-gcm"/"aes-192-cfb"/"aes-192-ctr"/"aes-192-gcm"/"aes-256-cfb"/"aes-256-ctr"/"aes-256-gcm"/"bf-cfb"/"camellia-128-cfb"/"camellia-192-cfb"/"camellia-256-cfb"/"cast5-cfb"/"chacha20-ietf-poly1305"/"chacha20-ietf"/"chacha20-poly1305"/"chacha20"/"des-cfb"/"idea-cfb"/"none"/"rc2-cfb"/"rc4-md5"/"rc4"/"salsa20"/"seed-cfb"/"xchacha20-ietf-poly1305"/"2022-blake3-aes-128-gcm"/"2022-blake3-aes-256-gcm");

ws = comma "ws" equals flag:bool { obfs.type = "ws"; }
ws_headers = comma "ws-headers" equals headers:$[^,]+ {
    const pairs = headers.split("|");
    const result = {};
    pairs.forEach(pair => {
        const [key, value] = pair.trim().split(":");
        result[key.trim()] = value.trim().replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1');
    })
    obfs["ws-headers"] = result;
}
ws_path = comma "ws-path" equals path:uri { obfs.path = path.trim().replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }

obfs = comma "obfs" equals type:("http"/"tls") { obfs.type = type; }
obfs_host = comma "obfs-host" equals host:domain { obfs.host = host; };
obfs_uri = comma "obfs-uri" equals path:uri { obfs.path = path }
uri = $[^,]+

udp_relay = comma "udp-relay" equals flag:bool { proxy.udp = flag; }
fast_open = comma "fast-open" equals flag:bool { proxy.tfo = flag; }
reuse = comma "reuse" equals flag:bool { proxy.reuse = flag; }
ecn = comma "ecn" equals flag:bool { proxy.ecn = flag; }
tfo = comma "tfo" equals flag:bool { proxy.tfo = flag; }
ip_version = comma "ip-version" equals match:[^,]+ { proxy["ip-version"] = match.join(""); }
section_name = comma "section-name" equals match:[^,]+ { proxy["section-name"] = match.join(""); }
no_error_alert = comma "no-error-alert" equals match:[^,]+ { proxy["no-error-alert"] = match.join(""); }
underlying_proxy = comma "underlying-proxy" equals match:[^,]+ { proxy["underlying-proxy"] = match.join(""); }
download_bandwidth = comma "download-bandwidth" equals match:[^,]+ { proxy.down = match.join(""); }
test_url = comma "test-url" equals match:[^,]+ { proxy["test-url"] = match.join(""); }
test_udp = comma "test-udp" equals match:[^,]+ { proxy["test-udp"] = match.join(""); }
test_timeout = comma "test-timeout" equals match:$[0-9]+ { proxy["test-timeout"] = parseInt(match.trim()); }
tos = comma "tos" equals match:$[0-9]+ { proxy.tos = parseInt(match.trim()); }
interface = comma "interface" equals match:[^,]+ { proxy.interface = match.join(""); }
allow_other_interface = comma "allow-other-interface" equals flag:bool { proxy["allow-other-interface"] = flag; }
hybrid = comma "hybrid" equals flag:bool { proxy.hybrid = flag; }
idle_timeout = comma "idle-timeout" equals match:$[0-9]+ { proxy["idle-timeout"] = parseInt(match.trim()); }
private_key = comma "private-key" equals match:[^,]+ { proxy["keystore-private-key"] = match.join("").replace(/^"(.*)"$/, '$1'); }
server_fingerprint = comma "server-fingerprint" equals match:[^,]+ { proxy["server-fingerprint"] = match.join("").replace(/^"(.*)"$/, '$1'); }
block_quic = comma "block-quic" equals match:[^,]+ { proxy["block-quic"] = match.join(""); }
udp_port = comma "udp-port" equals match:$[0-9]+ { proxy["udp-port"] = parseInt(match.trim()); }
shadow_tls_version = comma "shadow-tls-version" equals match:$[0-9]+ { proxy["shadow-tls-version"] = parseInt(match.trim()); }
shadow_tls_sni = comma "shadow-tls-sni" equals match:[^,]+ { proxy["shadow-tls-sni"] = match.join(""); }
shadow_tls_password = comma "shadow-tls-password" equals match:[^,]+ { proxy["shadow-tls-password"] = match.join("").replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }
token = comma "token" equals match:[^,]+ { proxy.token = match.join(""); }
alpn = comma "alpn" equals match:[^,]+ { proxy.alpn = match.join(""); }
uuidk = comma "uuid" equals match:[^,]+ { proxy.uuid = match.join(""); }
salamander_password = comma "salamander-password" equals match:[^,]+ { proxy['obfs-password'] = match.join("").replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); proxy.obfs = 'salamander'; }

tag = match:[^=,]* { proxy.name = match.join("").trim(); }
comma = _ "," _
equals = _ "=" _
_ = [ \r\t]*
bool = b:("true"/"false") { return b === "true" }
others = comma [^=,]+ equals [^=,]+
`,tw;function Li(){return tw||(tw=vF.generate(OV)),tw}var wF=qr(Kh()),TV=String.raw`
// global initializer
{{
    function $set(obj, path, value) {
      if (Object(obj) !== obj) return obj;
      if (!Array.isArray(path)) path = path.toString().match(/[^.[\]]+/g) || [];
      path
        .slice(0, -1)
        .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[
        path[path.length - 1]
      ] = value;
      return obj;
    }
}}

// per-parser initializer
{
    const proxy = {};
    const obfs = {};
    const transport = {};
    const $ = {};

    function handleTransport() {
        if (transport.type === "tcp") { /* do nothing */ }
        else if (transport.type === "ws") {
            proxy.network = "ws";
            $set(proxy, "ws-opts.path", transport.path);
            $set(proxy, "ws-opts.headers.Host", transport.host);
        } else if (transport.type === "http") {
            proxy.network = "http";
            $set(proxy, "http-opts.path", transport.path);
            $set(proxy, "http-opts.headers.Host", transport.host);
        }
    }
}

start = (shadowsocksr/shadowsocks/vmess/vless/trojan/https/http/socks5/hysteria2) {
    return proxy;
}

shadowsocksr = tag equals "shadowsocksr"i address method password (ssr_protocol/ssr_protocol_param/obfs_ssr/obfs_ssr_param/obfs_host/obfs_uri/fast_open/udp_relay/udp_port/shadow_tls_version/shadow_tls_sni/shadow_tls_password/ip_mode/block_quic/others)*{
    proxy.type = "ssr";
    // handle ssr obfs
    proxy.obfs = obfs.type;
}
shadowsocks = tag equals "shadowsocks"i address method password (obfs_typev obfs_hostv)? (obfs_ss/obfs_host/obfs_uri/fast_open/udp_relay/udp_port/shadow_tls_version/shadow_tls_sni/shadow_tls_password/ip_mode/block_quic/others)* {
    proxy.type = "ss";
    // handle ss obfs
    if (obfs.type == "http" || obfs.type === "tls") {
        proxy.plugin = "obfs";
        $set(proxy, "plugin-opts.mode", obfs.type);
        $set(proxy, "plugin-opts.host", obfs.host);
        $set(proxy, "plugin-opts.path", obfs.path);
    }
}
vmess = tag equals "vmess"i address method uuid (transport/transport_host/transport_path/over_tls/tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/vmess_alterId/fast_open/udp_relay/ip_mode/public_key/short_id/block_quic/others)* {
    proxy.type = "vmess";
    proxy.cipher = proxy.cipher || "none";
    proxy.alterId = proxy.alterId || 0;
    handleTransport();
}
vless = tag equals "vless"i address uuid (transport/transport_host/transport_path/over_tls/tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/ip_mode/flow/public_key/short_id/block_quic/others)* {
    proxy.type = "vless";
    handleTransport();
}
trojan = tag equals "trojan"i address password (transport/transport_host/transport_path/over_tls/tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/ip_mode/block_quic/others)* {
    proxy.type = "trojan";
    handleTransport();
}
hysteria2 = tag equals "hysteria2"i address password (tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/udp_relay/fast_open/download_bandwidth/salamander_password/ecn/ip_mode/block_quic/others)* {
    proxy.type = "hysteria2";
}
https = tag equals "https"i address (username password)? (tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/ip_mode/block_quic/others)* {
    proxy.type = "http";
    proxy.tls = true;
}
http = tag equals "http"i address (username password)? (fast_open/udp_relay/ip_mode/block_quic/others)* {
    proxy.type = "http";
}
socks5 = tag equals "socks5"i address (username password)? (over_tls/tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/ip_mode/block_quic/others)* {
    proxy.type = "socks5";
}

address = comma server:server comma port:port {
    proxy.server = server;
    proxy.port = port;
}

server = ip/domain

ip = & {
    const start = peg$currPos;
    let j = start;
    while (j < input.length) {
        if (input[j] === ",") break;
        j++;
    }
    peg$currPos = j;
    $.ip = input.substring(start, j).trim();
    return true;
} { return $.ip; }

domain = match:[0-9a-zA-z-_.]+ { 
    const domain = match.join(""); 
    if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {
        return domain;
    }
    throw new Error("Invalid domain: " + domain);
}

port = digits:[0-9]+ { 
    const port = parseInt(digits.join(""), 10); 
    if (port >= 0 && port <= 65535) {
    	return port;
    }
    throw new Error("Invalid port number: " + port);
}

method = comma cipher:cipher { 
    proxy.cipher = cipher;
}
cipher = ("aes-128-cfb"/"aes-128-ctr"/"aes-128-gcm"/"aes-192-cfb"/"aes-192-ctr"/"aes-192-gcm"/"aes-256-cfb"/"aes-256-ctr"/"aes-256-gcm"/"auto"/"bf-cfb"/"camellia-128-cfb"/"camellia-192-cfb"/"camellia-256-cfb"/"chacha20-ietf-poly1305"/"chacha20-ietf"/"chacha20-poly1305"/"chacha20"/"none"/"rc4-md5"/"rc4"/"salsa20"/"xchacha20-ietf-poly1305"/"2022-blake3-aes-128-gcm"/"2022-blake3-aes-256-gcm");

username = & {
    let j = peg$currPos; 
    let start, end;
    let first = true;
    while (j < input.length) {
        if (input[j] === ',') {
            if (first) {
                start = j + 1;
                first = false;
            } else {
                end = j;
                break;
            }
        }
        j++;
    }
    const match = input.substring(start, end);
    if (match.indexOf("=") === -1) {
        $.username = match;
        peg$currPos = end;
        return true;
    }
} { proxy.username = $.username; }
password = comma '"' match:[^"]* '"' { proxy.password = match.join(""); }
uuid = comma '"' match:[^"]+ '"' { proxy.uuid = match.join(""); }

obfs_typev = comma type:("http"/"tls") { obfs.type = type; }
obfs_hostv = comma match:[^,]+ { obfs.host = match.join(""); }

obfs_ss = comma "obfs-name" equals type:("http"/"tls") { obfs.type = type; }

obfs_ssr = comma "obfs" equals type:("plain"/"http_simple"/"http_post"/"random_head"/"tls1.2_ticket_auth"/"tls1.2_ticket_fastauth") { obfs.type = type; }
obfs_ssr_param = comma "obfs-param" equals match:$[^,]+ { proxy["obfs-param"] = match; }

obfs_host = comma "obfs-host" equals host:domain { obfs.host = host; }
obfs_uri = comma "obfs-uri" equals uri:uri { obfs.path = uri; }
uri = $[^,]+

transport = comma "transport" equals type:("tcp"/"ws"/"http") { transport.type = type; }
transport_host = comma "host" equals host:domain { transport.host = host; }
transport_path = comma "path" equals path:uri { transport.path = path; }

ssr_protocol = comma "protocol" equals protocol:("origin"/"auth_sha1_v4"/"auth_aes128_md5"/"auth_aes128_sha1"/"auth_chain_a"/"auth_chain_b") { proxy.protocol = protocol; }
ssr_protocol_param = comma "protocol-param" equals param:$[^=,]+ { proxy["protocol-param"] = param; }

vmess_alterId = comma "alterId" equals alterId:$[0-9]+ { proxy.alterId = parseInt(alterId); } 

udp_port = comma "udp-port" equals match:$[0-9]+ { proxy["udp-port"] = parseInt(match.trim()); }
shadow_tls_version = comma "shadow-tls-version" equals match:$[0-9]+ { proxy["shadow-tls-version"] = parseInt(match.trim()); }
shadow_tls_sni = comma "shadow-tls-sni" equals match:[^,]+ { proxy["shadow-tls-sni"] = match.join(""); }
shadow_tls_password = comma "shadow-tls-password" equals match:[^,]+ { proxy["shadow-tls-password"] = match.join(""); }

over_tls = comma "over-tls" equals flag:bool { proxy.tls = flag; }
tls_name = comma sni:("tls-name") equals host:domain { proxy.sni = host; }
sni = comma sni:("sni") equals host:domain { proxy.sni = host; }
tls_verification = comma "skip-cert-verify" equals flag:bool { proxy["skip-cert-verify"] = flag; }
tls_cert_sha256 = comma "tls-cert-sha256" equals match:[^,]+ { proxy["tls-fingerprint"] = match.join("").replace(/^"(.*)"$/, '$1'); }
tls_pubkey_sha256 = comma "tls-pubkey-sha256" equals match:[^,]+ { proxy["tls-pubkey-sha256"] = match.join("").replace(/^"(.*)"$/, '$1'); }

flow = comma "flow" equals match:[^,]+ { proxy["flow"] = match.join("").replace(/^"(.*)"$/, '$1'); }
public_key = comma "public-key" equals match:[^,]+ { proxy["reality-opts"] = proxy["reality-opts"] || {}; proxy["reality-opts"]["public-key"] = match.join("").replace(/^"(.*)"$/, '$1'); }
short_id = comma "short-id" equals match:[^,]+ { proxy["reality-opts"] = proxy["reality-opts"] || {}; proxy["reality-opts"]["short-id"] = match.join("").replace(/^"(.*)"$/, '$1'); }

fast_open = comma "fast-open" equals flag:bool { proxy.tfo = flag; }
udp_relay = comma "udp" equals flag:bool { proxy.udp = flag; }
ip_mode = comma "ip-mode" equals match:[^,]+ { proxy["ip-version"] = match.join(""); }

ecn = comma "ecn" equals flag:bool { proxy.ecn = flag; }
download_bandwidth = comma "download-bandwidth" equals match:[^,]+ { proxy.down = match.join(""); }
salamander_password = comma "salamander-password" equals match:[^,]+ { proxy['obfs-password'] = match.join(""); proxy.obfs = 'salamander'; }

block_quic = comma "block-quic" equals flag:bool { if(flag) proxy["block-quic"] = "on"; else proxy["block-quic"] = "off"; }

tag = match:[^=,]* { proxy.name = match.join("").trim(); }
comma = _ "," _
equals = _ "=" _
_ = [ \r\t]*
bool = b:("true"/"false") { return b === "true" }
others = comma [^=,]+ equals [^=,]+
`,rw;function Ta(){return rw||(rw=wF.generate(TV)),rw}var EF=qr(Kh()),xV=String.raw`
// global initializer
{{
    function $set(obj, path, value) {
      if (Object(obj) !== obj) return obj;
      if (!Array.isArray(path)) path = path.toString().match(/[^.[\]]+/g) || [];
      path
        .slice(0, -1)
        .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[
        path[path.length - 1]
      ] = value;
      return obj;
    }
}}

// per-parse initializer
{
	const proxy = {};
    const obfs = {};
    const $ = {};

    function handleObfs() {
        if (obfs.type === "ws" || obfs.type === "wss") {
            proxy.network = "ws";
            if (obfs.type === 'wss') {
                proxy.tls = true;
            }
            $set(proxy, "ws-opts.path", obfs.path);
            $set(proxy, "ws-opts.headers.Host", obfs.host);
        } else if (obfs.type === "over-tls") {
            proxy.tls = true;
        } else if (obfs.type === "http") {
            proxy.network = "http";
            $set(proxy, "http-opts.path", obfs.path);
            $set(proxy, "http-opts.headers.Host", obfs.host);
        }
    }
}

start = (trojan/shadowsocks/vmess/vless/http/socks5) {
    return proxy
}

trojan = "trojan" equals address
    (password/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/obfs/obfs_host/obfs_uri/tag/udp_relay/udp_over_tcp/fast_open/server_check_url/reality_base64_pubkey/reality_hex_shortid/others)* {
    proxy.type = "trojan";
    handleObfs();
}

shadowsocks = "shadowsocks" equals address
    (password/method/obfs_ssr/obfs_ss/obfs_host/obfs_uri/ssr_protocol/ssr_protocol_param/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/udp_relay/udp_over_tcp_new/fast_open/tag/server_check_url/reality_base64_pubkey/reality_hex_shortid/others)* {
    if (proxy.protocol || proxy.type === "ssr") {
        proxy.type = "ssr";
        if (!proxy.protocol) {
            proxy.protocol = "origin";
        }
        // handle ssr obfs
        if (obfs.host) proxy["obfs-param"] = obfs.host;
        if (obfs.type) proxy.obfs = obfs.type;
    } else {
        proxy.type = "ss";
        // handle ss obfs
        if (obfs.type == "http" || obfs.type === "tls") {
            proxy.plugin = "obfs";
            $set(proxy, "plugin-opts", {
                mode: obfs.type
            });
        } else if (obfs.type === "ws" || obfs.type === "wss") {
            proxy.plugin = "v2ray-plugin";
            $set(proxy, "plugin-opts.mode", "websocket");
            if (obfs.type === "wss") {
                $set(proxy, "plugin-opts.tls", true);
            }
        } else if (obfs.type === 'over-tls') {
            throw new Error('ss over-tls is not supported');
        }
        if (obfs.type) {
            $set(proxy, "plugin-opts.host", obfs.host);
            $set(proxy, "plugin-opts.path", obfs.path);
        }
    }
}

vmess = "vmess" equals address
    (uuid/method/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/obfs/obfs_host/obfs_uri/udp_relay/udp_over_tcp/fast_open/aead/server_check_url/reality_base64_pubkey/reality_hex_shortid/others)* {
    proxy.type = "vmess";
    proxy.cipher = proxy.cipher || "none";
    if (proxy.aead === false) {
        proxy.alterId = 1;
    } else {
        proxy.alterId = 0;
    }
    handleObfs();
}

vless = "vless" equals address
    (uuid/method/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/obfs/obfs_host/obfs_uri/udp_relay/udp_over_tcp/fast_open/aead/server_check_url/reality_base64_pubkey/reality_hex_shortid/vless_flow/others)* {
    proxy.type = "vless";
    proxy.cipher = proxy.cipher || "none";
    handleObfs();
}

http = "http" equals address 
    (username/password/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/fast_open/udp_relay/udp_over_tcp/server_check_url/reality_base64_pubkey/reality_hex_shortid/others)*{
    proxy.type = "http";
}

socks5 = "socks5" equals address
    (username/password/password/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/fast_open/udp_relay/udp_over_tcp/server_check_url/reality_base64_pubkey/reality_hex_shortid/others)* {
    proxy.type = "socks5";
}
    
address = server:server ":" port:port {
    proxy.server = server;
    proxy.port = port;
}
server = ip/domain

domain = match:[0-9a-zA-z-_.]+ { 
    const domain = match.join(""); 
    if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {
        return domain;
    }
}

ip = & {
    const start = peg$currPos;
    let end;
    let j = start;
    while (j < input.length) {
        if (input[j] === ",") break;
        if (input[j] === ":") end = j;
        j++;
    }
    peg$currPos = end || j;
    $.ip = input.substring(start, end).trim();
    return true;
} { return $.ip; }

port = digits:[0-9]+ { 
    const port = parseInt(digits.join(""), 10); 
    if (port >= 0 && port <= 65535) {
    	return port;
    }
}

username = comma "username" equals username:[^,]+ { proxy.username = username.join("").trim(); }
password = comma "password" equals password:[^,]+ { proxy.password = password.join("").trim(); }
uuid = comma "password" equals uuid:[^,]+ { proxy.uuid = uuid.join("").trim(); }

method = comma "method" equals cipher:cipher { 
    proxy.cipher = cipher;
};
cipher = ("aes-128-cfb"/"aes-128-ctr"/"aes-128-gcm"/"aes-192-cfb"/"aes-192-ctr"/"aes-192-gcm"/"aes-256-cfb"/"aes-256-ctr"/"aes-256-gcm"/"bf-cfb"/"cast5-cfb"/"chacha20-ietf-poly1305"/"chacha20-ietf"/"chacha20-poly1305"/"chacha20"/"des-cfb"/"none"/"rc2-cfb"/"rc4-md5-6"/"rc4-md5"/"salsa20"/"xchacha20-ietf-poly1305"/"2022-blake3-aes-128-gcm"/"2022-blake3-aes-256-gcm");
aead = comma "aead" equals flag:bool { proxy.aead = flag; }

udp_relay = comma "udp-relay" equals flag:bool { proxy.udp = flag; }
udp_over_tcp = comma "udp-over-tcp" equals flag:bool { throw new Error("UDP over TCP is not supported"); }
udp_over_tcp_new = comma "udp-over-tcp" equals param:$[^=,]+ { if (param === "sp.v1") { proxy["udp-over-tcp"] = true; proxy["udp-over-tcp-version"] = 1; } else if (param === "sp.v2") { proxy["udp-over-tcp"] = true; proxy["udp-over-tcp-version"] = 2; } else if (param === "true") { proxy["_ssr_python_uot"] = true; } else { throw new Error("Invalid value for udp-over-tcp"); } }

fast_open = comma "fast-open" equals flag:bool { proxy.tfo = flag; }

over_tls = comma "over-tls" equals flag:bool { proxy.tls = flag; }
tls_host = comma "tls-host" equals sni:domain { proxy.sni = sni; }
tls_verification = comma "tls-verification" equals flag:bool { 
    proxy["skip-cert-verify"] = !flag;
}
tls_fingerprint = comma "tls-cert-sha256" equals tls_fingerprint:$[^,]+ { proxy["tls-fingerprint"] = tls_fingerprint.trim(); }
tls_pubkey_sha256 = comma "tls-pubkey-sha256" equals param:$[^=,]+ { proxy["tls-pubkey-sha256"] = param; }
tls_alpn = comma "tls-alpn" equals param:$[^=,]+ { proxy["tls-alpn"] = param; }
tls_no_session_ticket = comma "tls-no-session-ticket" equals flag:bool { 
    proxy["tls-no-session-ticket"] = flag;
}
tls_no_session_reuse = comma "tls-no-session-reuse" equals flag:bool { 
    proxy["tls-no-session-reuse"] = flag;
}

obfs_ss = comma "obfs" equals type:("http"/"tls"/"wss"/"ws"/"over-tls") { obfs.type = type; return type; }
obfs_ssr = comma "obfs" equals type:("plain"/"http_simple"/"http_post"/"random_head"/"tls1.2_ticket_auth"/"tls1.2_ticket_fastauth") { proxy.type = "ssr"; obfs.type = type; return type; }
obfs = comma "obfs" equals type:("wss"/"ws"/"over-tls"/"http") { obfs.type = type; return type; };

obfs_host = comma "obfs-host" equals host:domain { obfs.host = host; }
obfs_uri = comma "obfs-uri" equals uri:uri { obfs.path = uri; }

ssr_protocol = comma "ssr-protocol" equals protocol:("origin"/"auth_sha1_v4"/"auth_aes128_md5"/"auth_aes128_sha1"/"auth_chain_a"/"auth_chain_b") { proxy.protocol = protocol; return protocol; }
ssr_protocol_param = comma "ssr-protocol-param" equals param:$[^=,]+ { proxy["protocol-param"] = param; }

reality_base64_pubkey = comma "reality-base64-pubkey" equals param:$[^=,]+ {
    $set(proxy, "reality-opts.public-key", param);
 }
reality_hex_shortid = comma "reality-hex-shortid" equals param:$[^=,]+ {
    $set(proxy, "reality-opts.short-id", param);
}

vless_flow = comma "vless-flow" equals param:$[^=,]+ { proxy["flow"] = param; }
server_check_url = comma "server_check_url" equals param:$[^=,]+ { proxy["test-url"] = param; }

uri = $[^,]+

tag = comma "tag" equals tag:[^=,]+ { proxy.name = tag.join(""); }
others = comma [^=,]+ equals [^=,]+
comma = _ "," _
equals = _ "=" _
_ = [ \r\t]*
bool = b:("true"/"false") { return b === "true" }
`,nw;function Iu(){return nw||(nw=EF.generate(xV)),nw}var AF=qr(Kh()),NV=String.raw`
// global initializer
{{
  function $set(obj, path, value) {
    if (Object(obj) !== obj) return obj;
    if (!Array.isArray(path)) path = path.toString().match(/[^.[\]]+/g) || [];
    path
      .slice(0, -1)
      .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[
      path[path.length - 1]
    ] = value;
    return obj;
  }

  function toBool(str) {
    if (typeof str === 'undefined' || str === null) return undefined;
    return /(TRUE)|1/i.test(str);
  }
}}

{
  const proxy = {};
  const obfs = {};
  const $ = {};
  const params = {};
}

start = (trojan) {
  return proxy
}

trojan = "trojan://" password:password "@" server:server ":" port:port "/"? params? name:name?{
  proxy.type = "trojan";
  proxy.password = password;
  proxy.server = server;
  proxy.port = port;
  proxy.name = name;

  // name may be empty
  if (!proxy.name) {
    proxy.name = server + ":" + port;
  }
};

password = match:$[^@]+ {
  return decodeURIComponent(match);
};

server = ip/domain;

domain = match:[0-9a-zA-z-_.]+ { 
  const domain = match.join(""); 
  if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {
    return domain;
  }
}

ip = & {
  const start = peg$currPos;
  let end;
  let j = start;
  while (j < input.length) {
    if (input[j] === ",") break;
    if (input[j] === ":") end = j;
    j++;
  }
  peg$currPos = end || j;
  $.ip = input.substring(start, end).trim();
  return true;
} { return $.ip; }

port = digits:[0-9]+ { 
  const port = parseInt(digits.join(""), 10); 
  if (port >= 0 && port <= 65535) {
    return port;
  } else {
    throw new Error("Invalid port: " + port);
  }
}

params = "?" head:param tail:("&"@param)* {
  for (const [key, value] of Object.entries(params)) {
    params[key] = decodeURIComponent(value);
  }
  proxy["skip-cert-verify"] = toBool(params["allowInsecure"]);
  proxy.sni = params["sni"] || params["peer"];
  proxy['client-fingerprint'] = params.fp;
  proxy.alpn = params.alpn ? decodeURIComponent(params.alpn).split(',') : undefined;

  if (toBool(params["ws"])) {
    proxy.network = "ws";
    $set(proxy, "ws-opts.path", params["wspath"]);
  }
  
  if (params["type"]) {
    let httpupgrade
    proxy.network = params["type"]
    if(proxy.network === 'httpupgrade') {
      proxy.network = 'ws'
      httpupgrade = true
    }
    if (['grpc'].includes(proxy.network)) {
        proxy[proxy.network + '-opts'] = {
            'grpc-service-name': params["serviceName"],
            '_grpc-type': params["mode"],
            '_grpc-authority': params["authority"],
        };
    } else {
      if (params["path"]) {
        $set(proxy, proxy.network+"-opts.path", decodeURIComponent(params["path"]));  
      }
      if (params["host"]) {
        $set(proxy, proxy.network+"-opts.headers.Host", decodeURIComponent(params["host"])); 
      }
      if (httpupgrade) {
        $set(proxy, proxy.network+"-opts.v2ray-http-upgrade", true); 
        $set(proxy, proxy.network+"-opts.v2ray-http-upgrade-fast-open", true); 
      }
    }
    if (['reality'].includes(params.security)) {
      const opts = {};
      if (params.pbk) {
        opts['public-key'] = params.pbk;
      }
      if (params.sid) {
        opts['short-id'] = params.sid;
      }
      if (params.spx) {
        opts['_spider-x'] = params.spx;
      }
      if (params.mode) {
        proxy._mode = params.mode;
      }
      if (params.extra) {
        proxy._extra = params.extra;
      }
      if (Object.keys(opts).length > 0) {
        $set(proxy, params.security+"-opts", opts); 
      }
    }
  }

  proxy.udp = toBool(params["udp"]);
  proxy.tfo = toBool(params["tfo"]);
}

param = kv/single;

kv = key:$[a-z]i+ "=" value:$[^&#]i* {
  params[key] = value;
}

single = key:$[a-z]i+ {
  params[key] = true;
};

name = "#" + match:$.* {
  return decodeURIComponent(match);
}
`,iw;function sw(){return iw||(iw=AF.generate(NV)),iw}var lw=qr(ow()),Al=qr(Wl());function bF(t){let[e,n]=t.match(/,\s*?port-hopping\s*?=\s*?["']?\s*?((\d+(-\d+)?)([,;]\d+(-\d+)?)*)\s*?["']?\s*?/)||[];return{port_hopping:n?n.replace(/;/g,","):void 0,line:e?t.replace(e,""):t}}function kV(){return{name:"URI PROXY Parser",test:t=>/^(socks5\+tls|socks5|http|https):\/\//.test(t),parse:t=>{let[e,n,u,s,p,g,y,E,m]=t.match(/^(socks5|http|http)(\+tls|s)?:\/\/(?:(.*?):(.*?)@)?(.*?)(?::(\d+?))?\/?(\?.*?)?(?:#(.*?))?$/);if(y)y=parseInt(y,10);else{if(u)y=443;else if(n==="http")y=80;else throw R.error(`port is not present in line: ${t}`),new Error(`port is not present in line: ${t}`);R.info(`port is not present in line: ${t}, set to ${y}`)}return{name:m!=null?decodeURIComponent(m):`${n} ${g}:${y}`,type:n,tls:!!u,server:g,port:y,username:s!=null?decodeURIComponent(s):void 0,password:p!=null?decodeURIComponent(p):void 0}}}}function LV(){return{name:"URI SOCKS Parser",test:t=>/^socks:\/\//.test(t),parse:t=>{let[e,n,u,s,p,g,y]=t.match(/^(socks)?:\/\/(?:(.*)@)?(.*?)(?::(\d+?))?(\?.*?)?(?:#(.*?))?$/);if(p)p=parseInt(p,10);else throw R.error(`port is not present in line: ${t}`),new Error(`port is not present in line: ${t}`);let E,m;if(u){let C=dt.decode(decodeURIComponent(u)).split(":");E=C[0],m=C[1]}return{name:y!=null?decodeURIComponent(y):`${n} ${s}:${p}`,type:"socks5",server:s,port:p,username:E,password:m}}}}function UV(){return{name:"URI SS Parser",test:t=>/^ss:\/\//.test(t),parse:t=>{let e=t.split("ss://")[1],n=t.split("#")[1],u={type:"ss"};e=e.split("#")[0];let s=e.match(/@([^/?]*)(\/|\?|$)/),p=decodeURIComponent(e.split("@")[0]),g;p?.startsWith("2022-blake3-")?g=p:g=dt.decode(p);let y="";if(s)e.includes("?")&&(y=e.match(/(\?.*)$/)[1]);else{if(e.includes("?")){let w=e.match(/^(.*)(\?.*)$/);e=w[1],y=w[2]}if(e=dt.decode(e),y){if(/(&|\?)v2ray-plugin=/.test(y)){let w=y.match(/(&|\?)v2ray-plugin=(.*?)(&|$)/)[2];w&&(u.plugin="v2ray-plugin",u["plugin-opts"]=JSON.parse(dt.decode(w)))}e=`${e}${y}`}g=e.match(/(^.*)@/)?.[1],s=e.match(/@([^/@]*)(\/|$)/)}let E={};for(let w of y.replace(/^\?/,"").split("&"))if(w){let[j,tt]=w.split("="),J=tt;J=decodeURIComponent(tt),E[j]=J}if(u.tls=E.security&&E.security!=="none",u["skip-cert-verify"]=!!E.allowInsecure,u.sni=E.sni||E.peer,u["client-fingerprint"]=E.fp,u.alpn=E.alpn?decodeURIComponent(E.alpn).split(","):void 0,E.ws&&(u.network="ws",Al.default.set(u,"ws-opts.path",E.wspath)),E.type){let w;if(u.network=E.type,u.network==="httpupgrade"&&(u.network="ws",w=!0),["grpc"].includes(u.network)?u[u.network+"-opts"]={"grpc-service-name":E.serviceName,"_grpc-type":E.mode,"_grpc-authority":E.authority}:(E.path&&Al.default.set(u,u.network+"-opts.path",decodeURIComponent(E.path)),E.host&&Al.default.set(u,u.network+"-opts.headers.Host",decodeURIComponent(E.host)),w&&(Al.default.set(u,u.network+"-opts.v2ray-http-upgrade",!0),Al.default.set(u,u.network+"-opts.v2ray-http-upgrade-fast-open",!0))),["reality"].includes(E.security)){let j={};E.pbk&&(j["public-key"]=E.pbk),E.sid&&(j["short-id"]=E.sid),E.spx&&(j["_spider-x"]=E.spx),E.mode&&(u._mode=E.mode),E.extra&&(u._extra=E.extra),Object.keys(j).length>0&&Al.default.set(u,E.security+"-opts",j)}}u.udp=!!E.udp;let m=s[1],C=m.lastIndexOf(":");u.server=m.substring(0,C),u.port=`${m.substring(C+1)}`.match(/\d+/)?.[0];let a=g.match(/(^.*?):(.*$)/);u.cipher=a?.[1],u.password=a?.[2];let H=e.match(/[?&]plugin=([^&]+)/),X=e.match(/[?&]shadow-tls=([^&]+)/);if(H){let w=("plugin="+decodeURIComponent(H[1])).split(";"),j={};for(let tt of w){let[J,N]=tt.split("=");J&&(j[J]=N||!0)}switch(j.plugin){case"obfs-local":case"simple-obfs":u.plugin="obfs",u["plugin-opts"]={mode:j.obfs,host:hr(j["obfs-host"])};break;case"v2ray-plugin":u.plugin="v2ray-plugin",u["plugin-opts"]={mode:"websocket",host:hr(j["obfs-host"]),path:hr(j.path),tls:ec(j.tls)};break;case"shadow-tls":{u.plugin="shadow-tls";let tt=hr(j.version);u["plugin-opts"]={host:hr(j.host),password:hr(j.password),version:tt?parseInt(tt,10):void 0};break}default:throw new Error(`Unsupported plugin option: ${j.plugin}`)}}if(X){let w=JSON.parse(dt.decode(X[1])),j=hr(w.version),tt=hr(w.address),J=hr(w.port);u.plugin="shadow-tls",u["plugin-opts"]={host:hr(w.host),password:hr(w.password),version:j?parseInt(j,10):void 0},tt&&(u.server=tt),J&&(u.port=parseInt(J,10))}return/(&|\?)uot=(1|true)/i.test(y)&&(u["udp-over-tcp"]=!0),/(&|\?)tfo=(1|true)/i.test(y)&&(u.tfo=!0),n!=null&&(n=decodeURIComponent(n)),u.name=n??`SS ${u.server}:${u.port}`,u}}}function jV(){return{name:"URI SSR Parser",test:t=>/^ssr:\/\//.test(t),parse:t=>{t=dt.decode(t.split("ssr://")[1]);let e=t.indexOf(":origin");e===-1&&(e=t.indexOf(":auth_"));let n=t.substring(0,e),u=n.substring(0,n.lastIndexOf(":")),s=n.substring(n.lastIndexOf(":")+1),p=t.substring(e+1).split("/?")[0].split(":"),g={type:"ssr",server:u,port:s,protocol:p[0],cipher:p[1],obfs:p[2],password:dt.decode(p[3])},y={};if(t=t.split("/?")[1].split("&"),t.length>1)for(let E of t){let[m,C]=E.split("=");C=C.trim(),C.length>0&&C!=="(null)"&&(y[m]=C)}return g={...g,name:y.remarks?dt.decode(y.remarks):g.server,"protocol-param":hr(dt.decode(y.protoparam||"").replace(/\s/g,"")),"obfs-param":hr(dt.decode(y.obfsparam||"").replace(/\s/g,""))},g}}}function HV(){return{name:"URI VMess Parser",test:t=>/^vmess:\/\//.test(t),parse:t=>{t=t.split("vmess://")[1];let e=dt.decode(t.replace(/\?.*?$/,""));if(/=\s*vmess/.test(e)){let n=e.split(",").map(p=>p.trim()),u={};for(let p of n)if(p.indexOf("=")!==-1){let[g,y]=p.split("=");u[g.trim()]=y.trim()}let s={name:n[0].split("=")[0].trim(),type:"vmess",server:n[1],port:n[2],cipher:hr(n[3],"auto"),uuid:n[4].match(/^"(.*)"$/)[1],tls:u.obfs==="wss",udp:ec(u["udp-relay"]),tfo:ec(u["fast-open"]),"skip-cert-verify":Ql(u["tls-verification"])?!u["tls-verification"]:void 0};if(Ql(u.obfs))if(u.obfs==="ws"||u.obfs==="wss"){s.network="ws",s["ws-opts"].path=(hr(u["obfs-path"])||'"/"').match(/^"(.*)"$/)[1];let p=u["obfs-header"];p&&p.indexOf("Host")!==-1&&(p=p.match(/Host:\s*([a-zA-Z0-9-.]*)/)[1]),la(p)&&(s["ws-opts"].headers={Host:p})}else throw new Error(`Unsupported obfs: ${u.obfs}`);return s}else{let n={};try{n=JSON.parse(e)}catch{let[y,E,m]=/(^[^?]+?)\/?\?(.*)$/.exec(t);e=dt.decode(E);for(let j of m.split("&")){let[tt,J]=j.split("="),N=J;N=decodeURIComponent(J),N.indexOf(",")===-1?n[tt]=N:n[tt]=N.split(",")}let[C,a,H,X,w]=/(^[^:]+?):([^:]+?)@(.*):(\d+)$/.exec(e);n.scy=a,n.id=H,n.port=w,n.add=X}let u=n.add,s=parseInt(ec(n.port),10),p={name:n.ps??n.remarks??n.remark??`VMess ${u}:${s}`,type:"vmess",server:u,port:s,cipher:["auto","aes-128-gcm","chacha20-poly1305","none"].includes(n.scy)?n.scy:"auto",uuid:n.id,alterId:parseInt(ec(n.aid??n.alterId,0),10),tls:["tls",!0,1,"1"].includes(n.tls),"skip-cert-verify":Ql(n.verify_cert)?!n.verify_cert:void 0};!p["skip-cert-verify"]&&Ql(n.allowInsecure)&&(p["skip-cert-verify"]=/(TRUE)|1/i.test(n.allowInsecure)),p.tls&&(n.sni&&n.sni!==""?p.sni=n.sni:n.peer&&n.peer!==""&&(p.sni=n.peer));let g=!1;if(n.net==="ws"||n.obfs==="websocket"?p.network="ws":["http"].includes(n.net)||["http"].includes(n.obfs)||["http"].includes(n.type)?p.network="http":["grpc","kcp","quic"].includes(n.net)?p.network=n.net:n.net==="httpupgrade"||p.network==="httpupgrade"?(p.network="ws",g=!0):(n.net==="h2"||p.network==="h2")&&(p.network="h2"),p.network){let y=n.host??n.obfsParam;try{let m=JSON.parse(y)?.Host;m&&(y=m)}catch{}let E=n.path;if(["ws"].includes(p.network)&&(E=E||"/"),p.network==="http"&&(y&&(y=y.split(",").map(m=>m.trim()),y=Array.isArray(y)?y[0]:y),E?E=Array.isArray(E)?E[0]:E:E="/"),E||y||["kcp","quic"].includes(p.network))if(["grpc"].includes(p.network))p[`${p.network}-opts`]={"grpc-service-name":hr(E),"_grpc-type":hr(n.type),"_grpc-authority":hr(n.authority)};else if(["kcp","quic"].includes(p.network))p[`${p.network}-opts`]={[`_${p.network}-type`]:hr(n.type),[`_${p.network}-host`]:hr(hr(y)),[`_${p.network}-path`]:hr(E)};else{let m={path:hr(E),headers:{Host:hr(y)}};g&&(m["v2ray-http-upgrade"]=!0,m["v2ray-http-upgrade-fast-open"]=!0),p[`${p.network}-opts`]=m}else delete p.network}return p["client-fingerprint"]=n.fp,p.alpn=n.alpn?n.alpn.split(","):void 0,p}}}}function yF(){return{name:"URI VLESS Parser",test:t=>/^vless:\/\//.test(t),parse:t=>{t=t.split("vless://")[1];let e,n=/^(.*?)@(.*?):(\d+)\/?(\?(.*?))?(?:#(.*?))?$/.exec(t);if(!n){let[X,w,j]=/^(.*?)(\?.*?$)/.exec(t);t=`${dt.decode(w)}${j}`,n=/^(.*?)@(.*?):(\d+)\/?(\?(.*?))?(?:#(.*?))?$/.exec(t),e=!0}let[u,s,p,g,y,E="",m]=n;e&&(s=s.replace(/^.*?:/g,"")),g=parseInt(`${g}`,10),s=decodeURIComponent(s),m!=null&&(m=decodeURIComponent(m));let C={type:"vless",name:m,server:p,port:g,uuid:s},a={};for(let X of E.split("&"))if(X){let[w,j]=X.split("="),tt=j;tt=decodeURIComponent(j),a[w]=tt}if(C.name=m??a.remarks??a.remark??`VLESS ${p}:${g}`,C.tls=a.security&&a.security!=="none",e&&/TRUE|1/i.test(a.tls)&&(C.tls=!0,a.security=a.security??"reality"),C.sni=a.sni||a.peer,C.flow=a.flow,!C.flow&&e&&a.xtls){let X=[void 0,"xtls-rprx-direct","xtls-rprx-vision"][a.xtls];X&&(C.flow=X)}if(C["client-fingerprint"]=a.fp,C.alpn=a.alpn?a.alpn.split(","):void 0,C["skip-cert-verify"]=/(TRUE)|1/i.test(a.allowInsecure),["reality"].includes(a.security)){let X={};a.pbk&&(X["public-key"]=a.pbk),a.sid&&(X["short-id"]=a.sid),a.spx&&(X["_spider-x"]=a.spx),Object.keys(X).length>0&&(C[`${a.security}-opts`]=X)}let H=!1;if(C.network=a.type,C.network==="tcp"&&a.headerType==="http"?C.network="http":C.network==="httpupgrade"&&(C.network="ws",H=!0),!C.network&&e&&a.obfs&&(C.network=a.obfs,["none"].includes(C.network)&&(C.network="tcp")),["websocket"].includes(C.network)&&(C.network="ws"),C.network&&!["tcp","none"].includes(C.network)){let X={},w=a.host??a.obfsParam;if(w)if(a.obfsParam)try{let j=JSON.parse(w);X.headers=j}catch{X.headers={Host:w}}else X.headers={Host:w};a.serviceName?(X[`${C.network}-service-name`]=a.serviceName,["grpc"].includes(C.network)&&a.authority&&(X["_grpc-authority"]=a.authority)):e&&a.path&&(["ws","http","h2"].includes(C.network)||(X[`${C.network}-service-name`]=a.path,delete a.path)),a.path&&(X.path=a.path),["grpc"].includes(C.network)&&(X["_grpc-type"]=a.mode||"gun"),H&&(X["v2ray-http-upgrade"]=!0,X["v2ray-http-upgrade-fast-open"]=!0),Object.keys(X).length>0&&(C[`${C.network}-opts`]=X),C.network==="kcp"&&(a.seed&&(C.seed=a.seed),C.headerType=a.headerType||"none"),a.mode&&(C._mode=a.mode),a.extra&&(C._extra=a.extra)}return a.encryption&&(C.encryption=a.encryption),a.pqv&&(C._pqv=a.pqv),C}}}function MV(){return{name:"URI AnyTLS Parser",test:t=>/^anytls:\/\//.test(t),parse:t=>{let e=yF().parse(t.replace("anytls","vless"));t=t.split(/anytls:\/\//)[1];let[n,u,s,p,g="",y]=/^(.*?)@(.*?)(?::(\d+))?\/?(?:\?(.*?))?(?:#(.*?))?$/.exec(t);u=decodeURIComponent(u),p=parseInt(`${p}`,10),isNaN(p)&&(p=443),u=decodeURIComponent(u),y!=null&&(y=decodeURIComponent(y)),y=y??`AnyTLS ${s}:${p}`;let E={...e,uuid:void 0,type:"anytls",name:y,server:s,port:p,password:u};for(let m of g.split("&"))if(m){let[C,a]=m.split("=");C=C.replace(/_/g,"-"),a=decodeURIComponent(a),["alpn"].includes(C)?E[C]=a?a.split(","):void 0:["insecure"].includes(C)?E["skip-cert-verify"]=/(TRUE)|1/i.test(a):["udp"].includes(C)?E[C]=/(TRUE)|1/i.test(a):Object.keys(E).includes(C)||(E[C]=a)}return["tcp"].includes(E.network)&&!E["reality-opts"]&&(delete E.network,delete E.security),E}}}function qV(){return{name:"URI Hysteria2 Parser",test:t=>/^(hysteria2|hy2):\/\//.test(t),parse:t=>{t=t.split(/(hysteria2|hy2):\/\//)[2];let e,[n,u,s,p,g,y,E,m,C,a,H="",X]=/^(.*?)@(.*?)(:((\d+(-\d+)?)([,;]\d+(-\d+)?)*))?\/?(\?(.*?))?(?:#(.*?))?$/.exec(t);/^\d+$/.test(g)?(g=parseInt(`${g}`,10),isNaN(g)&&(g=443)):g?(e=g,g=Rf(e)):g=443,u=decodeURIComponent(u),X!=null&&(X=decodeURIComponent(X)),X=X??`Hysteria2 ${s}:${g}`;let w={type:"hysteria2",name:X,server:s,port:g,ports:e,password:u},j={};for(let N of H.split("&"))if(N){let[Q,at]=N.split("="),q=at;q=decodeURIComponent(at),j[Q]=q}w.sni=j.sni,!w.sni&&j.peer&&(w.sni=j.peer),j.obfs&&j.obfs!=="none"&&(w.obfs=j.obfs),j.mport&&(w.ports=j.mport),w["obfs-password"]=j["obfs-password"],w["skip-cert-verify"]=/(TRUE)|1/i.test(j.insecure),w.tfo=/(TRUE)|1/i.test(j.fastopen),w["tls-fingerprint"]=j.pinSHA256;let tt=j["hop-interval"]||j.hop_interval;/^\d+$/.test(tt)&&(w["hop-interval"]=parseInt(`${tt}`,10));let J=j.keepalive;return/^\d+$/.test(J)&&(w.keepalive=parseInt(`${J}`,10)),w}}}function VV(){return{name:"URI Hysteria Parser",test:t=>/^(hysteria|hy):\/\//.test(t),parse:t=>{t=t.split(/(hysteria|hy):\/\//)[2];let[e,n,u,s,p,g="",y]=/^(.*?)(:(\d+))?\/?(\?(.*?))?(?:#(.*?))?$/.exec(t);s=parseInt(`${s}`,10),isNaN(s)&&(s=443),y!=null&&(y=decodeURIComponent(y)),y=y??`Hysteria ${n}:${s}`;let E={type:"hysteria",name:y,server:n,port:s},m={};for(let C of g.split("&"))if(C){let[a,H]=C.split("=");a=a.replace(/_/,"-"),H=decodeURIComponent(H),["alpn"].includes(a)?E[a]=H?H.split(","):void 0:["insecure"].includes(a)?E["skip-cert-verify"]=/(TRUE)|1/i.test(H):["auth"].includes(a)?E["auth-str"]=H:["mport"].includes(a)?E.ports=H:["obfsParam"].includes(a)?E.obfs=H:["upmbps"].includes(a)?E.up=H:["downmbps"].includes(a)?E.down=H:["obfs"].includes(a)?E._obfs=H||"":["fast-open","peer"].includes(a)?m[a]=H:Object.keys(E).includes(a)||(E[a]=H)}return!E.sni&&m.peer&&(E.sni=m.peer),!E["fast-open"]&&m.fastopen&&(E["fast-open"]=!0),E.protocol||(E.protocol="udp"),E}}}function KV(){return{name:"URI TUIC Parser",test:t=>/^tuic:\/\//.test(t),parse:t=>{t=t.split(/tuic:\/\//)[1];let[e,n,u,s,p="",g]=/^(.*?)@(.*?)(?::(\d+))?\/?(?:\?(.*?))?(?:#(.*?))?$/.exec(t);n=decodeURIComponent(n);let[y,...E]=n.split(":"),m=E.join(":");s=parseInt(`${s}`,10),isNaN(s)&&(s=443),m=decodeURIComponent(m),g!=null&&(g=decodeURIComponent(g)),g=g??`TUIC ${u}:${s}`;let C={type:"tuic",name:g,server:u,port:s,password:m,uuid:y};for(let a of p.split("&"))if(a){let[H,X]=a.split("=");H=H.replace(/_/g,"-"),X=decodeURIComponent(X),["alpn"].includes(H)?C[H]=X?X.split(","):void 0:["allow-insecure","insecure"].includes(H)?C["skip-cert-verify"]=/(TRUE)|1/i.test(X):["fast-open"].includes(H)?C.tfo=!0:["disable-sni","reduce-rtt"].includes(H)?C[H]=/(TRUE)|1/i.test(X):H==="congestion-control"?(C["congestion-controller"]=X,delete C[H]):Object.keys(C).includes(H)||(C[H]=X)}return C}}}function zV(){return{name:"URI WireGuard Parser",test:t=>/^(wireguard|wg):\/\//.test(t),parse:t=>{t=t.split(/(wireguard|wg):\/\//)[2];let[e,n,u,s,p,g,y,E="",m]=/^((.*?)@)?(.*?)(:(\d+))?\/?(\?(.*?))?(?:#(.*?))?$/.exec(t);g=parseInt(`${g}`,10),isNaN(g)&&(g=51820),u=decodeURIComponent(u),m!=null&&(m=decodeURIComponent(m)),m=m??`WireGuard ${s}:${g}`;let C={type:"wireguard",name:m,server:s,port:g,"private-key":u,udp:!0};for(let a of E.split("&"))if(a){let[H,X]=a.split("=");if(H=H.replace(/_/,"-"),X=decodeURIComponent(X),["reserved"].includes(H)){let w=X.split(",").map(j=>parseInt(j.trim(),10)).filter(j=>Number.isInteger(j));w.length===3&&(C[H]=w)}else if(["address","ip"].includes(H))X.split(",").map(w=>{let j=w.trim().replace(/\/\d+$/,"").replace(/^\[/,"").replace(/\]$/,"");Xr(j)?C.ip=j:Vr(j)&&(C.ipv6=j)});else if(["mtu"].includes(H)){let w=parseInt(X.trim(),10);Number.isInteger(w)&&(C[H]=w)}else/publickey/i.test(H)?C["public-key"]=X:/privatekey/i.test(H)?C["private-key"]=X:["udp"].includes(H)?C[H]=/(TRUE)|1/i.test(X):[...Object.keys(C),"flag"].includes(H)||(C[H]=X)}return C}}}function GV(){return{name:"URI Trojan Parser",test:t=>/^trojan:\/\//.test(t),parse:t=>{let e=/^(trojan:\/\/.*?@.*?)(:(\d+))?\/?(\?.*?)?$/.exec(t);e?.[2]||(t=t.replace(e[1],`${e[1]}:443`));let[n,u]=t.split(/#(.+)/,2),s=sw().parse(n);if(la(u))try{s.name=decodeURIComponent(u)}catch{}return s}}}function YV(){return{name:"Clash Parser",test:t=>{let e;try{e=lw.default.parse(t)}catch{e=pa.parse(t)}return!!e?.type},parse:t=>{let e;try{e=lw.default.parse(t)}catch{e=pa.parse(t)}if(!["naive","anytls","mieru","sudoku","juicity","ss","ssr","vmess","socks5","http","snell","trojan","tuic","vless","hysteria","hysteria2","wireguard","ssh","direct"].includes(e.type))throw new Error(`Clash does not support proxy with type: ${e.type}`);return["vmess","vless"].includes(e.type)&&(e.sni=e.servername,delete e.servername),e["server-cert-fingerprint"]&&(e["tls-fingerprint"]=e["server-cert-fingerprint"]),e.fingerprint&&(e["tls-fingerprint"]=e.fingerprint),e["dialer-proxy"]&&(e["underlying-proxy"]=e["dialer-proxy"]),e["benchmark-url"]&&(e["test-url"]=e["benchmark-url"]),e["benchmark-timeout"]&&(e["test-timeout"]=e["benchmark-timeout"]),e}}}function WV(){return{name:"QX SS Parser",test:t=>/^shadowsocks\s*=/.test(t.split(",")[0].trim())&&t.indexOf("ssr-protocol")===-1,parse:t=>Iu().parse(t)}}function XV(){return{name:"QX SSR Parser",test:t=>/^shadowsocks\s*=/.test(t.split(",")[0].trim())&&t.indexOf("ssr-protocol")!==-1,parse:t=>Iu().parse(t)}}function JV(){return{name:"QX VMess Parser",test:t=>/^vmess\s*=/.test(t.split(",")[0].trim()),parse:t=>Iu().parse(t)}}function ZV(){return{name:"QX VLESS Parser",test:t=>/^vless\s*=/.test(t.split(",")[0].trim()),parse:t=>Iu().parse(t)}}function QV(){return{name:"QX Trojan Parser",test:t=>/^trojan\s*=/.test(t.split(",")[0].trim()),parse:t=>Iu().parse(t)}}function eK(){return{name:"QX HTTP Parser",test:t=>/^http\s*=/.test(t.split(",")[0].trim()),parse:t=>Iu().parse(t)}}function tK(){return{name:"QX Socks5 Parser",test:t=>/^socks5\s*=/.test(t.split(",")[0].trim()),parse:t=>Iu().parse(t)}}function rK(){return{name:"Loon SS Parser",test:t=>t.split(",")[0].split("=")[1].trim().toLowerCase()==="shadowsocks",parse:t=>Ta().parse(t)}}function nK(){return{name:"Loon SSR Parser",test:t=>t.split(",")[0].split("=")[1].trim().toLowerCase()==="shadowsocksr",parse:t=>Ta().parse(t)}}function iK(){return{name:"Loon VMess Parser",test:t=>/^.*=\s*vmess/i.test(t.split(",")[0])&&t.indexOf("username")===-1,parse:t=>Ta().parse(t)}}function sK(){return{name:"Loon Vless Parser",test:t=>/^.*=\s*vless/i.test(t.split(",")[0]),parse:t=>Ta().parse(t)}}function aK(){return{name:"Loon Trojan Parser",test:t=>/^.*=\s*trojan/i.test(t.split(",")[0]),parse:t=>Ta().parse(t)}}function uK(){return{name:"Loon Hysteria2 Parser",test:t=>/^.*=\s*Hysteria2/i.test(t.split(",")[0]),parse:t=>Ta().parse(t)}}function oK(){return{name:"Loon HTTP Parser",test:t=>/^.*=\s*http/i.test(t.split(",")[0]),parse:t=>Ta().parse(t)}}function lK(){return{name:"Loon SOCKS5 Parser",test:t=>/^.*=\s*socks5/i.test(t.split(",")[0]),parse:t=>Ta().parse(t)}}function cK(){return{name:"Loon WireGuard Parser",test:t=>/^.*=\s*wireguard/i.test(t.split(",")[0]),parse:t=>{let e=t.match(/(^.*?)\s*?=\s*?wireguard\s*?,.+?\s*?=\s*?.+?/i)?.[1];t=t.replace(e,"").replace(/^\s*?=\s*?wireguard\s*/i,"");let n=t.match(/,\s*?peers\s*?=\s*?\[\s*?\{\s*?(.+?)\s*?\}\s*?\]/i)?.[1],u=n.match(/(,|^)\s*?endpoint\s*?=\s*?"?(.+?):(\d+)"?\s*?(,|$)/i),s=u?.[2],p=parseInt(u?.[3],10),g=t.match(/(,|^)\s*?mtu\s*?=\s*?"?(\d+?)"?\s*?(,|$)/i)?.[2];g&&(g=parseInt(g,10));let y=t.match(/(,|^)\s*?keepalive\s*?=\s*?"?(\d+?)"?\s*?(,|$)/i)?.[2];y&&(y=parseInt(y,10));let E=n.match(/(,|^)\s*?reserved\s*?=\s*?"?(\[\s*?.+?\s*?\])"?\s*?(,|$)/i)?.[2];E&&(E=JSON.parse(E));let m,C=t.match(/(,|^)\s*?dns\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],a=t.match(/(,|^)\s*?dnsv6\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2];(C||a)&&(m=[],C&&m.push(C),a&&m.push(a));let H=n.match(/(,|^)\s*?allowed-ips\s*?=\s*?"(.+?)"\s*?(,|$)/i)?.[2]?.split(",").map(N=>N.trim()),X=n.match(/(,|^)\s*?preshared-key\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],w=t.match(/(,|^)\s*?interface-ip\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],j=t.match(/(,|^)\s*?interface-ipv6\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],tt=n.match(/(,|^)\s*?public-key\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],J={type:"wireguard",name:e,server:s,port:p,ip:w,ipv6:j,"private-key":t.match(/(,|^)\s*?private-key\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],"public-key":tt,mtu:g,keepalive:y,reserved:E,"allowed-ips":H,"preshared-key":X,dns:m,udp:!0,peers:[{server:s,port:p,ip:w,ipv6:j,"public-key":tt,"pre-shared-key":X,"allowed-ips":H,reserved:E}]};return Array.isArray(J.dns)&&J.dns.length>0&&(J["remote-dns-resolve"]=!0),J}}}function fK(){return{name:"Surge Direct Parser",test:t=>/^.*=\s*direct/.test(t.split(",")[0]),parse:t=>Li().parse(t)}}function hK(){return{name:"Surge Anytls Parser",test:t=>/^.*=\s*anytls/.test(t.split(",")[0]),parse:t=>Li().parse(t)}}function dK(){return{name:"Surge SSH Parser",test:t=>/^.*=\s*ssh/.test(t.split(",")[0]),parse:t=>Li().parse(t)}}function pK(){return{name:"Surge SS Parser",test:t=>/^.*=\s*ss/.test(t.split(",")[0]),parse:t=>Li().parse(t)}}function gK(){return{name:"Surge VMess Parser",test:t=>/^.*=\s*vmess/.test(t.split(",")[0])&&t.indexOf("username")!==-1,parse:t=>Li().parse(t)}}function mK(){return{name:"Surge Trojan Parser",test:t=>/^.*=\s*trojan/.test(t.split(",")[0]),parse:t=>Li().parse(t)}}function vK(){return{name:"Surge HTTP Parser",test:t=>/^.*=\s*https?/.test(t.split(",")[0]),parse:t=>Li().parse(t)}}function wK(){return{name:"Surge Socks5 Parser",test:t=>/^.*=\s*socks5(-tls)?/.test(t.split(",")[0]),parse:t=>Li().parse(t)}}function EK(){return{name:"Surge External Parser",test:t=>/^.*=\s*external/.test(t.split(",")[0]),parse:t=>{let e=/^\s*(.*?)\s*?=\s*?external\s*?,\s*(.*?)\s*$/.exec(t),[n,u,s]=e;t=s;let p=/(,|^)\s*?exec\s*?=\s*"(.*?)"\s*?(,|$)/.exec(t)?.[2];p||(p=/(,|^)\s*?exec\s*?=\s*(.*?)\s*?(,|$)/.exec(t)?.[2]);let g=/(,|^)\s*?local-port\s*?=\s*"(.*?)"\s*?(,|$)/.exec(t)?.[2];g||(g=/(,|^)\s*?local-port\s*?=\s*(.*?)\s*?(,|$)/.exec(t)?.[2]);let y=/(,|^)\s*?args\s*?=\s*("(.*?)"|(.*?))(?=\s*?(,|$))/g,E,m=[];for(;(E=y.exec(t))!==null;)E[3]!=null?m.push(E[3]):E[4]!=null&&m.push(E[4]);let C=/(,|^)\s*?addresses\s*?=\s*("(.*?)"|(.*?))(?=\s*?(,|$))/g,a,H=[];for(;(a=C.exec(t))!==null;){let X;a[3]!=null?X=a[3]:a[4]!=null&&(X=a[4]),X!=null&&(X=`${X}`.trim().replace(/^\[/,"").replace(/\]$/,"")),CK(X)&&H.push(X)}return{type:"external",name:u,exec:p,"local-port":g,args:m,addresses:H}}}}function AK(){return{name:"Surge Snell Parser",test:t=>/^.*=\s*snell/.test(t.split(",")[0]),parse:t=>Li().parse(t)}}function bK(){return{name:"Surge Tuic Parser",test:t=>/^.*=\s*tuic(-v5)?/.test(t.split(",")[0]),parse:t=>{let{port_hopping:e,line:n}=bF(t),u=Li().parse(n);return u.ports=e,u}}}function yK(){return{name:"Surge WireGuard Parser",test:t=>/^.*=\s*wireguard/.test(t.split(",")[0]),parse:t=>Li().parse(t)}}function _K(){return{name:"Surge Hysteria2 Parser",test:t=>/^.*=\s*hysteria2/.test(t.split(",")[0]),parse:t=>{let{port_hopping:e,line:n}=bF(t),u=Li().parse(n);return u.ports=e,u}}}function CK(t){return Xr(t)||Vr(t)}var _F=[kV(),LV(),UV(),jV(),HV(),yF(),KV(),zV(),VV(),qV(),GV(),MV(),YV(),fK(),hK(),dK(),pK(),gK(),mK(),vK(),AK(),bK(),yK(),_K(),wK(),EK(),rK(),nK(),iK(),sK(),uK(),aK(),oK(),lK(),cK(),WV(),XV(),JV(),ZV(),QV(),eK(),tK()],Cs=class{constructor({token,key,syncPlatform}){let{isStash,isLoon,isShadowRocket,isQX}=dn(),{defaultProxy,defaultTimeout:timeout,githubProxy}=R.read(At),proxy=defaultProxy;R.env.isNode&&(proxy=proxy||eval("process.env.SUB_STORE_BACKEND_DEFAULT_PROXY")),syncPlatform==="gitlab"?(this.headers={"PRIVATE-TOKEN":`${token}`,"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.141 Safari/537.36"},this.http=Rs({baseURL:"https://gitlab.com/api/v4",headers:{...this.headers,...isStash&&proxy?{"X-Stash-Selected-Proxy":encodeURIComponent(proxy)}:{},...isShadowRocket&&proxy?{"X-Surge-Policy":proxy}:{}},...proxy?{proxy}:{},...isLoon&&proxy?{node:proxy}:{},...isQX&&proxy?{opts:{policy:proxy}}:{},...proxy?tu(proxy):{},timeout:timeout||8e3,events:{onResponse:t=>{if(/^[45]/.test(String(t.statusCode))){let e=JSON.parse(t.body);return Promise.reject(`ERROR: ${e.message?.error??e.message}`)}else return t}}})):(this.headers={Authorization:`token ${token}`,"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.141 Safari/537.36"},this.http=Rs({baseURL:`${githubProxy?`${githubProxy}/`:""}https://api.github.com`,headers:{...this.headers,...isStash&&proxy?{"X-Stash-Selected-Proxy":encodeURIComponent(proxy)}:{},...isShadowRocket&&proxy?{"X-Surge-Policy":proxy}:{}},...proxy?{proxy}:{},...isLoon&&proxy?{node:proxy}:{},...isQX&&proxy?{opts:{policy:proxy}}:{},...proxy?tu(proxy):{},timeout:timeout||8e3,events:{onResponse:t=>/^[45]/.test(String(t.statusCode))?Promise.reject(`ERROR: ${JSON.parse(t.body).message}`):t}})),this.key=key,this.syncPlatform=syncPlatform}async locate(){return this.syncPlatform==="gitlab"?this.http.get("/snippets").then(t=>{let e=JSON.parse(t.body);for(let n of e)if(n.title===this.key)return n}):this.http.get("/gists?per_page=100&page=1").then(t=>{let e=JSON.parse(t.body);R.info(`\u83B7\u53D6\u5230\u5F53\u524D GitHub \u7528\u6237\u7684 gist: ${e.length} \u4E2A`);for(let n of e)if(n.description===this.key)return n})}async upload(t){if(Object.keys(t).length===0)return Promise.reject("\u672A\u63D0\u4F9B\u9700\u4E0A\u4F20\u7684\u6587\u4EF6");let e=await this.locate(),n=t;if(e?.id){this.syncPlatform==="gitlab"&&(e.files=e.files.reduce((p,g)=>(p[g.path]=g,p),{}));let u=[],s={...e.files};return Object.keys(n).map(p=>{s[p]?n[p].content==null||n[p].content===""?(delete s[p],u.push({action:"delete",file_path:p})):(s[p]=n[p],u.push({action:"update",file_path:p,content:n[p].content})):n[p].content==null||n[p].content===""?(delete s[p],delete n[p]):(s[p]=n[p],u.push({action:"create",file_path:p,content:n[p].content}))}),this.syncPlatform==="gitlab"?Object.keys(s).length===0?Promise.reject("\u672C\u6B21\u64CD\u4F5C\u5C06\u5BFC\u81F4\u6240\u6709\u6587\u4EF6\u7684\u5185\u5BB9\u90FD\u4E3A\u7A7A, \u65E0\u6CD5\u66F4\u65B0 snippet"):Object.keys(s).length>10?Promise.reject("\u672C\u6B21\u64CD\u4F5C\u5C06\u5BFC\u81F4 snippet \u7684\u6587\u4EF6\u6570\u8D85\u8FC7 10, \u65E0\u6CD5\u66F4\u65B0 snippet"):(n=u,this.http.put({headers:{...this.headers,"Content-Type":"application/json"},url:`/snippets/${e.id}`,body:JSON.stringify({files:n})})):Object.keys(s).length===0?Promise.reject("\u672C\u6B21\u64CD\u4F5C\u5C06\u5BFC\u81F4\u6240\u6709\u6587\u4EF6\u7684\u5185\u5BB9\u90FD\u4E3A\u7A7A, \u65E0\u6CD5\u66F4\u65B0 gist"):this.http.patch({url:`/gists/${e.id}`,body:JSON.stringify({files:n})})}else return n=Object.entries(n).reduce((u,[s,p])=>(p.content!==null&&p.content!==""&&(u[s]=p),u),{}),this.syncPlatform==="gitlab"?Object.keys(n).length===0?Promise.reject("\u6240\u6709\u6587\u4EF6\u7684\u5185\u5BB9\u90FD\u4E3A\u7A7A, \u65E0\u6CD5\u521B\u5EFA snippet"):(n=Object.keys(n).map(u=>({file_path:u,content:n[u].content})),this.http.post({headers:{...this.headers,"Content-Type":"application/json"},url:"/snippets",body:JSON.stringify({title:this.key,visibility:"private",files:n})})):Object.keys(n).length===0?Promise.reject("\u6240\u6709\u6587\u4EF6\u7684\u5185\u5BB9\u90FD\u4E3A\u7A7A, \u65E0\u6CD5\u521B\u5EFA gist"):this.http.post({url:"/gists",body:JSON.stringify({description:this.key,public:!1,files:n})})}async download(t){let e=await this.locate();if(e?.id)try{let{files:n}=await this.http.get(`/gists/${e.id}`).then(s=>JSON.parse(s.body)),u=n[t].raw_url;return await this.http.get(u).then(s=>s.body)}catch(n){return Promise.reject(n)}else return Promise.reject(`\u627E\u4E0D\u5230 Sub-Store Gist (${this.key})`)}},FF=qr(ow());function DK(t){for(let e of qp)try{if(e.test(t))return R.info(`Pre-processor [${e.name}] activated`),e.parse(t)}catch(n){R.error(`Parser [${e.name}] failed
 Reason: ${n}`)}return t}function SK(t){t=DK(t);let e=t.split(`
`),n=[],u;for(let s of e){if(s=s.trim(),s.length===0)continue;let p=!1;if(u){let[g,y]=CF(u,s);y||(n.push(SF(g)),p=!0)}if(!p)for(let g of _F){let[y,E]=CF(g,s);if(!E){n.push(SF(y)),u=g,p=!0,R.info(`${g.name} is activated`);break}}p||R.error(`Failed to parse line: ${s}`)}return n.filter(s=>(["vless","vmess"].includes(s.type)&&(np(s.uuid)||R.info(`UUID may be invalid: ${s.name} ${s.uuid}`)),!0))}async function FK(t,e=[],n,u,s){let p={};for(let g of e){if(g.disabled){R.log(`Skipping disabled operator: "${g.type}" with arguments:
 >>> ${JSON.stringify(g.args,null,2)||"None"}`);continue}let y,E={};if(g.type.indexOf("Script")!==-1){let{mode:C,content:a}=g.args;if(C==="link"){let H=a||"",X=H.split("#");if(X.length>1)try{E=JSON.parse(decodeURIComponent(X[1]))}catch{for(let j of X[1].split("&")){let tt=j.split("=")[0],J=j.split("=")[1];E[tt]=J==null||J===""?!0:decodeURIComponent(J)}}H=`${H.split("#")[0]}${X[2]?`#${X[2]}`:E?.noCache!=null||E?.insecure!=null?`#${X[1]}`:""}`;let w=H.split("#")[0].match(/^\/api\/(file|module)\/(.+)/);if(w){let j="";try{j=w?.[1];let tt=w?.[2];if(tt==null)throw new Error(`\u672C\u5730 ${j} URL \u65E0\u6548: ${H}`);tt=decodeURIComponent(tt);let J=j==="module"?jn:jt,N=ft(R.read(J),tt);if(!N)throw new Error(`\u627E\u4E0D\u5230 ${j}: ${tt}`);j==="module"?y=N.content:y=await wn({type:"file",name:tt})}catch(tt){throw R.error(`Error when loading ${j}: ${g.args.content}.
 Reason: ${tt}`),new Error(`\u65E0\u6CD5\u52A0\u8F7D ${j}: ${H}`)}}else if(H?.startsWith("/"))try{y=require("fs").readFileSync(H.split("#")[0],"utf8")}catch(j){throw R.error(`Error when reading local script: ${g.args.content}.
 Reason: ${j}`),new Error(`\u65E0\u6CD5\u4ECE\u8BE5\u8DEF\u5F84\u8BFB\u53D6\u811A\u672C\u6587\u4EF6: ${H}`)}else try{y=await on(H)}catch(j){throw R.error(`Error when downloading remote script: ${g.args.content}.
 Reason: ${j}`),new Error(`\u65E0\u6CD5\u4E0B\u8F7D\u811A\u672C: ${H}`)}}else y=a,E=g.args.arguments||{}}if(!Mp[g.type]){R.error(`Unknown operator: "${g.type}"`);continue}R.log(`Applying "${g.type}" with arguments:
 >>> ${JSON.stringify(g.args,null,2)||"None"}`);let m;g.type.indexOf("Script")!==-1?m=Mp[g.type](y,n,E,u,s,p):m=Mp[g.type](g.args||{}),t=await dC(m,t)}return t}function IK(t,e,n,u={}){let s=P0[e];if(!s)throw new Error(`Target platform: ${e} is not supported!`);let p=/Surge|SurgeMac|Shadowrocket/i.test(e);if(t=t.filter(g=>g.supported&&g.supported[e]===!1?!1:(["vless","vmess"].includes(g.type)&&(np(g.uuid)||R.info(`UUID may be invalid: ${g.name} ${g.uuid}`)),!0)),t=t.map(g=>(g._resolved=g.resolved,la(g.name)||(g.name=`${g.type} ${g.server}:${g.port}`),g["disable-sni"]&&(p?g.sni="off":["tuic"].includes(g.type)||(R.error(`Target platform ${e} does not support sni off. Proxy's fields (sni, tls-fingerprint and skip-cert-verify) will be modified.`),g.sni="",g["skip-cert-verify"]=!0,delete g["tls-fingerprint"])),g.ports&&(g.ports=String(g.ports),["ClashMeta"].includes(e)||(g.ports=g.ports.replace(/\//g,",")),g.port||(g.port=Rf(g.ports))),g)),R.log(`Producing proxies for target: ${e}`),typeof s.type>"u"||s.type==="SINGLE"){let g=t.map(y=>{try{return s.produce(y,n,u)}catch(E){return R.error(`Cannot produce proxy: ${JSON.stringify(y,null,2)}
Reason: ${E}`),""}}).filter(y=>y.length>0);return g=n==="internal"?g:g.join(`
`),e.startsWith("Surge")&&t.length>0&&t.every(y=>y.type==="wireguard")&&(g=`#!name=${t[0]?._subName}
#!desc=${t[0]?._desc??""}
#!category=${t[0]?._category??""}
${g}`),g}else if(s.type==="ALL")return s.produce(t,n,u)}var xt={parse:SK,process:FK,produce:IK,ipAddress:rp,getRandomPort:Rf,isIPv4:Xr,isIPv6:Vr,isIP:cw,yaml:pa,getFlag:bc,removeFlag:Yf,getISO:Np,MMDB:xp,Gist:Cs,download:on,downloadFile:zh,isValidUUID:np,doh:_c,Buffer:H0.Buffer,Base64:dt,JSON5:FF.default};function CF(t,e){if(!BK(t,e))return[null,new Error("Parser mismatch")];try{return[t.parse(e),null]}catch(n){return[null,n]}}function BK(t,e){try{return t.test(e)}catch{return!1}}function DF(t){if(typeof t=="string"||typeof t=="number"){if(t=String(t).trim(),t==="")return"/";if(!t.startsWith("/"))return"/"+t}return t}function SF(t){typeof t.cipher=="string"&&(t.cipher=t.cipher.toLowerCase()),typeof t.password=="number"&&(t.password=ub(t.password)),["ss"].includes(t.type)&&t.cipher==="none"&&!t.password&&(t.password=""),t.interface&&(t["interface-name"]=t.interface,delete t.interface),ab(t.port)&&(t.port=parseInt(t.port,10)),t.server&&(t.server=`${t.server}`.trim().replace(/^\[/,"").replace(/\]$/,"")),t.network==="ws"&&(!t["ws-opts"]&&(t["ws-path"]||t["ws-headers"])&&(t["ws-opts"]={},t["ws-path"]&&(t["ws-opts"].path=t["ws-path"]),t["ws-headers"]&&(t["ws-opts"].headers=t["ws-headers"])),delete t["ws-path"],delete t["ws-headers"]);let e=t[`${t.network}-opts`]?.path;if(Array.isArray(e)?t[`${t.network}-opts`].path=e.map(u=>DF(u)):e!=null&&(t[`${t.network}-opts`].path=DF(e)),t.type==="trojan"&&(t.network=t.network||"tcp"),["vmess"].includes(t.type)&&(t.network=t.network||"tcp",t.cipher=t.cipher||"none",t.alterId=t.alterId||0),["vless"].includes(t.type)&&(t.network=t.network||"tcp"),["trojan","tuic","hysteria","hysteria2","juicity","anytls","naive"].includes(t.type)&&(t.tls=!0),t.network){let u=t[`${t.network}-opts`]?.headers?.Host,s=t[`${t.network}-opts`]?.headers?.host;t.network==="h2"?!s&&u&&(t[`${t.network}-opts`].headers.host=u,delete t[`${t.network}-opts`].headers.Host):s&&!u&&(t[`${t.network}-opts`].headers.Host=s,delete t[`${t.network}-opts`].headers.host)}if(t.network==="h2"){let u=t["h2-opts"]?.headers?.host,s=t["h2-opts"]?.path;u&&!Array.isArray(u)&&(t["h2-opts"].headers.host=[u]),Array.isArray(s)&&(t["h2-opts"].path=s[0])}if(!t.tls&&["ws","http"].includes(t.network)&&!t[`${t.network}-opts`]?.headers?.Host&&!cw(t.server)&&(t[`${t.network}-opts`]=t[`${t.network}-opts`]||{},t[`${t.network}-opts`].headers=t[`${t.network}-opts`].headers||{},t[`${t.network}-opts`].headers.Host=["vmess","vless"].includes(t.type)&&t.network==="http"?[t.server]:t.server),["vmess","vless"].includes(t.type)&&t.network==="http"){let u=t[`${t.network}-opts`]?.path,s=t[`${t.network}-opts`]?.headers?.Host;s&&!Array.isArray(s)&&(t[`${t.network}-opts`].headers.Host=[s]),u&&!Array.isArray(u)&&(t[`${t.network}-opts`].path=[u])}if(t.tls&&!t.sni&&(cw(t.server)||(t.sni=t.server),!t.sni&&t.network)){let u=t[`${t.network}-opts`]?.headers?.Host;u=Array.isArray(u)?u[0]:u,u&&(t.sni=u)}if(t.ports?t.ports=String(t.ports).replace(/\//g,","):delete t.ports,["hysteria2"].includes(t.type)&&t.obfs&&!["salamander"].includes(t.obfs)&&!t["obfs-password"]&&(t["obfs-password"]=t.obfs,t.obfs="salamander"),["hysteria2"].includes(t.type)&&!t["obfs-password"]&&t.obfs_password&&(t["obfs-password"]=t.obfs_password,delete t.obfs_password),["vless"].includes(t.type)&&(t["reality-opts"]&&Object.keys(t["reality-opts"]).length===0&&delete t["reality-opts"],t["grpc-opts"]&&Object.keys(t["grpc-opts"]).length===0&&delete t["grpc-opts"],(!t["reality-opts"]&&!t.flow||["null",null].includes(t.flow))&&delete t.flow,["http"].includes(t.network)&&(t[`${t.network}-opts`]?.path||(t[`${t.network}-opts`]||(t[`${t.network}-opts`]={}),t[`${t.network}-opts`].path=["/"]))),typeof t.name!="string")if(/^\d+$/.test(t.name))t.name=`${t.name}`;else try{t.name?.data?t.name=H0.Buffer.from(t.name.data).toString("utf8"):t.name=H0.Buffer.from(t.name).toString("utf8")}catch(u){R.error(`proxy.name decode failed
Reason: ${u}`),t.name=`${t.type} ${t.server}:${t.port}`}["ws","http","h2"].includes(t.network)&&(["ws","h2"].includes(t.network)&&!t[`${t.network}-opts`]?.path?(t[`${t.network}-opts`]=t[`${t.network}-opts`]||{},t[`${t.network}-opts`].path="/"):t.network==="http"&&(!Array.isArray(t[`${t.network}-opts`]?.path)||t[`${t.network}-opts`]?.path.every(u=>!u))&&(t[`${t.network}-opts`]=t[`${t.network}-opts`]||{},t[`${t.network}-opts`].path=["/"])),["","off"].includes(t.sni)&&(t["disable-sni"]=!0);let n=t.ca_str;t["ca-str"]?n=t["ca-str"]:n&&(delete t.ca_str,t["ca-str"]=n);try{R.env.isNode&&!n&&t._ca&&(n=R.node.fs.readFileSync(t._ca,{encoding:"utf8"}))}catch(u){R.error(`Read ca file failed
Reason: ${u}`)}return!t["tls-fingerprint"]&&n&&(t["tls-fingerprint"]=Qb.generateFingerprint(n)),["ss"].includes(t.type)&&oe(t,"shadow-tls-password")&&(t.plugin="shadow-tls",t["plugin-opts"]={host:t["shadow-tls-sni"],password:t["shadow-tls-password"],version:t["shadow-tls-version"]},delete t["shadow-tls-sni"],delete t["shadow-tls-password"],delete t["shadow-tls-version"]),t}function cw(t){return Xr(t)||Vr(t)}function $K(){return{name:"HTML",test:t=>/^<!DOCTYPE html>/.test(t),parse:()=>""}}function RK(){return{name:"Clash Provider",test:t=>/^payload:/gm.exec(t).index>=0,parse:t=>t.replace("payload:","").replace(/^\s*-\s*/gm,"")}}var IF=[$K(),RK()];function PK(){return{type:"SINGLE",func:t=>["URL-REGEX","DEST-PORT","SRC-IP","IN-PORT","PROTOCOL","GEOSITE","GEOIP"].indexOf(t.type)!==-1?null:`${{"DOMAIN-KEYWORD":"HOST-KEYWORD","DOMAIN-SUFFIX":"HOST-SUFFIX",DOMAIN:"HOST","IP-CIDR6":"IP6-CIDR"}[t.type]||t.type},${t.content},SUB-STORE`}}function BF(){return{type:"SINGLE",func:t=>{if(["GEOSITE","GEOIP"].indexOf(t.type)!==-1)return null;let e=`${t.type},${t.content}`;return["IP-CIDR","IP-CIDR6"].includes(t.type)&&(e+=t.options?.length>0?`,${t.options.join(",")}`:""),e}}}function OK(){return{type:"SINGLE",func:t=>["SRC-IP","GEOSITE","GEOIP"].indexOf(t.type)!==-1?null:(["IP-CIDR","IP-CIDR6"].includes(t.type)&&t.options&&(t.options=t.options.filter(e=>["no-resolve"].includes(e))),BF().func(t))}}function TK(){return{type:"ALL",func:t=>{let e={"DEST-PORT":"DST-PORT","SRC-IP":"SRC-IP-CIDR","IN-PORT":"SRC-PORT"},n={payload:t.map(u=>{let s=`${e[u.type]||u.type},${u.content}`;return["IP-CIDR","IP-CIDR6","GEOIP"].includes(u.type)&&(u.options&&(u.options=u.options.filter(p=>["no-resolve"].includes(p))),s+=u.options?.length>0?`,${u.options.join(",")}`:""),s})};return pa.dump(n)}}}var $F={QX:PK(),Surge:BF(),Loon:OK(),Clash:TK()},xK=[[/^(DOMAIN|host|HOST)$/,"DOMAIN"],[/^(DOMAIN-KEYWORD|host-keyword|HOST-KEYWORD)$/,"DOMAIN-KEYWORD"],[/^(DOMAIN-SUFFIX|host-suffix|HOST-SUFFIX)$/,"DOMAIN-SUFFIX"],[/^USER-AGENT$/i,"USER-AGENT"],[/^PROCESS-NAME$/,"PROCESS-NAME"],[/^(DEST-PORT|DST-PORT)$/,"DST-PORT"],[/^SRC-IP(-CIDR)?$/,"SRC-IP"],[/^(IN|SRC)-PORT$/,"IN-PORT"],[/^PROTOCOL$/,"PROTOCOL"],[/^IP-CIDR$/i,"IP-CIDR"],[/^(IP-CIDR6|ip6-cidr|IP6-CIDR)$/,"IP-CIDR6"],[/^GEOIP$/i,"GEOIP"],[/^GEOSITE$/i,"GEOSITE"]];function NK(){return{name:"Universal Rule Parser",test:()=>!0,parse:t=>{let e=t.split(`
`),n=[];for(let u of e)if(u=u.trim(),u.length!==0&&!/\s*#/.test(u))try{let s=u.split(",").map(y=>y.trim()),p=s[0],g=!1;for(let y of xK)if(y[0].test(p)){g=!0;let E={type:y[1],content:s[1]};["IP-CIDR","IP-CIDR6","GEOIP"].includes(E.type)&&(E.options=s.slice(2)),n.push(E)}if(!g)throw new Error("Invalid rule type: "+p)}catch{}return n}}}var RF=[NK()],bl=(function(){function t(u){for(let s of IF)try{if(s.test(u))return R.info(`Pre-processor [${s.name}] activated`),s.parse(u)}catch(p){R.error(`Parser [${s.name}] failed
 Reason: ${p}`)}return u}function e(u){u=t(u);for(let s of RF){let p;try{p=s.test(u)}catch{p=!1}if(p)return R.info(`Rule parser [${s.name}] is activated!`),s.parse(u)}}function n(u,s){let p=$F[s];if(!p)throw new Error(`Target platform: ${s} is not supported!`);if(typeof p.type>"u"||p.type==="SINGLE")return u.map(g=>{try{return p.func(g)}catch{return""}}).filter(g=>g.length>0).join(`
`);if(p.type==="ALL")return p.func(u)}return{parse:e,produce:n}})();function fw(t){R.read($t)||R.write({},$t),t.get("/api/artifacts/restore",kK),t.route("/api/artifacts").get(LK).post(HK).put(UK),t.route("/api/artifact/:name").get(jK).patch(MK).delete(qK)}async function kK(t,e){R.info("\u5F00\u59CB\u6062\u590D\u8FDC\u7A0B\u914D\u7F6E...");try{let{gistToken:n,syncPlatform:u}=R.read(At);if(!n)return Promise.reject("\u672A\u8BBE\u7F6E GitHub Token\uFF01");let s=new Cs({token:n,key:Uo,syncPlatform:u});try{let p=await s.locate();if(!p?.files)throw new Error("\u627E\u4E0D\u5230 Sub-Store Gist \u6587\u4EF6\u5217\u8868");let g=R.read($t),y=[];Object.keys(p.files).map(E=>{let m=p.files[E]?.filename;if(m)if(encodeURIComponent(m)!==m)R.error(`\u6587\u4EF6\u540D ${m} \u672A\u7F16\u7801 \u4E0D\u4FDD\u5B58`),y.push(m);else{let C=ft(g,m);C?Ts(g,m,{...C,url:p.files[E]?.raw_url.replace(/\/raw\/[^/]*\/(.*)/,"/raw/$1")}):g.push({name:`${m}`,url:p.files[E]?.raw_url.replace(/\/raw\/[^/]*\/(.*)/,"/raw/$1")})}}),R.write(g,$t)}catch(p){throw R.error(`\u67E5\u627E Sub-Store Gist \u65F6\u53D1\u751F\u9519\u8BEF: ${p.message??p}`),p}qe(e)}catch(n){R.error(`\u6062\u590D\u8FDC\u7A0B\u914D\u7F6E\u5931\u8D25\uFF0C\u539F\u56E0\uFF1A${n.message??n}`),Ne(e,new gr("FAILED_TO_RESTORE_ARTIFACTS","Failed to restore artifacts",`Reason: ${n.message??n}`))}}function LK(t,e){let n=R.read($t);qe(e,n)}function UK(t,e){let n=t.body;R.write(n,$t),qe(e)}async function jK(t,e){let{name:n}=t.params,u=R.read($t),s=ft(u,n);s?qe(e,s):Ne(e,new _r("RESOURCE_NOT_FOUND",`Artifact ${n} does not exist!`),404)}function HK(t,e){let n=t.body;if(!PF(n.name)){Ne(e,new Ht("INVALID_ARTIFACT_NAME",`Artifact name ${n.name} is invalid.`));return}R.info(`\u6B63\u5728\u521B\u5EFA\u8FDC\u7A0B\u914D\u7F6E\uFF1A${n.name}`);let u=R.read($t);ft(u,n.name)?Ne(e,new Ht("DUPLICATE_KEY",`Artifact ${n.name} already exists.`)):(u.push(n),R.write(u,$t),qe(e,n,201))}function MK(t,e){let n=t.body,u=R.read($t),s=t.params.name,p=ft(u,s);if(p){n.name||(n.name=p.name),R.info(`\u6B63\u5728\u66F4\u65B0\u8FDC\u7A0B\u914D\u7F6E\uFF1A${p.name}`);let g={...p,...n};if(!PF(g.name)){Ne(e,new Ht("INVALID_ARTIFACT_NAME",`Artifact name ${g.name} is invalid.`));return}Ts(u,s,g),R.write(u,$t),qe(e,g)}else Ne(e,new Ht("DUPLICATE_KEY",`Artifact ${s} already exists.`))}async function qK(t,e){let{name:n}=t.params;R.info(`\u6B63\u5728\u5220\u9664\u8FDC\u7A0B\u914D\u7F6E\uFF1A${n}`);let u=R.read($t);try{let s=ft(u,n);if(!s)throw new Error(`\u8FDC\u7A0B\u914D\u7F6E\uFF1A${n}\u4E0D\u5B58\u5728\uFF01`);if(s.updated){let p={};p[encodeURIComponent(s.name)]={content:""},encodeURIComponent(s.name)!==s.name&&(p[s.name]={content:""});try{await M0(p)}catch(g){R.error(`Function syncToGist: ${n} : ${g}`)}}Os(u,n),R.write(u,$t),qe(e)}catch(s){R.error(`\u65E0\u6CD5\u5220\u9664\u8FDC\u7A0B\u914D\u7F6E\uFF1A${n}\uFF0C\u539F\u56E0\uFF1A${s}`),Ne(e,new gr("FAILED_TO_DELETE_ARTIFACT",`Failed to delete artifact ${n}`,`Reason: ${s}`))}}function PF(t){return/^[a-zA-Z0-9._-]*$/.test(t)}async function M0(t){let{gistToken:e,syncPlatform:n}=R.read(At);if(!e)return Promise.reject("\u672A\u8BBE\u7F6E GitHub Token\uFF01");let u=await new Cs({token:e,key:Uo,syncPlatform:n}).upload(t),s={};try{s=JSON.parse(u.body)}catch{}let p=s?.html_url??s?.web_url,g=R.read(At);return p?(R.log(`\u540C\u6B65 Gist \u540E, \u627E\u5230 Sub-Store Gist: ${p}`),g.artifactStore=p,g.artifactStoreStatus="VALID"):(R.error("\u540C\u6B65 Gist \u540E, \u627E\u4E0D\u5230 Sub-Store Gist"),g.artifactStoreStatus="NOT FOUND"),R.write(g,At),u}function hw(t){R.read($t)||R.write({},$t),t.get("/api/sync/artifacts",VK),t.get("/api/sync/artifact/:name",KK)}async function wn({type:t,name:e,platform:n,url:u,ua:s,content:p,mergeSources:g,ignoreFailedRemoteSub:y,ignoreFailedRemoteFile:E,produceType:m,produceOpts:C={},subscription:a,awaitCustomCache:H,$options:X,proxy:w,noCache:j,all:tt}){if(n=n||"JSON",["subscription","sub"].includes(t)){let J;if(e){let q=R.read(Zt);if(J=ft(q,e),!J)throw new Error(`\u627E\u4E0D\u5230\u8BA2\u9605 ${e}`)}else if(a)J=a;else throw new Error("\u672A\u63D0\u4F9B\u8BA2\u9605\u540D\u79F0\u6216\u8BA2\u9605\u6570\u636E");let N;if(p&&!["localFirst","remoteFirst"].includes(g))N=p;else if(u){let q={};N=await Promise.all(u.split(/[\r\n]+/).map(V=>V.trim()).filter(V=>V.length).map(async V=>{try{return await on(V,s||J.ua,void 0,w||J.proxy,void 0,H,j||J.noCache,!0)}catch(lt){return q[V]=lt,R.error(`\u8BA2\u9605 ${J.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${V} \u53D1\u751F\u9519\u8BEF: ${lt}`),""}}));let U=J.ignoreFailedRemoteSub;if(y!=null&&y!==""&&(U=y),Object.keys(q).length>0)if(U)U==="enabled"&&R.notify("\u{1F30D} Sub-Store \u5904\u7406\u8BA2\u9605\u5931\u8D25",`\u274C ${J.name}`,`\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(q).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u8BA2\u9605 ${J.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(q).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);g==="localFirst"?N.unshift(p):g==="remoteFirst"&&N.push(p)}else if(J.source==="local"&&!["localFirst","remoteFirst"].includes(J.mergeSources))N=J.content;else{let q={};N=await Promise.all(J.url.split(/[\r\n]+/).map(V=>V.trim()).filter(V=>V.length).map(async V=>{try{return await on(V,s||J.ua,void 0,w||J.proxy,void 0,H,j||J.noCache,!0)}catch(lt){return q[V]=lt,R.error(`\u8BA2\u9605 ${J.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${V} \u53D1\u751F\u9519\u8BEF: ${lt}`),""}}));let U=J.ignoreFailedRemoteSub;if(y!=null&&y!==""&&(U=y),Object.keys(q).length>0)if(U)U==="enabled"&&R.notify("\u{1F30D} Sub-Store \u5904\u7406\u8BA2\u9605\u5931\u8D25",`\u274C ${J.name}`,`\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(q).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u8BA2\u9605 ${J.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(q).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);J.mergeSources==="localFirst"?N.unshift(J.content):J.mergeSources==="remoteFirst"&&N.push(J.content)}if(m==="raw")return JSON.stringify((Array.isArray(N)?N:[N]).flat());let Q=(Array.isArray(N)?N:[N]).map(q=>xt.parse(q)).flat();if(Q.forEach(q=>{q._subName=J.name,q._subDisplayName=J.displayName}),Q=await xt.process(Q,J.process||[],n,{[J.name]:J},X),Q.length===0)throw new Error(`\u8BA2\u9605 ${e} \u4E2D\u4E0D\u542B\u6709\u6548\u8282\u70B9`);let at={};for(let q of Q){if(at[q.name]){R.notify("\u{1F30D} Sub-Store",`\u26A0\uFE0F \u8BA2\u9605 ${e} \u5305\u542B\u91CD\u590D\u8282\u70B9 ${q.name}\uFF01`,"\u8BF7\u4ED4\u7EC6\u68C0\u6D4B\u914D\u7F6E\uFF01",{"media-url":"https://cdn3.iconfinder.com/data/icons/seo-outline-1/512/25_code_program_programming_develop_bug_search_developer-512.png"});break}at[q.name]=!0}return xt.produce(Q,n,m,C)}else if(["collection","col"].includes(t)){let J=R.read(Zt),N=R.read(Qt),Q=ft(N,e);if(!Q)throw new Error(`\u627E\u4E0D\u5230\u7EC4\u5408\u8BA2\u9605 ${e}`);let at=[...Q.subscriptions],q=Q.subscriptionTags;Array.isArray(q)&&q.length>0&&J.forEach(Et=>{Array.isArray(Et.tag)&&Et.tag.length>0&&!at.includes(Et.name)&&Et.tag.some(vt=>q.includes(vt))&&at.push(Et.name)});let U={},V={},lt=0;await Promise.all(at.map(async Et=>{let vt=ft(J,Et),Yt=vt.passThroughUA,Xt=vt.ua;Yt&&(R.info(`\u8BA2\u9605\u5F00\u542F\u4E86\u900F\u4F20 User-Agent, \u4F7F\u7528\u8BF7\u6C42\u7684 User-Agent: ${s}`),Xt=s);try{R.info(`\u6B63\u5728\u5904\u7406\u5B50\u8BA2\u9605\uFF1A${vt.name}...`);let re;if(vt.source==="local"&&!["localFirst","remoteFirst"].includes(vt.mergeSources))re=vt.content;else{let He={};if(re=await await Promise.all(vt.url.split(/[\r\n]+/).map(de=>de.trim()).filter(de=>de.length).map(async de=>{try{return await on(de,Xt,void 0,w||vt.proxy||Q.proxy,void 0,void 0,j||vt.noCache,!0)}catch(pe){return He[de]=pe,R.error(`\u8BA2\u9605 ${vt.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${de} \u53D1\u751F\u9519\u8BEF: ${pe}`),""}})),Object.keys(He).length>0)if(vt.ignoreFailedRemoteSub)vt.ignoreFailedRemoteSub==="enabled"&&R.notify("\u{1F30D} Sub-Store \u5904\u7406\u8BA2\u9605\u5931\u8D25",`\u274C ${vt.name}`,`\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(He).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u8BA2\u9605 ${vt.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(He).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);vt.mergeSources==="localFirst"?re.unshift(vt.content):vt.mergeSources==="remoteFirst"&&re.push(vt.content)}let ae=(Array.isArray(re)?re:[re]).map(He=>xt.parse(He)).flat();ae.forEach(He=>{He._subName=vt.name,He._subDisplayName=vt.displayName,He._collectionName=Q.name,He._collectionDisplayName=Q.displayName}),ae=await xt.process(ae,vt.process||[],n,{[vt.name]:vt,_collection:Q,$options:X}),U[Et]=ae,lt++,R.info(`\u2705 \u5B50\u8BA2\u9605\uFF1A${vt.name}\u52A0\u8F7D\u6210\u529F\uFF0C\u8FDB\u5EA6--${100*(lt/at.length).toFixed(1)}% `)}catch(re){lt++,V[Et]=re,R.error(`\u274C \u5904\u7406\u7EC4\u5408\u8BA2\u9605\u4E2D\u7684\u5B50\u8BA2\u9605: ${vt.name}\u65F6\u51FA\u73B0\u9519\u8BEF\uFF1A${re}\uFF01\u8FDB\u5EA6--${100*(lt/at.length).toFixed(1)}%`)}}));let It=Q.ignoreFailedRemoteSub;if(y!=null&&y!==""&&(It=y),Object.keys(V).length>0)if(It)It==="enabled"&&R.notify("\u{1F30D} Sub-Store \u5904\u7406\u7EC4\u5408\u8BA2\u9605\u5931\u8D25",`\u274C ${Q.name}`,`\u5B50\u8BA2\u9605 ${Object.keys(V).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u7EC4\u5408\u8BA2\u9605 ${Q.name} \u7684\u5B50\u8BA2\u9605 ${Object.keys(V).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);let Ot=Array.prototype.concat.apply([],at.map(Et=>U[Et]||[]));if(Ot.forEach(Et=>{Et._collectionName=Q.name,Et._collectionDisplayName=Q.displayName}),Ot=await xt.process(Ot,Q.process||[],n,{_collection:Q},X),Ot.length===0)throw new Error(`\u7EC4\u5408\u8BA2\u9605 ${e} \u4E2D\u4E0D\u542B\u6709\u6548\u8282\u70B9`);let yt={};for(let Et of Ot){if(yt[Et.name]){R.notify("\u{1F30D} Sub-Store",`\u26A0\uFE0F \u7EC4\u5408\u8BA2\u9605 ${e} \u5305\u542B\u91CD\u590D\u8282\u70B9 ${Et.name}\uFF01`,"\u8BF7\u4ED4\u7EC6\u68C0\u6D4B\u914D\u7F6E\uFF01",{"media-url":"https://cdn3.iconfinder.com/data/icons/seo-outline-1/512/25_code_program_programming_develop_bug_search_developer-512.png"});break}yt[Et.name]=!0}return xt.produce(Ot,n,m,C)}else if(t==="rule"){let J=R.read(Ff),N=ft(J,e);if(!N)throw new Error(`\u627E\u4E0D\u5230\u89C4\u5219 ${e}`);let Q=[];for(let at=0;at<N.urls.length;at++){let q=N.urls[at];R.info(`\u6B63\u5728\u5904\u7406URL\uFF1A${q}\uFF0C\u8FDB\u5EA6--${100*((at+1)/N.urls.length).toFixed(1)}% `);try{let{body:U}=await on(q),V=bl.parse(U);Q=Q.concat(V)}catch(U){R.error(`\u5904\u7406\u5206\u6D41\u8BA2\u9605\u4E2D\u7684URL: ${q}\u65F6\u51FA\u73B0\u9519\u8BEF\uFF1A${U}! \u8BE5\u8BA2\u9605\u5DF2\u88AB\u8DF3\u8FC7\u3002`)}}return Q=await bl.process(Q,[{type:"Remove Duplicate Filter"}]),bl.produce(Q,n)}else if(t==="file"){let J=R.read(jt),N=ft(J,e);if(!N)throw new Error(`\u627E\u4E0D\u5230\u6587\u4EF6 ${e}`);let Q="";if(N.type!=="mihomoProfile")if(p&&!["localFirst","remoteFirst"].includes(g))Q=p;else if(u){let V={};Q=await Promise.all(u.split(/[\r\n]+/).map(It=>It.trim()).filter(It=>It.length).map(async It=>{try{return await on(It,s||N.ua,void 0,N.proxy||w,void 0,void 0,j)}catch(Ot){return V[It]=Ot,R.error(`\u6587\u4EF6 ${N.name} \u7684\u8FDC\u7A0B\u6587\u4EF6 ${It} \u53D1\u751F\u9519\u8BEF: ${Ot}`),""}}));let lt=N.ignoreFailedRemoteFile;if(E!=null&&E!==""&&(lt=E),!lt&&Object.keys(V).length>0)throw new Error(`\u6587\u4EF6 ${N.name} \u7684\u8FDC\u7A0B\u6587\u4EF6 ${Object.keys(V).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);g==="localFirst"?Q.unshift(p):g==="remoteFirst"&&Q.push(p)}else if(N.source==="local"&&!["localFirst","remoteFirst"].includes(N.mergeSources))Q=N.content;else{let V={};Q=await Promise.all(N.url.split(/[\r\n]+/).map(It=>It.trim()).filter(It=>It.length).map(async It=>{try{return await on(It,s||N.ua,void 0,N.proxy||w,void 0,void 0,j)}catch(Ot){return V[It]=Ot,R.error(`\u6587\u4EF6 ${N.name} \u7684\u8FDC\u7A0B\u6587\u4EF6 ${It} \u53D1\u751F\u9519\u8BEF: ${Ot}`),""}}));let lt=N.ignoreFailedRemoteFile;if(E!=null&&E!==""&&(lt=E),Object.keys(V).length>0)if(lt)lt==="enabled"&&R.notify("\u{1F30D} Sub-Store \u5904\u7406\u6587\u4EF6\u5931\u8D25",`\u274C ${N.name}`,`\u8FDC\u7A0B\u6587\u4EF6 ${Object.keys(V).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u6587\u4EF6 ${N.name} \u7684\u8FDC\u7A0B\u6587\u4EF6 ${Object.keys(V).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);N.mergeSources==="localFirst"?Q.unshift(N.content):N.mergeSources==="remoteFirst"&&Q.push(N.content)}if(m==="raw")return JSON.stringify((Array.isArray(Q)?Q:[Q]).flat());let at=(Array.isArray(Q)?Q:[Q]).flat(),q=at.filter(V=>V!=null&&V!=="").join(`
`),U=Array.isArray(N.process)&&N.process.length>0?await xt.process({$files:at,$content:q,$options:X,$file:N},N.process):{$content:q,$files:at,$options:X};return(tt?U:U?.$content)??""}}async function dw(){R.info("\u5F00\u59CB\u540C\u6B65\u6240\u6709\u8FDC\u7A0B\u914D\u7F6E...");let t=R.read($t),e={};try{let n=[],u=[],s=R.read(Zt),p=R.read(Qt),g=[],y=0;if(t.map(C=>{if(C.sync&&C.source){if(y++,C.type==="subscription"){let a=C.source,H=ft(s,a);H&&H.url&&!g.includes(a)&&g.push(a)}else if(C.type==="collection"){let a=ft(p,C.source);a&&Array.isArray(a.subscriptions)&&a.subscriptions.map(H=>{let X=ft(s,H);X&&X.url&&!g.includes(H)&&g.push(H)})}}}),y===0){R.info(`\u9700\u540C\u6B65\u7684\u914D\u7F6E: ${y}, \u603B\u6570: ${t.length}`);return}if(g.length>0&&await Promise.all(g.map(async C=>{try{await wn({type:"subscription",name:C,awaitCustomCache:!0})}catch{}})),await Promise.all(t.map(async C=>{try{if(C.sync&&C.source){R.info(`\u6B63\u5728\u540C\u6B65\u4E91\u914D\u7F6E\uFF1A${C.name}...`);let a=C.platform==="SurgeMac";a&&R.info("\u624B\u52A8\u6307\u5B9A\u4E86 target \u4E3A SurgeMac, \u5C06\u4F7F\u7528 Mihomo External");let H=await wn({type:C.type,name:C.source,platform:C.platform,produceOpts:{"include-unsupported-proxy":C.includeUnsupportedProxy,useMihomoExternal:a}});e[encodeURIComponent(C.name)]={content:H},n.push(C.name)}}catch(a){R.error(`\u751F\u6210\u540C\u6B65\u914D\u7F6E ${C.name} \u53D1\u751F\u9519\u8BEF: ${a.message??a}`),u.push(C.name)}})),R.info(`${n.length} \u4E2A\u540C\u6B65\u914D\u7F6E\u751F\u6210\u6210\u529F: ${n.join(", ")}`),R.info(`${u.length} \u4E2A\u540C\u6B65\u914D\u7F6E\u751F\u6210\u5931\u8D25: ${u.join(", ")}`),n.length===0)throw new Error(`\u540C\u6B65\u914D\u7F6E ${u.join(", ")} \u751F\u6210\u5931\u8D25 \u8BE6\u60C5\u8BF7\u67E5\u770B\u65E5\u5FD7`);let E=await M0(e),m=JSON.parse(E.body);delete m.history,delete m.forks,delete m.owner,Object.values(m.files).forEach(C=>{delete C.content}),R.info("\u4E0A\u4F20\u914D\u7F6E\u54CD\u5E94:"),R.info(JSON.stringify(m,null,2));for(let C of t)if(C.sync&&C.source&&n.includes(C.name)){C.updated=new Date().getTime();let a=m.files,H;Array.isArray(a)&&(H=!0,a=Object.fromEntries(a.map(j=>[j.path,j])));let X=a[encodeURIComponent(C.name)]?.raw_url,w=H?X:X?.replace(/\/raw\/[^/]*\/(.*)/,"/raw/$1");R.info(`\u4E0A\u4F20\u914D\u7F6E\u5B8C\u6210
\u6587\u4EF6\u5217\u8868: ${Object.keys(a).join(", ")}
\u5F53\u524D\u6587\u4EF6: ${encodeURIComponent(C.name)}
\u54CD\u5E94\u8FD4\u56DE\u7684\u539F\u59CB\u94FE\u63A5: ${X}
\u5904\u7406\u5B8C\u7684\u65B0\u94FE\u63A5: ${w}`),C.url=w}if(R.write(t,$t),R.info("\u4E0A\u4F20\u914D\u7F6E\u6210\u529F"),u.length>0)throw new Error(`\u540C\u6B65\u914D\u7F6E\u6210\u529F ${n.length} \u4E2A, \u5931\u8D25 ${u.length} \u4E2A, \u8BE6\u60C5\u8BF7\u67E5\u770B\u65E5\u5FD7`);R.info(`\u540C\u6B65\u914D\u7F6E\u6210\u529F ${n.length} \u4E2A`)}catch(n){throw R.error(`\u540C\u6B65\u914D\u7F6E\u5931\u8D25\uFF0C\u539F\u56E0\uFF1A${n.message??n}`),n}}async function VK(t,e){R.info("\u5F00\u59CB\u540C\u6B65\u6240\u6709\u8FDC\u7A0B\u914D\u7F6E...");try{await dw(),qe(e)}catch(n){R.error(`\u540C\u6B65\u914D\u7F6E\u5931\u8D25\uFF0C\u539F\u56E0\uFF1A${n.message??n}`),Ne(e,new gr("FAILED_TO_SYNC_ARTIFACTS","Failed to sync all artifacts",`Reason: ${n.message??n}`))}}async function KK(t,e){let{name:n}=t.params;R.info(`\u5F00\u59CB\u540C\u6B65\u8FDC\u7A0B\u914D\u7F6E ${n}...`);let u=R.read($t),s=ft(u,n);if(!s){R.error(`\u627E\u4E0D\u5230\u8FDC\u7A0B\u914D\u7F6E ${n}`),Ne(e,new _r("RESOURCE_NOT_FOUND",`\u627E\u4E0D\u5230\u8FDC\u7A0B\u914D\u7F6E ${n}`),404);return}if(!s.source){R.error(`\u8FDC\u7A0B\u914D\u7F6E ${n} \u672A\u8BBE\u7F6E\u6765\u6E90`),Ne(e,new _r("RESOURCE_HAS_NO_SOURCE",`\u8FDC\u7A0B\u914D\u7F6E ${n} \u672A\u8BBE\u7F6E\u6765\u6E90`),404);return}try{let p=s.platform==="SurgeMac";p&&R.info("\u624B\u52A8\u6307\u5B9A\u4E86 target \u4E3A SurgeMac, \u5C06\u4F7F\u7528 Mihomo External");let g=await wn({type:s.type,name:s.source,platform:s.platform,produceOpts:{"include-unsupported-proxy":s.includeUnsupportedProxy,useMihomoExternal:p}});R.info(`\u6B63\u5728\u4E0A\u4F20\u914D\u7F6E\uFF1A${s.name}
>>>${JSON.stringify(s,null,2)}`);let y=await M0({[encodeURIComponent(s.name)]:{content:g}});s.updated=new Date().getTime();let E=JSON.parse(y.body);delete E.history,delete E.forks,delete E.owner,Object.values(E.files).forEach(X=>{delete X.content}),R.info("\u4E0A\u4F20\u914D\u7F6E\u54CD\u5E94:"),R.info(JSON.stringify(E,null,2));let m=E.files,C;Array.isArray(m)&&(C=!0,m=Object.fromEntries(m.map(X=>[X.path,X])));let a=m[encodeURIComponent(s.name)]?.raw_url,H=C?a:a?.replace(/\/raw\/[^/]*\/(.*)/,"/raw/$1");R.info(`\u4E0A\u4F20\u914D\u7F6E\u5B8C\u6210
\u6587\u4EF6\u5217\u8868: ${Object.keys(m).join(", ")}
\u5F53\u524D\u6587\u4EF6: ${encodeURIComponent(s.name)}
\u54CD\u5E94\u8FD4\u56DE\u7684\u539F\u59CB\u94FE\u63A5: ${a}
\u5904\u7406\u5B8C\u7684\u65B0\u94FE\u63A5: ${H}`),s.url=H,R.write(u,$t),qe(e,s)}catch(p){R.error(`\u8FDC\u7A0B\u914D\u7F6E ${s.name} \u53D1\u751F\u9519\u8BEF: ${p.message??p}`),Ne(e,new gr("FAILED_TO_SYNC_ARTIFACT",`Failed to sync artifact ${n}`,`Reason: ${p}`))}}var OF=qp.find(t=>t.name==="Clash Pre-processor"),pw=new Map;async function on(rawUrl="",ua,timeout,customProxy,skipCustomCache,awaitCustomCache,noCache,preprocess){let $arguments={},url=rawUrl.replace(/#noFlow$/,""),rawArgs=url.split("#");if(url=url.split("#")[0],rawArgs.length>1)try{$arguments=JSON.parse(decodeURIComponent(rawArgs[1]))}catch{for(let t of rawArgs[1].split("&")){let e=t.split("=")[0],n=t.split("=")[1];$arguments[e]=n==null||n===""?!0:decodeURIComponent(n)}}let{isNode,isStash,isLoon,isShadowRocket,isQX}=dn(),{defaultProxy,defaultUserAgent,defaultTimeout,cacheThreshold:defaultCacheThreshold}=R.read(At),cacheThreshold=defaultCacheThreshold||1024,proxy=customProxy||defaultProxy;R.env.isNode&&(proxy=proxy||eval("process.env.SUB_STORE_BACKEND_DEFAULT_PROXY"));let userAgent=ua||defaultUserAgent||"clash.meta",requestTimeout=timeout||defaultTimeout||8e3,id=Wi(userAgent+url);$arguments?.cacheKey===!0&&(R.error("\u4F7F\u7528\u81EA\u5B9A\u4E49\u7F13\u5B58\u65F6 cacheKey \u7684\u503C\u4E0D\u80FD\u4E3A\u7A7A"),$arguments.cacheKey=void 0);let customCacheKey=$arguments?.cacheKey?`#sub-store-cached-custom-${$arguments?.cacheKey}`:void 0;if(customCacheKey&&!skipCustomCache){let t=R.read(customCacheKey),e=Jr.get(id);if(!noCache&&!$arguments?.noCache&&e)return R.info(`\u4E50\u89C2\u7F13\u5B58: URL ${url}
\u5B58\u5728\u6709\u6548\u7684\u5E38\u89C4\u7F13\u5B58
\u4F7F\u7528\u5E38\u89C4\u7F13\u5B58\u4EE5\u907F\u514D\u91CD\u590D\u8BF7\u6C42`),e;if(t){if(awaitCustomCache){R.info(`\u4E50\u89C2\u7F13\u5B58: URL ${url}
\u672C\u6B21\u8FDB\u884C\u8BF7\u6C42 \u5C1D\u8BD5\u66F4\u65B0\u7F13\u5B58`);try{await on(rawUrl.replace(/(\?|&)cacheKey=.*?(&|$)/,""),ua,timeout,proxy,!0,void 0,void 0,preprocess)}catch(n){R.error(`\u4E50\u89C2\u7F13\u5B58: URL ${url} \u66F4\u65B0\u7F13\u5B58\u53D1\u751F\u9519\u8BEF ${n.message??n}`),R.info("\u4F7F\u7528\u4E50\u89C2\u7F13\u5B58\u7684\u6570\u636E\u5237\u65B0\u7F13\u5B58, \u9632\u6B62\u540E\u7EED\u8BF7\u6C42"),Jr.set(id,t)}}else R.info(`\u4E50\u89C2\u7F13\u5B58: URL ${url}
\u672C\u6B21\u8FD4\u56DE\u81EA\u5B9A\u4E49\u7F13\u5B58 ${$arguments?.cacheKey}
\u5E76\u8FDB\u884C\u8BF7\u6C42 \u5C1D\u8BD5\u5F02\u6B65\u66F4\u65B0\u7F13\u5B58`),on(rawUrl.replace(/(\?|&)cacheKey=.*?(&|$)/,""),ua,timeout,proxy,!0,void 0,void 0,preprocess).catch(n=>{R.error(`\u4E50\u89C2\u7F13\u5B58: URL ${url} \u5F02\u6B65\u66F4\u65B0\u7F13\u5B58\u53D1\u751F\u9519\u8BEF ${n.message??n}`)});return t}}let downloadUrlMatch=url.split("#")[0].match(/^\/api\/(file|module)\/(.+)/);if(downloadUrlMatch){let t="";try{t=downloadUrlMatch?.[1];let e=downloadUrlMatch?.[2];if(e==null)throw new Error(`\u672C\u5730 ${t} URL \u65E0\u6548: ${url}`);e=decodeURIComponent(e);let n=t==="module"?jn:jt,u=ft(R.read(n),e);if(!u)throw new Error(`\u627E\u4E0D\u5230 ${t}: ${e}`);return t==="module"?u.content:await wn({type:"file",name:e})}catch(e){throw R.error(`Error when loading ${t}: ${url.split("#")[0]}.
 Reason: ${e}`),new Error(`\u65E0\u6CD5\u52A0\u8F7D ${t}: ${url}`)}}else if(url?.startsWith("/"))try{return require("fs").readFileSync(url.split("#")[0],"utf8")}catch(t){throw R.error(`Error when reading local file: ${url.split("#")[0]}.
 Reason: ${t}`),new Error(`\u65E0\u6CD5\u4ECE\u8BE5\u8DEF\u5F84\u8BFB\u53D6\u6587\u672C\u5185\u5BB9: ${url}`)}if(!isNode&&pw.has(id))return pw.get(id);let http=Rs({headers:{"User-Agent":userAgent,...isStash&&proxy?{"X-Stash-Selected-Proxy":encodeURIComponent(proxy)}:{},...isShadowRocket&&proxy?{"X-Surge-Policy":proxy}:{}},timeout:requestTimeout}),result,cached=Jr.get(id);if(!noCache&&!$arguments?.noCache&&cached)R.info(`\u4F7F\u7528\u7F13\u5B58: ${url}, ${userAgent}`),result=cached,customCacheKey&&(R.info(`URL ${url}
\u5199\u5165\u81EA\u5B9A\u4E49\u7F13\u5B58 ${$arguments?.cacheKey}`),R.write(cached,customCacheKey));else{let t=$arguments?.insecure?isNode?{strictSSL:!1}:{insecure:!0}:void 0;R.info(`Downloading...
User-Agent: ${userAgent}
Timeout: ${requestTimeout}
Proxy: ${proxy}
Insecure: ${!!t}
Preprocess: ${preprocess}
URL: ${url}`);try{let{body:e,headers:n,statusCode:u}=await http.get({url,...proxy?{proxy}:{},...isLoon&&proxy?{node:proxy}:{},...isQX&&proxy?{opts:{policy:proxy}}:{},...proxy?tu(proxy):{},...t||{}});if(R.info(`statusCode: ${u}`),u<200||u>=400)throw new Error(`statusCode: ${u}`);if(n){let p=zo(n);p&&Ko.set(id,p)}if(e.replace(/\s/g,"").length===0)throw new Error(new Error("\u8FDC\u7A0B\u8D44\u6E90\u5185\u5BB9\u4E3A\u7A7A"));if(preprocess)try{OF.test(e)&&(e=OF.parse(e,!0))}catch(p){R.error(`Clash Pre-processor error: ${p}`)}let s=!0;if(cacheThreshold){let p=e.length/1024;p>cacheThreshold&&(R.info(`\u8D44\u6E90\u5927\u5C0F ${p.toFixed(2)} KB \u8D85\u8FC7\u4E86 ${cacheThreshold} KB, \u4E0D\u7F13\u5B58`),s=!1)}if(preprocess)try{let p=xt.parse(e);(!Array.isArray(p)||p.length===0)&&(R.error(`URL ${url} \u4E0D\u5305\u542B\u6709\u6548\u8282\u70B9, \u4E0D\u7F13\u5B58`),s=!1)}catch(p){R.error(`URL ${url} \u5C1D\u8BD5\u89E3\u6790\u8282\u70B9\u5931\u8D25 ${p.message??p}, \u4E0D\u7F13\u5B58`),s=!1}s&&(Jr.set(id,e),customCacheKey&&(R.info(`URL ${url}
\u5199\u5165\u81EA\u5B9A\u4E49\u7F13\u5B58 ${$arguments?.cacheKey}`),R.write(e,customCacheKey))),result=e}catch(e){if(customCacheKey){let n=R.read(customCacheKey);if(n)return R.info(`\u65E0\u6CD5\u4E0B\u8F7D URL ${url}: ${e.message??e}
\u4F7F\u7528\u81EA\u5B9A\u4E49\u7F13\u5B58 ${$arguments?.cacheKey}`),n}throw new Error(`\u65E0\u6CD5\u4E0B\u8F7D URL ${url}: ${e.message??e}`)}}return $arguments?.validCheck&&await ip(ru(await zn(url,$arguments.flowUserAgent,void 0,proxy,$arguments.flowUrl))),isNode||pw.set(id,result),result}async function zh(t,e){let n=require("undici"),u=require("fs"),{pipeline:s}=require("stream/promises"),{Agent:p,interceptors:g,request:y}=n;R.info(`Downloading file...
URL: ${t}
File: ${e}`);let{body:E,statusCode:m}=await y(t,{dispatcher:new p().compose(g.redirect({maxRedirections:3,throwOnRedirect:!0}))});if(m!==200)throw new Error(`Failed to download file from ${t}`);let C=u.createWriteStream(e);return await s(E,C),R.info(`File downloaded from ${t} to ${e}`),e}var mw=qr(Wl());function gw(t){R.read(At)||R.write({},At),t.route("/api/settings").get(zK).patch(GK)}async function zK(t,e){try{let n=R.read(At);n||(n={},R.write(n,At)),n.avatarUrl||await q0(),n.artifactStore||await V0(),qe(e,n)}catch(n){R.error(`Failed to get settings: ${n.message??n}`),Ne(e,new gr("FAILED_TO_GET_SETTINGS","Failed to get settings",`Reason: ${n.message??n}`))}}async function GK(t,e){try{let n={...R.read(At),...t.body};["defaultTimeout","cacheThreshold","resourceCacheTtl","headersCacheTtl","scriptCacheTtl"].map(u=>{let s=Number(n[u]);(!isFinite(s)||s<=0)&&delete n[u]}),R.write(n,At),(t.body.githubUser||t.body.gistToken||t.body.githubProxy||t.body.defaultProxy)&&(await q0(),await V0()),qe(e,n)}catch(n){R.error(`Failed to update settings: ${n.message??n}`),Ne(e,new gr("FAILED_TO_UPDATE_SETTINGS","Failed to update settings",`Reason: ${n.message??n}`))}}async function q0(){let t=R.read(At),{githubUser:e,syncPlatform:n,githubProxy:u}=t;if(e)if(n==="gitlab")try{let s=await R.http.get({url:`https://gitlab.com/api/v4/users?username=${encodeURIComponent(e)}`,headers:{"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.141 Safari/537.36"}}).then(p=>JSON.parse(p.body));t.avatarUrl=s[0].avatar_url.replace(/(\?|&)s=\d+(&|$)/,"$1s=160$2"),R.write(t,At)}catch(s){R.error(`Failed to fetch GitLab avatar for User: ${e}. Reason: ${s.message??s}`)}else try{let s=await R.http.get({url:`${u?`${u}/`:""}https://api.github.com/users/${encodeURIComponent(e)}`,headers:{"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.141 Safari/537.36"}}).then(p=>JSON.parse(p.body));t.avatarUrl=s.avatar_url,R.write(t,At)}catch(s){R.error(`Failed to fetch GitHub avatar for User: ${e}. Reason: ${s.message??s}`)}}async function V0(){R.log("Updating artifact store");let t=R.read(At),{gistToken:e,syncPlatform:n}=t;if(e){let u=new Cs({token:e,key:Uo,syncPlatform:n});try{let s=await u.locate(),p=s?.html_url??s?.web_url;p?(R.log(`\u627E\u5230 Sub-Store Gist: ${p}`),t.artifactStore=p,t.artifactStoreStatus="VALID"):(R.error(`\u627E\u4E0D\u5230 Sub-Store Gist (${Uo})`),t.artifactStoreStatus="NOT FOUND")}catch(s){R.error(`\u67E5\u627E Sub-Store Gist (${Uo}) \u65F6\u53D1\u751F\u9519\u8BEF: ${s.message??s}`),t.artifactStoreStatus="ERROR"}R.write(t,At)}}function vw(t){t.get("/api/utils/env",TF),t.get("/api/utils/backup",WK),t.get("/api/utils/refresh",YK),t.route("/api/storage").get((e,n)=>{n.set("content-type","application/json").set("content-disposition",`attachment; filename="${encodeURIComponent(`sub-store_data_${Yu(new Date)}.json`)}"`).send(R.env.isNode?JSON.stringify(R.cache):R.read("#sub-store"))}).post((e,n)=>{let{content:u}=e.body;try{if(u=JSON.parse(dt.decode(u)),!(Object.keys(u.settings).length>=0))throw new Error("\u5907\u4EFD\u6587\u4EF6\u5E94\u8BE5\u81F3\u5C11\u5305\u542B settings \u5B57\u6BB5")}catch{try{if(u=JSON.parse(u),!(Object.keys(u.settings).length>=0))throw new Error("\u5907\u4EFD\u6587\u4EF6\u5E94\u8BE5\u81F3\u5C11\u5305\u542B settings \u5B57\u6BB5")}catch(s){throw R.error(`\u5907\u4EFD\u6587\u4EF6\u6821\u9A8C\u5931\u8D25, \u65E0\u6CD5\u8FD8\u539F
Reason: ${s.message??s}`),new Error("\u5907\u4EFD\u6587\u4EF6\u6821\u9A8C\u5931\u8D25, \u65E0\u6CD5\u8FD8\u539F")}}R.write(JSON.stringify(u,null,"  "),"#sub-store"),R.env.isNode&&(R.cache=u,R.persistCache()),zu(),qe(n)}),dn().isNode?t.get("/",TF):t.get("/",async(e,n)=>{n.set("location","https://sub-store.vercel.app/").status(302).end()}),dn().isQX&&t.options("/",async(e,n)=>{n.status(200).end()}),t.all("/",(e,n)=>{n.send("Hello from sub-store, made with \u2764\uFE0F by Peng-YM")})}function TF(t,e){t.query.share&&(ro.feature.share=!0),e.set("Content-Type","application/json;charset=UTF-8").send(JSON.stringify({status:"success",data:{guide:"\u26A0\uFE0F\u26A0\uFE0F\u26A0\uFE0F \u60A8\u5F53\u524D\u770B\u5230\u7684\u662F\u540E\u7AEF\u7684\u54CD\u5E94. \u82E5\u60F3\u914D\u5408\u524D\u7AEF\u4F7F\u7528, \u53EF\u8BBF\u95EE\u5B98\u65B9\u524D\u7AEF https://sub-store.vercel.app \u540E\u81EA\u884C\u914D\u7F6E\u540E\u7AEF\u5730\u5740, \u6216\u4E00\u952E\u914D\u7F6E\u540E\u7AEF https://sub-store.vercel.app?api=https://a.com/xxx (\u5047\u8BBE https://a.com \u662F\u4F60\u540E\u7AEF\u7684\u57DF\u540D, /xxx \u662F\u81EA\u5B9A\u4E49\u8DEF\u5F84). \u9700\u6CE8\u610F HTTPS \u524D\u7AEF\u65E0\u6CD5\u8BF7\u6C42\u975E\u672C\u5730\u7684 HTTP \u540E\u7AEF(\u90E8\u5206\u6D4F\u89C8\u5668\u4E0A\u4E5F\u65E0\u6CD5\u8BBF\u95EE\u672C\u5730 HTTP \u540E\u7AEF). \u8BF7\u914D\u7F6E\u53CD\u4EE3\u6216\u5728\u5C40\u57DF\u7F51\u81EA\u5EFA HTTP \u524D\u7AEF. \u5982\u679C\u8FD8\u6709\u95EE\u9898, \u53EF\u67E5\u770B\u6B64\u6392\u67E5\u8BF4\u660E: https://t.me/zhetengsha/1068",...ro}},null,2))}async function YK(t,e){await q0(),await V0(),Jr.revokeAll(),Gf.revokeAll(),Ko.revokeAll(),qe(e)}async function K0(t,e,n){let{gistToken:u,syncPlatform:s}=R.read(At);if(!u)throw new Error("GitHub Token is required for backup!");let p=new Cs({token:u,key:KA,syncPlatform:s}),g=R.read("#sub-store");g=g?JSON.parse(g):{},R.env.isNode&&(g=JSON.parse(JSON.stringify(R.cache)));let y,E=R.read(At),m=E.syncTime,C=n||E.gistUpload||"base64";switch(R.info(`Gist backup action: ${t}, keep: ${e}, encode: ${n}, settings encode: ${E.gistUpload}, final encoding: ${C}`),t){case"upload":try{if(y=R.read("#sub-store"),y=y?JSON.parse(y):{},R.env.isNode&&(y=JSON.parse(JSON.stringify(R.cache))),C==="plaintext"?(y.settings.gistToken="\u6062\u590D\u540E\u8BF7\u91CD\u65B0\u8BBE\u7F6E GitHub Token",y=JSON.stringify(y,null,"  ")):y=dt.encode(JSON.stringify(y,null,"  ")),R.info("\u4E0B\u8F7D\u5907\u4EFD, \u4E0E\u672C\u5730\u5185\u5BB9\u5BF9\u6BD4..."),await p.download(zd)===y){R.info("\u5185\u5BB9\u4E00\u81F4, \u65E0\u9700\u4E0A\u4F20\u5907\u4EFD");return}}catch(a){R.error(`${a.message??a}`)}E.syncTime=new Date().getTime(),R.write(E,At),y=R.read("#sub-store"),y=y?JSON.parse(y):{},R.env.isNode&&(y=JSON.parse(JSON.stringify(R.cache))),C==="plaintext"?(y.settings.gistToken="\u6062\u590D\u540E\u8BF7\u91CD\u65B0\u8BBE\u7F6E GitHub Token",y=JSON.stringify(y,null,"  ")):y=dt.encode(JSON.stringify(y,null,"  ")),R.info("\u4E0A\u4F20\u5907\u4EFD\u4E2D...");try{await p.upload({[zd]:{content:y}}),R.info("\u4E0A\u4F20\u5907\u4EFD\u5B8C\u6210")}catch(a){throw E.syncTime=m,R.write(E,At),a}break;case"download":R.info("\u8FD8\u539F\u5907\u4EFD\u4E2D..."),y=await p.download(zd);try{if(y=JSON.parse(dt.decode(y)),!(Object.keys(y.settings).length>=0))throw new Error("\u5907\u4EFD\u6587\u4EF6\u5E94\u8BE5\u81F3\u5C11\u5305\u542B settings \u5B57\u6BB5")}catch{try{if(y=JSON.parse(y),!(Object.keys(y.settings).length>=0))throw new Error("\u5907\u4EFD\u6587\u4EF6\u5E94\u8BE5\u81F3\u5C11\u5305\u542B settings \u5B57\u6BB5")}catch(a){throw R.error(`Gist \u5907\u4EFD\u6587\u4EF6\u6821\u9A8C\u5931\u8D25, \u65E0\u6CD5\u8FD8\u539F
Reason: ${a.message??a}`),new Error("Gist \u5907\u4EFD\u6587\u4EF6\u6821\u9A8C\u5931\u8D25, \u65E0\u6CD5\u8FD8\u539F")}}e&&(R.info(`\u4FDD\u7559\u539F\u6709\u8BBE\u7F6E ${e}`),e.split(",").forEach(a=>{mw.default.set(y,a,mw.default.get(g,a))})),R.write(JSON.stringify(y,null,"  "),"#sub-store"),R.env.isNode&&(R.cache=y,R.persistCache()),R.info("perform migration after restoring from gist..."),zu(),R.info("migration completed"),R.info("\u8FD8\u539F\u5907\u4EFD\u5B8C\u6210");break}}async function WK(t,e){let{action:n,keep:u,encode:s}=t.query,{gistToken:p}=R.read(At);if(!p)Ne(e,new Ht("GIST_TOKEN_NOT_FOUND","GitHub Token is required for backup!"));else try{await K0(n,u,s),qe(e)}catch(g){R.error(`Failed to ${n} gist data.
Reason: ${g.message??g}`),Ne(e,new gr("BACKUP_FAILED",`Failed to ${n} gist data!`,`Reason: ${g.message??g}`))}}R.read(Zt)||R.write({},Zt);function ww(t){t.get("/api/sub/flow/:name",XK),t.route("/api/sub/:name").get(ZK).patch(QK).delete(ez),t.route("/api/subs").get(tz).post(JK).put(rz)}async function XK(t,e){let{name:n}=t.params,{url:u}=t.query;u&&R.info(`\u6307\u5B9A\u8FDC\u7A0B\u8BA2\u9605 URL: ${u}`);let s=R.read(Zt),p=ft(s,n);if(!p){Ne(e,new _r("RESOURCE_NOT_FOUND",`Subscription ${n} does not exist!`),404);return}if(p.source==="local"&&!["localFirst","remoteFirst"].includes(p.mergeSources)){if(p.subUserinfo){let g;if(/^https?:\/\//.test(p.subUserinfo))try{g=await zn(void 0,void 0,void 0,p.proxy,p.subUserinfo)}catch(y){R.error(`\u8BA2\u9605 ${n} \u4F7F\u7528\u81EA\u5B9A\u4E49\u6D41\u91CF\u94FE\u63A5 ${p.subUserinfo} \u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u65F6\u53D1\u751F\u9519\u8BEF: ${JSON.stringify(y)}`)}else g=p.subUserinfo;try{qe(e,{...ru(g)})}catch(y){R.error(`Failed to parse flow info for local subscription ${n}: ${y.message??y}`),Ne(e,new Ht("NO_FLOW_INFO","N/A","Failed to parse flow info"))}}else Ne(e,new Ht("NO_FLOW_INFO","N/A",`Local subscription ${n} has no flow information!`));return}try{u=`${u||p.url}`.split(/[\r\n]+/).map(m=>m.trim()).filter(m=>m.length)?.[0]||"";let g={},y=u.split("#");if(u=u.split("#")[0],y.length>1)try{g=JSON.parse(decodeURIComponent(y[1]))}catch{for(let m of y[1].split("&")){let C=m.split("=")[0],a=m.split("=")[1];g[C]=a==null||a===""?!0:decodeURIComponent(a)}}if(g.noFlow||!/^https?/.test(u)){Ne(e,new Ht("NO_FLOW_INFO","N/A",`Subscription ${n}: noFlow`));return}let E=await zn(g?.insecure?`${u}#insecure`:u,g.flowUserAgent,void 0,p.proxy,g.flowUrl);if(!E&&!p.subUserinfo){Ne(e,new gr("NO_FLOW_INFO","No flow info","Failed to fetch flow headers"));return}try{let m=sp({resetDay:g.resetDay,startDate:g.startDate,cycleDays:g.cycleDays}),C;if(/^https?:\/\//.test(p.subUserinfo))try{C=await zn(void 0,void 0,void 0,p.proxy,p.subUserinfo)}catch(H){R.error(`\u8BA2\u9605 ${n} \u4F7F\u7528\u81EA\u5B9A\u4E49\u6D41\u91CF\u94FE\u63A5 ${p.subUserinfo} \u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u65F6\u53D1\u751F\u9519\u8BEF: ${JSON.stringify(H)}`)}else C=p.subUserinfo;let a={...ru([C,E].filter(H=>H).join("; "))};m!=null&&(a.remainingDays=m),qe(e,a)}catch(m){R.error(`Failed to parse flow info for local subscription ${n}: ${m.message??m}`),Ne(e,new Ht("NO_FLOW_INFO","N/A","Failed to parse flow info"))}}catch{Ne(e,new rc("URL_NOT_ACCESSIBLE",`The URL for subscription ${n} is inaccessible.`))}}function JK(t,e){let n=t.body;if(delete n.subscriptions,R.info(`\u6B63\u5728\u521B\u5EFA\u8BA2\u9605\uFF1A ${n.name}`),/\//.test(n.name)){Ne(e,new Ht("INVALID_NAME",`Subscription ${n.name} is invalid`));return}let u=R.read(Zt);if(ft(u,n.name)){Ne(e,new Ht("DUPLICATE_KEY",`Subscription ${n.name} already exists.`));return}u.push(n),R.write(u,Zt),qe(e,n,201)}function ZK(t,e){let{name:n}=t.params,{raw:u}=t.query,s=R.read(Zt),p=ft(s,n);delete p.subscriptions,p?u?e.set("content-type","application/json").set("content-disposition",`attachment; filename="${encodeURIComponent(`sub-store_subscription_${n}_${Yu(new Date)}.json`)}"`).send(JSON.stringify(p)):qe(e,p):Ne(e,new _r("SUBSCRIPTION_NOT_FOUND",`Subscription ${n} does not exist`,404))}function QK(t,e){let{name:n}=t.params,u=t.body;delete u.subscriptions;let s=R.read(Zt),p=ft(s,n);if(p){u.name||(u.name=p.name);let g={...p,...u};if(R.info(`\u6B63\u5728\u66F4\u65B0\u8BA2\u9605\uFF1A ${n}`),n!==u.name){let y=R.read(Qt)||[];for(let C of y){let a=C.subscriptions.indexOf(n);a!==-1&&(C.subscriptions[a]=u.name)}let E=R.read($t)||[];for(let C of E)C.type==="subscription"&&C.source==n&&(C.source=u.name);let m=R.read(jt)||[];for(let C of m)C.sourceType==="subscription"&&C.sourceName==n&&(C.sourceName=u.name);R.write(y,Qt),R.write(E,$t),R.write(m,jt)}Ts(s,n,g),R.write(s,Zt),qe(e,g)}else Ne(e,new _r("RESOURCE_NOT_FOUND",`Subscription ${n} does not exist!`),404)}function ez(t,e){let{name:n}=t.params;R.info(`\u5220\u9664\u8BA2\u9605\uFF1A${n}...`);let u=R.read(Zt);Os(u,n),R.write(u,Zt);let s=R.read(Qt);for(let p of s)p.subscriptions=p.subscriptions.filter(g=>g!==n);R.write(s,Qt),qe(e)}function tz(t,e){let n=R.read(Zt);qe(e,n)}function rz(t,e){let n=t.body;R.write(n,Zt),qe(e)}function Ew(t){R.read(Qt)||R.write({},Qt),t.route("/api/collection/:name").get(iz).patch(sz).delete(az),t.route("/api/collections").get(uz).post(nz).put(oz)}function nz(t,e){let n=t.body;if(R.info(`\u6B63\u5728\u521B\u5EFA\u7EC4\u5408\u8BA2\u9605\uFF1A${n.name}`),/\//.test(n.name)){Ne(e,new Ht("INVALID_NAME",`Collection ${n.name} is invalid`));return}let u=R.read(Qt);if(ft(u,n.name)){Ne(e,new Ht("DUPLICATE_KEY",`Collection ${n.name} already exists.`));return}u.push(n),R.write(u,Qt),qe(e,n,201)}function iz(t,e){let{name:n}=t.params,{raw:u}=t.query,s=R.read(Qt),p=ft(s,n);p?u?e.set("content-type","application/json").set("content-disposition",`attachment; filename="${encodeURIComponent(`sub-store_collection_${n}_${Yu(new Date)}.json`)}"`).send(JSON.stringify(p)):qe(e,p):Ne(e,new _r("SUBSCRIPTION_NOT_FOUND",`Collection ${n} does not exist`,404))}function sz(t,e){let{name:n}=t.params,u=t.body,s=R.read(Qt),p=ft(s,n);if(p){u.name||(u.name=p.name);let g={...p,...u};if(R.info(`\u6B63\u5728\u66F4\u65B0\u7EC4\u5408\u8BA2\u9605\uFF1A${n}...`),n!==g.name){let y=R.read($t)||[];for(let m of y)m.type==="collection"&&m.source===p.name&&(m.source=g.name);let E=R.read(jt)||[];for(let m of E)m.sourceType==="collection"&&m.sourceName===p.name&&(m.sourceName=g.name);R.write(y,$t),R.write(E,jt)}Ts(s,n,g),R.write(s,Qt),qe(e,g)}else Ne(e,new _r("RESOURCE_NOT_FOUND",`Collection ${n} does not exist!`),404)}function az(t,e){let{name:n}=t.params;R.info(`\u6B63\u5728\u5220\u9664\u7EC4\u5408\u8BA2\u9605\uFF1A${n}`);let u=R.read(Qt);Os(u,n),R.write(u,Qt),qe(e)}function uz(t,e){let n=R.read(Qt);qe(e,n)}function oz(t,e){let n=t.body;R.write(n,Qt),qe(e)}function Aw(t){R.read(jt)||R.write([],jt),t.get("/share/file/:name",xF),t.route("/api/file/:name").get(xF).patch(fz).delete(hz),t.route("/api/wholeFile/:name").get(cz),t.route("/api/files").get(dz).post(lz).put(gz),t.route("/api/wholeFiles").get(pz)}function lz(t,e){let n=t.body;n.name=`${n.name??Date.now()}`,R.info(`\u6B63\u5728\u521B\u5EFA\u6587\u4EF6\uFF1A${n.name}`);let u=R.read(jt);if(ft(u,n.name))return Ne(e,new Ht("DUPLICATE_KEY",t.body.name?`\u5DF2\u5B58\u5728 name \u4E3A ${n.name} \u7684\u6587\u4EF6`:"\u65E0\u6CD5\u540C\u65F6\u521B\u5EFA\u76F8\u540C\u7684\u6587\u4EF6 \u53EF\u7A0D\u540E\u91CD\u8BD5"));u.push(n),R.write(u,jt),qe(e,n,201)}async function xF(t,e,n){let{name:u}=t.params,s=t.headers["user-agent"]||t.headers["User-Agent"];R.info(`\u6B63\u5728\u4E0B\u8F7D\u6587\u4EF6\uFF1A${u}
\u8BF7\u6C42 User-Agent: ${s}`);let{url:p,subInfoUrl:g,subInfoUserAgent:y,ua:E,content:m,mergeSources:C,ignoreFailedRemoteFile:a,proxy:H,noCache:X,produceType:w}=t.query,j={_req:{method:t.method,url:t.url,path:t.path,query:t.query,params:t.params,headers:t.headers,body:t.body}};if(t.query.$options){let N={};try{N=JSON.parse(decodeURIComponent(t.query.$options))}catch{for(let Q of t.query.$options.split("&")){let at=Q.split("=")[0],q=Q.split("=")[1];N[at]=q==null||q===""?!0:decodeURIComponent(q)}}R.info(`\u4F20\u5165 $options: ${JSON.stringify(N)}`),Object.assign(j,N)}p&&R.info(`\u6307\u5B9A\u8FDC\u7A0B\u6587\u4EF6 URL: ${p}`),H&&R.info(`\u6307\u5B9A\u8FDC\u7A0B\u8BA2\u9605\u4F7F\u7528\u4EE3\u7406/\u7B56\u7565 proxy: ${H}`),E&&R.info(`\u6307\u5B9A\u8FDC\u7A0B\u6587\u4EF6 User-Agent: ${E}`),g&&R.info(`\u6307\u5B9A\u83B7\u53D6\u6D41\u91CF\u7684 subInfoUrl: ${g}`),y&&R.info(`\u6307\u5B9A\u83B7\u53D6\u6D41\u91CF\u7684 subInfoUserAgent: ${y}`),m&&R.info(`\u6307\u5B9A\u672C\u5730\u6587\u4EF6: ${m}`),C&&R.info(`\u6307\u5B9A\u5408\u5E76\u6765\u6E90: ${C}`),a!=null&&a!==""&&R.info(`\u6307\u5B9A\u5FFD\u7565\u5931\u8D25\u7684\u8FDC\u7A0B\u6587\u4EF6: ${a}`),X&&R.info(`\u6307\u5B9A\u4E0D\u4F7F\u7528\u7F13\u5B58: ${X}`),w&&R.info(`\u6307\u5B9A\u751F\u4EA7\u7C7B\u578B: ${w}`);let tt=R.read(jt),J=ft(tt,u);if(J)try{let N=await wn({type:"file",name:u,url:p,ua:E,content:m,mergeSources:C,ignoreFailedRemoteFile:a,$options:j,proxy:H,noCache:X,produceType:w,all:!0});try{if(g=g||J.subInfoUrl,g){let Q=await zn(g,y||J.subInfoUserAgent,void 0,H||J.proxy);if(Q){let at=Wu(Q,!0);at?.["subscription-userinfo"]&&e.set("subscription-userinfo",at["subscription-userinfo"]),at?.["profile-web-page-url"]&&e.set("profile-web-page-url",at["profile-web-page-url"]),at?.["plan-name"]&&e.set("plan-name",at["plan-name"])}}}catch(Q){R.error(`\u6587\u4EF6 ${u} \u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u65F6\u53D1\u751F\u9519\u8BEF: ${JSON.stringify(Q)}`)}J.download&&e.set("Content-Disposition",`attachment; filename*=UTF-8''${encodeURIComponent(J.displayName||J.name)}`),e.set("Content-Type","text/plain; charset=utf-8"),N?.$options?._res?.headers&&Object.entries(N.$options._res.headers).forEach(([Q,at])=>{at==null?e.removeHeader(Q):e.set(Q,at)}),N?.$options?._res?.status&&e.status(N.$options._res.status),e.send(N?.$content??"")}catch(N){R.notify("\u{1F30D} Sub-Store \u4E0B\u8F7D\u6587\u4EF6\u5931\u8D25",`\u274C \u65E0\u6CD5\u4E0B\u8F7D\u6587\u4EF6\uFF1A${u}\uFF01`,`\u{1F914} \u539F\u56E0\uFF1A${N.message??N}`),R.error(N.message??N),Ne(e,new gr("INTERNAL_SERVER_ERROR",`Failed to download file: ${u}`,`Reason: ${N.message??N}`))}else R.error(`\u{1F30D} Sub-Store \u4E0B\u8F7D\u6587\u4EF6\u5931\u8D25
\u274C \u672A\u627E\u5230\u6587\u4EF6\uFF1A${u}\uFF01`),Ne(e,new _r("RESOURCE_NOT_FOUND",`File ${u} does not exist!`),404)}function cz(t,e){let{name:n}=t.params,{raw:u}=t.query,s=R.read(jt),p=ft(s,n);p?u?e.set("content-type","application/json").set("content-disposition",`attachment; filename="${encodeURIComponent(`sub-store_file_${n}_${Yu(new Date)}.json`)}"`).send(JSON.stringify(p)):qe(e,p):Ne(e,new _r("FILE_NOT_FOUND",`File ${n} does not exist`,404))}function fz(t,e){let{name:n}=t.params,u=t.body,s=R.read(jt),p=ft(s,n);if(p){u.name||(u.name=p.name);let g={...p,...u};if(R.info(`\u6B63\u5728\u66F4\u65B0\u6587\u4EF6\uFF1A${n}...`),n!==g.name){let y=R.read($t)||[];for(let E of y)E.type==="file"&&E.source===p.name&&(E.source=g.name);R.write(y,$t)}Ts(s,n,g),R.write(s,jt),qe(e,g)}else Ne(e,new _r("RESOURCE_NOT_FOUND",`File ${n} does not exist!`),404)}function hz(t,e){let{name:n}=t.params;R.info(`\u6B63\u5728\u5220\u9664\u6587\u4EF6\uFF1A${n}`);let u=R.read(jt);Os(u,n),R.write(u,jt),qe(e)}function dz(t,e){let n=R.read(jt);qe(e,n.map(({content:u,...s})=>s))}function pz(t,e){let n=R.read(jt);qe(e,n)}function gz(t,e){let n=t.body;R.write(n,jt),qe(e)}function bw(t){R.read(ui)||R.write([],ui),t.post("/api/token",wz),t.route("/api/token/:token").delete(mz),t.route("/api/tokens").get(vz)}function mz(t,e){let{token:n}=t.params,{type:u,name:s}=t.query;if(!u||!s)return Ne(e,new Ht("INVALID_PAYLOAD","Payload type and name are required. Please update your front-end(version >= 2.15.76)"));R.info(`\u6B63\u5728\u5220\u9664...
token: ${n}, \u7C7B\u578B\uFF1A${u}, \u540D\u79F0\uFF1A${s}`);let p=R.read(ui);p=p.filter(g=>!(g.token===n&&g.type===u&&g.name===s)),R.write(p,ui),qe(e)}function vz(t,e){let{type:n,name:u}=t.query,s=R.read(ui)||[];qe(e,n||u?s.filter(p=>(n?p.type===n:!0)&&(u?p.name===u:!0)):s)}async function wz(t,e){if(!dn().isNode)return Ne(e,new Ht("INVALID_ENV","This endpoint is only available in Node.js environment"));try{let{payload:n,options:u}=t.body,s=require("ms"),p=n?.type,g=n?.name;if(!p||!g)return Ne(e,new Ht("INVALID_PAYLOAD","payload type and name are required"));let y=n?.token;if(y!=null){if(typeof y!="string"||y.length<1)return Ne(e,new Ht("INVALID_CUSTOM_TOKEN",`Invalid custom token: ${y}`));if((R.read(ui)||[]).find(a=>a.token===y&&a.type===p&&a.name===g))return Ne(e,new Ht("DUPLICATE_TOKEN",`Token ${y} already exists`))}if(p==="col"){if(!(R.read(Qt)||[]).find(a=>a.name===g))return Ne(e,new Ht("INVALID_COLLECTION",`collection ${g} not found`))}else if(p==="file"){if(!(R.read(jt)||[]).find(a=>a.name===g))return Ne(e,new Ht("INVALID_FILE",`file ${g} not found`))}else if(p==="sub"){if(!(R.read(Zt)||[]).find(a=>a.name===g))return Ne(e,new Ht("INVALID_SUB",`sub ${g} not found`))}else return Ne(e,new Ht("INVALID_TYPE",`type ${g} not supported`));let E=u?.expiresIn;if(u?.expiresIn!=null&&(E=s(u.expiresIn),E==null||isNaN(E)||E<=0))return Ne(e,new Ht("INVALID_EXPIRES_IN",`Invalid expiresIn option: ${u.expiresIn}`));let m=require("nanoid"),C=R.read(ui)||[];if(!y)do y=m.customAlphabet(m.urlAlphabet)();while(C.find(a=>a.token===y&&a.type===p&&a.name===g));return C.push({...n,token:y,createdAt:Date.now(),expiresIn:E>0?u?.expiresIn:void 0,exp:E>0?Date.now()+E:void 0}),R.write(C,ui),qe(e,{token:y})}catch(n){return Ne(e,new gr("TOKEN_SIGN_FAILED","Failed to sign token",`Reason: ${n.message??n}`))}}function yw(t){R.read(jn)||R.write([],jn),t.route("/api/module/:name").get(Az).patch(bz).delete(yz),t.route("/api/modules").get(_z).post(Ez).put(Cz)}function Ez(t,e){let n=t.body;n.name=`${n.name??Wi(JSON.stringify(n))}`,R.info(`\u6B63\u5728\u521B\u5EFA\u6A21\u5757\uFF1A${n.name}`);let u=R.read(jn);if(ft(u,n.name))return Ne(e,new Ht("DUPLICATE_KEY",t.body.name?`\u5DF2\u5B58\u5728 name \u4E3A ${n.name} \u7684\u6A21\u5757`:"\u5DF2\u5B58\u5728\u76F8\u540C\u7684\u6A21\u5757 \u8BF7\u52FF\u91CD\u590D\u6DFB\u52A0"));u.push(n),R.write(u,jn),qe(e,n,201)}function Az(t,e){let{name:n}=t.params,u=R.read(jn),s=ft(u,n);s?e.set("Content-Type","text/plain; charset=utf-8").send(s.content):Ne(e,new _r("MODULE_NOT_FOUND",`Module ${n} does not exist`,404))}function bz(t,e){let{name:n}=t.params,u=t.body,s=R.read(jn),p=ft(s,n);if(p){let g={...p,...u};R.info(`\u6B63\u5728\u66F4\u65B0\u6A21\u5757\uFF1A${n}...`),Ts(s,n,g),R.write(s,jn),qe(e,g)}else Ne(e,new _r("RESOURCE_NOT_FOUND",`Module ${n} does not exist!`),404)}function yz(t,e){let{name:n}=t.params;R.info(`\u6B63\u5728\u5220\u9664\u6A21\u5757\uFF1A${n}`);let u=R.read(jn);Os(u,n),R.write(u,jn),qe(e)}function _z(t,e){let n=R.read(jn);qe(e,n.map(({content:u,...s})=>s))}function Cz(t,e){let n=t.body;R.write(n,jn),qe(e)}var Fee=qr(QF()),s3=qr(i3());function Jz(t){let e=Object.keys(t),n="",u="",s="";for(let p of e){let g=p.toLowerCase();g==="user-agent"?(n=t[p],u=n.toLowerCase()):g==="accept"&&(s=t[p])}return{UA:n,ua:u,accept:s}}function a3({ua:t,UA:e,accept:n}){return e.indexOf("Quantumult%20X")!==-1?"QX":t.indexOf("egern")!==-1?"Egern":e.indexOf("Surfboard")!==-1?"Surfboard":e.indexOf("Surge Mac")!==-1?"SurgeMac":e.indexOf("Surge")!==-1?"Surge":e.indexOf("Decar")!==-1||e.indexOf("Loon")!==-1?"Loon":e.indexOf("Shadowrocket")!==-1?"Shadowrocket":e.indexOf("Stash")!==-1?"Stash":t==="meta"||t.indexOf("clash")!==-1&&t.indexOf("meta")!==-1||t.indexOf("clash-verge")!==-1||t.indexOf("flclash")!==-1?"ClashMeta":t.indexOf("clash")!==-1?"Clash":t.indexOf("v2ray")!==-1?"V2Ray":t.indexOf("sing-box")!==-1||t.indexOf("singbox")!==-1?"sing-box":n.indexOf("application/json")===0?"JSON":"V2Ray"}function Bw(t){let{UA:e,ua:n,accept:u}=Jz(t);return a3({ua:n,UA:e,accept:u})}function $w(t,e){try{let n=a3({UA:e,ua:e.toLowerCase()}),u=(0,s3.default)(e),{major:s}=u;if(n==="SurgeMac"&&s>=9860||n==="Surge"&&s>=3613||t==="Egern"&&n==="Egern"&&e.match(/build\/(\d+)/i)?.[1]>=698)return!0}catch{}return!1}function Rw(t){t.get("/share/col/:name/:target",async(e,n)=>{let{target:u}=e.params;u&&(e.query.target=u,R.info(`\u4F7F\u7528\u8DEF\u7531\u6307\u5B9A\u76EE\u6807: ${u}`)),await tf(e,n)}),t.get("/share/col/:name",tf),t.get("/share/sub/:name/:target",async(e,n)=>{let{target:u}=e.params;u&&(e.query.target=u,R.info(`\u4F7F\u7528\u8DEF\u7531\u6307\u5B9A\u76EE\u6807: ${u}`)),await ef(e,n)}),t.get("/share/sub/:name",ef),t.get("/download/collection/:name/:target",async(e,n)=>{let{target:u}=e.params;u&&(e.query.target=u,R.info(`\u4F7F\u7528\u8DEF\u7531\u6307\u5B9A\u76EE\u6807: ${u}`)),await tf(e,n)}),t.get("/download/collection/:name",tf),t.get("/download/:name/:target",async(e,n)=>{let{target:u}=e.params;u&&(e.query.target=u,R.info(`\u4F7F\u7528\u8DEF\u7531\u6307\u5B9A\u76EE\u6807: ${u}`)),await ef(e,n)}),t.get("/download/:name",ef),t.get("/download/collection/:name/api/v1/server/details",async(e,n)=>{e.query.platform="JSON",e.query.produceType="internal",e.query.resultFormat="nezha",await tf(e,n)}),t.get("/download/:name/api/v1/server/details",async(e,n)=>{e.query.platform="JSON",e.query.produceType="internal",e.query.resultFormat="nezha",await ef(e,n)}),t.get("/download/collection/:name/api/v1/monitor/:nezhaIndex",async(e,n)=>{e.query.platform="JSON",e.query.produceType="internal",e.query.resultFormat="nezha-monitor",await tf(e,n)}),t.get("/download/:name/api/v1/monitor/:nezhaIndex",async(e,n)=>{e.query.platform="JSON",e.query.produceType="internal",e.query.resultFormat="nezha-monitor",await ef(e,n)})}async function ef(t,e){let{name:n,nezhaIndex:u}=t.params,s=t.query.target==="SurgeMac",p=t.query.target||Bw(t.headers)||"JSON",g=t.headers["user-agent"]||t.headers["User-Agent"];R.info(`\u6B63\u5728\u4E0B\u8F7D\u8BA2\u9605\uFF1A${n}
\u8BF7\u6C42 User-Agent: ${g}
\u8BF7\u6C42 target: ${t.query.target}
\u5B9E\u9645\u8F93\u51FA: ${p}`);let{url:y,ua:E,content:m,mergeSources:C,ignoreFailedRemoteSub:a,produceType:H,includeUnsupportedProxy:X,resultFormat:w,proxy:j,noCache:tt,_fakeNode:J}=t.query,N={_req:{method:t.method,url:t.url,path:t.path,query:t.query,params:t.params,headers:t.headers,body:t.body}};if(t.query.$options){let U={};try{U=JSON.parse(decodeURIComponent(t.query.$options))}catch{for(let V of t.query.$options.split("&")){let lt=V.split("=")[0],It=V.split("=")[1];U[lt]=It==null||It===""?!0:decodeURIComponent(It)}}R.info(`\u4F20\u5165 $options: ${JSON.stringify(U)}`),Object.assign(N,U)}y&&(R.info(`\u6307\u5B9A\u8FDC\u7A0B\u8BA2\u9605 URL: ${y}`),/^https?:\/\//.test(y)||(m=y,R.info("URL \u4E0D\u662F\u94FE\u63A5\uFF0C\u89C6\u4E3A\u672C\u5730\u8BA2\u9605"))),m&&R.info(`\u6307\u5B9A\u672C\u5730\u8BA2\u9605: ${m}`),j&&R.info(`\u6307\u5B9A\u8FDC\u7A0B\u8BA2\u9605\u4F7F\u7528\u4EE3\u7406/\u7B56\u7565 proxy: ${j}`),E&&R.info(`\u6307\u5B9A\u8FDC\u7A0B\u8BA2\u9605 User-Agent: ${E}`),C&&R.info(`\u6307\u5B9A\u5408\u5E76\u6765\u6E90: ${C}`),a!=null&&a!==""&&R.info(`\u6307\u5B9A\u5FFD\u7565\u5931\u8D25\u7684\u8FDC\u7A0B\u8BA2\u9605: ${a}`),H&&R.info(`\u6307\u5B9A\u751F\u4EA7\u7C7B\u578B: ${H}`),X&&R.info(`\u5305\u542B\u5B98\u65B9/\u5546\u5E97\u7248/\u672A\u7EED\u8D39\u8BA2\u9605\u4E0D\u652F\u6301\u7684\u534F\u8BAE: ${X}`),!X&&$w(p,g)&&(X=!0,R.info(`\u5F53\u524D\u5BA2\u6237\u7AEF\u53EF\u5305\u542B\u5B98\u65B9/\u5546\u5E97\u7248/\u672A\u7EED\u8D39\u8BA2\u9605\u4E0D\u652F\u6301\u7684\u534F\u8BAE: ${X}`)),s&&R.info("\u624B\u52A8\u6307\u5B9A\u4E86 target \u4E3A SurgeMac, \u5C06\u4F7F\u7528 Mihomo External"),tt&&R.info(`\u6307\u5B9A\u4E0D\u4F7F\u7528\u7F13\u5B58: ${tt}`);let Q=R.read(Zt),at={name:"fakeNodeInfo",source:"local",content:"invalid share = ss, 1.0.0.1, 80, encrypt-method=aes-128-gcm, password=password"},q=J?at:ft(Q,n);if(q)try{q.passThroughUA&&(R.info(`\u8BA2\u9605\u5F00\u542F\u4E86\u900F\u4F20 User-Agent, \u4F7F\u7528\u8BF7\u6C42\u7684 User-Agent: ${g}`),E=g);let U={type:"subscription",name:n,platform:p,url:y,ua:E,content:m,mergeSources:C,ignoreFailedRemoteSub:a,produceType:H,produceOpts:{"include-unsupported-proxy":X,useMihomoExternal:s},$options:N,proxy:j,noCache:tt};J&&(R.info("\u8FD4\u56DE\u5047\u8282\u70B9\u4FE1\u606F"),delete U.name,U.subscription=at);let V=await wn(U),lt;if(q.source!=="local"||["localFirst","remoteFirst"].includes(q.mergeSources))try{y=`${y||q.url}`.split(/[\r\n]+/).map(yt=>yt.trim()).filter(yt=>yt.length)?.[0]||"";let It={},Ot=y.split("#");if(y=y.split("#")[0],Ot.length>1)try{It=JSON.parse(decodeURIComponent(Ot[1]))}catch{for(let yt of Ot[1].split("&")){let Et=yt.split("=")[0],vt=yt.split("=")[1];It[Et]=vt==null||vt===""?!0:decodeURIComponent(vt)}}if(!It.noFlow&&/^https?/.test(y)&&(lt=await zn(It?.insecure?`${y}#insecure`:y,It.flowUserAgent,void 0,j||q.proxy,It.flowUrl),lt)){let yt=Wu(lt,!0);yt?.["subscription-userinfo"]&&e.set("subscription-userinfo",yt["subscription-userinfo"]),yt?.["profile-web-page-url"]&&e.set("profile-web-page-url",yt["profile-web-page-url"]),yt?.["plan-name"]&&e.set("plan-name",yt["plan-name"])}}catch(It){R.error(`\u8BA2\u9605 ${n} \u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u65F6\u53D1\u751F\u9519\u8BEF: ${JSON.stringify(It)}`)}if(q.subUserinfo){let It;if(/^https?:\/\//.test(q.subUserinfo))try{It=await zn(void 0,void 0,void 0,j||q.proxy,q.subUserinfo)}catch(yt){R.error(`\u8BA2\u9605 ${n} \u4F7F\u7528\u81EA\u5B9A\u4E49\u6D41\u91CF\u94FE\u63A5 ${q.subUserinfo} \u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u65F6\u53D1\u751F\u9519\u8BEF: ${JSON.stringify(yt)}`)}else It=q.subUserinfo;let Ot=Wu([It,lt].filter(yt=>yt).join(";"),!0);Ot?.["subscription-userinfo"]&&e.set("subscription-userinfo",Ot["subscription-userinfo"]),Ot?.["profile-web-page-url"]&&e.set("profile-web-page-url",Ot["profile-web-page-url"]),Ot?.["plan-name"]&&e.set("plan-name",Ot["plan-name"])}p==="JSON"?(w==="nezha"?V=o3(V):w==="nezha-monitor"&&(u=/^\d+$/.test(u)?parseInt(u,10):V.findIndex(It=>It.name===u),V=await u3(V[u],u,t.query)),e.set("Content-Type","application/json;charset=utf-8")):e.set("Content-Type","text/plain; charset=utf-8"),N?._res?.headers&&Object.entries(N._res.headers).forEach(([It,Ot])=>{Ot==null?e.removeHeader(It):e.set(It,Ot)}),N?._res?.status&&e.status(N._res.status),e.send(V)}catch(U){R.notify("\u{1F30D} Sub-Store \u4E0B\u8F7D\u8BA2\u9605\u5931\u8D25",`\u274C \u65E0\u6CD5\u4E0B\u8F7D\u8BA2\u9605\uFF1A${n}\uFF01`,`\u{1F914} \u539F\u56E0\uFF1A${U.message??U}`),R.error(U.message??U),Ne(e,new gr("INTERNAL_SERVER_ERROR",`Failed to download subscription: ${n}`,`Reason: ${U.message??U}`))}else R.error(`\u{1F30D} Sub-Store \u4E0B\u8F7D\u8BA2\u9605\u5931\u8D25
\u274C \u672A\u627E\u5230\u8BA2\u9605\uFF1A${n}\uFF01`),Ne(e,new _r("RESOURCE_NOT_FOUND",`Subscription ${n} does not exist!`),404)}async function tf(t,e){let{name:n,nezhaIndex:u}=t.params,s=t.query.target==="SurgeMac",p=t.query.target||Bw(t.headers)||"JSON",g=R.read(Qt),y=ft(g,n),E=t.headers["user-agent"]||t.headers["User-Agent"];R.info(`\u6B63\u5728\u4E0B\u8F7D\u7EC4\u5408\u8BA2\u9605\uFF1A${n}
\u8BF7\u6C42 User-Agent: ${E}
\u8BF7\u6C42 target: ${t.query.target}
\u5B9E\u9645\u8F93\u51FA: ${p}`);let{ignoreFailedRemoteSub:m,produceType:C,includeUnsupportedProxy:a,resultFormat:H,proxy:X,noCache:w}=t.query,j={_req:{method:t.method,url:t.url,path:t.path,query:t.query,params:t.params,headers:t.headers,body:t.body}};if(t.query.$options){let tt={};try{tt=JSON.parse(decodeURIComponent(t.query.$options))}catch{for(let J of t.query.$options.split("&")){let N=J.split("=")[0],Q=J.split("=")[1];tt[N]=Q==null||Q===""?!0:decodeURIComponent(Q)}}R.info(`\u4F20\u5165 $options: ${JSON.stringify(tt)}`),Object.assign(j,tt)}if(X&&R.info(`\u6307\u5B9A\u8FDC\u7A0B\u8BA2\u9605\u4F7F\u7528\u4EE3\u7406/\u7B56\u7565 proxy: ${X}`),m!=null&&m!==""&&R.info(`\u6307\u5B9A\u5FFD\u7565\u5931\u8D25\u7684\u8FDC\u7A0B\u8BA2\u9605: ${m}`),C&&R.info(`\u6307\u5B9A\u751F\u4EA7\u7C7B\u578B: ${C}`),a&&R.info(`\u5305\u542B\u5B98\u65B9/\u5546\u5E97\u7248/\u672A\u7EED\u8D39\u8BA2\u9605\u4E0D\u652F\u6301\u7684\u534F\u8BAE: ${a}`),!a&&$w(p,E)&&(a=!0,R.info(`\u5F53\u524D\u5BA2\u6237\u7AEF\u53EF\u5305\u542B\u5B98\u65B9/\u5546\u5E97\u7248/\u672A\u7EED\u8D39\u8BA2\u9605\u4E0D\u652F\u6301\u7684\u534F\u8BAE: ${a}`)),s&&R.info("\u624B\u52A8\u6307\u5B9A\u4E86 target \u4E3A SurgeMac, \u5C06\u4F7F\u7528 Mihomo External"),w&&R.info(`\u6307\u5B9A\u4E0D\u4F7F\u7528\u7F13\u5B58: ${w}`),y)try{let tt=await wn({type:"collection",name:n,platform:p,ignoreFailedRemoteSub:m,produceType:C,produceOpts:{"include-unsupported-proxy":a,useMihomoExternal:s},$options:j,proxy:X,noCache:w,ua:E}),J,N=R.read(Zt),Q=y.subscriptions;if(Q.length>0){let U=ft(N,Q[0]);if(U.source!=="local"||["localFirst","remoteFirst"].includes(U.mergeSources))try{let V=`${U.url}`.split(/[\r\n]+/).map(Ot=>Ot.trim()).filter(Ot=>Ot.length)?.[0]||"",lt={},It=V.split("#");if(V=V.split("#")[0],It.length>1)try{lt=JSON.parse(decodeURIComponent(It[1]))}catch{for(let Ot of It[1].split("&")){let yt=Ot.split("=")[0],Et=Ot.split("=")[1];lt[yt]=Et==null||Et===""?!0:decodeURIComponent(Et)}}!lt.noFlow&&/^https?:/.test(V)&&(J=await zn(lt?.insecure?`${V}#insecure`:V,lt.flowUserAgent,void 0,X||U.proxy||y.proxy,lt.flowUrl))}catch(V){R.error(`\u7EC4\u5408\u8BA2\u9605 ${n} \u4E2D\u7684\u5B50\u8BA2\u9605 ${U.name} \u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u65F6\u53D1\u751F\u9519\u8BEF: ${V.message??V}`)}if(U.subUserinfo){let V;if(/^https?:\/\//.test(U.subUserinfo))try{V=await zn(void 0,void 0,void 0,X||U.proxy,U.subUserinfo)}catch(lt){R.error(`\u7EC4\u5408\u8BA2\u9605 ${n} \u4F7F\u7528\u81EA\u5B9A\u4E49\u6D41\u91CF\u94FE\u63A5 ${U.subUserinfo} \u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u65F6\u53D1\u751F\u9519\u8BEF: ${JSON.stringify(lt)}`)}else V=U.subUserinfo;J=[V,J].filter(lt=>lt).join("; ")}}R.info(`\u7EC4\u5408\u8BA2\u9605 ${n} \u900F\u4F20\u7684\u7684\u6D41\u91CF\u4FE1\u606F: ${J}`);let at;if(/^https?:\/\//.test(y.subUserinfo))try{at=await zn(void 0,void 0,void 0,X||y.proxy,y.subUserinfo)}catch(U){R.error(`\u7EC4\u5408\u8BA2\u9605 ${n} \u4F7F\u7528\u81EA\u5B9A\u4E49\u6D41\u91CF\u94FE\u63A5 ${y.subUserinfo} \u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u65F6\u53D1\u751F\u9519\u8BEF: ${JSON.stringify(U)}`)}else at=y.subUserinfo;let q=[at,J].filter(U=>U).join("; ");if(q){let U=Wu(q,!0);U?.["subscription-userinfo"]&&e.set("subscription-userinfo",U["subscription-userinfo"]),U?.["profile-web-page-url"]&&e.set("profile-web-page-url",U["profile-web-page-url"]),U?.["plan-name"]&&e.set("plan-name",U["plan-name"])}p==="JSON"?(H==="nezha"?tt=o3(tt):H==="nezha-monitor"&&(u=/^\d+$/.test(u)?parseInt(u,10):tt.findIndex(U=>U.name===u),tt=await u3(tt[u],u,t.query)),e.set("Content-Type","application/json;charset=utf-8")):e.set("Content-Type","text/plain; charset=utf-8"),j?._res?.headers&&Object.entries(j._res.headers).forEach(([U,V])=>{V==null?e.removeHeader(U):e.set(U,V)}),j?._res?.status&&e.status(j._res.status),e.send(tt)}catch(tt){R.notify("\u{1F30D} Sub-Store \u4E0B\u8F7D\u7EC4\u5408\u8BA2\u9605\u5931\u8D25",`\u274C \u4E0B\u8F7D\u7EC4\u5408\u8BA2\u9605\u9519\u8BEF\uFF1A${n}\uFF01`,`\u{1F914} \u539F\u56E0\uFF1A${tt}`),Ne(e,new gr("INTERNAL_SERVER_ERROR",`Failed to download collection: ${n}`,`Reason: ${tt.message??tt}`))}else R.error("\u{1F30D} Sub-Store \u4E0B\u8F7D\u7EC4\u5408\u8BA2\u9605\u5931\u8D25",`\u274C \u672A\u627E\u5230\u7EC4\u5408\u8BA2\u9605\uFF1A${n}\uFF01`),Ne(e,new _r("RESOURCE_NOT_FOUND",`Collection ${n} does not exist!`),404)}async function u3(t,e,n){let u={code:0,message:"success",result:[]};try{let{isLoon:s,isSurge:p}=R.env;if(!s&&!p)throw new Error("\u4EC5\u652F\u6301 Loon \u548C Surge(ability=http-client-policy)");let g=xt.produce([t],s?"Loon":"Surge");if(!g)throw new Error("\u5F53\u524D\u5BA2\u6237\u7AEF\u4E0D\u517C\u5BB9\u6B64\u8282\u70B9");let y=t._monitors||[{name:"Cloudflare",url:"http://cp.cloudflare.com/generate_204",method:"HEAD",number:3,timeout:2e3},{name:"Google",url:"http://www.google.com/generate_204",method:"HEAD",number:3,timeout:2e3}],E=n.number||Math.max(...y.map(m=>m.number))||3;for(let m of y){let C={monitor_id:y.indexOf(m),server_id:e,monitor_name:m.name,server_name:t.name,created_at:[],avg_delay:[]};for(let a=0;a<E;a++){let H=Date.now();try{await R.http[(m.method||"HEAD").toLowerCase()]({timeout:m.timeout||2e3,url:m.url,"policy-descriptor":g,node:g});let X=Date.now()-H;R.info(`${m.name} latency: ${X}`),C.avg_delay.push(X)}catch(X){R.error(X),C.avg_delay.push(0)}C.created_at.push(Date.now()-6e5*(m.number-a-1))}u.result.push(C)}}catch(s){R.error(s),u.result.push({monitor_id:0,server_id:0,monitor_name:`\u274C ${s.message??s}`,server_name:t.name,created_at:[Date.now()],avg_delay:[0]})}return JSON.stringify(u,null,2)}function o3(t){let e={code:0,message:"success",result:[]};return t.map((n,u)=>{let s=n._geo?.countryCode||n._geo?.country;if(/^[a-z]{2}$/i.test(s)||(s=Np(n.name)),/^[a-z]{2}$/i.test(s)){let p=Math.round(new Date().getTime()/1e3),g=n._unavailable?0:p,y=parseInt(n._uptime||0,10);e.result.push({id:u,name:n.name,tag:`${n._tag??""}`,last_active:g,valid_ip:n._IP||n.server,ipv4:n._IPv4||n.server,ipv6:n._IPv6||(Vr(n.server)?n.server:""),host:{Platform:"Sub-Store",PlatformVersion:ro.version,CPU:[],MemTotal:1024,DiskTotal:1024,SwapTotal:1024,Arch:"",Virtualization:"",BootTime:p-y,CountryCode:s,Version:"0.0.1"},status:{CPU:0,MemUsed:0,SwapUsed:0,DiskUsed:0,NetInTransfer:0,NetOutTransfer:0,NetInSpeed:0,NetOutSpeed:0,Uptime:y,Load1:0,Load5:0,Load15:0,TcpConnCount:0,UdpConnCount:0,ProcessCount:0}})}}),JSON.stringify(e,null,2)}function Pw(t){t.post("/api/preview/sub",Qz),t.post("/api/preview/collection",eG),t.post("/api/preview/file",Zz)}async function Zz(t,e){try{let n=t.body,u="";if(n.type!=="mihomoProfile")if(n.source==="local"&&!["localFirst","remoteFirst"].includes(n.mergeSources))u=n.content;else{let y={};if(u=await Promise.all(n.url.split(/[\r\n]+/).map(E=>E.trim()).filter(E=>E.length).map(async E=>{try{return await on(E,n.ua,void 0,n.proxy)}catch(m){return y[E]=m,R.error(`\u6587\u4EF6 ${n.name} \u7684\u8FDC\u7A0B\u6587\u4EF6 ${E} \u53D1\u751F\u9519\u8BEF: ${m}`),""}})),Object.keys(y).length>0)if(n.ignoreFailedRemoteFile)n.ignoreFailedRemoteFile==="enabled"&&R.notify("\u{1F30D} Sub-Store \u9884\u89C8\u6587\u4EF6\u5931\u8D25",`\u274C ${n.name}`,`\u8FDC\u7A0B\u6587\u4EF6 ${Object.keys(y).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u6587\u4EF6 ${n.name} \u7684\u8FDC\u7A0B\u6587\u4EF6 ${Object.keys(y).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);n.mergeSources==="localFirst"?u.unshift(n.content):n.mergeSources==="remoteFirst"&&u.push(n.content)}let s=(Array.isArray(u)?u:[u]).flat(),p=s.filter(y=>y!=null&&y!=="").join(`
`),g=Array.isArray(n.process)&&n.process.length>0?await xt.process({$files:s,$content:p,$file:n},n.process):{$content:p,$files:s};qe(e,{original:p,processed:g?.$content??""})}catch(n){R.error(n.message??n),Ne(e,new gr("INTERNAL_SERVER_ERROR","Failed to preview file",`Reason: ${n.message??n}`))}}async function Qz(t,e){try{let n=t.body,u=t.query.target||"JSON",s;if(n.source==="local"&&!["localFirst","remoteFirst"].includes(n.mergeSources))s=n.content;else{let y={};if(s=await Promise.all(n.url.split(/[\r\n]+/).map(E=>E.trim()).filter(E=>E.length).map(async E=>{try{return await on(E,n.ua,void 0,n.proxy,void 0,void 0,void 0,!0)}catch(m){return y[E]=m,R.error(`\u8BA2\u9605 ${n.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${E} \u53D1\u751F\u9519\u8BEF: ${m}`),""}})),Object.keys(y).length>0)if(n.ignoreFailedRemoteSub)n.ignoreFailedRemoteSub==="enabled"&&R.notify("\u{1F30D} Sub-Store \u9884\u89C8\u8BA2\u9605\u5931\u8D25",`\u274C ${n.name}`,`\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(y).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u8BA2\u9605 ${n.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(y).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);n.mergeSources==="localFirst"?s.unshift(n.content):n.mergeSources==="remoteFirst"&&s.push(n.content)}let p=(Array.isArray(s)?s:[s]).map(y=>xt.parse(y)).flat();p.forEach((y,E)=>{y.id=E,y._subName=n.name,y._subDisplayName=n.displayName});let g=await xt.process(p,n.process||[],u,{[n.name]:n});qe(e,{original:p,processed:g})}catch(n){R.error(n.message??n),Ne(e,new gr("INTERNAL_SERVER_ERROR","Failed to preview subscription",`Reason: ${n.message??n}`))}}async function eG(t,e){try{let n=R.read(Zt),u=t.body,s=[...u.subscriptions],p=u.subscriptionTags;Array.isArray(p)&&p.length>0&&n.forEach(C=>{Array.isArray(C.tag)&&C.tag.length>0&&!s.includes(C.name)&&C.tag.some(a=>p.includes(a))&&s.push(C.name)});let g={},y={};if(await Promise.all(s.map(async C=>{let a=ft(n,C);try{let H;if(a.source==="local"&&!["localFirst","remoteFirst"].includes(a.mergeSources))H=a.content;else{let w={};if(H=await Promise.all(a.url.split(/[\r\n]+/).map(j=>j.trim()).filter(j=>j.length).map(async j=>{try{return await on(j,a.ua,void 0,a.proxy,void 0,void 0,void 0,!0)}catch(tt){return w[j]=tt,R.error(`\u8BA2\u9605 ${a.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${j} \u53D1\u751F\u9519\u8BEF: ${tt}`),""}})),Object.keys(w).length>0)if(a.ignoreFailedRemoteSub)a.ignoreFailedRemoteSub==="enabled"&&R.notify("\u{1F30D} Sub-Store \u9884\u89C8\u8BA2\u9605\u5931\u8D25",`\u274C ${a.name}`,`\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(w).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u8BA2\u9605 ${a.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(w).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);a.mergeSources==="localFirst"?H.unshift(a.content):a.mergeSources==="remoteFirst"&&H.push(a.content)}let X=(Array.isArray(H)?H:[H]).map(w=>xt.parse(w)).flat();X.forEach(w=>{w._subName=a.name,w._subDisplayName=a.displayName,w._collectionName=u.name,w._collectionDisplayName=u.displayName}),X=await xt.process(X,a.process||[],"JSON",{[a.name]:a,_collection:u}),g[C]=X}catch(H){y[C]=H,R.error(`\u274C \u5904\u7406\u7EC4\u5408\u8BA2\u9605 ${u.name} \u4E2D\u7684\u5B50\u8BA2\u9605: ${a.name} \u65F6\u51FA\u73B0\u9519\u8BEF\uFF1A${H}\uFF01`)}})),Object.keys(y).length>0)if(u.ignoreFailedRemoteSub)u.ignoreFailedRemoteSub==="enabled"&&R.notify("\u{1F30D} Sub-Store \u9884\u89C8\u7EC4\u5408\u8BA2\u9605\u5931\u8D25",`\u274C ${u.name}`,`\u5B50\u8BA2\u9605 ${Object.keys(y).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u7EC4\u5408\u8BA2\u9605 ${u.name} \u7684\u5B50\u8BA2\u9605 ${Object.keys(y).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);let E=Array.prototype.concat.apply([],s.map(C=>g[C]||[]));E.forEach((C,a)=>{C.id=a,C._collectionName=u.name,C._collectionDisplayName=u.displayName});let m=await xt.process(E,u.process||[],"JSON",{_collection:u});qe(e,{original:E,processed:m})}catch(n){R.error(n.message??n),Ne(e,new gr("INTERNAL_SERVER_ERROR","Failed to preview collection",`Reason: ${n.message??n}`))}}function Ow(t){t.post("/api/sort/subs",tG),t.post("/api/sort/collections",rG),t.post("/api/sort/artifacts",nG),t.post("/api/sort/files",iG)}function tG(t,e){let n=t.body,u=R.read(Zt);u.sort((s,p)=>n.indexOf(s.name)-n.indexOf(p.name)),R.write(u,Zt),qe(e,u)}function rG(t,e){let n=t.body,u=R.read(Qt);u.sort((s,p)=>n.indexOf(s.name)-n.indexOf(p.name)),R.write(u,Qt),qe(e,u)}function nG(t,e){let n=t.body,u=R.read($t);u.sort((s,p)=>n.indexOf(s.name)-n.indexOf(p.name)),R.write(u,$t),qe(e,u)}function iG(t,e){let n=t.body,u=R.read(jt);u.sort((s,p)=>n.indexOf(s.name)-n.indexOf(p.name)),R.write(u,jt),qe(e,u)}function Tw(t){t.post("/api/utils/node-info",sG)}async function sG(t,e){let n=t.body,u=t.query.lang||"zh-CN",s;try{s=P0.URI.produce(n)}catch{}try{let p=await Rs().get({url:`http://ip-api.com/json/${encodeURIComponent(`${n.server}`.trim().replace(/^\[/,"").replace(/\]$/,""))}?lang=${u}`,headers:{"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 12_4) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Safari/605.1.15"}}).then(g=>{let y=JSON.parse(g.body);if(y.status!=="success")throw new Error(y.message);return delete y.status,y});qe(e,{shareUrl:s,info:p})}catch(p){Ne(e,new rc("FAILED_TO_GET_NODE_INFO","Failed to get node info",`Reason: ${p}`))}}function xw(t){t.route("/api/proxy/parse").post(aG),t.route("/api/rule/parse").post(uG)}function aG(t,e){let{data:n,client:u,content:s,platform:p}=t.body;var g={};try{var y=xt.parse(n??s),E=xt.produce(y,u??p);g.par_res=E}catch(m){Ne(e,m);return}qe(e,g)}function uG(t,e){let{data:n,client:u,content:s,platform:p}=t.body;var g={};try{let E=bl.parse(n??s);var y=bl.produce(E,u??p);g.par_res=y}catch(E){Ne(e,E);return}qe(e,g)}function Nw(){let port,host;R.env.isNode&&(port=eval("process.env.SUB_STORE_BACKEND_API_PORT")||3e3,host=eval("process.env.SUB_STORE_BACKEND_API_HOST")||"::");let $app=Eg({substore:R,port,host});if(R.env.isNode){let be_merge=eval("process.env.SUB_STORE_BACKEND_MERGE"),be_prefix=eval("process.env.SUB_STORE_BACKEND_PREFIX"),fe_be_path=eval("process.env.SUB_STORE_FRONTEND_BACKEND_PATH"),fe_path=eval("process.env.SUB_STORE_FRONTEND_PATH");if(be_prefix||be_merge){if(!fe_be_path.startsWith("/"))throw new Error("SUB_STORE_FRONTEND_BACKEND_PATH should start with /");be_merge&&(R.info("[BACKEND] MERGE mode is [ON]."),R.info(`[BACKEND && FRONTEND] ${host}:${port}`)),R.info(`[BACKEND PREFIX] ${host}:${port}${fe_be_path}`),$app.use((t,e,n)=>{if(t.path.startsWith(fe_be_path)){t.url=t.url.replace(fe_be_path,"")||"/",be_merge&&t.url.startsWith("/api/")&&(t.query.share="true"),n();return}let u=decodeURIComponent(t._parsedUrl.pathname)||"/";if(be_merge&&t.path.startsWith("/share/")&&t.query.token){if(t.method.toLowerCase()!=="get"){e.status(405).send("Method not allowed");return}if((R.read(ui)||[]).find(p=>p.token===t.query.token&&(`/share/${p.type}/${p.name}`===u||u.startsWith(`/share/${p.type}/${p.name}/`))&&(p.exp==null||p.exp>Date.now()))){n();return}else if(R.read(At)?.appearanceSetting?.invalidShareFakeNode){t.query._fakeNode=!0,t.url=t.url.replace(/\/share\/.*?\//,"/share/sub/"),n();return}}let s=/^\/(api|download|share)(\/|$)/.test(t.path);if(be_merge&&fe_path&&!s){let p=require("express"),g=require("mime-types"),y=require("path"),E=require("fs"),m=y.join(fe_path,t.path);E.existsSync(m)||(t.url="/index.html"),p.static(fe_path,{setHeaders:(a,H)=>{let X=g.contentType(y.extname(H));X&&a.set("Content-Type",X)}})(t,e,n);return}e.status(404).end()})}}if(Ew($app),ww($app),Rw($app),Pw($app),Ow($app),gw($app),fw($app),Aw($app),bw($app),yw($app),hw($app),Tw($app),vw($app),xw($app),$app.start(),R.env.isNode){let backend_sync_cron=eval("process.env.SUB_STORE_BACKEND_SYNC_CRON");if(backend_sync_cron){R.info(`[SYNC CRON] ${backend_sync_cron} enabled`);let{CronJob:t}=require("cron");new t(backend_sync_cron,async function(){try{R.info(`[SYNC CRON] ${backend_sync_cron} started`),await dw(),R.info(`[SYNC CRON] ${backend_sync_cron} finished`)}catch(e){R.error(`[SYNC CRON] ${backend_sync_cron} error: ${e.message??e}`)}},null,!0)}else eval("process.env.SUB_STORE_BACKEND_CRON")&&R.error("[SYNC CRON] SUB_STORE_BACKEND_CRON \u5DF2\u5F03\u7528, \u8BF7\u4F7F\u7528 SUB_STORE_BACKEND_SYNC_CRON"),eval("process.env.SUB_STORE_CRON")&&R.error("[SYNC CRON] SUB_STORE_CRON \u5DF2\u5F03\u7528, \u8BF7\u4F7F\u7528 SUB_STORE_BACKEND_SYNC_CRON");let produce_cron=eval("process.env.SUB_STORE_PRODUCE_CRON");if(produce_cron){R.info(`[PRODUCE CRON] ${produce_cron} enabled`);let{CronJob:t}=require("cron");produce_cron.split(/\s*;\s*/).map(e=>e.trim()).filter(e=>e.length>0).forEach(e=>{let[n,u,s]=e.split(/\s*,\s*/);R.info(`[PRODUCE CRON] ${u} ${s} ${n} scheduled`),new t(n.trim(),async function(){try{R.info(`[PRODUCE CRON] ${u} ${s} ${n} started`),await wn({type:u,name:s}),R.info(`[PRODUCE CRON] ${u} ${s} ${n} finished`)}catch(p){R.error(`[PRODUCE CRON] ${u} ${s} ${n} error: ${p.message??p}`)}},null,!0)})}let backend_download_cron=eval("process.env.SUB_STORE_BACKEND_DOWNLOAD_CRON");if(backend_download_cron){R.info(`[DOWNLOAD CRON] ${backend_download_cron} enabled`);let{CronJob:t}=require("cron");new t(backend_download_cron,async function(){try{R.info(`[DOWNLOAD CRON] ${backend_download_cron} started`),await K0("download"),R.info(`[DOWNLOAD CRON] ${backend_download_cron} finished`)}catch(e){R.error(`[DOWNLOAD CRON] ${backend_download_cron} error: ${e.message??e}`)}},null,!0)}let backend_upload_cron=eval("process.env.SUB_STORE_BACKEND_UPLOAD_CRON");if(backend_upload_cron){R.info(`[UPLOAD CRON] ${backend_upload_cron} enabled`);let{CronJob:t}=require("cron");new t(backend_upload_cron,async function(){try{R.info(`[UPLOAD CRON] ${backend_upload_cron} started`),await K0("upload"),R.info(`[UPLOAD CRON] ${backend_upload_cron} finished`)}catch(e){R.error(`[UPLOAD CRON] ${backend_upload_cron} error: ${e.message??e}`)}},null,!0)}let mmdb_cron=eval("process.env.SUB_STORE_MMDB_CRON"),countryFile=eval("process.env.SUB_STORE_MMDB_COUNTRY_PATH"),countryUrl=eval("process.env.SUB_STORE_MMDB_COUNTRY_URL"),asnFile=eval("process.env.SUB_STORE_MMDB_ASN_PATH"),asnUrl=eval("process.env.SUB_STORE_MMDB_ASN_URL");if(mmdb_cron&&(countryFile&&countryUrl||asnFile&&asnUrl)){R.info(`[MMDB CRON] ${mmdb_cron} enabled`);let{CronJob:t}=require("cron");new t(mmdb_cron,async function(){try{if(R.info(`[MMDB CRON] ${mmdb_cron} started`),countryFile&&countryUrl)try{R.info(`[MMDB CRON] downloading ${countryUrl} to ${countryFile}`),await zh(countryUrl,countryFile)}catch(e){R.error(`[MMDB CRON] ${countryUrl} download failed: ${e.message??e}`)}if(asnFile&&asnUrl)try{R.info(`[MMDB CRON] downloading ${asnUrl} to ${asnFile}`),await zh(asnUrl,asnFile)}catch(e){R.error(`[MMDB CRON] ${asnUrl} download failed: ${e.message??e}`)}R.info(`[MMDB CRON] ${mmdb_cron} finished`)}catch(e){R.error(`[MMDB CRON] ${mmdb_cron} error: ${e.message??e}`)}},null,!0)}let path=require("path"),fs=require("fs"),data_url=eval("process.env.SUB_STORE_DATA_URL"),data_url_post=eval("process.env.SUB_STORE_DATA_URL_POST"),fe_be_path=eval("process.env.SUB_STORE_FRONTEND_BACKEND_PATH"),fe_port=eval("process.env.SUB_STORE_FRONTEND_PORT")||3001,fe_host=eval("process.env.SUB_STORE_FRONTEND_HOST")||host||"::",fe_path=eval("process.env.SUB_STORE_FRONTEND_PATH"),fe_abs_path=path.resolve(fe_path||path.join(__dirname,"frontend")),be_merge=eval("process.env.SUB_STORE_BACKEND_MERGE");if(fe_path&&!be_merge){try{fs.accessSync(path.join(fe_abs_path,"index.html"))}catch(t){R.error(`[FRONTEND] index.html file not found in ${fe_abs_path}`)}let express_=require("express"),history=require("connect-history-api-fallback"),{createProxyMiddleware}=require("http-proxy-middleware"),app=express_(),staticFileMiddleware=express_.static(fe_path),be_api="/api/",be_download="/download/",be_share="/share/",be_download_rewrite="",be_api_rewrite="",be_share_rewrite=`${be_share}:type/:name`,prefix=eval("process.env.SUB_STORE_BACKEND_PREFIX")?fe_be_path:"";if(fe_be_path){if(!fe_be_path.startsWith("/"))throw new Error("SUB_STORE_FRONTEND_BACKEND_PATH should start with /");be_api_rewrite=`${fe_be_path==="/"?"":fe_be_path}${be_api}`,be_download_rewrite=`${fe_be_path==="/"?"":fe_be_path}${be_download}`,app.use(be_share_rewrite,createProxyMiddleware({target:`http://127.0.0.1:${port}${prefix}`,changeOrigin:!0,pathRewrite:async(t,e)=>{if(e.method.toLowerCase()!=="get")throw new Error("Method not allowed");return(R.read(ui)||[]).find(n=>n.token===e.query.token&&n.type===e.params.type&&n.name===e.params.name&&(n.exp==null||n.exp>Date.now()))?e.originalUrl:R.read(At)?.appearanceSetting?.invalidShareFakeNode?e.originalUrl.replace(/\/share\/.*?\//,"/share/sub/").replace("?","?_fakeNode=true&"):"/404"}})),app.use(be_api_rewrite,createProxyMiddleware({target:`http://127.0.0.1:${port}${prefix}${be_api}`,pathRewrite:async t=>t.includes("?")?`${t}&share=true`:`${t}?share=true`})),app.use(be_download_rewrite,createProxyMiddleware({target:`http://127.0.0.1:${port}${prefix}${be_download}`,changeOrigin:!0}))}app.use(staticFileMiddleware),app.use(history({disableDotRule:!0,verbose:!1})),app.use(staticFileMiddleware);let listener=app.listen(fe_port,fe_host,()=>{let{address:t,port:e}=listener.address();R.info(`[FRONTEND] ${t}:${e}`),fe_be_path&&(R.info(`[FRONTEND -> BACKEND] ${t}:${e}${be_api_rewrite} -> ${host}:${port}${prefix}${be_api}`),R.info(`[FRONTEND -> BACKEND] ${t}:${e}${be_download_rewrite} -> ${host}:${port}${prefix}${be_download}`),R.info(`[SHARE BACKEND] ${t}:${e}${be_share_rewrite}`))})}data_url&&(R.info(`[BACKEND] downloading data from ${data_url}`),on(data_url).then(async content=>{try{if(content=JSON.parse(dt.decode(content)),!(Object.keys(content.settings).length>=0))throw new Error("\u5907\u4EFD\u6587\u4EF6\u5E94\u8BE5\u81F3\u5C11\u5305\u542B settings \u5B57\u6BB5")}catch(t){try{if(content=JSON.parse(content),!(Object.keys(content.settings).length>=0))throw new Error("\u5907\u4EFD\u6587\u4EF6\u5E94\u8BE5\u81F3\u5C11\u5305\u542B settings \u5B57\u6BB5")}catch(e){throw R.error(`Gist \u5907\u4EFD\u6587\u4EF6\u6821\u9A8C\u5931\u8D25, \u65E0\u6CD5\u8FD8\u539F
Reason: ${e.message??e}`),new Error("Gist \u5907\u4EFD\u6587\u4EF6\u6821\u9A8C\u5931\u8D25, \u65E0\u6CD5\u8FD8\u539F")}}data_url_post&&(R.info("[BACKEND] executing post-processing script"),eval(data_url_post)),R.write(JSON.stringify(content,null,"  "),"#sub-store"),R.cache=content,R.persistCache(),zu(),R.info(`[BACKEND] restored data from ${data_url}`)}).catch(t=>{throw R.error("[BACKEND] restore data failed"),t}))}}zu(),Nw()})();
