// https://raw.githubusercontent.com/ElementRef/AboutConfig/main/script/maasea.youtube.request.js
(()=>{var je=Object.defineProperty,xe=(e,t,n)=>t in e?je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_=(e,t,n)=>(xe(e,typeof t!="symbol"?t+"":t,n),n);(function(e){function t(){}function n(){}var r=String.fromCharCode,i={}.toString,s=i.call(e.SharedArrayBuffer),a=i(),o=e.Uint8Array,u=o||Array,c=o?ArrayBuffer:u,f=c.isView||function(b){return b&&"length"in b},h=i.call(c.prototype);c=n.prototype;var m=e.TextEncoder,d=new(o?Uint16Array:u)(32);t.prototype.decode=function(b){if(!f(b)){var F=i.call(b);if(F!==h&&F!==s&&F!==a)throw TypeError("Failed to execute 'decode' on 'TextDecoder': The provided value is not of type '(ArrayBuffer or ArrayBufferView)'");b=o?new u(b):b||[]}for(var k=F="",p=0,g=b.length|0,R=g-32|0,N,w,B=0,x=0,S,E=0,A=-1;p<g;){for(N=p<=R?32:g-p|0;E<N;p=p+1|0,E=E+1|0){switch(w=b[p]&255,w>>4){case 15:if(S=b[p=p+1|0]&255,S>>6!==2||247<w){p=p-1|0;break}B=(w&7)<<6|S&63,x=5,w=256;case 14:S=b[p=p+1|0]&255,B<<=6,B|=(w&15)<<6|S&63,x=S>>6===2?x+4|0:24,w=w+256&768;case 13:case 12:S=b[p=p+1|0]&255,B<<=6,B|=(w&31)<<6|S&63,x=x+7|0,p<g&&S>>6===2&&B>>x&&1114112>B?(w=B,B=B-65536|0,0<=B&&(A=(B>>10)+55296|0,w=(B&1023)+56320|0,31>E?(d[E]=A,E=E+1|0,A=-1):(S=A,A=w,w=S))):(w>>=8,p=p-w-1|0,w=65533),B=x=0,N=p<=R?32:g-p|0;default:d[E]=w;continue;case 11:case 10:case 9:case 8:}d[E]=65533}if(k+=r(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15],d[16],d[17],d[18],d[19],d[20],d[21],d[22],d[23],d[24],d[25],d[26],d[27],d[28],d[29],d[30],d[31]),32>E&&(k=k.slice(0,E-32|0)),p<g){if(d[0]=A,E=~A>>>31,A=-1,k.length<F.length)continue}else A!==-1&&(k+=r(A));F+=k,k=""}return F},c.encode=function(b){b=b===void 0?"":""+b;var F=b.length|0,k=new u((F<<1)+8|0),p,g=0,R=!o;for(p=0;p<F;p=p+1|0,g=g+1|0){var N=b.charCodeAt(p)|0;if(127>=N)k[g]=N;else{if(2047>=N)k[g]=192|N>>6;else{e:{if(55296<=N)if(56319>=N){var w=b.charCodeAt(p=p+1|0)|0;if(56320<=w&&57343>=w){if(N=(N<<10)+w-56613888|0,65535<N){k[g]=240|N>>18,k[g=g+1|0]=128|N>>12&63,k[g=g+1|0]=128|N>>6&63,k[g=g+1|0]=128|N&63;continue}break e}N=65533}else 57343>=N&&(N=65533);!R&&p<<1<g&&p<<1<(g-7|0)&&(R=!0,w=new u(3*F),w.set(k),k=w)}k[g]=224|N>>12,k[g=g+1|0]=128|N>>6&63}k[g=g+1|0]=128|N&63}}return o?k.subarray(0,g):k.slice(0,g)},m||(e.TextDecoder=t,e.TextEncoder=n)})(globalThis);function I(e,t){if(!e)throw new Error(t)}var Le=34028234663852886e22,Ve=-34028234663852886e22,Je=4294967295,Ge=2147483647,Pe=-2147483648;function q(e){if(typeof e!="number")throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>Ge||e<Pe)throw new Error("invalid int 32: "+e)}function Z(e){if(typeof e!="number")throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>Je||e<0)throw new Error("invalid uint 32: "+e)}function se(e){if(typeof e!="number")throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>Le||e<Ve))throw new Error("invalid float 32: "+e)}var ae=Symbol("@bufbuild/protobuf/enum-type");function Xe(e){let t=e[ae];return I(t,"missing enum type on enum object"),t}function oe(e,t,n,r){e[ae]=ue(t,n.map(i=>({no:i.no,name:i.name,localName:e[i.no]})),r)}function ue(e,t,n){let r=Object.create(null),i=Object.create(null),s=[];for(let a of t){let o=le(a);s.push(o),r[a.name]=o,i[a.no]=o}return{typeName:e,values:s,findName(a){return r[a]},findNumber(a){return i[a]}}}function Ce(e,t,n){let r={};for(let i of t){let s=le(i);r[s.localName]=s.no,r[s.no]=s.localName}return oe(r,e,t,n),r}function le(e){return"localName"in e?e:Object.assign(Object.assign({},e),{localName:e.name})}var L=class{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,t){let n=this.getType(),r=n.runtime.bin,i=r.makeReadOptions(t);return r.readMessage(this,i.readerFactory(e),e.byteLength,i),this}fromJson(e,t){let n=this.getType(),r=n.runtime.json,i=r.makeReadOptions(t);return r.readMessage(n,e,i,this),this}fromJsonString(e,t){let n;try{n=JSON.parse(e)}catch(r){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${r instanceof Error?r.message:String(r)}`)}return this.fromJson(n,t)}toBinary(e){let t=this.getType(),n=t.runtime.bin,r=n.makeWriteOptions(e),i=r.writerFactory();return n.writeMessage(this,i,r),i.finish()}toJson(e){let t=this.getType(),n=t.runtime.json,r=n.makeWriteOptions(e);return n.writeMessage(this,r)}toJsonString(e){var t;let n=this.toJson(e);return JSON.stringify(n,null,(t=e?.prettySpaces)!==null&&t!==void 0?t:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}};function Re(e,t,n,r){var i;let s=(i=r?.localName)!==null&&i!==void 0?i:t.substring(t.lastIndexOf(".")+1),a={[s]:function(o){e.util.initFields(this),e.util.initPartial(o,this)}}[s];return Object.setPrototypeOf(a.prototype,new L),Object.assign(a,{runtime:e,typeName:t,fields:e.util.newFieldList(n),fromBinary(o,u){return new a().fromBinary(o,u)},fromJson(o,u){return new a().fromJson(o,u)},fromJsonString(o,u){return new a().fromJsonString(o,u)},equals(o,u){return e.util.equals(a,o,u)}}),a}var l;(function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"})(l||(l={}));var j;(function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING"})(j||(j={}));function _e(){let e=0,t=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,!(i&128))return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(n&15)<<28,t=(n&112)>>4,!(n&128))return this.assertBounds(),[e,t];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(t|=(i&127)<<r,!(i&128))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function ee(e,t,n){for(let s=0;s<28;s=s+7){let a=e>>>s,o=!(!(a>>>7)&&t==0),u=(o?a|128:a)&255;if(n.push(u),!o)return}let r=e>>>28&15|(t&7)<<4,i=!!(t>>3);if(n.push((i?r|128:r)&255),!!i){for(let s=3;s<31;s=s+7){let a=t>>>s,o=!!(a>>>7),u=(o?a|128:a)&255;if(n.push(u),!o)return}n.push(t>>>31&1)}}var Y=4294967296;function ce(e){let t=e[0]==="-";t&&(e=e.slice(1));let n=1e6,r=0,i=0;function s(a,o){let u=Number(e.slice(a,o));i*=n,r=r*n+u,r>=Y&&(i=i+(r/Y|0),r=r%Y)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),t?de(r,i):te(r,i)}function qe(e,t){let n=te(e,t),r=n.hi&2147483648;r&&(n=de(n.lo,n.hi));let i=fe(n.lo,n.hi);return r?"-"+i:i}function fe(e,t){if({lo:e,hi:t}=Ye(e,t),t<=2097151)return String(Y*t+e);let n=e&16777215,r=(e>>>24|t<<8)&16777215,i=t>>16&65535,s=n+r*6777216+i*6710656,a=r+i*8147497,o=i*2,u=1e7;return s>=u&&(a+=Math.floor(s/u),s%=u),a>=u&&(o+=Math.floor(a/u),a%=u),o.toString()+he(a)+he(s)}function Ye(e,t){return{lo:e>>>0,hi:t>>>0}}function te(e,t){return{lo:e|0,hi:t|0}}function de(e,t){return t=~t,e?e=~e+1:t+=1,te(e,t)}var he=e=>{let t=String(e);return"0000000".slice(t.length)+t};function me(e,t){if(e>=0){for(;e>127;)t.push(e&127|128),e=e>>>7;t.push(e)}else{for(let n=0;n<9;n++)t.push(e&127|128),e=e>>7;t.push(1)}}function Me(){let e=this.buf[this.pos++],t=e&127;if(!(e&128))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<7,!(e&128))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<14,!(e&128))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<21,!(e&128))return this.assertBounds(),t;e=this.buf[this.pos++],t|=(e&15)<<28;for(let n=5;e&128&&n<10;n++)e=this.buf[this.pos++];if(e&128)throw new Error("invalid varint");return this.assertBounds(),t>>>0}function We(){let e=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof e.getBigInt64=="function"&&typeof e.getBigUint64=="function"&&typeof e.setBigInt64=="function"&&typeof e.setBigUint64=="function"&&(typeof process!="object"||typeof process.env!="object"||process.env.BUF_BIGINT_DISABLE!=="1")){let r=BigInt("-9223372036854775808"),i=BigInt("9223372036854775807"),s=BigInt("0"),a=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(o){let u=typeof o=="bigint"?o:BigInt(o);if(u>i||u<r)throw new Error(`int64 invalid: ${o}`);return u},uParse(o){let u=typeof o=="bigint"?o:BigInt(o);if(u>a||u<s)throw new Error(`uint64 invalid: ${o}`);return u},enc(o){return e.setBigInt64(0,this.parse(o),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(o){return e.setBigInt64(0,this.uParse(o),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec(o,u){return e.setInt32(0,o,!0),e.setInt32(4,u,!0),e.getBigInt64(0,!0)},uDec(o,u){return e.setInt32(0,o,!0),e.setInt32(4,u,!0),e.getBigUint64(0,!0)}}}let t=r=>I(/^-?[0-9]+$/.test(r),`int64 invalid: ${r}`),n=r=>I(/^[0-9]+$/.test(r),`uint64 invalid: ${r}`);return{zero:"0",supported:!1,parse(r){return typeof r!="string"&&(r=r.toString()),t(r),r},uParse(r){return typeof r!="string"&&(r=r.toString()),n(r),r},enc(r){return typeof r!="string"&&(r=r.toString()),t(r),ce(r)},uEnc(r){return typeof r!="string"&&(r=r.toString()),n(r),ce(r)},dec(r,i){return qe(r,i)},uDec(r,i){return fe(r,i)}}}var v=We(),y;(function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"})(y||(y={}));var ze=class{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let r=0;r<this.chunks.length;r++)e+=this.chunks[r].length;let t=new Uint8Array(e),n=0;for(let r=0;r<this.chunks.length;r++)t.set(this.chunks[r],n),n+=this.chunks[r].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(Z(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return q(e),me(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){se(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){Z(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){q(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return q(e),e=(e<<1^e>>31)>>>0,me(e,this.buf),this}sfixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=v.enc(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=v.uEnc(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}int64(e){let t=v.enc(e);return ee(t.lo,t.hi,this.buf),this}sint64(e){let t=v.enc(e),n=t.hi>>31,r=t.lo<<1^n,i=(t.hi<<1|t.lo>>>31)^n;return ee(r,i,this.buf),this}uint64(e){let t=v.uEnc(e);return ee(t.lo,t.hi,this.buf),this}},Ke=class{constructor(e,t){this.varint64=_e,this.uint32=Me,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=t??new TextDecoder}tag(){let e=this.uint32(),t=e>>>3,n=e&7;if(t<=0||n<0||n>5)throw new Error("illegal tag: field no "+t+" wire type "+n);return[t,n]}skip(e){let t=this.pos;switch(e){case y.Varint:for(;this.buf[this.pos++]&128;);break;case y.Bit64:this.pos+=4;case y.Bit32:this.pos+=4;break;case y.LengthDelimited:let n=this.uint32();this.pos+=n;break;case y.StartGroup:let r;for(;(r=this.tag()[1])!==y.EndGroup;)this.skip(r);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(t,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return v.dec(...this.varint64())}uint64(){return v.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),n=-(e&1);return e=(e>>>1|(t&1)<<31)^n,t=t>>>1^n,v.dec(e,t)}bool(){let[e,t]=this.varint64();return e!==0||t!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return v.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return v.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}};function D(e,t,n){if(t===n)return!0;if(e==l.BYTES){if(!(t instanceof Uint8Array)||!(n instanceof Uint8Array)||t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==n[r])return!1;return!0}switch(e){case l.UINT64:case l.FIXED64:case l.INT64:case l.SFIXED64:case l.SINT64:return t==n}return!1}function M(e,t){switch(e){case l.BOOL:return!1;case l.UINT64:case l.FIXED64:case l.INT64:case l.SFIXED64:case l.SINT64:return t==0?v.zero:"0";case l.DOUBLE:case l.FLOAT:return 0;case l.BYTES:return new Uint8Array(0);case l.STRING:return"";default:return 0}}function pe(e,t){let n=t===void 0,r=y.Varint,i=t===0;switch(e){case l.STRING:i=n||!t.length,r=y.LengthDelimited;break;case l.BOOL:i=t===!1;break;case l.DOUBLE:r=y.Bit64;break;case l.FLOAT:r=y.Bit32;break;case l.INT64:i=n||t==0;break;case l.UINT64:i=n||t==0;break;case l.FIXED64:i=n||t==0,r=y.Bit64;break;case l.BYTES:i=n||!t.byteLength,r=y.LengthDelimited;break;case l.FIXED32:r=y.Bit32;break;case l.SFIXED32:r=y.Bit32;break;case l.SFIXED64:i=n||t==0,r=y.Bit64;break;case l.SINT64:i=n||t==0;break}let s=l[e].toLowerCase();return[r,s,n||i]}function He(e,t,n,r){let i;return{typeName:t,extendee:n,get field(){if(!i){let s=typeof r=="function"?r():r;s.name=t.split(".").pop(),s.jsonName=`[${t}]`,i=e.util.newFieldList([s]).list()[0]}return i},runtime:e}}function be(e){let t=e.field.localName,n=Object.create(null);return n[t]=Qe(e),[n,()=>n[t]]}function Qe(e){let t=e.field;if(t.repeated)return[];if(t.default!==void 0)return t.default;switch(t.kind){case"enum":return t.T.values[0].no;case"scalar":return M(t.T,t.L);case"message":let n=t.T,r=new n;return n.fieldWrapper?n.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}function Ze(e,t){if(!t.repeated&&(t.kind=="enum"||t.kind=="scalar")){for(let n=e.length-1;n>=0;--n)if(e[n].no==t.no)return[e[n]];return[]}return e.filter(n=>n.no===t.no)}function et(e,t,n,r){return{syntax:e,json:t,bin:n,util:r,makeMessageType(i,s,a){return Re(this,i,s,a)},makeEnum:Ce,makeEnumType:ue,getEnumType:Xe,makeExtension(i,s,a){return He(this,i,s,a)}}}function ge(e,t){return t instanceof L||!e.fieldWrapper?t:e.fieldWrapper.wrapField(t)}var jt={"google.protobuf.DoubleValue":l.DOUBLE,"google.protobuf.FloatValue":l.FLOAT,"google.protobuf.Int64Value":l.INT64,"google.protobuf.UInt64Value":l.UINT64,"google.protobuf.Int32Value":l.INT32,"google.protobuf.UInt32Value":l.UINT32,"google.protobuf.BoolValue":l.BOOL,"google.protobuf.StringValue":l.STRING,"google.protobuf.BytesValue":l.BYTES},V=Symbol("@bufbuild/protobuf/unknown-fields"),ye={readUnknownFields:!0,readerFactory:e=>new Ke(e)},we={writeUnknownFields:!0,writerFactory:()=>new ze};function tt(e){return e?Object.assign(Object.assign({},ye),e):ye}function nt(e){return e?Object.assign(Object.assign({},we),e):we}function rt(){return{makeReadOptions:tt,makeWriteOptions:nt,listUnknownFields(e){var t;return(t=e[V])!==null&&t!==void 0?t:[]},discardUnknownFields(e){delete e[V]},writeUnknownFields(e,t){let n=e[V];if(n)for(let r of n)t.tag(r.no,r.wireType).raw(r.data)},onUnknownField(e,t,n,r){let i=e;Array.isArray(i[V])||(i[V]=[]),i[V].push({no:t,wireType:n,data:r})},readMessage(e,t,n,r,i){let s=e.getType(),a=i?t.len:t.pos+n,o,u;for(;t.pos<a&&([o,u]=t.tag(),u!=y.EndGroup);){let c=s.fields.find(o);if(!c){let f=t.skip(u);r.readUnknownFields&&this.onUnknownField(e,o,u,f);continue}Ne(e,t,c,u,r)}if(i&&(u!=y.EndGroup||o!==n))throw new Error("invalid end group tag")},readField:Ne}}function Ne(e,t,n,r,i){let{repeated:s,localName:a}=n;switch(n.oneof&&(e=e[n.oneof.localName],e.case!=a&&delete e.value,e.case=a,a="value"),n.kind){case"scalar":case"enum":let o=n.kind=="enum"?l.INT32:n.T,u=z;if(n.kind=="scalar"&&n.L>0&&(u=st),s){let m=e[a];if(r==y.LengthDelimited&&o!=l.STRING&&o!=l.BYTES){let d=t.uint32()+t.pos;for(;t.pos<d;)m.push(u(t,o))}else m.push(u(t,o))}else e[a]=u(t,o);break;case"message":let c=n.T;s?e[a].push(W(t,new c,i,n)):e[a]instanceof L?W(t,e[a],i,n):(e[a]=W(t,new c,i,n),c.fieldWrapper&&!n.oneof&&!n.repeated&&(e[a]=c.fieldWrapper.unwrapField(e[a])));break;case"map":let[f,h]=it(n,t,i);e[a][f]=h;break}}function W(e,t,n,r){let i=t.getType().runtime.bin,s=r?.delimited;return i.readMessage(t,e,s?r?.no:e.uint32(),n,s),t}function it(e,t,n){let r=t.uint32(),i=t.pos+r,s,a;for(;t.pos<i;){let[o]=t.tag();switch(o){case 1:s=z(t,e.K);break;case 2:switch(e.V.kind){case"scalar":a=z(t,e.V.T);break;case"enum":a=t.int32();break;case"message":a=W(t,new e.V.T,n,void 0);break}break}}if(s===void 0){let o=M(e.K,j.BIGINT);s=e.K==l.BOOL?o.toString():o}if(typeof s!="string"&&typeof s!="number"&&(s=s.toString()),a===void 0)switch(e.V.kind){case"scalar":a=M(e.V.T,j.BIGINT);break;case"enum":a=0;break;case"message":a=new e.V.T;break}return[s,a]}function st(e,t){let n=z(e,t);return typeof n=="bigint"?n.toString():n}function z(e,t){switch(t){case l.STRING:return e.string();case l.BOOL:return e.bool();case l.DOUBLE:return e.double();case l.FLOAT:return e.float();case l.INT32:return e.int32();case l.INT64:return e.int64();case l.UINT64:return e.uint64();case l.FIXED64:return e.fixed64();case l.BYTES:return e.bytes();case l.FIXED32:return e.fixed32();case l.SFIXED32:return e.sfixed32();case l.SFIXED64:return e.sfixed64();case l.SINT64:return e.sint64();case l.UINT32:return e.uint32();case l.SINT32:return e.sint32()}}function at(e,t,n,r,i){e.tag(n.no,y.LengthDelimited),e.fork();let s=r;switch(n.K){case l.INT32:case l.FIXED32:case l.UINT32:case l.SFIXED32:case l.SINT32:s=Number.parseInt(r);break;case l.BOOL:I(r=="true"||r=="false"),s=r=="true";break}switch(J(e,n.K,1,s,!0),n.V.kind){case"scalar":J(e,n.V.T,2,i,!0);break;case"enum":J(e,l.INT32,2,i,!0);break;case"message":e.tag(2,y.LengthDelimited).bytes(i.toBinary(t));break}e.join()}function ke(e,t,n,r){let i=ge(n.T,r);n?.delimited?e.tag(n.no,y.StartGroup).raw(i.toBinary(t)).tag(n.no,y.EndGroup):e.tag(n.no,y.LengthDelimited).bytes(i.toBinary(t))}function J(e,t,n,r,i){let[s,a,o]=pe(t,r);(!o||i)&&e.tag(n,s)[a](r)}function ot(e,t,n,r){if(!r.length)return;e.tag(n,y.LengthDelimited).fork();let[,i]=pe(t);for(let s=0;s<r.length;s++)e[i](r[s]);e.join()}function ut(){return Object.assign(Object.assign({},rt()),{writeField:Te,writeMessage(e,t,n){let r=e.getType();for(let i of r.fields.byNumber()){let s,a=i.localName;if(i.oneof){let o=e[i.oneof.localName];if(o.case!==a)continue;s=o.value}else s=e[a];Te(i,s,t,n)}return n.writeUnknownFields&&this.writeUnknownFields(e,t),t}})}function Te(e,t,n,r){let i=e.repeated;switch(e.kind){case"scalar":case"enum":let s=e.kind=="enum"?l.INT32:e.T;if(i)if(e.packed)ot(n,s,e.no,t);else for(let a of t)J(n,s,e.no,a,!0);else t!==void 0&&J(n,s,e.no,t,!!e.oneof||e.opt);break;case"message":if(i)for(let a of t)ke(n,r,e,a);else t!==void 0&&ke(n,r,e,t);break;case"map":for(let[a,o]of Object.entries(t))at(n,r,e,a,o);break}}var $="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),K=[];for(let e=0;e<$.length;e++)K[$[e].charCodeAt(0)]=e;K[45]=$.indexOf("+"),K[95]=$.indexOf("/");var Ie={dec(e){let t=e.length*3/4;e[e.length-2]=="="?t-=2:e[e.length-1]=="="&&(t-=1);let n=new Uint8Array(t),r=0,i=0,s,a=0;for(let o=0;o<e.length;o++){if(s=K[e.charCodeAt(o)],s===void 0)switch(e[o]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:a=s,i=1;break;case 1:n[r++]=a<<2|(s&48)>>4,a=s,i=2;break;case 2:n[r++]=(a&15)<<4|(s&60)>>2,a=s,i=3;break;case 3:n[r++]=(a&3)<<6|s,i=0;break}}if(i==1)throw Error("invalid base64 string.");return n.subarray(0,r)},enc(e){let t="",n=0,r,i=0;for(let s=0;s<e.length;s++)switch(r=e[s],n){case 0:t+=$[r>>2],i=(r&3)<<4,n=1;break;case 1:t+=$[i|r>>4],i=(r&15)<<2,n=2;break;case 2:t+=$[i|r>>6],t+=$[r&63],n=0;break}return n&&(t+=$[i],t+="=",n==1&&(t+="=")),t}};function lt(e,t,n){Be(t,e);let r=t.runtime.bin.makeReadOptions(n),i=Ze(e.getType().runtime.bin.listUnknownFields(e),t.field),[s,a]=be(t);for(let o of i)t.runtime.bin.readField(s,r.readerFactory(o.data),t.field,o.wireType,r);return a()}function ct(e,t,n,r){Be(t,e);let i=t.runtime.bin.makeReadOptions(r),s=t.runtime.bin.makeWriteOptions(r);if(ve(e,t)){let c=e.getType().runtime.bin.listUnknownFields(e).filter(f=>f.no!=t.field.no);e.getType().runtime.bin.discardUnknownFields(e);for(let f of c)e.getType().runtime.bin.onUnknownField(e,f.no,f.wireType,f.data)}let a=s.writerFactory(),o=t.field;!o.opt&&!o.repeated&&(o.kind=="enum"||o.kind=="scalar")&&(o=Object.assign(Object.assign({},t.field),{opt:!0})),t.runtime.bin.writeField(o,n,a,s);let u=i.readerFactory(a.finish());for(;u.pos<u.len;){let[c,f]=u.tag(),h=u.skip(f);e.getType().runtime.bin.onUnknownField(e,c,f,h)}}function ve(e,t){let n=e.getType();return t.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(e).find(r=>r.no==t.field.no)}function Be(e,t){I(e.extendee.typeName==t.getType().typeName,`extension ${e.typeName} can only be applied to message ${e.extendee.typeName}`)}var Fe={ignoreUnknownFields:!1},Ee={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function ft(e){return e?Object.assign(Object.assign({},Fe),e):Fe}function dt(e){return e?Object.assign(Object.assign({},Ee),e):Ee}function ht(e,t){let n=t(mt,Oe);return{makeReadOptions:ft,makeWriteOptions:dt,readMessage(r,i,s,a){if(i==null||Array.isArray(i)||typeof i!="object")throw new Error(`cannot decode message ${r.typeName} from JSON: ${O(i)}`);a=a??new r;let o=new Map,u=s.typeRegistry;for(let[c,f]of Object.entries(i)){let h=r.fields.findJsonName(c);if(h){if(h.oneof){if(f===null&&h.kind=="scalar")continue;let m=o.get(h.oneof);if(m!==void 0)throw new Error(`cannot decode message ${r.typeName} from JSON: multiple keys for oneof "${h.oneof.name}" present: "${m}", "${c}"`);o.set(h.oneof,c)}Se(a,f,h,s,r,e)}else{let m=!1;if(u?.findExtension&&c.startsWith("[")&&c.endsWith("]")){let d=u.findExtension(c.substring(1,c.length-1));if(d&&d.extendee.typeName==r.typeName){m=!0;let[b,F]=be(d);Se(b,f,d.field,s,d,!0),ct(a,d,F(),s)}}if(!m&&!s.ignoreUnknownFields)throw new Error(`cannot decode message ${r.typeName} from JSON: key "${c}" is unknown`)}}return a},writeMessage(r,i){let s=r.getType(),a={},o;try{for(let c of s.fields.byMember()){let f;if(c.kind=="oneof"){let h=r[c.localName];if(h.value===void 0)continue;if(o=c.findField(h.case),!o)throw"oneof case not found: "+h.case;f=n(o,h.value,i)}else o=c,f=n(o,r[o.localName],i);f!==void 0&&(a[i.useProtoFieldName?o.name:o.jsonName]=f)}let u=i.typeRegistry;if(u?.findExtensionFor)for(let c of s.runtime.bin.listUnknownFields(r)){let f=u.findExtensionFor(s.typeName,c.no);if(f&&ve(r,f)){let h=lt(r,f,i),m=n(f.field,h,i);m!==void 0&&(a[f.field.jsonName]=m)}}}catch(u){let c=o?`cannot encode field ${s.typeName}.${o.name} to JSON`:`cannot encode message ${s.typeName} to JSON`,f=u instanceof Error?u.message:String(u);throw new Error(c+(f.length>0?`: ${f}`:""))}return a},readScalar:(r,i,s)=>G(r,i,s,e),writeScalar:Oe,debug:O}}function O(e){if(e===null)return"null";switch(typeof e){case"object":return Array.isArray(e)?"array":"object";case"string":return e.length>100?"string":`"${e.split('"').join('\\"')}"`;default:return String(e)}}function Se(e,t,n,r,i,s){let a=n.localName;if(n.oneof){if(t===null&&n.kind=="scalar")return;e=e[n.oneof.localName]={case:a},a="value"}if(n.repeated){if(t===null)return;if(!Array.isArray(t))throw new Error(`cannot decode field ${i.typeName}.${n.name} from JSON: ${O(t)}`);let o=e[a];for(let u of t){if(u===null)throw new Error(`cannot decode field ${i.typeName}.${n.name} from JSON: ${O(u)}`);let c;switch(n.kind){case"message":c=n.T.fromJson(u,r);break;case"enum":if(c=ne(n.T,u,r.ignoreUnknownFields,!0),c===void 0)continue;break;case"scalar":try{c=G(n.T,u,n.L,!0)}catch(f){let h=`cannot decode field ${i.typeName}.${n.name} from JSON: ${O(u)}`;throw f instanceof Error&&f.message.length>0&&(h+=`: ${f.message}`),new Error(h)}break}o.push(c)}}else if(n.kind=="map"){if(t===null)return;if(typeof t!="object"||Array.isArray(t))throw new Error(`cannot decode field ${i.typeName}.${n.name} from JSON: ${O(t)}`);let o=e[a];for(let[u,c]of Object.entries(t)){if(c===null)throw new Error(`cannot decode field ${i.typeName}.${n.name} from JSON: map value null`);let f;switch(n.V.kind){case"message":f=n.V.T.fromJson(c,r);break;case"enum":if(f=ne(n.V.T,c,r.ignoreUnknownFields,!0),f===void 0)continue;break;case"scalar":try{f=G(n.V.T,c,j.BIGINT,!0)}catch(h){let m=`cannot decode map value for field ${i.typeName}.${n.name} from JSON: ${O(t)}`;throw h instanceof Error&&h.message.length>0&&(m+=`: ${h.message}`),new Error(m)}break}try{o[G(n.K,n.K==l.BOOL?u=="true"?!0:u=="false"?!1:u:u,j.BIGINT,!0).toString()]=f}catch(h){let m=`cannot decode map key for field ${i.typeName}.${n.name} from JSON: ${O(t)}`;throw h instanceof Error&&h.message.length>0&&(m+=`: ${h.message}`),new Error(m)}}}else switch(n.kind){case"message":let o=n.T;if(t===null&&o.typeName!="google.protobuf.Value"){if(n.oneof)throw new Error(`cannot decode field ${i.typeName}.${n.name} from JSON: null is invalid for oneof field`);return}e[a]instanceof L?e[a].fromJson(t,r):(e[a]=o.fromJson(t,r),o.fieldWrapper&&!n.oneof&&(e[a]=o.fieldWrapper.unwrapField(e[a])));break;case"enum":let u=ne(n.T,t,r.ignoreUnknownFields,s);u!==void 0&&(e[a]=u);break;case"scalar":try{e[a]=G(n.T,t,n.L,s)}catch(c){let f=`cannot decode field ${i.typeName}.${n.name} from JSON: ${O(t)}`;throw c instanceof Error&&c.message.length>0&&(f+=`: ${c.message}`),new Error(f)}break}}function G(e,t,n,r){switch(e){case l.DOUBLE:case l.FLOAT:if(t===null)return r?0:void 0;if(t==="NaN")return Number.NaN;if(t==="Infinity")return Number.POSITIVE_INFINITY;if(t==="-Infinity")return Number.NEGATIVE_INFINITY;if(t===""||typeof t=="string"&&t.trim().length!==t.length||typeof t!="string"&&typeof t!="number")break;let i=Number(t);if(Number.isNaN(i)||!Number.isFinite(i))break;return e==l.FLOAT&&se(i),i;case l.INT32:case l.FIXED32:case l.SFIXED32:case l.SINT32:case l.UINT32:if(t===null)return r?0:void 0;let s;if(typeof t=="number"?s=t:typeof t=="string"&&t.length>0&&t.trim().length===t.length&&(s=Number(t)),s===void 0)break;return e==l.UINT32?Z(s):q(s),s;case l.INT64:case l.SFIXED64:case l.SINT64:if(t===null)return r?v.zero:void 0;if(typeof t!="number"&&typeof t!="string")break;let a=v.parse(t);return n?a.toString():a;case l.FIXED64:case l.UINT64:if(t===null)return r?v.zero:void 0;if(typeof t!="number"&&typeof t!="string")break;let o=v.uParse(t);return n?o.toString():o;case l.BOOL:if(t===null)return r?!1:void 0;if(typeof t!="boolean")break;return t;case l.STRING:if(t===null)return r?"":void 0;if(typeof t!="string")break;try{encodeURIComponent(t)}catch{throw new Error("invalid UTF8")}return t;case l.BYTES:if(t===null)return r?new Uint8Array(0):void 0;if(t==="")return new Uint8Array(0);if(typeof t!="string")break;return Ie.dec(t)}throw new Error}function ne(e,t,n,r){if(t===null)return r?e.values[0].no:void 0;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":let i=e.findName(t);if(i||n)return i?.no;break}throw new Error(`cannot decode enum ${e.typeName} from JSON: ${O(t)}`)}function mt(e,t,n,r){var i;return t===void 0?t:!n&&e.values[0].no===t?void 0:r?t:e.typeName=="google.protobuf.NullValue"?null:(i=e.findNumber(t)?.name)!==null&&i!==void 0?i:t}function Oe(e,t,n){if(t!==void 0)switch(e){case l.INT32:case l.SFIXED32:case l.SINT32:case l.FIXED32:case l.UINT32:return I(typeof t=="number"),t!=0||n?t:void 0;case l.FLOAT:case l.DOUBLE:return I(typeof t=="number"),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t!==0||n?t:void 0;case l.STRING:return I(typeof t=="string"),t.length>0||n?t:void 0;case l.BOOL:return I(typeof t=="boolean"),t||n?t:void 0;case l.UINT64:case l.FIXED64:case l.INT64:case l.SFIXED64:case l.SINT64:return I(typeof t=="bigint"||typeof t=="string"||typeof t=="number"),n||t!=0?t.toString(10):void 0;case l.BYTES:return I(t instanceof Uint8Array),n||t.byteLength>0?Ie.enc(t):void 0}}function pt(){return ht(!0,(e,t)=>function(n,r,i){if(n.kind=="map"){let s={};switch(n.V.kind){case"scalar":for(let[o,u]of Object.entries(r)){let c=t(n.V.T,u,!0);I(c!==void 0),s[o.toString()]=c}break;case"message":for(let[o,u]of Object.entries(r))s[o.toString()]=u.toJson(i);break;case"enum":let a=n.V.T;for(let[o,u]of Object.entries(r)){I(u===void 0||typeof u=="number");let c=e(a,u,!0,i.enumAsInteger);I(c!==void 0),s[o.toString()]=c}break}return i.emitDefaultValues||Object.keys(s).length>0?s:void 0}else if(n.repeated){let s=[];switch(n.kind){case"scalar":for(let a=0;a<r.length;a++)s.push(t(n.T,r[a],!0));break;case"enum":for(let a=0;a<r.length;a++)s.push(e(n.T,r[a],!0,i.enumAsInteger));break;case"message":for(let a=0;a<r.length;a++)s.push(r[a].toJson(i));break}return i.emitDefaultValues||s.length>0?s:void 0}else{if(r===void 0)return;switch(n.kind){case"scalar":return t(n.T,r,!!n.oneof||n.opt||i.emitDefaultValues);case"enum":return e(n.T,r,!!n.oneof||n.opt||i.emitDefaultValues,i.enumAsInteger);case"message":return ge(n.T,r).toJson(i)}}})}function bt(){return{setEnumType:oe,initPartial(e,t){if(e===void 0)return;let n=t.getType();for(let r of n.fields.byMember()){let i=r.localName,s=t,a=e;if(a[i]!==void 0)switch(r.kind){case"oneof":let o=a[i].case;if(o===void 0)continue;let u=r.findField(o),c=a[i].value;u&&u.kind=="message"&&!(c instanceof u.T)?c=new u.T(c):u&&u.kind==="scalar"&&u.T===l.BYTES&&(c=P(c)),s[i]={case:o,value:c};break;case"scalar":case"enum":let f=a[i];r.T===l.BYTES&&(f=r.repeated?f.map(P):P(f)),s[i]=f;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===l.BYTES)for(let[d,b]of Object.entries(a[i]))s[i][d]=P(b);else Object.assign(s[i],a[i]);break;case"message":let m=r.V.T;for(let d of Object.keys(a[i])){let b=a[i][d];m.fieldWrapper||(b=new m(b)),s[i][d]=b}break}break;case"message":let h=r.T;if(r.repeated)s[i]=a[i].map(m=>m instanceof h?m:new h(m));else if(a[i]!==void 0){let m=a[i];h.fieldWrapper?h.typeName==="google.protobuf.BytesValue"?s[i]=P(m):s[i]=m:s[i]=m instanceof h?m:new h(m)}break}}},equals(e,t,n){return t===n?!0:!t||!n?!1:e.fields.byMember().every(r=>{let i=t[r.localName],s=n[r.localName];if(r.repeated){if(i.length!==s.length)return!1;switch(r.kind){case"message":return i.every((a,o)=>r.T.equals(a,s[o]));case"scalar":return i.every((a,o)=>D(r.T,a,s[o]));case"enum":return i.every((a,o)=>D(l.INT32,a,s[o]))}throw new Error(`repeated cannot contain ${r.kind}`)}switch(r.kind){case"message":return r.T.equals(i,s);case"enum":return D(l.INT32,i,s);case"scalar":return D(r.T,i,s);case"oneof":if(i.case!==s.case)return!1;let a=r.findField(i.case);if(a===void 0)return!0;switch(a.kind){case"message":return a.T.equals(i.value,s.value);case"enum":return D(l.INT32,i.value,s.value);case"scalar":return D(a.T,i.value,s.value)}throw new Error(`oneof cannot contain ${a.kind}`);case"map":let o=Object.keys(i).concat(Object.keys(s));switch(r.V.kind){case"message":let u=r.V.T;return o.every(f=>u.equals(i[f],s[f]));case"enum":return o.every(f=>D(l.INT32,i[f],s[f]));case"scalar":let c=r.V.T;return o.every(f=>D(c,i[f],s[f]))}break}})},clone(e){let t=e.getType(),n=new t,r=n;for(let i of t.fields.byMember()){let s=e[i.localName],a;if(i.repeated)a=s.map(H);else if(i.kind=="map"){a=r[i.localName];for(let[o,u]of Object.entries(s))a[o]=H(u)}else i.kind=="oneof"?a=i.findField(s.case)?{case:s.case,value:H(s.value)}:{case:void 0}:a=H(s);r[i.localName]=a}return n}}}function H(e){if(e===void 0)return e;if(e instanceof L)return e.clone();if(e instanceof Uint8Array){let t=new Uint8Array(e.byteLength);return t.set(e),t}return e}function P(e){return e instanceof Uint8Array?e:new Uint8Array(e)}var gt=class{constructor(e,t){this._fields=e,this._normalizer=t}findJsonName(e){if(!this.jsonNames){let t={};for(let n of this.list())t[n.jsonName]=t[n.name]=n;this.jsonNames=t}return this.jsonNames[e]}find(e){if(!this.numbers){let t={};for(let n of this.list())t[n.no]=n;this.numbers=t}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,t)=>e.no-t.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];let e=this.members,t;for(let n of this.list())n.oneof?n.oneof!==t&&(t=n.oneof,e.push(t)):e.push(n)}return this.members}};function Ae(e,t){let n=$e(e);return t?n:It(Tt(n))}function yt(e){return Ae(e,!1)}var wt=$e;function $e(e){let t=!1,n=[];for(let r=0;r<e.length;r++){let i=e.charAt(r);switch(i){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(i),t=!1;break;default:t&&(t=!1,i=i.toUpperCase()),n.push(i);break}}return n.join("")}var Nt=new Set(["constructor","toString","toJSON","valueOf"]),kt=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),De=e=>`${e}$`,Tt=e=>kt.has(e)?De(e):e,It=e=>Nt.has(e)?De(e):e,vt=class{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=yt(e)}addField(e){I(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let t=0;t<this.fields.length;t++)this._lookup[this.fields[t].localName]=this.fields[t]}return this._lookup[e]}},Q=et("proto3",pt(),ut(),Object.assign(Object.assign({},bt()),{newFieldList(e){return new gt(e,Bt)},initFields(e){for(let t of e.getType().fields.byMember()){if(t.opt)continue;let n=t.localName,r=e;if(t.repeated){r[n]=[];continue}switch(t.kind){case"oneof":r[n]={case:void 0};break;case"enum":r[n]=0;break;case"map":r[n]={};break;case"scalar":r[n]=M(t.T,t.L);break;case"message":break}}}}));function Bt(e){var t,n,r,i;let s=[],a;for(let o of typeof e=="function"?e():e){let u=o;if(u.localName=Ae(o.name,o.oneof!==void 0),u.jsonName=(t=o.jsonName)!==null&&t!==void 0?t:wt(o.name),u.repeated=(n=o.repeated)!==null&&n!==void 0?n:!1,o.kind=="scalar"&&(u.L=(r=o.L)!==null&&r!==void 0?r:j.BIGINT),o.oneof!==void 0){let c=typeof o.oneof=="string"?o.oneof:o.oneof.name;(!a||a.name!=c)&&(a=new vt(c)),u.oneof=a,a.addField(u)}o.kind=="message"&&(u.delimited=!1),u.packed=(i=o.packed)!==null&&i!==void 0?i:o.kind=="enum"||o.kind=="scalar"&&o.T!=l.BYTES&&o.T!=l.STRING,s.push(u)}return s}var Ft=Q.makeMessageType("youtube.request.common.Request",()=>[{no:1,name:"context",kind:"message",T:Et}]),Et=Q.makeMessageType("youtube.request.common.Context",()=>[{no:9,name:"adSignalsInfo",kind:"message",T:St}]),St=Q.makeMessageType("youtube.request.common.AdSignalsInfo",()=>[{no:1,name:"params",kind:"message",T:Ot,repeated:!0}]),Ot=Q.makeMessageType("youtube.request.common.Params",()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:9}]),X=class{_times=new Map;name;isDebug;className;request;response;constructor(e,t,n){this.name=e??"",this.isDebug=n?.debug??!1,e&&this.debug(`${e} Start`),this.className=t??"",this.init()}static getInstance(e,t){let n="Surge";return typeof $loon<"u"?n="Loon":typeof $task<"u"&&(n="QuanX"),X.instances[n]||(X.instances[n]=X.classNames[n](e,n,t)),X.instances[n]}createProxy(e){return new Proxy(e,{get:this.getFn,set:this.setFn})}getFn(e,t,n){return e[t]}setFn(e,t,n,r){return e[t]=n,!0}getJSON(e,t={}){let n=this.getVal(e);return n?JSON.parse(n):t}setJSON(e,t){this.setVal(JSON.stringify(e),t)}msg(e=this.name,t="",n="",r){}debug(e){this.isDebug&&(typeof e=="object"&&(e=JSON.stringify(e)))}log(e){typeof e=="object"&&(e=JSON.stringify(e))}timeStart(e){this._times.set(e,Date.now())}timeEnd(e){if(this._times.has(e)){let t=this._times.get(e)??0,n=Date.now()-t;this.debug(`${e}: ${n}ms`),this._times.delete(e)}else this.debug(`Timer with label ${e} does not exist.`)}exit(){$done({})}reject(){$done()}decodeParams(e,t){return e}},C=X;_(C,"instances",{}),_(C,"classNames",{QuanX:(e,t,n)=>new Ue(e,t,n),Surge:(e,t,n)=>new ie(e,t,n),Loon:(e,t,n)=>new At(e,t,n)});var re=class extends C{getFn(e,t,n){let r=re.clientAdapter[t]||t;return super.getFn(e,r,n)}setFn(e,t,n,r){let i=re.clientAdapter[t]||t;return super.setFn(e,i,n,r)}init(){try{this.request=this.createProxy($request),this.response=this.createProxy($response)}catch(e){this.debug(e.toString())}}getVal(e){return $persistentStore.read(e)}setVal(e,t){$persistentStore.write(e,t)}msg(e=this.name,t="",n="",r){$notification.post(e,t,n,{url:r??""})}async fetch(e){return await new Promise((t,n)=>{let{method:r,body:i,bodyBytes:s,...a}=e,o=s??i,u=o instanceof Uint8Array;$httpClient[r.toLowerCase()]({...a,body:o,"binary-mode":u},(c,f,h)=>{c&&n(c);let m=u?"bodyBytes":"body";t({status:f.status||f.statusCode,headers:f.headers,[m]:h})})})}done(e){let t=e.response??e,n,r;t.bodyBytes?(n=t.bodyBytes,delete t.bodyBytes,r={...e},r.response?r.response.body=n:r.body=n):r=e,$done(r)}decodeParams(e,t){return typeof $argument=="string"&&!$argument.includes("{{{")&&Object.assign(e,JSON.parse($argument)),e}},ie=re;_(ie,"clientAdapter",{bodyBytes:"body"});var U=class extends C{static transferBodyBytes(e,t){return e instanceof ArrayBuffer?t==="Uint8Array"?new Uint8Array(e):e:e instanceof Uint8Array&&t==="ArrayBuffer"?e.buffer.slice(e.byteOffset,e.byteLength+e.byteOffset):e}init(){try{this.request=this.createProxy($request),this.response=this.createProxy($response)}catch(e){this.debug(e.toString())}}getFn(e,t,n){let r=U.clientAdapter[t]||t,i=super.getFn(e,r,n);return t==="bodyBytes"&&(i=U.transferBodyBytes(i,"Uint8Array")),i}setFn(e,t,n,r){let i=U.clientAdapter[t]||t,s=n;return t==="bodyBytes"&&(s=U.transferBodyBytes(s,"Uint8Array")),super.setFn(e,i,s,r)}getVal(e){return $prefs.valueForKey(e)?.replace(/\0/g,"")}setVal(e,t){$prefs.setValueForKey(e,t)}msg(e=this.name,t="",n="",r){$notify(e,t,n,{"open-url":r??""})}async fetch(e){return await new Promise(t=>{let n={url:"",method:"GET"};for(let[r,i]of Object.entries(e))r==="id"?n.sessionIndex=i:r==="bodyBytes"?n.bodyBytes=U.transferBodyBytes(i,"ArrayBuffer"):n[r]=i;e.bodyBytes&&delete n.body,$task.fetch(n).then(r=>{let i={status:200,headers:{}};for(let[s,a]of Object.entries(r))s==="sessionIndex"?i.id=a:s==="bodyBytes"?i.bodyBytes=U.transferBodyBytes(a,"Uint8Array"):s==="statusCode"?i.status=a:i[s]=a;t(i)})})}done(e){let t=e.response??e,n={};for(let[r,i]of Object.entries(t))r==="status"?n.status=`HTTP/1.1 ${i}`:r==="bodyBytes"?n.bodyBytes=U.transferBodyBytes(i,"ArrayBuffer"):n[r]=i;$done(n)}},Ue=U;_(Ue,"clientAdapter",{id:"sessionIndex",status:"statusCode"});var At=class extends ie{decodeParams(e,t){let n={};for(let[r,i]of Object.entries(e)){let s=t?.[r]??r,a=this.getVal(s);a&&(n[r]=this.transferType(i,a))}return Object.assign(e,n),e}transferType(e,t){return typeof e=="boolean"?t==="true":typeof e=="number"?Number(t):t}},T=C.getInstance("YouTube"),$t=class{name;needProcess;needSave;message;whiteNo;blackNo;whiteEml;blackEml;msgType;argument;decoder=new TextDecoder("utf-8",{fatal:!1,ignoreBOM:!0});constructor(e,t){this.name=t,this.msgType=e,this.argument=this.decodeArgument(),T.isDebug=!!this.argument.debug,T.debug(this.name),Object.assign(this,T.getJSON("YouTubeAdvertiseInfo",{whiteNo:[],blackNo:[],whiteEml:[],blackEml:[]}))}decodeArgument(){let e={lyricLang:"\u6B4C\u8BCD\u7FFB\u8BD1\u8BED\u8A00",captionLang:"\u5B57\u5E55\u7FFB\u8BD1\u8BED\u8A00",blockUpload:"\u5C4F\u853D\u4E0A\u4F20\u6309\u94AE",blockImmersive:"\u5C4F\u853D\u9009\u6BB5\u6309\u94AE",debug:"\u542F\u52A8\u8C03\u8BD5\u6A21\u5F0F"},t={lyricLang:"zh-Hans",captionLang:"zh-Hans",blockUpload:!0,blockImmersive:!0,debug:!1};return T.decodeParams(t,e)}fromBinary(e){return e instanceof Uint8Array?(this.message=this.msgType.fromBinary(e),T.debug(`raw: ${Math.floor(e.length/1024)} kb`),this):(T.log("YouTube can not get binaryBody"),T.exit(),this)}async modify(){let e=this.pure();return e instanceof Promise?await e:e}toBinary(){return this.message.toBinary()}listUnknownFields(e){return e instanceof L?e.getType().runtime.bin.listUnknownFields(e):[]}save(){if(this.needSave){T.debug("Update Config");let e={whiteNo:this.whiteNo,blackNo:this.blackNo,whiteEml:this.whiteEml,blackEml:this.blackEml};T.setJSON(e,"YouTubeAdvertiseInfo")}}done(){if(this.save(),this.needProcess){T.timeStart("toBinary");let e=this.toBinary();T.timeEnd("toBinary"),T.debug(`modify: ${Math.floor(e.length/1024)} kb`),T.done({bodyBytes:e})}T.debug("use $done({})"),T.exit()}iterate(e={},t,n){let r=typeof e=="object"?[e]:[];for(;r.length;){let i=r.pop(),s=Object.keys(i);if(typeof t=="symbol"){for(let a of Object.getOwnPropertySymbols(i))if(a.description===t.description){n(i,r);break}}for(let a of s)a===t?n(i,r):typeof i[a]=="object"&&r.push(i[a])}}isAdvertise(e){let t=this.listUnknownFields(e)[0];return t?this.handleFieldNo(t):this.handleFieldEml(e)}handleFieldNo(e){let t=e.no;if(this.whiteNo.includes(t))return!1;if(this.blackNo.includes(t))return!0;let n=this.decoder.decode(e.data).includes("pagead");return n?this.blackNo.push(t):this.whiteNo.push(t),this.needSave=!0,n}handleFieldEml(e){let t=!1,n="";return this.iterate(e,"renderInfo",(r,i)=>{if(n=r.renderInfo.layoutRender.eml.split("|")[0],this.whiteEml.includes(n))t=!1;else if(this.blackEml.includes(n)||/shorts(?!_pivot_item)/.test(n))t=!0;else{let s=r?.videoInfo?.videoContext?.videoContent;if(s){let a=this.listUnknownFields(s)[0];t=this.decoder.decode(a.data).includes("pagead"),t?this.blackEml.push(n):this.whiteEml.push(n),this.needSave=!0}}i.length=0}),t}isShorts(e){let t=!1;return this.iterate(e,"eml",(n,r)=>{t=/shorts(?!_pivot_item)/.test(n.eml),r.length=0}),t}},Dt=class extends $t{constructor(e=Ft,t="Request"){super(e,t)}pure(){return this.message.context.adSignalsInfo.params.length=0,this.needProcess=!0,this}};async function Ut(){let e=new Dt;await e.fromBinary(T.request.bodyBytes).pure(),e.done()}Ut().catch(e=>{T.log(e.toString())}).finally(()=>{T.exit()})})();
