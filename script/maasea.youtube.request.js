// https://raw.githubusercontent.com/ElementRef/AboutConfig/main/script/maasea.youtube.request.js
var xt=Object.defineProperty;var c=(ee,te)=>xt(ee,"name",{value:te,configurable:!0});(()=>{var ee=Object.defineProperty,te=c((e,t,n)=>t in e?ee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"ft"),q=c((e,t,n)=>(te(e,typeof t!="symbol"?t+"":t,n),n),"_");(function(e){function t(){}c(t,"e");function n(){}c(n,"n");var r=String.fromCharCode,i={}.toString,s=i.call(e.SharedArrayBuffer),a=i(),o=e.Uint8Array,u=o||Array,f=o?ArrayBuffer:u,d=f.isView||function(g){return g&&"length"in g},m=i.call(f.prototype);f=n.prototype;var p=e.TextEncoder,h=new(o?Uint16Array:u)(32);t.prototype.decode=function(g){if(!d(g)){var E=i.call(g);if(E!==m&&E!==s&&E!==a)throw TypeError("Failed to execute 'decode' on 'TextDecoder': The provided value is not of type '(ArrayBuffer or ArrayBufferView)'");g=o?new u(g):g||[]}for(var T=E="",b=0,y=g.length|0,_=y-32|0,k,N,F=0,L=0,O,S=0,$=-1;b<y;){for(k=b<=_?32:y-b|0;S<k;b=b+1|0,S=S+1|0){switch(N=g[b]&255,N>>4){case 15:if(O=g[b=b+1|0]&255,O>>6!==2||247<N){b=b-1|0;break}F=(N&7)<<6|O&63,L=5,N=256;case 14:O=g[b=b+1|0]&255,F<<=6,F|=(N&15)<<6|O&63,L=O>>6===2?L+4|0:24,N=N+256&768;case 13:case 12:O=g[b=b+1|0]&255,F<<=6,F|=(N&31)<<6|O&63,L=L+7|0,b<y&&O>>6===2&&F>>L&&1114112>F?(N=F,F=F-65536|0,0<=F&&($=(F>>10)+55296|0,N=(F&1023)+56320|0,31>S?(h[S]=$,S=S+1|0,$=-1):(O=$,$=N,N=O))):(N>>=8,b=b-N-1|0,N=65533),F=L=0,k=b<=_?32:y-b|0;default:h[S]=N;continue;case 11:case 10:case 9:case 8:}h[S]=65533}if(T+=r(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],h[9],h[10],h[11],h[12],h[13],h[14],h[15],h[16],h[17],h[18],h[19],h[20],h[21],h[22],h[23],h[24],h[25],h[26],h[27],h[28],h[29],h[30],h[31]),32>S&&(T=T.slice(0,S-32|0)),b<y){if(h[0]=$,S=~$>>>31,$=-1,T.length<E.length)continue}else $!==-1&&(T+=r($));E+=T,T=""}return E},f.encode=function(g){g=g===void 0?"":""+g;var E=g.length|0,T=new u((E<<1)+8|0),b,y=0,_=!o;for(b=0;b<E;b=b+1|0,y=y+1|0){var k=g.charCodeAt(b)|0;if(127>=k)T[y]=k;else{if(2047>=k)T[y]=192|k>>6;else{e:{if(55296<=k)if(56319>=k){var N=g.charCodeAt(b=b+1|0)|0;if(56320<=N&&57343>=N){if(k=(k<<10)+N-56613888|0,65535<k){T[y]=240|k>>18,T[y=y+1|0]=128|k>>12&63,T[y=y+1|0]=128|k>>6&63,T[y=y+1|0]=128|k&63;continue}break e}k=65533}else 57343>=k&&(k=65533);!_&&b<<1<y&&b<<1<(y-7|0)&&(_=!0,N=new u(3*E),N.set(T),T=N)}T[y]=224|k>>12,T[y=y+1|0]=128|k>>6&63}T[y=y+1|0]=128|k&63}}return o?T.subarray(0,y):T.slice(0,y)},p||(e.TextDecoder=t,e.TextEncoder=n)})(globalThis);function v(e,t){if(!e)throw new Error(t)}c(v,"T");var Ve=34028234663852886e22,Je=-34028234663852886e22,Ge=4294967295,Pe=2147483647,Xe=-2147483648;function Y(e){if(typeof e!="number")throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>Pe||e<Xe)throw new Error("invalid int 32: "+e)}c(Y,"J");function ne(e){if(typeof e!="number")throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>Ge||e<0)throw new Error("invalid uint 32: "+e)}c(ne,"j");function ue(e){if(typeof e!="number")throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>Ve||e<Je))throw new Error("invalid float 32: "+e)}c(ue,"Q");var le=Symbol("@bufbuild/protobuf/enum-type");function Ce(e){let t=e[le];return v(t,"missing enum type on enum object"),t}c(Ce,"Be");function ce(e,t,n,r){e[le]=fe(t,n.map(i=>({no:i.no,name:i.name,localName:e[i.no]})),r)}c(ce,"me");function fe(e,t,n){let r=Object.create(null),i=Object.create(null),s=[];for(let a of t){let o=de(a);s.push(o),r[a.name]=o,i[a.no]=o}return{typeName:e,values:s,findName(a){return r[a]},findNumber(a){return i[a]}}}c(fe,"pe");function Re(e,t,n){let r={};for(let i of t){let s=de(i);r[s.localName]=s.no,r[s.no]=s.localName}return ce(r,e,t,n),r}c(Re,"Se");function de(e){return"localName"in e?e:Object.assign(Object.assign({},e),{localName:e.name})}c(de,"Oe");var V=class{static{c(this,"F")}equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,t){let n=this.getType(),r=n.runtime.bin,i=r.makeReadOptions(t);return r.readMessage(this,i.readerFactory(e),e.byteLength,i),this}fromJson(e,t){let n=this.getType(),r=n.runtime.json,i=r.makeReadOptions(t);return r.readMessage(n,e,i,this),this}fromJsonString(e,t){let n;try{n=JSON.parse(e)}catch(r){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${r instanceof Error?r.message:String(r)}`)}return this.fromJson(n,t)}toBinary(e){let t=this.getType(),n=t.runtime.bin,r=n.makeWriteOptions(e),i=r.writerFactory();return n.writeMessage(this,i,r),i.finish()}toJson(e){let t=this.getType(),n=t.runtime.json,r=n.makeWriteOptions(e);return n.writeMessage(this,r)}toJsonString(e){var t;let n=this.toJson(e);return JSON.stringify(n,null,(t=e?.prettySpaces)!==null&&t!==void 0?t:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}};function _e(e,t,n,r){var i;let s=(i=r?.localName)!==null&&i!==void 0?i:t.substring(t.lastIndexOf(".")+1),a={[s]:function(o){e.util.initFields(this),e.util.initPartial(o,this)}}[s];return Object.setPrototypeOf(a.prototype,new V),Object.assign(a,{runtime:e,typeName:t,fields:e.util.newFieldList(n),fromBinary(o,u){return new a().fromBinary(o,u)},fromJson(o,u){return new a().fromJson(o,u)},fromJsonString(o,u){return new a().fromJsonString(o,u)},equals(o,u){return e.util.equals(a,o,u)}}),a}c(_e,"Ue");var l;(function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"})(l||(l={}));var x;(function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING"})(x||(x={}));function qe(){let e=0,t=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,!(i&128))return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(n&15)<<28,t=(n&112)>>4,!(n&128))return this.assertBounds(),[e,t];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(t|=(i&127)<<r,!(i&128))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}c(qe,"De");function re(e,t,n){for(let s=0;s<28;s=s+7){let a=e>>>s,o=!(!(a>>>7)&&t==0),u=(o?a|128:a)&255;if(n.push(u),!o)return}let r=e>>>28&15|(t&7)<<4,i=!!(t>>3);if(n.push((i?r|128:r)&255),!!i){for(let s=3;s<31;s=s+7){let a=t>>>s,o=!!(a>>>7),u=(o?a|128:a)&255;if(n.push(u),!o)return}n.push(t>>>31&1)}}c(re,"Z");var M=4294967296;function he(e){let t=e[0]==="-";t&&(e=e.slice(1));let n=1e6,r=0,i=0;function s(a,o){let u=Number(e.slice(a,o));i*=n,r=r*n+u,r>=M&&(i=i+(r/M|0),r=r%M)}return c(s,"o"),s(-24,-18),s(-18,-12),s(-12,-6),s(-6),t?pe(r,i):ie(r,i)}c(he,"he");function Ye(e,t){let n=ie(e,t),r=n.hi&2147483648;r&&(n=pe(n.lo,n.hi));let i=me(n.lo,n.hi);return r?"-"+i:i}c(Ye,"$e");function me(e,t){if({lo:e,hi:t}=Me(e,t),t<=2097151)return String(M*t+e);let n=e&16777215,r=(e>>>24|t<<8)&16777215,i=t>>16&65535,s=n+r*6777216+i*6710656,a=r+i*8147497,o=i*2,u=1e7;return s>=u&&(a+=Math.floor(s/u),s%=u),a>=u&&(o+=Math.floor(a/u),a%=u),o.toString()+be(a)+be(s)}c(me,"ge");function Me(e,t){return{lo:e>>>0,hi:t>>>0}}c(Me,"ht");function ie(e,t){return{lo:e|0,hi:t|0}}c(ie,"ye");function pe(e,t){return t=~t,e?e=~e+1:t+=1,ie(e,t)}c(pe,"Le");var be=c(e=>{let t=String(e);return"0000000".slice(t.length)+t},"Ae");function ge(e,t){if(e>=0){for(;e>127;)t.push(e&127|128),e=e>>>7;t.push(e)}else{for(let n=0;n<9;n++)t.push(e&127|128),e=e>>7;t.push(1)}}c(ge,"be");function We(){let e=this.buf[this.pos++],t=e&127;if(!(e&128))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<7,!(e&128))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<14,!(e&128))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<21,!(e&128))return this.assertBounds(),t;e=this.buf[this.pos++],t|=(e&15)<<28;for(let n=5;e&128&&n<10;n++)e=this.buf[this.pos++];if(e&128)throw new Error("invalid varint");return this.assertBounds(),t>>>0}c(We,"Re");function ze(){let e=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof e.getBigInt64=="function"&&typeof e.getBigUint64=="function"&&typeof e.setBigInt64=="function"&&typeof e.setBigUint64=="function"&&(typeof process!="object"||typeof process.env!="object"||process.env.BUF_BIGINT_DISABLE!=="1")){let r=BigInt("-9223372036854775808"),i=BigInt("9223372036854775807"),s=BigInt("0"),a=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(o){let u=typeof o=="bigint"?o:BigInt(o);if(u>i||u<r)throw new Error(`int64 invalid: ${o}`);return u},uParse(o){let u=typeof o=="bigint"?o:BigInt(o);if(u>a||u<s)throw new Error(`uint64 invalid: ${o}`);return u},enc(o){return e.setBigInt64(0,this.parse(o),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(o){return e.setBigInt64(0,this.uParse(o),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec(o,u){return e.setInt32(0,o,!0),e.setInt32(4,u,!0),e.getBigInt64(0,!0)},uDec(o,u){return e.setInt32(0,o,!0),e.setInt32(4,u,!0),e.getBigUint64(0,!0)}}}let t=c(r=>v(/^-?[0-9]+$/.test(r),`int64 invalid: ${r}`),"n"),n=c(r=>v(/^[0-9]+$/.test(r),`uint64 invalid: ${r}`),"r");return{zero:"0",supported:!1,parse(r){return typeof r!="string"&&(r=r.toString()),t(r),r},uParse(r){return typeof r!="string"&&(r=r.toString()),n(r),r},enc(r){return typeof r!="string"&&(r=r.toString()),t(r),he(r)},uEnc(r){return typeof r!="string"&&(r=r.toString()),n(r),he(r)},dec(r,i){return Ye(r,i)},uDec(r,i){return me(r,i)}}}c(ze,"gt");var B=ze(),w;(function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"})(w||(w={}));var Ke=class{static{c(this,"ee")}constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let r=0;r<this.chunks.length;r++)e+=this.chunks[r].length;let t=new Uint8Array(e),n=0;for(let r=0;r<this.chunks.length;r++)t.set(this.chunks[r],n),n+=this.chunks[r].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(ne(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return Y(e),ge(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){ue(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){ne(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){Y(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return Y(e),e=(e<<1^e>>31)>>>0,ge(e,this.buf),this}sfixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=B.enc(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=B.uEnc(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}int64(e){let t=B.enc(e);return re(t.lo,t.hi,this.buf),this}sint64(e){let t=B.enc(e),n=t.hi>>31,r=t.lo<<1^n,i=(t.hi<<1|t.lo>>>31)^n;return re(r,i,this.buf),this}uint64(e){let t=B.uEnc(e);return re(t.lo,t.hi,this.buf),this}},He=class{static{c(this,"te")}constructor(e,t){this.varint64=qe,this.uint32=We,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=t??new TextDecoder}tag(){let e=this.uint32(),t=e>>>3,n=e&7;if(t<=0||n<0||n>5)throw new Error("illegal tag: field no "+t+" wire type "+n);return[t,n]}skip(e){let t=this.pos;switch(e){case w.Varint:for(;this.buf[this.pos++]&128;);break;case w.Bit64:this.pos+=4;case w.Bit32:this.pos+=4;break;case w.LengthDelimited:let n=this.uint32();this.pos+=n;break;case w.StartGroup:let r;for(;(r=this.tag()[1])!==w.EndGroup;)this.skip(r);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(t,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return B.dec(...this.varint64())}uint64(){return B.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),n=-(e&1);return e=(e>>>1|(t&1)<<31)^n,t=t>>>1^n,B.dec(e,t)}bool(){let[e,t]=this.varint64();return e!==0||t!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return B.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return B.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}};function U(e,t,n){if(t===n)return!0;if(e==l.BYTES){if(!(t instanceof Uint8Array)||!(n instanceof Uint8Array)||t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==n[r])return!1;return!0}switch(e){case l.UINT64:case l.FIXED64:case l.INT64:case l.SFIXED64:case l.SINT64:return t==n}return!1}c(U,"$");function W(e,t){switch(e){case l.BOOL:return!1;case l.UINT64:case l.FIXED64:case l.INT64:case l.SFIXED64:case l.SINT64:return t==0?B.zero:"0";case l.DOUBLE:case l.FLOAT:return 0;case l.BYTES:return new Uint8Array(0);case l.STRING:return"";default:return 0}}c(W,"P");function ye(e,t){let n=t===void 0,r=w.Varint,i=t===0;switch(e){case l.STRING:i=n||!t.length,r=w.LengthDelimited;break;case l.BOOL:i=t===!1;break;case l.DOUBLE:r=w.Bit64;break;case l.FLOAT:r=w.Bit32;break;case l.INT64:i=n||t==0;break;case l.UINT64:i=n||t==0;break;case l.FIXED64:i=n||t==0,r=w.Bit64;break;case l.BYTES:i=n||!t.byteLength,r=w.LengthDelimited;break;case l.FIXED32:r=w.Bit32;break;case l.SFIXED32:r=w.Bit32;break;case l.SFIXED64:i=n||t==0,r=w.Bit64;break;case l.SINT64:i=n||t==0;break}let s=l[e].toLowerCase();return[r,s,n||i]}c(ye,"we");function Qe(e,t,n,r){let i;return{typeName:t,extendee:n,get field(){if(!i){let s=typeof r=="function"?r():r;s.name=t.split(".").pop(),s.jsonName=`[${t}]`,i=e.util.newFieldList([s]).list()[0]}return i},runtime:e}}c(Qe,"ve");function we(e){let t=e.field.localName,n=Object.create(null);return n[t]=Ze(e),[n,()=>n[t]]}c(we,"ne");function Ze(e){let t=e.field;if(t.repeated)return[];if(t.default!==void 0)return t.default;switch(t.kind){case"enum":return t.T.values[0].no;case"scalar":return W(t.T,t.L);case"message":let n=t.T,r=new n;return n.fieldWrapper?n.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}c(Ze,"yt");function et(e,t){if(!t.repeated&&(t.kind=="enum"||t.kind=="scalar")){for(let n=e.length-1;n>=0;--n)if(e[n].no==t.no)return[e[n]];return[]}return e.filter(n=>n.no===t.no)}c(et,"Me");function tt(e,t,n,r){return{syntax:e,json:t,bin:n,util:r,makeMessageType(i,s,a){return _e(this,i,s,a)},makeEnum:Re,makeEnumType:fe,getEnumType:Ce,makeExtension(i,s,a){return Qe(this,i,s,a)}}}c(tt,"Pe");function Ne(e,t){return t instanceof V||!e.fieldWrapper?t:e.fieldWrapper.wrapField(t)}c(Ne,"re");var Lt={"google.protobuf.DoubleValue":l.DOUBLE,"google.protobuf.FloatValue":l.FLOAT,"google.protobuf.Int64Value":l.INT64,"google.protobuf.UInt64Value":l.UINT64,"google.protobuf.Int32Value":l.INT32,"google.protobuf.UInt32Value":l.UINT32,"google.protobuf.BoolValue":l.BOOL,"google.protobuf.StringValue":l.STRING,"google.protobuf.BytesValue":l.BYTES},J=Symbol("@bufbuild/protobuf/unknown-fields"),ke={readUnknownFields:!0,readerFactory:c(e=>new He(e),"readerFactory")},Te={writeUnknownFields:!0,writerFactory:c(()=>new Ke,"writerFactory")};function nt(e){return e?Object.assign(Object.assign({},ke),e):ke}c(nt,"bt");function rt(e){return e?Object.assign(Object.assign({},Te),e):Te}c(rt,"wt");function it(){return{makeReadOptions:nt,makeWriteOptions:rt,listUnknownFields(e){var t;return(t=e[J])!==null&&t!==void 0?t:[]},discardUnknownFields(e){delete e[J]},writeUnknownFields(e,t){let n=e[J];if(n)for(let r of n)t.tag(r.no,r.wireType).raw(r.data)},onUnknownField(e,t,n,r){let i=e;Array.isArray(i[J])||(i[J]=[]),i[J].push({no:t,wireType:n,data:r})},readMessage(e,t,n,r,i){let s=e.getType(),a=i?t.len:t.pos+n,o,u;for(;t.pos<a&&([o,u]=t.tag(),u!=w.EndGroup);){let f=s.fields.find(o);if(!f){let d=t.skip(u);r.readUnknownFields&&this.onUnknownField(e,o,u,d);continue}Ie(e,t,f,u,r)}if(i&&(u!=w.EndGroup||o!==n))throw new Error("invalid end group tag")},readField:Ie}}c(it,"qe");function Ie(e,t,n,r,i){let{repeated:s,localName:a}=n;switch(n.oneof&&(e=e[n.oneof.localName],e.case!=a&&delete e.value,e.case=a,a="value"),n.kind){case"scalar":case"enum":let o=n.kind=="enum"?l.INT32:n.T,u=K;if(n.kind=="scalar"&&n.L>0&&(u=at),s){let p=e[a];if(r==w.LengthDelimited&&o!=l.STRING&&o!=l.BYTES){let h=t.uint32()+t.pos;for(;t.pos<h;)p.push(u(t,o))}else p.push(u(t,o))}else e[a]=u(t,o);break;case"message":let f=n.T;s?e[a].push(z(t,new f,i,n)):e[a]instanceof V?z(t,e[a],i,n):(e[a]=z(t,new f,i,n),f.fieldWrapper&&!n.oneof&&!n.repeated&&(e[a]=f.fieldWrapper.unwrapField(e[a])));break;case"map":let[d,m]=st(n,t,i);e[a][d]=m;break}}c(Ie,"Ve");function z(e,t,n,r){let i=t.getType().runtime.bin,s=r?.delimited;return i.readMessage(t,e,s?r?.no:e.uint32(),n,s),t}c(z,"se");function st(e,t,n){let r=t.uint32(),i=t.pos+r,s,a;for(;t.pos<i;){let[o]=t.tag();switch(o){case 1:s=K(t,e.K);break;case 2:switch(e.V.kind){case"scalar":a=K(t,e.V.T);break;case"enum":a=t.int32();break;case"message":a=z(t,new e.V.T,n,void 0);break}break}}if(s===void 0){let o=W(e.K,x.BIGINT);s=e.K==l.BOOL?o.toString():o}if(typeof s!="string"&&typeof s!="number"&&(s=s.toString()),a===void 0)switch(e.V.kind){case"scalar":a=W(e.V.T,x.BIGINT);break;case"enum":a=0;break;case"message":a=new e.V.T;break}return[s,a]}c(st,"kt");function at(e,t){let n=K(e,t);return typeof n=="bigint"?n.toString():n}c(at,"Tt");function K(e,t){switch(t){case l.STRING:return e.string();case l.BOOL:return e.bool();case l.DOUBLE:return e.double();case l.FLOAT:return e.float();case l.INT32:return e.int32();case l.INT64:return e.int64();case l.UINT64:return e.uint64();case l.FIXED64:return e.fixed64();case l.BYTES:return e.bytes();case l.FIXED32:return e.fixed32();case l.SFIXED32:return e.sfixed32();case l.SFIXED64:return e.sfixed64();case l.SINT64:return e.sint64();case l.UINT32:return e.uint32();case l.SINT32:return e.sint32()}}c(K,"oe");function ot(e,t,n,r,i){e.tag(n.no,w.LengthDelimited),e.fork();let s=r;switch(n.K){case l.INT32:case l.FIXED32:case l.UINT32:case l.SFIXED32:case l.SINT32:s=Number.parseInt(r);break;case l.BOOL:v(r=="true"||r=="false"),s=r=="true";break}switch(G(e,n.K,1,s,!0),n.V.kind){case"scalar":G(e,n.V.T,2,i,!0);break;case"enum":G(e,l.INT32,2,i,!0);break;case"message":e.tag(2,w.LengthDelimited).bytes(i.toBinary(t));break}e.join()}c(ot,"Xe");function ve(e,t,n,r){let i=Ne(n.T,r);n?.delimited?e.tag(n.no,w.StartGroup).raw(i.toBinary(t)).tag(n.no,w.EndGroup):e.tag(n.no,w.LengthDelimited).bytes(i.toBinary(t))}c(ve,"ke");function G(e,t,n,r,i){let[s,a,o]=ye(t,r);(!o||i)&&e.tag(n,s)[a](r)}c(G,"V");function ut(e,t,n,r){if(!r.length)return;e.tag(n,w.LengthDelimited).fork();let[,i]=ye(t);for(let s=0;s<r.length;s++)e[i](r[s]);e.join()}c(ut,"Ge");function lt(){return Object.assign(Object.assign({},it()),{writeField:Be,writeMessage(e,t,n){let r=e.getType();for(let i of r.fields.byNumber()){let s,a=i.localName;if(i.oneof){let o=e[i.oneof.localName];if(o.case!==a)continue;s=o.value}else s=e[a];Be(i,s,t,n)}return n.writeUnknownFields&&this.writeUnknownFields(e,t),t}})}c(lt,"je");function Be(e,t,n,r){let i=e.repeated;switch(e.kind){case"scalar":case"enum":let s=e.kind=="enum"?l.INT32:e.T;if(i)if(e.packed)ut(n,s,e.no,t);else for(let a of t)G(n,s,e.no,a,!0);else t!==void 0&&G(n,s,e.no,t,!!e.oneof||e.opt);break;case"message":if(i)for(let a of t)ve(n,r,e,a);else t!==void 0&&ve(n,r,e,t);break;case"map":for(let[a,o]of Object.entries(t))ot(n,r,e,a,o);break}}c(Be,"_e");var D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),H=[];for(let e=0;e<D.length;e++)H[D[e].charCodeAt(0)]=e;H[45]=D.indexOf("+"),H[95]=D.indexOf("/");var Fe={dec(e){let t=e.length*3/4;e[e.length-2]=="="?t-=2:e[e.length-1]=="="&&(t-=1);let n=new Uint8Array(t),r=0,i=0,s,a=0;for(let o=0;o<e.length;o++){if(s=H[e.charCodeAt(o)],s===void 0)switch(e[o]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:a=s,i=1;break;case 1:n[r++]=a<<2|(s&48)>>4,a=s,i=2;break;case 2:n[r++]=(a&15)<<4|(s&60)>>2,a=s,i=3;break;case 3:n[r++]=(a&3)<<6|s,i=0;break}}if(i==1)throw Error("invalid base64 string.");return n.subarray(0,r)},enc(e){let t="",n=0,r,i=0;for(let s=0;s<e.length;s++)switch(r=e[s],n){case 0:t+=D[r>>2],i=(r&3)<<4,n=1;break;case 1:t+=D[i|r>>4],i=(r&15)<<2,n=2;break;case 2:t+=D[i|r>>6],t+=D[r&63],n=0;break}return n&&(t+=D[i],t+="=",n==1&&(t+="=")),t}};function ct(e,t,n){Se(t,e);let r=t.runtime.bin.makeReadOptions(n),i=et(e.getType().runtime.bin.listUnknownFields(e),t.field),[s,a]=we(t);for(let o of i)t.runtime.bin.readField(s,r.readerFactory(o.data),t.field,o.wireType,r);return a()}c(ct,"Ye");function ft(e,t,n,r){Se(t,e);let i=t.runtime.bin.makeReadOptions(r),s=t.runtime.bin.makeWriteOptions(r);if(Ee(e,t)){let f=e.getType().runtime.bin.listUnknownFields(e).filter(d=>d.no!=t.field.no);e.getType().runtime.bin.discardUnknownFields(e);for(let d of f)e.getType().runtime.bin.onUnknownField(e,d.no,d.wireType,d.data)}let a=s.writerFactory(),o=t.field;!o.opt&&!o.repeated&&(o.kind=="enum"||o.kind=="scalar")&&(o=Object.assign(Object.assign({},t.field),{opt:!0})),t.runtime.bin.writeField(o,n,a,s);let u=i.readerFactory(a.finish());for(;u.pos<u.len;){let[f,d]=u.tag(),m=u.skip(d);e.getType().runtime.bin.onUnknownField(e,f,d,m)}}c(ft,"We");function Ee(e,t){let n=e.getType();return t.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(e).find(r=>r.no==t.field.no)}c(Ee,"Ne");function Se(e,t){v(e.extendee.typeName==t.getType().typeName,`extension ${e.typeName} can only be applied to message ${e.extendee.typeName}`)}c(Se,"Ke");var Oe={ignoreUnknownFields:!1},Ae={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function dt(e){return e?Object.assign(Object.assign({},Oe),e):Oe}c(dt,"Nt");function ht(e){return e?Object.assign(Object.assign({},Ae),e):Ae}c(ht,"xt");function mt(e,t){let n=t(pt,De);return{makeReadOptions:dt,makeWriteOptions:ht,readMessage(r,i,s,a){if(i==null||Array.isArray(i)||typeof i!="object")throw new Error(`cannot decode message ${r.typeName} from JSON: ${A(i)}`);a=a??new r;let o=new Map,u=s.typeRegistry;for(let[f,d]of Object.entries(i)){let m=r.fields.findJsonName(f);if(m){if(m.oneof){if(d===null&&m.kind=="scalar")continue;let p=o.get(m.oneof);if(p!==void 0)throw new Error(`cannot decode message ${r.typeName} from JSON: multiple keys for oneof "${m.oneof.name}" present: "${p}", "${f}"`);o.set(m.oneof,f)}$e(a,d,m,s,r,e)}else{let p=!1;if(u?.findExtension&&f.startsWith("[")&&f.endsWith("]")){let h=u.findExtension(f.substring(1,f.length-1));if(h&&h.extendee.typeName==r.typeName){p=!0;let[g,E]=we(h);$e(g,d,h.field,s,h,!0),ft(a,h,E(),s)}}if(!p&&!s.ignoreUnknownFields)throw new Error(`cannot decode message ${r.typeName} from JSON: key "${f}" is unknown`)}}return a},writeMessage(r,i){let s=r.getType(),a={},o;try{for(let f of s.fields.byMember()){let d;if(f.kind=="oneof"){let m=r[f.localName];if(m.value===void 0)continue;if(o=f.findField(m.case),!o)throw"oneof case not found: "+m.case;d=n(o,m.value,i)}else o=f,d=n(o,r[o.localName],i);d!==void 0&&(a[i.useProtoFieldName?o.name:o.jsonName]=d)}let u=i.typeRegistry;if(u?.findExtensionFor)for(let f of s.runtime.bin.listUnknownFields(r)){let d=u.findExtensionFor(s.typeName,f.no);if(d&&Ee(r,d)){let m=ct(r,d,i),p=n(d.field,m,i);p!==void 0&&(a[d.field.jsonName]=p)}}}catch(u){let f=o?`cannot encode field ${s.typeName}.${o.name} to JSON`:`cannot encode message ${s.typeName} to JSON`,d=u instanceof Error?u.message:String(u);throw new Error(f+(d.length>0?`: ${d}`:""))}return a},readScalar:c((r,i,s)=>P(r,i,s,e),"readScalar"),writeScalar:De,debug:A}}c(mt,"et");function A(e){if(e===null)return"null";switch(typeof e){case"object":return Array.isArray(e)?"array":"object";case"string":return e.length>100?"string":`"${e.split('"').join('\\"')}"`;default:return String(e)}}c(A,"D");function $e(e,t,n,r,i,s){let a=n.localName;if(n.oneof){if(t===null&&n.kind=="scalar")return;e=e[n.oneof.localName]={case:a},a="value"}if(n.repeated){if(t===null)return;if(!Array.isArray(t))throw new Error(`cannot decode field ${i.typeName}.${n.name} from JSON: ${A(t)}`);let o=e[a];for(let u of t){if(u===null)throw new Error(`cannot decode field ${i.typeName}.${n.name} from JSON: ${A(u)}`);let f;switch(n.kind){case"message":f=n.T.fromJson(u,r);break;case"enum":if(f=se(n.T,u,r.ignoreUnknownFields,!0),f===void 0)continue;break;case"scalar":try{f=P(n.T,u,n.L,!0)}catch(d){let m=`cannot decode field ${i.typeName}.${n.name} from JSON: ${A(u)}`;throw d instanceof Error&&d.message.length>0&&(m+=`: ${d.message}`),new Error(m)}break}o.push(f)}}else if(n.kind=="map"){if(t===null)return;if(typeof t!="object"||Array.isArray(t))throw new Error(`cannot decode field ${i.typeName}.${n.name} from JSON: ${A(t)}`);let o=e[a];for(let[u,f]of Object.entries(t)){if(f===null)throw new Error(`cannot decode field ${i.typeName}.${n.name} from JSON: map value null`);let d;switch(n.V.kind){case"message":d=n.V.T.fromJson(f,r);break;case"enum":if(d=se(n.V.T,f,r.ignoreUnknownFields,!0),d===void 0)continue;break;case"scalar":try{d=P(n.V.T,f,x.BIGINT,!0)}catch(m){let p=`cannot decode map value for field ${i.typeName}.${n.name} from JSON: ${A(t)}`;throw m instanceof Error&&m.message.length>0&&(p+=`: ${m.message}`),new Error(p)}break}try{o[P(n.K,n.K==l.BOOL?u=="true"?!0:u=="false"?!1:u:u,x.BIGINT,!0).toString()]=d}catch(m){let p=`cannot decode map key for field ${i.typeName}.${n.name} from JSON: ${A(t)}`;throw m instanceof Error&&m.message.length>0&&(p+=`: ${m.message}`),new Error(p)}}}else switch(n.kind){case"message":let o=n.T;if(t===null&&o.typeName!="google.protobuf.Value"){if(n.oneof)throw new Error(`cannot decode field ${i.typeName}.${n.name} from JSON: null is invalid for oneof field`);return}e[a]instanceof V?e[a].fromJson(t,r):(e[a]=o.fromJson(t,r),o.fieldWrapper&&!n.oneof&&(e[a]=o.fieldWrapper.unwrapField(e[a])));break;case"enum":let u=se(n.T,t,r.ignoreUnknownFields,s);u!==void 0&&(e[a]=u);break;case"scalar":try{e[a]=P(n.T,t,n.L,s)}catch(f){let d=`cannot decode field ${i.typeName}.${n.name} from JSON: ${A(t)}`;throw f instanceof Error&&f.message.length>0&&(d+=`: ${f.message}`),new Error(d)}break}}c($e,"He");function P(e,t,n,r){switch(e){case l.DOUBLE:case l.FLOAT:if(t===null)return r?0:void 0;if(t==="NaN")return Number.NaN;if(t==="Infinity")return Number.POSITIVE_INFINITY;if(t==="-Infinity")return Number.NEGATIVE_INFINITY;if(t===""||typeof t=="string"&&t.trim().length!==t.length||typeof t!="string"&&typeof t!="number")break;let i=Number(t);if(Number.isNaN(i)||!Number.isFinite(i))break;return e==l.FLOAT&&ue(i),i;case l.INT32:case l.FIXED32:case l.SFIXED32:case l.SINT32:case l.UINT32:if(t===null)return r?0:void 0;let s;if(typeof t=="number"?s=t:typeof t=="string"&&t.length>0&&t.trim().length===t.length&&(s=Number(t)),s===void 0)break;return e==l.UINT32?ne(s):Y(s),s;case l.INT64:case l.SFIXED64:case l.SINT64:if(t===null)return r?B.zero:void 0;if(typeof t!="number"&&typeof t!="string")break;let a=B.parse(t);return n?a.toString():a;case l.FIXED64:case l.UINT64:if(t===null)return r?B.zero:void 0;if(typeof t!="number"&&typeof t!="string")break;let o=B.uParse(t);return n?o.toString():o;case l.BOOL:if(t===null)return r?!1:void 0;if(typeof t!="boolean")break;return t;case l.STRING:if(t===null)return r?"":void 0;if(typeof t!="string")break;try{encodeURIComponent(t)}catch{throw new Error("invalid UTF8")}return t;case l.BYTES:if(t===null)return r?new Uint8Array(0):void 0;if(t==="")return new Uint8Array(0);if(typeof t!="string")break;return Fe.dec(t)}throw new Error}c(P,"Y");function se(e,t,n,r){if(t===null)return r?e.values[0].no:void 0;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":let i=e.findName(t);if(i||n)return i?.no;break}throw new Error(`cannot decode enum ${e.typeName} from JSON: ${A(t)}`)}c(se,"xe");function pt(e,t,n,r){var i;return t===void 0?t:!n&&e.values[0].no===t?void 0:r?t:e.typeName=="google.protobuf.NullValue"?null:(i=e.findNumber(t)?.name)!==null&&i!==void 0?i:t}c(pt,"It");function De(e,t,n){if(t!==void 0)switch(e){case l.INT32:case l.SFIXED32:case l.SINT32:case l.FIXED32:case l.UINT32:return v(typeof t=="number"),t!=0||n?t:void 0;case l.FLOAT:case l.DOUBLE:return v(typeof t=="number"),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t!==0||n?t:void 0;case l.STRING:return v(typeof t=="string"),t.length>0||n?t:void 0;case l.BOOL:return v(typeof t=="boolean"),t||n?t:void 0;case l.UINT64:case l.FIXED64:case l.INT64:case l.SFIXED64:case l.SINT64:return v(typeof t=="bigint"||typeof t=="string"||typeof t=="number"),n||t!=0?t.toString(10):void 0;case l.BYTES:return v(t instanceof Uint8Array),n||t.byteLength>0?Fe.enc(t):void 0}}c(De,"Ze");function bt(){return mt(!0,(e,t)=>function(n,r,i){if(n.kind=="map"){let s={};switch(n.V.kind){case"scalar":for(let[o,u]of Object.entries(r)){let f=t(n.V.T,u,!0);v(f!==void 0),s[o.toString()]=f}break;case"message":for(let[o,u]of Object.entries(r))s[o.toString()]=u.toJson(i);break;case"enum":let a=n.V.T;for(let[o,u]of Object.entries(r)){v(u===void 0||typeof u=="number");let f=e(a,u,!0,i.enumAsInteger);v(f!==void 0),s[o.toString()]=f}break}return i.emitDefaultValues||Object.keys(s).length>0?s:void 0}else if(n.repeated){let s=[];switch(n.kind){case"scalar":for(let a=0;a<r.length;a++)s.push(t(n.T,r[a],!0));break;case"enum":for(let a=0;a<r.length;a++)s.push(e(n.T,r[a],!0,i.enumAsInteger));break;case"message":for(let a=0;a<r.length;a++)s.push(r[a].toJson(i));break}return i.emitDefaultValues||s.length>0?s:void 0}else{if(r===void 0)return;switch(n.kind){case"scalar":return t(n.T,r,!!n.oneof||n.opt||i.emitDefaultValues);case"enum":return e(n.T,r,!!n.oneof||n.opt||i.emitDefaultValues,i.enumAsInteger);case"message":return Ne(n.T,r).toJson(i)}}})}c(bt,"tt");function gt(){return{setEnumType:ce,initPartial(e,t){if(e===void 0)return;let n=t.getType();for(let r of n.fields.byMember()){let i=r.localName,s=t,a=e;if(a[i]!==void 0)switch(r.kind){case"oneof":let o=a[i].case;if(o===void 0)continue;let u=r.findField(o),f=a[i].value;u&&u.kind=="message"&&!(f instanceof u.T)?f=new u.T(f):u&&u.kind==="scalar"&&u.T===l.BYTES&&(f=X(f)),s[i]={case:o,value:f};break;case"scalar":case"enum":let d=a[i];r.T===l.BYTES&&(d=r.repeated?d.map(X):X(d)),s[i]=d;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===l.BYTES)for(let[h,g]of Object.entries(a[i]))s[i][h]=X(g);else Object.assign(s[i],a[i]);break;case"message":let p=r.V.T;for(let h of Object.keys(a[i])){let g=a[i][h];p.fieldWrapper||(g=new p(g)),s[i][h]=g}break}break;case"message":let m=r.T;if(r.repeated)s[i]=a[i].map(p=>p instanceof m?p:new m(p));else if(a[i]!==void 0){let p=a[i];m.fieldWrapper?m.typeName==="google.protobuf.BytesValue"?s[i]=X(p):s[i]=p:s[i]=p instanceof m?p:new m(p)}break}}},equals(e,t,n){return t===n?!0:!t||!n?!1:e.fields.byMember().every(r=>{let i=t[r.localName],s=n[r.localName];if(r.repeated){if(i.length!==s.length)return!1;switch(r.kind){case"message":return i.every((a,o)=>r.T.equals(a,s[o]));case"scalar":return i.every((a,o)=>U(r.T,a,s[o]));case"enum":return i.every((a,o)=>U(l.INT32,a,s[o]))}throw new Error(`repeated cannot contain ${r.kind}`)}switch(r.kind){case"message":return r.T.equals(i,s);case"enum":return U(l.INT32,i,s);case"scalar":return U(r.T,i,s);case"oneof":if(i.case!==s.case)return!1;let a=r.findField(i.case);if(a===void 0)return!0;switch(a.kind){case"message":return a.T.equals(i.value,s.value);case"enum":return U(l.INT32,i.value,s.value);case"scalar":return U(a.T,i.value,s.value)}throw new Error(`oneof cannot contain ${a.kind}`);case"map":let o=Object.keys(i).concat(Object.keys(s));switch(r.V.kind){case"message":let u=r.V.T;return o.every(d=>u.equals(i[d],s[d]));case"enum":return o.every(d=>U(l.INT32,i[d],s[d]));case"scalar":let f=r.V.T;return o.every(d=>U(f,i[d],s[d]))}break}})},clone(e){let t=e.getType(),n=new t,r=n;for(let i of t.fields.byMember()){let s=e[i.localName],a;if(i.repeated)a=s.map(Q);else if(i.kind=="map"){a=r[i.localName];for(let[o,u]of Object.entries(s))a[o]=Q(u)}else i.kind=="oneof"?a=i.findField(s.case)?{case:s.case,value:Q(s.value)}:{case:void 0}:a=Q(s);r[i.localName]=a}return n}}}c(gt,"nt");function Q(e){if(e===void 0)return e;if(e instanceof V)return e.clone();if(e instanceof Uint8Array){let t=new Uint8Array(e.byteLength);return t.set(e),t}return e}c(Q,"ae");function X(e){return e instanceof Uint8Array?e:new Uint8Array(e)}c(X,"W");var yt=class{static{c(this,"ce")}constructor(e,t){this._fields=e,this._normalizer=t}findJsonName(e){if(!this.jsonNames){let t={};for(let n of this.list())t[n.jsonName]=t[n.name]=n;this.jsonNames=t}return this.jsonNames[e]}find(e){if(!this.numbers){let t={};for(let n of this.list())t[n.no]=n;this.numbers=t}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,t)=>e.no-t.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];let e=this.members,t;for(let n of this.list())n.oneof?n.oneof!==t&&(t=n.oneof,e.push(t)):e.push(n)}return this.members}};function Ue(e,t){let n=je(e);return t?n:vt(It(n))}c(Ue,"Ie");function wt(e){return Ue(e,!1)}c(wt,"rt");var Nt=je;function je(e){let t=!1,n=[];for(let r=0;r<e.length;r++){let i=e.charAt(r);switch(i){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(i),t=!1;break;default:t&&(t=!1,i=i.toUpperCase()),n.push(i);break}}return n.join("")}c(je,"ot");var kt=new Set(["constructor","toString","toJSON","valueOf"]),Tt=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),xe=c(e=>`${e}$`,"it"),It=c(e=>Tt.has(e)?xe(e):e,"Bt"),vt=c(e=>kt.has(e)?xe(e):e,"St"),Bt=class{static{c(this,"fe")}constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=wt(e)}addField(e){v(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let t=0;t<this.fields.length;t++)this._lookup[this.fields[t].localName]=this.fields[t]}return this._lookup[e]}},Z=tt("proto3",bt(),lt(),Object.assign(Object.assign({},gt()),{newFieldList(e){return new yt(e,Ft)},initFields(e){for(let t of e.getType().fields.byMember()){if(t.opt)continue;let n=t.localName,r=e;if(t.repeated){r[n]=[];continue}switch(t.kind){case"oneof":r[n]={case:void 0};break;case"enum":r[n]=0;break;case"map":r[n]={};break;case"scalar":r[n]=W(t.T,t.L);break;case"message":break}}}}));function Ft(e){var t,n,r,i;let s=[],a;for(let o of typeof e=="function"?e():e){let u=o;if(u.localName=Ue(o.name,o.oneof!==void 0),u.jsonName=(t=o.jsonName)!==null&&t!==void 0?t:Nt(o.name),u.repeated=(n=o.repeated)!==null&&n!==void 0?n:!1,o.kind=="scalar"&&(u.L=(r=o.L)!==null&&r!==void 0?r:x.BIGINT),o.oneof!==void 0){let f=typeof o.oneof=="string"?o.oneof:o.oneof.name;(!a||a.name!=f)&&(a=new Bt(f)),u.oneof=a,a.addField(u)}o.kind=="message"&&(u.delimited=!1),u.packed=(i=o.packed)!==null&&i!==void 0?i:o.kind=="enum"||o.kind=="scalar"&&o.T!=l.BYTES&&o.T!=l.STRING,s.push(u)}return s}c(Ft,"Ot");var Et=Z.makeMessageType("youtube.request.common.Request",()=>[{no:1,name:"context",kind:"message",T:St}]),St=Z.makeMessageType("youtube.request.common.Context",()=>[{no:9,name:"adSignalsInfo",kind:"message",T:Ot}]),Ot=Z.makeMessageType("youtube.request.common.AdSignalsInfo",()=>[{no:1,name:"params",kind:"message",T:At,repeated:!0}]),At=Z.makeMessageType("youtube.request.common.Params",()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:9}]),C=class{static{c(this,"X")}_times=new Map;name;isDebug;className;request;response;constructor(e,t,n){this.name=e??"",this.isDebug=n?.debug??!1,e&&this.debug(`${e} Start`),this.className=t??"",this.init()}static getInstance(e,t){let n="Surge";return typeof $loon<"u"?n="Loon":typeof $task<"u"&&(n="QuanX"),C.instances[n]||(C.instances[n]=C.classNames[n](e,n,t)),C.instances[n]}createProxy(e){return new Proxy(e,{get:this.getFn,set:this.setFn})}getFn(e,t,n){return e[t]}setFn(e,t,n,r){return e[t]=n,!0}getJSON(e,t={}){let n=this.getVal(e);return n?JSON.parse(n):t}setJSON(e,t){this.setVal(JSON.stringify(e),t)}msg(e=this.name,t="",n="",r){}debug(e){this.isDebug&&(typeof e=="object"&&(e=JSON.stringify(e)))}log(e){typeof e=="object"&&(e=JSON.stringify(e))}timeStart(e){this._times.set(e,Date.now())}timeEnd(e){if(this._times.has(e)){let t=this._times.get(e)??0,n=Date.now()-t;this.debug(`${e}: ${n}ms`),this._times.delete(e)}else this.debug(`Timer with label ${e} does not exist.`)}exit(){$done({})}reject(){$done()}decodeParams(e,t){return e}},R=C;q(R,"instances",{}),q(R,"classNames",{QuanX:c((e,t,n)=>new Le(e,t,n),"QuanX"),Surge:c((e,t,n)=>new oe(e,t,n),"Surge"),Loon:c((e,t,n)=>new $t(e,t,n),"Loon")});var ae=class extends R{static{c(this,"le")}getFn(e,t,n){let r=ae.clientAdapter[t]||t;return super.getFn(e,r,n)}setFn(e,t,n,r){let i=ae.clientAdapter[t]||t;return super.setFn(e,i,n,r)}init(){try{this.request=this.createProxy($request),this.response=this.createProxy($response)}catch(e){this.debug(e.toString())}}getVal(e){return $persistentStore.read(e)}setVal(e,t){$persistentStore.write(e,t)}msg(e=this.name,t="",n="",r){$notification.post(e,t,n,{url:r??""})}async fetch(e){return await new Promise((t,n)=>{let{method:r,body:i,bodyBytes:s,...a}=e,o=s??i,u=o instanceof Uint8Array;$httpClient[r.toLowerCase()]({...a,body:o,"binary-mode":u},(f,d,m)=>{f&&n(f);let p=u?"bodyBytes":"body";t({status:d.status||d.statusCode,headers:d.headers,[p]:m})})})}done(e){let t=e.response??e,n,r;t.bodyBytes?(n=t.bodyBytes,delete t.bodyBytes,r={...e},r.response?r.response.body=n:r.body=n):r=e,$done(r)}decodeParams(e,t){return typeof $argument=="string"&&!$argument.includes("{{{")&&Object.assign(e,JSON.parse($argument)),e}},oe=ae;q(oe,"clientAdapter",{bodyBytes:"body"});var j=class extends R{static{c(this,"R")}static transferBodyBytes(e,t){return e instanceof ArrayBuffer?t==="Uint8Array"?new Uint8Array(e):e:e instanceof Uint8Array&&t==="ArrayBuffer"?e.buffer.slice(e.byteOffset,e.byteLength+e.byteOffset):e}init(){try{this.request=this.createProxy($request),this.response=this.createProxy($response)}catch(e){this.debug(e.toString())}}getFn(e,t,n){let r=j.clientAdapter[t]||t,i=super.getFn(e,r,n);return t==="bodyBytes"&&(i=j.transferBodyBytes(i,"Uint8Array")),i}setFn(e,t,n,r){let i=j.clientAdapter[t]||t,s=n;return t==="bodyBytes"&&(s=j.transferBodyBytes(s,"Uint8Array")),super.setFn(e,i,s,r)}getVal(e){return $prefs.valueForKey(e)?.replace(/\0/g,"")}setVal(e,t){$prefs.setValueForKey(e,t)}msg(e=this.name,t="",n="",r){$notify(e,t,n,{"open-url":r??""})}async fetch(e){return await new Promise(t=>{let n={url:"",method:"GET"};for(let[r,i]of Object.entries(e))r==="id"?n.sessionIndex=i:r==="bodyBytes"?n.bodyBytes=j.transferBodyBytes(i,"ArrayBuffer"):n[r]=i;e.bodyBytes&&delete n.body,$task.fetch(n).then(r=>{let i={status:200,headers:{}};for(let[s,a]of Object.entries(r))s==="sessionIndex"?i.id=a:s==="bodyBytes"?i.bodyBytes=j.transferBodyBytes(a,"Uint8Array"):s==="statusCode"?i.status=a:i[s]=a;t(i)})})}done(e){let t=e.response??e,n={};for(let[r,i]of Object.entries(t))r==="status"?n.status=`HTTP/1.1 ${i}`:r==="bodyBytes"?n.bodyBytes=j.transferBodyBytes(i,"ArrayBuffer"):n[r]=i;$done(n)}},Le=j;q(Le,"clientAdapter",{id:"sessionIndex",status:"statusCode"});var $t=class extends oe{static{c(this,"Fe")}decodeParams(e,t){let n={};for(let[r,i]of Object.entries(e)){let s=t?.[r]??r,a=this.getVal(s);a&&(n[r]=this.transferType(i,a))}return Object.assign(e,n),e}transferType(e,t){return typeof e=="boolean"?t==="true":typeof e=="number"?Number(t):t}},I=R.getInstance("YouTube"),Dt=class{static{c(this,"de")}name;needProcess;needSave;message;whiteNo;blackNo;whiteEml;blackEml;msgType;argument;decoder=new TextDecoder("utf-8",{fatal:!1,ignoreBOM:!0});constructor(e,t){this.name=t,this.msgType=e,this.argument=this.decodeArgument(),I.isDebug=!!this.argument.debug,I.debug(this.name),Object.assign(this,I.getJSON("YouTubeAdvertiseInfo",{whiteNo:[],blackNo:[],whiteEml:[],blackEml:[]}))}decodeArgument(){let e={lyricLang:"\u6B4C\u8BCD\u7FFB\u8BD1\u8BED\u8A00",captionLang:"\u5B57\u5E55\u7FFB\u8BD1\u8BED\u8A00",blockUpload:"\u5C4F\u853D\u4E0A\u4F20\u6309\u94AE",blockImmersive:"\u5C4F\u853D\u9009\u6BB5\u6309\u94AE",debug:"\u542F\u52A8\u8C03\u8BD5\u6A21\u5F0F"},t={lyricLang:"zh-Hans",captionLang:"zh-Hans",blockUpload:!0,blockImmersive:!0,debug:!1};return I.decodeParams(t,e)}fromBinary(e){return e instanceof Uint8Array?(this.message=this.msgType.fromBinary(e),I.debug(`raw: ${Math.floor(e.length/1024)} kb`),this):(I.log("YouTube can not get binaryBody"),I.exit(),this)}async modify(){let e=this.pure();return e instanceof Promise?await e:e}toBinary(){return this.message.toBinary()}listUnknownFields(e){return e instanceof V?e.getType().runtime.bin.listUnknownFields(e):[]}save(){if(this.needSave){I.debug("Update Config");let e={whiteNo:this.whiteNo,blackNo:this.blackNo,whiteEml:this.whiteEml,blackEml:this.blackEml};I.setJSON(e,"YouTubeAdvertiseInfo")}}done(){if(this.save(),this.needProcess){I.timeStart("toBinary");let e=this.toBinary();I.timeEnd("toBinary"),I.debug(`modify: ${Math.floor(e.length/1024)} kb`),I.done({bodyBytes:e})}I.debug("use $done({})"),I.exit()}iterate(e={},t,n){let r=typeof e=="object"?[e]:[];for(;r.length;){let i=r.pop(),s=Object.keys(i);if(typeof t=="symbol"){for(let a of Object.getOwnPropertySymbols(i))if(a.description===t.description){n(i,r);break}}for(let a of s)a===t?n(i,r):typeof i[a]=="object"&&r.push(i[a])}}isAdvertise(e){let t=this.listUnknownFields(e)[0];return t?this.handleFieldNo(t):this.handleFieldEml(e)}handleFieldNo(e){let t=e.no;if(this.whiteNo.includes(t))return!1;if(this.blackNo.includes(t))return!0;let n=this.decoder.decode(e.data).includes("pagead");return n?this.blackNo.push(t):this.whiteNo.push(t),this.needSave=!0,n}handleFieldEml(e){let t=!1,n="";return this.iterate(e,"renderInfo",(r,i)=>{if(n=r.renderInfo.layoutRender.eml.split("|")[0],this.whiteEml.includes(n))t=!1;else if(this.blackEml.includes(n)||/shorts(?!_pivot_item)/.test(n))t=!0;else{let s=r?.videoInfo?.videoContext?.videoContent;if(s){let a=this.listUnknownFields(s)[0];t=this.decoder.decode(a.data).includes("pagead"),t?this.blackEml.push(n):this.whiteEml.push(n),this.needSave=!0}}i.length=0}),t}isShorts(e){let t=!1;return this.iterate(e,"eml",(n,r)=>{t=/shorts(?!_pivot_item)/.test(n.eml),r.length=0}),t}},Ut=class extends Dt{static{c(this,"z")}constructor(e=Et,t="Request"){super(e,t)}pure(){return this.message.context.adSignalsInfo.params.length=0,this.needProcess=!0,this}};async function jt(){let e=new Ut;await e.fromBinary(I.request.bodyBytes).pure(),e.done()}c(jt,"$t"),jt().catch(e=>{I.log(e.toString())}).finally(()=>{I.exit()})})();
