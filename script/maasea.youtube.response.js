// https://raw.githubusercontent.com/ElementRef/AboutConfig/main/script/maasea.youtube.response.js
var cs=Object.defineProperty;var c=(re,ae)=>cs(re,"name",{value:ae,configurable:!0});(()=>{var re=Object.defineProperty,ae=c((e,t,n)=>t in e?re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"qt"),z=c((e,t,n)=>(ae(e,typeof t!="symbol"?t+"":t,n),n),"K");(function(e){function t(){}c(t,"e");function n(){}c(n,"n");var s=String.fromCharCode,r={}.toString,a=r.call(e.SharedArrayBuffer),i=r(),o=e.Uint8Array,l=o||Array,d=o?ArrayBuffer:l,m=d.isView||function(b){return b&&"length"in b},p=r.call(d.prototype);d=n.prototype;var h=e.TextEncoder,g=new(o?Uint16Array:l)(32);t.prototype.decode=function(b){if(!m(b)){var F=r.call(b);if(F!==p&&F!==a&&F!==i)throw TypeError("Failed to execute 'decode' on 'TextDecoder': The provided value is not of type '(ArrayBuffer or ArrayBufferView)'");b=o?new l(b):b||[]}for(var v=F="",y=0,k=b.length|0,q=k-32|0,N,I,B=0,x=0,A,O=0,D=-1;y<k;){for(N=y<=q?32:k-y|0;O<N;y=y+1|0,O=O+1|0){switch(I=b[y]&255,I>>4){case 15:if(A=b[y=y+1|0]&255,A>>6!==2||247<I){y=y-1|0;break}B=(I&7)<<6|A&63,x=5,I=256;case 14:A=b[y=y+1|0]&255,B<<=6,B|=(I&15)<<6|A&63,x=A>>6===2?x+4|0:24,I=I+256&768;case 13:case 12:A=b[y=y+1|0]&255,B<<=6,B|=(I&31)<<6|A&63,x=x+7|0,y<k&&A>>6===2&&B>>x&&1114112>B?(I=B,B=B-65536|0,0<=B&&(D=(B>>10)+55296|0,I=(B&1023)+56320|0,31>O?(g[O]=D,O=O+1|0,D=-1):(A=D,D=I,I=A))):(I>>=8,y=y-I-1|0,I=65533),B=x=0,N=y<=q?32:k-y|0;default:g[O]=I;continue;case 11:case 10:case 9:case 8:}g[O]=65533}if(v+=s(g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],g[8],g[9],g[10],g[11],g[12],g[13],g[14],g[15],g[16],g[17],g[18],g[19],g[20],g[21],g[22],g[23],g[24],g[25],g[26],g[27],g[28],g[29],g[30],g[31]),32>O&&(v=v.slice(0,O-32|0)),y<k){if(g[0]=D,O=~D>>>31,D=-1,v.length<F.length)continue}else D!==-1&&(v+=s(D));F+=v,v=""}return F},d.encode=function(b){b=b===void 0?"":""+b;var F=b.length|0,v=new l((F<<1)+8|0),y,k=0,q=!o;for(y=0;y<F;y=y+1|0,k=k+1|0){var N=b.charCodeAt(y)|0;if(127>=N)v[k]=N;else{if(2047>=N)v[k]=192|N>>6;else{e:{if(55296<=N)if(56319>=N){var I=b.charCodeAt(y=y+1|0)|0;if(56320<=I&&57343>=I){if(N=(N<<10)+I-56613888|0,65535<N){v[k]=240|N>>18,v[k=k+1|0]=128|N>>12&63,v[k=k+1|0]=128|N>>6&63,v[k=k+1|0]=128|N&63;continue}break e}N=65533}else 57343>=N&&(N=65533);!q&&y<<1<k&&y<<1<(k-7|0)&&(q=!0,I=new l(3*F),I.set(v),v=I)}v[k]=224|N>>12,v[k=k+1|0]=128|N>>6&63}v[k=k+1|0]=128|N&63}}return o?v.subarray(0,k):v.slice(0,k)},h||(e.TextDecoder=t,e.TextEncoder=n)})(globalThis);function S(e,t){if(!e)throw new Error(t)}c(S,"I");var it=34028234663852886e22,ot=-34028234663852886e22,lt=4294967295,ut=2147483647,ct=-2147483648;function K(e){if(typeof e!="number")throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>ut||e<ct)throw new Error("invalid int 32: "+e)}c(K,"_");function ie(e){if(typeof e!="number")throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>lt||e<0)throw new Error("invalid uint 32: "+e)}c(ie,"z");function fe(e){if(typeof e!="number")throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>it||e<ot))throw new Error("invalid float 32: "+e)}c(fe,"te");var ge=Symbol("@bufbuild/protobuf/enum-type");function dt(e){let t=e[ge];return S(t,"missing enum type on enum object"),t}c(dt,"Xe");function pe(e,t,n,s){e[ge]=he(t,n.map(r=>({no:r.no,name:r.name,localName:e[r.no]})),s)}c(pe,"Ne");function he(e,t,n){let s=Object.create(null),r=Object.create(null),a=[];for(let i of t){let o=ye(i);a.push(o),s[i.name]=o,r[i.no]=o}return{typeName:e,values:a,findName(i){return s[i]},findNumber(i){return r[i]}}}c(he,"Se");function mt(e,t,n){let s={};for(let r of t){let a=ye(r);s[a.localName]=a.no,s[a.no]=a.localName}return pe(s,e,t,n),s}c(mt,"Ye");function ye(e){return"localName"in e?e:Object.assign(Object.assign({},e),{localName:e.name})}c(ye,"je");var P=class{static{c(this,"E")}equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,t){let n=this.getType(),s=n.runtime.bin,r=s.makeReadOptions(t);return s.readMessage(this,r.readerFactory(e),e.byteLength,r),this}fromJson(e,t){let n=this.getType(),s=n.runtime.json,r=s.makeReadOptions(t);return s.readMessage(n,e,r,this),this}fromJsonString(e,t){let n;try{n=JSON.parse(e)}catch(s){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${s instanceof Error?s.message:String(s)}`)}return this.fromJson(n,t)}toBinary(e){let t=this.getType(),n=t.runtime.bin,s=n.makeWriteOptions(e),r=s.writerFactory();return n.writeMessage(this,r,s),r.finish()}toJson(e){let t=this.getType(),n=t.runtime.json,s=n.makeWriteOptions(e);return n.writeMessage(this,s)}toJsonString(e){var t;let n=this.toJson(e);return JSON.stringify(n,null,(t=e?.prettySpaces)!==null&&t!==void 0?t:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}};function ft(e,t,n,s){var r;let a=(r=s?.localName)!==null&&r!==void 0?r:t.substring(t.lastIndexOf(".")+1),i={[a]:function(o){e.util.initFields(this),e.util.initPartial(o,this)}}[a];return Object.setPrototypeOf(i.prototype,new P),Object.assign(i,{runtime:e,typeName:t,fields:e.util.newFieldList(n),fromBinary(o,l){return new i().fromBinary(o,l)},fromJson(o,l){return new i().fromJson(o,l)},fromJsonString(o,l){return new i().fromJsonString(o,l)},equals(o,l){return e.util.equals(i,o,l)}}),i}c(ft,"Ke");var u;(function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"})(u||(u={}));var L;(function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING"})(L||(L={}));function gt(){let e=0,t=0;for(let s=0;s<28;s+=7){let r=this.buf[this.pos++];if(e|=(r&127)<<s,!(r&128))return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(n&15)<<28,t=(n&112)>>4,!(n&128))return this.assertBounds(),[e,t];for(let s=3;s<=31;s+=7){let r=this.buf[this.pos++];if(t|=(r&127)<<s,!(r&128))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}c(gt,"He");function oe(e,t,n){for(let a=0;a<28;a=a+7){let i=e>>>a,o=!(!(i>>>7)&&t==0),l=(o?i|128:i)&255;if(n.push(l),!o)return}let s=e>>>28&15|(t&7)<<4,r=!!(t>>3);if(n.push((r?s|128:s)&255),!!r){for(let a=3;a<31;a=a+7){let i=t>>>a,o=!!(i>>>7),l=(o?i|128:i)&255;if(n.push(l),!o)return}n.push(t>>>31&1)}}c(oe,"re");var H=4294967296;function be(e){let t=e[0]==="-";t&&(e=e.slice(1));let n=1e6,s=0,r=0;function a(i,o){let l=Number(e.slice(i,o));r*=n,s=s*n+l,s>=H&&(r=r+(s/H|0),s=s%H)}return c(a,"o"),a(-24,-18),a(-18,-12),a(-12,-6),a(-6),t?Te(s,r):le(s,r)}c(be,"Ee");function pt(e,t){let n=le(e,t),s=n.hi&2147483648;s&&(n=Te(n.lo,n.hi));let r=ke(n.lo,n.hi);return s?"-"+r:r}c(pt,"Qe");function ke(e,t){if({lo:e,hi:t}=ht(e,t),t<=2097151)return String(H*t+e);let n=e&16777215,s=(e>>>24|t<<8)&16777215,r=t>>16&65535,a=n+s*6777216+r*6710656,i=s+r*8147497,o=r*2,l=1e7;return a>=l&&(i+=Math.floor(a/l),a%=l),i>=l&&(o+=Math.floor(i/l),i%=l),o.toString()+we(i)+we(a)}c(ke,"Fe");function ht(e,t){return{lo:e>>>0,hi:t>>>0}}c(ht,"zt");function le(e,t){return{lo:e|0,hi:t|0}}c(le,"Re");function Te(e,t){return t=~t,e?e=~e+1:t+=1,le(e,t)}c(Te,"Ze");var we=c(e=>{let t=String(e);return"0000000".slice(t.length)+t},"ze");function Ie(e,t){if(e>=0){for(;e>127;)t.push(e&127|128),e=e>>>7;t.push(e)}else{for(let n=0;n<9;n++)t.push(e&127|128),e=e>>7;t.push(1)}}c(Ie,"Be");function yt(){let e=this.buf[this.pos++],t=e&127;if(!(e&128))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<7,!(e&128))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<14,!(e&128))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<21,!(e&128))return this.assertBounds(),t;e=this.buf[this.pos++],t|=(e&15)<<28;for(let n=5;e&128&&n<10;n++)e=this.buf[this.pos++];if(e&128)throw new Error("invalid varint");return this.assertBounds(),t>>>0}c(yt,"et");function bt(){let e=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof e.getBigInt64=="function"&&typeof e.getBigUint64=="function"&&typeof e.setBigInt64=="function"&&typeof e.setBigUint64=="function"&&(typeof process!="object"||typeof process.env!="object"||process.env.BUF_BIGINT_DISABLE!=="1")){let s=BigInt("-9223372036854775808"),r=BigInt("9223372036854775807"),a=BigInt("0"),i=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(o){let l=typeof o=="bigint"?o:BigInt(o);if(l>r||l<s)throw new Error(`int64 invalid: ${o}`);return l},uParse(o){let l=typeof o=="bigint"?o:BigInt(o);if(l>i||l<a)throw new Error(`uint64 invalid: ${o}`);return l},enc(o){return e.setBigInt64(0,this.parse(o),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(o){return e.setBigInt64(0,this.uParse(o),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec(o,l){return e.setInt32(0,o,!0),e.setInt32(4,l,!0),e.getBigInt64(0,!0)},uDec(o,l){return e.setInt32(0,o,!0),e.setInt32(4,l,!0),e.getBigUint64(0,!0)}}}let t=c(s=>S(/^-?[0-9]+$/.test(s),`int64 invalid: ${s}`),"n"),n=c(s=>S(/^[0-9]+$/.test(s),`uint64 invalid: ${s}`),"r");return{zero:"0",supported:!1,parse(s){return typeof s!="string"&&(s=s.toString()),t(s),s},uParse(s){return typeof s!="string"&&(s=s.toString()),n(s),s},enc(s){return typeof s!="string"&&(s=s.toString()),t(s),be(s)},uEnc(s){return typeof s!="string"&&(s=s.toString()),n(s),be(s)},dec(s,r){return pt(s,r)},uDec(s,r){return ke(s,r)}}}c(bt,"Ht");var E=bt(),T;(function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"})(T||(T={}));var kt=class{static{c(this,"se")}constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let s=0;s<this.chunks.length;s++)e+=this.chunks[s].length;let t=new Uint8Array(e),n=0;for(let s=0;s<this.chunks.length;s++)t.set(this.chunks[s],n),n+=this.chunks[s].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(ie(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return K(e),Ie(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){fe(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){ie(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){K(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return K(e),e=(e<<1^e>>31)>>>0,Ie(e,this.buf),this}sfixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),s=E.enc(e);return n.setInt32(0,s.lo,!0),n.setInt32(4,s.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),s=E.uEnc(e);return n.setInt32(0,s.lo,!0),n.setInt32(4,s.hi,!0),this.raw(t)}int64(e){let t=E.enc(e);return oe(t.lo,t.hi,this.buf),this}sint64(e){let t=E.enc(e),n=t.hi>>31,s=t.lo<<1^n,r=(t.hi<<1|t.lo>>>31)^n;return oe(s,r,this.buf),this}uint64(e){let t=E.uEnc(e);return oe(t.lo,t.hi,this.buf),this}},Tt=class{static{c(this,"oe")}constructor(e,t){this.varint64=gt,this.uint32=yt,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=t??new TextDecoder}tag(){let e=this.uint32(),t=e>>>3,n=e&7;if(t<=0||n<0||n>5)throw new Error("illegal tag: field no "+t+" wire type "+n);return[t,n]}skip(e){let t=this.pos;switch(e){case T.Varint:for(;this.buf[this.pos++]&128;);break;case T.Bit64:this.pos+=4;case T.Bit32:this.pos+=4;break;case T.LengthDelimited:let n=this.uint32();this.pos+=n;break;case T.StartGroup:let s;for(;(s=this.tag()[1])!==T.EndGroup;)this.skip(s);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(t,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return E.dec(...this.varint64())}uint64(){return E.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),n=-(e&1);return e=(e>>>1|(t&1)<<31)^n,t=t>>>1^n,E.dec(e,t)}bool(){let[e,t]=this.varint64();return e!==0||t!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return E.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return E.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}};function R(e,t,n){if(t===n)return!0;if(e==u.BYTES){if(!(t instanceof Uint8Array)||!(n instanceof Uint8Array)||t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(t[s]!==n[s])return!1;return!0}switch(e){case u.UINT64:case u.FIXED64:case u.INT64:case u.SFIXED64:case u.SINT64:return t==n}return!1}c(R,"U");function Q(e,t){switch(e){case u.BOOL:return!1;case u.UINT64:case u.FIXED64:case u.INT64:case u.SFIXED64:case u.SINT64:return t==0?E.zero:"0";case u.DOUBLE:case u.FLOAT:return 0;case u.BYTES:return new Uint8Array(0);case u.STRING:return"";default:return 0}}c(Q,"G");function Ne(e,t){let n=t===void 0,s=T.Varint,r=t===0;switch(e){case u.STRING:r=n||!t.length,s=T.LengthDelimited;break;case u.BOOL:r=t===!1;break;case u.DOUBLE:s=T.Bit64;break;case u.FLOAT:s=T.Bit32;break;case u.INT64:r=n||t==0;break;case u.UINT64:r=n||t==0;break;case u.FIXED64:r=n||t==0,s=T.Bit64;break;case u.BYTES:r=n||!t.byteLength,s=T.LengthDelimited;break;case u.FIXED32:s=T.Bit32;break;case u.SFIXED32:s=T.Bit32;break;case u.SFIXED64:r=n||t==0,s=T.Bit64;break;case u.SINT64:r=n||t==0;break}let a=u[e].toLowerCase();return[s,a,n||r]}c(Ne,"Oe");function wt(e,t,n,s){let r;return{typeName:t,extendee:n,get field(){if(!r){let a=typeof s=="function"?s():s;a.name=t.split(".").pop(),a.jsonName=`[${t}]`,r=e.util.newFieldList([a]).list()[0]}return r},runtime:e}}c(wt,"tt");function ve(e){let t=e.field.localName,n=Object.create(null);return n[t]=It(e),[n,()=>n[t]]}c(ve,"ie");function It(e){let t=e.field;if(t.repeated)return[];if(t.default!==void 0)return t.default;switch(t.kind){case"enum":return t.T.values[0].no;case"scalar":return Q(t.T,t.L);case"message":let n=t.T,s=new n;return n.fieldWrapper?n.fieldWrapper.unwrapField(s):s;case"map":throw"map fields are not allowed to be extensions"}}c(It,"Qt");function Nt(e,t){if(!t.repeated&&(t.kind=="enum"||t.kind=="scalar")){for(let n=e.length-1;n>=0;--n)if(e[n].no==t.no)return[e[n]];return[]}return e.filter(n=>n.no===t.no)}c(Nt,"nt");function vt(e,t,n,s){return{syntax:e,json:t,bin:n,util:s,makeMessageType(r,a,i){return ft(this,r,a,i)},makeEnum:mt,makeEnumType:he,getEnumType:dt,makeExtension(r,a,i){return wt(this,r,a,i)}}}c(vt,"rt");function Se(e,t){return t instanceof P||!e.fieldWrapper?t:e.fieldWrapper.wrapField(t)}c(Se,"ae");var ds={"google.protobuf.DoubleValue":u.DOUBLE,"google.protobuf.FloatValue":u.FLOAT,"google.protobuf.Int64Value":u.INT64,"google.protobuf.UInt64Value":u.UINT64,"google.protobuf.Int32Value":u.INT32,"google.protobuf.UInt32Value":u.UINT32,"google.protobuf.BoolValue":u.BOOL,"google.protobuf.StringValue":u.STRING,"google.protobuf.BytesValue":u.BYTES},j=Symbol("@bufbuild/protobuf/unknown-fields"),Ee={readUnknownFields:!0,readerFactory:c(e=>new Tt(e),"readerFactory")},Be={writeUnknownFields:!0,writerFactory:c(()=>new kt,"writerFactory")};function St(e){return e?Object.assign(Object.assign({},Ee),e):Ee}c(St,"Zt");function Et(e){return e?Object.assign(Object.assign({},Be),e):Be}c(Et,"en");function Bt(){return{makeReadOptions:St,makeWriteOptions:Et,listUnknownFields(e){var t;return(t=e[j])!==null&&t!==void 0?t:[]},discardUnknownFields(e){delete e[j]},writeUnknownFields(e,t){let n=e[j];if(n)for(let s of n)t.tag(s.no,s.wireType).raw(s.data)},onUnknownField(e,t,n,s){let r=e;Array.isArray(r[j])||(r[j]=[]),r[j].push({no:t,wireType:n,data:s})},readMessage(e,t,n,s,r){let a=e.getType(),i=r?t.len:t.pos+n,o,l;for(;t.pos<i&&([o,l]=t.tag(),l!=T.EndGroup);){let d=a.fields.find(o);if(!d){let m=t.skip(l);s.readUnknownFields&&this.onUnknownField(e,o,l,m);continue}Fe(e,t,d,l,s)}if(r&&(l!=T.EndGroup||o!==n))throw new Error("invalid end group tag")},readField:Fe}}c(Bt,"at");function Fe(e,t,n,s,r){let{repeated:a,localName:i}=n;switch(n.oneof&&(e=e[n.oneof.localName],e.case!=i&&delete e.value,e.case=i,i="value"),n.kind){case"scalar":case"enum":let o=n.kind=="enum"?u.INT32:n.T,l=ee;if(n.kind=="scalar"&&n.L>0&&(l=Ot),a){let h=e[i];if(s==T.LengthDelimited&&o!=u.STRING&&o!=u.BYTES){let g=t.uint32()+t.pos;for(;t.pos<g;)h.push(l(t,o))}else h.push(l(t,o))}else e[i]=l(t,o);break;case"message":let d=n.T;a?e[i].push(Z(t,new d,r,n)):e[i]instanceof P?Z(t,e[i],r,n):(e[i]=Z(t,new d,r,n),d.fieldWrapper&&!n.oneof&&!n.repeated&&(e[i]=d.fieldWrapper.unwrapField(e[i])));break;case"map":let[m,p]=Ft(n,t,r);e[i][m]=p;break}}c(Fe,"it");function Z(e,t,n,s){let r=t.getType().runtime.bin,a=s?.delimited;return r.readMessage(t,e,a?s?.no:e.uint32(),n,a),t}c(Z,"ce");function Ft(e,t,n){let s=t.uint32(),r=t.pos+s,a,i;for(;t.pos<r;){let[o]=t.tag();switch(o){case 1:a=ee(t,e.K);break;case 2:switch(e.V.kind){case"scalar":i=ee(t,e.V.T);break;case"enum":i=t.int32();break;case"message":i=Z(t,new e.V.T,n,void 0);break}break}}if(a===void 0){let o=Q(e.K,L.BIGINT);a=e.K==u.BOOL?o.toString():o}if(typeof a!="string"&&typeof a!="number"&&(a=a.toString()),i===void 0)switch(e.V.kind){case"scalar":i=Q(e.V.T,L.BIGINT);break;case"enum":i=0;break;case"message":i=new e.V.T;break}return[a,i]}c(Ft,"tn");function Ot(e,t){let n=ee(e,t);return typeof n=="bigint"?n.toString():n}c(Ot,"nn");function ee(e,t){switch(t){case u.STRING:return e.string();case u.BOOL:return e.bool();case u.DOUBLE:return e.double();case u.FLOAT:return e.float();case u.INT32:return e.int32();case u.INT64:return e.int64();case u.UINT64:return e.uint64();case u.FIXED64:return e.fixed64();case u.BYTES:return e.bytes();case u.FIXED32:return e.fixed32();case u.SFIXED32:return e.sfixed32();case u.SFIXED64:return e.sfixed64();case u.SINT64:return e.sint64();case u.UINT32:return e.uint32();case u.SINT32:return e.sint32()}}c(ee,"ue");function At(e,t,n,s,r){e.tag(n.no,T.LengthDelimited),e.fork();let a=s;switch(n.K){case u.INT32:case u.FIXED32:case u.UINT32:case u.SFIXED32:case u.SINT32:a=Number.parseInt(s);break;case u.BOOL:S(s=="true"||s=="false"),a=s=="true";break}switch(G(e,n.K,1,a,!0),n.V.kind){case"scalar":G(e,n.V.T,2,r,!0);break;case"enum":G(e,u.INT32,2,r,!0);break;case"message":e.tag(2,T.LengthDelimited).bytes(r.toBinary(t));break}e.join()}c(At,"ct");function Oe(e,t,n,s){let r=Se(n.T,s);n?.delimited?e.tag(n.no,T.StartGroup).raw(r.toBinary(t)).tag(n.no,T.EndGroup):e.tag(n.no,T.LengthDelimited).bytes(r.toBinary(t))}c(Oe,"Ce");function G(e,t,n,s,r){let[a,i,o]=Ne(t,s);(!o||r)&&e.tag(n,a)[i](s)}c(G,"W");function Ut(e,t,n,s){if(!s.length)return;e.tag(n,T.LengthDelimited).fork();let[,r]=Ne(t);for(let a=0;a<s.length;a++)e[r](s[a]);e.join()}c(Ut,"ut");function Dt(){return Object.assign(Object.assign({},Bt()),{writeField:Ae,writeMessage(e,t,n){let s=e.getType();for(let r of s.fields.byNumber()){let a,i=r.localName;if(r.oneof){let o=e[r.oneof.localName];if(o.case!==i)continue;a=o.value}else a=e[i];Ae(r,a,t,n)}return n.writeUnknownFields&&this.writeUnknownFields(e,t),t}})}c(Dt,"mt");function Ae(e,t,n,s){let r=e.repeated;switch(e.kind){case"scalar":case"enum":let a=e.kind=="enum"?u.INT32:e.T;if(r)if(e.packed)Ut(n,a,e.no,t);else for(let i of t)G(n,a,e.no,i,!0);else t!==void 0&&G(n,a,e.no,t,!!e.oneof||e.opt);break;case"message":if(r)for(let i of t)Oe(n,s,e,i);else t!==void 0&&Oe(n,s,e,t);break;case"map":for(let[i,o]of Object.entries(t))At(n,s,e,i,o);break}}c(Ae,"ft");var M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),te=[];for(let e=0;e<M.length;e++)te[M[e].charCodeAt(0)]=e;te[45]=M.indexOf("+"),te[95]=M.indexOf("/");var Ue={dec(e){let t=e.length*3/4;e[e.length-2]=="="?t-=2:e[e.length-1]=="="&&(t-=1);let n=new Uint8Array(t),s=0,r=0,a,i=0;for(let o=0;o<e.length;o++){if(a=te[e.charCodeAt(o)],a===void 0)switch(e[o]){case"=":r=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(r){case 0:i=a,r=1;break;case 1:n[s++]=i<<2|(a&48)>>4,i=a,r=2;break;case 2:n[s++]=(i&15)<<4|(a&60)>>2,i=a,r=3;break;case 3:n[s++]=(i&3)<<6|a,r=0;break}}if(r==1)throw Error("invalid base64 string.");return n.subarray(0,s)},enc(e){let t="",n=0,s,r=0;for(let a=0;a<e.length;a++)switch(s=e[a],n){case 0:t+=M[s>>2],r=(s&3)<<4,n=1;break;case 1:t+=M[r|s>>4],r=(s&15)<<2,n=2;break;case 2:t+=M[r|s>>6],t+=M[s&63],n=0;break}return n&&(t+=M[r],t+="=",n==1&&(t+="=")),t}};function Mt(e,t,n){Me(t,e);let s=t.runtime.bin.makeReadOptions(n),r=Nt(e.getType().runtime.bin.listUnknownFields(e),t.field),[a,i]=ve(t);for(let o of r)t.runtime.bin.readField(a,s.readerFactory(o.data),t.field,o.wireType,s);return i()}c(Mt,"dt");function Rt(e,t,n,s){Me(t,e);let r=t.runtime.bin.makeReadOptions(s),a=t.runtime.bin.makeWriteOptions(s);if(De(e,t)){let d=e.getType().runtime.bin.listUnknownFields(e).filter(m=>m.no!=t.field.no);e.getType().runtime.bin.discardUnknownFields(e);for(let m of d)e.getType().runtime.bin.onUnknownField(e,m.no,m.wireType,m.data)}let i=a.writerFactory(),o=t.field;!o.opt&&!o.repeated&&(o.kind=="enum"||o.kind=="scalar")&&(o=Object.assign(Object.assign({},t.field),{opt:!0})),t.runtime.bin.writeField(o,n,i,a);let l=r.readerFactory(i.finish());for(;l.pos<l.len;){let[d,m]=l.tag(),p=l.skip(m);e.getType().runtime.bin.onUnknownField(e,d,m,p)}}c(Rt,"lt");function De(e,t){let n=e.getType();return t.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(e).find(s=>s.no==t.field.no)}c(De,"Pe");function Me(e,t){S(e.extendee.typeName==t.getType().typeName,`extension ${e.typeName} can only be applied to message ${e.extendee.typeName}`)}c(Me,"pt");var Re={ignoreUnknownFields:!1},Ce={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function Ct(e){return e?Object.assign(Object.assign({},Re),e):Re}c(Ct,"rn");function $t(e){return e?Object.assign(Object.assign({},Ce),e):Ce}c($t,"sn");function Lt(e,t){let n=t(xt,Le);return{makeReadOptions:Ct,makeWriteOptions:$t,readMessage(s,r,a,i){if(r==null||Array.isArray(r)||typeof r!="object")throw new Error(`cannot decode message ${s.typeName} from JSON: ${U(r)}`);i=i??new s;let o=new Map,l=a.typeRegistry;for(let[d,m]of Object.entries(r)){let p=s.fields.findJsonName(d);if(p){if(p.oneof){if(m===null&&p.kind=="scalar")continue;let h=o.get(p.oneof);if(h!==void 0)throw new Error(`cannot decode message ${s.typeName} from JSON: multiple keys for oneof "${p.oneof.name}" present: "${h}", "${d}"`);o.set(p.oneof,d)}$e(i,m,p,a,s,e)}else{let h=!1;if(l?.findExtension&&d.startsWith("[")&&d.endsWith("]")){let g=l.findExtension(d.substring(1,d.length-1));if(g&&g.extendee.typeName==s.typeName){h=!0;let[b,F]=ve(g);$e(b,m,g.field,a,g,!0),Rt(i,g,F(),a)}}if(!h&&!a.ignoreUnknownFields)throw new Error(`cannot decode message ${s.typeName} from JSON: key "${d}" is unknown`)}}return i},writeMessage(s,r){let a=s.getType(),i={},o;try{for(let d of a.fields.byMember()){let m;if(d.kind=="oneof"){let p=s[d.localName];if(p.value===void 0)continue;if(o=d.findField(p.case),!o)throw"oneof case not found: "+p.case;m=n(o,p.value,r)}else o=d,m=n(o,s[o.localName],r);m!==void 0&&(i[r.useProtoFieldName?o.name:o.jsonName]=m)}let l=r.typeRegistry;if(l?.findExtensionFor)for(let d of a.runtime.bin.listUnknownFields(s)){let m=l.findExtensionFor(a.typeName,d.no);if(m&&De(s,m)){let p=Mt(s,m,r),h=n(m.field,p,r);h!==void 0&&(i[m.field.jsonName]=h)}}}catch(l){let d=o?`cannot encode field ${a.typeName}.${o.name} to JSON`:`cannot encode message ${a.typeName} to JSON`,m=l instanceof Error?l.message:String(l);throw new Error(d+(m.length>0?`: ${m}`:""))}return i},readScalar:c((s,r,a)=>J(s,r,a,e),"readScalar"),writeScalar:Le,debug:U}}c(Lt,"kt");function U(e){if(e===null)return"null";switch(typeof e){case"object":return Array.isArray(e)?"array":"object";case"string":return e.length>100?"string":`"${e.split('"').join('\\"')}"`;default:return String(e)}}c(U,"P");function $e(e,t,n,s,r,a){let i=n.localName;if(n.oneof){if(t===null&&n.kind=="scalar")return;e=e[n.oneof.localName]={case:i},i="value"}if(n.repeated){if(t===null)return;if(!Array.isArray(t))throw new Error(`cannot decode field ${r.typeName}.${n.name} from JSON: ${U(t)}`);let o=e[i];for(let l of t){if(l===null)throw new Error(`cannot decode field ${r.typeName}.${n.name} from JSON: ${U(l)}`);let d;switch(n.kind){case"message":d=n.T.fromJson(l,s);break;case"enum":if(d=ue(n.T,l,s.ignoreUnknownFields,!0),d===void 0)continue;break;case"scalar":try{d=J(n.T,l,n.L,!0)}catch(m){let p=`cannot decode field ${r.typeName}.${n.name} from JSON: ${U(l)}`;throw m instanceof Error&&m.message.length>0&&(p+=`: ${m.message}`),new Error(p)}break}o.push(d)}}else if(n.kind=="map"){if(t===null)return;if(typeof t!="object"||Array.isArray(t))throw new Error(`cannot decode field ${r.typeName}.${n.name} from JSON: ${U(t)}`);let o=e[i];for(let[l,d]of Object.entries(t)){if(d===null)throw new Error(`cannot decode field ${r.typeName}.${n.name} from JSON: map value null`);let m;switch(n.V.kind){case"message":m=n.V.T.fromJson(d,s);break;case"enum":if(m=ue(n.V.T,d,s.ignoreUnknownFields,!0),m===void 0)continue;break;case"scalar":try{m=J(n.V.T,d,L.BIGINT,!0)}catch(p){let h=`cannot decode map value for field ${r.typeName}.${n.name} from JSON: ${U(t)}`;throw p instanceof Error&&p.message.length>0&&(h+=`: ${p.message}`),new Error(h)}break}try{o[J(n.K,n.K==u.BOOL?l=="true"?!0:l=="false"?!1:l:l,L.BIGINT,!0).toString()]=m}catch(p){let h=`cannot decode map key for field ${r.typeName}.${n.name} from JSON: ${U(t)}`;throw p instanceof Error&&p.message.length>0&&(h+=`: ${p.message}`),new Error(h)}}}else switch(n.kind){case"message":let o=n.T;if(t===null&&o.typeName!="google.protobuf.Value"){if(n.oneof)throw new Error(`cannot decode field ${r.typeName}.${n.name} from JSON: null is invalid for oneof field`);return}e[i]instanceof P?e[i].fromJson(t,s):(e[i]=o.fromJson(t,s),o.fieldWrapper&&!n.oneof&&(e[i]=o.fieldWrapper.unwrapField(e[i])));break;case"enum":let l=ue(n.T,t,s.ignoreUnknownFields,a);l!==void 0&&(e[i]=l);break;case"scalar":try{e[i]=J(n.T,t,n.L,a)}catch(d){let m=`cannot decode field ${r.typeName}.${n.name} from JSON: ${U(t)}`;throw d instanceof Error&&d.message.length>0&&(m+=`: ${d.message}`),new Error(m)}break}}c($e,"yt");function J(e,t,n,s){switch(e){case u.DOUBLE:case u.FLOAT:if(t===null)return s?0:void 0;if(t==="NaN")return Number.NaN;if(t==="Infinity")return Number.POSITIVE_INFINITY;if(t==="-Infinity")return Number.NEGATIVE_INFINITY;if(t===""||typeof t=="string"&&t.trim().length!==t.length||typeof t!="string"&&typeof t!="number")break;let r=Number(t);if(Number.isNaN(r)||!Number.isFinite(r))break;return e==u.FLOAT&&fe(r),r;case u.INT32:case u.FIXED32:case u.SFIXED32:case u.SINT32:case u.UINT32:if(t===null)return s?0:void 0;let a;if(typeof t=="number"?a=t:typeof t=="string"&&t.length>0&&t.trim().length===t.length&&(a=Number(t)),a===void 0)break;return e==u.UINT32?ie(a):K(a),a;case u.INT64:case u.SFIXED64:case u.SINT64:if(t===null)return s?E.zero:void 0;if(typeof t!="number"&&typeof t!="string")break;let i=E.parse(t);return n?i.toString():i;case u.FIXED64:case u.UINT64:if(t===null)return s?E.zero:void 0;if(typeof t!="number"&&typeof t!="string")break;let o=E.uParse(t);return n?o.toString():o;case u.BOOL:if(t===null)return s?!1:void 0;if(typeof t!="boolean")break;return t;case u.STRING:if(t===null)return s?"":void 0;if(typeof t!="string")break;try{encodeURIComponent(t)}catch{throw new Error("invalid UTF8")}return t;case u.BYTES:if(t===null)return s?new Uint8Array(0):void 0;if(t==="")return new Uint8Array(0);if(typeof t!="string")break;return Ue.dec(t)}throw new Error}c(J,"H");function ue(e,t,n,s){if(t===null)return s?e.values[0].no:void 0;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":let r=e.findName(t);if(r||n)return r?.no;break}throw new Error(`cannot decode enum ${e.typeName} from JSON: ${U(t)}`)}c(ue,"Ue");function xt(e,t,n,s){var r;return t===void 0?t:!n&&e.values[0].no===t?void 0:s?t:e.typeName=="google.protobuf.NullValue"?null:(r=e.findNumber(t)?.name)!==null&&r!==void 0?r:t}c(xt,"on");function Le(e,t,n){if(t!==void 0)switch(e){case u.INT32:case u.SFIXED32:case u.SINT32:case u.FIXED32:case u.UINT32:return S(typeof t=="number"),t!=0||n?t:void 0;case u.FLOAT:case u.DOUBLE:return S(typeof t=="number"),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t!==0||n?t:void 0;case u.STRING:return S(typeof t=="string"),t.length>0||n?t:void 0;case u.BOOL:return S(typeof t=="boolean"),t||n?t:void 0;case u.UINT64:case u.FIXED64:case u.INT64:case u.SFIXED64:case u.SINT64:return S(typeof t=="bigint"||typeof t=="string"||typeof t=="number"),n||t!=0?t.toString(10):void 0;case u.BYTES:return S(t instanceof Uint8Array),n||t.byteLength>0?Ue.enc(t):void 0}}c(Le,"bt");function Pt(){return Lt(!0,(e,t)=>function(n,s,r){if(n.kind=="map"){let a={};switch(n.V.kind){case"scalar":for(let[o,l]of Object.entries(s)){let d=t(n.V.T,l,!0);S(d!==void 0),a[o.toString()]=d}break;case"message":for(let[o,l]of Object.entries(s))a[o.toString()]=l.toJson(r);break;case"enum":let i=n.V.T;for(let[o,l]of Object.entries(s)){S(l===void 0||typeof l=="number");let d=e(i,l,!0,r.enumAsInteger);S(d!==void 0),a[o.toString()]=d}break}return r.emitDefaultValues||Object.keys(a).length>0?a:void 0}else if(n.repeated){let a=[];switch(n.kind){case"scalar":for(let i=0;i<s.length;i++)a.push(t(n.T,s[i],!0));break;case"enum":for(let i=0;i<s.length;i++)a.push(e(n.T,s[i],!0,r.enumAsInteger));break;case"message":for(let i=0;i<s.length;i++)a.push(s[i].toJson(r));break}return r.emitDefaultValues||a.length>0?a:void 0}else{if(s===void 0)return;switch(n.kind){case"scalar":return t(n.T,s,!!n.oneof||n.opt||r.emitDefaultValues);case"enum":return e(n.T,s,!!n.oneof||n.opt||r.emitDefaultValues,r.enumAsInteger);case"message":return Se(n.T,s).toJson(r)}}})}c(Pt,"Tt");function jt(){return{setEnumType:pe,initPartial(e,t){if(e===void 0)return;let n=t.getType();for(let s of n.fields.byMember()){let r=s.localName,a=t,i=e;if(i[r]!==void 0)switch(s.kind){case"oneof":let o=i[r].case;if(o===void 0)continue;let l=s.findField(o),d=i[r].value;l&&l.kind=="message"&&!(d instanceof l.T)?d=new l.T(d):l&&l.kind==="scalar"&&l.T===u.BYTES&&(d=X(d)),a[r]={case:o,value:d};break;case"scalar":case"enum":let m=i[r];s.T===u.BYTES&&(m=s.repeated?m.map(X):X(m)),a[r]=m;break;case"map":switch(s.V.kind){case"scalar":case"enum":if(s.V.T===u.BYTES)for(let[g,b]of Object.entries(i[r]))a[r][g]=X(b);else Object.assign(a[r],i[r]);break;case"message":let h=s.V.T;for(let g of Object.keys(i[r])){let b=i[r][g];h.fieldWrapper||(b=new h(b)),a[r][g]=b}break}break;case"message":let p=s.T;if(s.repeated)a[r]=i[r].map(h=>h instanceof p?h:new p(h));else if(i[r]!==void 0){let h=i[r];p.fieldWrapper?p.typeName==="google.protobuf.BytesValue"?a[r]=X(h):a[r]=h:a[r]=h instanceof p?h:new p(h)}break}}},equals(e,t,n){return t===n?!0:!t||!n?!1:e.fields.byMember().every(s=>{let r=t[s.localName],a=n[s.localName];if(s.repeated){if(r.length!==a.length)return!1;switch(s.kind){case"message":return r.every((i,o)=>s.T.equals(i,a[o]));case"scalar":return r.every((i,o)=>R(s.T,i,a[o]));case"enum":return r.every((i,o)=>R(u.INT32,i,a[o]))}throw new Error(`repeated cannot contain ${s.kind}`)}switch(s.kind){case"message":return s.T.equals(r,a);case"enum":return R(u.INT32,r,a);case"scalar":return R(s.T,r,a);case"oneof":if(r.case!==a.case)return!1;let i=s.findField(r.case);if(i===void 0)return!0;switch(i.kind){case"message":return i.T.equals(r.value,a.value);case"enum":return R(u.INT32,r.value,a.value);case"scalar":return R(i.T,r.value,a.value)}throw new Error(`oneof cannot contain ${i.kind}`);case"map":let o=Object.keys(r).concat(Object.keys(a));switch(s.V.kind){case"message":let l=s.V.T;return o.every(m=>l.equals(r[m],a[m]));case"enum":return o.every(m=>R(u.INT32,r[m],a[m]));case"scalar":let d=s.V.T;return o.every(m=>R(d,r[m],a[m]))}break}})},clone(e){let t=e.getType(),n=new t,s=n;for(let r of t.fields.byMember()){let a=e[r.localName],i;if(r.repeated)i=a.map(ne);else if(r.kind=="map"){i=s[r.localName];for(let[o,l]of Object.entries(a))i[o]=ne(l)}else r.kind=="oneof"?i=r.findField(a.case)?{case:a.case,value:ne(a.value)}:{case:void 0}:i=ne(a);s[r.localName]=i}return n}}}c(jt,"wt");function ne(e){if(e===void 0)return e;if(e instanceof P)return e.clone();if(e instanceof Uint8Array){let t=new Uint8Array(e.byteLength);return t.set(e),t}return e}c(ne,"me");function X(e){return e instanceof Uint8Array?e:new Uint8Array(e)}c(X,"Q");var Vt=class{static{c(this,"de")}constructor(e,t){this._fields=e,this._normalizer=t}findJsonName(e){if(!this.jsonNames){let t={};for(let n of this.list())t[n.jsonName]=t[n.name]=n;this.jsonNames=t}return this.jsonNames[e]}find(e){if(!this.numbers){let t={};for(let n of this.list())t[n.no]=n;this.numbers=t}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,t)=>e.no-t.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];let e=this.members,t;for(let n of this.list())n.oneof?n.oneof!==t&&(t=n.oneof,e.push(t)):e.push(n)}return this.members}};function xe(e,t){let n=Pe(e);return t?n:Yt(Wt(n))}c(xe,"Ae");function Gt(e){return xe(e,!1)}c(Gt,"xt");var Jt=Pe;function Pe(e){let t=!1,n=[];for(let s=0;s<e.length;s++){let r=e.charAt(s);switch(r){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(r),t=!1;break;default:t&&(t=!1,r=r.toUpperCase()),n.push(r);break}}return n.join("")}c(Pe,"Nt");var Xt=new Set(["constructor","toString","toJSON","valueOf"]),_t=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),je=c(e=>`${e}$`,"St"),Wt=c(e=>_t.has(e)?je(e):e,"un"),Yt=c(e=>Xt.has(e)?je(e):e,"fn"),qt=class{static{c(this,"le")}constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=Gt(e)}addField(e){S(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let t=0;t<this.fields.length;t++)this._lookup[this.fields[t].localName]=this.fields[t]}return this._lookup[e]}},f=vt("proto3",Pt(),Dt(),Object.assign(Object.assign({},jt()),{newFieldList(e){return new Vt(e,zt)},initFields(e){for(let t of e.getType().fields.byMember()){if(t.opt)continue;let n=t.localName,s=e;if(t.repeated){s[n]=[];continue}switch(t.kind){case"oneof":s[n]={case:void 0};break;case"enum":s[n]=0;break;case"map":s[n]={};break;case"scalar":s[n]=Q(t.T,t.L);break;case"message":break}}}}));function zt(e){var t,n,s,r;let a=[],i;for(let o of typeof e=="function"?e():e){let l=o;if(l.localName=xe(o.name,o.oneof!==void 0),l.jsonName=(t=o.jsonName)!==null&&t!==void 0?t:Jt(o.name),l.repeated=(n=o.repeated)!==null&&n!==void 0?n:!1,o.kind=="scalar"&&(l.L=(s=o.L)!==null&&s!==void 0?s:L.BIGINT),o.oneof!==void 0){let d=typeof o.oneof=="string"?o.oneof:o.oneof.name;(!i||i.name!=d)&&(i=new qt(d)),l.oneof=i,i.addField(l)}o.kind=="message"&&(l.delimited=!1),l.packed=(r=o.packed)!==null&&r!==void 0?r:o.kind=="enum"||o.kind=="scalar"&&o.T!=u.BYTES&&o.T!=u.STRING,a.push(l)}return a}c(zt,"mn");var Kt=f.makeMessageType("youtube.response.browse.Browse",()=>[{no:1,name:"responseContext",kind:"message",T:Ht},{no:9,name:"contents",kind:"message",T:V},{no:10,name:"onResponseReceivedActions",kind:"message",T:V}]),Ht=f.makeMessageType("youtube.response.browse.ResponseContext",()=>[{no:6,name:"serviceTrackingParams",kind:"message",T:Qt,repeated:!0}]),Qt=f.makeMessageType("youtube.response.browse.ServiceTrackingParams",()=>[{no:1,name:"service",kind:"scalar",T:5},{no:2,name:"params",kind:"message",T:Zt,repeated:!0}]),Zt=f.makeMessageType("youtube.response.browse.Params",()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:9}]),V=f.makeMessageType("youtube.response.browse.Contents",()=>[{no:58173949,name:"browseResultsRenderer",kind:"message",T:en},{no:153515154,name:"videoWithContextRenderer",kind:"message",T:Xe},{no:49399797,name:"richGridRenderer",kind:"message",T:Ve}]),en=f.makeMessageType("youtube.response.browse.BrowseResultsRenderer",()=>[{no:1,name:"tabs",kind:"message",T:tn,repeated:!0}]),tn=f.makeMessageType("youtube.response.browse.Tab",()=>[{no:58174010,name:"tabRenderer",kind:"message",T:nn}]),nn=f.makeMessageType("youtube.response.browse.TabRenderer",()=>[{no:4,name:"contents",kind:"message",T:V}]),Ve=f.makeMessageType("youtube.response.browse.RichGridRenderer",()=>[{no:1,name:"richGridContents",kind:"message",T:sn,repeated:!0}]),sn=f.makeMessageType("youtube.response.browse.RichGridContent",()=>[{no:50195462,name:"richItemRenderer",kind:"message",T:Ge},{no:51845067,name:"richSectionRenderer",kind:"message",T:fn},{no:221496734,name:"musicDescriptionShelfRenderer",kind:"message",T:hn}]),Ge=f.makeMessageType("youtube.response.browse.RichItemRenderer",()=>[{no:1,name:"richItemContent",kind:"message",T:Je,repeated:!0}]),Je=f.makeMessageType("youtube.response.browse.RichItemContent",()=>[{no:153515154,name:"videoWithContextRenderer",kind:"message",T:Xe}]),Xe=f.makeMessageType("youtube.response.browse.VideoWithContextRenderer",()=>[{no:172660663,name:"videoRendererContent",kind:"message",T:rn}]),rn=f.makeMessageType("youtube.response.browse.VideoRendererContent",()=>[{no:1,name:"videoInfo",kind:"message",T:an},{no:2,name:"renderInfo",kind:"message",T:dn}]),an=f.makeMessageType("youtube.response.browse.VideoInfo",()=>[{no:168777401,name:"videoContext",kind:"message",T:on}]),on=f.makeMessageType("youtube.response.browse.VideoContext",()=>[{no:5,name:"videoContent",kind:"message",T:ln}]),ln=f.makeMessageType("youtube.response.browse.VideoContent",()=>[{no:465160965,name:"timedLyricsRender",kind:"message",T:un}]),un=f.makeMessageType("youtube.response.browse.TimedLyricsRender",()=>[{no:4,name:"timedLyricsContent",kind:"message",T:cn}]),cn=f.makeMessageType("youtube.response.browse.TimedLyricsContent",()=>[{no:1,name:"runs",kind:"message",T:We,repeated:!0},{no:2,name:"footerLabel",kind:"scalar",T:9}]),dn=f.makeMessageType("youtube.response.browse.RenderInfo",()=>[{no:183314536,name:"layoutRender",kind:"message",T:mn}]),mn=f.makeMessageType("youtube.response.browse.LayoutRender",()=>[{no:1,name:"eml",kind:"scalar",T:9}]),fn=f.makeMessageType("youtube.response.browse.RichSectionRenderer",()=>[{no:5,name:"richSectionContent",kind:"message",T:gn}]),gn=f.makeMessageType("youtube.response.browse.RichSectionContent",()=>[{no:51431404,name:"reelShelfRenderer",kind:"message",T:pn}]),pn=f.makeMessageType("youtube.response.browse.ReelShelfRenderer",()=>[{no:1,name:"richItemContent",kind:"message",T:Je,repeated:!0}]),hn=f.makeMessageType("youtube.response.browse.MusicDescriptionShelfRenderer",()=>[{no:3,name:"description",kind:"message",T:_e},{no:10,name:"footer",kind:"message",T:_e}]),_e=f.makeMessageType("youtube.response.browse.Label",()=>[{no:1,name:"runs",kind:"message",T:We,repeated:!0}]),We=f.makeMessageType("youtube.response.browse.Run",()=>[{no:1,name:"text",kind:"scalar",T:9}]),yn=f.makeMessageType("youtube.response.next.Next",()=>[{no:7,name:"Contents",kind:"message",T:bn},{no:8,name:"onResponseReceivedActions",kind:"message",T:V}]),bn=f.makeMessageType("youtube.response.next.Contents",()=>[{no:51779735,name:"NextResults",kind:"message",T:kn}]),kn=f.makeMessageType("youtube.response.next.NextResults",()=>[{no:1,name:"Contents",kind:"message",T:V}]),Tn=f.makeMessageType("youtube.response.search.Search",()=>[{no:4,name:"contents",kind:"message",T:V},{no:7,name:"onResponseReceivedCommands",kind:"message",T:wn}]),wn=f.makeMessageType("youtube.response.search.OnResponseReceivedCommands",()=>[{no:50195462,name:"richItemRenderer",kind:"message",T:Ge},{no:49399797,name:"appendContinuationItemsAction",kind:"message",T:Ve}]),In=f.makeMessageType("youtube.response.shorts.Shorts",()=>[{no:2,name:"entries",kind:"message",T:Nn,repeated:!0}]),Nn=f.makeMessageType("youtube.response.shorts.Entry",()=>[{no:1,name:"command",kind:"message",T:vn}]),vn=f.makeMessageType("youtube.response.shorts.Command",()=>[{no:139608561,name:"reelWatchEndpoint",kind:"message",T:Sn}]),Sn=f.makeMessageType("youtube.response.shorts.ReelWatchEndpoint",()=>[{no:8,name:"overlay",kind:"message",T:En}]),En=f.makeMessageType("youtube.response.shorts.Overlay",()=>[{no:139970731,name:"reelPlayerOverlayRenderer",kind:"message",T:Bn}]),Bn=f.makeMessageType("youtube.response.shorts.ReelPlayerOverlayRenderer",()=>[{no:12,name:"style",kind:"scalar",T:5}]),Fn=f.makeMessageType("youtube.response.browse.Guide",()=>[{no:4,name:"items4",kind:"message",T:Ye,repeated:!0},{no:6,name:"items6",kind:"message",T:Ye,repeated:!0}]),Ye=f.makeMessageType("youtube.response.browse.Item",()=>[{no:117866661,name:"guideSectionRenderer",kind:"message",T:On}]),On=f.makeMessageType("youtube.response.browse.GuideSectionRenderer",()=>[{no:1,name:"rendererItems",kind:"message",T:An,repeated:!0}]),An=f.makeMessageType("youtube.response.browse.RendererItem",()=>[{no:318370163,name:"iconRender",kind:"message",T:qe},{no:117501096,name:"labelRender",kind:"message",T:qe}]),qe=f.makeMessageType("youtube.response.browse.guideEntryRenderer",()=>[{no:1,name:"browseId",kind:"scalar",T:9}]),ze=f.makeMessageType("youtube.response.player.Player",()=>[{no:7,name:"adPlacements",kind:"message",T:Un,repeated:!0},{no:2,name:"playabilityStatus",kind:"message",T:Mn},{no:9,name:"playbackTracking",kind:"message",T:Ln},{no:10,name:"captions",kind:"message",T:xn}]),Un=f.makeMessageType("youtube.response.player.AdPlacement",()=>[{no:84813246,name:"adPlacementRenderer",kind:"message",T:Dn}]),Dn=f.makeMessageType("youtube.response.player.AdPlacementRenderer",()=>[{no:4,name:"params",kind:"scalar",T:9}]),Mn=f.makeMessageType("youtube.response.player.PlayabilityStatus",()=>[{no:21,name:"miniPlayer",kind:"message",T:Rn},{no:11,name:"backgroundPlayer",kind:"message",T:Ke}]),Rn=f.makeMessageType("youtube.response.player.MiniPlayer",()=>[{no:151635310,name:"miniPlayerRender",kind:"message",T:Cn}]),Ke=f.makeMessageType("youtube.response.player.BackgroundPlayer",()=>[{no:64657230,name:"backgroundPlayerRender",kind:"message",T:$n}]),Cn=f.makeMessageType("youtube.response.player.MiniPlayerRender",()=>[{no:1,name:"active",kind:"scalar",T:8}]),$n=f.makeMessageType("youtube.response.player.BackgroundPlayerRender",()=>[{no:1,name:"active",kind:"scalar",T:8}]),Ln=f.makeMessageType("youtube.response.player.PlaybackTracking",()=>[{no:1,name:"videostatsPlaybackUrl",kind:"message",T:C},{no:2,name:"videostatsDelayplayUrl",kind:"message",T:C},{no:3,name:"videostatsWatchtimeUrl",kind:"message",T:C},{no:4,name:"ptrackingUrl",kind:"message",T:C},{no:5,name:"qoeUrl",kind:"message",T:C},{no:13,name:"atrUrl",kind:"message",T:C},{no:15,name:"videostatsEngageUrl",kind:"message",T:C},{no:18,name:"pageadViewthroughconversion",kind:"message",T:C}]),C=f.makeMessageType("youtube.response.player.Tracking",()=>[{no:1,name:"baseUrl",kind:"scalar",T:9}]),xn=f.makeMessageType("youtube.response.player.Captions",()=>[{no:51621377,name:"playerCaptionsTrackListRenderer",jsonName:"playerCaptionsTracklistRenderer",kind:"message",T:Pn}]),Pn=f.makeMessageType("youtube.response.player.PlayerCaptionsTrackListRenderer",()=>[{no:1,name:"captionTracks",kind:"message",T:He,repeated:!0},{no:2,name:"audioTracks",kind:"message",T:jn,repeated:!0},{no:3,name:"translationLanguages",kind:"message",T:Qe,repeated:!0},{no:4,name:"defaultAudioTrackIndex",kind:"scalar",T:5,opt:!0},{no:6,name:"defaultCaptionTrackIndex",kind:"scalar",T:5,opt:!0}]),He=f.makeMessageType("youtube.response.player.CaptionTrack",()=>[{no:1,name:"baseUrl",kind:"scalar",T:9},{no:2,name:"name",kind:"message",T:Ze},{no:3,name:"vssId",kind:"scalar",T:9},{no:4,name:"languageCode",kind:"scalar",T:9},{no:5,name:"kind",kind:"scalar",T:9,opt:!0},{no:6,name:"rtl",kind:"scalar",T:8,opt:!0},{no:7,name:"isTranslatable",kind:"scalar",T:8}]),jn=f.makeMessageType("youtube.response.player.AudioTrack",()=>[{no:2,name:"captionTrackIndices",kind:"scalar",T:5,repeated:!0,packed:!1},{no:3,name:"defaultCaptionTrackIndex",kind:"scalar",T:5,opt:!0},{no:4,name:"forcedCaptionTrackIndex",kind:"scalar",T:5,opt:!0},{no:5,name:"visibility",kind:"scalar",T:5,opt:!0},{no:6,name:"hasDefaultTrack",kind:"scalar",T:8,opt:!0},{no:7,name:"hasForcedTrack",kind:"scalar",T:8,opt:!0},{no:8,name:"audioTrackId",kind:"scalar",T:9,opt:!0},{no:11,name:"captionsInitialState",kind:"scalar",T:5,opt:!0}]),Qe=f.makeMessageType("youtube.response.player.TranslationLanguage",()=>[{no:1,name:"languageCode",kind:"scalar",T:9},{no:2,name:"languageName",kind:"message",T:Ze}]),Ze=f.makeMessageType("youtube.response.player.Name",()=>[{no:1,name:"runs",kind:"message",T:Vn,repeated:!0}]),Vn=f.makeMessageType("youtube.response.player.Name.Run",()=>[{no:1,name:"text",kind:"scalar",T:9}],{localName:"Name_Run"}),Gn=f.makeMessageType("youtube.response.setting.Setting",()=>[{no:6,name:"settingItems",kind:"message",T:et,repeated:!0},{no:10,name:"trackingParams",kind:"message",T:se}]),et=f.makeMessageType("youtube.response.setting.SettingItem",()=>[{no:88478200,name:"settingCategoryEntryRenderer",kind:"message",T:Xn},{no:66930374,name:"settingCategoryCollectionRenderer",kind:"message",T:_n}]),se=f.makeMessageType("youtube.response.setting.TrackingParams",()=>[{no:1,name:"f1",kind:"scalar",T:5},{no:2,name:"f2",kind:"scalar",T:5},{no:3,name:"f3",kind:"scalar",T:5},{no:4,name:"timeInfo",kind:"message",T:Jn}]),Jn=f.makeMessageType("youtube.response.setting.TimeInfo",()=>[{no:1,name:"timestamp",kind:"scalar",T:4,L:1},{no:2,name:"f2",kind:"scalar",T:7},{no:3,name:"f3",kind:"scalar",T:7}]),Xn=f.makeMessageType("youtube.response.setting.SettingCategoryEntryRenderer",()=>[{no:2,name:"f2",kind:"scalar",T:5},{no:3,name:"f3",kind:"scalar",T:5},{no:5,name:"trackingParams",kind:"message",T:se},{no:6,name:"f6",kind:"scalar",T:5},{no:7,name:"f7",kind:"scalar",T:5},{no:8,name:"f8",kind:"scalar",T:5},{no:9,name:"f9",kind:"scalar",T:5},{no:10,name:"f10",kind:"scalar",T:5},{no:12,name:"f12",kind:"scalar",T:5}]),_n=f.makeMessageType("youtube.response.setting.SettingCategoryCollectionRenderer",()=>[{no:3,name:"subSettings",kind:"message",T:tt,repeated:!0},{no:4,name:"categoryId",kind:"scalar",T:5}]),tt=f.makeMessageType("youtube.response.setting.SubSetting",()=>[{no:61331416,name:"settingBooleanRenderer",kind:"message",T:Wn}]),Wn=f.makeMessageType("youtube.response.setting.SettingBooleanRenderer",()=>[{no:5,name:"enableServiceEndpoint",kind:"message",T:nt},{no:6,name:"disableServiceEndpoint",kind:"message",T:nt},{no:13,name:"clickTrackingParams",kind:"message",T:se},{no:15,name:"itemId",kind:"scalar",T:5}]),nt=f.makeMessageType("youtube.response.setting.ServiceEndpoint",()=>[{no:2,name:"trackingParams",kind:"message",T:se},{no:81212182,name:"setClientSettingEndpoint",kind:"message",T:Yn}]),Yn=f.makeMessageType("youtube.response.setting.SetClientSettingEndpoint",()=>[{no:1,name:"settingDatas",kind:"message",T:qn}]),qn=f.makeMessageType("youtube.response.setting.SettingDatas",()=>[{no:1,name:"clientSettingEnum",kind:"message",T:zn},{no:3,name:"boolValue",kind:"scalar",T:8}]),zn=f.makeMessageType("youtube.response.setting.ClientSettingEnum",()=>[{no:1,name:"item",kind:"scalar",T:5}]),Kn=f.makeMessageType("youtube.response.watch.Watch",()=>[{no:1,name:"content",kind:"message",T:Hn,repeated:!0}]),Hn=f.makeMessageType("youtube.response.watch.Content",()=>[{no:2,name:"player",kind:"message",T:ze}]),_=class{static{c(this,"X")}_times=new Map;name;isDebug;className;request;response;constructor(e,t,n){this.name=e??"",this.isDebug=n?.debug??!1,e&&this.debug(`${e} Start`),this.className=t??"",this.init()}static getInstance(e,t){let n="Surge";return typeof $loon<"u"?n="Loon":typeof $task<"u"&&(n="QuanX"),_.instances[n]||(_.instances[n]=_.classNames[n](e,n,t)),_.instances[n]}createProxy(e){return new Proxy(e,{get:this.getFn,set:this.setFn})}getFn(e,t,n){return e[t]}setFn(e,t,n,s){return e[t]=n,!0}getJSON(e,t={}){let n=this.getVal(e);return n?JSON.parse(n):t}setJSON(e,t){this.setVal(JSON.stringify(e),t)}msg(e=this.name,t="",n="",s){}debug(e){this.isDebug&&(typeof e=="object"&&(e=JSON.stringify(e)))}log(e){typeof e=="object"&&(e=JSON.stringify(e))}timeStart(e){this._times.set(e,Date.now())}timeEnd(e){if(this._times.has(e)){let t=this._times.get(e)??0,n=Date.now()-t;this.debug(`${e}: ${n}ms`),this._times.delete(e)}else this.debug(`Timer with label ${e} does not exist.`)}exit(){$done({})}reject(){$done()}decodeParams(e,t){return e}},W=_;z(W,"instances",{}),z(W,"classNames",{QuanX:c((e,t,n)=>new st(e,t,n),"QuanX"),Surge:c((e,t,n)=>new de(e,t,n),"Surge"),Loon:c((e,t,n)=>new Qn(e,t,n),"Loon")});var ce=class extends W{static{c(this,"ye")}getFn(e,t,n){let s=ce.clientAdapter[t]||t;return super.getFn(e,s,n)}setFn(e,t,n,s){let r=ce.clientAdapter[t]||t;return super.setFn(e,r,n,s)}init(){try{this.request=this.createProxy($request),this.response=this.createProxy($response)}catch(e){this.debug(e.toString())}}getVal(e){return $persistentStore.read(e)}setVal(e,t){$persistentStore.write(e,t)}msg(e=this.name,t="",n="",s){$notification.post(e,t,n,{url:s??""})}async fetch(e){return await new Promise((t,n)=>{let{method:s,body:r,bodyBytes:a,...i}=e,o=a??r,l=o instanceof Uint8Array;$httpClient[s.toLowerCase()]({...i,body:o,"binary-mode":l},(d,m,p)=>{d&&n(d);let h=l?"bodyBytes":"body";t({status:m.status||m.statusCode,headers:m.headers,[h]:p})})})}done(e){let t=e.response??e,n,s;t.bodyBytes?(n=t.bodyBytes,delete t.bodyBytes,s={...e},s.response?s.response.body=n:s.body=n):s=e,$done(s)}decodeParams(e,t){return typeof $argument=="string"&&!$argument.includes("{{{")&&Object.assign(e,JSON.parse($argument)),e}},de=ce;z(de,"clientAdapter",{bodyBytes:"body"});var $=class extends W{static{c(this,"v")}static transferBodyBytes(e,t){return e instanceof ArrayBuffer?t==="Uint8Array"?new Uint8Array(e):e:e instanceof Uint8Array&&t==="ArrayBuffer"?e.buffer.slice(e.byteOffset,e.byteLength+e.byteOffset):e}init(){try{this.request=this.createProxy($request),this.response=this.createProxy($response)}catch(e){this.debug(e.toString())}}getFn(e,t,n){let s=$.clientAdapter[t]||t,r=super.getFn(e,s,n);return t==="bodyBytes"&&(r=$.transferBodyBytes(r,"Uint8Array")),r}setFn(e,t,n,s){let r=$.clientAdapter[t]||t,a=n;return t==="bodyBytes"&&(a=$.transferBodyBytes(a,"Uint8Array")),super.setFn(e,r,a,s)}getVal(e){return $prefs.valueForKey(e)?.replace(/\0/g,"")}setVal(e,t){$prefs.setValueForKey(e,t)}msg(e=this.name,t="",n="",s){$notify(e,t,n,{"open-url":s??""})}async fetch(e){return await new Promise(t=>{let n={url:"",method:"GET"};for(let[s,r]of Object.entries(e))s==="id"?n.sessionIndex=r:s==="bodyBytes"?n.bodyBytes=$.transferBodyBytes(r,"ArrayBuffer"):n[s]=r;e.bodyBytes&&delete n.body,$task.fetch(n).then(s=>{let r={status:200,headers:{}};for(let[a,i]of Object.entries(s))a==="sessionIndex"?r.id=i:a==="bodyBytes"?r.bodyBytes=$.transferBodyBytes(i,"Uint8Array"):a==="statusCode"?r.status=i:r[a]=i;t(r)})})}done(e){let t=e.response??e,n={};for(let[s,r]of Object.entries(t))s==="status"?n.status=`HTTP/1.1 ${r}`:s==="bodyBytes"?n.bodyBytes=$.transferBodyBytes(r,"ArrayBuffer"):n[s]=r;$done(n)}},st=$;z(st,"clientAdapter",{id:"sessionIndex",status:"statusCode"});var Qn=class extends de{static{c(this,"_e")}decodeParams(e,t){let n={};for(let[s,r]of Object.entries(e)){let a=t?.[s]??s,i=this.getVal(a);i&&(n[s]=this.transferType(r,i))}return Object.assign(e,n),e}transferType(e,t){return typeof e=="boolean"?t==="true":typeof e=="number"?Number(t):t}},w=W.getInstance("YouTube"),Y=class{static{c(this,"V")}name;needProcess;needSave;message;whiteNo;blackNo;whiteEml;blackEml;msgType;argument;decoder=new TextDecoder("utf-8",{fatal:!1,ignoreBOM:!0});constructor(e,t){this.name=t,this.msgType=e,this.argument=this.decodeArgument(),w.isDebug=!!this.argument.debug,w.debug(this.name),Object.assign(this,w.getJSON("YouTubeAdvertiseInfo",{whiteNo:[],blackNo:[],whiteEml:[],blackEml:[]}))}decodeArgument(){let e={lyricLang:"\u6B4C\u8BCD\u7FFB\u8BD1\u8BED\u8A00",captionLang:"\u5B57\u5E55\u7FFB\u8BD1\u8BED\u8A00",blockUpload:"\u5C4F\u853D\u4E0A\u4F20\u6309\u94AE",blockImmersive:"\u5C4F\u853D\u9009\u6BB5\u6309\u94AE",debug:"\u542F\u52A8\u8C03\u8BD5\u6A21\u5F0F"},t={lyricLang:"zh-Hans",captionLang:"zh-Hans",blockUpload:!0,blockImmersive:!0,debug:!1};return w.decodeParams(t,e)}fromBinary(e){return e instanceof Uint8Array?(this.message=this.msgType.fromBinary(e),w.debug(`raw: ${Math.floor(e.length/1024)} kb`),this):(w.log("YouTube can not get binaryBody"),w.exit(),this)}async modify(){let e=this.pure();return e instanceof Promise?await e:e}toBinary(){return this.message.toBinary()}listUnknownFields(e){return e instanceof P?e.getType().runtime.bin.listUnknownFields(e):[]}save(){if(this.needSave){w.debug("Update Config");let e={whiteNo:this.whiteNo,blackNo:this.blackNo,whiteEml:this.whiteEml,blackEml:this.blackEml};w.setJSON(e,"YouTubeAdvertiseInfo")}}done(){if(this.save(),this.needProcess){w.timeStart("toBinary");let e=this.toBinary();w.timeEnd("toBinary"),w.debug(`modify: ${Math.floor(e.length/1024)} kb`),w.done({bodyBytes:e})}w.debug("use $done({})"),w.exit()}iterate(e={},t,n){let s=typeof e=="object"?[e]:[];for(;s.length;){let r=s.pop(),a=Object.keys(r);if(typeof t=="symbol"){for(let i of Object.getOwnPropertySymbols(r))if(i.description===t.description){n(r,s);break}}for(let i of a)i===t?n(r,s):typeof r[i]=="object"&&s.push(r[i])}}isAdvertise(e){let t=this.listUnknownFields(e)[0];return t?this.handleFieldNo(t):this.handleFieldEml(e)}handleFieldNo(e){let t=e.no;if(this.whiteNo.includes(t))return!1;if(this.blackNo.includes(t))return!0;let n=this.decoder.decode(e.data).includes("pagead");return n?this.blackNo.push(t):this.whiteNo.push(t),this.needSave=!0,n}handleFieldEml(e){let t=!1,n="";return this.iterate(e,"renderInfo",(s,r)=>{if(n=s.renderInfo.layoutRender.eml.split("|")[0],this.whiteEml.includes(n))t=!1;else if(this.blackEml.includes(n)||/shorts(?!_pivot_item)/.test(n))t=!0;else{let a=s?.videoInfo?.videoContext?.videoContent;if(a){let i=this.listUnknownFields(a)[0];t=this.decoder.decode(i.data).includes("pagead"),t?this.blackEml.push(n):this.whiteEml.push(n),this.needSave=!0}}r.length=0}),t}isShorts(e){let t=!1;return this.iterate(e,"eml",(n,s)=>{t=/shorts(?!_pivot_item)/.test(n.eml),s.length=0}),t}};function Zn(e){let t=".",n="+-a^+6",s="+-3^+b+-f",r,a,i;for(r=[],a=0,i=0;i<e.length;i++){let o=e.charCodeAt(i);128>o?r[a++]=o:(2048>o?r[a++]=o>>6|192:((o&64512)==55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)==56320?(o=65536+((o&1023)<<10)+(e.charCodeAt(++i)&1023),r[a++]=o>>18|240,r[a++]=o>>12&63|128):r[a++]=o>>12|224,r[a++]=o>>6&63|128),r[a++]=o&63|128)}for(e=406644,a=0;a<r.length;a++)e+=r[a],e=rt(e,n);return e=rt(e,s),e^=3293161072,0>e&&(e=(e&2147483647)+2147483648),e%=1e6,e.toString()+t+(e^406644)}c(Zn,"ir");function rt(e,t){let n="a",s="+",r;for(let a=0;a<t.length-2;a+=3)r=t.charAt(a+2),r=r>=n?r.charCodeAt(0)-87:Number(r),r=t.charAt(a+1)==s?e>>>r:e<<r,e=t.charAt(a)==s?e+r&4294967295:e^r;return e}c(rt,"Jt");function es(e,t){return`https://translate.google.com/translate_a/single?client=gtx&sl=auto&tl=${t}&hl=zh-CN&dt=at&dt=bd&dt=ex&dt=ld&dt=md&dt=qca&dt=rw&dt=rm&dt=ss&dt=t&source=bh&ssel=0&tsel=0&kc=1&tk=${Zn(e)}&q=${encodeURIComponent(e)}`}c(es,"Gt");var me=class extends Y{static{c(this,"Y")}constructor(e=Kt,t="Browse"){super(e,t)}async pure(){return this.iterate(this.message,"richGridContents",e=>{for(let t=e.richGridContents.length-1;t>=0;t--)this.removeCommonAD(e,t),this.removeShorts(e,t)}),await this.translate(),this}removeCommonAD(e,t){let n=e.richGridContents[t]?.richItemRenderer?.richItemContent;for(let s=n?.length-1;s>=0;s--)this.isAdvertise(n[s])&&(n.splice(s,1),this.needProcess=!0)}removeShorts(e,t){let n=e.richGridContents[t]?.richSectionRenderer;this.isShorts(n)&&(e.richGridContents.splice(t,1),this.needProcess=!0)}getBrowseId(){let e="";return this.iterate(this.message?.responseContext,"key",(t,n)=>{t.key==="browse_id"&&(e=t.value,n.length=0)}),e}async translate(){let e=this.argument.lyricLang?.trim();if(!(this.name==="Browse"&&this.getBrowseId().startsWith("MPLYt"))||e==="off")return;let t="",n,s=!1;if(this.iterate(this.message,"timedLyricsContent",(o,l)=>{n=o.timedLyricsContent,t=o.timedLyricsContent.runs.map(d=>d.text).join(`
`),s=!0,l.length=0}),s||this.iterate(this.message,"description",(o,l)=>{n=o.description.runs[0],t=o.description.runs[0].text,l.length=0,s=!0}),!s)return;let r=e.split("-")[0],a=es(t,e),i=await w.fetch({method:"GET",url:a});if(i.status===200&&i.body){let o=JSON.parse(i.body),l=" & Translated by Google",d=o[2].includes(r);n.text?(n.text=o[0].map(m=>d?m[0]:m[1]+m[0]||"").join(`\r
`),this.iterate(this.message,"footer",(m,p)=>{m.footer.runs[0].text+=l,p.length=0})):n.runs.length<=o[0].length&&(n.runs.forEach((m,p)=>{m.text=d?o[0][p][0]:m.text+`
${o[0][p][0]}`}),n.footerLabel+=l),this.needProcess=!0}}},ts=class extends me{static{c(this,"be")}constructor(e=yn,t="Next"){super(e,t)}addTranslateTab(){this.iterate(this.message?.a1F7?.musicPlayRender,"items",(e,t)=>{let n=e.items.find(s=>s.tab.info?.browseInfo?.browseId.startsWith("MPLYt"));n&&(n.tab.name=n.tab.name+"\u21C4"),this.needProcess=!0,t.length=0})}},at=class extends Y{static{c(this,"ee")}constructor(e=ze,t="Player"){super(e,t)}pure(){return this.message.adPlacements?.length&&(this.message.adPlacements.length=0),delete this.message?.playbackTracking?.pageadViewthroughconversion,this.addPlayAbility(),this.addTranslateCaption(),this.needProcess=!0,this}addPlayAbility(){let e=this.message?.playabilityStatus?.miniPlayer?.miniPlayerRender;typeof e=="object"&&(e.active=!0),typeof this.message.playabilityStatus=="object"&&(this.message.playabilityStatus.backgroundPlayer=new Ke({backgroundPlayerRender:{active:!0}}))}addTranslateCaption(){let e=this.argument.captionLang;e!=="off"&&this.iterate(this.message,"captionTracks",(t,n)=>{let s=t.captionTracks,r=t.audioTracks;if(Array.isArray(s)){let i={[e]:2,en:1},o=-1,l=0;for(let d=0;d<s.length;d++){let m=s[d],p=i[m.languageCode];p&&p>o&&(o=p,l=d),m.isTranslatable=!0}if(o!==2){let d=new He({baseUrl:s[l].baseUrl+`&tlang=${e}`,name:{runs:[{text:`@Enhance (${e})`}]},vssId:`.${e}`,languageCode:e});s.push(d)}if(Array.isArray(r)){let d=o===2?l:s.length-1;for(let m of r)m.captionTrackIndices?.includes(d)||m.captionTrackIndices.push(d),m.defaultCaptionTrackIndex=d,m.captionsInitialState=3}}let a={de:"Deutsch",ru:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439",fr:"Fran\xE7ais",fil:"Filipino",ko:"\uD55C\uAD6D\uC5B4",ja:"\u65E5\u672C\u8A9E",en:"English",vi:"Ti\u1EBFng Vi\u1EC7t","zh-Hant":"\u4E2D\u6587\uFF08\u7E41\u9AD4\uFF09","zh-Hans":"\u4E2D\u6587\uFF08\u7B80\u4F53\uFF09",und:"@VirgilClyne"};t.translationLanguages=Object.entries(a).map(([i,o])=>new Qe({languageCode:i,languageName:{runs:[{text:o}]}})),n.length=0})}},ns=class extends me{static{c(this,"ke")}constructor(e=Tn,t="Search"){super(e,t)}},ss=class extends Y{static{c(this,"Te")}constructor(e=In,t="Shorts"){super(e,t)}pure(){let e=this.message.entries?.length;if(e)for(let t=e-1;t>=0;t--)this.message.entries[t].command?.reelWatchEndpoint?.overlay||(this.message.entries.splice(t,1),this.needProcess=!0);return this}},rs=class extends Y{static{c(this,"we")}constructor(e=Fn,t="Guide"){super(e,t)}pure(){let e=["SPunlimited"];return this.argument.blockUpload&&e.push("FEuploads"),this.argument.blockImmersive&&e.push("FEmusic_immersive"),this.iterate(this.message,"rendererItems",t=>{for(let n=t.rendererItems.length-1;n>=0;n--){let s=t.rendererItems[n]?.iconRender?.browseId||t.rendererItems[n]?.labelRender?.browseId;e.includes(s)&&(t.rendererItems.splice(n,1),this.needProcess=!0)}}),this}},as=class extends Y{static{c(this,"xe")}constructor(e=Gn,t="Setting"){super(e,t)}pure(){this.iterate(this.message,"categoryId",t=>{if(t.categoryId===10005){let n={f1:135,f2:20434,f3:2,timeInfo:this.message.trackingParams.timeInfo},s=new tt({settingBooleanRenderer:{itemId:0,enableServiceEndpoint:{trackingParams:n,setClientSettingEndpoint:{settingDatas:{clientSettingEnum:{item:151},boolValue:!0}}},disableServiceEndpoint:{trackingParams:n,setClientSettingEndpoint:{settingDatas:{clientSettingEnum:{item:151},boolValue:!1}}},clickTrackingParams:n}});t.subSettings.push(s)}});let e=new et({settingCategoryEntryRenderer:{f2:1,f3:1,trackingParams:{f1:2,f2:20020,f3:8,timeInfo:this.message.trackingParams.timeInfo},f6:0,f7:1,f8:1,f9:1,f10:1,f12:1}});return this.message.settingItems.push(e),this.needProcess=!0,this}},is=class extends at{static{c(this,"Ie")}constructor(e=Kn,t="Watch"){super(e,t)}pure(){let e=this.message;return this.iterate(this.message,"player",(t,n)=>{this.message=t.player,n.length=0}),super.pure(),this.message=e,this}},os=new Map([["browse",me],["next",ts],["player",at],["search",ns],["reel_watch_sequence",ss],["guide",rs],["get_setting",as],["get_watch",is]]);function ls(e){for(let[t,n]of os.entries())if(e.includes(t))return new n;return null}c(ls,"qe");async function us(){let e=ls(w.request.url);if(e){let t=w.response.bodyBytes;w.timeStart("fromBinary"),e.fromBinary(t),w.timeEnd("fromBinary"),w.timeStart("modify"),await e.modify(),w.timeEnd("modify"),e.done()}else w.msg("YouTube Enhance","\u811A\u672C\u9700\u8981\u66F4\u65B0","\u5916\u90E8\u8D44\u6E90 -> \u5168\u90E8\u66F4\u65B0"),w.exit()}c(us,"cr"),us().catch(e=>{w.log(e.toString())}).finally(()=>{w.exit()})})();
