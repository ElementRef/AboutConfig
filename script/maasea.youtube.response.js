// https://raw.githubusercontent.com/ElementRef/AboutConfig/main/script/maasea.youtube.response.js
(()=>{var on=Object.defineProperty,ln=(e,n,t)=>n in e?on(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,q=(e,n,t)=>(ln(e,typeof n!="symbol"?n+"":n,t),t);(function(e){function n(){}function t(){}var s=String.fromCharCode,r={}.toString,a=r.call(e.SharedArrayBuffer),i=r(),o=e.Uint8Array,l=o||Array,c=o?ArrayBuffer:l,m=c.isView||function(b){return b&&"length"in b},p=r.call(c.prototype);c=t.prototype;var g=e.TextEncoder,f=new(o?Uint16Array:l)(32);n.prototype.decode=function(b){if(!m(b)){var B=r.call(b);if(B!==p&&B!==a&&B!==i)throw TypeError("Failed to execute 'decode' on 'TextDecoder': The provided value is not of type '(ArrayBuffer or ArrayBufferView)'");b=o?new l(b):b||[]}for(var I=B="",h=0,k=b.length|0,Y=k-32|0,v,w,E=0,C=0,F,O=0,A=-1;h<k;){for(v=h<=Y?32:k-h|0;O<v;h=h+1|0,O=O+1|0){switch(w=b[h]&255,w>>4){case 15:if(F=b[h=h+1|0]&255,F>>6!==2||247<w){h=h-1|0;break}E=(w&7)<<6|F&63,C=5,w=256;case 14:F=b[h=h+1|0]&255,E<<=6,E|=(w&15)<<6|F&63,C=F>>6===2?C+4|0:24,w=w+256&768;case 13:case 12:F=b[h=h+1|0]&255,E<<=6,E|=(w&31)<<6|F&63,C=C+7|0,h<k&&F>>6===2&&E>>C&&1114112>E?(w=E,E=E-65536|0,0<=E&&(A=(E>>10)+55296|0,w=(E&1023)+56320|0,31>O?(f[O]=A,O=O+1|0,A=-1):(F=A,A=w,w=F))):(w>>=8,h=h-w-1|0,w=65533),E=C=0,v=h<=Y?32:k-h|0;default:f[O]=w;continue;case 11:case 10:case 9:case 8:}f[O]=65533}if(I+=s(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15],f[16],f[17],f[18],f[19],f[20],f[21],f[22],f[23],f[24],f[25],f[26],f[27],f[28],f[29],f[30],f[31]),32>O&&(I=I.slice(0,O-32|0)),h<k){if(f[0]=A,O=~A>>>31,A=-1,I.length<B.length)continue}else A!==-1&&(I+=s(A));B+=I,I=""}return B},c.encode=function(b){b=b===void 0?"":""+b;var B=b.length|0,I=new l((B<<1)+8|0),h,k=0,Y=!o;for(h=0;h<B;h=h+1|0,k=k+1|0){var v=b.charCodeAt(h)|0;if(127>=v)I[k]=v;else{if(2047>=v)I[k]=192|v>>6;else{e:{if(55296<=v)if(56319>=v){var w=b.charCodeAt(h=h+1|0)|0;if(56320<=w&&57343>=w){if(v=(v<<10)+w-56613888|0,65535<v){I[k]=240|v>>18,I[k=k+1|0]=128|v>>12&63,I[k=k+1|0]=128|v>>6&63,I[k=k+1|0]=128|v&63;continue}break e}v=65533}else 57343>=v&&(v=65533);!Y&&h<<1<k&&h<<1<(k-7|0)&&(Y=!0,w=new l(3*B),w.set(I),I=w)}I[k]=224|v>>12,I[k=k+1|0]=128|v>>6&63}I[k=k+1|0]=128|v&63}}return o?I.subarray(0,k):I.slice(0,k)},g||(e.TextDecoder=n,e.TextEncoder=t)})(globalThis);function N(e,n){if(!e)throw new Error(n)}var un=34028234663852886e22,cn=-34028234663852886e22,dn=4294967295,mn=2147483647,fn=-2147483648;function z(e){if(typeof e!="number")throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>mn||e<fn)throw new Error("invalid int 32: "+e)}function se(e){if(typeof e!="number")throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>dn||e<0)throw new Error("invalid uint 32: "+e)}function de(e){if(typeof e!="number")throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>un||e<cn))throw new Error("invalid float 32: "+e)}var me=Symbol("@bufbuild/protobuf/enum-type");function pn(e){let n=e[me];return N(n,"missing enum type on enum object"),n}function fe(e,n,t,s){e[me]=pe(n,t.map(r=>({no:r.no,name:r.name,localName:e[r.no]})),s)}function pe(e,n,t){let s=Object.create(null),r=Object.create(null),a=[];for(let i of n){let o=ge(i);a.push(o),s[i.name]=o,r[i.no]=o}return{typeName:e,values:a,findName(i){return s[i]},findNumber(i){return r[i]}}}function gn(e,n,t){let s={};for(let r of n){let a=ge(r);s[a.localName]=a.no,s[a.no]=a.localName}return fe(s,e,n,t),s}function ge(e){return"localName"in e?e:Object.assign(Object.assign({},e),{localName:e.name})}var L=class{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,n){let t=this.getType(),s=t.runtime.bin,r=s.makeReadOptions(n);return s.readMessage(this,r.readerFactory(e),e.byteLength,r),this}fromJson(e,n){let t=this.getType(),s=t.runtime.json,r=s.makeReadOptions(n);return s.readMessage(t,e,r,this),this}fromJsonString(e,n){let t;try{t=JSON.parse(e)}catch(s){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${s instanceof Error?s.message:String(s)}`)}return this.fromJson(t,n)}toBinary(e){let n=this.getType(),t=n.runtime.bin,s=t.makeWriteOptions(e),r=s.writerFactory();return t.writeMessage(this,r,s),r.finish()}toJson(e){let n=this.getType(),t=n.runtime.json,s=t.makeWriteOptions(e);return t.writeMessage(this,s)}toJsonString(e){var n;let t=this.toJson(e);return JSON.stringify(t,null,(n=e?.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}};function hn(e,n,t,s){var r;let a=(r=s?.localName)!==null&&r!==void 0?r:n.substring(n.lastIndexOf(".")+1),i={[a]:function(o){e.util.initFields(this),e.util.initPartial(o,this)}}[a];return Object.setPrototypeOf(i.prototype,new L),Object.assign(i,{runtime:e,typeName:n,fields:e.util.newFieldList(t),fromBinary(o,l){return new i().fromBinary(o,l)},fromJson(o,l){return new i().fromJson(o,l)},fromJsonString(o,l){return new i().fromJsonString(o,l)},equals(o,l){return e.util.equals(i,o,l)}}),i}var u;(function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"})(u||(u={}));var x;(function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING"})(x||(x={}));function yn(){let e=0,n=0;for(let s=0;s<28;s+=7){let r=this.buf[this.pos++];if(e|=(r&127)<<s,!(r&128))return this.assertBounds(),[e,n]}let t=this.buf[this.pos++];if(e|=(t&15)<<28,n=(t&112)>>4,!(t&128))return this.assertBounds(),[e,n];for(let s=3;s<=31;s+=7){let r=this.buf[this.pos++];if(n|=(r&127)<<s,!(r&128))return this.assertBounds(),[e,n]}throw new Error("invalid varint")}function re(e,n,t){for(let a=0;a<28;a=a+7){let i=e>>>a,o=!(!(i>>>7)&&n==0),l=(o?i|128:i)&255;if(t.push(l),!o)return}let s=e>>>28&15|(n&7)<<4,r=!!(n>>3);if(t.push((r?s|128:s)&255),!!r){for(let a=3;a<31;a=a+7){let i=n>>>a,o=!!(i>>>7),l=(o?i|128:i)&255;if(t.push(l),!o)return}t.push(n>>>31&1)}}var K=4294967296;function he(e){let n=e[0]==="-";n&&(e=e.slice(1));let t=1e6,s=0,r=0;function a(i,o){let l=Number(e.slice(i,o));r*=t,s=s*t+l,s>=K&&(r=r+(s/K|0),s=s%K)}return a(-24,-18),a(-18,-12),a(-12,-6),a(-6),n?be(s,r):ae(s,r)}function bn(e,n){let t=ae(e,n),s=t.hi&2147483648;s&&(t=be(t.lo,t.hi));let r=ye(t.lo,t.hi);return s?"-"+r:r}function ye(e,n){if({lo:e,hi:n}=kn(e,n),n<=2097151)return String(K*n+e);let t=e&16777215,s=(e>>>24|n<<8)&16777215,r=n>>16&65535,a=t+s*6777216+r*6710656,i=s+r*8147497,o=r*2,l=1e7;return a>=l&&(i+=Math.floor(a/l),a%=l),i>=l&&(o+=Math.floor(i/l),i%=l),o.toString()+ke(i)+ke(a)}function kn(e,n){return{lo:e>>>0,hi:n>>>0}}function ae(e,n){return{lo:e|0,hi:n|0}}function be(e,n){return n=~n,e?e=~e+1:n+=1,ae(e,n)}var ke=e=>{let n=String(e);return"0000000".slice(n.length)+n};function Te(e,n){if(e>=0){for(;e>127;)n.push(e&127|128),e=e>>>7;n.push(e)}else{for(let t=0;t<9;t++)n.push(e&127|128),e=e>>7;n.push(1)}}function Tn(){let e=this.buf[this.pos++],n=e&127;if(!(e&128))return this.assertBounds(),n;if(e=this.buf[this.pos++],n|=(e&127)<<7,!(e&128))return this.assertBounds(),n;if(e=this.buf[this.pos++],n|=(e&127)<<14,!(e&128))return this.assertBounds(),n;if(e=this.buf[this.pos++],n|=(e&127)<<21,!(e&128))return this.assertBounds(),n;e=this.buf[this.pos++],n|=(e&15)<<28;for(let t=5;e&128&&t<10;t++)e=this.buf[this.pos++];if(e&128)throw new Error("invalid varint");return this.assertBounds(),n>>>0}function wn(){let e=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof e.getBigInt64=="function"&&typeof e.getBigUint64=="function"&&typeof e.setBigInt64=="function"&&typeof e.setBigUint64=="function"&&(typeof process!="object"||typeof process.env!="object"||process.env.BUF_BIGINT_DISABLE!=="1")){let s=BigInt("-9223372036854775808"),r=BigInt("9223372036854775807"),a=BigInt("0"),i=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(o){let l=typeof o=="bigint"?o:BigInt(o);if(l>r||l<s)throw new Error(`int64 invalid: ${o}`);return l},uParse(o){let l=typeof o=="bigint"?o:BigInt(o);if(l>i||l<a)throw new Error(`uint64 invalid: ${o}`);return l},enc(o){return e.setBigInt64(0,this.parse(o),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(o){return e.setBigInt64(0,this.uParse(o),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec(o,l){return e.setInt32(0,o,!0),e.setInt32(4,l,!0),e.getBigInt64(0,!0)},uDec(o,l){return e.setInt32(0,o,!0),e.setInt32(4,l,!0),e.getBigUint64(0,!0)}}}let n=s=>N(/^-?[0-9]+$/.test(s),`int64 invalid: ${s}`),t=s=>N(/^[0-9]+$/.test(s),`uint64 invalid: ${s}`);return{zero:"0",supported:!1,parse(s){return typeof s!="string"&&(s=s.toString()),n(s),s},uParse(s){return typeof s!="string"&&(s=s.toString()),t(s),s},enc(s){return typeof s!="string"&&(s=s.toString()),n(s),he(s)},uEnc(s){return typeof s!="string"&&(s=s.toString()),t(s),he(s)},dec(s,r){return bn(s,r)},uDec(s,r){return ye(s,r)}}}var S=wn(),T;(function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"})(T||(T={}));var vn=class{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let s=0;s<this.chunks.length;s++)e+=this.chunks[s].length;let n=new Uint8Array(e),t=0;for(let s=0;s<this.chunks.length;s++)n.set(this.chunks[s],t),t+=this.chunks[s].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(se(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return z(e),Te(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){de(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){se(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){z(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return z(e),e=(e<<1^e>>31)>>>0,Te(e,this.buf),this}sfixed64(e){let n=new Uint8Array(8),t=new DataView(n.buffer),s=S.enc(e);return t.setInt32(0,s.lo,!0),t.setInt32(4,s.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),t=new DataView(n.buffer),s=S.uEnc(e);return t.setInt32(0,s.lo,!0),t.setInt32(4,s.hi,!0),this.raw(n)}int64(e){let n=S.enc(e);return re(n.lo,n.hi,this.buf),this}sint64(e){let n=S.enc(e),t=n.hi>>31,s=n.lo<<1^t,r=(n.hi<<1|n.lo>>>31)^t;return re(s,r,this.buf),this}uint64(e){let n=S.uEnc(e);return re(n.lo,n.hi,this.buf),this}},In=class{constructor(e,n){this.varint64=yn,this.uint32=Tn,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=n??new TextDecoder}tag(){let e=this.uint32(),n=e>>>3,t=e&7;if(n<=0||t<0||t>5)throw new Error("illegal tag: field no "+n+" wire type "+t);return[n,t]}skip(e){let n=this.pos;switch(e){case T.Varint:for(;this.buf[this.pos++]&128;);break;case T.Bit64:this.pos+=4;case T.Bit32:this.pos+=4;break;case T.LengthDelimited:let t=this.uint32();this.pos+=t;break;case T.StartGroup:let s;for(;(s=this.tag()[1])!==T.EndGroup;)this.skip(s);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return S.dec(...this.varint64())}uint64(){return S.uDec(...this.varint64())}sint64(){let[e,n]=this.varint64(),t=-(e&1);return e=(e>>>1|(n&1)<<31)^t,n=n>>>1^t,S.dec(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return S.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return S.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}};function $(e,n,t){if(n===t)return!0;if(e==u.BYTES){if(!(n instanceof Uint8Array)||!(t instanceof Uint8Array)||n.length!==t.length)return!1;for(let s=0;s<n.length;s++)if(n[s]!==t[s])return!1;return!0}switch(e){case u.UINT64:case u.FIXED64:case u.INT64:case u.SFIXED64:case u.SINT64:return n==t}return!1}function H(e,n){switch(e){case u.BOOL:return!1;case u.UINT64:case u.FIXED64:case u.INT64:case u.SFIXED64:case u.SINT64:return n==0?S.zero:"0";case u.DOUBLE:case u.FLOAT:return 0;case u.BYTES:return new Uint8Array(0);case u.STRING:return"";default:return 0}}function we(e,n){let t=n===void 0,s=T.Varint,r=n===0;switch(e){case u.STRING:r=t||!n.length,s=T.LengthDelimited;break;case u.BOOL:r=n===!1;break;case u.DOUBLE:s=T.Bit64;break;case u.FLOAT:s=T.Bit32;break;case u.INT64:r=t||n==0;break;case u.UINT64:r=t||n==0;break;case u.FIXED64:r=t||n==0,s=T.Bit64;break;case u.BYTES:r=t||!n.byteLength,s=T.LengthDelimited;break;case u.FIXED32:s=T.Bit32;break;case u.SFIXED32:s=T.Bit32;break;case u.SFIXED64:r=t||n==0,s=T.Bit64;break;case u.SINT64:r=t||n==0;break}let a=u[e].toLowerCase();return[s,a,t||r]}function Nn(e,n,t,s){let r;return{typeName:n,extendee:t,get field(){if(!r){let a=typeof s=="function"?s():s;a.name=n.split(".").pop(),a.jsonName=`[${n}]`,r=e.util.newFieldList([a]).list()[0]}return r},runtime:e}}function ve(e){let n=e.field.localName,t=Object.create(null);return t[n]=Sn(e),[t,()=>t[n]]}function Sn(e){let n=e.field;if(n.repeated)return[];if(n.default!==void 0)return n.default;switch(n.kind){case"enum":return n.T.values[0].no;case"scalar":return H(n.T,n.L);case"message":let t=n.T,s=new t;return t.fieldWrapper?t.fieldWrapper.unwrapField(s):s;case"map":throw"map fields are not allowed to be extensions"}}function En(e,n){if(!n.repeated&&(n.kind=="enum"||n.kind=="scalar")){for(let t=e.length-1;t>=0;--t)if(e[t].no==n.no)return[e[t]];return[]}return e.filter(t=>t.no===n.no)}function Bn(e,n,t,s){return{syntax:e,json:n,bin:t,util:s,makeMessageType(r,a,i){return hn(this,r,a,i)},makeEnum:gn,makeEnumType:pe,getEnumType:pn,makeExtension(r,a,i){return Nn(this,r,a,i)}}}function Ie(e,n){return n instanceof L||!e.fieldWrapper?n:e.fieldWrapper.wrapField(n)}var hs={"google.protobuf.DoubleValue":u.DOUBLE,"google.protobuf.FloatValue":u.FLOAT,"google.protobuf.Int64Value":u.INT64,"google.protobuf.UInt64Value":u.UINT64,"google.protobuf.Int32Value":u.INT32,"google.protobuf.UInt32Value":u.UINT32,"google.protobuf.BoolValue":u.BOOL,"google.protobuf.StringValue":u.STRING,"google.protobuf.BytesValue":u.BYTES},P=Symbol("@bufbuild/protobuf/unknown-fields"),Ne={readUnknownFields:!0,readerFactory:e=>new In(e)},Se={writeUnknownFields:!0,writerFactory:()=>new vn};function On(e){return e?Object.assign(Object.assign({},Ne),e):Ne}function Fn(e){return e?Object.assign(Object.assign({},Se),e):Se}function Un(){return{makeReadOptions:On,makeWriteOptions:Fn,listUnknownFields(e){var n;return(n=e[P])!==null&&n!==void 0?n:[]},discardUnknownFields(e){delete e[P]},writeUnknownFields(e,n){let t=e[P];if(t)for(let s of t)n.tag(s.no,s.wireType).raw(s.data)},onUnknownField(e,n,t,s){let r=e;Array.isArray(r[P])||(r[P]=[]),r[P].push({no:n,wireType:t,data:s})},readMessage(e,n,t,s,r){let a=e.getType(),i=r?n.len:n.pos+t,o,l;for(;n.pos<i&&([o,l]=n.tag(),l!=T.EndGroup);){let c=a.fields.find(o);if(!c){let m=n.skip(l);s.readUnknownFields&&this.onUnknownField(e,o,l,m);continue}Ee(e,n,c,l,s)}if(r&&(l!=T.EndGroup||o!==t))throw new Error("invalid end group tag")},readField:Ee}}function Ee(e,n,t,s,r){let{repeated:a,localName:i}=t;switch(t.oneof&&(e=e[t.oneof.localName],e.case!=i&&delete e.value,e.case=i,i="value"),t.kind){case"scalar":case"enum":let o=t.kind=="enum"?u.INT32:t.T,l=Z;if(t.kind=="scalar"&&t.L>0&&(l=Rn),a){let g=e[i];if(s==T.LengthDelimited&&o!=u.STRING&&o!=u.BYTES){let f=n.uint32()+n.pos;for(;n.pos<f;)g.push(l(n,o))}else g.push(l(n,o))}else e[i]=l(n,o);break;case"message":let c=t.T;a?e[i].push(Q(n,new c,r,t)):e[i]instanceof L?Q(n,e[i],r,t):(e[i]=Q(n,new c,r,t),c.fieldWrapper&&!t.oneof&&!t.repeated&&(e[i]=c.fieldWrapper.unwrapField(e[i])));break;case"map":let[m,p]=An(t,n,r);e[i][m]=p;break}}function Q(e,n,t,s){let r=n.getType().runtime.bin,a=s?.delimited;return r.readMessage(n,e,a?s?.no:e.uint32(),t,a),n}function An(e,n,t){let s=n.uint32(),r=n.pos+s,a,i;for(;n.pos<r;){let[o]=n.tag();switch(o){case 1:a=Z(n,e.K);break;case 2:switch(e.V.kind){case"scalar":i=Z(n,e.V.T);break;case"enum":i=n.int32();break;case"message":i=Q(n,new e.V.T,t,void 0);break}break}}if(a===void 0){let o=H(e.K,x.BIGINT);a=e.K==u.BOOL?o.toString():o}if(typeof a!="string"&&typeof a!="number"&&(a=a.toString()),i===void 0)switch(e.V.kind){case"scalar":i=H(e.V.T,x.BIGINT);break;case"enum":i=0;break;case"message":i=new e.V.T;break}return[a,i]}function Rn(e,n){let t=Z(e,n);return typeof t=="bigint"?t.toString():t}function Z(e,n){switch(n){case u.STRING:return e.string();case u.BOOL:return e.bool();case u.DOUBLE:return e.double();case u.FLOAT:return e.float();case u.INT32:return e.int32();case u.INT64:return e.int64();case u.UINT64:return e.uint64();case u.FIXED64:return e.fixed64();case u.BYTES:return e.bytes();case u.FIXED32:return e.fixed32();case u.SFIXED32:return e.sfixed32();case u.SFIXED64:return e.sfixed64();case u.SINT64:return e.sint64();case u.UINT32:return e.uint32();case u.SINT32:return e.sint32()}}function $n(e,n,t,s,r){e.tag(t.no,T.LengthDelimited),e.fork();let a=s;switch(t.K){case u.INT32:case u.FIXED32:case u.UINT32:case u.SFIXED32:case u.SINT32:a=Number.parseInt(s);break;case u.BOOL:N(s=="true"||s=="false"),a=s=="true";break}switch(G(e,t.K,1,a,!0),t.V.kind){case"scalar":G(e,t.V.T,2,r,!0);break;case"enum":G(e,u.INT32,2,r,!0);break;case"message":e.tag(2,T.LengthDelimited).bytes(r.toBinary(n));break}e.join()}function Be(e,n,t,s){let r=Ie(t.T,s);t?.delimited?e.tag(t.no,T.StartGroup).raw(r.toBinary(n)).tag(t.no,T.EndGroup):e.tag(t.no,T.LengthDelimited).bytes(r.toBinary(n))}function G(e,n,t,s,r){let[a,i,o]=we(n,s);(!o||r)&&e.tag(t,a)[i](s)}function Mn(e,n,t,s){if(!s.length)return;e.tag(t,T.LengthDelimited).fork();let[,r]=we(n);for(let a=0;a<s.length;a++)e[r](s[a]);e.join()}function Dn(){return Object.assign(Object.assign({},Un()),{writeField:Oe,writeMessage(e,n,t){let s=e.getType();for(let r of s.fields.byNumber()){let a,i=r.localName;if(r.oneof){let o=e[r.oneof.localName];if(o.case!==i)continue;a=o.value}else a=e[i];Oe(r,a,n,t)}return t.writeUnknownFields&&this.writeUnknownFields(e,n),n}})}function Oe(e,n,t,s){let r=e.repeated;switch(e.kind){case"scalar":case"enum":let a=e.kind=="enum"?u.INT32:e.T;if(r)if(e.packed)Mn(t,a,e.no,n);else for(let i of n)G(t,a,e.no,i,!0);else n!==void 0&&G(t,a,e.no,n,!!e.oneof||e.opt);break;case"message":if(r)for(let i of n)Be(t,s,e,i);else n!==void 0&&Be(t,s,e,n);break;case"map":for(let[i,o]of Object.entries(n))$n(t,s,e,i,o);break}}var R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),ee=[];for(let e=0;e<R.length;e++)ee[R[e].charCodeAt(0)]=e;ee[45]=R.indexOf("+"),ee[95]=R.indexOf("/");var ie={dec(e){let n=e.length*3/4;e[e.length-2]=="="?n-=2:e[e.length-1]=="="&&(n-=1);let t=new Uint8Array(n),s=0,r=0,a,i=0;for(let o=0;o<e.length;o++){if(a=ee[e.charCodeAt(o)],a===void 0)switch(e[o]){case"=":r=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(r){case 0:i=a,r=1;break;case 1:t[s++]=i<<2|(a&48)>>4,i=a,r=2;break;case 2:t[s++]=(i&15)<<4|(a&60)>>2,i=a,r=3;break;case 3:t[s++]=(i&3)<<6|a,r=0;break}}if(r==1)throw Error("invalid base64 string.");return t.subarray(0,s)},enc(e){let n="",t=0,s,r=0;for(let a=0;a<e.length;a++)switch(s=e[a],t){case 0:n+=R[s>>2],r=(s&3)<<4,t=1;break;case 1:n+=R[r|s>>4],r=(s&15)<<2,t=2;break;case 2:n+=R[r|s>>6],n+=R[s&63],t=0;break}return t&&(n+=R[r],n+="=",t==1&&(n+="=")),n}};function xn(e,n,t){Ue(n,e);let s=n.runtime.bin.makeReadOptions(t),r=En(e.getType().runtime.bin.listUnknownFields(e),n.field),[a,i]=ve(n);for(let o of r)n.runtime.bin.readField(a,s.readerFactory(o.data),n.field,o.wireType,s);return i()}function Cn(e,n,t,s){Ue(n,e);let r=n.runtime.bin.makeReadOptions(s),a=n.runtime.bin.makeWriteOptions(s);if(Fe(e,n)){let c=e.getType().runtime.bin.listUnknownFields(e).filter(m=>m.no!=n.field.no);e.getType().runtime.bin.discardUnknownFields(e);for(let m of c)e.getType().runtime.bin.onUnknownField(e,m.no,m.wireType,m.data)}let i=a.writerFactory(),o=n.field;!o.opt&&!o.repeated&&(o.kind=="enum"||o.kind=="scalar")&&(o=Object.assign(Object.assign({},n.field),{opt:!0})),n.runtime.bin.writeField(o,t,i,a);let l=r.readerFactory(i.finish());for(;l.pos<l.len;){let[c,m]=l.tag(),p=l.skip(m);e.getType().runtime.bin.onUnknownField(e,c,m,p)}}function Fe(e,n){let t=e.getType();return n.extendee.typeName===t.typeName&&!!t.runtime.bin.listUnknownFields(e).find(s=>s.no==n.field.no)}function Ue(e,n){N(e.extendee.typeName==n.getType().typeName,`extension ${e.typeName} can only be applied to message ${e.extendee.typeName}`)}var Ae={ignoreUnknownFields:!1},Re={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function Ln(e){return e?Object.assign(Object.assign({},Ae),e):Ae}function Pn(e){return e?Object.assign(Object.assign({},Re),e):Re}function jn(e,n){let t=n(Vn,Me);return{makeReadOptions:Ln,makeWriteOptions:Pn,readMessage(s,r,a,i){if(r==null||Array.isArray(r)||typeof r!="object")throw new Error(`cannot decode message ${s.typeName} from JSON: ${U(r)}`);i=i??new s;let o=new Map,l=a.typeRegistry;for(let[c,m]of Object.entries(r)){let p=s.fields.findJsonName(c);if(p){if(p.oneof){if(m===null&&p.kind=="scalar")continue;let g=o.get(p.oneof);if(g!==void 0)throw new Error(`cannot decode message ${s.typeName} from JSON: multiple keys for oneof "${p.oneof.name}" present: "${g}", "${c}"`);o.set(p.oneof,c)}$e(i,m,p,a,s,e)}else{let g=!1;if(l?.findExtension&&c.startsWith("[")&&c.endsWith("]")){let f=l.findExtension(c.substring(1,c.length-1));if(f&&f.extendee.typeName==s.typeName){g=!0;let[b,B]=ve(f);$e(b,m,f.field,a,f,!0),Cn(i,f,B(),a)}}if(!g&&!a.ignoreUnknownFields)throw new Error(`cannot decode message ${s.typeName} from JSON: key "${c}" is unknown`)}}return i},writeMessage(s,r){let a=s.getType(),i={},o;try{for(let c of a.fields.byMember()){let m;if(c.kind=="oneof"){let p=s[c.localName];if(p.value===void 0)continue;if(o=c.findField(p.case),!o)throw"oneof case not found: "+p.case;m=t(o,p.value,r)}else o=c,m=t(o,s[o.localName],r);m!==void 0&&(i[r.useProtoFieldName?o.name:o.jsonName]=m)}let l=r.typeRegistry;if(l?.findExtensionFor)for(let c of a.runtime.bin.listUnknownFields(s)){let m=l.findExtensionFor(a.typeName,c.no);if(m&&Fe(s,m)){let p=xn(s,m,r),g=t(m.field,p,r);g!==void 0&&(i[m.field.jsonName]=g)}}}catch(l){let c=o?`cannot encode field ${a.typeName}.${o.name} to JSON`:`cannot encode message ${a.typeName} to JSON`,m=l instanceof Error?l.message:String(l);throw new Error(c+(m.length>0?`: ${m}`:""))}return i},readScalar:(s,r,a)=>J(s,r,a,e),writeScalar:Me,debug:U}}function U(e){if(e===null)return"null";switch(typeof e){case"object":return Array.isArray(e)?"array":"object";case"string":return e.length>100?"string":`"${e.split('"').join('\\"')}"`;default:return String(e)}}function $e(e,n,t,s,r,a){let i=t.localName;if(t.oneof){if(n===null&&t.kind=="scalar")return;e=e[t.oneof.localName]={case:i},i="value"}if(t.repeated){if(n===null)return;if(!Array.isArray(n))throw new Error(`cannot decode field ${r.typeName}.${t.name} from JSON: ${U(n)}`);let o=e[i];for(let l of n){if(l===null)throw new Error(`cannot decode field ${r.typeName}.${t.name} from JSON: ${U(l)}`);let c;switch(t.kind){case"message":c=t.T.fromJson(l,s);break;case"enum":if(c=oe(t.T,l,s.ignoreUnknownFields,!0),c===void 0)continue;break;case"scalar":try{c=J(t.T,l,t.L,!0)}catch(m){let p=`cannot decode field ${r.typeName}.${t.name} from JSON: ${U(l)}`;throw m instanceof Error&&m.message.length>0&&(p+=`: ${m.message}`),new Error(p)}break}o.push(c)}}else if(t.kind=="map"){if(n===null)return;if(typeof n!="object"||Array.isArray(n))throw new Error(`cannot decode field ${r.typeName}.${t.name} from JSON: ${U(n)}`);let o=e[i];for(let[l,c]of Object.entries(n)){if(c===null)throw new Error(`cannot decode field ${r.typeName}.${t.name} from JSON: map value null`);let m;switch(t.V.kind){case"message":m=t.V.T.fromJson(c,s);break;case"enum":if(m=oe(t.V.T,c,s.ignoreUnknownFields,!0),m===void 0)continue;break;case"scalar":try{m=J(t.V.T,c,x.BIGINT,!0)}catch(p){let g=`cannot decode map value for field ${r.typeName}.${t.name} from JSON: ${U(n)}`;throw p instanceof Error&&p.message.length>0&&(g+=`: ${p.message}`),new Error(g)}break}try{o[J(t.K,t.K==u.BOOL?l=="true"?!0:l=="false"?!1:l:l,x.BIGINT,!0).toString()]=m}catch(p){let g=`cannot decode map key for field ${r.typeName}.${t.name} from JSON: ${U(n)}`;throw p instanceof Error&&p.message.length>0&&(g+=`: ${p.message}`),new Error(g)}}}else switch(t.kind){case"message":let o=t.T;if(n===null&&o.typeName!="google.protobuf.Value"){if(t.oneof)throw new Error(`cannot decode field ${r.typeName}.${t.name} from JSON: null is invalid for oneof field`);return}e[i]instanceof L?e[i].fromJson(n,s):(e[i]=o.fromJson(n,s),o.fieldWrapper&&!t.oneof&&(e[i]=o.fieldWrapper.unwrapField(e[i])));break;case"enum":let l=oe(t.T,n,s.ignoreUnknownFields,a);l!==void 0&&(e[i]=l);break;case"scalar":try{e[i]=J(t.T,n,t.L,a)}catch(c){let m=`cannot decode field ${r.typeName}.${t.name} from JSON: ${U(n)}`;throw c instanceof Error&&c.message.length>0&&(m+=`: ${c.message}`),new Error(m)}break}}function J(e,n,t,s){switch(e){case u.DOUBLE:case u.FLOAT:if(n===null)return s?0:void 0;if(n==="NaN")return Number.NaN;if(n==="Infinity")return Number.POSITIVE_INFINITY;if(n==="-Infinity")return Number.NEGATIVE_INFINITY;if(n===""||typeof n=="string"&&n.trim().length!==n.length||typeof n!="string"&&typeof n!="number")break;let r=Number(n);if(Number.isNaN(r)||!Number.isFinite(r))break;return e==u.FLOAT&&de(r),r;case u.INT32:case u.FIXED32:case u.SFIXED32:case u.SINT32:case u.UINT32:if(n===null)return s?0:void 0;let a;if(typeof n=="number"?a=n:typeof n=="string"&&n.length>0&&n.trim().length===n.length&&(a=Number(n)),a===void 0)break;return e==u.UINT32?se(a):z(a),a;case u.INT64:case u.SFIXED64:case u.SINT64:if(n===null)return s?S.zero:void 0;if(typeof n!="number"&&typeof n!="string")break;let i=S.parse(n);return t?i.toString():i;case u.FIXED64:case u.UINT64:if(n===null)return s?S.zero:void 0;if(typeof n!="number"&&typeof n!="string")break;let o=S.uParse(n);return t?o.toString():o;case u.BOOL:if(n===null)return s?!1:void 0;if(typeof n!="boolean")break;return n;case u.STRING:if(n===null)return s?"":void 0;if(typeof n!="string")break;try{encodeURIComponent(n)}catch{throw new Error("invalid UTF8")}return n;case u.BYTES:if(n===null)return s?new Uint8Array(0):void 0;if(n==="")return new Uint8Array(0);if(typeof n!="string")break;return ie.dec(n)}throw new Error}function oe(e,n,t,s){if(n===null)return s?e.values[0].no:void 0;switch(typeof n){case"number":if(Number.isInteger(n))return n;break;case"string":let r=e.findName(n);if(r||t)return r?.no;break}throw new Error(`cannot decode enum ${e.typeName} from JSON: ${U(n)}`)}function Vn(e,n,t,s){var r;return n===void 0?n:!t&&e.values[0].no===n?void 0:s?n:e.typeName=="google.protobuf.NullValue"?null:(r=e.findNumber(n)?.name)!==null&&r!==void 0?r:n}function Me(e,n,t){if(n!==void 0)switch(e){case u.INT32:case u.SFIXED32:case u.SINT32:case u.FIXED32:case u.UINT32:return N(typeof n=="number"),n!=0||t?n:void 0;case u.FLOAT:case u.DOUBLE:return N(typeof n=="number"),Number.isNaN(n)?"NaN":n===Number.POSITIVE_INFINITY?"Infinity":n===Number.NEGATIVE_INFINITY?"-Infinity":n!==0||t?n:void 0;case u.STRING:return N(typeof n=="string"),n.length>0||t?n:void 0;case u.BOOL:return N(typeof n=="boolean"),n||t?n:void 0;case u.UINT64:case u.FIXED64:case u.INT64:case u.SFIXED64:case u.SINT64:return N(typeof n=="bigint"||typeof n=="string"||typeof n=="number"),t||n!=0?n.toString(10):void 0;case u.BYTES:return N(n instanceof Uint8Array),t||n.byteLength>0?ie.enc(n):void 0}}function Gn(){return jn(!0,(e,n)=>function(t,s,r){if(t.kind=="map"){let a={};switch(t.V.kind){case"scalar":for(let[o,l]of Object.entries(s)){let c=n(t.V.T,l,!0);N(c!==void 0),a[o.toString()]=c}break;case"message":for(let[o,l]of Object.entries(s))a[o.toString()]=l.toJson(r);break;case"enum":let i=t.V.T;for(let[o,l]of Object.entries(s)){N(l===void 0||typeof l=="number");let c=e(i,l,!0,r.enumAsInteger);N(c!==void 0),a[o.toString()]=c}break}return r.emitDefaultValues||Object.keys(a).length>0?a:void 0}else if(t.repeated){let a=[];switch(t.kind){case"scalar":for(let i=0;i<s.length;i++)a.push(n(t.T,s[i],!0));break;case"enum":for(let i=0;i<s.length;i++)a.push(e(t.T,s[i],!0,r.enumAsInteger));break;case"message":for(let i=0;i<s.length;i++)a.push(s[i].toJson(r));break}return r.emitDefaultValues||a.length>0?a:void 0}else{if(s===void 0)return;switch(t.kind){case"scalar":return n(t.T,s,!!t.oneof||t.opt||r.emitDefaultValues);case"enum":return e(t.T,s,!!t.oneof||t.opt||r.emitDefaultValues,r.enumAsInteger);case"message":return Ie(t.T,s).toJson(r)}}})}function Jn(){return{setEnumType:fe,initPartial(e,n){if(e===void 0)return;let t=n.getType();for(let s of t.fields.byMember()){let r=s.localName,a=n,i=e;if(i[r]!==void 0)switch(s.kind){case"oneof":let o=i[r].case;if(o===void 0)continue;let l=s.findField(o),c=i[r].value;l&&l.kind=="message"&&!(c instanceof l.T)?c=new l.T(c):l&&l.kind==="scalar"&&l.T===u.BYTES&&(c=_(c)),a[r]={case:o,value:c};break;case"scalar":case"enum":let m=i[r];s.T===u.BYTES&&(m=s.repeated?m.map(_):_(m)),a[r]=m;break;case"map":switch(s.V.kind){case"scalar":case"enum":if(s.V.T===u.BYTES)for(let[f,b]of Object.entries(i[r]))a[r][f]=_(b);else Object.assign(a[r],i[r]);break;case"message":let g=s.V.T;for(let f of Object.keys(i[r])){let b=i[r][f];g.fieldWrapper||(b=new g(b)),a[r][f]=b}break}break;case"message":let p=s.T;if(s.repeated)a[r]=i[r].map(g=>g instanceof p?g:new p(g));else if(i[r]!==void 0){let g=i[r];p.fieldWrapper?p.typeName==="google.protobuf.BytesValue"?a[r]=_(g):a[r]=g:a[r]=g instanceof p?g:new p(g)}break}}},equals(e,n,t){return n===t?!0:!n||!t?!1:e.fields.byMember().every(s=>{let r=n[s.localName],a=t[s.localName];if(s.repeated){if(r.length!==a.length)return!1;switch(s.kind){case"message":return r.every((i,o)=>s.T.equals(i,a[o]));case"scalar":return r.every((i,o)=>$(s.T,i,a[o]));case"enum":return r.every((i,o)=>$(u.INT32,i,a[o]))}throw new Error(`repeated cannot contain ${s.kind}`)}switch(s.kind){case"message":return s.T.equals(r,a);case"enum":return $(u.INT32,r,a);case"scalar":return $(s.T,r,a);case"oneof":if(r.case!==a.case)return!1;let i=s.findField(r.case);if(i===void 0)return!0;switch(i.kind){case"message":return i.T.equals(r.value,a.value);case"enum":return $(u.INT32,r.value,a.value);case"scalar":return $(i.T,r.value,a.value)}throw new Error(`oneof cannot contain ${i.kind}`);case"map":let o=Object.keys(r).concat(Object.keys(a));switch(s.V.kind){case"message":let l=s.V.T;return o.every(m=>l.equals(r[m],a[m]));case"enum":return o.every(m=>$(u.INT32,r[m],a[m]));case"scalar":let c=s.V.T;return o.every(m=>$(c,r[m],a[m]))}break}})},clone(e){let n=e.getType(),t=new n,s=t;for(let r of n.fields.byMember()){let a=e[r.localName],i;if(r.repeated)i=a.map(ne);else if(r.kind=="map"){i=s[r.localName];for(let[o,l]of Object.entries(a))i[o]=ne(l)}else r.kind=="oneof"?i=r.findField(a.case)?{case:a.case,value:ne(a.value)}:{case:void 0}:i=ne(a);s[r.localName]=i}return t}}}function ne(e){if(e===void 0)return e;if(e instanceof L)return e.clone();if(e instanceof Uint8Array){let n=new Uint8Array(e.byteLength);return n.set(e),n}return e}function _(e){return e instanceof Uint8Array?e:new Uint8Array(e)}var _n=class{constructor(e,n){this._fields=e,this._normalizer=n}findJsonName(e){if(!this.jsonNames){let n={};for(let t of this.list())n[t.jsonName]=n[t.name]=t;this.jsonNames=n}return this.jsonNames[e]}find(e){if(!this.numbers){let n={};for(let t of this.list())n[t.no]=t;this.numbers=n}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,n)=>e.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];let e=this.members,n;for(let t of this.list())t.oneof?t.oneof!==n&&(n=t.oneof,e.push(n)):e.push(t)}return this.members}};function De(e,n){let t=xe(e);return n?t:Kn(zn(t))}function Xn(e){return De(e,!1)}var Wn=xe;function xe(e){let n=!1,t=[];for(let s=0;s<e.length;s++){let r=e.charAt(s);switch(r){case"_":n=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":t.push(r),n=!1;break;default:n&&(n=!1,r=r.toUpperCase()),t.push(r);break}}return t.join("")}var Yn=new Set(["constructor","toString","toJSON","valueOf"]),qn=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),Ce=e=>`${e}$`,zn=e=>qn.has(e)?Ce(e):e,Kn=e=>Yn.has(e)?Ce(e):e,Hn=class{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=Xn(e)}addField(e){N(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[e]}},d=Bn("proto3",Gn(),Dn(),Object.assign(Object.assign({},Jn()),{newFieldList(e){return new _n(e,Qn)},initFields(e){for(let n of e.getType().fields.byMember()){if(n.opt)continue;let t=n.localName,s=e;if(n.repeated){s[t]=[];continue}switch(n.kind){case"oneof":s[t]={case:void 0};break;case"enum":s[t]=0;break;case"map":s[t]={};break;case"scalar":s[t]=H(n.T,n.L);break;case"message":break}}}}));function Qn(e){var n,t,s,r;let a=[],i;for(let o of typeof e=="function"?e():e){let l=o;if(l.localName=De(o.name,o.oneof!==void 0),l.jsonName=(n=o.jsonName)!==null&&n!==void 0?n:Wn(o.name),l.repeated=(t=o.repeated)!==null&&t!==void 0?t:!1,o.kind=="scalar"&&(l.L=(s=o.L)!==null&&s!==void 0?s:x.BIGINT),o.oneof!==void 0){let c=typeof o.oneof=="string"?o.oneof:o.oneof.name;(!i||i.name!=c)&&(i=new Hn(c)),l.oneof=i,i.addField(l)}o.kind=="message"&&(l.delimited=!1),l.packed=(r=o.packed)!==null&&r!==void 0?r:o.kind=="enum"||o.kind=="scalar"&&o.T!=u.BYTES&&o.T!=u.STRING,a.push(l)}return a}var Le=d.makeMessageType("youtube.response.frameworkUpdate.FrameworkUpdateTransport",()=>[{no:1,name:"entityBatchUpdate",kind:"message",T:Zn}]),Zn=d.makeMessageType("youtube.response.frameworkUpdate.EntityBatchUpdate",()=>[{no:1,name:"mutations",kind:"message",T:et,repeated:!0}]),et=d.makeMessageType("youtube.response.frameworkUpdate.Mutation",()=>[{no:1,name:"entityKey",kind:"scalar",T:9},{no:2,name:"type",kind:"scalar",T:5},{no:3,name:"payload",kind:"message",T:nt}]),nt=d.makeMessageType("youtube.response.frameworkUpdate.Payload",[]),tt=d.makeMessageType("youtube.response.frameworkUpdate.Entity",()=>[{no:2,name:"name",kind:"scalar",T:9},{no:4,name:"targetNo",kind:"scalar",T:5},{no:5,name:"type",kind:"scalar",T:5}]),st=d.makeMessageType("youtube.response.browse.Browse",()=>[{no:1,name:"responseContext",kind:"message",T:rt},{no:9,name:"contents",kind:"message",T:j},{no:10,name:"onResponseReceivedActions",kind:"message",T:j},{no:777,name:"frameworkUpdateTransport",kind:"message",T:Le}]),rt=d.makeMessageType("youtube.response.browse.ResponseContext",()=>[{no:6,name:"serviceTrackingParams",kind:"message",T:at,repeated:!0}]),at=d.makeMessageType("youtube.response.browse.ServiceTrackingParams",()=>[{no:1,name:"service",kind:"scalar",T:5},{no:2,name:"params",kind:"message",T:it,repeated:!0}]),it=d.makeMessageType("youtube.response.browse.Params",()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:9}]),j=d.makeMessageType("youtube.response.browse.Contents",()=>[{no:58173949,name:"browseResultsRenderer",kind:"message",T:ot},{no:153515154,name:"videoWithContextRenderer",kind:"message",T:Ge},{no:49399797,name:"richGridRenderer",kind:"message",T:Pe}]),ot=d.makeMessageType("youtube.response.browse.BrowseResultsRenderer",()=>[{no:1,name:"tabs",kind:"message",T:lt,repeated:!0}]),lt=d.makeMessageType("youtube.response.browse.Tab",()=>[{no:58174010,name:"tabRenderer",kind:"message",T:ut}]),ut=d.makeMessageType("youtube.response.browse.TabRenderer",()=>[{no:4,name:"contents",kind:"message",T:j}]),Pe=d.makeMessageType("youtube.response.browse.RichGridRenderer",()=>[{no:1,name:"richGridContents",kind:"message",T:ct,repeated:!0}]),ct=d.makeMessageType("youtube.response.browse.RichGridContent",()=>[{no:50195462,name:"richItemRenderer",kind:"message",T:je},{no:51845067,name:"richSectionRenderer",kind:"message",T:kt},{no:221496734,name:"musicDescriptionShelfRenderer",kind:"message",T:vt}]),je=d.makeMessageType("youtube.response.browse.RichItemRenderer",()=>[{no:1,name:"richItemContent",kind:"message",T:Ve,repeated:!0}]),Ve=d.makeMessageType("youtube.response.browse.RichItemContent",()=>[{no:153515154,name:"videoWithContextRenderer",kind:"message",T:Ge}]),Ge=d.makeMessageType("youtube.response.browse.VideoWithContextRenderer",()=>[{no:172660663,name:"videoRendererContent",kind:"message",T:dt}]),dt=d.makeMessageType("youtube.response.browse.VideoRendererContent",()=>[{no:1,name:"videoInfo",kind:"message",T:mt},{no:2,name:"renderInfo",kind:"message",T:yt}]),mt=d.makeMessageType("youtube.response.browse.VideoInfo",()=>[{no:168777401,name:"videoContext",kind:"message",T:ft}]),ft=d.makeMessageType("youtube.response.browse.VideoContext",()=>[{no:5,name:"videoContent",kind:"message",T:pt}]),pt=d.makeMessageType("youtube.response.browse.VideoContent",()=>[{no:465160965,name:"timedLyricsRender",kind:"message",T:gt}]),gt=d.makeMessageType("youtube.response.browse.TimedLyricsRender",()=>[{no:4,name:"timedLyricsContent",kind:"message",T:ht}]),ht=d.makeMessageType("youtube.response.browse.TimedLyricsContent",()=>[{no:1,name:"runs",kind:"message",T:_e,repeated:!0},{no:2,name:"footerLabel",kind:"scalar",T:9}]),yt=d.makeMessageType("youtube.response.browse.RenderInfo",()=>[{no:183314536,name:"layoutRender",kind:"message",T:bt}]),bt=d.makeMessageType("youtube.response.browse.LayoutRender",()=>[{no:1,name:"eml",kind:"scalar",T:9}]),kt=d.makeMessageType("youtube.response.browse.RichSectionRenderer",()=>[{no:5,name:"richSectionContent",kind:"message",T:Tt}]),Tt=d.makeMessageType("youtube.response.browse.RichSectionContent",()=>[{no:51431404,name:"reelShelfRenderer",kind:"message",T:wt}]),wt=d.makeMessageType("youtube.response.browse.ReelShelfRenderer",()=>[{no:1,name:"richItemContent",kind:"message",T:Ve,repeated:!0}]),vt=d.makeMessageType("youtube.response.browse.MusicDescriptionShelfRenderer",()=>[{no:3,name:"description",kind:"message",T:Je},{no:10,name:"footer",kind:"message",T:Je}]),Je=d.makeMessageType("youtube.response.browse.Label",()=>[{no:1,name:"runs",kind:"message",T:_e,repeated:!0}]),_e=d.makeMessageType("youtube.response.browse.Run",()=>[{no:1,name:"text",kind:"scalar",T:9}]),Xe=d.makeMessageType("youtube.response.next.Next",()=>[{no:7,name:"Contents",kind:"message",T:It},{no:8,name:"onResponseReceivedActions",kind:"message",T:j},{no:777,name:"frameworkUpdateTransport",kind:"message",T:Le}]),It=d.makeMessageType("youtube.response.next.Contents",()=>[{no:51779735,name:"NextResults",kind:"message",T:Nt}]),Nt=d.makeMessageType("youtube.response.next.NextResults",()=>[{no:1,name:"Contents",kind:"message",T:j}]),St=d.makeMessageType("youtube.response.search.Search",()=>[{no:4,name:"contents",kind:"message",T:j},{no:7,name:"onResponseReceivedCommands",kind:"message",T:Et}]),Et=d.makeMessageType("youtube.response.search.OnResponseReceivedCommands",()=>[{no:50195462,name:"richItemRenderer",kind:"message",T:je},{no:49399797,name:"appendContinuationItemsAction",kind:"message",T:Pe}]),Bt=d.makeMessageType("youtube.response.shorts.Shorts",()=>[{no:2,name:"entries",kind:"message",T:Ot,repeated:!0}]),Ot=d.makeMessageType("youtube.response.shorts.Entry",()=>[{no:1,name:"command",kind:"message",T:Ft}]),Ft=d.makeMessageType("youtube.response.shorts.Command",()=>[{no:139608561,name:"reelWatchEndpoint",kind:"message",T:Ut}]),Ut=d.makeMessageType("youtube.response.shorts.ReelWatchEndpoint",()=>[{no:8,name:"overlay",kind:"message",T:At}]),At=d.makeMessageType("youtube.response.shorts.Overlay",()=>[{no:139970731,name:"reelPlayerOverlayRenderer",kind:"message",T:Rt}]),Rt=d.makeMessageType("youtube.response.shorts.ReelPlayerOverlayRenderer",()=>[{no:12,name:"style",kind:"scalar",T:5}]),$t=d.makeMessageType("youtube.response.browse.Guide",()=>[{no:4,name:"items4",kind:"message",T:We,repeated:!0},{no:6,name:"items6",kind:"message",T:We,repeated:!0}]),We=d.makeMessageType("youtube.response.browse.Item",()=>[{no:117866661,name:"guideSectionRenderer",kind:"message",T:Mt}]),Mt=d.makeMessageType("youtube.response.browse.GuideSectionRenderer",()=>[{no:1,name:"rendererItems",kind:"message",T:Dt,repeated:!0}]),Dt=d.makeMessageType("youtube.response.browse.RendererItem",()=>[{no:318370163,name:"iconRender",kind:"message",T:Ye},{no:117501096,name:"labelRender",kind:"message",T:Ye}]),Ye=d.makeMessageType("youtube.response.browse.guideEntryRenderer",()=>[{no:1,name:"browseId",kind:"scalar",T:9}]),qe=d.makeMessageType("youtube.response.player.Player",()=>[{no:7,name:"adPlacements",kind:"message",T:xt,repeated:!0},{no:2,name:"playabilityStatus",kind:"message",T:Lt},{no:9,name:"playbackTracking",kind:"message",T:Gt},{no:10,name:"captions",kind:"message",T:Jt},{no:68,name:"adSlots",kind:"message",T:Yt,repeated:!0}]),xt=d.makeMessageType("youtube.response.player.AdPlacement",()=>[{no:84813246,name:"adPlacementRenderer",kind:"message",T:Ct}]),Ct=d.makeMessageType("youtube.response.player.AdPlacementRenderer",()=>[{no:4,name:"params",kind:"scalar",T:9}]),Lt=d.makeMessageType("youtube.response.player.PlayabilityStatus",()=>[{no:21,name:"miniPlayer",kind:"message",T:Pt},{no:11,name:"backgroundPlayer",kind:"message",T:ze}]),Pt=d.makeMessageType("youtube.response.player.MiniPlayer",()=>[{no:151635310,name:"miniPlayerRender",kind:"message",T:jt}]),ze=d.makeMessageType("youtube.response.player.BackgroundPlayer",()=>[{no:64657230,name:"backgroundPlayerRender",kind:"message",T:Vt}]),jt=d.makeMessageType("youtube.response.player.MiniPlayerRender",()=>[{no:1,name:"active",kind:"scalar",T:8}]),Vt=d.makeMessageType("youtube.response.player.BackgroundPlayerRender",()=>[{no:1,name:"active",kind:"scalar",T:8}]),Gt=d.makeMessageType("youtube.response.player.PlaybackTracking",()=>[{no:1,name:"videostatsPlaybackUrl",kind:"message",T:M},{no:2,name:"videostatsDelayplayUrl",kind:"message",T:M},{no:3,name:"videostatsWatchtimeUrl",kind:"message",T:M},{no:4,name:"ptrackingUrl",kind:"message",T:M},{no:5,name:"qoeUrl",kind:"message",T:M},{no:13,name:"atrUrl",kind:"message",T:M},{no:15,name:"videostatsEngageUrl",kind:"message",T:M},{no:18,name:"pageadViewthroughconversion",kind:"message",T:M}]),M=d.makeMessageType("youtube.response.player.Tracking",()=>[{no:1,name:"baseUrl",kind:"scalar",T:9}]),Jt=d.makeMessageType("youtube.response.player.Captions",()=>[{no:51621377,name:"playerCaptionsTrackListRenderer",jsonName:"playerCaptionsTracklistRenderer",kind:"message",T:_t}]),_t=d.makeMessageType("youtube.response.player.PlayerCaptionsTrackListRenderer",()=>[{no:1,name:"captionTracks",kind:"message",T:Ke,repeated:!0},{no:2,name:"audioTracks",kind:"message",T:Xt,repeated:!0},{no:3,name:"translationLanguages",kind:"message",T:He,repeated:!0},{no:4,name:"defaultAudioTrackIndex",kind:"scalar",T:5,opt:!0},{no:6,name:"defaultCaptionTrackIndex",kind:"scalar",T:5,opt:!0}]),Ke=d.makeMessageType("youtube.response.player.CaptionTrack",()=>[{no:1,name:"baseUrl",kind:"scalar",T:9},{no:2,name:"name",kind:"message",T:Qe},{no:3,name:"vssId",kind:"scalar",T:9},{no:4,name:"languageCode",kind:"scalar",T:9},{no:5,name:"kind",kind:"scalar",T:9,opt:!0},{no:6,name:"rtl",kind:"scalar",T:8,opt:!0},{no:7,name:"isTranslatable",kind:"scalar",T:8}]),Xt=d.makeMessageType("youtube.response.player.AudioTrack",()=>[{no:2,name:"captionTrackIndices",kind:"scalar",T:5,repeated:!0,packed:!1},{no:3,name:"defaultCaptionTrackIndex",kind:"scalar",T:5,opt:!0},{no:4,name:"forcedCaptionTrackIndex",kind:"scalar",T:5,opt:!0},{no:5,name:"visibility",kind:"scalar",T:5,opt:!0},{no:6,name:"hasDefaultTrack",kind:"scalar",T:8,opt:!0},{no:7,name:"hasForcedTrack",kind:"scalar",T:8,opt:!0},{no:8,name:"audioTrackId",kind:"scalar",T:9,opt:!0},{no:11,name:"captionsInitialState",kind:"scalar",T:5,opt:!0}]),He=d.makeMessageType("youtube.response.player.TranslationLanguage",()=>[{no:1,name:"languageCode",kind:"scalar",T:9},{no:2,name:"languageName",kind:"message",T:Qe}]),Qe=d.makeMessageType("youtube.response.player.Name",()=>[{no:1,name:"runs",kind:"message",T:Wt,repeated:!0}]),Wt=d.makeMessageType("youtube.response.player.Name.Run",()=>[{no:1,name:"text",kind:"scalar",T:9}],{localName:"Name_Run"}),Yt=d.makeMessageType("youtube.response.player.AdSlot",()=>[{no:424701016,name:"render",kind:"message",T:qt}]),qt=d.makeMessageType("youtube.response.player.AdSlot.Render",[],{localName:"AdSlot_Render"}),zt=d.makeMessageType("youtube.response.setting.Setting",()=>[{no:6,name:"settingItems",kind:"message",T:Ze,repeated:!0},{no:10,name:"trackingParams",kind:"message",T:te}]),Ze=d.makeMessageType("youtube.response.setting.SettingItem",()=>[{no:88478200,name:"settingCategoryEntryRenderer",kind:"message",T:Ht},{no:66930374,name:"settingCategoryCollectionRenderer",kind:"message",T:Qt}]),te=d.makeMessageType("youtube.response.setting.TrackingParams",()=>[{no:1,name:"f1",kind:"scalar",T:5},{no:2,name:"f2",kind:"scalar",T:5},{no:3,name:"f3",kind:"scalar",T:5},{no:4,name:"timeInfo",kind:"message",T:Kt}]),Kt=d.makeMessageType("youtube.response.setting.TimeInfo",()=>[{no:1,name:"timestamp",kind:"scalar",T:4,L:1},{no:2,name:"f2",kind:"scalar",T:7},{no:3,name:"f3",kind:"scalar",T:7}]),Ht=d.makeMessageType("youtube.response.setting.SettingCategoryEntryRenderer",()=>[{no:2,name:"f2",kind:"scalar",T:5},{no:3,name:"f3",kind:"scalar",T:5},{no:5,name:"trackingParams",kind:"message",T:te},{no:6,name:"f6",kind:"scalar",T:5},{no:7,name:"f7",kind:"scalar",T:5},{no:8,name:"f8",kind:"scalar",T:5},{no:9,name:"f9",kind:"scalar",T:5},{no:10,name:"f10",kind:"scalar",T:5},{no:12,name:"f12",kind:"scalar",T:5}]),Qt=d.makeMessageType("youtube.response.setting.SettingCategoryCollectionRenderer",()=>[{no:3,name:"subSettings",kind:"message",T:en,repeated:!0},{no:4,name:"categoryId",kind:"scalar",T:5}]),en=d.makeMessageType("youtube.response.setting.SubSetting",()=>[{no:61331416,name:"settingBooleanRenderer",kind:"message",T:Zt}]),Zt=d.makeMessageType("youtube.response.setting.SettingBooleanRenderer",()=>[{no:5,name:"enableServiceEndpoint",kind:"message",T:nn},{no:6,name:"disableServiceEndpoint",kind:"message",T:nn},{no:13,name:"clickTrackingParams",kind:"message",T:te},{no:15,name:"itemId",kind:"scalar",T:5}]),nn=d.makeMessageType("youtube.response.setting.ServiceEndpoint",()=>[{no:2,name:"trackingParams",kind:"message",T:te},{no:81212182,name:"setClientSettingEndpoint",kind:"message",T:es}]),es=d.makeMessageType("youtube.response.setting.SetClientSettingEndpoint",()=>[{no:1,name:"settingDatas",kind:"message",T:ns}]),ns=d.makeMessageType("youtube.response.setting.SettingDatas",()=>[{no:1,name:"clientSettingEnum",kind:"message",T:ts},{no:3,name:"boolValue",kind:"scalar",T:8}]),ts=d.makeMessageType("youtube.response.setting.ClientSettingEnum",()=>[{no:1,name:"item",kind:"scalar",T:5}]),ss=d.makeMessageType("youtube.response.watch.Watch",()=>[{no:1,name:"contents",kind:"message",T:rs,repeated:!0}]),rs=d.makeMessageType("youtube.response.watch.Content",()=>[{no:2,name:"player",kind:"message",T:qe},{no:3,name:"next",kind:"message",T:Xe}]),X=class{_times=new Map;name;isDebug;className;request;response;constructor(e,n,t){this.name=e??"",this.isDebug=t?.debug??!1,e&&this.debug(`${e} Start`),this.className=n??"",this.init()}static getInstance(e,n){let t="Surge";return typeof $loon<"u"?t="Loon":typeof $task<"u"&&(t="QuanX"),X.instances[t]||(X.instances[t]=X.classNames[t](e,t,n)),X.instances[t]}createProxy(e){return new Proxy(e,{get:this.getFn,set:this.setFn})}getFn(e,n,t){return e[n]}setFn(e,n,t,s){return e[n]=t,!0}getJSON(e,n={}){let t=this.getVal(e);return t?JSON.parse(t):n}setJSON(e,n){this.setVal(JSON.stringify(e),n)}msg(e=this.name,n="",t="",s){}debug(e){this.isDebug&&(typeof e=="object"&&(e=JSON.stringify(e)))}log(e){typeof e=="object"&&(e=JSON.stringify(e))}timeStart(e){this._times.set(e,Date.now())}timeEnd(e){if(this._times.has(e)){let n=this._times.get(e)??0,t=Date.now()-n;this.debug(`${e}: ${t}ms`),this._times.delete(e)}else this.debug(`Timer with label ${e} does not exist.`)}exit(){$done({})}reject(){$done()}decodeParams(e){return e}},W=X;q(W,"instances",{}),q(W,"classNames",{QuanX:(e,n,t)=>new tn(e,n,t),Surge:(e,n,t)=>new ue(e,n,t),Loon:(e,n,t)=>new as(e,n,t)});var le=class extends W{getFn(e,n,t){let s=le.clientAdapter[n]||n;return super.getFn(e,s,t)}setFn(e,n,t,s){let r=le.clientAdapter[n]||n;return super.setFn(e,r,t,s)}init(){try{this.request=this.createProxy($request),this.response=this.createProxy($response)}catch(e){this.debug(e.toString())}}getVal(e){return $persistentStore.read(e)}setVal(e,n){$persistentStore.write(e,n)}msg(e=this.name,n="",t="",s){$notification.post(e,n,t,{url:s??""})}async fetch(e){return await new Promise((n,t)=>{let{method:s,body:r,bodyBytes:a,...i}=e,o=a??r,l=o instanceof Uint8Array;$httpClient[s.toLowerCase()]({...i,body:o,"binary-mode":l},(c,m,p)=>{c&&t(c);let g=l?"bodyBytes":"body";n({status:m.status||m.statusCode,headers:m.headers,[g]:p})})})}done(e){let n=e.response??e,t,s;n.bodyBytes?(t=n.bodyBytes,delete n.bodyBytes,s={...e},s.response?s.response.body=t:s.body=t):s=e,$done(s)}decodeParams(e){return typeof $argument=="string"&&!$argument.includes("{{{")&&Object.assign(e,JSON.parse($argument)),e}},ue=le;q(ue,"clientAdapter",{bodyBytes:"body"});var D=class extends W{static transferBodyBytes(e,n){return e instanceof ArrayBuffer?n==="Uint8Array"?new Uint8Array(e):e:e instanceof Uint8Array&&n==="ArrayBuffer"?e.buffer.slice(e.byteOffset,e.byteLength+e.byteOffset):e}init(){try{this.request=this.createProxy($request),this.response=this.createProxy($response)}catch(e){this.debug(e.toString())}}getFn(e,n,t){let s=D.clientAdapter[n]||n,r=super.getFn(e,s,t);return n==="bodyBytes"&&(r=D.transferBodyBytes(r,"Uint8Array")),r}setFn(e,n,t,s){let r=D.clientAdapter[n]||n,a=t;return n==="bodyBytes"&&(a=D.transferBodyBytes(a,"Uint8Array")),super.setFn(e,r,a,s)}getVal(e){return $prefs.valueForKey(e)?.replace(/\0/g,"")}setVal(e,n){$prefs.setValueForKey(e,n)}msg(e=this.name,n="",t="",s){$notify(e,n,t,{"open-url":s??""})}async fetch(e){return await new Promise(n=>{let t={url:"",method:"GET"};for(let[s,r]of Object.entries(e))s==="id"?t.sessionIndex=r:s==="bodyBytes"?t.bodyBytes=D.transferBodyBytes(r,"ArrayBuffer"):t[s]=r;e.bodyBytes&&delete t.body,$task.fetch(t).then(s=>{let r={status:200,headers:{}};for(let[a,i]of Object.entries(s))a==="sessionIndex"?r.id=i:a==="bodyBytes"?r.bodyBytes=D.transferBodyBytes(i,"Uint8Array"):a==="statusCode"?r.status=i:r[a]=i;n(r)})})}done(e){let n=e.response??e,t={};for(let[s,r]of Object.entries(n))s==="status"?t.status=`HTTP/1.1 ${r}`:s==="bodyBytes"?t.bodyBytes=D.transferBodyBytes(r,"ArrayBuffer"):t[s]=r;$done(t)}},tn=D;q(tn,"clientAdapter",{id:"sessionIndex",status:"statusCode"});var as=class extends ue{decodeParams(e){if(typeof $argument<"u")for(let n of Object.keys(e)){let t=$argument?.[n];t!==void 0&&(e[n]=t)}return e}},y=W.getInstance("YouTube"),V=class{name;needProcess;needSave;message;version="1.0";whiteNo=[];blackNo=[];whiteEml=[];blackEml=["inline_injection_entrypoint_layout.eml"];msgType;argument;decoder=new TextDecoder("utf-8",{fatal:!1,ignoreBOM:!0});constructor(e,n){this.name=n,this.msgType=e,this.argument=this.decodeArgument(),y.isDebug=!!this.argument.debug,y.debug(this.name);let t=y.getJSON("YouTubeAdvertiseInfo");y.debug(`currentVersion:  ${this.version}`),y.debug(`storedVersion:  ${t.version}`),t?.version===this.version&&Object.assign(this,t)}decodeArgument(){let e={lyricLang:"zh-Hans",captionLang:"zh-Hans",blockUpload:!0,blockImmersive:!0,debug:!1};return y.decodeParams(e)}fromBinary(e){return e instanceof Uint8Array?(this.message=this.msgType.fromBinary(e),y.debug(`raw: ${Math.floor(e.length/1024)} kb`),this):(y.log("YouTube can not get binaryBody"),y.exit(),this)}async modify(){let e=this.pure();return e instanceof Promise?await e:e}toBinary(){return this.message.toBinary()}listUnknownFields(e){return e instanceof L?e.getType().runtime.bin.listUnknownFields(e):[]}save(){if(this.needSave){y.debug("Update Config");let e={version:this.version,whiteNo:this.whiteNo,blackNo:this.blackNo,whiteEml:this.whiteEml,blackEml:this.blackEml};y.debug(e),y.setJSON(e,"YouTubeAdvertiseInfo")}}done(){if(this.save(),this.needProcess){y.timeStart("toBinary");let e=this.toBinary();y.timeEnd("toBinary"),y.debug(`modify: ${Math.floor(e.length/1024)} kb`),y.done({bodyBytes:e})}y.debug("use $done({})"),y.exit()}iterate(e={},n,t){let s=typeof e=="object"?[e]:[];for(;s.length;){let r=s.pop(),a=Object.keys(r);for(let i of a)i===n?t(r,s):typeof r[i]=="object"&&s.push(r[i])}}isAdvertise(e){let n=this.listUnknownFields(e)[0];return n?this.handleFieldNo(n):this.handleFieldEml(e)}handleFieldNo(e){let n=e.no;if(this.whiteNo.includes(n))return!1;if(this.blackNo.includes(n))return!0;let t=this.checkBufferIsAd(e);return t?this.blackNo.push(n):this.whiteNo.push(n),this.needSave=!0,t}handleFieldEml(e){let n=!1,t="";return this.iterate(e,"renderInfo",(s,r)=>{if(t=s.renderInfo.layoutRender.eml.split("|")[0],this.whiteEml.includes(t))n=!1;else if(this.blackEml.includes(t)||/shorts(?!_pivot_item)/.test(t))n=!0;else{let a=s?.videoInfo?.videoContext?.videoContent;a&&(n=this.checkUnknownFiled(a),n?this.blackEml.push(t):this.whiteEml.push(t),this.needSave=!0)}r.length=0}),n}checkBufferIsAd(e){return!e||e.data.length<1e3?!1:this.decoder.decode(e.data).includes("pagead")}checkUnknownFiled(e){return e?this.listUnknownFields(e)?.some(n=>this.checkBufferIsAd(n))??!1:!1}isShorts(e){let n=!1;return this.iterate(e,"eml",(t,s)=>{n=/shorts(?!_pivot_item)/.test(t.eml),s.length=0}),n}};function is(e){let n=".",t="+-a^+6",s="+-3^+b+-f",r,a,i;for(r=[],a=0,i=0;i<e.length;i++){let o=e.charCodeAt(i);128>o?r[a++]=o:(2048>o?r[a++]=o>>6|192:((o&64512)==55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)==56320?(o=65536+((o&1023)<<10)+(e.charCodeAt(++i)&1023),r[a++]=o>>18|240,r[a++]=o>>12&63|128):r[a++]=o>>12|224,r[a++]=o>>6&63|128),r[a++]=o&63|128)}for(e=406644,a=0;a<r.length;a++)e+=r[a],e=sn(e,t);return e=sn(e,s),e^=3293161072,0>e&&(e=(e&2147483647)+2147483648),e%=1e6,e.toString()+n+(e^406644)}function sn(e,n){let t="a",s="+",r;for(let a=0;a<n.length-2;a+=3)r=n.charAt(a+2),r=r>=t?r.charCodeAt(0)-87:Number(r),r=n.charAt(a+1)==s?e>>>r:e<<r,e=n.charAt(a)==s?e+r&4294967295:e^r;return e}function os(e,n){return`https://translate.google.com/translate_a/single?client=gtx&sl=auto&tl=${n}&hl=zh-CN&dt=at&dt=bd&dt=ex&dt=ld&dt=md&dt=qca&dt=rw&dt=rm&dt=ss&dt=t&source=bh&ssel=0&tsel=0&kc=1&tk=${is(e)}&q=${encodeURIComponent(e)}`}var ce=class extends V{constructor(e=st,n="Browse"){super(e,n)}async pure(){return this.iterate(this.message,"richGridContents",e=>{for(let n=e.richGridContents.length-1;n>=0;n--)this.removeCommonAD(e,n),this.removeShorts(e,n)}),await this.translate(),this}removeCommonAD(e,n){let t=e.richGridContents[n]?.richItemRenderer?.richItemContent;for(let s=t?.length-1;s>=0;s--)this.isAdvertise(t[s])&&(t.splice(s,1),this.needProcess=!0)}removeShorts(e,n){let t=e.richGridContents[n]?.richSectionRenderer;this.isShorts(t)&&(e.richGridContents.splice(n,1),this.needProcess=!0)}getBrowseId(){let e="";return this.iterate(this.message?.responseContext,"key",(n,t)=>{n.key==="browse_id"&&(e=n.value,t.length=0)}),e}async translate(){let e=this.argument.lyricLang?.trim();if(!(this.name==="Browse"&&this.getBrowseId().startsWith("MPLYt"))||e==="off")return;let n="",t,s=!1;if(this.iterate(this.message,"timedLyricsContent",(o,l)=>{t=o.timedLyricsContent,n=o.timedLyricsContent.runs.map(c=>c.text).join(`
`),s=!0,l.length=0}),s||this.iterate(this.message,"description",(o,l)=>{t=o.description.runs[0],n=o.description.runs[0].text,l.length=0,s=!0}),!s)return;let r=e.split("-")[0],a=os(n,e),i=await y.fetch({method:"GET",url:a});if(i.status===200&&i.body){let o=JSON.parse(i.body),l=" & Translated by Google",c=o[2].includes(r);t.text?(t.text=o[0].map(m=>c?m[0]:m[1]+m[0]||"").join(`\r
`),this.iterate(this.message,"footer",(m,p)=>{m.footer.runs[0].text+=l,p.length=0})):t.runs.length<=o[0].length&&(t.runs.forEach((m,p)=>{m.text=c?o[0][p][0]:m.text+`
${o[0][p][0]}`}),t.footerLabel+=l),this.needProcess=!0}}removeFrameworkUpdateAd(){let e=this.message?.frameworkUpdateTransport?.entityBatchUpdate?.mutations;if(e)for(let n=e.length-1;n>=0;n--){let t=e[n],s=tt.fromBinary(ie.dec(decodeURIComponent(t.entityKey))),r=this.blackEml.includes(s.name);!r&&this.checkUnknownFiled(t?.payload)&&(r=!0,this.blackEml.push(s.name),this.needSave=!0),r&&(e.splice(n,1),this.needProcess=!0)}}},rn=class extends ce{constructor(e=Xe,n="Next"){super(e,n)}},an=class extends V{constructor(e=qe,n="Player"){super(e,n)}pure(){return this.message.adPlacements?.length&&(this.message.adPlacements.length=0),this.message.adSlots?.length&&(this.message.adSlots.length=0),delete this.message?.playbackTracking?.pageadViewthroughconversion,this.addPlayAbility(),this.addTranslateCaption(),this.needProcess=!0,this}addPlayAbility(){let e=this.message?.playabilityStatus?.miniPlayer?.miniPlayerRender;typeof e=="object"&&(e.active=!0),typeof this.message.playabilityStatus=="object"&&(this.message.playabilityStatus.backgroundPlayer=new ze({backgroundPlayerRender:{active:!0}}))}addTranslateCaption(){let e=this.argument.captionLang;e!=="off"&&this.iterate(this.message,"captionTracks",(n,t)=>{let s=n.captionTracks,r=n.audioTracks;if(Array.isArray(s)){let i={[e]:2,en:1},o=-1,l=0;for(let c=0;c<s.length;c++){let m=s[c],p=i[m.languageCode];p&&p>o&&(o=p,l=c),m.isTranslatable=!0}if(o!==2){let c=new Ke({baseUrl:s[l].baseUrl+`&tlang=${e}`,name:{runs:[{text:`@Enhance (${e})`}]},vssId:`.${e}`,languageCode:e});s.push(c)}if(Array.isArray(r)){let c=o===2?l:s.length-1;for(let m of r)m.captionTrackIndices?.includes(c)||m.captionTrackIndices.push(c),m.defaultCaptionTrackIndex=c,m.captionsInitialState=3}}let a={de:"Deutsch",ru:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439",fr:"Fran\xE7ais",fil:"Filipino",ko:"\uD55C\uAD6D\uC5B4",ja:"\u65E5\u672C\u8A9E",en:"English",vi:"Ti\u1EBFng Vi\u1EC7t","zh-Hant":"\u4E2D\u6587\uFF08\u7E41\u9AD4\uFF09","zh-Hans":"\u4E2D\u6587\uFF08\u7B80\u4F53\uFF09",und:"@VirgilClyne"};n.translationLanguages=Object.entries(a).map(([i,o])=>new He({languageCode:i,languageName:{runs:[{text:o}]}})),t.length=0})}},ls=class extends ce{constructor(e=St,n="Search"){super(e,n)}},us=class extends V{constructor(e=Bt,n="Shorts"){super(e,n)}pure(){let e=this.message.entries?.length;if(e)for(let n=e-1;n>=0;n--)this.message.entries[n].command?.reelWatchEndpoint?.overlay||(this.message.entries.splice(n,1),this.needProcess=!0);return this}},cs=class extends V{constructor(e=$t,n="Guide"){super(e,n)}pure(){let e=["SPunlimited"];return this.argument.blockUpload&&e.push("FEuploads"),this.argument.blockImmersive&&e.push("FEmusic_immersive"),this.iterate(this.message,"rendererItems",n=>{for(let t=n.rendererItems.length-1;t>=0;t--){let s=n.rendererItems[t]?.iconRender?.browseId||n.rendererItems[t]?.labelRender?.browseId;e.includes(s)&&(n.rendererItems.splice(t,1),this.needProcess=!0)}}),this}},ds=class extends V{constructor(e=zt,n="Setting"){super(e,n)}pure(){this.iterate(this.message,"categoryId",n=>{if(n.categoryId===10005){let t={f1:135,f2:20434,f3:2,timeInfo:this.message.trackingParams.timeInfo},s=new en({settingBooleanRenderer:{itemId:0,enableServiceEndpoint:{trackingParams:t,setClientSettingEndpoint:{settingDatas:{clientSettingEnum:{item:151},boolValue:!0}}},disableServiceEndpoint:{trackingParams:t,setClientSettingEndpoint:{settingDatas:{clientSettingEnum:{item:151},boolValue:!1}}},clickTrackingParams:t}});n.subSettings.push(s)}});let e=new Ze({settingCategoryEntryRenderer:{f2:1,f3:1,trackingParams:{f1:2,f2:20020,f3:8,timeInfo:this.message.trackingParams.timeInfo},f6:0,f7:1,f8:1,f9:1,f10:1,f12:1}});return this.message.settingItems.push(e),this.needProcess=!0,this}},ms=class extends V{player;next;constructor(e=ss,n="Watch"){super(e,n),this.player=new an,this.next=new rn}async pure(){for(let e of this.message.contents)e.player&&(this.player.message=e.player,await this.player.pure()),e.next&&(this.next.message=e.next,await this.next.pure()),this.needProcess=!0;return this}},fs=new Map([["browse",ce],["next",rn],["player",an],["search",ls],["reel_watch_sequence",us],["guide",cs],["get_setting",ds],["get_watch",ms]]);function ps(e){for(let[n,t]of fs.entries())if(e.includes(n))return new t;return null}async function gs(){let e=ps(y.request.url);if(e){let n=y.response.bodyBytes;y.timeStart("fromBinary"),e.fromBinary(n),y.timeEnd("fromBinary"),y.timeStart("modify"),await e.modify(),y.timeEnd("modify"),e.done()}else y.msg("YouTube Enhance","\u811A\u672C\u9700\u8981\u66F4\u65B0","\u5916\u90E8\u8D44\u6E90 -> \u5168\u90E8\u66F4\u65B0"),y.exit()}gs().catch(e=>{y.log(e.toString())}).finally(()=>{y.exit()})})();
