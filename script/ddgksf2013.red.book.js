// https://raw.githubusercontent.com/ElementRef/AboutConfig/main/script/ddgksf2013.red.book.js
const $=new Env("\u5C0F\u7EA2\u4E66");var _0xodR="jsjiami.com.v7";function _0x36e3(){const o=function(){return[_0xodR,"kRHLjdsRjeiHaemTiB.WchCoILmCK.Kv7xfWTSHK==","5PkP57Ek56656kY0","WQhdS1CF","lbClWP9yimoAksxcPWW","5Pon57wj56YM6kYp","o8omW7PcW5BcKIhdRG","sCkjrt0eg8kWbCoWWOSKjJRdHdbd","W7noW6TQASodDJ7dOuRcOCo+ehuNW6rH","WOKZW6nRmGBcHCkOW6O","WOq/W7zT","W6VdRSotWP1uq8oZW7tdJSocWRlcIa","wr4yWOqtW49CaSoHAIi","FMpdS8k6","WQZdHhNdSG","WOpcNgqekCkRWQvPcbWkW5RcVw0","W47cTWxcSZ4pnSkCW6OfF2q","WOBcR2DG","WPq/W6bQmJZcLmoGWQy","WPRcM28zpCk1","uHjD","WOLyt8kOW4ucBSojh8ovjt/dIa","WOhcUCohWR18WOVcMwvBpCk0amoy","r8kDwaecf8kZcSoBWOSUds/dGJPuWQ4","WOvvW4vB","WO1ur8kSW544y8o4hSovfs3cICkgaCk/hq","W5DMhW","WPmCgrhdGsfd","owxcK8k3ba","W5lcM3CRWRO","ECoGW4xcKa/dM8opWOq7W5f6CKNcNt0","nrWzBwv1rmk9W6HaW7lcPxyffW","rHODWOyzW6nQcG","W4PBktFdTwHrW5hdGZtcT1m","WRddUea0tWDcW48","W4T7gSokW4iC","WQz/Amo+W5BcLmoRwSoSzq","WODkWRy","ue0YW53cQa","phBcJq","W6Omkq","WQ/cQ8ksW4CjeSoDW5BdUq","WOq3W7fGpJlcLq","nufcpq","WP17WONdOSoMecxdPsqt","y8koFvvd","W5ZdRLzJW6RdIbO","uKKSW4/cUCoPWP8LqK9mgmk/W7/dSCo2qq","WPdcJb4yW5FcIuD/W7G","xmkiwtCEfCk2dCow","WP3cOJCTW6pcGJj5W7KRECo5xW","W7VdP8kuhYjEpNbtW5aq","j8oBW5K","WOhcUCohWR18WOVcG3Tyn8kp","WOhcQcK8","bwRdLINdUmo/WOymW50","WPP2WPVdPa","WO7cIhODa2uDjHCkFIupW5DQWQ9h","gWtdOCk5W5a","W5/dJ8ks","WPtcP3DKWRSJWQKeWPCKwW","W7akkSoeW7D+WO7cMCkhW5i8W6HhaG","y8kTqurkCmoLkSkXWRBcQMuiWOG","Aevdy2T8vmkQWPy","EmkHquHeCmoWlSkIWRFcL2CeWO1KgSow","WO3cJNOm","W4ibWOuxCmkKvCoMWPddScS","WOdcLWeCW5ZcGfOJWQe","xSkPxSkb","W4pdGCkhCSkY","W7BcIeSqWO/dK13cQqFcLZdcVq","WP3cRcKxW7FcGJT8WQm9DCojsmkPW5qUFW","gbxdV8kRW4y9","WPbKW6erDmojWPTWfuu","oNdcK8kTd3ubWRNdNG","WP7cSKOeFM/dNmoHyfzyWRldHmotfq","ou7dKI/dLq","i8oDW5K1W7PjWPS+WRlcN8o6W653"].concat(function(){return["WO7cOxq","WO/cMMaopmkVWQmPnbyjWOdcUtpdVWe","W4ddLmkhzmk2W4e","W77dPCks","rHODWOyzW6nWhSoTFdi","WOjeW4rgj8kjESopWOm","WOrjn8kyhLqyECkfDtJcS8otxW","wCoGW5hcVrldGa","wvFcO8oZWOvGWQVdNmoWFW","W48mCMC","WOPYWPZdSq","W6tdO8krhsHNmNTrWOvVheC","tCoWW4/cSrtdNColWRWnW5bXAxdcKsfB","jSoeW6PcW4BcKHVdQmouW7K","CSoYW4X0W5dcQcW","WOtcPmorWRf9WRpcMw1e","WP56WOVdPmo2psNdUa","W7uxpmoiW7zgWOpcKmkj","WOFcMrGq","W7ZdPCkbhrHrpW","kryhFa","s8kDxZ8","WRNdUum","W4dcMSob","vCkHtG","W7RdQ8kgjZvDn3rdWO9unrlcLH3dNSko","WQddIMddTSk/hmkzzGRdMW","WO9ewmkL","WR7cSKiNzwxdK8oOBL1sWRNdVmoPaSozlG","WONdR1/dS35lg8kD","i0q7WROhmcS","yxmKWOWG","WOeCdHJdHXvcW6K9v2fFp8k9","zgFdTmkNWOpcQCoRWQ0QpfG3","WOW3W7rPccNcMmk1W7iV","WPjZW6WFFa","W73dNaK","WRJcSL0Y","zMNdPW","WOlcOSop","zxCLWOS","W4hdOCkAW60LWPdcIfjhpmkz","W7JdMXyu","W4nfwK3cKxWtW6ieA2nZla","oKtcJSoDW7C","WPnCWQK","lHyvEMb4dSk3WQLhW7ZcSZHg","WPnEta","WR/cO1WVF2FdNSorCa","xCkztZWFhCk0nmoAWP0VibFdMZXuWRG2ECktW5JdKW","WPlcGMizkgWqcGq","p8oaW6Pc","WQxdHh7dP8k8c8kJD0lcLW","WPD3W7SPB8ocWQHKe0XPoCo9WPddKLuv","WOfmWQG3xSksihpcNW","qWOkWPCtW5fChCoTAYdcGCkirSouka","j8okW74","WOBcUsGHW6VcGd57WQ4","lwxcLCkL","WOrGWOldUCoIiIxcPsetW47dOmoxyW","WPvfpCkya1mjECk+jNu","WQekqmomW5C","tCkHtSkhWQpdJZ/cS3u","W5dcHSojW5SPW4JdTJm","WOxcHNGif8k2WQqOhXW","r8oQW4y","W7RdIWKDW7NcLL7cNmkRWRzHW7JdKCkgfCkyW6O","W4SbW6TOamodFvhcL8k+WRPTW6u","WRJdHh/dOmk8","DNCIWPSKisu","W4rtma3dNxDcW5BdMW","z3SYWPOQcI3dGt7cIYT0wa","WRNdV1iozb5hW4xcVCoLsCk1sZtcQCkLWRrc","bWRdSSkUW5W7W7ZcS8kVi8oh","WRJcVSkuW48u","W7jcW7LsFCovrtpdVfZcSq","W7jDa8oWW60","WP8CbaNdTZ1jW7qUsG"].concat(function(){return["WPtdNYbj","W7ZdQ8kbetfDbgnyWOntdW","BmoApW","W7/dR8kyhrHioNzCWOTxdW","kmokW6LpW7ZcJc3dS8on","WO18WPJdQCoCiYxdPsK","B1rE","WPdcTConWR1HWRxcHg5Io8kgf8knW74","pHWeCvX8smk3WQ0","WOJcIgui","WOVcKqifW6BcMufRW6xdGG","k0hcJW","WOn2WOZdUCoIed/dQJqzW7ZcRCoooSkXiSk7","WPj3W7ScEmovWPTWfuu","jCokW61tW7ZcJIhdPCosW4OKW7KsW4q","W7BdQ8kbgq","W44chCo4WPTTnSkxomoBfHRcSmk8","ECkRqG","W5DFnIhdJW","dbXwbNO0bsBdOtpcR8kAWQ97","C8kRv2retmoR","WPFdQuJdOLrvf8kDW4K","WRRcNfveWRtdHqNdTCo6W6G","WOPKW6q","W4SMWRHgjmkrW7fHkxTJjCoO","WRrVACoeW5dcIW","W7xcJfSqWPJdQxhcVH7cMWZcUXVdRHbllG","pComW71tW4ZcVYddSSorW7S7W6iwW5a","pSogW5i","W4ZdTgT+WRxdKwnzWQyxq8otEW","u0qHW5ZcQmotWPiuq08","D3S6WOSGjW","W5hcICozW6u","WRNcPui","W5RdIWe+W6lcNfhcLCkLWR1RW7pdQCk8aG","WPrWW7SVAG","W5ZcNmoiW6KU","WPNcV24zmq","WRukrSoE","BgpdPCkQW4/dRa","icfGW4P0zxxcNXNcHrHrimop","bqRdP8kVW6O8W78","F8obpXFdISoCWQu","WP5YWPRdO8oM","ou3cNCoCW7FdLCklbSoxW4W","WRVcIMOVj8kPWQCraHCcWPVcGd/dOW","W41aW6uZx8ocWQS","vbinWOi","l8oeW61x","W7ddPCkraq","naCrzxa","WOFcSCorWQT2","WPf5W7WtqSolWQ12eW","j0dcMmohW7pdLCkrcCohW4z0W5jQWQb5WPJdSa","W4TriW","D0nFW48XfmodeZtcQbNcMG","krCbWPjxlSoKpZxcOXO","qCktxZSVg8k7","ASoCirVdU8osWQJdQ1K","jghcHCkTae0BWR7dKxDEaCo/WPH6W4dcHG","W6hdHCkrq8k4W4pdLmktWQBcSSk7W6b5W44J","W4zMFSkpW5KvBW","WO9qwCk+W48","WPn/W74tqSoxWQXQe0y3rG","Dx0HWPePoIxdIWFcKqzU","kmoBW5mWW7noWOGL","W5rkkYddJW","W7ycpmosW70","WRtcVSktW7evemoyW5hdTmouWRZcPXrlW4WSW7S","WQddHh7dJmkRhmkqy0tcNIFdVSo6px0aya","xHWnWOyPW5bQhCo8","sueHW4NcQmotWO4isq","WOrcW5O","x8oGW5lcPG","mbyqywi","bbFdUSkTW5W7W4tcMCk0iG","W4bBmdBdI2Xr"]}())}())}();return _0x36e3=function(){return o},_0x36e3()}const _0xdf40e5=_0x1837;function _0x1837(o,c){const a=_0x36e3();return _0x1837=function(e,t){e=e-376;let s=a[e];if(_0x1837.SaZPov===void 0){var r=function(l){const u="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let h="",p="";for(let f=0,k,n,b=0;n=l.charAt(b++);~n&&(k=f%4?k*64+n:n,f++%4)?h+=String.fromCharCode(255&k>>(-2*f&6)):0)n=u.indexOf(n);for(let f=0,k=h.length;f<k;f++)p+="%"+("00"+h.charCodeAt(f).toString(16)).slice(-2);return decodeURIComponent(p)};const x=function(l,u){let h=[],p=0,f,k="";l=r(l);let n;for(n=0;n<256;n++)h[n]=n;for(n=0;n<256;n++)p=(p+h[n]+u.charCodeAt(n%u.length))%256,f=h[n],h[n]=h[p],h[p]=f;n=0,p=0;for(let b=0;b<l.length;b++)n=(n+1)%256,p=(p+h[n])%256,f=h[n],h[n]=h[p],h[p]=f,k+=String.fromCharCode(l.charCodeAt(b)^h[(h[n]+h[p])%256]);return k};_0x1837.yavaFe=x,o=arguments,_0x1837.SaZPov=!0}const i=a[0],d=e+i,W=o[d];return W?s=W:(_0x1837.OHxFTl===void 0&&(_0x1837.OHxFTl=!0),s=_0x1837.yavaFe(s,t),o[d]=s),s},_0x1837(o,c)}(function(o,c,a,e,t,s,r){return o=o>>7,s="hs",r="hs",function(i,d,W,x,l){const u=_0x1837;x="tfi",s=x+s,l="up",r+=l,s=W(s),r=W(r),W=0;const h=i();for(;--e+d;)try{x=parseInt(u(552,"Y(K)"))/1+-parseInt(u(413,"kEpn"))/2*(parseInt(u(517,"V$fZ"))/3)+parseInt(u(547,"Vvax"))/4+-parseInt(u(426,"0[pm"))/5+parseInt(u(424,"zu@R"))/6*(parseInt(u(599,"WQZj"))/7)+parseInt(u(490,"(XOT"))/8+parseInt(u(522,"ZbNj"))/9*(-parseInt(u(501,"kEpn"))/10)}catch{x=W}finally{if(l=h[s](),o<=e)W?t?x=l:t=l:W=l;else if(W==t.replace(/[CSkBRHhKWxeTfLdI=]/g,"")){if(x===d){h["un"+s](l);break}h[r](l)}}}(a,c,function(i,d,W,x,l,u,h){return d="split",i=arguments[0],i=i[d](""),W="reverse",i=i[W]("v"),x="join",i[x]("")})})(25344,797947,_0x36e3,200),_0x36e3&&(_0xodR=_0xdf40e5(442,"g&En"));$.RedBookPhotoKey="redbook_user_photo_key",$[_0xdf40e5(566,"I&NS")]=_0xdf40e5(432,"Pb[d");let body=$response[_0xdf40e5(510,"tb)y")];if(body){switch(!0){case/api\/sns\/v\d+\/note\/widgets/[_0xdf40e5(539,"p7mb")]($request[_0xdf40e5(484,"ylJp")]):try{let o=JSON[_0xdf40e5(528,"tAX4")](body);const c=[_0xdf40e5(480,"5M9I"),_0xdf40e5(475,"c^p#")];for(const a of c)o[_0xdf40e5(553,"]jIo")]?.[a]&&delete o.data[a];body=JSON.stringify(o)}catch{}break;case/api\/sns\/v\d+\/note\/live_photo\/save/[_0xdf40e5(423,"kEpn")]($request[_0xdf40e5(406,"BE2R")]):try{let o=JSON[_0xdf40e5(427,"@qXn")](body);o[_0xdf40e5(550,"!LU3")][_0xdf40e5(457,"Vvax")]=JSON.parse($[_0xdf40e5(537,"2OdI")]($[_0xdf40e5(521,"^myL")])),body=JSON.stringify(o)}catch{}break;case/api\/sns\/v\d+\/note\/video\/save/[_0xdf40e5(420,"JPEi")]($request[_0xdf40e5(575,"dat4")]):try{let o=JSON.parse(body),c=JSON[_0xdf40e5(528,"tAX4")]($[_0xdf40e5(452,"kEpn")]($[_0xdf40e5(506,"mjQb")]));for(let a of c)a[_0xdf40e5(518,"Pb[d")]==o[_0xdf40e5(601,"mjQb")].note_id&&(o[_0xdf40e5(493,"BE2R")]=a);body=JSON[_0xdf40e5(379,"dat4")](o)}catch{}break;case/api\/sns\/v\d+\/note\/comment\/list/.test($request.url):try{let o=JSON[_0xdf40e5(574,"LRoG")](body);for(let c of o[_0xdf40e5(476,"tb)y")][_0xdf40e5(526,"j@Ig")])if(c.pictures)for(let a of c[_0xdf40e5(399,"g&En")])a.meme_package?.image_url&&(a[_0xdf40e5(378,"ylJp")]=a[_0xdf40e5(569,"2OdI")][_0xdf40e5(591,"q$E5")],a.url=a[_0xdf40e5(464,"tb)y")].image_url);body=JSON[_0xdf40e5(577,"Vvax")](o)}catch{}break;case/api\/sns\/v\d+\/note\/redtube/[_0xdf40e5(549,"zFgm")]($request[_0xdf40e5(573,"FGzQ")]):try{let o=JSON[_0xdf40e5(605,"^myL")](body);for(let c of o[_0xdf40e5(401,"xxzb")][_0xdf40e5(497,"BE2R")])c[_0xdf40e5(411,"JPEi")]&&(c[_0xdf40e5(593,"3CD5")]=0),c[_0xdf40e5(408,"tb)y")]&&(c.has_related_goods=!1),c[_0xdf40e5(473,"g&En")]&&(c[_0xdf40e5(520,"dat4")]={disable_save:!1,disable_watermark:!0,disable_weibo_cover:!0}),c[_0xdf40e5(580,"g&En")]&&(c.share_info[_0xdf40e5(543,"Pb[d")]=[{type:_0xdf40e5(597,"tAX4")},{type:_0xdf40e5(468,"zu@R")},{type:_0xdf40e5(465,"c^p#")},{type:_0xdf40e5(462,"tb)y")},{type:_0xdf40e5(589,"zu@R")},{type:_0xdf40e5(578,"H!Ml")},{type:"report"},{type:"video_feedback"}]);body=JSON[_0xdf40e5(440,"(XOT")](o)}catch{}break;case/api\/sns\/v\d+\/note\/videofeed/[_0xdf40e5(560,"E3UY")]($request[_0xdf40e5(463,"#Y1N")]):try{let o=JSON.parse(body),c=[];for(let a of o.data)if(a.related_goods_num&&(a.related_goods_num=0),a[_0xdf40e5(436,"ylJp")]&&(a.has_related_goods=!1),a[_0xdf40e5(487,"UDHa")]&&(a.media_save_config={disable_save:!1,disable_watermark:!0,disable_weibo_cover:!0}),a.share_info&&(a[_0xdf40e5(491,"LRoG")][_0xdf40e5(384,"mjQb")]=[{type:_0xdf40e5(415,"0[pm")},{type:"generate_image"},{type:_0xdf40e5(469,"WQZj")},{type:_0xdf40e5(416,"zFgm")},{type:_0xdf40e5(596,"]jIo")},{type:_0xdf40e5(563,"0[pm")},{type:"report"},{type:_0xdf40e5(598,"g[G4")}]),a[_0xdf40e5(454,"kEpn")]?.media?.[_0xdf40e5(486,"9SGB")]?.h265){let e={};e[_0xdf40e5(555,"mjQb")]=2,e[_0xdf40e5(502,"nXj@")]=a.id,e.download_url=a[_0xdf40e5(557,"ZbNj")].media.stream[_0xdf40e5(461,"3CD5")][0][_0xdf40e5(435,"!LU3")],c[_0xdf40e5(410,"ZbNj")](e)}$.setdata(JSON[_0xdf40e5(437,"FGzQ")](c),$[_0xdf40e5(380,"JPEi")]),body=JSON[_0xdf40e5(400,"tAX4")](o)}catch{}break;case/api\/sns\/v\d+\/note\/tabfeed/.test($request[_0xdf40e5(489,"j@Ig")]):try{let o=JSON[_0xdf40e5(504,"g&En")](body),c=[];for(let a of o.data.items)if(a[_0xdf40e5(449,"p]6i")]&&(a.related_goods_num=0),a[_0xdf40e5(559,"Pb[d")]&&(a[_0xdf40e5(376,"(XOT")]=!1),a[_0xdf40e5(514,"@qXn")]&&(a.media_save_config={disable_save:!1,disable_watermark:!0,disable_weibo_cover:!0}),a[_0xdf40e5(505,"@qXn")]&&(a.share_info[_0xdf40e5(395,"I&NS")]=[{type:_0xdf40e5(488,"c^p#")},{type:_0xdf40e5(389,"YSZ8")},{type:_0xdf40e5(466,"g&En")},{type:_0xdf40e5(606,"UDHa")},{type:_0xdf40e5(387,"dYIp")},{type:"dislike"},{type:_0xdf40e5(390,"I&NS")},{type:"video_feedback"}]),a[_0xdf40e5(558,"zu@R")]?.[_0xdf40e5(535,"WQZj")]?.stream?.[_0xdf40e5(392,"2OdI")]){let e={};e[_0xdf40e5(571,"a*)g")]=2,e[_0xdf40e5(402,"tb)y")]=a.id,e[_0xdf40e5(525,"kEpn")]=a[_0xdf40e5(394,"tb)y")].media[_0xdf40e5(385,"^myL")][_0xdf40e5(579,"WQZj")][0][_0xdf40e5(474,"ylJp")],c[_0xdf40e5(425,"p]6i")](e)}$.setdata(JSON[_0xdf40e5(585,"Pb[d")](c),$[_0xdf40e5(495,"p]6i")]),body=JSON[_0xdf40e5(388,"E3UY")](o)}catch{}break;case/api\/sns\/v\d+\/note\/feed/[_0xdf40e5(539,"p7mb")]($request[_0xdf40e5(419,"p]6i")]):try{let o=JSON[_0xdf40e5(523,"ZbNj")](body);for(let c of o[_0xdf40e5(441,"dat4")])if(c.related_goods_num&&(c[_0xdf40e5(583,"LRoG")]=0),c[_0xdf40e5(529,"Vvax")]&&(c[_0xdf40e5(544,"Y4[S")]=!1),c[_0xdf40e5(482,"Y(K)")])for(let a of c[_0xdf40e5(513,"ylJp")])a.media_save_config={disable_save:!1,disable_watermark:!0,disable_weibo_cover:!0};body=JSON[_0xdf40e5(431,"JPEi")](o)}catch{}break;case/api\/sns\/v\d+\/note\/imagefeed/[_0xdf40e5(590,"(XOT")]($request[_0xdf40e5(467,"V$fZ")]):try{let o=JSON[_0xdf40e5(451,"!LU3")](body),c=[];for(let a of o[_0xdf40e5(509,"c^p#")])if(a[_0xdf40e5(561,"ZbNj")]&&(a.related_goods_num=0),a[_0xdf40e5(530,"!LU3")]&&(a.has_related_goods=!1),a[_0xdf40e5(531,"dYIp")]){for(let e of a[_0xdf40e5(433,"3CD5")])if(e[_0xdf40e5(600,"g[G4")]={disable_save:!1,disable_watermark:!0,disable_weibo_cover:!0},e[_0xdf40e5(458,"Y4[S")]){for(let t of e[_0xdf40e5(548,"dYIp")])if(t.live_photo){let s={};s.video_id=t[_0xdf40e5(417,"H!Ml")].media[_0xdf40e5(568,"dYIp")],s[_0xdf40e5(503,"#Y1N")]=t[_0xdf40e5(455,"p7mb")],s[_0xdf40e5(422,"zu@R")]=t[_0xdf40e5(447,"mjQb")][_0xdf40e5(418,"ylJp")].stream.h265[0][_0xdf40e5(396,"c^p#")],c.push(s)}}}$.setdata(JSON.stringify(c),$.RedBookPhotoKey),body=JSON.stringify(o)}catch{}break;case/api\/sns\/v\d+\/homefeed\/categories\?/[_0xdf40e5(592,"g&En")]($request[_0xdf40e5(419,"p]6i")]):try{let o=JSON[_0xdf40e5(479,"2OdI")](body);o.data.categories=o.data.categories.filter(c=>!(c[_0xdf40e5(556,"5M9I")]==_0xdf40e5(586,"(XOT")||c[_0xdf40e5(562,"a*)g")]==_0xdf40e5(567,"WQZj")||c[_0xdf40e5(407,"tYA&")]=="homefeed.live")),body=JSON[_0xdf40e5(584,"xxzb")](o)}catch{}break;case/api\/sns\/v\d+\/search\/hint/[_0xdf40e5(403,"WQZj")]($request.url):try{let o=JSON[_0xdf40e5(594,"nXj@")](body);o[_0xdf40e5(404,"Pb[d")]?.[_0xdf40e5(471,"xxzb")]&&(o.data[_0xdf40e5(460,"0[pm")]=[{title:_0xdf40e5(541,"[)RT"),type:"firstEnterOther#itemCfRecWord#\u641C\u7D22\u7B14\u8BB0#1",search_word:_0xdf40e5(538,"BE2R")}]),body=JSON[_0xdf40e5(398,"zu@R")](o)}catch{}break;case/api\/sns\/v\d+\/search\/hot_list/[_0xdf40e5(534,"I&NS")]($request.url):try{let o=JSON[_0xdf40e5(512,"zu@R")](body);o.data={scene:"",title:"",items:[],host:"",background_color:{},word_request_id:""},body=JSON[_0xdf40e5(519,"#Y1N")](o)}catch{}break;case/api\/sns\/v\d+\/search\/trending/[_0xdf40e5(420,"JPEi")]($request[_0xdf40e5(494,"JPEi")]):try{let o=JSON[_0xdf40e5(444,"[)RT")](body);o[_0xdf40e5(604,"tYA&")]={title:"",queries:[],type:"",word_request_id:""},body=JSON.stringify(o)}catch{}break;case/api\/sns\/v\d+\/system_service\/splash_config/[_0xdf40e5(423,"kEpn")]($request.url):try{let o=JSON[_0xdf40e5(564,"dat4")](body);o[_0xdf40e5(393,"g&En")][_0xdf40e5(572,"9SGB")][_0xdf40e5(481,"g[G4")](c=>{const a=_0xdf40e5,e={JrHRC:a(483,"p]6i"),UIeaH:a(542,"c^p#"),vJXtf:a(391,"nXj@"),kfsYw:function(t,s){return t===s},eRxeF:a(459,"a*)g")};if(c.start_time=e.JrHRC,c[a(570,"p7mb")]=e[a(581,"g[G4")],c[a(428,"FGzQ")]){if(e[a(496,"ylJp")](e[a(498,"3CD5")],"JRxNZ"))c[a(472,"@qXn")].forEach(t=>{const s=a;t.start_time=e[s(565,"UDHa")],t[s(446,"BE2R")]="2209050061"});else if(_0x54e67c[a(412,"Y(K)")])for(let t of _0x610a8b[e[a(381,"q$E5")]])t[a(516,"V$fZ")]?.[a(532,"LRoG")]&&(t[a(536,"nXj@")]=t.meme_package[a(545,"H!Ml")],t[a(406,"BE2R")]=t.meme_package.image_url)}}),body=JSON.stringify(o)}catch{}break;case/api\/sns\/v\d+\/homefeed\?/[_0xdf40e5(592,"g&En")]($request[_0xdf40e5(463,"#Y1N")]):try{let o=JSON[_0xdf40e5(564,"dat4")](body);o[_0xdf40e5(393,"g&En")]=o.data.filter(c=>!c.is_ads),body=JSON.stringify(o)}catch{}break;case/api\/sns\/v\d+\/search\/notes\?/[_0xdf40e5(434,"c^p#")]($request[_0xdf40e5(533,"E3UY")]):try{let o=JSON[_0xdf40e5(414,"kEpn")](body);o[_0xdf40e5(546,"H!Ml")][_0xdf40e5(511,"WQZj")]=o[_0xdf40e5(499,"[)RT")].items[_0xdf40e5(492,"kEpn")](c=>!c.ads),body=JSON[_0xdf40e5(584,"xxzb")](o)}catch{}break;case/api\/sns\/v\d+\/system_service\/config\?/[_0xdf40e5(470,"3CD5")]($request.url):try{let o=JSON.parse(body);const c=[_0xdf40e5(527,"2OdI"),_0xdf40e5(377,"nXj@"),_0xdf40e5(456,"nXj@"),"app_theme",_0xdf40e5(453,"2OdI"),_0xdf40e5(382,"j@Ig")];for(const a of c)o[_0xdf40e5(509,"c^p#")]?.[a]&&delete o[_0xdf40e5(508,"dYIp")][a];body=JSON.stringify(o)}catch{}break;default:$done({});break}$done({body})}else $done({});function Env(o,c){typeof process<"u"&&JSON.stringify(process.env).indexOf("GITHUB")>-1&&process.exit(0);class a{constructor(t){this.env=t}send(t,s="GET"){t=typeof t=="string"?{url:t}:t;let r=this.get;return s==="POST"&&(r=this.post),new Promise((i,d)=>{r.call(this,t,(W,x,l)=>{W?d(W):i(x)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(e,t){this.name=e,this.http=new a(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator=`
`,this.startTime=new Date().getTime(),Object.assign(this,t)}isNode(){return typeof module<"u"&&!!module.exports}isQuanX(){return typeof $task<"u"}isSurge(){return typeof $httpClient<"u"&&typeof $loon>"u"}isLoon(){return typeof $loon<"u"}toObj(e,t=null){try{return JSON.parse(e)}catch{return t}}toStr(e,t=null){try{return JSON.stringify(e)}catch{return t}}getjson(e,t){let s=t;if(this.getdata(e))try{s=JSON.parse(this.getdata(e))}catch{}return s}setjson(e,t){try{return this.setdata(JSON.stringify(e),t)}catch{return!1}}getScript(e){return new Promise(t=>{this.get({url:e},(s,r,i)=>t(i))})}runScript(e,t){return new Promise(s=>{let r=this.getdata("@chavy_boxjs_userCfgs.httpapi");r=r&&r.replace(/\n/g,"").trim();let i=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");i=i?1*i:20,i=t&&t.timeout?t.timeout:i;const[d,W]=r.split("@"),x={url:`http://${W}/v1/scripting/evaluate`,body:{script_text:e,mock_type:"cron",timeout:i},headers:{"X-Key":d,Accept:"*/*"}};this.post(x,(l,u,h)=>s(h))}).catch(s=>this.logErr(s))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const e=this.path.resolve(this.dataFile),t=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(e),r=!s&&this.fs.existsSync(t);if(!s&&!r)return{};{const i=s?e:t;try{return JSON.parse(this.fs.readFileSync(i))}catch{return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const e=this.path.resolve(this.dataFile),t=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(e),r=!s&&this.fs.existsSync(t),i=JSON.stringify(this.data);s?this.fs.writeFileSync(e,i):r?this.fs.writeFileSync(t,i):this.fs.writeFileSync(e,i)}}lodash_get(e,t,s){const r=t.replace(/\[(\d+)\]/g,".$1").split(".");let i=e;for(const d of r)if(i=Object(i)[d],i===void 0)return s;return i}lodash_set(e,t,s){return Object(e)!==e||(Array.isArray(t)||(t=t.toString().match(/[^.[\]]+/g)||[]),t.slice(0,-1).reduce((r,i,d)=>Object(r[i])===r[i]?r[i]:r[i]=Math.abs(t[d+1])>>0==+t[d+1]?[]:{},e)[t[t.length-1]]=s),e}getdata(e){let t=this.getval(e);if(/^@/.test(e)){const[,s,r]=/^@(.*?)\.(.*?)$/.exec(e),i=s?this.getval(s):"";if(i)try{const d=JSON.parse(i);t=d?this.lodash_get(d,r,""):t}catch{t=""}}return t}setdata(e,t){let s=!1;if(/^@/.test(t)){const[,r,i]=/^@(.*?)\.(.*?)$/.exec(t),d=this.getval(r),W=r?d==="null"?null:d||"{}":"{}";try{const x=JSON.parse(W);this.lodash_set(x,i,e),s=this.setval(JSON.stringify(x),r)}catch{const l={};this.lodash_set(l,i,e),s=this.setval(JSON.stringify(l),r)}}else s=this.setval(e,t);return s}getval(e){return this.isSurge()||this.isLoon()?$persistentStore.read(e):this.isQuanX()?$prefs.valueForKey(e):this.isNode()?(this.data=this.loaddata(),this.data[e]):this.data&&this.data[e]||null}setval(e,t){return this.isSurge()||this.isLoon()?$persistentStore.write(e,t):this.isQuanX()?$prefs.setValueForKey(e,t):this.isNode()?(this.data=this.loaddata(),this.data[t]=e,this.writedata(),!0):this.data&&this.data[t]||null}initGotEnv(e){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,e&&(e.headers=e.headers?e.headers:{},e.headers.Cookie===void 0&&e.cookieJar===void 0&&(e.cookieJar=this.ckjar))}get(e,t=()=>{}){e.headers&&(delete e.headers["Content-Type"],delete e.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(e.headers=e.headers||{},Object.assign(e.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(e,(s,r,i)=>{!s&&r&&(r.body=i,r.statusCode=r.status),t(s,r,i)})):this.isQuanX()?(this.isNeedRewrite&&(e.opts=e.opts||{},Object.assign(e.opts,{hints:!1})),$task.fetch(e).then(s=>{const{statusCode:r,statusCode:i,headers:d,body:W}=s;t(null,{status:r,statusCode:i,headers:d,body:W},W)},s=>t(s))):this.isNode()&&(this.initGotEnv(e),this.got(e).on("redirect",(s,r)=>{try{if(s.headers["set-cookie"]){const i=s.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();i&&this.ckjar.setCookieSync(i,null),r.cookieJar=this.ckjar}}catch(i){this.logErr(i)}}).then(s=>{const{statusCode:r,statusCode:i,headers:d,body:W}=s;t(null,{status:r,statusCode:i,headers:d,body:W},W)},s=>{const{message:r,response:i}=s;t(r,i,i&&i.body)}))}post(e,t=()=>{}){if(e.body&&e.headers&&!e.headers["Content-Type"]&&(e.headers["Content-Type"]="application/x-www-form-urlencoded"),e.headers&&delete e.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(e.headers=e.headers||{},Object.assign(e.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(e,(s,r,i)=>{!s&&r&&(r.body=i,r.statusCode=r.status),t(s,r,i)});else if(this.isQuanX())e.method="POST",this.isNeedRewrite&&(e.opts=e.opts||{},Object.assign(e.opts,{hints:!1})),$task.fetch(e).then(s=>{const{statusCode:r,statusCode:i,headers:d,body:W}=s;t(null,{status:r,statusCode:i,headers:d,body:W},W)},s=>t(s));else if(this.isNode()){this.initGotEnv(e);const{url:s,...r}=e;this.got.post(s,r).then(i=>{const{statusCode:d,statusCode:W,headers:x,body:l}=i;t(null,{status:d,statusCode:W,headers:x,body:l},l)},i=>{const{message:d,response:W}=i;t(d,W,W&&W.body)})}}time(e,t=null){const s=t?new Date(t):new Date;let r={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let i in r)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,RegExp.$1.length==1?r[i]:("00"+r[i]).substr((""+r[i]).length)));return e}msg(e=o,t="",s="",r){const i=d=>{if(!d)return d;if(typeof d=="string")return this.isLoon()?d:this.isQuanX()?{"open-url":d}:this.isSurge()?{url:d}:void 0;if(typeof d=="object"){if(this.isLoon()){let W=d.openUrl||d.url||d["open-url"],x=d.mediaUrl||d["media-url"];return{openUrl:W,mediaUrl:x}}if(this.isQuanX()){let W=d["open-url"]||d.url||d.openUrl,x=d["media-url"]||d.mediaUrl;return{"open-url":W,"media-url":x}}if(this.isSurge())return{url:d.url||d.openUrl||d["open-url"]}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,t,s,i(r)):this.isQuanX()&&$notify(e,t,s,i(r))),!this.isMuteLog){let d=[""];d.push(e),t&&d.push(t),s&&d.push(s),this.logs=this.logs.concat(d)}}log(...e){e.length>0&&(this.logs=[...this.logs,...e])}logErr(e,t){!this.isSurge()&&!this.isQuanX()&&!this.isLoon()?this.log("",`\u2757\uFE0F${this.name}, \u9519\u8BEF!`,e.stack):this.log("",`\u2757\uFE0F${this.name}, \u9519\u8BEF!`,e)}wait(e){return new Promise(t=>setTimeout(t,e))}done(e={}){const t=new Date().getTime(),s=(t-this.startTime)/1e3;(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(e)}}(o,c)}
