// Fri Sep 12 2025 21:17:52 GMT+0000 (Coordinated Universal Time) https://raw.githubusercontent.com/ElementRef/AboutConfig/main/script/ddgksf2013.red.book.js
const $=new Env("\u5C0F\u7EA2\u4E66");var _0xodj="jsjiami.com.v7";function _0x410e(o,r){const W=_0x5cbc();return _0x410e=function(e,t){e=e-477;let d=W[e];if(_0x410e.mYvJaA===void 0){var s=function(l){const h="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let n="",u="";for(let f=0,p,x,b=0;x=l.charAt(b++);~x&&(p=f%4?p*64+x:x,f++%4)?n+=String.fromCharCode(255&p>>(-2*f&6)):0)x=h.indexOf(x);for(let f=0,p=n.length;f<p;f++)u+="%"+("00"+n.charCodeAt(f).toString(16)).slice(-2);return decodeURIComponent(u)};const S=function(l,h){let n=[],u=0,f,p="";l=s(l);let x;for(x=0;x<256;x++)n[x]=x;for(x=0;x<256;x++)u=(u+n[x]+h.charCodeAt(x%h.length))%256,f=n[x],n[x]=n[u],n[u]=f;x=0,u=0;for(let b=0;b<l.length;b++)x=(x+1)%256,u=(u+n[x])%256,f=n[x],n[x]=n[u],n[u]=f,p+=String.fromCharCode(l.charCodeAt(b)^n[(n[x]+n[u])%256]);return p};_0x410e.PlYzpQ=S,o=arguments,_0x410e.mYvJaA=!0}const a=W[0],i=e+a,c=o[i];return c?d=c:(_0x410e.nfxovO===void 0&&(_0x410e.nfxovO=!0),d=_0x410e.PlYzpQ(d,t),o[i]=d),d},_0x410e(o,r)}function _0x5cbc(){const o=(function(){return[_0xodj,"RbjfsljSwbiEBapGPmJIirP.EwrcoTmM.elvAW7A==","Cmosf8kPWRf7W6NcUCk9","W79GBmoVrW","W7/cLCoPW74bs0NdP8k1","W7ZcGmoPW6qk","WQtcNqSKdvC","W6tdQSkBAgLXWQX+","FYLuWPRcKa","W5ZdO8kB","q2LqBaXQW5i","WPlcUmo/wq","vdeCnmoQW44NWQNcVCkPaqHiWRxdPH3cPa","W41nnmobW6yCW6NcSSonWOO","WP1EC8ozWOq3xdH4u8o0WQJcGSoAqH4","sx3cNNzu","WPyxFCoHW7/dVJvfW7fQW4JcMcldJSovoCkn","rYfyWRu","W4bFWRlcQCkHWRLLF8kGW5FcQSoKEW","WRtcNqm1b3PzWOpdK1pdRSkNW7ldNG","WPzoECotWPebqdDru8ofWR/cN8oDqqtcMq","k8kCCufOW5ldPcqpW7vAW5yOlsOLvW","Fmkbva","W4RdL8onuG","W4f/FCo2vZTVW5qsymopW6nbWOSm","WROtW7BcT14NW6jiW4jPgmkTbSouAmoVCa","WPjXnMmpWQBdGmocsSknW63cIvr5W58jWPO","gCoOW7hcTSogWRe","aSoOWPxdSWm","sNtcJxDuW4bJW5aBuG","W6vGE8oNvxq","c8oSWOxdUW","kSoYWRO","D2eFWPhdJ8oszmoqgCkgECovo8kHWOiyW4y","W49GWRhcSX/cTmoVqHtcLGTnkW","F8oqba","qmoqW5rvhq","sMJcNMXFW7HJW5Ge","b8kbWPCFqCo1W6HOeYhcP1S","abBdL8oCAHhdV8kKeGhcMcldPSo1W6y","tmoQWRO7jfeuW4GwWQPiWRddPCkt","vsLiWRhdTmoAwYzniHZdR8k6W5q","hqpdUSoGxuzFW78","jLeUWRddRG","qwLd","WPaxySo0","of8OWQBdLeO6","W70VW57cJLK6W64","WPdcVxFdGbm","hSoGsmoghCoSfSkaia","B8kyc8on","WOddH8kOWPNcISkmW7n3W4u","hSo6W5RcVSouWQDSW4aetrL9","vdeucSo3W48","iCknu8opW7yHWQVdRCo4Cq","A3ijWQddMCoEzSowv8od","WOX7pq","jmoyeCkyWOS","WOdcTmoGwsZcOG","j8ofc8kw","vsqCnmoTW4mCWPxcTCkOcavCW5dcQa","rCodW4O","W5BcGmkIWP4","eCoQs8omdmoQ","Ddeuf8oXW4qOWQdcS8kIcWnWWO/dSq","W5FdQui","gaTMWPpdKHBcGuzbgGO","WOH1kv0jWQBdImo8wCkhW6BcSKbjW54yWOq","aa/dVCo9swTjW63dPc7cU8o8kGBcTKKh","nSoTWRCeWPK1W4izatVcUW","emoxWQa","i0m5WRe","W6b9BCoNw0yKW656W5e6","W7j1FCoJ"].concat((function(){return["W7vqWQ7cHa","ut4hg8oT","tSoMWQ0Q","oge+","iSo+W4RcLConWQ1yW6ydsW53lJvJ","amo6W5ZcPmoh","WOpdKSkOWOpcGq","W43dQv4","e8oGuCooj8oUc8ojDa","uJediq","mLeOWQi","W4r2w8k0W4a","fCoGuCo0fmoReCoooSo1","WQWxW67cTW","whvbEW","WQyzW67cS3uUW69KW5e","DmkprZy","W7VcNY1ZxCkS","WPKWW7ddOG","W4JdUcpcN1xdHCktc33cTSoiW43dHq","W5nejSohW6yXW5/cQCozWOK","b8oSWOldHrbJlmoVW7RdLSoAEhfnnIz2","W5hdVK/dT2iDWOb1B8k3fKhdQKi","gmozWRpcSa","BCkCgSoicmoh","mmkvy2X/W6JdOsSDW78","jH/dNem","WO7cVmo/CJVcTCkUWOVcUbThW5qRbCkml1O","tIviWR3dUSoAtcHmks/dO8k0W549W6SJ","W47dH8ontG","wCkCg8oUxCkiFJjhpd4xASkPhq","dSoDWRFcVSozW4y","W6BdPSkmEq","WP9kACoB","W6vXFCoMvw02","d8oQsCokdmoNbSoLz8k6W5BdQCocEqRcPmo8","sCo3WQW3jwKBW4Sk","WORcKmoycd3cTG","W7ZdRmklAfLcWQXPWPK","cqVdRCo1","udrEWR3dTCoIvI9d","ymk0bCozAa","W5pcHCkL","sMnqBtj3W5C","EmkbxJjNWRG4WOhcMXi","W4PajSoh","W77dQSkjAfLEWQ11WPNdJW","W5RdK8okr0q","W5FdPCk9gZpcOCkuWQxcHqS","WPtcRhBdHahcRCorigNcM8oKW6JdIYTifXa","5PkQ57su56+c6k28","WRlcLruJdq","WOxcLmovgZ3cM8kvW7JcJa","WOhcNmoqftK","WPvMnG","W6vGAmoWqeyJW7DYW5e","W5f3wSkLW5hcSCk/W53dHCoqoCouo8oXWQee","WRhcJrqKduHIWP/dGu/dTmkHW7ddN8oabW","ir/dNeC2WRSWemoIW6JdKLu","vCoQWRO","iSoFa243W6KkWORdUxNcPSop","WP7cRhZdIblcK8owjedcL8owW6RdGYa","yqbTW7RcSHurWPnbWPBcLSkI","W5q/b8kiW4q","W7nqWQ3cN1dcSa","WPeaFq","zSkydmoyv8kvsHDDpW","W7T7ASoRsJfOW6mpyCooW5nTWOeAv8ky","xNjfFszW","hHRdTCo1w1W","vSoSWRK","W7b1DmozxtPWW7e","W5hdP0VdSZG","WQKsW6K"].concat((function(){return["jrVdNeyWWQaJ","mbVdJea+WRSPjSoYW6JcJqFcHMpdGmkXsmoGEvRdTmki","eCoGqG","xNjwyd1KW58IW7S","vsacpmoWW4WQWPdcOW","B2eEWR3dMa","WOtdMmoHW4BdTmkFWR7dO3NdKq","WQhcSSoioJayWOP0WO/dJ0Xb","5Pcp57AD56236k2g","EmkndCofxmkaFarw","W5ldSKVdPtWL","zIvhWO7cKmk6FeRdSq","F8kCdmoy","W7RcKIbkqa","dbJdJSoy","W5v5vmoq","mSoLWRikWP0zW64uhI3cKc0CW6TDuSki","dSoNrmozhCoDc8ouzSk6","W7ddVKRdH24AW4rnACkNfL3cMWFcUa","W5hcJSkMWOBdG8kBWPZdN1O","bSoYW4RcSSonW7Gt","pxKwW5ddG8orxLFdHsJcH8oI","m8kCCg1/","W5ddNCokq2JdTSkO","WPFdKSkUWPe","W7tdRmknsgDnWQ0","W6bUA8oDvJnTW6qc","l8oHWQqqWPK","mmkjChD0W5ddOsmc","vxpcIW","WOatzCoH","iLuVWRC","BhqEWQVdNmoA","W4lcGmkKWOZdUq","W5pdL8oAt1BdGmk/lJtdN1GQWPDgF8k7fG","WOuwySoFW6ZdQt5VW6z2","yI1cWOdcLa","AmoMWROCjgezW7SAWQPpWR7dJCkDwG","z8kCeColrSkp","WOqeW6BdTmo3W5a/j8oWWOK","tMLuCaXVW58QW6K","fmoYW53cU8olWQLw","WORcSSoR","WPnGkgSvWQtdJCo7va","nWZdHa","W4FdLCoetxa","WOX8wSoxWOrYW7ZcTCoko8orWRJdG3m","brZdL8oCuWtdU8kJvXpcLci","c8ozWRpcTmozW596WR9gcHr5f1hdHLddGSkp","W4Txoq","pW/dVCowr1TrW5ZdUItcKmoWdG3cQq","WPC4uSoeW4O","fmoxWQRcTmonW5D+WQKdjGX/ba","emorWRhcTmo0W4jZWQjzoG","W5PeiCos","BmkCc8oiu8ktDa","fCoMs8oFqSkI","WOy1dmo0WPBdQ8oMWOxdNCo7iSochSoE","WOuWbmo/WPxdRCoGWOpcRmke","WOXZu8otW40WWPZdJmoeaa","jfu4WRFdVKe7W4is","WPxdMSk2WPxcU8kcW74","jCovfmkFWOVdIaSlgmoIWOfXW7iRoCkfWRy","qgnjBaXZW5CNW6NcGLGI","pmoHWQigWPSPW68CdtS","W7VcNYvnqmkTW5blixjIAvVdVIhcNIe","W4ZdO13dQtWxBhz/W7FcUSkWW7lcKaOYW60","zCkbtCooW4NcLf02d8oUWO1FW6W","W4RdUcxcMLBdHmoTl33cKConW48","W4tdTmkAWRmwW5tdGCowzspdHdK","y8kqeCoyBCkqEHblia"]})())})())})();return _0x5cbc=function(){return o},_0x5cbc()}const _0x31fd09=_0x410e;(function(o,r,W,e,t,d,s){return o=o>>1,d="hs",s="hs",(function(a,i,c,S,l){const h=_0x410e;S="tfi",d=S+d,l="up",s+=l,d=c(d),s=c(s),c=0;const n=a();for(;--e+i;)try{S=-parseInt(h(611,"*Re^"))/1+-parseInt(h(613,"D0dR"))/2+-parseInt(h(570,"kSHc"))/3+parseInt(h(511,"Mghs"))/4*(-parseInt(h(524,"xCdY"))/5)+parseInt(h(693,"kSHc"))/6+parseInt(h(631,"bVRc"))/7*(-parseInt(h(599,"OKjs"))/8)+parseInt(h(671,"N0M#"))/9}catch{S=c}finally{if(l=n[d](),o<=e)c?t?S=l:t=l:c=l;else if(c==t.replace(/[fSRBEPIJTrGleMWAwpb=]/g,"")){if(S===i){n["un"+d](l);break}n[s](l)}}})(W,r,function(a,i,c,S,l,h,n){return i="split",a=arguments[0],a=a[i](""),c="reverse",a=a[c]("v"),S="join",a[S]("")})})(384,336524,_0x5cbc,194),_0x5cbc&&(_0xodj=_0x5cbc);$[_0x31fd09(581,")5cf")]=_0x31fd09(626,"YXE^"),$[_0x31fd09(643,"wfOp")]="redbook_user_video_key";let body=$response.body;if(body){switch(!0){case/api\/sns\/v\d+\/note\/widgets/[_0x31fd09(583,"d)K7")]($request[_0x31fd09(509,"g]p8")]):try{let o=JSON[_0x31fd09(513,"exAd")](body);o[_0x31fd09(584,"d22#")]={},body=JSON[_0x31fd09(629,"0a2Z")](o)}catch{}break;case/api\/sns\/v\d+\/note\/live_photo\/save/[_0x31fd09(596,"UHJR")]($request.url):try{let o=JSON[_0x31fd09(623,"&Kv7")](body);o[_0x31fd09(508,")(jY")][_0x31fd09(598,"No&v")]=JSON[_0x31fd09(520,"D0dR")]($[_0x31fd09(680,")5cf")]($[_0x31fd09(675,"@g]*")])),body=JSON.stringify(o)}catch{}break;case/api\/sns\/v\d+\/note\/video\/save/[_0x31fd09(637,")5cf")]($request[_0x31fd09(542,"wfOp")]):try{let o=JSON.parse(body),r=JSON[_0x31fd09(482,"a*Y2")]($.getdata($[_0x31fd09(662,"B9$)")]));for(let W of r)W[_0x31fd09(523,"D0dR")]==o[_0x31fd09(564,"xCdY")][_0x31fd09(487,"U@pO")]&&(o[_0x31fd09(539,"bVRc")]=W);body=JSON[_0x31fd09(591,"76CK")](o)}catch{}break;case/api\/sns\/v\d+\/note\/comment\/list/.test($request.url):try{let o=JSON[_0x31fd09(652,"g]p8")](body);for(let r of o.data[_0x31fd09(622,"di%u")])if(r.pictures){r.user.user_id=r[_0x31fd09(565,"U@pO")][_0x31fd09(568,"DK(E")],delete r[_0x31fd09(548,"D0dR")][_0x31fd09(530,"0a2Z")];for(let W of r[_0x31fd09(519,"@g]*")])W[_0x31fd09(477,"az6u")]?.[_0x31fd09(636,"KH$L")]&&(W.origin_url=W[_0x31fd09(688,"U@pO")].image_url,W[_0x31fd09(674,"UHJR")]=W[_0x31fd09(672,"g5nr")][_0x31fd09(603,"S8Xe")])}body=JSON.stringify(o)}catch{}break;case/api\/sns\/v\d+\/note\/redtube/[_0x31fd09(522,"WAB8")]($request.url):try{let o=JSON.parse(body);for(let r of o[_0x31fd09(574,"&L5J")][_0x31fd09(525,"kSHc")])r[_0x31fd09(586,"nbsi")]&&(r[_0x31fd09(493,"WAB8")]=0),r[_0x31fd09(498,"xCu#")]&&(r.has_related_goods=!1),r[_0x31fd09(641,"g]p8")]&&(r[_0x31fd09(497,"d22#")]={disable_save:!1,disable_watermark:!0,disable_weibo_cover:!0}),r[_0x31fd09(490,"UHJR")]&&(r[_0x31fd09(506,"U)$E")][_0x31fd09(491,"d22#")]=[{type:_0x31fd09(496,"5GUJ")},{type:_0x31fd09(612,"kSHc")},{type:_0x31fd09(644,"bVRc")},{type:"native_voice"},{type:_0x31fd09(549,"rJGu")},{type:"dislike"},{type:_0x31fd09(582,"&L5J")},{type:_0x31fd09(517,"B9$)")}]);body=JSON[_0x31fd09(587,"B9$)")](o)}catch{}break;case/api\/sns\/v\d+\/note\/(tab|video)feed/[_0x31fd09(656,"D0dR")]($request.url):try{let o=JSON[_0x31fd09(630,"cs6[")](body),r=JSON[_0x31fd09(556,"HE&6")]($[_0x31fd09(594,"U@pO")]($[_0x31fd09(541,"0a2Z")])),W=[...r],e=o.data[_0x31fd09(480,"rJGu")]||o[_0x31fd09(550,"rJGu")];for(let t of e)if(t[_0x31fd09(502,"xCdY")]&&(t[_0x31fd09(687,"lDm^")]=0),t.has_related_goods&&(t[_0x31fd09(618,"di%u")]=!1),t[_0x31fd09(659,"No&v")]&&(t[_0x31fd09(545,"@g]*")]={disable_save:!1,disable_watermark:!0,disable_weibo_cover:!0}),t[_0x31fd09(642,"nbsi")]&&(t[_0x31fd09(576,"xCu#")][_0x31fd09(607,"Hel!")]=[{type:_0x31fd09(518,"76CK")},{type:"generate_image"},{type:_0x31fd09(665,"U@pO")},{type:_0x31fd09(529,"HE&6")},{type:"video_speed"},{type:_0x31fd09(666,"HE&6")},{type:_0x31fd09(615,"0971")},{type:"video_feedback"}]),t.video_info_v2?.media?.[_0x31fd09(635,"&Kv7")]?.[_0x31fd09(640,"N0M#")]){let d={};d[_0x31fd09(619,"U@pO")]=2,d[_0x31fd09(648,"No&v")]=t.id,d.download_url=t[_0x31fd09(495,"X@RR")][_0x31fd09(661,"KH$L")][_0x31fd09(657,"cs6[")].h265[0][_0x31fd09(617,")5cf")],W[_0x31fd09(580,"No&v")](d)}for(;W[_0x31fd09(663,")5cf")]>100;)W[_0x31fd09(534,"lDm^")]();$[_0x31fd09(585,"rJGu")](JSON.stringify(W),$[_0x31fd09(501,"di%u")]),body=JSON.stringify(o)}catch{}break;case/api\/sns\/v\d+\/note\/feed/.test($request.url):try{let o=JSON[_0x31fd09(556,"HE&6")](body);for(let r of o[_0x31fd09(494,"76CK")])if(r[_0x31fd09(690,"DK(E")]&&(r[_0x31fd09(489,"0a2Z")]=0),r[_0x31fd09(510,"cs6[")]&&(r[_0x31fd09(578,"OKjs")]=!1),r[_0x31fd09(566,"xCdY")])for(let W of r[_0x31fd09(589,"d)K7")])W[_0x31fd09(691,"&Kv7")]={disable_save:!1,disable_watermark:!0,disable_weibo_cover:!0};body=JSON[_0x31fd09(651,"di%u")](o)}catch{}break;case/api\/sns\/v\d+\/note\/imagefeed/[_0x31fd09(553,"B9$)")]($request[_0x31fd09(538,"exAd")]):try{let o=JSON.parse(body),r=JSON.parse($[_0x31fd09(625,"YXE^")]($[_0x31fd09(555,"HE&6")])),W=[...r],e=o[_0x31fd09(655,"WAB8")].items||o[_0x31fd09(577,"YXE^")];for(let t of e)if(t[_0x31fd09(503,"n2eb")]&&(t.related_goods_num=0),t[_0x31fd09(572,")(jY")]&&(t[_0x31fd09(544,"n2eb")]=!1),t[_0x31fd09(559,"nbsi")]){for(let d of t.note_list)if(d[_0x31fd09(579,"76CK")]={disable_save:!1,disable_watermark:!0,disable_weibo_cover:!0},d[_0x31fd09(543,"ZcNv")]){for(let s of d[_0x31fd09(546,"g]p8")])if(s[_0x31fd09(678,"&L5J")]){let a={};a.video_id=s[_0x31fd09(597,"d)K7")][_0x31fd09(505,")(jY")][_0x31fd09(484,"d)K7")],a[_0x31fd09(686,"bEqG")]=s.live_photo_file_id,a[_0x31fd09(605,"n2eb")]=s.live_photo[_0x31fd09(604,"S8Xe")][_0x31fd09(507,"rJGu")].h265[0][_0x31fd09(571,"UHJR")],W[_0x31fd09(536,"lDm^")](a)}}}for(;W[_0x31fd09(540,"nbsi")]>100;)W[_0x31fd09(638,"DK(E")]();$.setdata(JSON[_0x31fd09(481,"a*Y2")](W),$.RedBookPhotoKey),body=JSON.stringify(o)}catch{}break;case/api\/sns\/v\d+\/homefeed\/categories\?/[_0x31fd09(488,"OKjs")]($request[_0x31fd09(486,"az6u")]):try{let o=JSON[_0x31fd09(602,"5GUJ")](body);o[_0x31fd09(679,"UHJR")][_0x31fd09(689,"g]p8")]=o[_0x31fd09(577,"YXE^")].categories[_0x31fd09(483,"5GUJ")](r=>!(r.oid==_0x31fd09(677,"&L5J")||r[_0x31fd09(554,"wB&Z")]==_0x31fd09(516,"g5nr")||r[_0x31fd09(610,"B9$)")]=="homefeed.live")),body=JSON[_0x31fd09(668,"n2eb")](o)}catch{}break;case/api\/sns\/v\d+\/search\/hint/[_0x31fd09(656,"D0dR")]($request[_0x31fd09(538,"exAd")]):try{let o=JSON[_0x31fd09(658,"bVRc")](body);o[_0x31fd09(508,")(jY")]?.[_0x31fd09(478,")5cf")]&&(o[_0x31fd09(649,"bEqG")].hint_words=[{title:_0x31fd09(601,"X@RR"),type:"firstEnterOther#itemCfRecWord#\u641C\u7D22\u7B14\u8BB0#1",search_word:_0x31fd09(633,"g9t4")}]),body=JSON[_0x31fd09(528,"bEqG")](o)}catch{}break;case/api\/sns\/v\d+\/search\/hot_list/[_0x31fd09(560,"0a2Z")]($request.url):try{let o=JSON.parse(body);o[_0x31fd09(561,"D0dR")]={scene:"",title:"",items:[],host:"",background_color:{},word_request_id:""},body=JSON[_0x31fd09(634,")5cf")](o)}catch{}break;case/api\/sns\/v\d+\/search\/trending/[_0x31fd09(500,"No&v")]($request.url):try{let o=JSON[_0x31fd09(485,"KH$L")](body);o[_0x31fd09(569,"Mghs")]={title:"",queries:[],type:"",word_request_id:""},body=JSON[_0x31fd09(514,"U)$E")](o)}catch{}break;case/api\/sns\/v\d+\/system_service\/splash_config/[_0x31fd09(551,"0971")]($request[_0x31fd09(616,"WAB8")]):try{let o=JSON[_0x31fd09(647,"xCu#")](body);o[_0x31fd09(639,"g5nr")][_0x31fd09(660,"WAB8")].forEach(r=>{const W=_0x31fd09,e={sJCDA:"2208963661",wjwNs:W(683,"Hel!"),JeTPs:function(t,d){return t===d},ygzkG:"arFpe"};r[W(606,"rJGu")]=W(664,"X@RR"),r.end_time=W(531,"g9t4"),r[W(593,"bVRc")]&&(e.JeTPs(W(592,")5cf"),e[W(670,"No&v")])?_0x599c18[W(600,"kSHc")]={disable_save:!1,disable_watermark:!0,disable_weibo_cover:!0}:r[W(624,"xCdY")][W(650,"d)K7")](t=>{const d=W;t.start_time=e[d(676,"WAB8")],t.end_time=e[d(552,"0a2Z")]}))}),body=JSON.stringify(o)}catch{}break;case/api\/sns\/v\d+\/homefeed\?/.test($request[_0x31fd09(669,"YXE^")]):try{let o=JSON[_0x31fd09(492,"U)$E")](body);o[_0x31fd09(649,"bEqG")]=o[_0x31fd09(567,"*Re^")][_0x31fd09(535,"OKjs")](r=>!r[_0x31fd09(504,"HE&6")]),body=JSON[_0x31fd09(653,"xCu#")](o)}catch{}break;case/api\/sns\/v\d+\/search\/notes\?/.test($request.url):try{let o=JSON[_0x31fd09(557,"bEqG")](body);o.data.items=o[_0x31fd09(527,")5cf")][_0x31fd09(614,"N0M#")][_0x31fd09(588,"S8Xe")](r=>!r.ads),body=JSON[_0x31fd09(628,"U@pO")](o)}catch{}break;case/api\/sns\/v\d+\/system_service\/config\?/.test($request.url):try{let o=JSON[_0x31fd09(485,"KH$L")](body);const r=[_0x31fd09(562,"Hel!"),_0x31fd09(620,"@g]*"),"loading_img","app_theme",_0x31fd09(479,"g9t4"),"highlight_tab"];for(const W of r)o[_0x31fd09(590,"@g]*")]?.[W]&&delete o[_0x31fd09(649,"bEqG")][W];o.data?.[_0x31fd09(673,"&L5J")]&&delete o.data.watermark_pic_path,body=JSON.stringify(o)}catch{}break;default:$done({});break}$done({body})}else $done({});function Env(o,r){class W{constructor(t){this.env=t}send(t,d="GET"){t=typeof t=="string"?{url:t}:t;let s=this.get;return d==="POST"&&(s=this.post),new Promise((a,i)=>{s.call(this,t,(c,S,l)=>{c?i(c):a(S)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(e,t){this.name=e,this.http=new W(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator=`
`,this.startTime=new Date().getTime(),Object.assign(this,t)}isQuanX(){return typeof $task<"u"}isSurge(){return typeof $httpClient<"u"&&typeof $loon>"u"}isShadowrocket(){return typeof $rocket<"u"}toObj(e,t=null){try{return JSON.parse(e)}catch{return t}}toStr(e,t=null){try{return JSON.stringify(e)}catch{return t}}getjson(e,t){let d=t;if(this.getdata(e))try{d=JSON.parse(this.getdata(e))}catch{}return d}setjson(e,t){try{return this.setdata(JSON.stringify(e),t)}catch{return!1}}lodash_get(e,t,d){let s=e;for(const a of t.replace(/\[(\d+)\]/g,".$1").split("."))if(s=Object(s)[a],s===void 0)return d;return s}lodash_set(e,t,d){return Object(e)!==e||((t=Array.isArray(t)?t:t.toString().match(/[^.[\]]+/g)||[]).slice(0,-1).reduce((s,a,i)=>Object(s[a])===s[a]?s[a]:s[a]=Math.abs(t[i+1])>>0==+t[i+1]?[]:{},e)[t[t.length-1]]=d),e}getdata(e){let t=this.getval(e);if(/^@/.test(e)){var[,s,d]=/^@(.*?)\.(.*?)$/.exec(e),s=s?this.getval(s):"";if(s)try{const a=JSON.parse(s);t=a?this.lodash_get(a,d,""):t}catch{t=""}}return t}setdata(e,t){let d=!1;if(/^@/.test(t)){var[,s,a]=/^@(.*?)\.(.*?)$/.exec(t),i=this.getval(s),i=s?i==="null"?null:i||"{}":"{}";try{const c=JSON.parse(i);this.lodash_set(c,a,e),d=this.setval(JSON.stringify(c),s)}catch{i={},this.lodash_set(i,a,e),d=this.setval(JSON.stringify(i),s)}}else d=this.setval(e,t);return d}getval(e){return this.isSurge()||this.isShadowrocket()?$persistentStore.read(e):this.isQuanX()?$prefs.valueForKey(e):null}setval(e,t){return this.isSurge()||this.isShadowrocket()?$persistentStore.write(e,t):this.isQuanX()?$prefs.setValueForKey(e,t):null}get(e,t=()=>{}){e.headers&&(delete e.headers["Content-Type"],delete e.headers["Content-Length"]),this.isSurge()||this.isShadowrocket()?(this.isSurge()&&this.isNeedRewrite&&(e.headers=e.headers||{},Object.assign(e.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(e,(d,s,a)=>{!d&&s&&(s.body=a,s.statusCode=s.status),t(d,s,a)})):this.isQuanX()&&(this.isNeedRewrite&&(e.opts=e.opts||{},Object.assign(e.opts,{hints:!1})),$task.fetch(e).then(s=>{var{statusCode:s,statusCode:a,headers:i,body:c}=s;t(null,{status:s,statusCode:a,headers:i,body:c},c)},d=>t(d)))}post(e,t=()=>{}){e.body&&e.headers&&!e.headers["Content-Type"]&&(e.headers["Content-Type"]="application/x-www-form-urlencoded"),e.headers&&delete e.headers["Content-Length"],this.isSurge()||this.isShadowrocket()?(this.isSurge()&&this.isNeedRewrite&&(e.headers=e.headers||{},Object.assign(e.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(e,(d,s,a)=>{!d&&s&&(s.body=a,s.statusCode=s.status),t(d,s,a)})):this.isQuanX()&&(e.method="POST",this.isNeedRewrite&&(e.opts=e.opts||{},Object.assign(e.opts,{hints:!1})),$task.fetch(e).then(s=>{var{statusCode:s,statusCode:a,headers:i,body:c}=s;t(null,{status:s,statusCode:a,headers:i,body:c},c)},d=>t(d)))}time(e,s=null){var d,s=s?new Date(s):new Date,a={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};for(d in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+d+")").test(e)&&(e=e.replace(RegExp.$1,RegExp.$1.length==1?a[d]:("00"+a[d]).substr((""+a[d]).length)));return e}msg(e=o,t="",d="",s){var a=i=>i&&(typeof i=="string"?this.isShadowrocket()?i:this.isQuanX()?{"open-url":i}:this.isSurge()?{url:i}:void 0:typeof i=="object"?this.isShadowrocket()?{openUrl:i.openUrl||i.url||i["open-url"],mediaUrl:i.mediaUrl||i["media-url"]}:this.isQuanX()?{"open-url":i["open-url"]||i.url||i.openUrl,"media-url":i["media-url"]||i.mediaUrl}:this.isSurge()?{url:i.url||i.openUrl||i["open-url"]}:void 0:void 0);this.isMute||(this.isSurge()||this.isShadowrocket()?$notification.post(e,t,d,a(s)):this.isQuanX()&&$notify(e,t,d,a(s))),this.isMuteLog||((a=[""]).push(e),t&&a.push(t),d&&a.push(d),this.logs=this.logs.concat(a))}log(...e){0<e.length&&(this.logs=[...this.logs,...e])}logErr(e,t){!this.isSurge()&&!this.isQuanX()&&!this.isShadowrocket()?this.log("",`\u2757\uFE0F${this.name}, \u9519\u8BEF!`,e.stack):this.log("",`\u2757\uFE0F${this.name}, \u9519\u8BEF!`,e)}wait(e){return new Promise(t=>setTimeout(t,e))}done(e={}){new Date().getTime(),this.startTime,(this.isSurge()||this.isQuanX()||this.isShadowrocket())&&$done(e)}}(o,r)}
