// https://raw.githubusercontent.com/ElementRef/AboutConfig/main/script/ddgksf2013.red.book.js
const $=new Env("\u5C0F\u7EA2\u4E66");var _0xod1="jsjiami.com.v7";const _0x1beb73=_0x4daa;(function(o,c,n,e,t,s,a){return o=o>>1,s="hs",a="hs",function(i,r,d,x,l){const u=_0x4daa;x="tfi",s=x+s,l="up",a+=l,s=d(s),a=d(a),d=0;const h=i();for(;--e+r;)try{x=parseInt(u(221,"kauu"))/1*(-parseInt(u(306,"(LTI"))/2)+-parseInt(u(215,"6AOc"))/3*(-parseInt(u(177,"U$W4"))/4)+-parseInt(u(258,"1QWV"))/5+parseInt(u(219,"*l)K"))/6+-parseInt(u(228,"@BHM"))/7+parseInt(u(301,"G@y)"))/8*(parseInt(u(299,"**0("))/9)+-parseInt(u(273,"i5!z"))/10*(-parseInt(u(304,"i5!z"))/11)}catch{x=d}finally{if(l=h[s](),o<=e)d?t?x=l:t=l:d=l;else if(d==t.replace(/[nIfgJMYLplqbeHyNhT=]/g,"")){if(x===r){h["un"+s](l);break}h[a](l)}}}(n,c,function(i,r,d,x,l,u,h){return r="split",i=arguments[0],i=i[r](""),d="reverse",i=i[d]("v"),x="join",i[x]("")})})(392,835579,_0x1b76,198),_0x1b76&&(_0xod1=_0x1b76);function _0x4daa(o,c){const n=_0x1b76();return _0x4daa=function(e,t){e=e-128;let s=n[e];if(_0x4daa.DFPzbj===void 0){var a=function(l){const u="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let h="",f="";for(let p=0,g,W,k=0;W=l.charAt(k++);~W&&(g=p%4?g*64+W:W,p++%4)?h+=String.fromCharCode(255&g>>(-2*p&6)):0)W=u.indexOf(W);for(let p=0,g=h.length;p<g;p++)f+="%"+("00"+h.charCodeAt(p).toString(16)).slice(-2);return decodeURIComponent(f)};const x=function(l,u){let h=[],f=0,p,g="";l=a(l);let W;for(W=0;W<256;W++)h[W]=W;for(W=0;W<256;W++)f=(f+h[W]+u.charCodeAt(W%u.length))%256,p=h[W],h[W]=h[f],h[f]=p;W=0,f=0;for(let k=0;k<l.length;k++)W=(W+1)%256,f=(f+h[W])%256,p=h[W],h[W]=h[f],h[f]=p,g+=String.fromCharCode(l.charCodeAt(k)^h[(h[W]+h[f])%256]);return g};_0x4daa.lCgqqW=x,o=arguments,_0x4daa.DFPzbj=!0}const i=n[0],r=e+i,d=o[r];return d?s=d:(_0x4daa.mxeYMp===void 0&&(_0x4daa.mxeYMp=!0),s=_0x4daa.lCgqqW(s,t),o[r]=s),s},_0x4daa(o,c)}$[_0x1beb73(274,"**0(")]=_0x1beb73(238,"D@g)");function _0x1b76(){const o=function(){return[_0xod1,"hNjYMsjighnaygmflhiLIb.HcgoqTmJpM.Tgevq7==","WR7cTLFdQXe+gxqugmkVW6NdJ3ZcRZy3","W57dO1K","W5/cRmo1m3nauIzIWQrZkmo+","qCowAmkanqnAp8oUW4mTWQTVW6m4la","W4VdRSkEjuJdOCk+e2a","eSoddW","W6JdGSoVWQOBW5mroCokks7dPxhcQW","AsHvW51X","pSkQpmkzWOnvafSc","nJyXW5ZdPmkxW4qqjq","Dhb3WO3cVCofW4WIjuxcKdu","WQjEWQ0","W4hdPf8MW6tcV21spMi","W6pdOSkivSkcFCoOWOJcVW","W7BdV8kitmkyx8oVWPRcO1lcMSoDnSodoZtcS8kBW5RdI8oXW6NdJxaWzmoQzeu65PcP57wD566J6kYIati","aYpcVSkKWPX9l8oYkmokcCoEW7ZcTG","uJJdImoNxubmWRf9W4CZDSkXwmkTW6Kx","ErRcQ1xcIa","aCoYW5jTbmogW7mJdHe8W73dMCk2uvxcPW","WQydW7Xp","tqq7aSofWRBdKmoOnCoWWOPQgqO","WRpdUSoqWQ8","WQRcULFdVGaP","W4iKWOtdSCkKncZdPmkAW45fWPmWvG","WQGQCuTiWQFdQHtdNa","WQdcVfW","hM1RWOjogaK+zSoa","W6THaetdUmo8W6tcUum4jKietCo8WPpcVq","W7jZW4BdSvFdIZ0uuSkvcKO","vI3cOSkNWPfLfq","W7TUsq","bCo8W4y","WPzYW5RcPSoUzZddKCk3W4HXWPa","WRxdKCkjCxNcRq","WQHai2/dUCo1W5u","tgFdTG","nSoFCCkm","W5uGWPJdP8kZ","uSkYWPW","p8oByCkexq","W7RdOhhdPq80d38","W4VdPYeKW5CxBmklc18tWQCt","q8k5W4SbFSoXWOFcNSk9W4rfWQi","WPhcV3DT","WOhcTx91WPbdo8kKiKyxWOKyWOvZjYO","DmoIW7BcMZ3dS8kcgCk8W6rRwSka","WRuOWPBcRa/cOtuK","WQRcPLxdQreYeKuSeSkUW7NdJKRcPda","mYxcMJH7fCoZW4LAWOf9WOhcVq","WRTdWQy","W6KOWQe","W79RWQlcQCoGW5xcN07dSCoyW5tdO8oaW4emW60lW43dVCoYqG4","vSooB8kv","utrSsW","W7e/WQK7W6CuevWVkeRdQ8oHFmkdWPZcQq","W68YWQWGW6muc1m/iG","W5pcOSoSnW","W7LRWRxcVW","W7RcMCoS","iCocgmolWPGcWQGrvmkKcePmzSka","WRtdQ8orWRjvWOldLtxcNW"].concat(function(){return["W73cJSoksa","gg1YWOj3equPka","rIfQq8oXWQWfa8kw","y8o6sSkNsqVdNa","p8oByCkextJdUSo2W5RdMmo4WQihr8otW4fm","ySkEWOK","W71Lgeq","xM7cUwG","bCoogmoSWPGYWQOL","W6zZscVcQZK7WRZdOaXcWPtcRq","cNxdP8o/W4a9rCouiSo1gmosW6q","vG8ZW6TfeSooWQldTL3cUI7cUW","WPVdIX0mW4O7uWSVa8kLeq","tMRcVN0","kmk0WRddIN0","kSkjWP1rFxShW6BcP1TrW6nlj8koW4CDW7y","amo+W4bve8oqW4aUeWCS","WR1fWRGtW4ldQ8kqfSoV","D8o1gSoTrCo2CwtcRG","WPZcONPZWO1iamkon0u","W6G/WR4M","W6nHWRlcRSoqW5BcNwldSa","BSkFWP7cMCo+sLNdJ8oyWRb0W4ddOGG4W7CX","BG/cSey","CmkoWOJcMCoXCKpdImox","W55YW5aIWQRcHe8ouG","wxhdIe4SsCkTW5XzWQn8WR3cMc0e","a8ooh8o9WOiFWQyY","lSkCWOBcKG","WRmGWOdcUGu","W7bPduldQCo/W6xcG0bTAq","tGCMW7bm","BsXuW5O","WPdcV355WOfik8ki","kmkUlmkm","W7/cGmomBmoIWP3dGq","BmoObSoWDmoMD3dcSW8","W6ldS8kkumkEBG","rda2W54ysfXQASor","WQ/cNCk9W7DdWRLfomo7itVdSvy","xCk5W40BBq","W4W1WO/dUCkL","pSkyWOhcHW","vmokFSkqAK4","fwnYWOjpeH4ZoCkt","p8kLWQJdIN3cQSoUcSkDW7XMECkFWQtcJa","p8k9WQxdMwVcNCoyb8kuW70","BmoGg8oBwCo0DgpcOXKnahxcQZNdSwS","ugNdO8kJWPy","WPOHWPijWPG","kcCNW5ZdQ8kVW54xkNlcVXuwwCoqW4FdNa","psFdPMmPsCk0W5G","WQhdNCkjzgJcULZdTmoCdJf1nxFdRmoLla","d1bIWRSEtSkBWQ7dLM7cUtRcNq","AmoOhSoHDmoHCg3cOXntFW","B3xdMg0","W5jZW5HjW4/dK00+AuFdRmkJ","WRFdMCkrza","eMRcKCk0hHiCWR5vW7eVrmk1","5Pkf57En566Q6k6z","xWiN","wtP/","udZdLSo1ta"].concat(function(){return["tSkOWOJdSq","q2NdPCk1WPq6W6fbWOVdJSo1WQ8","W6LVWRlcQG","jmkUk8kYWOrscqbwW5LQgSoYwmomkhu","FSoIW7hcMtNdTCkfoCk9W4TZrSkp","kSkqWPBcKIVdMZVcIW","omkWWRFdNW","W5ZdO0OXW57cJg1pla","W7H1qsVcOGm6WRFcUrfgWPtcVgW","5PcX57E6566R6k+y","iSoFD8kEwq","wZPSt8oaWQCffSkB","W6lcJSoTeYZdU8oeWRqiW6mfWOy","hMn1WRHAgaa7kmkfW73cJNdcKeVdIGu","uYNdHCo0xxPCWOD3W40","CCoZba","WOFcTwbG","W7ZdV8kmwSkZASoPWOhcSK8","amoccmoTWPyzWQi","try4W6jAeW","omkQk8kz","rMhdVCk1WQW8W7C","wmoZga","m8ksWOC","sWWTfmop","W7aZWRS3W5K7cLiTiG","CcrgW4LXWRPIBLW","W7JdGSoNWRSrW74","x8kTW5mWW7a","vJtdGmoJrNPoWOT/W4W+C8kHBa","wZPSt8oaWQujhCkBW5RdRSoPWOTl","W4KUWO0","W5RdRu0lW7pcHwHDlgHBnSkJW7TyWRa2","nSkbWPLhrW","WQyKB1jiWRVdGvVcJGu","zNhdGwKCvSkNW69AWQ1VWRC","W6nVWRlcOSo5W5/cQ2FdQ8ocW5ldTa","WP/cV3q","WQtcVe/dLqKYdL9jvW","WRa1WOdcOa7cMtuMuG","FMBdGa","vSk0WPxdRwNcUG","WRGLWOq4WPlcJwSxwfRdSSkKaCotW5e","WRVdMCkwwM7cULtdISopbdPoiuFdRCo0mG","zHDQySoT","uM7cVLBdMf7dQNRdGbWJoH/cK8o9iCkl","W4tdRmkn","WOfrxa","ASkxWPVcL8o6sL/dNmoc","WQOYWQ3cQatcJq","W7HZse1JWPddTgK","W6OZWQK3W6KTb1G9DZu","eM/cLmk+ebmBW5GSWPK","xXyKW5XDe8omWQFdPW","W7bPduldQCogW7xcLeG","kSkjWP1rFxShW6BcP1S","W7PUqcdcQtuWWR/dTf8","WQtdKCkbyNNcQ0VcKCkB","WRyZWP4","WReKWOlcPHlcIG"]}())}())}();return _0x1b76=function(){return o},_0x1b76()}let body=$response[_0x1beb73(230,"@BHM")];if(body){switch(!0){case/api\/sns\/v\d\/note\/widgets/[_0x1beb73(261,"oy$p")]($request[_0x1beb73(217,"epuk")]):try{let o=JSON.parse(body);const c=[_0x1beb73(202,"1QWV"),_0x1beb73(157,"R^2C")];for(const n of c)o[_0x1beb73(243,"diuB")]?.[n]&&delete o.data[n];body=JSON.stringify(o)}catch{}break;case/api\/sns\/v\d\/note\/live_photo\/save/.test($request[_0x1beb73(150,"gaVm")]):try{let o=JSON[_0x1beb73(194,"!]Xq")](body);o.data[_0x1beb73(262,"p&n5")]=JSON[_0x1beb73(279,"G@y)")]($.getdata($[_0x1beb73(246,"xEHI")])),body=JSON.stringify(o)}catch{}break;case/api\/sns\/v\d\/note\/comment\/list/[_0x1beb73(268,"ihYT")]($request[_0x1beb73(237,"ihYT")]):try{let o=JSON[_0x1beb73(288,"]3o9")](body);for(let c of o[_0x1beb73(290,"Hlop")][_0x1beb73(281,"@BHM")])if(c[_0x1beb73(132,"Hlop")])for(let n of c[_0x1beb73(275,"xEHI")])n[_0x1beb73(139,"m8gg")]?.[_0x1beb73(153,"!]Xq")]&&(n[_0x1beb73(267,"@BHM")]=n[_0x1beb73(162,"**0(")][_0x1beb73(181,"kauu")],n[_0x1beb73(174,"AsmC")]=n[_0x1beb73(260,"YQVn")][_0x1beb73(175,"&4xC")]);body=JSON[_0x1beb73(272,"&4xC")](o)}catch{}break;case/api\/sns\/v\d\/note\/redtube/[_0x1beb73(208,"0J^2")]($request.url):try{let o=JSON.parse(body);for(let c of o.data[_0x1beb73(289,"*l)K")])c[_0x1beb73(214,"kauu")]&&(c.related_goods_num=0),c[_0x1beb73(159,"sA3^")]&&(c[_0x1beb73(205,"95Og")]=!1),c.media_save_config&&(c.media_save_config={disable_save:!1,disable_watermark:!0,disable_weibo_cover:!0}),c.share_info&&(c[_0x1beb73(242,"ihYT")].function_entries=[{type:_0x1beb73(135,"epuk")},{type:_0x1beb73(210,"*l)K")},{type:"copy_link"},{type:_0x1beb73(163,"D@g)")},{type:"video_speed"},{type:_0x1beb73(216,"1QWV")},{type:_0x1beb73(285,"Z*cL")},{type:_0x1beb73(193,"zBuC")}]);body=JSON.stringify(o)}catch{}break;case/api\/sns\/v\d\/note\/videofeed/[_0x1beb73(244,"D@g)")]($request[_0x1beb73(150,"gaVm")]):try{let o=JSON[_0x1beb73(297,"i5!z")](body);for(let c of o.data)c[_0x1beb73(187,"xa#z")]&&(c.related_goods_num=0),c.has_related_goods&&(c[_0x1beb73(295,"vqj6")]=!1),c[_0x1beb73(252,"ReZK")]&&(c[_0x1beb73(270,"&4xC")]={disable_save:!1,disable_watermark:!0,disable_weibo_cover:!0}),c[_0x1beb73(199,"sA3^")]&&(c[_0x1beb73(294,"p&n5")][_0x1beb73(234,"xa#z")]=[{type:_0x1beb73(207,"!T8!")},{type:"generate_image"},{type:"copy_link"},{type:_0x1beb73(229,"]3o9")},{type:"video_speed"},{type:"dislike"},{type:_0x1beb73(186,"6AOc")},{type:_0x1beb73(156,"(LTI")}]);body=JSON[_0x1beb73(265,"1aps")](o)}catch{}break;case/api\/sns\/v\d\/note\/feed/[_0x1beb73(208,"0J^2")]($request[_0x1beb73(237,"ihYT")]):try{let o=JSON[_0x1beb73(277,"6AOc")](body);for(let c of o[_0x1beb73(255,"oy$p")])if(c[_0x1beb73(203,"(LTI")]&&(c[_0x1beb73(300,"o6F(")]=0),c[_0x1beb73(172,"oy$p")]&&(c[_0x1beb73(130,"TgE9")]=!1),c[_0x1beb73(249,"UY9G")])for(let n of c[_0x1beb73(269,"D@g)")])n[_0x1beb73(241,"ihYT")]={disable_save:!1,disable_watermark:!0,disable_weibo_cover:!0};body=JSON[_0x1beb73(200,"Z*cL")](o)}catch{}break;case/api\/sns\/v\d\/note\/imagefeed/.test($request[_0x1beb73(217,"epuk")]):try{let o=JSON[_0x1beb73(310,"(LTI")](body),c=[];for(let n of o.data)if(n[_0x1beb73(231,"@BHM")]&&(n.related_goods_num=0),n[_0x1beb73(170,"o6F(")]&&(n[_0x1beb73(140,"UY9G")]=!1),n[_0x1beb73(138,"R^2C")]){for(let e of n[_0x1beb73(134,"sA3^")])if(e[_0x1beb73(298,"m)q&")]={disable_save:!1,disable_watermark:!0,disable_weibo_cover:!0},e[_0x1beb73(264,"95Og")]){for(let t of e.images_list)if(t[_0x1beb73(152,"ihYT")]){let s={};s[_0x1beb73(256,"xEHI")]=t[_0x1beb73(144,"Z*cL")][_0x1beb73(226,"ReZK")][_0x1beb73(233,"6AOc")],s[_0x1beb73(148,"8#X7")]=t[_0x1beb73(263,"gaVm")],s[_0x1beb73(142,"vqj6")]=t[_0x1beb73(182,"gaVm")].media.stream[_0x1beb73(206,"1aps")][0][_0x1beb73(161,"U$W4")],c[_0x1beb73(311,"fRa3")](s)}}}$[_0x1beb73(145,"xEHI")](JSON[_0x1beb73(266,"vqj6")](c),$[_0x1beb73(169,"i5!z")]),body=JSON[_0x1beb73(166,"6AOc")](o)}catch{}break;case/api\/sns\/v\d\/homefeed\/categories\?/[_0x1beb73(147,"TgE9")]($request[_0x1beb73(149,"uA2O")]):try{let o=JSON[_0x1beb73(137,"ReZK")](body);o[_0x1beb73(305,"o6F(")][_0x1beb73(292,"UY9G")]=o.data.categories[_0x1beb73(220,"o6F(")](c=>!(c.oid==_0x1beb73(257,"epuk")||c.oid==_0x1beb73(189,"diuB"))),body=JSON.stringify(o)}catch{}break;case/api\/sns\/v\d\/search\/hint/[_0x1beb73(143,"@BHM")]($request.url):try{let o=JSON[_0x1beb73(160,"gaVm")](body);o[_0x1beb73(223,"ReZK")]?.[_0x1beb73(284,"vqj6")]&&(o.data.hint_words=[{title:_0x1beb73(136,"]3o9"),type:_0x1beb73(201,"Z*cL"),search_word:_0x1beb73(307,"7^1X")}]),body=JSON.stringify(o)}catch{}break;case/api\/sns\/v\d\/search\/hot_list/[_0x1beb73(276,"Hlop")]($request[_0x1beb73(245,"m8gg")]):try{let o=JSON[_0x1beb73(296,"8#X7")](body);o[_0x1beb73(239,"F8iG")]={scene:"",title:"",items:[],host:"",background_color:{},word_request_id:""},body=JSON.stringify(o)}catch{}break;case/api\/sns\/v\d\/search\/trending/.test($request[_0x1beb73(185,"6AOc")]):try{let o=JSON.parse(body);o[_0x1beb73(271,"rsXN")]={title:"",queries:[],type:"",word_request_id:""},body=JSON[_0x1beb73(250,"R^2C")](o)}catch{}break;case/api\/sns\/v\d\/system_service\/splash_config/[_0x1beb73(280,"!]Xq")]($request[_0x1beb73(236,"1aps")]):try{let o=JSON[_0x1beb73(151,"!T8!")](body);o[_0x1beb73(248,"7^1X")].ads_groups[_0x1beb73(283,"7^1X")](c=>{const n=_0x1beb73,e={SBrHr:n(179,"(LTI"),jTfwd:n(286,"UY9G")};c[n(141,"(LTI")]=e[n(155,"jnqq")],c.end_time=e.jTfwd,c[n(192,"xEHI")]&&c[n(308,"G@y)")].forEach(t=>{const s=n;t.start_time=e[s(171,"R^2C")],t.end_time=e.jTfwd})}),body=JSON[_0x1beb73(196,"m)q&")](o)}catch{}break;case/api\/sns\/v\d\/homefeed\?/[_0x1beb73(133,"p&n5")]($request[_0x1beb73(167,"**0(")]):try{let o=JSON.parse(body);o.data=o[_0x1beb73(254,"kauu")][_0x1beb73(154,"zBuC")](c=>!c[_0x1beb73(176,"6AOc")]),body=JSON.stringify(o)}catch{}break;case/api\/sns\/v\d+\/search\/notes\?/.test($request[_0x1beb73(150,"gaVm")]):try{let o=JSON[_0x1beb73(224,"*l)K")](body);o[_0x1beb73(282,"TgE9")].items=o[_0x1beb73(129,"D@g)")].items[_0x1beb73(209,"xa#z")](c=>!c[_0x1beb73(253,"&4xC")]),body=JSON[_0x1beb73(247,"0J^2")](o)}catch{}break;case/api\/sns\/v\d\/system_service\/config\?/[_0x1beb73(261,"oy$p")]($request[_0x1beb73(174,"AsmC")]):try{let o=JSON[_0x1beb73(296,"8#X7")](body);const c=[_0x1beb73(204,"rsXN"),_0x1beb73(146,"G@y)"),"loading_img",_0x1beb73(180,"G@y)"),_0x1beb73(191,"G!EN"),_0x1beb73(259,"G@y)")];for(const n of c)o[_0x1beb73(303,"**0(")]?.[n]&&delete o[_0x1beb73(240,"R^2C")][n];body=JSON[_0x1beb73(266,"vqj6")](o)}catch{}break;default:$done({});break}$done({body})}else $done({});function Env(o,c){typeof process<"u"&&JSON.stringify(process.env).indexOf("GITHUB")>-1&&process.exit(0);class n{constructor(t){this.env=t}send(t,s="GET"){t=typeof t=="string"?{url:t}:t;let a=this.get;return s==="POST"&&(a=this.post),new Promise((i,r)=>{a.call(this,t,(d,x,l)=>{d?r(d):i(x)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(e,t){this.name=e,this.http=new n(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator=`
`,this.startTime=new Date().getTime(),Object.assign(this,t)}isNode(){return typeof module<"u"&&!!module.exports}isQuanX(){return typeof $task<"u"}isSurge(){return typeof $httpClient<"u"&&typeof $loon>"u"}isLoon(){return typeof $loon<"u"}toObj(e,t=null){try{return JSON.parse(e)}catch{return t}}toStr(e,t=null){try{return JSON.stringify(e)}catch{return t}}getjson(e,t){let s=t;if(this.getdata(e))try{s=JSON.parse(this.getdata(e))}catch{}return s}setjson(e,t){try{return this.setdata(JSON.stringify(e),t)}catch{return!1}}getScript(e){return new Promise(t=>{this.get({url:e},(s,a,i)=>t(i))})}runScript(e,t){return new Promise(s=>{let a=this.getdata("@chavy_boxjs_userCfgs.httpapi");a=a&&a.replace(/\n/g,"").trim();let i=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");i=i?1*i:20,i=t&&t.timeout?t.timeout:i;const[r,d]=a.split("@"),x={url:`http://${d}/v1/scripting/evaluate`,body:{script_text:e,mock_type:"cron",timeout:i},headers:{"X-Key":r,Accept:"*/*"}};this.post(x,(l,u,h)=>s(h))}).catch(s=>this.logErr(s))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const e=this.path.resolve(this.dataFile),t=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(e),a=!s&&this.fs.existsSync(t);if(!s&&!a)return{};{const i=s?e:t;try{return JSON.parse(this.fs.readFileSync(i))}catch{return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const e=this.path.resolve(this.dataFile),t=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(e),a=!s&&this.fs.existsSync(t),i=JSON.stringify(this.data);s?this.fs.writeFileSync(e,i):a?this.fs.writeFileSync(t,i):this.fs.writeFileSync(e,i)}}lodash_get(e,t,s){const a=t.replace(/\[(\d+)\]/g,".$1").split(".");let i=e;for(const r of a)if(i=Object(i)[r],i===void 0)return s;return i}lodash_set(e,t,s){return Object(e)!==e||(Array.isArray(t)||(t=t.toString().match(/[^.[\]]+/g)||[]),t.slice(0,-1).reduce((a,i,r)=>Object(a[i])===a[i]?a[i]:a[i]=Math.abs(t[r+1])>>0==+t[r+1]?[]:{},e)[t[t.length-1]]=s),e}getdata(e){let t=this.getval(e);if(/^@/.test(e)){const[,s,a]=/^@(.*?)\.(.*?)$/.exec(e),i=s?this.getval(s):"";if(i)try{const r=JSON.parse(i);t=r?this.lodash_get(r,a,""):t}catch{t=""}}return t}setdata(e,t){let s=!1;if(/^@/.test(t)){const[,a,i]=/^@(.*?)\.(.*?)$/.exec(t),r=this.getval(a),d=a?r==="null"?null:r||"{}":"{}";try{const x=JSON.parse(d);this.lodash_set(x,i,e),s=this.setval(JSON.stringify(x),a)}catch{const l={};this.lodash_set(l,i,e),s=this.setval(JSON.stringify(l),a)}}else s=this.setval(e,t);return s}getval(e){return this.isSurge()||this.isLoon()?$persistentStore.read(e):this.isQuanX()?$prefs.valueForKey(e):this.isNode()?(this.data=this.loaddata(),this.data[e]):this.data&&this.data[e]||null}setval(e,t){return this.isSurge()||this.isLoon()?$persistentStore.write(e,t):this.isQuanX()?$prefs.setValueForKey(e,t):this.isNode()?(this.data=this.loaddata(),this.data[t]=e,this.writedata(),!0):this.data&&this.data[t]||null}initGotEnv(e){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,e&&(e.headers=e.headers?e.headers:{},e.headers.Cookie===void 0&&e.cookieJar===void 0&&(e.cookieJar=this.ckjar))}get(e,t=()=>{}){e.headers&&(delete e.headers["Content-Type"],delete e.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(e.headers=e.headers||{},Object.assign(e.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(e,(s,a,i)=>{!s&&a&&(a.body=i,a.statusCode=a.status),t(s,a,i)})):this.isQuanX()?(this.isNeedRewrite&&(e.opts=e.opts||{},Object.assign(e.opts,{hints:!1})),$task.fetch(e).then(s=>{const{statusCode:a,statusCode:i,headers:r,body:d}=s;t(null,{status:a,statusCode:i,headers:r,body:d},d)},s=>t(s))):this.isNode()&&(this.initGotEnv(e),this.got(e).on("redirect",(s,a)=>{try{if(s.headers["set-cookie"]){const i=s.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();i&&this.ckjar.setCookieSync(i,null),a.cookieJar=this.ckjar}}catch(i){this.logErr(i)}}).then(s=>{const{statusCode:a,statusCode:i,headers:r,body:d}=s;t(null,{status:a,statusCode:i,headers:r,body:d},d)},s=>{const{message:a,response:i}=s;t(a,i,i&&i.body)}))}post(e,t=()=>{}){if(e.body&&e.headers&&!e.headers["Content-Type"]&&(e.headers["Content-Type"]="application/x-www-form-urlencoded"),e.headers&&delete e.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(e.headers=e.headers||{},Object.assign(e.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(e,(s,a,i)=>{!s&&a&&(a.body=i,a.statusCode=a.status),t(s,a,i)});else if(this.isQuanX())e.method="POST",this.isNeedRewrite&&(e.opts=e.opts||{},Object.assign(e.opts,{hints:!1})),$task.fetch(e).then(s=>{const{statusCode:a,statusCode:i,headers:r,body:d}=s;t(null,{status:a,statusCode:i,headers:r,body:d},d)},s=>t(s));else if(this.isNode()){this.initGotEnv(e);const{url:s,...a}=e;this.got.post(s,a).then(i=>{const{statusCode:r,statusCode:d,headers:x,body:l}=i;t(null,{status:r,statusCode:d,headers:x,body:l},l)},i=>{const{message:r,response:d}=i;t(r,d,d&&d.body)})}}time(e,t=null){const s=t?new Date(t):new Date;let a={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let i in a)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,RegExp.$1.length==1?a[i]:("00"+a[i]).substr((""+a[i]).length)));return e}msg(e=o,t="",s="",a){const i=r=>{if(!r)return r;if(typeof r=="string")return this.isLoon()?r:this.isQuanX()?{"open-url":r}:this.isSurge()?{url:r}:void 0;if(typeof r=="object"){if(this.isLoon()){let d=r.openUrl||r.url||r["open-url"],x=r.mediaUrl||r["media-url"];return{openUrl:d,mediaUrl:x}}if(this.isQuanX()){let d=r["open-url"]||r.url||r.openUrl,x=r["media-url"]||r.mediaUrl;return{"open-url":d,"media-url":x}}if(this.isSurge())return{url:r.url||r.openUrl||r["open-url"]}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,t,s,i(a)):this.isQuanX()&&$notify(e,t,s,i(a))),!this.isMuteLog){let r=[""];r.push(e),t&&r.push(t),s&&r.push(s),this.logs=this.logs.concat(r)}}log(...e){e.length>0&&(this.logs=[...this.logs,...e])}logErr(e,t){!this.isSurge()&&!this.isQuanX()&&!this.isLoon()?this.log("",`\u2757\uFE0F${this.name}, \u9519\u8BEF!`,e.stack):this.log("",`\u2757\uFE0F${this.name}, \u9519\u8BEF!`,e)}wait(e){return new Promise(t=>setTimeout(t,e))}done(e={}){const t=new Date().getTime(),s=(t-this.startTime)/1e3;(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(e)}}(o,c)}
