// https://raw.githubusercontent.com/ElementRef/AboutConfig/main/script/ddgksf2013.red.book.js
const $=new Env("\u5C0F\u7EA2\u4E66");var _0xodE="jsjiami.com.v7";function _0x2a46(o,c){const r=_0x1a76();return _0x2a46=function(e,t){e=e-227;let s=r[e];if(_0x2a46.UNTlhW===void 0){var a=function(l){const u="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let h="",p="";for(let f=0,S,n,k=0;n=l.charAt(k++);~n&&(S=f%4?S*64+n:n,f++%4)?h+=String.fromCharCode(255&S>>(-2*f&6)):0)n=u.indexOf(n);for(let f=0,S=h.length;f<S;f++)p+="%"+("00"+h.charCodeAt(f).toString(16)).slice(-2);return decodeURIComponent(p)};const x=function(l,u){let h=[],p=0,f,S="";l=a(l);let n;for(n=0;n<256;n++)h[n]=n;for(n=0;n<256;n++)p=(p+h[n]+u.charCodeAt(n%u.length))%256,f=h[n],h[n]=h[p],h[p]=f;n=0,p=0;for(let k=0;k<l.length;k++)n=(n+1)%256,p=(p+h[n])%256,f=h[n],h[n]=h[p],h[p]=f,S+=String.fromCharCode(l.charCodeAt(k)^h[(h[n]+h[p])%256]);return S};_0x2a46.IDdyfX=x,o=arguments,_0x2a46.UNTlhW=!0}const i=r[0],d=e+i,W=o[d];return W?s=W:(_0x2a46.gTdSnv===void 0&&(_0x2a46.gTdSnv=!0),s=_0x2a46.IDdyfX(s,t),o[d]=s),s},_0x2a46(o,c)}function _0x1a76(){const o=function(){return[_0xodE,"prjuEsBHjHiDkalROmCniKM.DcFXgokmX.IpvkF7==","W5lcSs4/","uZi5r8kAe3i","zCo2xCoo","BSoYEt96WOFdNa","W6zVi8o4","btWIsSkjmwe","nvNdU8od","ytZdKmomuuldQaqwWONdICkeW6PQi8kHwq","WPRdRSoLW45lWQFdJq","rezlW6rIaca0kam","W4SLW6LQFSkotmk6W67dU1G","gcm6tSkLma","W4/dP8oesW","W5FdS0RdIuOkcvbXuNqQ","WO/dMZa","W4RdLM1oW4RcJr7cIgZcNrtdVSohW6/dV8kWamkKW6RcJmkpgSkwW4jqhdFdKq5a5Pom57EF562y6k+NW5ZdPq","W6TTfmktW5fRn8oVWOW","o8khWOpcL31WpvBdPq","AmoYyd9dWOVdNCkEW51e","W4JcSdxdRGfnWPbZF8kcW7/cSmo6WRvWjNW","W7nOoq","gmkKWOjwo8kgW4OpWP9BEa","W6bVo2NdN8o/W4BcGmk9WOhdNbtcRmkxW4H2","W7bZmw/dHmojW5RcNSkhWOhdLG","E1lcHZrZ","emkQWPDt","pCk+W6mWirnDWORdVG","m1NdPmowW6tdSNrwWPldRLW/seTpW6DJ","kSoDWRm3","jZ/dN8ooW7tcPJxdHLO","o8kWW6qkdbPyWPJdVLRdTSoGW4VcMSklW6tcVG","C8oVW5KiW7zNWQFcJqq","W73dICkLdW","W4hdMtfrAK8u","W4xcLmoQ","c8keWPVdIJKWW5bQWOxcSmktzeniW60","pJFdJ8oaW6FcTXNcIHxdKSoOWOy","DeRcSq","WQ9EW4tdKCkRhmovWOJcQG","iSkyg8oVwSocWPmpgSo0ierP","BttdKmo/sKZdOq","W77cSWK4","FtZdGCo1rKldOf9c","W5/dO8odxG","thBcP0yO","FKZcUNGfWQC","W5/dSSoCsJpcIr4YW7uxyW","W7v5x8kUr8oUW6fxW6/cIthdRq","lMPgWPdcPa","W4lcUYOLD8kBW6KxW5FcQCoSda","CmonxSk+","W701Dmk/mCokW7RcQCo3kG","DSkJWQSIW6lcI8okW47dPCku","W7r/jwxdMCoI","WRrdW5W","WPKGiu8","y1RcKI96WPJdTCkiWOuEWRfnpq","WQW0smkfW6DeoCoiWPxdGL/dNIf1","W6T5rSkVECoQW6e","gHSC","W5BcTs84FG","W7OVCmkJmmo8W73cOmkRzq","W4ldUSoowq","BCo4tG","W6aYyCkOc8o8W7C","WRtdLKu","W5NdO8oCsWtdIM3dRMxcMX/dLcDbmSk3ea","g8kBWOFdKHu0W6zNWOe","W6G/W6hdVqW","W5/dI21yW5/cPq","W7TXrSkuB8oXW7jqW7C"].concat(function(){return["pwJcLSkGeXhdSWieWQFdUmkl","W44NW68","pLiHvmoNWRpcLCoCW7m","hHuiWOiGuhXLALCQWR3cT8kJW4JcMNS","WQ7dJu0","hIe6","W4ddLMLyW6hcUbJcK33cGghcQG","WPOEW45GW40hh8odgG","AZ8aW5VdSwTPwSo8htrFWPG","WQbwcSkNW4XjW7xcLgW","WPKlW456W4y","WQJdI0ddScva","zmk7WROpW7pcVmogW43dPG","ymojwCkR","WOSOmuS7WPu0waSkdKPUWQW","nmkRogHZWP3dR8k7WOuJ","W70Pz8kKoSoYW7RcOCoO","W740DSk5iCoNW7BcTa","WQ7dP0HQWPTFW6BcLCofW7/dQXi","fXai","BvFcUG","fw/dUCo9W5G","WRjfW4ldNCkAf8ovWP3cPW","Cs58kSoZW6PrlHRdGYhdOKq","bSkUWO9tjSknW4KpWPfzCmkpFtv0vCk6","W5e8W7PKDCkAESkWW74","W6P1mG","Dmo0W4GaW5O","gCkqWOtdTc0QW6b8WPRcRq","WQjqW4tdKCkth8ooWPlcUZi","W5tdUvpdGLqehffXtMSNlqG","jfi2umo6","B1lcGsy","WP/dHZJdMmo7W6PiW50","cmkvWOxdMc8","WORdIc7dTmoQ","gCkUWODBmW","WQLEW53dKCksfCozWP/dSdiFWPdcSG","W57dTSotwqNcMbqLW7vE","W4tdR8ou","WPxdOSo/W54qW7m","W6NcJHJcTgqlW43cKtBdHePKWRC","W7NdO8ouAb/dGgldOwRcMWtdNX97jq","WRC4smkjW6LelSogWPtdIwZdKI9/W5RdNSkG","WQhdOwlcHXZcS8o4W7jJW5q","bZWX","W6X5qCk/","W5ldTSooqt/cHb4","W48TW6vOrmknCSk1W6ZdQuVdQq","W4JcSdxdRGe","m8oDWQqQzg7cJ3BcV8orcvSRCmoUW5yb","C8oPBcHrWRhdJmktWOOb","EtZdKCoGrG","WRnuW5tdLSkBh8oxWQtcQZisWO3cNCocrSk6WQvmz3O7W4C","gXeFWRqZ","ESknWQy","WQDuD1VcIZpcRHHCW5FdMmkVW5C","B8oLW4emW51UWQRcOrFdKwpcGmoOaL7cVSkE","ymkLWQ4pW7pcVCooW4u","gwFdLYBdOb/cPCkTvLVcV8kRadPVj8oF","BYzRemoUW5buiqJdIrRdIXfsWPRdSg8","WPpdNtNdQSo8","WQ5RWQxcVLPHWOpdVazNWR9fWPW","W4tdUSoztZNcGbaiW6rEjK7dVN0ksSojECo3W7ddGLa","BmoYAG","W6VdJCk9d8oMW78Jd8oSW59rWRVcPmkguCoCdq","WRXjbW","WOqpW5HGW4i/bCoefuDUW7VdPY/cVexcQG","imkLW6u8ebHDWP/dSW","WRi8x8k/W7P+mCogWPBdIvFdRID+W5pdK8k0","mGtdGcLXWPpdHCkYWOm","imobW4FdIW","W7lcSW4gW5KmW73cK8oxW5hdMH0SW5JdSSk6W6W"].concat(function(){return["WQjjyvFcIGVcRHbd","qmk4hCkOW63dI0GvWO0D","WPpdOgLZk8oeWRGrW4hcPCoriXe","W6PZi2/dTmoMW4hcGCkwWOS","WOSOmuS7WPu7wq","oumGsq","rCk5gmk/W6FdI1ilWO4xeW","W7SVEq","i8owW7G4WO3dJmoZfSotWQZdL8koW6u","CSoJw8okWOqB","W4P5vSkjD8oXW6TIW63cJdpdP8k5WRRcJW","W6O8yCkS","WONdRSoIW54","5PcV57EY562O6k2Q","gwFdIYJdPG4","W4pdP8odDqldIMxdKhBcKrtdRZnXm8kMdG","W4RdLNnyW6hcOrq","WQ5EbCkLW5T3W7tcG18nA8odWQfc","W4pdR8oExI/dMgBdG2BcHW","WRPpgCkPW4DXW6NcGhK","fCkVWPa","W4xdT8oCxZpcSbi5W7Dc","ySoftSk6amkSW5iMcSo1da","W7hcVItdMspcQ8ok","aSk3e8k1W6ZdP34yWOOaeZrdjq","W7W/W6FdRW","W4tdUSozwspcJr5TWRe","W5qHW6XODmkIDCkZW6ldRe7dRvdcHa","WOefW4HwW48jbCorwqi","ECoHW5Km","WP4ZomoNWOBcU1O","WOxcQaZcLXnuwM1Bq04ikq","WOZdGdJdOSoGW5XmW5BcQKVcTSkCW7S","WRfqW4ldH8kr","pmkwWOlcIG","nMPhWRZcSZ41wCobar9dWOXWWQyvWPm","WQfAgmkFW5TZW6ZcH3qbySo9WQfiq8kPha","FetcOM0","WR8TygtdJmo0W77cVmkq","5Pgr57se562h6k6n","mMrt","WPvDW7K","A1hcT3GvWQy","fCkrWPpdGIS","WRBdMKxdRtfSWO7cLIJdQxjcWORdSmkwota","W67cTW4T","WR/dNLxdPq","W6RdNmkJb8o8W70UnSoY","W7RdH8kHf8onW7yUpSoG","AdFdLmobW53cMte","kCkxWOi","dsy4tmkImwRdOx50B3hdMfvduW","W6BcOYxdNctcP8ogW5v4","aHeiWQK","bCoLsSoQWRVcPbe3WOuuiXfM","btWIsSkjngZdVfu","W5yTW7T5","hmkvWOpdIG","WONdGt3dTCoQW5XmW5BcQKS","zSkQWR41W6dcU8orW4NdPSki","W4BdRLe","W5FdVuNdHLu","xSk1gmkZW6NdI1iAWP0xkaHAEwxdHre","W4JcTXKBW4qgW7RcPmokW5ddMY0aW5ldPa","W4ZcPG7dPGrH","lN5hWOS","W4tdHcDDAXjDW69O","WQPSWQpcTLbNWOdcHL4W","W4ddTSozsdNcSbiZ","W7xcObq+W4ihW47cH8orW5G","BCo4AtneWRhdI8kBWPebW69OvtBdPmoaeG"]}())}())}();return _0x1a76=function(){return o},_0x1a76()}const _0x314a85=_0x2a46;(function(o,c,r,e,t,s,a){return o=o>>7,s="hs",a="hs",function(i,d,W,x,l){const u=_0x2a46;x="tfi",s=x+s,l="up",a+=l,s=W(s),a=W(a),W=0;const h=i();for(;--e+d;)try{x=parseInt(u(412,"pf@z"))/1+-parseInt(u(438,"iJ!d"))/2*(parseInt(u(249,"gcs["))/3)+parseInt(u(362,"ccuD"))/4+-parseInt(u(306,"9aUy"))/5+-parseInt(u(402,"PND["))/6+-parseInt(u(260,"eg&o"))/7*(parseInt(u(301,")!O&"))/8)+-parseInt(u(339,"Texz"))/9*(-parseInt(u(435,")oa1"))/10)}catch{x=W}finally{if(l=h[s](),o<=e)W?t?x=l:t=l:W=l;else if(W==t.replace(/[krRFlgDIECKOBnpuMXH=]/g,"")){if(x===d){h["un"+s](l);break}h[a](l)}}}(r,c,function(i,d,W,x,l,u,h){return d="split",i=arguments[0],i=i[d](""),W="reverse",i=i[W]("v"),x="join",i[x]("")})})(25088,925923,_0x1a76,198),_0x1a76&&(_0xodE=4341);$.RedBookPhotoKey=_0x314a85(242,"Bhxq"),$[_0x314a85(315,"pf@z")]=_0x314a85(232,")OOH");let body=$response.body;if(body){switch(!0){case/api\/sns\/v\d+\/note\/widgets/.test($request[_0x314a85(245,"MApI")]):try{let o=JSON[_0x314a85(391,"o]2Q")](body);const c=[_0x314a85(276,"9aUy"),"note_next_step"];for(const r of c)o[_0x314a85(335,"8ZDY")]?.[r]&&delete o[_0x314a85(364,"pf@z")][r];body=JSON[_0x314a85(271,"MApI")](o)}catch{}break;case/api\/sns\/v\d+\/note\/live_photo\/save/[_0x314a85(407,"ccuD")]($request[_0x314a85(414,"lvPD")]):try{let o=JSON.parse(body);o[_0x314a85(355,"4FtD")][_0x314a85(313,"!E*K")]=JSON.parse($[_0x314a85(282,"tCS0")]($[_0x314a85(436,"8ZDY")])),body=JSON.stringify(o)}catch{}break;case/api\/sns\/v\d+\/note\/video\/save/.test($request[_0x314a85(398,")oa1")]):try{let o=JSON.parse(body),c=JSON.parse($[_0x314a85(331,"rjrt")]($.RedBookVideoKey));for(let r of c)r[_0x314a85(387,"0KxW")]==o.data.note_id&&(o[_0x314a85(309,"tMIc")]=r);body=JSON[_0x314a85(416,")OOH")](o)}catch{}break;case/api\/sns\/v\d+\/note\/comment\/list/[_0x314a85(305,"Kz&N")]($request.url):try{let o=JSON.parse(body);for(let c of o[_0x314a85(281,"#I@z")].comments)if(c[_0x314a85(411,"0KxW")])for(let r of c.pictures)r[_0x314a85(370,"WU2n")]?.[_0x314a85(403,"MApI")]&&(r[_0x314a85(321,"pf@z")]=r.meme_package.image_url,r[_0x314a85(398,")oa1")]=r[_0x314a85(227,"q4P4")].image_url);body=JSON[_0x314a85(304,"iJ!d")](o)}catch{}break;case/api\/sns\/v\d+\/note\/redtube/[_0x314a85(351,"INyn")]($request[_0x314a85(312,"!E*K")]):try{let o=JSON[_0x314a85(391,"o]2Q")](body);for(let c of o.data[_0x314a85(421,"#I@z")])c[_0x314a85(244,"4FtD")]&&(c[_0x314a85(350,"KurR")]=0),c.has_related_goods&&(c[_0x314a85(287,"PND[")]=!1),c[_0x314a85(437,"Texz")]&&(c[_0x314a85(296,")oa1")]={disable_save:!1,disable_watermark:!0,disable_weibo_cover:!0}),c.share_info&&(c[_0x314a85(375,"Go$S")][_0x314a85(345,"&TW4")]=[{type:_0x314a85(380,"Texz")},{type:"generate_image"},{type:_0x314a85(390,"tMIc")},{type:"native_voice"},{type:_0x314a85(258,"9aUy")},{type:_0x314a85(441,"Bhxq")},{type:_0x314a85(376,"&TW4")},{type:_0x314a85(279,"q4P4")}]);body=JSON.stringify(o)}catch{}break;case/api\/sns\/v\d+\/note\/videofeed/[_0x314a85(385,"Bhxq")]($request[_0x314a85(377,")OOH")]):try{let o=JSON.parse(body),c=[];for(let r of o[_0x314a85(378,"8Bpb")])if(r.related_goods_num&&(r.related_goods_num=0),r[_0x314a85(288,"MApI")]&&(r[_0x314a85(397,"Kz&N")]=!1),r.media_save_config&&(r[_0x314a85(229,"INyn")]={disable_save:!1,disable_watermark:!0,disable_weibo_cover:!0}),r[_0x314a85(273,"Bhxq")]&&(r[_0x314a85(253,"9aUy")][_0x314a85(345,"&TW4")]=[{type:_0x314a85(380,"Texz")},{type:_0x314a85(424,"!E*K")},{type:_0x314a85(300,"4FtD")},{type:"native_voice"},{type:_0x314a85(346,"&TW4")},{type:_0x314a85(275,"iJ!d")},{type:_0x314a85(266,"LCQV")},{type:"video_feedback"}]),r.video_info_v2?.media?.stream?.h265){let e={};e[_0x314a85(294,"lvPD")]=2,e[_0x314a85(328,"I^iS")]=r.id,e[_0x314a85(336,"!E*K")]=r[_0x314a85(284,"p1%L")][_0x314a85(233,"Kz&N")][_0x314a85(261,"M8nG")][_0x314a85(327,"0KxW")][0].master_url,c[_0x314a85(317,"PND[")](e)}$.setdata(JSON[_0x314a85(396,"C%7H")](c),$.RedBookVideoKey),body=JSON[_0x314a85(247,"F5$s")](o)}catch{}break;case/api\/sns\/v\d+\/note\/tabfeed/[_0x314a85(366,"8ZDY")]($request.url):try{let o=JSON[_0x314a85(429,"p1%L")](body),c=[];for(let r of o[_0x314a85(289,"lvPD")].items)if(r[_0x314a85(238,"LCQV")]&&(r[_0x314a85(236,"#I@z")]=0),r[_0x314a85(251,"pf@z")]&&(r[_0x314a85(353,"F5$s")]=!1),r[_0x314a85(322,"PB#I")]&&(r[_0x314a85(342,"!Jyz")]={disable_save:!1,disable_watermark:!0,disable_weibo_cover:!0}),r[_0x314a85(374,"0KxW")]&&(r[_0x314a85(310,"p1%L")][_0x314a85(303,"I^iS")]=[{type:"video_download"},{type:_0x314a85(269,"MApI")},{type:"copy_link"},{type:_0x314a85(359,")!O&")},{type:_0x314a85(274,"ccuD")},{type:_0x314a85(363,"t2yj")},{type:"report"},{type:_0x314a85(408,"8Bpb")}]),r[_0x314a85(417,"HVX3")]?.[_0x314a85(228,"!Jyz")]?.[_0x314a85(392,"H2!J")]?.[_0x314a85(250,"USyc")]){let e={};e[_0x314a85(405,")oa1")]=2,e[_0x314a85(326,"PB#I")]=r.id,e[_0x314a85(372,"ksO9")]=r[_0x314a85(235,"9B8h")][_0x314a85(295,"tMIc")][_0x314a85(392,"H2!J")].h265[0].master_url,c.push(e)}$.setdata(JSON[_0x314a85(419,"q4P4")](c),$[_0x314a85(262,"WU2n")]),body=JSON.stringify(o)}catch{}break;case/api\/sns\/v\d+\/note\/feed/[_0x314a85(297,"pf@z")]($request.url):try{let o=JSON[_0x314a85(285,")OOH")](body);for(let c of o.data)if(c.related_goods_num&&(c[_0x314a85(418,"KRcl")]=0),c[_0x314a85(267,"8ZDY")]&&(c[_0x314a85(239,"HVX3")]=!1),c[_0x314a85(354,"#I@z")])for(let r of c[_0x314a85(349,"F5$s")])r[_0x314a85(246,"iy@S")]={disable_save:!1,disable_watermark:!0,disable_weibo_cover:!0};body=JSON[_0x314a85(252,"9B8h")](o)}catch{}break;case/api\/sns\/v\d+\/note\/imagefeed/.test($request[_0x314a85(377,")OOH")]):try{let o=JSON[_0x314a85(285,")OOH")](body),c=[];for(let r of o.data)if(r[_0x314a85(418,"KRcl")]&&(r[_0x314a85(389,"8ZDY")]=0),r[_0x314a85(330,"t2yj")]&&(r[_0x314a85(248,"Texz")]=!1),r[_0x314a85(307,"I^iS")]){for(let e of r[_0x314a85(361,")OOH")])if(e[_0x314a85(314,"9aUy")]={disable_save:!1,disable_watermark:!0,disable_weibo_cover:!0},e.images_list){for(let t of e[_0x314a85(333,"q4P4")])if(t.live_photo){let s={};s[_0x314a85(256,"8Bpb")]=t.live_photo[_0x314a85(430,"KRcl")][_0x314a85(320,"Bhxq")],s[_0x314a85(268,"H2!J")]=t.live_photo_file_id,s.url=t[_0x314a85(255,"&TW4")].media.stream.h265[0].master_url,c.push(s)}}}$[_0x314a85(381,"WU2n")](JSON.stringify(c),$.RedBookPhotoKey),body=JSON.stringify(o)}catch{}break;case/api\/sns\/v\d+\/homefeed\/categories\?/[_0x314a85(329,"KurR")]($request[_0x314a85(293,"j51%")]):try{let o=JSON[_0x314a85(428,"tMIc")](body);o[_0x314a85(298,")oa1")][_0x314a85(311,"Go$S")]=o[_0x314a85(277,"o]2Q")][_0x314a85(423,")OOH")].filter(c=>!(c[_0x314a85(388,")oa1")]==_0x314a85(431,")OOH")||c[_0x314a85(433,"8ZDY")]=="homefeed.live")),body=JSON[_0x314a85(299,"4FtD")](o)}catch{}break;case/api\/sns\/v\d+\/search\/hint/[_0x314a85(264,"rjrt")]($request[_0x314a85(399,"I^iS")]):try{let o=JSON.parse(body);o[_0x314a85(263,"0KxW")]?.[_0x314a85(432,"Bhxq")]&&(o[_0x314a85(325,"M8nG")][_0x314a85(270,"8ZDY")]=[{title:_0x314a85(291,"C%7H"),type:_0x314a85(338,"H2!J"),search_word:_0x314a85(265,"9aUy")}]),body=JSON[_0x314a85(401,"iy@S")](o)}catch{}break;case/api\/sns\/v\d+\/search\/hot_list/[_0x314a85(257,"C%7H")]($request.url):try{let o=JSON.parse(body);o.data={scene:"",title:"",items:[],host:"",background_color:{},word_request_id:""},body=JSON[_0x314a85(396,"C%7H")](o)}catch{}break;case/api\/sns\/v\d+\/search\/trending/[_0x314a85(286,"USyc")]($request.url):try{let o=JSON[_0x314a85(347,"gcs[")](body);o[_0x314a85(325,"M8nG")]={title:"",queries:[],type:"",word_request_id:""},body=JSON[_0x314a85(247,"F5$s")](o)}catch{}break;case/api\/sns\/v\d+\/system_service\/splash_config/.test($request.url):try{let o=JSON[_0x314a85(371,"PND[")](body);o[_0x314a85(426,"gcs[")][_0x314a85(422,"tMIc")].forEach(c=>{const r=_0x314a85,e={TSqJH:r(319,"o]2Q"),jtpVZ:r(332,"Kz&N")};c[r(230,"PB#I")]=e[r(415,"KurR")],c[r(427,"p1%L")]=e.jtpVZ,c[r(302,"USyc")]&&c[r(413,"Kz&N")].forEach(t=>{const s=r;t.start_time=e[s(367,"lvPD")],t[s(237,"Go$S")]=e.jtpVZ})}),body=JSON[_0x314a85(410,"0KxW")](o)}catch{}break;case/api\/sns\/v\d+\/homefeed\?/[_0x314a85(440,"WU2n")]($request[_0x314a85(337,"p1%L")]):try{let o=JSON[_0x314a85(383,"ksO9")](body);o[_0x314a85(348,"KRcl")]=o[_0x314a85(309,"tMIc")][_0x314a85(368,"lvPD")](c=>!c[_0x314a85(316,"!Jyz")]),body=JSON[_0x314a85(318,"S2Iw")](o)}catch{}break;case/api\/sns\/v\d+\/search\/notes\?/[_0x314a85(323,"ksO9")]($request[_0x314a85(343,"&TW4")]):try{let o=JSON[_0x314a85(231,"t2yj")](body);o[_0x314a85(373,"ccuD")][_0x314a85(240,"p1%L")]=o.data[_0x314a85(425,"C%7H")].filter(c=>!c[_0x314a85(272,"KRcl")]),body=JSON[_0x314a85(271,"MApI")](o)}catch{}break;case/api\/sns\/v\d+\/system_service\/config\?/[_0x314a85(308,"q4P4")]($request[_0x314a85(259,"0KxW")]):try{let o=JSON[_0x314a85(404,"iy@S")](body);const c=["store",_0x314a85(334,"I^iS"),_0x314a85(344,"KRcl"),_0x314a85(406,"Go$S"),_0x314a85(393,"WU2n"),_0x314a85(379,"gcs[")];for(const r of c)o.data?.[r]&&delete o.data[r];body=JSON[_0x314a85(340,"USyc")](o)}catch{}break;default:$done({});break}$done({body})}else $done({});function Env(o,c){typeof process<"u"&&JSON.stringify(process.env).indexOf("GITHUB")>-1&&process.exit(0);class r{constructor(t){this.env=t}send(t,s="GET"){t=typeof t=="string"?{url:t}:t;let a=this.get;return s==="POST"&&(a=this.post),new Promise((i,d)=>{a.call(this,t,(W,x,l)=>{W?d(W):i(x)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(e,t){this.name=e,this.http=new r(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator=`
`,this.startTime=new Date().getTime(),Object.assign(this,t)}isNode(){return typeof module<"u"&&!!module.exports}isQuanX(){return typeof $task<"u"}isSurge(){return typeof $httpClient<"u"&&typeof $loon>"u"}isLoon(){return typeof $loon<"u"}toObj(e,t=null){try{return JSON.parse(e)}catch{return t}}toStr(e,t=null){try{return JSON.stringify(e)}catch{return t}}getjson(e,t){let s=t;if(this.getdata(e))try{s=JSON.parse(this.getdata(e))}catch{}return s}setjson(e,t){try{return this.setdata(JSON.stringify(e),t)}catch{return!1}}getScript(e){return new Promise(t=>{this.get({url:e},(s,a,i)=>t(i))})}runScript(e,t){return new Promise(s=>{let a=this.getdata("@chavy_boxjs_userCfgs.httpapi");a=a&&a.replace(/\n/g,"").trim();let i=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");i=i?1*i:20,i=t&&t.timeout?t.timeout:i;const[d,W]=a.split("@"),x={url:`http://${W}/v1/scripting/evaluate`,body:{script_text:e,mock_type:"cron",timeout:i},headers:{"X-Key":d,Accept:"*/*"}};this.post(x,(l,u,h)=>s(h))}).catch(s=>this.logErr(s))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const e=this.path.resolve(this.dataFile),t=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(e),a=!s&&this.fs.existsSync(t);if(!s&&!a)return{};{const i=s?e:t;try{return JSON.parse(this.fs.readFileSync(i))}catch{return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const e=this.path.resolve(this.dataFile),t=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(e),a=!s&&this.fs.existsSync(t),i=JSON.stringify(this.data);s?this.fs.writeFileSync(e,i):a?this.fs.writeFileSync(t,i):this.fs.writeFileSync(e,i)}}lodash_get(e,t,s){const a=t.replace(/\[(\d+)\]/g,".$1").split(".");let i=e;for(const d of a)if(i=Object(i)[d],i===void 0)return s;return i}lodash_set(e,t,s){return Object(e)!==e||(Array.isArray(t)||(t=t.toString().match(/[^.[\]]+/g)||[]),t.slice(0,-1).reduce((a,i,d)=>Object(a[i])===a[i]?a[i]:a[i]=Math.abs(t[d+1])>>0==+t[d+1]?[]:{},e)[t[t.length-1]]=s),e}getdata(e){let t=this.getval(e);if(/^@/.test(e)){const[,s,a]=/^@(.*?)\.(.*?)$/.exec(e),i=s?this.getval(s):"";if(i)try{const d=JSON.parse(i);t=d?this.lodash_get(d,a,""):t}catch{t=""}}return t}setdata(e,t){let s=!1;if(/^@/.test(t)){const[,a,i]=/^@(.*?)\.(.*?)$/.exec(t),d=this.getval(a),W=a?d==="null"?null:d||"{}":"{}";try{const x=JSON.parse(W);this.lodash_set(x,i,e),s=this.setval(JSON.stringify(x),a)}catch{const l={};this.lodash_set(l,i,e),s=this.setval(JSON.stringify(l),a)}}else s=this.setval(e,t);return s}getval(e){return this.isSurge()||this.isLoon()?$persistentStore.read(e):this.isQuanX()?$prefs.valueForKey(e):this.isNode()?(this.data=this.loaddata(),this.data[e]):this.data&&this.data[e]||null}setval(e,t){return this.isSurge()||this.isLoon()?$persistentStore.write(e,t):this.isQuanX()?$prefs.setValueForKey(e,t):this.isNode()?(this.data=this.loaddata(),this.data[t]=e,this.writedata(),!0):this.data&&this.data[t]||null}initGotEnv(e){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,e&&(e.headers=e.headers?e.headers:{},e.headers.Cookie===void 0&&e.cookieJar===void 0&&(e.cookieJar=this.ckjar))}get(e,t=()=>{}){e.headers&&(delete e.headers["Content-Type"],delete e.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(e.headers=e.headers||{},Object.assign(e.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(e,(s,a,i)=>{!s&&a&&(a.body=i,a.statusCode=a.status),t(s,a,i)})):this.isQuanX()?(this.isNeedRewrite&&(e.opts=e.opts||{},Object.assign(e.opts,{hints:!1})),$task.fetch(e).then(s=>{const{statusCode:a,statusCode:i,headers:d,body:W}=s;t(null,{status:a,statusCode:i,headers:d,body:W},W)},s=>t(s))):this.isNode()&&(this.initGotEnv(e),this.got(e).on("redirect",(s,a)=>{try{if(s.headers["set-cookie"]){const i=s.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();i&&this.ckjar.setCookieSync(i,null),a.cookieJar=this.ckjar}}catch(i){this.logErr(i)}}).then(s=>{const{statusCode:a,statusCode:i,headers:d,body:W}=s;t(null,{status:a,statusCode:i,headers:d,body:W},W)},s=>{const{message:a,response:i}=s;t(a,i,i&&i.body)}))}post(e,t=()=>{}){if(e.body&&e.headers&&!e.headers["Content-Type"]&&(e.headers["Content-Type"]="application/x-www-form-urlencoded"),e.headers&&delete e.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(e.headers=e.headers||{},Object.assign(e.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(e,(s,a,i)=>{!s&&a&&(a.body=i,a.statusCode=a.status),t(s,a,i)});else if(this.isQuanX())e.method="POST",this.isNeedRewrite&&(e.opts=e.opts||{},Object.assign(e.opts,{hints:!1})),$task.fetch(e).then(s=>{const{statusCode:a,statusCode:i,headers:d,body:W}=s;t(null,{status:a,statusCode:i,headers:d,body:W},W)},s=>t(s));else if(this.isNode()){this.initGotEnv(e);const{url:s,...a}=e;this.got.post(s,a).then(i=>{const{statusCode:d,statusCode:W,headers:x,body:l}=i;t(null,{status:d,statusCode:W,headers:x,body:l},l)},i=>{const{message:d,response:W}=i;t(d,W,W&&W.body)})}}time(e,t=null){const s=t?new Date(t):new Date;let a={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let i in a)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,RegExp.$1.length==1?a[i]:("00"+a[i]).substr((""+a[i]).length)));return e}msg(e=o,t="",s="",a){const i=d=>{if(!d)return d;if(typeof d=="string")return this.isLoon()?d:this.isQuanX()?{"open-url":d}:this.isSurge()?{url:d}:void 0;if(typeof d=="object"){if(this.isLoon()){let W=d.openUrl||d.url||d["open-url"],x=d.mediaUrl||d["media-url"];return{openUrl:W,mediaUrl:x}}if(this.isQuanX()){let W=d["open-url"]||d.url||d.openUrl,x=d["media-url"]||d.mediaUrl;return{"open-url":W,"media-url":x}}if(this.isSurge())return{url:d.url||d.openUrl||d["open-url"]}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,t,s,i(a)):this.isQuanX()&&$notify(e,t,s,i(a))),!this.isMuteLog){let d=[""];d.push(e),t&&d.push(t),s&&d.push(s),this.logs=this.logs.concat(d)}}log(...e){e.length>0&&(this.logs=[...this.logs,...e])}logErr(e,t){!this.isSurge()&&!this.isQuanX()&&!this.isLoon()?this.log("",`\u2757\uFE0F${this.name}, \u9519\u8BEF!`,e.stack):this.log("",`\u2757\uFE0F${this.name}, \u9519\u8BEF!`,e)}wait(e){return new Promise(t=>setTimeout(t,e))}done(e={}){const t=new Date().getTime(),s=(t-this.startTime)/1e3;(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(e)}}(o,c)}
